const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-1JC7-8RG.js","assets/chunks/chunk-FYqBOUPc.js","assets/chunks/chunk-CdcH6iod.js","assets/chunks/chunk-BY0yWiXl.js","assets/chunks/chunk-B_Z43jOW.js","assets/chunks/chunk-BKIMisdM.js","assets/chunks/chunk-DBQ_J0i3.js","assets/chunks/chunk-kOh39j1J.js","assets/static/layouts_style-b34a8e57.D8B4iL9t.css","assets/static/layouts_panda-c5b34b81.DPjHBajn.css","assets/chunks/chunk-BDRzeg3d.js","assets/chunks/chunk-DmlFjuBC.js","assets/chunks/chunk-DF5K452e.js","assets/chunks/chunk-D-ZhOCA6.js","assets/chunks/chunk-B5FzeXPM.js","assets/chunks/chunk-D4mw09ce.js","assets/static/katex-afcc0501.OjSBcM80.css","assets/chunks/chunk-Bpk_WgsH.js","assets/chunks/chunk-B6vbOnME.js","assets/chunks/chunk-_f-aslPo.js","assets/chunks/chunk-Dgbnc1-P.js","assets/chunks/chunk-C4sJPX9E.js","assets/chunks/chunk-DdO30NAs.js","assets/chunks/chunk-EnIIBgU-.js","assets/chunks/chunk-vbLDVn9x.js","assets/chunks/chunk-Dxk_DpU9.js","assets/chunks/chunk-Bs3d038s.js","assets/chunks/chunk-iBYTZb0G.js","assets/chunks/chunk-D5NYfyQi.js","assets/chunks/chunk-BLzkHZEW.js","assets/chunks/chunk-CVXTvWdJ.js","assets/chunks/chunk-BpTcU1pF.js","assets/chunks/chunk-DbDAPvXc.js","assets/chunks/chunk-Gi6I4Gst.js","assets/chunks/chunk-C4B-KCzX.js","assets/chunks/chunk-CpErNxpt.js","assets/chunks/chunk-C5eOQHK6.js","assets/chunks/chunk-C6L0kuz-.js","assets/chunks/chunk-DO4YpjyP.js","assets/chunks/chunk-CmnaR33h.js","assets/chunks/chunk-C6fODcKj.js","assets/chunks/chunk-DvlzKqmF.js","assets/chunks/chunk-Bd49BL82.js","assets/chunks/chunk-SgGOPmN5.js","assets/chunks/chunk-D4d_6EHr.js","assets/chunks/chunk-BkW7NOHs.js","assets/chunks/chunk-CRiHmH_C.js","assets/chunks/chunk-DVh-WQwu.js","assets/chunks/chunk-DGWV7rhA.js","assets/chunks/chunk-DE4FKZMj.js","assets/chunks/chunk-aXxrl2LL.js","assets/chunks/chunk-CK4IewAe.js","assets/chunks/chunk-BKDU_ryc.js","assets/chunks/chunk-D9mQh3rb.js","assets/chunks/chunk-B8pSuyCx.js","assets/chunks/chunk-B_omfYVU.js","assets/chunks/chunk-C83F2Yvr.js","assets/chunks/chunk-DPkHeS2n.js","assets/chunks/chunk-DiQqdTSC.js","assets/chunks/chunk-BS6e80c2.js"])))=>i.map(i=>d[i]);
import{_ as _e}from"./chunk-DBQ_J0i3.js";import{aQ as D1,j as a,r as je,a4 as eM,bb as tM,u as nM,d6 as b0,d7 as qr,g as K,d5 as Wk,a3 as na,t as rM,d8 as yr,L as jx}from"./chunk-kOh39j1J.js";import{a as iM,x as Cx,g as Ax}from"./chunk-BDRzeg3d.js";import{p as aM}from"./chunk-DmlFjuBC.js";import{a as sM,b as oM,u as lM}from"./chunk-DF5K452e.js";import{u as cM}from"./chunk-D-ZhOCA6.js";/* empty css              */function Ix(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&e.push(o),i=r+1,r=n.indexOf(",",i)}return e}function Uk(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const hM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,uM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dM={};function Mx(t,e){return(dM.jsx?uM:hM).test(t)}const fM=/[ \t\n\f\r]/g;function pM(t){return typeof t=="object"?t.type==="text"?Lx(t.value):!1:Lx(t)}function Lx(t){return t.replace(fM,"")===""}let uh=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};uh.prototype.normal={};uh.prototype.property={};uh.prototype.space=void 0;function Vk(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new uh(n,r,e)}function Fc(t){return t.toLowerCase()}let cr=class{constructor(e,n){this.attribute=n,this.property=e}};cr.prototype.attribute="";cr.prototype.booleanish=!1;cr.prototype.boolean=!1;cr.prototype.commaOrSpaceSeparated=!1;cr.prototype.commaSeparated=!1;cr.prototype.defined=!1;cr.prototype.mustUseProperty=!1;cr.prototype.number=!1;cr.prototype.overloadedBoolean=!1;cr.prototype.property="";cr.prototype.spaceSeparated=!1;cr.prototype.space=void 0;let mM=0;const Ze=zs(),Jt=zs(),Xm=zs(),me=zs(),Ct=zs(),bo=zs(),gr=zs();function zs(){return 2**++mM}const Jm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ze,booleanish:Jt,commaOrSpaceSeparated:gr,commaSeparated:bo,number:me,overloadedBoolean:Xm,spaceSeparated:Ct},Symbol.toStringTag,{value:"Module"})),y0=Object.keys(Jm);let B1=class extends cr{constructor(e,n,r,i){let s=-1;if(super(e,n),Ox(this,"space",i),typeof r=="number")for(;++s<y0.length;){const o=y0[s];Ox(this,y0[s],(r&Jm[o])===Jm[o])}}};B1.prototype.defined=!0;function Ox(t,e,n){n&&(t[e]=n)}function Ko(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new B1(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Fc(r)]=r,n[Fc(s.attribute)]=r}return new uh(e,n,t.space)}const Yk=Ko({properties:{ariaActiveDescendant:null,ariaAtomic:Jt,ariaAutoComplete:null,ariaBusy:Jt,ariaChecked:Jt,ariaColCount:me,ariaColIndex:me,ariaColSpan:me,ariaControls:Ct,ariaCurrent:null,ariaDescribedBy:Ct,ariaDetails:null,ariaDisabled:Jt,ariaDropEffect:Ct,ariaErrorMessage:null,ariaExpanded:Jt,ariaFlowTo:Ct,ariaGrabbed:Jt,ariaHasPopup:null,ariaHidden:Jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ct,ariaLevel:me,ariaLive:null,ariaModal:Jt,ariaMultiLine:Jt,ariaMultiSelectable:Jt,ariaOrientation:null,ariaOwns:Ct,ariaPlaceholder:null,ariaPosInSet:me,ariaPressed:Jt,ariaReadOnly:Jt,ariaRelevant:null,ariaRequired:Jt,ariaRoleDescription:Ct,ariaRowCount:me,ariaRowIndex:me,ariaRowSpan:me,ariaSelected:Jt,ariaSetSize:me,ariaSort:null,ariaValueMax:me,ariaValueMin:me,ariaValueNow:me,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Gk(t,e){return e in t?t[e]:e}function Xk(t,e){return Gk(t,e.toLowerCase())}const gM=Ko({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:bo,acceptCharset:Ct,accessKey:Ct,action:null,allow:null,allowFullScreen:Ze,allowPaymentRequest:Ze,allowUserMedia:Ze,alt:null,as:null,async:Ze,autoCapitalize:null,autoComplete:Ct,autoFocus:Ze,autoPlay:Ze,blocking:Ct,capture:null,charSet:null,checked:Ze,cite:null,className:Ct,cols:me,colSpan:null,content:null,contentEditable:Jt,controls:Ze,controlsList:Ct,coords:me|bo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ze,defer:Ze,dir:null,dirName:null,disabled:Ze,download:Xm,draggable:Jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ze,formTarget:null,headers:Ct,height:me,hidden:Xm,high:me,href:null,hrefLang:null,htmlFor:Ct,httpEquiv:Ct,id:null,imageSizes:null,imageSrcSet:null,inert:Ze,inputMode:null,integrity:null,is:null,isMap:Ze,itemId:null,itemProp:Ct,itemRef:Ct,itemScope:Ze,itemType:Ct,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ze,low:me,manifest:null,max:null,maxLength:me,media:null,method:null,min:null,minLength:me,multiple:Ze,muted:Ze,name:null,nonce:null,noModule:Ze,noValidate:Ze,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ze,optimum:me,pattern:null,ping:Ct,placeholder:null,playsInline:Ze,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ze,referrerPolicy:null,rel:Ct,required:Ze,reversed:Ze,rows:me,rowSpan:me,sandbox:Ct,scope:null,scoped:Ze,seamless:Ze,selected:Ze,shadowRootClonable:Ze,shadowRootDelegatesFocus:Ze,shadowRootMode:null,shape:null,size:me,sizes:null,slot:null,span:me,spellCheck:Jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:me,step:null,style:null,tabIndex:me,target:null,title:null,translate:null,type:null,typeMustMatch:Ze,useMap:null,value:Jt,width:me,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ct,axis:null,background:null,bgColor:null,border:me,borderColor:null,bottomMargin:me,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ze,declare:Ze,event:null,face:null,frame:null,frameBorder:null,hSpace:me,leftMargin:me,link:null,longDesc:null,lowSrc:null,marginHeight:me,marginWidth:me,noResize:Ze,noHref:Ze,noShade:Ze,noWrap:Ze,object:null,profile:null,prompt:null,rev:null,rightMargin:me,rules:null,scheme:null,scrolling:Jt,standby:null,summary:null,text:null,topMargin:me,valueType:null,version:null,vAlign:null,vLink:null,vSpace:me,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ze,disableRemotePlayback:Ze,prefix:null,property:null,results:me,security:null,unselectable:null},space:"html",transform:Xk}),bM=Ko({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:gr,accentHeight:me,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:me,amplitude:me,arabicForm:null,ascent:me,attributeName:null,attributeType:null,azimuth:me,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:me,by:null,calcMode:null,capHeight:me,className:Ct,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:me,diffuseConstant:me,direction:null,display:null,dur:null,divisor:me,dominantBaseline:null,download:Ze,dx:null,dy:null,edgeMode:null,editable:null,elevation:me,enableBackground:null,end:null,event:null,exponent:me,externalResourcesRequired:null,fill:null,fillOpacity:me,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:bo,g2:bo,glyphName:bo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:me,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:me,horizOriginX:me,horizOriginY:me,id:null,ideographic:me,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:me,k:me,k1:me,k2:me,k3:me,k4:me,kernelMatrix:gr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:me,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:me,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:me,overlineThickness:me,paintOrder:null,panose1:null,path:null,pathLength:me,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ct,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:me,pointsAtY:me,pointsAtZ:me,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gr,rev:gr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gr,requiredFeatures:gr,requiredFonts:gr,requiredFormats:gr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:me,specularExponent:me,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:me,strikethroughThickness:me,string:null,stroke:null,strokeDashArray:gr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:me,strokeOpacity:me,strokeWidth:null,style:null,surfaceScale:me,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gr,tabIndex:me,tableValues:null,target:null,targetX:me,targetY:me,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:me,underlineThickness:me,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:me,values:null,vAlphabetic:me,vMathematical:me,vectorEffect:null,vHanging:me,vIdeographic:me,version:null,vertAdvY:me,vertOriginX:me,vertOriginY:me,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:me,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Gk}),Jk=Ko({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Qk=Ko({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Xk}),Kk=Ko({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),yM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},xM=/[A-Z]/g,Rx=/-[a-z]/g,wM=/^data[-\w.:]+$/i;function P1(t,e){const n=Fc(e);let r=e,i=cr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&wM.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Rx,vM);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Rx.test(s)){let o=s.replace(xM,_M);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=B1}return new i(r,e)}function _M(t){return"-"+t.toLowerCase()}function vM(t){return t.charAt(1).toUpperCase()}const tf=Vk([Yk,gM,Jk,Qk,Kk],"html"),Zo=Vk([Yk,bM,Jk,Qk,Kk],"svg");function Nx(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function Zk(t){return t.join(" ").trim()}var io={},x0,Dx;function TM(){if(Dx)return x0;Dx=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,h="/",u="*",d="",f="comment",p="declaration";x0=function(g,b){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];b=b||{};var y=1,w=1;function S(P){var A=P.match(e);A&&(y+=A.length);var O=P.lastIndexOf(c);w=~O?P.length-O:w+P.length}function E(){var P={line:y,column:w};return function(A){return A.position=new T(P),R(),A}}function T(P){this.start=P,this.end={line:y,column:w},this.source=b.source}T.prototype.content=g;function C(P){var A=new Error(b.source+":"+y+":"+w+": "+P);if(A.reason=P,A.filename=b.source,A.line=y,A.column=w,A.source=g,!b.silent)throw A}function M(P){var A=P.exec(g);if(A){var O=A[0];return S(O),g=g.slice(O.length),A}}function R(){M(n)}function D(P){var A;for(P=P||[];A=$();)A!==!1&&P.push(A);return P}function $(){var P=E();if(!(h!=g.charAt(0)||u!=g.charAt(1))){for(var A=2;d!=g.charAt(A)&&(u!=g.charAt(A)||h!=g.charAt(A+1));)++A;if(A+=2,d===g.charAt(A-1))return C("End of comment missing");var O=g.slice(2,A-2);return w+=2,S(O),g=g.slice(A),w+=2,P({type:f,comment:O})}}function L(){var P=E(),A=M(r);if(A){if($(),!M(i))return C("property missing ':'");var O=M(s),F=P({type:p,property:m(A[0].replace(t,d)),value:O?m(O[0].replace(t,d)):d});return M(o),F}}function q(){var P=[];D(P);for(var A;A=L();)A!==!1&&(P.push(A),D(P));return P}return R(),q()};function m(g){return g?g.replace(l,d):d}return x0}var Bx;function kM(){if(Bx)return io;Bx=1;var t=io&&io.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(io,"__esModule",{value:!0}),io.default=n;var e=t(TM());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,e.default)(r),l=typeof i=="function";return o.forEach(function(c){if(c.type==="declaration"){var h=c.property,u=c.value;l?i(h,u,c):u&&(s=s||{},s[h]=u)}}),s}return io}var _l={},Px;function SM(){if(Px)return _l;Px=1,Object.defineProperty(_l,"__esModule",{value:!0}),_l.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(h){return!h||n.test(h)||t.test(h)},o=function(h,u){return u.toUpperCase()},l=function(h,u){return"".concat(u,"-")},c=function(h,u){return u===void 0&&(u={}),s(h)?h:(h=h.toLowerCase(),u.reactCompat?h=h.replace(i,l):h=h.replace(r,l),h.replace(e,o))};return _l.camelCase=c,_l}var vl,Fx;function $M(){if(Fx)return vl;Fx=1;var t=vl&&vl.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(kM()),n=SM();function r(i,s){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return r.default=r,vl=r,vl}var EM=$M();const jM=D1(EM),nf=e6("end"),Ai=e6("start");function e6(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function CM(t){const e=Ai(t),n=nf(t);if(e&&n)return{start:e,end:n}}function xc(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Hx(t.position):"start"in t||"end"in t?Hx(t):"line"in t||"column"in t?Qm(t):""}function Qm(t){return zx(t&&t.line)+":"+zx(t&&t.column)}function Hx(t){return Qm(t&&t.start)+"-"+Qm(t&&t.end)}function zx(t){return t&&typeof t=="number"?t:1}class Ln extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=xc(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ln.prototype.file="";Ln.prototype.name="";Ln.prototype.reason="";Ln.prototype.message="";Ln.prototype.stack="";Ln.prototype.column=void 0;Ln.prototype.line=void 0;Ln.prototype.ancestors=void 0;Ln.prototype.cause=void 0;Ln.prototype.fatal=void 0;Ln.prototype.place=void 0;Ln.prototype.ruleId=void 0;Ln.prototype.source=void 0;const F1={}.hasOwnProperty,AM=new Map,IM=/[A-Z]/g,MM=new Set(["table","tbody","thead","tfoot","tr"]),LM=new Set(["td","th"]),t6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function OM(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zM(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=HM(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Zo:tf,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=n6(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function n6(t,e,n){if(e.type==="element")return RM(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return NM(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return BM(t,e,n);if(e.type==="mdxjsEsm")return DM(t,e);if(e.type==="root")return PM(t,e,n);if(e.type==="text")return FM(t,e)}function RM(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Zo,t.schema=i),t.ancestors.push(e);const s=i6(t,e.tagName,!1),o=qM(t,e);let l=z1(t,e);return MM.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!pM(c):!0})),r6(t,o,s,e),H1(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function NM(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Hc(t,e.position)}function DM(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Hc(t,e.position)}function BM(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Zo,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:i6(t,e.name,!0),o=WM(t,e),l=z1(t,e);return r6(t,o,s,e),H1(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function PM(t,e,n){const r={};return H1(r,z1(t,e)),t.create(e,t.Fragment,r,n)}function FM(t,e){return e.value}function r6(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function H1(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function HM(t,e,n){return r;function r(i,s,o,l){const h=Array.isArray(o.children)?n:e;return l?h(s,o,l):h(s,o)}}function zM(t,e){return n;function n(r,i,s,o){const l=Array.isArray(s.children),c=Ai(r);return e(i,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function qM(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&F1.call(e.properties,i)){const s=UM(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&LM.has(e.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function WM(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Hc(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Hc(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function z1(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:AM;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const h=i.get(c)||0;o=c+"-"+h,i.set(c,h+1)}}const l=n6(t,s,o);l!==void 0&&n.push(l)}return n}function UM(t,e,n){const r=P1(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Uk(n):Zk(n)),r.property==="style"){let i=typeof n=="object"?n:VM(t,String(n));return t.stylePropertyNameCase==="css"&&(i=YM(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?yM[r.property]||r.property:r.attribute,n]}}function VM(t,e){try{return jM(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Ln("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=t6+"#cannot-parse-style-attribute",i}}function i6(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=Mx(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=Mx(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return F1.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Hc(t)}function Hc(t,e){const n=new Ln("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=t6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function YM(t){const e={};let n;for(n in t)F1.call(t,n)&&(e[GM(n)]=t[n]);return e}function GM(t){let e=t.replace(IM,XM);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function XM(t){return"-"+t.toLowerCase()}const w0={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},JM={};function q1(t,e){const n=JM,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return a6(t,r,i)}function a6(t,e,n){if(QM(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return qx(t.children,e,n)}return Array.isArray(t)?qx(t,e,n):""}function qx(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=a6(t[i],e,n);return r.join("")}function QM(t){return!!(t&&typeof t=="object")}const Wx=document.createElement("i");function W1(t){const e="&"+t+";";Wx.innerHTML=e;const n=Wx.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function wr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ar(t,e){return t.length>0?(wr(t,t.length,0,e),t):e}const Ux={}.hasOwnProperty;function s6(t){const e={};let n=-1;for(;++n<t.length;)KM(e,t[n]);return e}function KM(t,e){let n;for(n in e){const i=(Ux.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Ux.call(i,o)||(i[o]=[]);const l=s[o];ZM(i[o],Array.isArray(l)?l:l?[l]:[])}}}function ZM(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);wr(t,0,0,r)}function o6(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function ti(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pn=Va(/[A-Za-z]/),En=Va(/[\dA-Za-z]/),eL=Va(/[#-'*+\--9=?A-Z^-~]/);function Qu(t){return t!==null&&(t<32||t===127)}const Km=Va(/\d/),tL=Va(/[\dA-Fa-f]/),nL=Va(/[!-/:-@[-`{-~]/);function Ne(t){return t!==null&&t<-2}function St(t){return t!==null&&(t<0||t===32)}function ct(t){return t===-2||t===-1||t===32}const rf=Va(new RegExp("\\p{P}|\\p{S}","u")),Is=Va(/\s/);function Va(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function el(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&En(t.charCodeAt(n+1))&&En(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function at(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return ct(c)?(t.enter(n),l(c)):e(c)}function l(c){return ct(c)&&s++<i?(t.consume(c),l):(t.exit(n),e(c))}}const rL={tokenize:iL};function iL(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),at(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ne(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const aL={tokenize:sL},Vx={tokenize:oL};function sL(t){const e=this,n=[];let r=0,i,s,o;return l;function l(S){if(r<n.length){const E=n[r];return e.containerState=E[1],t.attempt(E[0].continuation,c,h)(S)}return h(S)}function c(S){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&w();const E=e.events.length;let T=E,C;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){C=e.events[T][1].end;break}y(r);let M=E;for(;M<e.events.length;)e.events[M][1].end={...C},M++;return wr(e.events,T+1,0,e.events.slice(E)),e.events.length=M,h(S)}return l(S)}function h(S){if(r===n.length){if(!i)return f(S);if(i.currentConstruct&&i.currentConstruct.concrete)return m(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Vx,u,d)(S)}function u(S){return i&&w(),y(r),f(S)}function d(S){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,m(S)}function f(S){return e.containerState={},t.attempt(Vx,p,m)(S)}function p(S){return r++,n.push([e.currentConstruct,e.containerState]),f(S)}function m(S){if(S===null){i&&w(),y(0),t.consume(S);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),g(S)}function g(S){if(S===null){b(t.exit("chunkFlow"),!0),y(0),t.consume(S);return}return Ne(S)?(t.consume(S),b(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(S),g)}function b(S,E){const T=e.sliceStream(S);if(E&&T.push(null),S.previous=s,s&&(s.next=S),s=S,i.defineSkip(S.start),i.write(T),e.parser.lazy[S.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const M=e.events.length;let R=M,D,$;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(D){$=e.events[R][1].end;break}D=!0}for(y(r),C=M;C<e.events.length;)e.events[C][1].end={...$},C++;wr(e.events,R+1,0,e.events.slice(M)),e.events.length=C}}function y(S){let E=n.length;for(;E-- >S;){const T=n[E];e.containerState=T[1],T[0].exit.call(e,t)}n.length=S}function w(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function oL(t,e,n){return at(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Lo(t){if(t===null||St(t)||Is(t))return 1;if(rf(t))return 2}function af(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Zm={name:"attention",resolveAll:lL,tokenize:cL};function lL(t,e){let n=-1,r,i,s,o,l,c,h,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},f={...t[n][1].start};Yx(d,-c),Yx(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[r][1].end={...o.start},t[n][1].start={...l.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=Ar(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=Ar(h,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),h=Ar(h,af(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=Ar(h,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,h=Ar(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,wr(t,r-1,n-r+3,h),n=r+h.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function cL(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Lo(r);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const h=t.exit("attentionSequence"),u=Lo(c),d=!u||u===2&&i||n.includes(c),f=!i||i===2&&u||n.includes(r);return h._open=!!(s===42?d:d&&(i||!f)),h._close=!!(s===42?f:f&&(u||!d)),e(c)}}function Yx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const hL={name:"autolink",tokenize:uL};function uL(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return Pn(p)?(t.consume(p),o):p===64?n(p):h(p)}function o(p){return p===43||p===45||p===46||En(p)?(r=1,l(p)):h(p)}function l(p){return p===58?(t.consume(p),r=0,c):(p===43||p===45||p===46||En(p))&&r++<32?(t.consume(p),l):(r=0,h(p))}function c(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||Qu(p)?n(p):(t.consume(p),c)}function h(p){return p===64?(t.consume(p),u):eL(p)?(t.consume(p),h):n(p)}function u(p){return En(p)?d(p):n(p)}function d(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||En(p))&&r++<63){const m=p===45?f:d;return t.consume(p),m}return n(p)}}const dh={partial:!0,tokenize:dL};function dL(t,e,n){return r;function r(s){return ct(s)?at(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Ne(s)?e(s):n(s)}}const l6={continuation:{tokenize:pL},exit:mL,name:"blockQuote",tokenize:fL};function fL(t,e,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return ct(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function pL(t,e,n){const r=this;return i;function i(o){return ct(o)?at(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(l6,e,n)(o)}}function mL(t){t.exit("blockQuote")}const c6={name:"characterEscape",tokenize:gL};function gL(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return nL(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const h6={name:"characterReference",tokenize:bL};function bL(t,e,n){const r=this;let i=0,s,o;return l;function l(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,o=En,u(d))}function h(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=tL,u):(t.enter("characterReferenceValue"),s=7,o=Km,u(d))}function u(d){if(d===59&&i){const f=t.exit("characterReferenceValue");return o===En&&!W1(r.sliceSerialize(f))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),u):n(d)}}const Gx={partial:!0,tokenize:xL},Xx={concrete:!0,name:"codeFenced",tokenize:yL};function yL(t,e,n){const r=this,i={partial:!0,tokenize:T};let s=0,o=0,l;return c;function c(C){return h(C)}function h(C){const M=r.events[r.events.length-1];return s=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,l=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),ct(C)?at(t,d,"whitespace")(C):d(C))}function d(C){return C===null||Ne(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(Gx,g,E)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||Ne(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(C)):ct(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),at(t,p,"whitespace")(C)):C===96&&C===l?n(C):(t.consume(C),f)}function p(C){return C===null||Ne(C)?d(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(C))}function m(C){return C===null||Ne(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(C)):C===96&&C===l?n(C):(t.consume(C),m)}function g(C){return t.attempt(i,E,b)(C)}function b(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),y}function y(C){return s>0&&ct(C)?at(t,w,"linePrefix",s+1)(C):w(C)}function w(C){return C===null||Ne(C)?t.check(Gx,g,E)(C):(t.enter("codeFlowValue"),S(C))}function S(C){return C===null||Ne(C)?(t.exit("codeFlowValue"),w(C)):(t.consume(C),S)}function E(C){return t.exit("codeFenced"),e(C)}function T(C,M,R){let D=0;return $;function $(O){return C.enter("lineEnding"),C.consume(O),C.exit("lineEnding"),L}function L(O){return C.enter("codeFencedFence"),ct(O)?at(C,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):q(O)}function q(O){return O===l?(C.enter("codeFencedFenceSequence"),P(O)):R(O)}function P(O){return O===l?(D++,C.consume(O),P):D>=o?(C.exit("codeFencedFenceSequence"),ct(O)?at(C,A,"whitespace")(O):A(O)):R(O)}function A(O){return O===null||Ne(O)?(C.exit("codeFencedFence"),M(O)):R(O)}}}function xL(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const _0={name:"codeIndented",tokenize:_L},wL={partial:!0,tokenize:vL};function _L(t,e,n){const r=this;return i;function i(h){return t.enter("codeIndented"),at(t,s,"linePrefix",5)(h)}function s(h){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?c(h):Ne(h)?t.attempt(wL,o,c)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||Ne(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),l)}function c(h){return t.exit("codeIndented"),e(h)}}function vL(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Ne(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):at(t,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Ne(o)?i(o):n(o)}}const TL={name:"codeText",previous:SL,resolve:kL,tokenize:$L};function kL(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function SL(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function $L(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),l(d)}function l(d){return d===96?(t.consume(d),r++,l):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),i=0,u(d)):Ne(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),h(d))}function h(d){return d===null||d===32||d===96||Ne(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),h)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",h(d))}}class EL{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Tl(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Tl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Tl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Tl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Tl(this.left,n.reverse())}}}function Tl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function u6(t){const e={};let n=-1,r,i,s,o,l,c,h;const u=new EL(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,jL(u,n)),n=e[n],h=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return wr(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!h}function jL(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],h={};let u,d,f=-1,p=n,m=0,g=0;const b=[g];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(g=f+1,b.push(g),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):b.pop(),f=b.length;f--;){const y=l.slice(b[f],b[f+1]),w=s.pop();c.push([w,w+y.length-1]),t.splice(w,2,y)}for(c.reverse(),f=-1;++f<c.length;)h[m+c[f][0]]=m+c[f][1],m+=c[f][1]-c[f][0]-1;return h}const CL={resolve:IL,tokenize:ML},AL={partial:!0,tokenize:LL};function IL(t){return u6(t),t}function ML(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):Ne(l)?t.check(AL,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function LL(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),at(t,s,"linePrefix")}function s(o){if(o===null||Ne(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function d6(t,e,n,r,i,s,o,l,c){const h=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),f):y===null||y===32||y===41||Qu(y)?n(y):(t.enter(r),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),g(y))}function f(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===62?(t.exit("chunkString"),t.exit(l),f(y)):y===null||y===60||Ne(y)?n(y):(t.consume(y),y===92?m:p)}function m(y){return y===60||y===62||y===92?(t.consume(y),p):p(y)}function g(y){return!u&&(y===null||y===41||St(y))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(r),e(y)):u<h&&y===40?(t.consume(y),u++,g):y===41?(t.consume(y),u--,g):y===null||y===32||y===40||Qu(y)?n(y):(t.consume(y),y===92?b:g)}function b(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function f6(t,e,n,r,i,s){const o=this;let l=0,c;return h;function h(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return l>999||p===null||p===91||p===93&&!c||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):Ne(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||Ne(p)||l++>999?(t.exit("chunkString"),u(p)):(t.consume(p),c||(c=!ct(p)),p===92?f:d)}function f(p){return p===91||p===92||p===93?(t.consume(p),l++,d):d(p)}}function p6(t,e,n,r,i,s){let o;return l;function l(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,c):n(f)}function c(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),h(f))}function h(f){return f===o?(t.exit(s),c(o)):f===null?n(f):Ne(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),at(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||Ne(f)?(t.exit("chunkString"),h(f)):(t.consume(f),f===92?d:u)}function d(f){return f===o||f===92?(t.consume(f),u):u(f)}}function wc(t,e){let n;return r;function r(i){return Ne(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):ct(i)?at(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const OL={name:"definition",tokenize:NL},RL={partial:!0,tokenize:DL};function NL(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return f6.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=ti(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),c):n(p)}function c(p){return St(p)?wc(t,h)(p):h(p)}function h(p){return d6(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(RL,d,d)(p)}function d(p){return ct(p)?at(t,f,"whitespace")(p):f(p)}function f(p){return p===null||Ne(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function DL(t,e,n){return r;function r(l){return St(l)?wc(t,i)(l):n(l)}function i(l){return p6(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return ct(l)?at(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Ne(l)?e(l):n(l)}}const BL={name:"hardBreakEscape",tokenize:PL};function PL(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Ne(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const FL={name:"headingAtx",resolve:HL,tokenize:zL};function HL(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},wr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function zL(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||St(u)?(t.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),c(u)):u===null||Ne(u)?(t.exit("atxHeading"),e(u)):ct(u)?at(t,l,"whitespace")(u):(t.enter("atxHeadingText"),h(u))}function c(u){return u===35?(t.consume(u),c):(t.exit("atxHeadingSequence"),l(u))}function h(u){return u===null||u===35||St(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),h)}}const qL=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Jx=["pre","script","style","textarea"],WL={concrete:!0,name:"htmlFlow",resolveTo:YL,tokenize:GL},UL={partial:!0,tokenize:JL},VL={partial:!0,tokenize:XL};function YL(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function GL(t,e,n){const r=this;let i,s,o,l,c;return h;function h(N){return u(N)}function u(N){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(N),d}function d(N){return N===33?(t.consume(N),f):N===47?(t.consume(N),s=!0,g):N===63?(t.consume(N),i=3,r.interrupt?e:j):Pn(N)?(t.consume(N),o=String.fromCharCode(N),b):n(N)}function f(N){return N===45?(t.consume(N),i=2,p):N===91?(t.consume(N),i=5,l=0,m):Pn(N)?(t.consume(N),i=4,r.interrupt?e:j):n(N)}function p(N){return N===45?(t.consume(N),r.interrupt?e:j):n(N)}function m(N){const U="CDATA[";return N===U.charCodeAt(l++)?(t.consume(N),l===U.length?r.interrupt?e:q:m):n(N)}function g(N){return Pn(N)?(t.consume(N),o=String.fromCharCode(N),b):n(N)}function b(N){if(N===null||N===47||N===62||St(N)){const U=N===47,J=o.toLowerCase();return!U&&!s&&Jx.includes(J)?(i=1,r.interrupt?e(N):q(N)):qL.includes(o.toLowerCase())?(i=6,U?(t.consume(N),y):r.interrupt?e(N):q(N)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(N):s?w(N):S(N))}return N===45||En(N)?(t.consume(N),o+=String.fromCharCode(N),b):n(N)}function y(N){return N===62?(t.consume(N),r.interrupt?e:q):n(N)}function w(N){return ct(N)?(t.consume(N),w):$(N)}function S(N){return N===47?(t.consume(N),$):N===58||N===95||Pn(N)?(t.consume(N),E):ct(N)?(t.consume(N),S):$(N)}function E(N){return N===45||N===46||N===58||N===95||En(N)?(t.consume(N),E):T(N)}function T(N){return N===61?(t.consume(N),C):ct(N)?(t.consume(N),T):S(N)}function C(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),c=N,M):ct(N)?(t.consume(N),C):R(N)}function M(N){return N===c?(t.consume(N),c=null,D):N===null||Ne(N)?n(N):(t.consume(N),M)}function R(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||St(N)?T(N):(t.consume(N),R)}function D(N){return N===47||N===62||ct(N)?S(N):n(N)}function $(N){return N===62?(t.consume(N),L):n(N)}function L(N){return N===null||Ne(N)?q(N):ct(N)?(t.consume(N),L):n(N)}function q(N){return N===45&&i===2?(t.consume(N),F):N===60&&i===1?(t.consume(N),Y):N===62&&i===4?(t.consume(N),Z):N===63&&i===3?(t.consume(N),j):N===93&&i===5?(t.consume(N),z):Ne(N)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(UL,te,P)(N)):N===null||Ne(N)?(t.exit("htmlFlowData"),P(N)):(t.consume(N),q)}function P(N){return t.check(VL,A,te)(N)}function A(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),O}function O(N){return N===null||Ne(N)?P(N):(t.enter("htmlFlowData"),q(N))}function F(N){return N===45?(t.consume(N),j):q(N)}function Y(N){return N===47?(t.consume(N),o="",Q):q(N)}function Q(N){if(N===62){const U=o.toLowerCase();return Jx.includes(U)?(t.consume(N),Z):q(N)}return Pn(N)&&o.length<8?(t.consume(N),o+=String.fromCharCode(N),Q):q(N)}function z(N){return N===93?(t.consume(N),j):q(N)}function j(N){return N===62?(t.consume(N),Z):N===45&&i===2?(t.consume(N),j):q(N)}function Z(N){return N===null||Ne(N)?(t.exit("htmlFlowData"),te(N)):(t.consume(N),Z)}function te(N){return t.exit("htmlFlow"),e(N)}}function XL(t,e,n){const r=this;return i;function i(o){return Ne(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function JL(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(dh,e,n)}}const QL={name:"htmlText",tokenize:KL};function KL(t,e,n){const r=this;let i,s,o;return l;function l(j){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(j),c}function c(j){return j===33?(t.consume(j),h):j===47?(t.consume(j),T):j===63?(t.consume(j),S):Pn(j)?(t.consume(j),R):n(j)}function h(j){return j===45?(t.consume(j),u):j===91?(t.consume(j),s=0,m):Pn(j)?(t.consume(j),w):n(j)}function u(j){return j===45?(t.consume(j),p):n(j)}function d(j){return j===null?n(j):j===45?(t.consume(j),f):Ne(j)?(o=d,Y(j)):(t.consume(j),d)}function f(j){return j===45?(t.consume(j),p):d(j)}function p(j){return j===62?F(j):j===45?f(j):d(j)}function m(j){const Z="CDATA[";return j===Z.charCodeAt(s++)?(t.consume(j),s===Z.length?g:m):n(j)}function g(j){return j===null?n(j):j===93?(t.consume(j),b):Ne(j)?(o=g,Y(j)):(t.consume(j),g)}function b(j){return j===93?(t.consume(j),y):g(j)}function y(j){return j===62?F(j):j===93?(t.consume(j),y):g(j)}function w(j){return j===null||j===62?F(j):Ne(j)?(o=w,Y(j)):(t.consume(j),w)}function S(j){return j===null?n(j):j===63?(t.consume(j),E):Ne(j)?(o=S,Y(j)):(t.consume(j),S)}function E(j){return j===62?F(j):S(j)}function T(j){return Pn(j)?(t.consume(j),C):n(j)}function C(j){return j===45||En(j)?(t.consume(j),C):M(j)}function M(j){return Ne(j)?(o=M,Y(j)):ct(j)?(t.consume(j),M):F(j)}function R(j){return j===45||En(j)?(t.consume(j),R):j===47||j===62||St(j)?D(j):n(j)}function D(j){return j===47?(t.consume(j),F):j===58||j===95||Pn(j)?(t.consume(j),$):Ne(j)?(o=D,Y(j)):ct(j)?(t.consume(j),D):F(j)}function $(j){return j===45||j===46||j===58||j===95||En(j)?(t.consume(j),$):L(j)}function L(j){return j===61?(t.consume(j),q):Ne(j)?(o=L,Y(j)):ct(j)?(t.consume(j),L):D(j)}function q(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),i=j,P):Ne(j)?(o=q,Y(j)):ct(j)?(t.consume(j),q):(t.consume(j),A)}function P(j){return j===i?(t.consume(j),i=void 0,O):j===null?n(j):Ne(j)?(o=P,Y(j)):(t.consume(j),P)}function A(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||St(j)?D(j):(t.consume(j),A)}function O(j){return j===47||j===62||St(j)?D(j):n(j)}function F(j){return j===62?(t.consume(j),t.exit("htmlTextData"),t.exit("htmlText"),e):n(j)}function Y(j){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),Q}function Q(j){return ct(j)?at(t,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):z(j)}function z(j){return t.enter("htmlTextData"),o(j)}}const U1={name:"labelEnd",resolveAll:nO,resolveTo:rO,tokenize:iO},ZL={tokenize:aO},eO={tokenize:sO},tO={tokenize:oO};function nO(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&wr(t,0,t.length,n),t}function rO(t,e){let n=t.length,r=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",h,e]],l=Ar(l,t.slice(s+1,s+r+3)),l=Ar(l,[["enter",u,e]]),l=Ar(l,af(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),l=Ar(l,[["exit",u,e],t[o-2],t[o-1],["exit",h,e]]),l=Ar(l,t.slice(o+1)),l=Ar(l,[["exit",c,e]]),wr(t,s,t.length,l),t}function iO(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(ti(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),c):n(f)}function c(f){return f===40?t.attempt(ZL,u,o?u:d)(f):f===91?t.attempt(eO,u,o?h:d)(f):o?u(f):d(f)}function h(f){return t.attempt(tO,u,d)(f)}function u(f){return e(f)}function d(f){return s._balanced=!0,n(f)}}function aO(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return St(d)?wc(t,s)(d):s(d)}function s(d){return d===41?u(d):d6(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return St(d)?wc(t,c)(d):u(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?p6(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function h(d){return St(d)?wc(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function sO(t,e,n){const r=this;return i;function i(l){return f6.call(r,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(ti(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function oO(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const lO={name:"labelStartImage",resolveAll:U1.resolveAll,tokenize:cO};function cO(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const hO={name:"labelStartLink",resolveAll:U1.resolveAll,tokenize:uO};function uO(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const v0={name:"lineEnding",tokenize:dO};function dO(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),at(t,e,"linePrefix")}}const Cu={name:"thematicBreak",tokenize:fO};function fO(t,e,n){let r=0,i;return s;function s(h){return t.enter("thematicBreak"),o(h)}function o(h){return i=h,l(h)}function l(h){return h===i?(t.enter("thematicBreakSequence"),c(h)):r>=3&&(h===null||Ne(h))?(t.exit("thematicBreak"),e(h)):n(h)}function c(h){return h===i?(t.consume(h),r++,c):(t.exit("thematicBreakSequence"),ct(h)?at(t,l,"whitespace")(h):l(h))}}const er={continuation:{tokenize:bO},exit:xO,name:"list",tokenize:gO},pO={partial:!0,tokenize:wO},mO={partial:!0,tokenize:yO};function gO(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(p){const m=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:Km(p)){if(r.containerState.type||(r.containerState.type=m,t.enter(m,{_container:!0})),m==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(Cu,n,h)(p):h(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(p)}return n(p)}function c(p){return Km(p)&&++o<10?(t.consume(p),c):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),h(p)):n(p)}function h(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(dh,r.interrupt?n:u,t.attempt(pO,f,d))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function d(p){return ct(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function bO(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(dh,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,at(t,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!ct(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(mO,e,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,at(t,t.attempt(er,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function yO(t,e,n){const r=this;return at(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function xO(t){t.exit(this.containerState.type)}function wO(t,e,n){const r=this;return at(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!ct(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Qx={name:"setextUnderline",resolveTo:_O,tokenize:vO};function _O(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function vO(t,e,n){const r=this;let i;return s;function s(h){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===i?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),ct(h)?at(t,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Ne(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const TO={tokenize:kO};function kO(t){const e=this,n=t.attempt(dh,r,t.attempt(this.parser.constructs.flowInitial,i,at(t,t.attempt(this.parser.constructs.flow,i,t.attempt(CL,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const SO={resolveAll:g6()},$O=m6("string"),EO=m6("text");function m6(t){return{resolveAll:g6(t==="text"?jO:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(u){return h(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return h(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function h(u){if(u===null)return!0;const d=i[u];let f=-1;if(d)for(;++f<d.length;){const p=d[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function g6(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function jO(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,l=0,c;for(;s--;){const h=i[s];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(h===-2)c=!0,l++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const CO={42:er,43:er,45:er,48:er,49:er,50:er,51:er,52:er,53:er,54:er,55:er,56:er,57:er,62:l6},AO={91:OL},IO={[-2]:_0,[-1]:_0,32:_0},MO={35:FL,42:Cu,45:[Qx,Cu],60:WL,61:Qx,95:Cu,96:Xx,126:Xx},LO={38:h6,92:c6},OO={[-5]:v0,[-4]:v0,[-3]:v0,33:lO,38:h6,42:Zm,60:[hL,QL],91:hO,92:[BL,c6],93:U1,95:Zm,96:TL},RO={null:[Zm,SO]},NO={null:[42,95]},DO={null:[]},BO=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:NO,contentInitial:AO,disable:DO,document:CO,flow:MO,flowInitial:IO,insideSpan:RO,string:LO,text:OO},Symbol.toStringTag,{value:"Module"}));function PO(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const c={attempt:M(T),check:M(C),consume:w,enter:S,exit:E,interrupt:M(C,{interrupt:!0})},h={code:null,containerState:{},defineSkip:g,events:[],now:m,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:d};let u=e.tokenize.call(h,c);return e.resolveAll&&s.push(e),h;function d(L){return o=Ar(o,L),b(),o[o.length-1]!==null?[]:(R(e,0),h.events=af(s,h.events,h),h.events)}function f(L,q){return HO(p(L),q)}function p(L){return FO(o,L)}function m(){const{_bufferIndex:L,_index:q,line:P,column:A,offset:O}=r;return{_bufferIndex:L,_index:q,line:P,column:A,offset:O}}function g(L){i[L.line]=L.column,$()}function b(){let L;for(;r._index<o.length;){const q=o[r._index];if(typeof q=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<q.length;)y(q.charCodeAt(r._bufferIndex));else y(q)}}function y(L){u=u(L)}function w(L){Ne(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,$()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=L}function S(L,q){const P=q||{};return P.type=L,P.start=m(),h.events.push(["enter",P,h]),l.push(P),P}function E(L){const q=l.pop();return q.end=m(),h.events.push(["exit",q,h]),q}function T(L,q){R(L,q.from)}function C(L,q){q.restore()}function M(L,q){return P;function P(A,O,F){let Y,Q,z,j;return Array.isArray(A)?te(A):"tokenize"in A?te([A]):Z(A);function Z(se){return be;function be(xe){const we=xe!==null&&se[xe],Re=xe!==null&&se.null,He=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(Re)?Re:Re?[Re]:[]];return te(He)(xe)}}function te(se){return Y=se,Q=0,se.length===0?F:N(se[Q])}function N(se){return be;function be(xe){return j=D(),z=se,se.partial||(h.currentConstruct=se),se.name&&h.parser.constructs.disable.null.includes(se.name)?J():se.tokenize.call(q?Object.assign(Object.create(h),q):h,c,U,J)(xe)}}function U(se){return L(z,j),O}function J(se){return j.restore(),++Q<Y.length?N(Y[Q]):F}}}function R(L,q){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&wr(h.events,q,h.events.length-q,L.resolve(h.events.slice(q),h)),L.resolveTo&&(h.events=L.resolveTo(h.events,h))}function D(){const L=m(),q=h.previous,P=h.currentConstruct,A=h.events.length,O=Array.from(l);return{from:A,restore:F};function F(){r=L,h.previous=q,h.currentConstruct=P,h.events.length=A,l=O,$()}}function $(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function FO(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function HO(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function zO(t){const r={constructs:s6([BO,...(t||{}).extensions||[]]),content:i(rL),defined:[],document:i(aL),flow:i(TO),lazy:{},string:i($O),text:i(EO)};return r;function i(s){return o;function o(l){return PO(r,s,l)}}}function qO(t){for(;!u6(t););return t}const Kx=/[\0\t\n\r]/g;function WO(){let t=1,e="",n=!0,r;return i;function i(s,o,l){const c=[];let h,u,d,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Kx.lastIndex=d,h=Kx.exec(s),f=h&&h.index!==void 0?h.index:s.length,p=s.charCodeAt(f),!h){e=s.slice(d);break}if(p===10&&d===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<f&&(c.push(s.slice(d,f)),t+=f-d),p){case 0:{c.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,c.push(-2);t++<u;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}d=f+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const UO=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function VO(t){return t.replace(UO,YO)}function YO(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return o6(n.slice(s?2:1),s?16:10)}return W1(n)||t}const b6={}.hasOwnProperty;function GO(t,e,n){return typeof e!="string"&&(n=e,e=void 0),XO(n)(qO(zO(n).document().write(WO()(t,e,!0))))}function XO(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Xt),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(xt),blockQuote:s(Re),characterEscape:D,characterReference:D,codeFenced:s(He),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(He,o),codeText:s(ft,o),codeTextData:D,data:D,codeFlowValue:D,definition:s(pt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ut),hardBreakEscape:s(mt),hardBreakTrailing:s(mt),htmlFlow:s(Et,o),htmlFlowData:D,htmlText:s(Et,o),htmlTextData:D,image:s(Lt),label:o,link:s(Xt),listItem:s(li),listItemValue:f,listOrdered:s(Hr,d),listUnordered:s(Hr),paragraph:s(to),reference:N,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(xt),strong:s(wa),thematicBreak:s(_a)},exit:{atxHeading:c(),atxHeadingSequence:T,autolink:c(),autolinkEmail:we,autolinkProtocol:xe,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:J,characterReferenceMarkerNumeric:J,characterReferenceValue:se,characterReference:be,codeFenced:c(b),codeFencedFence:g,codeFencedFenceInfo:p,codeFencedFenceMeta:m,codeFlowValue:$,codeIndented:c(y),codeText:c(O),codeTextData:$,data:$,definition:c(),definitionDestinationString:E,definitionLabelString:w,definitionTitleString:S,emphasis:c(),hardBreakEscape:c(q),hardBreakTrailing:c(q),htmlFlow:c(P),htmlFlowData:$,htmlText:c(A),htmlTextData:$,image:c(Y),label:z,labelText:Q,lineEnding:L,link:c(F),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:U,resourceDestinationString:j,resourceTitleString:Z,resource:te,setextHeading:c(R),setextHeadingLineSequence:M,setextHeadingText:C,strong:c(),thematicBreak:c()}};y6(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(le){let Te={type:"root",children:[]};const Je={stack:[Te],tokenStack:[],config:e,enter:l,exit:h,buffer:o,resume:u,data:n},rt=[];let gt=-1;for(;++gt<le.length;)if(le[gt][1].type==="listOrdered"||le[gt][1].type==="listUnordered")if(le[gt][0]==="enter")rt.push(gt);else{const Gn=rt.pop();gt=i(le,Gn,gt)}for(gt=-1;++gt<le.length;){const Gn=e[le[gt][0]];b6.call(Gn,le[gt][1].type)&&Gn[le[gt][1].type].call(Object.assign({sliceSerialize:le[gt][2].sliceSerialize},Je),le[gt][1])}if(Je.tokenStack.length>0){const Gn=Je.tokenStack[Je.tokenStack.length-1];(Gn[1]||Zx).call(Je,void 0,Gn[0])}for(Te.position={start:va(le.length>0?le[0][1].start:{line:1,column:1,offset:0}),end:va(le.length>0?le[le.length-2][1].end:{line:1,column:1,offset:0})},gt=-1;++gt<e.transforms.length;)Te=e.transforms[gt](Te)||Te;return Te}function i(le,Te,Je){let rt=Te-1,gt=-1,Gn=!1,Sr,Xn,Nn,$r;for(;++rt<=Je;){const fn=le[rt];switch(fn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{fn[0]==="enter"?gt++:gt--,$r=void 0;break}case"lineEndingBlank":{fn[0]==="enter"&&(Sr&&!$r&&!gt&&!Nn&&(Nn=rt),$r=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:$r=void 0}if(!gt&&fn[0]==="enter"&&fn[1].type==="listItemPrefix"||gt===-1&&fn[0]==="exit"&&(fn[1].type==="listUnordered"||fn[1].type==="listOrdered")){if(Sr){let ci=rt;for(Xn=void 0;ci--;){const zr=le[ci];if(zr[1].type==="lineEnding"||zr[1].type==="lineEndingBlank"){if(zr[0]==="exit")continue;Xn&&(le[Xn][1].type="lineEndingBlank",Gn=!0),zr[1].type="lineEnding",Xn=ci}else if(!(zr[1].type==="linePrefix"||zr[1].type==="blockQuotePrefix"||zr[1].type==="blockQuotePrefixWhitespace"||zr[1].type==="blockQuoteMarker"||zr[1].type==="listItemIndent"))break}Nn&&(!Xn||Nn<Xn)&&(Sr._spread=!0),Sr.end=Object.assign({},Xn?le[Xn][1].start:fn[1].end),le.splice(Xn||rt,0,["exit",Sr,fn[2]]),rt++,Je++}if(fn[1].type==="listItemPrefix"){const ci={type:"listItem",_spread:!1,start:Object.assign({},fn[1].start),end:void 0};Sr=ci,le.splice(rt,0,["enter",ci,fn[2]]),rt++,Je++,Nn=void 0,$r=!0}}}return le[Te][1]._spread=Gn,Je}function s(le,Te){return Je;function Je(rt){l.call(this,le(rt),rt),Te&&Te.call(this,rt)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(le,Te,Je){this.stack[this.stack.length-1].children.push(le),this.stack.push(le),this.tokenStack.push([Te,Je||void 0]),le.position={start:va(Te.start),end:void 0}}function c(le){return Te;function Te(Je){le&&le.call(this,Je),h.call(this,Je)}}function h(le,Te){const Je=this.stack.pop(),rt=this.tokenStack.pop();if(rt)rt[0].type!==le.type&&(Te?Te.call(this,le,rt[0]):(rt[1]||Zx).call(this,le,rt[0]));else throw new Error("Cannot close `"+le.type+"` ("+xc({start:le.start,end:le.end})+"): it’s not open");Je.position.end=va(le.end)}function u(){return q1(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(le){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(le),10),this.data.expectingFirstListItemValue=void 0}}function p(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=le}function m(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=le}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.value=le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.value=le.replace(/(\r?\n|\r)$/g,"")}function w(le){const Te=this.resume(),Je=this.stack[this.stack.length-1];Je.label=Te,Je.identifier=ti(this.sliceSerialize(le)).toLowerCase()}function S(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.title=le}function E(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.url=le}function T(le){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Je=this.sliceSerialize(le).length;Te.depth=Je}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function M(le){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(le).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function D(le){const Je=this.stack[this.stack.length-1].children;let rt=Je[Je.length-1];(!rt||rt.type!=="text")&&(rt=Za(),rt.position={start:va(le.start),end:void 0},Je.push(rt)),this.stack.push(rt)}function $(le){const Te=this.stack.pop();Te.value+=this.sliceSerialize(le),Te.position.end=va(le.end)}function L(le){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Je=Te.children[Te.children.length-1];Je.position.end=va(le.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(D.call(this,le),$.call(this,le))}function q(){this.data.atHardBreak=!0}function P(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.value=le}function A(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.value=le}function O(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.value=le}function F(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=Te,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function Y(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=Te,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function Q(le){const Te=this.sliceSerialize(le),Je=this.stack[this.stack.length-2];Je.label=VO(Te),Je.identifier=ti(Te).toLowerCase()}function z(){const le=this.stack[this.stack.length-1],Te=this.resume(),Je=this.stack[this.stack.length-1];if(this.data.inReference=!0,Je.type==="link"){const rt=le.children;Je.children=rt}else Je.alt=Te}function j(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.url=le}function Z(){const le=this.resume(),Te=this.stack[this.stack.length-1];Te.title=le}function te(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function U(le){const Te=this.resume(),Je=this.stack[this.stack.length-1];Je.label=Te,Je.identifier=ti(this.sliceSerialize(le)).toLowerCase(),this.data.referenceType="full"}function J(le){this.data.characterReferenceType=le.type}function se(le){const Te=this.sliceSerialize(le),Je=this.data.characterReferenceType;let rt;Je?(rt=o6(Te,Je==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):rt=W1(Te);const gt=this.stack[this.stack.length-1];gt.value+=rt}function be(le){const Te=this.stack.pop();Te.position.end=va(le.end)}function xe(le){$.call(this,le);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(le)}function we(le){$.call(this,le);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(le)}function Re(){return{type:"blockquote",children:[]}}function He(){return{type:"code",lang:null,meta:null,value:""}}function ft(){return{type:"inlineCode",value:""}}function pt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ut(){return{type:"emphasis",children:[]}}function xt(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function Et(){return{type:"html",value:""}}function Lt(){return{type:"image",title:null,url:"",alt:null}}function Xt(){return{type:"link",title:null,url:"",children:[]}}function Hr(le){return{type:"list",ordered:le.type==="listOrdered",start:null,spread:le._spread,children:[]}}function li(le){return{type:"listItem",spread:le._spread,checked:null,children:[]}}function to(){return{type:"paragraph",children:[]}}function wa(){return{type:"strong",children:[]}}function Za(){return{type:"text",value:""}}function _a(){return{type:"thematicBreak"}}}function va(t){return{line:t.line,column:t.column,offset:t.offset}}function y6(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?y6(t,r):JO(t,r)}}function JO(t,e){let n;for(n in e)if(b6.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Zx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+xc({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+xc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+xc({start:e.start,end:e.end})+") is still open")}function QO(t){const e=this;e.parser=n;function n(r){return GO(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function KO(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ZO(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function eR(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function tR(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nR(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rR(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=el(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,h),t.applyData(e,h)}function iR(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function aR(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function x6(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function sR(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return x6(t,e);const i={src:el(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function oR(t,e){const n={src:el(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function lR(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function cR(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return x6(t,e);const i={href:el(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function hR(t,e){const n={href:el(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function uR(t,e,n){const r=t.all(e),i=n?dR(n):w6(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(i||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,h),t.applyData(e,h)}function dR(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=w6(n[r])}return e}function w6(t){const e=t.spread;return e??t.children.length>1}function fR(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function pR(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mR(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function gR(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bR(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Ai(e.children[1]),c=nf(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function yR(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const h=[];for(;++c<l;){const d=e.children[c],f={},p=o?o[c]:void 0;p&&(f.align=p);let m={type:"element",tagName:s,properties:f,children:[]};d&&(m.children=t.all(d),t.patch(d,m),m=t.applyData(d,m)),h.push(m)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,u),t.applyData(e,u)}function xR(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const e2=9,t2=32;function wR(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(n2(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(n2(e.slice(i),i>0,!1)),s.join("")}function n2(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===e2||s===t2;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===e2||s===t2;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function _R(t,e){const n={type:"text",value:wR(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function vR(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const TR={blockquote:KO,break:ZO,code:eR,delete:tR,emphasis:nR,footnoteReference:rR,heading:iR,html:aR,imageReference:sR,image:oR,inlineCode:lR,linkReference:cR,link:hR,listItem:uR,list:fR,paragraph:pR,root:mR,strong:gR,table:bR,tableCell:xR,tableRow:yR,text:_R,thematicBreak:vR,toml:Fh,yaml:Fh,definition:Fh,footnoteDefinition:Fh};function Fh(){}const _6=-1,sf=0,_c=1,Ku=2,V1=3,Y1=4,G1=5,X1=6,v6=7,T6=8,r2=typeof self=="object"?self:globalThis,kR=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case sf:case _6:return n(o,i);case _c:{const l=n([],i);for(const c of o)l.push(r(c));return l}case Ku:{const l=n({},i);for(const[c,h]of o)l[r(c)]=r(h);return l}case V1:return n(new Date(o),i);case Y1:{const{source:l,flags:c}=o;return n(new RegExp(l,c),i)}case G1:{const l=n(new Map,i);for(const[c,h]of o)l.set(r(c),r(h));return l}case X1:{const l=n(new Set,i);for(const c of o)l.add(r(c));return l}case v6:{const{name:l,message:c}=o;return n(new r2[l](c),i)}case T6:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new r2[s](o),i)};return r},i2=t=>kR(new Map,t)(0),ao="",{toString:SR}={},{keys:$R}=Object,kl=t=>{const e=typeof t;if(e!=="object"||!t)return[sf,e];const n=SR.call(t).slice(8,-1);switch(n){case"Array":return[_c,ao];case"Object":return[Ku,ao];case"Date":return[V1,ao];case"RegExp":return[Y1,ao];case"Map":return[G1,ao];case"Set":return[X1,ao];case"DataView":return[_c,n]}return n.includes("Array")?[_c,n]:n.includes("Error")?[v6,n]:[Ku,n]},Hh=([t,e])=>t===sf&&(e==="function"||e==="symbol"),ER=(t,e,n,r)=>{const i=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=kl(o);switch(l){case sf:{let u=o;switch(c){case"bigint":l=T6,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return i([_6],o)}return i([l,u],o)}case _c:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),i([c,[...f]],o)}const u=[],d=i([l,u],o);for(const f of o)u.push(s(f));return d}case Ku:{if(c)switch(c){case"BigInt":return i([c,o.toString()],o);case"Boolean":case"Number":case"String":return i([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([l,u],o);for(const f of $R(o))(t||!Hh(kl(o[f])))&&u.push([s(f),s(o[f])]);return d}case V1:return i([l,o.toISOString()],o);case Y1:{const{source:u,flags:d}=o;return i([l,{source:u,flags:d}],o)}case G1:{const u=[],d=i([l,u],o);for(const[f,p]of o)(t||!(Hh(kl(f))||Hh(kl(p))))&&u.push([s(f),s(p)]);return d}case X1:{const u=[],d=i([l,u],o);for(const f of o)(t||!Hh(kl(f)))&&u.push(s(f));return d}}const{message:h}=o;return i([l,{name:c,message:h}],o)};return s},a2=(t,{json:e,lossy:n}={})=>{const r=[];return ER(!(e||n),!!e,new Map,r)(t),r},Oo=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?i2(a2(t,e)):structuredClone(t):(t,e)=>i2(a2(t,e));function jR(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function CR(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function AR(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||jR,r=t.options.footnoteBackLabel||CR,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[c]);if(!h)continue;const u=t.all(h),d=String(h.identifier).toUpperCase(),f=el(d.toLowerCase());let p=0;const m=[],g=t.footnoteCounts.get(d);for(;g!==void 0&&++p<=g;){m.length>0&&m.push({type:"text",value:" "});let w=typeof n=="string"?n:n(c,p);typeof w=="string"&&(w={type:"text",value:w}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,p),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const w=b.children[b.children.length-1];w&&w.type==="text"?w.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...m)}else u.push(...m);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(h,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Oo(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const fh=function(t){if(t==null)return OR;if(typeof t=="function")return of(t);if(typeof t=="object")return Array.isArray(t)?IR(t):MR(t);if(typeof t=="string")return LR(t);throw new Error("Expected function, string, or object as test")};function IR(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=fh(t[n]);return of(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function MR(t){const e=t;return of(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function LR(t){return of(e);function e(n){return n&&n.type===t}}function of(t){return e;function e(n,r,i){return!!(RR(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function OR(){return!0}function RR(t){return t!==null&&typeof t=="object"&&"type"in t}const k6=[],NR=!0,eg=!1,S6="skip";function J1(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=fh(i),o=r?-1:1;l(t,void 0,[])();function l(c,h,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=k6,m,g,b;if((!e||s(c,h,u[u.length-1]||void 0))&&(p=DR(n(c,u)),p[0]===eg))return p;if("children"in c&&c.children){const y=c;if(y.children&&p[0]!==S6)for(g=(r?y.children.length:-1)+o,b=u.concat(y);g>-1&&g<y.children.length;){const w=y.children[g];if(m=l(w,g,b)(),m[0]===eg)return m;g=typeof m[1]=="number"?m[1]:g+o}}return p}}}function DR(t){return Array.isArray(t)?t:typeof t=="number"?[NR,t]:t==null?k6:[t]}function lf(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),J1(t,s,l,i);function l(c,h){const u=h[h.length-1],d=u?u.children.indexOf(c):void 0;return o(c,d,u)}}const tg={}.hasOwnProperty,BR={};function PR(t,e){const n=e||BR,r=new Map,i=new Map,s=new Map,o={...TR,...n.handlers},l={all:h,applyData:HR,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:FR,wrap:qR};return lf(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();d.has(f)||d.set(f,u)}}),l;function c(u,d){const f=u.type,p=l.handlers[f];if(tg.call(l.handlers,f)&&p)return p(l,u,d);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:g,...b}=u,y=Oo(b);return y.children=l.all(u),y}return Oo(u)}return(l.options.unknownHandler||zR)(l,u,d)}function h(u){const d=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const m=l.one(f[p],u);if(m){if(p&&f[p-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=s2(m.value)),!Array.isArray(m)&&m.type==="element")){const g=m.children[0];g&&g.type==="text"&&(g.value=s2(g.value))}Array.isArray(m)?d.push(...m):d.push(m)}}}return d}}function FR(t,e){t.position&&(e.position=CM(t))}function HR(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Oo(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function zR(t,e){const n=e.data||{},r="value"in e&&!(tg.call(n,"hProperties")||tg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function qR(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function s2(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function o2(t,e){const n=PR(t,e),r=n.one(t,void 0),i=AR(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function WR(t,e){return t&&"run"in t?async function(n,r){const i=o2(n,{file:r,...e});await t.run(i,r)}:function(n,r){return o2(n,{file:r,...t||e})}}function l2(t){if(t)throw t}var T0,c2;function UR(){if(c2)return T0;c2=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var u=t.call(h,"constructor"),d=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!u&&!d)return!1;var f;for(f in h);return typeof f>"u"||t.call(h,f)},o=function(h,u){n&&u.name==="__proto__"?n(h,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):h[u.name]=u.newValue},l=function(h,u){if(u==="__proto__")if(t.call(h,u)){if(r)return r(h,u).value}else return;return h[u]};return T0=function c(){var h,u,d,f,p,m,g=arguments[0],b=1,y=arguments.length,w=!1;for(typeof g=="boolean"&&(w=g,g=arguments[1]||{},b=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});b<y;++b)if(h=arguments[b],h!=null)for(u in h)d=l(g,u),f=l(h,u),g!==f&&(w&&f&&(s(f)||(p=i(f)))?(p?(p=!1,m=d&&i(d)?d:[]):m=d&&s(d)?d:{},o(g,{name:u,newValue:c(w,m,f)})):typeof f<"u"&&o(g,{name:u,newValue:f}));return g},T0}var VR=UR();const k0=D1(VR);function ng(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function YR(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(c,...h){const u=t[++s];let d=-1;if(c){o(c);return}for(;++d<i.length;)(h[d]===null||h[d]===void 0)&&(h[d]=i[d]);i=h,u?GR(u,l)(...h):o(null,...h)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function GR(t,e){let n;return r;function r(...o){const l=t.length>o.length;let c;l&&o.push(i);try{c=t.apply(this,o)}catch(h){const u=h;if(l&&n)throw u;return i(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const gi={basename:XR,dirname:JR,extname:QR,join:KR,sep:"/"};function XR(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ph(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function JR(t){if(ph(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function QR(t){ph(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function KR(...t){let e=-1,n;for(;++e<t.length;)ph(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ZR(n)}function ZR(t){ph(t);const e=t.codePointAt(0)===47;let n=eN(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function eN(t,e){let n="",r=0,i=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function ph(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const tN={cwd:nN};function nN(){return"/"}function rg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function rN(t){if(typeof t=="string")t=new URL(t);else if(!rg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return iN(t)}function iN(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const S0=["history","path","basename","stem","extname","dirname"];class $6{constructor(e){let n;e?rg(e)?n={path:e}:typeof e=="string"||aN(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":tN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<S0.length;){const s=S0[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)S0.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?gi.basename(this.path):void 0}set basename(e){E0(e,"basename"),$0(e,"basename"),this.path=gi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?gi.dirname(this.path):void 0}set dirname(e){h2(this.basename,"dirname"),this.path=gi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?gi.extname(this.path):void 0}set extname(e){if($0(e,"extname"),h2(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){rg(e)&&(e=rN(e)),E0(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?gi.basename(this.path,this.extname):void 0}set stem(e){E0(e,"stem"),$0(e,"stem"),this.path=gi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Ln(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function $0(t,e){if(t&&t.includes(gi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+gi.sep+"`")}function E0(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function h2(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function aN(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sN=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},oN={}.hasOwnProperty;class Q1 extends sN{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=YR()}copy(){const e=new Q1;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(k0(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(A0("data",this.frozen),this.namespace[e]=n,this):oN.call(this.namespace,e)&&this.namespace[e]||void 0:e?(A0("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=zh(e),r=this.parser||this.Parser;return j0("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),j0("process",this.parser||this.Parser),C0("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=zh(e),c=r.parse(l);r.run(c,l,function(u,d,f){if(u||!d||!f)return h(u);const p=d,m=r.stringify(p,f);hN(m)?f.value=m:f.result=m,h(u,f)});function h(u,d){u||!d?o(u):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),j0("processSync",this.parser||this.Parser),C0("processSync",this.compiler||this.Compiler),this.process(e,i),d2("processSync","process",n),r;function i(s,o){n=!0,l2(s),r=o}}run(e,n,r){u2(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=zh(n);i.run(e,c,h);function h(u,d,f){const p=d||e;u?l(u):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),d2("runSync","run",r),i;function s(o,l){l2(o),i=l,r=!0}}stringify(e,n){this.freeze();const r=zh(n),i=this.compiler||this.Compiler;return C0("stringify",i),u2(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(A0("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[u,...d]=h;c(u,d)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(i.settings=k0(!0,i.settings,h.settings))}function l(h){let u=-1;if(h!=null)if(Array.isArray(h))for(;++u<h.length;){const d=h[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,u){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===h){f=d;break}if(f===-1)r.push([h,...u]);else if(u.length>0){let[p,...m]=u;const g=r[f][1];ng(g)&&ng(p)&&(p=k0(!0,g,p)),r[f]=[h,p,...m]}}}}const lN=new Q1().freeze();function j0(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function C0(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function A0(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function u2(t){if(!ng(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function d2(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function zh(t){return cN(t)?t:new $6(t)}function cN(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function hN(t){return typeof t=="string"||uN(t)}function uN(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",f2=[],p2={allowDangerousHtml:!0},fN=/^(https?|ircs?|mailto|xmpp)$/i,pN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _i(t){const e=mN(t),n=gN(t);return bN(e.runSync(e.parse(n),n),t)}function mN(t){const e=t.rehypePlugins||f2,n=t.remarkPlugins||f2,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...p2}:p2;return lN().use(QO).use(n).use(WR,r).use(e)}function gN(t){const e=t.children||"",n=new $6;return typeof e=="string"&&(n.value=e),n}function bN(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||yN;for(const u of pN)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+dN+u.id,void 0);return lf(t,h),OM(t,{Fragment:a.Fragment,components:i,ignoreInvalidStyle:!0,jsx:a.jsx,jsxs:a.jsxs,passKeys:!0,passNode:!0});function h(u,d,f){if(u.type==="raw"&&f&&typeof d=="number")return o?f.children.splice(d,1):f.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let p;for(p in w0)if(Object.hasOwn(w0,p)&&Object.hasOwn(u.properties,p)){const m=u.properties[p],g=w0[p];(g===null||g.includes(u.tagName))&&(u.properties[p]=c(String(m||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof d=="number"&&(p=!r(u,d,f)),p&&f&&typeof d=="number")return l&&u.children?f.children.splice(d,1,...u.children):f.children.splice(d,1),d}}}function yN(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||fN.test(t.slice(0,e))?t:""}function E6(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function xN(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:s},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:l,mathText:o,mathTextData:l}};function t(c){const h={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[h]}},c)}function e(){this.buffer()}function n(){const c=this.resume(),h=this.stack[this.stack.length-1];h.type,h.meta=c}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(c){const h=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),u=this.stack[this.stack.length-1];u.type,this.exit(c),u.value=h;const d=u.data.hChildren[0];d.type,d.tagName,d.children.push({type:"text",value:h}),this.data.mathFlowInside=void 0}function s(c){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},c),this.buffer()}function o(c){const h=this.resume(),u=this.stack[this.stack.length-1];u.type,this.exit(c),u.value=h,u.data.hChildren.push({type:"text",value:h})}function l(c){this.config.enter.data.call(this,c),this.config.exit.data.call(this,c)}}function wN(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(s,o,l,c){const h=s.value||"",u=l.createTracker(c),d="$".repeat(Math.max(E6(h,"$")+1,2)),f=l.enter("mathFlow");let p=u.move(d);if(s.meta){const m=l.enter("mathFlowMeta");p+=u.move(l.safe(s.meta,{after:`
`,before:p,encode:["$"],...u.current()})),m()}return p+=u.move(`
`),h&&(p+=u.move(h+`
`)),p+=u.move(d),f(),p}function r(s,o,l){let c=s.value||"",h=1;for(e||h++;new RegExp("(^|[^$])"+"\\$".repeat(h)+"([^$]|$)").test(c);)h++;const u="$".repeat(h);/[^ \r\n]/.test(c)&&(/^[ \r\n]/.test(c)&&/[ \r\n]$/.test(c)||/^\$|\$$/.test(c))&&(c=" "+c+" ");let d=-1;for(;++d<l.unsafe.length;){const f=l.unsafe[d];if(!f.atBreak)continue;const p=l.compilePattern(f);let m;for(;m=p.exec(c);){let g=m.index;c.codePointAt(g)===10&&c.codePointAt(g-1)===13&&g--,c=c.slice(0,g)+" "+c.slice(m.index+1)}}return u+c+u}function i(){return"$"}}const _N={tokenize:vN,concrete:!0,name:"mathFlow"},m2={tokenize:TN,partial:!0};function vN(t,e,n){const r=this,i=r.events[r.events.length-1],s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let o=0;return l;function l(w){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),c(w)}function c(w){return w===36?(t.consume(w),o++,c):o<2?n(w):(t.exit("mathFlowFenceSequence"),at(t,h,"whitespace")(w))}function h(w){return w===null||Ne(w)?d(w):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),u(w))}function u(w){return w===null||Ne(w)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),d(w)):w===36?n(w):(t.consume(w),u)}function d(w){return t.exit("mathFlowFence"),r.interrupt?e(w):t.attempt(m2,f,b)(w)}function f(w){return t.attempt({tokenize:y,partial:!0},b,p)(w)}function p(w){return(s?at(t,m,"linePrefix",s+1):m)(w)}function m(w){return w===null?b(w):Ne(w)?t.attempt(m2,f,b)(w):(t.enter("mathFlowValue"),g(w))}function g(w){return w===null||Ne(w)?(t.exit("mathFlowValue"),m(w)):(t.consume(w),g)}function b(w){return t.exit("mathFlow"),e(w)}function y(w,S,E){let T=0;return at(w,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C(D){return w.enter("mathFlowFence"),w.enter("mathFlowFenceSequence"),M(D)}function M(D){return D===36?(T++,w.consume(D),M):T<o?E(D):(w.exit("mathFlowFenceSequence"),at(w,R,"whitespace")(D))}function R(D){return D===null||Ne(D)?(w.exit("mathFlowFence"),S(D)):E(D)}}}function TN(t,e,n){const r=this;return i;function i(o){return o===null?e(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function kN(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:SN,previous:$N,name:"mathText"};function r(i,s,o){let l=0,c,h;return u;function u(g){return i.enter("mathText"),i.enter("mathTextSequence"),d(g)}function d(g){return g===36?(i.consume(g),l++,d):l<2&&!n?o(g):(i.exit("mathTextSequence"),f(g))}function f(g){return g===null?o(g):g===36?(h=i.enter("mathTextSequence"),c=0,m(g)):g===32?(i.enter("space"),i.consume(g),i.exit("space"),f):Ne(g)?(i.enter("lineEnding"),i.consume(g),i.exit("lineEnding"),f):(i.enter("mathTextData"),p(g))}function p(g){return g===null||g===32||g===36||Ne(g)?(i.exit("mathTextData"),f(g)):(i.consume(g),p)}function m(g){return g===36?(i.consume(g),c++,m):c===l?(i.exit("mathTextSequence"),i.exit("mathText"),s(g)):(h.type="mathTextData",p(g))}}}function SN(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="mathTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function $N(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}function EN(t){return{flow:{36:_N},text:{36:kN(t)}}}class nr{constructor(e,n,r){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=n,this.end=r}static range(e,n){return n?!e||!e.loc||!n.loc||e.loc.lexer!==n.loc.lexer?null:new nr(e.loc.lexer,e.loc.start,n.loc.end):e&&e.loc}}class _r{constructor(e,n){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=n}range(e,n){return new _r(n,nr.range(this,e))}}class pe{constructor(e,n){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var r="KaTeX parse error: "+e,i,s,o=n&&n.loc;if(o&&o.start<=o.end){var l=o.lexer.input;i=o.start,s=o.end,i===l.length?r+=" at end of input: ":r+=" at position "+(i+1)+": ";var c=l.slice(i,s).replace(/[^]/g,"$&̲"),h;i>15?h="…"+l.slice(i-15,i):h=l.slice(0,i);var u;s+15<l.length?u=l.slice(s,s+15)+"…":u=l.slice(s),r+=h+c+u}var d=new Error(r);return d.name="ParseError",d.__proto__=pe.prototype,d.position=i,i!=null&&s!=null&&(d.length=s-i),d.rawMessage=e,d}}pe.prototype.__proto__=Error.prototype;var jN=function(e,n){return e.indexOf(n)!==-1},CN=function(e,n){return e===void 0?n:e},AN=/([A-Z])/g,IN=function(e){return e.replace(AN,"-$1").toLowerCase()},MN={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},LN=/[&><"']/g;function ON(t){return String(t).replace(LN,e=>MN[e])}var j6=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},RN=function(e){var n=j6(e);return n.type==="mathord"||n.type==="textord"||n.type==="atom"},NN=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},DN=function(e){var n=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return n?n[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(n[1])?null:n[1].toLowerCase():"_relative"},ze={contains:jN,deflt:CN,escape:ON,hyphenate:IN,getBaseElem:j6,isCharacterBox:RN,protocolFromUrl:DN},vc={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function BN(t){if(t.default)return t.default;var e=t.type,n=Array.isArray(e)?e[0]:e;if(typeof n!="string")return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class K1{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var n in vc)if(vc.hasOwnProperty(n)){var r=vc[n];this[n]=e[n]!==void 0?r.processor?r.processor(e[n]):e[n]:BN(r)}}reportNonstrict(e,n,r){var i=this.strict;if(typeof i=="function"&&(i=i(e,n,r)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new pe("LaTeX-incompatible input and strict mode is set to 'error': "+(n+" ["+e+"]"),r);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]"))}}useStrictBehavior(e,n,r){var i=this.strict;if(typeof i=="function")try{i=i(e,n,r)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(n+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+n+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var n=ze.protocolFromUrl(e.url);if(n==null)return!1;e.protocol=n}var r=typeof this.trust=="function"?this.trust(e):this.trust;return!!r}}class Ta{constructor(e,n,r){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=n,this.cramped=r}sup(){return xi[PN[this.id]]}sub(){return xi[FN[this.id]]}fracNum(){return xi[HN[this.id]]}fracDen(){return xi[zN[this.id]]}cramp(){return xi[qN[this.id]]}text(){return xi[WN[this.id]]}isTight(){return this.size>=2}}var Z1=0,Zu=1,yo=2,sa=3,zc=4,Mr=5,Ro=6,Fn=7,xi=[new Ta(Z1,0,!1),new Ta(Zu,0,!0),new Ta(yo,1,!1),new Ta(sa,1,!0),new Ta(zc,2,!1),new Ta(Mr,2,!0),new Ta(Ro,3,!1),new Ta(Fn,3,!0)],PN=[zc,Mr,zc,Mr,Ro,Fn,Ro,Fn],FN=[Mr,Mr,Mr,Mr,Fn,Fn,Fn,Fn],HN=[yo,sa,zc,Mr,Ro,Fn,Ro,Fn],zN=[sa,sa,Mr,Mr,Fn,Fn,Fn,Fn],qN=[Zu,Zu,sa,sa,Mr,Mr,Fn,Fn],WN=[Z1,Zu,yo,sa,yo,sa,yo,sa],Ue={DISPLAY:xi[Z1],TEXT:xi[yo],SCRIPT:xi[zc],SCRIPTSCRIPT:xi[Ro]},ig=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function UN(t){for(var e=0;e<ig.length;e++)for(var n=ig[e],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(t>=i[0]&&t<=i[1])return n.name}return null}var Au=[];ig.forEach(t=>t.blocks.forEach(e=>Au.push(...e)));function C6(t){for(var e=0;e<Au.length;e+=2)if(t>=Au[e]&&t<=Au[e+1])return!0;return!1}var so=80,VN=function(e,n){return"M95,"+(622+e+n)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},YN=function(e,n){return"M263,"+(601+e+n)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},GN=function(e,n){return"M983 "+(10+e+n)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+n+"h400000v"+(40+e)+"h-400000z"},XN=function(e,n){return"M424,"+(2398+e+n)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+n+`
h400000v`+(40+e)+"h-400000z"},JN=function(e,n){return"M473,"+(2713+e+n)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+n+"h400000v"+(40+e)+"H1017.7z"},QN=function(e){var n=e/2;return"M400000 "+e+" H0 L"+n+" 0 l65 45 L145 "+(e-80)+" H400000z"},KN=function(e,n,r){var i=r-54-n-e;return"M702 "+(e+n)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+n+"H400000v"+(40+e)+"H742z"},ZN=function(e,n,r){n=1e3*n;var i="";switch(e){case"sqrtMain":i=VN(n,so);break;case"sqrtSize1":i=YN(n,so);break;case"sqrtSize2":i=GN(n,so);break;case"sqrtSize3":i=XN(n,so);break;case"sqrtSize4":i=JN(n,so);break;case"sqrtTall":i=KN(n,so,r)}return i},eD=function(e,n){switch(e){case"⎜":return"M291 0 H417 V"+n+" H291z M291 0 H417 V"+n+" H291z";case"∣":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z";case"∥":return"M145 0 H188 V"+n+" H145z M145 0 H188 V"+n+" H145z"+("M367 0 H410 V"+n+" H367z M367 0 H410 V"+n+" H367z");case"⎟":return"M457 0 H583 V"+n+" H457z M457 0 H583 V"+n+" H457z";case"⎢":return"M319 0 H403 V"+n+" H319z M319 0 H403 V"+n+" H319z";case"⎥":return"M263 0 H347 V"+n+" H263z M263 0 H347 V"+n+" H263z";case"⎪":return"M384 0 H504 V"+n+" H384z M384 0 H504 V"+n+" H384z";case"⏐":return"M312 0 H355 V"+n+" H312z M312 0 H355 V"+n+" H312z";case"‖":return"M257 0 H300 V"+n+" H257z M257 0 H300 V"+n+" H257z"+("M478 0 H521 V"+n+" H478z M478 0 H521 V"+n+" H478z");default:return""}},g2={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tD=function(e,n){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+n+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+n+" v1759 h84z";case"vert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+" v585 h43z";case"doublevert":return"M145 15 v585 v"+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+n+` v585 h43z
M367 15 v585 v`+n+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-n+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+n+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+n+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+n+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+n+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+n+` v602 h84z
M403 1759 V0 H319 V1759 v`+n+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+n+` v602 h84z
M347 1759 V0 h-84 V1759 v`+n+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(n+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(n+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(n+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(n+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class mh{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return ze.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){for(var e="",n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e}toText(){var e=n=>n.toText();return this.children.map(e).join("")}}var ki={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},qh={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},b2={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function A6(t,e){ki[t]=e}function eb(t,e,n){if(!ki[e])throw new Error("Font metrics not found for font: "+e+".");var r=t.charCodeAt(0),i=ki[e][r];if(!i&&t[0]in b2&&(r=b2[t[0]].charCodeAt(0),i=ki[e][r]),!i&&n==="text"&&C6(r)&&(i=ki[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var I0={};function nD(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!I0[e]){var n=I0[e]={cssEmPerMu:qh.quad[e]/18};for(var r in qh)qh.hasOwnProperty(r)&&(n[r]=qh[r][e])}return I0[e]}var rD=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],y2=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],x2=function(e,n){return n.size<2?e:rD[e-1][n.size-1]};class ea{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||ea.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=y2[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return new ea(n)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:x2(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:y2[e-1]})}havingBaseStyle(e){e=e||this.style.text();var n=x2(ea.BASESIZE,e);return this.size===n&&this.textSize===ea.BASESIZE&&this.style===e?this:this.extend({style:e,size:n})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ea.BASESIZE?["sizing","reset-size"+this.size,"size"+ea.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=nD(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ea.BASESIZE=6;var ag={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},iD={ex:!0,em:!0,mu:!0},I6=function(e){return typeof e!="string"&&(e=e.unit),e in ag||e in iD||e==="ex"},Ht=function(e,n){var r;if(e.unit in ag)r=ag[e.unit]/n.fontMetrics().ptPerEm/n.sizeMultiplier;else if(e.unit==="mu")r=n.fontMetrics().cssEmPerMu;else{var i;if(n.style.isTight()?i=n.havingStyle(n.style.text()):i=n,e.unit==="ex")r=i.fontMetrics().xHeight;else if(e.unit==="em")r=i.fontMetrics().quad;else throw new pe("Invalid unit: '"+e.unit+"'");i!==n&&(r*=i.sizeMultiplier/n.sizeMultiplier)}return Math.min(e.number*r,n.maxSize)},ve=function(e){return+e.toFixed(4)+"em"},Ba=function(e){return e.filter(n=>n).join(" ")},M6=function(e,n,r){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=r||{},n){n.style.isTight()&&this.classes.push("mtight");var i=n.getColor();i&&(this.style.color=i)}},L6=function(e){var n=document.createElement(e);n.className=Ba(this.classes);for(var r in this.style)this.style.hasOwnProperty(r)&&(n.style[r]=this.style[r]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&n.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)n.appendChild(this.children[s].toNode());return n},aD=/[\s"'>/=\x00-\x1f]/,O6=function(e){var n="<"+e;this.classes.length&&(n+=' class="'+ze.escape(Ba(this.classes))+'"');var r="";for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=ze.hyphenate(i)+":"+this.style[i]+";");r&&(n+=' style="'+ze.escape(r)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(aD.test(s))throw new pe("Invalid attribute name '"+s+"'");n+=" "+s+'="'+ze.escape(this.attributes[s])+'"'}n+=">";for(var o=0;o<this.children.length;o++)n+=this.children[o].toMarkup();return n+="</"+e+">",n};class gh{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,M6.call(this,e,r,i),this.children=n||[]}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return ze.contains(this.classes,e)}toNode(){return L6.call(this,"span")}toMarkup(){return O6.call(this,"span")}}class tb{constructor(e,n,r,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,M6.call(this,n,i),this.children=r||[],this.setAttribute("href",e)}setAttribute(e,n){this.attributes[e]=n}hasClass(e){return ze.contains(this.classes,e)}toNode(){return L6.call(this,"a")}toMarkup(){return O6.call(this,"a")}}class sD{constructor(e,n,r){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=n,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return ze.contains(this.classes,e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var n in this.style)this.style.hasOwnProperty(n)&&(e.style[n]=this.style[n]);return e}toMarkup(){var e='<img src="'+ze.escape(this.src)+'"'+(' alt="'+ze.escape(this.alt)+'"'),n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=ze.hyphenate(r)+":"+this.style[r]+";");return n&&(e+=' style="'+ze.escape(n)+'"'),e+="'/>",e}}var oD={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"};class Rr{constructor(e,n,r,i,s,o,l,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=n||0,this.depth=r||0,this.italic=i||0,this.skew=s||0,this.width=o||0,this.classes=l||[],this.style=c||{},this.maxFontSize=0;var h=UN(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=oD[this.text])}hasClass(e){return ze.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),n=null;this.italic>0&&(n=document.createElement("span"),n.style.marginRight=ve(this.italic)),this.classes.length>0&&(n=n||document.createElement("span"),n.className=Ba(this.classes));for(var r in this.style)this.style.hasOwnProperty(r)&&(n=n||document.createElement("span"),n.style[r]=this.style[r]);return n?(n.appendChild(e),n):e}toMarkup(){var e=!1,n="<span";this.classes.length&&(e=!0,n+=' class="',n+=ze.escape(Ba(this.classes)),n+='"');var r="";this.italic>0&&(r+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(r+=ze.hyphenate(i)+":"+this.style[i]+";");r&&(e=!0,n+=' style="'+ze.escape(r)+'"');var s=ze.escape(this.text);return e?(n+=">",n+=s,n+="</span>",n):s}}class ha{constructor(e,n){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=n||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)n.appendChild(this.children[i].toNode());return n}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+ze.escape(this.attributes[n])+'"');e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</svg>",e}}class Pa{constructor(e,n){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=n}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"path");return this.alternate?n.setAttribute("d",this.alternate):n.setAttribute("d",g2[this.pathName]),n}toMarkup(){return this.alternate?'<path d="'+ze.escape(this.alternate)+'"/>':'<path d="'+ze.escape(g2[this.pathName])+'"/>'}}class sg{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"line");for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&n.setAttribute(r,this.attributes[r]);return n}toMarkup(){var e="<line";for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="'+ze.escape(this.attributes[n])+'"');return e+="/>",e}}function w2(t){if(t instanceof Rr)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function lD(t){if(t instanceof gh)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var cD={bin:1,close:1,inner:1,open:1,punct:1,rel:1},hD={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Mt={math:{},text:{}};function _(t,e,n,r,i,s){Mt[t][i]={font:e,group:n,replace:r},s&&r&&(Mt[t][r]=Mt[t][i])}var k="math",he="text",I="main",V="ams",Pt="accent-token",Ee="bin",Vn="close",tl="inner",We="mathord",Zt="op-token",kr="open",cf="punct",G="rel",ba="spacing",ee="textord";_(k,I,G,"≡","\\equiv",!0);_(k,I,G,"≺","\\prec",!0);_(k,I,G,"≻","\\succ",!0);_(k,I,G,"∼","\\sim",!0);_(k,I,G,"⊥","\\perp");_(k,I,G,"⪯","\\preceq",!0);_(k,I,G,"⪰","\\succeq",!0);_(k,I,G,"≃","\\simeq",!0);_(k,I,G,"∣","\\mid",!0);_(k,I,G,"≪","\\ll",!0);_(k,I,G,"≫","\\gg",!0);_(k,I,G,"≍","\\asymp",!0);_(k,I,G,"∥","\\parallel");_(k,I,G,"⋈","\\bowtie",!0);_(k,I,G,"⌣","\\smile",!0);_(k,I,G,"⊑","\\sqsubseteq",!0);_(k,I,G,"⊒","\\sqsupseteq",!0);_(k,I,G,"≐","\\doteq",!0);_(k,I,G,"⌢","\\frown",!0);_(k,I,G,"∋","\\ni",!0);_(k,I,G,"∝","\\propto",!0);_(k,I,G,"⊢","\\vdash",!0);_(k,I,G,"⊣","\\dashv",!0);_(k,I,G,"∋","\\owns");_(k,I,cf,".","\\ldotp");_(k,I,cf,"⋅","\\cdotp");_(k,I,ee,"#","\\#");_(he,I,ee,"#","\\#");_(k,I,ee,"&","\\&");_(he,I,ee,"&","\\&");_(k,I,ee,"ℵ","\\aleph",!0);_(k,I,ee,"∀","\\forall",!0);_(k,I,ee,"ℏ","\\hbar",!0);_(k,I,ee,"∃","\\exists",!0);_(k,I,ee,"∇","\\nabla",!0);_(k,I,ee,"♭","\\flat",!0);_(k,I,ee,"ℓ","\\ell",!0);_(k,I,ee,"♮","\\natural",!0);_(k,I,ee,"♣","\\clubsuit",!0);_(k,I,ee,"℘","\\wp",!0);_(k,I,ee,"♯","\\sharp",!0);_(k,I,ee,"♢","\\diamondsuit",!0);_(k,I,ee,"ℜ","\\Re",!0);_(k,I,ee,"♡","\\heartsuit",!0);_(k,I,ee,"ℑ","\\Im",!0);_(k,I,ee,"♠","\\spadesuit",!0);_(k,I,ee,"§","\\S",!0);_(he,I,ee,"§","\\S");_(k,I,ee,"¶","\\P",!0);_(he,I,ee,"¶","\\P");_(k,I,ee,"†","\\dag");_(he,I,ee,"†","\\dag");_(he,I,ee,"†","\\textdagger");_(k,I,ee,"‡","\\ddag");_(he,I,ee,"‡","\\ddag");_(he,I,ee,"‡","\\textdaggerdbl");_(k,I,Vn,"⎱","\\rmoustache",!0);_(k,I,kr,"⎰","\\lmoustache",!0);_(k,I,Vn,"⟯","\\rgroup",!0);_(k,I,kr,"⟮","\\lgroup",!0);_(k,I,Ee,"∓","\\mp",!0);_(k,I,Ee,"⊖","\\ominus",!0);_(k,I,Ee,"⊎","\\uplus",!0);_(k,I,Ee,"⊓","\\sqcap",!0);_(k,I,Ee,"∗","\\ast");_(k,I,Ee,"⊔","\\sqcup",!0);_(k,I,Ee,"◯","\\bigcirc",!0);_(k,I,Ee,"∙","\\bullet",!0);_(k,I,Ee,"‡","\\ddagger");_(k,I,Ee,"≀","\\wr",!0);_(k,I,Ee,"⨿","\\amalg");_(k,I,Ee,"&","\\And");_(k,I,G,"⟵","\\longleftarrow",!0);_(k,I,G,"⇐","\\Leftarrow",!0);_(k,I,G,"⟸","\\Longleftarrow",!0);_(k,I,G,"⟶","\\longrightarrow",!0);_(k,I,G,"⇒","\\Rightarrow",!0);_(k,I,G,"⟹","\\Longrightarrow",!0);_(k,I,G,"↔","\\leftrightarrow",!0);_(k,I,G,"⟷","\\longleftrightarrow",!0);_(k,I,G,"⇔","\\Leftrightarrow",!0);_(k,I,G,"⟺","\\Longleftrightarrow",!0);_(k,I,G,"↦","\\mapsto",!0);_(k,I,G,"⟼","\\longmapsto",!0);_(k,I,G,"↗","\\nearrow",!0);_(k,I,G,"↩","\\hookleftarrow",!0);_(k,I,G,"↪","\\hookrightarrow",!0);_(k,I,G,"↘","\\searrow",!0);_(k,I,G,"↼","\\leftharpoonup",!0);_(k,I,G,"⇀","\\rightharpoonup",!0);_(k,I,G,"↙","\\swarrow",!0);_(k,I,G,"↽","\\leftharpoondown",!0);_(k,I,G,"⇁","\\rightharpoondown",!0);_(k,I,G,"↖","\\nwarrow",!0);_(k,I,G,"⇌","\\rightleftharpoons",!0);_(k,V,G,"≮","\\nless",!0);_(k,V,G,"","\\@nleqslant");_(k,V,G,"","\\@nleqq");_(k,V,G,"⪇","\\lneq",!0);_(k,V,G,"≨","\\lneqq",!0);_(k,V,G,"","\\@lvertneqq");_(k,V,G,"⋦","\\lnsim",!0);_(k,V,G,"⪉","\\lnapprox",!0);_(k,V,G,"⊀","\\nprec",!0);_(k,V,G,"⋠","\\npreceq",!0);_(k,V,G,"⋨","\\precnsim",!0);_(k,V,G,"⪹","\\precnapprox",!0);_(k,V,G,"≁","\\nsim",!0);_(k,V,G,"","\\@nshortmid");_(k,V,G,"∤","\\nmid",!0);_(k,V,G,"⊬","\\nvdash",!0);_(k,V,G,"⊭","\\nvDash",!0);_(k,V,G,"⋪","\\ntriangleleft");_(k,V,G,"⋬","\\ntrianglelefteq",!0);_(k,V,G,"⊊","\\subsetneq",!0);_(k,V,G,"","\\@varsubsetneq");_(k,V,G,"⫋","\\subsetneqq",!0);_(k,V,G,"","\\@varsubsetneqq");_(k,V,G,"≯","\\ngtr",!0);_(k,V,G,"","\\@ngeqslant");_(k,V,G,"","\\@ngeqq");_(k,V,G,"⪈","\\gneq",!0);_(k,V,G,"≩","\\gneqq",!0);_(k,V,G,"","\\@gvertneqq");_(k,V,G,"⋧","\\gnsim",!0);_(k,V,G,"⪊","\\gnapprox",!0);_(k,V,G,"⊁","\\nsucc",!0);_(k,V,G,"⋡","\\nsucceq",!0);_(k,V,G,"⋩","\\succnsim",!0);_(k,V,G,"⪺","\\succnapprox",!0);_(k,V,G,"≆","\\ncong",!0);_(k,V,G,"","\\@nshortparallel");_(k,V,G,"∦","\\nparallel",!0);_(k,V,G,"⊯","\\nVDash",!0);_(k,V,G,"⋫","\\ntriangleright");_(k,V,G,"⋭","\\ntrianglerighteq",!0);_(k,V,G,"","\\@nsupseteqq");_(k,V,G,"⊋","\\supsetneq",!0);_(k,V,G,"","\\@varsupsetneq");_(k,V,G,"⫌","\\supsetneqq",!0);_(k,V,G,"","\\@varsupsetneqq");_(k,V,G,"⊮","\\nVdash",!0);_(k,V,G,"⪵","\\precneqq",!0);_(k,V,G,"⪶","\\succneqq",!0);_(k,V,G,"","\\@nsubseteqq");_(k,V,Ee,"⊴","\\unlhd");_(k,V,Ee,"⊵","\\unrhd");_(k,V,G,"↚","\\nleftarrow",!0);_(k,V,G,"↛","\\nrightarrow",!0);_(k,V,G,"⇍","\\nLeftarrow",!0);_(k,V,G,"⇏","\\nRightarrow",!0);_(k,V,G,"↮","\\nleftrightarrow",!0);_(k,V,G,"⇎","\\nLeftrightarrow",!0);_(k,V,G,"△","\\vartriangle");_(k,V,ee,"ℏ","\\hslash");_(k,V,ee,"▽","\\triangledown");_(k,V,ee,"◊","\\lozenge");_(k,V,ee,"Ⓢ","\\circledS");_(k,V,ee,"®","\\circledR");_(he,V,ee,"®","\\circledR");_(k,V,ee,"∡","\\measuredangle",!0);_(k,V,ee,"∄","\\nexists");_(k,V,ee,"℧","\\mho");_(k,V,ee,"Ⅎ","\\Finv",!0);_(k,V,ee,"⅁","\\Game",!0);_(k,V,ee,"‵","\\backprime");_(k,V,ee,"▲","\\blacktriangle");_(k,V,ee,"▼","\\blacktriangledown");_(k,V,ee,"■","\\blacksquare");_(k,V,ee,"⧫","\\blacklozenge");_(k,V,ee,"★","\\bigstar");_(k,V,ee,"∢","\\sphericalangle",!0);_(k,V,ee,"∁","\\complement",!0);_(k,V,ee,"ð","\\eth",!0);_(he,I,ee,"ð","ð");_(k,V,ee,"╱","\\diagup");_(k,V,ee,"╲","\\diagdown");_(k,V,ee,"□","\\square");_(k,V,ee,"□","\\Box");_(k,V,ee,"◊","\\Diamond");_(k,V,ee,"¥","\\yen",!0);_(he,V,ee,"¥","\\yen",!0);_(k,V,ee,"✓","\\checkmark",!0);_(he,V,ee,"✓","\\checkmark");_(k,V,ee,"ℶ","\\beth",!0);_(k,V,ee,"ℸ","\\daleth",!0);_(k,V,ee,"ℷ","\\gimel",!0);_(k,V,ee,"ϝ","\\digamma",!0);_(k,V,ee,"ϰ","\\varkappa");_(k,V,kr,"┌","\\@ulcorner",!0);_(k,V,Vn,"┐","\\@urcorner",!0);_(k,V,kr,"└","\\@llcorner",!0);_(k,V,Vn,"┘","\\@lrcorner",!0);_(k,V,G,"≦","\\leqq",!0);_(k,V,G,"⩽","\\leqslant",!0);_(k,V,G,"⪕","\\eqslantless",!0);_(k,V,G,"≲","\\lesssim",!0);_(k,V,G,"⪅","\\lessapprox",!0);_(k,V,G,"≊","\\approxeq",!0);_(k,V,Ee,"⋖","\\lessdot");_(k,V,G,"⋘","\\lll",!0);_(k,V,G,"≶","\\lessgtr",!0);_(k,V,G,"⋚","\\lesseqgtr",!0);_(k,V,G,"⪋","\\lesseqqgtr",!0);_(k,V,G,"≑","\\doteqdot");_(k,V,G,"≓","\\risingdotseq",!0);_(k,V,G,"≒","\\fallingdotseq",!0);_(k,V,G,"∽","\\backsim",!0);_(k,V,G,"⋍","\\backsimeq",!0);_(k,V,G,"⫅","\\subseteqq",!0);_(k,V,G,"⋐","\\Subset",!0);_(k,V,G,"⊏","\\sqsubset",!0);_(k,V,G,"≼","\\preccurlyeq",!0);_(k,V,G,"⋞","\\curlyeqprec",!0);_(k,V,G,"≾","\\precsim",!0);_(k,V,G,"⪷","\\precapprox",!0);_(k,V,G,"⊲","\\vartriangleleft");_(k,V,G,"⊴","\\trianglelefteq");_(k,V,G,"⊨","\\vDash",!0);_(k,V,G,"⊪","\\Vvdash",!0);_(k,V,G,"⌣","\\smallsmile");_(k,V,G,"⌢","\\smallfrown");_(k,V,G,"≏","\\bumpeq",!0);_(k,V,G,"≎","\\Bumpeq",!0);_(k,V,G,"≧","\\geqq",!0);_(k,V,G,"⩾","\\geqslant",!0);_(k,V,G,"⪖","\\eqslantgtr",!0);_(k,V,G,"≳","\\gtrsim",!0);_(k,V,G,"⪆","\\gtrapprox",!0);_(k,V,Ee,"⋗","\\gtrdot");_(k,V,G,"⋙","\\ggg",!0);_(k,V,G,"≷","\\gtrless",!0);_(k,V,G,"⋛","\\gtreqless",!0);_(k,V,G,"⪌","\\gtreqqless",!0);_(k,V,G,"≖","\\eqcirc",!0);_(k,V,G,"≗","\\circeq",!0);_(k,V,G,"≜","\\triangleq",!0);_(k,V,G,"∼","\\thicksim");_(k,V,G,"≈","\\thickapprox");_(k,V,G,"⫆","\\supseteqq",!0);_(k,V,G,"⋑","\\Supset",!0);_(k,V,G,"⊐","\\sqsupset",!0);_(k,V,G,"≽","\\succcurlyeq",!0);_(k,V,G,"⋟","\\curlyeqsucc",!0);_(k,V,G,"≿","\\succsim",!0);_(k,V,G,"⪸","\\succapprox",!0);_(k,V,G,"⊳","\\vartriangleright");_(k,V,G,"⊵","\\trianglerighteq");_(k,V,G,"⊩","\\Vdash",!0);_(k,V,G,"∣","\\shortmid");_(k,V,G,"∥","\\shortparallel");_(k,V,G,"≬","\\between",!0);_(k,V,G,"⋔","\\pitchfork",!0);_(k,V,G,"∝","\\varpropto");_(k,V,G,"◀","\\blacktriangleleft");_(k,V,G,"∴","\\therefore",!0);_(k,V,G,"∍","\\backepsilon");_(k,V,G,"▶","\\blacktriangleright");_(k,V,G,"∵","\\because",!0);_(k,V,G,"⋘","\\llless");_(k,V,G,"⋙","\\gggtr");_(k,V,Ee,"⊲","\\lhd");_(k,V,Ee,"⊳","\\rhd");_(k,V,G,"≂","\\eqsim",!0);_(k,I,G,"⋈","\\Join");_(k,V,G,"≑","\\Doteq",!0);_(k,V,Ee,"∔","\\dotplus",!0);_(k,V,Ee,"∖","\\smallsetminus");_(k,V,Ee,"⋒","\\Cap",!0);_(k,V,Ee,"⋓","\\Cup",!0);_(k,V,Ee,"⩞","\\doublebarwedge",!0);_(k,V,Ee,"⊟","\\boxminus",!0);_(k,V,Ee,"⊞","\\boxplus",!0);_(k,V,Ee,"⋇","\\divideontimes",!0);_(k,V,Ee,"⋉","\\ltimes",!0);_(k,V,Ee,"⋊","\\rtimes",!0);_(k,V,Ee,"⋋","\\leftthreetimes",!0);_(k,V,Ee,"⋌","\\rightthreetimes",!0);_(k,V,Ee,"⋏","\\curlywedge",!0);_(k,V,Ee,"⋎","\\curlyvee",!0);_(k,V,Ee,"⊝","\\circleddash",!0);_(k,V,Ee,"⊛","\\circledast",!0);_(k,V,Ee,"⋅","\\centerdot");_(k,V,Ee,"⊺","\\intercal",!0);_(k,V,Ee,"⋒","\\doublecap");_(k,V,Ee,"⋓","\\doublecup");_(k,V,Ee,"⊠","\\boxtimes",!0);_(k,V,G,"⇢","\\dashrightarrow",!0);_(k,V,G,"⇠","\\dashleftarrow",!0);_(k,V,G,"⇇","\\leftleftarrows",!0);_(k,V,G,"⇆","\\leftrightarrows",!0);_(k,V,G,"⇚","\\Lleftarrow",!0);_(k,V,G,"↞","\\twoheadleftarrow",!0);_(k,V,G,"↢","\\leftarrowtail",!0);_(k,V,G,"↫","\\looparrowleft",!0);_(k,V,G,"⇋","\\leftrightharpoons",!0);_(k,V,G,"↶","\\curvearrowleft",!0);_(k,V,G,"↺","\\circlearrowleft",!0);_(k,V,G,"↰","\\Lsh",!0);_(k,V,G,"⇈","\\upuparrows",!0);_(k,V,G,"↿","\\upharpoonleft",!0);_(k,V,G,"⇃","\\downharpoonleft",!0);_(k,I,G,"⊶","\\origof",!0);_(k,I,G,"⊷","\\imageof",!0);_(k,V,G,"⊸","\\multimap",!0);_(k,V,G,"↭","\\leftrightsquigarrow",!0);_(k,V,G,"⇉","\\rightrightarrows",!0);_(k,V,G,"⇄","\\rightleftarrows",!0);_(k,V,G,"↠","\\twoheadrightarrow",!0);_(k,V,G,"↣","\\rightarrowtail",!0);_(k,V,G,"↬","\\looparrowright",!0);_(k,V,G,"↷","\\curvearrowright",!0);_(k,V,G,"↻","\\circlearrowright",!0);_(k,V,G,"↱","\\Rsh",!0);_(k,V,G,"⇊","\\downdownarrows",!0);_(k,V,G,"↾","\\upharpoonright",!0);_(k,V,G,"⇂","\\downharpoonright",!0);_(k,V,G,"⇝","\\rightsquigarrow",!0);_(k,V,G,"⇝","\\leadsto");_(k,V,G,"⇛","\\Rrightarrow",!0);_(k,V,G,"↾","\\restriction");_(k,I,ee,"‘","`");_(k,I,ee,"$","\\$");_(he,I,ee,"$","\\$");_(he,I,ee,"$","\\textdollar");_(k,I,ee,"%","\\%");_(he,I,ee,"%","\\%");_(k,I,ee,"_","\\_");_(he,I,ee,"_","\\_");_(he,I,ee,"_","\\textunderscore");_(k,I,ee,"∠","\\angle",!0);_(k,I,ee,"∞","\\infty",!0);_(k,I,ee,"′","\\prime");_(k,I,ee,"△","\\triangle");_(k,I,ee,"Γ","\\Gamma",!0);_(k,I,ee,"Δ","\\Delta",!0);_(k,I,ee,"Θ","\\Theta",!0);_(k,I,ee,"Λ","\\Lambda",!0);_(k,I,ee,"Ξ","\\Xi",!0);_(k,I,ee,"Π","\\Pi",!0);_(k,I,ee,"Σ","\\Sigma",!0);_(k,I,ee,"Υ","\\Upsilon",!0);_(k,I,ee,"Φ","\\Phi",!0);_(k,I,ee,"Ψ","\\Psi",!0);_(k,I,ee,"Ω","\\Omega",!0);_(k,I,ee,"A","Α");_(k,I,ee,"B","Β");_(k,I,ee,"E","Ε");_(k,I,ee,"Z","Ζ");_(k,I,ee,"H","Η");_(k,I,ee,"I","Ι");_(k,I,ee,"K","Κ");_(k,I,ee,"M","Μ");_(k,I,ee,"N","Ν");_(k,I,ee,"O","Ο");_(k,I,ee,"P","Ρ");_(k,I,ee,"T","Τ");_(k,I,ee,"X","Χ");_(k,I,ee,"¬","\\neg",!0);_(k,I,ee,"¬","\\lnot");_(k,I,ee,"⊤","\\top");_(k,I,ee,"⊥","\\bot");_(k,I,ee,"∅","\\emptyset");_(k,V,ee,"∅","\\varnothing");_(k,I,We,"α","\\alpha",!0);_(k,I,We,"β","\\beta",!0);_(k,I,We,"γ","\\gamma",!0);_(k,I,We,"δ","\\delta",!0);_(k,I,We,"ϵ","\\epsilon",!0);_(k,I,We,"ζ","\\zeta",!0);_(k,I,We,"η","\\eta",!0);_(k,I,We,"θ","\\theta",!0);_(k,I,We,"ι","\\iota",!0);_(k,I,We,"κ","\\kappa",!0);_(k,I,We,"λ","\\lambda",!0);_(k,I,We,"μ","\\mu",!0);_(k,I,We,"ν","\\nu",!0);_(k,I,We,"ξ","\\xi",!0);_(k,I,We,"ο","\\omicron",!0);_(k,I,We,"π","\\pi",!0);_(k,I,We,"ρ","\\rho",!0);_(k,I,We,"σ","\\sigma",!0);_(k,I,We,"τ","\\tau",!0);_(k,I,We,"υ","\\upsilon",!0);_(k,I,We,"ϕ","\\phi",!0);_(k,I,We,"χ","\\chi",!0);_(k,I,We,"ψ","\\psi",!0);_(k,I,We,"ω","\\omega",!0);_(k,I,We,"ε","\\varepsilon",!0);_(k,I,We,"ϑ","\\vartheta",!0);_(k,I,We,"ϖ","\\varpi",!0);_(k,I,We,"ϱ","\\varrho",!0);_(k,I,We,"ς","\\varsigma",!0);_(k,I,We,"φ","\\varphi",!0);_(k,I,Ee,"∗","*",!0);_(k,I,Ee,"+","+");_(k,I,Ee,"−","-",!0);_(k,I,Ee,"⋅","\\cdot",!0);_(k,I,Ee,"∘","\\circ",!0);_(k,I,Ee,"÷","\\div",!0);_(k,I,Ee,"±","\\pm",!0);_(k,I,Ee,"×","\\times",!0);_(k,I,Ee,"∩","\\cap",!0);_(k,I,Ee,"∪","\\cup",!0);_(k,I,Ee,"∖","\\setminus",!0);_(k,I,Ee,"∧","\\land");_(k,I,Ee,"∨","\\lor");_(k,I,Ee,"∧","\\wedge",!0);_(k,I,Ee,"∨","\\vee",!0);_(k,I,ee,"√","\\surd");_(k,I,kr,"⟨","\\langle",!0);_(k,I,kr,"∣","\\lvert");_(k,I,kr,"∥","\\lVert");_(k,I,Vn,"?","?");_(k,I,Vn,"!","!");_(k,I,Vn,"⟩","\\rangle",!0);_(k,I,Vn,"∣","\\rvert");_(k,I,Vn,"∥","\\rVert");_(k,I,G,"=","=");_(k,I,G,":",":");_(k,I,G,"≈","\\approx",!0);_(k,I,G,"≅","\\cong",!0);_(k,I,G,"≥","\\ge");_(k,I,G,"≥","\\geq",!0);_(k,I,G,"←","\\gets");_(k,I,G,">","\\gt",!0);_(k,I,G,"∈","\\in",!0);_(k,I,G,"","\\@not");_(k,I,G,"⊂","\\subset",!0);_(k,I,G,"⊃","\\supset",!0);_(k,I,G,"⊆","\\subseteq",!0);_(k,I,G,"⊇","\\supseteq",!0);_(k,V,G,"⊈","\\nsubseteq",!0);_(k,V,G,"⊉","\\nsupseteq",!0);_(k,I,G,"⊨","\\models");_(k,I,G,"←","\\leftarrow",!0);_(k,I,G,"≤","\\le");_(k,I,G,"≤","\\leq",!0);_(k,I,G,"<","\\lt",!0);_(k,I,G,"→","\\rightarrow",!0);_(k,I,G,"→","\\to");_(k,V,G,"≱","\\ngeq",!0);_(k,V,G,"≰","\\nleq",!0);_(k,I,ba," ","\\ ");_(k,I,ba," ","\\space");_(k,I,ba," ","\\nobreakspace");_(he,I,ba," ","\\ ");_(he,I,ba," "," ");_(he,I,ba," ","\\space");_(he,I,ba," ","\\nobreakspace");_(k,I,ba,null,"\\nobreak");_(k,I,ba,null,"\\allowbreak");_(k,I,cf,",",",");_(k,I,cf,";",";");_(k,V,Ee,"⊼","\\barwedge",!0);_(k,V,Ee,"⊻","\\veebar",!0);_(k,I,Ee,"⊙","\\odot",!0);_(k,I,Ee,"⊕","\\oplus",!0);_(k,I,Ee,"⊗","\\otimes",!0);_(k,I,ee,"∂","\\partial",!0);_(k,I,Ee,"⊘","\\oslash",!0);_(k,V,Ee,"⊚","\\circledcirc",!0);_(k,V,Ee,"⊡","\\boxdot",!0);_(k,I,Ee,"△","\\bigtriangleup");_(k,I,Ee,"▽","\\bigtriangledown");_(k,I,Ee,"†","\\dagger");_(k,I,Ee,"⋄","\\diamond");_(k,I,Ee,"⋆","\\star");_(k,I,Ee,"◃","\\triangleleft");_(k,I,Ee,"▹","\\triangleright");_(k,I,kr,"{","\\{");_(he,I,ee,"{","\\{");_(he,I,ee,"{","\\textbraceleft");_(k,I,Vn,"}","\\}");_(he,I,ee,"}","\\}");_(he,I,ee,"}","\\textbraceright");_(k,I,kr,"{","\\lbrace");_(k,I,Vn,"}","\\rbrace");_(k,I,kr,"[","\\lbrack",!0);_(he,I,ee,"[","\\lbrack",!0);_(k,I,Vn,"]","\\rbrack",!0);_(he,I,ee,"]","\\rbrack",!0);_(k,I,kr,"(","\\lparen",!0);_(k,I,Vn,")","\\rparen",!0);_(he,I,ee,"<","\\textless",!0);_(he,I,ee,">","\\textgreater",!0);_(k,I,kr,"⌊","\\lfloor",!0);_(k,I,Vn,"⌋","\\rfloor",!0);_(k,I,kr,"⌈","\\lceil",!0);_(k,I,Vn,"⌉","\\rceil",!0);_(k,I,ee,"\\","\\backslash");_(k,I,ee,"∣","|");_(k,I,ee,"∣","\\vert");_(he,I,ee,"|","\\textbar",!0);_(k,I,ee,"∥","\\|");_(k,I,ee,"∥","\\Vert");_(he,I,ee,"∥","\\textbardbl");_(he,I,ee,"~","\\textasciitilde");_(he,I,ee,"\\","\\textbackslash");_(he,I,ee,"^","\\textasciicircum");_(k,I,G,"↑","\\uparrow",!0);_(k,I,G,"⇑","\\Uparrow",!0);_(k,I,G,"↓","\\downarrow",!0);_(k,I,G,"⇓","\\Downarrow",!0);_(k,I,G,"↕","\\updownarrow",!0);_(k,I,G,"⇕","\\Updownarrow",!0);_(k,I,Zt,"∐","\\coprod");_(k,I,Zt,"⋁","\\bigvee");_(k,I,Zt,"⋀","\\bigwedge");_(k,I,Zt,"⨄","\\biguplus");_(k,I,Zt,"⋂","\\bigcap");_(k,I,Zt,"⋃","\\bigcup");_(k,I,Zt,"∫","\\int");_(k,I,Zt,"∫","\\intop");_(k,I,Zt,"∬","\\iint");_(k,I,Zt,"∭","\\iiint");_(k,I,Zt,"∏","\\prod");_(k,I,Zt,"∑","\\sum");_(k,I,Zt,"⨂","\\bigotimes");_(k,I,Zt,"⨁","\\bigoplus");_(k,I,Zt,"⨀","\\bigodot");_(k,I,Zt,"∮","\\oint");_(k,I,Zt,"∯","\\oiint");_(k,I,Zt,"∰","\\oiiint");_(k,I,Zt,"⨆","\\bigsqcup");_(k,I,Zt,"∫","\\smallint");_(he,I,tl,"…","\\textellipsis");_(k,I,tl,"…","\\mathellipsis");_(he,I,tl,"…","\\ldots",!0);_(k,I,tl,"…","\\ldots",!0);_(k,I,tl,"⋯","\\@cdots",!0);_(k,I,tl,"⋱","\\ddots",!0);_(k,I,ee,"⋮","\\varvdots");_(he,I,ee,"⋮","\\varvdots");_(k,I,Pt,"ˊ","\\acute");_(k,I,Pt,"ˋ","\\grave");_(k,I,Pt,"¨","\\ddot");_(k,I,Pt,"~","\\tilde");_(k,I,Pt,"ˉ","\\bar");_(k,I,Pt,"˘","\\breve");_(k,I,Pt,"ˇ","\\check");_(k,I,Pt,"^","\\hat");_(k,I,Pt,"⃗","\\vec");_(k,I,Pt,"˙","\\dot");_(k,I,Pt,"˚","\\mathring");_(k,I,We,"","\\@imath");_(k,I,We,"","\\@jmath");_(k,I,ee,"ı","ı");_(k,I,ee,"ȷ","ȷ");_(he,I,ee,"ı","\\i",!0);_(he,I,ee,"ȷ","\\j",!0);_(he,I,ee,"ß","\\ss",!0);_(he,I,ee,"æ","\\ae",!0);_(he,I,ee,"œ","\\oe",!0);_(he,I,ee,"ø","\\o",!0);_(he,I,ee,"Æ","\\AE",!0);_(he,I,ee,"Œ","\\OE",!0);_(he,I,ee,"Ø","\\O",!0);_(he,I,Pt,"ˊ","\\'");_(he,I,Pt,"ˋ","\\`");_(he,I,Pt,"ˆ","\\^");_(he,I,Pt,"˜","\\~");_(he,I,Pt,"ˉ","\\=");_(he,I,Pt,"˘","\\u");_(he,I,Pt,"˙","\\.");_(he,I,Pt,"¸","\\c");_(he,I,Pt,"˚","\\r");_(he,I,Pt,"ˇ","\\v");_(he,I,Pt,"¨",'\\"');_(he,I,Pt,"˝","\\H");_(he,I,Pt,"◯","\\textcircled");var R6={"--":!0,"---":!0,"``":!0,"''":!0};_(he,I,ee,"–","--",!0);_(he,I,ee,"–","\\textendash");_(he,I,ee,"—","---",!0);_(he,I,ee,"—","\\textemdash");_(he,I,ee,"‘","`",!0);_(he,I,ee,"‘","\\textquoteleft");_(he,I,ee,"’","'",!0);_(he,I,ee,"’","\\textquoteright");_(he,I,ee,"“","``",!0);_(he,I,ee,"“","\\textquotedblleft");_(he,I,ee,"”","''",!0);_(he,I,ee,"”","\\textquotedblright");_(k,I,ee,"°","\\degree",!0);_(he,I,ee,"°","\\degree");_(he,I,ee,"°","\\textdegree",!0);_(k,I,ee,"£","\\pounds");_(k,I,ee,"£","\\mathsterling",!0);_(he,I,ee,"£","\\pounds");_(he,I,ee,"£","\\textsterling",!0);_(k,V,ee,"✠","\\maltese");_(he,V,ee,"✠","\\maltese");var _2='0123456789/@."';for(var M0=0;M0<_2.length;M0++){var v2=_2.charAt(M0);_(k,I,ee,v2,v2)}var T2='0123456789!@*()-=+";:?/.,';for(var L0=0;L0<T2.length;L0++){var k2=T2.charAt(L0);_(he,I,ee,k2,k2)}var ed="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var O0=0;O0<ed.length;O0++){var Wh=ed.charAt(O0);_(k,I,We,Wh,Wh),_(he,I,ee,Wh,Wh)}_(k,V,ee,"C","ℂ");_(he,V,ee,"C","ℂ");_(k,V,ee,"H","ℍ");_(he,V,ee,"H","ℍ");_(k,V,ee,"N","ℕ");_(he,V,ee,"N","ℕ");_(k,V,ee,"P","ℙ");_(he,V,ee,"P","ℙ");_(k,V,ee,"Q","ℚ");_(he,V,ee,"Q","ℚ");_(k,V,ee,"R","ℝ");_(he,V,ee,"R","ℝ");_(k,V,ee,"Z","ℤ");_(he,V,ee,"Z","ℤ");_(k,I,We,"h","ℎ");_(he,I,We,"h","ℎ");var Ge="";for(var Dn=0;Dn<ed.length;Dn++){var zt=ed.charAt(Dn);Ge=String.fromCharCode(55349,56320+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56372+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56424+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56580+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56684+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56736+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56788+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56840+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56944+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Dn<26&&(Ge=String.fromCharCode(55349,56632+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge),Ge=String.fromCharCode(55349,56476+Dn),_(k,I,We,zt,Ge),_(he,I,ee,zt,Ge))}Ge="𝕜";_(k,I,We,"k",Ge);_(he,I,ee,"k",Ge);for(var es=0;es<10;es++){var ka=es.toString();Ge=String.fromCharCode(55349,57294+es),_(k,I,We,ka,Ge),_(he,I,ee,ka,Ge),Ge=String.fromCharCode(55349,57314+es),_(k,I,We,ka,Ge),_(he,I,ee,ka,Ge),Ge=String.fromCharCode(55349,57324+es),_(k,I,We,ka,Ge),_(he,I,ee,ka,Ge),Ge=String.fromCharCode(55349,57334+es),_(k,I,We,ka,Ge),_(he,I,ee,ka,Ge)}var og="ÐÞþ";for(var R0=0;R0<og.length;R0++){var Uh=og.charAt(R0);_(k,I,We,Uh,Uh),_(he,I,ee,Uh,Uh)}var Vh=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],S2=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],uD=function(e,n){var r=e.charCodeAt(0),i=e.charCodeAt(1),s=(r-55296)*1024+(i-56320)+65536,o=n==="math"?0:1;if(119808<=s&&s<120484){var l=Math.floor((s-119808)/26);return[Vh[l][2],Vh[l][o]]}else if(120782<=s&&s<=120831){var c=Math.floor((s-120782)/10);return[S2[c][2],S2[c][o]]}else{if(s===120485||s===120486)return[Vh[0][2],Vh[0][o]];if(120486<s&&s<120782)return["",""];throw new pe("Unsupported character: "+e)}},hf=function(e,n,r){return Mt[r][e]&&Mt[r][e].replace&&(e=Mt[r][e].replace),{value:e,metrics:eb(e,n,r)}},Kr=function(e,n,r,i,s){var o=hf(e,n,r),l=o.metrics;e=o.value;var c;if(l){var h=l.italic;(r==="text"||i&&i.font==="mathit")&&(h=0),c=new Rr(e,l.height,l.depth,h,l.skew,l.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+n+"' and mode '"+r+"'")),c=new Rr(e,0,0,0,0,0,s);if(i){c.maxFontSize=i.sizeMultiplier,i.style.isTight()&&c.classes.push("mtight");var u=i.getColor();u&&(c.style.color=u)}return c},dD=function(e,n,r,i){return i===void 0&&(i=[]),r.font==="boldsymbol"&&hf(e,"Main-Bold",n).metrics?Kr(e,"Main-Bold",n,r,i.concat(["mathbf"])):e==="\\"||Mt[n][e].font==="main"?Kr(e,"Main-Regular",n,r,i):Kr(e,"AMS-Regular",n,r,i.concat(["amsrm"]))},fD=function(e,n,r,i,s){return s!=="textord"&&hf(e,"Math-BoldItalic",n).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},pD=function(e,n,r){var i=e.mode,s=e.text,o=["mord"],l=i==="math"||i==="text"&&n.font,c=l?n.font:n.fontFamily,h="",u="";if(s.charCodeAt(0)===55349&&([h,u]=uD(s,i)),h.length>0)return Kr(s,h,i,n,o.concat(u));if(c){var d,f;if(c==="boldsymbol"){var p=fD(s,i,n,o,r);d=p.fontName,f=[p.fontClass]}else l?(d=B6[c].fontName,f=[c]):(d=Yh(c,n.fontWeight,n.fontShape),f=[c,n.fontWeight,n.fontShape]);if(hf(s,d,i).metrics)return Kr(s,d,i,n,o.concat(f));if(R6.hasOwnProperty(s)&&d.slice(0,10)==="Typewriter"){for(var m=[],g=0;g<s.length;g++)m.push(Kr(s[g],d,i,n,o.concat(f)));return D6(m)}}if(r==="mathord")return Kr(s,"Math-Italic",i,n,o.concat(["mathnormal"]));if(r==="textord"){var b=Mt[i][s]&&Mt[i][s].font;if(b==="ams"){var y=Yh("amsrm",n.fontWeight,n.fontShape);return Kr(s,y,i,n,o.concat("amsrm",n.fontWeight,n.fontShape))}else if(b==="main"||!b){var w=Yh("textrm",n.fontWeight,n.fontShape);return Kr(s,w,i,n,o.concat(n.fontWeight,n.fontShape))}else{var S=Yh(b,n.fontWeight,n.fontShape);return Kr(s,S,i,n,o.concat(S,n.fontWeight,n.fontShape))}}else throw new Error("unexpected type: "+r+" in makeOrd")},mD=(t,e)=>{if(Ba(t.classes)!==Ba(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var n=t.classes[0];if(n==="mbin"||n==="mord")return!1}for(var r in t.style)if(t.style.hasOwnProperty(r)&&t.style[r]!==e.style[r])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},gD=t=>{for(var e=0;e<t.length-1;e++){var n=t[e],r=t[e+1];n instanceof Rr&&r instanceof Rr&&mD(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,t.splice(e+1,1),e--)}return t},nb=function(e){for(var n=0,r=0,i=0,s=0;s<e.children.length;s++){var o=e.children[s];o.height>n&&(n=o.height),o.depth>r&&(r=o.depth),o.maxFontSize>i&&(i=o.maxFontSize)}e.height=n,e.depth=r,e.maxFontSize=i},tr=function(e,n,r,i){var s=new gh(e,n,r,i);return nb(s),s},N6=(t,e,n,r)=>new gh(t,e,n,r),bD=function(e,n,r){var i=tr([e],[],n);return i.height=Math.max(r||n.fontMetrics().defaultRuleThickness,n.minRuleThickness),i.style.borderBottomWidth=ve(i.height),i.maxFontSize=1,i},yD=function(e,n,r,i){var s=new tb(e,n,r,i);return nb(s),s},D6=function(e){var n=new mh(e);return nb(n),n},xD=function(e,n){return e instanceof mh?tr([],[e],n):e},wD=function(e){if(e.positionType==="individualShift"){for(var n=e.children,r=[n[0]],i=-n[0].shift-n[0].elem.depth,s=i,o=1;o<n.length;o++){var l=-n[o].shift-s-n[o].elem.depth,c=l-(n[o-1].elem.height+n[o-1].elem.depth);s=s+l,r.push({type:"kern",size:c}),r.push(n[o])}return{children:r,depth:i}}var h;if(e.positionType==="top"){for(var u=e.positionData,d=0;d<e.children.length;d++){var f=e.children[d];u-=f.type==="kern"?f.size:f.elem.height+f.elem.depth}h=u}else if(e.positionType==="bottom")h=-e.positionData;else{var p=e.children[0];if(p.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-p.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-p.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},_D=function(e,n){for(var{children:r,depth:i}=wD(e),s=0,o=0;o<r.length;o++){var l=r[o];if(l.type==="elem"){var c=l.elem;s=Math.max(s,c.maxFontSize,c.height)}}s+=2;var h=tr(["pstrut"],[]);h.style.height=ve(s);for(var u=[],d=i,f=i,p=i,m=0;m<r.length;m++){var g=r[m];if(g.type==="kern")p+=g.size;else{var b=g.elem,y=g.wrapperClasses||[],w=g.wrapperStyle||{},S=tr(y,[h,b],void 0,w);S.style.top=ve(-s-p-b.depth),g.marginLeft&&(S.style.marginLeft=g.marginLeft),g.marginRight&&(S.style.marginRight=g.marginRight),u.push(S),p+=b.height+b.depth}d=Math.min(d,p),f=Math.max(f,p)}var E=tr(["vlist"],u);E.style.height=ve(f);var T;if(d<0){var C=tr([],[]),M=tr(["vlist"],[C]);M.style.height=ve(-d);var R=tr(["vlist-s"],[new Rr("​")]);T=[tr(["vlist-r"],[E,R]),tr(["vlist-r"],[M])]}else T=[tr(["vlist-r"],[E])];var D=tr(["vlist-t"],T);return T.length===2&&D.classes.push("vlist-t2"),D.height=f,D.depth=-d,D},vD=(t,e)=>{var n=tr(["mspace"],[],e),r=Ht(t,e);return n.style.marginRight=ve(r),n},Yh=function(e,n,r){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return n==="textbf"&&r==="textit"?s="BoldItalic":n==="textbf"?s="Bold":n==="textit"?s="Italic":s="Regular",i+"-"+s},B6={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},P6={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},TD=function(e,n){var[r,i,s]=P6[e],o=new Pa(r),l=new ha([o],{width:ve(i),height:ve(s),style:"width:"+ve(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),c=N6(["overlay"],[l],n);return c.height=s,c.style.height=ve(s),c.style.width=ve(i),c},ae={fontMap:B6,makeSymbol:Kr,mathsym:dD,makeSpan:tr,makeSvgSpan:N6,makeLineSpan:bD,makeAnchor:yD,makeFragment:D6,wrapFragment:xD,makeVList:_D,makeOrd:pD,makeGlue:vD,staticSvg:TD,svgData:P6,tryCombineChars:gD},Ft={number:3,unit:"mu"},ts={number:4,unit:"mu"},Hi={number:5,unit:"mu"},kD={mord:{mop:Ft,mbin:ts,mrel:Hi,minner:Ft},mop:{mord:Ft,mop:Ft,mrel:Hi,minner:Ft},mbin:{mord:ts,mop:ts,mopen:ts,minner:ts},mrel:{mord:Hi,mop:Hi,mopen:Hi,minner:Hi},mopen:{},mclose:{mop:Ft,mbin:ts,mrel:Hi,minner:Ft},mpunct:{mord:Ft,mop:Ft,mrel:Hi,mopen:Ft,mclose:Ft,mpunct:Ft,minner:Ft},minner:{mord:Ft,mop:Ft,mbin:ts,mrel:Hi,mopen:Ft,mpunct:Ft,minner:Ft}},SD={mord:{mop:Ft},mop:{mord:Ft,mop:Ft},mbin:{},mrel:{},mopen:{},mclose:{mop:Ft},mpunct:{},minner:{mop:Ft}},F6={},td={},nd={};function Se(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,l={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:r.allowedInMath===void 0?!0:r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},c=0;c<n.length;++c)F6[n[c]]=l;e&&(s&&(td[e]=s),o&&(nd[e]=o))}function qs(t){var{type:e,htmlBuilder:n,mathmlBuilder:r}=t;Se({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var rd=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Gt=function(e){return e.type==="ordgroup"?e.body:[e]},ua=ae.makeSpan,$D=["leftmost","mbin","mopen","mrel","mop","mpunct"],ED=["rightmost","mrel","mclose","mpunct"],jD={display:Ue.DISPLAY,text:Ue.TEXT,script:Ue.SCRIPT,scriptscript:Ue.SCRIPTSCRIPT},CD={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},on=function(e,n,r,i){i===void 0&&(i=[null,null]);for(var s=[],o=0;o<e.length;o++){var l=dt(e[o],n);if(l instanceof mh){var c=l.children;s.push(...c)}else s.push(l)}if(ae.tryCombineChars(s),!r)return s;var h=n;if(e.length===1){var u=e[0];u.type==="sizing"?h=n.havingSize(u.size):u.type==="styling"&&(h=n.havingStyle(jD[u.style]))}var d=ua([i[0]||"leftmost"],[],n),f=ua([i[1]||"rightmost"],[],n),p=r==="root";return $2(s,(m,g)=>{var b=g.classes[0],y=m.classes[0];b==="mbin"&&ze.contains(ED,y)?g.classes[0]="mord":y==="mbin"&&ze.contains($D,b)&&(m.classes[0]="mord")},{node:d},f,p),$2(s,(m,g)=>{var b=lg(g),y=lg(m),w=b&&y?m.hasClass("mtight")?SD[b][y]:kD[b][y]:null;if(w)return ae.makeGlue(w,h)},{node:d},f,p),s},$2=function t(e,n,r,i,s){i&&e.push(i);for(var o=0;o<e.length;o++){var l=e[o],c=H6(l);if(c){t(c.children,n,r,null,s);continue}var h=!l.hasClass("mspace");if(h){var u=n(l,r.node);u&&(r.insertAfter?r.insertAfter(u):(e.unshift(u),o++))}h?r.node=l:s&&l.hasClass("newline")&&(r.node=ua(["leftmost"])),r.insertAfter=(d=>f=>{e.splice(d+1,0,f),o++})(o)}i&&e.pop()},H6=function(e){return e instanceof mh||e instanceof tb||e instanceof gh&&e.hasClass("enclosing")?e:null},AD=function t(e,n){var r=H6(e);if(r){var i=r.children;if(i.length){if(n==="right")return t(i[i.length-1],"right");if(n==="left")return t(i[0],"left")}}return e},lg=function(e,n){return e?(n&&(e=AD(e,n)),CD[e.classes[0]]||null):null},qc=function(e,n){var r=["nulldelimiter"].concat(e.baseSizingClasses());return ua(n.concat(r))},dt=function(e,n,r){if(!e)return ua();if(td[e.type]){var i=td[e.type](e,n);if(r&&n.size!==r.size){i=ua(n.sizingClasses(r),[i],n);var s=n.sizeMultiplier/r.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new pe("Got group of unknown type: '"+e.type+"'")};function Gh(t,e){var n=ua(["base"],t,e),r=ua(["strut"]);return r.style.height=ve(n.height+n.depth),n.depth&&(r.style.verticalAlign=ve(-n.depth)),n.children.unshift(r),n}function cg(t,e){var n=null;t.length===1&&t[0].type==="tag"&&(n=t[0].tag,t=t[0].body);var r=on(t,e,"root"),i;r.length===2&&r[1].hasClass("tag")&&(i=r.pop());for(var s=[],o=[],l=0;l<r.length;l++)if(o.push(r[l]),r[l].hasClass("mbin")||r[l].hasClass("mrel")||r[l].hasClass("allowbreak")){for(var c=!1;l<r.length-1&&r[l+1].hasClass("mspace")&&!r[l+1].hasClass("newline");)l++,o.push(r[l]),r[l].hasClass("nobreak")&&(c=!0);c||(s.push(Gh(o,e)),o=[])}else r[l].hasClass("newline")&&(o.pop(),o.length>0&&(s.push(Gh(o,e)),o=[]),s.push(r[l]));o.length>0&&s.push(Gh(o,e));var h;n?(h=Gh(on(n,e,!0)),h.classes=["tag"],s.push(h)):i&&s.push(i);var u=ua(["katex-html"],s);if(u.setAttribute("aria-hidden","true"),h){var d=h.children[0];d.style.height=ve(u.height+u.depth),u.depth&&(d.style.verticalAlign=ve(-u.depth))}return u}function z6(t){return new mh(t)}class xr{constructor(e,n,r){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=n||[],this.classes=r||[]}setAttribute(e,n){this.attributes[e]=n}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&e.setAttribute(n,this.attributes[n]);this.classes.length>0&&(e.className=Ba(this.classes));for(var r=0;r<this.children.length;r++)if(this.children[r]instanceof Si&&this.children[r+1]instanceof Si){for(var i=this.children[r].toText()+this.children[++r].toText();this.children[r+1]instanceof Si;)i+=this.children[++r].toText();e.appendChild(new Si(i).toNode())}else e.appendChild(this.children[r].toNode());return e}toMarkup(){var e="<"+this.type;for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&(e+=" "+n+'="',e+=ze.escape(this.attributes[n]),e+='"');this.classes.length>0&&(e+=' class ="'+ze.escape(Ba(this.classes))+'"'),e+=">";for(var r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Si{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return ze.escape(this.toText())}toText(){return this.text}}class ID{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character=" ":e>=.1666&&e<=.1667?this.character=" ":e>=.2222&&e<=.2223?this.character=" ":e>=.2777&&e<=.2778?this.character="  ":e>=-.05556&&e<=-.05555?this.character=" ⁣":e>=-.1667&&e<=-.1666?this.character=" ⁣":e>=-.2223&&e<=-.2222?this.character=" ⁣":e>=-.2778&&e<=-.2777?this.character=" ⁣":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",ve(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+ve(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var fe={MathNode:xr,TextNode:Si,SpaceNode:ID,newDocumentFragment:z6},Nr=function(e,n,r){return Mt[n][e]&&Mt[n][e].replace&&e.charCodeAt(0)!==55349&&!(R6.hasOwnProperty(e)&&r&&(r.fontFamily&&r.fontFamily.slice(4,6)==="tt"||r.font&&r.font.slice(4,6)==="tt"))&&(e=Mt[n][e].replace),new fe.TextNode(e)},rb=function(e){return e.length===1?e[0]:new fe.MathNode("mrow",e)},ib=function(e,n){if(n.fontFamily==="texttt")return"monospace";if(n.fontFamily==="textsf")return n.fontShape==="textit"&&n.fontWeight==="textbf"?"sans-serif-bold-italic":n.fontShape==="textit"?"sans-serif-italic":n.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(n.fontShape==="textit"&&n.fontWeight==="textbf")return"bold-italic";if(n.fontShape==="textit")return"italic";if(n.fontWeight==="textbf")return"bold";var r=n.font;if(!r||r==="mathnormal")return null;var i=e.mode;if(r==="mathit")return"italic";if(r==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(r==="mathbf")return"bold";if(r==="mathbb")return"double-struck";if(r==="mathsfit")return"sans-serif-italic";if(r==="mathfrak")return"fraktur";if(r==="mathscr"||r==="mathcal")return"script";if(r==="mathsf")return"sans-serif";if(r==="mathtt")return"monospace";var s=e.text;if(ze.contains(["\\imath","\\jmath"],s))return null;Mt[i][s]&&Mt[i][s].replace&&(s=Mt[i][s].replace);var o=ae.fontMap[r].fontName;return eb(s,o,i)?ae.fontMap[r].variant:null};function N0(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Si&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var n=t.children[0];return n instanceof Si&&n.text===","}else return!1}var hr=function(e,n,r){if(e.length===1){var i=$t(e[0],n);return r&&i instanceof xr&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],o,l=0;l<e.length;l++){var c=$t(e[l],n);if(c instanceof xr&&o instanceof xr){if(c.type==="mtext"&&o.type==="mtext"&&c.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...c.children);continue}else if(c.type==="mn"&&o.type==="mn"){o.children.push(...c.children);continue}else if(N0(c)&&o.type==="mn"){o.children.push(...c.children);continue}else if(c.type==="mn"&&N0(o))c.children=[...o.children,...c.children],s.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(o.type==="mn"||N0(o))){var h=c.children[0];h instanceof xr&&h.type==="mn"&&(h.children=[...o.children,...h.children],s.pop())}else if(o.type==="mi"&&o.children.length===1){var u=o.children[0];if(u instanceof Si&&u.text==="̸"&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var d=c.children[0];d instanceof Si&&d.text.length>0&&(d.text=d.text.slice(0,1)+"̸"+d.text.slice(1),s.pop())}}}s.push(c),o=c}return s},Fa=function(e,n,r){return rb(hr(e,n,r))},$t=function(e,n){if(!e)return new fe.MathNode("mrow");if(nd[e.type]){var r=nd[e.type](e,n);return r}else throw new pe("Got group of unknown type: '"+e.type+"'")};function E2(t,e,n,r,i){var s=hr(t,n),o;s.length===1&&s[0]instanceof xr&&ze.contains(["mrow","mtable"],s[0].type)?o=s[0]:o=new fe.MathNode("mrow",s);var l=new fe.MathNode("annotation",[new fe.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var c=new fe.MathNode("semantics",[o,l]),h=new fe.MathNode("math",[c]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&h.setAttribute("display","block");var u=i?"katex":"katex-mathml";return ae.makeSpan([u],[h])}var q6=function(e){return new ea({style:e.displayMode?Ue.DISPLAY:Ue.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},W6=function(e,n){if(n.displayMode){var r=["katex-display"];n.leqno&&r.push("leqno"),n.fleqn&&r.push("fleqn"),e=ae.makeSpan(r,[e])}return e},MD=function(e,n,r){var i=q6(r),s;if(r.output==="mathml")return E2(e,n,i,r.displayMode,!0);if(r.output==="html"){var o=cg(e,i);s=ae.makeSpan(["katex"],[o])}else{var l=E2(e,n,i,r.displayMode,!1),c=cg(e,i);s=ae.makeSpan(["katex"],[l,c])}return W6(s,r)},LD=function(e,n,r){var i=q6(r),s=cg(e,i),o=ae.makeSpan(["katex"],[s]);return W6(o,r)},OD={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},RD=function(e){var n=new fe.MathNode("mo",[new fe.TextNode(OD[e.replace(/^\\/,"")])]);return n.setAttribute("stretchy","true"),n},ND={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},DD=function(e){return e.type==="ordgroup"?e.body.length:1},BD=function(e,n){function r(){var l=4e5,c=e.label.slice(1);if(ze.contains(["widehat","widecheck","widetilde","utilde"],c)){var h=e,u=DD(h.base),d,f,p;if(u>5)c==="widehat"||c==="widecheck"?(d=420,l=2364,p=.42,f=c+"4"):(d=312,l=2340,p=.34,f="tilde4");else{var m=[1,1,2,2,3,3][u];c==="widehat"||c==="widecheck"?(l=[0,1062,2364,2364,2364][m],d=[0,239,300,360,420][m],p=[0,.24,.3,.3,.36,.42][m],f=c+m):(l=[0,600,1033,2339,2340][m],d=[0,260,286,306,312][m],p=[0,.26,.286,.3,.306,.34][m],f="tilde"+m)}var g=new Pa(f),b=new ha([g],{width:"100%",height:ve(p),viewBox:"0 0 "+l+" "+d,preserveAspectRatio:"none"});return{span:ae.makeSvgSpan([],[b],n),minWidth:0,height:p}}else{var y=[],w=ND[c],[S,E,T]=w,C=T/1e3,M=S.length,R,D;if(M===1){var $=w[3];R=["hide-tail"],D=[$]}else if(M===2)R=["halfarrow-left","halfarrow-right"],D=["xMinYMin","xMaxYMin"];else if(M===3)R=["brace-left","brace-center","brace-right"],D=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var L=0;L<M;L++){var q=new Pa(S[L]),P=new ha([q],{width:"400em",height:ve(C),viewBox:"0 0 "+l+" "+T,preserveAspectRatio:D[L]+" slice"}),A=ae.makeSvgSpan([R[L]],[P],n);if(M===1)return{span:A,minWidth:E,height:C};A.style.height=ve(C),y.push(A)}return{span:ae.makeSpan(["stretchy"],y,n),minWidth:E,height:C}}}var{span:i,minWidth:s,height:o}=r();return i.height=o,i.style.height=ve(o),s>0&&(i.style.minWidth=ve(s)),i},PD=function(e,n,r,i,s){var o,l=e.height+e.depth+r+i;if(/fbox|color|angl/.test(n)){if(o=ae.makeSpan(["stretchy",n],[],s),n==="fbox"){var c=s.color&&s.getColor();c&&(o.style.borderColor=c)}}else{var h=[];/^[bx]cancel$/.test(n)&&h.push(new sg({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(n)&&h.push(new sg({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new ha(h,{width:"100%",height:ve(l)});o=ae.makeSvgSpan([],[u],s)}return o.height=l,o.style.height=ve(l),o},da={encloseSpan:PD,mathMLnode:RD,svgSpan:BD};function et(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function ab(t){var e=uf(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function uf(t){return t&&(t.type==="atom"||hD.hasOwnProperty(t.type))?t:null}var sb=(t,e)=>{var n,r,i;t&&t.type==="supsub"?(r=et(t.base,"accent"),n=r.base,t.base=n,i=lD(dt(t,e)),t.base=r):(r=et(t,"accent"),n=r.base);var s=dt(n,e.havingCrampedStyle()),o=r.isShifty&&ze.isCharacterBox(n),l=0;if(o){var c=ze.getBaseElem(n),h=dt(c,e.havingCrampedStyle());l=w2(h).skew}var u=r.label==="\\c",d=u?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),f;if(r.isStretchy)f=da.svgSpan(r,e),f=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:f,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+ve(2*l)+")",marginLeft:ve(2*l)}:void 0}]},e);else{var p,m;r.label==="\\vec"?(p=ae.staticSvg("vec",e),m=ae.svgData.vec[1]):(p=ae.makeOrd({mode:r.mode,text:r.label},e,"textord"),p=w2(p),p.italic=0,m=p.width,u&&(d+=p.depth)),f=ae.makeSpan(["accent-body"],[p]);var g=r.label==="\\textcircled";g&&(f.classes.push("accent-full"),d=s.height);var b=l;g||(b-=m/2),f.style.left=ve(b),r.label==="\\textcircled"&&(f.style.top=".2em"),f=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-d},{type:"elem",elem:f}]},e)}var y=ae.makeSpan(["mord","accent"],[f],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},U6=(t,e)=>{var n=t.isStretchy?da.mathMLnode(t.label):new fe.MathNode("mo",[Nr(t.label,t.mode)]),r=new fe.MathNode("mover",[$t(t.base,e),n]);return r.setAttribute("accent","true"),r},FD=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));Se({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var n=rd(e[0]),r=!FD.test(t.funcName),i=!r||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:sb,mathmlBuilder:U6});Se({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var n=e[0],r=t.parser.mode;return r==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:t.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:sb,mathmlBuilder:U6});Se({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(t,e)=>{var n=dt(t.base,e),r=da.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,s=ae.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},e);return ae.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(t,e)=>{var n=da.mathMLnode(t.label),r=new fe.MathNode("munder",[$t(t.base,e),n]);return r.setAttribute("accentunder","true"),r}});var Xh=t=>{var e=new fe.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};Se({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r,funcName:i}=t;return{type:"xArrow",mode:r.mode,label:i,body:e[0],below:n[0]}},htmlBuilder(t,e){var n=e.style,r=e.havingStyle(n.sup()),i=ae.wrapFragment(dt(t.body,r,e),e),s=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var o;t.below&&(r=e.havingStyle(n.sub()),o=ae.wrapFragment(dt(t.below,r,e),e),o.classes.push(s+"-arrow-pad"));var l=da.svgSpan(t,e),c=-e.fontMetrics().axisHeight+.5*l.height,h=-e.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(h-=i.depth);var u;if(o){var d=-e.fontMetrics().axisHeight+o.height+.5*l.height+.111;u=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:c},{type:"elem",elem:o,shift:d}]},e)}else u=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:c}]},e);return u.children[0].children[0].children[1].classes.push("svg-align"),ae.makeSpan(["mrel","x-arrow"],[u],e)},mathmlBuilder(t,e){var n=da.mathMLnode(t.label);n.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var r;if(t.body){var i=Xh($t(t.body,e));if(t.below){var s=Xh($t(t.below,e));r=new fe.MathNode("munderover",[n,s,i])}else r=new fe.MathNode("mover",[n,i])}else if(t.below){var o=Xh($t(t.below,e));r=new fe.MathNode("munder",[n,o])}else r=Xh(),r=new fe.MathNode("mover",[n,r]);return r}});var HD=ae.makeSpan;function V6(t,e){var n=on(t.body,e,!0);return HD([t.mclass],n,e)}function Y6(t,e){var n,r=hr(t.body,e);return t.mclass==="minner"?n=new fe.MathNode("mpadded",r):t.mclass==="mord"?t.isCharacterBox?(n=r[0],n.type="mi"):n=new fe.MathNode("mi",r):(t.isCharacterBox?(n=r[0],n.type="mo"):n=new fe.MathNode("mo",r),t.mclass==="mbin"?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):t.mclass==="mpunct"?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(n.attributes.lspace="0em",n.attributes.rspace="0em"):t.mclass==="minner"&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}Se({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:Gt(i),isCharacterBox:ze.isCharacterBox(i)}},htmlBuilder:V6,mathmlBuilder:Y6});var df=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};Se({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:n}=t;return{type:"mclass",mode:n.mode,mclass:df(e[0]),body:Gt(e[1]),isCharacterBox:ze.isCharacterBox(e[1])}}});Se({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:n,funcName:r}=t,i=e[1],s=e[0],o;r!=="\\stackrel"?o=df(i):o="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:r!=="\\stackrel",body:Gt(i)},c={type:"supsub",mode:s.mode,base:l,sup:r==="\\underset"?null:s,sub:r==="\\underset"?s:null};return{type:"mclass",mode:n.mode,mclass:o,body:[c],isCharacterBox:ze.isCharacterBox(c)}},htmlBuilder:V6,mathmlBuilder:Y6});Se({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"pmb",mode:n.mode,mclass:df(e[0]),body:Gt(e[0])}},htmlBuilder(t,e){var n=on(t.body,e,!0),r=ae.makeSpan([t.mclass],n,e);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(t,e){var n=hr(t.body,e),r=new fe.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var zD={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},j2=()=>({type:"styling",body:[],mode:"math",style:"display"}),C2=t=>t.type==="textord"&&t.text==="@",qD=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function WD(t,e,n){var r=zD[t];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=n.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:r,mode:"math",family:"rel"},o=n.callFunction("\\Big",[s],[]),l=n.callFunction("\\\\cdright",[e[1]],[]),c={type:"ordgroup",mode:"math",body:[i,o,l]};return n.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return n.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function UD(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var n=t.fetch().text;if(n==="&"||n==="\\\\")t.consume();else if(n==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new pe("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var r=[],i=[r],s=0;s<e.length;s++){for(var o=e[s],l=j2(),c=0;c<o.length;c++)if(!C2(o[c]))l.body.push(o[c]);else{r.push(l),c+=1;var h=ab(o[c]).text,u=new Array(2);if(u[0]={type:"ordgroup",mode:"math",body:[]},u[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var d=0;d<2;d++){for(var f=!0,p=c+1;p<o.length;p++){if(qD(o[p],h)){f=!1,c=p;break}if(C2(o[p]))throw new pe("Missing a "+h+" character to complete a CD arrow.",o[p]);u[d].body.push(o[p])}if(f)throw new pe("Missing a "+h+" character to complete a CD arrow.",o[c])}else throw new pe('Expected one of "<>AV=|." after @',o[c]);var m=WD(h,u,t),g={type:"styling",body:[m],mode:"math",style:"display"};r.push(g),l=j2()}s%2===0?r.push(l):r.shift(),r=[],i.push(r)}t.gullet.endGroup(),t.gullet.endGroup();var b=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:b,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}Se({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:e[0]}},htmlBuilder(t,e){var n=e.havingStyle(e.style.sup()),r=ae.wrapFragment(dt(t.label,n,e),e);return r.classes.push("cd-label-"+t.side),r.style.bottom=ve(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(t,e){var n=new fe.MathNode("mrow",[$t(t.label,e)]);return n=new fe.MathNode("mpadded",[n]),n.setAttribute("width","0"),t.side==="left"&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),n=new fe.MathNode("mstyle",[n]),n.setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}});Se({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:n}=t;return{type:"cdlabelparent",mode:n.mode,fragment:e[0]}},htmlBuilder(t,e){var n=ae.wrapFragment(dt(t.fragment,e),e);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder(t,e){return new fe.MathNode("mrow",[$t(t.fragment,e)])}});Se({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:n}=t,r=et(e[0],"ordgroup"),i=r.body,s="",o=0;o<i.length;o++){var l=et(i[o],"textord");s+=l.text}var c=parseInt(s),h;if(isNaN(c))throw new pe("\\@char has non-numeric argument "+s);if(c<0||c>=1114111)throw new pe("\\@char with invalid code point "+s);return c<=65535?h=String.fromCharCode(c):(c-=65536,h=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:n.mode,text:h}}});var G6=(t,e)=>{var n=on(t.body,e.withColor(t.color),!1);return ae.makeFragment(n)},X6=(t,e)=>{var n=hr(t.body,e.withColor(t.color)),r=new fe.MathNode("mstyle",n);return r.setAttribute("mathcolor",t.color),r};Se({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:n}=t,r=et(e[0],"color-token").color,i=e[1];return{type:"color",mode:n.mode,color:r,body:Gt(i)}},htmlBuilder:G6,mathmlBuilder:X6});Se({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:n,breakOnTokenText:r}=t,i=et(e[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:G6,mathmlBuilder:X6});Se({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,n){var{parser:r}=t,i=r.gullet.future().text==="["?r.parseSizeGroup(!0):null,s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&et(i,"size").value}},htmlBuilder(t,e){var n=ae.makeSpan(["mspace"],[],e);return t.newLine&&(n.classes.push("newline"),t.size&&(n.style.marginTop=ve(Ht(t.size,e)))),n},mathmlBuilder(t,e){var n=new fe.MathNode("mspace");return t.newLine&&(n.setAttribute("linebreak","newline"),t.size&&n.setAttribute("height",ve(Ht(t.size,e)))),n}});var hg={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},J6=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new pe("Expected a control sequence",t);return e},VD=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},Q6=(t,e,n,r)=>{var i=t.gullet.macros.get(n.text);i==null&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!t.gullet.isExpandable(n.text)}),t.gullet.macros.set(e,i,r)};Se({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:n}=t;e.consumeSpaces();var r=e.fetch();if(hg[r.text])return(n==="\\global"||n==="\\\\globallong")&&(r.text=hg[r.text]),et(e.parseFunction(),"internal");throw new pe("Invalid token after macro prefix",r)}});Se({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=e.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new pe("Expected a control sequence",r);for(var s=0,o,l=[[]];e.gullet.future().text!=="{";)if(r=e.gullet.popToken(),r.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),l[s].push("{");break}if(r=e.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new pe('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new pe('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if(r.text==="EOF")throw new pe("Expected a macro definition");l[s].push(r.text)}var{tokens:c}=e.gullet.consumeArg();return o&&c.unshift(o),(n==="\\edef"||n==="\\xdef")&&(c=e.gullet.expandTokens(c),c.reverse()),e.gullet.macros.set(i,{tokens:c,numArgs:s,delimiters:l},n===hg[n]),{type:"internal",mode:e.mode}}});Se({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=J6(e.gullet.popToken());e.gullet.consumeSpaces();var i=VD(e);return Q6(e,r,i,n==="\\\\globallet"),{type:"internal",mode:e.mode}}});Se({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:n}=t,r=J6(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return Q6(e,r,s,n==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var rc=function(e,n,r){var i=Mt.math[e]&&Mt.math[e].replace,s=eb(i||e,n,r);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+n+".");return s},ob=function(e,n,r,i){var s=r.havingBaseStyle(n),o=ae.makeSpan(i.concat(s.sizingClasses(r)),[e],r),l=s.sizeMultiplier/r.sizeMultiplier;return o.height*=l,o.depth*=l,o.maxFontSize=s.sizeMultiplier,o},K6=function(e,n,r){var i=n.havingBaseStyle(r),s=(1-n.sizeMultiplier/i.sizeMultiplier)*n.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=ve(s),e.height-=s,e.depth+=s},YD=function(e,n,r,i,s,o){var l=ae.makeSymbol(e,"Main-Regular",s,i),c=ob(l,n,i,o);return r&&K6(c,i,n),c},GD=function(e,n,r,i){return ae.makeSymbol(e,"Size"+n+"-Regular",r,i)},Z6=function(e,n,r,i,s,o){var l=GD(e,n,s,i),c=ob(ae.makeSpan(["delimsizing","size"+n],[l],i),Ue.TEXT,i,o);return r&&K6(c,i,Ue.TEXT),c},D0=function(e,n,r){var i;n==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=ae.makeSpan(["delimsizinginner",i],[ae.makeSpan([],[ae.makeSymbol(e,n,r)])]);return{type:"elem",elem:s}},B0=function(e,n,r){var i=ki["Size4-Regular"][e.charCodeAt(0)]?ki["Size4-Regular"][e.charCodeAt(0)][4]:ki["Size1-Regular"][e.charCodeAt(0)][4],s=new Pa("inner",eD(e,Math.round(1e3*n))),o=new ha([s],{width:ve(i),height:ve(n),style:"width:"+ve(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*n),preserveAspectRatio:"xMinYMin"}),l=ae.makeSvgSpan([],[o],r);return l.height=n,l.style.height=ve(n),l.style.width=ve(i),{type:"elem",elem:l}},ug=.008,Jh={type:"kern",size:-1*ug},XD=["|","\\lvert","\\rvert","\\vert"],JD=["\\|","\\lVert","\\rVert","\\Vert"],eS=function(e,n,r,i,s,o){var l,c,h,u,d="",f=0;l=h=u=e,c=null;var p="Size1-Regular";e==="\\uparrow"?h=u="⏐":e==="\\Uparrow"?h=u="‖":e==="\\downarrow"?l=h="⏐":e==="\\Downarrow"?l=h="‖":e==="\\updownarrow"?(l="\\uparrow",h="⏐",u="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",h="‖",u="\\Downarrow"):ze.contains(XD,e)?(h="∣",d="vert",f=333):ze.contains(JD,e)?(h="∥",d="doublevert",f=556):e==="["||e==="\\lbrack"?(l="⎡",h="⎢",u="⎣",p="Size4-Regular",d="lbrack",f=667):e==="]"||e==="\\rbrack"?(l="⎤",h="⎥",u="⎦",p="Size4-Regular",d="rbrack",f=667):e==="\\lfloor"||e==="⌊"?(h=l="⎢",u="⎣",p="Size4-Regular",d="lfloor",f=667):e==="\\lceil"||e==="⌈"?(l="⎡",h=u="⎢",p="Size4-Regular",d="lceil",f=667):e==="\\rfloor"||e==="⌋"?(h=l="⎥",u="⎦",p="Size4-Regular",d="rfloor",f=667):e==="\\rceil"||e==="⌉"?(l="⎤",h=u="⎥",p="Size4-Regular",d="rceil",f=667):e==="("||e==="\\lparen"?(l="⎛",h="⎜",u="⎝",p="Size4-Regular",d="lparen",f=875):e===")"||e==="\\rparen"?(l="⎞",h="⎟",u="⎠",p="Size4-Regular",d="rparen",f=875):e==="\\{"||e==="\\lbrace"?(l="⎧",c="⎨",u="⎩",h="⎪",p="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="⎫",c="⎬",u="⎭",h="⎪",p="Size4-Regular"):e==="\\lgroup"||e==="⟮"?(l="⎧",u="⎩",h="⎪",p="Size4-Regular"):e==="\\rgroup"||e==="⟯"?(l="⎫",u="⎭",h="⎪",p="Size4-Regular"):e==="\\lmoustache"||e==="⎰"?(l="⎧",u="⎭",h="⎪",p="Size4-Regular"):(e==="\\rmoustache"||e==="⎱")&&(l="⎫",u="⎩",h="⎪",p="Size4-Regular");var m=rc(l,p,s),g=m.height+m.depth,b=rc(h,p,s),y=b.height+b.depth,w=rc(u,p,s),S=w.height+w.depth,E=0,T=1;if(c!==null){var C=rc(c,p,s);E=C.height+C.depth,T=2}var M=g+S+E,R=Math.max(0,Math.ceil((n-M)/(T*y))),D=M+R*T*y,$=i.fontMetrics().axisHeight;r&&($*=i.sizeMultiplier);var L=D/2-$,q=[];if(d.length>0){var P=D-g-S,A=Math.round(D*1e3),O=tD(d,Math.round(P*1e3)),F=new Pa(d,O),Y=(f/1e3).toFixed(3)+"em",Q=(A/1e3).toFixed(3)+"em",z=new ha([F],{width:Y,height:Q,viewBox:"0 0 "+f+" "+A}),j=ae.makeSvgSpan([],[z],i);j.height=A/1e3,j.style.width=Y,j.style.height=Q,q.push({type:"elem",elem:j})}else{if(q.push(D0(u,p,s)),q.push(Jh),c===null){var Z=D-g-S+2*ug;q.push(B0(h,Z,i))}else{var te=(D-g-S-E)/2+2*ug;q.push(B0(h,te,i)),q.push(Jh),q.push(D0(c,p,s)),q.push(Jh),q.push(B0(h,te,i))}q.push(Jh),q.push(D0(l,p,s))}var N=i.havingBaseStyle(Ue.TEXT),U=ae.makeVList({positionType:"bottom",positionData:L,children:q},N);return ob(ae.makeSpan(["delimsizing","mult"],[U],N),Ue.TEXT,i,o)},P0=80,F0=.08,H0=function(e,n,r,i,s){var o=ZN(e,i,r),l=new Pa(e,o),c=new ha([l],{width:"400em",height:ve(n),viewBox:"0 0 400000 "+r,preserveAspectRatio:"xMinYMin slice"});return ae.makeSvgSpan(["hide-tail"],[c],s)},QD=function(e,n){var r=n.havingBaseSizing(),i=iS("\\surd",e*r.sizeMultiplier,rS,r),s=r.sizeMultiplier,o=Math.max(0,n.minRuleThickness-n.fontMetrics().sqrtRuleThickness),l,c=0,h=0,u=0,d;return i.type==="small"?(u=1e3+1e3*o+P0,e<1?s=1:e<1.4&&(s=.7),c=(1+o+F0)/s,h=(1+o)/s,l=H0("sqrtMain",c,u,o,n),l.style.minWidth="0.853em",d=.833/s):i.type==="large"?(u=(1e3+P0)*Tc[i.size],h=(Tc[i.size]+o)/s,c=(Tc[i.size]+o+F0)/s,l=H0("sqrtSize"+i.size,c,u,o,n),l.style.minWidth="1.02em",d=1/s):(c=e+o+F0,h=e+o,u=Math.floor(1e3*e+o)+P0,l=H0("sqrtTall",c,u,o,n),l.style.minWidth="0.742em",d=1.056),l.height=h,l.style.height=ve(c),{span:l,advanceWidth:d,ruleWidth:(n.fontMetrics().sqrtRuleThickness+o)*s}},tS=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],KD=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],nS=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Tc=[0,1.2,1.8,2.4,3],ZD=function(e,n,r,i,s){if(e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle"),ze.contains(tS,e)||ze.contains(nS,e))return Z6(e,n,!1,r,i,s);if(ze.contains(KD,e))return eS(e,Tc[n],!1,r,i,s);throw new pe("Illegal delimiter: '"+e+"'")},eB=[{type:"small",style:Ue.SCRIPTSCRIPT},{type:"small",style:Ue.SCRIPT},{type:"small",style:Ue.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],tB=[{type:"small",style:Ue.SCRIPTSCRIPT},{type:"small",style:Ue.SCRIPT},{type:"small",style:Ue.TEXT},{type:"stack"}],rS=[{type:"small",style:Ue.SCRIPTSCRIPT},{type:"small",style:Ue.SCRIPT},{type:"small",style:Ue.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],nB=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},iS=function(e,n,r,i){for(var s=Math.min(2,3-i.style.size),o=s;o<r.length&&r[o].type!=="stack";o++){var l=rc(e,nB(r[o]),"math"),c=l.height+l.depth;if(r[o].type==="small"){var h=i.havingBaseStyle(r[o].style);c*=h.sizeMultiplier}if(c>n)return r[o]}return r[r.length-1]},aS=function(e,n,r,i,s,o){e==="<"||e==="\\lt"||e==="⟨"?e="\\langle":(e===">"||e==="\\gt"||e==="⟩")&&(e="\\rangle");var l;ze.contains(nS,e)?l=eB:ze.contains(tS,e)?l=rS:l=tB;var c=iS(e,n,l,i);return c.type==="small"?YD(e,c.style,r,i,s,o):c.type==="large"?Z6(e,c.size,r,i,s,o):eS(e,n,r,i,s,o)},rB=function(e,n,r,i,s,o){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,c=901,h=5/i.fontMetrics().ptPerEm,u=Math.max(n-l,r+l),d=Math.max(u/500*c,2*u-h);return aS(e,d,!0,i,s,o)},oa={sqrtImage:QD,sizedDelim:ZD,sizeToMaxHeight:Tc,customSizedDelim:aS,leftRightDelim:rB},A2={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},iB=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function ff(t,e){var n=uf(t);if(n&&ze.contains(iB,n.text))return n;throw n?new pe("Invalid delimiter '"+n.text+"' after '"+e.funcName+"'",t):new pe("Invalid delimiter type '"+t.type+"'",t)}Se({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var n=ff(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:A2[t.funcName].size,mclass:A2[t.funcName].mclass,delim:n.text}},htmlBuilder:(t,e)=>t.delim==="."?ae.makeSpan([t.mclass]):oa.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Nr(t.delim,t.mode));var n=new fe.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=ve(oa.sizeToMaxHeight[t.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}});function I2(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Se({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=t.parser.gullet.macros.get("\\current@color");if(n&&typeof n!="string")throw new pe("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:ff(e[0],t).text,color:n}}});Se({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=ff(e[0],t),r=t.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=et(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:(t,e)=>{I2(t);for(var n=on(t.body,e,!0,["mopen","mclose"]),r=0,i=0,s=!1,o=0;o<n.length;o++)n[o].isMiddle?s=!0:(r=Math.max(n[o].height,r),i=Math.max(n[o].depth,i));r*=e.sizeMultiplier,i*=e.sizeMultiplier;var l;if(t.left==="."?l=qc(e,["mopen"]):l=oa.leftRightDelim(t.left,r,i,e,t.mode,["mopen"]),n.unshift(l),s)for(var c=1;c<n.length;c++){var h=n[c],u=h.isMiddle;u&&(n[c]=oa.leftRightDelim(u.delim,r,i,u.options,t.mode,[]))}var d;if(t.right===".")d=qc(e,["mclose"]);else{var f=t.rightColor?e.withColor(t.rightColor):e;d=oa.leftRightDelim(t.right,r,i,f,t.mode,["mclose"])}return n.push(d),ae.makeSpan(["minner"],n,e)},mathmlBuilder:(t,e)=>{I2(t);var n=hr(t.body,e);if(t.left!=="."){var r=new fe.MathNode("mo",[Nr(t.left,t.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if(t.right!=="."){var i=new fe.MathNode("mo",[Nr(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),n.push(i)}return rb(n)}});Se({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var n=ff(e[0],t);if(!t.parser.leftrightDepth)throw new pe("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},htmlBuilder:(t,e)=>{var n;if(t.delim===".")n=qc(e,[]);else{n=oa.sizedDelim(t.delim,1,e,t.mode,[]);var r={delim:t.delim,options:e};n.isMiddle=r}return n},mathmlBuilder:(t,e)=>{var n=t.delim==="\\vert"||t.delim==="|"?Nr("|","text"):Nr(t.delim,t.mode),r=new fe.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var lb=(t,e)=>{var n=ae.wrapFragment(dt(t.body,e),e),r=t.label.slice(1),i=e.sizeMultiplier,s,o=0,l=ze.isCharacterBox(t.body);if(r==="sout")s=ae.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,o=-.5*e.fontMetrics().xHeight;else if(r==="phase"){var c=Ht({number:.6,unit:"pt"},e),h=Ht({number:.35,unit:"ex"},e),u=e.havingBaseSizing();i=i/u.sizeMultiplier;var d=n.height+n.depth+c+h;n.style.paddingLeft=ve(d/2+c);var f=Math.floor(1e3*d*i),p=QN(f),m=new ha([new Pa("phase",p)],{width:"400em",height:ve(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});s=ae.makeSvgSpan(["hide-tail"],[m],e),s.style.height=ve(d),o=n.depth+c+h}else{/cancel/.test(r)?l||n.classes.push("cancel-pad"):r==="angl"?n.classes.push("anglpad"):n.classes.push("boxpad");var g=0,b=0,y=0;/box/.test(r)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),g=e.fontMetrics().fboxsep+(r==="colorbox"?0:y),b=g):r==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),g=4*y,b=Math.max(0,.25-n.depth)):(g=l?.2:0,b=g),s=da.encloseSpan(n,r,g,b,e),/fbox|boxed|fcolorbox/.test(r)?(s.style.borderStyle="solid",s.style.borderWidth=ve(y)):r==="angl"&&y!==.049&&(s.style.borderTopWidth=ve(y),s.style.borderRightWidth=ve(y)),o=n.depth+b,t.backgroundColor&&(s.style.backgroundColor=t.backgroundColor,t.borderColor&&(s.style.borderColor=t.borderColor))}var w;if(t.backgroundColor)w=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:o},{type:"elem",elem:n,shift:0}]},e);else{var S=/cancel|phase/.test(r)?["svg-align"]:[];w=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:0},{type:"elem",elem:s,shift:o,wrapperClasses:S}]},e)}return/cancel/.test(r)&&(w.height=n.height,w.depth=n.depth),/cancel/.test(r)&&!l?ae.makeSpan(["mord","cancel-lap"],[w],e):ae.makeSpan(["mord"],[w],e)},cb=(t,e)=>{var n=0,r=new fe.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[$t(t.body,e)]);switch(t.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&r.setAttribute("mathbackground",t.backgroundColor),r};Se({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=et(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:o}},htmlBuilder:lb,mathmlBuilder:cb});Se({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,n){var{parser:r,funcName:i}=t,s=et(e[0],"color-token").color,o=et(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:s,body:l}},htmlBuilder:lb,mathmlBuilder:cb});Se({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\fbox",body:e[0]}}});Se({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:lb,mathmlBuilder:cb});Se({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"enclose",mode:n.mode,label:"\\angl",body:e[0]}}});var sS={};function Ii(t){for(var{type:e,names:n,props:r,handler:i,htmlBuilder:s,mathmlBuilder:o}=t,l={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},c=0;c<n.length;++c)sS[n[c]]=l;s&&(td[e]=s),o&&(nd[e]=o)}var oS={};function B(t,e){oS[t]=e}function M2(t){var e=[];t.consumeSpaces();var n=t.fetch().text;for(n==="\\relax"&&(t.consume(),t.consumeSpaces(),n=t.fetch().text);n==="\\hline"||n==="\\hdashline";)t.consume(),e.push(n==="\\hdashline"),t.consumeSpaces(),n=t.fetch().text;return e}var pf=t=>{var e=t.parser.settings;if(!e.displayMode)throw new pe("{"+t.envName+"} can be used only in display mode.")};function hb(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Ya(t,e,n){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:o,colSeparationType:l,autoTag:c,singleRow:h,emptySingleRow:u,maxNumCols:d,leqno:f}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var p=t.gullet.expandMacroAsText("\\arraystretch");if(p==null)o=1;else if(o=parseFloat(p),!o||o<0)throw new pe("Invalid \\arraystretch: "+p)}t.gullet.beginGroup();var m=[],g=[m],b=[],y=[],w=c!=null?[]:void 0;function S(){c&&t.gullet.macros.set("\\@eqnsw","1",!0)}function E(){w&&(t.gullet.macros.get("\\df@tag")?(w.push(t.subparse([new _r("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!c&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(S(),y.push(M2(t));;){var T=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),T={type:"ordgroup",mode:t.mode,body:T},n&&(T={type:"styling",mode:t.mode,style:n,body:[T]}),m.push(T);var C=t.fetch().text;if(C==="&"){if(d&&m.length===d){if(h||l)throw new pe("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(C==="\\end"){E(),m.length===1&&T.type==="styling"&&T.body[0].body.length===0&&(g.length>1||!u)&&g.pop(),y.length<g.length+1&&y.push([]);break}else if(C==="\\\\"){t.consume();var M=void 0;t.gullet.future().text!==" "&&(M=t.parseSizeGroup(!0)),b.push(M?M.value:null),E(),y.push(M2(t)),m=[],g.push(m),S()}else throw new pe("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:o,body:g,cols:s,rowGaps:b,hskipBeforeAndAfter:r,hLinesBeforeRow:y,colSeparationType:l,tags:w,leqno:f}}function ub(t){return t.slice(0,1)==="d"?"display":"text"}var Mi=function(e,n){var r,i,s=e.body.length,o=e.hLinesBeforeRow,l=0,c=new Array(s),h=[],u=Math.max(n.fontMetrics().arrayRuleWidth,n.minRuleThickness),d=1/n.fontMetrics().ptPerEm,f=5*d;if(e.colSeparationType&&e.colSeparationType==="small"){var p=n.havingStyle(Ue.SCRIPT).sizeMultiplier;f=.2778*(p/n.sizeMultiplier)}var m=e.colSeparationType==="CD"?Ht({number:3,unit:"ex"},n):12*d,g=3*d,b=e.arraystretch*m,y=.7*b,w=.3*b,S=0;function E(Lt){for(var Xt=0;Xt<Lt.length;++Xt)Xt>0&&(S+=.25),h.push({pos:S,isDashed:Lt[Xt]})}for(E(o[0]),r=0;r<e.body.length;++r){var T=e.body[r],C=y,M=w;l<T.length&&(l=T.length);var R=new Array(T.length);for(i=0;i<T.length;++i){var D=dt(T[i],n);M<D.depth&&(M=D.depth),C<D.height&&(C=D.height),R[i]=D}var $=e.rowGaps[r],L=0;$&&(L=Ht($,n),L>0&&(L+=w,M<L&&(M=L),L=0)),e.addJot&&(M+=g),R.height=C,R.depth=M,S+=C,R.pos=S,S+=M+L,c[r]=R,E(o[r+1])}var q=S/2+n.fontMetrics().axisHeight,P=e.cols||[],A=[],O,F,Y=[];if(e.tags&&e.tags.some(Lt=>Lt))for(r=0;r<s;++r){var Q=c[r],z=Q.pos-q,j=e.tags[r],Z=void 0;j===!0?Z=ae.makeSpan(["eqn-num"],[],n):j===!1?Z=ae.makeSpan([],[],n):Z=ae.makeSpan([],on(j,n,!0),n),Z.depth=Q.depth,Z.height=Q.height,Y.push({type:"elem",elem:Z,shift:z})}for(i=0,F=0;i<l||F<P.length;++i,++F){for(var te=P[F]||{},N=!0;te.type==="separator";){if(N||(O=ae.makeSpan(["arraycolsep"],[]),O.style.width=ve(n.fontMetrics().doubleRuleSep),A.push(O)),te.separator==="|"||te.separator===":"){var U=te.separator==="|"?"solid":"dashed",J=ae.makeSpan(["vertical-separator"],[],n);J.style.height=ve(S),J.style.borderRightWidth=ve(u),J.style.borderRightStyle=U,J.style.margin="0 "+ve(-u/2);var se=S-q;se&&(J.style.verticalAlign=ve(-se)),A.push(J)}else throw new pe("Invalid separator type: "+te.separator);F++,te=P[F]||{},N=!1}if(!(i>=l)){var be=void 0;(i>0||e.hskipBeforeAndAfter)&&(be=ze.deflt(te.pregap,f),be!==0&&(O=ae.makeSpan(["arraycolsep"],[]),O.style.width=ve(be),A.push(O)));var xe=[];for(r=0;r<s;++r){var we=c[r],Re=we[i];if(Re){var He=we.pos-q;Re.depth=we.depth,Re.height=we.height,xe.push({type:"elem",elem:Re,shift:He})}}xe=ae.makeVList({positionType:"individualShift",children:xe},n),xe=ae.makeSpan(["col-align-"+(te.align||"c")],[xe]),A.push(xe),(i<l-1||e.hskipBeforeAndAfter)&&(be=ze.deflt(te.postgap,f),be!==0&&(O=ae.makeSpan(["arraycolsep"],[]),O.style.width=ve(be),A.push(O)))}}if(c=ae.makeSpan(["mtable"],A),h.length>0){for(var ft=ae.makeLineSpan("hline",n,u),pt=ae.makeLineSpan("hdashline",n,u),Ut=[{type:"elem",elem:c,shift:0}];h.length>0;){var xt=h.pop(),mt=xt.pos-q;xt.isDashed?Ut.push({type:"elem",elem:pt,shift:mt}):Ut.push({type:"elem",elem:ft,shift:mt})}c=ae.makeVList({positionType:"individualShift",children:Ut},n)}if(Y.length===0)return ae.makeSpan(["mord"],[c],n);var Et=ae.makeVList({positionType:"individualShift",children:Y},n);return Et=ae.makeSpan(["tag"],[Et],n),ae.makeFragment([c,Et])},aB={c:"center ",l:"left ",r:"right "},Li=function(e,n){for(var r=[],i=new fe.MathNode("mtd",[],["mtr-glue"]),s=new fe.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var l=e.body[o],c=[],h=0;h<l.length;h++)c.push(new fe.MathNode("mtd",[$t(l[h],n)]));e.tags&&e.tags[o]&&(c.unshift(i),c.push(i),e.leqno?c.unshift(s):c.push(s)),r.push(new fe.MathNode("mtr",c))}var u=new fe.MathNode("mtable",r),d=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",ve(d));var f="",p="";if(e.cols&&e.cols.length>0){var m=e.cols,g="",b=!1,y=0,w=m.length;m[0].type==="separator"&&(f+="top ",y=1),m[m.length-1].type==="separator"&&(f+="bottom ",w-=1);for(var S=y;S<w;S++)m[S].type==="align"?(p+=aB[m[S].align],b&&(g+="none "),b=!0):m[S].type==="separator"&&b&&(g+=m[S].separator==="|"?"solid ":"dashed ",b=!1);u.setAttribute("columnalign",p.trim()),/[sd]/.test(g)&&u.setAttribute("columnlines",g.trim())}if(e.colSeparationType==="align"){for(var E=e.cols||[],T="",C=1;C<E.length;C++)T+=C%2?"0em ":"1em ";u.setAttribute("columnspacing",T.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?u.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?u.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var M="",R=e.hLinesBeforeRow;f+=R[0].length>0?"left ":"",f+=R[R.length-1].length>0?"right ":"";for(var D=1;D<R.length-1;D++)M+=R[D].length===0?"none ":R[D][0]?"dashed ":"solid ";return/[sd]/.test(M)&&u.setAttribute("rowlines",M.trim()),f!==""&&(u=new fe.MathNode("menclose",[u]),u.setAttribute("notation",f.trim())),e.arraystretch&&e.arraystretch<1&&(u=new fe.MathNode("mstyle",[u]),u.setAttribute("scriptlevel","1")),u},lS=function(e,n){e.envName.indexOf("ed")===-1&&pf(e);var r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",o=Ya(e.parser,{cols:r,addJot:!0,autoTag:s?void 0:hb(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),l,c=0,h={type:"ordgroup",mode:e.mode,body:[]};if(n[0]&&n[0].type==="ordgroup"){for(var u="",d=0;d<n[0].body.length;d++){var f=et(n[0].body[d],"textord");u+=f.text}l=Number(u),c=l*2}var p=!c;o.body.forEach(function(y){for(var w=1;w<y.length;w+=2){var S=et(y[w],"styling"),E=et(S.body[0],"ordgroup");E.body.unshift(h)}if(p)c<y.length&&(c=y.length);else{var T=y.length/2;if(l<T)throw new pe("Too many math in a row: "+("expected "+l+", but got "+T),y[0])}});for(var m=0;m<c;++m){var g="r",b=0;m%2===1?g="l":m>0&&p&&(b=1),r[m]={type:"align",align:g,pregap:b,postgap:0}}return o.colSeparationType=p?"align":"alignat",o};Ii({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var n=uf(e[0]),r=n?[e[0]]:et(e[0],"ordgroup").body,i=r.map(function(o){var l=ab(o),c=l.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new pe("Unknown column alignment: "+c,o)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return Ya(t.parser,s,ub(t.envName))},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,"lcr".indexOf(n)===-1)throw new pe("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var s=Ya(t.parser,r,ub(t.envName)),o=Math.max(0,...s.body.map(l=>l.length));return s.cols=new Array(o).fill({type:"align",align:n}),e?{type:"leftright",mode:t.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},n=Ya(t.parser,e,"script");return n.colSeparationType="small",n},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var n=uf(e[0]),r=n?[e[0]]:et(e[0],"ordgroup").body,i=r.map(function(o){var l=ab(o),c=l.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new pe("Unknown column alignment: "+c,o)});if(i.length>1)throw new pe("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=Ya(t.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new pe("{subarray} can contain only one column");return s},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},n=Ya(t.parser,e,ub(t.envName));return{type:"leftright",mode:t.mode,body:[n],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:lS,htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){ze.contains(["gather","gather*"],t.envName)&&pf(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:hb(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Ya(t.parser,e,"display")},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:lS,htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){pf(t);var e={autoTag:hb(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Ya(t.parser,e,"display")},htmlBuilder:Mi,mathmlBuilder:Li});Ii({type:"array",names:["CD"],props:{numArgs:0},handler(t){return pf(t),UD(t.parser)},htmlBuilder:Mi,mathmlBuilder:Li});B("\\nonumber","\\gdef\\@eqnsw{0}");B("\\notag","\\nonumber");Se({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new pe(t.funcName+" valid only within array environment")}});var L2=sS;Se({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];if(i.type!=="ordgroup")throw new pe("Invalid environment name",i);for(var s="",o=0;o<i.body.length;++o)s+=et(i.body[o],"textord").text;if(r==="\\begin"){if(!L2.hasOwnProperty(s))throw new pe("No such environment: "+s,i);var l=L2[s],{args:c,optArgs:h}=n.parseArguments("\\begin{"+s+"}",l),u={mode:n.mode,envName:s,parser:n},d=l.handler(u,c,h);n.expect("\\end",!1);var f=n.nextToken,p=et(n.parseFunction(),"environment");if(p.name!==s)throw new pe("Mismatch: \\begin{"+s+"} matched by \\end{"+p.name+"}",f);return d}return{type:"environment",mode:n.mode,name:s,nameGroup:i}}});var cS=(t,e)=>{var n=t.font,r=e.withFont(n);return dt(t.body,r)},hS=(t,e)=>{var n=t.font,r=e.withFont(n);return $t(t.body,r)},O2={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Se({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=rd(e[0]),s=r;return s in O2&&(s=O2[s]),{type:"font",mode:n.mode,font:s.slice(1),body:i}},htmlBuilder:cS,mathmlBuilder:hS});Se({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:n}=t,r=e[0],i=ze.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:df(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}});Se({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,breakOnTokenText:i}=t,{mode:s}=n,o=n.parseExpression(!0,i),l="math"+r.slice(1);return{type:"font",mode:s,font:l,body:{type:"ordgroup",mode:n.mode,body:o}}},htmlBuilder:cS,mathmlBuilder:hS});var uS=(t,e)=>{var n=e;return t==="display"?n=n.id>=Ue.SCRIPT.id?n.text():Ue.DISPLAY:t==="text"&&n.size===Ue.DISPLAY.size?n=Ue.TEXT:t==="script"?n=Ue.SCRIPT:t==="scriptscript"&&(n=Ue.SCRIPTSCRIPT),n},db=(t,e)=>{var n=uS(t.size,e.style),r=n.fracNum(),i=n.fracDen(),s;s=e.havingStyle(r);var o=dt(t.numer,s,e);if(t.continued){var l=8.5/e.fontMetrics().ptPerEm,c=3.5/e.fontMetrics().ptPerEm;o.height=o.height<l?l:o.height,o.depth=o.depth<c?c:o.depth}s=e.havingStyle(i);var h=dt(t.denom,s,e),u,d,f;t.hasBarLine?(t.barSize?(d=Ht(t.barSize,e),u=ae.makeLineSpan("frac-line",e,d)):u=ae.makeLineSpan("frac-line",e),d=u.height,f=u.height):(u=null,d=0,f=e.fontMetrics().defaultRuleThickness);var p,m,g;n.size===Ue.DISPLAY.size||t.size==="display"?(p=e.fontMetrics().num1,d>0?m=3*f:m=7*f,g=e.fontMetrics().denom1):(d>0?(p=e.fontMetrics().num2,m=f):(p=e.fontMetrics().num3,m=3*f),g=e.fontMetrics().denom2);var b;if(u){var w=e.fontMetrics().axisHeight;p-o.depth-(w+.5*d)<m&&(p+=m-(p-o.depth-(w+.5*d))),w-.5*d-(h.height-g)<m&&(g+=m-(w-.5*d-(h.height-g)));var S=-(w-.5*d);b=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:g},{type:"elem",elem:u,shift:S},{type:"elem",elem:o,shift:-p}]},e)}else{var y=p-o.depth-(h.height-g);y<m&&(p+=.5*(m-y),g+=.5*(m-y)),b=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:g},{type:"elem",elem:o,shift:-p}]},e)}s=e.havingStyle(n),b.height*=s.sizeMultiplier/e.sizeMultiplier,b.depth*=s.sizeMultiplier/e.sizeMultiplier;var E;n.size===Ue.DISPLAY.size?E=e.fontMetrics().delim1:n.size===Ue.SCRIPTSCRIPT.size?E=e.havingStyle(Ue.SCRIPT).fontMetrics().delim2:E=e.fontMetrics().delim2;var T,C;return t.leftDelim==null?T=qc(e,["mopen"]):T=oa.customSizedDelim(t.leftDelim,E,!0,e.havingStyle(n),t.mode,["mopen"]),t.continued?C=ae.makeSpan([]):t.rightDelim==null?C=qc(e,["mclose"]):C=oa.customSizedDelim(t.rightDelim,E,!0,e.havingStyle(n),t.mode,["mclose"]),ae.makeSpan(["mord"].concat(s.sizingClasses(e)),[T,ae.makeSpan(["mfrac"],[b]),C],e)},fb=(t,e)=>{var n=new fe.MathNode("mfrac",[$t(t.numer,e),$t(t.denom,e)]);if(!t.hasBarLine)n.setAttribute("linethickness","0px");else if(t.barSize){var r=Ht(t.barSize,e);n.setAttribute("linethickness",ve(r))}var i=uS(t.size,e.style);if(i.size!==e.style.size){n=new fe.MathNode("mstyle",[n]);var s=i.size===Ue.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var l=new fe.MathNode("mo",[new fe.TextNode(t.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}if(o.push(n),t.rightDelim!=null){var c=new fe.MathNode("mo",[new fe.TextNode(t.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),o.push(c)}return rb(o)}return n};Se({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1],o,l=null,c=null,h="auto";switch(r){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,l="(",c=")";break;case"\\\\bracefrac":o=!1,l="\\{",c="\\}";break;case"\\\\brackfrac":o=!1,l="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(r){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:n.mode,continued:!1,numer:i,denom:s,hasBarLine:o,leftDelim:l,rightDelim:c,size:h,barSize:null}},htmlBuilder:db,mathmlBuilder:fb});Se({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=e[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Se({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:n,token:r}=t,i;switch(n){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:r}}});var R2=["display","text","script","scriptscript"],N2=function(e){var n=null;return e.length>0&&(n=e,n=n==="."?null:n),n};Se({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:n}=t,r=e[4],i=e[5],s=rd(e[0]),o=s.type==="atom"&&s.family==="open"?N2(s.text):null,l=rd(e[1]),c=l.type==="atom"&&l.family==="close"?N2(l.text):null,h=et(e[2],"size"),u,d=null;h.isBlank?u=!0:(d=h.value,u=d.number>0);var f="auto",p=e[3];if(p.type==="ordgroup"){if(p.body.length>0){var m=et(p.body[0],"textord");f=R2[Number(m.text)]}}else p=et(p,"textord"),f=R2[Number(p.text)];return{type:"genfrac",mode:n.mode,numer:r,denom:i,continued:!1,hasBarLine:u,barSize:d,leftDelim:o,rightDelim:c,size:f}},htmlBuilder:db,mathmlBuilder:fb});Se({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:n,funcName:r,token:i}=t;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:et(e[0],"size").value,token:i}}});Se({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0],s=NN(et(e[1],"infix").size),o=e[2],l=s.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:o,continued:!1,hasBarLine:l,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:db,mathmlBuilder:fb});var dS=(t,e)=>{var n=e.style,r,i;t.type==="supsub"?(r=t.sup?dt(t.sup,e.havingStyle(n.sup()),e):dt(t.sub,e.havingStyle(n.sub()),e),i=et(t.base,"horizBrace")):i=et(t,"horizBrace");var s=dt(i.base,e.havingBaseStyle(Ue.DISPLAY)),o=da.svgSpan(i,e),l;if(i.isOver?(l=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=ae.makeVList({positionType:"bottom",positionData:s.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),r){var c=ae.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e);i.isOver?l=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:r}]},e):l=ae.makeVList({positionType:"bottom",positionData:c.depth+.2+r.height+r.depth,children:[{type:"elem",elem:r},{type:"kern",size:.2},{type:"elem",elem:c}]},e)}return ae.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e)},sB=(t,e)=>{var n=da.mathMLnode(t.label);return new fe.MathNode(t.isOver?"mover":"munder",[$t(t.base,e),n])};Se({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:n,funcName:r}=t;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:e[0]}},htmlBuilder:dS,mathmlBuilder:sB});Se({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[1],i=et(e[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:Gt(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var n=on(t.body,e,!1);return ae.makeAnchor(t.href,[],n,e)},mathmlBuilder:(t,e)=>{var n=Fa(t.body,e);return n instanceof xr||(n=new xr("mrow",[n])),n.setAttribute("href",t.href),n}});Se({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=et(e[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var o=r[s];o==="~"&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var l={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:Gt(l)}}});Se({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:n}=t;return{type:"hbox",mode:n.mode,body:Gt(e[0])}},htmlBuilder(t,e){var n=on(t.body,e,!1);return ae.makeFragment(n)},mathmlBuilder(t,e){return new fe.MathNode("mrow",hr(t.body,e))}});Se({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r,token:i}=t,s=et(e[0],"raw").string,o=e[1];n.settings.strict&&n.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,c={};switch(r){case"\\htmlClass":c.class=s,l={command:"\\htmlClass",class:s};break;case"\\htmlId":c.id=s,l={command:"\\htmlId",id:s};break;case"\\htmlStyle":c.style=s,l={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var h=s.split(","),u=0;u<h.length;u++){var d=h[u].split("=");if(d.length!==2)throw new pe("Error parsing key-value for \\htmlData");c["data-"+d[0].trim()]=d[1].trim()}l={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return n.settings.isTrusted(l)?{type:"html",mode:n.mode,attributes:c,body:Gt(o)}:n.formatUnsupportedCmd(r)},htmlBuilder:(t,e)=>{var n=on(t.body,e,!1),r=["enclosing"];t.attributes.class&&r.push(...t.attributes.class.trim().split(/\s+/));var i=ae.makeSpan(r,n,e);for(var s in t.attributes)s!=="class"&&t.attributes.hasOwnProperty(s)&&i.setAttribute(s,t.attributes[s]);return i},mathmlBuilder:(t,e)=>Fa(t.body,e)});Se({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"htmlmathml",mode:n.mode,html:Gt(e[0]),mathml:Gt(e[1])}},htmlBuilder:(t,e)=>{var n=on(t.html,e,!1);return ae.makeFragment(n)},mathmlBuilder:(t,e)=>Fa(t.mathml,e)});var z0=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!n)throw new pe("Invalid size: '"+e+"' in \\includegraphics");var r={number:+(n[1]+n[2]),unit:n[3]};if(!I6(r))throw new pe("Invalid unit: '"+r.unit+"' in \\includegraphics.");return r};Se({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,n)=>{var{parser:r}=t,i={number:0,unit:"em"},s={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(n[0])for(var c=et(n[0],"raw").string,h=c.split(","),u=0;u<h.length;u++){var d=h[u].split("=");if(d.length===2){var f=d[1].trim();switch(d[0].trim()){case"alt":l=f;break;case"width":i=z0(f);break;case"height":s=z0(f);break;case"totalheight":o=z0(f);break;default:throw new pe("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var p=et(e[0],"url").url;return l===""&&(l=p,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:s,totalheight:o,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var n=Ht(t.height,e),r=0;t.totalheight.number>0&&(r=Ht(t.totalheight,e)-n);var i=0;t.width.number>0&&(i=Ht(t.width,e));var s={height:ve(n+r)};i>0&&(s.width=ve(i)),r>0&&(s.verticalAlign=ve(-r));var o=new sD(t.src,t.alt,s);return o.height=n,o.depth=r,o},mathmlBuilder:(t,e)=>{var n=new fe.MathNode("mglyph",[]);n.setAttribute("alt",t.alt);var r=Ht(t.height,e),i=0;if(t.totalheight.number>0&&(i=Ht(t.totalheight,e)-r,n.setAttribute("valign",ve(-i))),n.setAttribute("height",ve(r+i)),t.width.number>0){var s=Ht(t.width,e);n.setAttribute("width",ve(s))}return n.setAttribute("src",t.src),n}});Se({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=et(e[0],"size");if(n.settings.strict){var s=r[1]==="m",o=i.value.unit==="mu";s?(o||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, "+("not "+i.value.unit+" units")),n.mode!=="math"&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder(t,e){return ae.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var n=Ht(t.dimension,e);return new fe.SpaceNode(n)}});Se({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(t,e)=>{var n;t.alignment==="clap"?(n=ae.makeSpan([],[dt(t.body,e)]),n=ae.makeSpan(["inner"],[n],e)):n=ae.makeSpan(["inner"],[dt(t.body,e)]);var r=ae.makeSpan(["fix"],[]),i=ae.makeSpan([t.alignment],[n,r],e),s=ae.makeSpan(["strut"]);return s.style.height=ve(i.height+i.depth),i.depth&&(s.style.verticalAlign=ve(-i.depth)),i.children.unshift(s),i=ae.makeSpan(["thinbox"],[i],e),ae.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var n=new fe.MathNode("mpadded",[$t(t.body,e)]);if(t.alignment!=="rlap"){var r=t.alignment==="llap"?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}});Se({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:n,parser:r}=t,i=r.mode;r.switchMode("math");var s=n==="\\("?"\\)":"$",o=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}});Se({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new pe("Mismatched "+t.funcName)}});var D2=(t,e)=>{switch(e.style.size){case Ue.DISPLAY.size:return t.display;case Ue.TEXT.size:return t.text;case Ue.SCRIPT.size:return t.script;case Ue.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};Se({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:n}=t;return{type:"mathchoice",mode:n.mode,display:Gt(e[0]),text:Gt(e[1]),script:Gt(e[2]),scriptscript:Gt(e[3])}},htmlBuilder:(t,e)=>{var n=D2(t,e),r=on(n,e,!1);return ae.makeFragment(r)},mathmlBuilder:(t,e)=>{var n=D2(t,e);return Fa(n,e)}});var fS=(t,e,n,r,i,s,o)=>{t=ae.makeSpan([],[t]);var l=n&&ze.isCharacterBox(n),c,h;if(e){var u=dt(e,r.havingStyle(i.sup()),r);h={elem:u,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-u.depth)}}if(n){var d=dt(n,r.havingStyle(i.sub()),r);c={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-d.height)}}var f;if(h&&c){var p=r.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+t.depth+o;f=ae.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:ve(-s)},{type:"kern",size:c.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ve(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(c){var m=t.height-o;f=ae.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:ve(-s)},{type:"kern",size:c.kern},{type:"elem",elem:t}]},r)}else if(h){var g=t.depth+o;f=ae.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:ve(s)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else return t;var b=[f];if(c&&s!==0&&!l){var y=ae.makeSpan(["mspace"],[],r);y.style.marginRight=ve(s),b.unshift(y)}return ae.makeSpan(["mop","op-limits"],b,r)},pS=["\\smallint"],nl=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=et(t.base,"op"),i=!0):s=et(t,"op");var o=e.style,l=!1;o.size===Ue.DISPLAY.size&&s.symbol&&!ze.contains(pS,s.name)&&(l=!0);var c;if(s.symbol){var h=l?"Size2-Regular":"Size1-Regular",u="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(u=s.name.slice(1),s.name=u==="oiint"?"\\iint":"\\iiint"),c=ae.makeSymbol(s.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),u.length>0){var d=c.italic,f=ae.staticSvg(u+"Size"+(l?"2":"1"),e);c=ae.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:f,shift:l?.08:0}]},e),s.name="\\"+u,c.classes.unshift("mop"),c.italic=d}}else if(s.body){var p=on(s.body,e,!0);p.length===1&&p[0]instanceof Rr?(c=p[0],c.classes[0]="mop"):c=ae.makeSpan(["mop"],p,e)}else{for(var m=[],g=1;g<s.name.length;g++)m.push(ae.mathsym(s.name[g],s.mode,e));c=ae.makeSpan(["mop"],m,e)}var b=0,y=0;return(c instanceof Rr||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(b=(c.height-c.depth)/2-e.fontMetrics().axisHeight,y=c.italic),i?fS(c,n,r,e,o,y,b):(b&&(c.style.position="relative",c.style.top=ve(b)),c)},bh=(t,e)=>{var n;if(t.symbol)n=new xr("mo",[Nr(t.name,t.mode)]),ze.contains(pS,t.name)&&n.setAttribute("largeop","false");else if(t.body)n=new xr("mo",hr(t.body,e));else{n=new xr("mi",[new Si(t.name.slice(1))]);var r=new xr("mo",[Nr("⁡","text")]);t.parentIsSupSub?n=new xr("mrow",[n,r]):n=z6([n,r])}return n},oB={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};Se({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=r;return i.length===1&&(i=oB[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:nl,mathmlBuilder:bh});Se({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Gt(r)}},htmlBuilder:nl,mathmlBuilder:bh});var lB={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};Se({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:nl,mathmlBuilder:bh});Se({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:nl,mathmlBuilder:bh});Se({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler(t){var{parser:e,funcName:n}=t,r=n;return r.length===1&&(r=lB[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:nl,mathmlBuilder:bh});var mS=(t,e)=>{var n,r,i=!1,s;t.type==="supsub"?(n=t.sup,r=t.sub,s=et(t.base,"operatorname"),i=!0):s=et(t,"operatorname");var o;if(s.body.length>0){for(var l=s.body.map(d=>{var f=d.text;return typeof f=="string"?{type:"textord",mode:d.mode,text:f}:d}),c=on(l,e.withFont("mathrm"),!0),h=0;h<c.length;h++){var u=c[h];u instanceof Rr&&(u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=ae.makeSpan(["mop"],c,e)}else o=ae.makeSpan(["mop"],[],e);return i?fS(o,n,r,e,e.style,0,0):o},cB=(t,e)=>{for(var n=hr(t.body,e.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(!(s instanceof fe.SpaceNode))if(s instanceof fe.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=s.children[0];s.children.length===1&&o instanceof fe.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break}default:r=!1}else r=!1}if(r){var l=n.map(u=>u.toText()).join("");n=[new fe.TextNode(l)]}var c=new fe.MathNode("mi",n);c.setAttribute("mathvariant","normal");var h=new fe.MathNode("mo",[Nr("⁡","text")]);return t.parentIsSupSub?new fe.MathNode("mrow",[c,h]):fe.newDocumentFragment([c,h])};Se({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:n,funcName:r}=t,i=e[0];return{type:"operatorname",mode:n.mode,body:Gt(i),alwaysHandleSupSub:r==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:mS,mathmlBuilder:cB});B("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");qs({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?ae.makeFragment(on(t.body,e,!1)):ae.makeSpan(["mord"],on(t.body,e,!0),e)},mathmlBuilder(t,e){return Fa(t.body,e,!0)}});Se({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:n}=t,r=e[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(t,e){var n=dt(t.body,e.havingCrampedStyle()),r=ae.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},e);return ae.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(t,e){var n=new fe.MathNode("mo",[new fe.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new fe.MathNode("mover",[$t(t.body,e),n]);return r.setAttribute("accent","true"),r}});Se({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"phantom",mode:n.mode,body:Gt(r)}},htmlBuilder:(t,e)=>{var n=on(t.body,e.withPhantom(),!1);return ae.makeFragment(n)},mathmlBuilder:(t,e)=>{var n=hr(t.body,e);return new fe.MathNode("mphantom",n)}});Se({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=ae.makeSpan([],[dt(t.body,e.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e),ae.makeSpan(["mord"],[n],e)},mathmlBuilder:(t,e)=>{var n=hr(Gt(t.body),e),r=new fe.MathNode("mphantom",n),i=new fe.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});Se({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:n}=t,r=e[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(t,e)=>{var n=ae.makeSpan(["inner"],[dt(t.body,e.withPhantom())]),r=ae.makeSpan(["fix"],[]);return ae.makeSpan(["mord","rlap"],[n,r],e)},mathmlBuilder:(t,e)=>{var n=hr(Gt(t.body),e),r=new fe.MathNode("mphantom",n),i=new fe.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}});Se({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:n}=t,r=et(e[0],"size").value,i=e[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(t,e){var n=dt(t.body,e),r=Ht(t.dy,e);return ae.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){var n=new fe.MathNode("mpadded",[$t(t.body,e)]),r=t.dy.number+t.dy.unit;return n.setAttribute("voffset",r),n}});Se({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});Se({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,n){var{parser:r}=t,i=n[0],s=et(e[0],"size"),o=et(e[1],"size");return{type:"rule",mode:r.mode,shift:i&&et(i,"size").value,width:s.value,height:o.value}},htmlBuilder(t,e){var n=ae.makeSpan(["mord","rule"],[],e),r=Ht(t.width,e),i=Ht(t.height,e),s=t.shift?Ht(t.shift,e):0;return n.style.borderRightWidth=ve(r),n.style.borderTopWidth=ve(i),n.style.bottom=ve(s),n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=i*1.125*e.sizeMultiplier,n},mathmlBuilder(t,e){var n=Ht(t.width,e),r=Ht(t.height,e),i=t.shift?Ht(t.shift,e):0,s=e.color&&e.getColor()||"black",o=new fe.MathNode("mspace");o.setAttribute("mathbackground",s),o.setAttribute("width",ve(n)),o.setAttribute("height",ve(r));var l=new fe.MathNode("mpadded",[o]);return i>=0?l.setAttribute("height",ve(i)):(l.setAttribute("height",ve(i)),l.setAttribute("depth",ve(-i))),l.setAttribute("voffset",ve(i)),l}});function gS(t,e,n){for(var r=on(t,e,!1),i=e.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var o=r[s].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[s].classes,e.sizingClasses(n)):r[s].classes[o+1]==="reset-size"+e.size&&(r[s].classes[o+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return ae.makeFragment(r)}var B2=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],hB=(t,e)=>{var n=e.havingSize(t.size);return gS(t.body,n,e)};Se({type:"sizing",names:B2,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:B2.indexOf(r)+1,body:s}},htmlBuilder:hB,mathmlBuilder:(t,e)=>{var n=e.havingSize(t.size),r=hr(t.body,n),i=new fe.MathNode("mstyle",r);return i.setAttribute("mathsize",ve(n.sizeMultiplier)),i}});Se({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,n)=>{var{parser:r}=t,i=!1,s=!1,o=n[0]&&et(n[0],"ordgroup");if(o)for(var l="",c=0;c<o.body.length;++c){var h=o.body[c];if(l=h.text,l==="t")i=!0;else if(l==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var u=e[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:s}},htmlBuilder:(t,e)=>{var n=ae.makeSpan([],[dt(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return n;if(t.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(t.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},e);return ae.makeSpan(["mord"],[s],e)},mathmlBuilder:(t,e)=>{var n=new fe.MathNode("mpadded",[$t(t.body,e)]);return t.smashHeight&&n.setAttribute("height","0px"),t.smashDepth&&n.setAttribute("depth","0px"),n}});Se({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,n){var{parser:r}=t,i=n[0],s=e[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder(t,e){var n=dt(t.body,e.havingCrampedStyle());n.height===0&&(n.height=e.fontMetrics().xHeight),n=ae.wrapFragment(n,e);var r=e.fontMetrics(),i=r.defaultRuleThickness,s=i;e.style.id<Ue.TEXT.id&&(s=e.fontMetrics().xHeight);var o=i+s/4,l=n.height+n.depth+o+i,{span:c,ruleWidth:h,advanceWidth:u}=oa.sqrtImage(l,e),d=c.height-h;d>n.height+n.depth+o&&(o=(o+d-n.height-n.depth)/2);var f=c.height-n.height-o-h;n.style.paddingLeft=ve(u);var p=ae.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+f)},{type:"elem",elem:c},{type:"kern",size:h}]},e);if(t.index){var m=e.havingStyle(Ue.SCRIPTSCRIPT),g=dt(t.index,m,e),b=.6*(p.height-p.depth),y=ae.makeVList({positionType:"shift",positionData:-b,children:[{type:"elem",elem:g}]},e),w=ae.makeSpan(["root"],[y]);return ae.makeSpan(["mord","sqrt"],[w,p],e)}else return ae.makeSpan(["mord","sqrt"],[p],e)},mathmlBuilder(t,e){var{body:n,index:r}=t;return r?new fe.MathNode("mroot",[$t(n,e),$t(r,e)]):new fe.MathNode("msqrt",[$t(n,e)])}});var P2={display:Ue.DISPLAY,text:Ue.TEXT,script:Ue.SCRIPT,scriptscript:Ue.SCRIPTSCRIPT};Se({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:n,funcName:r,parser:i}=t,s=i.parseExpression(!0,n),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:s}},htmlBuilder(t,e){var n=P2[t.style],r=e.havingStyle(n).withFont("");return gS(t.body,r,e)},mathmlBuilder(t,e){var n=P2[t.style],r=e.havingStyle(n),i=hr(t.body,r),s=new fe.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=o[t.style];return s.setAttribute("scriptlevel",l[0]),s.setAttribute("displaystyle",l[1]),s}});var uB=function(e,n){var r=e.base;if(r)if(r.type==="op"){var i=r.limits&&(n.style.size===Ue.DISPLAY.size||r.alwaysHandleSupSub);return i?nl:null}else if(r.type==="operatorname"){var s=r.alwaysHandleSupSub&&(n.style.size===Ue.DISPLAY.size||r.limits);return s?mS:null}else{if(r.type==="accent")return ze.isCharacterBox(r.base)?sb:null;if(r.type==="horizBrace"){var o=!e.sub;return o===r.isOver?dS:null}else return null}else return null};qs({type:"supsub",htmlBuilder(t,e){var n=uB(t,e);if(n)return n(t,e);var{base:r,sup:i,sub:s}=t,o=dt(r,e),l,c,h=e.fontMetrics(),u=0,d=0,f=r&&ze.isCharacterBox(r);if(i){var p=e.havingStyle(e.style.sup());l=dt(i,p,e),f||(u=o.height-p.fontMetrics().supDrop*p.sizeMultiplier/e.sizeMultiplier)}if(s){var m=e.havingStyle(e.style.sub());c=dt(s,m,e),f||(d=o.depth+m.fontMetrics().subDrop*m.sizeMultiplier/e.sizeMultiplier)}var g;e.style===Ue.DISPLAY?g=h.sup1:e.style.cramped?g=h.sup3:g=h.sup2;var b=e.sizeMultiplier,y=ve(.5/h.ptPerEm/b),w=null;if(c){var S=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof Rr||S)&&(w=ve(-o.italic))}var E;if(l&&c){u=Math.max(u,g,l.depth+.25*h.xHeight),d=Math.max(d,h.sub2);var T=h.defaultRuleThickness,C=4*T;if(u-l.depth-(c.height-d)<C){d=C-(u-l.depth)+c.height;var M=.8*h.xHeight-(u-l.depth);M>0&&(u+=M,d-=M)}var R=[{type:"elem",elem:c,shift:d,marginRight:y,marginLeft:w},{type:"elem",elem:l,shift:-u,marginRight:y}];E=ae.makeVList({positionType:"individualShift",children:R},e)}else if(c){d=Math.max(d,h.sub1,c.height-.8*h.xHeight);var D=[{type:"elem",elem:c,marginLeft:w,marginRight:y}];E=ae.makeVList({positionType:"shift",positionData:d,children:D},e)}else if(l)u=Math.max(u,g,l.depth+.25*h.xHeight),E=ae.makeVList({positionType:"shift",positionData:-u,children:[{type:"elem",elem:l,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var $=lg(o,"right")||"mord";return ae.makeSpan([$],[o,ae.makeSpan(["msupsub"],[E])],e)},mathmlBuilder(t,e){var n=!1,r,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(n=!0,r=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var s=[$t(t.base,e)];t.sub&&s.push($t(t.sub,e)),t.sup&&s.push($t(t.sup,e));var o;if(n)o=r?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===Ue.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===Ue.DISPLAY||h.limits)?o="munderover":o="msubsup"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ue.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ue.DISPLAY)?o="munder":o="msub"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===Ue.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===Ue.DISPLAY)?o="mover":o="msup"}return new fe.MathNode(o,s)}});qs({type:"atom",htmlBuilder(t,e){return ae.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var n=new fe.MathNode("mo",[Nr(t.text,t.mode)]);if(t.family==="bin"){var r=ib(t,e);r==="bold-italic"&&n.setAttribute("mathvariant",r)}else t.family==="punct"?n.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&n.setAttribute("stretchy","false");return n}});var bS={mi:"italic",mn:"normal",mtext:"normal"};qs({type:"mathord",htmlBuilder(t,e){return ae.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var n=new fe.MathNode("mi",[Nr(t.text,t.mode,e)]),r=ib(t,e)||"italic";return r!==bS[n.type]&&n.setAttribute("mathvariant",r),n}});qs({type:"textord",htmlBuilder(t,e){return ae.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var n=Nr(t.text,t.mode,e),r=ib(t,e)||"normal",i;return t.mode==="text"?i=new fe.MathNode("mtext",[n]):/[0-9]/.test(t.text)?i=new fe.MathNode("mn",[n]):t.text==="\\prime"?i=new fe.MathNode("mo",[n]):i=new fe.MathNode("mi",[n]),r!==bS[i.type]&&i.setAttribute("mathvariant",r),i}});var q0={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},W0={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};qs({type:"spacing",htmlBuilder(t,e){if(W0.hasOwnProperty(t.text)){var n=W0[t.text].className||"";if(t.mode==="text"){var r=ae.makeOrd(t,e,"textord");return r.classes.push(n),r}else return ae.makeSpan(["mspace",n],[ae.mathsym(t.text,t.mode,e)],e)}else{if(q0.hasOwnProperty(t.text))return ae.makeSpan(["mspace",q0[t.text]],[],e);throw new pe('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var n;if(W0.hasOwnProperty(t.text))n=new fe.MathNode("mtext",[new fe.TextNode(" ")]);else{if(q0.hasOwnProperty(t.text))return new fe.MathNode("mspace");throw new pe('Unknown type of space "'+t.text+'"')}return n}});var F2=()=>{var t=new fe.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};qs({type:"tag",mathmlBuilder(t,e){var n=new fe.MathNode("mtable",[new fe.MathNode("mtr",[F2(),new fe.MathNode("mtd",[Fa(t.body,e)]),F2(),new fe.MathNode("mtd",[Fa(t.tag,e)])])]);return n.setAttribute("width","100%"),n}});var H2={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},z2={"\\textbf":"textbf","\\textmd":"textmd"},dB={"\\textit":"textit","\\textup":"textup"},q2=(t,e)=>{var n=t.font;if(n){if(H2[n])return e.withTextFontFamily(H2[n]);if(z2[n])return e.withTextFontWeight(z2[n]);if(n==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(dB[n])};Se({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:n,funcName:r}=t,i=e[0];return{type:"text",mode:n.mode,body:Gt(i),font:r}},htmlBuilder(t,e){var n=q2(t,e),r=on(t.body,n,!0);return ae.makeSpan(["mord","text"],r,n)},mathmlBuilder(t,e){var n=q2(t,e);return Fa(t.body,n)}});Se({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:n}=t;return{type:"underline",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=dt(t.body,e),r=ae.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=ae.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},e);return ae.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(t,e){var n=new fe.MathNode("mo",[new fe.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new fe.MathNode("munder",[$t(t.body,e),n]);return r.setAttribute("accentunder","true"),r}});Se({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:n}=t;return{type:"vcenter",mode:n.mode,body:e[0]}},htmlBuilder(t,e){var n=dt(t.body,e),r=e.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return ae.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},e)},mathmlBuilder(t,e){return new fe.MathNode("mpadded",[$t(t.body,e)],["vcenter"])}});Se({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,n){throw new pe("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var n=W2(t),r=[],i=e.havingStyle(e.style.text()),s=0;s<n.length;s++){var o=n[s];o==="~"&&(o="\\textasciitilde"),r.push(ae.makeSymbol(o,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return ae.makeSpan(["mord","text"].concat(i.sizingClasses(e)),ae.tryCombineChars(r),i)},mathmlBuilder(t,e){var n=new fe.TextNode(W2(t)),r=new fe.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var W2=t=>t.body.replace(/ /g,t.star?"␣":" "),Ia=F6,yS=`[ \r
	]`,fB="\\\\[a-zA-Z@]+",pB="\\\\[^\uD800-\uDFFF]",mB="("+fB+")"+yS+"*",gB=`\\\\(
|[ \r	]+
?)[ \r	]*`,dg="[̀-ͯ]",bB=new RegExp(dg+"+$"),yB="("+yS+"+)|"+(gB+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(dg+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(dg+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+mB)+("|"+pB+")");class U2{constructor(e,n){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=n,this.tokenRegex=new RegExp(yB,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,n){this.catcodes[e]=n}lex(){var e=this.input,n=this.tokenRegex.lastIndex;if(n===e.length)return new _r("EOF",new nr(this,n,n));var r=this.tokenRegex.exec(e);if(r===null||r.index!==n)throw new pe("Unexpected character: '"+e[n]+"'",new _r(e[n],new nr(this,n,n+1)));var i=r[6]||r[3]||(r[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new _r(i,new nr(this,n,this.tokenRegex.lastIndex))}}class xB{constructor(e,n){e===void 0&&(e={}),n===void 0&&(n={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=n,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new pe("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var n in e)e.hasOwnProperty(n)&&(e[n]==null?delete this.current[n]:this.current[n]=e[n])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,n,r){if(r===void 0&&(r=!1),r){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=n)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}n==null?delete this.current[e]:this.current[e]=n}}var wB=oS;B("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});B("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});B("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});B("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});B("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var n=t.future();return e[0].length===1&&e[0][0].text===n.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});B("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");B("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var V2={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};B("\\char",function(t){var e=t.popToken(),n,r="";if(e.text==="'")n=8,e=t.popToken();else if(e.text==='"')n=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")r=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new pe("\\char` missing argument");r=e.text.charCodeAt(0)}else n=10;if(n){if(r=V2[e.text],r==null||r>=n)throw new pe("Invalid base-"+n+" digit "+e.text);for(var i;(i=V2[t.future().text])!=null&&i<n;)r*=n,r+=i,t.popToken()}return"\\@char{"+r+"}"});var pb=(t,e,n,r)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new pe("\\newcommand's first argument must be a macro name");var s=i[0].text,o=t.isDefined(s);if(o&&!e)throw new pe("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!o&&!n)throw new pe("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var l=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var c="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)c+=h.text,h=t.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new pe("Invalid number of arguments: "+c);l=parseInt(c),i=t.consumeArg().tokens}return o&&r||t.macros.set(s,{tokens:i,numArgs:l}),""};B("\\newcommand",t=>pb(t,!1,!0,!1));B("\\renewcommand",t=>pb(t,!0,!1,!1));B("\\providecommand",t=>pb(t,!0,!0,!0));B("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(n=>n.text).join("")),""});B("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(n=>n.text).join("")),""});B("\\show",t=>{var e=t.popToken(),n=e.text;return console.log(e,t.macros.get(n),Ia[n],Mt.math[n],Mt.text[n]),""});B("\\bgroup","{");B("\\egroup","}");B("~","\\nobreakspace");B("\\lq","`");B("\\rq","'");B("\\aa","\\r a");B("\\AA","\\r A");B("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}");B("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");B("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");B("ℬ","\\mathscr{B}");B("ℰ","\\mathscr{E}");B("ℱ","\\mathscr{F}");B("ℋ","\\mathscr{H}");B("ℐ","\\mathscr{I}");B("ℒ","\\mathscr{L}");B("ℳ","\\mathscr{M}");B("ℛ","\\mathscr{R}");B("ℭ","\\mathfrak{C}");B("ℌ","\\mathfrak{H}");B("ℨ","\\mathfrak{Z}");B("\\Bbbk","\\Bbb{k}");B("·","\\cdotp");B("\\llap","\\mathllap{\\textrm{#1}}");B("\\rlap","\\mathrlap{\\textrm{#1}}");B("\\clap","\\mathclap{\\textrm{#1}}");B("\\mathstrut","\\vphantom{(}");B("\\underbar","\\underline{\\text{#1}}");B("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');B("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");B("\\ne","\\neq");B("≠","\\neq");B("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");B("∉","\\notin");B("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");B("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");B("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");B("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");B("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");B("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");B("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");B("⟂","\\perp");B("‼","\\mathclose{!\\mkern-0.8mu!}");B("∌","\\notni");B("⌜","\\ulcorner");B("⌝","\\urcorner");B("⌞","\\llcorner");B("⌟","\\lrcorner");B("©","\\copyright");B("®","\\textregistered");B("️","\\textregistered");B("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');B("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');B("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');B("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');B("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");B("⋮","\\vdots");B("\\varGamma","\\mathit{\\Gamma}");B("\\varDelta","\\mathit{\\Delta}");B("\\varTheta","\\mathit{\\Theta}");B("\\varLambda","\\mathit{\\Lambda}");B("\\varXi","\\mathit{\\Xi}");B("\\varPi","\\mathit{\\Pi}");B("\\varSigma","\\mathit{\\Sigma}");B("\\varUpsilon","\\mathit{\\Upsilon}");B("\\varPhi","\\mathit{\\Phi}");B("\\varPsi","\\mathit{\\Psi}");B("\\varOmega","\\mathit{\\Omega}");B("\\substack","\\begin{subarray}{c}#1\\end{subarray}");B("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");B("\\boxed","\\fbox{$\\displaystyle{#1}$}");B("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");B("\\implies","\\DOTSB\\;\\Longrightarrow\\;");B("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");B("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");B("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Y2={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};B("\\dots",function(t){var e="\\dotso",n=t.expandAfterFuture().text;return n in Y2?e=Y2[n]:(n.slice(0,4)==="\\not"||n in Mt.math&&ze.contains(["bin","rel"],Mt.math[n].group))&&(e="\\dotsb"),e});var mb={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};B("\\dotso",function(t){var e=t.future().text;return e in mb?"\\ldots\\,":"\\ldots"});B("\\dotsc",function(t){var e=t.future().text;return e in mb&&e!==","?"\\ldots\\,":"\\ldots"});B("\\cdots",function(t){var e=t.future().text;return e in mb?"\\@cdots\\,":"\\@cdots"});B("\\dotsb","\\cdots");B("\\dotsm","\\cdots");B("\\dotsi","\\!\\cdots");B("\\dotsx","\\ldots\\,");B("\\DOTSI","\\relax");B("\\DOTSB","\\relax");B("\\DOTSX","\\relax");B("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");B("\\,","\\tmspace+{3mu}{.1667em}");B("\\thinspace","\\,");B("\\>","\\mskip{4mu}");B("\\:","\\tmspace+{4mu}{.2222em}");B("\\medspace","\\:");B("\\;","\\tmspace+{5mu}{.2777em}");B("\\thickspace","\\;");B("\\!","\\tmspace-{3mu}{.1667em}");B("\\negthinspace","\\!");B("\\negmedspace","\\tmspace-{4mu}{.2222em}");B("\\negthickspace","\\tmspace-{5mu}{.277em}");B("\\enspace","\\kern.5em ");B("\\enskip","\\hskip.5em\\relax");B("\\quad","\\hskip1em\\relax");B("\\qquad","\\hskip2em\\relax");B("\\tag","\\@ifstar\\tag@literal\\tag@paren");B("\\tag@paren","\\tag@literal{({#1})}");B("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new pe("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});B("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");B("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");B("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");B("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");B("\\newline","\\\\\\relax");B("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var xS=ve(ki["Main-Regular"][84][1]-.7*ki["Main-Regular"][65][1]);B("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+xS+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");B("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+xS+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");B("\\hspace","\\@ifstar\\@hspacer\\@hspace");B("\\@hspace","\\hskip #1\\relax");B("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");B("\\ordinarycolon",":");B("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");B("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');B("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');B("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');B("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');B("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');B("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');B("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');B("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');B("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');B("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');B("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');B("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');B("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');B("∷","\\dblcolon");B("∹","\\eqcolon");B("≔","\\coloneqq");B("≕","\\eqqcolon");B("⩴","\\Coloneqq");B("\\ratio","\\vcentcolon");B("\\coloncolon","\\dblcolon");B("\\colonequals","\\coloneqq");B("\\coloncolonequals","\\Coloneqq");B("\\equalscolon","\\eqqcolon");B("\\equalscoloncolon","\\Eqqcolon");B("\\colonminus","\\coloneq");B("\\coloncolonminus","\\Coloneq");B("\\minuscolon","\\eqcolon");B("\\minuscoloncolon","\\Eqcolon");B("\\coloncolonapprox","\\Colonapprox");B("\\coloncolonsim","\\Colonsim");B("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");B("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");B("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");B("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");B("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");B("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");B("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");B("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");B("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");B("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");B("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");B("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");B("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");B("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}");B("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}");B("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}");B("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}");B("\\nleqq","\\html@mathml{\\@nleqq}{≰}");B("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}");B("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}");B("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}");B("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}");B("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}");B("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}");B("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}");B("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}");B("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}");B("\\imath","\\html@mathml{\\@imath}{ı}");B("\\jmath","\\html@mathml{\\@jmath}{ȷ}");B("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");B("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");B("⟦","\\llbracket");B("⟧","\\rrbracket");B("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");B("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");B("⦃","\\lBrace");B("⦄","\\rBrace");B("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");B("⦵","\\minuso");B("\\darr","\\downarrow");B("\\dArr","\\Downarrow");B("\\Darr","\\Downarrow");B("\\lang","\\langle");B("\\rang","\\rangle");B("\\uarr","\\uparrow");B("\\uArr","\\Uparrow");B("\\Uarr","\\Uparrow");B("\\N","\\mathbb{N}");B("\\R","\\mathbb{R}");B("\\Z","\\mathbb{Z}");B("\\alef","\\aleph");B("\\alefsym","\\aleph");B("\\Alpha","\\mathrm{A}");B("\\Beta","\\mathrm{B}");B("\\bull","\\bullet");B("\\Chi","\\mathrm{X}");B("\\clubs","\\clubsuit");B("\\cnums","\\mathbb{C}");B("\\Complex","\\mathbb{C}");B("\\Dagger","\\ddagger");B("\\diamonds","\\diamondsuit");B("\\empty","\\emptyset");B("\\Epsilon","\\mathrm{E}");B("\\Eta","\\mathrm{H}");B("\\exist","\\exists");B("\\harr","\\leftrightarrow");B("\\hArr","\\Leftrightarrow");B("\\Harr","\\Leftrightarrow");B("\\hearts","\\heartsuit");B("\\image","\\Im");B("\\infin","\\infty");B("\\Iota","\\mathrm{I}");B("\\isin","\\in");B("\\Kappa","\\mathrm{K}");B("\\larr","\\leftarrow");B("\\lArr","\\Leftarrow");B("\\Larr","\\Leftarrow");B("\\lrarr","\\leftrightarrow");B("\\lrArr","\\Leftrightarrow");B("\\Lrarr","\\Leftrightarrow");B("\\Mu","\\mathrm{M}");B("\\natnums","\\mathbb{N}");B("\\Nu","\\mathrm{N}");B("\\Omicron","\\mathrm{O}");B("\\plusmn","\\pm");B("\\rarr","\\rightarrow");B("\\rArr","\\Rightarrow");B("\\Rarr","\\Rightarrow");B("\\real","\\Re");B("\\reals","\\mathbb{R}");B("\\Reals","\\mathbb{R}");B("\\Rho","\\mathrm{P}");B("\\sdot","\\cdot");B("\\sect","\\S");B("\\spades","\\spadesuit");B("\\sub","\\subset");B("\\sube","\\subseteq");B("\\supe","\\supseteq");B("\\Tau","\\mathrm{T}");B("\\thetasym","\\vartheta");B("\\weierp","\\wp");B("\\Zeta","\\mathrm{Z}");B("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");B("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");B("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");B("\\bra","\\mathinner{\\langle{#1}|}");B("\\ket","\\mathinner{|{#1}\\rangle}");B("\\braket","\\mathinner{\\langle{#1}\\rangle}");B("\\Bra","\\left\\langle#1\\right|");B("\\Ket","\\left|#1\\right\\rangle");var wS=t=>e=>{var n=e.consumeArg().tokens,r=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,o=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var c=d=>f=>{t&&(f.macros.set("|",o),i.length&&f.macros.set("\\|",l));var p=d;if(!d&&i.length){var m=f.future();m.text==="|"&&(f.popToken(),p=!0)}return{tokens:p?i:r,numArgs:0}};e.macros.set("|",c(!1)),i.length&&e.macros.set("\\|",c(!0));var h=e.consumeArg().tokens,u=e.expandTokens([...s,...h,...n]);return e.macros.endGroup(),{tokens:u.reverse(),numArgs:0}};B("\\bra@ket",wS(!1));B("\\bra@set",wS(!0));B("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");B("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");B("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");B("\\angln","{\\angl n}");B("\\blue","\\textcolor{##6495ed}{#1}");B("\\orange","\\textcolor{##ffa500}{#1}");B("\\pink","\\textcolor{##ff00af}{#1}");B("\\red","\\textcolor{##df0030}{#1}");B("\\green","\\textcolor{##28ae7b}{#1}");B("\\gray","\\textcolor{gray}{#1}");B("\\purple","\\textcolor{##9d38bd}{#1}");B("\\blueA","\\textcolor{##ccfaff}{#1}");B("\\blueB","\\textcolor{##80f6ff}{#1}");B("\\blueC","\\textcolor{##63d9ea}{#1}");B("\\blueD","\\textcolor{##11accd}{#1}");B("\\blueE","\\textcolor{##0c7f99}{#1}");B("\\tealA","\\textcolor{##94fff5}{#1}");B("\\tealB","\\textcolor{##26edd5}{#1}");B("\\tealC","\\textcolor{##01d1c1}{#1}");B("\\tealD","\\textcolor{##01a995}{#1}");B("\\tealE","\\textcolor{##208170}{#1}");B("\\greenA","\\textcolor{##b6ffb0}{#1}");B("\\greenB","\\textcolor{##8af281}{#1}");B("\\greenC","\\textcolor{##74cf70}{#1}");B("\\greenD","\\textcolor{##1fab54}{#1}");B("\\greenE","\\textcolor{##0d923f}{#1}");B("\\goldA","\\textcolor{##ffd0a9}{#1}");B("\\goldB","\\textcolor{##ffbb71}{#1}");B("\\goldC","\\textcolor{##ff9c39}{#1}");B("\\goldD","\\textcolor{##e07d10}{#1}");B("\\goldE","\\textcolor{##a75a05}{#1}");B("\\redA","\\textcolor{##fca9a9}{#1}");B("\\redB","\\textcolor{##ff8482}{#1}");B("\\redC","\\textcolor{##f9685d}{#1}");B("\\redD","\\textcolor{##e84d39}{#1}");B("\\redE","\\textcolor{##bc2612}{#1}");B("\\maroonA","\\textcolor{##ffbde0}{#1}");B("\\maroonB","\\textcolor{##ff92c6}{#1}");B("\\maroonC","\\textcolor{##ed5fa6}{#1}");B("\\maroonD","\\textcolor{##ca337c}{#1}");B("\\maroonE","\\textcolor{##9e034e}{#1}");B("\\purpleA","\\textcolor{##ddd7ff}{#1}");B("\\purpleB","\\textcolor{##c6b9fc}{#1}");B("\\purpleC","\\textcolor{##aa87ff}{#1}");B("\\purpleD","\\textcolor{##7854ab}{#1}");B("\\purpleE","\\textcolor{##543b78}{#1}");B("\\mintA","\\textcolor{##f5f9e8}{#1}");B("\\mintB","\\textcolor{##edf2df}{#1}");B("\\mintC","\\textcolor{##e0e5cc}{#1}");B("\\grayA","\\textcolor{##f6f7f7}{#1}");B("\\grayB","\\textcolor{##f0f1f2}{#1}");B("\\grayC","\\textcolor{##e3e5e6}{#1}");B("\\grayD","\\textcolor{##d6d8da}{#1}");B("\\grayE","\\textcolor{##babec2}{#1}");B("\\grayF","\\textcolor{##888d93}{#1}");B("\\grayG","\\textcolor{##626569}{#1}");B("\\grayH","\\textcolor{##3b3e40}{#1}");B("\\grayI","\\textcolor{##21242c}{#1}");B("\\kaBlue","\\textcolor{##314453}{#1}");B("\\kaGreen","\\textcolor{##71B307}{#1}");var _S={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class _B{constructor(e,n,r){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=n,this.expansionCount=0,this.feed(e),this.macros=new xB(wB,n.macros),this.mode=r,this.stack=[]}feed(e){this.lexer=new U2(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var n,r,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;n=this.popToken(),{tokens:i,end:r}=this.consumeArg(["]"])}else({tokens:i,start:n,end:r}=this.consumeArg());return this.pushToken(new _r("EOF",r.loc)),this.pushTokens(i),new _r("",nr.range(n,r))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var n=[],r=e&&e.length>0;r||this.consumeSpaces();var i=this.future(),s,o=0,l=0;do{if(s=this.popToken(),n.push(s),s.text==="{")++o;else if(s.text==="}"){if(--o,o===-1)throw new pe("Extra }",s)}else if(s.text==="EOF")throw new pe("Unexpected end of input in a macro argument, expected '"+(e&&r?e[l]:"}")+"'",s);if(e&&r)if((o===0||o===1&&e[l]==="{")&&s.text===e[l]){if(++l,l===e.length){n.splice(-l,l);break}}else l=0}while(o!==0||r);return i.text==="{"&&n[n.length-1].text==="}"&&(n.pop(),n.shift()),n.reverse(),{tokens:n,start:i,end:s}}consumeArgs(e,n){if(n){if(n.length!==e+1)throw new pe("The length of delimiters doesn't match the number of args!");for(var r=n[0],i=0;i<r.length;i++){var s=this.popToken();if(r[i]!==s.text)throw new pe("Use of the macro doesn't match its definition",s)}}for(var o=[],l=0;l<e;l++)o.push(this.consumeArg(n&&n[l+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new pe("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var n=this.popToken(),r=n.text,i=n.noexpand?null:this._getExpansion(r);if(i==null||e&&i.unexpandable){if(e&&i==null&&r[0]==="\\"&&!this.isDefined(r))throw new pe("Undefined control sequence: "+r);return this.pushToken(n),!1}this.countExpansion(1);var s=i.tokens,o=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var l=s.length-1;l>=0;--l){var c=s[l];if(c.text==="#"){if(l===0)throw new pe("Incomplete placeholder at end of macro body",c);if(c=s[--l],c.text==="#")s.splice(l+1,1);else if(/^[1-9]$/.test(c.text))s.splice(l,2,...o[+c.text-1]);else throw new pe("Not a valid argument number",c)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new _r(e)]):void 0}expandTokens(e){var n=[],r=this.stack.length;for(this.pushTokens(e);this.stack.length>r;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),n.push(i)}return this.countExpansion(n.length),n}expandMacroAsText(e){var n=this.expandMacro(e);return n&&n.map(r=>r.text).join("")}_getExpansion(e){var n=this.macros.get(e);if(n==null)return n;if(e.length===1){var r=this.lexer.catcodes[e];if(r!=null&&r!==13)return}var i=typeof n=="function"?n(this):n;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var o=i.replace(/##/g,"");o.indexOf("#"+(s+1))!==-1;)++s;for(var l=new U2(i,this.settings),c=[],h=l.lex();h.text!=="EOF";)c.push(h),h=l.lex();c.reverse();var u={tokens:c,numArgs:s};return u}return i}isDefined(e){return this.macros.has(e)||Ia.hasOwnProperty(e)||Mt.math.hasOwnProperty(e)||Mt.text.hasOwnProperty(e)||_S.hasOwnProperty(e)}isExpandable(e){var n=this.macros.get(e);return n!=null?typeof n=="string"||typeof n=="function"||!n.unexpandable:Ia.hasOwnProperty(e)&&!Ia[e].primitive}}var G2=/^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/,Qh=Object.freeze({"₊":"+","₋":"-","₌":"=","₍":"(","₎":")","₀":"0","₁":"1","₂":"2","₃":"3","₄":"4","₅":"5","₆":"6","₇":"7","₈":"8","₉":"9","ₐ":"a","ₑ":"e","ₕ":"h","ᵢ":"i","ⱼ":"j","ₖ":"k","ₗ":"l","ₘ":"m","ₙ":"n","ₒ":"o","ₚ":"p","ᵣ":"r","ₛ":"s","ₜ":"t","ᵤ":"u","ᵥ":"v","ₓ":"x","ᵦ":"β","ᵧ":"γ","ᵨ":"ρ","ᵩ":"ϕ","ᵪ":"χ","⁺":"+","⁻":"-","⁼":"=","⁽":"(","⁾":")","⁰":"0","¹":"1","²":"2","³":"3","⁴":"4","⁵":"5","⁶":"6","⁷":"7","⁸":"8","⁹":"9","ᴬ":"A","ᴮ":"B","ᴰ":"D","ᴱ":"E","ᴳ":"G","ᴴ":"H","ᴵ":"I","ᴶ":"J","ᴷ":"K","ᴸ":"L","ᴹ":"M","ᴺ":"N","ᴼ":"O","ᴾ":"P","ᴿ":"R","ᵀ":"T","ᵁ":"U","ⱽ":"V","ᵂ":"W","ᵃ":"a","ᵇ":"b","ᶜ":"c","ᵈ":"d","ᵉ":"e","ᶠ":"f","ᵍ":"g",ʰ:"h","ⁱ":"i",ʲ:"j","ᵏ":"k",ˡ:"l","ᵐ":"m",ⁿ:"n","ᵒ":"o","ᵖ":"p",ʳ:"r",ˢ:"s","ᵗ":"t","ᵘ":"u","ᵛ":"v",ʷ:"w",ˣ:"x",ʸ:"y","ᶻ":"z","ᵝ":"β","ᵞ":"γ","ᵟ":"δ","ᵠ":"ϕ","ᵡ":"χ","ᶿ":"θ"}),U0={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},X2={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"};let vS=class TS{constructor(e,n){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new _B(e,n,this.mode),this.settings=n,this.leftrightDepth=0}expect(e,n){if(n===void 0&&(n=!0),this.fetch().text!==e)throw new pe("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());n&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var n=this.nextToken;this.consume(),this.gullet.pushToken(new _r("}")),this.gullet.pushTokens(e);var r=this.parseExpression(!1);return this.expect("}"),this.nextToken=n,r}parseExpression(e,n){for(var r=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(TS.endOfExpression.indexOf(i.text)!==-1||n&&i.text===n||e&&Ia[i.text]&&Ia[i.text].infix)break;var s=this.parseAtom(n);if(s){if(s.type==="internal")continue}else break;r.push(s)}return this.mode==="text"&&this.formLigatures(r),this.handleInfixNodes(r)}handleInfixNodes(e){for(var n=-1,r,i=0;i<e.length;i++)if(e[i].type==="infix"){if(n!==-1)throw new pe("only one infix operator per group",e[i].token);n=i,r=e[i].replaceWith}if(n!==-1&&r){var s,o,l=e.slice(0,n),c=e.slice(n+1);l.length===1&&l[0].type==="ordgroup"?s=l[0]:s={type:"ordgroup",mode:this.mode,body:l},c.length===1&&c[0].type==="ordgroup"?o=c[0]:o={type:"ordgroup",mode:this.mode,body:c};var h;return r==="\\\\abovefrac"?h=this.callFunction(r,[s,e[n],o],[]):h=this.callFunction(r,[s,o],[]),[h]}else return e}handleSupSubscript(e){var n=this.fetch(),r=n.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new pe("Expected group after '"+r+"'",n);return i}formatUnsupportedCmd(e){for(var n=[],r=0;r<e.length;r++)n.push({type:"textord",mode:"text",text:e[r]});var i={type:"text",mode:this.mode,body:n},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var n=this.parseGroup("atom",e);if(n?.type==="internal"||this.mode==="text")return n;for(var r,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(n&&n.type==="op"){var o=s.text==="\\limits";n.limits=o,n.alwaysHandleSupSub=!0}else if(n&&n.type==="operatorname")n.alwaysHandleSupSub&&(n.limits=s.text==="\\limits");else throw new pe("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(r)throw new pe("Double superscript",s);r=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new pe("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(r)throw new pe("Double superscript",s);var l={type:"textord",mode:this.mode,text:"\\prime"},c=[l];for(this.consume();this.fetch().text==="'";)c.push(l),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),r={type:"ordgroup",mode:this.mode,body:c}}else if(Qh[s.text]){var h=G2.test(s.text),u=[];for(u.push(new _r(Qh[s.text])),this.consume();;){var d=this.fetch().text;if(!Qh[d]||G2.test(d)!==h)break;u.unshift(new _r(Qh[d])),this.consume()}var f=this.subparse(u);h?i={type:"ordgroup",mode:"math",body:f}:r={type:"ordgroup",mode:"math",body:f}}else break}return r||i?{type:"supsub",mode:this.mode,base:n,sup:r,sub:i}:n}parseFunction(e,n){var r=this.fetch(),i=r.text,s=Ia[i];if(!s)return null;if(this.consume(),n&&n!=="atom"&&!s.allowedInArgument)throw new pe("Got function '"+i+"' with no arguments"+(n?" as "+n:""),r);if(this.mode==="text"&&!s.allowedInText)throw new pe("Can't use function '"+i+"' in text mode",r);if(this.mode==="math"&&s.allowedInMath===!1)throw new pe("Can't use function '"+i+"' in math mode",r);var{args:o,optArgs:l}=this.parseArguments(i,s);return this.callFunction(i,o,l,r,e)}callFunction(e,n,r,i,s){var o={funcName:e,parser:this,token:i,breakOnTokenText:s},l=Ia[e];if(l&&l.handler)return l.handler(o,n,r);throw new pe("No function handler for "+e)}parseArguments(e,n){var r=n.numArgs+n.numOptionalArgs;if(r===0)return{args:[],optArgs:[]};for(var i=[],s=[],o=0;o<r;o++){var l=n.argTypes&&n.argTypes[o],c=o<n.numOptionalArgs;(n.primitive&&l==null||n.type==="sqrt"&&o===1&&s[0]==null)&&(l="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",l,c);if(c)s.push(h);else if(h!=null)i.push(h);else throw new pe("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,n,r){switch(n){case"color":return this.parseColorGroup(r);case"size":return this.parseSizeGroup(r);case"url":return this.parseUrlGroup(r);case"math":case"text":return this.parseArgumentGroup(r,n);case"hbox":{var i=this.parseArgumentGroup(r,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",r);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(r)throw new pe("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new pe("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(r);default:throw new pe("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,n){var r=this.gullet.scanArgument(n);if(r==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),r.text=i,r}parseRegexGroup(e,n){for(var r=this.fetch(),i=r,s="",o;(o=this.fetch()).text!=="EOF"&&e.test(s+o.text);)i=o,s+=i.text,this.consume();if(s==="")throw new pe("Invalid "+n+": '"+r.text+"'",r);return r.range(i,s)}parseColorGroup(e){var n=this.parseStringGroup("color",e);if(n==null)return null;var r=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(n.text);if(!r)throw new pe("Invalid color: '"+n.text+"'",n);var i=r[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var n,r=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?n=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):n=this.parseStringGroup("size",e),!n)return null;!e&&n.text.length===0&&(n.text="0pt",r=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(n.text);if(!i)throw new pe("Invalid size: '"+n.text+"'",n);var s={number:+(i[1]+i[2]),unit:i[3]};if(!I6(s))throw new pe("Invalid unit: '"+s.unit+"'",n);return{type:"size",mode:this.mode,value:s,isBlank:r}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var n=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),n==null)return null;var r=n.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:r}}parseArgumentGroup(e,n){var r=this.gullet.scanArgument(e);if(r==null)return null;var i=this.mode;n&&this.switchMode(n),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:r.loc,body:s};return n&&this.switchMode(i),o}parseGroup(e,n){var r=this.fetch(),i=r.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var o=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,o),c=this.fetch();this.expect(o),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:nr.range(r,c),body:l,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(n,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!_S.hasOwnProperty(i)){if(this.settings.throwOnError)throw new pe("Undefined control sequence: "+i,r);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var n=e.length-1,r=0;r<n;++r){var i=e[r],s=i.text;s==="-"&&e[r+1].text==="-"&&(r+1<n&&e[r+2].text==="-"?(e.splice(r,3,{type:"textord",mode:"text",loc:nr.range(i,e[r+2]),text:"---"}),n-=2):(e.splice(r,2,{type:"textord",mode:"text",loc:nr.range(i,e[r+1]),text:"--"}),n-=1)),(s==="'"||s==="`")&&e[r+1].text===s&&(e.splice(r,2,{type:"textord",mode:"text",loc:nr.range(i,e[r+1]),text:s+s}),n-=1)}}parseSymbol(){var e=this.fetch(),n=e.text;if(/^\\verb[^a-zA-Z]/.test(n)){this.consume();var r=n.slice(5),i=r.charAt(0)==="*";if(i&&(r=r.slice(1)),r.length<2||r.charAt(0)!==r.slice(-1))throw new pe(`\\verb assertion failed --
                    please report what input caused this bug`);return r=r.slice(1,-1),{type:"verb",mode:"text",body:r,star:i}}X2.hasOwnProperty(n[0])&&!Mt[this.mode][n[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+n[0]+'" used in math mode',e),n=X2[n[0]]+n.slice(1));var s=bB.exec(n);s&&(n=n.substring(0,s.index),n==="i"?n="ı":n==="j"&&(n="ȷ"));var o;if(Mt[this.mode][n]){this.settings.strict&&this.mode==="math"&&og.indexOf(n)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+n[0]+'" used in math mode',e);var l=Mt[this.mode][n].group,c=nr.range(e),h;if(cD.hasOwnProperty(l)){var u=l;h={type:"atom",mode:this.mode,family:u,loc:c,text:n}}else h={type:l,mode:this.mode,loc:c,text:n};o=h}else if(n.charCodeAt(0)>=128)this.settings.strict&&(C6(n.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+n[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+n[0]+'"'+(" ("+n.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:nr.range(e),text:n};else return null;if(this.consume(),s)for(var d=0;d<s[0].length;d++){var f=s[0][d];if(!U0[f])throw new pe("Unknown accent ' "+f+"'",e);var p=U0[f][this.mode]||U0[f].text;if(!p)throw new pe("Accent "+f+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:nr.range(e),label:p,isStretchy:!1,isShifty:!0,base:o}}return o}};vS.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var gb=function(e,n){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var r=new vS(e,n);delete r.gullet.macros.current["\\df@tag"];var i=r.parse();if(delete r.gullet.macros.current["\\current@color"],delete r.gullet.macros.current["\\color"],r.gullet.macros.get("\\df@tag")){if(!n.displayMode)throw new pe("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:r.subparse([new _r("\\df@tag")])}]}return i},bb=function(e,n,r){n.textContent="";var i=mf(e,r).toNode();n.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),bb=function(){throw new pe("KaTeX doesn't work in quirks mode.")});var kS=function(e,n){var r=mf(e,n).toMarkup();return r},SS=function(e,n){var r=new K1(n);return gb(e,r)},$S=function(e,n,r){if(r.throwOnError||!(e instanceof pe))throw e;var i=ae.makeSpan(["katex-error"],[new Rr(n)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+r.errorColor),i},mf=function(e,n){var r=new K1(n);try{var i=gb(e,r);return MD(i,e,r)}catch(s){return $S(s,e,r)}},ES=function(e,n){var r=new K1(n);try{var i=gb(e,r);return LD(i,e,r)}catch(s){return $S(s,e,r)}},jS="0.16.23",CS={Span:gh,Anchor:tb,SymbolNode:Rr,SvgNode:ha,PathNode:Pa,LineNode:sg},fg={version:jS,render:bb,renderToString:kS,ParseError:pe,SETTINGS_SCHEMA:vc,__parse:SS,__renderToDomTree:mf,__renderToHTMLTree:ES,__setFontMetrics:A6,__defineSymbol:_,__defineFunction:Se,__defineMacro:B,__domTree:CS};const vB=Object.freeze(Object.defineProperty({__proto__:null,ParseError:pe,SETTINGS_SCHEMA:vc,__defineFunction:Se,__defineMacro:B,__defineSymbol:_,__domTree:CS,__parse:SS,__renderToDomTree:mf,__renderToHTMLTree:ES,__setFontMetrics:A6,default:fg,get render(){return bb},renderToString:kS,version:jS},Symbol.toStringTag,{value:"Module"})),TB={};function vi(t){const e=this,n=t||TB,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(EN(n)),s.push(xN()),o.push(wN(n))}const J2=/[#.]/g;function kB(t,e){const n=t||"",r={};let i=0,s,o;for(;i<n.length;){J2.lastIndex=i;const l=J2.exec(n),c=n.slice(i,l?l.index:n.length);c&&(s?s==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:o=c,i+=c.length),l&&(s=l[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function AS(t,e,n){const r=n?jB(n):void 0;function i(s,o,...l){let c;if(s==null){c={type:"root",children:[]};const h=o;l.unshift(h)}else{c=kB(s,e);const h=c.tagName.toLowerCase(),u=r?r.get(h):void 0;if(c.tagName=u||h,SB(o))l.unshift(o);else for(const[d,f]of Object.entries(o))$B(t,c.properties,d,f)}for(const h of l)pg(c.children,h);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function SB(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const s=i;for(const o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function $B(t,e,n,r){const i=P1(t,n);let s;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;s=r}else typeof r=="boolean"?s=r:typeof r=="string"?i.spaceSeparated?s=Nx(r):i.commaSeparated?s=Ix(r):i.commaOrSpaceSeparated?s=Nx(Ix(r).join(" ")):s=Q2(i,i.property,r):Array.isArray(r)?s=[...r]:s=i.property==="style"?EB(r):String(r);if(Array.isArray(s)){const o=[];for(const l of s)o.push(Q2(i,i.property,l));s=o}i.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[i.property]=s}}function pg(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)pg(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?pg(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Q2(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Fc(n)===Fc(e)))return!0}return n}function EB(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function jB(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const CB=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],IS=AS(tf,"div"),MS=AS(Zo,"g",CB),$i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function AB(t,e){return LS(t,{})||{type:"root",children:[]}}function LS(t,e){const n=IB(t,e);return n&&e.afterTransform&&e.afterTransform(t,n),n}function IB(t,e){switch(t.nodeType){case 1:return RB(t,e);case 3:return LB(t);case 8:return OB(t);case 9:return K2(t,e);case 10:return MB();case 11:return K2(t,e);default:return}}function K2(t,e){return{type:"root",children:OS(t,e)}}function MB(){return{type:"doctype"}}function LB(t){return{type:"text",value:t.nodeValue||""}}function OB(t){return{type:"comment",value:t.nodeValue||""}}function RB(t,e){const n=t.namespaceURI,r=n===$i.svg?MS:IS,i=n===$i.html?t.tagName.toLowerCase():t.tagName,s=n===$i.html&&i==="template"?t.content:t,o=t.getAttributeNames(),l={};let c=-1;for(;++c<o.length;)l[o[c]]=t.getAttribute(o[c])||"";return r(i,l,OS(s,e))}function OS(t,e){const n=t.childNodes,r=[];let i=-1;for(;++i<n.length;){const s=LS(n[i],e);s!==void 0&&r.push(s)}return r}new DOMParser;function NB(t,e){const n=DB(t);return AB(n)}function DB(t){const e=document.createElement("template");return e.innerHTML=t,e.content}const Z2=function(t,e,n){const r=fh(n);if(!t||!t.type||!t.children)throw new Error("Expected parent node");if(typeof e=="number"){if(e<0||e===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if(e=t.children.indexOf(e),e<0)throw new Error("Expected child node or index");for(;++e<t.children.length;)if(r(t.children[e],e,t))return t.children[e]},Ws=function(t){if(t==null)return FB;if(typeof t=="string")return PB(t);if(typeof t=="object")return BB(t);if(typeof t=="function")return yb(t);throw new Error("Expected function, string, or array as `test`")};function BB(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Ws(t[n]);return yb(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function PB(t){return yb(e);function e(n){return n.tagName===t}}function yb(t){return e;function e(n,r,i){return!!(HB(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function FB(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function HB(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const ew=/\n/g,tw=/[\t ]+/g,mg=Ws("br"),nw=Ws(XB),zB=Ws("p"),rw=Ws("tr"),qB=Ws(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",GB,JB]),RS=Ws(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function WB(t,e){const n=e||{},r="children"in t?t.children:[],i=RS(t),s=BS(t,{whitespace:n.whitespace||"normal"}),o=[];(t.type==="text"||t.type==="comment")&&o.push(...DS(t,{breakBefore:!0,breakAfter:!0}));let l=-1;for(;++l<r.length;)o.push(...NS(r[l],t,{whitespace:s,breakBefore:l?void 0:i,breakAfter:l<r.length-1?mg(r[l+1]):i}));const c=[];let h;for(l=-1;++l<o.length;){const u=o[l];typeof u=="number"?h!==void 0&&u>h&&(h=u):u&&(h!==void 0&&h>-1&&c.push(`
`.repeat(h)||" "),h=-1,c.push(u))}return c.join("")}function NS(t,e,n){return t.type==="element"?UB(t,e,n):t.type==="text"?n.whitespace==="normal"?DS(t,n):VB(t):[]}function UB(t,e,n){const r=BS(t,n),i=t.children||[];let s=-1,o=[];if(qB(t))return o;let l,c;for(mg(t)||rw(t)&&Z2(e,t,rw)?c=`
`:zB(t)?(l=2,c=2):RS(t)&&(l=1,c=1);++s<i.length;)o=o.concat(NS(i[s],t,{whitespace:r,breakBefore:s?void 0:l,breakAfter:s<i.length-1?mg(i[s+1]):c}));return nw(t)&&Z2(e,t,nw)&&o.push("	"),l&&o.unshift(l),c&&o.push(c),o}function DS(t,e){const n=String(t.value),r=[],i=[];let s=0;for(;s<=n.length;){ew.lastIndex=s;const c=ew.exec(n),h=c&&"index"in c?c.index:n.length;r.push(YB(n.slice(s,h).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),s===0?e.breakBefore:!0,h===n.length?e.breakAfter:!0)),s=h+1}let o=-1,l;for(;++o<r.length;)r[o].charCodeAt(r[o].length-1)===8203||o<r.length-1&&r[o+1].charCodeAt(0)===8203?(i.push(r[o]),l=void 0):r[o]?(typeof l=="number"&&i.push(l),i.push(r[o]),l=0):(o===0||o===r.length-1)&&i.push(0);return i}function VB(t){return[String(t.value)]}function YB(t,e,n){const r=[];let i=0,s;for(;i<t.length;){tw.lastIndex=i;const o=tw.exec(t);s=o?o.index:t.length,!i&&!s&&o&&!e&&r.push(""),i!==s&&r.push(t.slice(i,s)),i=o?s+o[0].length:s}return i!==s&&!n&&r.push(""),r.join(" ")}function BS(t,e){if(t.type==="element"){const n=t.properties||{};switch(t.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":e.whitespace;case"textarea":return"pre-wrap"}}return e.whitespace}function GB(t){return!!(t.properties||{}).hidden}function XB(t){return t.tagName==="td"||t.tagName==="th"}function JB(t){return t.tagName==="dialog"&&!(t.properties||{}).open}const QB={},KB=[];function Ti(t){const e=t||QB;return function(n,r){J1(n,"element",function(i,s){const o=Array.isArray(i.properties.className)?i.properties.className:KB,l=o.includes("language-math"),c=o.includes("math-display"),h=o.includes("math-inline");let u=c;if(!l&&!c&&!h)return;let d=s[s.length-1],f=i;if(i.tagName==="code"&&l&&d&&d.type==="element"&&d.tagName==="pre"&&(f=d,d=s[s.length-2],u=!0),!d)return;const p=WB(f,{whitespace:"pre"});let m;try{m=fg.renderToString(p,{...e,displayMode:u,throwOnError:!0})}catch(b){const y=b,w=y.name.toLowerCase();r.message("Could not render math with KaTeX",{ancestors:[...s,i],cause:y,place:i.position,ruleId:w,source:"rehype-katex"});try{m=fg.renderToString(p,{...e,displayMode:u,strict:"ignore",throwOnError:!1})}catch{m=[{type:"element",tagName:"span",properties:{className:["katex-error"],style:"color:"+(e.errorColor||"#cc0000"),title:String(b)},children:[{type:"text",value:p}]}]}}typeof m=="string"&&(m=NB(m).children);const g=d.children.indexOf(f);return d.children.splice(g,1,...m),S6})}}function iw(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function ZB(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function eP(t,e,n){const i=fh((n||{}).ignore||[]),s=tP(e);let o=-1;for(;++o<s.length;)J1(t,"text",l);function l(h,u){let d=-1,f;for(;++d<u.length;){const p=u[d],m=f?f.children:void 0;if(i(p,m?m.indexOf(p):void 0,f))return;f=p}if(f)return c(h,u)}function c(h,u){const d=u[u.length-1],f=s[o][0],p=s[o][1];let m=0;const b=d.children.indexOf(h);let y=!1,w=[];f.lastIndex=0;let S=f.exec(h.value);for(;S;){const E=S.index,T={index:S.index,input:S.input,stack:[...u,h]};let C=p(...S,T);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?f.lastIndex=E+1:(m!==E&&w.push({type:"text",value:h.value.slice(m,E)}),Array.isArray(C)?w.push(...C):C&&w.push(C),m=E+S[0].length,y=!0),!f.global)break;S=f.exec(h.value)}return y?(m<h.value.length&&w.push({type:"text",value:h.value.slice(m)}),d.children.splice(b,1,...w)):w=[h],b+w.length}}function tP(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([nP(i[0]),rP(i[1])])}return e}function nP(t){return typeof t=="string"?new RegExp(ZB(t),"g"):t}function rP(t){return typeof t=="function"?t:function(){return t}}const V0="phrasing",Y0=["autolink","link","image","label"];function iP(){return{transforms:[uP],enter:{literalAutolink:sP,literalAutolinkEmail:G0,literalAutolinkHttp:G0,literalAutolinkWww:G0},exit:{literalAutolink:hP,literalAutolinkEmail:cP,literalAutolinkHttp:oP,literalAutolinkWww:lP}}}function aP(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:V0,notInConstruct:Y0},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:V0,notInConstruct:Y0},{character:":",before:"[ps]",after:"\\/",inConstruct:V0,notInConstruct:Y0}]}}function sP(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function G0(t){this.config.enter.autolinkProtocol.call(this,t)}function oP(t){this.config.exit.autolinkProtocol.call(this,t)}function lP(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function cP(t){this.config.exit.autolinkEmail.call(this,t)}function hP(t){this.exit(t)}function uP(t){eP(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,dP],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),fP]],{ignore:["link","linkReference"]})}function dP(t,e,n,r,i){let s="";if(!PS(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!pP(n)))return!1;const o=mP(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function fP(t,e,n,r){return!PS(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function pP(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function mP(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=iw(t,"(");let s=iw(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function PS(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||Is(n)||rf(n))&&(!e||n!==47)}FS.peek=kP;function gP(){this.buffer()}function bP(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function yP(){this.buffer()}function xP(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function wP(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ti(this.sliceSerialize(t)).toLowerCase(),n.label=e}function _P(t){this.exit(t)}function vP(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ti(this.sliceSerialize(t)).toLowerCase(),n.label=e}function TP(t){this.exit(t)}function kP(){return"["}function FS(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=i.move("]"),s}function SP(){return{enter:{gfmFootnoteCallString:gP,gfmFootnoteCall:bP,gfmFootnoteDefinitionLabelString:yP,gfmFootnoteDefinition:xP},exit:{gfmFootnoteCallString:wP,gfmFootnoteCall:_P,gfmFootnoteDefinitionLabelString:vP,gfmFootnoteDefinition:TP}}}function $P(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:FS},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const l=s.createTracker(o);let c=l.move("[^");const h=s.enter("footnoteDefinition"),u=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),u(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),e?HS:EP))),h(),c}}function EP(t,e,n){return e===0?t:HS(t,e,n)}function HS(t,e,n){return(n?"":"    ")+t}const jP=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];zS.peek=LP;function CP(){return{canContainEols:["delete"],enter:{strikethrough:IP},exit:{strikethrough:MP}}}function AP(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:jP}],handlers:{delete:zS}}}function IP(t){this.enter({type:"delete",children:[]},t)}function MP(t){this.exit(t)}function zS(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function LP(){return"~"}function OP(t){return t.length}function RP(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||OP,s=[],o=[],l=[],c=[];let h=0,u=-1;for(;++u<t.length;){const g=[],b=[];let y=-1;for(t[u].length>h&&(h=t[u].length);++y<t[u].length;){const w=NP(t[u][y]);if(n.alignDelimiters!==!1){const S=i(w);b[y]=S,(c[y]===void 0||S>c[y])&&(c[y]=S)}g.push(w)}o[u]=g,l[u]=b}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<h;)s[d]=aw(r[d]);else{const g=aw(r);for(;++d<h;)s[d]=g}d=-1;const f=[],p=[];for(;++d<h;){const g=s[d];let b="",y="";g===99?(b=":",y=":"):g===108?b=":":g===114&&(y=":");let w=n.alignDelimiters===!1?1:Math.max(1,c[d]-b.length-y.length);const S=b+"-".repeat(w)+y;n.alignDelimiters!==!1&&(w=b.length+w+y.length,w>c[d]&&(c[d]=w),p[d]=w),f[d]=S}o.splice(1,0,f),l.splice(1,0,p),u=-1;const m=[];for(;++u<o.length;){const g=o[u],b=l[u];d=-1;const y=[];for(;++d<h;){const w=g[d]||"";let S="",E="";if(n.alignDelimiters!==!1){const T=c[d]-(b[d]||0),C=s[d];C===114?S=" ".repeat(T):C===99?T%2?(S=" ".repeat(T/2+.5),E=" ".repeat(T/2-.5)):(S=" ".repeat(T/2),E=S):E=" ".repeat(T)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(S),y.push(w),n.alignDelimiters!==!1&&y.push(E),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==h-1)&&y.push("|")}m.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return m.join(`
`)}function NP(t){return t==null?"":String(t)}function aw(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const sw={}.hasOwnProperty;function qS(t,e){const n=e||{};function r(i,...s){let o=r.invalid;const l=r.handlers;if(i&&sw.call(i,t)){const c=String(i[t]);o=sw.call(l,c)?l[c]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function DP(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),BP);return i(),o}function BP(t,e,n){return">"+(n?"":" ")+t}function PP(t,e){return ow(t,e.inConstruct,!0)&&!ow(t,e.notInConstruct,!1)}function ow(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function lw(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&PP(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function FP(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function HP(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function zP(t,e,n,r){const i=HP(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(FP(t,n)){const d=n.enter("codeIndented"),f=n.indentLines(s,qP);return d(),f}const l=n.createTracker(r),c=i.repeat(Math.max(E6(s,i)+1,3)),h=n.enter("codeFenced");let u=l.move(c);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=l.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...l.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...l.current()})),d()}return u+=l.move(`
`),s&&(u+=l.move(s+`
`)),u+=l.move(c),h(),u}function qP(t,e,n){return(n?"":"    ")+t}function xb(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function WP(t,e,n,r){const i=xb(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let h=c.move("[");return h+=c.move(n.safe(n.associationId(t),{before:h,after:"]",...c.current()})),h+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),l()),o(),h}function UP(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Wc(t){return"&#x"+t.toString(16).toUpperCase()+";"}function id(t,e,n){const r=Lo(t),i=Lo(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}WS.peek=VP;function WS(t,e,n,r){const i=UP(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const h=c.charCodeAt(0),u=id(r.before.charCodeAt(r.before.length-1),h,i);u.inside&&(c=Wc(h)+c.slice(1));const d=c.charCodeAt(c.length-1),f=id(r.after.charCodeAt(0),d,i);f.inside&&(c=c.slice(0,-1)+Wc(d));const p=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+c+p}function VP(t,e,n){return n.options.emphasis||"*"}function YP(t,e){let n=!1;return lf(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,eg}),!!((!t.depth||t.depth<3)&&q1(t)&&(e.options.setext||n))}function GP(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(YP(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),u(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=Wc(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),c(),l(),h}US.peek=XP;function US(t){return t.value||""}function XP(){return"<"}VS.peek=JP;function VS(t,e,n,r){const i=xb(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let h=c.move("![");return h+=c.move(n.safe(t.alt,{before:h,after:"]",...c.current()})),h+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),h+=c.move(" "+i),h+=c.move(n.safe(t.title,{before:h,after:i,...c.current()})),h+=c.move(i),l()),h+=c.move(")"),o(),h}function JP(){return"!"}YS.peek=QP;function YS(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const h=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!h||h!==d?c+=l.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function QP(){return"!"}GS.peek=KP;function GS(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let h=c.index;r.charCodeAt(h)===10&&r.charCodeAt(h-1)===13&&h--,r=r.slice(0,h)+" "+r.slice(c.index+1)}}return i+r+i}function KP(){return"`"}function XS(t,e){const n=q1(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}JS.peek=ZP;function JS(t,e,n,r){const i=xb(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(XS(t,n)){const u=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=u,d}l=n.enter("link"),c=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(c=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=o.move(" "+i),h+=o.move(n.safe(t.title,{before:h,after:i,...o.current()})),h+=o.move(i),c()),h+=o.move(")"),l(),h}function ZP(t,e,n){return XS(t,n)?"<":"["}QS.peek=eF;function QS(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const h=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=u,s(),i==="full"||!h||h!==d?c+=l.move(d+"]"):i==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function eF(){return"["}function wb(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function tF(t){const e=wb(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function nF(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function KS(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function rF(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?nF(n):wb(n);const l=t.ordered?o==="."?")":".":tF(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),KS(n)===o&&u){let d=-1;for(;++d<t.children.length;){const f=t.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const h=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),h}function iF(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function aF(t,e,n,r){const i=iF(n);let s=n.bulletCurrent||wb(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,l.current()),u);return c(),h;function u(d,f,p){return f?(p?"":" ".repeat(o))+d:(p?s:s+" ".repeat(o-s.length))+d}}function sF(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const oF=fh(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function lF(t,e,n,r){return(t.children.some(function(o){return oF(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function cF(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}ZS.peek=hF;function ZS(t,e,n,r){const i=cF(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(i+i);let c=o.move(n.containerPhrasing(t,{after:i,before:l,...o.current()}));const h=c.charCodeAt(0),u=id(r.before.charCodeAt(r.before.length-1),h,i);u.inside&&(c=Wc(h)+c.slice(1));const d=c.charCodeAt(c.length-1),f=id(r.after.charCodeAt(0),d,i);f.inside&&(c=c.slice(0,-1)+Wc(d));const p=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:u.outside},l+c+p}function hF(t,e,n){return n.options.strong||"*"}function uF(t,e,n,r){return n.safe(t.value,r)}function dF(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function fF(t,e,n){const r=(KS(n)+(n.options.ruleSpaces?" ":"")).repeat(dF(n));return n.options.ruleSpaces?r.slice(0,-1):r}const e$={blockquote:DP,break:lw,code:zP,definition:WP,emphasis:WS,hardBreak:lw,heading:GP,html:US,image:VS,imageReference:YS,inlineCode:GS,link:JS,linkReference:QS,list:rF,listItem:aF,paragraph:sF,root:lF,strong:ZS,text:uF,thematicBreak:fF};function pF(){return{enter:{table:mF,tableData:cw,tableHeader:cw,tableRow:bF},exit:{codeText:yF,table:gF,tableData:X0,tableHeader:X0,tableRow:X0}}}function mF(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function gF(t){this.exit(t),this.data.inTable=void 0}function bF(t){this.enter({type:"tableRow",children:[]},t)}function X0(t){this.exit(t)}function cw(t){this.enter({type:"tableCell",children:[]},t)}function yF(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,xF));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function xF(t,e){return e==="|"?e:t}function wF(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:c,tableRow:l}};function o(p,m,g,b){return h(u(p,g,b),p.align)}function l(p,m,g,b){const y=d(p,g,b),w=h([y]);return w.slice(0,w.indexOf(`
`))}function c(p,m,g,b){const y=g.enter("tableCell"),w=g.enter("phrasing"),S=g.containerPhrasing(p,{...b,before:s,after:s});return w(),y(),S}function h(p,m){return RP(p,{align:m,alignDelimiters:r,padding:n,stringLength:i})}function u(p,m,g){const b=p.children;let y=-1;const w=[],S=m.enter("table");for(;++y<b.length;)w[y]=d(b[y],m,g);return S(),w}function d(p,m,g){const b=p.children;let y=-1;const w=[],S=m.enter("tableRow");for(;++y<b.length;)w[y]=c(b[y],p,m,g);return S(),w}function f(p,m,g){let b=e$.inlineCode(p,m,g);return g.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function _F(){return{exit:{taskListCheckValueChecked:hw,taskListCheckValueUnchecked:hw,paragraph:TF}}}function vF(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:kF}}}function hw(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function TF(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const l=i[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function kF(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=e$.listItem(t,e,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),c;function h(u){return u+o}}function SF(){return[iP(),SP(),CP(),pF(),_F()]}function $F(t){return{extensions:[aP(),$P(t),AP(),wF(t),vF()]}}const EF={tokenize:LF,partial:!0},t$={tokenize:OF,partial:!0},n$={tokenize:RF,partial:!0},r$={tokenize:NF,partial:!0},jF={tokenize:DF,partial:!0},i$={name:"wwwAutolink",tokenize:IF,previous:s$},a$={name:"protocolAutolink",tokenize:MF,previous:o$},ya={name:"emailAutolink",tokenize:AF,previous:l$},Oi={};function CF(){return{text:Oi}}let ns=48;for(;ns<123;)Oi[ns]=ya,ns++,ns===58?ns=65:ns===91&&(ns=97);Oi[43]=ya;Oi[45]=ya;Oi[46]=ya;Oi[95]=ya;Oi[72]=[ya,a$];Oi[104]=[ya,a$];Oi[87]=[ya,i$];Oi[119]=[ya,i$];function AF(t,e,n){const r=this;let i,s;return o;function o(d){return!gg(d)||!l$.call(r,r.previous)||_b(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(d))}function l(d){return gg(d)?(t.consume(d),l):d===64?(t.consume(d),c):n(d)}function c(d){return d===46?t.check(jF,u,h)(d):d===45||d===95||En(d)?(s=!0,t.consume(d),c):u(d)}function h(d){return t.consume(d),i=!0,c}function u(d){return s&&i&&Pn(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function IF(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!s$.call(r,r.previous)||_b(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(EF,t.attempt(t$,t.attempt(n$,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function MF(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&o$.call(r,r.previous)&&!_b(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),l):n(d)}function l(d){if(Pn(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),l;if(d===58){const f=i.toLowerCase();if(f==="http"||f==="https")return t.consume(d),c}return n(d)}function c(d){return d===47?(t.consume(d),s?h:(s=!0,c)):n(d)}function h(d){return d===null||Qu(d)||St(d)||Is(d)||rf(d)?n(d):t.attempt(t$,t.attempt(n$,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function LF(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function OF(t,e,n){let r,i,s;return o;function o(h){return h===46||h===95?t.check(r$,c,l)(h):h===null||St(h)||Is(h)||h!==45&&rf(h)?c(h):(s=!0,t.consume(h),o)}function l(h){return h===95?r=!0:(i=r,r=void 0),t.consume(h),o}function c(h){return i||r||!s?n(h):e(h)}}function RF(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(r$,e,s)(o):o===null||St(o)||Is(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function NF(t,e,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),r):l===38?(t.consume(l),s):l===93?(t.consume(l),i):l===60||l===null||St(l)||Is(l)?e(l):n(l)}function i(l){return l===null||l===40||l===91||St(l)||Is(l)?e(l):r(l)}function s(l){return Pn(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),r):Pn(l)?(t.consume(l),o):n(l)}}function DF(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return En(s)?n(s):e(s)}}function s$(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||St(t)}function o$(t){return!Pn(t)}function l$(t){return!(t===47||gg(t))}function gg(t){return t===43||t===45||t===46||t===95||En(t)}function _b(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const BF={tokenize:VF,partial:!0};function PF(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:qF,continuation:{tokenize:WF},exit:UF}},text:{91:{name:"gfmFootnoteCall",tokenize:zF},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:FF,resolveTo:HF}}}}function FF(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const c=r.events[i][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const h=ti(r.sliceSerialize({start:o.end,end:r.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function HF(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...l),t}function zF(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(d){if(s>999||d===93&&!o||d===null||d===91||St(d))return n(d);if(d===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return i.includes(ti(r.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return St(d)||(o=!0),s++,t.consume(d),d===92?u:h}function u(d){return d===91||d===92||d===93?(t.consume(d),s++,h):h(d)}}function qF(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(m){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(m){return m===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(m)}function u(m){if(o>999||m===93&&!l||m===null||m===91||St(m))return n(m);if(m===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=ti(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(m),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return St(m)||(l=!0),o++,t.consume(m),m===92?d:u}function d(m){return m===91||m===92||m===93?(t.consume(m),o++,u):u(m)}function f(m){return m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),i.includes(s)||i.push(s),at(t,p,"gfmFootnoteDefinitionWhitespace")):n(m)}function p(m){return e(m)}}function WF(t,e,n){return t.check(dh,e,t.attempt(BF,e,n))}function UF(t){t.exit("gfmFootnoteDefinition")}function VF(t,e,n){const r=this;return at(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function YF(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let h=c;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[c][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[c][1].start)},f=[["enter",u,l],["enter",o[h][1],l],["exit",o[h][1],l],["enter",d,l]],p=l.parser.constructs.insideSpan.null;p&&wr(f,f.length,0,af(p,o.slice(h+1,c),l)),wr(f,f.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",u,l]]),wr(o,h-1,c-h+3,f),c=h+f.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const h=this.previous,u=this.events;let d=0;return f;function f(m){return h===126&&u[u.length-1][1].type!=="characterEscape"?c(m):(o.enter("strikethroughSequenceTemporary"),p(m))}function p(m){const g=Lo(h);if(m===126)return d>1?c(m):(o.consume(m),d++,p);if(d<2&&!n)return c(m);const b=o.exit("strikethroughSequenceTemporary"),y=Lo(m);return b._open=!y||y===2&&!!g,b._close=!g||g===2&&!!y,l(m)}}}class GF{constructor(){this.map=[]}add(e,n,r){XF(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function XF(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function JF(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function QF(){return{flow:{null:{name:"table",tokenize:KF,resolveAll:ZF}}}}function KF(t,e,n){const r=this;let i=0,s=0,o;return l;function l($){let L=r.events.length-1;for(;L>-1;){const A=r.events[L][1].type;if(A==="lineEnding"||A==="linePrefix")L--;else break}const q=L>-1?r.events[L][1].type:null,P=q==="tableHead"||q==="tableRow"?C:c;return P===C&&r.parser.lazy[r.now().line]?n($):P($)}function c($){return t.enter("tableHead"),t.enter("tableRow"),h($)}function h($){return $===124||(o=!0,s+=1),u($)}function u($){return $===null?n($):Ne($)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),p):n($):ct($)?at(t,u,"whitespace")($):(s+=1,o&&(o=!1,i+=1),$===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d($)))}function d($){return $===null||$===124||St($)?(t.exit("data"),u($)):(t.consume($),$===92?f:d)}function f($){return $===92||$===124?(t.consume($),d):d($)}function p($){return r.interrupt=!1,r.parser.lazy[r.now().line]?n($):(t.enter("tableDelimiterRow"),o=!1,ct($)?at(t,m,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):m($))}function m($){return $===45||$===58?b($):$===124?(o=!0,t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),g):T($)}function g($){return ct($)?at(t,b,"whitespace")($):b($)}function b($){return $===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),y):$===45?(s+=1,y($)):$===null||Ne($)?E($):T($)}function y($){return $===45?(t.enter("tableDelimiterFiller"),w($)):T($)}function w($){return $===45?(t.consume($),w):$===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume($),t.exit("tableDelimiterMarker"),S):(t.exit("tableDelimiterFiller"),S($))}function S($){return ct($)?at(t,E,"whitespace")($):E($)}function E($){return $===124?m($):$===null||Ne($)?!o||i!==s?T($):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e($)):T($)}function T($){return n($)}function C($){return t.enter("tableRow"),M($)}function M($){return $===124?(t.enter("tableCellDivider"),t.consume($),t.exit("tableCellDivider"),M):$===null||Ne($)?(t.exit("tableRow"),e($)):ct($)?at(t,M,"whitespace")($):(t.enter("data"),R($))}function R($){return $===null||$===124||St($)?(t.exit("data"),M($)):(t.consume($),$===92?D:R)}function D($){return $===92||$===124?(t.consume($),R):R($)}}function ZF(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,h,u,d;const f=new GF;for(;++n<t.length;){const p=t[n],m=p[1];p[0]==="enter"?m.type==="tableHead"?(l=!1,c!==0&&(uw(f,e,c,h,u),u=void 0,c=0),h={type:"table",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",h,e]])):m.type==="tableRow"||m.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},m.start),end:Object.assign({},m.end)},f.add(n,0,[["enter",u,e]])),i=m.type==="tableDelimiterRow"?2:u?3:1):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Kh(f,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):m.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Kh(f,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):m.type==="tableHead"?(l=!0,c=n):m.type==="tableRow"||m.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Kh(f,e,s,i,n,d)):o[1]!==0&&(d=Kh(f,e,o,i,n,d)),i=0):i&&(m.type==="data"||m.type==="tableDelimiterMarker"||m.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&uw(f,e,c,h,u),f.consume(e.events),n=-1;++n<e.events.length;){const p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=JF(e.events,n))}return t}function Kh(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},uo(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=uo(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const h=uo(e.events,n[2]),u=uo(e.events,n[3]),d={type:l,start:Object.assign({},h),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const f=e.events[n[2]],p=e.events[n[3]];if(f[1].end=Object.assign({},p[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const m=n[2]+1,g=n[3]-n[2]-1;t.add(m,g,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},uo(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function uw(t,e,n,r,i){const s=[],o=uo(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function uo(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const eH={name:"tasklistCheck",tokenize:nH};function tH(){return{text:{91:eH}}}function nH(t,e,n){const r=this;return i;function i(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return St(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Ne(c)?e(c):ct(c)?t.check({tokenize:rH},e,n)(c):n(c)}}function rH(t,e,n){return at(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function iH(t){return s6([CF(),PF(),YF(t),QF(),tH()])}const aH={};function sH(t){const e=this,n=t||aH,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(iH(n)),s.push(SF()),o.push($F(n))}function oH(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=e.length){let o=0;for(;;){let l=n[o];if(l===void 0){const c=dw(e,n[o-1]);l=c===-1?e.length+1:c+1,n[o]=l}if(l>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const l=n[n.length-1],c=dw(e,l),h=c===-1?e.length+1:c+1;if(l===h)break;n.push(h)}const o=(s.line>1?n[s.line-2]:0)+s.column-1;if(o<n[s.line-1])return o}}}function dw(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const c$={}.hasOwnProperty,lH=Object.prototype;function cH(t,e){const n=e||{};return vb({file:n.file||void 0,location:!1,schema:n.space==="svg"?Zo:tf,verbose:n.verbose||!1},t)}function vb(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},Iu(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:h$(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const s=String(t.file),o=oH(s),l=o.toPoint(0),c=o.toPoint(s.length);n.position={start:l,end:c}}return n}case"#documentType":{const r=e;return n={type:"doctype"},Iu(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},Iu(t,r,n),n}default:return n=hH(t,e),n}}function h$(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=vb(t,e[n]);r.push(i)}return r}function hH(t,e){const n=t.schema;t.schema=e.namespaceURI===$i.svg?Zo:tf;let r=-1;const i={};for(;++r<e.attrs.length;){const l=e.attrs[r],c=(l.prefix?l.prefix+":":"")+l.name;c$.call(lH,c)||(i[c]=l.value)}const o=(t.schema.space==="svg"?MS:IS)(e.tagName,i,h$(t,e.childNodes));if(Iu(t,e,o),o.tagName==="template"){const l=e,c=l.sourceCodeLocation,h=c&&c.startTag&&mo(c.startTag),u=c&&c.endTag&&mo(c.endTag),d=vb(t,l.content);h&&u&&t.file&&(d.position={start:h.end,end:u.start}),o.content=d}return t.schema=n,o}function Iu(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=uH(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function uH(t,e,n){const r=mo(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)c$.call(n.attrs,o)&&(s[P1(t.schema,o).property]=mo(n.attrs[o]));n.startTag;const l=mo(n.startTag),c=n.endTag?mo(n.endTag):void 0,h={opening:l};c&&(h.closing=c),h.properties=s,e.data={position:h}}}return r}function mo(t){const e=fw({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=fw({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function fw(t){return t.line&&t.column?t:void 0}class yh{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}yh.prototype.property={};yh.prototype.normal={};yh.prototype.space=null;function u$(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new yh(n,r,e)}function bg(t){return t.toLowerCase()}class Fr{constructor(e,n){this.property=e,this.attribute=n}}Fr.prototype.space=null;Fr.prototype.boolean=!1;Fr.prototype.booleanish=!1;Fr.prototype.overloadedBoolean=!1;Fr.prototype.number=!1;Fr.prototype.commaSeparated=!1;Fr.prototype.spaceSeparated=!1;Fr.prototype.commaOrSpaceSeparated=!1;Fr.prototype.mustUseProperty=!1;Fr.prototype.defined=!1;let dH=0;const Ke=Us(),Qt=Us(),d$=Us(),ge=Us(),At=Us(),xo=Us(),br=Us();function Us(){return 2**++dH}const yg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ke,booleanish:Qt,commaOrSpaceSeparated:br,commaSeparated:xo,number:ge,overloadedBoolean:d$,spaceSeparated:At},Symbol.toStringTag,{value:"Module"})),J0=Object.keys(yg);class Tb extends Fr{constructor(e,n,r,i){let s=-1;if(super(e,n),pw(this,"space",i),typeof r=="number")for(;++s<J0.length;){const o=J0[s];pw(this,J0[s],(r&yg[o])===yg[o])}}}Tb.prototype.defined=!0;function pw(t,e,n){n&&(t[e]=n)}const fH={}.hasOwnProperty;function rl(t){const e={},n={};let r;for(r in t.properties)if(fH.call(t.properties,r)){const i=t.properties[r],s=new Tb(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[bg(r)]=r,n[bg(s.attribute)]=r}return new yh(e,n,t.space)}const f$=rl({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),p$=rl({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function m$(t,e){return e in t?t[e]:e}function g$(t,e){return m$(t,e.toLowerCase())}const b$=rl({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:g$,properties:{xmlns:null,xmlnsXLink:null}}),y$=rl({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Qt,ariaAutoComplete:null,ariaBusy:Qt,ariaChecked:Qt,ariaColCount:ge,ariaColIndex:ge,ariaColSpan:ge,ariaControls:At,ariaCurrent:null,ariaDescribedBy:At,ariaDetails:null,ariaDisabled:Qt,ariaDropEffect:At,ariaErrorMessage:null,ariaExpanded:Qt,ariaFlowTo:At,ariaGrabbed:Qt,ariaHasPopup:null,ariaHidden:Qt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:At,ariaLevel:ge,ariaLive:null,ariaModal:Qt,ariaMultiLine:Qt,ariaMultiSelectable:Qt,ariaOrientation:null,ariaOwns:At,ariaPlaceholder:null,ariaPosInSet:ge,ariaPressed:Qt,ariaReadOnly:Qt,ariaRelevant:null,ariaRequired:Qt,ariaRoleDescription:At,ariaRowCount:ge,ariaRowIndex:ge,ariaRowSpan:ge,ariaSelected:Qt,ariaSetSize:ge,ariaSort:null,ariaValueMax:ge,ariaValueMin:ge,ariaValueNow:ge,ariaValueText:null,role:null}}),pH=rl({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:g$,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xo,acceptCharset:At,accessKey:At,action:null,allow:null,allowFullScreen:Ke,allowPaymentRequest:Ke,allowUserMedia:Ke,alt:null,as:null,async:Ke,autoCapitalize:null,autoComplete:At,autoFocus:Ke,autoPlay:Ke,blocking:At,capture:null,charSet:null,checked:Ke,cite:null,className:At,cols:ge,colSpan:null,content:null,contentEditable:Qt,controls:Ke,controlsList:At,coords:ge|xo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ke,defer:Ke,dir:null,dirName:null,disabled:Ke,download:d$,draggable:Qt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ke,formTarget:null,headers:At,height:ge,hidden:Ke,high:ge,href:null,hrefLang:null,htmlFor:At,httpEquiv:At,id:null,imageSizes:null,imageSrcSet:null,inert:Ke,inputMode:null,integrity:null,is:null,isMap:Ke,itemId:null,itemProp:At,itemRef:At,itemScope:Ke,itemType:At,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ke,low:ge,manifest:null,max:null,maxLength:ge,media:null,method:null,min:null,minLength:ge,multiple:Ke,muted:Ke,name:null,nonce:null,noModule:Ke,noValidate:Ke,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ke,optimum:ge,pattern:null,ping:At,placeholder:null,playsInline:Ke,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ke,referrerPolicy:null,rel:At,required:Ke,reversed:Ke,rows:ge,rowSpan:ge,sandbox:At,scope:null,scoped:Ke,seamless:Ke,selected:Ke,shadowRootClonable:Ke,shadowRootDelegatesFocus:Ke,shadowRootMode:null,shape:null,size:ge,sizes:null,slot:null,span:ge,spellCheck:Qt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ge,step:null,style:null,tabIndex:ge,target:null,title:null,translate:null,type:null,typeMustMatch:Ke,useMap:null,value:Qt,width:ge,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:At,axis:null,background:null,bgColor:null,border:ge,borderColor:null,bottomMargin:ge,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ke,declare:Ke,event:null,face:null,frame:null,frameBorder:null,hSpace:ge,leftMargin:ge,link:null,longDesc:null,lowSrc:null,marginHeight:ge,marginWidth:ge,noResize:Ke,noHref:Ke,noShade:Ke,noWrap:Ke,object:null,profile:null,prompt:null,rev:null,rightMargin:ge,rules:null,scheme:null,scrolling:Qt,standby:null,summary:null,text:null,topMargin:ge,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ge,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ke,disableRemotePlayback:Ke,prefix:null,property:null,results:ge,security:null,unselectable:null}}),mH=rl({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:m$,properties:{about:br,accentHeight:ge,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ge,amplitude:ge,arabicForm:null,ascent:ge,attributeName:null,attributeType:null,azimuth:ge,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ge,by:null,calcMode:null,capHeight:ge,className:At,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ge,diffuseConstant:ge,direction:null,display:null,dur:null,divisor:ge,dominantBaseline:null,download:Ke,dx:null,dy:null,edgeMode:null,editable:null,elevation:ge,enableBackground:null,end:null,event:null,exponent:ge,externalResourcesRequired:null,fill:null,fillOpacity:ge,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xo,g2:xo,glyphName:xo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ge,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ge,horizOriginX:ge,horizOriginY:ge,id:null,ideographic:ge,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ge,k:ge,k1:ge,k2:ge,k3:ge,k4:ge,kernelMatrix:br,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ge,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ge,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ge,overlineThickness:ge,paintOrder:null,panose1:null,path:null,pathLength:ge,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:At,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ge,pointsAtY:ge,pointsAtZ:ge,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:br,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:br,rev:br,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:br,requiredFeatures:br,requiredFonts:br,requiredFormats:br,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ge,specularExponent:ge,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ge,strikethroughThickness:ge,string:null,stroke:null,strokeDashArray:br,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ge,strokeOpacity:ge,strokeWidth:null,style:null,surfaceScale:ge,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:br,tabIndex:ge,tableValues:null,target:null,targetX:ge,targetY:ge,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:br,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ge,underlineThickness:ge,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ge,values:null,vAlphabetic:ge,vMathematical:ge,vectorEffect:null,vHanging:ge,vIdeographic:ge,version:null,vertAdvY:ge,vertOriginX:ge,vertOriginY:ge,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ge,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),gH=/^data[-\w.:]+$/i,mw=/-[a-z]/g,bH=/[A-Z]/g;function yH(t,e){const n=bg(e);let r=e,i=Fr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&gH.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(mw,wH);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!mw.test(s)){let o=s.replace(bH,xH);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=Tb}return new i(r,e)}function xH(t){return"-"+t.toLowerCase()}function wH(t){return t.charAt(1).toUpperCase()}const _H=u$([p$,f$,b$,y$,pH],"html"),x$=u$([p$,f$,b$,y$,mH],"svg"),vH={},TH={}.hasOwnProperty,w$=qS("type",{handlers:{root:SH,element:AH,text:jH,comment:CH,doctype:EH}});function kH(t,e){const r=(e||vH).space;return w$(t,r==="svg"?x$:_H)}function SH(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=kb(t.children,n,e),il(t,n),n}function $H(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=kb(t.children,n,e),il(t,n),n}function EH(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return il(t,e),e}function jH(t){const e={nodeName:"#text",value:t.value,parentNode:null};return il(t,e),e}function CH(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return il(t,e),e}function AH(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=x$);const i=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&TH.call(t.properties,s)){const c=IH(r,s,t.properties[s]);c&&i.push(c)}}const o=r.space,l={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:$i[o],childNodes:[],parentNode:null};return l.childNodes=kb(t.children,l,r),il(t,l),t.tagName==="template"&&t.content&&(l.content=$H(t.content,r)),l}function IH(t,e,n){const r=yH(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Uk(n):Zk(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=$i[r.space]}return i}function kb(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const s=w$(t[r],n);s.parentNode=e,i.push(s)}return i}function il(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const MH=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],LH=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Nt="�";var H;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(H||(H={}));const Qn={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function _$(t){return t>=55296&&t<=57343}function OH(t){return t>=56320&&t<=57343}function RH(t,e){return(t-55296)*1024+9216+e}function v$(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function T$(t){return t>=64976&&t<=65007||LH.has(t)}var oe;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(oe||(oe={}));const NH=65536;class DH{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=NH,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:s}=this,o=i+n,l=s+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:l,endOffset:l}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(OH(n))return this.pos++,this._addGap(),RH(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,H.EOF;return this._err(oe.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,H.EOF;const r=this.html.charCodeAt(n);return r===H.CARRIAGE_RETURN?H.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,H.EOF;let e=this.html.charCodeAt(this.pos);return e===H.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,H.LINE_FEED):e===H.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,_$(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===H.LINE_FEED||e===H.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){v$(e)?this._err(oe.controlCharacterInInputStream):T$(e)&&this._err(oe.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var it;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(it||(it={}));function k$(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const BH=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),PH=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function FH(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=PH.get(t))!==null&&e!==void 0?e:t}var un;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(un||(un={}));const HH=32;var Ma;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ma||(Ma={}));function xg(t){return t>=un.ZERO&&t<=un.NINE}function zH(t){return t>=un.UPPER_A&&t<=un.UPPER_F||t>=un.LOWER_A&&t<=un.LOWER_F}function qH(t){return t>=un.UPPER_A&&t<=un.UPPER_Z||t>=un.LOWER_A&&t<=un.LOWER_Z||xg(t)}function WH(t){return t===un.EQUALS||qH(t)}var hn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(hn||(hn={}));var ra;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(ra||(ra={}));class UH{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=hn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ra.Strict}startEntity(e){this.decodeMode=e,this.state=hn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case hn.EntityStart:return e.charCodeAt(n)===un.NUM?(this.state=hn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=hn.NamedEntity,this.stateNamedEntity(e,n));case hn.NumericStart:return this.stateNumericStart(e,n);case hn.NumericDecimal:return this.stateNumericDecimal(e,n);case hn.NumericHex:return this.stateNumericHex(e,n);case hn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|HH)===un.LOWER_X?(this.state=hn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=hn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+Number.parseInt(e.substr(n,s),i),this.consumed+=s}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(xg(i)||zH(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(xg(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===un.SEMI)this.consumed+=1;else if(this.decodeMode===ra.Strict)return 0;return this.emitCodePoint(FH(this.result),this.consumed),this.errors&&(e!==un.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Ma.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=VH(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===ra.Attribute&&(s===0||WH(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Ma.VALUE_LENGTH)>>14,s!==0){if(o===un.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==ra.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&Ma.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~Ma.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case hn.NamedEntity:return this.result!==0&&(this.decodeMode!==ra.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case hn.NumericDecimal:return this.emitNumericEntity(0,2);case hn.NumericHex:return this.emitNumericEntity(0,3);case hn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case hn.EntityStart:return 0}}}function VH(t,e,n,r){const i=(e&Ma.BRANCH_LENGTH)>>7,s=e&Ma.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const c=r-s;return c<0||c>=i?-1:t[n+c]-1}let o=n,l=o+i-1;for(;o<=l;){const c=o+l>>>1,h=t[c];if(h<r)o=c+1;else if(h>r)l=c-1;else return t[c+i]}return-1}var ue;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(ue||(ue={}));var $s;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})($s||($s={}));var Ir;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Ir||(Ir={}));var ie;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(ie||(ie={}));var x;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(x||(x={}));const YH=new Map([[ie.A,x.A],[ie.ADDRESS,x.ADDRESS],[ie.ANNOTATION_XML,x.ANNOTATION_XML],[ie.APPLET,x.APPLET],[ie.AREA,x.AREA],[ie.ARTICLE,x.ARTICLE],[ie.ASIDE,x.ASIDE],[ie.B,x.B],[ie.BASE,x.BASE],[ie.BASEFONT,x.BASEFONT],[ie.BGSOUND,x.BGSOUND],[ie.BIG,x.BIG],[ie.BLOCKQUOTE,x.BLOCKQUOTE],[ie.BODY,x.BODY],[ie.BR,x.BR],[ie.BUTTON,x.BUTTON],[ie.CAPTION,x.CAPTION],[ie.CENTER,x.CENTER],[ie.CODE,x.CODE],[ie.COL,x.COL],[ie.COLGROUP,x.COLGROUP],[ie.DD,x.DD],[ie.DESC,x.DESC],[ie.DETAILS,x.DETAILS],[ie.DIALOG,x.DIALOG],[ie.DIR,x.DIR],[ie.DIV,x.DIV],[ie.DL,x.DL],[ie.DT,x.DT],[ie.EM,x.EM],[ie.EMBED,x.EMBED],[ie.FIELDSET,x.FIELDSET],[ie.FIGCAPTION,x.FIGCAPTION],[ie.FIGURE,x.FIGURE],[ie.FONT,x.FONT],[ie.FOOTER,x.FOOTER],[ie.FOREIGN_OBJECT,x.FOREIGN_OBJECT],[ie.FORM,x.FORM],[ie.FRAME,x.FRAME],[ie.FRAMESET,x.FRAMESET],[ie.H1,x.H1],[ie.H2,x.H2],[ie.H3,x.H3],[ie.H4,x.H4],[ie.H5,x.H5],[ie.H6,x.H6],[ie.HEAD,x.HEAD],[ie.HEADER,x.HEADER],[ie.HGROUP,x.HGROUP],[ie.HR,x.HR],[ie.HTML,x.HTML],[ie.I,x.I],[ie.IMG,x.IMG],[ie.IMAGE,x.IMAGE],[ie.INPUT,x.INPUT],[ie.IFRAME,x.IFRAME],[ie.KEYGEN,x.KEYGEN],[ie.LABEL,x.LABEL],[ie.LI,x.LI],[ie.LINK,x.LINK],[ie.LISTING,x.LISTING],[ie.MAIN,x.MAIN],[ie.MALIGNMARK,x.MALIGNMARK],[ie.MARQUEE,x.MARQUEE],[ie.MATH,x.MATH],[ie.MENU,x.MENU],[ie.META,x.META],[ie.MGLYPH,x.MGLYPH],[ie.MI,x.MI],[ie.MO,x.MO],[ie.MN,x.MN],[ie.MS,x.MS],[ie.MTEXT,x.MTEXT],[ie.NAV,x.NAV],[ie.NOBR,x.NOBR],[ie.NOFRAMES,x.NOFRAMES],[ie.NOEMBED,x.NOEMBED],[ie.NOSCRIPT,x.NOSCRIPT],[ie.OBJECT,x.OBJECT],[ie.OL,x.OL],[ie.OPTGROUP,x.OPTGROUP],[ie.OPTION,x.OPTION],[ie.P,x.P],[ie.PARAM,x.PARAM],[ie.PLAINTEXT,x.PLAINTEXT],[ie.PRE,x.PRE],[ie.RB,x.RB],[ie.RP,x.RP],[ie.RT,x.RT],[ie.RTC,x.RTC],[ie.RUBY,x.RUBY],[ie.S,x.S],[ie.SCRIPT,x.SCRIPT],[ie.SEARCH,x.SEARCH],[ie.SECTION,x.SECTION],[ie.SELECT,x.SELECT],[ie.SOURCE,x.SOURCE],[ie.SMALL,x.SMALL],[ie.SPAN,x.SPAN],[ie.STRIKE,x.STRIKE],[ie.STRONG,x.STRONG],[ie.STYLE,x.STYLE],[ie.SUB,x.SUB],[ie.SUMMARY,x.SUMMARY],[ie.SUP,x.SUP],[ie.TABLE,x.TABLE],[ie.TBODY,x.TBODY],[ie.TEMPLATE,x.TEMPLATE],[ie.TEXTAREA,x.TEXTAREA],[ie.TFOOT,x.TFOOT],[ie.TD,x.TD],[ie.TH,x.TH],[ie.THEAD,x.THEAD],[ie.TITLE,x.TITLE],[ie.TR,x.TR],[ie.TRACK,x.TRACK],[ie.TT,x.TT],[ie.U,x.U],[ie.UL,x.UL],[ie.SVG,x.SVG],[ie.VAR,x.VAR],[ie.WBR,x.WBR],[ie.XMP,x.XMP]]);function al(t){var e;return(e=YH.get(t))!==null&&e!==void 0?e:x.UNKNOWN}const de=x,GH={[ue.HTML]:new Set([de.ADDRESS,de.APPLET,de.AREA,de.ARTICLE,de.ASIDE,de.BASE,de.BASEFONT,de.BGSOUND,de.BLOCKQUOTE,de.BODY,de.BR,de.BUTTON,de.CAPTION,de.CENTER,de.COL,de.COLGROUP,de.DD,de.DETAILS,de.DIR,de.DIV,de.DL,de.DT,de.EMBED,de.FIELDSET,de.FIGCAPTION,de.FIGURE,de.FOOTER,de.FORM,de.FRAME,de.FRAMESET,de.H1,de.H2,de.H3,de.H4,de.H5,de.H6,de.HEAD,de.HEADER,de.HGROUP,de.HR,de.HTML,de.IFRAME,de.IMG,de.INPUT,de.LI,de.LINK,de.LISTING,de.MAIN,de.MARQUEE,de.MENU,de.META,de.NAV,de.NOEMBED,de.NOFRAMES,de.NOSCRIPT,de.OBJECT,de.OL,de.P,de.PARAM,de.PLAINTEXT,de.PRE,de.SCRIPT,de.SECTION,de.SELECT,de.SOURCE,de.STYLE,de.SUMMARY,de.TABLE,de.TBODY,de.TD,de.TEMPLATE,de.TEXTAREA,de.TFOOT,de.TH,de.THEAD,de.TITLE,de.TR,de.TRACK,de.UL,de.WBR,de.XMP]),[ue.MATHML]:new Set([de.MI,de.MO,de.MN,de.MS,de.MTEXT,de.ANNOTATION_XML]),[ue.SVG]:new Set([de.TITLE,de.FOREIGN_OBJECT,de.DESC]),[ue.XLINK]:new Set,[ue.XML]:new Set,[ue.XMLNS]:new Set},wg=new Set([de.H1,de.H2,de.H3,de.H4,de.H5,de.H6]);ie.STYLE,ie.SCRIPT,ie.XMP,ie.IFRAME,ie.NOEMBED,ie.NOFRAMES,ie.PLAINTEXT;var W;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(W||(W={}));const Vt={DATA:W.DATA,RCDATA:W.RCDATA,RAWTEXT:W.RAWTEXT,SCRIPT_DATA:W.SCRIPT_DATA,PLAINTEXT:W.PLAINTEXT,CDATA_SECTION:W.CDATA_SECTION};function XH(t){return t>=H.DIGIT_0&&t<=H.DIGIT_9}function ic(t){return t>=H.LATIN_CAPITAL_A&&t<=H.LATIN_CAPITAL_Z}function JH(t){return t>=H.LATIN_SMALL_A&&t<=H.LATIN_SMALL_Z}function Sa(t){return JH(t)||ic(t)}function gw(t){return Sa(t)||XH(t)}function Zh(t){return t+32}function S$(t){return t===H.SPACE||t===H.LINE_FEED||t===H.TABULATION||t===H.FORM_FEED}function bw(t){return S$(t)||t===H.SOLIDUS||t===H.GREATER_THAN_SIGN}function QH(t){return t===H.NULL?oe.nullCharacterReference:t>1114111?oe.characterReferenceOutsideUnicodeRange:_$(t)?oe.surrogateCharacterReference:T$(t)?oe.noncharacterCharacterReference:v$(t)||t===H.CARRIAGE_RETURN?oe.controlCharacterReference:null}class KH{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=W.DATA,this.returnState=W.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new DH(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new UH(BH,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(oe.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(oe.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=QH(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:it.START_TAG,tagName:"",tagID:x.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:it.END_TAG,tagName:"",tagID:x.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:it.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:it.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(k$(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(oe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=al(e.tagName),e.type===it.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(oe.endTagWithAttributes),e.selfClosing&&this._err(oe.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case it.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case it.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case it.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:it.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=S$(e)?it.WHITESPACE_CHARACTER:e===H.NULL?it.NULL_CHARACTER:it.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(it.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=W.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?ra.Attribute:ra.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===W.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===W.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===W.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case W.DATA:{this._stateData(e);break}case W.RCDATA:{this._stateRcdata(e);break}case W.RAWTEXT:{this._stateRawtext(e);break}case W.SCRIPT_DATA:{this._stateScriptData(e);break}case W.PLAINTEXT:{this._statePlaintext(e);break}case W.TAG_OPEN:{this._stateTagOpen(e);break}case W.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case W.TAG_NAME:{this._stateTagName(e);break}case W.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case W.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case W.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case W.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case W.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case W.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case W.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case W.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case W.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case W.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case W.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case W.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case W.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case W.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case W.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case W.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case W.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case W.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case W.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case W.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case W.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case W.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case W.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case W.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case W.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case W.BOGUS_COMMENT:{this._stateBogusComment(e);break}case W.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case W.COMMENT_START:{this._stateCommentStart(e);break}case W.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case W.COMMENT:{this._stateComment(e);break}case W.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case W.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case W.COMMENT_END:{this._stateCommentEnd(e);break}case W.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case W.DOCTYPE:{this._stateDoctype(e);break}case W.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case W.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case W.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case W.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case W.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case W.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case W.CDATA_SECTION:{this._stateCdataSection(e);break}case W.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case W.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case W.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case W.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case H.LESS_THAN_SIGN:{this.state=W.TAG_OPEN;break}case H.AMPERSAND:{this._startCharacterReference();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitCodePoint(e);break}case H.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case H.AMPERSAND:{this._startCharacterReference();break}case H.LESS_THAN_SIGN:{this.state=W.RCDATA_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case H.LESS_THAN_SIGN:{this.state=W.RAWTEXT_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Sa(e))this._createStartTagToken(),this.state=W.TAG_NAME,this._stateTagName(e);else switch(e){case H.EXCLAMATION_MARK:{this.state=W.MARKUP_DECLARATION_OPEN;break}case H.SOLIDUS:{this.state=W.END_TAG_OPEN;break}case H.QUESTION_MARK:{this._err(oe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e);break}case H.EOF:{this._err(oe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(oe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=W.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Sa(e))this._createEndTagToken(),this.state=W.TAG_NAME,this._stateTagName(e);else switch(e){case H.GREATER_THAN_SIGN:{this._err(oe.missingEndTagName),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(oe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.BEFORE_ATTRIBUTE_NAME;break}case H.SOLIDUS:{this.state=W.SELF_CLOSING_START_TAG;break}case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentTagToken();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.tagName+=Nt;break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(ic(e)?Zh(e):e)}}_stateRcdataLessThanSign(e){e===H.SOLIDUS?this.state=W.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=W.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Sa(e)?(this.state=W.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=W.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=W.BEFORE_ATTRIBUTE_NAME,!1;case H.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=W.SELF_CLOSING_START_TAG,!1;case H.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=W.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===H.SOLIDUS?this.state=W.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Sa(e)?(this.state=W.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case H.SOLIDUS:{this.state=W.SCRIPT_DATA_END_TAG_OPEN;break}case H.EXCLAMATION_MARK:{this.state=W.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=W.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Sa(e)?(this.state=W.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===H.HYPHEN_MINUS?(this.state=W.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===H.HYPHEN_MINUS?(this.state=W.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=W.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case H.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case H.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_ESCAPED,this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case H.HYPHEN_MINUS:{this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case H.GREATER_THAN_SIGN:{this.state=W.SCRIPT_DATA,this._emitChars(">");break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_ESCAPED,this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===H.SOLIDUS?this.state=W.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Sa(e)?(this._emitChars("<"),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Sa(e)?(this.state=W.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Qn.SCRIPT,!1)&&bw(this.preprocessor.peek(Qn.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Qn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=W.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case H.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case H.HYPHEN_MINUS:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case H.HYPHEN_MINUS:{this._emitChars("-");break}case H.LESS_THAN_SIGN:{this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case H.GREATER_THAN_SIGN:{this.state=W.SCRIPT_DATA,this._emitChars(">");break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Nt);break}case H.EOF:{this._err(oe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===H.SOLIDUS?(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Qn.SCRIPT,!1)&&bw(this.preprocessor.peek(Qn.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Qn.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=W.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=W.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.SOLIDUS:case H.GREATER_THAN_SIGN:case H.EOF:{this.state=W.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case H.EQUALS_SIGN:{this._err(oe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=W.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=W.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:case H.SOLIDUS:case H.GREATER_THAN_SIGN:case H.EOF:{this._leaveAttrName(),this.state=W.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case H.EQUALS_SIGN:{this._leaveAttrName(),this.state=W.BEFORE_ATTRIBUTE_VALUE;break}case H.QUOTATION_MARK:case H.APOSTROPHE:case H.LESS_THAN_SIGN:{this._err(oe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.name+=Nt;break}default:this.currentAttr.name+=String.fromCodePoint(ic(e)?Zh(e):e)}}_stateAfterAttributeName(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.SOLIDUS:{this.state=W.SELF_CLOSING_START_TAG;break}case H.EQUALS_SIGN:{this.state=W.BEFORE_ATTRIBUTE_VALUE;break}case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentTagToken();break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=W.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.QUOTATION_MARK:{this.state=W.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case H.APOSTROPHE:{this.state=W.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingAttributeValue),this.state=W.DATA,this.emitCurrentTagToken();break}default:this.state=W.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case H.QUOTATION_MARK:{this.state=W.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case H.AMPERSAND:{this._startCharacterReference();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=Nt;break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case H.APOSTROPHE:{this.state=W.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case H.AMPERSAND:{this._startCharacterReference();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=Nt;break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this._leaveAttrValue(),this.state=W.BEFORE_ATTRIBUTE_NAME;break}case H.AMPERSAND:{this._startCharacterReference();break}case H.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=W.DATA,this.emitCurrentTagToken();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),this.currentAttr.value+=Nt;break}case H.QUOTATION_MARK:case H.APOSTROPHE:case H.LESS_THAN_SIGN:case H.EQUALS_SIGN:case H.GRAVE_ACCENT:{this._err(oe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this._leaveAttrValue(),this.state=W.BEFORE_ATTRIBUTE_NAME;break}case H.SOLIDUS:{this._leaveAttrValue(),this.state=W.SELF_CLOSING_START_TAG;break}case H.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=W.DATA,this.emitCurrentTagToken();break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._err(oe.missingWhitespaceBetweenAttributes),this.state=W.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case H.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=W.DATA,this.emitCurrentTagToken();break}case H.EOF:{this._err(oe.eofInTag),this._emitEOFToken();break}default:this._err(oe.unexpectedSolidusInTag),this.state=W.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentComment(n);break}case H.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.data+=Nt;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Qn.DASH_DASH,!0)?(this._createCommentToken(Qn.DASH_DASH.length+1),this.state=W.COMMENT_START):this._consumeSequenceIfMatch(Qn.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Qn.DOCTYPE.length+1),this.state=W.DOCTYPE):this._consumeSequenceIfMatch(Qn.CDATA_START,!0)?this.inForeignNode?this.state=W.CDATA_SECTION:(this._err(oe.cdataInHtmlContent),this._createCommentToken(Qn.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=W.BOGUS_COMMENT):this._ensureHibernation()||(this._err(oe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=W.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case H.HYPHEN_MINUS:{this.state=W.COMMENT_START_DASH;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptClosingOfEmptyComment),this.state=W.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=W.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case H.HYPHEN_MINUS:{this.state=W.COMMENT_END;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptClosingOfEmptyComment),this.state=W.DATA,this.emitCurrentComment(n);break}case H.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=W.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case H.HYPHEN_MINUS:{this.state=W.COMMENT_END_DASH;break}case H.LESS_THAN_SIGN:{n.data+="<",this.state=W.COMMENT_LESS_THAN_SIGN;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.data+=Nt;break}case H.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case H.EXCLAMATION_MARK:{n.data+="!",this.state=W.COMMENT_LESS_THAN_SIGN_BANG;break}case H.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=W.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===H.HYPHEN_MINUS?this.state=W.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=W.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===H.HYPHEN_MINUS?this.state=W.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=W.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==H.GREATER_THAN_SIGN&&e!==H.EOF&&this._err(oe.nestedComment),this.state=W.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case H.HYPHEN_MINUS:{this.state=W.COMMENT_END;break}case H.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=W.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentComment(n);break}case H.EXCLAMATION_MARK:{this.state=W.COMMENT_END_BANG;break}case H.HYPHEN_MINUS:{n.data+="-";break}case H.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=W.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case H.HYPHEN_MINUS:{n.data+="--!",this.state=W.COMMENT_END_DASH;break}case H.GREATER_THAN_SIGN:{this._err(oe.incorrectlyClosedComment),this.state=W.DATA,this.emitCurrentComment(n);break}case H.EOF:{this._err(oe.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=W.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_NAME;break}case H.GREATER_THAN_SIGN:{this.state=W.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case H.EOF:{this._err(oe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingWhitespaceBeforeDoctypeName),this.state=W.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(ic(e))this._createDoctypeToken(String.fromCharCode(Zh(e))),this.state=W.DOCTYPE_NAME;else switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.NULL:{this._err(oe.unexpectedNullCharacter),this._createDoctypeToken(Nt),this.state=W.DOCTYPE_NAME;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=W.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.AFTER_DOCTYPE_NAME;break}case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.name+=Nt;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(ic(e)?Zh(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Qn.PUBLIC,!1)?this.state=W.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Qn.SYSTEM,!1)?this.state=W.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(oe.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case H.QUOTATION_MARK:{this._err(oe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{this._err(oe.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.QUOTATION_MARK:{n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{n.publicId="",this.state=W.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case H.QUOTATION_MARK:{this.state=W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.publicId+=Nt;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case H.APOSTROPHE:{this.state=W.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.publicId+=Nt;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case H.GREATER_THAN_SIGN:{this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.QUOTATION_MARK:{this._err(oe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{this._err(oe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.QUOTATION_MARK:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:{this.state=W.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case H.QUOTATION_MARK:{this._err(oe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{this._err(oe.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.QUOTATION_MARK:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case H.APOSTROPHE:{n.systemId="",this.state=W.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case H.GREATER_THAN_SIGN:{this._err(oe.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.DATA,this.emitCurrentDoctype(n);break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case H.QUOTATION_MARK:{this.state=W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.systemId+=Nt;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case H.APOSTROPHE:{this.state=W.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case H.NULL:{this._err(oe.unexpectedNullCharacter),n.systemId+=Nt;break}case H.GREATER_THAN_SIGN:{this._err(oe.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case H.SPACE:case H.LINE_FEED:case H.TABULATION:case H.FORM_FEED:break;case H.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.EOF:{this._err(oe.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(oe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=W.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case H.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=W.DATA;break}case H.NULL:{this._err(oe.unexpectedNullCharacter);break}case H.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case H.RIGHT_SQUARE_BRACKET:{this.state=W.CDATA_SECTION_BRACKET;break}case H.EOF:{this._err(oe.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===H.RIGHT_SQUARE_BRACKET?this.state=W.CDATA_SECTION_END:(this._emitChars("]"),this.state=W.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case H.GREATER_THAN_SIGN:{this.state=W.DATA;break}case H.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=W.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(H.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&gw(this.preprocessor.peek(1))?W.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){gw(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===H.SEMICOLON&&this._err(oe.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const $$=new Set([x.DD,x.DT,x.LI,x.OPTGROUP,x.OPTION,x.P,x.RB,x.RP,x.RT,x.RTC]),yw=new Set([...$$,x.CAPTION,x.COLGROUP,x.TBODY,x.TD,x.TFOOT,x.TH,x.THEAD,x.TR]),ad=new Set([x.APPLET,x.CAPTION,x.HTML,x.MARQUEE,x.OBJECT,x.TABLE,x.TD,x.TEMPLATE,x.TH]),ZH=new Set([...ad,x.OL,x.UL]),ez=new Set([...ad,x.BUTTON]),xw=new Set([x.ANNOTATION_XML,x.MI,x.MN,x.MO,x.MS,x.MTEXT]),ww=new Set([x.DESC,x.FOREIGN_OBJECT,x.TITLE]),tz=new Set([x.TR,x.TEMPLATE,x.HTML]),nz=new Set([x.TBODY,x.TFOOT,x.THEAD,x.TEMPLATE,x.HTML]),rz=new Set([x.TABLE,x.TEMPLATE,x.HTML]),iz=new Set([x.TD,x.TH]);class az{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=x.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===x.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ue.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ue.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(wg,ue.HTML)}popUntilTableCellPopped(){this.popUntilPopped(iz,ue.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(rz,ue.HTML)}clearBackToTableBodyContext(){this.clearBackTo(nz,ue.HTML)}clearBackToTableRowContext(){this.clearBackTo(tz,ue.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===x.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===x.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case ue.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case ue.SVG:{if(ww.has(i))return!1;break}case ue.MATHML:{if(xw.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ad)}hasInListItemScope(e){return this.hasInDynamicScope(e,ZH)}hasInButtonScope(e){return this.hasInDynamicScope(e,ez)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case ue.HTML:{if(wg.has(n))return!0;if(ad.has(n))return!1;break}case ue.SVG:{if(ww.has(n))return!1;break}case ue.MATHML:{if(xw.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ue.HTML)switch(this.tagIDs[n]){case e:return!0;case x.TABLE:case x.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===ue.HTML)switch(this.tagIDs[e]){case x.TBODY:case x.THEAD:case x.TFOOT:return!0;case x.TABLE:case x.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ue.HTML)switch(this.tagIDs[n]){case e:return!0;case x.OPTION:case x.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&$$.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&yw.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&yw.has(this.currentTagId);)this.pop()}}const Q0=3;var wi;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(wi||(wi={}));const _w={type:wi.Marker};class sz{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let l=0;l<this.entries.length;l++){const c=this.entries[l];if(c.type===wi.Marker)break;const{element:h}=c;if(this.treeAdapter.getTagName(h)===s&&this.treeAdapter.getNamespaceURI(h)===o){const u=this.treeAdapter.getAttrList(h);u.length===i&&r.push({idx:l,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<Q0)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<Q0)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const l=r[o];l.attrs.every(c=>i.get(c.name)===c.value)&&(s+=1,s>=Q0&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(_w)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:wi.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:wi.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(_w);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===wi.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===wi.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===wi.Element&&n.element===e)}}const $a={createDocument(){return{nodeName:"#document",mode:Ir.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};$a.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if($a.isTextNode(n)){n.value+=e;return}}$a.appendChild(t,$a.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&$a.isTextNode(r)?r.value+=e:$a.insertBefore(t,$a.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},E$="html",oz="about:legacy-compat",lz="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",j$=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],cz=[...j$,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],hz=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),C$=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],uz=[...C$,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function vw(t,e){return e.some(n=>t.startsWith(n))}function dz(t){return t.name===E$&&t.publicId===null&&(t.systemId===null||t.systemId===oz)}function fz(t){if(t.name!==E$)return Ir.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===lz)return Ir.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),hz.has(n))return Ir.QUIRKS;let r=e===null?cz:j$;if(vw(n,r))return Ir.QUIRKS;if(r=e===null?C$:uz,vw(n,r))return Ir.LIMITED_QUIRKS}return Ir.NO_QUIRKS}const Tw={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},pz="definitionurl",mz="definitionURL",gz=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),bz=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ue.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ue.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ue.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ue.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ue.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ue.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ue.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:ue.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ue.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ue.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ue.XMLNS}]]),yz=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),xz=new Set([x.B,x.BIG,x.BLOCKQUOTE,x.BODY,x.BR,x.CENTER,x.CODE,x.DD,x.DIV,x.DL,x.DT,x.EM,x.EMBED,x.H1,x.H2,x.H3,x.H4,x.H5,x.H6,x.HEAD,x.HR,x.I,x.IMG,x.LI,x.LISTING,x.MENU,x.META,x.NOBR,x.OL,x.P,x.PRE,x.RUBY,x.S,x.SMALL,x.SPAN,x.STRONG,x.STRIKE,x.SUB,x.SUP,x.TABLE,x.TT,x.U,x.UL,x.VAR]);function wz(t){const e=t.tagID;return e===x.FONT&&t.attrs.some(({name:r})=>r===$s.COLOR||r===$s.SIZE||r===$s.FACE)||xz.has(e)}function A$(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===pz){t.attrs[e].name=mz;break}}function I$(t){for(let e=0;e<t.attrs.length;e++){const n=gz.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function Sb(t){for(let e=0;e<t.attrs.length;e++){const n=bz.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function _z(t){const e=yz.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=al(t.tagName))}function vz(t,e){return e===ue.MATHML&&(t===x.MI||t===x.MO||t===x.MN||t===x.MS||t===x.MTEXT)}function Tz(t,e,n){if(e===ue.MATHML&&t===x.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===$s.ENCODING){const i=n[r].value.toLowerCase();return i===Tw.TEXT_HTML||i===Tw.APPLICATION_XML}}return e===ue.SVG&&(t===x.FOREIGN_OBJECT||t===x.DESC||t===x.TITLE)}function kz(t,e,n,r){return(!r||r===ue.HTML)&&Tz(t,e,n)||(!r||r===ue.MATHML)&&vz(t,e)}const Sz="hidden",$z=8,Ez=3;var X;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(X||(X={}));const jz={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},M$=new Set([x.TABLE,x.TBODY,x.TFOOT,x.THEAD,x.TR]),kw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:$a,onParseError:null};class Sw{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=X.INITIAL,this.originalInsertionMode=X.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...kw,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new KH(this.options,this),this.activeFormattingElements=new sz(this.treeAdapter),this.fragmentContextID=r?al(this.treeAdapter.getTagName(r)):x.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new az(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...kw,...n};e??(e=r.treeAdapter.createElement(ie.TEMPLATE,ue.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ue.HTML,[]),s=new this(r,i,e);return s.fragmentContextID===x.TEMPLATE&&s.tmplInsertionModeStack.unshift(X.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const s=(i=e.location)!==null&&i!==void 0?i:jz,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===ue.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,ue.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=X.TEXT}switchToPlaintextParsing(){this.insertionMode=X.TEXT,this.originalInsertionMode=X.IN_BODY,this.tokenizer.state=Vt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===ie.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ue.HTML))switch(this.fragmentContextID){case x.TITLE:case x.TEXTAREA:{this.tokenizer.state=Vt.RCDATA;break}case x.STYLE:case x.XMP:case x.IFRAME:case x.NOEMBED:case x.NOFRAMES:case x.NOSCRIPT:{this.tokenizer.state=Vt.RAWTEXT;break}case x.SCRIPT:{this.tokenizer.state=Vt.SCRIPT_DATA;break}case x.PLAINTEXT:{this.tokenizer.state=Vt.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,ue.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,ue.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(ie.HTML,ue.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,x.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:c,endCol:h,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:c,endCol:h,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),s=n.type===it.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===x.SVG&&this.treeAdapter.getTagName(n)===ie.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ue.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===x.MGLYPH||e.tagID===x.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,ue.HTML)}_processToken(e){switch(e.type){case it.CHARACTER:{this.onCharacter(e);break}case it.NULL_CHARACTER:{this.onNullCharacter(e);break}case it.COMMENT:{this.onComment(e);break}case it.DOCTYPE:{this.onDoctype(e);break}case it.START_TAG:{this._processStartTag(e);break}case it.END_TAG:{this.onEndTag(e);break}case it.EOF:{this.onEof(e);break}case it.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return kz(e,i,s,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===wi.Marker||this.openElements.contains(i.element)),r=n===-1?e-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=X.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(x.P),this.openElements.popUntilTagNamePopped(x.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case x.TR:{this.insertionMode=X.IN_ROW;return}case x.TBODY:case x.THEAD:case x.TFOOT:{this.insertionMode=X.IN_TABLE_BODY;return}case x.CAPTION:{this.insertionMode=X.IN_CAPTION;return}case x.COLGROUP:{this.insertionMode=X.IN_COLUMN_GROUP;return}case x.TABLE:{this.insertionMode=X.IN_TABLE;return}case x.BODY:{this.insertionMode=X.IN_BODY;return}case x.FRAMESET:{this.insertionMode=X.IN_FRAMESET;return}case x.SELECT:{this._resetInsertionModeForSelect(e);return}case x.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case x.HTML:{this.insertionMode=this.headElement?X.AFTER_HEAD:X.BEFORE_HEAD;return}case x.TD:case x.TH:{if(e>0){this.insertionMode=X.IN_CELL;return}break}case x.HEAD:{if(e>0){this.insertionMode=X.IN_HEAD;return}break}}this.insertionMode=X.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===x.TEMPLATE)break;if(r===x.TABLE){this.insertionMode=X.IN_SELECT_IN_TABLE;return}}this.insertionMode=X.IN_SELECT}_isElementCausesFosterParenting(e){return M$.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case x.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ue.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case x.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return GH[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){iW(this,e);return}switch(this.insertionMode){case X.INITIAL:{Sl(this,e);break}case X.BEFORE_HTML:{kc(this,e);break}case X.BEFORE_HEAD:{Sc(this,e);break}case X.IN_HEAD:{$c(this,e);break}case X.IN_HEAD_NO_SCRIPT:{Ec(this,e);break}case X.AFTER_HEAD:{jc(this,e);break}case X.IN_BODY:case X.IN_CAPTION:case X.IN_CELL:case X.IN_TEMPLATE:{O$(this,e);break}case X.TEXT:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{K0(this,e);break}case X.IN_TABLE_TEXT:{F$(this,e);break}case X.IN_COLUMN_GROUP:{sd(this,e);break}case X.AFTER_BODY:{od(this,e);break}case X.AFTER_AFTER_BODY:{Mu(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){rW(this,e);return}switch(this.insertionMode){case X.INITIAL:{Sl(this,e);break}case X.BEFORE_HTML:{kc(this,e);break}case X.BEFORE_HEAD:{Sc(this,e);break}case X.IN_HEAD:{$c(this,e);break}case X.IN_HEAD_NO_SCRIPT:{Ec(this,e);break}case X.AFTER_HEAD:{jc(this,e);break}case X.TEXT:{this._insertCharacters(e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{K0(this,e);break}case X.IN_COLUMN_GROUP:{sd(this,e);break}case X.AFTER_BODY:{od(this,e);break}case X.AFTER_AFTER_BODY:{Mu(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){_g(this,e);return}switch(this.insertionMode){case X.INITIAL:case X.BEFORE_HTML:case X.BEFORE_HEAD:case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:case X.IN_BODY:case X.IN_TABLE:case X.IN_CAPTION:case X.IN_COLUMN_GROUP:case X.IN_TABLE_BODY:case X.IN_ROW:case X.IN_CELL:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:case X.IN_TEMPLATE:case X.IN_FRAMESET:case X.AFTER_FRAMESET:{_g(this,e);break}case X.IN_TABLE_TEXT:{$l(this,e);break}case X.AFTER_BODY:{Rz(this,e);break}case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{Nz(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case X.INITIAL:{Dz(this,e);break}case X.BEFORE_HEAD:case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:{this._err(e,oe.misplacedDoctype);break}case X.IN_TABLE_TEXT:{$l(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,oe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?aW(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case X.INITIAL:{Sl(this,e);break}case X.BEFORE_HTML:{Bz(this,e);break}case X.BEFORE_HEAD:{Fz(this,e);break}case X.IN_HEAD:{ii(this,e);break}case X.IN_HEAD_NO_SCRIPT:{qz(this,e);break}case X.AFTER_HEAD:{Uz(this,e);break}case X.IN_BODY:{On(this,e);break}case X.IN_TABLE:{No(this,e);break}case X.IN_TABLE_TEXT:{$l(this,e);break}case X.IN_CAPTION:{Hq(this,e);break}case X.IN_COLUMN_GROUP:{jb(this,e);break}case X.IN_TABLE_BODY:{yf(this,e);break}case X.IN_ROW:{xf(this,e);break}case X.IN_CELL:{Wq(this,e);break}case X.IN_SELECT:{q$(this,e);break}case X.IN_SELECT_IN_TABLE:{Vq(this,e);break}case X.IN_TEMPLATE:{Gq(this,e);break}case X.AFTER_BODY:{Jq(this,e);break}case X.IN_FRAMESET:{Qq(this,e);break}case X.AFTER_FRAMESET:{Zq(this,e);break}case X.AFTER_AFTER_BODY:{tW(this,e);break}case X.AFTER_AFTER_FRAMESET:{nW(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?sW(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case X.INITIAL:{Sl(this,e);break}case X.BEFORE_HTML:{Pz(this,e);break}case X.BEFORE_HEAD:{Hz(this,e);break}case X.IN_HEAD:{zz(this,e);break}case X.IN_HEAD_NO_SCRIPT:{Wz(this,e);break}case X.AFTER_HEAD:{Vz(this,e);break}case X.IN_BODY:{bf(this,e);break}case X.TEXT:{Iq(this,e);break}case X.IN_TABLE:{Uc(this,e);break}case X.IN_TABLE_TEXT:{$l(this,e);break}case X.IN_CAPTION:{zq(this,e);break}case X.IN_COLUMN_GROUP:{qq(this,e);break}case X.IN_TABLE_BODY:{vg(this,e);break}case X.IN_ROW:{z$(this,e);break}case X.IN_CELL:{Uq(this,e);break}case X.IN_SELECT:{W$(this,e);break}case X.IN_SELECT_IN_TABLE:{Yq(this,e);break}case X.IN_TEMPLATE:{Xq(this,e);break}case X.AFTER_BODY:{V$(this,e);break}case X.IN_FRAMESET:{Kq(this,e);break}case X.AFTER_FRAMESET:{eW(this,e);break}case X.AFTER_AFTER_BODY:{Mu(this,e);break}}}onEof(e){switch(this.insertionMode){case X.INITIAL:{Sl(this,e);break}case X.BEFORE_HTML:{kc(this,e);break}case X.BEFORE_HEAD:{Sc(this,e);break}case X.IN_HEAD:{$c(this,e);break}case X.IN_HEAD_NO_SCRIPT:{Ec(this,e);break}case X.AFTER_HEAD:{jc(this,e);break}case X.IN_BODY:case X.IN_TABLE:case X.IN_CAPTION:case X.IN_COLUMN_GROUP:case X.IN_TABLE_BODY:case X.IN_ROW:case X.IN_CELL:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:{B$(this,e);break}case X.TEXT:{Mq(this,e);break}case X.IN_TABLE_TEXT:{$l(this,e);break}case X.IN_TEMPLATE:{U$(this,e);break}case X.AFTER_BODY:case X.IN_FRAMESET:case X.AFTER_FRAMESET:case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{Eb(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===H.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case X.IN_HEAD:case X.IN_HEAD_NO_SCRIPT:case X.AFTER_HEAD:case X.TEXT:case X.IN_COLUMN_GROUP:case X.IN_SELECT:case X.IN_SELECT_IN_TABLE:case X.IN_FRAMESET:case X.AFTER_FRAMESET:{this._insertCharacters(e);break}case X.IN_BODY:case X.IN_CAPTION:case X.IN_CELL:case X.IN_TEMPLATE:case X.AFTER_BODY:case X.AFTER_AFTER_BODY:case X.AFTER_AFTER_FRAMESET:{L$(this,e);break}case X.IN_TABLE:case X.IN_TABLE_BODY:case X.IN_ROW:{K0(this,e);break}case X.IN_TABLE_TEXT:{P$(this,e);break}}}}function Cz(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):D$(t,e),n}function Az(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function Iz(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let s=0,o=i;o!==n;s++,o=i){i=t.openElements.getCommonAncestor(o);const l=t.activeFormattingElements.getElementEntry(o),c=l&&s>=Ez;!l||c?(c&&t.activeFormattingElements.removeEntry(l),t.openElements.remove(o)):(o=Mz(t,l),r===e&&(t.activeFormattingElements.bookmark=l),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function Mz(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Lz(t,e,n){const r=t.treeAdapter.getTagName(e),i=al(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);i===x.TEMPLATE&&s===ue.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function Oz(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,i.tagID)}function $b(t,e){for(let n=0;n<$z;n++){const r=Cz(t,e);if(!r)break;const i=Az(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const s=Iz(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(s),o&&Lz(t,o,s),Oz(t,i,r)}}function _g(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function Rz(t,e){t._appendCommentNode(e,t.openElements.items[0])}function Nz(t,e){t._appendCommentNode(e,t.document)}function Eb(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function Dz(t,e){t._setDocumentType(e);const n=e.forceQuirks?Ir.QUIRKS:fz(e);dz(e)||t._err(e,oe.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=X.BEFORE_HTML}function Sl(t,e){t._err(e,oe.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Ir.QUIRKS),t.insertionMode=X.BEFORE_HTML,t._processToken(e)}function Bz(t,e){e.tagID===x.HTML?(t._insertElement(e,ue.HTML),t.insertionMode=X.BEFORE_HEAD):kc(t,e)}function Pz(t,e){const n=e.tagID;(n===x.HTML||n===x.HEAD||n===x.BODY||n===x.BR)&&kc(t,e)}function kc(t,e){t._insertFakeRootElement(),t.insertionMode=X.BEFORE_HEAD,t._processToken(e)}function Fz(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.HEAD:{t._insertElement(e,ue.HTML),t.headElement=t.openElements.current,t.insertionMode=X.IN_HEAD;break}default:Sc(t,e)}}function Hz(t,e){const n=e.tagID;n===x.HEAD||n===x.BODY||n===x.HTML||n===x.BR?Sc(t,e):t._err(e,oe.endTagWithoutMatchingOpenElement)}function Sc(t,e){t._insertFakeElement(ie.HEAD,x.HEAD),t.headElement=t.openElements.current,t.insertionMode=X.IN_HEAD,t._processToken(e)}function ii(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:{t._appendElement(e,ue.HTML),e.ackSelfClosing=!0;break}case x.TITLE:{t._switchToTextParsing(e,Vt.RCDATA);break}case x.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Vt.RAWTEXT):(t._insertElement(e,ue.HTML),t.insertionMode=X.IN_HEAD_NO_SCRIPT);break}case x.NOFRAMES:case x.STYLE:{t._switchToTextParsing(e,Vt.RAWTEXT);break}case x.SCRIPT:{t._switchToTextParsing(e,Vt.SCRIPT_DATA);break}case x.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=X.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(X.IN_TEMPLATE);break}case x.HEAD:{t._err(e,oe.misplacedStartTagForHeadElement);break}default:$c(t,e)}}function zz(t,e){switch(e.tagID){case x.HEAD:{t.openElements.pop(),t.insertionMode=X.AFTER_HEAD;break}case x.BODY:case x.BR:case x.HTML:{$c(t,e);break}case x.TEMPLATE:{Vs(t,e);break}default:t._err(e,oe.endTagWithoutMatchingOpenElement)}}function Vs(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==x.TEMPLATE&&t._err(e,oe.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(x.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,oe.endTagWithoutMatchingOpenElement)}function $c(t,e){t.openElements.pop(),t.insertionMode=X.AFTER_HEAD,t._processToken(e)}function qz(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.BASEFONT:case x.BGSOUND:case x.HEAD:case x.LINK:case x.META:case x.NOFRAMES:case x.STYLE:{ii(t,e);break}case x.NOSCRIPT:{t._err(e,oe.nestedNoscriptInHead);break}default:Ec(t,e)}}function Wz(t,e){switch(e.tagID){case x.NOSCRIPT:{t.openElements.pop(),t.insertionMode=X.IN_HEAD;break}case x.BR:{Ec(t,e);break}default:t._err(e,oe.endTagWithoutMatchingOpenElement)}}function Ec(t,e){const n=e.type===it.EOF?oe.openElementsLeftAfterEof:oe.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=X.IN_HEAD,t._processToken(e)}function Uz(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.BODY:{t._insertElement(e,ue.HTML),t.framesetOk=!1,t.insertionMode=X.IN_BODY;break}case x.FRAMESET:{t._insertElement(e,ue.HTML),t.insertionMode=X.IN_FRAMESET;break}case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:case x.NOFRAMES:case x.SCRIPT:case x.STYLE:case x.TEMPLATE:case x.TITLE:{t._err(e,oe.abandonedHeadElementChild),t.openElements.push(t.headElement,x.HEAD),ii(t,e),t.openElements.remove(t.headElement);break}case x.HEAD:{t._err(e,oe.misplacedStartTagForHeadElement);break}default:jc(t,e)}}function Vz(t,e){switch(e.tagID){case x.BODY:case x.HTML:case x.BR:{jc(t,e);break}case x.TEMPLATE:{Vs(t,e);break}default:t._err(e,oe.endTagWithoutMatchingOpenElement)}}function jc(t,e){t._insertFakeElement(ie.BODY,x.BODY),t.insertionMode=X.IN_BODY,gf(t,e)}function gf(t,e){switch(e.type){case it.CHARACTER:{O$(t,e);break}case it.WHITESPACE_CHARACTER:{L$(t,e);break}case it.COMMENT:{_g(t,e);break}case it.START_TAG:{On(t,e);break}case it.END_TAG:{bf(t,e);break}case it.EOF:{B$(t,e);break}}}function L$(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function O$(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function Yz(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function Gz(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function Xz(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_FRAMESET)}function Jz(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML)}function Qz(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&wg.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,ue.HTML)}function Kz(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function Zz(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML),n||(t.formElement=t.openElements.current))}function eq(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===x.LI&&i===x.LI||(n===x.DD||n===x.DT)&&(i===x.DD||i===x.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==x.ADDRESS&&i!==x.DIV&&i!==x.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML)}function tq(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML),t.tokenizer.state=Vt.PLAINTEXT}function nq(t,e){t.openElements.hasInScope(x.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(x.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML),t.framesetOk=!1}function rq(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(ie.A);n&&($b(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function iq(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function aq(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(x.NOBR)&&($b(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,ue.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function sq(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function oq(t,e){t.treeAdapter.getDocumentMode(t.document)!==Ir.QUIRKS&&t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._insertElement(e,ue.HTML),t.framesetOk=!1,t.insertionMode=X.IN_TABLE}function R$(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ue.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function N$(t){const e=k$(t,$s.TYPE);return e!=null&&e.toLowerCase()===Sz}function lq(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ue.HTML),N$(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function cq(t,e){t._appendElement(e,ue.HTML),e.ackSelfClosing=!0}function hq(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._appendElement(e,ue.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function uq(t,e){e.tagName=ie.IMG,e.tagID=x.IMG,R$(t,e)}function dq(t,e){t._insertElement(e,ue.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Vt.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=X.TEXT}function fq(t,e){t.openElements.hasInButtonScope(x.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Vt.RAWTEXT)}function pq(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Vt.RAWTEXT)}function $w(t,e){t._switchToTextParsing(e,Vt.RAWTEXT)}function mq(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===X.IN_TABLE||t.insertionMode===X.IN_CAPTION||t.insertionMode===X.IN_TABLE_BODY||t.insertionMode===X.IN_ROW||t.insertionMode===X.IN_CELL?X.IN_SELECT_IN_TABLE:X.IN_SELECT}function gq(t,e){t.openElements.currentTagId===x.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML)}function bq(t,e){t.openElements.hasInScope(x.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,ue.HTML)}function yq(t,e){t.openElements.hasInScope(x.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(x.RTC),t._insertElement(e,ue.HTML)}function xq(t,e){t._reconstructActiveFormattingElements(),A$(e),Sb(e),e.selfClosing?t._appendElement(e,ue.MATHML):t._insertElement(e,ue.MATHML),e.ackSelfClosing=!0}function wq(t,e){t._reconstructActiveFormattingElements(),I$(e),Sb(e),e.selfClosing?t._appendElement(e,ue.SVG):t._insertElement(e,ue.SVG),e.ackSelfClosing=!0}function Ew(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ue.HTML)}function On(t,e){switch(e.tagID){case x.I:case x.S:case x.B:case x.U:case x.EM:case x.TT:case x.BIG:case x.CODE:case x.FONT:case x.SMALL:case x.STRIKE:case x.STRONG:{iq(t,e);break}case x.A:{rq(t,e);break}case x.H1:case x.H2:case x.H3:case x.H4:case x.H5:case x.H6:{Qz(t,e);break}case x.P:case x.DL:case x.OL:case x.UL:case x.DIV:case x.DIR:case x.NAV:case x.MAIN:case x.MENU:case x.ASIDE:case x.CENTER:case x.FIGURE:case x.FOOTER:case x.HEADER:case x.HGROUP:case x.DIALOG:case x.DETAILS:case x.ADDRESS:case x.ARTICLE:case x.SEARCH:case x.SECTION:case x.SUMMARY:case x.FIELDSET:case x.BLOCKQUOTE:case x.FIGCAPTION:{Jz(t,e);break}case x.LI:case x.DD:case x.DT:{eq(t,e);break}case x.BR:case x.IMG:case x.WBR:case x.AREA:case x.EMBED:case x.KEYGEN:{R$(t,e);break}case x.HR:{hq(t,e);break}case x.RB:case x.RTC:{bq(t,e);break}case x.RT:case x.RP:{yq(t,e);break}case x.PRE:case x.LISTING:{Kz(t,e);break}case x.XMP:{fq(t,e);break}case x.SVG:{wq(t,e);break}case x.HTML:{Yz(t,e);break}case x.BASE:case x.LINK:case x.META:case x.STYLE:case x.TITLE:case x.SCRIPT:case x.BGSOUND:case x.BASEFONT:case x.TEMPLATE:{ii(t,e);break}case x.BODY:{Gz(t,e);break}case x.FORM:{Zz(t,e);break}case x.NOBR:{aq(t,e);break}case x.MATH:{xq(t,e);break}case x.TABLE:{oq(t,e);break}case x.INPUT:{lq(t,e);break}case x.PARAM:case x.TRACK:case x.SOURCE:{cq(t,e);break}case x.IMAGE:{uq(t,e);break}case x.BUTTON:{nq(t,e);break}case x.APPLET:case x.OBJECT:case x.MARQUEE:{sq(t,e);break}case x.IFRAME:{pq(t,e);break}case x.SELECT:{mq(t,e);break}case x.OPTION:case x.OPTGROUP:{gq(t,e);break}case x.NOEMBED:case x.NOFRAMES:{$w(t,e);break}case x.FRAMESET:{Xz(t,e);break}case x.TEXTAREA:{dq(t,e);break}case x.NOSCRIPT:{t.options.scriptingEnabled?$w(t,e):Ew(t,e);break}case x.PLAINTEXT:{tq(t,e);break}case x.COL:case x.TH:case x.TD:case x.TR:case x.HEAD:case x.FRAME:case x.TBODY:case x.TFOOT:case x.THEAD:case x.CAPTION:case x.COLGROUP:break;default:Ew(t,e)}}function _q(t,e){if(t.openElements.hasInScope(x.BODY)&&(t.insertionMode=X.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function vq(t,e){t.openElements.hasInScope(x.BODY)&&(t.insertionMode=X.AFTER_BODY,V$(t,e))}function Tq(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function kq(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(x.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(x.FORM):n&&t.openElements.remove(n))}function Sq(t){t.openElements.hasInButtonScope(x.P)||t._insertFakeElement(ie.P,x.P),t._closePElement()}function $q(t){t.openElements.hasInListItemScope(x.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(x.LI),t.openElements.popUntilTagNamePopped(x.LI))}function Eq(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function jq(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function Cq(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function Aq(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(ie.BR,x.BR),t.openElements.pop(),t.framesetOk=!1}function D$(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const s=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==x.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(s,o))break}}function bf(t,e){switch(e.tagID){case x.A:case x.B:case x.I:case x.S:case x.U:case x.EM:case x.TT:case x.BIG:case x.CODE:case x.FONT:case x.NOBR:case x.SMALL:case x.STRIKE:case x.STRONG:{$b(t,e);break}case x.P:{Sq(t);break}case x.DL:case x.UL:case x.OL:case x.DIR:case x.DIV:case x.NAV:case x.PRE:case x.MAIN:case x.MENU:case x.ASIDE:case x.BUTTON:case x.CENTER:case x.FIGURE:case x.FOOTER:case x.HEADER:case x.HGROUP:case x.DIALOG:case x.ADDRESS:case x.ARTICLE:case x.DETAILS:case x.SEARCH:case x.SECTION:case x.SUMMARY:case x.LISTING:case x.FIELDSET:case x.BLOCKQUOTE:case x.FIGCAPTION:{Tq(t,e);break}case x.LI:{$q(t);break}case x.DD:case x.DT:{Eq(t,e);break}case x.H1:case x.H2:case x.H3:case x.H4:case x.H5:case x.H6:{jq(t);break}case x.BR:{Aq(t);break}case x.BODY:{_q(t,e);break}case x.HTML:{vq(t,e);break}case x.FORM:{kq(t);break}case x.APPLET:case x.OBJECT:case x.MARQUEE:{Cq(t,e);break}case x.TEMPLATE:{Vs(t,e);break}default:D$(t,e)}}function B$(t,e){t.tmplInsertionModeStack.length>0?U$(t,e):Eb(t,e)}function Iq(t,e){var n;e.tagID===x.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Mq(t,e){t._err(e,oe.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function K0(t,e){if(t.openElements.currentTagId!==void 0&&M$.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=X.IN_TABLE_TEXT,e.type){case it.CHARACTER:{F$(t,e);break}case it.WHITESPACE_CHARACTER:{P$(t,e);break}}else xh(t,e)}function Lq(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_CAPTION}function Oq(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_COLUMN_GROUP}function Rq(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ie.COLGROUP,x.COLGROUP),t.insertionMode=X.IN_COLUMN_GROUP,jb(t,e)}function Nq(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_TABLE_BODY}function Dq(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ie.TBODY,x.TBODY),t.insertionMode=X.IN_TABLE_BODY,yf(t,e)}function Bq(t,e){t.openElements.hasInTableScope(x.TABLE)&&(t.openElements.popUntilTagNamePopped(x.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function Pq(t,e){N$(e)?t._appendElement(e,ue.HTML):xh(t,e),e.ackSelfClosing=!0}function Fq(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,ue.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function No(t,e){switch(e.tagID){case x.TD:case x.TH:case x.TR:{Dq(t,e);break}case x.STYLE:case x.SCRIPT:case x.TEMPLATE:{ii(t,e);break}case x.COL:{Rq(t,e);break}case x.FORM:{Fq(t,e);break}case x.TABLE:{Bq(t,e);break}case x.TBODY:case x.TFOOT:case x.THEAD:{Nq(t,e);break}case x.INPUT:{Pq(t,e);break}case x.CAPTION:{Lq(t,e);break}case x.COLGROUP:{Oq(t,e);break}default:xh(t,e)}}function Uc(t,e){switch(e.tagID){case x.TABLE:{t.openElements.hasInTableScope(x.TABLE)&&(t.openElements.popUntilTagNamePopped(x.TABLE),t._resetInsertionMode());break}case x.TEMPLATE:{Vs(t,e);break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TBODY:case x.TD:case x.TFOOT:case x.TH:case x.THEAD:case x.TR:break;default:xh(t,e)}}function xh(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,gf(t,e),t.fosterParentingEnabled=n}function P$(t,e){t.pendingCharacterTokens.push(e)}function F$(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function $l(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)xh(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const H$=new Set([x.CAPTION,x.COL,x.COLGROUP,x.TBODY,x.TD,x.TFOOT,x.TH,x.THEAD,x.TR]);function Hq(t,e){const n=e.tagID;H$.has(n)?t.openElements.hasInTableScope(x.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(x.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_TABLE,No(t,e)):On(t,e)}function zq(t,e){const n=e.tagID;switch(n){case x.CAPTION:case x.TABLE:{t.openElements.hasInTableScope(x.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(x.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_TABLE,n===x.TABLE&&Uc(t,e));break}case x.BODY:case x.COL:case x.COLGROUP:case x.HTML:case x.TBODY:case x.TD:case x.TFOOT:case x.TH:case x.THEAD:case x.TR:break;default:bf(t,e)}}function jb(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.COL:{t._appendElement(e,ue.HTML),e.ackSelfClosing=!0;break}case x.TEMPLATE:{ii(t,e);break}default:sd(t,e)}}function qq(t,e){switch(e.tagID){case x.COLGROUP:{t.openElements.currentTagId===x.COLGROUP&&(t.openElements.pop(),t.insertionMode=X.IN_TABLE);break}case x.TEMPLATE:{Vs(t,e);break}case x.COL:break;default:sd(t,e)}}function sd(t,e){t.openElements.currentTagId===x.COLGROUP&&(t.openElements.pop(),t.insertionMode=X.IN_TABLE,t._processToken(e))}function yf(t,e){switch(e.tagID){case x.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_ROW;break}case x.TH:case x.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(ie.TR,x.TR),t.insertionMode=X.IN_ROW,xf(t,e);break}case x.CAPTION:case x.COL:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE,No(t,e));break}default:No(t,e)}}function vg(t,e){const n=e.tagID;switch(e.tagID){case x.TBODY:case x.TFOOT:case x.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE);break}case x.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE,Uc(t,e));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TD:case x.TH:case x.TR:break;default:Uc(t,e)}}function xf(t,e){switch(e.tagID){case x.TH:case x.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,ue.HTML),t.insertionMode=X.IN_CELL,t.activeFormattingElements.insertMarker();break}case x.CAPTION:case x.COL:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:case x.TR:{t.openElements.hasInTableScope(x.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,yf(t,e));break}default:No(t,e)}}function z$(t,e){switch(e.tagID){case x.TR:{t.openElements.hasInTableScope(x.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY);break}case x.TABLE:{t.openElements.hasInTableScope(x.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,vg(t,e));break}case x.TBODY:case x.TFOOT:case x.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(x.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=X.IN_TABLE_BODY,vg(t,e));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:case x.TD:case x.TH:break;default:Uc(t,e)}}function Wq(t,e){const n=e.tagID;H$.has(n)?(t.openElements.hasInTableScope(x.TD)||t.openElements.hasInTableScope(x.TH))&&(t._closeTableCell(),xf(t,e)):On(t,e)}function Uq(t,e){const n=e.tagID;switch(n){case x.TD:case x.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=X.IN_ROW);break}case x.TABLE:case x.TBODY:case x.TFOOT:case x.THEAD:case x.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),z$(t,e));break}case x.BODY:case x.CAPTION:case x.COL:case x.COLGROUP:case x.HTML:break;default:bf(t,e)}}function q$(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.OPTION:{t.openElements.currentTagId===x.OPTION&&t.openElements.pop(),t._insertElement(e,ue.HTML);break}case x.OPTGROUP:{t.openElements.currentTagId===x.OPTION&&t.openElements.pop(),t.openElements.currentTagId===x.OPTGROUP&&t.openElements.pop(),t._insertElement(e,ue.HTML);break}case x.HR:{t.openElements.currentTagId===x.OPTION&&t.openElements.pop(),t.openElements.currentTagId===x.OPTGROUP&&t.openElements.pop(),t._appendElement(e,ue.HTML),e.ackSelfClosing=!0;break}case x.INPUT:case x.KEYGEN:case x.TEXTAREA:case x.SELECT:{t.openElements.hasInSelectScope(x.SELECT)&&(t.openElements.popUntilTagNamePopped(x.SELECT),t._resetInsertionMode(),e.tagID!==x.SELECT&&t._processStartTag(e));break}case x.SCRIPT:case x.TEMPLATE:{ii(t,e);break}}}function W$(t,e){switch(e.tagID){case x.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===x.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===x.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===x.OPTGROUP&&t.openElements.pop();break}case x.OPTION:{t.openElements.currentTagId===x.OPTION&&t.openElements.pop();break}case x.SELECT:{t.openElements.hasInSelectScope(x.SELECT)&&(t.openElements.popUntilTagNamePopped(x.SELECT),t._resetInsertionMode());break}case x.TEMPLATE:{Vs(t,e);break}}}function Vq(t,e){const n=e.tagID;n===x.CAPTION||n===x.TABLE||n===x.TBODY||n===x.TFOOT||n===x.THEAD||n===x.TR||n===x.TD||n===x.TH?(t.openElements.popUntilTagNamePopped(x.SELECT),t._resetInsertionMode(),t._processStartTag(e)):q$(t,e)}function Yq(t,e){const n=e.tagID;n===x.CAPTION||n===x.TABLE||n===x.TBODY||n===x.TFOOT||n===x.THEAD||n===x.TR||n===x.TD||n===x.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(x.SELECT),t._resetInsertionMode(),t.onEndTag(e)):W$(t,e)}function Gq(t,e){switch(e.tagID){case x.BASE:case x.BASEFONT:case x.BGSOUND:case x.LINK:case x.META:case x.NOFRAMES:case x.SCRIPT:case x.STYLE:case x.TEMPLATE:case x.TITLE:{ii(t,e);break}case x.CAPTION:case x.COLGROUP:case x.TBODY:case x.TFOOT:case x.THEAD:{t.tmplInsertionModeStack[0]=X.IN_TABLE,t.insertionMode=X.IN_TABLE,No(t,e);break}case x.COL:{t.tmplInsertionModeStack[0]=X.IN_COLUMN_GROUP,t.insertionMode=X.IN_COLUMN_GROUP,jb(t,e);break}case x.TR:{t.tmplInsertionModeStack[0]=X.IN_TABLE_BODY,t.insertionMode=X.IN_TABLE_BODY,yf(t,e);break}case x.TD:case x.TH:{t.tmplInsertionModeStack[0]=X.IN_ROW,t.insertionMode=X.IN_ROW,xf(t,e);break}default:t.tmplInsertionModeStack[0]=X.IN_BODY,t.insertionMode=X.IN_BODY,On(t,e)}}function Xq(t,e){e.tagID===x.TEMPLATE&&Vs(t,e)}function U$(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(x.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):Eb(t,e)}function Jq(t,e){e.tagID===x.HTML?On(t,e):od(t,e)}function V$(t,e){var n;if(e.tagID===x.HTML){if(t.fragmentContext||(t.insertionMode=X.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===x.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else od(t,e)}function od(t,e){t.insertionMode=X.IN_BODY,gf(t,e)}function Qq(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.FRAMESET:{t._insertElement(e,ue.HTML);break}case x.FRAME:{t._appendElement(e,ue.HTML),e.ackSelfClosing=!0;break}case x.NOFRAMES:{ii(t,e);break}}}function Kq(t,e){e.tagID===x.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==x.FRAMESET&&(t.insertionMode=X.AFTER_FRAMESET))}function Zq(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.NOFRAMES:{ii(t,e);break}}}function eW(t,e){e.tagID===x.HTML&&(t.insertionMode=X.AFTER_AFTER_FRAMESET)}function tW(t,e){e.tagID===x.HTML?On(t,e):Mu(t,e)}function Mu(t,e){t.insertionMode=X.IN_BODY,gf(t,e)}function nW(t,e){switch(e.tagID){case x.HTML:{On(t,e);break}case x.NOFRAMES:{ii(t,e);break}}}function rW(t,e){e.chars=Nt,t._insertCharacters(e)}function iW(t,e){t._insertCharacters(e),t.framesetOk=!1}function Y$(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==ue.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function aW(t,e){if(wz(e))Y$(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===ue.MATHML?A$(e):r===ue.SVG&&(_z(e),I$(e)),Sb(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function sW(t,e){if(e.tagID===x.P||e.tagID===x.BR){Y$(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===ue.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}ie.AREA,ie.BASE,ie.BASEFONT,ie.BGSOUND,ie.BR,ie.COL,ie.EMBED,ie.FRAME,ie.HR,ie.IMG,ie.INPUT,ie.KEYGEN,ie.LINK,ie.META,ie.PARAM,ie.SOURCE,ie.TRACK,ie.WBR;const oW=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,lW=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),jw={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function G$(t,e){const n=yW(t),r=qS("type",{handlers:{root:cW,element:hW,text:uW,comment:J$,doctype:dW,raw:pW},unknown:mW}),i={parser:n?new Sw(jw):Sw.getFragmentParser(void 0,jw),handle(l){r(l,i)},stitches:!1,options:e||{}};r(t,i),sl(i,Ai());const s=n?i.parser.document:i.parser.getFragment(),o=cH(s,{file:i.options.file});return i.stitches&&lf(o,"comment",function(l,c,h){const u=l;if(u.value.stitch&&h&&c!==void 0){const d=h.children;return d[c]=u.value.stitch,c}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function X$(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function cW(t,e){X$(t.children,e)}function hW(t,e){gW(t,e),X$(t.children,e),bW(t,e)}function uW(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:it.CHARACTER,chars:t.value,location:wh(t)};sl(e,Ai(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function dW(t,e){const n={type:it.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:wh(t)};sl(e,Ai(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function fW(t,e){e.stitches=!0;const n=xW(t);if("children"in t&&"children"in n){const r=G$({type:"root",children:t.children},e.options);n.children=r.children}J$({type:"comment",value:{stitch:n}},e)}function J$(t,e){const n=t.value,r={type:it.COMMENT,data:n,location:wh(t)};sl(e,Ai(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function pW(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,Q$(e,Ai(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(oW,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function mW(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))fW(n,e);else{let r="";throw lW.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function sl(t,e){Q$(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Vt.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function Q$(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function gW(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Vt.PLAINTEXT)return;sl(e,Ai(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:$i.html;i===$i.html&&n==="svg"&&(i=$i.svg);const s=kH({...t,children:[]},{space:i===$i.svg?"svg":"html"}),o={type:it.START_TAG,tagName:n,tagID:al(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:wh(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function bW(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&MH.includes(n)||e.parser.tokenizer.state===Vt.PLAINTEXT)return;sl(e,nf(t));const r={type:it.END_TAG,tagName:n,tagID:al(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:wh(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Vt.RCDATA||e.parser.tokenizer.state===Vt.RAWTEXT||e.parser.tokenizer.state===Vt.SCRIPT_DATA)&&(e.parser.tokenizer.state=Vt.DATA)}function yW(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function wh(t){const e=Ai(t)||{line:void 0,column:void 0,offset:void 0},n=nf(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function xW(t){return"children"in t?Oo({...t,children:[]}):Oo(t)}function wW(t){return function(e,n){return G$(e,{...t,file:n})}}function _W(t){const[e,n]=je.useState(!1),[r,i]=je.useState(null),[s,o]=je.useState(t),{isConnected:l}=eM(),c=tM(),h=aM("0.0002"),{writeContract:u,isPending:d,data:f,error:p}=sM(),{isLoading:m,isSuccess:g}=oM({hash:f});je.useEffect(()=>{if(typeof window<"u"){const D=(window.location.origin+t).replace(/\/+$/,"");o(D)}},[t]);const b=iM(),y=c===b.id,{data:w,error:S,isPending:E,refetch:T}=lM({...Cx,functionName:"getLikesForUrl",args:[s],chainId:b.id}),C=je.useCallback(async()=>{if(i(null),!s){i("URL ist erforderlich");return}if(!y){i(`Bitte wechsle zum ${b.name} Netzwerk`);return}n(!0),u({...Cx,functionName:"donate",args:[s],value:h})},[s,y,b.name,u,h]);je.useEffect(()=>{g&&(n(!1),i(null),setTimeout(()=>{T()},2e3)),p&&(n(!1),i(p?.message||"Transaktion fehlgeschlagen"))},[g,p,T]);const M=r||(!y&&l?`Bitte wechsle zum ${b.name} Netzwerk`:null);return{supportCount:w?.toString()||"0",isLoading:e||d||m,isSuccess:g,errorMessage:M,isConnected:l,isReadPending:E,readError:S,handleSupport:C}}function vW({publishingDate:t,showSupport:e=!1,className:n}){const i=nM().urlPathname,{supportCount:s,isLoading:o,isSuccess:l,errorMessage:c,isConnected:h,handleSupport:u,isReadPending:d,readError:f}=_W(e?i:""),p=y=>{try{return new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return y}},m=y=>{y.preventDefault(),h&&u()},g=()=>{if(!e)return null;if(d)return"⭐ Loading...";if(f)return"⭐ Error";const y=parseInt(s)||0,w=y===1?"supporter":"supporters";return a.jsx("button",{onClick:m,disabled:o||!h,className:b0.supportButton,title:c||(h?"Support this content":"Connect wallet to support"),children:o?"⭐ Supporting...":l?`★ ${y} ${w}`:`⭐ ${y} ${w}`})},b=[t&&p(t),g()].filter(Boolean);return b.length===0?null:a.jsx("div",{className:`${b0.container} ${n||""}`,children:b.map((y,w)=>a.jsxs(je.Fragment,{children:[w>0&&a.jsx("span",{className:b0.separator,children:"•"}),y]},w))})}function TW(t,e=100){const n=t.match(/Prompt:\s*(.+?)(?:\n|$)/i);if(n&&n[1]){const i=n[1].trim();return i.length>e?`${i.substring(0,e)}...`:i}const r=t.substring(0,e);return r.length<t.length?`${r}...`:r}function K$({tokenId:t}){const[e,n]=je.useState(!0),[r,i]=je.useState(null),[s,o]=je.useState(null),[l,c]=je.useState(null),[h,u]=je.useState(null),d=g=>g?TW(g,60):"",f=()=>{const g=d(l);return g?`Article Illustration: ${g}`:s?`Article Illustration: ${s}`:`Article Illustration: NFT #${t}`},p=cM(),m=async g=>{try{if(g.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",g),null;const b=await fetch(g);if(!b.ok)throw new Error(`Failed to fetch metadata: ${b.status}`);return await b.json()}catch(b){return console.error("Error fetching NFT metadata:",b),null}};return je.useEffect(()=>{(async()=>{try{n(!0),u(null);const y=await p.readContract({address:Ax.address,abi:Ax.abi,functionName:"tokenURI",args:[BigInt(t)]}),w=await m(y);w&&(i(w.image||null),o(w.name||null),c(w.description||null)),n(!1)}catch(b){console.error(`Error loading NFT ${t}:`,b),u(`Failed to load NFT #${t}`),n(!1)}})()},[t,p]),e?a.jsx("div",{className:qr.container,children:a.jsxs("div",{className:qr.loading,children:[a.jsx("div",{className:qr.spinner}),a.jsx("p",{className:qr.loadingText,children:"Loading..."})]})}):h||!r?a.jsx("div",{className:qr.container,children:a.jsxs("div",{className:qr.placeholder,children:[a.jsxs("p",{className:qr.placeholderText,children:["NFT #",t]}),a.jsx("p",{className:qr.errorText,children:"Image unavailable"})]})}):a.jsxs("div",{className:qr.container,children:[a.jsx("img",{src:r,alt:s||`NFT #${t}`,className:qr.image}),a.jsx("p",{className:qr.caption,children:f()})]})}const kW={publishing_date:"2025-01-03",title:"Ideas behind the blog stack",category:"webdev",description:"I share my journey from scattered notes to a unified blog using React and Vike. Modern web tech offers speed, simplicity, and full version control over traditional solutions."};function Cw(t){const e={a:"a",blockquote:"blockquote",em:"em",p:"p",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"Over the last few years I kept writing notes and code in all kind of different ways. Sometimes I would use Wordpress, personal notes, markdown or Jupyter notebooks. They get saved in some repo and there you go. But these days I would like to bring them slowly together into some more common structure, i.e. on one common website."}),`
`,a.jsxs(e.p,{children:["My rather heavy reliance on Jupyter notebooks and markdown really mostly ruled out Wordpress. I also really like the ideas behind static site generators. They are simple, fast and can be version controlled. Then I had to choose the appropiate stack. The first logical idea would have been ",a.jsx(e.a,{href:"https://squidfunk.github.io/mkdocs-material/",children:"mkdocs-material"}),". I have made great experiences with it in the past. It is super simple to set up, very configurable and it looks great. However, I recently started to have a deeper look into proper web tech of the type of React and it is simply sooo much more natural to work with those components etc."]}),`
`,a.jsxs(e.p,{children:["Having settled on ",a.jsx(e.em,{children:"React"}),", I first thought that it is totally enough to work with ",a.jsx(e.a,{href:"https://create-react-app.dev/",children:"create-react-app"}),". However, you soon realize that there have been no releases over the last few years and that the project is not really maintained anymore. A cute little solution was then ",a.jsx(e.a,{href:"ttps://github.com/nano-react-app/nano-react-app",children:"nano-react-app"}),". It is a super minimalistic setup and worked well as I started to play around."]}),`
`,a.jsxs(e.p,{children:["This got me far enough with a single webpage. But as I wanted to have a blog with multiple posts, I had to think about how to structure the whole thing. And this is the moment where you need some kind of routers. And this is the moment, where I had to learn what react meant with the following statement ",a.jsx(e.a,{href:"https://react.dev/learn/start-a-new-react-project",children:"on their website"}),":"]}),`
`,a.jsxs(e.blockquote,{children:[`
`,a.jsx(e.p,{children:"If you want to build a new app or a new website fully with React, we recommend picking one of the React-powered frameworks popular in the community."}),`
`,a.jsx(e.p,{children:"You can use React without a framework, however we’ve found that most apps and sites eventually build solutions to common problems such as code-splitting, routing, data fetching, and generating HTML. These problems are common to all UI libraries, not just React."}),`
`,a.jsx(e.p,{children:"By starting with a framework, you can get started with React quickly, and avoid essentially building your own framework later."}),`
`]}),`
`,a.jsxs(e.p,{children:["I really wanted to avoid this blow at the beginning but with the need for multiple pages I had to dive into this. After some research, I settled on ",a.jsx(e.a,{href:"https://vike.dev/",children:"vike"}),". It provides everything I need and super flexible. It also has a bit of an indie vibe, which made it more sympathic. Finally setting it up is made quite easy with ",a.jsx(e.a,{href:"https://batijs.dev",children:"create-bati"}),"."]}),`
`,a.jsx(e.p,{children:"So here we are. I have a blog stack that I can work with. It is not perfect but it is a start. I will keep you updated on how it goes."})]})}function SW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Cw,{...t})}):Cw(t)}const Aw=Object.freeze(Object.defineProperty({__proto__:null,default:SW,frontmatter:kW},Symbol.toStringTag,{value:"Module"})),$W={publishing_date:"2025-05-26",title:"Updates to the website",tokenID:26,category:"webdev",description:"I explore my website's evolution over 6 months, from minimal CSS to Panda CSS and Copilot refactoring. See how modern tools dramatically boost development productivity."};function Iw(t){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"It has been roughly 6 months since I started this website. All in all, it is a enjoyable experience to have this super flexible stack on which I can simply play around in the way I want. So it is time to summarize the most important changes and updates on the stack over the last few months."}),`
`,a.jsx(e.h2,{children:"Panda CSS for consistent styling"}),`
`,a.jsxs(e.p,{children:["At the beginning, I kept the styling super minimalistic and just used inline css. This was ok at the beginning but by the time that I started to add the lecture notes and the image generator it become quite cumbersome to work in this way. So I started to look for a proper CSS solution. I wanted something that is simple, flexible and does not require a lot of setup. After some research, I settled on ",a.jsx(e.a,{href:"https://panda-css.com/",children:"Panda CSS"}),". It allows me to write CSS in a very JS-like way, which is very convenient. It also has a great integration with Vike and works well with the rest of the stack. All in all, there will be no looking back."]}),`
`,a.jsx(e.h2,{children:"Copilot for code refactoring"}),`
`,a.jsxs(e.p,{children:["In the middle of the refactoring, I also made my first experiences with the ",a.jsx(e.a,{href:"https://github.blog/ai-and-ml/github-copilot/agent-mode-101-all-about-github-copilots-powerful-mode/",children:"Copilot Agent Mode"}),". Previously, I had only used Copilot in the normal way, i.e. it would suggest code snippets as I was typing. However, with the Agent Mode, I can now let Copilot refactor my code in a much more comprehensive way. I only gave the following instruction:"]}),`
`,a.jsxs(e.blockquote,{children:[`
`,a.jsxs(e.p,{children:["The code within the website folder uses pandacss. However in a lot of the components and pages similiar styles are defined independently and hence not consistent. The code should have all the style definitions in a consistent way in the ",a.jsx(e.code,{children:"styles.ts"})," file."]}),`
`]}),`
`,a.jsxs(e.p,{children:["Then I let Copilot run with ",a.jsx(e.a,{href:"https://www.anthropic.com/claude/sonnet",children:"Sonnet 4"})," for about 20 minutes. Quite amazingly, it did a remarkable job involving fifteen files and hundreds of lines of code. All I had to do was a lint fix and ",a.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io/commit/8b9f37cb0ce2ef54bed23b034a40cebde72608b4",children:"that's it"}),". This really makes you wonder which projects are now possible that I put on the backburner before because they were just to long and not fun enough."]}),`
`,a.jsx(e.h2,{children:"More lecture notes"}),`
`,a.jsxs(e.p,{children:["I was now able to move a number of lecture notes into the new ",a.jsx(e.a,{href:"../quantum",children:"quantum"})," section. It was all in all a rather straightforward process. I just had to convert the jupyter notebooks to markdown and then add them to the website. With the new content it actually became clear that the file based structure of content is a bit cumbersome. Yes, I previously started a new folder on each project. However, with the blog it would feel tempting to have a single stream of files, which are later sorted by tags etc into different views."]}),`
`,a.jsx(e.h2,{children:"A quick outlook"}),`
`,a.jsx(e.p,{children:"We will see where it takes me from here but a number of things could be cool:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"An image gallery for the generator that allows to browse the images, search for them and burn them if you feel like it. Maybe even have a functionality that automatically burns the images after a certain time if you don't want to keep them explicitly ?"}),`
`,a.jsx(e.li,{children:"Introducing more tags etc to the blog to get a simpler handle on the content. Maybe I will be able to get rid of the folder structure and just have a single stream of content."}),`
`,a.jsx(e.li,{children:"On the more ambitious side, I really start to wonder if I can finally get quantum onto the blockchain. I had some thoughts on this, I think that it is possible, but I have to find the motivation to get started on it."}),`
`]})]})}function EW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Iw,{...t})}):Iw(t)}const Mw=Object.freeze(Object.defineProperty({__proto__:null,default:EW,frontmatter:$W},Symbol.toStringTag,{value:"Module"})),jW={publishing_date:"2025-06-18",title:"A public gallery of AI generated images",tokenID:23,category:"ai",secondaryCategory:"blockchain",description:"I create a privacy-focused AI image gallery where creators share work and collectors mint NFTs. Discover the technical details combining open-source generation with blockchain incentives."};function Lw(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./11",children:"previous blog post"}),", I described how I set up an image generator that quite nicely fulfills my needs: The generator in the background is open-source, I have full cost control, I made the system easily usable to others and it is really privacy-conserving. However, I could not resist the temptation to make it easier for others to see some of the images and to try to set up small incentive systems in the form of collector NFTs. The main changes are:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"A public gallery for images that you explicitly want to share with others."}),`
`,a.jsx(e.li,{children:"The possibility to collect public images in the form of NFTs and hence support the creators."}),`
`]}),`
`,a.jsx(e.p,{children:"They are all nicely visible in the screen shot below."}),`
`,`
`,a.jsx(e.p,{children:"Let me describe here, which major changes I made and give you some of the technical details."}),`
`,a.jsx(e.h2,{children:"Listing images in the public gallery"}),`
`,a.jsxs(e.p,{children:["I really enjoy the playful approach to image generation. But a lot of them fail and I do not really want to keep or share them. Hence, it is really easy to delete them from the blockchain and they are NOT listed to the public gallery by default. However, for a few of them I would actually be quite happy to share them with others. Hence, I added a simple new attribute to the smart contract, which is called ",a.jsx(e.code,{children:"isListed"})," and set to ",a.jsx(e.code,{children:"false"})," by default. The functionality is simple:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["If this is set to ",a.jsx(e.code,{children:"true"}),", the image is listed in the public gallery."]}),`
`,a.jsxs(e.li,{children:["If it is set to ",a.jsx(e.code,{children:"false"}),", the image is not listed and can only be seen in the other tab."]}),`
`]}),`
`,a.jsxs(e.p,{children:["This is a super simple approach, which is inspired by the ",a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Robots.txt",children:"robots.txt"})," approach. It does not securely make things private, but it unlists them from some public galleries. This approach is inspired by robots.txt - just as robots.txt doesn't technically prevent access but signals to web crawlers whether content should be indexed, the ",a.jsx(e.code,{children:"isListed"})," flag signals whether an image should appear in public galleries. The data remains on the blockchain and is technically accessible, but won't be displayed in the public interface."]}),`
`,a.jsx(e.h3,{children:"The pain of upgrading smart contracts"}),`
`,a.jsxs(e.p,{children:["I had already set up the smart contract to be upgradeable with ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/writing-upgradeable",children:"OpenZeppelin"}),". However, initially I really enjoyed the work with ",a.jsx(e.a,{href:"https://hardhat.org/ignition/docs/getting-started#overview",children:"hardhat ignition"})," (a deployment tool) and ",a.jsx(e.a,{href:"https://viem.sh/",children:"viem"})," (a TypeScript library for Ethereum). So I tried to make the upgrades work with these tools for quite some time. The main issue was that Hardhat Ignition and Viem don't have built-in support for OpenZeppelin's upgrade patterns."]}),`
`,a.jsxs(e.p,{children:["In the end it never really worked out and everything became much easier when I left hardhat ignition behind and simply used the ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/1.x/overview",children:"OpenZeppelin Hardhat Upgrades plugin"}),". The OpenZeppelin Hardhat Upgrades plugin handles the complex proxy logic automatically, including storage layout validation and initialization functions."]}),`
`,a.jsx(e.p,{children:"This unfortunately means that I have to change the deployment stack for the smart contracts completely. However, Claude Sonnet has proven to be a great friend for the corresponding code. I am still not proud about it, but it works good enough for now."}),`
`,a.jsx(e.h3,{children:"Updating the website"}),`
`,a.jsxs(e.p,{children:["The updates to the ",a.jsx(e.a,{href:"/imagegen",children:"imagegen"})," website were rather straightforward (again thanks to Claude Sonnet). I introduced a new tab which shows public images to anyone on the website. The functionality is obviously a bit different from the private tab, but overall the changes were fairly minimal."]}),`
`,a.jsx(e.h2,{children:"Making images collectible"}),`
`,a.jsxs(e.p,{children:["Once I was able to list images in the public gallery, I also wanted to allow others to collect them. The logic behind the little collect button is similar to the ",a.jsx(e.a,{href:"./7",children:"support system"})," for the blogs but a bit more evolved. In the contract for the support system, I implemented a simple mapping between the supported address and the number of supporters. Once you hit the support button, a small fee is sent to a specified address and the number of supporters is increased by one. However, this does not really create a market for the supported content and is very much a donation system."]}),`
`,a.jsx(e.h3,{children:"The basic features of the collector NFT contract"}),`
`,a.jsx(e.p,{children:"In the case of the image generator, I wanted to go a step further. So I set up the system in the following fashion:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"If you hit the collect button you get to mint a new NFT, which directly links to the original NFT. However, it is not from the same contract and hence the owner of the original NFT always remains the unique owner."}),`
`,a.jsx(e.li,{children:"When you collect the NFT, all the money is transferred into the wallet of the owner of the original NFT. This sets up a money transfer from the collector to the art creator and a financial resource stream similar to the one from the support button."}),`
`,a.jsxs(e.li,{children:["However, now the collector has his own tradable copy that he could sell on ",a.jsx(e.a,{href:"https://opensea.io/",children:"opensea.io"})," if he feels like it."]}),`
`]}),`
`,a.jsx(e.h3,{children:"Introducing scarcity"}),`
`,a.jsx(e.p,{children:`The whole thing is about artwork. So you have the strong feeling that it should be more expensive to collect "popular" art than the one from an unknown street artist. However, in a standard approach of unlimited collector NFTs, a collector could never achieve a price gain because any additional supporter would simply mint another NFT and that's it.`}),`
`,a.jsx(e.p,{children:"Therefore, I decided to introduce an exponential increase in the mint price of the collector NFTs. The pricing follows an exponential progression where the price doubles with each batch of collectors:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Collectors 1-5: 0.001 ETH (base price)"}),`
`,a.jsx(e.li,{children:"Collectors 6-10: 0.002 ETH (2x base price)"}),`
`,a.jsx(e.li,{children:"Collectors 11-15: 0.004 ETH (4x base price)"}),`
`,a.jsx(e.li,{children:"Collectors 16-20: 0.008 ETH (8x base price)"}),`
`,a.jsx(e.li,{children:"Collectors 21-25: 0.016 ETH (16x base price)"}),`
`,a.jsx(e.li,{children:"Collectors 26-30: 0.032 ETH (32x base price)"}),`
`,a.jsx(e.li,{children:"And so on..."}),`
`]}),`
`,a.jsx(e.p,{children:"This means if you're the 12th collector, you pay 0.004 ETH, but if someone becomes the 27th collector later, your NFT becomes more valuable as the entry price has increased to 0.032 ETH."}),`
`,a.jsx(e.p,{children:"This can solve a number of open questions:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"There is a clear increase in the value of a collector NFT for popular art. The more collectors come in the more expensive it gets and early collectors can profit from it."}),`
`,a.jsx(e.li,{children:"The owner of the original NFT can profit from the popularity of his art in an exponential fashion. This also feels quite natural."}),`
`,a.jsx(e.li,{children:"Finally, you clearly create substantial scarcity and it will be rare to have much more than a few dozen collectors of a single image."}),`
`]}),`
`,a.jsx(e.h3,{children:"More pain with upgrades"}),`
`,a.jsxs(e.p,{children:["As I worked on the ",a.jsx(e.code,{children:"CollectorNFT"}),", I had to fix a few bugs and wanted to implement them in an upgrade. However, at that point I discovered that OpenZeppelin actually uses annotations to mark certain functions. And these annotations are really important when you work with the upgradeable plugins as they help you to secure the contract. They are not documented super well, but if you try to introduce them later on, they break the upgrades. So better introduce them early on."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"The key lesson:"})," OpenZeppelin uses special annotations like ",a.jsx(e.code,{children:"@custom:oz-upgrades-unsafe-allow"})," to mark functions that might be dangerous in upgradeable contracts. These annotations must be present from the beginning - adding them later breaks the upgrade mechanism because the plugin validates the entire contract history."]}),`
`,a.jsx(e.h2,{children:"Conclusion"}),`
`,a.jsx(e.p,{children:"It is super stimulating to work on this kind of topics as they allow me to play around with new ideas which have plenty of possibilities."}),`
`,a.jsx(e.p,{children:"This project demonstrates how blockchain technology can create sustainable creator economies for AI-generated art. The combination of public galleries, collector NFTs, and exponential pricing creates interesting dynamics that traditional platforms can't replicate."}),`
`,a.jsx(e.p,{children:"Next steps I'm considering:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Implementing royalty mechanisms for secondary sales"}),`
`,a.jsx(e.li,{children:"More robust contracts and upgrade paths"}),`
`,a.jsx(e.li,{children:"Enhancing the public gallery with search and filtering"}),`
`,a.jsx(e.li,{children:"Adding community features like comments or ratings"}),`
`]}),`
`,a.jsxs(e.p,{children:["You can try the system yourself at ",a.jsx(e.a,{href:"/imagegen",children:"imagegen"})," - I'd love to see what images you create and whether anyone finds them worth collecting. The source code for both the smart contracts and frontend is available in my ",a.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io",children:"GitHub repository"}),"."]})]})}function CW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Lw,{...t})}):Lw(t)}const Ow=Object.freeze(Object.defineProperty({__proto__:null,default:CW,frontmatter:jW},Symbol.toStringTag,{value:"Module"})),AW={publishing_date:"2025-04-21",title:"A decentral support button",category:"blockchain",secondaryCategory:"webdev",description:"I build a decentralized support button using smart contracts for direct content monetization. Learn how blockchain enables transparent micro-payments without platform intermediaries."};function Rw(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["I recently came across the ",a.jsx(e.code,{children:"mirror"})," platfrom and was really impressed by the possibilities of such a dentralized ",a.jsx(e.a,{href:"4",children:"social platform"}),". What intrigued me most is that it might give content creators a very simple and direct way to get paid for the content. But after some more digging I must admit that it is not clear to me if ",a.jsx(e.a,{href:"https://mirror.xyz/",children:"mirror.xyz"})," is still really actively maintained. So I decided to give it a try and see if I might be able to build something similar. As you can see on the top right of this site I succeeded and will explain how I did it. I am not sure yet how long this post will be, so buckle up."]}),`
`,a.jsx(e.h2,{children:"The goal"}),`
`,a.jsx(e.p,{children:"I wanted to have a simple like / support button. Its functionality is quite straightforward:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"As the user clicks on the button, he commits to support the content with a small amount of money."}),`
`,a.jsx(e.li,{children:"The support is done via a transaction on the blckchain."}),`
`,a.jsx(e.li,{children:"The smart contract keeps track of the number of likes for each site."}),`
`]}),`
`,a.jsx(e.p,{children:"For me this is interesting for a few reasons:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"It is a really simple smart contract. So it allows me to learn the basics of smart contracts in a very simple way."}),`
`,a.jsx(e.li,{children:"It sets up a simple way to support the content that I create on this website."}),`
`]}),`
`,a.jsx(e.h2,{children:"How to use the support button"}),`
`,a.jsxs(e.p,{children:["To use the button you need to have a wallet that is connected to the Ethereum network. I used ",a.jsx(e.a,{href:"https://metamask.io/",children:"MetaMask"})," for this."]}),`
`,a.jsxs(e.p,{children:["In the next step, you need to make sure that you have sufficent ETH on the ",a.jsx(e.a,{href:"https://www.optimism.io",children:"optimism chain"}),". If you don't have any ETH on the optimism chain, you can use the ",a.jsx(e.a,{href:"https://app.optimism.io/bridge",children:"optimism bridge"})," to transfer some ETH from the Ethereum mainnet to the optimism chain."]}),`
`,a.jsx(e.p,{children:"Now, you are all set up to use the support button that you can find on the top right of this page. When you click it, a popup will open that allows you to send ETH to the smart contract. The amount of ETH is set to 0.002 ETH (rougly 50 cents). Once you confirm the transation, the smart contract will be called and the amount of ETH will be sent to the smart contract. The smart contract will then keep track of the number of likes for this specific URL and the number of supporters will be incremented. Thanks for your support!"}),`
`,a.jsx(e.p,{children:"Now that you know how to use the button, I will explain how I set everything up."}),`
`,a.jsx(e.h2,{children:"Setting up the smart contract"}),`
`,a.jsx(e.p,{children:"In a first step, I had to decide how my smart contract should look like and then also set everything up to deploy it."}),`
`,a.jsx(e.h3,{children:"The smart contract"}),`
`,a.jsxs(e.p,{children:["I decided for a really simple approach based on ",a.jsx(e.a,{href:"https://soliditylang.org/",children:"solidity"}),". The ",a.jsx(e.code,{children:"Support"})," smart contract main hasly the ",a.jsx(e.code,{children:"donate"})," function, which takes a URL as input and allows users to send ETH as a form of appreciation. Once the donation is called, ETH is transferred to the contract owner and the count of ",a.jsx(e.code,{children:"urlLikes"})," is incremented."]}),`
`,a.jsxs(e.p,{children:["The contract also includes a ",a.jsx(e.code,{children:"getLikesForUrl"})," function, which allows anyone to check the number of likes for a specific URL. The contract is designed to be secure and efficient, utilizing OpenZeppelin's libraries for access control and reentrancy protection. One of the neat things of the blockchain is that you can the see fully deployed and verified code ",a.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x314b07fbd33a7343479e99e6682d5ee1da7f17c1#code#F1#L1",children:"here"}),"."]}),`
`,a.jsx(e.p,{children:"As I designed the contract, I actually wondered if I should use other approaches like NFTs or ERC20 tokens. But in the end there is no need for that at this stage and any of those increasing complexities may increase the risk of bugs and the gas fees."}),`
`,a.jsx(e.h3,{children:"Deploying and testing the smart contract"}),`
`,a.jsxs(e.p,{children:["As this was my first smart contract, I actually had to learn all the basics. It would seem that you have two major frameworks nowadays: ",a.jsx(e.a,{href:"https://book.getfoundry.sh/",children:"Foundry"})," and ",a.jsx(e.a,{href:"https://hardhat.org/",children:"Hardhat"}),". Hardhat seemed to fulfill all my requirements and well integrated into the usual javascript workflows. To get started, I really like the documentation for the ",a.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/compile-contracts",children:"Hardhat Runner"})," here. In summary, the steps are:"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Install hardhat and the dependencies"}),`
`,a.jsxs(e.li,{children:["Compile the contracts ",a.jsx(e.code,{children:"npx hardhat compile"}),"."]}),`
`,a.jsxs(e.li,{children:["Write the tests for the contracts. I used ",a.jsx(e.a,{href:"https://www.chaijs.com/",children:"chai"})," and ",a.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/advanced/using-viem",children:"viem"})," for this."]}),`
`]}),`
`,a.jsxs(e.p,{children:["Now we are ready to deploy and test the contract. In the test environment this is quite straightforward as described ",a.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/deploying",children:"here"}),". But as you would like to deploy the contract to a real network, you need to set up a few things as described ",a.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/verifying",children:"here"}),". First, you need to create an account on ",a.jsx(e.a,{href:"https://www.alchemy.com/",children:"Alchemy"})," and get an API key. Then we can once again deploy the contract to the network of my choice, which was Optimism."]}),`
`,a.jsxs(e.p,{children:["Finally, we need to verify the contract on the blockchain. This is important as it allows others to see the code and verify that it is working as expected. Here again we need to set up a few things. First, you need to create an account on ",a.jsx(e.a,{href:"https://etherscan.io/",children:"Etherscan"})," and get an API key. Then, you need to set up the ",a.jsx(e.code,{children:"ETHERSCAN_API_KEY"})," environment variable with your API key."]}),`
`,a.jsx(e.h3,{children:"The Optimism chain"}),`
`,a.jsx(e.p,{children:"One of the crucial points for the support button was that it must not be too costly to use. On the Ethereum mainnet, I have frequently encountered gas fees of 20-50 USD. This would have been prohibitive for a simple like button."}),`
`,a.jsx(e.p,{children:'Every blockchain transaction requires computational resources that must be paid for with "gas fees." These fees represent the cost of having your transaction processed and validated by the network:'}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"On Ethereum's mainnet, high demand for block space drives fees to levels that make micro-transactions impractical"}),`
`,a.jsx(e.li,{children:"When gas costs $20-50 per transaction, sending a $0.50 support donation becomes economically absurd"}),`
`,a.jsx(e.li,{children:"Layer 2 solutions like Optimism process transactions in batches and post the cryptographic proof to Ethereum, distributing that mainnet gas cost across many transactions."}),`
`]}),`
`,a.jsxs(e.p,{children:["Therefore, I decided to investigate layer-2 alternatives, which promise much lower fees. As I investigated the major alternatives, I came across ",a.jsx(e.a,{href:"https://www.base.org/",children:"Base"}),", ",a.jsx(e.a,{href:"https://arbitrum.io/",children:"Arbitrum"}),", ",a.jsx(e.a,{href:"https://www.optimism.io/",children:"Optimism"})," and ",a.jsx(e.a,{href:"https://linea.build/",children:"Linea"}),". All of them seemed fairly mature with slightly different focuses. Base is closely aligned with Coinbase, which makes it a bit less attractive for me. Linea seemed to be still quite new and not as widely adopted. Optimism on the other hand has some nice documententation, a strong community focus and a lot of projects already running on it. So I decided to go with Optimism."]}),`
`,a.jsxs(e.p,{children:["You can see all the details for the deployed contract and activity on ",a.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x314b07fbd33a7343479e99e6682d5ee1da7f17c1",children:"Optimism Etherscan"}),"."]}),`
`,a.jsx(e.h2,{children:"The frontend"}),`
`,a.jsxs(e.p,{children:["After I had the smart contract up and running, I needed to integrate it into the website. I decided to integrate it via ",a.jsx(e.a,{href:"https://wagmi.sh/",children:"wagmi"}),", which is a library that makes it easy to interact with Ethereum from a react app. It provides a simple API for connecting to wallets, sending transactions, and reading data from the blockchain. It is also built around ",a.jsx(e.a,{href:"https://viem.sh/",children:"viem"}),", which is a library for interacting with Ethereum in a type-safe way. This makes it easy to work with the blockchain and ensures that the code is safe and secure."]}),`
`,a.jsx(e.p,{children:"The integration itself, involved two parts:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"the connection to the wallet."}),`
`,a.jsx(e.li,{children:"the button itself."}),`
`]}),`
`,a.jsx(e.h3,{children:"The wallet connection"}),`
`,a.jsxs(e.p,{children:["To set up the wallet, I followed quite closely the ",a.jsx(e.a,{href:"https://wagmi.sh/react/getting-started",children:"wagmi documentation"}),". However, I am using ",a.jsx(e.code,{children:"vike"})," and there is no ",a.jsx(e.code,{children:"App.tsx"}),". So the integration is a bit different. I was able to activate ",a.jsx(e.code,{children:"tanstack-query"})," with the ",a.jsx(e.a,{href:"https://vike.dev/tanstack-query",children:"official plugin"}),". To wrap Wagmi itself, I hooked into the ",a.jsx(e.code,{children:"LayoutDefault.tsx"})," component, which worked out quite nicely. For the rest I could simply follow the very simple and straight forward guide ",a.jsx(e.a,{href:"https://wagmi.sh/react/guides/connect-wallet",children:"here"}),". I had a quick look into the different kits, but wanted to learn things for myself at this stage. If I ever decide to use one of the kits, I will likely try out ",a.jsx(e.a,{href:"https://appkit.dev/",children:"AppKit"})," first."]}),`
`,a.jsx(e.h3,{children:"The support button"}),`
`,a.jsxs(e.p,{children:["Now that the wallet was set up, I could directly integrate the support button. This was also surprisingly straight forward as I could simply follow the documentation on how to ",a.jsx(e.a,{href:"https://wagmi.sh/react/guides/write-to-contract",children:"write"})," and ",a.jsx(e.a,{href:"https://wagmi.sh/react/guides/read-from-contract",children:"read"})," small contracts. To get the number of supports, I simply call the ",a.jsx(e.code,{children:"getLikesForUrl"})," function of the smart contract. To support the content, I call the ",a.jsx(e.code,{children:"donate"})," function of the smart contract. That's it. As every developer in the world, I spent too much time one the styling of the button, but otherwise it was simply an enjoyable experience."]}),`
`,a.jsx(e.h2,{children:"My main learnings"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Fees on L2 chains are really low now. A transfer of 50 cents sometimes costs less than 1 cent in gas fees. So this problem is really pretty much solved for now and L2s are really usable."}),`
`,a.jsx(e.li,{children:"The development experience is really quite nice. Backend and frontend are nicely separated etc."}),`
`,a.jsx(e.li,{children:"The biggest question for me will be how the whole transfer to L2 chains will work out in the long term."}),`
`,a.jsx(e.li,{children:"I will continue to play with similiar applications as soon as I think about some kind of transfers."}),`
`]}),`
`,a.jsx(e.h2,{children:"A small look into the future"}),`
`,a.jsx(e.p,{children:"I learned a few things that I would likely change in the future. I have mainly two things in mind."}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:["First, I would like to make sure that the contract is ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/writing-upgradeable",children:"upgradable"}),". While it would make the initial deployment process more complex, it would make the entire system much easier to maintain in the long run."]}),`
`,a.jsx(e.li,{children:"Second, I would most likely make it possible to select the adress of the recipient. This would also allow others to use the same contract and make the whole thing a bit more generic."}),`
`]}),`
`,a.jsx(e.p,{children:"So I hope that you enjoyed the post. Comments as usual below. And any support through the support button is highly appreciated."})]})}function IW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Rw,{...t})}):Rw(t)}const Nw=Object.freeze(Object.defineProperty({__proto__:null,default:IW,frontmatter:AW},Symbol.toStringTag,{value:"Module"})),MW={publishing_date:"2025-03-11",title:"Can I have interactive python pages ?",category:"quantum",secondaryCategory:"webdev",description:"I explore the future of interactive content with Python running directly in browsers. Tools like Pyodide and JupyterLite enable portable, installation-free data science."};function Dw(t){const e={a:"a",code:"code",em:"em",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["_The original post on mirror can be found ",a.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/iglgKZeAeHcUc_-Ya9cjQQ1vUNqhJTRUswredn-53e8?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"._"]}),`
`,a.jsxs(e.p,{children:["One of my main motivations to start this website was to consolidate different lectures, writings and other things that accumulated over the years in different places. The first project was to actually move my AMO lectures. This is now finished and can be found over ",a.jsx(e.a,{href:"https://www.fretchen.eu/amo",children:"here"}),". I started with this as it was a really simple test case without anything interactive components."]}),`
`,a.jsxs(e.p,{children:["However, I have a few more projects which are really based on ",a.jsx(e.a,{href:"https://jupyter.org/",children:"jupyter"})," notebooks. jupyter notebooks are just a fantastic tool to combine notes with simple visualizations and the ",a.jsx(e.a,{href:"https://jupyterbook.org",children:"jupyter book"}),' project is really a great way to publish them. The only "annoying" drawback has been for years that you have to somehow download the notebook and run it locally or go into some service like ',a.jsx(e.a,{href:"https://mybinder.org/",children:"binder"}),"."]}),`
`,a.jsxs(e.p,{children:["The rise of python in the browser actually promises to changes that at some point. What does this mean ? Projects like ",a.jsx(e.a,{href:"https://github.com/jupyterlite",children:"jupyterlite"})," allow you to run the full jupyter experience without any installation. And tools like ",a.jsx(e.a,{href:"https://pyodide.org/en/stable/",children:"pyodide"})," bring python directly into the brower. Just python programming without the cloud, or any installation. It all just runs in the browser. This would make the jupyter notebooks that I loved so extremely portable. And actually, there are now package that attempt to connect this directly to ",a.jsx(e.a,{href:"https://github.com/elilambnz/react-py",children:"react"}),". If this worked out I would have:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"A blog that is written in markdown."}),`
`,a.jsx(e.li,{children:"The possibility to add small python snippets directly into the blog."}),`
`,a.jsx(e.li,{children:"All of this part of a website without the need to install anything."}),`
`]}),`
`,a.jsxs(e.p,{children:["I gave all of this a try and ",a.jsx(e.code,{children:"react-py"})," looked particularly interesting. However, the ecosystem still seems fairly young and it was super painful to get even the simplest examples to run. I must admit that I gave up for the moment, when I understood that pyodide and hence ",a.jsx(e.code,{children:"react-py"})," does always require a ",a.jsx(e.a,{href:"https://pyodide.org/en/latest/usage/working-with-bundlers.html",children:"build for tests"}),". Having it in ",a.jsx(e.code,{children:"dev"})," would have been a minimum to make it an enjoyable experience."]}),`
`,a.jsxs(e.p,{children:["So for the moment I will most likely just transform the jupyter notebooks into react / plein markdown and then see how the ecosystem evolves. But kudos to the people behind ",a.jsx(e.em,{children:"python-in-the-browser"}),". This is a super exciting development for all kind of data science and will make the ecosystem much more decentralized and accessible. Any suggestions or additional information ? Then just leave them in the comments below."]})]})}function LW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Dw,{...t})}):Dw(t)}const Bw=Object.freeze(Object.defineProperty({__proto__:null,default:LW,frontmatter:MW},Symbol.toStringTag,{value:"Module"})),OW={publishing_date:"2024-12-02",title:"Hello World",tokenID:2,category:"others",description:"I welcome you to my personal blog exploring technology, blockchain, and creative coding. Expect insights on modern web development, decentralized systems, and innovative digital experiences."};function Pw(t){const e={p:"p",...t.components};return a.jsx(e.p,{children:"This is the first post. It shows that the whole thing is working out nicely."})}function RW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Pw,{...t})}):Pw(t)}const Fw=Object.freeze(Object.defineProperty({__proto__:null,default:RW,frontmatter:OW},Symbol.toStringTag,{value:"Module"})),NW={publishing_date:"2025-04-06",title:"Running an image generator",category:"ai",description:"I build my own AI image generator using open-source models and European hosting. See how to integrate Stable Diffusion into static websites with full privacy and cost control."};function Hw(t){const e={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["Just as about every other person on the planet, I have been playing around with ",a.jsx(e.a,{href:"https://stability.ai/",children:"stable diffusion"})," and other image generators. But I personally do not care too much about the exact details, which model is best etc. I wanted to have my own personal system. I made some good progress on it and I felt that it could be time to share some of my findings."]}),`
`,a.jsx(e.h2,{children:"My goal"}),`
`,a.jsx(e.p,{children:"When I set up my system, I started with a few conditions:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"I want it to be accessible really easily my own website, which is static."}),`
`,a.jsx(e.li,{children:"I want to use open source models."}),`
`,a.jsx(e.li,{children:"The infrastructure to run the system should be hosted in Europe."}),`
`,a.jsx(e.li,{children:"At some point I must be able to limit access to the system or let people pay for it."}),`
`]}),`
`,a.jsx(e.h2,{children:"Using model for image generation"}),`
`,a.jsxs(e.p,{children:["To generate the images I need to have some back-end that is non-static and that I can easily call through some API. Several options exist, but for the moment I really like the system by ",a.jsx(e.a,{href:"https://cloud.ionos.de/managed/ai-model-hub",children:"Ionos"}),". It is a straight-forward API with several open source models for image generation like ",a.jsx(e.a,{href:"https://stability.ai/",children:"Stable Diffusion"})," or FLUX. The system is hosted in Europe, which I personally like these days and the costs are ok. You can get started within minutes on a local setup."]}),`
`,a.jsx(e.h2,{children:"Using the model in a static website"}),`
`,a.jsxs(e.p,{children:["However, to use the model you need to have some kind of API key. And on a static website there is no really nice way to store such keys. Therefore, I decided to go with a serverless setup. Here, I must admit that I was surprised how hard it was to find something that was not run by an American company. If you go with the American companies you have an almost infinite choice between Amazon, Vercel and so on. However, on the European side, I could only find ",a.jsx(e.a,{href:"https://www.scaleway.com/en/",children:"Scaleway"})," with their functions. This setup works quite nicely. Now I have a simple website that calls Scaleway, which then calls the Ionos API and returns the image. The whole thing is hosted in Europe."]}),`
`,a.jsx(e.h2,{children:"Decentral payments"}),`
`,a.jsx(e.p,{children:"The generation of each image has a cost of less than one euro. However, somehow I need to pass the cost to the user. I really do not want to go with weird advertisement things. So I could go with some traditional payment services. However, it would be substantially more fun to use some web3 payment. I am now quite sure that ChainLink functions are an interesting way to go. It is just a slightly steep learning curve and a fairly new technology. Let's see how it goes. I will keep you updated on the progress."})]})}function DW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Hw,{...t})}):Hw(t)}const zw=Object.freeze(Object.defineProperty({__proto__:null,default:DW,frontmatter:NW},Symbol.toStringTag,{value:"Module"})),BW={publishing_date:"2025-01-18",title:"Are decentral websites a thing for me ?",category:"webdev",secondaryCategory:"blockchain",description:"I explore decentralized web hosting using ENS domains and IPFS storage. Discover how blockchain enables censorship-resistant websites without traditional hosting companies."};function qw(t){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:['Over the last few years, I kept wondering what it might mean to host a "decentral" website very much like it is possible to decentralize certain financial services through smart contracts ',a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),". What would be needed ?"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"A decentral domain provider."}),`
`,a.jsx(e.li,{children:"A simple way to update the website."}),`
`,a.jsx(e.li,{children:"A decentralized storage system."}),`
`]}),`
`,a.jsx(e.p,{children:"As we will see the first and last part are fairly straight-forward. For the decentral storage I continue to have some doubts."}),`
`,a.jsx(e.h2,{children:"Get an ENS domain"}),`
`,a.jsxs(e.p,{children:["Normally, each website is hosted on some servers and you can access them through some domain. Currently, this website is hosted by github, which also delivers me directly the domain address. And behind Github is simply a big company which handles the domain registration for me. If I want to go decentral, I try to avoid this company and simply register the domain on a blockchain. This is already possible with ",a.jsx(e.a,{href:"https://ens.domains/",children:"ENS"}),". This is a great start as it gets us closer to have some fancy adress like ",a.jsx(e.code,{children:"fretchen.eth"}),". To get this I needed to set up a wallet, where ",a.jsx(e.a,{href:"https://metamask.io/",children:"Metamask"})," seems to be the absolute standard nowadays. Once I have the wallet, I need to convert normal currency into the currency of the Blockchain, which is here ",a.jsx(e.a,{href:"https://ethereum.org/en/",children:"ethereum"})," ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"."]}),`
`,a.jsxs(e.p,{children:["To buy the ethereum, I had to go through ",a.jsx(e.a,{href:"https://www.kraken.com",children:"Kraken"})," and then send myself the ETH into the Metamask wallet. With the ETH I could quite simply register the domain of my choice with ",a.jsx(e.a,{href:"https://ens.domains/",children:"ENS"}),". The purchase itself is fairly straight-forward and interestingly the domain is implemented as an NFT. This is the tech that is mostly used to allow people to claim ownership for weird pictures of bored apes. Here, it basically gets you exclusive access rights to the domain, which actually sounds quite smart. The other cool thing is that ",a.jsx(e.code,{children:"ens.domains"})," is a DAO. So there is no single authority controlling it, but a community of people. Another fairly cool feature."]}),`
`,a.jsx(e.h2,{children:"A simple way to update the website"}),`
`,a.jsxs(e.p,{children:["This is the part where it started to get slightly non-trivial. In the centralized world we have simple no-code systems like ",a.jsx(e.a,{href:"https://wordpress.org/",children:"wordpress"})," that run on a server. All of this is not really available on decentral systes. So we need some way to fall back into static website generation very much like I do here. But once, you can host a static website on ",a.jsx(e.a,{href:"https://pages.github.com/",children:"github pages"}),", it should also be theoretically ready to host it decentrally. Given that this is clearly solved (otherwise you would not read this), it was time to try to get this onto the block-chain."]}),`
`,a.jsx(e.h2,{children:"A decentralized storage system"}),`
`,a.jsxs(e.p,{children:['And this is now the part which was really quite annoying. At first, you think "Let me put it onto the blockchain". Well you quite quickly realize that this is totally cost-prohibitive and that you need some kind of alternative. The most famous and commonly used solution there is the ',a.jsx(e.a,{href:"https://ipfs.tech/",children:"IPFS"}),". As you put a file / folder into the IPFS it gets a CID and becomes discoverable for others. But in contrast to systems like ethereum it feels quite different:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Either you have to run your own IPFS node, which is quite a bit of work. I never was able to have relible notes with acceptable download speeds."}),`
`,a.jsxs(e.li,{children:["Or you use a service like ",a.jsx(e.a,{href:"https://pinata.cloud/",children:"Pinata"}),", which is a centralized service that pins your files for you. This is quite a bit of a bummer, as it is not really decentralized anymore. Further you mostly have to pay through dollars etc. So there is really no clear difference to the world of standard cloud storages there."]}),`
`]}),`
`,a.jsx(e.h2,{children:"Conclusion"}),`
`,a.jsx(e.p,{children:"And this is also the moment at which I wrote this blog post. I could now try to pay for the pinning service, put the CID onto eth.domains and claim some decentralized website. But what did I win ?"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The service is still quite centralized."}),`
`,a.jsx(e.li,{children:"I have really slow site accessbility."}),`
`]}),`
`,a.jsxs(e.p,{children:["So I am really not sure if I will go down this road any further at this stage. I keep wondering how the master himself handles the storage of ",a.jsx(e.a,{href:"https://vitalik.eth.limo/",children:"his blog"}),". But I guess I will have to keep on reading and keep waiting for helpful insights."]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,a.jsxs(e.p,{children:["The stuff done on ",a.jsx(e.a,{href:"https://app.uniswap.org/",children:"Uniswap"})," for example is quite impressive. ",a.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:["From my understanding Ethereum is THE biggest blockchain, which allows you to run smart contracts and quite energy efficient. It feels a bit like the Linux of the blockchain world. ",a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function PW(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(qw,{...t})}):qw(t)}const Ww=Object.freeze(Object.defineProperty({__proto__:null,default:PW,frontmatter:BW},Symbol.toStringTag,{value:"Module"}));var Uw={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},Lu={exports:{}},FW=Lu.exports,Vw;function HW(){return Vw||(Vw=1,function(t,e){(function(n,r){t.exports=r()})(FW,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",l="minute",c="hour",h="day",u="week",d="month",f="quarter",p="year",m="date",g="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var O=["th","st","nd","rd"],F=A%100;return"["+A+(O[(F-20)%10]||O[F]||O[0])+"]"}},S=function(A,O,F){var Y=String(A);return!Y||Y.length>=O?A:""+Array(O+1-Y.length).join(F)+A},E={s:S,z:function(A){var O=-A.utcOffset(),F=Math.abs(O),Y=Math.floor(F/60),Q=F%60;return(O<=0?"+":"-")+S(Y,2,"0")+":"+S(Q,2,"0")},m:function A(O,F){if(O.date()<F.date())return-A(F,O);var Y=12*(F.year()-O.year())+(F.month()-O.month()),Q=O.clone().add(Y,d),z=F-Q<0,j=O.clone().add(Y+(z?-1:1),d);return+(-(Y+(F-Q)/(z?Q-j:j-Q))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:d,y:p,w:u,d:h,D:m,h:c,m:l,s:o,ms:s,Q:f}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},T="en",C={};C[T]=w;var M="$isDayjsObject",R=function(A){return A instanceof q||!(!A||!A[M])},D=function A(O,F,Y){var Q;if(!O)return T;if(typeof O=="string"){var z=O.toLowerCase();C[z]&&(Q=z),F&&(C[z]=F,Q=z);var j=O.split("-");if(!Q&&j.length>1)return A(j[0])}else{var Z=O.name;C[Z]=O,Q=Z}return!Y&&Q&&(T=Q),Q||!Y&&T},$=function(A,O){if(R(A))return A.clone();var F=typeof O=="object"?O:{};return F.date=A,F.args=arguments,new q(F)},L=E;L.l=D,L.i=R,L.w=function(A,O){return $(A,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var q=function(){function A(F){this.$L=D(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[M]=!0}var O=A.prototype;return O.parse=function(F){this.$d=function(Y){var Q=Y.date,z=Y.utc;if(Q===null)return new Date(NaN);if(L.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var j=Q.match(b);if(j){var Z=j[2]-1||0,te=(j[7]||"0").substring(0,3);return z?new Date(Date.UTC(j[1],Z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,te)):new Date(j[1],Z,j[3]||1,j[4]||0,j[5]||0,j[6]||0,te)}}return new Date(Q)}(F),this.init()},O.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},O.$utils=function(){return L},O.isValid=function(){return this.$d.toString()!==g},O.isSame=function(F,Y){var Q=$(F);return this.startOf(Y)<=Q&&Q<=this.endOf(Y)},O.isAfter=function(F,Y){return $(F)<this.startOf(Y)},O.isBefore=function(F,Y){return this.endOf(Y)<$(F)},O.$g=function(F,Y,Q){return L.u(F)?this[Y]:this.set(Q,F)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(F,Y){var Q=this,z=!!L.u(Y)||Y,j=L.p(F),Z=function(we,Re){var He=L.w(Q.$u?Date.UTC(Q.$y,Re,we):new Date(Q.$y,Re,we),Q);return z?He:He.endOf(h)},te=function(we,Re){return L.w(Q.toDate()[we].apply(Q.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(Re)),Q)},N=this.$W,U=this.$M,J=this.$D,se="set"+(this.$u?"UTC":"");switch(j){case p:return z?Z(1,0):Z(31,11);case d:return z?Z(1,U):Z(0,U+1);case u:var be=this.$locale().weekStart||0,xe=(N<be?N+7:N)-be;return Z(z?J-xe:J+(6-xe),U);case h:case m:return te(se+"Hours",0);case c:return te(se+"Minutes",1);case l:return te(se+"Seconds",2);case o:return te(se+"Milliseconds",3);default:return this.clone()}},O.endOf=function(F){return this.startOf(F,!1)},O.$set=function(F,Y){var Q,z=L.p(F),j="set"+(this.$u?"UTC":""),Z=(Q={},Q[h]=j+"Date",Q[m]=j+"Date",Q[d]=j+"Month",Q[p]=j+"FullYear",Q[c]=j+"Hours",Q[l]=j+"Minutes",Q[o]=j+"Seconds",Q[s]=j+"Milliseconds",Q)[z],te=z===h?this.$D+(Y-this.$W):Y;if(z===d||z===p){var N=this.clone().set(m,1);N.$d[Z](te),N.init(),this.$d=N.set(m,Math.min(this.$D,N.daysInMonth())).$d}else Z&&this.$d[Z](te);return this.init(),this},O.set=function(F,Y){return this.clone().$set(F,Y)},O.get=function(F){return this[L.p(F)]()},O.add=function(F,Y){var Q,z=this;F=Number(F);var j=L.p(Y),Z=function(U){var J=$(z);return L.w(J.date(J.date()+Math.round(U*F)),z)};if(j===d)return this.set(d,this.$M+F);if(j===p)return this.set(p,this.$y+F);if(j===h)return Z(1);if(j===u)return Z(7);var te=(Q={},Q[l]=r,Q[c]=i,Q[o]=n,Q)[j]||1,N=this.$d.getTime()+F*te;return L.w(N,this)},O.subtract=function(F,Y){return this.add(-1*F,Y)},O.format=function(F){var Y=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||g;var z=F||"YYYY-MM-DDTHH:mm:ssZ",j=L.z(this),Z=this.$H,te=this.$m,N=this.$M,U=Q.weekdays,J=Q.months,se=Q.meridiem,be=function(Re,He,ft,pt){return Re&&(Re[He]||Re(Y,z))||ft[He].slice(0,pt)},xe=function(Re){return L.s(Z%12||12,Re,"0")},we=se||function(Re,He,ft){var pt=Re<12?"AM":"PM";return ft?pt.toLowerCase():pt};return z.replace(y,function(Re,He){return He||function(ft){switch(ft){case"YY":return String(Y.$y).slice(-2);case"YYYY":return L.s(Y.$y,4,"0");case"M":return N+1;case"MM":return L.s(N+1,2,"0");case"MMM":return be(Q.monthsShort,N,J,3);case"MMMM":return be(J,N);case"D":return Y.$D;case"DD":return L.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return be(Q.weekdaysMin,Y.$W,U,2);case"ddd":return be(Q.weekdaysShort,Y.$W,U,3);case"dddd":return U[Y.$W];case"H":return String(Z);case"HH":return L.s(Z,2,"0");case"h":return xe(1);case"hh":return xe(2);case"a":return we(Z,te,!0);case"A":return we(Z,te,!1);case"m":return String(te);case"mm":return L.s(te,2,"0");case"s":return String(Y.$s);case"ss":return L.s(Y.$s,2,"0");case"SSS":return L.s(Y.$ms,3,"0");case"Z":return j}return null}(Re)||j.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(F,Y,Q){var z,j=this,Z=L.p(Y),te=$(F),N=(te.utcOffset()-this.utcOffset())*r,U=this-te,J=function(){return L.m(j,te)};switch(Z){case p:z=J()/12;break;case d:z=J();break;case f:z=J()/3;break;case u:z=(U-N)/6048e5;break;case h:z=(U-N)/864e5;break;case c:z=U/i;break;case l:z=U/r;break;case o:z=U/n;break;default:z=U}return Q?z:L.a(z)},O.daysInMonth=function(){return this.endOf(d).$D},O.$locale=function(){return C[this.$L]},O.locale=function(F,Y){if(!F)return this.$L;var Q=this.clone(),z=D(F,Y,!0);return z&&(Q.$L=z),Q},O.clone=function(){return L.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},A}(),P=q.prototype;return $.prototype=P,[["$ms",s],["$s",o],["$m",l],["$H",c],["$W",h],["$M",d],["$y",p],["$D",m]].forEach(function(A){P[A[1]]=function(O){return this.$g(O,A[0],A[1])}}),$.extend=function(A,O){return A.$i||(A(O,q,$),A.$i=!0),$},$.locale=D,$.isDayjs=R,$.unix=function(A){return $(1e3*A)},$.en=C[T],$.Ls=C,$.p={},$})}(Lu)),Lu.exports}var zW=HW();const qW=D1(zW);var Z$=Object.defineProperty,v=(t,e)=>Z$(t,"name",{value:e,configurable:!0}),WW=(t,e)=>{for(var n in e)Z$(t,n,{get:e[n],enumerable:!0})},zi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},ce={trace:v((...t)=>{},"trace"),debug:v((...t)=>{},"debug"),info:v((...t)=>{},"info"),warn:v((...t)=>{},"warn"),error:v((...t)=>{},"error"),fatal:v((...t)=>{},"fatal")},Cb=v(function(t="fatal"){let e=zi.fatal;typeof t=="string"?t.toLowerCase()in zi&&(e=zi[t]):typeof t=="number"&&(e=t),ce.trace=()=>{},ce.debug=()=>{},ce.info=()=>{},ce.warn=()=>{},ce.error=()=>{},ce.fatal=()=>{},e<=zi.fatal&&(ce.fatal=console.error?console.error.bind(console,Er("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Er("FATAL"))),e<=zi.error&&(ce.error=console.error?console.error.bind(console,Er("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Er("ERROR"))),e<=zi.warn&&(ce.warn=console.warn?console.warn.bind(console,Er("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Er("WARN"))),e<=zi.info&&(ce.info=console.info?console.info.bind(console,Er("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Er("INFO"))),e<=zi.debug&&(ce.debug=console.debug?console.debug.bind(console,Er("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Er("DEBUG"))),e<=zi.trace&&(ce.trace=console.debug?console.debug.bind(console,Er("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Er("TRACE")))},"setLogLevel"),Er=v(t=>`%c${qW().format("ss.SSS")} : ${t} : `,"format");const Ou={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},r)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const i=n<.5?n*(1+e):n+e-n*e,s=2*n-i;switch(r){case"r":return Ou.hue2rgb(s,i,t+1/3)*255;case"g":return Ou.hue2rgb(s,i,t)*255;case"b":return Ou.hue2rgb(s,i,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),s=Math.min(t,e,n),o=(i+s)/2;if(r==="l")return o*100;if(i===s)return 0;const l=i-s,c=o>.5?l/(2-i-s):l/(i+s);if(r==="s")return c*100;switch(i){case t:return((e-n)/l+(e<n?6:0))*60;case e:return((n-t)/l+2)*60;case n:return((t-e)/l+4)*60;default:return-1}}},UW={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},VW={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},Xe={channel:Ou,lang:UW,unit:VW},Ea={};for(let t=0;t<=255;t++)Ea[t]=Xe.unit.dec2hex(t);const kn={ALL:0,RGB:1,HSL:2};class YW{constructor(){this.type=kn.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=kn.ALL}is(e){return this.type===e}}class GW{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new YW}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=kn.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:r,l:i}=e;n===void 0&&(e.h=Xe.channel.rgb2hsl(e,"h")),r===void 0&&(e.s=Xe.channel.rgb2hsl(e,"s")),i===void 0&&(e.l=Xe.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:r,b:i}=e;n===void 0&&(e.r=Xe.channel.hsl2rgb(e,"r")),r===void 0&&(e.g=Xe.channel.hsl2rgb(e,"g")),i===void 0&&(e.b=Xe.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(kn.HSL)&&n!==void 0?n:(this._ensureHSL(),Xe.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(kn.HSL)&&n!==void 0?n:(this._ensureHSL(),Xe.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(kn.HSL)&&n!==void 0?n:(this._ensureHSL(),Xe.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(kn.RGB)&&n!==void 0?n:(this._ensureRGB(),Xe.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(kn.RGB)&&n!==void 0?n:(this._ensureRGB(),Xe.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(kn.RGB)&&n!==void 0?n:(this._ensureRGB(),Xe.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(kn.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(kn.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(kn.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(kn.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(kn.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(kn.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const wf=new GW({r:0,g:0,b:0,a:0},"transparent"),wo={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(wo.re);if(!e)return;const n=e[1],r=parseInt(n,16),i=n.length,s=i%4===0,o=i>4,l=o?1:17,c=o?8:4,h=s?0:-1,u=o?255:15;return wf.set({r:(r>>c*(h+3)&u)*l,g:(r>>c*(h+2)&u)*l,b:(r>>c*(h+1)&u)*l,a:s?(r&u)*l/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`#${Ea[Math.round(e)]}${Ea[Math.round(n)]}${Ea[Math.round(r)]}${Ea[Math.round(i*255)]}`:`#${Ea[Math.round(e)]}${Ea[Math.round(n)]}${Ea[Math.round(r)]}`}},ys={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(ys.hueRe);if(e){const[,n,r]=e;switch(r){case"grad":return Xe.channel.clamp.h(parseFloat(n)*.9);case"rad":return Xe.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return Xe.channel.clamp.h(parseFloat(n)*360)}}return Xe.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(ys.re);if(!n)return;const[,r,i,s,o,l]=n;return wf.set({h:ys._hue2deg(r),s:Xe.channel.clamp.s(parseFloat(i)),l:Xe.channel.clamp.l(parseFloat(s)),a:o?Xe.channel.clamp.a(l?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${Xe.lang.round(e)}, ${Xe.lang.round(n)}%, ${Xe.lang.round(r)}%, ${i})`:`hsl(${Xe.lang.round(e)}, ${Xe.lang.round(n)}%, ${Xe.lang.round(r)}%)`}},Cc={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Cc.colors[t];if(e)return wo.parse(e)},stringify:t=>{const e=wo.stringify(t);for(const n in Cc.colors)if(Cc.colors[n]===e)return n}},ac={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match(ac.re);if(!n)return;const[,r,i,s,o,l,c,h,u]=n;return wf.set({r:Xe.channel.clamp.r(i?parseFloat(r)*2.55:parseFloat(r)),g:Xe.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:Xe.channel.clamp.b(c?parseFloat(l)*2.55:parseFloat(l)),a:h?Xe.channel.clamp.a(u?parseFloat(h)/100:parseFloat(h)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${Xe.lang.round(e)}, ${Xe.lang.round(n)}, ${Xe.lang.round(r)}, ${Xe.lang.round(i)})`:`rgb(${Xe.lang.round(e)}, ${Xe.lang.round(n)}, ${Xe.lang.round(r)})`}},ji={format:{keyword:Cc,hex:wo,rgb:ac,rgba:ac,hsl:ys,hsla:ys},parse:t=>{if(typeof t!="string")return t;const e=wo.parse(t)||ac.parse(t)||ys.parse(t)||Cc.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(kn.HSL)||t.data.r===void 0?ys.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?ac.stringify(t):wo.stringify(t)},eE=(t,e)=>{const n=ji.parse(t);for(const r in e)n[r]=Xe.channel.clamp[r](e[r]);return ji.stringify(n)},Ac=(t,e,n=0,r=1)=>{if(typeof t!="number")return eE(t,{a:e});const i=wf.set({r:Xe.channel.clamp.r(t),g:Xe.channel.clamp.g(e),b:Xe.channel.clamp.b(n),a:Xe.channel.clamp.a(r)});return ji.stringify(i)},XW=t=>{const{r:e,g:n,b:r}=ji.parse(t),i=.2126*Xe.channel.toLinear(e)+.7152*Xe.channel.toLinear(n)+.0722*Xe.channel.toLinear(r);return Xe.lang.round(i)},JW=t=>XW(t)>=.5,_h=t=>!JW(t),tE=(t,e,n)=>{const r=ji.parse(t),i=r[e],s=Xe.channel.clamp[e](i+n);return i!==s&&(r[e]=s),ji.stringify(r)},Ce=(t,e)=>tE(t,"l",e),Fe=(t,e)=>tE(t,"l",-e),re=(t,e)=>{const n=ji.parse(t),r={};for(const i in e)e[i]&&(r[i]=n[i]+e[i]);return eE(t,r)},QW=(t,e,n=50)=>{const{r,g:i,b:s,a:o}=ji.parse(t),{r:l,g:c,b:h,a:u}=ji.parse(e),d=n/100,f=d*2-1,p=o-u,g=((f*p===-1?f:(f+p)/(1+f*p))+1)/2,b=1-g,y=r*g+l*b,w=i*g+c*b,S=s*g+h*b,E=o*d+u*(1-d);return Ac(y,w,S,E)},ke=(t,e=100)=>{const n=ji.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,QW(n,t,e)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:nE,setPrototypeOf:Yw,isFrozen:KW,getPrototypeOf:ZW,getOwnPropertyDescriptor:eU}=Object;let{freeze:Wn,seal:Dr,create:rE}=Object,{apply:Tg,construct:kg}=typeof Reflect<"u"&&Reflect;Wn||(Wn=function(e){return e});Dr||(Dr=function(e){return e});Tg||(Tg=function(e,n,r){return e.apply(n,r)});kg||(kg=function(e,n){return new e(...n)});const eu=Un(Array.prototype.forEach),tU=Un(Array.prototype.lastIndexOf),Gw=Un(Array.prototype.pop),El=Un(Array.prototype.push),nU=Un(Array.prototype.splice),Ru=Un(String.prototype.toLowerCase),Z0=Un(String.prototype.toString),Xw=Un(String.prototype.match),jl=Un(String.prototype.replace),rU=Un(String.prototype.indexOf),iU=Un(String.prototype.trim),Qr=Un(Object.prototype.hasOwnProperty),Bn=Un(RegExp.prototype.test),Cl=aU(TypeError);function Un(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Tg(t,e,r)}}function aU(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return kg(t,n)}}function ot(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ru;Yw&&Yw(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(KW(e)||(e[r]=s),i=s)}t[i]=!0}return t}function sU(t){for(let e=0;e<t.length;e++)Qr(t,e)||(t[e]=null);return t}function Xi(t){const e=rE(null);for(const[n,r]of nE(t))Qr(t,n)&&(Array.isArray(r)?e[n]=sU(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Xi(r):e[n]=r);return e}function Al(t,e){for(;t!==null;){const r=eU(t,e);if(r){if(r.get)return Un(r.get);if(typeof r.value=="function")return Un(r.value)}t=ZW(t)}function n(){return null}return n}const Jw=Wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ep=Wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),tp=Wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),oU=Wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),np=Wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lU=Wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Qw=Wn(["#text"]),Kw=Wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),rp=Wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zw=Wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tu=Wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cU=Dr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hU=Dr(/<%[\w\W]*|[\w\W]*%>/gm),uU=Dr(/\$\{[\w\W]*/gm),dU=Dr(/^data-[\-\w.\u00B7-\uFFFF]+$/),fU=Dr(/^aria-[\-\w]+$/),iE=Dr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pU=Dr(/^(?:\w+script|data):/i),mU=Dr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aE=Dr(/^html$/i),gU=Dr(/^[a-z][.\w]*(-[.\w]+)+$/i);var e_=Object.freeze({__proto__:null,ARIA_ATTR:fU,ATTR_WHITESPACE:mU,CUSTOM_ELEMENT:gU,DATA_ATTR:dU,DOCTYPE_NAME:aE,ERB_EXPR:hU,IS_ALLOWED_URI:iE,IS_SCRIPT_OR_DATA:pU,MUSTACHE_EXPR:cU,TMPLIT_EXPR:uU});const Il={element:1,text:3,progressingInstruction:7,comment:8,document:9},bU=function(){return typeof window>"u"?null:window},yU=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},t_=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function sE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bU();const e=Be=>sE(Be);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Il.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:h,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:p}=t,m=c.prototype,g=Al(m,"cloneNode"),b=Al(m,"remove"),y=Al(m,"nextSibling"),w=Al(m,"childNodes"),S=Al(m,"parentNode");if(typeof o=="function"){const Be=n.createElement("template");Be.content&&Be.content.ownerDocument&&(n=Be.content.ownerDocument)}let E,T="";const{implementation:C,createNodeIterator:M,createDocumentFragment:R,getElementsByTagName:D}=n,{importNode:$}=r;let L=t_();e.isSupported=typeof nE=="function"&&typeof S=="function"&&C&&C.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:P,TMPLIT_EXPR:A,DATA_ATTR:O,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:z}=e_;let{IS_ALLOWED_URI:j}=e_,Z=null;const te=ot({},[...Jw,...ep,...tp,...np,...Qw]);let N=null;const U=ot({},[...Kw,...rp,...Zw,...tu]);let J=Object.seal(rE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),se=null,be=null,xe=!0,we=!0,Re=!1,He=!0,ft=!1,pt=!0,Ut=!1,xt=!1,mt=!1,Et=!1,Lt=!1,Xt=!1,Hr=!0,li=!1;const to="user-content-";let wa=!0,Za=!1,_a={},le=null;const Te=ot({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Je=null;const rt=ot({},["audio","video","img","source","image","track"]);let gt=null;const Gn=ot({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Sr="http://www.w3.org/1998/Math/MathML",Xn="http://www.w3.org/2000/svg",Nn="http://www.w3.org/1999/xhtml";let $r=Nn,fn=!1,ci=null;const zr=ot({},[Sr,Xn,Nn],Z0);let Bh=ot({},["mi","mo","mn","ms","mtext"]),Ph=ot({},["annotation-xml"]);const GI=ot({},["title","style","font","a","script"]);let xl=null;const XI=["application/xhtml+xml","text/html"],JI="text/html";let cn=null,no=null;const QI=n.createElement("form"),gx=function(ne){return ne instanceof RegExp||ne instanceof Function},p0=function(){let ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(no&&no===ne)){if((!ne||typeof ne!="object")&&(ne={}),ne=Xi(ne),xl=XI.indexOf(ne.PARSER_MEDIA_TYPE)===-1?JI:ne.PARSER_MEDIA_TYPE,cn=xl==="application/xhtml+xml"?Z0:Ru,Z=Qr(ne,"ALLOWED_TAGS")?ot({},ne.ALLOWED_TAGS,cn):te,N=Qr(ne,"ALLOWED_ATTR")?ot({},ne.ALLOWED_ATTR,cn):U,ci=Qr(ne,"ALLOWED_NAMESPACES")?ot({},ne.ALLOWED_NAMESPACES,Z0):zr,gt=Qr(ne,"ADD_URI_SAFE_ATTR")?ot(Xi(Gn),ne.ADD_URI_SAFE_ATTR,cn):Gn,Je=Qr(ne,"ADD_DATA_URI_TAGS")?ot(Xi(rt),ne.ADD_DATA_URI_TAGS,cn):rt,le=Qr(ne,"FORBID_CONTENTS")?ot({},ne.FORBID_CONTENTS,cn):Te,se=Qr(ne,"FORBID_TAGS")?ot({},ne.FORBID_TAGS,cn):Xi({}),be=Qr(ne,"FORBID_ATTR")?ot({},ne.FORBID_ATTR,cn):Xi({}),_a=Qr(ne,"USE_PROFILES")?ne.USE_PROFILES:!1,xe=ne.ALLOW_ARIA_ATTR!==!1,we=ne.ALLOW_DATA_ATTR!==!1,Re=ne.ALLOW_UNKNOWN_PROTOCOLS||!1,He=ne.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ft=ne.SAFE_FOR_TEMPLATES||!1,pt=ne.SAFE_FOR_XML!==!1,Ut=ne.WHOLE_DOCUMENT||!1,Et=ne.RETURN_DOM||!1,Lt=ne.RETURN_DOM_FRAGMENT||!1,Xt=ne.RETURN_TRUSTED_TYPE||!1,mt=ne.FORCE_BODY||!1,Hr=ne.SANITIZE_DOM!==!1,li=ne.SANITIZE_NAMED_PROPS||!1,wa=ne.KEEP_CONTENT!==!1,Za=ne.IN_PLACE||!1,j=ne.ALLOWED_URI_REGEXP||iE,$r=ne.NAMESPACE||Nn,Bh=ne.MATHML_TEXT_INTEGRATION_POINTS||Bh,Ph=ne.HTML_INTEGRATION_POINTS||Ph,J=ne.CUSTOM_ELEMENT_HANDLING||{},ne.CUSTOM_ELEMENT_HANDLING&&gx(ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=ne.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&gx(ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=ne.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ne.CUSTOM_ELEMENT_HANDLING&&typeof ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(J.allowCustomizedBuiltInElements=ne.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ft&&(we=!1),Lt&&(Et=!0),_a&&(Z=ot({},Qw),N=[],_a.html===!0&&(ot(Z,Jw),ot(N,Kw)),_a.svg===!0&&(ot(Z,ep),ot(N,rp),ot(N,tu)),_a.svgFilters===!0&&(ot(Z,tp),ot(N,rp),ot(N,tu)),_a.mathMl===!0&&(ot(Z,np),ot(N,Zw),ot(N,tu))),ne.ADD_TAGS&&(Z===te&&(Z=Xi(Z)),ot(Z,ne.ADD_TAGS,cn)),ne.ADD_ATTR&&(N===U&&(N=Xi(N)),ot(N,ne.ADD_ATTR,cn)),ne.ADD_URI_SAFE_ATTR&&ot(gt,ne.ADD_URI_SAFE_ATTR,cn),ne.FORBID_CONTENTS&&(le===Te&&(le=Xi(le)),ot(le,ne.FORBID_CONTENTS,cn)),wa&&(Z["#text"]=!0),Ut&&ot(Z,["html","head","body"]),Z.table&&(ot(Z,["tbody"]),delete se.tbody),ne.TRUSTED_TYPES_POLICY){if(typeof ne.TRUSTED_TYPES_POLICY.createHTML!="function")throw Cl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ne.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Cl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=ne.TRUSTED_TYPES_POLICY,T=E.createHTML("")}else E===void 0&&(E=yU(p,i)),E!==null&&typeof T=="string"&&(T=E.createHTML(""));Wn&&Wn(ne),no=ne}},bx=ot({},[...ep,...tp,...oU]),yx=ot({},[...np,...lU]),KI=function(ne){let ye=S(ne);(!ye||!ye.tagName)&&(ye={namespaceURI:$r,tagName:"template"});const Oe=Ru(ne.tagName),Rt=Ru(ye.tagName);return ci[ne.namespaceURI]?ne.namespaceURI===Xn?ye.namespaceURI===Nn?Oe==="svg":ye.namespaceURI===Sr?Oe==="svg"&&(Rt==="annotation-xml"||Bh[Rt]):!!bx[Oe]:ne.namespaceURI===Sr?ye.namespaceURI===Nn?Oe==="math":ye.namespaceURI===Xn?Oe==="math"&&Ph[Rt]:!!yx[Oe]:ne.namespaceURI===Nn?ye.namespaceURI===Xn&&!Ph[Rt]||ye.namespaceURI===Sr&&!Bh[Rt]?!1:!yx[Oe]&&(GI[Oe]||!bx[Oe]):!!(xl==="application/xhtml+xml"&&ci[ne.namespaceURI]):!1},hi=function(ne){El(e.removed,{element:ne});try{S(ne).removeChild(ne)}catch{b(ne)}},ro=function(ne,ye){try{El(e.removed,{attribute:ye.getAttributeNode(ne),from:ye})}catch{El(e.removed,{attribute:null,from:ye})}if(ye.removeAttribute(ne),ne==="is")if(Et||Lt)try{hi(ye)}catch{}else try{ye.setAttribute(ne,"")}catch{}},xx=function(ne){let ye=null,Oe=null;if(mt)ne="<remove></remove>"+ne;else{const en=Xw(ne,/^[\r\n\t ]+/);Oe=en&&en[0]}xl==="application/xhtml+xml"&&$r===Nn&&(ne='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ne+"</body></html>");const Rt=E?E.createHTML(ne):ne;if($r===Nn)try{ye=new f().parseFromString(Rt,xl)}catch{}if(!ye||!ye.documentElement){ye=C.createDocument($r,"template",null);try{ye.documentElement.innerHTML=fn?T:Rt}catch{}}const vn=ye.body||ye.documentElement;return ne&&Oe&&vn.insertBefore(n.createTextNode(Oe),vn.childNodes[0]||null),$r===Nn?D.call(ye,Ut?"html":"body")[0]:Ut?ye.documentElement:vn},wx=function(ne){return M.call(ne.ownerDocument||ne,ne,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},m0=function(ne){return ne instanceof d&&(typeof ne.nodeName!="string"||typeof ne.textContent!="string"||typeof ne.removeChild!="function"||!(ne.attributes instanceof u)||typeof ne.removeAttribute!="function"||typeof ne.setAttribute!="function"||typeof ne.namespaceURI!="string"||typeof ne.insertBefore!="function"||typeof ne.hasChildNodes!="function")},_x=function(ne){return typeof l=="function"&&ne instanceof l};function Pi(Be,ne,ye){eu(Be,Oe=>{Oe.call(e,ne,ye,no)})}const vx=function(ne){let ye=null;if(Pi(L.beforeSanitizeElements,ne,null),m0(ne))return hi(ne),!0;const Oe=cn(ne.nodeName);if(Pi(L.uponSanitizeElement,ne,{tagName:Oe,allowedTags:Z}),pt&&ne.hasChildNodes()&&!_x(ne.firstElementChild)&&Bn(/<[/\w!]/g,ne.innerHTML)&&Bn(/<[/\w!]/g,ne.textContent)||ne.nodeType===Il.progressingInstruction||pt&&ne.nodeType===Il.comment&&Bn(/<[/\w]/g,ne.data))return hi(ne),!0;if(!Z[Oe]||se[Oe]){if(!se[Oe]&&kx(Oe)&&(J.tagNameCheck instanceof RegExp&&Bn(J.tagNameCheck,Oe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Oe)))return!1;if(wa&&!le[Oe]){const Rt=S(ne)||ne.parentNode,vn=w(ne)||ne.childNodes;if(vn&&Rt){const en=vn.length;for(let Jn=en-1;Jn>=0;--Jn){const Fi=g(vn[Jn],!0);Fi.__removalCount=(ne.__removalCount||0)+1,Rt.insertBefore(Fi,y(ne))}}}return hi(ne),!0}return ne instanceof c&&!KI(ne)||(Oe==="noscript"||Oe==="noembed"||Oe==="noframes")&&Bn(/<\/no(script|embed|frames)/i,ne.innerHTML)?(hi(ne),!0):(ft&&ne.nodeType===Il.text&&(ye=ne.textContent,eu([q,P,A],Rt=>{ye=jl(ye,Rt," ")}),ne.textContent!==ye&&(El(e.removed,{element:ne.cloneNode()}),ne.textContent=ye)),Pi(L.afterSanitizeElements,ne,null),!1)},Tx=function(ne,ye,Oe){if(Hr&&(ye==="id"||ye==="name")&&(Oe in n||Oe in QI))return!1;if(!(we&&!be[ye]&&Bn(O,ye))){if(!(xe&&Bn(F,ye))){if(!N[ye]||be[ye]){if(!(kx(ne)&&(J.tagNameCheck instanceof RegExp&&Bn(J.tagNameCheck,ne)||J.tagNameCheck instanceof Function&&J.tagNameCheck(ne))&&(J.attributeNameCheck instanceof RegExp&&Bn(J.attributeNameCheck,ye)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(ye))||ye==="is"&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&Bn(J.tagNameCheck,Oe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Oe))))return!1}else if(!gt[ye]){if(!Bn(j,jl(Oe,Q,""))){if(!((ye==="src"||ye==="xlink:href"||ye==="href")&&ne!=="script"&&rU(Oe,"data:")===0&&Je[ne])){if(!(Re&&!Bn(Y,jl(Oe,Q,"")))){if(Oe)return!1}}}}}}return!0},kx=function(ne){return ne!=="annotation-xml"&&Xw(ne,z)},Sx=function(ne){Pi(L.beforeSanitizeAttributes,ne,null);const{attributes:ye}=ne;if(!ye||m0(ne))return;const Oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N,forceKeepAttr:void 0};let Rt=ye.length;for(;Rt--;){const vn=ye[Rt],{name:en,namespaceURI:Jn,value:Fi}=vn,wl=cn(en),g0=Fi;let Tn=en==="value"?g0:iU(g0);if(Oe.attrName=wl,Oe.attrValue=Tn,Oe.keepAttr=!0,Oe.forceKeepAttr=void 0,Pi(L.uponSanitizeAttribute,ne,Oe),Tn=Oe.attrValue,li&&(wl==="id"||wl==="name")&&(ro(en,ne),Tn=to+Tn),pt&&Bn(/((--!?|])>)|<\/(style|title)/i,Tn)){ro(en,ne);continue}if(Oe.forceKeepAttr)continue;if(!Oe.keepAttr){ro(en,ne);continue}if(!He&&Bn(/\/>/i,Tn)){ro(en,ne);continue}ft&&eu([q,P,A],Ex=>{Tn=jl(Tn,Ex," ")});const $x=cn(ne.nodeName);if(!Tx($x,wl,Tn)){ro(en,ne);continue}if(E&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Jn)switch(p.getAttributeType($x,wl)){case"TrustedHTML":{Tn=E.createHTML(Tn);break}case"TrustedScriptURL":{Tn=E.createScriptURL(Tn);break}}if(Tn!==g0)try{Jn?ne.setAttributeNS(Jn,en,Tn):ne.setAttribute(en,Tn),m0(ne)?hi(ne):Gw(e.removed)}catch{ro(en,ne)}}Pi(L.afterSanitizeAttributes,ne,null)},ZI=function Be(ne){let ye=null;const Oe=wx(ne);for(Pi(L.beforeSanitizeShadowDOM,ne,null);ye=Oe.nextNode();)Pi(L.uponSanitizeShadowNode,ye,null),vx(ye),Sx(ye),ye.content instanceof s&&Be(ye.content);Pi(L.afterSanitizeShadowDOM,ne,null)};return e.sanitize=function(Be){let ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=null,Oe=null,Rt=null,vn=null;if(fn=!Be,fn&&(Be="<!-->"),typeof Be!="string"&&!_x(Be))if(typeof Be.toString=="function"){if(Be=Be.toString(),typeof Be!="string")throw Cl("dirty is not a string, aborting")}else throw Cl("toString is not a function");if(!e.isSupported)return Be;if(xt||p0(ne),e.removed=[],typeof Be=="string"&&(Za=!1),Za){if(Be.nodeName){const Fi=cn(Be.nodeName);if(!Z[Fi]||se[Fi])throw Cl("root node is forbidden and cannot be sanitized in-place")}}else if(Be instanceof l)ye=xx("<!---->"),Oe=ye.ownerDocument.importNode(Be,!0),Oe.nodeType===Il.element&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?ye=Oe:ye.appendChild(Oe);else{if(!Et&&!ft&&!Ut&&Be.indexOf("<")===-1)return E&&Xt?E.createHTML(Be):Be;if(ye=xx(Be),!ye)return Et?null:Xt?T:""}ye&&mt&&hi(ye.firstChild);const en=wx(Za?Be:ye);for(;Rt=en.nextNode();)vx(Rt),Sx(Rt),Rt.content instanceof s&&ZI(Rt.content);if(Za)return Be;if(Et){if(Lt)for(vn=R.call(ye.ownerDocument);ye.firstChild;)vn.appendChild(ye.firstChild);else vn=ye;return(N.shadowroot||N.shadowrootmode)&&(vn=$.call(r,vn,!0)),vn}let Jn=Ut?ye.outerHTML:ye.innerHTML;return Ut&&Z["!doctype"]&&ye.ownerDocument&&ye.ownerDocument.doctype&&ye.ownerDocument.doctype.name&&Bn(aE,ye.ownerDocument.doctype.name)&&(Jn="<!DOCTYPE "+ye.ownerDocument.doctype.name+`>
`+Jn),ft&&eu([q,P,A],Fi=>{Jn=jl(Jn,Fi," ")}),E&&Xt?E.createHTML(Jn):Jn},e.setConfig=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};p0(Be),xt=!0},e.clearConfig=function(){no=null,xt=!1},e.isValidAttribute=function(Be,ne,ye){no||p0({});const Oe=cn(Be),Rt=cn(ne);return Tx(Oe,Rt,ye)},e.addHook=function(Be,ne){typeof ne=="function"&&El(L[Be],ne)},e.removeHook=function(Be,ne){if(ne!==void 0){const ye=tU(L[Be],ne);return ye===-1?void 0:nU(L[Be],ye,1)[0]}return Gw(L[Be])},e.removeHooks=function(Be){L[Be]=[]},e.removeAllHooks=function(){L=t_()},e}var Do=sE(),oE=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Ic=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,xU=/\s*%%.*\n/gm,So,lE=(So=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},v(So,"UnknownDiagramError"),So),Ms={},Ab=v(function(t,e){t=t.replace(oE,"").replace(Ic,"").replace(xU,`
`);for(const[n,{detector:r}]of Object.entries(Ms))if(r(t,e))return n;throw new lE(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),Sg=v((...t)=>{for(const{id:e,detector:n,loader:r}of t)cE(e,n,r)},"registerLazyLoadedDiagrams"),cE=v((t,e,n)=>{Ms[t]&&ce.warn(`Detector with key ${t} already exists. Overwriting.`),Ms[t]={detector:e,loader:n},ce.debug(`Detector with key ${t} added${n?" with loader":""}`)},"addDetector"),wU=v(t=>Ms[t].loader,"getDiagramLoader"),$g=v((t,e,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>$g(t,s,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||n<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=$g(t[s],e[s],{depth:n-1,clobber:r})):(r||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),rn=$g,_f="#ffffff",vf="#f2f2f2",Hn=v((t,e)=>e?re(t,{s:-40,l:10}):re(t,{s:-40,l:-10}),"mkBorder"),$o,_U=($o=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||re(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||re(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Hn(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Hn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Hn(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Hn(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ke(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ke(this.tertiaryColor),this.lineColor=this.lineColor||ke(this.background),this.arrowheadColor=this.arrowheadColor||ke(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Fe(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Fe(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ke(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Ce(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Fe(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Fe(this.mainBkg,10)):(this.rowOdd=this.rowOdd||Ce(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ce(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||re(this.primaryColor,{h:30}),this.cScale4=this.cScale4||re(this.primaryColor,{h:60}),this.cScale5=this.cScale5||re(this.primaryColor,{h:90}),this.cScale6=this.cScale6||re(this.primaryColor,{h:120}),this.cScale7=this.cScale7||re(this.primaryColor,{h:150}),this.cScale8=this.cScale8||re(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||re(this.primaryColor,{h:270}),this.cScale10=this.cScale10||re(this.primaryColor,{h:300}),this.cScale11=this.cScale11||re(this.primaryColor,{h:330}),this.darkMode)for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScale"+n]=Fe(this["cScale"+n],75);else for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScale"+n]=Fe(this["cScale"+n],25);for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScaleInv"+n]=this["cScaleInv"+n]||ke(this["cScale"+n]);for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this.darkMode?this["cScalePeer"+n]=this["cScalePeer"+n]||Ce(this["cScale"+n],10):this["cScalePeer"+n]=this["cScalePeer"+n]||Fe(this["cScale"+n],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScaleLabel"+n]=this["cScaleLabel"+n]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let n=0;n<5;n++)this["surface"+n]=this["surface"+n]||re(this.mainBkg,{h:180,s:-15,l:e*(5+n*3)}),this["surfacePeer"+n]=this["surfacePeer"+n]||re(this.mainBkg,{h:180,s:-15,l:e*(8+n*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||re(this.primaryColor,{h:64}),this.fillType3=this.fillType3||re(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||re(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||re(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||re(this.primaryColor,{h:128}),this.fillType7=this.fillType7||re(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||re(this.primaryColor,{l:-10}),this.pie5=this.pie5||re(this.secondaryColor,{l:-10}),this.pie6=this.pie6||re(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||re(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||re(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||re(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||re(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||re(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||re(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||re(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||re(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||re(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||re(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||re(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||re(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||_h(this.quadrant1Fill)?Ce(this.quadrant1Fill):Fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Fe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||re(this.primaryColor,{h:-30}),this.git4=this.git4||re(this.primaryColor,{h:-60}),this.git5=this.git5||re(this.primaryColor,{h:-90}),this.git6=this.git6||re(this.primaryColor,{h:60}),this.git7=this.git7||re(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ce(this.git0,25),this.git1=Ce(this.git1,25),this.git2=Ce(this.git2,25),this.git3=Ce(this.git3,25),this.git4=Ce(this.git4,25),this.git5=Ce(this.git5,25),this.git6=Ce(this.git6,25),this.git7=Ce(this.git7,25)):(this.git0=Fe(this.git0,25),this.git1=Fe(this.git1,25),this.git2=Fe(this.git2,25),this.git3=Fe(this.git3,25),this.git4=Fe(this.git4,25),this.git5=Fe(this.git5,25),this.git6=Fe(this.git6,25),this.git7=Fe(this.git7,25)),this.gitInv0=this.gitInv0||ke(this.git0),this.gitInv1=this.gitInv1||ke(this.git1),this.gitInv2=this.gitInv2||ke(this.git2),this.gitInv3=this.gitInv3||ke(this.git3),this.gitInv4=this.gitInv4||ke(this.git4),this.gitInv5=this.gitInv5||ke(this.git5),this.gitInv6=this.gitInv6||ke(this.git6),this.gitInv7=this.gitInv7||ke(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||_f,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||vf}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},v($o,"Theme"),$o),vU=v(t=>{const e=new _U;return e.calculate(t),e},"getThemeVariables"),Eo,TU=(Eo=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Ce(this.primaryColor,16),this.tertiaryColor=re(this.primaryColor,{h:-160}),this.primaryBorderColor=ke(this.background),this.secondaryBorderColor=Hn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Hn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ke(this.primaryColor),this.secondaryTextColor=ke(this.secondaryColor),this.tertiaryTextColor=ke(this.tertiaryColor),this.lineColor=ke(this.background),this.textColor=ke(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Ce(ke("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Ac(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Fe("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Fe(this.sectionBkgColor,10),this.taskBorderColor=Ac(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Ac(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ce(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Fe(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=Ce(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Ce(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Ce(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=re(this.primaryColor,{h:64}),this.fillType3=re(this.secondaryColor,{h:64}),this.fillType4=re(this.primaryColor,{h:-64}),this.fillType5=re(this.secondaryColor,{h:-64}),this.fillType6=re(this.primaryColor,{h:128}),this.fillType7=re(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||re(this.primaryColor,{h:30}),this.cScale4=this.cScale4||re(this.primaryColor,{h:60}),this.cScale5=this.cScale5||re(this.primaryColor,{h:90}),this.cScale6=this.cScale6||re(this.primaryColor,{h:120}),this.cScale7=this.cScale7||re(this.primaryColor,{h:150}),this.cScale8=this.cScale8||re(this.primaryColor,{h:210}),this.cScale9=this.cScale9||re(this.primaryColor,{h:270}),this.cScale10=this.cScale10||re(this.primaryColor,{h:300}),this.cScale11=this.cScale11||re(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ke(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||Ce(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||re(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||re(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||re(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||re(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||re(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||re(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||re(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||re(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||_h(this.quadrant1Fill)?Ce(this.quadrant1Fill):Fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Fe(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ce(this.secondaryColor,20),this.git1=Ce(this.pie2||this.secondaryColor,20),this.git2=Ce(this.pie3||this.tertiaryColor,20),this.git3=Ce(this.pie4||re(this.primaryColor,{h:-30}),20),this.git4=Ce(this.pie5||re(this.primaryColor,{h:-60}),20),this.git5=Ce(this.pie6||re(this.primaryColor,{h:-90}),10),this.git6=Ce(this.pie7||re(this.primaryColor,{h:60}),10),this.git7=Ce(this.pie8||re(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ke(this.git0),this.gitInv1=this.gitInv1||ke(this.git1),this.gitInv2=this.gitInv2||ke(this.git2),this.gitInv3=this.gitInv3||ke(this.git3),this.gitInv4=this.gitInv4||ke(this.git4),this.gitInv5=this.gitInv5||ke(this.git5),this.gitInv6=this.gitInv6||ke(this.git6),this.gitInv7=this.gitInv7||ke(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ke(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ke(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ce(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Ce(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},v(Eo,"Theme"),Eo),kU=v(t=>{const e=new TU;return e.calculate(t),e},"getThemeVariables"),jo,SU=(jo=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=re(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=re(this.primaryColor,{h:-160}),this.primaryBorderColor=Hn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Hn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Hn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ke(this.primaryColor),this.secondaryTextColor=ke(this.secondaryColor),this.tertiaryTextColor=ke(this.tertiaryColor),this.lineColor=ke(this.background),this.textColor=ke(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=Ac(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||re(this.primaryColor,{h:30}),this.cScale4=this.cScale4||re(this.primaryColor,{h:60}),this.cScale5=this.cScale5||re(this.primaryColor,{h:90}),this.cScale6=this.cScale6||re(this.primaryColor,{h:120}),this.cScale7=this.cScale7||re(this.primaryColor,{h:150}),this.cScale8=this.cScale8||re(this.primaryColor,{h:210}),this.cScale9=this.cScale9||re(this.primaryColor,{h:270}),this.cScale10=this.cScale10||re(this.primaryColor,{h:300}),this.cScale11=this.cScale11||re(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Fe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Fe(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Fe(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Fe(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||re(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||re(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||re(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ke(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ke(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Ce(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ce(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||Ce(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=re(this.primaryColor,{h:64}),this.fillType3=re(this.secondaryColor,{h:64}),this.fillType4=re(this.primaryColor,{h:-64}),this.fillType5=re(this.secondaryColor,{h:-64}),this.fillType6=re(this.primaryColor,{h:128}),this.fillType7=re(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||re(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||re(this.primaryColor,{l:-10}),this.pie5=this.pie5||re(this.secondaryColor,{l:-30}),this.pie6=this.pie6||re(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||re(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||re(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||re(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||re(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||re(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||re(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||re(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||re(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||re(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||re(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||re(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||re(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||_h(this.quadrant1Fill)?Ce(this.quadrant1Fill):Fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||re(this.primaryColor,{h:-30}),this.git4=this.git4||re(this.primaryColor,{h:-60}),this.git5=this.git5||re(this.primaryColor,{h:-90}),this.git6=this.git6||re(this.primaryColor,{h:60}),this.git7=this.git7||re(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ce(this.git0,25),this.git1=Ce(this.git1,25),this.git2=Ce(this.git2,25),this.git3=Ce(this.git3,25),this.git4=Ce(this.git4,25),this.git5=Ce(this.git5,25),this.git6=Ce(this.git6,25),this.git7=Ce(this.git7,25)):(this.git0=Fe(this.git0,25),this.git1=Fe(this.git1,25),this.git2=Fe(this.git2,25),this.git3=Fe(this.git3,25),this.git4=Fe(this.git4,25),this.git5=Fe(this.git5,25),this.git6=Fe(this.git6,25),this.git7=Fe(this.git7,25)),this.gitInv0=this.gitInv0||Fe(ke(this.git0),25),this.gitInv1=this.gitInv1||ke(this.git1),this.gitInv2=this.gitInv2||ke(this.git2),this.gitInv3=this.gitInv3||ke(this.git3),this.gitInv4=this.gitInv4||ke(this.git4),this.gitInv5=this.gitInv5||ke(this.git5),this.gitInv6=this.gitInv6||ke(this.git6),this.gitInv7=this.gitInv7||ke(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ke(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ke(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||_f,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||vf}calculate(e){if(Object.keys(this).forEach(r=>{this[r]==="calculated"&&(this[r]=void 0)}),typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},v(jo,"Theme"),jo),$U=v(t=>{const e=new SU;return e.calculate(t),e},"getThemeVariables"),Co,EU=(Co=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Ce("#cde498",10),this.primaryBorderColor=Hn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Hn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Hn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ke(this.primaryColor),this.secondaryTextColor=ke(this.secondaryColor),this.tertiaryTextColor=ke(this.primaryColor),this.lineColor=ke(this.background),this.textColor=ke(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Fe(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||re(this.primaryColor,{h:30}),this.cScale4=this.cScale4||re(this.primaryColor,{h:60}),this.cScale5=this.cScale5||re(this.primaryColor,{h:90}),this.cScale6=this.cScale6||re(this.primaryColor,{h:120}),this.cScale7=this.cScale7||re(this.primaryColor,{h:150}),this.cScale8=this.cScale8||re(this.primaryColor,{h:210}),this.cScale9=this.cScale9||re(this.primaryColor,{h:270}),this.cScale10=this.cScale10||re(this.primaryColor,{h:300}),this.cScale11=this.cScale11||re(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Fe(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Fe(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=Fe(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||Fe(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||re(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||re(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||re(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||Ce(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||Ce(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=re(this.primaryColor,{h:64}),this.fillType3=re(this.secondaryColor,{h:64}),this.fillType4=re(this.primaryColor,{h:-64}),this.fillType5=re(this.secondaryColor,{h:-64}),this.fillType6=re(this.primaryColor,{h:128}),this.fillType7=re(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||re(this.primaryColor,{l:-30}),this.pie5=this.pie5||re(this.secondaryColor,{l:-30}),this.pie6=this.pie6||re(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||re(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||re(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||re(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||re(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||re(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||re(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||re(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||re(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||re(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||re(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||re(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||re(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||_h(this.quadrant1Fill)?Ce(this.quadrant1Fill):Fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||re(this.primaryColor,{h:-30}),this.git4=this.git4||re(this.primaryColor,{h:-60}),this.git5=this.git5||re(this.primaryColor,{h:-90}),this.git6=this.git6||re(this.primaryColor,{h:60}),this.git7=this.git7||re(this.primaryColor,{h:120}),this.darkMode?(this.git0=Ce(this.git0,25),this.git1=Ce(this.git1,25),this.git2=Ce(this.git2,25),this.git3=Ce(this.git3,25),this.git4=Ce(this.git4,25),this.git5=Ce(this.git5,25),this.git6=Ce(this.git6,25),this.git7=Ce(this.git7,25)):(this.git0=Fe(this.git0,25),this.git1=Fe(this.git1,25),this.git2=Fe(this.git2,25),this.git3=Fe(this.git3,25),this.git4=Fe(this.git4,25),this.git5=Fe(this.git5,25),this.git6=Fe(this.git6,25),this.git7=Fe(this.git7,25)),this.gitInv0=this.gitInv0||ke(this.git0),this.gitInv1=this.gitInv1||ke(this.git1),this.gitInv2=this.gitInv2||ke(this.git2),this.gitInv3=this.gitInv3||ke(this.git3),this.gitInv4=this.gitInv4||ke(this.git4),this.gitInv5=this.gitInv5||ke(this.git5),this.gitInv6=this.gitInv6||ke(this.git6),this.gitInv7=this.gitInv7||ke(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ke(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ke(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||_f,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||vf}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},v(Co,"Theme"),Co),jU=v(t=>{const e=new EU;return e.calculate(t),e},"getThemeVariables"),Ao,CU=(Ao=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Ce(this.contrast,55),this.background="#ffffff",this.tertiaryColor=re(this.primaryColor,{h:-160}),this.primaryBorderColor=Hn(this.primaryColor,this.darkMode),this.secondaryBorderColor=Hn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Hn(this.tertiaryColor,this.darkMode),this.primaryTextColor=ke(this.primaryColor),this.secondaryTextColor=ke(this.secondaryColor),this.tertiaryTextColor=ke(this.tertiaryColor),this.lineColor=ke(this.background),this.textColor=ke(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||Ce(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=Ce(this.contrast,55),this.border2=this.contrast,this.actorBorder=Ce(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||ke(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||Ce(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||Fe(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||re(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||re(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Ce(this.contrast,30),this.sectionBkgColor2=Ce(this.contrast,30),this.taskBorderColor=Fe(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Ce(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Fe(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=re(this.primaryColor,{h:64}),this.fillType3=re(this.secondaryColor,{h:64}),this.fillType4=re(this.primaryColor,{h:-64}),this.fillType5=re(this.secondaryColor,{h:-64}),this.fillType6=re(this.primaryColor,{h:128}),this.fillType7=re(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||re(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||re(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||re(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||re(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||re(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||re(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||_h(this.quadrant1Fill)?Ce(this.quadrant1Fill):Fe(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Fe(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||re(this.primaryColor,{h:-30}),this.git4=this.pie5||re(this.primaryColor,{h:-60}),this.git5=this.pie6||re(this.primaryColor,{h:-90}),this.git6=this.pie7||re(this.primaryColor,{h:60}),this.git7=this.pie8||re(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ke(this.git0),this.gitInv1=this.gitInv1||ke(this.git1),this.gitInv2=this.gitInv2||ke(this.git2),this.gitInv3=this.gitInv3||ke(this.git3),this.gitInv4=this.gitInv4||ke(this.git4),this.gitInv5=this.gitInv5||ke(this.git5),this.gitInv6=this.gitInv6||ke(this.git6),this.gitInv7=this.gitInv7||ke(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||_f,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||vf}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(r=>{this[r]=e[r]}),this.updateColors(),n.forEach(r=>{this[r]=e[r]})}},v(Ao,"Theme"),Ao),AU=v(t=>{const e=new CU;return e.calculate(t),e},"getThemeVariables"),la={base:{getThemeVariables:vU},dark:{getThemeVariables:kU},default:{getThemeVariables:$U},forest:{getThemeVariables:jU},neutral:{getThemeVariables:AU}},ui={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},hE={...ui,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:la.default.getThemeVariables(),sequence:{...ui.sequence,messageFont:v(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:v(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:v(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...ui.gantt,tickInterval:void 0,useWidth:void 0},c4:{...ui.c4,useWidth:void 0,personFont:v(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...ui.flowchart,inheritDir:!1},external_personFont:v(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:v(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:v(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:v(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:v(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:v(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:v(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:v(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:v(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:v(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:v(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:v(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:v(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:v(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:v(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:v(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:v(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:v(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:v(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:v(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:v(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...ui.pie,useWidth:984},xyChart:{...ui.xyChart,useWidth:void 0},requirement:{...ui.requirement,useWidth:void 0},packet:{...ui.packet},radar:{...ui.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},uE=v((t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:typeof t[r]=="object"&&t[r]!==null?[...n,e+r,...uE(t[r],"")]:[...n,e+r],[]),"keyify"),IU=new Set(uE(hE,"")),dE=hE,ld=v(t=>{if(ce.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>ld(e));return}for(const e of Object.keys(t)){if(ce.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!IU.has(e)||t[e]==null){ce.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){ce.debug("sanitizing object",e),ld(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const r of n)e.includes(r)&&(ce.debug("sanitizing css option",e),t[e]=MU(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];n?.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}ce.debug("After sanitization",t)}},"sanitizeDirective"),MU=v(t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?e++:r==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),Bo=Object.freeze(dE),rr=rn({},Bo),cd,Ls=[],Mc=rn({},Bo),Tf=v((t,e)=>{let n=rn({},t),r={};for(const i of e)mE(i),r=rn(r,i);if(n=rn(n,r),r.theme&&r.theme in la){const i=rn({},cd),s=rn(i.themeVariables||{},r.themeVariables);n.theme&&n.theme in la&&(n.themeVariables=la[n.theme].getThemeVariables(s))}return Mc=n,gE(Mc),Mc},"updateCurrentConfig"),LU=v(t=>(rr=rn({},Bo),rr=rn(rr,t),t.theme&&la[t.theme]&&(rr.themeVariables=la[t.theme].getThemeVariables(t.themeVariables)),Tf(rr,Ls),rr),"setSiteConfig"),OU=v(t=>{cd=rn({},t)},"saveConfigFromInitialize"),RU=v(t=>(rr=rn(rr,t),Tf(rr,Ls),rr),"updateSiteConfig"),fE=v(()=>rn({},rr),"getSiteConfig"),pE=v(t=>(gE(t),rn(Mc,t),Cn()),"setConfig"),Cn=v(()=>rn({},Mc),"getConfig"),mE=v(t=>{t&&(["secure",...rr.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(ce.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&mE(t[e])}))},"sanitize"),NU=v(t=>{ld(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),Ls.push(t),Tf(rr,Ls)},"addDirective"),hd=v((t=rr)=>{Ls=[],Tf(t,Ls)},"reset"),DU={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},n_={},BU=v(t=>{n_[t]||(ce.warn(DU[t]),n_[t]=!0)},"issueWarning"),gE=v(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&BU("LAZY_LOAD_DEPRECATED")},"checkConfig"),epe=v(()=>{let t={};cd&&(t=rn(t,cd));for(const e of Ls)t=rn(t,e);return t},"getUserDefinedConfig"),vh=/<br\s*\/?>/gi,PU=v(t=>t?xE(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),FU=(()=>{let t=!1;return()=>{t||(bE(),t=!0)}})();function bE(){const t="data-temp-href-target";Do.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),Do.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}v(bE,"setupDompurifyHooks");var yE=v(t=>(FU(),Do.sanitize(t)),"removeScript"),r_=v((t,e)=>{if(e.flowchart?.htmlLabels!==!1){const n=e.securityLevel;n==="antiscript"||n==="strict"?t=yE(t):n!=="loose"&&(t=xE(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=WU(t))}return t},"sanitizeMore"),Br=v((t,e)=>t&&(e.dompurifyConfig?t=Do.sanitize(r_(t,e),e.dompurifyConfig).toString():t=Do.sanitize(r_(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),HU=v((t,e)=>typeof t=="string"?Br(t,e):t.flat().map(n=>Br(n,e)),"sanitizeTextOrArray"),zU=v(t=>vh.test(t),"hasBreaks"),qU=v(t=>t.split(vh),"splitBreaks"),WU=v(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),xE=v(t=>t.replace(vh,"#br#"),"breakToPlaceholder"),UU=v(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),ln=v(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),VU=v(function(...t){const e=t.filter(n=>!isNaN(n));return Math.max(...e)},"getMax"),YU=v(function(...t){const e=t.filter(n=>!isNaN(n));return Math.min(...e)},"getMin"),i_=v(function(t){const e=t.split(/(,)/),n=[];for(let r=0;r<e.length;r++){let i=e[r];if(i===","&&r>0&&r+1<e.length){const s=e[r-1],o=e[r+1];GU(s,o)&&(i=s+","+o,r++,n.pop())}n.push(XU(i))}return n.join("")},"parseGenericTypes"),Eg=v((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),GU=v((t,e)=>{const n=Eg(t,"~"),r=Eg(e,"~");return n===1&&r===1},"shouldCombineSets"),XU=v(t=>{const e=Eg(t,"~");let n=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),n=!0);const r=[...t];let i=r.indexOf("~"),s=r.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)r[i]="<",r[s]=">",i=r.indexOf("~"),s=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),a_=v(()=>window.MathMLElement!==void 0,"isMathMLSupported"),jg=/\$\$(.*)\$\$/g,Po=v(t=>(t.match(jg)?.length??0)>0,"hasKatex"),tpe=v(async(t,e)=>{const n=document.createElement("div");n.innerHTML=await Ib(t,e),n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),JU=v(async(t,e)=>{if(!Po(t))return t;if(!(a_()||e.legacyMathML||e.forceLegacyMathML))return t.replace(jg,"MathML is unsupported in this environment.");{const{default:n}=await _e(async()=>{const{default:i}=await Promise.resolve().then(()=>vB);return{default:i}},void 0),r=e.forceLegacyMathML||!a_()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(vh).map(i=>Po(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(jg,(i,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:r}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),Ib=v(async(t,e)=>Br(await JU(t,e),e),"renderKatexSanitized"),ol={getRows:PU,sanitizeText:Br,sanitizeTextOrArray:HU,hasBreaks:zU,splitBreaks:qU,lineBreakRegex:vh,removeScript:yE,getUrl:UU,evaluate:ln,getMax:VU,getMin:YU},QU=v(function(t,e){for(let n of e)t.attr(n[0],n[1])},"d3Attrs"),KU=v(function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},"calculateSvgSizeAttrs"),wE=v(function(t,e,n,r){const i=KU(e,n,r);QU(t,i)},"configureSvgSize"),ZU=v(function(t,e,n,r){const i=e.node().getBBox(),s=i.width,o=i.height;ce.info(`SVG bounds: ${s}x${o}`,i);let l=0,c=0;ce.info(`Graph bounds: ${l}x${c}`,t),l=s+n*2,c=o+n*2,ce.info(`Calculated bounds: ${l}x${c}`),wE(e,c,l,r);const h=`${i.x-n} ${i.y-n} ${i.width+2*n} ${i.height+2*n}`;e.attr("viewBox",h)},"setupGraphViewbox"),Nu={},eV=v((t,e,n)=>{let r="";return t in Nu&&Nu[t]?r=Nu[t](n):ce.warn(`No theme found for ${t}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${r}

  ${e}
`},"getStyles"),tV=v((t,e)=>{e!==void 0&&(Nu[t]=e)},"addStylesForDiagram"),nV=eV,_E={};WW(_E,{clear:()=>rV,getAccDescription:()=>oV,getAccTitle:()=>aV,getDiagramTitle:()=>cV,setAccDescription:()=>sV,setAccTitle:()=>iV,setDiagramTitle:()=>lV});var Mb="",Lb="",Ob="",Rb=v(t=>Br(t,Cn()),"sanitizeText"),rV=v(()=>{Mb="",Ob="",Lb=""},"clear"),iV=v(t=>{Mb=Rb(t).replace(/^\s+/g,"")},"setAccTitle"),aV=v(()=>Mb,"getAccTitle"),sV=v(t=>{Ob=Rb(t).replace(/\n\s+/g,`
`)},"setAccDescription"),oV=v(()=>Ob,"getAccDescription"),lV=v(t=>{Lb=Rb(t)},"setDiagramTitle"),cV=v(()=>Lb,"getDiagramTitle"),s_=ce,hV=Cb,wt=Cn,npe=pE,rpe=Bo,Nb=v(t=>Br(t,wt()),"sanitizeText"),uV=ZU,dV=v(()=>_E,"getCommonDb"),ud={},dd=v((t,e,n)=>{ud[t]&&s_.warn(`Diagram with id ${t} already registered. Overwriting.`),ud[t]=e,n&&cE(t,n),tV(t,e.styles),e.injectUtils?.(s_,hV,wt,Nb,uV,dV(),()=>{})},"registerDiagram"),Cg=v(t=>{if(t in ud)return ud[t];throw new fV(t)},"getDiagram"),Io,fV=(Io=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},v(Io,"DiagramNotFoundError"),Io),pV={value:()=>{}};function vE(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Du(n)}function Du(t){this._=t}function mV(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Du.prototype=vE.prototype={constructor:Du,on:function(t,e){var n=this._,r=mV(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=gV(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=o_(n[i],t.name,e);else if(e==null)for(i in n)n[i]=o_(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Du(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function gV(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function o_(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=pV,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ag="http://www.w3.org/1999/xhtml";const l_={svg:"http://www.w3.org/2000/svg",xhtml:Ag,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kf(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),l_.hasOwnProperty(e)?{space:l_[e],local:t}:t}function bV(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ag&&e.documentElement.namespaceURI===Ag?e.createElement(t):e.createElementNS(n,t)}}function yV(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function TE(t){var e=kf(t);return(e.local?yV:bV)(e)}function xV(){}function Db(t){return t==null?xV:function(){return this.querySelector(t)}}function wV(t){typeof t!="function"&&(t=Db(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),c,h,u=0;u<o;++u)(c=s[u])&&(h=t.call(c,c.__data__,u,s))&&("__data__"in c&&(h.__data__=c.__data__),l[u]=h);return new vr(r,this._parents)}function _V(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function vV(){return[]}function kE(t){return t==null?vV:function(){return this.querySelectorAll(t)}}function TV(t){return function(){return _V(t.apply(this,arguments))}}function kV(t){typeof t=="function"?t=TV(t):t=kE(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,c,h=0;h<l;++h)(c=o[h])&&(r.push(t.call(c,c.__data__,h,o)),i.push(c));return new vr(r,i)}function SE(t){return function(){return this.matches(t)}}function $E(t){return function(e){return e.matches(t)}}var SV=Array.prototype.find;function $V(t){return function(){return SV.call(this.children,t)}}function EV(){return this.firstElementChild}function jV(t){return this.select(t==null?EV:$V(typeof t=="function"?t:$E(t)))}var CV=Array.prototype.filter;function AV(){return Array.from(this.children)}function IV(t){return function(){return CV.call(this.children,t)}}function MV(t){return this.selectAll(t==null?AV:IV(typeof t=="function"?t:$E(t)))}function LV(t){typeof t!="function"&&(t=SE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&l.push(c);return new vr(r,this._parents)}function EE(t){return new Array(t.length)}function OV(){return new vr(this._enter||this._groups.map(EE),this._parents)}function fd(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}fd.prototype={constructor:fd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function RV(t){return function(){return t}}function NV(t,e,n,r,i,s){for(var o=0,l,c=e.length,h=s.length;o<h;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new fd(t,s[o]);for(;o<c;++o)(l=e[o])&&(i[o]=l)}function DV(t,e,n,r,i,s,o){var l,c,h=new Map,u=e.length,d=s.length,f=new Array(u),p;for(l=0;l<u;++l)(c=e[l])&&(f[l]=p=o.call(c,c.__data__,l,e)+"",h.has(p)?i[l]=c:h.set(p,c));for(l=0;l<d;++l)p=o.call(t,s[l],l,s)+"",(c=h.get(p))?(r[l]=c,c.__data__=s[l],h.delete(p)):n[l]=new fd(t,s[l]);for(l=0;l<u;++l)(c=e[l])&&h.get(f[l])===c&&(i[l]=c)}function BV(t){return t.__data__}function PV(t,e){if(!arguments.length)return Array.from(this,BV);var n=e?DV:NV,r=this._parents,i=this._groups;typeof t!="function"&&(t=RV(t));for(var s=i.length,o=new Array(s),l=new Array(s),c=new Array(s),h=0;h<s;++h){var u=r[h],d=i[h],f=d.length,p=FV(t.call(u,u&&u.__data__,h,r)),m=p.length,g=l[h]=new Array(m),b=o[h]=new Array(m),y=c[h]=new Array(f);n(u,d,g,b,y,p,e);for(var w=0,S=0,E,T;w<m;++w)if(E=g[w]){for(w>=S&&(S=w+1);!(T=b[S])&&++S<m;);E._next=T||null}}return o=new vr(o,r),o._enter=l,o._exit=c,o}function FV(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HV(){return new vr(this._exit||this._groups.map(EE),this._parents)}function zV(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function qV(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var h=n[c],u=r[c],d=h.length,f=l[c]=new Array(d),p,m=0;m<d;++m)(p=h[m]||u[m])&&(f[m]=p);for(;c<i;++c)l[c]=n[c];return new vr(l,this._parents)}function WV(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function UV(t){t||(t=VV);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,c=i[s]=new Array(l),h,u=0;u<l;++u)(h=o[u])&&(c[u]=h);c.sort(e)}return new vr(i,this._parents).order()}function VV(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function YV(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function GV(){return Array.from(this)}function XV(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function JV(){let t=0;for(const e of this)++t;return t}function QV(){return!this.node()}function KV(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function ZV(t){return function(){this.removeAttribute(t)}}function eY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tY(t,e){return function(){this.setAttribute(t,e)}}function nY(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function rY(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function iY(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function aY(t,e){var n=kf(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?eY:ZV:typeof e=="function"?n.local?iY:rY:n.local?nY:tY)(n,e))}function jE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sY(t){return function(){this.style.removeProperty(t)}}function oY(t,e,n){return function(){this.style.setProperty(t,e,n)}}function lY(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function cY(t,e,n){return arguments.length>1?this.each((e==null?sY:typeof e=="function"?lY:oY)(t,e,n??"")):Fo(this.node(),t)}function Fo(t,e){return t.style.getPropertyValue(e)||jE(t).getComputedStyle(t,null).getPropertyValue(e)}function hY(t){return function(){delete this[t]}}function uY(t,e){return function(){this[t]=e}}function dY(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function fY(t,e){return arguments.length>1?this.each((e==null?hY:typeof e=="function"?dY:uY)(t,e)):this.node()[t]}function CE(t){return t.trim().split(/^|\s+/)}function Bb(t){return t.classList||new AE(t)}function AE(t){this._node=t,this._names=CE(t.getAttribute("class")||"")}AE.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function IE(t,e){for(var n=Bb(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function ME(t,e){for(var n=Bb(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function pY(t){return function(){IE(this,t)}}function mY(t){return function(){ME(this,t)}}function gY(t,e){return function(){(e.apply(this,arguments)?IE:ME)(this,t)}}function bY(t,e){var n=CE(t+"");if(arguments.length<2){for(var r=Bb(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?gY:e?pY:mY)(n,e))}function yY(){this.textContent=""}function xY(t){return function(){this.textContent=t}}function wY(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function _Y(t){return arguments.length?this.each(t==null?yY:(typeof t=="function"?wY:xY)(t)):this.node().textContent}function vY(){this.innerHTML=""}function TY(t){return function(){this.innerHTML=t}}function kY(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function SY(t){return arguments.length?this.each(t==null?vY:(typeof t=="function"?kY:TY)(t)):this.node().innerHTML}function $Y(){this.nextSibling&&this.parentNode.appendChild(this)}function EY(){return this.each($Y)}function jY(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function CY(){return this.each(jY)}function AY(t){var e=typeof t=="function"?t:TE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function IY(){return null}function MY(t,e){var n=typeof t=="function"?t:TE(t),r=e==null?IY:typeof e=="function"?e:Db(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function LY(){var t=this.parentNode;t&&t.removeChild(this)}function OY(){return this.each(LY)}function RY(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NY(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function DY(t){return this.select(t?NY:RY)}function BY(t){return arguments.length?this.property("__data__",t):this.node().__data__}function PY(t){return function(e){t.call(this,e,this.__data__)}}function FY(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function HY(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function zY(t,e,n){return function(){var r=this.__on,i,s=PY(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function qY(t,e,n){var r=FY(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,h=l.length,u;c<h;++c)for(i=0,u=l[c];i<s;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?zY:HY,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function LE(t,e,n){var r=jE(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function WY(t,e){return function(){return LE(this,t,e)}}function UY(t,e){return function(){return LE(this,t,e.apply(this,arguments))}}function VY(t,e){return this.each((typeof e=="function"?UY:WY)(t,e))}function*YY(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var OE=[null];function vr(t,e){this._groups=t,this._parents=e}function Th(){return new vr([[document.documentElement]],OE)}function GY(){return this}vr.prototype=Th.prototype={constructor:vr,select:wV,selectAll:kV,selectChild:jV,selectChildren:MV,filter:LV,data:PV,enter:OV,exit:HV,join:zV,merge:qV,selection:GY,order:WV,sort:UV,call:YV,nodes:GV,node:XV,size:JV,empty:QV,each:KV,attr:aY,style:cY,property:fY,classed:bY,text:_Y,html:SY,raise:EY,lower:CY,append:AY,insert:MY,remove:OY,clone:DY,datum:BY,on:qY,dispatch:VY,[Symbol.iterator]:YY};function ut(t){return typeof t=="string"?new vr([[document.querySelector(t)]],[document.documentElement]):new vr([[t]],OE)}function Pb(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function RE(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kh(){}var Vc=.7,pd=1/Vc,_o="\\s*([+-]?\\d+)\\s*",Yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XY=/^#([0-9a-f]{3,8})$/,JY=new RegExp(`^rgb\\(${_o},${_o},${_o}\\)$`),QY=new RegExp(`^rgb\\(${Ei},${Ei},${Ei}\\)$`),KY=new RegExp(`^rgba\\(${_o},${_o},${_o},${Yc}\\)$`),ZY=new RegExp(`^rgba\\(${Ei},${Ei},${Ei},${Yc}\\)$`),eG=new RegExp(`^hsl\\(${Yc},${Ei},${Ei}\\)$`),tG=new RegExp(`^hsla\\(${Yc},${Ei},${Ei},${Yc}\\)$`),c_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pb(kh,Gc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:h_,formatHex:h_,formatHex8:nG,formatHsl:rG,formatRgb:u_,toString:u_});function h_(){return this.rgb().formatHex()}function nG(){return this.rgb().formatHex8()}function rG(){return NE(this).formatHsl()}function u_(){return this.rgb().formatRgb()}function Gc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=XY.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?d_(e):n===3?new sr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?nu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?nu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=JY.exec(t))?new sr(e[1],e[2],e[3],1):(e=QY.exec(t))?new sr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=KY.exec(t))?nu(e[1],e[2],e[3],e[4]):(e=ZY.exec(t))?nu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=eG.exec(t))?m_(e[1],e[2]/100,e[3]/100,1):(e=tG.exec(t))?m_(e[1],e[2]/100,e[3]/100,e[4]):c_.hasOwnProperty(t)?d_(c_[t]):t==="transparent"?new sr(NaN,NaN,NaN,0):null}function d_(t){return new sr(t>>16&255,t>>8&255,t&255,1)}function nu(t,e,n,r){return r<=0&&(t=e=n=NaN),new sr(t,e,n,r)}function iG(t){return t instanceof kh||(t=Gc(t)),t?(t=t.rgb(),new sr(t.r,t.g,t.b,t.opacity)):new sr}function Ig(t,e,n,r){return arguments.length===1?iG(t):new sr(t,e,n,r??1)}function sr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Pb(sr,Ig,RE(kh,{brighter(t){return t=t==null?pd:Math.pow(pd,t),new sr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vc:Math.pow(Vc,t),new sr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new sr(Es(this.r),Es(this.g),Es(this.b),md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f_,formatHex:f_,formatHex8:aG,formatRgb:p_,toString:p_}));function f_(){return`#${xs(this.r)}${xs(this.g)}${xs(this.b)}`}function aG(){return`#${xs(this.r)}${xs(this.g)}${xs(this.b)}${xs((isNaN(this.opacity)?1:this.opacity)*255)}`}function p_(){const t=md(this.opacity);return`${t===1?"rgb(":"rgba("}${Es(this.r)}, ${Es(this.g)}, ${Es(this.b)}${t===1?")":`, ${t})`}`}function md(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Es(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xs(t){return t=Es(t),(t<16?"0":"")+t.toString(16)}function m_(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zr(t,e,n,r)}function NE(t){if(t instanceof Zr)return new Zr(t.h,t.s,t.l,t.opacity);if(t instanceof kh||(t=Gc(t)),!t)return new Zr;if(t instanceof Zr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Zr(o,l,c,t.opacity)}function sG(t,e,n,r){return arguments.length===1?NE(t):new Zr(t,e,n,r??1)}function Zr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Pb(Zr,sG,RE(kh,{brighter(t){return t=t==null?pd:Math.pow(pd,t),new Zr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vc:Math.pow(Vc,t),new Zr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new sr(ip(t>=240?t-240:t+120,i,r),ip(t,i,r),ip(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zr(g_(this.h),ru(this.s),ru(this.l),md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=md(this.opacity);return`${t===1?"hsl(":"hsla("}${g_(this.h)}, ${ru(this.s)*100}%, ${ru(this.l)*100}%${t===1?")":`, ${t})`}`}}));function g_(t){return t=(t||0)%360,t<0?t+360:t}function ru(t){return Math.max(0,Math.min(1,t||0))}function ip(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Fb=t=>()=>t;function DE(t,e){return function(n){return t+n*e}}function oG(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ipe(t,e){var n=e-t;return n?DE(t,n>180||n<-180?n-360*Math.round(n/360):n):Fb(isNaN(t)?e:t)}function lG(t){return(t=+t)==1?BE:function(e,n){return n-e?oG(e,n,t):Fb(isNaN(e)?n:e)}}function BE(t,e){var n=e-t;return n?DE(t,n):Fb(isNaN(t)?e:t)}const b_=function t(e){var n=lG(e);function r(i,s){var o=n((i=Ig(i)).r,(s=Ig(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),h=BE(i.opacity,s.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=h(u),i+""}}return r.gamma=t,r}(1);function Aa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Mg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ap=new RegExp(Mg.source,"g");function cG(t){return function(){return t}}function hG(t){return function(e){return t(e)+""}}function uG(t,e){var n=Mg.lastIndex=ap.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(r=Mg.exec(t))&&(i=ap.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Aa(r,i)})),n=ap.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?hG(c[0].x):cG(e):(e=c.length,function(h){for(var u=0,d;u<e;++u)l[(d=c[u]).i]=d.x(h);return l.join("")})}var y_=180/Math.PI,Lg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function PE(t,e,n,r,i,s){var o,l,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),t*r<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*y_,skewX:Math.atan(c)*y_,scaleX:o,scaleY:l}}var iu;function dG(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Lg:PE(e.a,e.b,e.c,e.d,e.e,e.f)}function fG(t){return t==null||(iu||(iu=document.createElementNS("http://www.w3.org/2000/svg","g")),iu.setAttribute("transform",t),!(t=iu.transform.baseVal.consolidate()))?Lg:(t=t.matrix,PE(t.a,t.b,t.c,t.d,t.e,t.f))}function FE(t,e,n,r){function i(h){return h.length?h.pop()+" ":""}function s(h,u,d,f,p,m){if(h!==d||u!==f){var g=p.push("translate(",null,e,null,n);m.push({i:g-4,x:Aa(h,d)},{i:g-2,x:Aa(u,f)})}else(d||f)&&p.push("translate("+d+e+f+n)}function o(h,u,d,f){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Aa(h,u)})):u&&d.push(i(d)+"rotate("+u+r)}function l(h,u,d,f){h!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Aa(h,u)}):u&&d.push(i(d)+"skewX("+u+r)}function c(h,u,d,f,p,m){if(h!==d||u!==f){var g=p.push(i(p)+"scale(",null,",",null,")");m.push({i:g-4,x:Aa(h,d)},{i:g-2,x:Aa(u,f)})}else(d!==1||f!==1)&&p.push(i(p)+"scale("+d+","+f+")")}return function(h,u){var d=[],f=[];return h=t(h),u=t(u),s(h.translateX,h.translateY,u.translateX,u.translateY,d,f),o(h.rotate,u.rotate,d,f),l(h.skewX,u.skewX,d,f),c(h.scaleX,h.scaleY,u.scaleX,u.scaleY,d,f),h=u=null,function(p){for(var m=-1,g=f.length,b;++m<g;)d[(b=f[m]).i]=b.x(p);return d.join("")}}}var pG=FE(dG,"px, ","px)","deg)"),mG=FE(fG,", ",")",")"),Ho=0,sc=0,Ml=0,HE=1e3,gd,oc,bd=0,Os=0,Sf=0,Xc=typeof performance=="object"&&performance.now?performance:Date,zE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hb(){return Os||(zE(gG),Os=Xc.now()+Sf)}function gG(){Os=0}function yd(){this._call=this._time=this._next=null}yd.prototype=qE.prototype={constructor:yd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Hb():+n)+(e==null?0:+e),!this._next&&oc!==this&&(oc?oc._next=this:gd=this,oc=this),this._call=t,this._time=n,Og()},stop:function(){this._call&&(this._call=null,this._time=1/0,Og())}};function qE(t,e,n){var r=new yd;return r.restart(t,e,n),r}function bG(){Hb(),++Ho;for(var t=gd,e;t;)(e=Os-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ho}function x_(){Os=(bd=Xc.now())+Sf,Ho=sc=0;try{bG()}finally{Ho=0,xG(),Os=0}}function yG(){var t=Xc.now(),e=t-bd;e>HE&&(Sf-=e,bd=t)}function xG(){for(var t,e=gd,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:gd=n);oc=t,Og(r)}function Og(t){if(!Ho){sc&&(sc=clearTimeout(sc));var e=t-Os;e>24?(t<1/0&&(sc=setTimeout(x_,t-Xc.now()-Sf)),Ml&&(Ml=clearInterval(Ml))):(Ml||(bd=Xc.now(),Ml=setInterval(yG,HE)),Ho=1,zE(x_))}}function w_(t,e,n){var r=new yd;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var wG=vE("start","end","cancel","interrupt"),_G=[],WE=0,__=1,Rg=2,Bu=3,v_=4,Ng=5,Pu=6;function $f(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;vG(t,n,{name:e,index:r,group:i,on:wG,tween:_G,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:WE})}function zb(t,e){var n=ai(t,e);if(n.state>WE)throw new Error("too late; already scheduled");return n}function Ri(t,e){var n=ai(t,e);if(n.state>Bu)throw new Error("too late; already running");return n}function ai(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vG(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=qE(s,0,n.time);function s(h){n.state=__,n.timer.restart(o,n.delay,n.time),n.delay<=h&&o(h-n.delay)}function o(h){var u,d,f,p;if(n.state!==__)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===Bu)return w_(o);p.state===v_?(p.state=Pu,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[u]):+u<e&&(p.state=Pu,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[u])}if(w_(function(){n.state===Bu&&(n.state=v_,n.timer.restart(l,n.delay,n.time),l(h))}),n.state=Rg,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Rg){for(n.state=Bu,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=p);i.length=d+1}}function l(h){for(var u=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(c),n.state=Ng,1),d=-1,f=i.length;++d<f;)i[d].call(t,u);n.state===Ng&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Pu,n.timer.stop(),delete r[e];for(var h in r)return;delete t.__transition}}function TG(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Rg&&r.state<Ng,r.state=Pu,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function kG(t){return this.each(function(){TG(this,t)})}function SG(t,e){var n,r;return function(){var i=Ri(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function $G(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ri(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},c=0,h=i.length;c<h;++c)if(i[c].name===e){i[c]=l;break}c===h&&i.push(l)}s.tween=i}}function EG(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ai(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?SG:$G)(n,t,e))}function qb(t,e,n){var r=t._id;return t.each(function(){var i=Ri(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ai(i,r).value[e]}}function UE(t,e){var n;return(typeof e=="number"?Aa:e instanceof Gc?b_:(n=Gc(e))?(e=n,b_):uG)(t,e)}function jG(t){return function(){this.removeAttribute(t)}}function CG(t){return function(){this.removeAttributeNS(t.space,t.local)}}function AG(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function IG(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function MG(t,e,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function LG(t,e,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l)))}}function OG(t,e){var n=kf(t),r=n==="transform"?mG:UE;return this.attrTween(t,typeof e=="function"?(n.local?LG:MG)(n,r,qb(this,"attr."+t,e)):e==null?(n.local?CG:jG)(n):(n.local?IG:AG)(n,r,e))}function RG(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function NG(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function DG(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&NG(t,s)),n}return i._value=e,i}function BG(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&RG(t,s)),n}return i._value=e,i}function PG(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=kf(t);return this.tween(n,(r.local?DG:BG)(r,e))}function FG(t,e){return function(){zb(this,t).delay=+e.apply(this,arguments)}}function HG(t,e){return e=+e,function(){zb(this,t).delay=e}}function zG(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?FG:HG)(e,t)):ai(this.node(),e).delay}function qG(t,e){return function(){Ri(this,t).duration=+e.apply(this,arguments)}}function WG(t,e){return e=+e,function(){Ri(this,t).duration=e}}function UG(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qG:WG)(e,t)):ai(this.node(),e).duration}function VG(t,e){if(typeof e!="function")throw new Error;return function(){Ri(this,t).ease=e}}function YG(t){var e=this._id;return arguments.length?this.each(VG(e,t)):ai(this.node(),e).ease}function GG(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ri(this,t).ease=n}}function XG(t){if(typeof t!="function")throw new Error;return this.each(GG(this._id,t))}function JG(t){typeof t!="function"&&(t=SE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&l.push(c);return new fa(r,this._parents,this._name,this._id)}function QG(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c=e[l],h=n[l],u=c.length,d=o[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||h[p])&&(d[p]=f);for(;l<r;++l)o[l]=e[l];return new fa(o,this._parents,this._name,this._id)}function KG(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ZG(t,e,n){var r,i,s=KG(e)?zb:Ri;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function eX(t,e){var n=this._id;return arguments.length<2?ai(this.node(),n).on.on(t):this.each(ZG(n,t,e))}function tX(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function nX(){return this.on("end.remove",tX(this._id))}function rX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Db(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],c=l.length,h=s[o]=new Array(c),u,d,f=0;f<c;++f)(u=l[f])&&(d=t.call(u,u.__data__,f,l))&&("__data__"in u&&(d.__data__=u.__data__),h[f]=d,$f(h[f],e,n,f,h,ai(u,n)));return new fa(s,this._parents,e,n)}function iX(t){var e=this._name,n=this._id;typeof t!="function"&&(t=kE(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var c=r[l],h=c.length,u,d=0;d<h;++d)if(u=c[d]){for(var f=t.call(u,u.__data__,d,c),p,m=ai(u,n),g=0,b=f.length;g<b;++g)(p=f[g])&&$f(p,e,n,g,f,m);s.push(f),o.push(u)}return new fa(s,o,e,n)}var aX=Th.prototype.constructor;function sX(){return new aX(this._groups,this._parents)}function oX(t,e){var n,r,i;return function(){var s=Fo(this,t),o=(this.style.removeProperty(t),Fo(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function VE(t){return function(){this.style.removeProperty(t)}}function lX(t,e,n){var r,i=n+"",s;return function(){var o=Fo(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function cX(t,e,n){var r,i,s;return function(){var o=Fo(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),Fo(this,t))),o===c?null:o===r&&c===i?s:(i=c,s=e(r=o,l))}}function hX(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var c=Ri(this,t),h=c.on,u=c.value[s]==null?l||(l=VE(e)):void 0;(h!==n||i!==u)&&(r=(n=h).copy()).on(o,i=u),c.on=r}}function uX(t,e,n){var r=(t+="")=="transform"?pG:UE;return e==null?this.styleTween(t,oX(t,r)).on("end.style."+t,VE(t)):typeof e=="function"?this.styleTween(t,cX(t,r,qb(this,"style."+t,e))).each(hX(this._id,t)):this.styleTween(t,lX(t,r,e),n).on("end.style."+t,null)}function dX(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function fX(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&dX(t,o,n)),r}return s._value=e,s}function pX(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,fX(t,e,n??""))}function mX(t){return function(){this.textContent=t}}function gX(t){return function(){var e=t(this);this.textContent=e??""}}function bX(t){return this.tween("text",typeof t=="function"?gX(qb(this,"text",t)):mX(t==null?"":t+""))}function yX(t){return function(e){this.textContent=t.call(this,e)}}function xX(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&yX(i)),e}return r._value=t,r}function wX(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,xX(t))}function _X(){for(var t=this._name,e=this._id,n=YE(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,h=0;h<l;++h)if(c=o[h]){var u=ai(c,e);$f(c,t,n,h,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fa(r,this._parents,t,n)}function vX(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var h=Ri(this,r),u=h.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),h.on=e}),i===0&&s()})}var TX=0;function fa(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function YE(){return++TX}var qi=Th.prototype;fa.prototype={constructor:fa,select:rX,selectAll:iX,selectChild:qi.selectChild,selectChildren:qi.selectChildren,filter:JG,merge:QG,selection:sX,transition:_X,call:qi.call,nodes:qi.nodes,node:qi.node,size:qi.size,empty:qi.empty,each:qi.each,on:eX,attr:OG,attrTween:PG,style:uX,styleTween:pX,text:bX,textTween:wX,remove:nX,tween:EG,delay:zG,duration:UG,ease:YG,easeVarying:XG,end:vX,[Symbol.iterator]:qi[Symbol.iterator]};function kX(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var SX={time:null,delay:0,duration:250,ease:kX};function $X(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function EX(t){var e,n;t instanceof fa?(e=t._id,t=t._name):(e=YE(),(n=SX).time=Hb(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,h=0;h<l;++h)(c=o[h])&&$f(c,t,e,h,o,n||$X(c,e));return new fa(r,this._parents,t,e)}Th.prototype.interrupt=kG;Th.prototype.transition=EX;const Dg=Math.PI,Bg=2*Dg,fs=1e-6,jX=Bg-fs;function GE(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function CX(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return GE;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class AX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?GE:CX(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-e,h=i-n,u=o-e,d=l-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>fs)if(!(Math.abs(d*c-h*u)>fs)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-o,m=i-l,g=c*c+h*h,b=p*p+m*m,y=Math.sqrt(g),w=Math.sqrt(f),S=s*Math.tan((Dg-Math.acos((g+f-b)/(2*y*w)))/2),E=S/w,T=S/y;Math.abs(E-1)>fs&&this._append`L${e+E*u},${n+E*d}`,this._append`A${s},${s},0,0,${+(d*p>u*m)},${this._x1=e+T*c},${this._y1=n+T*h}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),h=e+l,u=n+c,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>fs||Math.abs(this._y1-u)>fs)&&this._append`L${h},${u}`,r&&(f<0&&(f=f%Bg+Bg),f>jX?this._append`A${r},${r},0,1,${d},${e-l},${n-c}A${r},${r},0,1,${d},${this._x1=h},${this._y1=u}`:f>fs&&this._append`A${r},${r},0,${+(f>=Dg)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function oo(t){return function(){return t}}const ape=Math.abs,spe=Math.atan2,ope=Math.cos,lpe=Math.max,cpe=Math.min,hpe=Math.sin,upe=Math.sqrt,T_=1e-12,Wb=Math.PI,k_=Wb/2,dpe=2*Wb;function fpe(t){return t>1?0:t<-1?Wb:Math.acos(t)}function ppe(t){return t>=1?k_:t<=-1?-k_:Math.asin(t)}function IX(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new AX(e)}function MX(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function XE(t){this._context=t}XE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xd(t){return new XE(t)}function LX(t){return t[0]}function OX(t){return t[1]}function RX(t,e){var n=oo(!0),r=null,i=xd,s=null,o=IX(l);t=typeof t=="function"?t:t===void 0?LX:oo(t),e=typeof e=="function"?e:e===void 0?OX:oo(e);function l(c){var h,u=(c=MX(c)).length,d,f=!1,p;for(r==null&&(s=i(p=o())),h=0;h<=u;++h)!(h<u&&n(d=c[h],h,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(d,h,c),+e(d,h,c));if(p)return s=null,p+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:oo(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:oo(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:oo(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}class JE{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function QE(t){return new JE(t,!0)}function KE(t){return new JE(t,!1)}function Ha(){}function wd(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ef(t){this._context=t}Ef.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Fu(t){return new Ef(t)}function ZE(t){this._context=t}ZE.prototype={areaStart:Ha,areaEnd:Ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:wd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NX(t){return new ZE(t)}function e8(t){this._context=t}e8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:wd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function DX(t){return new e8(t)}function t8(t,e){this._basis=new Ef(t),this._beta=e}t8.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],s=t[n]-r,o=e[n]-i,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+c*s),this._beta*e[l]+(1-this._beta)*(i+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const BX=function t(e){function n(r){return e===1?new Ef(r):new t8(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function _d(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ub(t,e){this._context=t,this._k=(1-e)/6}Ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_d(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:_d(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const n8=function t(e){function n(r){return new Ub(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Vb(t,e){this._context=t,this._k=(1-e)/6}Vb.prototype={areaStart:Ha,areaEnd:Ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:_d(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const PX=function t(e){function n(r){return new Vb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Yb(t,e){this._context=t,this._k=(1-e)/6}Yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_d(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const FX=function t(e){function n(r){return new Yb(r,e)}return n.tension=function(r){return t(+r)},n}(0);function Gb(t,e,n){var r=t._x1,i=t._y1,s=t._x2,o=t._y2;if(t._l01_a>T_){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>T_){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*h+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*h+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,s,o,t._x2,t._y2)}function r8(t,e){this._context=t,this._alpha=e}r8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Gb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const i8=function t(e){function n(r){return e?new r8(r,e):new Ub(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function a8(t,e){this._context=t,this._alpha=e}a8.prototype={areaStart:Ha,areaEnd:Ha,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Gb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const HX=function t(e){function n(r){return e?new a8(r,e):new Vb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function s8(t,e){this._context=t,this._alpha=e}s8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gb(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const zX=function t(e){function n(r){return e?new s8(r,e):new Yb(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function o8(t){this._context=t}o8.prototype={areaStart:Ha,areaEnd:Ha,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function qX(t){return new o8(t)}function S_(t){return t<0?-1:1}function $_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),l=(s*i+o*r)/(r+i);return(S_(s)+S_(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function E_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function sp(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,o-l*n,s,o)}function vd(t){this._context=t}vd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sp(this,this._t0,E_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,sp(this,E_(this,n=$_(this,t,e)),n);break;default:sp(this,this._t0,n=$_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function l8(t){this._context=new c8(t)}(l8.prototype=Object.create(vd.prototype)).point=function(t,e){vd.prototype.point.call(this,e,t)};function c8(t){this._context=t}c8.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function h8(t){return new vd(t)}function u8(t){return new l8(t)}function d8(t){this._context=t}d8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=j_(t),i=j_(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function j_(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function f8(t){return new d8(t)}function jf(t,e){this._context=t,this._t=e}jf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function p8(t){return new jf(t,.5)}function m8(t){return new jf(t,0)}function g8(t){return new jf(t,1)}function lc(t,e,n){this.k=t,this.x=e,this.y=n}lc.prototype={constructor:lc,scale:function(t){return t===1?this:new lc(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new lc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};lc.prototype;var WX=v(t=>{const{securityLevel:e}=wt();let n=ut("body");if(e==="sandbox"){const s=ut(`#i${t}`).node()?.contentDocument??document;n=ut(s.body)}return n.select(`#${t}`)},"selectSvgElement");function Xb(t){return typeof t>"u"||t===null}v(Xb,"isNothing");function b8(t){return typeof t=="object"&&t!==null}v(b8,"isObject");function y8(t){return Array.isArray(t)?t:Xb(t)?[]:[t]}v(y8,"toArray");function x8(t,e){var n,r,i,s;if(e)for(s=Object.keys(e),n=0,r=s.length;n<r;n+=1)i=s[n],t[i]=e[i];return t}v(x8,"extend");function w8(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}v(w8,"repeat");function _8(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}v(_8,"isNegativeZero");var UX=Xb,VX=b8,YX=y8,GX=w8,XX=_8,JX=x8,an={isNothing:UX,isObject:VX,toArray:YX,repeat:GX,isNegativeZero:XX,extend:JX};function Jb(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}v(Jb,"formatError");function zo(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Jb(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}v(zo,"YAMLException$1");zo.prototype=Object.create(Error.prototype);zo.prototype.constructor=zo;zo.prototype.toString=v(function(e){return this.name+": "+Jb(this,e)},"toString");var ir=zo;function Hu(t,e,n,r,i){var s="",o="",l=Math.floor(i/2)-1;return r-e>l&&(s=" ... ",e=r-l+s.length),n-r>l&&(o=" ...",n=r+l-o.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+o,pos:r-e+s.length}}v(Hu,"getLine");function zu(t,e){return an.repeat(" ",e-t.length)+t}v(zu,"padStart");function v8(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],s,o=-1;s=n.exec(t.buffer);)i.push(s.index),r.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=r.length-2);o<0&&(o=r.length-1);var l="",c,h,u=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(o-c<0);c++)h=Hu(t.buffer,r[o-c],i[o-c],t.position-(r[o]-r[o-c]),d),l=an.repeat(" ",e.indent)+zu((t.line-c+1).toString(),u)+" | "+h.str+`
`+l;for(h=Hu(t.buffer,r[o],i[o],t.position,d),l+=an.repeat(" ",e.indent)+zu((t.line+1).toString(),u)+" | "+h.str+`
`,l+=an.repeat("-",e.indent+u+3+h.pos)+`^
`,c=1;c<=e.linesAfter&&!(o+c>=i.length);c++)h=Hu(t.buffer,r[o+c],i[o+c],t.position-(r[o]-r[o+c]),d),l+=an.repeat(" ",e.indent)+zu((t.line+c+1).toString(),u)+" | "+h.str+`
`;return l.replace(/\n$/,"")}v(v8,"makeSnippet");var QX=v8,KX=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ZX=["scalar","sequence","mapping"];function T8(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}v(T8,"compileStyleAliases");function k8(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(KX.indexOf(n)===-1)throw new ir('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=T8(e.styleAliases||null),ZX.indexOf(this.kind)===-1)throw new ir('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}v(k8,"Type$1");var An=k8;function Pg(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(s,o){s.tag===r.tag&&s.kind===r.kind&&s.multi===r.multi&&(i=o)}),n[i]=r}),n}v(Pg,"compileList");function S8(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(v(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}v(S8,"compileMap");function Td(t){return this.extend(t)}v(Td,"Schema$1");Td.prototype.extend=v(function(e){var n=[],r=[];if(e instanceof An)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new ir("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof An))throw new ir("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new ir("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new ir("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(s){if(!(s instanceof An))throw new ir("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Td.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=Pg(i,"implicit"),i.compiledExplicit=Pg(i,"explicit"),i.compiledTypeMap=S8(i.compiledImplicit,i.compiledExplicit),i},"extend");var eJ=Td,tJ=new An("tag:yaml.org,2002:str",{kind:"scalar",construct:v(function(t){return t!==null?t:""},"construct")}),nJ=new An("tag:yaml.org,2002:seq",{kind:"sequence",construct:v(function(t){return t!==null?t:[]},"construct")}),rJ=new An("tag:yaml.org,2002:map",{kind:"mapping",construct:v(function(t){return t!==null?t:{}},"construct")}),iJ=new eJ({explicit:[tJ,nJ,rJ]});function $8(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}v($8,"resolveYamlNull");function E8(){return null}v(E8,"constructYamlNull");function j8(t){return t===null}v(j8,"isNull");var aJ=new An("tag:yaml.org,2002:null",{kind:"scalar",resolve:$8,construct:E8,predicate:j8,represent:{canonical:v(function(){return"~"},"canonical"),lowercase:v(function(){return"null"},"lowercase"),uppercase:v(function(){return"NULL"},"uppercase"),camelcase:v(function(){return"Null"},"camelcase"),empty:v(function(){return""},"empty")},defaultStyle:"lowercase"});function C8(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}v(C8,"resolveYamlBoolean");function A8(t){return t==="true"||t==="True"||t==="TRUE"}v(A8,"constructYamlBoolean");function I8(t){return Object.prototype.toString.call(t)==="[object Boolean]"}v(I8,"isBoolean");var sJ=new An("tag:yaml.org,2002:bool",{kind:"scalar",resolve:C8,construct:A8,predicate:I8,represent:{lowercase:v(function(t){return t?"true":"false"},"lowercase"),uppercase:v(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:v(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function M8(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}v(M8,"isHexCode");function L8(t){return 48<=t&&t<=55}v(L8,"isOctCode");function O8(t){return 48<=t&&t<=57}v(O8,"isDecCode");function R8(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!M8(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!L8(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!O8(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}v(R8,"resolveYamlInteger");function N8(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}v(N8,"constructYamlInteger");function D8(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!an.isNegativeZero(t)}v(D8,"isInteger");var oJ=new An("tag:yaml.org,2002:int",{kind:"scalar",resolve:R8,construct:N8,predicate:D8,represent:{binary:v(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:v(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:v(function(t){return t.toString(10)},"decimal"),hexadecimal:v(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),lJ=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function B8(t){return!(t===null||!lJ.test(t)||t[t.length-1]==="_")}v(B8,"resolveYamlFloat");function P8(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}v(P8,"constructYamlFloat");var cJ=/^[-+]?[0-9]+e/;function F8(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(an.isNegativeZero(t))return"-0.0";return n=t.toString(10),cJ.test(n)?n.replace("e",".e"):n}v(F8,"representYamlFloat");function H8(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||an.isNegativeZero(t))}v(H8,"isFloat");var hJ=new An("tag:yaml.org,2002:float",{kind:"scalar",resolve:B8,construct:P8,predicate:H8,represent:F8,defaultStyle:"lowercase"}),z8=iJ.extend({implicit:[aJ,sJ,oJ,hJ]}),uJ=z8,q8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),W8=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function U8(t){return t===null?!1:q8.exec(t)!==null||W8.exec(t)!==null}v(U8,"resolveYamlTimestamp");function V8(t){var e,n,r,i,s,o,l,c=0,h=null,u,d,f;if(e=q8.exec(t),e===null&&(e=W8.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(s=+e[4],o=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),h=(u*60+d)*6e4,e[9]==="-"&&(h=-h)),f=new Date(Date.UTC(n,r,i,s,o,l,c)),h&&f.setTime(f.getTime()-h),f}v(V8,"constructYamlTimestamp");function Y8(t){return t.toISOString()}v(Y8,"representYamlTimestamp");var dJ=new An("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:U8,construct:V8,instanceOf:Date,represent:Y8});function G8(t){return t==="<<"||t===null}v(G8,"resolveYamlMerge");var fJ=new An("tag:yaml.org,2002:merge",{kind:"scalar",resolve:G8}),Qb=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function X8(t){if(t===null)return!1;var e,n,r=0,i=t.length,s=Qb;for(n=0;n<i;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}v(X8,"resolveYamlBinary");function J8(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,s=Qb,o=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}v(J8,"constructYamlBinary");function Q8(t){var e="",n=0,r,i,s=t.length,o=Qb;for(r=0;r<s;r++)r%3===0&&r&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[r];return i=s%3,i===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):i===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):i===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}v(Q8,"representYamlBinary");function K8(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}v(K8,"isBinary");var pJ=new An("tag:yaml.org,2002:binary",{kind:"scalar",resolve:X8,construct:J8,predicate:K8,represent:Q8}),mJ=Object.prototype.hasOwnProperty,gJ=Object.prototype.toString;function Z8(t){if(t===null)return!0;var e=[],n,r,i,s,o,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],o=!1,gJ.call(i)!=="[object Object]")return!1;for(s in i)if(mJ.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}v(Z8,"resolveYamlOmap");function ej(t){return t!==null?t:[]}v(ej,"constructYamlOmap");var bJ=new An("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Z8,construct:ej}),yJ=Object.prototype.toString;function tj(t){if(t===null)return!0;var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(r=o[e],yJ.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;s[e]=[i[0],r[i[0]]]}return!0}v(tj,"resolveYamlPairs");function nj(t){if(t===null)return[];var e,n,r,i,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)r=o[e],i=Object.keys(r),s[e]=[i[0],r[i[0]]];return s}v(nj,"constructYamlPairs");var xJ=new An("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:tj,construct:nj}),wJ=Object.prototype.hasOwnProperty;function rj(t){if(t===null)return!0;var e,n=t;for(e in n)if(wJ.call(n,e)&&n[e]!==null)return!1;return!0}v(rj,"resolveYamlSet");function ij(t){return t!==null?t:{}}v(ij,"constructYamlSet");var _J=new An("tag:yaml.org,2002:set",{kind:"mapping",resolve:rj,construct:ij}),aj=uJ.extend({implicit:[dJ,fJ],explicit:[pJ,bJ,xJ,_J]}),za=Object.prototype.hasOwnProperty,kd=1,sj=2,oj=3,Sd=4,op=1,vJ=2,C_=3,TJ=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kJ=/[\x85\u2028\u2029]/,SJ=/[,\[\]\{\}]/,lj=/^(?:!|!!|![a-z\-]+!)$/i,cj=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Fg(t){return Object.prototype.toString.call(t)}v(Fg,"_class");function ni(t){return t===10||t===13}v(ni,"is_EOL");function Ra(t){return t===9||t===32}v(Ra,"is_WHITE_SPACE");function zn(t){return t===9||t===32||t===10||t===13}v(zn,"is_WS_OR_EOL");function ws(t){return t===44||t===91||t===93||t===123||t===125}v(ws,"is_FLOW_INDICATOR");function hj(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}v(hj,"fromHexCode");function uj(t){return t===120?2:t===117?4:t===85?8:0}v(uj,"escapedHexLen");function dj(t){return 48<=t&&t<=57?t-48:-1}v(dj,"fromDecimalCode");function Hg(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}v(Hg,"simpleEscapeSequence");function fj(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}v(fj,"charFromCodepoint");var pj=new Array(256),mj=new Array(256);for(rs=0;rs<256;rs++)pj[rs]=Hg(rs)?1:0,mj[rs]=Hg(rs);var rs;function gj(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||aj,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}v(gj,"State$1");function Kb(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=QX(n),new ir(e,n)}v(Kb,"generateError");function De(t,e){throw Kb(t,e)}v(De,"throwError");function Jc(t,e){t.onWarning&&t.onWarning.call(null,Kb(t,e))}v(Jc,"throwWarning");var A_={YAML:v(function(e,n,r){var i,s,o;e.version!==null&&De(e,"duplication of %YAML directive"),r.length!==1&&De(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&De(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&De(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Jc(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:v(function(e,n,r){var i,s;r.length!==2&&De(e,"TAG directive accepts exactly two arguments"),i=r[0],s=r[1],lj.test(i)||De(e,"ill-formed tag handle (first argument) of the TAG directive"),za.call(e.tagMap,i)&&De(e,'there is a previously declared suffix for "'+i+'" tag handle'),cj.test(s)||De(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{De(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function ca(t,e,n,r){var i,s,o,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,s=l.length;i<s;i+=1)o=l.charCodeAt(i),o===9||32<=o&&o<=1114111||De(t,"expected valid JSON character");else TJ.test(l)&&De(t,"the stream contains non-printable characters");t.result+=l}}v(ca,"captureSegment");function zg(t,e,n,r){var i,s,o,l;for(an.isObject(n)||De(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),o=0,l=i.length;o<l;o+=1)s=i[o],za.call(e,s)||(e[s]=n[s],r[s]=!0)}v(zg,"mergeMappings");function _s(t,e,n,r,i,s,o,l,c){var h,u;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),h=0,u=i.length;h<u;h+=1)Array.isArray(i[h])&&De(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Fg(i[h])==="[object Object]"&&(i[h]="[object Object]");if(typeof i=="object"&&Fg(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(h=0,u=s.length;h<u;h+=1)zg(t,e,s[h],n);else zg(t,e,s,n);else!t.json&&!za.call(n,i)&&za.call(e,i)&&(t.line=o||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,De(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete n[i];return e}v(_s,"storeMappingPair");function Cf(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):De(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}v(Cf,"readLineBreak");function Yt(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ra(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(ni(i))for(Cf(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&Jc(t,"deficient indentation"),r}v(Yt,"skipSeparationSpace");function Sh(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||zn(n)))}v(Sh,"testDocumentSeparator");function Af(t,e){e===1?t.result+=" ":e>1&&(t.result+=an.repeat(`
`,e-1))}v(Af,"writeFoldedLines");function bj(t,e,n){var r,i,s,o,l,c,h,u,d=t.kind,f=t.result,p;if(p=t.input.charCodeAt(t.position),zn(p)||ws(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),zn(i)||n&&ws(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,l=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),zn(i)||n&&ws(i))break}else if(p===35){if(r=t.input.charCodeAt(t.position-1),zn(r))break}else{if(t.position===t.lineStart&&Sh(t)||n&&ws(p))break;if(ni(p))if(c=t.line,h=t.lineStart,u=t.lineIndent,Yt(t,!1,-1),t.lineIndent>=e){l=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=c,t.lineStart=h,t.lineIndent=u;break}}l&&(ca(t,s,o,!1),Af(t,t.line-c),s=o=t.position,l=!1),Ra(p)||(o=t.position+1),p=t.input.charCodeAt(++t.position)}return ca(t,s,o,!1),t.result?!0:(t.kind=d,t.result=f,!1)}v(bj,"readPlainScalar");function yj(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(ca(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else ni(n)?(ca(t,r,i,!0),Af(t,Yt(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Sh(t)?De(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);De(t,"unexpected end of the stream within a single quoted scalar")}v(yj,"readSingleQuotedScalar");function xj(t,e){var n,r,i,s,o,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return ca(t,n,t.position,!0),t.position++,!0;if(l===92){if(ca(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),ni(l))Yt(t,!1,e);else if(l<256&&pj[l])t.result+=mj[l],t.position++;else if((o=uj(l))>0){for(i=o,s=0;i>0;i--)l=t.input.charCodeAt(++t.position),(o=hj(l))>=0?s=(s<<4)+o:De(t,"expected hexadecimal character");t.result+=fj(s),t.position++}else De(t,"unknown escape sequence");n=r=t.position}else ni(l)?(ca(t,n,r,!0),Af(t,Yt(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Sh(t)?De(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}De(t,"unexpected end of the stream within a double quoted scalar")}v(xj,"readDoubleQuotedScalar");function wj(t,e){var n=!0,r,i,s,o=t.tag,l,c=t.anchor,h,u,d,f,p,m=Object.create(null),g,b,y,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,p=!1,l=[];else if(w===123)u=125,p=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),w=t.input.charCodeAt(++t.position);w!==0;){if(Yt(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=o,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=l,!0;n?w===44&&De(t,"expected the node content, but found ','"):De(t,"missed comma between flow collection entries"),b=g=y=null,d=f=!1,w===63&&(h=t.input.charCodeAt(t.position+1),zn(h)&&(d=f=!0,t.position++,Yt(t,!0,e))),r=t.line,i=t.lineStart,s=t.position,Rs(t,e,kd,!1,!0),b=t.tag,g=t.result,Yt(t,!0,e),w=t.input.charCodeAt(t.position),(f||t.line===r)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),Yt(t,!0,e),Rs(t,e,kd,!1,!0),y=t.result),p?_s(t,l,m,b,g,y,r,i,s):d?l.push(_s(t,null,m,b,g,y,r,i,s)):l.push(g),Yt(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(n=!0,w=t.input.charCodeAt(++t.position)):n=!1}De(t,"unexpected end of the stream within a flow collection")}v(wj,"readFlowCollection");function _j(t,e){var n,r,i=op,s=!1,o=!1,l=e,c=0,h=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)r=!1;else if(d===62)r=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)op===i?i=d===43?C_:vJ:De(t,"repeat of a chomping mode identifier");else if((u=dj(d))>=0)u===0?De(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?De(t,"repeat of an indentation width identifier"):(l=e+u-1,o=!0);else break;if(Ra(d)){do d=t.input.charCodeAt(++t.position);while(Ra(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!ni(d)&&d!==0)}for(;d!==0;){for(Cf(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>l&&(l=t.lineIndent),ni(d)){c++;continue}if(t.lineIndent<l){i===C_?t.result+=an.repeat(`
`,s?1+c:c):i===op&&s&&(t.result+=`
`);break}for(r?Ra(d)?(h=!0,t.result+=an.repeat(`
`,s?1+c:c)):h?(h=!1,t.result+=an.repeat(`
`,c+1)):c===0?s&&(t.result+=" "):t.result+=an.repeat(`
`,c):t.result+=an.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,n=t.position;!ni(d)&&d!==0;)d=t.input.charCodeAt(++t.position);ca(t,n,t.position,!1)}return!0}v(_j,"readBlockScalar");function qg(t,e){var n,r=t.tag,i=t.anchor,s=[],o,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,De(t,"tab characters must not be used in indentation")),!(c!==45||(o=t.input.charCodeAt(t.position+1),!zn(o))));){if(l=!0,t.position++,Yt(t,!0,-1)&&t.lineIndent<=e){s.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,Rs(t,e,oj,!1,!0),s.push(t.result),Yt(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)De(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}v(qg,"readBlockSequence");function vj(t,e,n){var r,i,s,o,l,c,h=t.tag,u=t.anchor,d={},f=Object.create(null),p=null,m=null,g=null,b=!1,y=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,De(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),s=t.line,(w===63||w===58)&&zn(r))w===63?(b&&(_s(t,d,f,p,m,null,o,l,c),p=m=g=null),y=!0,b=!0,i=!0):b?(b=!1,i=!0):De(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=r;else{if(o=t.line,l=t.lineStart,c=t.position,!Rs(t,n,sj,!1,!0))break;if(t.line===s){for(w=t.input.charCodeAt(t.position);Ra(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),zn(w)||De(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(_s(t,d,f,p,m,null,o,l,c),p=m=g=null),y=!0,b=!1,i=!1,p=t.tag,m=t.result;else if(y)De(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(y)De(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,l=t.lineStart,c=t.position),Rs(t,e,Sd,!0,i)&&(b?m=t.result:g=t.result),b||(_s(t,d,f,p,m,g,o,l,c),p=m=g=null),Yt(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&w!==0)De(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&_s(t,d,f,p,m,null,o,l,c),y&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=d),y}v(vj,"readBlockMapping");function Tj(t){var e,n=!1,r=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&De(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(r=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):De(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!zn(o);)o===33&&(r?De(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),lj.test(i)||De(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),SJ.test(s)&&De(t,"tag suffix cannot contain flow indicator characters")}s&&!cj.test(s)&&De(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{De(t,"tag name is malformed: "+s)}return n?t.tag=s:za.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:De(t,'undeclared tag handle "'+i+'"'),!0}v(Tj,"readTagProperty");function kj(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&De(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!zn(n)&&!ws(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&De(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}v(kj,"readAnchorProperty");function Sj(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!zn(r)&&!ws(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&De(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),za.call(t.anchorMap,n)||De(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Yt(t,!0,-1),!0}v(Sj,"readAlias");function Rs(t,e,n,r,i){var s,o,l,c=1,h=!1,u=!1,d,f,p,m,g,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=l=Sd===n||oj===n,r&&Yt(t,!0,-1)&&(h=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;Tj(t)||kj(t);)Yt(t,!0,-1)?(h=!0,l=s,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=h||i),(c===1||Sd===n)&&(kd===n||sj===n?g=e:g=e+1,b=t.position-t.lineStart,c===1?l&&(qg(t,b)||vj(t,b,g))||wj(t,g)?u=!0:(o&&_j(t,g)||yj(t,g)||xj(t,g)?u=!0:Sj(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&De(t,"alias node should not have any properties")):bj(t,g,kd===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=l&&qg(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&De(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,f=t.implicitTypes.length;d<f;d+=1)if(m=t.implicitTypes[d],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(za.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,p=t.typeMap.multi[t.kind||"fallback"],d=0,f=p.length;d<f;d+=1)if(t.tag.slice(0,p[d].tag.length)===p[d].tag){m=p[d];break}m||De(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&De(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):De(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}v(Rs,"composeNode");function $j(t){var e=t.position,n,r,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Yt(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!zn(o);)o=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&De(t,"directive name must not be less than one character in length");o!==0;){for(;Ra(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!ni(o));break}if(ni(o))break;for(n=t.position;o!==0&&!zn(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}o!==0&&Cf(t),za.call(A_,r)?A_[r](t,r,i):Jc(t,'unknown document directive "'+r+'"')}if(Yt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Yt(t,!0,-1)):s&&De(t,"directives end mark is expected"),Rs(t,t.lineIndent-1,Sd,!1,!0),Yt(t,!0,-1),t.checkLineBreaks&&kJ.test(t.input.slice(e,t.position))&&Jc(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Sh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Yt(t,!0,-1));return}if(t.position<t.length-1)De(t,"end of the stream or a document separator is expected");else return}v($j,"readDocument");function Zb(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new gj(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,De(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)$j(n);return n.documents}v(Zb,"loadDocuments");function $J(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=Zb(t,n);if(typeof e!="function")return r;for(var i=0,s=r.length;i<s;i+=1)e(r[i])}v($J,"loadAll$1");function Ej(t,e){var n=Zb(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new ir("expected a single document in the stream, but found more")}}v(Ej,"load$1");var EJ=Ej,jJ={load:EJ},jj=Object.prototype.toString,Cj=Object.prototype.hasOwnProperty,ey=65279,CJ=9,Qc=10,AJ=13,IJ=32,MJ=33,LJ=34,Wg=35,OJ=37,RJ=38,NJ=39,DJ=42,Aj=44,BJ=45,$d=58,PJ=61,FJ=62,HJ=63,zJ=64,Ij=91,Mj=93,qJ=96,Lj=123,WJ=124,Oj=125,Rn={};Rn[0]="\\0";Rn[7]="\\a";Rn[8]="\\b";Rn[9]="\\t";Rn[10]="\\n";Rn[11]="\\v";Rn[12]="\\f";Rn[13]="\\r";Rn[27]="\\e";Rn[34]='\\"';Rn[92]="\\\\";Rn[133]="\\N";Rn[160]="\\_";Rn[8232]="\\L";Rn[8233]="\\P";var UJ=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],VJ=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Rj(t,e){var n,r,i,s,o,l,c;if(e===null)return{};for(n={},r=Object.keys(e),i=0,s=r.length;i<s;i+=1)o=r[i],l=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=t.compiledTypeMap.fallback[o],c&&Cj.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[o]=l;return n}v(Rj,"compileStyleMap");function Nj(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new ir("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+an.repeat("0",r-e.length)+e}v(Nj,"encodeHex");var YJ=1,Kc=2;function Dj(t){this.schema=t.schema||aj,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=an.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=Rj(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Kc:YJ,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}v(Dj,"State");function Ug(t,e){for(var n=an.repeat(" ",e),r=0,i=-1,s="",o,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(o=t.slice(r),r=l):(o=t.slice(r,i+1),r=i+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}v(Ug,"indentString");function Ed(t,e){return`
`+an.repeat(" ",t.indent*e)}v(Ed,"generateNextLine");function Bj(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}v(Bj,"testImplicitResolving");function Zc(t){return t===IJ||t===CJ}v(Zc,"isWhitespace");function qo(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ey||65536<=t&&t<=1114111}v(qo,"isPrintable");function Vg(t){return qo(t)&&t!==ey&&t!==AJ&&t!==Qc}v(Vg,"isNsCharOrWhitespace");function Yg(t,e,n){var r=Vg(t),i=r&&!Zc(t);return(n?r:r&&t!==Aj&&t!==Ij&&t!==Mj&&t!==Lj&&t!==Oj)&&t!==Wg&&!(e===$d&&!i)||Vg(e)&&!Zc(e)&&t===Wg||e===$d&&i}v(Yg,"isPlainSafe");function Pj(t){return qo(t)&&t!==ey&&!Zc(t)&&t!==BJ&&t!==HJ&&t!==$d&&t!==Aj&&t!==Ij&&t!==Mj&&t!==Lj&&t!==Oj&&t!==Wg&&t!==RJ&&t!==DJ&&t!==MJ&&t!==WJ&&t!==PJ&&t!==FJ&&t!==NJ&&t!==LJ&&t!==OJ&&t!==zJ&&t!==qJ}v(Pj,"isPlainSafeFirst");function Fj(t){return!Zc(t)&&t!==$d}v(Fj,"isPlainSafeLast");function go(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}v(go,"codePointAt");function ty(t){var e=/^\n* /;return e.test(t)}v(ty,"needIndentIndicator");var Hj=1,Gg=2,zj=3,qj=4,fo=5;function Wj(t,e,n,r,i,s,o,l){var c,h=0,u=null,d=!1,f=!1,p=r!==-1,m=-1,g=Pj(go(t,0))&&Fj(go(t,t.length-1));if(e||o)for(c=0;c<t.length;h>=65536?c+=2:c++){if(h=go(t,c),!qo(h))return fo;g=g&&Yg(h,u,l),u=h}else{for(c=0;c<t.length;h>=65536?c+=2:c++){if(h=go(t,c),h===Qc)d=!0,p&&(f=f||c-m-1>r&&t[m+1]!==" ",m=c);else if(!qo(h))return fo;g=g&&Yg(h,u,l),u=h}f=f||p&&c-m-1>r&&t[m+1]!==" "}return!d&&!f?g&&!o&&!i(t)?Hj:s===Kc?fo:Gg:n>9&&ty(t)?fo:o?s===Kc?fo:Gg:f?qj:zj}v(Wj,"chooseScalarStyle");function Uj(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===Kc?'""':"''";if(!t.noCompatMode&&(UJ.indexOf(e)!==-1||VJ.test(e)))return t.quotingType===Kc?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=r||t.flowLevel>-1&&n>=t.flowLevel;function c(h){return Bj(t,h)}switch(v(c,"testAmbiguity"),Wj(e,l,t.indent,o,c,t.quotingType,t.forceQuotes&&!r,i)){case Hj:return e;case Gg:return"'"+e.replace(/'/g,"''")+"'";case zj:return"|"+Xg(e,t.indent)+Jg(Ug(e,s));case qj:return">"+Xg(e,t.indent)+Jg(Ug(Vj(e,o),s));case fo:return'"'+Yj(e)+'"';default:throw new ir("impossible error: invalid scalar style")}}()}v(Uj,"writeScalar");function Xg(t,e){var n=ty(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),s=i?"+":r?"":"-";return n+s+`
`}v(Xg,"blockHeader");function Jg(t){return t[t.length-1]===`
`?t.slice(0,-1):t}v(Jg,"dropEndingNewline");function Vj(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var h=t.indexOf(`
`);return h=h!==-1?h:t.length,n.lastIndex=h,Qg(t.slice(0,h),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var l=o[1],c=o[2];s=c[0]===" ",r+=l+(!i&&!s&&c!==""?`
`:"")+Qg(c,e),i=s}return r}v(Vj,"foldString");function Qg(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,s,o=0,l=0,c="";r=n.exec(t);)l=r.index,l-i>e&&(s=o>i?o:l,c+=`
`+t.slice(i,s),i=s+1),o=l;return c+=`
`,t.length-i>e&&o>i?c+=t.slice(i,o)+`
`+t.slice(o+1):c+=t.slice(i),c.slice(1)}v(Qg,"foldLine");function Yj(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=go(t,i),r=Rn[n],!r&&qo(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||Nj(n);return e}v(Yj,"escapeString");function Gj(t,e,n){var r="",i=t.tag,s,o,l;for(s=0,o=n.length;s<o;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(Ci(t,e,l,!1,!1)||typeof l>"u"&&Ci(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}v(Gj,"writeFlowSequence");function Kg(t,e,n,r){var i="",s=t.tag,o,l,c;for(o=0,l=n.length;o<l;o+=1)c=n[o],t.replacer&&(c=t.replacer.call(n,String(o),c)),(Ci(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Ci(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=Ed(t,e)),t.dump&&Qc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}v(Kg,"writeBlockSequence");function Xj(t,e,n){var r="",i=t.tag,s=Object.keys(n),o,l,c,h,u;for(o=0,l=s.length;o<l;o+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=s[o],h=n[c],t.replacer&&(h=t.replacer.call(n,c,h)),Ci(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ci(t,e,h,!1,!1)&&(u+=t.dump,r+=u));t.tag=i,t.dump="{"+r+"}"}v(Xj,"writeFlowMapping");function Jj(t,e,n,r){var i="",s=t.tag,o=Object.keys(n),l,c,h,u,d,f;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new ir("sortKeys must be a boolean or a function");for(l=0,c=o.length;l<c;l+=1)f="",(!r||i!=="")&&(f+=Ed(t,e)),h=o[l],u=n[h],t.replacer&&(u=t.replacer.call(n,h,u)),Ci(t,e+1,h,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Qc===t.dump.charCodeAt(0)?f+="?":f+="? "),f+=t.dump,d&&(f+=Ed(t,e)),Ci(t,e+1,u,!0,d)&&(t.dump&&Qc===t.dump.charCodeAt(0)?f+=":":f+=": ",f+=t.dump,i+=f));t.tag=s,t.dump=i||"{}"}v(Jj,"writeBlockMapping");function Zg(t,e,n){var r,i,s,o,l,c;for(i=n?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(l=i[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,jj.call(l.represent)==="[object Function]")r=l.represent(e,c);else if(Cj.call(l.represent,c))r=l.represent[c](e,c);else throw new ir("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}v(Zg,"detectType");function Ci(t,e,n,r,i,s,o){t.tag=null,t.dump=n,Zg(t,n,!1)||Zg(t,n,!0);var l=jj.call(t.dump),c=r,h;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=l==="[object Object]"||l==="[object Array]",d,f;if(u&&(d=t.duplicates.indexOf(n),f=d!==-1),(t.tag!==null&&t.tag!=="?"||f||t.indent!==2&&e>0)&&(i=!1),f&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&f&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(Jj(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(Xj(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?Kg(t,e-1,t.dump,i):Kg(t,e,t.dump,i),f&&(t.dump="&ref_"+d+t.dump)):(Gj(t,e,t.dump),f&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&Uj(t,t.dump,e,s,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new ir("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(h=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",t.dump=h+" "+t.dump)}return!0}v(Ci,"writeNode");function Qj(t,e){var n=[],r=[],i,s;for(jd(t,n,r),i=0,s=r.length;i<s;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(s)}v(Qj,"getDuplicateReferences");function jd(t,e,n){var r,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)jd(t[i],e,n);else for(r=Object.keys(t),i=0,s=r.length;i<s;i+=1)jd(t[r[i]],e,n)}v(jd,"inspectNode");function GJ(t,e){e=e||{};var n=new Dj(e);n.noRefs||Qj(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ci(n,0,r,!0,!0)?n.dump+`
`:""}v(GJ,"dump$1");function XJ(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}v(XJ,"renamed");var JJ=z8,QJ=jJ.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Sn={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},I_={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function cc(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Dt(t),e=Dt(e);const[n,r]=[t.x,t.y],[i,s]=[e.x,e.y],o=i-n,l=s-r;return{angle:Math.atan(l/o),deltaX:o,deltaY:l}}v(cc,"calculateDeltaAndAngle");var Dt=v(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),KJ=v(t=>({x:v(function(e,n,r){let i=0;const s=Dt(r[0]).x<Dt(r[r.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(Sn,t.arrowTypeStart)){const{angle:p,deltaX:m}=cc(r[0],r[1]);i=Sn[t.arrowTypeStart]*Math.cos(p)*(m>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(Sn,t.arrowTypeEnd)){const{angle:p,deltaX:m}=cc(r[r.length-1],r[r.length-2]);i=Sn[t.arrowTypeEnd]*Math.cos(p)*(m>=0?1:-1)}const o=Math.abs(Dt(e).x-Dt(r[r.length-1]).x),l=Math.abs(Dt(e).y-Dt(r[r.length-1]).y),c=Math.abs(Dt(e).x-Dt(r[0]).x),h=Math.abs(Dt(e).y-Dt(r[0]).y),u=Sn[t.arrowTypeStart],d=Sn[t.arrowTypeEnd],f=1;if(o<d&&o>0&&l<d){let p=d+f-o;p*=s==="right"?-1:1,i-=p}if(c<u&&c>0&&h<u){let p=u+f-c;p*=s==="right"?-1:1,i+=p}return Dt(e).x+i},"x"),y:v(function(e,n,r){let i=0;const s=Dt(r[0]).y<Dt(r[r.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(Sn,t.arrowTypeStart)){const{angle:p,deltaY:m}=cc(r[0],r[1]);i=Sn[t.arrowTypeStart]*Math.abs(Math.sin(p))*(m>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(Sn,t.arrowTypeEnd)){const{angle:p,deltaY:m}=cc(r[r.length-1],r[r.length-2]);i=Sn[t.arrowTypeEnd]*Math.abs(Math.sin(p))*(m>=0?1:-1)}const o=Math.abs(Dt(e).y-Dt(r[r.length-1]).y),l=Math.abs(Dt(e).x-Dt(r[r.length-1]).x),c=Math.abs(Dt(e).y-Dt(r[0]).y),h=Math.abs(Dt(e).x-Dt(r[0]).x),u=Sn[t.arrowTypeStart],d=Sn[t.arrowTypeEnd],f=1;if(o<d&&o>0&&l<d){let p=d+f-o;p*=s==="up"?-1:1,i-=p}if(c<u&&c>0&&h<u){let p=u+f-c;p*=s==="up"?-1:1,i+=p}return Dt(e).y+i},"y")}),"getLineFunctionsWithOffset"),ny=v(({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,n=t?.subGraphTitleMargin?.bottom??0,r=e+n;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:r}},"getSubGraphTitleMargins"),ZJ=v(t=>{const{handDrawnSeed:e}=wt();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),ll=v(t=>{const e=eQ([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),eQ=v(t=>{const e=new Map;return t.forEach(n=>{const[r,i]=n.split(":");e.set(r.trim(),i?.trim())}),e},"styles2Map"),Kj=v(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),Me=v(t=>{const{stylesArray:e}=ll(t),n=[],r=[],i=[],s=[];return e.forEach(o=>{const l=o[0];Kj(l)?n.push(o.join(":")+" !important"):(r.push(o.join(":")+" !important"),l.includes("stroke")&&i.push(o.join(":")+" !important"),l==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:s}},"styles2String"),Ie=v((t,e)=>{const{themeVariables:n,handDrawnSeed:r}=wt(),{nodeBorder:i,mainBkg:s}=n,{stylesMap:o}=ll(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||i,seed:r,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:tQ(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),tQ=v(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const i=isNaN(e[0])?0:e[0];return[i,i]}const n=isNaN(e[0])?0:e[0],r=isNaN(e[1])?0:e[1];return[n,r]},"getStrokeDashArray"),Ll={},tn={},M_;function nQ(){return M_||(M_=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.BLANK_URL=tn.relativeFirstCharacters=tn.whitespaceEscapeCharsRegex=tn.urlSchemeRegex=tn.ctrlCharactersRegex=tn.htmlCtrlEntityRegex=tn.htmlEntitiesRegex=tn.invalidProtocolRegex=void 0,tn.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,tn.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,tn.htmlCtrlEntityRegex=/&(newline|tab);/gi,tn.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,tn.urlSchemeRegex=/^.+(:|&colon;)/gim,tn.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,tn.relativeFirstCharacters=[".","/"],tn.BLANK_URL="about:blank"),tn}var L_;function rQ(){if(L_)return Ll;L_=1,Object.defineProperty(Ll,"__esModule",{value:!0}),Ll.sanitizeUrl=void 0;var t=nQ();function e(o){return t.relativeFirstCharacters.indexOf(o[0])>-1}function n(o){var l=o.replace(t.ctrlCharactersRegex,"");return l.replace(t.htmlEntitiesRegex,function(c,h){return String.fromCharCode(h)})}function r(o){return URL.canParse(o)}function i(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return t.BLANK_URL;var l,c=i(o.trim());do c=n(c).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),c=i(c),l=c.match(t.ctrlCharactersRegex)||c.match(t.htmlEntitiesRegex)||c.match(t.htmlCtrlEntityRegex)||c.match(t.whitespaceEscapeCharsRegex);while(l&&l.length>0);var h=c;if(!h)return t.BLANK_URL;if(e(h))return h;var u=h.trimStart(),d=u.match(t.urlSchemeRegex);if(!d)return h;var f=d[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(f))return t.BLANK_URL;var p=u.replace(/\\/g,"/");if(f==="mailto:"||f.includes("://"))return p;if(f==="http:"||f==="https:"){if(!r(p))return t.BLANK_URL;var m=new URL(p);return m.protocol=m.protocol.toLowerCase(),m.hostname=m.hostname.toLowerCase(),m.toString()}return p}return Ll.sanitizeUrl=s,Ll}var iQ=rQ(),Zj=typeof global=="object"&&global&&global.Object===Object&&global,aQ=typeof self=="object"&&self&&self.Object===Object&&self,Ni=Zj||aQ||Function("return this")(),Cd=Ni.Symbol,eC=Object.prototype,sQ=eC.hasOwnProperty,oQ=eC.toString,Ol=Cd?Cd.toStringTag:void 0;function lQ(t){var e=sQ.call(t,Ol),n=t[Ol];try{t[Ol]=void 0;var r=!0}catch{}var i=oQ.call(t);return r&&(e?t[Ol]=n:delete t[Ol]),i}var cQ=Object.prototype,hQ=cQ.toString;function uQ(t){return hQ.call(t)}var dQ="[object Null]",fQ="[object Undefined]",O_=Cd?Cd.toStringTag:void 0;function cl(t){return t==null?t===void 0?fQ:dQ:O_&&O_ in Object(t)?lQ(t):uQ(t)}function Ys(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pQ="[object AsyncFunction]",mQ="[object Function]",gQ="[object GeneratorFunction]",bQ="[object Proxy]";function ry(t){if(!Ys(t))return!1;var e=cl(t);return e==mQ||e==gQ||e==pQ||e==bQ}var lp=Ni["__core-js_shared__"],R_=function(){var t=/[^.]+$/.exec(lp&&lp.keys&&lp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yQ(t){return!!R_&&R_ in t}var xQ=Function.prototype,wQ=xQ.toString;function Gs(t){if(t!=null){try{return wQ.call(t)}catch{}try{return t+""}catch{}}return""}var _Q=/[\\^$.*+?()[\]{}|]/g,vQ=/^\[object .+?Constructor\]$/,TQ=Function.prototype,kQ=Object.prototype,SQ=TQ.toString,$Q=kQ.hasOwnProperty,EQ=RegExp("^"+SQ.call($Q).replace(_Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jQ(t){if(!Ys(t)||yQ(t))return!1;var e=ry(t)?EQ:vQ;return e.test(Gs(t))}function CQ(t,e){return t?.[e]}function Xs(t,e){var n=CQ(t,e);return jQ(n)?n:void 0}var eh=Xs(Object,"create");function AQ(){this.__data__=eh?eh(null):{},this.size=0}function IQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var MQ="__lodash_hash_undefined__",LQ=Object.prototype,OQ=LQ.hasOwnProperty;function RQ(t){var e=this.__data__;if(eh){var n=e[t];return n===MQ?void 0:n}return OQ.call(e,t)?e[t]:void 0}var NQ=Object.prototype,DQ=NQ.hasOwnProperty;function BQ(t){var e=this.__data__;return eh?e[t]!==void 0:DQ.call(e,t)}var PQ="__lodash_hash_undefined__";function FQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=eh&&e===void 0?PQ:e,this}function Ns(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ns.prototype.clear=AQ;Ns.prototype.delete=IQ;Ns.prototype.get=RQ;Ns.prototype.has=BQ;Ns.prototype.set=FQ;function HQ(){this.__data__=[],this.size=0}function If(t,e){return t===e||t!==t&&e!==e}function Mf(t,e){for(var n=t.length;n--;)if(If(t[n][0],e))return n;return-1}var zQ=Array.prototype,qQ=zQ.splice;function WQ(t){var e=this.__data__,n=Mf(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():qQ.call(e,n,1),--this.size,!0}function UQ(t){var e=this.__data__,n=Mf(e,t);return n<0?void 0:e[n][1]}function VQ(t){return Mf(this.__data__,t)>-1}function YQ(t,e){var n=this.__data__,r=Mf(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function xa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xa.prototype.clear=HQ;xa.prototype.delete=WQ;xa.prototype.get=UQ;xa.prototype.has=VQ;xa.prototype.set=YQ;var th=Xs(Ni,"Map");function GQ(){this.size=0,this.__data__={hash:new Ns,map:new(th||xa),string:new Ns}}function XQ(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Lf(t,e){var n=t.__data__;return XQ(e)?n[typeof e=="string"?"string":"hash"]:n.map}function JQ(t){var e=Lf(this,t).delete(t);return this.size-=e?1:0,e}function QQ(t){return Lf(this,t).get(t)}function KQ(t){return Lf(this,t).has(t)}function ZQ(t,e){var n=Lf(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ga(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ga.prototype.clear=GQ;Ga.prototype.delete=JQ;Ga.prototype.get=QQ;Ga.prototype.has=KQ;Ga.prototype.set=ZQ;var eK="Expected a function";function $h(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(eK);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new($h.Cache||Ga),n}$h.Cache=Ga;function tK(){this.__data__=new xa,this.size=0}function nK(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function rK(t){return this.__data__.get(t)}function iK(t){return this.__data__.has(t)}var aK=200;function sK(t,e){var n=this.__data__;if(n instanceof xa){var r=n.__data__;if(!th||r.length<aK-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ga(r)}return n.set(t,e),this.size=n.size,this}function hl(t){var e=this.__data__=new xa(t);this.size=e.size}hl.prototype.clear=tK;hl.prototype.delete=nK;hl.prototype.get=rK;hl.prototype.has=iK;hl.prototype.set=sK;var Ad=function(){try{var t=Xs(Object,"defineProperty");return t({},"",{}),t}catch{}}();function iy(t,e,n){e=="__proto__"&&Ad?Ad(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function e1(t,e,n){(n!==void 0&&!If(t[e],n)||n===void 0&&!(e in t))&&iy(t,e,n)}function oK(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),l=o.length;l--;){var c=o[++i];if(n(s[c],c,s)===!1)break}return e}}var lK=oK(),tC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,N_=tC&&typeof module=="object"&&module&&!module.nodeType&&module,cK=N_&&N_.exports===tC,D_=cK?Ni.Buffer:void 0,B_=D_?D_.allocUnsafe:void 0;function hK(t,e){if(e)return t.slice();var n=t.length,r=B_?B_(n):new t.constructor(n);return t.copy(r),r}var P_=Ni.Uint8Array;function uK(t){var e=new t.constructor(t.byteLength);return new P_(e).set(new P_(t)),e}function dK(t,e){var n=e?uK(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function fK(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var F_=Object.create,pK=function(){function t(){}return function(e){if(!Ys(e))return{};if(F_)return F_(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function nC(t,e){return function(n){return t(e(n))}}var rC=nC(Object.getPrototypeOf,Object),mK=Object.prototype;function Of(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||mK;return t===n}function gK(t){return typeof t.constructor=="function"&&!Of(t)?pK(rC(t)):{}}function Eh(t){return t!=null&&typeof t=="object"}var bK="[object Arguments]";function H_(t){return Eh(t)&&cl(t)==bK}var iC=Object.prototype,yK=iC.hasOwnProperty,xK=iC.propertyIsEnumerable,Id=H_(function(){return arguments}())?H_:function(t){return Eh(t)&&yK.call(t,"callee")&&!xK.call(t,"callee")},Md=Array.isArray,wK=9007199254740991;function aC(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=wK}function Rf(t){return t!=null&&aC(t.length)&&!ry(t)}function _K(t){return Eh(t)&&Rf(t)}function vK(){return!1}var sC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,z_=sC&&typeof module=="object"&&module&&!module.nodeType&&module,TK=z_&&z_.exports===sC,q_=TK?Ni.Buffer:void 0,kK=q_?q_.isBuffer:void 0,ay=kK||vK,SK="[object Object]",$K=Function.prototype,EK=Object.prototype,oC=$K.toString,jK=EK.hasOwnProperty,CK=oC.call(Object);function AK(t){if(!Eh(t)||cl(t)!=SK)return!1;var e=rC(t);if(e===null)return!0;var n=jK.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&oC.call(n)==CK}var IK="[object Arguments]",MK="[object Array]",LK="[object Boolean]",OK="[object Date]",RK="[object Error]",NK="[object Function]",DK="[object Map]",BK="[object Number]",PK="[object Object]",FK="[object RegExp]",HK="[object Set]",zK="[object String]",qK="[object WeakMap]",WK="[object ArrayBuffer]",UK="[object DataView]",VK="[object Float32Array]",YK="[object Float64Array]",GK="[object Int8Array]",XK="[object Int16Array]",JK="[object Int32Array]",QK="[object Uint8Array]",KK="[object Uint8ClampedArray]",ZK="[object Uint16Array]",eZ="[object Uint32Array]",Ot={};Ot[VK]=Ot[YK]=Ot[GK]=Ot[XK]=Ot[JK]=Ot[QK]=Ot[KK]=Ot[ZK]=Ot[eZ]=!0;Ot[IK]=Ot[MK]=Ot[WK]=Ot[LK]=Ot[UK]=Ot[OK]=Ot[RK]=Ot[NK]=Ot[DK]=Ot[BK]=Ot[PK]=Ot[FK]=Ot[HK]=Ot[zK]=Ot[qK]=!1;function tZ(t){return Eh(t)&&aC(t.length)&&!!Ot[cl(t)]}function nZ(t){return function(e){return t(e)}}var lC=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lc=lC&&typeof module=="object"&&module&&!module.nodeType&&module,rZ=Lc&&Lc.exports===lC,cp=rZ&&Zj.process,W_=function(){try{var t=Lc&&Lc.require&&Lc.require("util").types;return t||cp&&cp.binding&&cp.binding("util")}catch{}}(),U_=W_&&W_.isTypedArray,sy=U_?nZ(U_):tZ;function t1(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var iZ=Object.prototype,aZ=iZ.hasOwnProperty;function sZ(t,e,n){var r=t[e];(!(aZ.call(t,e)&&If(r,n))||n===void 0&&!(e in t))&&iy(t,e,n)}function oZ(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],c=void 0;c===void 0&&(c=t[l]),i?iy(n,l,c):sZ(n,l,c)}return n}function lZ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var cZ=9007199254740991,hZ=/^(?:0|[1-9]\d*)$/;function cC(t,e){var n=typeof t;return e=e??cZ,!!e&&(n=="number"||n!="symbol"&&hZ.test(t))&&t>-1&&t%1==0&&t<e}var uZ=Object.prototype,dZ=uZ.hasOwnProperty;function fZ(t,e){var n=Md(t),r=!n&&Id(t),i=!n&&!r&&ay(t),s=!n&&!r&&!i&&sy(t),o=n||r||i||s,l=o?lZ(t.length,String):[],c=l.length;for(var h in t)(e||dZ.call(t,h))&&!(o&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||cC(h,c)))&&l.push(h);return l}function pZ(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var mZ=Object.prototype,gZ=mZ.hasOwnProperty;function bZ(t){if(!Ys(t))return pZ(t);var e=Of(t),n=[];for(var r in t)r=="constructor"&&(e||!gZ.call(t,r))||n.push(r);return n}function hC(t){return Rf(t)?fZ(t,!0):bZ(t)}function yZ(t){return oZ(t,hC(t))}function xZ(t,e,n,r,i,s,o){var l=t1(t,n),c=t1(e,n),h=o.get(c);if(h){e1(t,n,h);return}var u=s?s(l,c,n+"",t,e,o):void 0,d=u===void 0;if(d){var f=Md(c),p=!f&&ay(c),m=!f&&!p&&sy(c);u=c,f||p||m?Md(l)?u=l:_K(l)?u=fK(l):p?(d=!1,u=hK(c,!0)):m?(d=!1,u=dK(c,!0)):u=[]:AK(c)||Id(c)?(u=l,Id(l)?u=yZ(l):(!Ys(l)||ry(l))&&(u=gK(c))):d=!1}d&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),e1(t,n,u)}function uC(t,e,n,r,i){t!==e&&lK(e,function(s,o){if(i||(i=new hl),Ys(s))xZ(t,e,o,n,uC,r,i);else{var l=r?r(t1(t,o),s,o+"",t,e,i):void 0;l===void 0&&(l=s),e1(t,o,l)}},hC)}function dC(t){return t}function wZ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var V_=Math.max;function _Z(t,e,n){return e=V_(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=V_(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(o),wZ(t,this,l)}}function vZ(t){return function(){return t}}var TZ=Ad?function(t,e){return Ad(t,"toString",{configurable:!0,enumerable:!1,value:vZ(e),writable:!0})}:dC,kZ=800,SZ=16,$Z=Date.now;function EZ(t){var e=0,n=0;return function(){var r=$Z(),i=SZ-(r-n);if(n=r,i>0){if(++e>=kZ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var jZ=EZ(TZ);function CZ(t,e){return jZ(_Z(t,e,dC),t+"")}function AZ(t,e,n){if(!Ys(n))return!1;var r=typeof e;return(r=="number"?Rf(n)&&cC(e,n.length):r=="string"&&e in n)?If(n[e],t):!1}function IZ(t){return CZ(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&AZ(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var l=n[r];l&&t(e,l,r,s)}return e})}var MZ=IZ(function(t,e,n){uC(t,e,n)}),LZ="​",OZ={curveBasis:Fu,curveBasisClosed:NX,curveBasisOpen:DX,curveBumpX:QE,curveBumpY:KE,curveBundle:BX,curveCardinalClosed:PX,curveCardinalOpen:FX,curveCardinal:n8,curveCatmullRomClosed:HX,curveCatmullRomOpen:zX,curveCatmullRom:i8,curveLinear:xd,curveLinearClosed:qX,curveMonotoneX:h8,curveMonotoneY:u8,curveNatural:f8,curveStep:p8,curveStepAfter:g8,curveStepBefore:m8},RZ=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,NZ=v(function(t,e){const n=fC(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(n)){const o=n.map(l=>l.args);ld(o),r=rn(r,[...o])}else r=n.args;if(!r)return;let i=Ab(t,e);const s="config";return r[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),r[i]=r[s],delete r[s]),r},"detectInit"),fC=v(function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${RZ.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(n,"").replace(/'/gm,'"'),ce.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let r;const i=[];for(;(r=Ic.exec(t))!==null;)if(r.index===Ic.lastIndex&&Ic.lastIndex++,r&&!e||e&&r[1]?.match(e)||e&&r[2]?.match(e)){const s=r[1]?r[1]:r[2],o=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;i.push({type:s,args:o})}return i.length===0?{type:t,args:null}:i.length===1?i[0]:i}catch(n){return ce.error(`ERROR: ${n.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),DZ=v(function(t){return t.replace(Ic,"")},"removeDirectives"),BZ=v(function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1},"isSubstringInArray");function oy(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return OZ[n]??e}v(oy,"interpolateToCurve");function pC(t,e){const n=t.trim();if(n)return e.securityLevel!=="loose"?iQ.sanitizeUrl(n):n}v(pC,"formatUrl");var PZ=v((t,...e)=>{const n=t.split("."),r=n.length-1,i=n[r];let s=window;for(let o=0;o<r;o++)if(s=s[n[o]],!s){ce.error(`Function name: ${t} not found in window`);return}s[i](...e)},"runFunc");function ly(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}v(ly,"distance");function mC(t){let e,n=0;t.forEach(i=>{n+=ly(i,e),e=i});const r=n/2;return cy(t,r)}v(mC,"traverseEdge");function gC(t){return t.length===1?t[0]:mC(t)}v(gC,"calcLabelPosition");var Y_=v((t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},"roundNumber"),cy=v((t,e)=>{let n,r=e;for(const i of t){if(n){const s=ly(i,n);if(s===0)return n;if(s<r)r-=s;else{const o=r/s;if(o<=0)return n;if(o>=1)return{x:i.x,y:i.y};if(o>0&&o<1)return{x:Y_((1-o)*n.x+o*i.x,5),y:Y_((1-o)*n.y+o*i.y,5)}}}n=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),FZ=v((t,e,n)=>{ce.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const i=cy(e,25),s=t?10:5,o=Math.atan2(e[0].y-i.y,e[0].x-i.x),l={x:0,y:0};return l.x=Math.sin(o)*s+(e[0].x+i.x)/2,l.y=-Math.cos(o)*s+(e[0].y+i.y)/2,l},"calcCardinalityPosition");function bC(t,e,n){const r=structuredClone(n);ce.info("our points",r),e!=="start_left"&&e!=="start_right"&&r.reverse();const i=25+t,s=cy(r,i),o=10+t*.5,l=Math.atan2(r[0].y-s.y,r[0].x-s.x),c={x:0,y:0};return e==="start_left"?(c.x=Math.sin(l+Math.PI)*o+(r[0].x+s.x)/2,c.y=-Math.cos(l+Math.PI)*o+(r[0].y+s.y)/2):e==="end_right"?(c.x=Math.sin(l-Math.PI)*o+(r[0].x+s.x)/2-5,c.y=-Math.cos(l-Math.PI)*o+(r[0].y+s.y)/2-5):e==="end_left"?(c.x=Math.sin(l)*o+(r[0].x+s.x)/2-5,c.y=-Math.cos(l)*o+(r[0].y+s.y)/2-5):(c.x=Math.sin(l)*o+(r[0].x+s.x)/2,c.y=-Math.cos(l)*o+(r[0].y+s.y)/2),c}v(bC,"calcTerminalLabelPosition");function yC(t){let e="",n="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}}v(yC,"getStylesFromArray");var G_=0,HZ=v(()=>(G_++,"id-"+Math.random().toString(36).substr(2,12)+"-"+G_),"generateId");function xC(t){let e="";const n="0123456789abcdef",r=n.length;for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e}v(xC,"makeRandomHex");var zZ=v(t=>xC(t.length),"random"),qZ=v(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),WZ=v(function(t,e){const n=e.text.replace(ol.lineBreakRegex," "),[,r]=Nf(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",r),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const s=i.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(n),i},"drawSimpleText"),UZ=$h((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),ol.lineBreakRegex.test(t)))return t;const r=t.split(" ").filter(Boolean),i=[];let s="";return r.forEach((o,l)=>{const c=pa(`${o} `,n),h=pa(s,n);if(c>e){const{hyphenatedStrings:f,remainingWord:p}=VZ(o,e,"-",n);i.push(s,...f),s=p}else h+c>=e?(i.push(s),s=o):s=[s,o].filter(Boolean).join(" ");l+1===r.length&&i.push(s)}),i.filter(o=>o!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),VZ=$h((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],s=[];let o="";return i.forEach((l,c)=>{const h=`${o}${l}`;if(pa(h,r)>=e){const d=c+1,f=i.length===d,p=`${h}${n}`;s.push(f?h:p),o=""}else o=h}),{hyphenatedStrings:s,remainingWord:o}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function wC(t,e){return hy(t,e).height}v(wC,"calculateTextHeight");function pa(t,e){return hy(t,e).width}v(pa,"calculateTextWidth");var hy=$h((t,e)=>{const{fontSize:n=12,fontFamily:r="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,s]=Nf(n),o=["sans-serif",r],l=t.split(ol.lineBreakRegex),c=[],h=ut("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const f of o){let p=0;const m={width:0,height:0,lineHeight:0};for(const g of l){const b=qZ();b.text=g||LZ;const y=WZ(u,b).style("font-size",s).style("font-weight",i).style("font-family",f),w=(y._groups||y)[0][0].getBBox();if(w.width===0&&w.height===0)throw new Error("svg element not in render tree");m.width=Math.round(Math.max(m.width,w.width)),p=Math.round(w.height),m.height+=p,m.lineHeight=Math.round(Math.max(m.lineHeight,p))}c.push(m)}u.remove();const d=isNaN(c[1].height)||isNaN(c[1].width)||isNaN(c[1].lineHeight)||c[0].height>c[1].height&&c[0].width>c[1].width&&c[0].lineHeight>c[1].lineHeight?0:1;return c[d]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Mo,YZ=(Mo=class{constructor(e=!1,n){this.count=0,this.count=n?n.length:0,this.next=e?()=>this.count++:()=>Date.now()}},v(Mo,"InitIDGenerator"),Mo),au,GZ=v(function(t){return au=au||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),au.innerHTML=t,unescape(au.textContent)},"entityDecode");function uy(t){return"str"in t}v(uy,"isDetailedError");var XZ=v((t,e,n,r)=>{if(!r)return;const i=t.node()?.getBBox();i&&t.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",e)},"insertTitle"),Nf=v(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function dy(t,e){return MZ({},t,e)}v(dy,"cleanAndMerge");var ei={assignWithDepth:rn,wrapLabel:UZ,calculateTextHeight:wC,calculateTextWidth:pa,calculateTextDimensions:hy,cleanAndMerge:dy,detectInit:NZ,detectDirective:fC,isSubstringInArray:BZ,interpolateToCurve:oy,calcLabelPosition:gC,calcCardinalityPosition:FZ,calcTerminalLabelPosition:bC,formatUrl:pC,getStylesFromArray:yC,generateId:HZ,random:zZ,runFunc:PZ,entityDecode:GZ,insertTitle:XZ,isLabelCoordinateInPath:_C,parseFontSize:Nf,InitIDGenerator:YZ},JZ=v(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const r=n.substring(1,n.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),e},"encodeEntities"),Js=v(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),mpe=v((t,e,{counter:n=0,prefix:r,suffix:i},s)=>s||`${r?`${r}_`:""}${t}_${e}_${n}${i?`_${i}`:""}`,"getEdgeId");function In(t){return t??null}v(In,"handleUndefinedAttr");function _C(t,e){const n=Math.round(t.x),r=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return i.includes(n.toString())||i.includes(r.toString())}v(_C,"isLabelCoordinateInPath");const QZ=Object.freeze({left:0,top:0,width:16,height:16}),Ld=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),vC=Object.freeze({...QZ,...Ld}),KZ=Object.freeze({...vC,body:"",hidden:!1}),ZZ=Object.freeze({width:null,height:null}),eee=Object.freeze({...ZZ,...Ld}),tee=(t,e,n,r="")=>{const i=t.split(":");if(t.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const l=i.pop(),c=i.pop(),h={provider:i.length>0?i[0]:r,prefix:c,name:l};return hp(h)?h:null}const s=i[0],o=s.split("-");if(o.length>1){const l={provider:r,prefix:o.shift(),name:o.join("-")};return hp(l)?l:null}if(n&&r===""){const l={provider:r,prefix:"",name:s};return hp(l,n)?l:null}return null},hp=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function nee(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}function X_(t,e){const n=nee(t,e);for(const r in KZ)r in Ld?r in t&&!(r in n)&&(n[r]=Ld[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function ree(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);function s(o){if(n[o])return i[o]=[];if(!(o in i)){i[o]=null;const l=r[o]&&r[o].parent,c=l&&s(l);c&&(i[o]=[l].concat(c))}return i[o]}return(e||Object.keys(n).concat(Object.keys(r))).forEach(s),i}function J_(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let s={};function o(l){s=X_(r[l]||i[l],s)}return o(e),n.forEach(o),X_(t,s)}function iee(t,e){if(t.icons[e])return J_(t,e,[]);const n=ree(t,[e])[e];return n?J_(t,e,n):null}const aee=/(-?[0-9.]*[0-9]+[0-9.]*)/g,see=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Q_(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const r=t.split(aee);if(r===null||!r.length)return t;const i=[];let s=r.shift(),o=see.test(s);for(;;){if(o){const l=parseFloat(s);isNaN(l)?i.push(s):i.push(Math.ceil(l*e*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");o=!o}}function oee(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),s=t.indexOf("</"+e);if(i===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;n+=t.slice(i+1,s).trim(),t=t.slice(0,r).trim()+t.slice(o+1)}return{defs:n,content:t}}function lee(t,e){return t?"<defs>"+t+"</defs>"+e:e}function cee(t,e,n){const r=oee(t);return lee(r.defs,e+r.content+n)}const hee=t=>t==="unset"||t==="undefined"||t==="none";function uee(t,e){const n={...vC,...t},r={...eee,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,r].forEach(g=>{const b=[],y=g.hFlip,w=g.vFlip;let S=g.rotate;y?w?S+=2:(b.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),b.push("scale(-1 1)"),i.top=i.left=0):w&&(b.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),b.push("scale(1 -1)"),i.top=i.left=0);let E;switch(S<0&&(S-=Math.floor(S/4)*4),S=S%4,S){case 1:E=i.height/2+i.top,b.unshift("rotate(90 "+E.toString()+" "+E.toString()+")");break;case 2:b.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:E=i.width/2+i.left,b.unshift("rotate(-90 "+E.toString()+" "+E.toString()+")");break}S%2===1&&(i.left!==i.top&&(E=i.left,i.left=i.top,i.top=E),i.width!==i.height&&(E=i.width,i.width=i.height,i.height=E)),b.length&&(s=cee(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const o=r.width,l=r.height,c=i.width,h=i.height;let u,d;o===null?(d=l===null?"1em":l==="auto"?h:l,u=Q_(d,c/h)):(u=o==="auto"?c:o,d=l===null?Q_(u,h/c):l==="auto"?h:l);const f={},p=(g,b)=>{hee(b)||(f[g]=b.toString())};p("width",u),p("height",d);const m=[i.left,i.top,c,h];return f.viewBox=m.join(" "),{attributes:f,viewBox:m,body:s}}const dee=/\sid="(\S+)"/g,fee="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let pee=0;function mee(t,e=fee){const n=[];let r;for(;r=dee.exec(t);)n.push(r[1]);if(!n.length)return t;const i="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const o=typeof e=="function"?e(s):e+(pee++).toString(),l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+o+i+"$3")}),t=t.replace(new RegExp(i,"g"),""),t}function gee(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in e)n+=" "+r+'="'+e[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}var su={exports:{}},up,K_;function bee(){if(K_)return up;K_=1;var t=1e3,e=t*60,n=e*60,r=n*24,i=r*7,s=r*365.25;up=function(u,d){d=d||{};var f=typeof u;if(f==="string"&&u.length>0)return o(u);if(f==="number"&&isFinite(u))return d.long?c(u):l(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var f=parseFloat(d[1]),p=(d[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*s;case"weeks":case"week":case"w":return f*i;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function l(u){var d=Math.abs(u);return d>=r?Math.round(u/r)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=r?h(u,d,r,"day"):d>=n?h(u,d,n,"hour"):d>=e?h(u,d,e,"minute"):d>=t?h(u,d,t,"second"):u+" ms"}function h(u,d,f,p){var m=d>=f*1.5;return Math.round(u/f)+" "+p+(m?"s":"")}return up}var dp,Z_;function yee(){if(Z_)return dp;Z_=1;function t(e){r.debug=r,r.default=r,r.coerce=h,r.disable=l,r.enable=s,r.enabled=c,r.humanize=bee(),r.destroy=u,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function n(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=n;function r(d){let f,p=null,m,g;function b(...y){if(!b.enabled)return;const w=b,S=Number(new Date),E=S-(f||S);w.diff=E,w.prev=f,w.curr=S,f=S,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let T=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(M,R)=>{if(M==="%%")return"%";T++;const D=r.formatters[R];if(typeof D=="function"){const $=y[T];M=D.call(w,$),y.splice(T,1),T--}return M}),r.formatArgs.call(w,y),(w.log||r.log).apply(w,y)}return b.namespace=d,b.useColors=r.useColors(),b.color=r.selectColor(d),b.extend=i,b.destroy=r.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(m!==r.namespaces&&(m=r.namespaces,g=r.enabled(d)),g),set:y=>{p=y}}),typeof r.init=="function"&&r.init(b),b}function i(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];const f=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const p of f)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function o(d,f){let p=0,m=0,g=-1,b=0;for(;p<d.length;)if(m<f.length&&(f[m]===d[p]||f[m]==="*"))f[m]==="*"?(g=m,b=p,m++):(p++,m++);else if(g!==-1)m=g+1,b++,p=b;else return!1;for(;m<f.length&&f[m]==="*";)m++;return m===f.length}function l(){const d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function c(d){for(const f of r.skips)if(o(d,f))return!1;for(const f of r.names)if(o(d,f))return!0;return!1}function h(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return dp=t,dp}var xee={},ev;function wee(){return ev||(ev=1,function(t,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;c.splice(1,0,h,"color: inherit");let u=0,d=0;c[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(d=u))}),c.splice(d,0,h)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=xee.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=yee()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(su,su.exports)),su.exports}function fy(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Qs=fy();function TC(t){Qs=t}var Oc={exec:()=>null};function vt(t,e=""){let n=typeof t=="string"?t:t.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(qn.caret,"$1"),n=n.replace(i,o),r},getRegex:()=>new RegExp(n,e)};return r}var qn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},_ee=/^(?:[ \t]*(?:\n|$))+/,vee=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Tee=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,jh=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,kee=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,py=/(?:[*+-]|\d{1,9}[.)])/,kC=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,SC=vt(kC).replace(/bull/g,py).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),See=vt(kC).replace(/bull/g,py).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),my=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$ee=/^[^\n]+/,gy=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Eee=vt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",gy).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),jee=vt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,py).getRegex(),Df="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",by=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Cee=vt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",by).replace("tag",Df).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$C=vt(my).replace("hr",jh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Df).getRegex(),Aee=vt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$C).getRegex(),yy={blockquote:Aee,code:vee,def:Eee,fences:Tee,heading:kee,hr:jh,html:Cee,lheading:SC,list:jee,newline:_ee,paragraph:$C,table:Oc,text:$ee},tv=vt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",jh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Df).getRegex(),Iee={...yy,lheading:See,table:tv,paragraph:vt(my).replace("hr",jh).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",tv).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Df).getRegex()},Mee={...yy,html:vt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",by).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Oc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:vt(my).replace("hr",jh).replace("heading",` *#{1,6} *[^
]`).replace("lheading",SC).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Lee=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Oee=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,EC=/^( {2,}|\\)\n(?!\s*$)/,Ree=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Bf=/[\p{P}\p{S}]/u,xy=/[\s\p{P}\p{S}]/u,jC=/[^\s\p{P}\p{S}]/u,Nee=vt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,xy).getRegex(),CC=/(?!~)[\p{P}\p{S}]/u,Dee=/(?!~)[\s\p{P}\p{S}]/u,Bee=/(?:[^\s\p{P}\p{S}]|~)/u,Pee=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,AC=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Fee=vt(AC,"u").replace(/punct/g,Bf).getRegex(),Hee=vt(AC,"u").replace(/punct/g,CC).getRegex(),IC="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",zee=vt(IC,"gu").replace(/notPunctSpace/g,jC).replace(/punctSpace/g,xy).replace(/punct/g,Bf).getRegex(),qee=vt(IC,"gu").replace(/notPunctSpace/g,Bee).replace(/punctSpace/g,Dee).replace(/punct/g,CC).getRegex(),Wee=vt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,jC).replace(/punctSpace/g,xy).replace(/punct/g,Bf).getRegex(),Uee=vt(/\\(punct)/,"gu").replace(/punct/g,Bf).getRegex(),Vee=vt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Yee=vt(by).replace("(?:-->|$)","-->").getRegex(),Gee=vt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Yee).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Od=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,Xee=vt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Od).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),MC=vt(/^!?\[(label)\]\[(ref)\]/).replace("label",Od).replace("ref",gy).getRegex(),LC=vt(/^!?\[(ref)\](?:\[\])?/).replace("ref",gy).getRegex(),Jee=vt("reflink|nolink(?!\\()","g").replace("reflink",MC).replace("nolink",LC).getRegex(),wy={_backpedal:Oc,anyPunctuation:Uee,autolink:Vee,blockSkip:Pee,br:EC,code:Oee,del:Oc,emStrongLDelim:Fee,emStrongRDelimAst:zee,emStrongRDelimUnd:Wee,escape:Lee,link:Xee,nolink:LC,punctuation:Nee,reflink:MC,reflinkSearch:Jee,tag:Gee,text:Ree,url:Oc},Qee={...wy,link:vt(/^!?\[(label)\]\((.*?)\)/).replace("label",Od).getRegex(),reflink:vt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Od).getRegex()},n1={...wy,emStrongRDelimAst:qee,emStrongLDelim:Hee,url:vt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Kee={...n1,br:vt(EC).replace("{2,}","*").getRegex(),text:vt(n1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ou={normal:yy,gfm:Iee,pedantic:Mee},Rl={normal:wy,gfm:n1,breaks:Kee,pedantic:Qee},Zee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nv=t=>Zee[t];function fi(t,e){if(e){if(qn.escapeTest.test(t))return t.replace(qn.escapeReplace,nv)}else if(qn.escapeTestNoEncode.test(t))return t.replace(qn.escapeReplaceNoEncode,nv);return t}function rv(t){try{t=encodeURI(t).replace(qn.percentDecode,"%")}catch{return null}return t}function iv(t,e){let n=t.replace(qn.findPipe,(s,o,l)=>{let c=!1,h=o;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),r=n.split(qn.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(qn.slashPipe,"|");return r}function Nl(t,e,n){let r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function ete(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function av(t,e,n,r,i){let s=e.href,o=e.title||null,l=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let c={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:l,tokens:r.inlineTokens(l)};return r.state.inLink=!1,c}function tte(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=i.length?s.slice(i.length):s}).join(`
`)}var Rd=class{options;rules;lexer;constructor(e){this.options=e||Qs}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Nl(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],i=tte(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){let i=Nl(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Nl(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=Nl(n[0],`
`).split(`
`),i="",s="",o=[];for(;r.length>0;){let l=!1,c=[],h;for(h=0;h<r.length;h++)if(this.rules.other.blockquoteStart.test(r[h]))c.push(r[h]),l=!0;else if(!l)c.push(r[h]);else break;r=r.slice(h);let u=c.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,s=s?`${s}
${d}`:d;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=f,r.length===0)break;let p=o.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let m=p,g=m.raw+`
`+r.join(`
`),b=this.blockquote(g);o[o.length-1]=b,i=i.substring(0,i.length-m.raw.length)+b.raw,s=s.substring(0,s.length-m.text.length)+b.text;break}else if(p?.type==="list"){let m=p,g=m.raw+`
`+r.join(`
`),b=this.list(g);o[o.length-1]=b,i=i.substring(0,i.length-p.raw.length)+b.raw,s=s.substring(0,s.length-m.raw.length)+b.raw,r=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),l=!1;for(;e;){let h=!1,u="",d="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let f=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,w=>" ".repeat(3*w.length)),p=e.split(`
`,1)[0],m=!f.trim(),g=0;if(this.options.pedantic?(g=2,d=f.trimStart()):m?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=f.slice(g),g+=n[1].length),m&&this.rules.other.blankLine.test(p)&&(u+=p+`
`,e=e.substring(p.length+1),h=!0),!h){let w=this.rules.other.nextBulletRegex(g),S=this.rules.other.hrRegex(g),E=this.rules.other.fencesBeginRegex(g),T=this.rules.other.headingBeginRegex(g),C=this.rules.other.htmlBeginRegex(g);for(;e;){let M=e.split(`
`,1)[0],R;if(p=M,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),R=p):R=p.replace(this.rules.other.tabCharGlobal,"    "),E.test(p)||T.test(p)||C.test(p)||w.test(p)||S.test(p))break;if(R.search(this.rules.other.nonSpaceChar)>=g||!p.trim())d+=`
`+R.slice(g);else{if(m||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(f)||T.test(f)||S.test(f))break;d+=`
`+p}!m&&!p.trim()&&(m=!0),u+=M+`
`,e=e.substring(M.length+1),f=R.slice(g)}}s.loose||(l?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0));let b=null,y;this.options.gfm&&(b=this.rules.other.listIsTask.exec(d),b&&(y=b[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!b,checked:y,loose:!1,text:d,tokens:[]}),s.raw+=u}let c=s.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){let u=s.items[h].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=d}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:s}}}table(e){let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let r=iv(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let l of i)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<r.length;l++)o.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(iv(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=Nl(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=ete(n[2],"()");if(o===-2)return;if(o>-1){let l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),av(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return av(r,s,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let s=[...i[0]].length-1,o,l,c=s,h=0,u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*e.length+s);(i=u.exec(n))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(l=[...o].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){h+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+h);let d=[...i[0]][0].length,f=e.slice(0,s+i.index+d+l);if(Math.min(s,l)%2){let m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}let p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let r,i;if(n[2]==="@")r=n[0],i="mailto:"+r;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(s!==n[0]);r=n[0],n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}},ia=class r1{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Qs,this.options.tokenizer=this.options.tokenizer||new Rd,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:qn,block:ou.normal,inline:Rl.normal};this.options.pedantic?(n.block=ou.pedantic,n.inline=Rl.pedantic):this.options.gfm&&(n.block=ou.gfm,this.options.breaks?n.inline=Rl.breaks:n.inline=Rl.gfm),this.tokenizer.rules=n}static get rules(){return{block:ou,inline:Rl}}static lex(e,n){return new r1(n).lex(e)}static lexInline(e,n){return new r1(n).inlineTokens(e)}lex(e){e=e.replace(qn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){for(this.options.pedantic&&(e=e.replace(qn.tabCharGlobal,"    ").replace(qn.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,n))?(e=e.substring(i.raw.length),n.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=n.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},n.push(i));continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=n.at(-1);r&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let r=e,i=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let s=!1,o="";for(;e;){s||(o=""),s=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let h=n.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,o)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let c=e;if(this.options.extensions?.startInline){let h=1/0,u=e.slice(1),d;this.options.extensions.startInline.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(h=Math.min(h,d))}),h<1/0&&h>=0&&(c=e.substring(0,h+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),s=!0;let h=n.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},Nd=class{options;parser;constructor(e){this.options=e||Qs}space(e){return""}code({text:e,lang:n,escaped:r}){let i=(n||"").match(qn.notSpaceStart)?.[0],s=e.replace(qn.endingNewline,"")+`
`;return i?'<pre><code class="language-'+fi(i)+'">'+(r?s:fi(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:fi(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){let n=e.ordered,r=e.start,i="";for(let l=0;l<e.items.length;l++){let c=e.items[l];i+=this.listitem(c)}let s=n?"ol":"ul",o=n&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){let n="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+fi(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):n+=r+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);n+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];r="";for(let l=0;l<o.length;l++)r+=this.tablecell(o[l]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${fi(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){let i=this.parser.parseInline(r),s=rv(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return n&&(o+=' title="'+fi(n)+'"'),o+=">"+i+"</a>",o}image({href:e,title:n,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let s=rv(e);if(s===null)return fi(r);e=s;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${fi(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:fi(e.text)}},_y=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},aa=class i1{options;renderer;textRenderer;constructor(e){this.options=e||Qs,this.options.renderer=this.options.renderer||new Nd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new _y}static parse(e,n){return new i1(n).parse(e)}static parseInline(e,n){return new i1(n).parseInline(e)}parse(e,n=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let l=s,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){r+=c||"";continue}}let o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"def":{r+=this.renderer.def(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let l=o,c=this.renderer.text(l);for(;i+1<e.length&&e[i+1].type==="text";)l=e[++i],c+=`
`+this.renderer.text(l);n?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(e,n=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=l||"";continue}}let o=s;switch(o.type){case"escape":{r+=n.text(o);break}case"html":{r+=n.html(o);break}case"link":{r+=n.link(o);break}case"image":{r+=n.image(o);break}case"strong":{r+=n.strong(o);break}case"em":{r+=n.em(o);break}case"codespan":{r+=n.codespan(o);break}case"br":{r+=n.br(o);break}case"del":{r+=n.del(o);break}case"text":{r+=n.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}},hc=class{options;block;constructor(e){this.options=e||Qs}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?ia.lex:ia.lexInline}provideParser(){return this.block?aa.parse:aa.parseInline}},nte=class{defaults=fy();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=aa;Renderer=Nd;TextRenderer=_y;Lexer=ia;Tokenizer=Rd;Hooks=hc;constructor(...e){this.use(...e)}walkTokens(e,n){let r=[];for(let i of e)switch(r=r.concat(n.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,n));for(let o of s.rows)for(let l of o)r=r.concat(this.walkTokens(l.tokens,n));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,n));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let l=s[o].flat(1/0);r=r.concat(this.walkTokens(l,n))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,n)))}}return r}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=n.renderers[s.name];o?n.renderers[s.name]=function(...l){let c=s.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),i.extensions=n),r.renderer){let s=this.defaults.renderer||new Nd(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let l=o,c=r.renderer[l],h=s[l];s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Rd(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let l=o,c=r.tokenizer[l],h=s[l];s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new hc;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let l=o,c=r.hooks[l],h=s[l];hc.passThroughHooks.has(o)?s[l]=u=>{if(this.defaults.async&&hc.passThroughHooksRespectAsync.has(o))return Promise.resolve(c.call(s,u)).then(f=>h.call(s,f));let d=c.call(s,u);return h.call(s,d)}:s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),s&&(c=c.concat(s.call(this,l))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return ia.lex(e,n??this.defaults)}parser(e,n){return aa.parse(e,n??this.defaults)}parseMarkdown(e){return(n,r)=>{let i={...r},s={...this.defaults,...i},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let l=s.hooks?s.hooks.provideLexer():e?ia.lex:ia.lexInline,c=s.hooks?s.hooks.provideParser():e?aa.parse:aa.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(h=>l(h,s)).then(h=>s.hooks?s.hooks.processAllTokens(h):h).then(h=>s.walkTokens?Promise.all(this.walkTokens(h,s.walkTokens)).then(()=>h):h).then(h=>c(h,s)).then(h=>s.hooks?s.hooks.postprocess(h):h).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let h=l(n,s);s.hooks&&(h=s.hooks.processAllTokens(h)),s.walkTokens&&this.walkTokens(h,s.walkTokens);let u=c(h,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(h){return o(h)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+fi(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}},Ds=new nte;function _t(t,e){return Ds.parse(t,e)}_t.options=_t.setOptions=function(t){return Ds.setOptions(t),_t.defaults=Ds.defaults,TC(_t.defaults),_t};_t.getDefaults=fy;_t.defaults=Qs;_t.use=function(...t){return Ds.use(...t),_t.defaults=Ds.defaults,TC(_t.defaults),_t};_t.walkTokens=function(t,e){return Ds.walkTokens(t,e)};_t.parseInline=Ds.parseInline;_t.Parser=aa;_t.parser=aa.parse;_t.Renderer=Nd;_t.TextRenderer=_y;_t.Lexer=ia;_t.lexer=ia.lex;_t.Tokenizer=Rd;_t.Hooks=hc;_t.parse=_t;_t.options;_t.setOptions;_t.use;_t.walkTokens;_t.parseInline;aa.parse;ia.lex;function OC(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(l,c){var h=c.match(/\n([\t ]+|(?!\s).)/g);return h?l.concat(h.map(function(u){var d,f;return(f=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&f!==void 0?f:0})):l},[]);if(i.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(l){return l.replace(s,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var o=r[0];return e.forEach(function(l,c){var h=o.match(/(?:^|\n)( *)$/),u=h?h[1]:"",d=l;typeof l=="string"&&l.includes(`
`)&&(d=String(l).split(`
`).map(function(f,p){return p===0?f:""+u+f}).join(`
`)),o+=d+r[c+1]}),o}var rte={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},a1=new Map,RC=new Map,ite=v(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(ce.debug("Registering icon pack:",e.name),"loader"in e)RC.set(e.name,e.loader);else if("icons"in e)a1.set(e.name,e.icons);else throw ce.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),NC=v(async(t,e)=>{const n=tee(t,!0,e!==void 0);if(!n)throw new Error(`Invalid icon name: ${t}`);const r=n.prefix||e;if(!r)throw new Error(`Icon name must contain a prefix: ${t}`);let i=a1.get(r);if(!i){const o=RC.get(r);if(!o)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await o(),prefix:r},a1.set(r,i)}catch(l){throw ce.error(l),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=iee(i,n.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),ate=v(async t=>{try{return await NC(t),!0}catch{return!1}},"isIconAvailable"),Ch=v(async(t,e,n)=>{let r;try{r=await NC(t,e?.fallbackPrefix)}catch(o){ce.error(o),r=rte}const i=uee(r,e),s=gee(mee(i.body),{...i.attributes,...n});return Br(s,Cn())},"getIconSVG");function DC(t,{markdownAutoWrap:e}){const r=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=OC(r);return e===!1?i.replace(/ /g,"&nbsp;"):i}v(DC,"preprocessMarkdown");function BC(t,e={}){const n=DC(t,e),r=_t.lexer(n),i=[[]];let s=0;function o(l,c="normal"){l.type==="text"?l.text.split(`
`).forEach((u,d)=>{d!==0&&(s++,i.push([])),u.split(" ").forEach(f=>{f=f.replace(/&#39;/g,"'"),f&&i[s].push({content:f,type:c})})}):l.type==="strong"||l.type==="em"?l.tokens.forEach(h=>{o(h,l.type)}):l.type==="html"&&i[s].push({content:l.text,type:"normal"})}return v(o,"processNode"),r.forEach(l=>{l.type==="paragraph"?l.tokens?.forEach(c=>{o(c)}):l.type==="html"?i[s].push({content:l.text,type:"normal"}):i[s].push({content:l.raw,type:"normal"})}),i}v(BC,"markdownToLines");function PC(t,{markdownAutoWrap:e}={}){const n=_t.lexer(t);function r(i){return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${i.tokens?.map(r).join("")}</strong>`:i.type==="em"?`<em>${i.tokens?.map(r).join("")}</em>`:i.type==="paragraph"?`<p>${i.tokens?.map(r).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:(ce.warn(`Unsupported markdown: ${i.type}`),i.raw)}return v(r,"output"),n.map(r).join("")}v(PC,"markdownToHTML");function FC(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}v(FC,"splitTextToChars");function HC(t,e){const n=FC(e.content);return vy(t,[],n,e.type)}v(HC,"splitWordToFitWidth");function vy(t,e,n,r){if(n.length===0)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...s]=n,o=[...e,i];return t([{content:o.join(""),type:r}])?vy(t,o,s,r):(e.length===0&&i&&(e.push(i),n.shift()),[{content:e.join(""),type:r},{content:n.join(""),type:r}])}v(vy,"splitWordToFitWidthRecursion");function zC(t,e){if(t.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Dd(t,e)}v(zC,"splitLineToFitWidth");function Dd(t,e,n=[],r=[]){if(t.length===0)return r.length>0&&n.push(r),n.length>0?n:[];let i="";t[0].content===" "&&(i=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...r];if(i!==""&&o.push({content:i,type:"normal"}),o.push(s),e(o))return Dd(t,e,n,o);if(r.length>0)n.push(r),t.unshift(s);else if(s.content){const[l,c]=HC(e,s);n.push([l]),c.content&&t.unshift(c)}return Dd(t,e,n)}v(Dd,"splitLineToFitWidthRecursion");function s1(t,e){e&&t.attr("style",e)}v(s1,"applyStyle");async function qC(t,e,n,r,i=!1,s=Cn()){const o=t.append("foreignObject");o.attr("width",`${10*n}px`),o.attr("height",`${10*n}px`);const l=o.append("xhtml:div"),c=Po(e.label)?await Ib(e.label.replace(ol.lineBreakRegex,`
`),s):Br(e.label,s),h=e.isNode?"nodeLabel":"edgeLabel",u=l.append("span");u.html(c),s1(u,e.labelStyle),u.attr("class",`${h} ${r}`),s1(l,e.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("line-height","1.5"),l.style("max-width",n+"px"),l.style("text-align","center"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&l.attr("class","labelBkg");let d=l.node().getBoundingClientRect();return d.width===n&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",n+"px"),d=l.node().getBoundingClientRect()),o.node()}v(qC,"addHtmlSpan");function Pf(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}v(Pf,"createTspan");function WC(t,e,n){const r=t.append("text"),i=Pf(r,1,e);Ff(i,n);const s=i.node().getComputedTextLength();return r.remove(),s}v(WC,"computeWidthOfText");function ste(t,e,n){const r=t.append("text"),i=Pf(r,1,e);Ff(i,[{content:n,type:"normal"}]);const s=i.node()?.getBoundingClientRect();return s&&r.remove(),s}v(ste,"computeDimensionOfText");function UC(t,e,n,r=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),l=s.append("text").attr("y","-10.1");let c=0;for(const h of n){const u=v(f=>WC(s,1.1,f)<=t,"checkWidth"),d=u(h)?[h]:zC(h,u);for(const f of d){const p=Pf(l,c,1.1);Ff(p,f),c++}}if(r){const h=l.node().getBBox(),u=2;return o.attr("x",h.x-u).attr("y",h.y-u).attr("width",h.width+2*u).attr("height",h.height+2*u),s.node()}else return l.node()}v(UC,"createFormattedText");function Ff(t,e){t.text(""),e.forEach((n,r)=>{const i=t.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");r===0?i.text(n.content):i.text(" "+n.content)})}v(Ff,"updateTextContentAndStyles");async function VC(t,e={}){const n=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,s,o)=>(n.push((async()=>{const l=`${s}:${o}`;return await ate(l)?await Ch(l,void 0,{class:"label-icon"}):`<i class='${Br(i,e).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(n);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}v(VC,"replaceIconSubstring");var Xa=v(async(t,e="",{style:n="",isTitle:r=!1,classes:i="",useHtmlLabels:s=!0,isNode:o=!0,width:l=200,addSvgBackground:c=!1}={},h)=>{if(ce.debug("XYZ createText",e,n,r,i,s,o,"addSvgBackground: ",c),s){const u=PC(e,h),d=await VC(Js(u),h),f=e.replace(/\\\\/g,"\\"),p={isNode:o,label:Po(e)?f:d,labelStyle:n.replace("fill:","color:")};return await qC(t,p,l,i,c,h)}else{const u=e.replace(/<br\s*\/?>/g,"<br/>"),d=BC(u.replace("<br>","<br/>"),h),f=UC(l,t,d,e?c:!1);if(o){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const p=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");ut(f).attr("style",p)}else{const p=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");ut(f).select("rect").attr("style",p.replace(/background:/g,"fill:"));const m=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");ut(f).select("text").attr("style",m)}return f}},"createText");function fp(t,e,n){if(t&&t.length){const[r,i]=e,s=Math.PI/180*n,o=Math.cos(s),l=Math.sin(s);for(const c of t){const[h,u]=c;c[0]=(h-r)*o-(u-i)*l+r,c[1]=(h-r)*l+(u-i)*o+i}}}function ote(t,e){return t[0]===e[0]&&t[1]===e[1]}function lte(t,e,n,r=1){const i=n,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,l=[0,0];if(i)for(const h of o)fp(h,l,i);const c=function(h,u,d){const f=[];for(const w of h){const S=[...w];ote(S[0],S[S.length-1])||S.push([S[0][0],S[0][1]]),S.length>2&&f.push(S)}const p=[];u=Math.max(u,.1);const m=[];for(const w of f)for(let S=0;S<w.length-1;S++){const E=w[S],T=w[S+1];if(E[1]!==T[1]){const C=Math.min(E[1],T[1]);m.push({ymin:C,ymax:Math.max(E[1],T[1]),x:C===E[1]?E[0]:T[0],islope:(T[0]-E[0])/(T[1]-E[1])})}}if(m.sort((w,S)=>w.ymin<S.ymin?-1:w.ymin>S.ymin?1:w.x<S.x?-1:w.x>S.x?1:w.ymax===S.ymax?0:(w.ymax-S.ymax)/Math.abs(w.ymax-S.ymax)),!m.length)return p;let g=[],b=m[0].ymin,y=0;for(;g.length||m.length;){if(m.length){let w=-1;for(let S=0;S<m.length&&!(m[S].ymin>b);S++)w=S;m.splice(0,w+1).forEach(S=>{g.push({s:b,edge:S})})}if(g=g.filter(w=>!(w.edge.ymax<=b)),g.sort((w,S)=>w.edge.x===S.edge.x?0:(w.edge.x-S.edge.x)/Math.abs(w.edge.x-S.edge.x)),(d!==1||y%u==0)&&g.length>1)for(let w=0;w<g.length;w+=2){const S=w+1;if(S>=g.length)break;const E=g[w].edge,T=g[S].edge;p.push([[Math.round(E.x),b],[Math.round(T.x),b]])}b+=d,g.forEach(w=>{w.edge.x=w.edge.x+d*w.edge.islope}),y++}return p}(o,s,r);if(i){for(const h of o)fp(h,l,-i);(function(h,u,d){const f=[];h.forEach(p=>f.push(...p)),fp(f,u,d)})(c,l,-i)}return c}function Ah(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=i),lte(t,i,r,s||1)}class Ty{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const r=Ah(e,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(e,n){const r=[];for(const i of e)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Hf(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class cte extends Ty{fillPolygons(e,n){let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);const i=Ah(e,Object.assign({},n,{hachureGap:r})),s=Math.PI/180*n.hachureAngle,o=[],l=.5*r*Math.cos(s),c=.5*r*Math.sin(s);for(const[h,u]of i)Hf([h,u])&&o.push([[h[0]-l,h[1]+c],[...u]],[[h[0]+l,h[1]-c],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}}class hte extends Ty{fillPolygons(e,n){const r=this._fillPolygons(e,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,i);return r.ops=r.ops.concat(s.ops),r}}class ute{constructor(e){this.helper=e}fillPolygons(e,n){const r=Ah(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(r,n)}dotsOnLines(e,n){const r=[];let i=n.hachureGap;i<0&&(i=4*n.strokeWidth),i=Math.max(i,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=i/4;for(const l of e){const c=Hf(l),h=c/i,u=Math.ceil(h)-1,d=c-u*i,f=(l[0][0]+l[1][0])/2-i/4,p=Math.min(l[0][1],l[1][1]);for(let m=0;m<u;m++){const g=p+d+m*i,b=f-o+2*Math.random()*o,y=g-o+2*Math.random()*o,w=this.helper.ellipse(b,y,s,s,n);r.push(...w.ops)}}return{type:"fillSketch",ops:r}}}class dte{constructor(e){this.helper=e}fillPolygons(e,n){const r=Ah(e,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(e,n){const r=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach(o=>{const l=Hf(o),c=Math.floor(l/(r+i)),h=(l+i-c*(r+i))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const f=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let p=0;p<c;p++){const m=p*(r+i),g=m+r,b=[u[0]+m*Math.cos(f)+h*Math.cos(f),u[1]+m*Math.sin(f)+h*Math.sin(f)],y=[u[0]+g*Math.cos(f)+h*Math.cos(f),u[1]+g*Math.sin(f)+h*Math.sin(f)];s.push(...this.helper.doubleLineOps(b[0],b[1],y[0],y[1],n))}}),s}}class fte{constructor(e){this.helper=e}fillPolygons(e,n){const r=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset,s=Ah(e,n=Object.assign({},n,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(s,i,n)}}zigzagLines(e,n,r){const i=[];return e.forEach(s=>{const o=Hf(s),l=Math.round(o/(2*n));let c=s[0],h=s[1];c[0]>h[0]&&(c=s[1],h=s[0]);const u=Math.atan((h[1]-c[1])/(h[0]-c[0]));for(let d=0;d<l;d++){const f=2*d*n,p=2*(d+1)*n,m=Math.sqrt(2*Math.pow(n,2)),g=[c[0]+f*Math.cos(u),c[1]+f*Math.sin(u)],b=[c[0]+p*Math.cos(u),c[1]+p*Math.sin(u)],y=[g[0]+m*Math.cos(u+Math.PI/4),g[1]+m*Math.sin(u+Math.PI/4)];i.push(...this.helper.doubleLineOps(g[0],g[1],y[0],y[1],r),...this.helper.doubleLineOps(y[0],y[1],b[0],b[1],r))}}),i}}const Kn={};class pte{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const mte=0,pp=1,sv=2,lu={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function mp(t,e){return t.type===e}function ky(t){const e=[],n=function(o){const l=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))l[l.length]={type:mte,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];l[l.length]={type:pp,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return l[l.length]={type:sv,text:""},l}(t);let r="BOD",i=0,s=n[i];for(;!mp(s,sv);){let o=0;const l=[];if(r==="BOD"){if(s.text!=="M"&&s.text!=="m")return ky("M0,0"+t);i++,o=lu[s.text],r=s.text}else mp(s,pp)?o=lu[r]:(i++,o=lu[s.text],r=s.text);if(!(i+o<n.length))throw new Error("Path data ended short");for(let c=i;c<i+o;c++){const h=n[c];if(!mp(h,pp))throw new Error("Param not a number: "+r+","+h.text);l[l.length]=+h.text}if(typeof lu[r]!="number")throw new Error("Bad segment: "+r);{const c={key:r,data:l};e.push(c),i+=o,s=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}}return e}function YC(t){let e=0,n=0,r=0,i=0;const s=[];for(const{key:o,data:l}of t)switch(o){case"M":s.push({key:"M",data:[...l]}),[e,n]=l,[r,i]=l;break;case"m":e+=l[0],n+=l[1],s.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":s.push({key:"L",data:[...l]}),[e,n]=l;break;case"l":e+=l[0],n+=l[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...l]}),e=l[4],n=l[5];break;case"c":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"C",data:c}),e=c[4],n=c[5];break}case"Q":s.push({key:"Q",data:[...l]}),e=l[2],n=l[3];break;case"q":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"Q",data:c}),e=c[2],n=c[3];break}case"A":s.push({key:"A",data:[...l]}),e=l[5],n=l[6];break;case"a":e+=l[5],n+=l[6],s.push({key:"A",data:[l[0],l[1],l[2],l[3],l[4],e,n]});break;case"H":s.push({key:"H",data:[...l]}),e=l[0];break;case"h":e+=l[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...l]}),n=l[0];break;case"v":n+=l[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...l]}),e=l[2],n=l[3];break;case"s":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"S",data:c}),e=c[2],n=c[3];break}case"T":s.push({key:"T",data:[...l]}),e=l[0],n=l[1];break;case"t":e+=l[0],n+=l[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=r,n=i}return s}function GC(t){const e=[];let n="",r=0,i=0,s=0,o=0,l=0,c=0;for(const{key:h,data:u}of t){switch(h){case"M":e.push({key:"M",data:[...u]}),[r,i]=u,[s,o]=u;break;case"C":e.push({key:"C",data:[...u]}),r=u[4],i=u[5],l=u[2],c=u[3];break;case"L":e.push({key:"L",data:[...u]}),[r,i]=u;break;case"H":r=u[0],e.push({key:"L",data:[r,i]});break;case"V":i=u[0],e.push({key:"L",data:[r,i]});break;case"S":{let d=0,f=0;n==="C"||n==="S"?(d=r+(r-l),f=i+(i-c)):(d=r,f=i),e.push({key:"C",data:[d,f,...u]}),l=u[0],c=u[1],r=u[2],i=u[3];break}case"T":{const[d,f]=u;let p=0,m=0;n==="Q"||n==="T"?(p=r+(r-l),m=i+(i-c)):(p=r,m=i);const g=r+2*(p-r)/3,b=i+2*(m-i)/3,y=d+2*(p-d)/3,w=f+2*(m-f)/3;e.push({key:"C",data:[g,b,y,w,d,f]}),l=p,c=m,r=d,i=f;break}case"Q":{const[d,f,p,m]=u,g=r+2*(d-r)/3,b=i+2*(f-i)/3,y=p+2*(d-p)/3,w=m+2*(f-m)/3;e.push({key:"C",data:[g,b,y,w,p,m]}),l=d,c=f,r=p,i=m;break}case"A":{const d=Math.abs(u[0]),f=Math.abs(u[1]),p=u[2],m=u[3],g=u[4],b=u[5],y=u[6];d===0||f===0?(e.push({key:"C",data:[r,i,b,y,b,y]}),r=b,i=y):(r!==b||i!==y)&&(XC(r,i,b,y,d,f,p,m,g).forEach(function(w){e.push({key:"C",data:w})}),r=b,i=y);break}case"Z":e.push({key:"Z",data:[]}),r=s,i=o}n=h}return e}function Dl(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function XC(t,e,n,r,i,s,o,l,c,h){const u=(d=o,Math.PI*d/180);var d;let f=[],p=0,m=0,g=0,b=0;if(h)[p,m,g,b]=h;else{[t,e]=Dl(t,e,-u),[n,r]=Dl(n,r,-u);const P=(t-n)/2,A=(e-r)/2;let O=P*P/(i*i)+A*A/(s*s);O>1&&(O=Math.sqrt(O),i*=O,s*=O);const F=i*i,Y=s*s,Q=F*Y-F*A*A-Y*P*P,z=F*A*A+Y*P*P,j=(l===c?-1:1)*Math.sqrt(Math.abs(Q/z));g=j*i*A/s+(t+n)/2,b=j*-s*P/i+(e+r)/2,p=Math.asin(parseFloat(((e-b)/s).toFixed(9))),m=Math.asin(parseFloat(((r-b)/s).toFixed(9))),t<g&&(p=Math.PI-p),n<g&&(m=Math.PI-m),p<0&&(p=2*Math.PI+p),m<0&&(m=2*Math.PI+m),c&&p>m&&(p-=2*Math.PI),!c&&m>p&&(m-=2*Math.PI)}let y=m-p;if(Math.abs(y)>120*Math.PI/180){const P=m,A=n,O=r;m=c&&m>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,f=XC(n=g+i*Math.cos(m),r=b+s*Math.sin(m),A,O,i,s,o,0,c,[m,P,g,b])}y=m-p;const w=Math.cos(p),S=Math.sin(p),E=Math.cos(m),T=Math.sin(m),C=Math.tan(y/4),M=4/3*i*C,R=4/3*s*C,D=[t,e],$=[t+M*S,e-R*w],L=[n+M*T,r-R*E],q=[n,r];if($[0]=2*D[0]-$[0],$[1]=2*D[1]-$[1],h)return[$,L,q].concat(f);{f=[$,L,q].concat(f);const P=[];for(let A=0;A<f.length;A+=3){const O=Dl(f[A][0],f[A][1],u),F=Dl(f[A+1][0],f[A+1][1],u),Y=Dl(f[A+2][0],f[A+2][1],u);P.push([O[0],O[1],F[0],F[1],Y[0],Y[1]])}return P}}const gte={randOffset:function(t,e){return Ye(t,e)},randOffsetWithRange:function(t,e,n){return Bd(t,e,n)},ellipse:function(t,e,n,r,i){const s=QC(n,r,i);return o1(t,e,i,s).opset},doubleLineOps:function(t,e,n,r,i){return qa(t,e,n,r,i,!0)}};function JC(t,e,n,r,i){return{type:"path",ops:qa(t,e,n,r,i)}}function qu(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let s=0;s<r-1;s++)i.push(...qa(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&i.push(...qa(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return r===2?JC(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function bte(t,e,n,r,i){return function(s,o){return qu(s,!0,o)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}function ov(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,r=cu(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:cu(n[0],1.5*(1+.22*e.roughness),hv(e));for(let s=1;s<n.length;s++){const o=n[s];if(o.length){const l=cu(o,1*(1+.2*e.roughness),e),c=e.disableMultiStroke?[]:cu(o,1.5*(1+.22*e.roughness),hv(e));for(const h of l)h.op!=="move"&&r.push(h);for(const h of c)h.op!=="move"&&i.push(h)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function QC(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),s=2*Math.PI/i;let o=Math.abs(t/2),l=Math.abs(e/2);const c=1-n.curveFitting;return o+=Ye(o*c,n),l+=Ye(l*c,n),{increment:s,rx:o,ry:l}}function o1(t,e,n,r){const[i,s]=uv(r.increment,t,e,r.rx,r.ry,1,r.increment*Bd(.1,Bd(.4,1,n),n),n);let o=Pd(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[l]=uv(r.increment,t,e,r.rx,r.ry,1.5,0,n),c=Pd(l,null,n);o=o.concat(c)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function lv(t,e,n,r,i,s,o,l,c){const h=t,u=e;let d=Math.abs(n/2),f=Math.abs(r/2);d+=Ye(.01*d,c),f+=Ye(.01*f,c);let p=i,m=s;for(;p<0;)p+=2*Math.PI,m+=2*Math.PI;m-p>2*Math.PI&&(p=0,m=2*Math.PI);const g=2*Math.PI/c.curveStepCount,b=Math.min(g/2,(m-p)/2),y=dv(b,h,u,d,f,p,m,1,c);if(!c.disableMultiStroke){const w=dv(b,h,u,d,f,p,m,1.5,c);y.push(...w)}return o&&(l?y.push(...qa(h,u,h+d*Math.cos(p),u+f*Math.sin(p),c),...qa(h,u,h+d*Math.cos(m),u+f*Math.sin(m),c)):y.push({op:"lineTo",data:[h,u]},{op:"lineTo",data:[h+d*Math.cos(p),u+f*Math.sin(p)]})),{type:"path",ops:y}}function cv(t,e){const n=GC(YC(ky(t))),r=[];let i=[0,0],s=[0,0];for(const{key:o,data:l}of n)switch(o){case"M":s=[l[0],l[1]],i=[l[0],l[1]];break;case"L":r.push(...qa(s[0],s[1],l[0],l[1],e)),s=[l[0],l[1]];break;case"C":{const[c,h,u,d,f,p]=l;r.push(...yte(c,h,u,d,f,p,s,e)),s=[f,p];break}case"Z":r.push(...qa(s[0],s[1],i[0],i[1],e)),s=[i[0],i[1]]}return{type:"path",ops:r}}function gp(t,e){const n=[];for(const r of t)if(r.length){const i=e.maxRandomnessOffset||0,s=r.length;if(s>2){n.push({op:"move",data:[r[0][0]+Ye(i,e),r[0][1]+Ye(i,e)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[r[o][0]+Ye(i,e),r[o][1]+Ye(i,e)]})}}return{type:"fillPath",ops:n}}function lo(t,e){return function(n,r){let i=n.fillStyle||"hachure";if(!Kn[i])switch(i){case"zigzag":Kn[i]||(Kn[i]=new cte(r));break;case"cross-hatch":Kn[i]||(Kn[i]=new hte(r));break;case"dots":Kn[i]||(Kn[i]=new ute(r));break;case"dashed":Kn[i]||(Kn[i]=new dte(r));break;case"zigzag-line":Kn[i]||(Kn[i]=new fte(r));break;default:i="hachure",Kn[i]||(Kn[i]=new Ty(r))}return Kn[i]}(e,gte).fillPolygons(t,e)}function hv(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function KC(t){return t.randomizer||(t.randomizer=new pte(t.seed||0)),t.randomizer.next()}function Bd(t,e,n,r=1){return n.roughness*r*(KC(n)*(e-t)+t)}function Ye(t,e,n=1){return Bd(-t,t,e,n)}function qa(t,e,n,r,i,s=!1){const o=s?i.disableMultiStrokeFill:i.disableMultiStroke,l=l1(t,e,n,r,i,!0,!1);if(o)return l;const c=l1(t,e,n,r,i,!0,!0);return l.concat(c)}function l1(t,e,n,r,i,s,o){const l=Math.pow(t-n,2)+Math.pow(e-r,2),c=Math.sqrt(l);let h=1;h=c<200?1:c>500?.4:-.0016668*c+1.233334;let u=i.maxRandomnessOffset||0;u*u*100>l&&(u=c/10);const d=u/2,f=.2+.2*KC(i);let p=i.bowing*i.maxRandomnessOffset*(r-e)/200,m=i.bowing*i.maxRandomnessOffset*(t-n)/200;p=Ye(p,i,h),m=Ye(m,i,h);const g=[],b=()=>Ye(d,i,h),y=()=>Ye(u,i,h),w=i.preserveVertices;return o?g.push({op:"move",data:[t+(w?0:b()),e+(w?0:b())]}):g.push({op:"move",data:[t+(w?0:Ye(u,i,h)),e+(w?0:Ye(u,i,h))]}),o?g.push({op:"bcurveTo",data:[p+t+(n-t)*f+b(),m+e+(r-e)*f+b(),p+t+2*(n-t)*f+b(),m+e+2*(r-e)*f+b(),n+(w?0:b()),r+(w?0:b())]}):g.push({op:"bcurveTo",data:[p+t+(n-t)*f+y(),m+e+(r-e)*f+y(),p+t+2*(n-t)*f+y(),m+e+2*(r-e)*f+y(),n+(w?0:y()),r+(w?0:y())]}),g}function cu(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+Ye(e,n),t[0][1]+Ye(e,n)]),r.push([t[0][0]+Ye(e,n),t[0][1]+Ye(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+Ye(e,n),t[i][1]+Ye(e,n)]),i===t.length-1&&r.push([t[i][0]+Ye(e,n),t[i][1]+Ye(e,n)]);return Pd(r,null,n)}function Pd(t,e,n){const r=t.length,i=[];if(r>3){const s=[],o=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let l=1;l+2<r;l++){const c=t[l];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*t[l+1][0]-o*t[l-1][0])/6,c[1]+(o*t[l+1][1]-o*t[l-1][1])/6],s[2]=[t[l+1][0]+(o*t[l][0]-o*t[l+2][0])/6,t[l+1][1]+(o*t[l][1]-o*t[l+2][1])/6],s[3]=[t[l+1][0],t[l+1][1]],i.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else r===3?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):r===2&&i.push(...l1(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function uv(t,e,n,r,i,s,o,l){const c=[],h=[];if(l.roughness===0){t/=4,h.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let u=0;u<=2*Math.PI;u+=t){const d=[e+r*Math.cos(u),n+i*Math.sin(u)];c.push(d),h.push(d)}h.push([e+r*Math.cos(0),n+i*Math.sin(0)]),h.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const u=Ye(.5,l)-Math.PI/2;h.push([Ye(s,l)+e+.9*r*Math.cos(u-t),Ye(s,l)+n+.9*i*Math.sin(u-t)]);const d=2*Math.PI+u-.01;for(let f=u;f<d;f+=t){const p=[Ye(s,l)+e+r*Math.cos(f),Ye(s,l)+n+i*Math.sin(f)];c.push(p),h.push(p)}h.push([Ye(s,l)+e+r*Math.cos(u+2*Math.PI+.5*o),Ye(s,l)+n+i*Math.sin(u+2*Math.PI+.5*o)]),h.push([Ye(s,l)+e+.98*r*Math.cos(u+o),Ye(s,l)+n+.98*i*Math.sin(u+o)]),h.push([Ye(s,l)+e+.9*r*Math.cos(u+.5*o),Ye(s,l)+n+.9*i*Math.sin(u+.5*o)])}return[h,c]}function dv(t,e,n,r,i,s,o,l,c){const h=s+Ye(.1,c),u=[];u.push([Ye(l,c)+e+.9*r*Math.cos(h-t),Ye(l,c)+n+.9*i*Math.sin(h-t)]);for(let d=h;d<=o;d+=t)u.push([Ye(l,c)+e+r*Math.cos(d),Ye(l,c)+n+i*Math.sin(d)]);return u.push([e+r*Math.cos(o),n+i*Math.sin(o)]),u.push([e+r*Math.cos(o),n+i*Math.sin(o)]),Pd(u,null,c)}function yte(t,e,n,r,i,s,o,l){const c=[],h=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let u=[0,0];const d=l.disableMultiStroke?1:2,f=l.preserveVertices;for(let p=0;p<d;p++)p===0?c.push({op:"move",data:[o[0],o[1]]}):c.push({op:"move",data:[o[0]+(f?0:Ye(h[0],l)),o[1]+(f?0:Ye(h[0],l))]}),u=f?[i,s]:[i+Ye(h[p],l),s+Ye(h[p],l)],c.push({op:"bcurveTo",data:[t+Ye(h[p],l),e+Ye(h[p],l),n+Ye(h[p],l),r+Ye(h[p],l),u[0],u[1]]});return c}function Bl(t){return[...t]}function fv(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Bl(t[0]),Bl(t[1]),Bl(t[2]),Bl(t[2]));else{const i=[];i.push(t[0],t[0]);for(let l=1;l<t.length;l++)i.push(t[l]),l===t.length-1&&i.push(t[l]);const s=[],o=1-e;r.push(Bl(i[0]));for(let l=1;l+2<i.length;l++){const c=i[l];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*i[l+1][0]-o*i[l-1][0])/6,c[1]+(o*i[l+1][1]-o*i[l-1][1])/6],s[2]=[i[l+1][0]+(o*i[l][0]-o*i[l+2][0])/6,i[l+1][1]+(o*i[l][1]-o*i[l+2][1])/6],s[3]=[i[l+1][0],i[l+1][1]],r.push(s[1],s[2],s[3])}}return r}function Wu(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function xte(t,e,n){const r=Wu(e,n);if(r===0)return Wu(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),Wu(t,ps(e,n,i))}function ps(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function c1(t,e,n,r){const i=r||[];if(function(l,c){const h=l[c+0],u=l[c+1],d=l[c+2],f=l[c+3];let p=3*u[0]-2*h[0]-f[0];p*=p;let m=3*u[1]-2*h[1]-f[1];m*=m;let g=3*d[0]-2*f[0]-h[0];g*=g;let b=3*d[1]-2*f[1]-h[1];return b*=b,p<g&&(p=g),m<b&&(m=b),p+m}(t,e)<n){const l=t[e+0];i.length?(s=i[i.length-1],o=l,Math.sqrt(Wu(s,o))>1&&i.push(l)):i.push(l),i.push(t[e+3])}else{const c=t[e+0],h=t[e+1],u=t[e+2],d=t[e+3],f=ps(c,h,.5),p=ps(h,u,.5),m=ps(u,d,.5),g=ps(f,p,.5),b=ps(p,m,.5),y=ps(g,b,.5);c1([c,f,g,y],0,n,i),c1([y,b,m,d],0,n,i)}var s,o;return i}function wte(t,e){return Fd(t,0,t.length,e)}function Fd(t,e,n,r,i){const s=i||[],o=t[e],l=t[n-1];let c=0,h=1;for(let u=e+1;u<n-1;++u){const d=xte(t[u],o,l);d>c&&(c=d,h=u)}return Math.sqrt(c)>r?(Fd(t,e,h+1,r,s),Fd(t,h,n,r,s)):(s.length||s.push(o),s.push(l)),s}function bp(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let s=0;s<i;s++)c1(t,3*s,e,r);return n&&n>0?Fd(r,0,r.length,n):r}const fr="none";class Hd{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,r){return{shape:e,sets:n||[],options:r||this.defaultOptions}}line(e,n,r,i,s){const o=this._o(s);return this._d("line",[JC(e,n,r,i,o)],o)}rectangle(e,n,r,i,s){const o=this._o(s),l=[],c=bte(e,n,r,i,o);if(o.fill){const h=[[e,n],[e+r,n],[e+r,n+i],[e,n+i]];o.fillStyle==="solid"?l.push(gp([h],o)):l.push(lo([h],o))}return o.stroke!==fr&&l.push(c),this._d("rectangle",l,o)}ellipse(e,n,r,i,s){const o=this._o(s),l=[],c=QC(r,i,o),h=o1(e,n,o,c);if(o.fill)if(o.fillStyle==="solid"){const u=o1(e,n,o,c).opset;u.type="fillPath",l.push(u)}else l.push(lo([h.estimatedPoints],o));return o.stroke!==fr&&l.push(h.opset),this._d("ellipse",l,o)}circle(e,n,r,i){const s=this.ellipse(e,n,r,r,i);return s.shape="circle",s}linearPath(e,n){const r=this._o(n);return this._d("linearPath",[qu(e,!1,r)],r)}arc(e,n,r,i,s,o,l=!1,c){const h=this._o(c),u=[],d=lv(e,n,r,i,s,o,l,!0,h);if(l&&h.fill)if(h.fillStyle==="solid"){const f=Object.assign({},h);f.disableMultiStroke=!0;const p=lv(e,n,r,i,s,o,!0,!1,f);p.type="fillPath",u.push(p)}else u.push(function(f,p,m,g,b,y,w){const S=f,E=p;let T=Math.abs(m/2),C=Math.abs(g/2);T+=Ye(.01*T,w),C+=Ye(.01*C,w);let M=b,R=y;for(;M<0;)M+=2*Math.PI,R+=2*Math.PI;R-M>2*Math.PI&&(M=0,R=2*Math.PI);const D=(R-M)/w.curveStepCount,$=[];for(let L=M;L<=R;L+=D)$.push([S+T*Math.cos(L),E+C*Math.sin(L)]);return $.push([S+T*Math.cos(R),E+C*Math.sin(R)]),$.push([S,E]),lo([$],w)}(e,n,r,i,s,o,h));return h.stroke!==fr&&u.push(d),this._d("arc",u,h)}curve(e,n){const r=this._o(n),i=[],s=ov(e,r);if(r.fill&&r.fill!==fr)if(r.fillStyle==="solid"){const o=ov(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],l=e;if(l.length){const c=typeof l[0][0]=="number"?[l]:l;for(const h of c)h.length<3?o.push(...h):h.length===3?o.push(...bp(fv([h[0],h[0],h[1],h[2]]),10,(1+r.roughness)/2)):o.push(...bp(fv(h),10,(1+r.roughness)/2))}o.length&&i.push(lo([o],r))}return r.stroke!==fr&&i.push(s),this._d("curve",i,r)}polygon(e,n){const r=this._o(n),i=[],s=qu(e,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(gp([e],r)):i.push(lo([e],r))),r.stroke!==fr&&i.push(s),this._d("polygon",i,r)}path(e,n){const r=this._o(n),i=[];if(!e)return this._d("path",i,r);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=r.fill&&r.fill!=="transparent"&&r.fill!==fr,o=r.stroke!==fr,l=!!(r.simplification&&r.simplification<1),c=function(u,d,f){const p=GC(YC(ky(u))),m=[];let g=[],b=[0,0],y=[];const w=()=>{y.length>=4&&g.push(...bp(y,d)),y=[]},S=()=>{w(),g.length&&(m.push(g),g=[])};for(const{key:T,data:C}of p)switch(T){case"M":S(),b=[C[0],C[1]],g.push(b);break;case"L":w(),g.push([C[0],C[1]]);break;case"C":if(!y.length){const M=g.length?g[g.length-1]:b;y.push([M[0],M[1]])}y.push([C[0],C[1]]),y.push([C[2],C[3]]),y.push([C[4],C[5]]);break;case"Z":w(),g.push([b[0],b[1]])}if(S(),!f)return m;const E=[];for(const T of m){const C=wte(T,f);C.length&&E.push(C)}return E}(e,1,l?4-4*(r.simplification||1):(1+r.roughness)/2),h=cv(e,r);if(s)if(r.fillStyle==="solid")if(c.length===1){const u=cv(e,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else i.push(gp(c,r));else i.push(lo(c,r));return o&&(l?c.forEach(u=>{i.push(qu(u,!1,r))}):i.push(h)),this._d("path",i,r)}opsToPath(e,n){let r="";for(const i of e.ops){const s=typeof n=="number"&&n>=0?i.data.map(o=>+o.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":r+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":r+=`L${s[0]} ${s[1]} `}}return r.trim()}toPaths(e){const n=e.sets||[],r=e.options||this.defaultOptions,i=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:fr};break;case"fillPath":o={d:this.opsToPath(s),stroke:fr,strokeWidth:0,fill:r.fill||fr};break;case"fillSketch":o=this.fillSketch(s,r)}o&&i.push(o)}return i}fillSketch(e,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||fr,strokeWidth:r,fill:fr}}_mergedShape(e){return e.filter((n,r)=>r===0||n.op!=="move")}}class _te{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Hd(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,o,s),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const l=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,o,s,l),i.restore();break}case"fillSketch":this.fillSketch(i,o,r)}}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),e.save(),r.fillLineDash&&e.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(e.lineDashOffset=r.fillLineDashOffset),e.strokeStyle=r.fill||"",e.lineWidth=i,this._drawToContext(e,n,r.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,r,i="nonzero"){e.beginPath();for(const s of n.ops){const o=typeof r=="number"&&r>=0?s.data.map(l=>+l.toFixed(r)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}n.type==="fillPath"?e.fill(i):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o),o}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o),o}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o),o}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s),s}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r),r}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r),r}arc(e,n,r,i,s,o,l=!1,c){const h=this.gen.arc(e,n,r,i,s,o,l,c);return this.draw(h),h}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r),r}path(e,n){const r=this.gen.path(e,n);return this.draw(r),r}}const hu="http://www.w3.org/2000/svg";class vte{constructor(e,n){this.svg=e,this.gen=new Hd(n)}draw(e){const n=e.sets||[],r=e.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,s=i.createElementNS(hu,"g"),o=e.options.fixedDecimalPlaceDigits;for(const l of n){let c=null;switch(l.type){case"path":c=i.createElementNS(hu,"path"),c.setAttribute("d",this.opsToPath(l,o)),c.setAttribute("stroke",r.stroke),c.setAttribute("stroke-width",r.strokeWidth+""),c.setAttribute("fill","none"),r.strokeLineDash&&c.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":c=i.createElementNS(hu,"path"),c.setAttribute("d",this.opsToPath(l,o)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",r.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||c.setAttribute("fill-rule","evenodd");break;case"fillSketch":c=this.fillSketch(i,l,r)}c&&s.appendChild(c)}return s}fillSketch(e,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const s=e.createElementNS(hu,"path");return s.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),s.setAttribute("stroke",r.fill||""),s.setAttribute("stroke-width",i+""),s.setAttribute("fill","none"),r.fillLineDash&&s.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,r,i,s){const o=this.gen.line(e,n,r,i,s);return this.draw(o)}rectangle(e,n,r,i,s){const o=this.gen.rectangle(e,n,r,i,s);return this.draw(o)}ellipse(e,n,r,i,s){const o=this.gen.ellipse(e,n,r,i,s);return this.draw(o)}circle(e,n,r,i){const s=this.gen.circle(e,n,r,i);return this.draw(s)}linearPath(e,n){const r=this.gen.linearPath(e,n);return this.draw(r)}polygon(e,n){const r=this.gen.polygon(e,n);return this.draw(r)}arc(e,n,r,i,s,o,l=!1,c){const h=this.gen.arc(e,n,r,i,s,o,l,c);return this.draw(h)}curve(e,n){const r=this.gen.curve(e,n);return this.draw(r)}path(e,n){const r=this.gen.path(e,n);return this.draw(r)}}var Ae={canvas:(t,e)=>new _te(t,e),svg:(t,e)=>new vte(t,e),generator:t=>new Hd(t),newSeed:()=>Hd.newSeed()},Ve=v(async(t,e,n)=>{let r;const i=e.useHtmlLabels||ln(wt()?.htmlLabels);n?r=n:r="node default";const s=t.insert("g").attr("class",r).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",In(e.labelStyle));let l;e.label===void 0?l="":l=typeof e.label=="string"?e.label:e.label[0];const c=await Xa(o,Br(Js(l),wt()),{useHtmlLabels:i,width:e.width||wt().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let h=c.getBBox();const u=(e?.padding??0)/2;if(i){const d=c.children[0],f=ut(c),p=d.getElementsByTagName("img");if(p){const m=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map(g=>new Promise(b=>{function y(){if(g.style.display="flex",g.style.flexDirection="column",m){const w=wt().fontSize?wt().fontSize:window.getComputedStyle(document.body).fontSize,S=5,[E=dE.fontSize]=Nf(w),T=E*S+"px";g.style.minWidth=T,g.style.maxWidth=T}else g.style.width="100%";b(g)}v(y,"setupImage"),setTimeout(()=>{g.complete&&y()}),g.addEventListener("error",y),g.addEventListener("load",y)})))}h=d.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}return i?o.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):o.attr("transform","translate(0, "+-h.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:h,halfPadding:u,label:o}},"labelHelper"),yp=v(async(t,e,n)=>{const r=n.useHtmlLabels||ln(wt()?.flowchart?.htmlLabels),i=t.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await Xa(i,Br(Js(e),wt()),{useHtmlLabels:r,width:n.width||wt()?.flowchart?.wrappingWidth,style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let o=s.getBBox();const l=n.padding/2;if(ln(wt()?.flowchart?.htmlLabels)){const c=s.children[0],h=ut(s);o=c.getBoundingClientRect(),h.attr("width",o.width),h.attr("height",o.height)}return r?i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):i.attr("transform","translate(0, "+-o.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:l,label:i}},"insertLabel"),Le=v((t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height},"updateNodeBounds"),qe=v((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function ht(t){const e=t.map((n,r)=>`${r===0?"M":"L"}${n.x},${n.y}`);return e.push("Z"),e.join(" ")}v(ht,"createPathFromPoints");function Wa(t,e,n,r,i,s){const o=[],c=n-t,h=r-e,u=c/s,d=2*Math.PI/u,f=e+h/2;for(let p=0;p<=50;p++){const m=p/50,g=t+m*c,b=f+i*Math.sin(d*(g-t));o.push({x:g,y:b})}return o}v(Wa,"generateFullSineWavePoints");function nh(t,e,n,r,i,s){const o=[],l=i*Math.PI/180,u=(s*Math.PI/180-l)/(r-1);for(let d=0;d<r;d++){const f=l+d*u,p=t+n*Math.cos(f),m=e+n*Math.sin(f);o.push({x:-p,y:-m})}return o}v(nh,"generateCirclePoints");var Tte=v((t,e)=>{var n=t.x,r=t.y,i=e.x-n,s=e.y-r,o=t.width/2,l=t.height/2,c,h;return Math.abs(s)*o>Math.abs(i)*l?(s<0&&(l=-l),c=s===0?0:l*i/s,h=l):(i<0&&(o=-o),c=o,h=i===0?0:o*s/i),{x:n+c,y:r+h}},"intersectRect"),ul=Tte;function ZC(t,e){e&&t.attr("style",e)}v(ZC,"applyStyle");async function e7(t){const e=ut(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=wt();let i=t.label;t.label&&Po(t.label)&&(i=await Ib(t.label.replace(ol.lineBreakRegex,`
`),r));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>";return n.html(Br(o,r)),ZC(n,t.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}v(e7,"addHtmlLabel");var kte=v(async(t,e,n,r)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),ln(wt().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),ce.info("vertexText"+i);const s={isNode:r,label:Js(i).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await e7(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof i=="string"?o=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?o=i:o=[];for(const l of o){const c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),n?c.setAttribute("class","title-row"):c.setAttribute("class","row"),c.textContent=l.trim(),s.appendChild(c)}return s}},"createLabel"),vs=kte,Ja=v((t,e,n,r,i)=>["M",t+i,e,"H",t+n-i,"A",i,i,0,0,1,t+n,e+i,"V",e+r-i,"A",i,i,0,0,1,t+n-i,e+r,"H",t+i,"A",i,i,0,0,1,t,e+r-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),t7=v(async(t,e)=>{ce.info("Creating subgraph rect for ",e.id,e);const n=wt(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:l,nodeStyles:c,borderStyles:h,backgroundStyles:u}=Me(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=ln(n.flowchart.htmlLabels),p=d.insert("g").attr("class","cluster-label "),m=await Xa(p,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0});let g=m.getBBox();if(ln(n.flowchart.htmlLabels)){const M=m.children[0],R=ut(m);g=M.getBoundingClientRect(),R.attr("width",g.width),R.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,w=e.x-b/2,S=e.y-y/2;ce.trace("Data ",e,JSON.stringify(e));let E;if(e.look==="handDrawn"){const M=Ae.svg(d),R=Ie(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:i}),D=M.path(Ja(w,S,b,y,0),R);E=d.insert(()=>(ce.debug("Rough node insert CXC",D),D),":first-child"),E.select("path:nth-child(2)").attr("style",h.join(";")),E.select("path").attr("style",u.join(";").replace("fill","stroke"))}else E=d.insert("rect",":first-child"),E.attr("style",c).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",S).attr("width",b).attr("height",y);const{subGraphTitleTopMargin:T}=ny(n);if(p.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+T})`),l){const M=p.select("span");M&&M.attr("style",l)}const C=E.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=g.height-e.padding/2,e.intersect=function(M){return ul(e,M)},{cluster:d,labelBBox:g}},"rect"),Ste=v((t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,s=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const o=r.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(l){return ul(e,l)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),$te=v(async(t,e)=>{const n=wt(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:s,compositeBackground:o,compositeTitleBackground:l,nodeBorder:c}=r,h=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=h.insert("g",":first-child"),d=h.insert("g").attr("class","cluster-label");let f=h.append("rect");const p=d.node().appendChild(await vs(e.label,e.labelStyle,void 0,!0));let m=p.getBBox();if(ln(n.flowchart.htmlLabels)){const D=p.children[0],$=ut(p);m=D.getBoundingClientRect(),$.attr("width",m.width),$.attr("height",m.height)}const g=0*e.padding,b=g/2,y=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+g;e.width<=m.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height+g,S=e.height+g-m.height-6,E=e.x-y/2,T=e.y-w/2;e.width=y;const C=e.y-e.height/2-b+m.height+2;let M;if(e.look==="handDrawn"){const D=e.cssClasses.includes("statediagram-cluster-alt"),$=Ae.svg(h),L=e.rx||e.ry?$.path(Ja(E,T,y,w,10),{roughness:.7,fill:l,fillStyle:"solid",stroke:c,seed:i}):$.rectangle(E,T,y,w,{seed:i});M=h.insert(()=>L,":first-child");const q=$.rectangle(E,C,y,S,{fill:D?s:o,fillStyle:D?"hachure":"solid",stroke:c,seed:i});M=h.insert(()=>L,":first-child"),f=h.insert(()=>q)}else M=u.insert("rect",":first-child"),M.attr("class","outer").attr("x",E).attr("y",T).attr("width",y).attr("height",w).attr("data-look",e.look),f.attr("class","inner").attr("x",E).attr("y",C).attr("width",y).attr("height",S);d.attr("transform",`translate(${e.x-m.width/2}, ${T+1-(ln(n.flowchart.htmlLabels)?0:3)})`);const R=M.node().getBBox();return e.height=R.height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(D){return ul(e,D)},{cluster:h,labelBBox:m}},"roundedWithTitle"),Ete=v(async(t,e)=>{ce.info("Creating subgraph rect for ",e.id,e);const n=wt(),{themeVariables:r,handDrawnSeed:i}=n,{clusterBkg:s,clusterBorder:o}=r,{labelStyles:l,nodeStyles:c,borderStyles:h,backgroundStyles:u}=Me(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),f=ln(n.flowchart.htmlLabels),p=d.insert("g").attr("class","cluster-label "),m=await Xa(p,e.label,{style:e.labelStyle,useHtmlLabels:f,isNode:!0,width:e.width});let g=m.getBBox();if(ln(n.flowchart.htmlLabels)){const M=m.children[0],R=ut(m);g=M.getBoundingClientRect(),R.attr("width",g.width),R.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const y=e.height,w=e.x-b/2,S=e.y-y/2;ce.trace("Data ",e,JSON.stringify(e));let E;if(e.look==="handDrawn"){const M=Ae.svg(d),R=Ie(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:i}),D=M.path(Ja(w,S,b,y,e.rx),R);E=d.insert(()=>(ce.debug("Rough node insert CXC",D),D),":first-child"),E.select("path:nth-child(2)").attr("style",h.join(";")),E.select("path").attr("style",u.join(";").replace("fill","stroke"))}else E=d.insert("rect",":first-child"),E.attr("style",c).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",S).attr("width",b).attr("height",y);const{subGraphTitleTopMargin:T}=ny(n);if(p.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+T})`),l){const M=p.select("span");M&&M.attr("style",l)}const C=E.node().getBBox();return e.offsetX=0,e.width=C.width,e.height=C.height,e.offsetY=g.height-e.padding/2,e.intersect=function(M){return ul(e,M)},{cluster:d,labelBBox:g}},"kanbanSection"),jte=v((t,e)=>{const n=wt(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:s}=r,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),l=o.insert("g",":first-child"),c=0*e.padding,h=e.width+c;e.diff=-e.padding;const u=e.height+c,d=e.x-h/2,f=e.y-u/2;e.width=h;let p;if(e.look==="handDrawn"){const b=Ae.svg(o).rectangle(d,f,h,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});p=o.insert(()=>b,":first-child")}else p=l.insert("rect",":first-child"),p.attr("class","divider").attr("x",d).attr("y",f).attr("width",h).attr("height",u).attr("data-look",e.look);const m=p.node().getBBox();return e.height=m.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return ul(e,g)},{cluster:o,labelBBox:{}}},"divider"),Cte=t7,Ate={rect:t7,squareRect:Cte,roundedWithTitle:$te,noteGroup:Ste,divider:jte,kanbanSection:Ete},n7=new Map,Ite=v(async(t,e)=>{const n=e.shape||"rect",r=await Ate[n](t,e);return n7.set(e.id,r),r},"insertCluster"),_pe=v(()=>{n7=new Map},"clear");function r7(t,e){return t.intersect(e)}v(r7,"intersectNode");var Mte=r7;function i7(t,e,n,r){var i=t.x,s=t.y,o=i-r.x,l=s-r.y,c=Math.sqrt(e*e*l*l+n*n*o*o),h=Math.abs(e*n*o/c);r.x<i&&(h=-h);var u=Math.abs(e*n*l/c);return r.y<s&&(u=-u),{x:i+h,y:s+u}}v(i7,"intersectEllipse");var a7=i7;function s7(t,e,n){return a7(t,e,e,n)}v(s7,"intersectCircle");var Lte=s7;function o7(t,e,n,r){{const i=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,l=i*n.x+s*n.y+o,c=i*r.x+s*r.y+o,h=1e-6;if(l!==0&&c!==0&&h1(l,c))return;const u=r.y-n.y,d=n.x-r.x,f=r.x*n.y-n.x*r.y,p=u*t.x+d*t.y+f,m=u*e.x+d*e.y+f;if(Math.abs(p)<h&&Math.abs(m)<h&&h1(p,m))return;const g=i*d-u*s;if(g===0)return;const b=Math.abs(g/2);let y=s*f-d*o;const w=y<0?(y-b)/g:(y+b)/g;y=u*o-i*f;const S=y<0?(y-b)/g:(y+b)/g;return{x:w,y:S}}}v(o7,"intersectLine");function h1(t,e){return t*e>0}v(h1,"sameSign");var Ote=o7;function l7(t,e,n){let r=t.x,i=t.y,s=[],o=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(u){o=Math.min(o,u.x),l=Math.min(l,u.y)}):(o=Math.min(o,e.x),l=Math.min(l,e.y));let c=r-t.width/2-o,h=i-t.height/2-l;for(let u=0;u<e.length;u++){let d=e[u],f=e[u<e.length-1?u+1:0],p=Ote(t,n,{x:c+d.x,y:h+d.y},{x:c+f.x,y:h+f.y});p&&s.push(p)}return s.length?(s.length>1&&s.sort(function(u,d){let f=u.x-n.x,p=u.y-n.y,m=Math.sqrt(f*f+p*p),g=d.x-n.x,b=d.y-n.y,y=Math.sqrt(g*g+b*b);return m<y?-1:m===y?0:1}),s[0]):t}v(l7,"intersectPolygon");var Rte=l7,$e={node:Mte,circle:Lte,ellipse:a7,polygon:Rte,rect:ul};function c7(t,e){const{labelStyles:n}=Me(e);e.labelStyle=n;const r=qe(e);let i=r;r||(i="anchor");const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=1,{cssStyles:l}=e,c=Ae.svg(s),h=Ie(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=c.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",In(l)),Le(e,d),e.intersect=function(f){return ce.info("Circle intersect",e,o,f),$e.circle(e,o,f)},s}v(c7,"anchor");function u1(t,e,n,r,i,s,o){const c=(t+n)/2,h=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,f=(r-e)/2,p=d/i,m=f/s,g=Math.sqrt(p**2+m**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const b=Math.sqrt(1-g**2),y=c+b*s*Math.sin(u)*(o?-1:1),w=h-b*i*Math.cos(u)*(o?-1:1),S=Math.atan2((e-w)/s,(t-y)/i);let T=Math.atan2((r-w)/s,(n-y)/i)-S;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const C=[];for(let M=0;M<20;M++){const R=M/19,D=S+R*T,$=y+i*Math.cos(D),L=w+s*Math.sin(D);C.push({x:$,y:L})}return C}v(u1,"generateArcPoints");async function h7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.width+e.padding+20,l=s.height+e.padding,c=l/2,h=c/(2.5+l/50),{cssStyles:u}=e,d=[{x:o/2,y:-l/2},{x:-o/2,y:-l/2},...u1(-o/2,-l/2,-o/2,l/2,h,c,!1),{x:o/2,y:l/2},...u1(o/2,l/2,o/2,-l/2,h,c,!0)],f=Ae.svg(i),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=ht(d),g=f.path(m,p),b=i.insert(()=>g,":first-child");return b.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${h/2}, 0)`),Le(e,b),e.intersect=function(y){return $e.polygon(e,d,y)},i}v(h7,"bowTieRect");function Qa(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}v(Qa,"insertPolygonShape");async function u7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.height+e.padding,l=12,c=s.width+e.padding+l,h=0,u=c,d=-o,f=0,p=[{x:h+l,y:d},{x:u,y:d},{x:u,y:f},{x:h,y:f},{x:h,y:d+l},{x:h+l,y:d}];let m;const{cssStyles:g}=e;if(e.look==="handDrawn"){const b=Ae.svg(i),y=Ie(e,{}),w=ht(p),S=b.path(w,y);m=i.insert(()=>S,":first-child").attr("transform",`translate(${-c/2}, ${o/2})`),g&&m.attr("style",g)}else m=Qa(i,c,o,p);return r&&m.attr("style",r),Le(e,m),e.intersect=function(b){return $e.polygon(e,p,b)},i}v(u7,"card");function d7(t,e){const{nodeStyles:n}=Me(e);e.label="";const r=t.insert("g").attr("class",qe(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],l=Ae.svg(r),c=Ie(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=ht(o),u=l.path(h,c),d=r.insert(()=>u,":first-child");return i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(f){return $e.polygon(e,o,f)},r}v(d7,"choice");async function Sy(t,e,n){const{labelStyles:r,nodeStyles:i}=Me(e);e.labelStyle=r;const{shapeSvg:s,bbox:o,halfPadding:l}=await Ve(t,e,qe(e)),c=n?.padding??l,h=o.width/2+c;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ae.svg(s),p=Ie(e,{}),m=f.circle(0,0,h*2,p);u=s.insert(()=>m,":first-child"),u.attr("class","basic label-container").attr("style",In(d))}else u=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",h).attr("cx",0).attr("cy",0);return Le(e,u),e.calcIntersect=function(f,p){const m=f.width/2;return $e.circle(f,m,p)},e.intersect=function(f){return ce.info("Circle intersect",e,h,f),$e.circle(e,h,f)},s}v(Sy,"circle");function f7(t){const e=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=t*2,i={x:r/2*e,y:r/2*n},s={x:-(r/2)*e,y:r/2*n},o={x:-(r/2)*e,y:-(r/2)*n},l={x:r/2*e,y:-(r/2)*n};return`M ${s.x},${s.y} L ${l.x},${l.y}
                   M ${i.x},${i.y} L ${o.x},${o.y}`}v(f7,"createLine");function p7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n,e.label="";const i=t.insert("g").attr("class",qe(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:o}=e,l=Ae.svg(i),c=Ie(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=l.circle(0,0,s*2,c),u=f7(s),d=l.path(u,c),f=i.insert(()=>h,":first-child");return f.insert(()=>d),o&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",o),r&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",r),Le(e,f),e.intersect=function(p){return ce.info("crossedCircle intersect",e,{radius:s,point:p}),$e.circle(e,s,p)},i}v(p7,"crossedCircle");function Ji(t,e,n,r=100,i=0,s=180){const o=[],l=i*Math.PI/180,u=(s*Math.PI/180-l)/(r-1);for(let d=0;d<r;d++){const f=l+d*u,p=t+n*Math.cos(f),m=e+n*Math.sin(f);o.push({x:-p,y:-m})}return o}v(Ji,"generateCirclePoints");async function m7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...Ji(l/2,-c/2,h,30,-90,0),{x:-l/2-h,y:h},...Ji(l/2+h*2,-h,h,20,-180,-270),...Ji(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-c/2},...Ji(l/2,c/2,h,20,0,90)],f=[{x:l/2,y:-c/2-h},{x:-l/2,y:-c/2-h},...Ji(l/2,-c/2,h,20,-90,0),{x:-l/2-h,y:-h},...Ji(l/2+l*.1,-h,h,20,-180,-270),...Ji(l/2+l*.1,h,h,20,-90,-180),{x:-l/2-h,y:c/2},...Ji(l/2,c/2,h,20,0,90),{x:-l/2,y:c/2+h},{x:l/2,y:c/2+h}],p=Ae.svg(i),m=Ie(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=ht(d).replace("Z",""),y=p.path(b,m),w=ht(f),S=p.path(w,{...m}),E=i.insert("g",":first-child");return E.insert(()=>S,":first-child").attr("stroke-opacity",0),E.insert(()=>y,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(${h}, 0)`),o.attr("transform",`translate(${-l/2+h-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Le(e,E),e.intersect=function(T){return $e.polygon(e,f,T)},i}v(m7,"curlyBraceLeft");function Qi(t,e,n,r=100,i=0,s=180){const o=[],l=i*Math.PI/180,u=(s*Math.PI/180-l)/(r-1);for(let d=0;d<r;d++){const f=l+d*u,p=t+n*Math.cos(f),m=e+n*Math.sin(f);o.push({x:p,y:m})}return o}v(Qi,"generateCirclePoints");async function g7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...Qi(l/2,-c/2,h,20,-90,0),{x:l/2+h,y:-h},...Qi(l/2+h*2,-h,h,20,-180,-270),...Qi(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:c/2},...Qi(l/2,c/2,h,20,0,90)],f=[{x:-l/2,y:-c/2-h},{x:l/2,y:-c/2-h},...Qi(l/2,-c/2,h,20,-90,0),{x:l/2+h,y:-h},...Qi(l/2+h*2,-h,h,20,-180,-270),...Qi(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:c/2},...Qi(l/2,c/2,h,20,0,90),{x:l/2,y:c/2+h},{x:-l/2,y:c/2+h}],p=Ae.svg(i),m=Ie(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const b=ht(d).replace("Z",""),y=p.path(b,m),w=ht(f),S=p.path(w,{...m}),E=i.insert("g",":first-child");return E.insert(()=>S,":first-child").attr("stroke-opacity",0),E.insert(()=>y,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(${-h}, 0)`),o.attr("transform",`translate(${-l/2+(e.padding??0)/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Le(e,E),e.intersect=function(T){return $e.polygon(e,f,T)},i}v(g7,"curlyBraceRight");function yn(t,e,n,r=100,i=0,s=180){const o=[],l=i*Math.PI/180,u=(s*Math.PI/180-l)/(r-1);for(let d=0;d<r;d++){const f=l+d*u,p=t+n*Math.cos(f),m=e+n*Math.sin(f);o.push({x:-p,y:-m})}return o}v(yn,"generateCirclePoints");async function b7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...yn(l/2,-c/2,h,30,-90,0),{x:-l/2-h,y:h},...yn(l/2+h*2,-h,h,20,-180,-270),...yn(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-c/2},...yn(l/2,c/2,h,20,0,90)],f=[...yn(-l/2+h+h/2,-c/2,h,20,-90,-180),{x:l/2-h/2,y:h},...yn(-l/2-h/2,-h,h,20,0,90),...yn(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...yn(-l/2+h+h/2,c/2,h,30,-180,-270)],p=[{x:l/2,y:-c/2-h},{x:-l/2,y:-c/2-h},...yn(l/2,-c/2,h,20,-90,0),{x:-l/2-h,y:-h},...yn(l/2+h*2,-h,h,20,-180,-270),...yn(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:c/2},...yn(l/2,c/2,h,20,0,90),{x:-l/2,y:c/2+h},{x:l/2-h-h/2,y:c/2+h},...yn(-l/2+h+h/2,-c/2,h,20,-90,-180),{x:l/2-h/2,y:h},...yn(-l/2-h/2,-h,h,20,0,90),...yn(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...yn(-l/2+h+h/2,c/2,h,30,-180,-270)],m=Ae.svg(i),g=Ie(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=ht(d).replace("Z",""),w=m.path(y,g),E=ht(f).replace("Z",""),T=m.path(E,g),C=ht(p),M=m.path(C,{...g}),R=i.insert("g",":first-child");return R.insert(()=>M,":first-child").attr("stroke-opacity",0),R.insert(()=>w,":first-child"),R.insert(()=>T,":first-child"),R.attr("class","text"),u&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",u),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(${h-h/4}, 0)`),o.attr("transform",`translate(${-l/2+(e.padding??0)/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Le(e,R),e.intersect=function(D){return $e.polygon(e,p,D)},i}v(b7,"curlyBraces");async function y7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=80,l=20,c=Math.max(o,(s.width+(e.padding??0)*2)*1.25,e?.width??0),h=Math.max(l,s.height+(e.padding??0)*2,e?.height??0),u=h/2,{cssStyles:d}=e,f=Ae.svg(i),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=c,g=h,b=m-u,y=g/4,w=[{x:b,y:0},{x:y,y:0},{x:0,y:g/2},{x:y,y:g},{x:b,y:g},...nh(-b,-g/2,u,50,270,90)],S=ht(w),E=f.path(S,p),T=i.insert(()=>E,":first-child");return T.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",r),T.attr("transform",`translate(${-c/2}, ${-h/2})`),Le(e,T),e.intersect=function(C){return $e.polygon(e,w,C)},i}v(y7,"curvedTrapezoid");var Nte=v((t,e,n,r,i,s)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createCylinderPathD"),Dte=v((t,e,n,r,i,s)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`].join(" "),"createOuterCylinderPathD"),Bte=v((t,e,n,r,i,s)=>[`M${t-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function x7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+e.padding,e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+e.padding,e.height??0);let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=Ae.svg(i),m=Dte(0,0,l,u,c,h),g=Bte(0,h,l,u,c,h),b=p.path(m,Ie(e,{})),y=p.path(g,Ie(e,{fill:"none"}));d=i.insert(()=>y,":first-child"),d=i.insert(()=>b,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const p=Nte(0,0,l,u,c,h);d=i.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",In(f)).attr("style",r)}return d.attr("label-offset-y",h),d.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),Le(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(p){const m=$e.rect(e,p),g=m.x-(e.x??0);if(c!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(m.y-(e.y??0))>(e.height??0)/2-h)){let b=h*h*(1-g*g/(c*c));b>0&&(b=Math.sqrt(b)),b=h-b,p.y-(e.y??0)>0&&(b=-b),m.y+=b}return m},i}v(x7,"cylinder");async function w7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=s.width+e.padding,c=s.height+e.padding,h=c*.2,u=-l/2,d=-c/2-h/2,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:u,y:d+h},{x:-u,y:d+h},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+h}],b=p.polygon(g.map(w=>[w.x,w.y]),m),y=i.insert(()=>b,":first-child");return y.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),o.attr("transform",`translate(${u+(e.padding??0)/2-(s.x-(s.left??0))}, ${d+h+(e.padding??0)/2-(s.y-(s.top??0))})`),Le(e,y),e.intersect=function(w){return $e.rect(e,w)},i}v(w7,"dividedRectangle");async function _7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o}=await Ve(t,e,qe(e)),c=s.width/2+o+5,h=s.width/2+o;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ae.svg(i),p=Ie(e,{roughness:.2,strokeWidth:2.5}),m=Ie(e,{roughness:.2,strokeWidth:1.5}),g=f.circle(0,0,c*2,p),b=f.circle(0,0,h*2,m);u=i.insert("g",":first-child"),u.attr("class",In(e.cssClasses)).attr("style",In(d)),u.node()?.appendChild(g),u.node()?.appendChild(b)}else{u=i.insert("g",":first-child");const f=u.insert("circle",":first-child"),p=u.insert("circle");u.attr("class","basic label-container").attr("style",r),f.attr("class","outer-circle").attr("style",r).attr("r",c).attr("cx",0).attr("cy",0),p.attr("class","inner-circle").attr("style",r).attr("r",h).attr("cx",0).attr("cy",0)}return Le(e,u),e.intersect=function(f){return ce.info("DoubleCircle intersect",e,c,f),$e.circle(e,c,f)},i}v(_7,"doublecircle");function v7(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Me(e);e.label="",e.labelStyle=r;const s=t.insert("g").attr("class",qe(e)).attr("id",e.domId??e.id),o=7,{cssStyles:l}=e,c=Ae.svg(s),{nodeBorder:h}=n,u=Ie(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const d=c.circle(0,0,o*2,u),f=s.insert(()=>d,":first-child");return f.selectAll("path").attr("style",`fill: ${h} !important;`),l&&l.length>0&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",l),i&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",i),Le(e,f),e.intersect=function(p){return ce.info("filledCircle intersect",e,{radius:o,point:p}),$e.circle(e,o,p)},s}v(v7,"filledCircle");async function T7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:-c},{x:h,y:-c},{x:h/2,y:0}],{cssStyles:d}=e,f=Ae.svg(i),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=ht(u),g=f.path(m,p),b=i.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",r),e.width=l,e.height=c,Le(e,b),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-c/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(y){return ce.info("Triangle intersect",e,u,y),$e.polygon(e,u,y)},i}v(T7,"flippedTriangle");function k7(t,e,{dir:n,config:{state:r,themeVariables:i}}){const{nodeStyles:s}=Me(e);e.label="";const o=t.insert("g").attr("class",qe(e)).attr("id",e.domId??e.id),{cssStyles:l}=e;let c=Math.max(70,e?.width??0),h=Math.max(10,e?.height??0);n==="LR"&&(c=Math.max(10,e?.width??0),h=Math.max(70,e?.height??0));const u=-1*c/2,d=-1*h/2,f=Ae.svg(o),p=Ie(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=f.rectangle(u,d,c,h,p),g=o.insert(()=>m,":first-child");l&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",l),s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),Le(e,g);const b=r?.padding??0;return e.width&&e.height&&(e.width+=b/2||0,e.height+=b/2||0),e.intersect=function(y){return $e.rect(e,y)},o}v(k7,"forkJoin");async function S7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const i=80,s=50,{shapeSvg:o,bbox:l}=await Ve(t,e,qe(e)),c=Math.max(i,l.width+(e.padding??0)*2,e?.width??0),h=Math.max(s,l.height+(e.padding??0)*2,e?.height??0),u=h/2,{cssStyles:d}=e,f=Ae.svg(o),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:-c/2,y:-h/2},{x:c/2-u,y:-h/2},...nh(-c/2+u,0,u,50,90,270),{x:c/2-u,y:h/2},{x:-c/2,y:h/2}],g=ht(m),b=f.path(g,p),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),Le(e,y),e.intersect=function(w){return ce.info("Pill intersect",e,{radius:u,point:w}),$e.polygon(e,m,w)},o}v(S7,"halfRoundedRectangle");async function $7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.height+(e.padding??0),l=s.width+(e.padding??0)*2.5,{cssStyles:c}=e,h=Ae.svg(i),u=Ie(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let d=l/2;const f=d/6;d=d+f;const p=o/2,m=p/2,g=d-m,b=[{x:-g,y:-p},{x:0,y:-p},{x:g,y:-p},{x:d,y:0},{x:g,y:p},{x:0,y:p},{x:-g,y:p},{x:-d,y:0}],y=ht(b),w=h.path(y,u),S=i.insert(()=>w,":first-child");return S.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",c),r&&e.look!=="handDrawn"&&S.selectChildren("path").attr("style",r),e.width=l,e.height=o,Le(e,S),e.intersect=function(E){return $e.polygon(e,b,E)},i}v($7,"hexagon");async function E7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.label="",e.labelStyle=n;const{shapeSvg:i}=await Ve(t,e,qe(e)),s=Math.max(30,e?.width??0),o=Math.max(30,e?.height??0),{cssStyles:l}=e,c=Ae.svg(i),h=Ie(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],d=ht(u),f=c.path(d,h),p=i.insert(()=>f,":first-child");return p.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&p.selectChildren("path").attr("style",l),r&&e.look!=="handDrawn"&&p.selectChildren("path").attr("style",r),p.attr("transform",`translate(${-s/2}, ${-o/2})`),Le(e,p),e.intersect=function(m){return ce.info("Pill intersect",e,{points:u}),$e.polygon(e,u,m)},i}v(E7,"hourglass");async function j7(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Me(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=r?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,label:d}=await Ve(t,e,"icon-shape default"),f=e.pos==="t",p=l,m=l,{nodeBorder:g}=n,{stylesMap:b}=ll(e),y=-m/2,w=-p/2,S=e.label?8:0,E=Ae.svg(h),T=Ie(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const C=E.rectangle(y,w,m,p,T),M=Math.max(m,u.width),R=p+u.height+S,D=E.rectangle(-M/2,-R/2,M,R,{...T,fill:"transparent",stroke:"none"}),$=h.insert(()=>C,":first-child"),L=h.insert(()=>D);if(e.icon){const q=h.append("g");q.html(`<g>${await Ch(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const P=q.node().getBBox(),A=P.width,O=P.height,F=P.x,Y=P.y;q.attr("transform",`translate(${-A/2-F},${f?u.height/2+S/2-O/2-Y:-u.height/2-S/2-O/2-Y})`),q.attr("style",`color: ${b.get("stroke")??g};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-R/2:R/2-u.height})`),$.attr("transform",`translate(0,${f?u.height/2+S/2:-u.height/2-S/2})`),Le(e,L),e.intersect=function(q){if(ce.info("iconSquare intersect",e,q),!e.label)return $e.rect(e,q);const P=e.x??0,A=e.y??0,O=e.height??0;let F=[];return f?F=[{x:P-u.width/2,y:A-O/2},{x:P+u.width/2,y:A-O/2},{x:P+u.width/2,y:A-O/2+u.height+S},{x:P+m/2,y:A-O/2+u.height+S},{x:P+m/2,y:A+O/2},{x:P-m/2,y:A+O/2},{x:P-m/2,y:A-O/2+u.height+S},{x:P-u.width/2,y:A-O/2+u.height+S}]:F=[{x:P-m/2,y:A-O/2},{x:P+m/2,y:A-O/2},{x:P+m/2,y:A-O/2+p},{x:P+u.width/2,y:A-O/2+p},{x:P+u.width/2/2,y:A+O/2},{x:P-u.width/2,y:A+O/2},{x:P-u.width/2,y:A-O/2+p},{x:P-m/2,y:A-O/2+p}],$e.polygon(e,F,q)},h}v(j7,"icon");async function C7(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Me(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=r?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,label:d}=await Ve(t,e,"icon-shape default"),f=20,p=e.label?8:0,m=e.pos==="t",{nodeBorder:g,mainBkg:b}=n,{stylesMap:y}=ll(e),w=Ae.svg(h),S=Ie(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=y.get("fill");S.stroke=E??b;const T=h.append("g");e.icon&&T.html(`<g>${await Ch(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const C=T.node().getBBox(),M=C.width,R=C.height,D=C.x,$=C.y,L=Math.max(M,R)*Math.SQRT2+f*2,q=w.circle(0,0,L,S),P=Math.max(L,u.width),A=L+u.height+p,O=w.rectangle(-P/2,-A/2,P,A,{...S,fill:"transparent",stroke:"none"}),F=h.insert(()=>q,":first-child"),Y=h.insert(()=>O);return T.attr("transform",`translate(${-M/2-D},${m?u.height/2+p/2-R/2-$:-u.height/2-p/2-R/2-$})`),T.attr("style",`color: ${y.get("stroke")??g};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-A/2:A/2-u.height})`),F.attr("transform",`translate(0,${m?u.height/2+p/2:-u.height/2-p/2})`),Le(e,Y),e.intersect=function(Q){return ce.info("iconSquare intersect",e,Q),$e.rect(e,Q)},h}v(C7,"iconCircle");async function A7(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Me(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=r?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,halfPadding:d,label:f}=await Ve(t,e,"icon-shape default"),p=e.pos==="t",m=l+d*2,g=l+d*2,{nodeBorder:b,mainBkg:y}=n,{stylesMap:w}=ll(e),S=-g/2,E=-m/2,T=e.label?8:0,C=Ae.svg(h),M=Ie(e,{});e.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const R=w.get("fill");M.stroke=R??y;const D=C.path(Ja(S,E,g,m,5),M),$=Math.max(g,u.width),L=m+u.height+T,q=C.rectangle(-$/2,-L/2,$,L,{...M,fill:"transparent",stroke:"none"}),P=h.insert(()=>D,":first-child").attr("class","icon-shape2"),A=h.insert(()=>q);if(e.icon){const O=h.append("g");O.html(`<g>${await Ch(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const F=O.node().getBBox(),Y=F.width,Q=F.height,z=F.x,j=F.y;O.attr("transform",`translate(${-Y/2-z},${p?u.height/2+T/2-Q/2-j:-u.height/2-T/2-Q/2-j})`),O.attr("style",`color: ${w.get("stroke")??b};`)}return f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-L/2:L/2-u.height})`),P.attr("transform",`translate(0,${p?u.height/2+T/2:-u.height/2-T/2})`),Le(e,A),e.intersect=function(O){if(ce.info("iconSquare intersect",e,O),!e.label)return $e.rect(e,O);const F=e.x??0,Y=e.y??0,Q=e.height??0;let z=[];return p?z=[{x:F-u.width/2,y:Y-Q/2},{x:F+u.width/2,y:Y-Q/2},{x:F+u.width/2,y:Y-Q/2+u.height+T},{x:F+g/2,y:Y-Q/2+u.height+T},{x:F+g/2,y:Y+Q/2},{x:F-g/2,y:Y+Q/2},{x:F-g/2,y:Y-Q/2+u.height+T},{x:F-u.width/2,y:Y-Q/2+u.height+T}]:z=[{x:F-g/2,y:Y-Q/2},{x:F+g/2,y:Y-Q/2},{x:F+g/2,y:Y-Q/2+m},{x:F+u.width/2,y:Y-Q/2+m},{x:F+u.width/2/2,y:Y+Q/2},{x:F-u.width/2,y:Y+Q/2},{x:F-u.width/2,y:Y-Q/2+m},{x:F-g/2,y:Y-Q/2+m}],$e.polygon(e,z,O)},h}v(A7,"iconRounded");async function I7(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:i}=Me(e);e.labelStyle=i;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=r?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,halfPadding:d,label:f}=await Ve(t,e,"icon-shape default"),p=e.pos==="t",m=l+d*2,g=l+d*2,{nodeBorder:b,mainBkg:y}=n,{stylesMap:w}=ll(e),S=-g/2,E=-m/2,T=e.label?8:0,C=Ae.svg(h),M=Ie(e,{});e.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const R=w.get("fill");M.stroke=R??y;const D=C.path(Ja(S,E,g,m,.1),M),$=Math.max(g,u.width),L=m+u.height+T,q=C.rectangle(-$/2,-L/2,$,L,{...M,fill:"transparent",stroke:"none"}),P=h.insert(()=>D,":first-child"),A=h.insert(()=>q);if(e.icon){const O=h.append("g");O.html(`<g>${await Ch(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const F=O.node().getBBox(),Y=F.width,Q=F.height,z=F.x,j=F.y;O.attr("transform",`translate(${-Y/2-z},${p?u.height/2+T/2-Q/2-j:-u.height/2-T/2-Q/2-j})`),O.attr("style",`color: ${w.get("stroke")??b};`)}return f.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-L/2:L/2-u.height})`),P.attr("transform",`translate(0,${p?u.height/2+T/2:-u.height/2-T/2})`),Le(e,A),e.intersect=function(O){if(ce.info("iconSquare intersect",e,O),!e.label)return $e.rect(e,O);const F=e.x??0,Y=e.y??0,Q=e.height??0;let z=[];return p?z=[{x:F-u.width/2,y:Y-Q/2},{x:F+u.width/2,y:Y-Q/2},{x:F+u.width/2,y:Y-Q/2+u.height+T},{x:F+g/2,y:Y-Q/2+u.height+T},{x:F+g/2,y:Y+Q/2},{x:F-g/2,y:Y+Q/2},{x:F-g/2,y:Y-Q/2+u.height+T},{x:F-u.width/2,y:Y-Q/2+u.height+T}]:z=[{x:F-g/2,y:Y-Q/2},{x:F+g/2,y:Y-Q/2},{x:F+g/2,y:Y-Q/2+m},{x:F+u.width/2,y:Y-Q/2+m},{x:F+u.width/2/2,y:Y+Q/2},{x:F-u.width/2,y:Y+Q/2},{x:F-u.width/2,y:Y-Q/2+m},{x:F-g/2,y:Y-Q/2+m}],$e.polygon(e,z,O)},h}v(I7,"iconSquare");async function M7(t,e,{config:{flowchart:n}}){const r=new Image;r.src=e?.img??"",await r.decode();const i=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/s;const{labelStyles:o}=Me(e);e.labelStyle=o;const l=n?.wrappingWidth;e.defaultWidth=n?.wrappingWidth;const c=Math.max(e.label?l??0:0,e?.assetWidth??i),h=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:c,u=e.constraint==="on"?h/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(h,l??0);const{shapeSvg:d,bbox:f,label:p}=await Ve(t,e,"image-shape default"),m=e.pos==="t",g=-h/2,b=-u/2,y=e.label?8:0,w=Ae.svg(d),S=Ie(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=w.rectangle(g,b,h,u,S),T=Math.max(h,f.width),C=u+f.height+y,M=w.rectangle(-T/2,-C/2,T,C,{...S,fill:"none",stroke:"none"}),R=d.insert(()=>E,":first-child"),D=d.insert(()=>M);if(e.img){const $=d.append("image");$.attr("href",e.img),$.attr("width",h),$.attr("height",u),$.attr("preserveAspectRatio","none"),$.attr("transform",`translate(${-h/2},${m?C/2-u:-C/2})`)}return p.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${m?-u/2-f.height/2-y/2:u/2-f.height/2+y/2})`),R.attr("transform",`translate(0,${m?f.height/2+y/2:-f.height/2-y/2})`),Le(e,D),e.intersect=function($){if(ce.info("iconSquare intersect",e,$),!e.label)return $e.rect(e,$);const L=e.x??0,q=e.y??0,P=e.height??0;let A=[];return m?A=[{x:L-f.width/2,y:q-P/2},{x:L+f.width/2,y:q-P/2},{x:L+f.width/2,y:q-P/2+f.height+y},{x:L+h/2,y:q-P/2+f.height+y},{x:L+h/2,y:q+P/2},{x:L-h/2,y:q+P/2},{x:L-h/2,y:q-P/2+f.height+y},{x:L-f.width/2,y:q-P/2+f.height+y}]:A=[{x:L-h/2,y:q-P/2},{x:L+h/2,y:q-P/2},{x:L+h/2,y:q-P/2+u},{x:L+f.width/2,y:q-P/2+u},{x:L+f.width/2/2,y:q+P/2},{x:L-f.width/2,y:q+P/2},{x:L-f.width/2,y:q-P/2+u},{x:L-h/2,y:q-P/2+u}],$e.polygon(e,A,$)},d}v(M7,"imageSquare");async function L7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=[{x:0,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:-3*l/6,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ae.svg(i),f=Ie(e,{}),p=ht(c),m=d.path(p,f);h=i.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=Qa(i,o,l,c);return r&&h.attr("style",r),e.width=o,e.height=l,Le(e,h),e.intersect=function(d){return $e.polygon(e,c,d)},i}v(L7,"inv_trapezoid");async function zf(t,e,n){const{labelStyles:r,nodeStyles:i}=Me(e);e.labelStyle=r;const{shapeSvg:s,bbox:o}=await Ve(t,e,qe(e)),l=Math.max(o.width+n.labelPaddingX*2,e?.width||0),c=Math.max(o.height+n.labelPaddingY*2,e?.height||0),h=-l/2,u=-c/2;let d,{rx:f,ry:p}=e;const{cssStyles:m}=e;if(n?.rx&&n.ry&&(f=n.rx,p=n.ry),e.look==="handDrawn"){const g=Ae.svg(s),b=Ie(e,{}),y=f||p?g.path(Ja(h,u,l,c,f||0),b):g.rectangle(h,u,l,c,b);d=s.insert(()=>y,":first-child"),d.attr("class","basic label-container").attr("style",In(m))}else d=s.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",i).attr("rx",In(f)).attr("ry",In(p)).attr("x",h).attr("y",u).attr("width",l).attr("height",c);return Le(e,d),e.calcIntersect=function(g,b){return $e.rect(g,b)},e.intersect=function(g){return $e.rect(e,g)},s}v(zf,"drawRect");async function O7(t,e){const{shapeSvg:n,bbox:r,label:i}=await Ve(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(r.width/2)-(r.x-(r.left??0))}, ${-(r.height/2)-(r.y-(r.top??0))})`),Le(e,s),e.intersect=function(c){return $e.rect(e,c)},n}v(O7,"labelRect");async function R7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:-(3*l)/6,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ae.svg(i),f=Ie(e,{}),p=ht(c),m=d.path(p,f);h=i.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=Qa(i,o,l,c);return r&&h.attr("style",r),e.width=o,e.height=l,Le(e,h),e.intersect=function(d){return $e.polygon(e,c,d)},i}v(R7,"lean_left");async function N7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:-3*l/6,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:0,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ae.svg(i),f=Ie(e,{}),p=ht(c),m=d.path(p,f);h=i.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=Qa(i,o,l,c);return r&&h.attr("style",r),e.width=o,e.height=l,Le(e,h),e.intersect=function(d){return $e.polygon(e,c,d)},i}v(N7,"lean_right");function D7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.label="",e.labelStyle=n;const i=t.insert("g").attr("class",qe(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,e?.width??0),l=Math.max(35,e?.height??0),c=7,h=[{x:o,y:0},{x:0,y:l+c/2},{x:o-2*c,y:l+c/2},{x:0,y:2*l},{x:o,y:l-c/2},{x:2*c,y:l-c/2}],u=Ae.svg(i),d=Ie(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=ht(h),p=u.path(f,d),m=i.insert(()=>p,":first-child");return s&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",s),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(-${o/2},${-l})`),Le(e,m),e.intersect=function(g){return ce.info("lightningBolt intersect",e,g),$e.polygon(e,h,g)},i}v(D7,"lightningBolt");var Pte=v((t,e,n,r,i,s,o)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${n},0`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),Fte=v((t,e,n,r,i,s,o)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${i},${s} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${s} 0,0,0 ${n},0`,`l0,${-r}`,`M${t},${e+s+o}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),Hte=v((t,e,n,r,i,s)=>[`M${t-n/2},${-r/2}`,`a${i},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function B7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0),e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+(e.padding??0),e.height??0),d=u*.1;let f;const{cssStyles:p}=e;if(e.look==="handDrawn"){const m=Ae.svg(i),g=Fte(0,0,l,u,c,h,d),b=Hte(0,h,l,u,c,h),y=Ie(e,{}),w=m.path(g,y),S=m.path(b,y);i.insert(()=>S,":first-child").attr("class","line"),f=i.insert(()=>w,":first-child"),f.attr("class","basic label-container"),p&&f.attr("style",p)}else{const m=Pte(0,0,l,u,c,h,d);f=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",In(p)).attr("style",r)}return f.attr("label-offset-y",h),f.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),Le(e,f),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+h-(s.y-(s.top??0))})`),e.intersect=function(m){const g=$e.rect(e,m),b=g.x-(e.x??0);if(c!=0&&(Math.abs(b)<(e.width??0)/2||Math.abs(b)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-h)){let y=h*h*(1-b*b/(c*c));y>0&&(y=Math.sqrt(y)),y=h-y,m.y-(e.y??0)>0&&(y=-y),g.y+=y}return g},i}v(B7,"linedCylinder");async function P7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=c+h,{cssStyles:d}=e,f=Ae.svg(i),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:-l/2-l/2*.1,y:-u/2},{x:-l/2-l/2*.1,y:u/2},...Wa(-l/2-l/2*.1,u/2,l/2+l/2*.1,u/2,h,.8),{x:l/2+l/2*.1,y:-u/2},{x:-l/2-l/2*.1,y:-u/2},{x:-l/2,y:-u/2},{x:-l/2,y:u/2*1.1},{x:-l/2,y:-u/2}],g=f.polygon(m.map(y=>[y.x,y.y]),p),b=i.insert(()=>g,":first-child");return b.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)+l/2*.1/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h/2-(s.y-(s.top??0))})`),Le(e,b),e.intersect=function(y){return $e.polygon(e,m,y)},i}v(P7,"linedWaveEdgedRect");async function F7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=5,u=-l/2,d=-c/2,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{}),g=[{x:u-h,y:d+h},{x:u-h,y:d+c+h},{x:u+l-h,y:d+c+h},{x:u+l-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d+c-h},{x:u+l+h,y:d+c-h},{x:u+l+h,y:d-h},{x:u+h,y:d-h},{x:u+h,y:d},{x:u,y:d},{x:u,y:d+h}],b=[{x:u,y:d+h},{x:u+l-h,y:d+h},{x:u+l-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d},{x:u,y:d}];e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=ht(g),w=p.path(y,m),S=ht(b),E=p.path(S,{...m,fill:"none"}),T=i.insert(()=>E,":first-child");return T.insert(()=>w,":first-child"),T.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)-h-(s.x-(s.left??0))}, ${-(s.height/2)+h-(s.y-(s.top??0))})`),Le(e,T),e.intersect=function(C){return $e.polygon(e,g,C)},i}v(F7,"multiRect");async function H7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=c+h,d=-l/2,f=-u/2,p=5,{cssStyles:m}=e,g=Wa(d-p,f+u+p,d+l-p,f+u+p,h,.8),b=g?.[g.length-1],y=[{x:d-p,y:f+p},{x:d-p,y:f+u+p},...g,{x:d+l-p,y:b.y-p},{x:d+l,y:b.y-p},{x:d+l,y:b.y-2*p},{x:d+l+p,y:b.y-2*p},{x:d+l+p,y:f-p},{x:d+p,y:f-p},{x:d+p,y:f},{x:d,y:f},{x:d,y:f+p}],w=[{x:d,y:f+p},{x:d+l-p,y:f+p},{x:d+l-p,y:b.y-p},{x:d+l,y:b.y-p},{x:d+l,y:f},{x:d,y:f}],S=Ae.svg(i),E=Ie(e,{});e.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const T=ht(y),C=S.path(T,E),M=ht(w),R=S.path(M,E),D=i.insert(()=>C,":first-child");return D.insert(()=>R),D.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&D.selectAll("path").attr("style",m),r&&e.look!=="handDrawn"&&D.selectAll("path").attr("style",r),D.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-(s.width/2)-p-(s.x-(s.left??0))}, ${-(s.height/2)+p-h/2-(s.y-(s.top??0))})`),Le(e,D),e.intersect=function($){return $e.polygon(e,y,$)},i}v(H7,"multiWaveEdgedRectangle");async function z7(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Me(e);e.labelStyle=r,e.useHtmlLabels||Cn().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:l,label:c}=await Ve(t,e,qe(e)),h=Math.max(l.width+(e.padding??0)*2,e?.width??0),u=Math.max(l.height+(e.padding??0)*2,e?.height??0),d=-h/2,f=-u/2,{cssStyles:p}=e,m=Ae.svg(o),g=Ie(e,{fill:n.noteBkgColor,stroke:n.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=m.rectangle(d,f,h,u,g),y=o.insert(()=>b,":first-child");return y.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",i),c.attr("transform",`translate(${-l.width/2-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),Le(e,y),e.intersect=function(w){return $e.rect(e,w)},o}v(z7,"note");var zte=v((t,e,n)=>[`M${t+n/2},${e}`,`L${t+n},${e-n/2}`,`L${t+n/2},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function q7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.width+e.padding,l=s.height+e.padding,c=o+l,h=.5,u=[{x:c/2,y:0},{x:c,y:-c/2},{x:c/2,y:-c},{x:0,y:-c/2}];let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=Ae.svg(i),m=Ie(e,{}),g=zte(0,0,c),b=p.path(g,m);d=i.insert(()=>b,":first-child").attr("transform",`translate(${-c/2+h}, ${c/2})`),f&&d.attr("style",f)}else d=Qa(i,c,c,u),d.attr("transform",`translate(${-c/2+h}, ${c/2})`);return r&&d.attr("style",r),Le(e,d),e.calcIntersect=function(p,m){const g=p.width,b=[{x:g/2,y:0},{x:g,y:-g/2},{x:g/2,y:-g},{x:0,y:-g/2}],y=$e.polygon(p,b,m);return{x:y.x-.5,y:y.y-.5}},e.intersect=function(p){return this.calcIntersect(e,p)},i}v(q7,"question");async function W7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0),e?.width??0),c=Math.max(s.height+(e.padding??0),e?.height??0),h=-l/2,u=-c/2,d=u/2,f=[{x:h+d,y:u},{x:h,y:0},{x:h+d,y:-u},{x:-h,y:-u},{x:-h,y:u}],{cssStyles:p}=e,m=Ae.svg(i),g=Ie(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=ht(f),y=m.path(b,g),w=i.insert(()=>y,":first-child");return w.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",p),r&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${-d/2},0)`),o.attr("transform",`translate(${-d/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Le(e,w),e.intersect=function(S){return $e.polygon(e,f,S)},i}v(W7,"rect_left_inv_arrow");async function U7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g"),l=s.insert("g").attr("class","label").attr("style",r),c=e.description,h=e.label,u=l.node().appendChild(await vs(h,e.labelStyle,!0,!0));let d={width:0,height:0};if(ln(wt()?.flowchart?.htmlLabels)){const R=u.children[0],D=ut(u);d=R.getBoundingClientRect(),D.attr("width",d.width),D.attr("height",d.height)}ce.info("Text 2",c);const f=c||[],p=u.getBBox(),m=l.node().appendChild(await vs(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0)),g=m.children[0],b=ut(m);d=g.getBoundingClientRect(),b.attr("width",d.width),b.attr("height",d.height);const y=(e.padding||0)/2;ut(m).attr("transform","translate( "+(d.width>p.width?0:(p.width-d.width)/2)+", "+(p.height+y+5)+")"),ut(u).attr("transform","translate( "+(d.width<p.width?0:-(p.width-d.width)/2)+", 0)"),d=l.node().getBBox(),l.attr("transform","translate("+-d.width/2+", "+(-d.height/2-y+3)+")");const w=d.width+(e.padding||0),S=d.height+(e.padding||0),E=-d.width/2-y,T=-d.height/2-y;let C,M;if(e.look==="handDrawn"){const R=Ae.svg(s),D=Ie(e,{}),$=R.path(Ja(E,T,w,S,e.rx||0),D),L=R.line(-d.width/2-y,-d.height/2-y+p.height+y,d.width/2+y,-d.height/2-y+p.height+y,D);M=s.insert(()=>(ce.debug("Rough node insert CXC",$),L),":first-child"),C=s.insert(()=>(ce.debug("Rough node insert CXC",$),$),":first-child")}else C=o.insert("rect",":first-child"),M=o.insert("line"),C.attr("class","outer title-state").attr("style",r).attr("x",-d.width/2-y).attr("y",-d.height/2-y).attr("width",d.width+(e.padding||0)).attr("height",d.height+(e.padding||0)),M.attr("class","divider").attr("x1",-d.width/2-y).attr("x2",d.width/2+y).attr("y1",-d.height/2-y+p.height+y).attr("y2",-d.height/2-y+p.height+y);return Le(e,C),e.intersect=function(R){return $e.rect(e,R)},s}v(U7,"rectWithTitle");function uc(t,e,n,r,i,s,o){const c=(t+n)/2,h=(e+r)/2,u=Math.atan2(r-e,n-t),d=(n-t)/2,f=(r-e)/2,p=d/i,m=f/s,g=Math.sqrt(p**2+m**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const b=Math.sqrt(1-g**2),y=c+b*s*Math.sin(u)*(o?-1:1),w=h-b*i*Math.cos(u)*(o?-1:1),S=Math.atan2((e-w)/s,(t-y)/i);let T=Math.atan2((r-w)/s,(n-y)/i)-S;o&&T<0&&(T+=2*Math.PI),!o&&T>0&&(T-=2*Math.PI);const C=[];for(let M=0;M<20;M++){const R=M/19,D=S+R*T,$=y+i*Math.cos(D),L=w+s*Math.sin(D);C.push({x:$,y:L})}return C}v(uc,"generateArcPoints");async function V7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=e?.padding??0,l=e?.padding??0,c=(e?.width?e?.width:s.width)+o*2,h=(e?.height?e?.height:s.height)+l*2,u=e.radius||5,d=e.taper||5,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{});e.stroke&&(m.stroke=e.stroke),e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:-c/2+d,y:-h/2},{x:c/2-d,y:-h/2},...uc(c/2-d,-h/2,c/2,-h/2+d,u,u,!0),{x:c/2,y:-h/2+d},{x:c/2,y:h/2-d},...uc(c/2,h/2-d,c/2-d,h/2,u,u,!0),{x:c/2-d,y:h/2},{x:-c/2+d,y:h/2},...uc(-c/2+d,h/2,-c/2,h/2-d,u,u,!0),{x:-c/2,y:h/2-d},{x:-c/2,y:-h/2+d},...uc(-c/2,-h/2+d,-c/2+d,-h/2,u,u,!0)],b=ht(g),y=p.path(b,m),w=i.insert(()=>y,":first-child");return w.attr("class","basic label-container outer-path"),f&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",f),r&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",r),Le(e,w),e.intersect=function(S){return $e.polygon(e,g,S)},i}v(V7,"roundedRect");async function Y7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=e?.padding??0,c=Math.max(s.width+(e.padding??0)*2,e?.width??0),h=Math.max(s.height+(e.padding??0)*2,e?.height??0),u=-s.width/2-l,d=-s.height/2-l,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=[{x:u,y:d},{x:u+c+8,y:d},{x:u+c+8,y:d+h},{x:u-8,y:d+h},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+h}],b=p.polygon(g.map(w=>[w.x,w.y]),m),y=i.insert(()=>b,":first-child");return y.attr("class","basic label-container").attr("style",In(f)),r&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),f&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",r),o.attr("transform",`translate(${-c/2+4+(e.padding??0)-(s.x-(s.left??0))},${-h/2+(e.padding??0)-(s.y-(s.top??0))})`),Le(e,y),e.intersect=function(w){return $e.rect(e,w)},i}v(Y7,"shadedProcess");async function G7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=-l/2,u=-c/2,{cssStyles:d}=e,f=Ae.svg(i),p=Ie(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const m=[{x:h,y:u},{x:h,y:u+c},{x:h+l,y:u+c},{x:h+l,y:u-c/2}],g=ht(m),b=f.path(g,p),y=i.insert(()=>b,":first-child");return y.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",d),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),y.attr("transform",`translate(0, ${c/4})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))}, ${-c/4+(e.padding??0)-(s.y-(s.top??0))})`),Le(e,y),e.intersect=function(w){return $e.polygon(e,m,w)},i}v(G7,"slopedRect");async function X7(t,e){const n={rx:0,ry:0,labelPaddingX:e.labelPaddingX??(e?.padding||0)*2,labelPaddingY:(e?.padding||0)*1};return zf(t,e,n)}v(X7,"squareRect");async function J7(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.height+e.padding,l=s.width+o/4+e.padding,c=o/2,{cssStyles:h}=e,u=Ae.svg(i),d=Ie(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2+c,y:-o/2},{x:l/2-c,y:-o/2},...nh(-l/2+c,0,c,50,90,270),{x:l/2-c,y:o/2},...nh(l/2-c,0,c,50,270,450)],p=ht(f),m=u.path(p,d),g=i.insert(()=>m,":first-child");return g.attr("class","basic label-container outer-path"),h&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",h),r&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",r),Le(e,g),e.intersect=function(b){return $e.polygon(e,f,b)},i}v(J7,"stadium");async function Q7(t,e){return zf(t,e,{rx:5,ry:5})}v(Q7,"state");function K7(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:i}=Me(e);e.labelStyle=r;const{cssStyles:s}=e,{lineColor:o,stateBorder:l,nodeBorder:c}=n,h=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=Ae.svg(h),d=Ie(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=u.circle(0,0,14,{...d,stroke:o,strokeWidth:2}),p=l??c,m=u.circle(0,0,5,{...d,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),g=h.insert(()=>f,":first-child");return g.insert(()=>m),s&&g.selectAll("path").attr("style",s),i&&g.selectAll("path").attr("style",i),Le(e,g),e.intersect=function(b){return $e.circle(e,7,b)},h}v(K7,"stateEnd");function Z7(t,e,{config:{themeVariables:n}}){const{lineColor:r}=n,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const l=Ae.svg(i).circle(0,0,14,ZJ(r));s=i.insert(()=>l),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Le(e,s),e.intersect=function(o){return $e.circle(e,7,o)},i}v(Z7,"stateStart");async function eA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=(e?.padding||0)/2,l=s.width+e.padding,c=s.height+e.padding,h=-s.width/2-o,u=-s.height/2-o,d=[{x:0,y:0},{x:l,y:0},{x:l,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:l+8,y:0},{x:l+8,y:-c},{x:-8,y:-c},{x:-8,y:0}];if(e.look==="handDrawn"){const f=Ae.svg(i),p=Ie(e,{}),m=f.rectangle(h-8,u,l+16,c,p),g=f.line(h,u,h,u+c,p),b=f.line(h+l,u,h+l,u+c,p);i.insert(()=>g,":first-child"),i.insert(()=>b,":first-child");const y=i.insert(()=>m,":first-child"),{cssStyles:w}=e;y.attr("class","basic label-container").attr("style",In(w)),Le(e,y)}else{const f=Qa(i,l,c,d);r&&f.attr("style",r),Le(e,f)}return e.intersect=function(f){return $e.polygon(e,d,f)},i}v(eA,"subroutine");async function tA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=-o/2,h=-l/2,u=.2*l,d=.2*l,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{}),g=[{x:c-u/2,y:h},{x:c+o+u/2,y:h},{x:c+o+u/2,y:h+l},{x:c-u/2,y:h+l}],b=[{x:c+o-u/2,y:h+l},{x:c+o+u/2,y:h+l},{x:c+o+u/2,y:h+l-d}];e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=ht(g),w=p.path(y,m),S=ht(b),E=p.path(S,{...m,fillStyle:"solid"}),T=i.insert(()=>E,":first-child");return T.insert(()=>w,":first-child"),T.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",r),Le(e,T),e.intersect=function(C){return $e.polygon(e,g,C)},i}v(tA,"taggedRect");async function nA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=.2*l,d=.2*c,f=c+h,{cssStyles:p}=e,m=Ae.svg(i),g=Ie(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=[{x:-l/2-l/2*.1,y:f/2},...Wa(-l/2-l/2*.1,f/2,l/2+l/2*.1,f/2,h,.8),{x:l/2+l/2*.1,y:-f/2},{x:-l/2-l/2*.1,y:-f/2}],y=-l/2+l/2*.1,w=-f/2-d*.4,S=[{x:y+l-u,y:(w+c)*1.4},{x:y+l,y:w+c-d},{x:y+l,y:(w+c)*.9},...Wa(y+l,(w+c)*1.3,y+l-u,(w+c)*1.5,-c*.03,.5)],E=ht(b),T=m.path(E,g),C=ht(S),M=m.path(C,{...g,fillStyle:"solid"}),R=i.insert(()=>M,":first-child");return R.insert(()=>T,":first-child"),R.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",p),r&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",r),R.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h/2-(s.y-(s.top??0))})`),Le(e,R),e.intersect=function(D){return $e.polygon(e,b,D)},i}v(nA,"taggedWaveEdgedRectangle");async function rA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=Math.max(s.width+e.padding,e?.width||0),l=Math.max(s.height+e.padding,e?.height||0),c=-o/2,h=-l/2,u=i.insert("rect",":first-child");return u.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",c).attr("y",h).attr("width",o).attr("height",l),Le(e,u),e.intersect=function(d){return $e.rect(e,d)},i}v(rA,"text");var qte=v((t,e,n,r,i,s)=>`M${t},${e}
    a${i},${s} 0,0,1 0,${-r}
    l${n},0
    a${i},${s} 0,0,1 0,${r}
    M${n},${-r}
    a${i},${s} 0,0,0 0,${r}
    l${-n},0`,"createCylinderPathD"),Wte=v((t,e,n,r,i,s)=>[`M${t},${e}`,`M${t+n},${e}`,`a${i},${s} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${s} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),Ute=v((t,e,n,r,i,s)=>[`M${t+n/2},${-r/2}`,`a${i},${s} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function iA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o,halfPadding:l}=await Ve(t,e,qe(e)),c=e.look==="neo"?l*2:l,h=s.height+c,u=h/2,d=u/(2.5+h/50),f=s.width+d+c,{cssStyles:p}=e;let m;if(e.look==="handDrawn"){const g=Ae.svg(i),b=Wte(0,0,f,h,d,u),y=Ute(0,0,f,h,d,u),w=g.path(b,Ie(e,{})),S=g.path(y,Ie(e,{fill:"none"}));m=i.insert(()=>S,":first-child"),m=i.insert(()=>w,":first-child"),m.attr("class","basic label-container"),p&&m.attr("style",p)}else{const g=qte(0,0,f,h,d,u);m=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",In(p)).attr("style",r),m.attr("class","basic label-container"),p&&m.selectAll("path").attr("style",p),r&&m.selectAll("path").attr("style",r)}return m.attr("label-offset-x",d),m.attr("transform",`translate(${-f/2}, ${h/2} )`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Le(e,m),e.intersect=function(g){const b=$e.rect(e,g),y=b.y-(e.y??0);if(u!=0&&(Math.abs(y)<(e.height??0)/2||Math.abs(y)==(e.height??0)/2&&Math.abs(b.x-(e.x??0))>(e.width??0)/2-d)){let w=d*d*(1-y*y/(u*u));w!=0&&(w=Math.sqrt(Math.abs(w))),w=d-w,g.x-(e.x??0)>0&&(w=-w),b.x+=w}return b},i}v(iA,"tiltedCylinder");async function aA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=s.width+e.padding,l=s.height+e.padding,c=[{x:-3*l/6,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:0,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ae.svg(i),f=Ie(e,{}),p=ht(c),m=d.path(p,f);h=i.insert(()=>m,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=Qa(i,o,l,c);return r&&h.attr("style",r),e.width=o,e.height=l,Le(e,h),e.intersect=function(d){return $e.polygon(e,c,d)},i}v(aA,"trapezoid");async function sA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=60,l=20,c=Math.max(o,s.width+(e.padding??0)*2,e?.width??0),h=Math.max(l,s.height+(e.padding??0)*2,e?.height??0),{cssStyles:u}=e,d=Ae.svg(i),f=Ie(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-c/2*.8,y:-h/2},{x:c/2*.8,y:-h/2},{x:c/2,y:-h/2*.6},{x:c/2,y:h/2},{x:-c/2,y:h/2},{x:-c/2,y:-h/2*.6}],m=ht(p),g=d.path(m,f),b=i.insert(()=>g,":first-child");return b.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),r&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",r),Le(e,b),e.intersect=function(y){return $e.polygon(e,p,y)},i}v(sA,"trapezoidalPentagon");async function oA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=ln(wt().flowchart?.htmlLabels),c=s.width+(e.padding??0),h=c+s.height,u=c+s.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-h}],{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=ht(d),b=p.path(g,m),y=i.insert(()=>b,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return f&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",f),r&&e.look!=="handDrawn"&&y.selectChildren("path").attr("style",r),e.width=c,e.height=h,Le(e,y),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${h/2-(s.height+(e.padding??0)/(l?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(w){return ce.info("Triangle intersect",e,d,w),$e.polygon(e,d,w)},i}v(oA,"triangle");async function lA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/8,u=c+h,{cssStyles:d}=e,p=70-l,m=p>0?p/2:0,g=Ae.svg(i),b=Ie(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const y=[{x:-l/2-m,y:u/2},...Wa(-l/2-m,u/2,l/2+m,u/2,h,.8),{x:l/2+m,y:-u/2},{x:-l/2-m,y:-u/2}],w=ht(y),S=g.path(w,b),E=i.insert(()=>S,":first-child");return E.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",d),r&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",r),E.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h-(s.y-(s.top??0))})`),Le(e,E),e.intersect=function(T){return $e.polygon(e,y,T)},i}v(lA,"waveEdgedRectangle");async function cA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s}=await Ve(t,e,qe(e)),o=100,l=50,c=Math.max(s.width+(e.padding??0)*2,e?.width??0),h=Math.max(s.height+(e.padding??0)*2,e?.height??0),u=c/h;let d=c,f=h;d>f*u?f=d/u:d=f*u,d=Math.max(d,o),f=Math.max(f,l);const p=Math.min(f*.2,f/4),m=f+p*2,{cssStyles:g}=e,b=Ae.svg(i),y=Ie(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const w=[{x:-d/2,y:m/2},...Wa(-d/2,m/2,d/2,m/2,p,1),{x:d/2,y:-m/2},...Wa(d/2,-m/2,-d/2,-m/2,p,-1)],S=ht(w),E=b.path(S,y),T=i.insert(()=>E,":first-child");return T.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",g),r&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",r),Le(e,T),e.intersect=function(C){return $e.polygon(e,w,C)},i}v(cA,"waveRectangle");async function hA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,label:o}=await Ve(t,e,qe(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=5,u=-l/2,d=-c/2,{cssStyles:f}=e,p=Ae.svg(i),m=Ie(e,{}),g=[{x:u-h,y:d-h},{x:u-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d-h}],b=`M${u-h},${d-h} L${u+l},${d-h} L${u+l},${d+c} L${u-h},${d+c} L${u-h},${d-h}
                M${u-h},${d} L${u+l},${d}
                M${u},${d-h} L${u},${d+c}`;e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const y=p.path(b,m),w=i.insert(()=>y,":first-child");return w.attr("transform",`translate(${h/2}, ${h/2})`),w.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",r),o.attr("transform",`translate(${-(s.width/2)+h/2-(s.x-(s.left??0))}, ${-(s.height/2)+h/2-(s.y-(s.top??0))})`),Le(e,w),e.intersect=function(S){return $e.polygon(e,g,S)},i}v(hA,"windowPane");async function $y(t,e){const n=e;if(n.alias&&(e.label=n.alias),e.look==="handDrawn"){const{themeVariables:te}=Cn(),{background:N}=te,U={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${N}`]};await $y(t,U)}const r=Cn();e.useHtmlLabels=r.htmlLabels;let i=r.er?.diagramPadding??10,s=r.er?.entityPadding??6;const{cssStyles:o}=e,{labelStyles:l,nodeStyles:c}=Me(e);if(n.attributes.length===0&&e.label){const te={rx:0,ry:0,labelPaddingX:i,labelPaddingY:i*1.5};pa(e.label,r)+te.labelPaddingX*2<r.er.minEntityWidth&&(e.width=r.er.minEntityWidth);const N=await zf(t,e,te);if(!ln(r.htmlLabels)){const U=N.select("text"),J=U.node()?.getBBox();U.attr("transform",`translate(${-J.width/2}, 0)`)}return N}r.htmlLabels||(i*=1.25,s*=1.25);let h=qe(e);h||(h="node default");const u=t.insert("g").attr("class",h).attr("id",e.domId||e.id),d=await po(u,e.label??"",r,0,0,["name"],l);d.height+=s;let f=0;const p=[],m=[];let g=0,b=0,y=0,w=0,S=!0,E=!0;for(const te of n.attributes){const N=await po(u,te.type,r,0,f,["attribute-type"],l);g=Math.max(g,N.width+i);const U=await po(u,te.name,r,0,f,["attribute-name"],l);b=Math.max(b,U.width+i);const J=await po(u,te.keys.join(),r,0,f,["attribute-keys"],l);y=Math.max(y,J.width+i);const se=await po(u,te.comment,r,0,f,["attribute-comment"],l);w=Math.max(w,se.width+i);const be=Math.max(N.height,U.height,J.height,se.height)+s;m.push({yOffset:f,rowHeight:be}),f+=be}let T=4;y<=i&&(S=!1,y=0,T--),w<=i&&(E=!1,w=0,T--);const C=u.node().getBBox();if(d.width+i*2-(g+b+y+w)>0){const te=d.width+i*2-(g+b+y+w);g+=te/T,b+=te/T,y>0&&(y+=te/T),w>0&&(w+=te/T)}const M=g+b+y+w,R=Ae.svg(u),D=Ie(e,{});e.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");let $=0;m.length>0&&($=m.reduce((te,N)=>te+(N?.rowHeight??0),0));const L=Math.max(C.width+i*2,e?.width||0,M),q=Math.max(($??0)+d.height,e?.height||0),P=-L/2,A=-q/2;u.selectAll("g:not(:first-child)").each((te,N,U)=>{const J=ut(U[N]),se=J.attr("transform");let be=0,xe=0;if(se){const Re=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(se);Re&&(be=parseFloat(Re[1]),xe=parseFloat(Re[2]),J.attr("class").includes("attribute-name")?be+=g:J.attr("class").includes("attribute-keys")?be+=g+b:J.attr("class").includes("attribute-comment")&&(be+=g+b+y))}J.attr("transform",`translate(${P+i/2+be}, ${xe+A+d.height+s/2})`)}),u.select(".name").attr("transform","translate("+-d.width/2+", "+(A+s/2)+")");const O=R.rectangle(P,A,L,q,D),F=u.insert(()=>O,":first-child").attr("style",o.join("")),{themeVariables:Y}=Cn(),{rowEven:Q,rowOdd:z,nodeBorder:j}=Y;p.push(0);for(const[te,N]of m.entries()){const J=(te+1)%2===0&&N.yOffset!==0,se=R.rectangle(P,d.height+A+N?.yOffset,L,N?.rowHeight,{...D,fill:J?Q:z,stroke:j});u.insert(()=>se,"g.label").attr("style",o.join("")).attr("class",`row-rect-${J?"even":"odd"}`)}let Z=R.line(P,d.height+A,L+P,d.height+A,D);u.insert(()=>Z).attr("class","divider"),Z=R.line(g+P,d.height+A,g+P,q+A,D),u.insert(()=>Z).attr("class","divider"),S&&(Z=R.line(g+b+P,d.height+A,g+b+P,q+A,D),u.insert(()=>Z).attr("class","divider")),E&&(Z=R.line(g+b+y+P,d.height+A,g+b+y+P,q+A,D),u.insert(()=>Z).attr("class","divider"));for(const te of p)Z=R.line(P,d.height+A+te,L+P,d.height+A+te,D),u.insert(()=>Z).attr("class","divider");if(Le(e,F),c&&e.look!=="handDrawn"){const N=c.split(";")?.filter(U=>U.includes("stroke"))?.map(U=>`${U}`).join("; ");u.selectAll("path").attr("style",N??""),u.selectAll(".row-rect-even path").attr("style",c)}return e.intersect=function(te){return $e.rect(e,te)},u}v($y,"erBox");async function po(t,e,n,r=0,i=0,s=[],o=""){const l=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",o);e!==i_(e)&&(e=i_(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const c=l.node().appendChild(await Xa(l,e,{width:pa(e,n)+100,style:o,useHtmlLabels:n.htmlLabels},n));if(e.includes("&lt;")||e.includes("&gt;")){let u=c.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=c.getBBox();if(ln(n.htmlLabels)){const u=c.children[0];u.style.textAlign="start";const d=ut(c);h=u.getBoundingClientRect(),d.attr("width",h.width),d.attr("height",h.height)}return h}v(po,"addText");async function uA(t,e,n,r,i=n.class.padding??12){const s=r?0:3,o=t.insert("g").attr("class",qe(e)).attr("id",e.domId||e.id);let l=null,c=null,h=null,u=null,d=0,f=0,p=0;if(l=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const w=e.annotations[0];await dc(l,{text:`«${w}»`},0),d=l.node().getBBox().height}c=o.insert("g").attr("class","label-group text"),await dc(c,e,0,["font-weight: bolder"]);const m=c.node().getBBox();f=m.height,h=o.insert("g").attr("class","members-group text");let g=0;for(const w of e.members){const S=await dc(h,w,g,[w.parseClassifier()]);g+=S+s}p=h.node().getBBox().height,p<=0&&(p=i/2),u=o.insert("g").attr("class","methods-group text");let b=0;for(const w of e.methods){const S=await dc(u,w,b,[w.parseClassifier()]);b+=S+s}let y=o.node().getBBox();if(l!==null){const w=l.node().getBBox();l.attr("transform",`translate(${-w.width/2})`)}return c.attr("transform",`translate(${-m.width/2}, ${d})`),y=o.node().getBBox(),h.attr("transform",`translate(0, ${d+f+i*2})`),y=o.node().getBBox(),u.attr("transform",`translate(0, ${d+f+(p?p+i*4:i*2)})`),y=o.node().getBBox(),{shapeSvg:o,bbox:y}}v(uA,"textHelper");async function dc(t,e,n,r=[]){const i=t.insert("g").attr("class","label").attr("style",r.join("; ")),s=Cn();let o="useHtmlLabels"in e?e.useHtmlLabels:ln(s.htmlLabels)??!0,l="";"text"in e?l=e.text:l=e.label,!o&&l.startsWith("\\")&&(l=l.substring(1)),Po(l)&&(o=!0);const c=await Xa(i,Nb(Js(l)),{width:pa(l,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let h,u=1;if(o){const d=c.children[0],f=ut(c);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const p=d.getElementsByTagName("img");if(p){const m=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map(g=>new Promise(b=>{function y(){if(g.style.display="flex",g.style.flexDirection="column",m){const w=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,E=parseInt(w,10)*5+"px";g.style.minWidth=E,g.style.maxWidth=E}else g.style.width="100%";b(g)}v(y,"setupImage"),setTimeout(()=>{g.complete&&y()}),g.addEventListener("error",y),g.addEventListener("load",y)})))}h=d.getBoundingClientRect(),f.attr("width",h.width),f.attr("height",h.height)}else{r.includes("font-weight: bolder")&&ut(c).selectAll("tspan").attr("font-weight",""),u=c.children.length;const d=c.children[0];(c.textContent===""||c.textContent.includes("&gt"))&&(d.textContent=l[0]+l.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),l[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),h=c.getBBox()}return i.attr("transform","translate(0,"+(-h.height/(2*u)+n)+")"),h.height}v(dc,"addText");async function dA(t,e){const n=wt(),r=n.class.padding??12,i=r,s=e.useHtmlLabels??ln(n.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:l,bbox:c}=await uA(t,e,n,s,i),{labelStyles:h,nodeStyles:u}=Me(e);e.labelStyle=h,e.cssStyles=o.styles||"";const d=o.styles?.join(";")||u||"";e.cssStyles||(e.cssStyles=d.replaceAll("!important","").split(";"));const f=o.members.length===0&&o.methods.length===0&&!n.class?.hideEmptyMembersBox,p=Ae.svg(l),m=Ie(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const g=c.width;let b=c.height;o.members.length===0&&o.methods.length===0?b+=i:o.members.length>0&&o.methods.length===0&&(b+=i*2);const y=-g/2,w=-b/2,S=p.rectangle(y-r,w-r-(f?r:o.members.length===0&&o.methods.length===0?-r/2:0),g+2*r,b+2*r+(f?r*2:o.members.length===0&&o.methods.length===0?-r:0),m),E=l.insert(()=>S,":first-child");E.attr("class","basic label-container");const T=E.node().getBBox();l.selectAll(".text").each((D,$,L)=>{const q=ut(L[$]),P=q.attr("transform");let A=0;if(P){const Q=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(P);Q&&(A=parseFloat(Q[2]))}let O=A+w+r-(f?r:o.members.length===0&&o.methods.length===0?-r/2:0);s||(O-=4);let F=y;(q.attr("class").includes("label-group")||q.attr("class").includes("annotation-group"))&&(F=-q.node()?.getBBox().width/2||0,l.selectAll("text").each(function(Y,Q,z){window.getComputedStyle(z[Q]).textAnchor==="middle"&&(F=0)})),q.attr("transform",`translate(${F}, ${O})`)});const C=l.select(".annotation-group").node().getBBox().height-(f?r/2:0)||0,M=l.select(".label-group").node().getBBox().height-(f?r/2:0)||0,R=l.select(".members-group").node().getBBox().height-(f?r/2:0)||0;if(o.members.length>0||o.methods.length>0||f){const D=p.line(T.x,C+M+w+r,T.x+T.width,C+M+w+r,m);l.insert(()=>D).attr("class","divider").attr("style",d)}if(f||o.members.length>0||o.methods.length>0){const D=p.line(T.x,C+M+R+w+i*2+r,T.x+T.width,C+M+R+w+r+i*2,m);l.insert(()=>D).attr("class","divider").attr("style",d)}if(o.look!=="handDrawn"&&l.selectAll("path").attr("style",d),E.select(":nth-child(2)").attr("style",d),l.selectAll(".divider").select("path").attr("style",d),e.labelStyle?l.selectAll("span").attr("style",e.labelStyle):l.selectAll("span").attr("style",d),!s){const D=RegExp(/color\s*:\s*([^;]*)/),$=D.exec(d);if($){const L=$[0].replace("color","fill");l.selectAll("tspan").attr("style",L)}else if(h){const L=D.exec(h);if(L){const q=L[0].replace("color","fill");l.selectAll("tspan").attr("style",q)}}}return Le(e,E),e.intersect=function(D){return $e.rect(e,D)},l}v(dA,"classBox");async function fA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const i=e,s=e,o=20,l=20,c="verifyMethod"in e,h=qe(e),u=t.insert("g").attr("class",h).attr("id",e.domId??e.id);let d;c?d=await pi(u,`&lt;&lt;${i.type}&gt;&gt;`,0,e.labelStyle):d=await pi(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let f=d;const p=await pi(u,i.name,f,e.labelStyle+"; font-weight: bold;");if(f+=p+l,c){const C=await pi(u,`${i.requirementId?`ID: ${i.requirementId}`:""}`,f,e.labelStyle);f+=C;const M=await pi(u,`${i.text?`Text: ${i.text}`:""}`,f,e.labelStyle);f+=M;const R=await pi(u,`${i.risk?`Risk: ${i.risk}`:""}`,f,e.labelStyle);f+=R,await pi(u,`${i.verifyMethod?`Verification: ${i.verifyMethod}`:""}`,f,e.labelStyle)}else{const C=await pi(u,`${s.type?`Type: ${s.type}`:""}`,f,e.labelStyle);f+=C,await pi(u,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,f,e.labelStyle)}const m=(u.node()?.getBBox().width??200)+o,g=(u.node()?.getBBox().height??200)+o,b=-m/2,y=-g/2,w=Ae.svg(u),S=Ie(e,{});e.look!=="handDrawn"&&(S.roughness=0,S.fillStyle="solid");const E=w.rectangle(b,y,m,g,S),T=u.insert(()=>E,":first-child");if(T.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((C,M,R)=>{const D=ut(R[M]),$=D.attr("transform");let L=0,q=0;if($){const F=RegExp(/translate\(([^,]+),([^)]+)\)/).exec($);F&&(L=parseFloat(F[1]),q=parseFloat(F[2]))}const P=q-g/2;let A=b+o/2;(M===0||M===1)&&(A=L),D.attr("transform",`translate(${A}, ${P+o})`)}),f>d+p+l){const C=w.line(b,y+d+p+l,b+m,y+d+p+l,S);u.insert(()=>C).attr("style",r)}return Le(e,T),e.intersect=function(C){return $e.rect(e,C)},u}v(fA,"requirementBox");async function pi(t,e,n,r=""){if(e==="")return 0;const i=t.insert("g").attr("class","label").attr("style",r),s=wt(),o=s.htmlLabels??!0,l=await Xa(i,Nb(Js(e)),{width:pa(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:r},s);let c;if(o){const h=l.children[0],u=ut(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}else{const h=l.children[0];for(const u of h.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&u.setAttribute("style",r);c=l.getBBox(),c.height+=6}return i.attr("transform",`translate(${-c.width/2},${-c.height/2+n})`),c.height}v(pi,"addText");var Vte=v(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function pA(t,e,{config:n}){const{labelStyles:r,nodeStyles:i}=Me(e);e.labelStyle=r||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:l,bbox:c,label:h}=await Ve(t,e,qe(e)),u=e.padding||10;let d="",f;"ticket"in e&&e.ticket&&n?.kanban?.ticketBaseUrl&&(d=n?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),f=l.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const p={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let m,g;f?{label:m,bbox:g}=await yp(f,"ticket"in e&&e.ticket||"",p):{label:m,bbox:g}=await yp(l,"ticket"in e&&e.ticket||"",p);const{label:b,bbox:y}=await yp(l,"assigned"in e&&e.assigned||"",p);e.width=o;const w=10,S=e?.width||0,E=Math.max(g.height,y.height)/2,T=Math.max(c.height+w*2,e?.height||0)+E,C=-S/2,M=-T/2;h.attr("transform","translate("+(u-S/2)+", "+(-E-c.height/2)+")"),m.attr("transform","translate("+(u-S/2)+", "+(-E+c.height/2)+")"),b.attr("transform","translate("+(u+S/2-y.width-2*s)+", "+(-E+c.height/2)+")");let R;const{rx:D,ry:$}=e,{cssStyles:L}=e;if(e.look==="handDrawn"){const q=Ae.svg(l),P=Ie(e,{}),A=D||$?q.path(Ja(C,M,S,T,D||0),P):q.rectangle(C,M,S,T,P);R=l.insert(()=>A,":first-child"),R.attr("class","basic label-container").attr("style",L||null)}else{R=l.insert("rect",":first-child"),R.attr("class","basic label-container __APA__").attr("style",i).attr("rx",D??5).attr("ry",$??5).attr("x",C).attr("y",M).attr("width",S).attr("height",T);const q="priority"in e&&e.priority;if(q){const P=l.append("line"),A=C+2,O=M+Math.floor((D??0)/2),F=M+T-Math.floor((D??0)/2);P.attr("x1",A).attr("y1",O).attr("x2",A).attr("y2",F).attr("stroke-width","4").attr("stroke",Vte(q))}}return Le(e,R),e.height=T,e.intersect=function(q){return $e.rect(e,q)},l}v(pA,"kanbanItem");async function mA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:l}=await Ve(t,e,qe(e)),c=s.width+10*o,h=s.height+8*o,u=.15*c,{cssStyles:d}=e,f=s.width+20,p=s.height+20,m=Math.max(c,f),g=Math.max(h,p);l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let b;const y=`M0 0 
    a${u},${u} 1 0,0 ${m*.25},${-1*g*.1}
    a${u},${u} 1 0,0 ${m*.25},0
    a${u},${u} 1 0,0 ${m*.25},0
    a${u},${u} 1 0,0 ${m*.25},${g*.1}

    a${u},${u} 1 0,0 ${m*.15},${g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${g*.34}
    a${u},${u} 1 0,0 ${-1*m*.15},${g*.33}

    a${u},${u} 1 0,0 ${-1*m*.25},${g*.15}
    a${u},${u} 1 0,0 ${-1*m*.25},0
    a${u},${u} 1 0,0 ${-1*m*.25},0
    a${u},${u} 1 0,0 ${-1*m*.25},${-1*g*.15}

    a${u},${u} 1 0,0 ${-1*m*.1},${-1*g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${-1*g*.34}
    a${u},${u} 1 0,0 ${m*.1},${-1*g*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const w=Ae.svg(i),S=Ie(e,{}),E=w.path(y,S);b=i.insert(()=>E,":first-child"),b.attr("class","basic label-container").attr("style",In(d))}else b=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",y);return b.attr("transform",`translate(${-m/2}, ${-g/2})`),Le(e,b),e.calcIntersect=function(w,S){return $e.rect(w,S)},e.intersect=function(w){return ce.info("Bang intersect",e,w),$e.rect(e,w)},i}v(mA,"bang");async function gA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:l}=await Ve(t,e,qe(e)),c=s.width+2*o,h=s.height+2*o,u=.15*c,d=.25*c,f=.35*c,p=.2*c,{cssStyles:m}=e;let g;const b=`M0 0 
    a${u},${u} 0 0,1 ${c*.25},${-1*c*.1}
    a${f},${f} 1 0,1 ${c*.4},${-1*c*.1}
    a${d},${d} 1 0,1 ${c*.35},${c*.2}

    a${u},${u} 1 0,1 ${c*.15},${h*.35}
    a${p},${p} 1 0,1 ${-1*c*.15},${h*.65}

    a${d},${u} 1 0,1 ${-1*c*.25},${c*.15}
    a${f},${f} 1 0,1 ${-1*c*.5},0
    a${u},${u} 1 0,1 ${-1*c*.25},${-1*c*.15}

    a${u},${u} 1 0,1 ${-1*c*.1},${-1*h*.35}
    a${p},${p} 1 0,1 ${c*.1},${-1*h*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const y=Ae.svg(i),w=Ie(e,{}),S=y.path(b,w);g=i.insert(()=>S,":first-child"),g.attr("class","basic label-container").attr("style",In(m))}else g=i.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",b);return l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),g.attr("transform",`translate(${-c/2}, ${-h/2})`),Le(e,g),e.calcIntersect=function(y,w){return $e.rect(y,w)},e.intersect=function(y){return ce.info("Cloud intersect",e,y),$e.rect(e,y)},i}v(gA,"cloud");async function bA(t,e){const{labelStyles:n,nodeStyles:r}=Me(e);e.labelStyle=n;const{shapeSvg:i,bbox:s,halfPadding:o,label:l}=await Ve(t,e,qe(e)),c=s.width+8*o,h=s.height+2*o,u=5,d=`
    M${-c/2} ${h/2-u}
    v${-h+2*u}
    q0,-${u} ${u},-${u}
    h${c-2*u}
    q${u},0 ${u},${u}
    v${h-2*u}
    q0,${u} -${u},${u}
    h${-c+2*u}
    q-${u},0 -${u},-${u}
    Z
  `,f=i.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",r).attr("d",d);return i.append("line").attr("class","node-line-").attr("x1",-c/2).attr("y1",h/2).attr("x2",c/2).attr("y2",h/2),l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),i.append(()=>l.node()),Le(e,f),e.calcIntersect=function(p,m){return $e.rect(p,m)},e.intersect=function(p){return $e.rect(e,p)},i}v(bA,"defaultMindmapNode");async function yA(t,e){const n={padding:e.padding??0};return Sy(t,e,n)}v(yA,"mindmapCircle");var Yte=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:X7},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:V7},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:J7},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:eA},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:x7},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:Sy},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:mA},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:gA},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:q7},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:$7},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:N7},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:R7},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:aA},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:L7},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:_7},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:rA},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:u7},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Y7},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Z7},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:K7},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:k7},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:E7},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:m7},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:g7},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:b7},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:D7},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:lA},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:S7},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:iA},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:B7},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:y7},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:w7},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:oA},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:hA},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:v7},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:sA},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:T7},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:G7},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:H7},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:F7},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:h7},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:p7},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:nA},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:tA},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:cA},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:W7},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:P7}],Gte=v(()=>{const e=[...Object.entries({state:Q7,choice:d7,note:z7,rectWithTitle:U7,labelRect:O7,iconSquare:I7,iconCircle:C7,icon:j7,iconRounded:A7,imageSquare:M7,anchor:c7,kanbanItem:pA,mindmapCircle:yA,defaultMindmapNode:bA,classBox:dA,erBox:$y,requirementBox:fA}),...Yte.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(i=>[i,n.handler]))];return Object.fromEntries(e)},"generateShapeMap"),xA=Gte();function Xte(t){return t in xA}v(Xte,"isValidShape");var qf=new Map;async function wA(t,e,n){let r,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?xA[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;n.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),i=await s(r,e,n)}else i=await s(t,e,n),r=i;return e.tooltip&&i.attr("title",e.tooltip),qf.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}v(wA,"insertNode");var vpe=v((t,e)=>{qf.set(e.id,t)},"setNodeElem"),Tpe=v(()=>{qf.clear()},"clear"),kpe=v(t=>{const e=qf.get(t.id);ce.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r},"positionNode"),Jte=v((t,e,n,r,i,s)=>{e.arrowTypeStart&&pv(t,"start",e.arrowTypeStart,n,r,i,s),e.arrowTypeEnd&&pv(t,"end",e.arrowTypeEnd,n,r,i,s)},"addEdgeMarkers"),Qte={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},pv=v((t,e,n,r,i,s,o)=>{const l=Qte[n];if(!l){ce.warn(`Unknown arrow type: ${n}`);return}const c=l.type,u=`${i}_${s}-${c}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const d=o.replace(/[^\dA-Za-z]/g,"_"),f=`${u}_${d}`;if(!document.getElementById(f)){const p=document.getElementById(u);if(p){const m=p.cloneNode(!0);m.id=f,m.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",o),l.fill&&b.setAttribute("fill",o)}),p.parentNode?.appendChild(m)}}t.attr(`marker-${e}`,`url(${r}#${f})`)}else t.attr(`marker-${e}`,`url(${r}#${u})`)},"addEdgeMarker"),zd=new Map,xn=new Map,Spe=v(()=>{zd.clear(),xn.clear()},"clear"),uu=v(t=>t?t.reduce((n,r)=>n+";"+r,""):"","getLabelStyles"),Kte=v(async(t,e)=>{let n=ln(wt().flowchart.htmlLabels);const{labelStyles:r}=Me(e);e.labelStyle=r;const i=await Xa(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0,isNode:!1});ce.info("abc82",e,e.labelType);const s=t.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",e.id);o.node().appendChild(i);let l=i.getBBox();if(n){const h=i.children[0],u=ut(i);l=h.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),zd.set(e.id,s),e.width=l.width,e.height=l.height;let c;if(e.startLabelLeft){const h=await vs(e.startLabelLeft,uu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),xn.get(e.id)||xn.set(e.id,{}),xn.get(e.id).startLeft=u,fc(c,e.startLabelLeft)}if(e.startLabelRight){const h=await vs(e.startLabelRight,uu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=u.node().appendChild(h),d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),xn.get(e.id)||xn.set(e.id,{}),xn.get(e.id).startRight=u,fc(c,e.startLabelRight)}if(e.endLabelLeft){const h=await vs(e.endLabelLeft,uu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(h),xn.get(e.id)||xn.set(e.id,{}),xn.get(e.id).endLeft=u,fc(c,e.endLabelLeft)}if(e.endLabelRight){const h=await vs(e.endLabelRight,uu(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(h),xn.get(e.id)||xn.set(e.id,{}),xn.get(e.id).endRight=u,fc(c,e.endLabelRight)}return i},"insertEdgeLabel");function fc(t,e){wt().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}v(fc,"setTerminalWidth");var Zte=v((t,e)=>{ce.debug("Moving label abc88 ",t.id,t.label,zd.get(t.id),e);let n=e.updatedPath?e.updatedPath:e.originalPath;const r=wt(),{subGraphTitleTotalMargin:i}=ny(r);if(t.label){const s=zd.get(t.id);let o=t.x,l=t.y;if(n){const c=ei.calcLabelPosition(n);ce.debug("Moving label "+t.label+" from (",o,",",l,") to (",c.x,",",c.y,") abc88"),e.updatedPath&&(o=c.x,l=c.y)}s.attr("transform",`translate(${o}, ${l+i/2})`)}if(t.startLabelLeft){const s=xn.get(t.id).startLeft;let o=t.x,l=t.y;if(n){const c=ei.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.startLabelRight){const s=xn.get(t.id).startRight;let o=t.x,l=t.y;if(n){const c=ei.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.endLabelLeft){const s=xn.get(t.id).endLeft;let o=t.x,l=t.y;if(n){const c=ei.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.endLabelRight){const s=xn.get(t.id).endRight;let o=t.x,l=t.y;if(n){const c=ei.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}},"positionEdgeLabel"),ene=v((t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),s=Math.abs(e.y-r),o=t.width/2,l=t.height/2;return i>=o||s>=l},"outsideNode"),tne=v((t,e,n)=>{ce.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,s=Math.abs(r-n.x),o=t.width/2;let l=n.x<e.x?o-s:o+s;const c=t.height/2,h=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*o>Math.abs(r-e.x)*c){let d=n.y<e.y?e.y-c-i:i-c-e.y;l=u*d/h;const f={x:n.x<e.x?n.x+l:n.x-u+l,y:n.y<e.y?n.y+h-d:n.y-h+d};return l===0&&(f.x=e.x,f.y=e.y),u===0&&(f.x=e.x),h===0&&(f.y=e.y),ce.debug(`abc89 top/bottom calc, Q ${h}, q ${d}, R ${u}, r ${l}`,f),f}else{n.x<e.x?l=e.x-o-r:l=r-o-e.x;let d=h*l/u,f=n.x<e.x?n.x+u-l:n.x-u+l,p=n.y<e.y?n.y+d:n.y-d;return ce.debug(`sides calc abc89, Q ${h}, q ${d}, R ${u}, r ${l}`,{_x:f,_y:p}),l===0&&(f=e.x,p=e.y),u===0&&(f=e.x),h===0&&(p=e.y),{x:f,y:p}}},"intersection"),mv=v((t,e)=>{ce.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(s=>{if(ce.info("abc88 checking point",s,e),!ene(e,s)&&!i){const o=tne(e,r,s);ce.debug("abc88 inside",s,r,o),ce.debug("abc88 intersection",o,e);let l=!1;n.forEach(c=>{l=l||c.x===o.x&&c.y===o.y}),n.some(c=>c.x===o.x&&c.y===o.y)?ce.warn("abc88 no intersect",o,n):n.push(o),i=!0}else ce.warn("abc88 outside",s,r),r=s,i||n.push(s)}),ce.debug("returning points",n),n},"cutPathAtIntersect");function _A(t){const e=[],n=[];for(let r=1;r<t.length-1;r++){const i=t[r-1],s=t[r],o=t[r+1];(i.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===o.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),n.push(r))}return{cornerPoints:e,cornerPointPositions:n}}v(_A,"extractCornerPoints");var gv=v(function(t,e,n){const r=e.x-t.x,i=e.y-t.y,s=Math.sqrt(r*r+i*i),o=n/s;return{x:e.x-o*r,y:e.y-o*i}},"findAdjacentPoint"),nne=v(function(t){const{cornerPointPositions:e}=_A(t),n=[];for(let r=0;r<t.length;r++)if(e.includes(r)){const i=t[r-1],s=t[r+1],o=t[r],l=gv(i,o,5),c=gv(s,o,5),h=c.x-l.x,u=c.y-l.y;n.push(l);const d=Math.sqrt(2)*2;let f={x:o.x,y:o.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){ce.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const p=5;o.x===l.x?f={x:h<0?l.x-p+d:l.x+p-d,y:u<0?l.y-d:l.y+d}:f={x:h<0?l.x-d:l.x+d,y:u<0?l.y-p+d:l.y+p-d}}else ce.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));n.push(f,c)}else n.push(t[r]);return n},"fixCorners"),rne=v((t,e,n)=>{const r=t-e-n,i=2,s=2,o=i+s,l=Math.floor(r/o),c=Array(l).fill(`${i} ${s}`).join(" ");return`0 ${e} ${c} ${n}`},"generateDashArray"),ine=v(function(t,e,n,r,i,s,o,l=!1){const{handDrawnSeed:c}=wt();let h=e.points,u=!1;const d=i;var f=s;const p=[];for(const A in e.cssCompiledStyles)Kj(A)||p.push(e.cssCompiledStyles[A]);ce.debug("UIO intersect check",e.points,f.x,d.x),f.intersect&&d.intersect&&!l&&(h=h.slice(1,e.points.length-1),h.unshift(d.intersect(h[0])),ce.debug("Last point UIO",e.start,"-->",e.end,h[h.length-1],f,f.intersect(h[h.length-1])),h.push(f.intersect(h[h.length-1])));const m=btoa(JSON.stringify(h));e.toCluster&&(ce.info("to cluster abc88",n.get(e.toCluster)),h=mv(e.points,n.get(e.toCluster).node),u=!0),e.fromCluster&&(ce.debug("from cluster abc88",n.get(e.fromCluster),JSON.stringify(h,null,2)),h=mv(h.reverse(),n.get(e.fromCluster).node).reverse(),u=!0);let g=h.filter(A=>!Number.isNaN(A.y));g=nne(g);let b=Fu;switch(b=xd,e.curve){case"linear":b=xd;break;case"basis":b=Fu;break;case"cardinal":b=n8;break;case"bumpX":b=QE;break;case"bumpY":b=KE;break;case"catmullRom":b=i8;break;case"monotoneX":b=h8;break;case"monotoneY":b=u8;break;case"natural":b=f8;break;case"step":b=p8;break;case"stepAfter":b=g8;break;case"stepBefore":b=m8;break;default:b=Fu}const{x:y,y:w}=KJ(e),S=RX().x(y).y(w).curve(b);let E;switch(e.thickness){case"normal":E="edge-thickness-normal";break;case"thick":E="edge-thickness-thick";break;case"invisible":E="edge-thickness-invisible";break;default:E="edge-thickness-normal"}switch(e.pattern){case"solid":E+=" edge-pattern-solid";break;case"dotted":E+=" edge-pattern-dotted";break;case"dashed":E+=" edge-pattern-dashed";break;default:E+=" edge-pattern-solid"}let T,C=e.curve==="rounded"?vA(TA(g,e),5):S(g);const M=Array.isArray(e.style)?e.style:[e.style];let R=M.find(A=>A?.startsWith("stroke:")),D=!1;if(e.look==="handDrawn"){const A=Ae.svg(t);Object.assign([],g);const O=A.path(C,{roughness:.3,seed:c});E+=" transition",T=ut(O).select("path").attr("id",e.id).attr("class"," "+E+(e.classes?" "+e.classes:"")).attr("style",M?M.reduce((Y,Q)=>Y+";"+Q,""):"");let F=T.attr("d");T.attr("d",F),t.node().appendChild(T.node())}else{const A=p.join(";"),O=M?M.reduce((te,N)=>te+N+";",""):"";let F="";e.animate&&(F=" edge-animation-fast"),e.animation&&(F=" edge-animation-"+e.animation);const Y=(A?A+";"+O+";":O)+";"+(M?M.reduce((te,N)=>te+";"+N,""):"");T=t.append("path").attr("d",C).attr("id",e.id).attr("class"," "+E+(e.classes?" "+e.classes:"")+(F??"")).attr("style",Y),R=Y.match(/stroke:([^;]+)/)?.[1],D=e.animate===!0||!!e.animation||A.includes("animation");const Q=T.node(),z=typeof Q.getTotalLength=="function"?Q.getTotalLength():0,j=I_[e.arrowTypeStart]||0,Z=I_[e.arrowTypeEnd]||0;if(e.look==="neo"&&!D){const N=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?rne(z,j,Z):`0 ${j} ${z-j-Z} ${Z}`}; stroke-dashoffset: 0;`;T.attr("style",N+T.attr("style"))}}T.attr("data-edge",!0),T.attr("data-et","edge"),T.attr("data-id",e.id),T.attr("data-points",m),e.showPoints&&g.forEach(A=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",A.x).attr("cy",A.y)});let $="";(wt().flowchart.arrowMarkerAbsolute||wt().state.arrowMarkerAbsolute)&&($=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$=$.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),ce.info("arrowTypeStart",e.arrowTypeStart),ce.info("arrowTypeEnd",e.arrowTypeEnd),Jte(T,e,$,o,r,R);const L=Math.floor(h.length/2),q=h[L];ei.isLabelCoordinateInPath(q,T.attr("d"))||(u=!0);let P={};return u&&(P.updatedPath=h),P.originalPath=e.points,P},"insertEdge");function vA(t,e){if(t.length<2)return"";let n="";const r=t.length,i=1e-5;for(let s=0;s<r;s++){const o=t[s],l=t[s-1],c=t[s+1];if(s===0)n+=`M${o.x},${o.y}`;else if(s===r-1)n+=`L${o.x},${o.y}`;else{const h=o.x-l.x,u=o.y-l.y,d=c.x-o.x,f=c.y-o.y,p=Math.hypot(h,u),m=Math.hypot(d,f);if(p<i||m<i){n+=`L${o.x},${o.y}`;continue}const g=h/p,b=u/p,y=d/m,w=f/m,S=g*y+b*w,E=Math.max(-1,Math.min(1,S)),T=Math.acos(E);if(T<i||Math.abs(Math.PI-T)<i){n+=`L${o.x},${o.y}`;continue}const C=Math.min(e/Math.sin(T/2),p/2,m/2),M=o.x-g*C,R=o.y-b*C,D=o.x+y*C,$=o.y+w*C;n+=`L${M},${R}`,n+=`Q${o.x},${o.y} ${D},${$}`}}return n}v(vA,"generateRoundedPath");function d1(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const n=e.x-t.x,r=e.y-t.y;return{angle:Math.atan2(r,n),deltaX:n,deltaY:r}}v(d1,"calculateDeltaAndAngle");function TA(t,e){const n=t.map(i=>({...i}));if(t.length>=2&&Sn[e.arrowTypeStart]){const i=Sn[e.arrowTypeStart],s=t[0],o=t[1],{angle:l}=d1(s,o),c=i*Math.cos(l),h=i*Math.sin(l);n[0].x=s.x+c,n[0].y=s.y+h}const r=t.length;if(r>=2&&Sn[e.arrowTypeEnd]){const i=Sn[e.arrowTypeEnd],s=t[r-1],o=t[r-2],{angle:l}=d1(o,s),c=i*Math.cos(l),h=i*Math.sin(l);n[r-1].x=s.x-c,n[r-1].y=s.y-h}return n}v(TA,"applyMarkerOffsetsToPoints");var ane=v((t,e,n,r)=>{e.forEach(i=>{_ne[i](t,n,r)})},"insertMarkers"),sne=v((t,e,n)=>{ce.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),one=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),lne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),cne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),hne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),une=v((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),dne=v((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),fne=v((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),pne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),mne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),gne=v((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),bne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),yne=v((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),xne=v((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),wne=v((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),_ne={extension:sne,composition:one,aggregation:lne,dependency:cne,lollipop:hne,point:une,circle:dne,cross:fne,barb:pne,only_one:mne,zero_or_one:gne,one_or_more:bne,zero_or_more:yne,requirement_arrow:xne,requirement_contains:wne},vne=ane,Tne={common:ol,getConfig:Cn,insertCluster:Ite,insertEdge:ine,insertEdgeLabel:Kte,insertMarkers:vne,insertNode:wA,interpolateToCurve:oy,labelHelper:Ve,log:ce,positionEdgeLabel:Zte},rh={},kA=v(t=>{for(const e of t)rh[e.name]=e},"registerLayoutLoaders"),kne=v(()=>{kA([{name:"dagre",loader:v(async()=>await _e(()=>import("./chunk-1JC7-8RG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])),"loader")},{name:"cose-bilkent",loader:v(async()=>await _e(()=>import("./chunk-Bpk_WgsH.js"),__vite__mapDeps([17,18,7,6,8,9,10,11,12,13,14,15,16])),"loader")}])},"registerDefaultLayoutLoaders");kne();var $pe=v(async(t,e)=>{if(!(t.layoutAlgorithm in rh))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const n=rh[t.layoutAlgorithm];return(await n.loader()).render(t,e,Tne,{algorithm:n.algorithm})},"render"),Epe=v((t="",{fallback:e="dagre"}={})=>{if(t in rh)return t;if(e in rh)return ce.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),SA="comm",$A="rule",EA="decl",Sne="@import",$ne="@namespace",Ene="@keyframes",jne="@layer",jA=Math.abs,Ey=String.fromCharCode;function CA(t){return t.trim()}function Uu(t,e,n){return t.replace(e,n)}function Cne(t,e,n){return t.indexOf(e,n)}function vo(t,e){return t.charCodeAt(e)|0}function Wo(t,e,n){return t.slice(e,n)}function yi(t){return t.length}function Ane(t){return t.length}function du(t,e){return e.push(t),t}var Wf=1,Uo=1,AA=0,Pr=0,Kt=0,dl="";function jy(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Wf,column:Uo,length:o,return:"",siblings:l}}function Ine(){return Kt}function Mne(){return Kt=Pr>0?vo(dl,--Pr):0,Uo--,Kt===10&&(Uo=1,Wf--),Kt}function ri(){return Kt=Pr<AA?vo(dl,Pr++):0,Uo++,Kt===10&&(Uo=1,Wf++),Kt}function La(){return vo(dl,Pr)}function Vu(){return Pr}function Uf(t,e){return Wo(dl,t,e)}function ih(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Lne(t){return Wf=Uo=1,AA=yi(dl=t),Pr=0,[]}function One(t){return dl="",t}function xp(t){return CA(Uf(Pr-1,f1(t===91?t+2:t===40?t+1:t)))}function Rne(t){for(;(Kt=La())&&Kt<33;)ri();return ih(t)>2||ih(Kt)>3?"":" "}function Nne(t,e){for(;--e&&ri()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return Uf(t,Vu()+(e<6&&La()==32&&ri()==32))}function f1(t){for(;ri();)switch(Kt){case t:return Pr;case 34:case 39:t!==34&&t!==39&&f1(Kt);break;case 40:t===41&&f1(t);break;case 92:ri();break}return Pr}function Dne(t,e){for(;ri()&&t+Kt!==57;)if(t+Kt===84&&La()===47)break;return"/*"+Uf(e,Pr-1)+"*"+Ey(t===47?t:ri())}function Bne(t){for(;!ih(La());)ri();return Uf(t,Pr)}function Pne(t){return One(Yu("",null,null,null,[""],t=Lne(t),0,[0],t))}function Yu(t,e,n,r,i,s,o,l,c){for(var h=0,u=0,d=o,f=0,p=0,m=0,g=1,b=1,y=1,w=0,S="",E=i,T=s,C=r,M=S;b;)switch(m=w,w=ri()){case 40:if(m!=108&&vo(M,d-1)==58){Cne(M+=Uu(xp(w),"&","&\f"),"&\f",jA(h?l[h-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:M+=xp(w);break;case 9:case 10:case 13:case 32:M+=Rne(m);break;case 92:M+=Nne(Vu()-1,7);continue;case 47:switch(La()){case 42:case 47:du(Fne(Dne(ri(),Vu()),e,n,c),c),(ih(m||1)==5||ih(La()||1)==5)&&yi(M)&&Wo(M,-1,void 0)!==" "&&(M+=" ");break;default:M+="/"}break;case 123*g:l[h++]=yi(M)*y;case 125*g:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+u:y==-1&&(M=Uu(M,/\f/g,"")),p>0&&(yi(M)-d||g===0&&m===47)&&du(p>32?yv(M+";",r,n,d-1,c):yv(Uu(M," ","")+";",r,n,d-2,c),c);break;case 59:M+=";";default:if(du(C=bv(M,e,n,h,u,i,l,S,E=[],T=[],d,s),s),w===123)if(u===0)Yu(M,e,C,C,E,s,d,l,T);else{switch(f){case 99:if(vo(M,3)===110)break;case 108:if(vo(M,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Yu(t,C,C,r&&du(bv(t,C,C,0,0,i,l,S,i,E=[],d,T),T),i,T,d,l,r?E:T):Yu(M,C,C,C,[""],T,0,l,T)}}h=u=p=0,g=y=1,S=M="",d=o;break;case 58:d=1+yi(M),p=m;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&Mne()==125)continue}switch(M+=Ey(w),w*g){case 38:y=u>0?1:(M+="\f",-1);break;case 44:l[h++]=(yi(M)-1)*y,y=1;break;case 64:La()===45&&(M+=xp(ri())),f=La(),u=d=yi(S=M+=Bne(Vu())),w++;break;case 45:m===45&&yi(M)==2&&(g=0)}}return s}function bv(t,e,n,r,i,s,o,l,c,h,u,d){for(var f=i-1,p=i===0?s:[""],m=Ane(p),g=0,b=0,y=0;g<r;++g)for(var w=0,S=Wo(t,f+1,f=jA(b=o[g])),E=t;w<m;++w)(E=CA(b>0?p[w]+" "+S:Uu(S,/&\f/g,p[w])))&&(c[y++]=E);return jy(t,e,n,i===0?$A:l,c,h,u,d)}function Fne(t,e,n,r){return jy(t,e,n,SA,Ey(Ine()),Wo(t,2,-2),0,r)}function yv(t,e,n,r,i){return jy(t,e,n,EA,Wo(t,0,r),Wo(t,r+1,-1),r,i)}function p1(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Hne(t,e,n,r){switch(t.type){case jne:if(t.children.length)break;case Sne:case $ne:case EA:return t.return=t.return||t.value;case SA:return"";case Ene:return t.return=t.value+"{"+p1(t.children,r)+"}";case $A:if(!yi(t.value=t.props.join(",")))return""}return yi(n=p1(t.children,r))?t.return=t.value+"{"+n+"}":""}var zne=nC(Object.keys,Object),qne=Object.prototype,Wne=qne.hasOwnProperty;function Une(t){if(!Of(t))return zne(t);var e=[];for(var n in Object(t))Wne.call(t,n)&&n!="constructor"&&e.push(n);return e}var m1=Xs(Ni,"DataView"),g1=Xs(Ni,"Promise"),b1=Xs(Ni,"Set"),y1=Xs(Ni,"WeakMap"),xv="[object Map]",Vne="[object Object]",wv="[object Promise]",_v="[object Set]",vv="[object WeakMap]",Tv="[object DataView]",Yne=Gs(m1),Gne=Gs(th),Xne=Gs(g1),Jne=Gs(b1),Qne=Gs(y1),ms=cl;(m1&&ms(new m1(new ArrayBuffer(1)))!=Tv||th&&ms(new th)!=xv||g1&&ms(g1.resolve())!=wv||b1&&ms(new b1)!=_v||y1&&ms(new y1)!=vv)&&(ms=function(t){var e=cl(t),n=e==Vne?t.constructor:void 0,r=n?Gs(n):"";if(r)switch(r){case Yne:return Tv;case Gne:return xv;case Xne:return wv;case Jne:return _v;case Qne:return vv}return e});var Kne="[object Map]",Zne="[object Set]",ere=Object.prototype,tre=ere.hasOwnProperty;function kv(t){if(t==null)return!0;if(Rf(t)&&(Md(t)||typeof t=="string"||typeof t.splice=="function"||ay(t)||sy(t)||Id(t)))return!t.length;var e=ms(t);if(e==Kne||e==Zne)return!t.size;if(Of(t))return!Une(t).length;for(var n in t)if(tre.call(t,n))return!1;return!0}var IA="c4",nre=v(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),rre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-_f-aslPo.js");return{diagram:e}},__vite__mapDeps([19,20,6,7,8,9,10,11,12,13,14,15,16]));return{id:IA,diagram:t}},"loader"),ire={id:IA,detector:nre,loader:rre},are=ire,MA="flowchart",sre=v((t,e)=>e?.flowchart?.defaultRenderer==="dagre-wrapper"||e?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(t),"detector"),ore=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C4sJPX9E.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,6,7,8,9,10,11,12,13,14,15,16]));return{id:MA,diagram:t}},"loader"),lre={id:MA,detector:sre,loader:ore},cre=lre,LA="flowchart-v2",hre=v((t,e)=>e?.flowchart?.defaultRenderer==="dagre-d3"?!1:(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&e?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)),"detector"),ure=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C4sJPX9E.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,6,7,8,9,10,11,12,13,14,15,16]));return{id:LA,diagram:t}},"loader"),dre={id:LA,detector:hre,loader:ure},fre=dre,OA="er",pre=v(t=>/^\s*erDiagram/.test(t),"detector"),mre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-Bs3d038s.js");return{diagram:e}},__vite__mapDeps([26,23,24,25,6,7,8,9,10,11,12,13,14,15,16]));return{id:OA,diagram:t}},"loader"),gre={id:OA,detector:pre,loader:mre},bre=gre,RA="gitGraph",yre=v(t=>/^\s*gitGraph/.test(t),"detector"),xre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-iBYTZb0G.js");return{diagram:e}},__vite__mapDeps([27,28,29,30,6,2,4,5,7,8,9,10,11,12,13,14,15,16]));return{id:RA,diagram:t}},"loader"),wre={id:RA,detector:yre,loader:xre},_re=wre,NA="gantt",vre=v(t=>/^\s*gantt/.test(t),"detector"),Tre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-BpTcU1pF.js");return{diagram:e}},__vite__mapDeps([31,7,6,8,9,32,33,34,10,11,12,13,14,15,16]));return{id:NA,diagram:t}},"loader"),kre={id:NA,detector:vre,loader:Tre},Sre=kre,DA="info",$re=v(t=>/^\s*info/.test(t),"detector"),Ere=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-CpErNxpt.js");return{diagram:e}},__vite__mapDeps([35,30,6,2,4,5,7,8,9,10,11,12,13,14,15,16]));return{id:DA,diagram:t}},"loader"),jre={id:DA,detector:$re,loader:Ere},BA="pie",Cre=v(t=>/^\s*pie/.test(t),"detector"),Are=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C5eOQHK6.js");return{diagram:e}},__vite__mapDeps([36,28,30,6,2,4,5,37,38,33,7,8,9,10,11,12,13,14,15,16]));return{id:BA,diagram:t}},"loader"),Ire={id:BA,detector:Cre,loader:Are},PA="quadrantChart",Mre=v(t=>/^\s*quadrantChart/.test(t),"detector"),Lre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-CmnaR33h.js");return{diagram:e}},__vite__mapDeps([39,32,33,34,6,7,8,9,10,11,12,13,14,15,16]));return{id:PA,diagram:t}},"loader"),Ore={id:PA,detector:Mre,loader:Lre},Rre=Ore,FA="xychart",Nre=v(t=>/^\s*xychart(-beta)?/.test(t),"detector"),Dre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C6fODcKj.js");return{diagram:e}},__vite__mapDeps([40,33,38,32,34,6,7,8,9,10,11,12,13,14,15,16]));return{id:FA,diagram:t}},"loader"),Bre={id:FA,detector:Nre,loader:Dre},Pre=Bre,HA="requirement",Fre=v(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),Hre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-DvlzKqmF.js");return{diagram:e}},__vite__mapDeps([41,23,24,6,7,8,9,10,11,12,13,14,15,16]));return{id:HA,diagram:t}},"loader"),zre={id:HA,detector:Fre,loader:Hre},qre=zre,zA="sequence",Wre=v(t=>/^\s*sequenceDiagram/.test(t),"detector"),Ure=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-Bd49BL82.js");return{diagram:e}},__vite__mapDeps([42,20,29,6,7,8,9,10,11,12,13,14,15,16]));return{id:zA,diagram:t}},"loader"),Vre={id:zA,detector:Wre,loader:Ure},Yre=Vre,qA="class",Gre=v((t,e)=>e?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t),"detector"),Xre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-SgGOPmN5.js");return{diagram:e}},__vite__mapDeps([43,44,22,23,24,6,7,8,9,10,11,12,13,14,15,16]));return{id:qA,diagram:t}},"loader"),Jre={id:qA,detector:Gre,loader:Xre},Qre=Jre,WA="classDiagram",Kre=v((t,e)=>/^\s*classDiagram/.test(t)&&e?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t),"detector"),Zre=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-BkW7NOHs.js");return{diagram:e}},__vite__mapDeps([45,44,22,23,24,6,7,8,9,10,11,12,13,14,15,16]));return{id:WA,diagram:t}},"loader"),eie={id:WA,detector:Kre,loader:Zre},tie=eie,UA="state",nie=v((t,e)=>e?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t),"detector"),rie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-CRiHmH_C.js");return{diagram:e}},__vite__mapDeps([46,47,23,24,1,2,3,4,6,7,8,9,10,11,12,13,14,15,16]));return{id:UA,diagram:t}},"loader"),iie={id:UA,detector:nie,loader:rie},aie=iie,VA="stateDiagram",sie=v((t,e)=>!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&e?.state?.defaultRenderer==="dagre-wrapper"),"detector"),oie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-DGWV7rhA.js");return{diagram:e}},__vite__mapDeps([48,47,23,24,6,7,8,9,10,11,12,13,14,15,16]));return{id:VA,diagram:t}},"loader"),lie={id:VA,detector:sie,loader:oie},cie=lie,YA="journey",hie=v(t=>/^\s*journey/.test(t),"detector"),uie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-DE4FKZMj.js");return{diagram:e}},__vite__mapDeps([49,20,22,37,6,7,8,9,10,11,12,13,14,15,16]));return{id:YA,diagram:t}},"loader"),die={id:YA,detector:hie,loader:uie},fie=die,pie=v((t,e,n)=>{ce.debug(`rendering svg for syntax error
`);const r=WX(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),wE(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),GA={draw:pie},mie=GA,gie={db:{},renderer:GA,parser:{parse:v(()=>{},"parse")}},bie=gie,XA="flowchart-elk",yie=v((t,e={})=>/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&e?.flowchart?.defaultRenderer==="elk"?(e.layout="elk",!0):!1,"detector"),xie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C4sJPX9E.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,6,7,8,9,10,11,12,13,14,15,16]));return{id:XA,diagram:t}},"loader"),wie={id:XA,detector:yie,loader:xie},_ie=wie,JA="timeline",vie=v(t=>/^\s*timeline/.test(t),"detector"),Tie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-aXxrl2LL.js");return{diagram:e}},__vite__mapDeps([50,37,6,7,8,9,10,11,12,13,14,15,16]));return{id:JA,diagram:t}},"loader"),kie={id:JA,detector:vie,loader:Tie},Sie=kie,QA="mindmap",$ie=v(t=>/^\s*mindmap/.test(t),"detector"),Eie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-CK4IewAe.js");return{diagram:e}},__vite__mapDeps([51,23,24,6,7,8,9,10,11,12,13,14,15,16]));return{id:QA,diagram:t}},"loader"),jie={id:QA,detector:$ie,loader:Eie},Cie=jie,KA="kanban",Aie=v(t=>/^\s*kanban/.test(t),"detector"),Iie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-BKDU_ryc.js");return{diagram:e}},__vite__mapDeps([52,22,6,7,8,9,10,11,12,13,14,15,16]));return{id:KA,diagram:t}},"loader"),Mie={id:KA,detector:Aie,loader:Iie},Lie=Mie,ZA="sankey",Oie=v(t=>/^\s*sankey(-beta)?/.test(t),"detector"),Rie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-D9mQh3rb.js");return{diagram:e}},__vite__mapDeps([53,38,33,6,7,8,9,10,11,12,13,14,15,16]));return{id:ZA,diagram:t}},"loader"),Nie={id:ZA,detector:Oie,loader:Rie},Die=Nie,e9="packet",Bie=v(t=>/^\s*packet(-beta)?/.test(t),"detector"),Pie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-B8pSuyCx.js");return{diagram:e}},__vite__mapDeps([54,28,30,6,2,4,5,7,8,9,10,11,12,13,14,15,16]));return{id:e9,diagram:t}},"loader"),Fie={id:e9,detector:Bie,loader:Pie},t9="radar",Hie=v(t=>/^\s*radar-beta/.test(t),"detector"),zie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-B_omfYVU.js");return{diagram:e}},__vite__mapDeps([55,28,30,6,2,4,5,7,8,9,10,11,12,13,14,15,16]));return{id:t9,diagram:t}},"loader"),qie={id:t9,detector:Hie,loader:zie},n9="block",Wie=v(t=>/^\s*block(-beta)?/.test(t),"detector"),Uie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-C83F2Yvr.js");return{diagram:e}},__vite__mapDeps([56,22,5,2,1,25,6,7,8,9,10,11,12,13,14,15,16]));return{id:n9,diagram:t}},"loader"),Vie={id:n9,detector:Wie,loader:Uie},Yie=Vie,r9="architecture",Gie=v(t=>/^\s*architecture/.test(t),"detector"),Xie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-DPkHeS2n.js");return{diagram:e}},__vite__mapDeps([57,28,30,6,2,4,5,18,7,8,9,10,11,12,13,14,15,16]));return{id:r9,diagram:t}},"loader"),Jie={id:r9,detector:Gie,loader:Xie},Qie=Jie,i9="treemap",Kie=v(t=>/^\s*treemap/.test(t),"detector"),Zie=v(async()=>{const{diagram:t}=await _e(async()=>{const{diagram:e}=await import("./chunk-DiQqdTSC.js");return{diagram:e}},__vite__mapDeps([58,24,28,30,6,2,4,5,34,38,33,7,8,9,10,11,12,13,14,15,16]));return{id:i9,diagram:t}},"loader"),eae={id:i9,detector:Kie,loader:Zie},Sv=!1,Vf=v(()=>{Sv||(Sv=!0,dd("error",bie,t=>t.toLowerCase().trim()==="error"),dd("---",{db:{clear:v(()=>{},"clear")},styles:{},renderer:{draw:v(()=>{},"draw")},parser:{parse:v(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:v(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),Sg(_ie,Cie,Qie),Sg(are,Lie,tie,Qre,bre,Sre,jre,Ire,qre,Yre,fre,cre,Sie,_re,cie,aie,fie,Rre,Die,Fie,Pre,Yie,qie,eae))},"addDiagrams"),tae=v(async()=>{ce.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(Ms).map(async([n,{detector:r,loader:i}])=>{if(i)try{Cg(n)}catch{try{const{diagram:s,id:o}=await i();dd(o,s,r)}catch(s){throw ce.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete Ms[n],s}}}))).filter(n=>n.status==="rejected");if(e.length>0){ce.error(`Failed to load ${e.length} external diagrams`);for(const n of e)ce.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),nae="graphics-document document";function a9(t,e){t.attr("role",nae),e!==""&&t.attr("aria-roledescription",e)}v(a9,"setA11yDiagramInfo");function s9(t,e,n,r){if(t.insert!==void 0){if(n){const i=`chart-desc-${r}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(n)}if(e){const i=`chart-title-${r}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}v(s9,"addSVGa11yTitleDescription");var As,x1=(As=class{constructor(e,n,r,i,s){this.type=e,this.text=n,this.db=r,this.parser=i,this.renderer=s}static async fromText(e,n={}){const r=Cn(),i=Ab(e,r);e=JZ(e)+`
`;try{Cg(i)}catch{const h=wU(i);if(!h)throw new lE(`Diagram ${i} not found.`);const{id:u,diagram:d}=await h();dd(u,d)}const{db:s,parser:o,renderer:l,init:c}=Cg(i);return o.parser&&(o.parser.yy=s),s.clear?.(),c?.(r),n.title&&s.setDiagramTitle?.(n.title),await o.parse(e),new As(i,e,s,o,l)}async render(e,n){await this.renderer.draw(this.text,e,n,this)}getParser(){return this.parser}getType(){return this.type}},v(As,"Diagram"),As),$v=[],rae=v(()=>{$v.forEach(t=>{t()}),$v=[]},"attachFunctions"),iae=v(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function o9(t){const e=t.match(oE);if(!e)return{text:t,metadata:{}};let n=QJ(e[1],{schema:JJ})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:t.slice(e[0].length),metadata:r}}v(o9,"extractFrontMatter");var aae=v(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,n,r)=>"<"+n+r.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),sae=v(t=>{const{text:e,metadata:n}=o9(t),{displayMode:r,title:i,config:s={}}=n;return r&&(s.gantt||(s.gantt={}),s.gantt.displayMode=r),{title:i,config:s,text:e}},"processFrontmatter"),oae=v(t=>{const e=ei.detectInit(t)??{},n=ei.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some(({type:r})=>r==="wrap"):n?.type==="wrap"&&(e.wrap=!0),{text:DZ(t),directive:e}},"processDirectives");function Cy(t){const e=aae(t),n=sae(e),r=oae(n.text),i=dy(n.config,r.directive);return t=iae(r.text),{code:t,title:n.title,config:i}}v(Cy,"preprocessDiagram");function l9(t){const e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCodePoint(r)).join("");return btoa(n)}v(l9,"toBase64");var lae=5e4,cae="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",hae="sandbox",uae="loose",dae="http://www.w3.org/2000/svg",fae="http://www.w3.org/1999/xlink",pae="http://www.w3.org/1999/xhtml",mae="100%",gae="100%",bae="border:0;margin:0;",yae="margin:0",xae="allow-top-navigation-by-user-activation allow-popups",wae='The "iframe" tag is not supported by your browser.',_ae=["foreignobject"],vae=["dominant-baseline"];function Ay(t){const e=Cy(t);return hd(),NU(e.config??{}),e}v(Ay,"processAndSetConfigs");async function c9(t,e){Vf();try{const{code:n,config:r}=Ay(t);return{diagramType:(await u9(n)).type,config:r}}catch(n){if(e?.suppressErrors)return!1;throw n}}v(c9,"parse");var Ev=v((t,e,n=[])=>`
.${t} ${e} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),Tae=v((t,e=new Map)=>{let n="";if(t.themeCSS!==void 0&&(n+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const o=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{kv(l.styles)||o.forEach(c=>{n+=Ev(l.id,c,l.styles)}),kv(l.textStyles)||(n+=Ev(l.id,"tspan",(l?.textStyles||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),kae=v((t,e,n,r)=>{const i=Tae(t,n),s=nV(e,i,t.themeVariables);return p1(Pne(`${r}{${s}}`),Hne)},"createUserStyles"),Sae=v((t="",e,n)=>{let r=t;return!n&&!e&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=Js(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),$ae=v((t="",e)=>{const n=e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":gae,r=l9(`<body style="${yae}">${t}</body>`);return`<iframe style="width:${mae};height:${n};${bae}" src="data:text/html;charset=UTF-8;base64,${r}" sandbox="${xae}">
  ${wae}
</iframe>`},"putIntoIFrame"),jv=v((t,e,n,r,i)=>{const s=t.append("div");s.attr("id",n),r&&s.attr("style",r);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",dae);return i&&o.attr("xmlns:xlink",i),o.append("g"),t},"appendDivSvgG");function w1(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}v(w1,"sandboxedIframe");var Eae=v((t,e,n,r)=>{t.getElementById(e)?.remove(),t.getElementById(n)?.remove(),t.getElementById(r)?.remove()},"removeExistingElements"),jae=v(async function(t,e,n){Vf();const r=Ay(e);e=r.code;const i=Cn();ce.debug(i),e.length>(i?.maxTextSize??lae)&&(e=cae);const s="#"+t,o="i"+t,l="#"+o,c="d"+t,h="#"+c,u=v(()=>{const P=ut(f?l:h).node();P&&"remove"in P&&P.remove()},"removeTempElements");let d=ut("body");const f=i.securityLevel===hae,p=i.securityLevel===uae,m=i.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),f){const q=w1(ut(n),o);d=ut(q.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=ut(n);jv(d,t,c,`font-family: ${m}`,fae)}else{if(Eae(document,t,c,o),f){const q=w1(ut("body"),o);d=ut(q.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=ut("body");jv(d,t,c)}let g,b;try{g=await x1.fromText(e,{title:r.title})}catch(q){if(i.suppressErrorRendering)throw u(),q;g=await x1.fromText("error"),b=q}const y=d.select(h).node(),w=g.type,S=y.firstChild,E=S.firstChild,T=g.renderer.getClasses?.(e,g),C=kae(i,w,T,s),M=document.createElement("style");M.innerHTML=C,S.insertBefore(M,E);try{await g.renderer.draw(e,t,Uw.version,g)}catch(q){throw i.suppressErrorRendering?u():mie.draw(e,t,Uw.version),q}const R=d.select(`${h} svg`),D=g.db.getAccTitle?.(),$=g.db.getAccDescription?.();d9(w,R,D,$),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",pae);let L=d.select(h).node().innerHTML;if(ce.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),L=Sae(L,f,ln(i.arrowMarkerAbsolute)),f){const q=d.select(h+" svg").node();L=$ae(L,q)}else p||(L=Do.sanitize(L,{ADD_TAGS:_ae,ADD_ATTR:vae,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(rae(),b)throw b;return u(),{diagramType:w,svg:L,bindFunctions:g.db.bindFunctions}},"render");function h9(t={}){const e=rn({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),OU(e),e?.theme&&e.theme in la?e.themeVariables=la[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=la.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?LU(e):fE();Cb(n.logLevel),Vf()}v(h9,"initialize");var u9=v((t,e={})=>{const{code:n}=Cy(t);return x1.fromText(n,e)},"getDiagramFromText");function d9(t,e,n,r){a9(e,t),s9(e,n,r,e.attr("id"))}v(d9,"addA11yInfo");var Bs=Object.freeze({render:jae,parse:c9,getDiagramFromText:u9,initialize:h9,getConfig:Cn,setConfig:pE,getSiteConfig:fE,updateSiteConfig:RU,reset:v(()=>{hd()},"reset"),globalReset:v(()=>{hd(Bo)},"globalReset"),defaultConfig:Bo});Cb(Cn().logLevel);hd(Cn());var Cae=v((t,e,n)=>{ce.warn(t),uy(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),f9=v(async function(t={querySelector:".mermaid"}){try{await Aae(t)}catch(e){if(uy(e)&&ce.error(e.str),ma.parseError&&ma.parseError(e),!t.suppressErrors)throw ce.error("Use the suppressErrors option to suppress these errors"),e}},"run"),Aae=v(async function({postRenderCallback:t,querySelector:e,nodes:n}={querySelector:".mermaid"}){const r=Bs.getConfig();ce.debug(`${t?"":"No "}Callback function found`);let i;if(n)i=n;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");ce.debug(`Found ${i.length} diagrams`),r?.startOnLoad!==void 0&&(ce.debug("Start On Load: "+r?.startOnLoad),Bs.updateSiteConfig({startOnLoad:r?.startOnLoad}));const s=new ei.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let o;const l=[];for(const c of Array.from(i)){if(ce.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const h=`mermaid-${s.next()}`;o=c.innerHTML,o=OC(ei.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=ei.detectInit(o);u&&ce.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:f}=await b9(h,o,c);c.innerHTML=d,t&&await t(h),f&&f(c)}catch(d){Cae(d,l,ma.parseError)}}if(l.length>0)throw l[0]},"runThrowsErrors"),p9=v(function(t){Bs.initialize(t)},"initialize"),Iae=v(async function(t,e,n){ce.warn("mermaid.init is deprecated. Please use run instead."),t&&p9(t);const r={postRenderCallback:n,querySelector:".mermaid"};typeof e=="string"?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await f9(r)},"init"),Mae=v(async(t,{lazyLoad:e=!0}={})=>{Vf(),Sg(...t),e===!1&&await tae()},"registerExternalDiagrams"),m9=v(function(){if(ma.startOnLoad){const{startOnLoad:t}=Bs.getConfig();t&&ma.run().catch(e=>ce.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",m9,!1);var Lae=v(function(t){ma.parseError=t},"setParseErrorHandler"),qd=[],wp=!1,g9=v(async()=>{if(!wp){for(wp=!0;qd.length>0;){const t=qd.shift();if(t)try{await t()}catch(e){ce.error("Error executing queue",e)}}wp=!1}},"executeQueue"),Oae=v(async(t,e)=>new Promise((n,r)=>{const i=v(()=>new Promise((s,o)=>{Bs.parse(t,e).then(l=>{s(l),n(l)},l=>{ce.error("Error parsing",l),ma.parseError?.(l),o(l),r(l)})}),"performCall");qd.push(i),g9().catch(r)}),"parse"),b9=v((t,e,n)=>new Promise((r,i)=>{const s=v(()=>new Promise((o,l)=>{Bs.render(t,e,n).then(c=>{o(c),r(c)},c=>{ce.error("Error parsing",c),ma.parseError?.(c),l(c),i(c)})}),"performCall");qd.push(s),g9().catch(i)}),"render"),Rae=v(()=>Object.keys(Ms).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),ma={startOnLoad:!0,mermaidAPI:Bs,parse:Oae,render:b9,init:Iae,run:f9,registerExternalDiagrams:Mae,registerLayoutLoaders:kA,initialize:p9,parseError:void 0,contentLoaded:m9,setParseErrorHandler:Lae,detectType:Ab,registerIconPacks:ite,getRegisteredDiagramsMetadata:Rae},Cv=ma;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const _1=({definition:t,title:e,className:n,config:r={}})=>{const i=je.useRef(null);return je.useEffect(()=>{(async()=>{if(i.current)try{const o={startOnLoad:!1,theme:"default",securityLevel:"loose"};Cv.initialize({...o,...r});const l=`mermaid-diagram-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,{svg:c}=await Cv.render(l,t);i.current&&(i.current.innerHTML=c)}catch(o){console.error("Error rendering Mermaid diagram:",o),i.current&&(i.current.innerHTML="<div>Diagram konnte nicht gerendert werden.</div>")}})()},[t,r]),a.jsxs("div",{className:`${K({margin:"20px 0",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",textAlign:"center"})} ${n||""}`,children:[a.jsx("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"16px",color:"#374151"}),children:e}),a.jsx("div",{ref:i,className:K({"& svg":{maxWidth:"100%",height:"auto"}})})]})},Nae=`sequenceDiagram
    Actor Alice as Alice
    participant Contract as Smart Contract
    participant AIService as AI Service
    participant BatchCoord as Batch Coordinator
    participant Settlement as Settlement Layer

    Note over Alice,Contract: Phase 1: Setup - Prepaid Deposit
    Alice->>Contract: Deposit ETH for AI usage
    Contract->>Contract: Update user balance

    Note over Alice,Settlement: Phase 2: Usage - Instant AI Interactions
    Alice->>AIService: Request: "Analyze sentiment"
    AIService->>Contract: Validate sufficient balance
    AIService->>AIService: Process with LLM API
    AIService-->>Alice: Instant AI response
    AIService->>BatchCoord: Queue request for batching

    Note over BatchCoord,Settlement: Phase 3: Settlement - Efficient Batch Processing
    BatchCoord->>BatchCoord: Build Merkle tree from queued requests
    BatchCoord->>Contract: Process batch settlement
    Contract->>Contract: Verify proofs and deduct costs
    Contract->>Settlement: Single efficient transaction
    Settlement-->>Alice: Settlement confirmation`,Dae={title:"My AI Assistant That Takes ETH Instead of Subscriptions",publishing_date:"2025-08-28",tokenID:41,category:"blockchain",secondaryCategory:"ai",description:"I build an AI assistant that accepts Ethereum payments instead of subscriptions. Discover how Merkle batching enables efficient prepaid AI with instant responses."};function Bae(){return a.jsxs("article",{children:[a.jsxs("section",{children:[a.jsx("p",{children:"While working on some DeFi projects, something felt strange: I kept paying Copilot with my credit card while having ETH sitting in my wallet. I could instantly swap tokens without an creepy KYC, but AI services still require an email verification and monthly subscriptions. So I started wondering - what would an AI that accepts crypto payments actually look like?"}),a.jsxs("p",{children:[a.jsx("strong",{children:"My initial answer is now live:"})," ",a.jsx("a",{href:"/assistent",className:K({fontWeight:"bold",color:"indigo.600",_hover:{color:"indigo.700"}}),children:"Feel free to try my AI assistant"})," ","- you connect your wallet, deposit ETH, and chat with an LLM. No subscriptions, no accounts, no data weird harvesting. And you just pay for exactly what you use."]}),a.jsx("p",{children:"In this post, I'll walk you through the technical implementation - from smart contract architecture to serverless functions - showing my approach to the crypto-native AI problem."}),a.jsxs("div",{className:K({bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",p:"md",my:"md"}),children:[a.jsx("h3",{className:K({margin:"0 0 {spacing.3} 0"}),children:"Working Proof-of-Concept"}),a.jsx("p",{className:K({margin:"0 0 {spacing.3} 0"}),children:"This is a functional implementation that demonstrates crypto-native AI payments in production. While fully operational, it's in active development with significant opportunities for optimization and community contributions."}),a.jsxs("p",{className:K({margin:"0"}),children:[a.jsx("strong",{children:"Your input shapes this project:"})," Cost optimizations, UX improvements, and feature requests directly influence the development roadmap."]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"Building on Previous Blockchain-AI Experience"}),a.jsxs("p",{children:["I previously built an ",a.jsx("a",{href:"/blog/9",children:"AI image generator with blockchain payments"}),', proving that crypto-native AI services can work. But LLMs present fundamentally different challenges: users expect multiple requests per session, instant responses, and variable costs per interaction. The traditional "one transaction per request" model becomes prohibitively expensive and cumbersome.']}),a.jsx("p",{children:"For my LLM assistant, I needed to solve three key problems: how to batch multiple requests efficiently, how to maintain instant response times, and how to keep transaction costs reasonable. The solution required rethinking the entire payment architecture around prepaid balances and batch settlement."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"LLM System Architecture"}),a.jsxs("p",{children:["After evaluating different approaches, Merkle tree batching emerged as the optimal solution - providing cryptographic proof of each interaction while enabling efficient batch processing. This approach balances the competing demands of user experience, cost efficiency, and technical simplicity. I explored this technique in detail in my ",a.jsx("a",{href:"/blog/15",children:"previous post on Merkle tree fundamentals"}),". While that post covered the mathematical foundations, here we'll focus on the practical implementation for real-time AI services."]}),a.jsx("p",{children:"The core architectural change is switching from immediate settlement to a prepaid model with batch processing. Users deposit funds upfront, enabling instant LLM responses while deferring blockchain costs until batch settlement. This creates a trustless system where:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"User deposits $50 → Guaranteed $50 available"}),a.jsx("li",{children:"LLM requests consume balance → No payment risk"}),a.jsx("li",{children:"Batch settlement → Efficient blockchain transactions"}),a.jsx("li",{children:"Refunds possible → User controls remaining balance"})]}),a.jsx("p",{children:"This prepaid model fundamentally changes the user experience compared to traditional per-transaction payments. The workflow below demonstrates how Alice interacts with the system, showing each phase where these benefits become tangible:"}),a.jsx(_1,{definition:Nae,title:"Simplified User Journey: Prepaid AI with Batch Settlement",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),a.jsx("h3",{children:"System Data Flow"}),a.jsx("p",{children:"The diagram above illustrates the simplified system architecture with three distinct phases: Setup (deposit), Usage (instant AI interactions), and Settlement (efficient batch processing). Each phase optimizes for different goals - user experience, response speed, and cost efficiency."}),a.jsx("h3",{children:"Core Components"}),a.jsx("p",{children:"Our LLM system consists of three main components working together to enable instant responses with efficient blockchain settlement:"}),a.jsx("h4",{children:"Smart Contract - LLMv1.sol"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Purpose:"})," Manages user deposits, tracks balances, and processes Merkle tree batches for settlement. Built as an upgradeable contract using"," ",a.jsx("a",{href:"https://docs.openzeppelin.com/upgrades-plugins/1.x/proxies#uups",target:"_blank",rel:"noopener noreferrer",children:"OpenZeppelin's UUPS pattern"}),"."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Core Functions:"})," Accept ETH deposits, track user balances, verify Merkle proofs for batch settlement, and enable fund withdrawals."]}),a.jsx("h4",{children:"AI Service (sc_llm.js)"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Purpose:"})," Orchestrates the entire LLM request flow - from balance validation to LLM API calls and batch coordination."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Core Functions:"})," Validate user balances, process LLM requests instantly through OpenAI/Anthropic APIs, and coordinate Merkle tree batching when 4 requests accumulate."]}),a.jsx("h4",{children:"Frontend Interface"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Purpose:"})," Provides the user interface for wallet connection, balance management, and chat interaction."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Core Functions:"})," Wallet integration, ETH deposits, real-time chat with LLM, and request history tracking."]}),a.jsx("h3",{children:"Critical Implementation Details"}),a.jsx("p",{children:"The system's efficiency comes from three key design decisions that enable instant responses while maintaining cost efficiency:"}),a.jsx("h4",{children:"Merkle Tree Batching"}),a.jsxs("p",{children:["Using"," ",a.jsx("a",{href:"https://github.com/OpenZeppelin/merkle-tree",target:"_blank",rel:"noopener noreferrer",children:"OpenZeppelin's StandardMerkleTree"})," ","library, multiple AI requests get bundled into single blockchain transactions. This reduces per-request costs by approximately 60% compared to individual transactions while maintaining cryptographic proof of each interaction."]}),a.jsx("h4",{children:"Prepaid Balance Architecture"}),a.jsx("p",{children:"Users deposit ETH once and consume balance through LLM requests without repeated wallet confirmations. This eliminates transaction friction while maintaining full control - unused funds can be withdrawn anytime."}),a.jsx("h4",{children:"Automatic Settlement"}),a.jsxs("p",{children:["The system triggers batch settlement when 4 requests accumulate, balancing real-time settlement with transaction efficiency. Running on"," ",a.jsx("a",{href:"https://docs.optimism.io/get-started/superchain",target:"_blank",rel:"noopener noreferrer",children:"Optimism"}),", this threshold ensures users see balance updates quickly while keeping transaction costs under 1 cent - making micro-payments for AI services economically viable today."]}),a.jsx("h2",{children:"Help Shape This Project"}),a.jsx("p",{children:"As an early-stage implementation, your feedback directly influences development priorities and helps validate the crypto-native AI approach. This is exactly the kind of input that makes the Web3 innovation so attractive to me."}),a.jsxs("div",{className:K({bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",p:"md",my:"md"}),children:[a.jsx("h3",{className:K({margin:"0 0 {spacing.3} 0"}),children:"Critical Feedback Areas"}),a.jsxs("div",{className:K({mb:"3"}),children:[a.jsx("strong",{children:"Economics:"}),a.jsx("span",{className:K({ml:"2"}),children:"What cost structure would make crypto-AI payments compelling vs. traditional subscriptions? How do L2 fees feel in practice?"})]}),a.jsxs("div",{className:K({mb:"3"}),children:[a.jsx("strong",{children:"User Experience:"}),a.jsx("span",{className:K({ml:"2"}),children:"Where does wallet integration feel clunky? What onboarding steps cause confusion? How intuitive is the prepaid balance model?"})]}),a.jsxs("div",{className:K({mb:"3"}),children:[a.jsx("strong",{children:"Technical Features:"}),a.jsx("span",{className:K({ml:"2"}),children:"What AI capabilities would justify blockchain overhead? How could batch settlement be optimized? Should the system support other LLM providers?"})]}),a.jsxs("p",{className:K({margin:"0"}),children:[a.jsx("strong",{children:"Share your thoughts:"})," Comments below or in"," ",a.jsx("a",{href:"https://github.com/fretchen/fretchen.github.io/issues",children:"GitHub issues"})," - help to build a better crypto-native AI infrastructure."]})]}),a.jsx("h2",{children:"What's Next"}),a.jsx("p",{children:"This implementation proves that blockchain-native AI services can deliver both user control and excellent performance. The next steps focus on expanding capabilities and improving accessibility:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Multiple LLM Support:"})," Integration with Anthropic Claude, local models, and specialized AI services"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Enhanced Batching:"})," Dynamic batch sizes and cross-user optimization for even lower costs"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Account Abstraction Integration:"})," The"," ",a.jsx("a",{href:"https://eip7702.io/",target:"_blank",rel:"noopener noreferrer",children:"EIP-7702 upgrade"})," ","enables smart accounts with native batching capabilities, potentially making the current Merkle tree approach unnecessary while improving UX through gasless interactions"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Easier User Journey:"})," Improved UX to make the system more accessible and intuitive"]})]}),a.jsx("p",{children:"I believe these technologies might enable more user sovereignty over data surveillance. By combining blockchain payments with efficient batching techniques, we can build AI services that respect privacy, provide transparency, and align incentives between users and providers through the settlement layer."})]})]})}const Av=Object.freeze(Object.defineProperty({__proto__:null,default:Bae,meta:Dae},Symbol.toStringTag,{value:"Module"}));var _p={},is={},as={},vp={},ss={},Wr={},os={},Pl={},Iv;function y9(){if(Iv)return Pl;Iv=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.StructError=void 0;class t extends TypeError{constructor(n,r){let i;const{message:s,explanation:o,...l}=n,{path:c}=n,h=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(o??h),o!=null&&(this.cause=h),Object.assign(this,l),this.name=this.constructor.name,this.failures=()=>i??(i=[n,...r()])}}return Pl.StructError=t,Pl}var pn={},mn={},Mv;function Yf(){if(Mv)return mn;Mv=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.run=mn.toFailures=mn.toFailure=mn.shiftIterator=mn.print=mn.isPlainObject=mn.isObject=void 0;function t(c){return e(c)&&typeof c[Symbol.iterator]=="function"}function e(c){return typeof c=="object"&&c!==null}mn.isObject=e;function n(c){if(Object.prototype.toString.call(c)!=="[object Object]")return!1;const h=Object.getPrototypeOf(c);return h===null||h===Object.prototype}mn.isPlainObject=n;function r(c){return typeof c=="symbol"?c.toString():typeof c=="string"?JSON.stringify(c):`${c}`}mn.print=r;function i(c){const{done:h,value:u}=c.next();return h?void 0:u}mn.shiftIterator=i;function s(c,h,u,d){if(c===!0)return;c===!1?c={}:typeof c=="string"&&(c={message:c});const{path:f,branch:p}=h,{type:m}=u,{refinement:g,message:b=`Expected a value of type \`${m}\`${g?` with refinement \`${g}\``:""}, but received: \`${r(d)}\``}=c;return{value:d,type:m,refinement:g,key:f[f.length-1],path:f,branch:p,...c,message:b}}mn.toFailure=s;function*o(c,h,u,d){t(c)||(c=[c]);for(const f of c){const p=s(f,h,u,d);p&&(yield p)}}mn.toFailures=o;function*l(c,h,u={}){const{path:d=[],branch:f=[c],coerce:p=!1,mask:m=!1}=u,g={path:d,branch:f};if(p&&(c=h.coercer(c,g),m&&h.type!=="type"&&e(h.schema)&&e(c)&&!Array.isArray(c)))for(const y in c)h.schema[y]===void 0&&delete c[y];let b="valid";for(const y of h.validator(c,g))y.explanation=u.message,b="not_valid",yield[y,void 0];for(let[y,w,S]of h.entries(c,g)){const E=l(w,S,{path:y===void 0?d:[...d,y],branch:y===void 0?f:[...f,w],coerce:p,mask:m,message:u.message});for(const T of E)T[0]?(b=T[0].refinement===null||T[0].refinement===void 0?"not_valid":"not_refined",yield[T[0],void 0]):p&&(w=T[1],y===void 0?c=w:c instanceof Map?c.set(y,w):c instanceof Set?c.add(w):e(c)&&(w!==void 0||y in c)&&(c[y]=w))}if(b!=="not_valid")for(const y of h.refiner(c,g))y.explanation=u.message,b="not_refined",yield[y,void 0];b==="valid"&&(yield[void 0,c])}return mn.run=l,mn}var Lv;function Ih(){if(Lv)return pn;Lv=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.validate=pn.is=pn.mask=pn.create=pn.assert=pn.ExactOptionalStruct=pn.Struct=void 0;const t=y9(),e=Yf();class n{constructor(d){const{type:f,schema:p,validator:m,refiner:g,coercer:b=w=>w,entries:y=function*(){}}=d;this.type=f,this.schema=p,this.entries=y,this.coercer=b,m?this.validator=(w,S)=>{const E=m(w,S);return(0,e.toFailures)(E,S,this,w)}:this.validator=()=>[],g?this.refiner=(w,S)=>{const E=g(w,S);return(0,e.toFailures)(E,S,this,w)}:this.refiner=()=>[]}assert(d,f){return s(d,this,f)}create(d,f){return o(d,this,f)}is(d){return c(d,this)}mask(d,f){return l(d,this,f)}validate(d,f={}){return h(d,this,f)}}pn.Struct=n;const r="EXACT_OPTIONAL";class i extends n{constructor(d){super({...d,type:`exact optional ${d.type}`}),this.brand=r}static isExactOptional(d){return(0,e.isObject)(d)&&"brand"in d&&d.brand===r}}pn.ExactOptionalStruct=i;function s(u,d,f){const p=h(u,d,{message:f});if(p[0])throw p[0]}pn.assert=s;function o(u,d,f){const p=h(u,d,{coerce:!0,message:f});if(p[0])throw p[0];return p[1]}pn.create=o;function l(u,d,f){const p=h(u,d,{coerce:!0,mask:!0,message:f});if(p[0])throw p[0];return p[1]}pn.mask=l;function c(u,d){return!h(u,d)[0]}pn.is=c;function h(u,d,f={}){const p=(0,e.run)(u,d,f),m=(0,e.shiftIterator)(p);return m[0]?[new t.StructError(m[0],function*(){for(const y of p)y[0]&&(yield y[0])}),void 0]:[void 0,m[1]]}return pn.validate=h,pn}var Wi={},Pe={},nn={},Ov;function x9(){if(Ov)return nn;Ov=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.pick=nn.partial=nn.omit=nn.lazy=nn.dynamic=nn.deprecated=nn.define=nn.assign=void 0;const t=Ih(),e=Iy();function n(...u){const d=u[0]?.type==="type",f=u.map(({schema:m})=>m),p=Object.assign({},...f);return d?(0,e.type)(p):(0,e.object)(p)}nn.assign=n;function r(u,d){return new t.Struct({type:u,schema:null,validator:d})}nn.define=r;function i(u,d){return new t.Struct({...u,refiner:(f,p)=>f===void 0||u.refiner(f,p),validator(f,p){return f===void 0?!0:(d(f,p),u.validator(f,p))}})}nn.deprecated=i;function s(u){return new t.Struct({type:"dynamic",schema:null,*entries(d,f){yield*u(d,f).entries(d,f)},validator(d,f){return u(d,f).validator(d,f)},coercer(d,f){return u(d,f).coercer(d,f)},refiner(d,f){return u(d,f).refiner(d,f)}})}nn.dynamic=s;function o(u){let d;return new t.Struct({type:"lazy",schema:null,*entries(f,p){d??(d=u()),yield*d.entries(f,p)},validator(f,p){return d??(d=u()),d.validator(f,p)},coercer(f,p){return d??(d=u()),d.coercer(f,p)},refiner(f,p){return d??(d=u()),d.refiner(f,p)}})}nn.lazy=o;function l(u,d){const{schema:f}=u,p={...f};for(const m of d)delete p[m];switch(u.type){case"type":return(0,e.type)(p);default:return(0,e.object)(p)}}nn.omit=l;function c(u){const d=u instanceof t.Struct,f=d?{...u.schema}:{...u};for(const p in f)f[p]=(0,e.optional)(f[p]);return d&&u.type==="type"?(0,e.type)(f):(0,e.object)(f)}nn.partial=c;function h(u,d){const{schema:f}=u,p={};for(const m of d)p[m]=f[m];switch(u.type){case"type":return(0,e.type)(p);default:return(0,e.object)(p)}}return nn.pick=h,nn}var Rv;function Iy(){if(Rv)return Pe;Rv=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.unknown=Pe.union=Pe.type=Pe.tuple=Pe.string=Pe.set=Pe.regexp=Pe.record=Pe.exactOptional=Pe.optional=Pe.object=Pe.number=Pe.nullable=Pe.never=Pe.map=Pe.literal=Pe.intersection=Pe.integer=Pe.instance=Pe.func=Pe.enums=Pe.date=Pe.boolean=Pe.bigint=Pe.array=Pe.any=void 0;const t=Ih(),e=Yf(),n=x9();function r(){return(0,n.define)("any",()=>!0)}Pe.any=r;function i(P){return new t.Struct({type:"array",schema:P,*entries(A){if(P&&Array.isArray(A))for(const[O,F]of A.entries())yield[O,F,P]},coercer(A){return Array.isArray(A)?A.slice():A},validator(A){return Array.isArray(A)||`Expected an array value, but received: ${(0,e.print)(A)}`}})}Pe.array=i;function s(){return(0,n.define)("bigint",P=>typeof P=="bigint")}Pe.bigint=s;function o(){return(0,n.define)("boolean",P=>typeof P=="boolean")}Pe.boolean=o;function l(){return(0,n.define)("date",P=>P instanceof Date&&!isNaN(P.getTime())||`Expected a valid \`Date\` object, but received: ${(0,e.print)(P)}`)}Pe.date=l;function c(P){const A={},O=P.map(F=>(0,e.print)(F)).join();for(const F of P)A[F]=F;return new t.Struct({type:"enums",schema:A,validator(F){return P.includes(F)||`Expected one of \`${O}\`, but received: ${(0,e.print)(F)}`}})}Pe.enums=c;function h(){return(0,n.define)("func",P=>typeof P=="function"||`Expected a function, but received: ${(0,e.print)(P)}`)}Pe.func=h;function u(P){return(0,n.define)("instance",A=>A instanceof P||`Expected a \`${P.name}\` instance, but received: ${(0,e.print)(A)}`)}Pe.instance=u;function d(){return(0,n.define)("integer",P=>typeof P=="number"&&!isNaN(P)&&Number.isInteger(P)||`Expected an integer, but received: ${(0,e.print)(P)}`)}Pe.integer=d;function f(P){return new t.Struct({type:"intersection",schema:null,*entries(A,O){for(const{entries:F}of P)yield*F(A,O)},*validator(A,O){for(const{validator:F}of P)yield*F(A,O)},*refiner(A,O){for(const{refiner:F}of P)yield*F(A,O)}})}Pe.intersection=f;function p(P){const A=(0,e.print)(P),O=typeof P;return new t.Struct({type:"literal",schema:O==="string"||O==="number"||O==="boolean"?P:null,validator(F){return F===P||`Expected the literal \`${A}\`, but received: ${(0,e.print)(F)}`}})}Pe.literal=p;function m(P,A){return new t.Struct({type:"map",schema:null,*entries(O){if(P&&A&&O instanceof Map)for(const[F,Y]of O.entries())yield[F,F,P],yield[F,Y,A]},coercer(O){return O instanceof Map?new Map(O):O},validator(O){return O instanceof Map||`Expected a \`Map\` object, but received: ${(0,e.print)(O)}`}})}Pe.map=m;function g(){return(0,n.define)("never",()=>!1)}Pe.never=g;function b(P){return new t.Struct({...P,validator:(A,O)=>A===null||P.validator(A,O),refiner:(A,O)=>A===null||P.refiner(A,O)})}Pe.nullable=b;function y(){return(0,n.define)("number",P=>typeof P=="number"&&!isNaN(P)||`Expected a number, but received: ${(0,e.print)(P)}`)}Pe.number=y;function w(P){const A=P?Object.keys(P):[],O=g();return new t.Struct({type:"object",schema:P??null,*entries(F){if(P&&(0,e.isObject)(F)){const Y=new Set(Object.keys(F));for(const Q of A){Y.delete(Q);const z=P[Q];t.ExactOptionalStruct.isExactOptional(z)&&!Object.prototype.hasOwnProperty.call(F,Q)||(yield[Q,F[Q],P[Q]])}for(const Q of Y)yield[Q,F[Q],O]}},validator(F){return(0,e.isObject)(F)||`Expected an object, but received: ${(0,e.print)(F)}`},coercer(F){return(0,e.isObject)(F)?{...F}:F}})}Pe.object=w;function S(P){return new t.Struct({...P,validator:(A,O)=>A===void 0||P.validator(A,O),refiner:(A,O)=>A===void 0||P.refiner(A,O)})}Pe.optional=S;function E(P){return new t.ExactOptionalStruct(P)}Pe.exactOptional=E;function T(P,A){return new t.Struct({type:"record",schema:null,*entries(O){if((0,e.isObject)(O))for(const F in O){const Y=O[F];yield[F,F,P],yield[F,Y,A]}},validator(O){return(0,e.isObject)(O)||`Expected an object, but received: ${(0,e.print)(O)}`}})}Pe.record=T;function C(){return(0,n.define)("regexp",P=>P instanceof RegExp)}Pe.regexp=C;function M(P){return new t.Struct({type:"set",schema:null,*entries(A){if(P&&A instanceof Set)for(const O of A)yield[O,O,P]},coercer(A){return A instanceof Set?new Set(A):A},validator(A){return A instanceof Set||`Expected a \`Set\` object, but received: ${(0,e.print)(A)}`}})}Pe.set=M;function R(){return(0,n.define)("string",P=>typeof P=="string"||`Expected a string, but received: ${(0,e.print)(P)}`)}Pe.string=R;function D(P){const A=g();return new t.Struct({type:"tuple",schema:null,*entries(O){if(Array.isArray(O)){const F=Math.max(P.length,O.length);for(let Y=0;Y<F;Y++)yield[Y,O[Y],P[Y]||A]}},validator(O){return Array.isArray(O)||`Expected an array, but received: ${(0,e.print)(O)}`}})}Pe.tuple=D;function $(P){const A=Object.keys(P);return new t.Struct({type:"type",schema:P,*entries(O){if((0,e.isObject)(O))for(const F of A)yield[F,O[F],P[F]]},validator(O){return(0,e.isObject)(O)||`Expected an object, but received: ${(0,e.print)(O)}`},coercer(O){return(0,e.isObject)(O)?{...O}:O}})}Pe.type=$;function L(P){const A=P.map(O=>O.type).join(" | ");return new t.Struct({type:"union",schema:null,coercer(O){for(const F of P){const[Y,Q]=F.validate(O,{coerce:!0});if(!Y)return Q}return O},validator(O,F){const Y=[];for(const Q of P){const[...z]=(0,e.run)(O,Q,F),[j]=z;if(!j?.[0])return[];for(const[Z]of z)Z&&Y.push(Z)}return[`Expected the value to satisfy a union of \`${A}\`, but received: ${(0,e.print)(O)}`,...Y]}})}Pe.union=L;function q(){return(0,n.define)("unknown",()=>!0)}return Pe.unknown=q,Pe}var Nv;function Pae(){if(Nv)return Wi;Nv=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.trimmed=Wi.defaulted=Wi.coerce=void 0;const t=Ih(),e=Yf(),n=Iy();function r(o,l,c){return new t.Struct({...o,coercer:(h,u)=>(0,t.is)(h,l)?o.coercer(c(h,u),u):o.coercer(h,u)})}Wi.coerce=r;function i(o,l,c={}){return r(o,(0,n.unknown)(),h=>{const u=typeof l=="function"?l():l;if(h===void 0)return u;if(!c.strict&&(0,e.isPlainObject)(h)&&(0,e.isPlainObject)(u)){const d={...h};let f=!1;for(const p in u)d[p]===void 0&&(d[p]=u[p],f=!0);if(f)return d}return h})}Wi.defaulted=i;function s(o){return r(o,(0,n.string)(),l=>l.trim())}return Wi.trimmed=s,Wi}var gn={},Dv;function Fae(){if(Dv)return gn;Dv=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.refine=gn.size=gn.pattern=gn.nonempty=gn.min=gn.max=gn.empty=void 0;const t=Ih(),e=Yf();function n(u){return h(u,"empty",d=>{const f=r(d);return f===0||`Expected an empty ${u.type} but received one with a size of \`${f}\``})}gn.empty=n;function r(u){return u instanceof Map||u instanceof Set?u.size:u.length}function i(u,d,f={}){const{exclusive:p}=f;return h(u,"max",m=>p?m<d:m<=d||`Expected a ${u.type} less than ${p?"":"or equal to "}${d} but received \`${m}\``)}gn.max=i;function s(u,d,f={}){const{exclusive:p}=f;return h(u,"min",m=>p?m>d:m>=d||`Expected a ${u.type} greater than ${p?"":"or equal to "}${d} but received \`${m}\``)}gn.min=s;function o(u){return h(u,"nonempty",d=>r(d)>0||`Expected a nonempty ${u.type} but received an empty one`)}gn.nonempty=o;function l(u,d){return h(u,"pattern",f=>d.test(f)||`Expected a ${u.type} matching \`/${d.source}/\` but received "${f}"`)}gn.pattern=l;function c(u,d,f=d){const p=`Expected a ${u.type}`,m=d===f?`of \`${d}\``:`between \`${d}\` and \`${f}\``;return h(u,"size",g=>{if(typeof g=="number"||g instanceof Date)return d<=g&&g<=f||`${p} ${m} but received \`${g}\``;if(g instanceof Map||g instanceof Set){const{size:y}=g;return d<=y&&y<=f||`${p} with a size ${m} but received one with a size of \`${y}\``}const{length:b}=g;return d<=b&&b<=f||`${p} with a length ${m} but received one with a length of \`${b}\``})}gn.size=c;function h(u,d,f){return new t.Struct({...u,*refiner(p,m){yield*u.refiner(p,m);const g=f(p,m),b=(0,e.toFailures)(g,m,u,p);for(const y of b)yield{...y,refinement:d}}})}return gn.refine=h,gn}var Bv;function Di(){return Bv||(Bv=1,function(t){var e=os&&os.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=os&&os.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(y9(),t),n(Ih(),t),n(Pae(),t),n(Fae(),t),n(Iy(),t),n(x9(),t)}(os)),os}var pr={};class My extends Error{constructor(e,{cause:n}={}){super(e),this.name=My.name,n&&(this.cause=n),this.message=e}}const Hae=Object.freeze(Object.defineProperty({__proto__:null,ErrorWithCause:My},Symbol.toStringTag,{value:"Module"})),zae=Wk(Hae),qae=(t,e)=>{if(!t||!e||!(t instanceof Error)||!(e.prototype instanceof Error)&&e!==Error)return;const n=new Set;let r=t;for(;r&&!n.has(r);){if(n.add(r),r instanceof e)return r;r=Gf(r)}},Gf=t=>{if(!(!t||typeof t!="object"||!("cause"in t)))if(typeof t.cause=="function"){const e=t.cause();return e instanceof Error?e:void 0}else return t.cause instanceof Error?t.cause:void 0},w9=(t,e)=>{if(!(t instanceof Error))return"";const n=t.stack||"";if(e.has(t))return n+`
causes have become circular...`;const r=Gf(t);return r?(e.add(t),n+`
caused by: `+w9(r,e)):n},Wae=t=>w9(t,new Set),_9=(t,e,n)=>{if(!(t instanceof Error))return"";const r=n?"":t.message||"";if(e.has(t))return r+": ...";const i=Gf(t);if(i){e.add(t);const s="cause"in t&&typeof t.cause=="function";return r+(s?"":": ")+_9(i,e,s)}else return r},Uae=t=>_9(t,new Set),Vae=Object.freeze(Object.defineProperty({__proto__:null,findCauseByReference:qae,getErrorCause:Gf,messageWithCauses:Uae,stackWithCauses:Wae},Symbol.toStringTag,{value:"Module"})),Yae=Wk(Vae);var Tp,Pv;function Gae(){if(Pv)return Tp;Pv=1;const{ErrorWithCause:t}=zae,{findCauseByReference:e,getErrorCause:n,messageWithCauses:r,stackWithCauses:i}=Yae;return Tp={ErrorWithCause:t,findCauseByReference:e,getErrorCause:n,stackWithCauses:i,messageWithCauses:r},Tp}var kp={},Fv;function Ly(){return Fv||(Fv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.getKnownPropertyNames=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(u){return Array.isArray(u)&&u.length>0}t.isNonEmptyArray=e;function n(u){return u==null}t.isNullOrUndefined=n;function r(u){return!!u&&typeof u=="object"&&!Array.isArray(u)}t.isObject=r;const i=(u,d)=>Object.hasOwnProperty.call(u,d);t.hasProperty=i;function s(u){return Object.getOwnPropertyNames(u)}t.getKnownPropertyNames=s,function(u){u[u.Null=4]="Null",u[u.Comma=1]="Comma",u[u.Wrapper=1]="Wrapper",u[u.True=4]="True",u[u.False=5]="False",u[u.Quote=1]="Quote",u[u.Colon=1]="Colon",u[u.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function o(u){if(typeof u!="object"||u===null)return!1;try{let d=u;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(u)===d}catch{return!1}}t.isPlainObject=o;function l(u){return u.charCodeAt(0)<=127}t.isASCII=l;function c(u){return u.split("").reduce((f,p)=>l(p)?f+1:f+2,0)+(u.match(t.ESCAPE_CHARACTERS_REGEXP)??[]).length}t.calculateStringSize=c;function h(u){return u.toString().length}t.calculateNumberSize=h}(kp)),kp}var Hv;function v9(){if(Hv)return pr;Hv=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.wrapError=pr.getErrorMessage=pr.isErrorWithStack=pr.isErrorWithMessage=pr.isErrorWithCode=void 0;const t=Gae(),e=Ly();function n(c){return c instanceof Error||(0,e.isObject)(c)&&c.constructor.name==="Error"}function r(c){return typeof c=="object"&&c!==null&&"code"in c}pr.isErrorWithCode=r;function i(c){return typeof c=="object"&&c!==null&&"message"in c}pr.isErrorWithMessage=i;function s(c){return typeof c=="object"&&c!==null&&"stack"in c}pr.isErrorWithStack=s;function o(c){return i(c)&&typeof c.message=="string"?c.message:(0,e.isNullOrUndefined)(c)?"":String(c)}pr.getErrorMessage=o;function l(c,h){if(n(c)){let u;return Error.length===2?u=new Error(h,{cause:c}):u=new t.ErrorWithCause(h,{cause:c}),r(c)&&(u.code=c.code),u}return h.length>0?new Error(`${String(c)}: ${h}`):new Error(String(c))}return pr.wrapError=l,pr}var zv;function Ka(){if(zv)return Wr;zv=1,Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.assertExhaustive=Wr.assertStruct=Wr.assert=Wr.AssertionError=void 0;const t=Di(),e=v9();function n(h){return typeof h?.prototype?.constructor?.name=="string"}function r(h){return(0,e.getErrorMessage)(h).replace(/\.$/u,"")}function i(h,u){return n(h)?new h({message:u}):h({message:u})}class s extends Error{constructor(u){super(u.message),this.code="ERR_ASSERTION"}}Wr.AssertionError=s;function o(h,u="Assertion failed.",d=s){if(!h)throw u instanceof Error?u:i(d,u)}Wr.assert=o;function l(h,u,d="Assertion failed",f=s){try{(0,t.assert)(h,u)}catch(p){throw i(f,`${d}: ${r(p)}.`)}}Wr.assertStruct=l;function c(h){throw new Error("Invalid branch reached. Should be detected during compilation.")}return Wr.assertExhaustive=c,Wr}var Fl={},qv;function T9(){if(qv)return Fl;qv=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.base64=void 0;const t=Di(),e=Ka(),n=(r,i={})=>{const s=i.paddingRequired??!1,o=i.characterSet??"base64";let l;o==="base64"?l=String.raw`[A-Za-z0-9+\/]`:((0,e.assert)(o==="base64url"),l=String.raw`[-_A-Za-z0-9]`);let c;return s?c=new RegExp(`^(?:${l}{4})*(?:${l}{3}=|${l}{2}==)?$`,"u"):c=new RegExp(`^(?:${l}{4})*(?:${l}{2,3}|${l}{3}=|${l}{2}==)?$`,"u"),(0,t.pattern)(r,c)};return Fl.base64=n,Fl}var lt={},Sp={},Wv;function Xae(){return Wv||(Wv=1,function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;function e(U){return U instanceof Uint8Array||ArrayBuffer.isView(U)&&U.constructor.name==="Uint8Array"}function n(U,...J){if(!e(U))throw new Error("Uint8Array expected");if(J.length>0&&!J.includes(U.length))throw new Error("Uint8Array expected of length "+J+", got length="+U.length)}function r(U,J){return Array.isArray(J)?J.length===0?!0:U?J.every(se=>typeof se=="string"):J.every(se=>Number.isSafeInteger(se)):!1}function i(U){if(typeof U!="function")throw new Error("function expected");return!0}function s(U,J){if(typeof J!="string")throw new Error(`${U}: string expected`);return!0}function o(U){if(!Number.isSafeInteger(U))throw new Error(`invalid integer: ${U}`)}function l(U){if(!Array.isArray(U))throw new Error("array expected")}function c(U,J){if(!r(!0,J))throw new Error(`${U}: array of strings expected`)}function h(U,J){if(!r(!1,J))throw new Error(`${U}: array of numbers expected`)}function u(...U){const J=we=>we,se=(we,Re)=>He=>we(Re(He)),be=U.map(we=>we.encode).reduceRight(se,J),xe=U.map(we=>we.decode).reduce(se,J);return{encode:be,decode:xe}}function d(U){const J=typeof U=="string"?U.split(""):U,se=J.length;c("alphabet",J);const be=new Map(J.map((xe,we)=>[xe,we]));return{encode:xe=>(l(xe),xe.map(we=>{if(!Number.isSafeInteger(we)||we<0||we>=se)throw new Error(`alphabet.encode: digit index outside alphabet "${we}". Allowed: ${U}`);return J[we]})),decode:xe=>(l(xe),xe.map(we=>{s("alphabet.decode",we);const Re=be.get(we);if(Re===void 0)throw new Error(`Unknown letter: "${we}". Allowed: ${U}`);return Re}))}}function f(U=""){return s("join",U),{encode:J=>(c("join.decode",J),J.join(U)),decode:J=>(s("join.decode",J),J.split(U))}}function p(U,J="="){return o(U),s("padding",J),{encode(se){for(c("padding.encode",se);se.length*U%8;)se.push(J);return se},decode(se){c("padding.decode",se);let be=se.length;if(be*U%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;be>0&&se[be-1]===J;be--)if((be-1)*U%8===0)throw new Error("padding: invalid, string has too much padding");return se.slice(0,be)}}}function m(U){return i(U),{encode:J=>J,decode:J=>U(J)}}function g(U,J,se){if(J<2)throw new Error(`convertRadix: invalid from=${J}, base cannot be less than 2`);if(se<2)throw new Error(`convertRadix: invalid to=${se}, base cannot be less than 2`);if(l(U),!U.length)return[];let be=0;const xe=[],we=Array.from(U,He=>{if(o(He),He<0||He>=J)throw new Error(`invalid integer: ${He}`);return He}),Re=we.length;for(;;){let He=0,ft=!0;for(let pt=be;pt<Re;pt++){const Ut=we[pt],xt=J*He,mt=xt+Ut;if(!Number.isSafeInteger(mt)||xt/J!==He||mt-Ut!==xt)throw new Error("convertRadix: carry overflow");const Et=mt/se;He=mt%se;const Lt=Math.floor(Et);if(we[pt]=Lt,!Number.isSafeInteger(Lt)||Lt*se+He!==mt)throw new Error("convertRadix: carry overflow");if(ft)Lt?ft=!1:be=pt;else continue}if(xe.push(He),ft)break}for(let He=0;He<U.length-1&&U[He]===0;He++)xe.push(0);return xe.reverse()}const b=(U,J)=>J===0?U:b(J,U%J),y=(U,J)=>U+(J-b(U,J)),w=(()=>{let U=[];for(let J=0;J<40;J++)U.push(2**J);return U})();function S(U,J,se,be){if(l(U),J<=0||J>32)throw new Error(`convertRadix2: wrong from=${J}`);if(se<=0||se>32)throw new Error(`convertRadix2: wrong to=${se}`);if(y(J,se)>32)throw new Error(`convertRadix2: carry overflow from=${J} to=${se} carryBits=${y(J,se)}`);let xe=0,we=0;const Re=w[J],He=w[se]-1,ft=[];for(const pt of U){if(o(pt),pt>=Re)throw new Error(`convertRadix2: invalid data word=${pt} from=${J}`);if(xe=xe<<J|pt,we+J>32)throw new Error(`convertRadix2: carry overflow pos=${we} from=${J}`);for(we+=J;we>=se;we-=se)ft.push((xe>>we-se&He)>>>0);const Ut=w[we];if(Ut===void 0)throw new Error("invalid carry");xe&=Ut-1}if(xe=xe<<se-we&He,!be&&we>=J)throw new Error("Excess padding");if(!be&&xe>0)throw new Error(`Non-zero padding: ${xe}`);return be&&we>0&&ft.push(xe>>>0),ft}function E(U){o(U);const J=2**8;return{encode:se=>{if(!e(se))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(se),J,U)},decode:se=>(h("radix.decode",se),Uint8Array.from(g(se,U,J)))}}function T(U,J=!1){if(o(U),U<=0||U>32)throw new Error("radix2: bits should be in (0..32]");if(y(8,U)>32||y(U,8)>32)throw new Error("radix2: carry overflow");return{encode:se=>{if(!e(se))throw new Error("radix2.encode input should be Uint8Array");return S(Array.from(se),8,U,!J)},decode:se=>(h("radix2.decode",se),Uint8Array.from(S(se,U,8,J)))}}function C(U){return i(U),function(...J){try{return U.apply(null,J)}catch{}}}function M(U,J){return o(U),i(J),{encode(se){if(!e(se))throw new Error("checksum.encode: input should be Uint8Array");const be=J(se).slice(0,U),xe=new Uint8Array(se.length+U);return xe.set(se),xe.set(be,se.length),xe},decode(se){if(!e(se))throw new Error("checksum.decode: input should be Uint8Array");const be=se.slice(0,-U),xe=se.slice(-U),we=J(be).slice(0,U);for(let Re=0;Re<U;Re++)if(we[Re]!==xe[Re])throw new Error("Invalid checksum");return be}}}t.utils={alphabet:d,chain:u,checksum:M,convertRadix:g,convertRadix2:S,radix:E,radix2:T,join:f,padding:p},t.base16=u(T(4),d("0123456789ABCDEF"),f("")),t.base32=u(T(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),t.base32nopad=u(T(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),t.base32hex=u(T(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),t.base32hexnopad=u(T(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),t.base32crockford=u(T(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),m(U=>U.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const R=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",D=(U,J)=>{s("base64",U);const se=J?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,be=J?"base64url":"base64";if(U.length>0&&!se.test(U))throw new Error("invalid base64");return Uint8Array.fromBase64(U,{alphabet:be,lastChunkHandling:"strict"})};t.base64=R?{encode(U){return n(U),U.toBase64()},decode(U){return D(U,!1)}}:u(T(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),t.base64nopad=u(T(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),t.base64url=R?{encode(U){return n(U),U.toBase64({alphabet:"base64url"})},decode(U){return D(U,!0)}}:u(T(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),t.base64urlnopad=u(T(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));const $=U=>u(E(58),d(U),f(""));t.base58=$("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=$("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=$("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const L=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(U){let J="";for(let se=0;se<U.length;se+=8){const be=U.subarray(se,se+8);J+=t.base58.encode(be).padStart(L[be.length],"1")}return J},decode(U){let J=[];for(let se=0;se<U.length;se+=11){const be=U.slice(se,se+11),xe=L.indexOf(be.length),we=t.base58.decode(be);for(let Re=0;Re<we.length-xe;Re++)if(we[Re]!==0)throw new Error("base58xmr: wrong padding");J=J.concat(Array.from(we.slice(we.length-xe)))}return Uint8Array.from(J)}};const q=U=>u(M(4,J=>U(U(J))),t.base58);t.createBase58check=q,t.base58check=t.createBase58check;const P=u(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),A=[996825010,642813549,513874426,1027748829,705979059];function O(U){const J=U>>25;let se=(U&33554431)<<5;for(let be=0;be<A.length;be++)(J>>be&1)===1&&(se^=A[be]);return se}function F(U,J,se=1){const be=U.length;let xe=1;for(let we=0;we<be;we++){const Re=U.charCodeAt(we);if(Re<33||Re>126)throw new Error(`Invalid prefix (${U})`);xe=O(xe)^Re>>5}xe=O(xe);for(let we=0;we<be;we++)xe=O(xe)^U.charCodeAt(we)&31;for(let we of J)xe=O(xe)^we;for(let we=0;we<6;we++)xe=O(xe);return xe^=se,P.encode(S([xe%w[30]],30,5,!1))}function Y(U){const J=U==="bech32"?1:734539939,se=T(5),be=se.decode,xe=se.encode,we=C(be);function Re(xt,mt,Et=90){s("bech32.encode prefix",xt),e(mt)&&(mt=Array.from(mt)),h("bech32.encode",mt);const Lt=xt.length;if(Lt===0)throw new TypeError(`Invalid prefix length ${Lt}`);const Xt=Lt+7+mt.length;if(Et!==!1&&Xt>Et)throw new TypeError(`Length ${Xt} exceeds limit ${Et}`);const Hr=xt.toLowerCase(),li=F(Hr,mt,J);return`${Hr}1${P.encode(mt)}${li}`}function He(xt,mt=90){s("bech32.decode input",xt);const Et=xt.length;if(Et<8||mt!==!1&&Et>mt)throw new TypeError(`invalid string length: ${Et} (${xt}). Expected (8..${mt})`);const Lt=xt.toLowerCase();if(xt!==Lt&&xt!==xt.toUpperCase())throw new Error("String must be lowercase or uppercase");const Xt=Lt.lastIndexOf("1");if(Xt===0||Xt===-1)throw new Error('Letter "1" must be present between prefix and data only');const Hr=Lt.slice(0,Xt),li=Lt.slice(Xt+1);if(li.length<6)throw new Error("Data must be at least 6 characters long");const to=P.decode(li).slice(0,-6),wa=F(Hr,to,J);if(!li.endsWith(wa))throw new Error(`Invalid checksum in ${xt}: expected "${wa}"`);return{prefix:Hr,words:to}}const ft=C(He);function pt(xt){const{prefix:mt,words:Et}=He(xt,!1);return{prefix:mt,words:Et,bytes:be(Et)}}function Ut(xt,mt){return Re(xt,xe(mt))}return{encode:Re,decode:He,encodeFromBytes:Ut,decodeToBytes:pt,decodeUnsafe:ft,fromWords:be,fromWordsUnsafe:we,toWords:xe}}t.bech32=Y("bech32"),t.bech32m=Y("bech32m"),t.utf8={encode:U=>new TextDecoder().decode(U),decode:U=>new TextEncoder().encode(U)};const Q=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",z={encode(U){return n(U),U.toHex()},decode(U){return s("hex",U),Uint8Array.fromHex(U)}};t.hex=Q?z:u(T(4),d("0123456789abcdef"),f(""),m(U=>{if(typeof U!="string"||U.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof U} with length ${U.length}`);return U.toLowerCase()}));const j={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},Z="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",te=(U,J)=>{if(typeof U!="string"||!j.hasOwnProperty(U))throw new TypeError(Z);if(!e(J))throw new TypeError("bytesToString() expects Uint8Array");return j[U].encode(J)};t.bytesToString=te,t.str=t.bytesToString;const N=(U,J)=>{if(!j.hasOwnProperty(U))throw new TypeError(Z);if(typeof J!="string")throw new TypeError("stringToBytes() expects string");return j[U].decode(J)};t.stringToBytes=N,t.bytes=t.stringToBytes}(Sp)),Sp}var $p={},jt={},Qe={},Uv;function Jae(){if(Uv)return Qe;Uv=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.toBig=Qe.shrSL=Qe.shrSH=Qe.rotrSL=Qe.rotrSH=Qe.rotrBL=Qe.rotrBH=Qe.rotr32L=Qe.rotr32H=Qe.rotlSL=Qe.rotlSH=Qe.rotlBL=Qe.rotlBH=Qe.add5L=Qe.add5H=Qe.add4L=Qe.add4H=Qe.add3L=Qe.add3H=void 0,Qe.add=y,Qe.fromBig=n,Qe.split=r;const t=BigInt(2**32-1),e=BigInt(32);function n(D,$=!1){return $?{h:Number(D&t),l:Number(D>>e&t)}:{h:Number(D>>e&t)|0,l:Number(D&t)|0}}function r(D,$=!1){const L=D.length;let q=new Uint32Array(L),P=new Uint32Array(L);for(let A=0;A<L;A++){const{h:O,l:F}=n(D[A],$);[q[A],P[A]]=[O,F]}return[q,P]}const i=(D,$)=>BigInt(D>>>0)<<e|BigInt($>>>0);Qe.toBig=i;const s=(D,$,L)=>D>>>L;Qe.shrSH=s;const o=(D,$,L)=>D<<32-L|$>>>L;Qe.shrSL=o;const l=(D,$,L)=>D>>>L|$<<32-L;Qe.rotrSH=l;const c=(D,$,L)=>D<<32-L|$>>>L;Qe.rotrSL=c;const h=(D,$,L)=>D<<64-L|$>>>L-32;Qe.rotrBH=h;const u=(D,$,L)=>D>>>L-32|$<<64-L;Qe.rotrBL=u;const d=(D,$)=>$;Qe.rotr32H=d;const f=(D,$)=>D;Qe.rotr32L=f;const p=(D,$,L)=>D<<L|$>>>32-L;Qe.rotlSH=p;const m=(D,$,L)=>$<<L|D>>>32-L;Qe.rotlSL=m;const g=(D,$,L)=>$<<L-32|D>>>64-L;Qe.rotlBH=g;const b=(D,$,L)=>D<<L-32|$>>>64-L;Qe.rotlBL=b;function y(D,$,L,q){const P=($>>>0)+(q>>>0);return{h:D+L+(P/2**32|0)|0,l:P|0}}const w=(D,$,L)=>(D>>>0)+($>>>0)+(L>>>0);Qe.add3L=w;const S=(D,$,L,q)=>$+L+q+(D/2**32|0)|0;Qe.add3H=S;const E=(D,$,L,q)=>(D>>>0)+($>>>0)+(L>>>0)+(q>>>0);Qe.add4L=E;const T=(D,$,L,q,P)=>$+L+q+P+(D/2**32|0)|0;Qe.add4H=T;const C=(D,$,L,q,P)=>(D>>>0)+($>>>0)+(L>>>0)+(q>>>0)+(P>>>0);Qe.add5L=C;const M=(D,$,L,q,P,A)=>$+L+q+P+A+(D/2**32|0)|0;Qe.add5H=M;const R={fromBig:n,split:r,toBig:i,shrSH:s,shrSL:o,rotrSH:l,rotrSL:c,rotrBH:h,rotrBL:u,rotr32H:d,rotr32L:f,rotlSH:p,rotlSL:m,rotlBH:g,rotlBL:b,add:y,add3L:w,add3H:S,add4L:E,add4H:T,add5H:M,add5L:C};return Qe.default=R,Qe}var Ep={},Hl={},Vv;function Qae(){return Vv||(Vv=1,Object.defineProperty(Hl,"__esModule",{value:!0}),Hl.crypto=void 0,Hl.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Hl}var Yv;function Wd(){return Yv||(Yv=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=i,t.ahash=s,t.aexists=o,t.aoutput=l,t.u8=c,t.u32=h,t.clean=u,t.createView=d,t.rotr=f,t.rotl=p,t.byteSwap=m,t.byteSwap32=g,t.bytesToHex=w,t.hexToBytes=T,t.asyncLoop=M,t.utf8ToBytes=R,t.bytesToUtf8=D,t.toBytes=$,t.kdfInputToBytes=L,t.concatBytes=q,t.checkOpts=P,t.createHasher=O,t.createOptHasher=F,t.createXOFer=Y,t.randomBytes=Q;const e=Qae();function n(z){return z instanceof Uint8Array||ArrayBuffer.isView(z)&&z.constructor.name==="Uint8Array"}function r(z){if(!Number.isSafeInteger(z)||z<0)throw new Error("positive integer expected, got "+z)}function i(z,...j){if(!n(z))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(z.length))throw new Error("Uint8Array expected of length "+j+", got length="+z.length)}function s(z){if(typeof z!="function"||typeof z.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(z.outputLen),r(z.blockLen)}function o(z,j=!0){if(z.destroyed)throw new Error("Hash instance has been destroyed");if(j&&z.finished)throw new Error("Hash#digest() has already been called")}function l(z,j){i(z);const Z=j.outputLen;if(z.length<Z)throw new Error("digestInto() expects output buffer of length at least "+Z)}function c(z){return new Uint8Array(z.buffer,z.byteOffset,z.byteLength)}function h(z){return new Uint32Array(z.buffer,z.byteOffset,Math.floor(z.byteLength/4))}function u(...z){for(let j=0;j<z.length;j++)z[j].fill(0)}function d(z){return new DataView(z.buffer,z.byteOffset,z.byteLength)}function f(z,j){return z<<32-j|z>>>j}function p(z,j){return z<<j|z>>>32-j>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function m(z){return z<<24&4278190080|z<<8&16711680|z>>>8&65280|z>>>24&255}t.swap8IfBE=t.isLE?z=>z:z=>m(z),t.byteSwapIfBE=t.swap8IfBE;function g(z){for(let j=0;j<z.length;j++)z[j]=m(z[j]);return z}t.swap32IfBE=t.isLE?z=>z:g;const b=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",y=Array.from({length:256},(z,j)=>j.toString(16).padStart(2,"0"));function w(z){if(i(z),b)return z.toHex();let j="";for(let Z=0;Z<z.length;Z++)j+=y[z[Z]];return j}const S={_0:48,_9:57,A:65,F:70,a:97,f:102};function E(z){if(z>=S._0&&z<=S._9)return z-S._0;if(z>=S.A&&z<=S.F)return z-(S.A-10);if(z>=S.a&&z<=S.f)return z-(S.a-10)}function T(z){if(typeof z!="string")throw new Error("hex string expected, got "+typeof z);if(b)return Uint8Array.fromHex(z);const j=z.length,Z=j/2;if(j%2)throw new Error("hex string expected, got unpadded hex of length "+j);const te=new Uint8Array(Z);for(let N=0,U=0;N<Z;N++,U+=2){const J=E(z.charCodeAt(U)),se=E(z.charCodeAt(U+1));if(J===void 0||se===void 0){const be=z[U]+z[U+1];throw new Error('hex string expected, got non-hex character "'+be+'" at index '+U)}te[N]=J*16+se}return te}const C=async()=>{};t.nextTick=C;async function M(z,j,Z){let te=Date.now();for(let N=0;N<z;N++){Z(N);const U=Date.now()-te;U>=0&&U<j||(await(0,t.nextTick)(),te+=U)}}function R(z){if(typeof z!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(z))}function D(z){return new TextDecoder().decode(z)}function $(z){return typeof z=="string"&&(z=R(z)),i(z),z}function L(z){return typeof z=="string"&&(z=R(z)),i(z),z}function q(...z){let j=0;for(let te=0;te<z.length;te++){const N=z[te];i(N),j+=N.length}const Z=new Uint8Array(j);for(let te=0,N=0;te<z.length;te++){const U=z[te];Z.set(U,N),N+=U.length}return Z}function P(z,j){if(j!==void 0&&{}.toString.call(j)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(z,j)}class A{}t.Hash=A;function O(z){const j=te=>z().update($(te)).digest(),Z=z();return j.outputLen=Z.outputLen,j.blockLen=Z.blockLen,j.create=()=>z(),j}function F(z){const j=(te,N)=>z(N).update($(te)).digest(),Z=z({});return j.outputLen=Z.outputLen,j.blockLen=Z.blockLen,j.create=te=>z(te),j}function Y(z){const j=(te,N)=>z(N).update($(te)).digest(),Z=z({});return j.outputLen=Z.outputLen,j.blockLen=Z.blockLen,j.create=te=>z(te),j}t.wrapConstructor=O,t.wrapConstructorWithOpts=F,t.wrapXOFConstructorWithOpts=Y;function Q(z=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(z));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(z));throw new Error("crypto.getRandomValues must be defined")}}(Ep)),Ep}var Gv;function k9(){if(Gv)return jt;Gv=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.shake256=jt.shake128=jt.keccak_512=jt.keccak_384=jt.keccak_256=jt.keccak_224=jt.sha3_512=jt.sha3_384=jt.sha3_256=jt.sha3_224=jt.Keccak=void 0,jt.keccakP=b;const t=Jae(),e=Wd(),n=BigInt(0),r=BigInt(1),i=BigInt(2),s=BigInt(7),o=BigInt(256),l=BigInt(113),c=[],h=[],u=[];for(let E=0,T=r,C=1,M=0;E<24;E++){[C,M]=[M,(2*C+3*M)%5],c.push(2*(5*M+C)),h.push((E+1)*(E+2)/2%64);let R=n;for(let D=0;D<7;D++)T=(T<<r^(T>>s)*l)%o,T&i&&(R^=r<<(r<<BigInt(D))-r);u.push(R)}const d=(0,t.split)(u,!0),f=d[0],p=d[1],m=(E,T,C)=>C>32?(0,t.rotlBH)(E,T,C):(0,t.rotlSH)(E,T,C),g=(E,T,C)=>C>32?(0,t.rotlBL)(E,T,C):(0,t.rotlSL)(E,T,C);function b(E,T=24){const C=new Uint32Array(10);for(let M=24-T;M<24;M++){for(let $=0;$<10;$++)C[$]=E[$]^E[$+10]^E[$+20]^E[$+30]^E[$+40];for(let $=0;$<10;$+=2){const L=($+8)%10,q=($+2)%10,P=C[q],A=C[q+1],O=m(P,A,1)^C[L],F=g(P,A,1)^C[L+1];for(let Y=0;Y<50;Y+=10)E[$+Y]^=O,E[$+Y+1]^=F}let R=E[2],D=E[3];for(let $=0;$<24;$++){const L=h[$],q=m(R,D,L),P=g(R,D,L),A=c[$];R=E[A],D=E[A+1],E[A]=q,E[A+1]=P}for(let $=0;$<50;$+=10){for(let L=0;L<10;L++)C[L]=E[$+L];for(let L=0;L<10;L++)E[$+L]^=~C[(L+2)%10]&C[(L+4)%10]}E[0]^=f[M],E[1]^=p[M]}(0,e.clean)(C)}class y extends e.Hash{constructor(T,C,M,R=!1,D=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=T,this.suffix=C,this.outputLen=M,this.enableXOF=R,this.rounds=D,(0,e.anumber)(M),!(0<T&&T<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),b(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(T){(0,e.aexists)(this),T=(0,e.toBytes)(T),(0,e.abytes)(T);const{blockLen:C,state:M}=this,R=T.length;for(let D=0;D<R;){const $=Math.min(C-this.pos,R-D);for(let L=0;L<$;L++)M[this.pos++]^=T[D++];this.pos===C&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:T,suffix:C,pos:M,blockLen:R}=this;T[M]^=C,(C&128)!==0&&M===R-1&&this.keccak(),T[R-1]^=128,this.keccak()}writeInto(T){(0,e.aexists)(this,!1),(0,e.abytes)(T),this.finish();const C=this.state,{blockLen:M}=this;for(let R=0,D=T.length;R<D;){this.posOut>=M&&this.keccak();const $=Math.min(M-this.posOut,D-R);T.set(C.subarray(this.posOut,this.posOut+$),R),this.posOut+=$,R+=$}return T}xofInto(T){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(T)}xof(T){return(0,e.anumber)(T),this.xofInto(new Uint8Array(T))}digestInto(T){if((0,e.aoutput)(T,this),this.finished)throw new Error("digest() was already called");return this.writeInto(T),this.destroy(),T}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(T){const{blockLen:C,suffix:M,outputLen:R,rounds:D,enableXOF:$}=this;return T||(T=new y(C,M,R,$,D)),T.state32.set(this.state32),T.pos=this.pos,T.posOut=this.posOut,T.finished=this.finished,T.rounds=D,T.suffix=M,T.outputLen=R,T.enableXOF=$,T.destroyed=this.destroyed,T}}jt.Keccak=y;const w=(E,T,C)=>(0,e.createHasher)(()=>new y(T,E,C));jt.sha3_224=w(6,144,224/8),jt.sha3_256=w(6,136,256/8),jt.sha3_384=w(6,104,384/8),jt.sha3_512=w(6,72,512/8),jt.keccak_224=w(1,144,224/8),jt.keccak_256=w(1,136,256/8),jt.keccak_384=w(1,104,384/8),jt.keccak_512=w(1,72,512/8);const S=(E,T,C)=>(0,e.createXOFer)((M={})=>new y(T,E,M.dkLen===void 0?C:M.dkLen,!0));return jt.shake128=S(31,168,128/8),jt.shake256=S(31,136,256/8),jt}var Xv;function Xf(){return Xv||(Xv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.isValidChecksumAddress=t.getChecksumAddress=t.isValidHexAddress=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.HexChecksumAddressStruct=t.HexAddressStruct=t.StrictHexStruct=t.HexStruct=void 0;const e=Di(),n=k9(),r=Ka(),i=Oy();t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu),t.HexAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]{40}$/u),t.HexChecksumAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-fA-F]{40}$/u);function s(m){return(0,e.is)(m,t.HexStruct)}t.isHexString=s;function o(m){return(0,e.is)(m,t.StrictHexStruct)}t.isStrictHexString=o;function l(m){(0,r.assert)(s(m),"Value must be a hexadecimal string.")}t.assertIsHexString=l;function c(m){(0,r.assert)(o(m),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=c;function h(m){return(0,e.is)(m,t.HexAddressStruct)||d(m)}t.isValidHexAddress=h;function u(m){(0,r.assert)((0,e.is)(m,t.HexChecksumAddressStruct),"Invalid hex address.");const g=p(m.toLowerCase()),b=p((0,i.bytesToHex)((0,n.keccak_256)(g)));return`0x${g.split("").map((y,w)=>{const S=b[w];return(0,r.assert)((0,e.is)(S,(0,e.string)()),"Hash shorter than address."),parseInt(S,16)>7?y.toUpperCase():y}).join("")}`}t.getChecksumAddress=u;function d(m){return(0,e.is)(m,t.HexChecksumAddressStruct)?u(m)===m:!1}t.isValidChecksumAddress=d;function f(m){return m.startsWith("0x")?m:m.startsWith("0X")?`0x${m.substring(2)}`:`0x${m}`}t.add0x=f;function p(m){return m.startsWith("0x")||m.startsWith("0X")?m.substring(2):m}t.remove0x=p}($p)),$p}var Jv;function Oy(){if(Jv)return lt;Jv=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.createDataView=lt.concatBytes=lt.valueToBytes=lt.base64ToBytes=lt.stringToBytes=lt.numberToBytes=lt.signedBigIntToBytes=lt.bigIntToBytes=lt.hexToBytes=lt.bytesToBase64=lt.bytesToString=lt.bytesToNumber=lt.bytesToSignedBigInt=lt.bytesToBigInt=lt.bytesToHex=lt.assertIsBytes=lt.isBytes=void 0;const t=Xae(),e=Ka(),n=Xf(),r=48,i=58,s=87;function o(){const $=[];return()=>{if($.length===0)for(let L=0;L<256;L++)$.push(L.toString(16).padStart(2,"0"));return $}}const l=o();function c($){return $ instanceof Uint8Array}lt.isBytes=c;function h($){(0,e.assert)(c($),"Value must be a Uint8Array.")}lt.assertIsBytes=h;function u($){if(h($),$.length===0)return"0x";const L=l(),q=new Array($.length);for(let P=0;P<$.length;P++)q[P]=L[$[P]];return(0,n.add0x)(q.join(""))}lt.bytesToHex=u;function d($){h($);const L=u($);return BigInt(L)}lt.bytesToBigInt=d;function f($){h($);let L=BigInt(0);for(const q of $)L=(L<<BigInt(8))+BigInt(q);return BigInt.asIntN($.length*8,L)}lt.bytesToSignedBigInt=f;function p($){h($);const L=d($);return(0,e.assert)(L<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(L)}lt.bytesToNumber=p;function m($){return h($),new TextDecoder().decode($)}lt.bytesToString=m;function g($){return h($),t.base64.encode($)}lt.bytesToBase64=g;function b($){if($?.toLowerCase?.()==="0x")return new Uint8Array;(0,n.assertIsHexString)($);const L=(0,n.remove0x)($).toLowerCase(),q=L.length%2===0?L:`0${L}`,P=new Uint8Array(q.length/2);for(let A=0;A<P.length;A++){const O=q.charCodeAt(A*2),F=q.charCodeAt(A*2+1),Y=O-(O<i?r:s),Q=F-(F<i?r:s);P[A]=Y*16+Q}return P}lt.hexToBytes=b;function y($){(0,e.assert)(typeof $=="bigint","Value must be a bigint."),(0,e.assert)($>=BigInt(0),"Value must be a non-negative bigint.");const L=$.toString(16);return b(L)}lt.bigIntToBytes=y;function w($,L){(0,e.assert)(L>0);const q=$>>BigInt(31);return!((~$&q)+($&~q)>>BigInt(L*8+-1))}function S($,L){(0,e.assert)(typeof $=="bigint","Value must be a bigint."),(0,e.assert)(typeof L=="number","Byte length must be a number."),(0,e.assert)(L>0,"Byte length must be greater than 0."),(0,e.assert)(w($,L),"Byte length is too small to represent the given value.");let q=$;const P=new Uint8Array(L);for(let A=0;A<P.length;A++)P[A]=Number(BigInt.asUintN(8,q)),q>>=BigInt(8);return P.reverse()}lt.signedBigIntToBytes=S;function E($){(0,e.assert)(typeof $=="number","Value must be a number."),(0,e.assert)($>=0,"Value must be a non-negative number."),(0,e.assert)(Number.isSafeInteger($),"Value is not a safe integer. Use `bigIntToBytes` instead.");const L=$.toString(16);return b(L)}lt.numberToBytes=E;function T($){return(0,e.assert)(typeof $=="string","Value must be a string."),new TextEncoder().encode($)}lt.stringToBytes=T;function C($){return(0,e.assert)(typeof $=="string","Value must be a string."),t.base64.decode($)}lt.base64ToBytes=C;function M($){if(typeof $=="bigint")return y($);if(typeof $=="number")return E($);if(typeof $=="string")return $.startsWith("0x")?b($):T($);if(c($))return $;throw new TypeError(`Unsupported value type: "${typeof $}".`)}lt.valueToBytes=M;function R($){const L=new Array($.length);let q=0;for(let A=0;A<$.length;A++){const O=M($[A]);L[A]=O,q+=O.length}const P=new Uint8Array(q);for(let A=0,O=0;A<L.length;A++)P.set(L[A],O),O+=L[A].length;return P}lt.concatBytes=R;function D($){if(typeof Buffer<"u"&&$ instanceof Buffer){const L=$.buffer.slice($.byteOffset,$.byteOffset+$.byteLength);return new DataView(L)}return new DataView($.buffer,$.byteOffset,$.byteLength)}return lt.createDataView=D,lt}var jp={},Qv;function Kae(){return Qv||(Qv=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toCaipChainId=t.parseCaipAccountId=t.parseCaipChainId=t.isCaipAssetId=t.isCaipAssetType=t.isCaipAccountAddress=t.isCaipAccountId=t.isCaipReference=t.isCaipNamespace=t.isCaipChainId=t.KnownCaipNamespace=t.CaipAssetIdStruct=t.CaipAssetTypeStruct=t.CaipAccountAddressStruct=t.CaipAccountIdStruct=t.CaipReferenceStruct=t.CaipNamespaceStruct=t.CaipChainIdStruct=t.CAIP_ASSET_ID_REGEX=t.CAIP_ASSET_TYPE_REGEX=t.CAIP_ACCOUNT_ADDRESS_REGEX=t.CAIP_ACCOUNT_ID_REGEX=t.CAIP_REFERENCE_REGEX=t.CAIP_NAMESPACE_REGEX=t.CAIP_CHAIN_ID_REGEX=void 0;const e=Di();t.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,t.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,t.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,t.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,t.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,t.CaipChainIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_CHAIN_ID_REGEX),t.CaipNamespaceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_NAMESPACE_REGEX),t.CaipReferenceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_REFERENCE_REGEX),t.CaipAccountIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ID_REGEX),t.CaipAccountAddressStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ADDRESS_REGEX),t.CaipAssetTypeStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_TYPE_REGEX),t.CaipAssetIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_ID_REGEX),function(f){f.Bip122="bip122",f.Eip155="eip155",f.Wallet="wallet"}(t.KnownCaipNamespace||(t.KnownCaipNamespace={}));function n(f){return(0,e.is)(f,t.CaipChainIdStruct)}t.isCaipChainId=n;function r(f){return(0,e.is)(f,t.CaipNamespaceStruct)}t.isCaipNamespace=r;function i(f){return(0,e.is)(f,t.CaipReferenceStruct)}t.isCaipReference=i;function s(f){return(0,e.is)(f,t.CaipAccountIdStruct)}t.isCaipAccountId=s;function o(f){return(0,e.is)(f,t.CaipAccountAddressStruct)}t.isCaipAccountAddress=o;function l(f){return(0,e.is)(f,t.CaipAssetTypeStruct)}t.isCaipAssetType=l;function c(f){return(0,e.is)(f,t.CaipAssetIdStruct)}t.isCaipAssetId=c;function h(f){const p=t.CAIP_CHAIN_ID_REGEX.exec(f);if(!p?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:p.groups.namespace,reference:p.groups.reference}}t.parseCaipChainId=h;function u(f){const p=t.CAIP_ACCOUNT_ID_REGEX.exec(f);if(!p?.groups)throw new Error("Invalid CAIP account ID.");return{address:p.groups.accountAddress,chainId:p.groups.chainId,chain:{namespace:p.groups.namespace,reference:p.groups.reference}}}t.parseCaipAccountId=u;function d(f,p){if(!r(f))throw new Error(`Invalid "namespace", must match: ${t.CAIP_NAMESPACE_REGEX.toString()}`);if(!i(p))throw new Error(`Invalid "reference", must match: ${t.CAIP_REFERENCE_REGEX.toString()}`);return`${f}:${p}`}t.toCaipChainId=d}(jp)),jp}var zl={},Kv;function Zae(){if(Kv)return zl;Kv=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.ChecksumStruct=void 0;const t=Di(),e=T9();return zl.ChecksumStruct=(0,t.size)((0,e.base64)((0,t.string)(),{paddingRequired:!0}),44,44),zl}var Ur={},Zv;function ese(){if(Zv)return Ur;Zv=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.createHex=Ur.createBytes=Ur.createBigInt=Ur.createNumber=void 0;const t=Di(),e=Ka(),n=Oy(),r=Xf(),i=(0,t.union)([(0,t.number)(),(0,t.bigint)(),(0,t.string)(),r.StrictHexStruct]),s=(0,t.coerce)((0,t.number)(),i,Number),o=(0,t.coerce)((0,t.bigint)(),i,BigInt);(0,t.union)([r.StrictHexStruct,(0,t.instance)(Uint8Array)]);const l=(0,t.coerce)((0,t.instance)(Uint8Array),(0,t.union)([r.StrictHexStruct]),n.hexToBytes),c=(0,t.coerce)(r.StrictHexStruct,(0,t.instance)(Uint8Array),n.bytesToHex);function h(p){try{const m=(0,t.create)(p,s);return(0,e.assert)(Number.isFinite(m),`Expected a number-like value, got "${p}".`),m}catch(m){throw m instanceof t.StructError?new Error(`Expected a number-like value, got "${p}".`):m}}Ur.createNumber=h;function u(p){try{return(0,t.create)(p,o)}catch(m){throw m instanceof t.StructError?new Error(`Expected a number-like value, got "${String(m.value)}".`):m}}Ur.createBigInt=u;function d(p){if(typeof p=="string"&&p.toLowerCase()==="0x")return new Uint8Array;try{return(0,t.create)(p,l)}catch(m){throw m instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(m.value)}".`):m}}Ur.createBytes=d;function f(p){if(p instanceof Uint8Array&&p.length===0||typeof p=="string"&&p.toLowerCase()==="0x")return"0x";try{return(0,t.create)(p,c)}catch(m){throw m instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(m.value)}".`):m}}return Ur.createHex=f,Ur}var Vr={},e4;function tse(){if(e4)return Vr;e4=1;var t=Vr&&Vr.__classPrivateFieldGet||function(o,l,c,h){if(c==="a"&&!h)throw new TypeError("Private accessor was defined without a getter");if(typeof l=="function"?o!==l||!h:!l.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?h:c==="a"?h.call(o):h?h.value:l.get(o)},e=Vr&&Vr.__classPrivateFieldSet||function(o,l,c,h,u){if(h==="m")throw new TypeError("Private method is not writable");if(h==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof l=="function"?o!==l||!u:!l.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return h==="a"?u.call(o,c):u?u.value=c:l.set(o,c),c},n,r;Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.FrozenSet=Vr.FrozenMap=void 0;class i{get size(){return t(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return t(this,n,"f")[Symbol.iterator]()}constructor(l){n.set(this,void 0),e(this,n,new Map(l),"f"),Object.freeze(this)}entries(){return t(this,n,"f").entries()}forEach(l,c){return t(this,n,"f").forEach((h,u,d)=>l.call(c,h,u,this))}get(l){return t(this,n,"f").get(l)}has(l){return t(this,n,"f").has(l)}keys(){return t(this,n,"f").keys()}values(){return t(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([l,c])=>`${String(l)} => ${String(c)}`).join(", ")} `:""}}`}}Vr.FrozenMap=i;class s{get size(){return t(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return t(this,r,"f")[Symbol.iterator]()}constructor(l){r.set(this,void 0),e(this,r,new Set(l),"f"),Object.freeze(this)}entries(){return t(this,r,"f").entries()}forEach(l,c){return t(this,r,"f").forEach((h,u,d)=>l.call(c,h,u,this))}has(l){return t(this,r,"f").has(l)}keys(){return t(this,r,"f").keys()}values(){return t(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(l=>String(l)).join(", ")} `:""}}`}}return Vr.FrozenSet=s,Object.freeze(i),Object.freeze(i.prototype),Object.freeze(s),Object.freeze(s.prototype),Vr}var Cp={},t4;function nse(){return t4||(t4=1,Object.defineProperty(Cp,"__esModule",{value:!0})),Cp}var Ap={},n4;function rse(){return n4||(n4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.getSafeJson=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=t.exactOptional=t.object=void 0;const e=Di(),n=Ka(),r=Ly(),i=$=>(0,e.object)($);t.object=i;function s({path:$,branch:L}){const q=$[$.length-1];return(0,r.hasProperty)(L[L.length-2],q)}function o($){return new e.Struct({...$,type:`optional ${$.type}`,validator:(L,q)=>!s(q)||$.validator(L,q),refiner:(L,q)=>!s(q)||$.refiner(L,q)})}t.exactOptional=o;const l=()=>(0,e.define)("finite number",$=>(0,e.is)($,(0,e.number)())&&Number.isFinite($));t.UnsafeJsonStruct=(0,e.union)([(0,e.literal)(null),(0,e.boolean)(),l(),(0,e.string)(),(0,e.array)((0,e.lazy)(()=>t.UnsafeJsonStruct)),(0,e.record)((0,e.string)(),(0,e.lazy)(()=>t.UnsafeJsonStruct))]),t.JsonStruct=(0,e.coerce)(t.UnsafeJsonStruct,(0,e.any)(),$=>((0,n.assertStruct)($,t.UnsafeJsonStruct),JSON.parse(JSON.stringify($,(L,q)=>{if(!(L==="__proto__"||L==="constructor"))return q}))));function c($){try{return h($),!0}catch{return!1}}t.isValidJson=c;function h($){return(0,e.create)($,t.JsonStruct)}t.getSafeJson=h;function u($){(0,n.assertStruct)($,t.JsonStruct,"Invalid JSON value");const L=JSON.stringify($);return new TextEncoder().encode(L).byteLength}t.getJsonSize=u,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,t.object)({code:(0,e.integer)(),message:(0,e.string)(),data:o(t.JsonStruct),stack:o((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)]),t.JsonRpcRequestStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)}),t.JsonRpcNotificationStruct=(0,t.object)({jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)});function d($){return(0,e.is)($,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=d;function f($,L){(0,n.assertStruct)($,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",L)}t.assertIsJsonRpcNotification=f;function p($){return(0,e.is)($,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=p;function m($,L){(0,n.assertStruct)($,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",L)}t.assertIsJsonRpcRequest=m,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function g($){return(0,e.is)($,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=g;function b($,L){(0,n.assertStruct)($,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",L)}t.assertIsPendingJsonRpcResponse=b;function y($){return(0,e.is)($,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=y;function w($,L){(0,n.assertStruct)($,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",L)}t.assertIsJsonRpcResponse=w;function S($){return(0,e.is)($,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=S;function E($,L){(0,n.assertStruct)($,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",L)}t.assertIsJsonRpcSuccess=E;function T($){return(0,e.is)($,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=T;function C($,L){(0,n.assertStruct)($,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",L)}t.assertIsJsonRpcFailure=C;function M($){return(0,e.is)($,t.JsonRpcErrorStruct)}t.isJsonRpcError=M;function R($,L){(0,n.assertStruct)($,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",L)}t.assertIsJsonRpcError=R;function D($){const{permitEmptyString:L,permitFractions:q,permitNull:P}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...$};return O=>!!(typeof O=="number"&&(q||Number.isInteger(O))||typeof O=="string"&&(L||O.length>0)||P&&O===null)}t.getJsonRpcIdValidator=D}(Ap)),Ap}var Ip={},r4;function ise(){return r4||(r4=1,Object.defineProperty(Ip,"__esModule",{value:!0})),Ip}var Ui={},i4;function ase(){if(i4)return Ui;i4=1;var t=Ui&&Ui.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.createModuleLogger=Ui.createProjectLogger=void 0;const n=(0,t(wee()).default)("metamask");function r(s){return n.extend(s)}Ui.createProjectLogger=r;function i(s,o){return s.extend(o)}return Ui.createModuleLogger=i,Ui}var Yr={},a4;function sse(){if(a4)return Yr;a4=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.hexToBigInt=Yr.hexToNumber=Yr.bigIntToHex=Yr.numberToHex=void 0;const t=Ka(),e=Xf(),n=o=>((0,t.assert)(typeof o=="number","Value must be a number."),(0,t.assert)(o>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(o),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,e.add0x)(o.toString(16)));Yr.numberToHex=n;const r=o=>((0,t.assert)(typeof o=="bigint","Value must be a bigint."),(0,t.assert)(o>=0,"Value must be a non-negative bigint."),(0,e.add0x)(o.toString(16)));Yr.bigIntToHex=r;const i=o=>{(0,e.assertIsHexString)(o);const l=parseInt(o,16);return(0,t.assert)(Number.isSafeInteger(l),"Value is not a safe integer. Use `hexToBigInt` instead."),l};Yr.hexToNumber=i;const s=o=>((0,e.assertIsHexString)(o),BigInt((0,e.add0x)(o)));return Yr.hexToBigInt=s,Yr}var Mp={},s4;function ose(){return s4||(s4=1,Object.defineProperty(Mp,"__esModule",{value:!0})),Mp}var ql={},o4;function lse(){if(o4)return ql;o4=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.createDeferredPromise=void 0;function t({suppressUnhandledRejection:e=!1}={}){let n,r;const i=new Promise((s,o)=>{n=s,r=o});return e&&i.catch(s=>{}),{promise:i,resolve:n,reject:r}}return ql.createDeferredPromise=t,ql}var Lp={},l4;function cse(){return l4||(l4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,n=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function r(s,o){return n(s,"count"),s*o}t.inMilliseconds=r;function i(s){return n(s,"timestamp"),Date.now()-s}t.timeSince=i}(Lp)),Lp}var Op={},c4;function hse(){return c4||(c4=1,Object.defineProperty(Op,"__esModule",{value:!0})),Op}var Rp={},fu={exports:{}},Np,h4;function Jf(){if(h4)return Np;h4=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=e-6;return Np={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Np}var Dp={},Bp,u4;function Qf(){return u4||(u4=1,Bp=typeof process=="object"&&Dp&&Dp.NODE_DEBUG&&/\bsemver\b/i.test(Dp.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),Bp}var d4;function Mh(){return d4||(d4=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Jf(),s=Qf();e=t.exports={};const o=e.re=[],l=e.safeRe=[],c=e.src=[],h=e.safeSrc=[],u=e.t={};let d=0;const f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[f,r]],m=b=>{for(const[y,w]of p)b=b.split(`${y}*`).join(`${y}{0,${w}}`).split(`${y}+`).join(`${y}{1,${w}}`);return b},g=(b,y,w)=>{const S=m(y),E=d++;s(b,E,y),u[b]=E,c[E]=y,h[E]=S,o[E]=new RegExp(y,w?"g":void 0),l[E]=new RegExp(S,w?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(fu,fu.exports)),fu.exports}var Pp,f4;function Ry(){if(f4)return Pp;f4=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return Pp=r=>r?typeof r!="object"?t:r:e,Pp}var Fp,p4;function S9(){if(p4)return Fp;p4=1;const t=/^[0-9]+$/,e=(r,i)=>{const s=t.test(r),o=t.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return Fp={compareIdentifiers:e,rcompareIdentifiers:(r,i)=>e(i,r)},Fp}var Hp,m4;function Yn(){if(m4)return Hp;m4=1;const t=Qf(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=Jf(),{safeRe:r,t:i}=Mh(),s=Ry(),{compareIdentifiers:o}=S9();class l{constructor(h,u){if(u=s(u),h instanceof l){if(h.loose===!!u.loose&&h.includePrerelease===!!u.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",h,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const d=h.trim().match(u.loose?r[i.LOOSE]:r[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const p=+f;if(p>=0&&p<n)return p}return f}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof l)){if(typeof h=="string"&&h===this.version)return 0;h=new l(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof l||(h=new l(h,this.options)),o(this.major,h.major)||o(this.minor,h.minor)||o(this.patch,h.patch)}comparePre(h){if(h instanceof l||(h=new l(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let u=0;do{const d=this.prerelease[u],f=h.prerelease[u];if(t("prerelease compare",u,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++u)}compareBuild(h){h instanceof l||(h=new l(h,this.options));let u=0;do{const d=this.build[u],f=h.build[u];if(t("build compare",u,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++u)}inc(h,u,d){if(h.startsWith("pre")){if(!u&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const f=`-${u}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!f||f[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,d),this.inc("pre",u,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,d),this.inc("pre",u,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let p=this.prerelease.length;for(;--p>=0;)typeof this.prerelease[p]=="number"&&(this.prerelease[p]++,p=-2);if(p===-1){if(u===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(u){let p=[u,f];d===!1&&(p=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=p):this.prerelease=p}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Hp=l,Hp}var zp,g4;function fl(){if(g4)return zp;g4=1;const t=Yn();return zp=(n,r,i=!1)=>{if(n instanceof t)return n;try{return new t(n,r)}catch(s){if(!i)return null;throw s}},zp}var qp,b4;function use(){if(b4)return qp;b4=1;const t=fl();return qp=(n,r)=>{const i=t(n,r);return i?i.version:null},qp}var Wp,y4;function dse(){if(y4)return Wp;y4=1;const t=fl();return Wp=(n,r)=>{const i=t(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},Wp}var Up,x4;function fse(){if(x4)return Up;x4=1;const t=Yn();return Up=(n,r,i,s,o)=>{typeof i=="string"&&(o=s,s=i,i=void 0);try{return new t(n instanceof t?n.version:n,i).inc(r,s,o).version}catch{return null}},Up}var Vp,w4;function pse(){if(w4)return Vp;w4=1;const t=fl();return Vp=(n,r)=>{const i=t(n,null,!0),s=t(r,null,!0),o=i.compare(s);if(o===0)return null;const l=o>0,c=l?i:s,h=l?s:i,u=!!c.prerelease.length;if(!!h.prerelease.length&&!u){if(!h.patch&&!h.minor)return"major";if(h.compareMain(c)===0)return h.minor&&!h.patch?"minor":"patch"}const f=u?"pre":"";return i.major!==s.major?f+"major":i.minor!==s.minor?f+"minor":i.patch!==s.patch?f+"patch":"prerelease"},Vp}var Yp,_4;function mse(){if(_4)return Yp;_4=1;const t=Yn();return Yp=(n,r)=>new t(n,r).major,Yp}var Gp,v4;function gse(){if(v4)return Gp;v4=1;const t=Yn();return Gp=(n,r)=>new t(n,r).minor,Gp}var Xp,T4;function bse(){if(T4)return Xp;T4=1;const t=Yn();return Xp=(n,r)=>new t(n,r).patch,Xp}var Jp,k4;function yse(){if(k4)return Jp;k4=1;const t=fl();return Jp=(n,r)=>{const i=t(n,r);return i&&i.prerelease.length?i.prerelease:null},Jp}var Qp,S4;function si(){if(S4)return Qp;S4=1;const t=Yn();return Qp=(n,r,i)=>new t(n,i).compare(new t(r,i)),Qp}var Kp,$4;function xse(){if($4)return Kp;$4=1;const t=si();return Kp=(n,r,i)=>t(r,n,i),Kp}var Zp,E4;function wse(){if(E4)return Zp;E4=1;const t=si();return Zp=(n,r)=>t(n,r,!0),Zp}var em,j4;function Ny(){if(j4)return em;j4=1;const t=Yn();return em=(n,r,i)=>{const s=new t(n,i),o=new t(r,i);return s.compare(o)||s.compareBuild(o)},em}var tm,C4;function _se(){if(C4)return tm;C4=1;const t=Ny();return tm=(n,r)=>n.sort((i,s)=>t(i,s,r)),tm}var nm,A4;function vse(){if(A4)return nm;A4=1;const t=Ny();return nm=(n,r)=>n.sort((i,s)=>t(s,i,r)),nm}var rm,I4;function Kf(){if(I4)return rm;I4=1;const t=si();return rm=(n,r,i)=>t(n,r,i)>0,rm}var im,M4;function Dy(){if(M4)return im;M4=1;const t=si();return im=(n,r,i)=>t(n,r,i)<0,im}var am,L4;function $9(){if(L4)return am;L4=1;const t=si();return am=(n,r,i)=>t(n,r,i)===0,am}var sm,O4;function E9(){if(O4)return sm;O4=1;const t=si();return sm=(n,r,i)=>t(n,r,i)!==0,sm}var om,R4;function By(){if(R4)return om;R4=1;const t=si();return om=(n,r,i)=>t(n,r,i)>=0,om}var lm,N4;function Py(){if(N4)return lm;N4=1;const t=si();return lm=(n,r,i)=>t(n,r,i)<=0,lm}var cm,D4;function j9(){if(D4)return cm;D4=1;const t=$9(),e=E9(),n=Kf(),r=By(),i=Dy(),s=Py();return cm=(l,c,h,u)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof h=="object"&&(h=h.version),l===h;case"!==":return typeof l=="object"&&(l=l.version),typeof h=="object"&&(h=h.version),l!==h;case"":case"=":case"==":return t(l,h,u);case"!=":return e(l,h,u);case">":return n(l,h,u);case">=":return r(l,h,u);case"<":return i(l,h,u);case"<=":return s(l,h,u);default:throw new TypeError(`Invalid operator: ${c}`)}},cm}var hm,B4;function Tse(){if(B4)return hm;B4=1;const t=Yn(),e=fl(),{safeRe:n,t:r}=Mh();return hm=(s,o)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let l=null;if(!o.rtl)l=s.match(o.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const p=o.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let m;for(;(m=p.exec(s))&&(!l||l.index+l[0].length!==s.length);)(!l||m.index+m[0].length!==l.index+l[0].length)&&(l=m),p.lastIndex=m.index+m[1].length+m[2].length;p.lastIndex=-1}if(l===null)return null;const c=l[2],h=l[3]||"0",u=l[4]||"0",d=o.includePrerelease&&l[5]?`-${l[5]}`:"",f=o.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${c}.${h}.${u}${d}${f}`,o)},hm}var um,P4;function kse(){if(P4)return um;P4=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return um=t,um}var dm,F4;function oi(){if(F4)return dm;F4=1;const t=/\s+/g;class e{constructor(O,F){if(F=i(F),O instanceof e)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new e(O.raw,F);if(O instanceof s)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().replace(t," "),this.set=this.raw.split("||").map(Y=>this.parseRange(Y.trim())).filter(Y=>Y.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Y=this.set[0];if(this.set=this.set.filter(Q=>!g(Q[0])),this.set.length===0)this.set=[Y];else if(this.set.length>1){for(const Q of this.set)if(Q.length===1&&b(Q[0])){this.set=[Q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const F=this.set[O];for(let Y=0;Y<F.length;Y++)Y>0&&(this.formatted+=" "),this.formatted+=F[Y].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const Y=((this.options.includePrerelease&&p)|(this.options.loose&&m))+":"+O,Q=r.get(Y);if(Q)return Q;const z=this.options.loose,j=z?c[h.HYPHENRANGELOOSE]:c[h.HYPHENRANGE];O=O.replace(j,q(this.options.includePrerelease)),o("hyphen replace",O),O=O.replace(c[h.COMPARATORTRIM],u),o("comparator trim",O),O=O.replace(c[h.TILDETRIM],d),o("tilde trim",O),O=O.replace(c[h.CARETTRIM],f),o("caret trim",O);let Z=O.split(" ").map(J=>w(J,this.options)).join(" ").split(/\s+/).map(J=>L(J,this.options));z&&(Z=Z.filter(J=>(o("loose invalid filter",J,this.options),!!J.match(c[h.COMPARATORLOOSE])))),o("range list",Z);const te=new Map,N=Z.map(J=>new s(J,this.options));for(const J of N){if(g(J))return[J];te.set(J.value,J)}te.size>1&&te.has("")&&te.delete("");const U=[...te.values()];return r.set(Y,U),U}intersects(O,F){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(Y=>y(Y,F)&&O.set.some(Q=>y(Q,F)&&Y.every(z=>Q.every(j=>z.intersects(j,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new l(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(P(this.set[F],O,this.options))return!0;return!1}}dm=e;const n=kse(),r=new n,i=Ry(),s=Zf(),o=Qf(),l=Yn(),{safeRe:c,t:h,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:f}=Mh(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:m}=Jf(),g=A=>A.value==="<0.0.0-0",b=A=>A.value==="",y=(A,O)=>{let F=!0;const Y=A.slice();let Q=Y.pop();for(;F&&Y.length;)F=Y.every(z=>Q.intersects(z,O)),Q=Y.pop();return F},w=(A,O)=>(o("comp",A,O),A=C(A,O),o("caret",A),A=E(A,O),o("tildes",A),A=R(A,O),o("xrange",A),A=$(A,O),o("stars",A),A),S=A=>!A||A.toLowerCase()==="x"||A==="*",E=(A,O)=>A.trim().split(/\s+/).map(F=>T(F,O)).join(" "),T=(A,O)=>{const F=O.loose?c[h.TILDELOOSE]:c[h.TILDE];return A.replace(F,(Y,Q,z,j,Z)=>{o("tilde",A,Y,Q,z,j,Z);let te;return S(Q)?te="":S(z)?te=`>=${Q}.0.0 <${+Q+1}.0.0-0`:S(j)?te=`>=${Q}.${z}.0 <${Q}.${+z+1}.0-0`:Z?(o("replaceTilde pr",Z),te=`>=${Q}.${z}.${j}-${Z} <${Q}.${+z+1}.0-0`):te=`>=${Q}.${z}.${j} <${Q}.${+z+1}.0-0`,o("tilde return",te),te})},C=(A,O)=>A.trim().split(/\s+/).map(F=>M(F,O)).join(" "),M=(A,O)=>{o("caret",A,O);const F=O.loose?c[h.CARETLOOSE]:c[h.CARET],Y=O.includePrerelease?"-0":"";return A.replace(F,(Q,z,j,Z,te)=>{o("caret",A,Q,z,j,Z,te);let N;return S(z)?N="":S(j)?N=`>=${z}.0.0${Y} <${+z+1}.0.0-0`:S(Z)?z==="0"?N=`>=${z}.${j}.0${Y} <${z}.${+j+1}.0-0`:N=`>=${z}.${j}.0${Y} <${+z+1}.0.0-0`:te?(o("replaceCaret pr",te),z==="0"?j==="0"?N=`>=${z}.${j}.${Z}-${te} <${z}.${j}.${+Z+1}-0`:N=`>=${z}.${j}.${Z}-${te} <${z}.${+j+1}.0-0`:N=`>=${z}.${j}.${Z}-${te} <${+z+1}.0.0-0`):(o("no pr"),z==="0"?j==="0"?N=`>=${z}.${j}.${Z}${Y} <${z}.${j}.${+Z+1}-0`:N=`>=${z}.${j}.${Z}${Y} <${z}.${+j+1}.0-0`:N=`>=${z}.${j}.${Z} <${+z+1}.0.0-0`),o("caret return",N),N})},R=(A,O)=>(o("replaceXRanges",A,O),A.split(/\s+/).map(F=>D(F,O)).join(" ")),D=(A,O)=>{A=A.trim();const F=O.loose?c[h.XRANGELOOSE]:c[h.XRANGE];return A.replace(F,(Y,Q,z,j,Z,te)=>{o("xRange",A,Y,Q,z,j,Z,te);const N=S(z),U=N||S(j),J=U||S(Z),se=J;return Q==="="&&se&&(Q=""),te=O.includePrerelease?"-0":"",N?Q===">"||Q==="<"?Y="<0.0.0-0":Y="*":Q&&se?(U&&(j=0),Z=0,Q===">"?(Q=">=",U?(z=+z+1,j=0,Z=0):(j=+j+1,Z=0)):Q==="<="&&(Q="<",U?z=+z+1:j=+j+1),Q==="<"&&(te="-0"),Y=`${Q+z}.${j}.${Z}${te}`):U?Y=`>=${z}.0.0${te} <${+z+1}.0.0-0`:J&&(Y=`>=${z}.${j}.0${te} <${z}.${+j+1}.0-0`),o("xRange return",Y),Y})},$=(A,O)=>(o("replaceStars",A,O),A.trim().replace(c[h.STAR],"")),L=(A,O)=>(o("replaceGTE0",A,O),A.trim().replace(c[O.includePrerelease?h.GTE0PRE:h.GTE0],"")),q=A=>(O,F,Y,Q,z,j,Z,te,N,U,J,se)=>(S(Y)?F="":S(Q)?F=`>=${Y}.0.0${A?"-0":""}`:S(z)?F=`>=${Y}.${Q}.0${A?"-0":""}`:j?F=`>=${F}`:F=`>=${F}${A?"-0":""}`,S(N)?te="":S(U)?te=`<${+N+1}.0.0-0`:S(J)?te=`<${N}.${+U+1}.0-0`:se?te=`<=${N}.${U}.${J}-${se}`:A?te=`<${N}.${U}.${+J+1}-0`:te=`<=${te}`,`${F} ${te}`.trim()),P=(A,O,F)=>{for(let Y=0;Y<A.length;Y++)if(!A[Y].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let Y=0;Y<A.length;Y++)if(o(A[Y].semver),A[Y].semver!==s.ANY&&A[Y].semver.prerelease.length>0){const Q=A[Y].semver;if(Q.major===O.major&&Q.minor===O.minor&&Q.patch===O.patch)return!0}return!1}return!0};return dm}var fm,H4;function Zf(){if(H4)return fm;H4=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,d){if(d=n(d),u instanceof e){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=u.match(d);if(!f)throw new TypeError(`Invalid comparator: ${u}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new l(f[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}fm=e;const n=Ry(),{safeRe:r,t:i}=Mh(),s=j9(),o=Qf(),l=Yn(),c=oi();return fm}var pm,z4;function e0(){if(z4)return pm;z4=1;const t=oi();return pm=(n,r,i)=>{try{r=new t(r,i)}catch{return!1}return r.test(n)},pm}var mm,q4;function Sse(){if(q4)return mm;q4=1;const t=oi();return mm=(n,r)=>new t(n,r).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),mm}var gm,W4;function $se(){if(W4)return gm;W4=1;const t=Yn(),e=oi();return gm=(r,i,s)=>{let o=null,l=null,c=null;try{c=new e(i,s)}catch{return null}return r.forEach(h=>{c.test(h)&&(!o||l.compare(h)===-1)&&(o=h,l=new t(o,s))}),o},gm}var bm,U4;function Ese(){if(U4)return bm;U4=1;const t=Yn(),e=oi();return bm=(r,i,s)=>{let o=null,l=null,c=null;try{c=new e(i,s)}catch{return null}return r.forEach(h=>{c.test(h)&&(!o||l.compare(h)===1)&&(o=h,l=new t(o,s))}),o},bm}var ym,V4;function jse(){if(V4)return ym;V4=1;const t=Yn(),e=oi(),n=Kf();return ym=(i,s)=>{i=new e(i,s);let o=new t("0.0.0");if(i.test(o)||(o=new t("0.0.0-0"),i.test(o)))return o;o=null;for(let l=0;l<i.set.length;++l){const c=i.set[l];let h=null;c.forEach(u=>{const d=new t(u.semver.version);switch(u.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!h||n(d,h))&&(h=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),h&&(!o||n(o,h))&&(o=h)}return o&&i.test(o)?o:null},ym}var xm,Y4;function Cse(){if(Y4)return xm;Y4=1;const t=oi();return xm=(n,r)=>{try{return new t(n,r).range||"*"}catch{return null}},xm}var wm,G4;function Fy(){if(G4)return wm;G4=1;const t=Yn(),e=Zf(),{ANY:n}=e,r=oi(),i=e0(),s=Kf(),o=Dy(),l=Py(),c=By();return wm=(u,d,f,p)=>{u=new t(u,p),d=new r(d,p);let m,g,b,y,w;switch(f){case">":m=s,g=l,b=o,y=">",w=">=";break;case"<":m=o,g=c,b=s,y="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,d,p))return!1;for(let S=0;S<d.set.length;++S){const E=d.set[S];let T=null,C=null;if(E.forEach(M=>{M.semver===n&&(M=new e(">=0.0.0")),T=T||M,C=C||M,m(M.semver,T.semver,p)?T=M:b(M.semver,C.semver,p)&&(C=M)}),T.operator===y||T.operator===w||(!C.operator||C.operator===y)&&g(u,C.semver))return!1;if(C.operator===w&&b(u,C.semver))return!1}return!0},wm}var _m,X4;function Ase(){if(X4)return _m;X4=1;const t=Fy();return _m=(n,r,i)=>t(n,r,">",i),_m}var vm,J4;function Ise(){if(J4)return vm;J4=1;const t=Fy();return vm=(n,r,i)=>t(n,r,"<",i),vm}var Tm,Q4;function Mse(){if(Q4)return Tm;Q4=1;const t=oi();return Tm=(n,r,i)=>(n=new t(n,i),r=new t(r,i),n.intersects(r,i)),Tm}var km,K4;function Lse(){if(K4)return km;K4=1;const t=e0(),e=si();return km=(n,r,i)=>{const s=[];let o=null,l=null;const c=n.sort((f,p)=>e(f,p,i));for(const f of c)t(f,r,i)?(l=f,o||(o=f)):(l&&s.push([o,l]),l=null,o=null);o&&s.push([o,null]);const h=[];for(const[f,p]of s)f===p?h.push(f):!p&&f===c[0]?h.push("*"):p?f===c[0]?h.push(`<=${p}`):h.push(`${f} - ${p}`):h.push(`>=${f}`);const u=h.join(" || "),d=typeof r.raw=="string"?r.raw:String(r);return u.length<d.length?u:r},km}var Sm,Z4;function Ose(){if(Z4)return Sm;Z4=1;const t=oi(),e=Zf(),{ANY:n}=e,r=e0(),i=si(),s=(d,f,p={})=>{if(d===f)return!0;d=new t(d,p),f=new t(f,p);let m=!1;e:for(const g of d.set){for(const b of f.set){const y=c(g,b,p);if(m=m||y!==null,y)continue e}if(m)return!1}return!0},o=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],c=(d,f,p)=>{if(d===f)return!0;if(d.length===1&&d[0].semver===n){if(f.length===1&&f[0].semver===n)return!0;p.includePrerelease?d=o:d=l}if(f.length===1&&f[0].semver===n){if(p.includePrerelease)return!0;f=l}const m=new Set;let g,b;for(const R of d)R.operator===">"||R.operator===">="?g=h(g,R,p):R.operator==="<"||R.operator==="<="?b=u(b,R,p):m.add(R.semver);if(m.size>1)return null;let y;if(g&&b){if(y=i(g.semver,b.semver,p),y>0)return null;if(y===0&&(g.operator!==">="||b.operator!=="<="))return null}for(const R of m){if(g&&!r(R,String(g),p)||b&&!r(R,String(b),p))return null;for(const D of f)if(!r(R,String(D),p))return!1;return!0}let w,S,E,T,C=b&&!p.includePrerelease&&b.semver.prerelease.length?b.semver:!1,M=g&&!p.includePrerelease&&g.semver.prerelease.length?g.semver:!1;C&&C.prerelease.length===1&&b.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(const R of f){if(T=T||R.operator===">"||R.operator===">=",E=E||R.operator==="<"||R.operator==="<=",g){if(M&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===M.major&&R.semver.minor===M.minor&&R.semver.patch===M.patch&&(M=!1),R.operator===">"||R.operator===">="){if(w=h(g,R,p),w===R&&w!==g)return!1}else if(g.operator===">="&&!r(g.semver,String(R),p))return!1}if(b){if(C&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===C.major&&R.semver.minor===C.minor&&R.semver.patch===C.patch&&(C=!1),R.operator==="<"||R.operator==="<="){if(S=u(b,R,p),S===R&&S!==b)return!1}else if(b.operator==="<="&&!r(b.semver,String(R),p))return!1}if(!R.operator&&(b||g)&&y!==0)return!1}return!(g&&E&&!b&&y!==0||b&&T&&!g&&y!==0||M||C)},h=(d,f,p)=>{if(!d)return f;const m=i(d.semver,f.semver,p);return m>0?d:m<0||f.operator===">"&&d.operator===">="?f:d},u=(d,f,p)=>{if(!d)return f;const m=i(d.semver,f.semver,p);return m<0?d:m>0||f.operator==="<"&&d.operator==="<="?f:d};return Sm=s,Sm}var $m,e3;function Rse(){if(e3)return $m;e3=1;const t=Mh(),e=Jf(),n=Yn(),r=S9(),i=fl(),s=use(),o=dse(),l=fse(),c=pse(),h=mse(),u=gse(),d=bse(),f=yse(),p=si(),m=xse(),g=wse(),b=Ny(),y=_se(),w=vse(),S=Kf(),E=Dy(),T=$9(),C=E9(),M=By(),R=Py(),D=j9(),$=Tse(),L=Zf(),q=oi(),P=e0(),A=Sse(),O=$se(),F=Ese(),Y=jse(),Q=Cse(),z=Fy(),j=Ase(),Z=Ise(),te=Mse(),N=Lse(),U=Ose();return $m={parse:i,valid:s,clean:o,inc:l,diff:c,major:h,minor:u,patch:d,prerelease:f,compare:p,rcompare:m,compareLoose:g,compareBuild:b,sort:y,rsort:w,gt:S,lt:E,eq:T,neq:C,gte:M,lte:R,cmp:D,coerce:$,Comparator:L,Range:q,satisfies:P,toComparators:A,maxSatisfying:O,minSatisfying:F,minVersion:Y,validRange:Q,outside:z,gtr:j,ltr:Z,intersects:te,simplifyRange:N,subset:U,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},$m}var t3;function Nse(){return t3||(t3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=Di(),n=Rse(),r=Ka();t.VersionStruct=(0,e.refine)((0,e.string)(),"Version",d=>(0,n.valid)(d)===null?`Expected SemVer version, got "${d}"`:!0),t.VersionRangeStruct=(0,e.refine)((0,e.string)(),"Version range",d=>(0,n.validRange)(d)===null?`Expected SemVer range, got "${d}"`:!0);function i(d){return(0,e.is)(d,t.VersionStruct)}t.isValidSemVerVersion=i;function s(d){return(0,e.is)(d,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(d){(0,r.assertStruct)(d,t.VersionStruct)}t.assertIsSemVerVersion=o;function l(d){(0,r.assertStruct)(d,t.VersionRangeStruct)}t.assertIsSemVerRange=l;function c(d,f){return(0,n.gt)(d,f)}t.gtVersion=c;function h(d,f){return(0,n.gtr)(d,f)}t.gtRange=h;function u(d,f){return(0,n.satisfies)(d,f,{includePrerelease:!0})}t.satisfiesVersionRange=u}(Rp)),Rp}var n3;function ur(){return n3||(n3=1,function(t){var e=ss&&ss.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=ss&&ss.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Ka(),t),n(T9(),t),n(Oy(),t),n(Kae(),t),n(Zae(),t),n(ese(),t),n(tse(),t),n(nse(),t),n(v9(),t),n(Xf(),t),n(rse(),t),n(ise(),t),n(ase(),t),n(Ly(),t),n(sse(),t),n(ose(),t),n(lse(),t),n(cse(),t),n(hse(),t),n(Nse(),t)}(ss)),ss}var Em={},r3;function Bi(){return r3||(r3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.getErrorStack=t.getErrorMessage=void 0;const e=ur(),n=s=>typeof s=="string"?s:s instanceof Error||(0,e.isObject)(s)&&(0,e.hasProperty)(s,"message")&&typeof s.message=="string"?s.message:"Unknown error.";t.getErrorMessage=n;const r=s=>{if(s instanceof Error)return s.stack};t.getErrorStack=r;class i extends Error{constructor(o,l){super(o),this.name="ParserError";const c=(0,t.getErrorStack)(l);c&&(this.stack=c)}}t.ParserError=i}(Em)),Em}var jm={},Wl={},i3;function Dse(){if(i3)return Wl;i3=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.iterate=void 0;const t=ur(),e=function*(n,r=32){for(let i=0;i<n.length;i+=r){const s=l=>{(0,t.assert)(l>=0,"Cannot skip a negative number of bytes."),(0,t.assert)(l%r===0,"Length must be a multiple of the size."),i+=l},o=n.subarray(i);yield{skip:s,value:o}}return{skip:()=>{},value:new Uint8Array}};return Wl.iterate=e,Wl}var ls={},Cm={},cs={},Vi={},a3;function Bse(){if(a3)return Vi;a3=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.padEnd=Vi.padStart=Vi.set=void 0;const t=ur(),e=32,n=(s,o,l)=>(0,t.concatBytes)([s.subarray(0,l),o,s.subarray(l+o.length)]);Vi.set=n;const r=(s,o=e)=>{const l=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([l,s])};Vi.padStart=r;const i=(s,o=e)=>{const l=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([s,l])};return Vi.padEnd=i,Vi}var s3;function pl(){return s3||(s3=1,function(t){var e=cs&&cs.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=cs&&cs.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Bse(),t)}(cs)),cs}var o3;function Pse(){return o3||(o3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.address=t.getAddress=void 0;const e=ur(),n=Bi(),r=pl(),i=s=>{const o=(0,e.createBytes)(s);return(0,e.assert)(o.length<=20,new n.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${o.length} bytes.`)),(0,r.padStart)(o,20)};t.getAddress=i,t.address={isDynamic:!1,isType:s=>s==="address",getByteLength(){return 32},encode({buffer:s,value:o,packed:l}){const c=(0,t.getAddress)(o);if(l)return(0,e.concatBytes)([s,c]);const h=(0,r.padStart)(c);return(0,e.concatBytes)([s,h])},decode({value:s}){return(0,e.add0x)((0,e.bytesToHex)(s.slice(12,32)))}}}(Cm)),Cm}var Am={},Im={},l3;function Hy(){return l3||(l3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fixedBytes=t.getByteLength=void 0;const e=ur(),n=Bi(),r=pl(),i=/^bytes([0-9]{1,2})$/u,s=o=>{const l=o.match(i)?.[1];(0,e.assert)(l,`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`);const c=Number(l);return(0,e.assert)(c>0&&c<=32,new n.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`)),c};t.getByteLength=s,t.fixedBytes={isDynamic:!1,isType(o){return i.test(o)},getByteLength(){return 32},encode({type:o,buffer:l,value:c,packed:h}){const u=(0,t.getByteLength)(o),d=(0,e.createBytes)(c);return(0,e.assert)(d.length<=u,new n.ParserError(`Expected a value of length ${u}, but received a value of length ${d.length}.`)),h?(0,e.concatBytes)([l,(0,r.padEnd)(d,u)]):(0,e.concatBytes)([l,(0,r.padEnd)(d)])},decode({type:o,value:l}){const c=(0,t.getByteLength)(o);return l.slice(0,c)}}}(Im)),Im}var Mm={},c3;function C9(){return c3||(c3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tuple=t.getTupleElements=void 0;const e=ur(),n=Bi(),r=zy(),i=/^\((.+)\)$/u,s=l=>i.test(l),o=l=>{(0,e.assert)(l.startsWith("(")&&l.endsWith(")"),new n.ParserError(`Invalid tuple type. Expected tuple type, but received "${l}".`));const c=[];let h="",u=0;for(let d=1;d<l.length-1;d++){const f=l[d];f===","&&u===0?(c.push(h.trim()),h=""):(h+=f,f==="("?u+=1:f===")"&&(u-=1))}return h.trim()&&c.push(h.trim()),c};t.getTupleElements=o,t.tuple={isDynamic(l){return(0,t.getTupleElements)(l).some(h=>{const u=(0,r.getParser)(h);return(0,r.isDynamicParser)(u,h)})},isType(l){return s(l)},getByteLength(l){return(0,r.isDynamicParser)(this,l)?32:(0,t.getTupleElements)(l).reduce((h,u)=>h+(0,r.getParser)(u).getByteLength(u),0)},encode({type:l,buffer:c,value:h,packed:u,tight:d}){const f=(0,t.getTupleElements)(l);return(0,r.pack)({types:f,values:h,byteArray:c,packed:u,tight:d})},decode({type:l,value:c,skip:h}){const u=(0,t.getTupleElements)(l),d=this.getByteLength(l)-32;return h(d),(0,r.unpack)(u,c)}}}(Mm)),Mm}var h3;function Fse(){return h3||(h3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.array=t.getTupleType=t.getArrayType=t.isArrayType=void 0;const e=ur(),n=Bi(),r=zy(),i=pl(),s=Hy(),o=C9(),l=/^(?<type>.*)\[(?<length>\d*?)\]$/u,c=d=>l.test(d);t.isArrayType=c;const h=d=>{const f=d.match(l);return(0,e.assert)(f?.groups?.type,new n.ParserError(`Invalid array type. Expected an array type, but received "${d}".`)),[f.groups.type,f.groups.length?parseInt(f.groups.length,10):void 0]};t.getArrayType=h;const u=(d,f)=>`(${new Array(f).fill(d).join(",")})`;t.getTupleType=u,t.array={isDynamic(d){const[f,p]=(0,t.getArrayType)(d);return p===void 0||(0,r.isDynamicParser)((0,r.getParser)(f),f)},isType(d){return(0,t.isArrayType)(d)},getByteLength(d){(0,e.assert)((0,t.isArrayType)(d),new n.ParserError(`Expected an array type, but received "${d}".`));const[f,p]=(0,t.getArrayType)(d);return!(0,r.isDynamicParser)(this,d)&&p!==void 0?o.tuple.getByteLength((0,t.getTupleType)(f,p)):32},encode({type:d,buffer:f,value:p,packed:m,tight:g}){const[b,y]=(0,t.getArrayType)(d);if((0,e.assert)(!m||!(0,t.isArrayType)(b),new n.ParserError("Cannot pack nested arrays.")),m&&(0,r.isDynamicParser)((0,r.getParser)(b),b))return(0,r.pack)({types:new Array(p.length).fill(b),values:p,byteArray:f,packed:m,arrayPacked:!0,tight:g});if(y)return(0,e.assert)(y===p.length,new n.ParserError(`Array length does not match type length. Expected a length of ${y}, but received ${p.length}.`)),o.tuple.encode({type:(0,t.getTupleType)(b,y),buffer:f,value:p,packed:s.fixedBytes.isType(b)&&g,tight:g});if(m)return(0,r.pack)({types:new Array(p.length).fill(b),values:p,byteArray:f,packed:s.fixedBytes.isType(b)&&g,arrayPacked:!0,tight:g});const w=(0,i.padStart)((0,e.numberToBytes)(p.length));return(0,r.pack)({types:new Array(p.length).fill(b),values:p,byteArray:(0,e.concatBytes)([f,w]),packed:m,tight:g})},decode({type:d,value:f,...p}){const[m,g]=(0,t.getArrayType)(d);if(g){const y=o.tuple.decode({type:(0,t.getTupleType)(m,g),value:f,...p});return(0,e.assert)(y.length===g,new n.ParserError(`Array length does not match type length. Expected a length of ${g}, but received ${y.length}.`)),y}const b=(0,e.bytesToNumber)(f.subarray(0,32));return(0,r.unpack)(new Array(b).fill(m),f.subarray(32))}}}(Am)),Am}var Lm={},Om={},u3;function A9(){return u3||(u3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.number=t.getBigInt=t.assertNumberLength=t.getLength=t.isSigned=void 0;const e=ur(),n=Bi(),r=pl(),i=/^u?int(?<length>[0-9]*)?$/u,s=h=>!h.startsWith("u");t.isSigned=s;const o=h=>{if(h==="int"||h==="uint")return 256;const u=h.match(i);(0,e.assert)(u?.groups?.length,new n.ParserError(`Invalid number type. Expected a number type, but received "${h}".`));const d=parseInt(u.groups.length,10);return(0,e.assert)(d>=8&&d<=256,new n.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${h}".`)),(0,e.assert)(d%8===0,new n.ParserError(`Invalid number length. Expected a multiple of 8, but received "${h}".`)),d};t.getLength=o;const l=(h,u)=>{const d=(0,t.getLength)(u),f=BigInt(2)**BigInt(d-((0,t.isSigned)(u)?1:0))-BigInt(1);if((0,t.isSigned)(u)){(0,e.assert)(h>=-(f+BigInt(1))&&h<=f,new n.ParserError(`Number "${h}" is out of range for type "${u}".`));return}(0,e.assert)(h<=f,new n.ParserError(`Number "${h}" is out of range for type "${u}".`))};t.assertNumberLength=l;const c=h=>{try{return(0,e.createBigInt)(h)}catch{throw new n.ParserError(`Invalid number. Expected a valid number value, but received "${h}".`)}};t.getBigInt=c,t.number={isDynamic:!1,isType(h){return i.test(h)},getByteLength(){return 32},encode({type:h,buffer:u,value:d,packed:f}){const p=(0,t.getBigInt)(d);if((0,t.assertNumberLength)(p,h),(0,t.isSigned)(h)){if(f){const m=(0,t.getLength)(h)/8;return(0,e.concatBytes)([u,(0,e.signedBigIntToBytes)(p,m)])}return(0,e.concatBytes)([u,(0,r.padStart)((0,e.signedBigIntToBytes)(p,32))])}if(f){const m=(0,t.getLength)(h)/8;return(0,e.concatBytes)([u,(0,r.padStart)((0,e.bigIntToBytes)(p),m)])}return(0,e.concatBytes)([u,(0,r.padStart)((0,e.bigIntToBytes)(p))])},decode({type:h,value:u}){const d=u.subarray(0,32);if((0,t.isSigned)(h)){const p=(0,e.bytesToSignedBigInt)(d);return(0,t.assertNumberLength)(p,h),p}const f=(0,e.bytesToBigInt)(d);return(0,t.assertNumberLength)(f,h),f}}}(Om)),Om}var d3;function Hse(){return d3||(d3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bool=t.getBooleanValue=void 0;const e=Di(),n=ur(),r=Bi(),i=A9(),s=(0,e.coerce)((0,e.boolean)(),(0,e.union)([(0,e.literal)("true"),(0,e.literal)("false")]),l=>l==="true"),o=l=>{try{return(0,e.create)(l,s)?BigInt(1):BigInt(0)}catch{throw new r.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${l}".`)}};t.getBooleanValue=o,t.bool={isDynamic:!1,isType:l=>l==="bool",getByteLength(){return 32},encode({buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getBooleanValue)(c);return h?(0,n.concatBytes)([l,(0,n.bigIntToBytes)(d)]):i.number.encode({type:"uint256",buffer:l,value:d,packed:h,tight:u})},decode(l){return i.number.decode({...l,type:"uint256"})===BigInt(1)}}}(Lm)),Lm}var Ul={},f3;function I9(){if(f3)return Ul;f3=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.bytes=void 0;const t=ur(),e=pl();return Ul.bytes={isDynamic:!0,isType:n=>n==="bytes",getByteLength(){return 32},encode({buffer:n,value:r,packed:i}){const s=(0,t.createBytes)(r);if(i)return(0,t.concatBytes)([n,s]);const o=Math.ceil(s.byteLength/32)*32;return(0,t.concatBytes)([n,(0,e.padStart)((0,t.numberToBytes)(s.byteLength)),(0,e.padEnd)(s,o)])},decode({value:n}){const r=n.subarray(0,32),i=(0,t.bytesToNumber)(r);return n.slice(32,32+i)}},Ul}var Rm={},p3;function zse(){return p3||(p3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.getFunction=void 0;const e=Di(),n=ur(),r=Bi(),i=Hy(),s=(0,e.coerce)((0,e.object)({address:n.StrictHexStruct,selector:n.StrictHexStruct}),(0,e.union)([n.StrictHexStruct,(0,e.instance)(Uint8Array)]),l=>{const c=(0,n.createBytes)(l);return(0,n.assert)(c.length===24,new r.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${c.length} bytes.`)),{address:(0,n.bytesToHex)(c.subarray(0,20)),selector:(0,n.bytesToHex)(c.subarray(20,24))}}),o=l=>{const c=(0,e.create)(l,s);return(0,n.concatBytes)([(0,n.hexToBytes)(c.address),(0,n.hexToBytes)(c.selector)])};t.getFunction=o,t.fn={isDynamic:!1,isType:l=>l==="function",getByteLength(){return 32},encode({buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getFunction)(c);return i.fixedBytes.encode({type:"bytes24",buffer:l,value:d,packed:h,tight:u})},decode({value:l}){return{address:(0,n.bytesToHex)(l.slice(0,20)),selector:(0,n.bytesToHex)(l.slice(20,24))}}}}(Rm)),Rm}var Nm={},m3;function qse(){return m3||(m3=1,Object.defineProperty(Nm,"__esModule",{value:!0})),Nm}var Vl={},g3;function Wse(){if(g3)return Vl;g3=1,Object.defineProperty(Vl,"__esModule",{value:!0}),Vl.string=void 0;const t=ur(),e=I9();return Vl.string={isDynamic:!0,isType:n=>n==="string",getByteLength(){return 32},encode({buffer:n,value:r,packed:i,tight:s}){return e.bytes.encode({type:"bytes",buffer:n,value:(0,t.stringToBytes)(r),packed:i,tight:s})},decode(n){return(0,t.bytesToString)(e.bytes.decode(n))}},Vl}var b3;function Use(){return b3||(b3=1,function(t){var e=ls&&ls.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=ls&&ls.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Pse(),t),n(Fse(),t),n(Hse(),t),n(I9(),t),n(Hy(),t),n(zse(),t),n(A9(),t),n(qse(),t),n(Wse(),t),n(C9(),t)}(ls)),ls}var y3;function zy(){return y3||(y3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.isDynamicParser=t.getParser=void 0;const e=ur(),n=Bi(),r=Dse(),i=Use(),s=pl(),o=u=>{const d={address:i.address,array:i.array,bool:i.bool,bytes:i.bytes,fixedBytes:i.fixedBytes,function:i.fn,number:i.number,string:i.string,tuple:i.tuple},f=d[u];if(f)return f;const p=Object.values(d).find(m=>m.isType(u));if(p)return p;throw new n.ParserError(`The type "${u}" is not supported.`)};t.getParser=o;const l=(u,d)=>{const{isDynamic:f}=u;return typeof f=="function"?f(d):f};t.isDynamicParser=l;const c=({types:u,values:d,packed:f=!1,tight:p=!1,arrayPacked:m=!1,byteArray:g=new Uint8Array})=>{(0,e.assert)(u.length===d.length,new n.ParserError(`The number of types (${u.length}) does not match the number of values (${d.length}).`));const{staticBuffer:b,dynamicBuffer:y,pointers:w}=u.reduce(({staticBuffer:T,dynamicBuffer:C,pointers:M},R,D)=>{const $=(0,t.getParser)(R),L=d[D];if(f||m||!(0,t.isDynamicParser)($,R))return{staticBuffer:$.encode({buffer:T,value:L,type:R,packed:f,tight:p}),dynamicBuffer:C,pointers:M};const q=(0,e.concatBytes)([T,new Uint8Array(32)]),P=$.encode({buffer:C,value:L,type:R,packed:f,tight:p});return{staticBuffer:q,dynamicBuffer:P,pointers:[...M,{position:T.length,pointer:C.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,e.assert)(!f&&!m||y.length===0,new n.ParserError("Invalid pack state."));const S=b.length,E=w.reduce((T,{pointer:C,position:M})=>{const R=(0,s.padStart)((0,e.numberToBytes)(S+C));return(0,s.set)(T,R,M)},b);return(0,e.concatBytes)([g,E,y])};t.pack=c;const h=(u,d)=>{const f=(0,r.iterate)(d);return u.map(p=>{const{value:{value:m,skip:g},done:b}=f.next();(0,e.assert)(!b,new n.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${p}".`));const y=(0,t.getParser)(p);if((0,t.isDynamicParser)(y,p)){const S=(0,e.bytesToNumber)(m.subarray(0,32)),E=d.subarray(S);return y.decode({type:p,value:E,skip:g})}return y.decode({type:p,value:m,skip:g})})};t.unpack=h}(jm)),jm}var x3;function Vse(){return x3||(x3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSingle=t.decode=t.encodePacked=t.encodeSingle=t.encode=void 0;const e=ur(),n=Bi(),r=zy(),i=(h,u,d,f)=>{try{return(0,r.pack)({types:h,values:u,packed:d,tight:f})}catch(p){throw p instanceof n.ParserError?new n.ParserError(`Unable to encode value: ${p.message}`,p):new n.ParserError(`An unexpected error occurred: ${(0,n.getErrorMessage)(p)}`,p)}};t.encode=i;const s=(h,u)=>(0,t.encode)([h],[u]);t.encodeSingle=s;const o=(h,u,d)=>(0,t.encode)(h,u,!0,d);t.encodePacked=o;const l=(h,u)=>{const d=(0,e.createBytes)(u);try{return(0,r.unpack)(h,d)}catch(f){throw f instanceof n.ParserError?new n.ParserError(`Unable to decode value: ${f.message}`,f):new n.ParserError(`An unexpected error occurred: ${(0,n.getErrorMessage)(f)}`,f)}};t.decode=l;const c=(h,u)=>{const d=(0,t.decode)([h],u);return(0,e.assert)(d.length===1,new n.ParserError("Decoded value array has unexpected length.")),d[0]};t.decodeSingle=c}(vp)),vp}var hs={},Dm={},w3;function Yse(){return w3||(w3=1,Object.defineProperty(Dm,"__esModule",{value:!0})),Dm}var _3;function Gse(){return _3||(_3=1,function(t){var e=hs&&hs.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=hs&&hs.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Yse(),t)}(hs)),hs}var v3;function M9(){return v3||(v3=1,function(t){var e=as&&as.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(i,s);(!l||("get"in l?!i.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,l)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),n=as&&as.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(Vse(),t),n(Bi(),t),n(Gse(),t)}(as)),as}var Gr={},Bm={},bt={},T3;function Xse(){if(T3)return bt;T3=1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(bt,"__esModule",{value:!0}),bt.notImplemented=bt.bitMask=void 0,bt.isBytes=n,bt.abytes=r,bt.abool=i,bt.numberToHexUnpadded=s,bt.hexToNumber=o,bt.bytesToHex=h,bt.hexToBytes=f,bt.bytesToNumberBE=p,bt.bytesToNumberLE=m,bt.numberToBytesBE=g,bt.numberToBytesLE=b,bt.numberToVarBytesBE=y,bt.ensureBytes=w,bt.concatBytes=S,bt.equalBytes=E,bt.utf8ToBytes=T,bt.inRange=M,bt.aInRange=R,bt.bitLen=D,bt.bitGet=$,bt.bitSet=L,bt.createHmacDrbg=O,bt.validateObject=Y,bt.memoized=z;const t=BigInt(0),e=BigInt(1);function n(j){return j instanceof Uint8Array||ArrayBuffer.isView(j)&&j.constructor.name==="Uint8Array"}function r(j){if(!n(j))throw new Error("Uint8Array expected")}function i(j,Z){if(typeof Z!="boolean")throw new Error(j+" boolean expected, got "+Z)}function s(j){const Z=j.toString(16);return Z.length&1?"0"+Z:Z}function o(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);return j===""?t:BigInt("0x"+j)}const l=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",c=Array.from({length:256},(j,Z)=>Z.toString(16).padStart(2,"0"));function h(j){if(r(j),l)return j.toHex();let Z="";for(let te=0;te<j.length;te++)Z+=c[j[te]];return Z}const u={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(j){if(j>=u._0&&j<=u._9)return j-u._0;if(j>=u.A&&j<=u.F)return j-(u.A-10);if(j>=u.a&&j<=u.f)return j-(u.a-10)}function f(j){if(typeof j!="string")throw new Error("hex string expected, got "+typeof j);if(l)return Uint8Array.fromHex(j);const Z=j.length,te=Z/2;if(Z%2)throw new Error("hex string expected, got unpadded hex of length "+Z);const N=new Uint8Array(te);for(let U=0,J=0;U<te;U++,J+=2){const se=d(j.charCodeAt(J)),be=d(j.charCodeAt(J+1));if(se===void 0||be===void 0){const xe=j[J]+j[J+1];throw new Error('hex string expected, got non-hex character "'+xe+'" at index '+J)}N[U]=se*16+be}return N}function p(j){return o(h(j))}function m(j){return r(j),o(h(Uint8Array.from(j).reverse()))}function g(j,Z){return f(j.toString(16).padStart(Z*2,"0"))}function b(j,Z){return g(j,Z).reverse()}function y(j){return f(s(j))}function w(j,Z,te){let N;if(typeof Z=="string")try{N=f(Z)}catch(J){throw new Error(j+" must be hex string or Uint8Array, cause: "+J)}else if(n(Z))N=Uint8Array.from(Z);else throw new Error(j+" must be hex string or Uint8Array");const U=N.length;if(typeof te=="number"&&U!==te)throw new Error(j+" of length "+te+" expected, got "+U);return N}function S(...j){let Z=0;for(let N=0;N<j.length;N++){const U=j[N];r(U),Z+=U.length}const te=new Uint8Array(Z);for(let N=0,U=0;N<j.length;N++){const J=j[N];te.set(J,U),U+=J.length}return te}function E(j,Z){if(j.length!==Z.length)return!1;let te=0;for(let N=0;N<j.length;N++)te|=j[N]^Z[N];return te===0}function T(j){if(typeof j!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(j))}const C=j=>typeof j=="bigint"&&t<=j;function M(j,Z,te){return C(j)&&C(Z)&&C(te)&&Z<=j&&j<te}function R(j,Z,te,N){if(!M(Z,te,N))throw new Error("expected valid "+j+": "+te+" <= n < "+N+", got "+Z)}function D(j){let Z;for(Z=0;j>t;j>>=e,Z+=1);return Z}function $(j,Z){return j>>BigInt(Z)&e}function L(j,Z,te){return j|(te?e:t)<<BigInt(Z)}const q=j=>(e<<BigInt(j))-e;bt.bitMask=q;const P=j=>new Uint8Array(j),A=j=>Uint8Array.from(j);function O(j,Z,te){if(typeof j!="number"||j<2)throw new Error("hashLen must be a number");if(typeof Z!="number"||Z<2)throw new Error("qByteLen must be a number");if(typeof te!="function")throw new Error("hmacFn must be a function");let N=P(j),U=P(j),J=0;const se=()=>{N.fill(1),U.fill(0),J=0},be=(...He)=>te(U,N,...He),xe=(He=P(0))=>{U=be(A([0]),He),N=be(),He.length!==0&&(U=be(A([1]),He),N=be())},we=()=>{if(J++>=1e3)throw new Error("drbg: tried 1000 values");let He=0;const ft=[];for(;He<Z;){N=be();const pt=N.slice();ft.push(pt),He+=N.length}return S(...ft)};return(He,ft)=>{se(),xe(He);let pt;for(;!(pt=ft(we()));)xe();return se(),pt}}const F={bigint:j=>typeof j=="bigint",function:j=>typeof j=="function",boolean:j=>typeof j=="boolean",string:j=>typeof j=="string",stringOrUint8Array:j=>typeof j=="string"||n(j),isSafeInteger:j=>Number.isSafeInteger(j),array:j=>Array.isArray(j),field:(j,Z)=>Z.Fp.isValid(j),hash:j=>typeof j=="function"&&Number.isSafeInteger(j.outputLen)};function Y(j,Z,te={}){const N=(U,J,se)=>{const be=F[J];if(typeof be!="function")throw new Error("invalid validator function");const xe=j[U];if(!(se&&xe===void 0)&&!be(xe,j))throw new Error("param "+String(U)+" is invalid. Expected "+J+", got "+xe)};for(const[U,J]of Object.entries(Z))N(U,J,!1);for(const[U,J]of Object.entries(te))N(U,J,!0);return j}const Q=()=>{throw new Error("not implemented")};bt.notImplemented=Q;function z(j){const Z=new WeakMap;return(te,...N)=>{const U=Z.get(te);if(U!==void 0)return U;const J=j(te,...N);return Z.set(te,J),J}}return bt}var Xr={},k3;function Jse(){if(k3)return Xr;k3=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.aoutput=Xr.anumber=Xr.aexists=Xr.abytes=void 0;const t=Wd();return Xr.abytes=t.abytes,Xr.aexists=t.aexists,Xr.anumber=t.anumber,Xr.aoutput=t.aoutput,Xr}var S3;function L9(){return S3||(S3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.assertBytes=t.assertBool=t.utf8ToBytes=t.toHex=t.createView=t.concatBytes=t.bytesToHex=void 0,t.bytesToUtf8=s,t.hexToBytes=o,t.equalsBytes=l,t.wrapHash=c;const e=Xse();Object.defineProperty(t,"assertBool",{enumerable:!0,get:function(){return e.abool}});const n=Jse();Object.defineProperty(t,"assertBytes",{enumerable:!0,get:function(){return n.abytes}});const r=Wd();var i=Wd();Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return i.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return i.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return i.createView}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return i.bytesToHex}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return i.utf8ToBytes}});function s(h){if(!(h instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof h}`);return new TextDecoder().decode(h)}function o(h){const u=h.startsWith("0x")?h.substring(2):h;return(0,r.hexToBytes)(u)}function l(h,u){if(h.length!==u.length)return!1;for(let d=0;d<h.length;d++)if(h[d]!==u[d])return!1;return!0}function c(h){return u=>((0,n.abytes)(u),h(u))}}(Bm)),Bm}var $3;function Lh(){if($3)return Gr;$3=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.compare=Gr.concat=Gr.toHex=Gr.toBytes=void 0;const t=L9();function e(s){return s instanceof Uint8Array?s:typeof s=="string"?(0,t.hexToBytes)(s):new Uint8Array(s)}Gr.toBytes=e;function n(s){return typeof s=="string"?((0,t.hexToBytes)(s),s.replace(/^(0x)?/,"0x")):s instanceof Uint8Array?"0x"+(0,t.bytesToHex)(s):"0x"+(0,t.bytesToHex)(new Uint8Array(s))}Gr.toHex=n;function r(s){return(0,t.concatBytes)(...s.map(e))}Gr.concat=r;function i(s,o){const l=BigInt(n(s))-BigInt(n(o));return l>0?1:l<0?-1:0}return Gr.compare=i,Gr}var bn={},Yi={},Jr={},E3;function Qse(){if(E3)return Jr;E3=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.keccak512=Jr.keccak384=Jr.keccak256=Jr.keccak224=void 0;const t=k9(),e=L9();return Jr.keccak224=(0,e.wrapHash)(t.keccak_224),Jr.keccak256=(()=>{const n=(0,e.wrapHash)(t.keccak_256);return n.create=t.keccak_256.create,n})(),Jr.keccak384=(0,e.wrapHash)(t.keccak_384),Jr.keccak512=(0,e.wrapHash)(t.keccak_512),Jr}var j3;function O9(){if(j3)return Yi;j3=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.standardNodeHash=Yi.standardLeafHash=Yi.keccak256=void 0;const t=M9(),e=Qse(),n=Lh();function r(o){return(0,n.toHex)((0,e.keccak256)((0,n.toBytes)(o)))}Yi.keccak256=r;function i(o,l){return r(r((0,t.encode)(o,l)))}Yi.standardLeafHash=i;function s(o,l){return r((0,n.concat)([o,l].sort(n.compare)))}return Yi.standardNodeHash=s,Yi}var mr={},C3;function t0(){if(C3)return mr;C3=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.invariant=mr.validateArgument=mr.InvalidArgumentError=mr.InvariantError=mr.throwError=void 0;function t(s){throw new Error(s)}mr.throwError=t;class e extends Error{constructor(o){super(o),this.name="InvariantError"}}mr.InvariantError=e;class n extends Error{constructor(o){super(o),this.name="InvalidArgumentError"}}mr.InvalidArgumentError=n;function r(s,o){if(!s)throw new n(o)}mr.validateArgument=r;function i(s,o){if(!s)throw new e(o)}return mr.invariant=i,mr}var A3;function qy(){if(A3)return bn;A3=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.renderMerkleTree=bn.isValidMerkleTree=bn.processMultiProof=bn.getMultiProof=bn.processProof=bn.getProof=bn.makeMerkleTree=void 0;const t=Lh(),e=O9(),n=t0(),r=E=>2*E+1,i=E=>2*E+2,s=E=>E>0?Math.floor((E-1)/2):(0,n.throwError)("Root has no parent"),o=E=>E>0?E-(-1)**(E%2):(0,n.throwError)("Root has no siblings"),l=(E,T)=>T>=0&&T<E.length,c=(E,T)=>l(E,r(T)),h=(E,T)=>l(E,T)&&!c(E,T),u=E=>(0,t.toBytes)(E).length===32,d=(E,T)=>void(h(E,T)||(0,n.throwError)("Index is not a leaf")),f=E=>void(u(E)||(0,n.throwError)("Merkle tree nodes must be Uint8Array of length 32"));function p(E,T=e.standardNodeHash){E.forEach(f),(0,n.validateArgument)(E.length!==0,"Expected non-zero number of leaves");const C=new Array(2*E.length-1);for(const[M,R]of E.entries())C[C.length-1-M]=(0,t.toHex)(R);for(let M=C.length-1-E.length;M>=0;M--)C[M]=T(C[r(M)],C[i(M)]);return C}bn.makeMerkleTree=p;function m(E,T){d(E,T);const C=[];for(;T>0;)C.push((0,t.toHex)(E[o(T)])),T=s(T);return C}bn.getProof=m;function g(E,T,C=e.standardNodeHash){return f(E),T.forEach(f),(0,t.toHex)(T.reduce(C,E))}bn.processProof=g;function b(E,T){T.forEach(D=>d(E,D)),T.sort((D,$)=>$-D),(0,n.validateArgument)(T.slice(1).every((D,$)=>D!==T[$]),"Cannot prove duplicated index");const C=Array.from(T),M=[],R=[];for(;C.length>0&&C[0]>0;){const D=C.shift(),$=o(D),L=s(D);$===C[0]?(R.push(!0),C.shift()):(R.push(!1),M.push((0,t.toHex)(E[$]))),C.push(L)}return T.length===0&&M.push((0,t.toHex)(E[0])),{leaves:T.map(D=>(0,t.toHex)(E[D])),proof:M,proofFlags:R}}bn.getMultiProof=b;function y(E,T=e.standardNodeHash){E.leaves.forEach(f),E.proof.forEach(f),(0,n.validateArgument)(E.proof.length>=E.proofFlags.filter(R=>!R).length,"Invalid multiproof format"),(0,n.validateArgument)(E.leaves.length+E.proof.length===E.proofFlags.length+1,"Provided leaves and multiproof are not compatible");const C=Array.from(E.leaves),M=Array.from(E.proof);for(const R of E.proofFlags){const D=C.shift(),$=R?C.shift():M.shift();(0,n.invariant)(D!==void 0&&$!==void 0),C.push(T(D,$))}return(0,n.invariant)(C.length+M.length===1),(0,t.toHex)(C.pop()??M.shift())}bn.processMultiProof=y;function w(E,T=e.standardNodeHash){for(const[C,M]of E.entries()){if(!u(M))return!1;const R=r(C),D=i(C);if(D>=E.length){if(R<E.length)return!1}else if((0,t.compare)(M,T(E[R],E[D])))return!1}return E.length>0}bn.isValidMerkleTree=w;function S(E){(0,n.validateArgument)(E.length!==0,"Expected non-zero number of nodes");const T=[[0,[]]],C=[];for(;T.length>0;){const[M,R]=T.pop();C.push(R.slice(0,-1).map(D=>["   ","│  "][D]).join("")+R.slice(-1).map(D=>["└─ ","├─ "][D]).join("")+M+") "+(0,t.toHex)(E[M])),i(M)<E.length&&(T.push([i(M),R.concat(0)]),T.push([r(M),R.concat(1)]))}return C.join(`
`)}return bn.renderMerkleTree=S,bn}var Yl={},Gl={},I3;function Kse(){return I3||(I3=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.defaultOptions=void 0,Gl.defaultOptions={sortLeaves:!0}),Gl}var M3;function R9(){if(M3)return Yl;M3=1,Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.MerkleTreeImpl=void 0;const t=Lh(),e=qy(),n=Kse(),r=t0();class i{constructor(o,l,c,h){this.tree=o,this.values=l,this.leafHash=c,this.nodeHash=h,(0,r.validateArgument)(l.every(({value:u})=>typeof u!="number"),"Leaf values cannot be numbers"),this.hashLookup=Object.fromEntries(l.map(({treeIndex:u},d)=>[o[u],d]))}static prepare(o,l={},c,h){const u=l.sortLeaves??n.defaultOptions.sortLeaves,d=o.map((m,g)=>({value:m,valueIndex:g,hash:c(m)}));u&&d.sort((m,g)=>(0,t.compare)(m.hash,g.hash));const f=(0,e.makeMerkleTree)(d.map(m=>m.hash),h),p=o.map(m=>({value:m,treeIndex:0}));for(const[m,{valueIndex:g}]of d.entries())p[g].treeIndex=f.length-m-1;return[f,p]}get root(){return this.tree[0]}get length(){return this.values.length}at(o){return this.values.at(o)?.value}render(){return(0,e.renderMerkleTree)(this.tree)}*entries(){for(const[o,{value:l}]of this.values.entries())yield[o,l]}validate(){this.values.forEach((o,l)=>this._validateValueAt(l)),(0,r.invariant)((0,e.isValidMerkleTree)(this.tree,this.nodeHash),"Merkle tree is invalid")}leafLookup(o){const l=this.hashLookup[this.leafHash(o)];return(0,r.validateArgument)(typeof l<"u","Leaf is not in tree"),l}getProof(o){const l=typeof o=="number"?o:this.leafLookup(o);this._validateValueAt(l);const{treeIndex:c}=this.values[l],h=(0,e.getProof)(this.tree,c);return(0,r.invariant)(this._verify(this.tree[c],h),"Unable to prove value"),h}getMultiProof(o){const l=o.map(u=>typeof u=="number"?u:this.leafLookup(u));for(const u of l)this._validateValueAt(u);const c=l.map(u=>this.values[u].treeIndex),h=(0,e.getMultiProof)(this.tree,c);return(0,r.invariant)(this._verifyMultiProof(h),"Unable to prove values"),{leaves:h.leaves.map(u=>this.values[this.hashLookup[u]].value),proof:h.proof,proofFlags:h.proofFlags}}verify(o,l){return this._verify(this._leafHash(o),l)}verifyMultiProof(o){return this._verifyMultiProof({leaves:o.leaves.map(l=>this._leafHash(l)),proof:o.proof,proofFlags:o.proofFlags})}_validateValueAt(o){const l=this.values[o];(0,r.validateArgument)(l!==void 0,"Index out of bounds"),(0,r.invariant)(this.tree[l.treeIndex]===this.leafHash(l.value),"Merkle tree does not contain the expected value")}_leafHash(o){if(typeof o=="number"){const l=this.values[o];(0,r.validateArgument)(l!==void 0,"Index out of bounds"),o=l.value}return this.leafHash(o)}_verify(o,l){return this.root===(0,e.processProof)(o,l,this.nodeHash)}_verifyMultiProof(o){return this.root===(0,e.processMultiProof)(o,this.nodeHash)}}return Yl.MerkleTreeImpl=i,Yl}var L3;function Zse(){if(L3)return is;L3=1,Object.defineProperty(is,"__esModule",{value:!0}),is.SimpleMerkleTree=is.formatLeaf=void 0;const t=M9(),e=Lh(),n=qy(),r=R9(),i=t0();function s(l){return(0,e.toHex)((0,t.encode)(["bytes32"],[l]))}is.formatLeaf=s;class o extends r.MerkleTreeImpl{static of(c,h={}){const[u,d]=r.MerkleTreeImpl.prepare(c,h,s,h.nodeHash);return new o(u,d,s,h.nodeHash)}static load(c,h){(0,i.validateArgument)(c.format==="simple-v1",`Unknown format '${c.format}'`),(0,i.validateArgument)(h==null!=(c.hash=="custom"),h?"Data does not expect a custom node hashing function":"Data expects a custom node hashing function");const u=new o(c.tree,c.values,s,h);return u.validate(),u}static verify(c,h,u,d){return(0,e.toHex)(c)===(0,n.processProof)(s(h),u,d)}static verifyMultiProof(c,h,u){return(0,e.toHex)(c)===(0,n.processMultiProof)(h,u)}dump(){return{format:"simple-v1",tree:this.tree,values:this.values.map(({value:c,treeIndex:h})=>({value:(0,e.toHex)(c),treeIndex:h})),...this.nodeHash?{hash:"custom"}:{}}}}return is.SimpleMerkleTree=o,is}var Xl={},O3;function eoe(){if(O3)return Xl;O3=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.StandardMerkleTree=void 0;const t=Lh(),e=qy(),n=R9(),r=O9(),i=t0();class s extends n.MerkleTreeImpl{constructor(l,c,h){super(l,c,u=>(0,r.standardLeafHash)(h,u)),this.tree=l,this.values=c,this.leafEncoding=h}static of(l,c,h={}){const[u,d]=n.MerkleTreeImpl.prepare(l,h,f=>(0,r.standardLeafHash)(c,f));return new s(u,d,c)}static load(l){(0,i.validateArgument)(l.format==="standard-v1",`Unknown format '${l.format}'`),(0,i.validateArgument)(l.leafEncoding!==void 0,"Expected leaf encoding");const c=new s(l.tree,l.values,l.leafEncoding);return c.validate(),c}static verify(l,c,h,u){return(0,t.toHex)(l)===(0,e.processProof)((0,r.standardLeafHash)(c,h),u)}static verifyMultiProof(l,c,h){return(0,t.toHex)(l)===(0,e.processMultiProof)({leaves:h.leaves.map(u=>(0,r.standardLeafHash)(c,u)),proof:h.proof,proofFlags:h.proofFlags})}dump(){return{format:"standard-v1",leafEncoding:this.leafEncoding,tree:this.tree,values:this.values}}}return Xl.StandardMerkleTree=s,Xl}var R3;function toe(){return R3||(R3=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardMerkleTree=t.SimpleMerkleTree=void 0;var e=Zse();Object.defineProperty(t,"SimpleMerkleTree",{enumerable:!0,get:function(){return e.SimpleMerkleTree}});var n=eoe();Object.defineProperty(t,"StandardMerkleTree",{enumerable:!0,get:function(){return n.StandardMerkleTree}})}(_p)),_p}var Vo=toe();const noe=`graph TD
    R1["R₁<br/>(Request 1)"] --> H1["H₁ = hash(R₁)"]
    R2["R₂<br/>(Request 2)"] --> H2["H₂ = hash(R₂)"]
    R3["R₃<br/>(Request 3)"] --> H3["H₃ = hash(R₃)"]
    R4["R₄<br/>(Request 4)"] --> H4["H₄ = hash(R₄)"]
    
    H1 --> H12["H₁₂ = hash(H₁ + H₂)"]
    H2 --> H12
    H3 --> H34["H₃₄ = hash(H₃ + H₄)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H₁₂ + H₃₄)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    
    class R1,R2,R3,R4 requestNode
    class H1,H2,H3,H4,H12,H34 hashNode
    class ROOT rootNode`,roe=`graph TD
    R1["R₁<br/>(Request 1)"] --> H1["H₁ = hash(R₁)"]
    R2["R₂<br/>(Request 2)"] --> H2["H₂ = hash(R₂)"]
    R3["R₃<br/>(Request 3)"] --> H3["H₃ = hash(R₃)"]
    R4["R₄<br/>(Request 4)"] --> H4["H₄ = hash(R₄)"]
    
    H1 --> H12["H₁₂ = hash(H₁ + H₂)"]
    H2 --> H12
    H3 --> H34["H₃₄ = hash(H₃ + H₄)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H₁₂ + H₃₄)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    classDef proofPath fill:#fef3c7,stroke:#f59e0b,stroke-width:3px
    classDef proofNode fill:#ecfdf5,stroke:#10b981,stroke-width:2px
    
    class R1,R2,R4 requestNode
    class H1,H2 hashNode
    class ROOT rootNode
    class R3 proofPath
    class H3,H34 proofPath
    class H4,H12 proofNode`,ioe={title:" Merkle Trees for LLM Batching - The fundamentals",publishing_date:"2025-07-29",tokenID:38,category:"blockchain",secondaryCategory:"ai",description:"I explore the fundamentals of Merkle trees for efficient LLM batching. Learn cryptographic proofs, batch verification, and AI service settlement optimization."},pu=["0xUser1Address...","0xUser2Address...","0xUser3Address...","0xUser4Address...","0xUser5Address..."],N3=["Analyze the sentiment of this customer review: 'The product is amazing!'","Translate this text to German: 'Hello, how are you today?'","Write a short Python function to calculate fibonacci numbers","Explain quantum computing in simple terms","Generate a creative story about a time-traveling cat","Summarize the benefits of renewable energy","Create a marketing strategy for a new mobile app","Debug this JavaScript code: console.log(hello world)"],Ts={merkleRoot:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",requests:[{id:1,owner:"0xUser1Address...",prompt:"Analyze the sentiment of this customer review: 'The product is amazing!'",leafData:{id:1,timestamp:"2024-01-15T10:30:00.000Z",tokenCount:150,wallet:"0xUser1Address..."},leafHash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"},{id:2,owner:"0xUser2Address...",prompt:"Translate this text to German: 'Hello, how are you today?'",leafData:{id:2,timestamp:"2024-01-15T10:32:00.000Z",tokenCount:120,wallet:"0xUser2Address..."},leafHash:"0x2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c"},{id:3,owner:"0xUser3Address...",prompt:"Write a short Python function to calculate fibonacci numbers",leafData:{id:3,timestamp:"2024-01-15T10:35:00.000Z",tokenCount:180,wallet:"0xUser3Address..."},leafHash:"0x3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d"}]},aoe=async t=>{const e=Ts.requests[t],n=Ts.requests.map(l=>[l.leafData.id,l.leafData.timestamp,l.leafData.tokenCount,l.leafData.wallet]),r=["uint256","string","uint256","string"],i=Vo.StandardMerkleTree.of(n,r),s=i.getProof(t),o=i.root;return{leafIndex:t,leafData:e.leafData,leafHash:e.leafHash,proof:s.map((l,c)=>({data:l,position:c%2===0?"left":"right"})),root:o}},soe=async t=>{try{const n=Ts.requests.map(d=>[d.leafData.id,d.leafData.timestamp,d.leafData.tokenCount,d.leafData.wallet]),r=["uint256","string","uint256","string"],i=Vo.StandardMerkleTree.of(n,r),s=[t.leafData.id,t.leafData.timestamp,t.leafData.tokenCount,t.leafData.wallet],o=t.proof.map(d=>d.data),l=Vo.StandardMerkleTree.verify(i.root,r,s,o);let c=!1,h=-1;for(const[d,f]of i.entries())if(JSON.stringify(f)===JSON.stringify(s)){c=!0,h=d;break}const u=["✅ Used OpenZeppelin StandardMerkleTree.verify()",`📋 Leaf Data: [${s.join(", ")}]`,`🌳 Tree Root: ${i.root.substring(0,16)}...`,`🔍 Proof Root: ${t.root.substring(0,16)}...`,`📍 Leaf Index: ${h} (expected: ${t.leafIndex})`,`🎯 Root Match: ${i.root===t.root}`,`🔍 Leaf Exists: ${c}`,`${l?"✅ Verification: VALID":"❌ Verification: INVALID"}`];return{isValid:l&&c&&i.root===t.root,message:l&&c?"Proof is valid! Alice's payment is confirmed.":"Proof is invalid! This payment cannot be verified.",steps:u}}catch(e){return console.error("Proof validation failed:",e),{isValid:!1,message:"Error validating proof: "+e.message,steps:[]}}},ooe=()=>{const[t,e]=je.useState(0),[n,r]=je.useState(null),[i,s]=je.useState(""),[o,l]=je.useState(null),[c,h]=je.useState("generate"),u=async()=>{try{const p=await aoe(t);r(p)}catch(p){console.error("Error generating proof:",p)}},d=async()=>{try{const p=JSON.parse(i),m=await soe(p);l(m)}catch(p){console.error("Proof validation failed:",p),l({isValid:!1,message:"Invalid JSON format",steps:[]})}},f=async p=>{try{await navigator.clipboard.writeText(p)}catch(m){console.error("Failed to copy to clipboard:",m)}};return a.jsxs("div",{className:K({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[a.jsx("h3",{className:K({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:"🔍 Interactive Proof Demo: Alice's Story"}),a.jsxs("div",{className:K({marginBottom:"20px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #d1d5db"}),children:[a.jsxs("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:["Sample Batch (Merkle Root: ",Ts.merkleRoot.substring(0,20),"...)"]}),a.jsx("div",{className:K({display:"grid",gap:"8px"}),children:Ts.requests.map((p,m)=>a.jsxs("div",{className:K({padding:"8px 12px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"13px"}),children:[a.jsx("strong",{children:p.owner})," (R",a.jsx("sub",{children:m+1}),"): ",p.prompt," - ",p.leafData.tokenCount," tokens"]},p.id))})]}),a.jsx("div",{className:K({marginBottom:"16px",borderBottom:"1px solid #e5e7eb"}),children:a.jsxs("div",{className:K({display:"flex",gap:"0"}),children:[a.jsx("button",{onClick:()=>h("generate"),className:K({padding:"8px 16px",backgroundColor:c==="generate"?"#f9fafb":"transparent",color:c==="generate"?"#374151":"#6b7280",border:c==="generate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:c==="generate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:c==="generate"?"medium":"normal"}),children:"Generate Proof"}),a.jsx("button",{onClick:()=>h("validate"),className:K({padding:"8px 16px",backgroundColor:c==="validate"?"#f9fafb":"transparent",color:c==="validate"?"#374151":"#6b7280",border:c==="validate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:c==="validate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:c==="validate"?"medium":"normal"}),children:"Validate Proof"})]})}),c==="generate"&&a.jsxs("div",{children:[a.jsxs("div",{className:K({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[a.jsx("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 1: Select User to Generate Proof"}),a.jsx("select",{value:t,onChange:p=>e(Number(p.target.value)),className:K({width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",marginBottom:"12px"}),children:Ts.requests.map((p,m)=>a.jsxs("option",{value:m,children:[p.owner," - ",p.prompt]},p.id))}),a.jsx("button",{onClick:u,className:K({padding:"8px 16px",backgroundColor:"#374151",color:"white",border:"1px solid #374151",borderRadius:"4px",cursor:"pointer",fontSize:"14px","&:hover":{backgroundColor:"#4b5563",borderColor:"#4b5563"}}),children:"Generate Merkle Proof"})]}),n&&a.jsxs("div",{className:K({padding:"16px",backgroundColor:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[a.jsxs("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"12px",color:"#374151"}),children:["Generated Proof for ",Ts.requests[t].owner]}),a.jsxs("div",{className:K({marginBottom:"12px"}),children:[a.jsx("strong",{children:"Proof Path:"}),a.jsx("div",{className:K({fontSize:"12px",fontFamily:"monospace",marginTop:"4px"}),children:n.proof.map((p,m)=>a.jsxs("div",{children:["Level ",m+1,": ",p.data.substring(0,20),"... (",p.position,")"]},m))})]}),a.jsxs("div",{className:K({marginBottom:"12px"}),children:[a.jsx("strong",{children:"Complete Proof JSON:"}),a.jsxs("div",{className:K({position:"relative"}),children:[a.jsx("pre",{className:K({fontSize:"11px",fontFamily:"monospace",backgroundColor:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid #d1d5db",overflow:"auto",maxHeight:"200px",marginTop:"4px"}),children:JSON.stringify(n,null,2)}),a.jsx("button",{onClick:()=>f(JSON.stringify(n,null,2)),className:K({position:"absolute",top:"8px",right:"8px",padding:"4px 8px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),children:"Copy"})]})]})]})]}),c==="validate"&&a.jsxs("div",{children:[a.jsxs("div",{className:K({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[a.jsx("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 2: Validate a Proof"}),a.jsx("label",{className:K({display:"block",fontSize:"14px",marginBottom:"8px"}),children:"Paste Proof JSON:"}),a.jsx("textarea",{value:i,onChange:p=>s(p.target.value),placeholder:"Paste the complete proof JSON here...",className:K({width:"100%",height:"120px",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace",marginBottom:"12px",resize:"vertical"})}),a.jsx("button",{onClick:d,disabled:!i.trim(),className:K({padding:"8px 16px",backgroundColor:i.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:i.trim()?"pointer":"not-allowed",fontSize:"14px","&:hover":i.trim()?{backgroundColor:"#4b5563"}:{}}),children:"Validate Proof"})]}),o&&a.jsxs("div",{className:K({padding:"16px",backgroundColor:o.isValid?"#f9fafb":"#fef2f2",borderRadius:"4px",border:`1px solid ${o.isValid?"#d1d5db":"#fecaca"}`}),children:[a.jsx("h4",{className:K({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Validation Result"}),a.jsx("div",{className:K({fontSize:"14px",fontWeight:"medium",marginBottom:"12px",color:o.isValid?"#166534":"#dc2626"}),children:o.message}),o.steps.length>0&&a.jsxs("div",{children:[a.jsx("strong",{children:"Verification Steps:"}),a.jsx("div",{className:K({marginTop:"8px"}),children:o.steps.map((p,m)=>a.jsx("div",{className:K({fontSize:"12px",fontFamily:"monospace",backgroundColor:"#fff",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb",marginBottom:"4px"}),children:p},m))})]})]})]})]})},loe=async t=>{if(t.length===0)return"";const e=t.map(i=>[i.leafData.id,i.leafData.timestamp,i.leafData.tokenCount,i.leafData.wallet]),n=["uint256","string","uint256","string"];return Vo.StandardMerkleTree.of(e,n).root},coe=async t=>{if(t.length===0)return"";const e=t.map(s=>[s.leafData.id,s.leafData.timestamp,s.leafData.tokenCount,s.leafData.wallet]),n=["uint256","string","uint256","string"],r=Vo.StandardMerkleTree.of(e,n);let i=`Merkle Tree (OpenZeppelin StandardMerkleTree):
`;i+=`Root: ${r.root.substring(0,16)}...
`,i+=`
Tree Structure:
`;for(const[s,o]of r.entries()){const l=r.leafHash(o);i+=`Leaf ${s+1}: ${l.substring(0,16)}... (${o[0]}, ${o[3]})
`}return i},D3=4,hoe=()=>{const[t,e]=je.useState([]),[n,r]=je.useState(""),[i,s]=je.useState(""),[o,l]=je.useState(!1),[c,h]=je.useState(1),[u,d]=je.useState(""),[f,p]=je.useState(pu[0]),m=async(w,S)=>{const E={id:c,timestamp:new Date().toISOString(),tokenCount:Math.floor(Math.random()*200)+100,wallet:w},T=[E.id,E.timestamp,E.tokenCount,E.wallet],C=["uint256","string","uint256","string"],R=Vo.StandardMerkleTree.of([T],C).leafHash(T),D=["The sentiment of this review is positive, indicating customer satisfaction.","Hallo, wie geht es dir heute?","Here's a Python function: def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)","Quantum computing uses quantum mechanical phenomena like superposition and entanglement to process information.","Once upon a time, a curious cat named Whiskers discovered a mysterious clock that could bend time...","Renewable energy reduces carbon emissions, creates jobs, and provides sustainable power solutions.","Focus on user experience, social media marketing, and influencer partnerships for app growth.","Fixed code: console.log('hello world'); // Missing quotes around string"],$=D[Math.floor(Math.random()*D.length)],L={id:c,prompt:S,model:"gpt-4-turbo",recipient:w,estimatedTokens:E.tokenCount,response:$,leafData:E,leafHash:R};return e(q=>[...q,L]),h(q=>q+1),d(""),L};je.useEffect(()=>{(async()=>{if(t.length>=D3&&!o){const S=await loe(t),E=await coe(t);r(S),s(E),l(!0)}})()},[t,o]);const g=async()=>{u.trim()&&await m(f,u)},b=async()=>{const w=N3[Math.floor(Math.random()*N3.length)],S=pu[Math.floor(Math.random()*pu.length)];p(S),await m(S,w)},y=()=>{e([]),r(""),s(""),l(!1),h(1),d("")};return a.jsxs("div",{className:K({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[a.jsx("h3",{className:K({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:"🧪 Interactive LLM Batch Processing Demo"}),a.jsx("div",{className:K({marginBottom:"20px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"}),children:a.jsxs("p",{className:K({fontSize:"14px",color:"#1e40af",marginBottom:"8px"}),children:[a.jsx("strong",{children:"How it works:"})," Send LLM requests and get immediate responses. After ",D3," ","requests, a Merkle tree is automatically created for cost-efficient blockchain settlement."]})}),a.jsxs("div",{className:K({marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[a.jsx("h4",{className:K({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem"}),children:"Send LLM Request"}),a.jsxs("div",{className:K({marginBottom:"0.75rem"}),children:[a.jsx("label",{className:K({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Wallet Address:"}),a.jsx("select",{value:f,onChange:w=>p(w.target.value),className:K({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.85rem"}),children:pu.map(w=>a.jsx("option",{value:w,children:w},w))})]}),a.jsxs("div",{className:K({marginBottom:"0.75rem"}),children:[a.jsx("label",{className:K({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Prompt:"}),a.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),placeholder:"Enter your LLM prompt...",className:K({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),onKeyPress:w=>w.key==="Enter"&&g()})]}),a.jsxs("div",{className:K({display:"flex",gap:"0.5rem",fontSize:"0.85rem"}),children:[a.jsx("button",{onClick:g,disabled:!u.trim(),className:K({padding:"0.5rem 1rem",backgroundColor:u.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:u.trim()?"pointer":"not-allowed",transition:"background-color 0.2s","&:hover":{backgroundColor:u.trim()?"#4b5563":"#9ca3af"}}),children:"Send Request"}),a.jsx("button",{onClick:b,className:K({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#4b5563"}}),children:"Send Random Request"}),a.jsx("button",{onClick:y,className:K({padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#dc2626"}}),children:"Reset Demo"})]})]}),o&&a.jsxs("div",{className:K({padding:"0.75rem",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"4px",marginBottom:"1rem"}),children:[a.jsx("strong",{children:"🌳 Merkle Root:"})," ",a.jsx("code",{className:K({fontSize:"0.8rem"}),children:n}),a.jsx("div",{className:K({fontSize:"0.8rem",color:"#166534",marginTop:"0.25rem"}),children:"All requests can now be processed with a single blockchain transaction!"}),i&&a.jsxs("div",{className:K({marginTop:"0.75rem"}),children:[a.jsx("strong",{children:"Tree Structure:"}),a.jsx("pre",{className:K({fontSize:"0.7rem",fontFamily:"monospace",backgroundColor:"#fff",padding:"0.5rem",borderRadius:"4px",border:"1px solid #bbf7d0",marginTop:"0.25rem",lineHeight:"1.4",overflow:"auto"}),children:i})]})]}),a.jsx("div",{className:K({maxHeight:"400px",overflowY:"auto"}),children:t.length===0?a.jsx("div",{className:K({padding:"1.5rem",textAlign:"center",color:"#6b7280",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:"No requests yet. Send your first LLM request above! 🚀"}):t.map((w,S)=>a.jsxs("div",{className:K({padding:"1rem",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"4px",marginBottom:"0.75rem"}),children:[a.jsxs("div",{className:K({marginBottom:"0.5rem"}),children:[a.jsx("div",{className:K({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Prompt (not part of Merkle-Leafs):"}),a.jsx("div",{className:K({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",marginBottom:"0.3rem",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.prompt}),a.jsx("div",{className:K({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Response (not part of Merkle-Leafs):"}),a.jsx("div",{className:K({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.response})]}),w.leafData&&a.jsxs("div",{className:K({marginBottom:"0.5rem"}),children:[a.jsxs("div",{className:K({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Data R",a.jsx("sub",{children:S+1})," (used for hash):"]}),a.jsx("pre",{className:K({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.45rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",overflow:"auto",lineHeight:"1.3"}),children:JSON.stringify(w.leafData,null,2)})]}),w.leafHash&&a.jsxs("div",{children:[a.jsxs("div",{className:K({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Hash H",a.jsx("sub",{children:S+1}),":"]}),a.jsx("code",{className:K({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#f3f4f6",padding:"0.22rem 0.5rem",borderRadius:"3px",border:"1px solid #e5e7eb",wordBreak:"break-all",display:"block"}),children:w.leafHash})]})]},w.id))})]})};function uoe(){return a.jsxs("article",{children:[a.jsx("section",{children:a.jsx("p",{children:a.jsx("strong",{children:"Update on 2025-08-26: I substantially overhauled this blog post to improve clarity and focus on the Merkle tree topic."})})}),a.jsx("section",{children:a.jsx("p",{children:"The integration of Large Language Models (LLMs) into my website is an exciting possibility. But one problem remains: How can I reduce the blockchain transaction costs when users need multiple LLM API calls in an application? In this blog post, I will explore how it might become possible with Merkle trees."})}),a.jsxs("section",{children:[a.jsx("h2",{children:"From My Image Generator to LLM Batching"}),a.jsxs("p",{children:["I've already built an AI image generator that works on the blockchain - you can try it on my"," ",a.jsx("a",{href:"/imagegen",children:"image generation page"}),". Users pay with their wallet, and my"," ",a.jsx("a",{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:"GenImNFT contract"})," ","handles the payment and delivery automatically. It works great for single images."]}),a.jsx("p",{children:"But when I started thinking about LLM text generation, I run into trouble. If someone wants to analyze 10 documents or generate multiple pieces of content, they'd need 10 separate blockchain transactions. These are substantial gas fees, plus the hassle of confirming each transaction in their wallet."}),a.jsxs("p",{children:["An interesting solution lies in a mathematical concept called ",a.jsx("strong",{children:"Merkle trees"})," - think of it like a business expense report system. When you travel for business, you don't submit a separate expense report for every coffee or taxi ride. Instead, you collect all your receipts and submit them together in one report. The accounting department can still verify each individual expense, but you only go through the submission process once."]}),a.jsx("p",{children:"Merkle trees work similarly on the blockchain: you can bundle multiple LLM requests together and submit them as one transaction, while still maintaining cryptographic proof that each individual request is valid and accounted for."}),a.jsx("p",{children:"To see this in action, try the interactive demo below. Send a few LLM requests and watch how each one would normally require its own blockchain transaction. Once you reach 4 requests, you'll see how the Merkle tree automatically bundles everything into a single transaction:"}),a.jsx(hoe,{})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"How Merkle Trees Make This Magic Possible"}),a.jsx("p",{children:"In our expense report analogy, the accounting department needs to verify individual receipts. But how do they do this efficiently? Here's where Merkle Trees provide the mathematical solution."}),a.jsx("p",{children:"The mapping is straightforward:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"individual receipts become Merkle leaves (each LLM request gets its own cryptographic fingerprint)"}),a.jsx("li",{children:"summary pages become internal nodes (groups of receipts get combined into summary fingerprints)"}),a.jsx("li",{children:"the master receipt becomes the Merkle root (one final fingerprint represents the entire batch)"}),a.jsx("li",{children:"proof of purchase becomes a Merkle proof (you can prove any receipt belongs without showing others)"})]}),a.jsxs("p",{children:['But what exactly is a "cryptographic fingerprint"? When we say each LLM request gets processed through a hash function, we mean it goes through a special mathematical algorithm called'," ",a.jsx("a",{href:"https://en.wikipedia.org/wiki/SHA-3",children:"Keccak256"})," (the same one Ethereum uses). For example, if you input ",a.jsx("code",{children:'{id: 1, timestamp: "2024-01-15T10:30:00Z", tokens: 150, wallet: "0xUser1..."}'}),", you get output like ",a.jsx("code",{children:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"}),"."]}),a.jsx("p",{children:"This process has four key properties that make it perfect for our use case:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"it's deterministic (same input always produces the same hash)"}),a.jsx("li",{children:"collision resistant (nearly impossible for two different inputs to produce the same hash)"}),a.jsx("li",{children:"fixed length (always 64 characters regardless of input size)"}),a.jsx("li",{children:"irreversible (you cannot recreate the original data from the hash alone)"})]}),a.jsx("h3",{children:"Building up the Merkle Tree"}),a.jsx("p",{children:"A Merkle tree is then built up step by step. Let's say we have 4 LLM requests from our batching example. We now build the tree in three steps:"}),a.jsxs("ol",{children:[a.jsx("li",{children:"First, each request gets its own hash (H₁, H₂, H₃, H₄). "}),a.jsx("li",{children:"Then we pair them up - combine H₁+H₂ into H₁₂, and H₃+H₄ into H₃₄."}),a.jsx("li",{children:"Finally, we create the root by combining H₁₂+H₃₄ into the final ROOT hash. This ROOT hash is like the master receipt number that represents all 4 requests."})]}),a.jsx("p",{children:"Here's what this tree-building process looks like visually:"}),a.jsx(_1,{definition:noe,title:"Merkle Tree Mathematical Foundation"}),a.jsx("p",{children:"As you can see in the diagram above, the ROOT hash represents all 4 requests in a single value. This means instead of needing 4 separate blockchain transactions (one for each request), we need just 1 transaction to register the entire batch. The ROOT hash enables us to register thousands of LLM requests with just one blockchain transaction while maintaining cryptographic proof of each individual request."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"Proving Individual Transactions with Merkle Proofs"}),a.jsx("p",{children:"Now that we've seen how to batch LLM requests into a Merkle tree, there is actually another cool feature possible. The user can verify the validity of the tree with fairly reduced information."}),a.jsxs("p",{children:["A Merkle proof is a cryptographic proof that allows the user, we name her Alice, to demonstrate that her transaction is included in the Merkle tree without revealing any other transactions. To prove that Alice's transaction R",a.jsx("sub",{children:"3"}),' is in the tree, she provides a "proof path" - the minimum set of hash values needed to reconstruct the path from her leaf to the root:']}),a.jsxs("figure",{children:[a.jsx(_1,{definition:roe,title:"🔍 Merkle Proof Path for Request 3 (R₃)"}),a.jsxs("figcaption",{children:["Visualization of the Merkle proof for R",a.jsx("sub",{children:"3"}),": Alice needs to provide the request and proof siblings that are highlighted in green. The hashes that are highlighted in orange can be calculated from the information. Finally, she can verify if the calculated root is the same as the root she was provided. If they are the same, her request is stored in the merkle tree."]})]}),a.jsx("p",{children:"This elegant mathematical verification proves Alice's transaction is authentic without revealing any other transaction details. In the little demonstrator below, you can test in a simple example how the proof can be generated and validated."}),a.jsx(ooe,{})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"From Problem to Solution"}),a.jsx("p",{children:"This brings us to the end of this blog post. We started this journey with a significant cost problem: someone wanting to send 10 LLM requests would face significant gas fees alone, plus the hassle of confirming 10 separate transactions in their wallet. For any practical LLM application on the blockchain, this creates an immediate barrier to adoption."}),a.jsx("p",{children:"We saw how Merkle trees provide an elegant mathematical solution that transforms this experience entirely. Those same 10 LLM requests can now be bundled into a single blockchain transaction, reducing gas costs by 90% and eliminating the multi-transaction friction. Users get immediate LLM responses while cryptographic proofs ensure every request is verifiable and secure."}),a.jsx("p",{children:"This isn't just theory - it's the foundation for my new LLM assistant. In the next post, I'll show you how I built such a system with smart contracts, batching services, and the corresponding frontend integration. Stay tuned!"})]})]})}const B3=Object.freeze(Object.defineProperty({__proto__:null,default:uoe,meta:ioe},Symbol.toStringTag,{value:"Module"})),doe={publishing_date:"2025-03-09",title:"Is mirror.xyz a thing ?",category:"webdev",secondaryCategory:"blockchain",description:"I discover Mirror.xyz - a decentralized publishing platform combining Medium-like writing with Ethereum monetization. ENS domains and crypto wallets enable seamless creator support."};function P3(t){const e={a:"a",em:"em",p:"p",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:a.jsxs(e.em,{children:["The original post on mirror can be found ",a.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/2rSj34fa8cyhADVEI0p_fVO25d-hCQ6AqC38QGBsik4?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"."]})}),`
`,a.jsxs(e.p,{children:["Over the last few weeks I kept investigating different ways to my website and to publish content. For the moment I am really happy with the tradtional web2 setup where we I host the static website and voila. However, I recently stumbled across ",a.jsx(e.a,{href:"https://mirror.xyz/",children:"mirror.xyz"})," and I am intruiged. It feels very much like other publishing platforms like ",a.jsx(e.a,{href:"https://medium.com/",children:"medium"}),". You write a post (like this one) and publish it. With the right ens name and metamask wallet the whole login experience is really smooth. Now the neat thing comes in with the financials. It does not really cost you anything to publish your post which is already a nice break from the usual web3 world where even breathing costs you money. But the neat thing is that people can support you as a creator by mint and liking your post. All of this is deeply integrated into the euthereum eco system and the low fees are enabled by the ",a.jsx(e.a,{href:"https://www.optimism.io/",children:"optimism chain"}),"."]}),`
`,a.jsx(e.p,{children:"This all inspires new approaches to publishing in a very decentralized way. You publish, people can verify how you are and payment is also included. This takes a lot of the creepiness of advertisement based platforms away. So I think that I will start to cross post these posts to mirror and see how it goes."}),`
`,a.jsxs(e.p,{children:["The original post on mirror can be found ",a.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/2rSj34fa8cyhADVEI0p_fVO25d-hCQ6AqC38QGBsik4?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"."]})]})}function foe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(P3,{...t})}):P3(t)}const F3=Object.freeze(Object.defineProperty({__proto__:null,default:foe,frontmatter:doe},Symbol.toStringTag,{value:"Module"})),poe={publishing_date:"2025-01-06",title:"Moving old lectures",category:"quantum",secondaryCategory:"webdev",description:"I migrate academic lectures from LaTeX to modern web formats. Discover solutions for handling equations, references, and static site generation in JavaScript environments."};function H3(t){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"In my time in academia, I gave a few lectures on various topics. They are saved as latex, markdown, jupyter notebook, whatever you want. But to get started, I decided to move over a number of lectures on AMO that I gave for several years."}),`
`,a.jsx(e.p,{children:"I had them all saved on a website called Authorea and could export them directly as latex. So what could be easier than just importing them right ?"}),`
`,a.jsx(e.h2,{children:"Challenge 1: Loading the markdown"}),`
`,a.jsxs(e.p,{children:["It was really quite straight forward to convert the files through pandoc with the command ",a.jsx(e.code,{children:"pandoc MY__INPUT_FILE.tex -s -o MY_FILE.md"}),". However, once you have markdown I have to import it into the website. And it is really at this stage where my little python world crumbles. You have the habit that files are yours and any access from any script is identical. However, within the world of javascript, I suddenly had to think about strange things like clients / servers / build times etc. In the end, I chose a solution similiar to the one described by ",a.jsx(e.a,{href:"https://vike.dev/markdown",children:"vike"})," with a little script that converts the markdown into a json file. This json file is then loaded into the website without the need of any ",a.jsx(e.code,{children:"fs"}),"."]}),`
`,a.jsx(e.h2,{children:"Challenge 2: Equations and references"}),`
`,a.jsx(e.p,{children:"The first challenge, already existed for the blogs in general. But now I also had to handle equations and references. To render them you need a surprising amount of extensions to remark including:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.a,{href:"https://www.npmjs.com/package/rehype-katex",children:"rehype-katex"})," for compiling the equations."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.a,{href:"https://github.com/remarkjs/remark-gfm",children:"remark-gfm"})," for references in footnotes"]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.a,{href:"https://www.npmjs.com/package/remark-math",children:"remark-math"})," for compiling equations."]}),`
`]}),`
`,a.jsx(e.p,{children:"Despite all of those packages I needed to write a processing script that removed equation labels, equation alignements and also keep the spacing right. All in all it is nicer to use latex for long documents ..."}),`
`,a.jsx(e.h2,{children:"Challenge 3: Images"}),`
`,a.jsxs(e.p,{children:["Now I was already quite proud about the result, but then I realized that the images were not loading. Remember how I was loading markdown into a ",a.jsx(e.code,{children:"json"})," ? Well this messed up the references to images in production. So I had to copy the images into public folder. Further, I had to find a way to keep the images at an appropiate size. This worked nicely with the ",a.jsx(e.code,{children:"img"})," link, but to have this you must allow for ",a.jsx(e.a,{href:"https://www.npmjs.com/package/rehype-raw",children:"rehype-raw"}),". But then it was all good."]}),`
`,a.jsx(e.h2,{children:"Conclusion"}),`
`,a.jsxs(e.p,{children:["Building up this kind of content management is really only for the curious. Otherwise, projects like docusaurus or astro are much more suited. But now I have a cute little system puzzled together and can extend it at will. All of this with a very limited amount of complexity. FWIW, the code can be ",a.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io",children:"found here"}),"."]})]})}function moe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(H3,{...t})}):H3(t)}const z3=Object.freeze(Object.defineProperty({__proto__:null,default:moe,frontmatter:poe},Symbol.toStringTag,{value:"Module"})),goe={publishing_date:"2025-05-20",title:"Generating AI images, paying anonymously and little",category:"blockchain",description:"I implement anonymous micro-payments for AI image generation using Ethereum Layer-2. See how to connect blockchain payments with serverless AI for sustainable, privacy-focused services."};function q3(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["As I wrote already in one of my ",a.jsx(e.a,{href:"6",children:"previous posts"}),", I have set up a small image generator on my website. The whole thing is hosted in Europe and I am using open source models. The system is running on a serverless setup, which is also hosted in Europe. The costs are low and I am happy with the setup. But to make it sustainable, I need to charge the users for the images at least as much as I get charged."]}),`
`,a.jsxs(e.p,{children:['I do not want to go with advertisement or anything like that. To test the waters, I have recently set up a support button to "support" the website. This experiment proofed that it Layer-2 solutions on ethereum are nowadays super cheap and up for task. Feel free to have a look into my note over ',a.jsx(e.a,{href:"7",children:"here"}),"."]}),`
`,a.jsx(e.p,{children:"In the last few week I was able to tie the two ingredients (the AI system and the blockchain) together and I will describe the setup here."}),`
`,a.jsx(e.h2,{children:"The challenge"}),`
`,a.jsxs(e.p,{children:["Nowadays it costs roughly 5 to 6 cents to generate an image with services like ",a.jsx(e.a,{href:"https://cloud.ionos.de/managed/ai-model-hub",children:"Ionos"})," or ",a.jsx(e.a,{href:"https://deepinfra.com/",children:"deepinfra"}),". Therefore, I wondered if it was possible to implement a payment system with similiar cost but with anonymous web3 payment systems instead of Stripe etc. This meant mostly that I had to solve two major challenges:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Challenge 1:"})," How could I connect the ethereum payment systems to the serverless systems."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Challenge 2:"})," How could I minimize the fees and remain competitive ?"]}),`
`]}),`
`,a.jsx(e.h2,{children:"Connect payments to the AI serverless system"}),`
`,a.jsx(e.p,{children:'This part actually required quite a bit of try and error. At first I thought that I could simply tell the external serverless system to "listen" to an ethereum event on the contract. However, this would have required a constant listener and would have been too expensive.'}),`
`,a.jsxs(e.p,{children:["In the second step, I though about oracle systems like ",a.jsx(e.a,{href:"https://chain.link/",children:"Chainlink"}),". However, this came with a few shortcomings:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"With chainlink you have to pay 3 cents per request. This is substantial overhead."}),`
`,a.jsxs(e.li,{children:["The only chainlink service that was really appropiate would have been ",a.jsx(e.a,{href:"https://chain.link/functions",children:"chainlink functions"}),". However, this one needs that external API to answer within 9 seconds, which is not possible with the current AI setup, which takes up to 30 seconds to generate the images."]}),`
`]}),`
`,a.jsx(e.p,{children:"I therefore decided to set up the contract on my own."}),`
`,a.jsx(e.h3,{children:"The Smart NFT contract: Bridging Blockchain and AI"}),`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x9859431b682e861b19e87Db14a04944BC747AB6d#code",children:a.jsx(e.code,{children:"GenImNFT"})})," contract is the heart of my solution. It functions as an automated intermediary between users who want AI-generated images and the system that creates these images. Here are its key features:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"NFT Creation:"}),' Users can purchase (or "mint") an NFT for a small fee (currently about 10 cents in ETH). This NFT initially contains a placeholder image.']}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Intelligent Image Updates:"})," Once a user has paid, the contract stores the empty NFT and signals that an image can be added. When a new image is updated by a separate wallet, the contract updates the NFT with the new image link and records that this update has occurred. No further changes to the image are possible by external wallets afterwards."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Automatic Payment:"})," The contract automatically pays the wallet that provided the image once the image has been updated. This happens directly within the blockchain, without requiring separate payment processing."]}),`
`]}),`
`]}),`
`,a.jsx(e.h3,{children:"Using the contract"}),`
`,a.jsxs(e.p,{children:["I could then use the contract for the ",a.jsx(e.a,{href:"../imagegen",children:"image generation"}),` in a fairly straight-forward fashion which handles both the creation of the NFT and the image generation. When a user enters a prompt and clicks "Mint & Generate," the component first calls the contract's safeMint function, sending along the required payment (around 10 cents in ETH). This transaction creates a new NFT with a temporary placeholder image.`]}),`
`,a.jsx(e.p,{children:"After a successful mint, the component extracts the newly created token ID from the transaction receipt. This token ID uniquely identifies the NFT that needs to be updated. The component then sends this token ID along with the user's prompt to a serverless API function that handles the AI image generation. This process is similar to the previous setup, but now the serverless function has been extended to update the NFT with the generated image using a dedicated wallet."}),`
`,a.jsx(e.p,{children:"The payment system works in two steps: first, the user pays the contract when minting the NFT; then, when the image is generated and the NFT is updated, the contract automatically releases payment to the wallet that submitted the image. This ensures that users only pay for successfully generated images, and image providers are compensated only after delivering the image."}),`
`,a.jsx(e.h2,{children:"The total costs"}),`
`,a.jsxs(e.p,{children:["All in all, the costs for the serverless system and the transactions is almost negligible. On this part, I built up directly on the very positive experience I had with the ",a.jsx(e.a,{href:"7",children:"support button"})," that works on the ",a.jsx(e.a,{href:"https://www.optimism.io/",children:"optimism"})," chain."]}),`
`,a.jsx(e.p,{children:"If I wanted to optimize the system, it would most likely be possible to offer the service for 1 cents above the price charged by the image generation services. However, for the moment I have set up a buffer against the rather hefty fluctuations of ethereum such that I can currently offer the service for roughly 10 cents an image."}),`
`,a.jsx(e.h2,{children:"Some nice side effects of the system"}),`
`,a.jsxs(e.p,{children:["As I set up the system, I discovered the perks of the whole NFT setup. I actually decided to follow the ERC-721 standard to safe all the important imformation concerning the image. The prompt is part of the description. The model and the time of minting are simply attributes. This allowed me to directly list some of the images on ",a.jsx(e.a,{href:"https://opensea.io/",children:"opensea"})," and opens the possibility to trade some of the cooler images."]}),`
`,a.jsx(e.h2,{children:"Conclusion"}),`
`,a.jsx(e.p,{children:"Taken together, I am super happy with the setup:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Anyone can generate AI images for a small fee such that it is sustainable."}),`
`,a.jsx(e.li,{children:"The costs are fully under control and the system is fully automated."}),`
`,a.jsx(e.li,{children:"The system is fully anonymous and does not require any personal data (which I never wanted to collect anyways). Say goodby annoying GDPR banners."}),`
`,a.jsx(e.li,{children:"The system is fully decentralized and can be used by anyone that cares."}),`
`]}),`
`,a.jsxs(e.p,{children:["So, if you want to generate some images, feel free to check out the ",a.jsx(e.a,{href:"../imagegen",children:"image generation page"})," and mint your first NFT. I am looking forward to see what you can come up with and what are your comments."]})]})}function boe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(q3,{...t})}):q3(t)}const W3=Object.freeze(Object.defineProperty({__proto__:null,default:boe,frontmatter:goe},Symbol.toStringTag,{value:"Module"})),yoe={publishing_date:"2025-06-03",title:"A gallery of AI images",tags:["blog","ai","blockchain"],tokenID:24,category:"blockchain",secondaryCategory:"ai",description:"I build an NFT gallery for AI-generated images using ERC-721 Enumerable contracts. Learn how to upgrade smart contracts and create integrated user experiences for collectibles."};function U3(t){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In one of my ",a.jsx(e.a,{href:"9",children:"previous posts"}),", I described how I set up a system to generate AI images and set up the payment system with ethereum. I liked the set-up, but it was very minimalistic and only focused on the generation process. However, with NFTs, you can do so much more and I started to work through the process. In a first step, I set up a gallery of the images that associated with the connected wallet. And in this post, I will describe how I set up the gallery and what I learned in the process."]}),`
`,a.jsx(e.h2,{children:"Modernizing the contract"}),`
`,a.jsxs(e.p,{children:["The images were previouslycreated with a standard ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/erc721",children:"ERC-721"})," contract, which allows you to own Non-fungible tokens. But this ran into trouble once I tried to collect all the NFTs that were created by a single wallet. The details of the problems are rather technical and it took me some time to understand the issue, but luckily I was not the only one that ran into this problem. The solution was to use the ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/api/token/erc721#ERC721Enumerable",children:"ERC-721 Enumerable"})," extension. This extension allows you to enumerate all the tokens owned by a specific address, which is exactly what I needed for the gallery."]}),`
`,a.jsxs(e.p,{children:['Now, I thought that this would be just a simple upgrade to the previous contract. However, the internal data structure is substantially different from the "normal" ERC-721 contract. Therefore, I simply created a new contract, wrote some tests and deployed it. The new contract is called ',a.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:a.jsx(e.code,{children:"GenImNFTv2"})})," and it is a replacement for the previous contract. It has all the features of the previous contract, but it also allows you to enumerate all the tokens owned by a specific address."]}),`
`,a.jsx(e.h2,{children:"Adding a gallery"}),`
`,a.jsxs(e.p,{children:["Once, it was possible to enumerate the tokens, I could set up the gallery. At first, the gallery was simply another react component that queried the contract for all the tokens owned by a specific address. You could see the created NFTs and click on them to see the details. However, this was not very user friendly as the upper component with image preview and generation was still the main focus of the page. So the gallery and the generation felt really disconnected. So, I actually reworked the whole work flow within the ",a.jsx(e.a,{href:"../imagegen",children:"imagegen"})," component. It now only has a fairly small input and then contains the gallery below. This nicely integrates older pictures with new ideas and has all the functionality that I need. For the pictures in the gallery, I can zoom, download, share and delete them. This makes for me personally for a really nice user experience, just as I wanted it."]}),`
`,a.jsx(e.h2,{children:"A possible evolution"}),`
`,a.jsx(e.p,{children:"The component now fulfills a lot of my personal needs. If I wanted to extend it further, this would most likely mean that I want to make it more social with features like:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"User profiles to browse other people's AI art galleries"}),`
`,a.jsx(e.li,{children:"Simple social features like favorites or comments"}),`
`,a.jsx(e.li,{children:"Better discovery and search functionality"}),`
`]}),`
`,a.jsx(e.p,{children:"However, this would mean a clear shift in focus. From a project that exclusively serves my personal needs to a project that attempts to create a community around the protocol. And this is a big step. I am not sure if I want to take this step. The step is even bigger as I would most likely not enjoy it to take it on my own. I would need to work together with others that share the same passion for the project. And to govern the hypothetical community, I would need to set up some kind of DAO (Decentralized Autonomous Organization). The logic here is simple. If I introduce social features for users, I also want to introduce some kind of social features, i.e. governance, for the gallery. I do not want to be the sole owner of the gallery and decide what goes in and what does not. I want others to have a say in the future of the gallery. So the current most likely evolution of the gallery is:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["Try to learn how to set up a ",a.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/governance",children:"DAO"}),"."]}),`
`,a.jsx(e.li,{children:"See if some kind of transaction fees for the DAO are in order. If the DAO supports the gallery, it should also be able to pay for the costs of the gallery, right ?"}),`
`,a.jsx(e.li,{children:"Add minimal social features like seeing the NFTs of other users that like it."}),`
`,a.jsxs(e.li,{children:["See if I can add some kind of social features like comments or likes just like I did with the ",a.jsx(e.a,{href:"7",children:"support button"}),"."]}),`
`]}),`
`,a.jsx(e.p,{children:"But this is all in the future. For the moment, I am happy with the gallery and the way it works. I hope you like it too and I am looking forward to your comments and suggestions."})]})}function xoe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(U3,{...t})}):U3(t)}const V3=Object.freeze(Object.defineProperty({__proto__:null,default:xoe,frontmatter:yoe},Symbol.toStringTag,{value:"Module"}));/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Oh(t){return t+.5|0}const Oa=(t,e,n)=>Math.max(Math.min(t,n),e);function pc(t){return Oa(Oh(t*2.55),0,255)}function Na(t){return Oa(Oh(t*255),0,255)}function ta(t){return Oa(Oh(t/2.55)/100,0,1)}function Y3(t){return Oa(Oh(t*100),0,100)}const jr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},v1=[..."0123456789ABCDEF"],woe=t=>v1[t&15],_oe=t=>v1[(t&240)>>4]+v1[t&15],mu=t=>(t&240)>>4===(t&15),voe=t=>mu(t.r)&&mu(t.g)&&mu(t.b)&&mu(t.a);function Toe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&jr[t[1]]*17,g:255&jr[t[2]]*17,b:255&jr[t[3]]*17,a:e===5?jr[t[4]]*17:255}:(e===7||e===9)&&(n={r:jr[t[1]]<<4|jr[t[2]],g:jr[t[3]]<<4|jr[t[4]],b:jr[t[5]]<<4|jr[t[6]],a:e===9?jr[t[7]]<<4|jr[t[8]]:255})),n}const koe=(t,e)=>t<255?e(t):"";function Soe(t){var e=voe(t)?woe:_oe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+koe(t.a,e):void 0}const $oe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function N9(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Eoe(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function joe(t,e,n){const r=N9(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Coe(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Wy(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),l=(s+o)/2;let c,h,u;return s!==o&&(u=s-o,h=l>.5?u/(2-s-o):u/(s+o),c=Coe(n,r,i,u,s),c=c*60+.5),[c|0,h||0,l]}function Uy(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Na)}function Vy(t,e,n){return Uy(N9,t,e,n)}function Aoe(t,e,n){return Uy(joe,t,e,n)}function Ioe(t,e,n){return Uy(Eoe,t,e,n)}function D9(t){return(t%360+360)%360}function Moe(t){const e=$oe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?pc(+e[5]):Na(+e[5]));const i=D9(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Aoe(i,s,o):e[1]==="hsv"?r=Ioe(i,s,o):r=Vy(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Loe(t,e){var n=Wy(t);n[0]=D9(n[0]+e),n=Vy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Ooe(t){if(!t)return;const e=Wy(t),n=e[0],r=Y3(e[1]),i=Y3(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${ta(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const G3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},X3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Roe(){const t={},e=Object.keys(X3),n=Object.keys(G3);let r,i,s,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],i=0;i<n.length;i++)s=n[i],l=l.replace(s,G3[s]);s=parseInt(X3[o],16),t[l]=[s>>16&255,s>>8&255,s&255]}return t}let gu;function Noe(t){gu||(gu=Roe(),gu.transparent=[0,0,0,0]);const e=gu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Doe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Boe(t){const e=Doe.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?pc(o):Oa(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?pc(r):Oa(r,0,255)),i=255&(e[4]?pc(i):Oa(i,0,255)),s=255&(e[6]?pc(s):Oa(s,0,255)),{r,g:i,b:s,a:n}}}function Poe(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ta(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Pm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,co=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Foe(t,e,n){const r=co(ta(t.r)),i=co(ta(t.g)),s=co(ta(t.b));return{r:Na(Pm(r+n*(co(ta(e.r))-r))),g:Na(Pm(i+n*(co(ta(e.g))-i))),b:Na(Pm(s+n*(co(ta(e.b))-s))),a:t.a+n*(e.a-t.a)}}function bu(t,e,n){if(t){let r=Wy(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Vy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function B9(t,e){return t&&Object.assign(e||{},t)}function J3(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Na(t[3]))):(e=B9(t,{r:0,g:0,b:0,a:1}),e.a=Na(e.a)),e}function Hoe(t){return t.charAt(0)==="r"?Boe(t):Moe(t)}class ah{constructor(e){if(e instanceof ah)return e;const n=typeof e;let r;n==="object"?r=J3(e):n==="string"&&(r=Toe(e)||Noe(e)||Hoe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=B9(this._rgb);return e&&(e.a=ta(e.a)),e}set rgb(e){this._rgb=J3(e)}rgbString(){return this._valid?Poe(this._rgb):void 0}hexString(){return this._valid?Soe(this._rgb):void 0}hslString(){return this._valid?Ooe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,l=2*o-1,c=r.a-i.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Foe(this._rgb,e._rgb,n)),this}clone(){return new ah(this.rgb)}alpha(e){return this._rgb.a=Na(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Oh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return bu(this._rgb,2,e),this}darken(e){return bu(this._rgb,2,-e),this}saturate(e){return bu(this._rgb,1,e),this}desaturate(e){return bu(this._rgb,1,-e),this}rotate(e){return Loe(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gi(){}const zoe=(()=>{let t=0;return()=>t++})();function It(t){return t==null}function Bt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function st(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function di(t,e){return lr(t)?t:e}function tt(t,e){return typeof t>"u"?e:t}const qoe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,P9=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function kt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Tt(t,e,n,r){let i,s,o;if(Bt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(st(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Ud(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Vd(t){if(Bt(t))return t.map(Vd);if(st(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Vd(t[n[i]]);return e}return t}function F9(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Woe(t,e,n,r){if(!F9(t))return;const i=e[t],s=n[t];st(i)&&st(s)?sh(i,s,r):e[t]=Vd(s)}function sh(t,e,n){const r=Bt(e)?e:[e],i=r.length;if(!st(t))return t;n=n||{};const s=n.merger||Woe;let o;for(let l=0;l<i;++l){if(o=r[l],!st(o))continue;const c=Object.keys(o);for(let h=0,u=c.length;h<u;++h)s(c[h],t,o,n)}return t}function Rc(t,e){return sh(t,e,{merger:Uoe})}function Uoe(t,e,n){if(!F9(t))return;const r=e[t],i=n[t];st(r)&&st(i)?Rc(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Vd(i))}const Q3={"":t=>t,x:t=>t.x,y:t=>t.y};function Voe(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Yoe(t){const e=Voe(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function oh(t,e){return(Q3[e]||(Q3[e]=Yoe(e)))(t)}function Yy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Tr=t=>typeof t<"u",or=t=>typeof t=="function",K3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Goe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const yt=Math.PI,wn=2*yt,Xoe=wn+yt,Yd=Number.POSITIVE_INFINITY,Gy=yt/180,_n=yt/2,Cr=yt/4,Gd=yt*2/3,H9=Math.log10,Yo=Math.sign;function Nc(t,e,n){return Math.abs(t-e)<n}function Z3(t){const e=Math.round(t);t=Nc(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(H9(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Joe(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Qoe(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ps(t){return!Qoe(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Koe(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Zoe(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function dn(t){return t*(yt/180)}function z9(t){return t*(180/yt)}function eT(t){if(!lr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function T1(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*yt&&(s+=wn),{angle:s,distance:i}}function Go(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ele(t,e){return(t-e+Xoe)%wn-yt}function ja(t){return(t%wn+wn)%wn}function Xd(t,e,n,r){const i=ja(t),s=ja(e),o=ja(n),l=ja(s-i),c=ja(o-i),h=ja(i-s),u=ja(i-o);return i===s||i===o||r&&s===o||l>c&&h<u}function Lr(t,e,n){return Math.max(e,Math.min(n,t))}function tle(t){return Lr(t,-32768,32767)}function mc(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Xy(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const ks=(t,e,n,r)=>Xy(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),nle=(t,e,n)=>Xy(t,n,r=>t[r][e]>=n);function rle(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const q9=["push","pop","shift","splice","unshift"];function ile(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),q9.forEach(n=>{const r="_onData"+Yy(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...s)}),o}})})}function tT(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(q9.forEach(s=>{delete t[s]}),delete t._chartjs)}function ale(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const W9=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function U9(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,W9.call(window,()=>{r=!1,t.apply(e,n)}))}}function sle(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Jy=t=>t==="start"?"left":t==="end"?"right":"center",$n=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,ole=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function lle(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:p,maxDefined:m}=o.getUserBounds();if(p){if(i=Math.min(ks(c,u,d).lo,n?r:ks(e,u,o.getPixelForValue(d)).lo),h){const g=c.slice(0,i+1).reverse().findIndex(b=>!It(b[l.axis]));i-=Math.max(0,g)}i=Lr(i,0,r-1)}if(m){let g=Math.max(ks(c,o.axis,f,!0).hi+1,n?0:ks(e,u,o.getPixelForValue(f),!0).hi+1);if(h){const b=c.slice(g-1).findIndex(y=>!It(y[l.axis]));g+=Math.max(0,b)}s=Lr(g,i,r)-i}else s=r-i}return{start:i,count:s}}function cle(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const yu=t=>t===0||t===1,nT=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wn/n)),rT=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*wn/n)+1,Dc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*_n)+1,easeOutSine:t=>Math.sin(t*_n),easeInOutSine:t=>-.5*(Math.cos(yt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yu(t)?t:nT(t,.075,.3),easeOutElastic:t=>yu(t)?t:rT(t,.075,.3),easeInOutElastic(t){return yu(t)?t:t<.5?.5*nT(t*2,.1125,.45):.5+.5*rT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Dc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Dc.easeInBounce(t*2)*.5:Dc.easeOutBounce(t*2-1)*.5+.5};function Qy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function iT(t){return Qy(t)?t:new ah(t)}function Fm(t){return Qy(t)?t:new ah(t).saturate(.5).darken(.1).hexString()}const hle=["x","y","borderWidth","radius","tension"],ule=["color","borderColor","backgroundColor"];function dle(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:ule},numbers:{type:"number",properties:hle}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fle(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const aT=new Map;function ple(t,e){e=e||{};const n=t+JSON.stringify(e);let r=aT.get(n);return r||(r=new Intl.NumberFormat(t,e),aT.set(n,r)),r}function Ky(t,e,n){return ple(e,n).format(t)}const mle={values(t){return Bt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),s=gle(t,n)}const o=H9(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Ky(t,r,c)}};function gle(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var V9={formatters:mle};function ble(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:V9.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fs=Object.create(null),k1=Object.create(null);function Bc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function Hm(t,e,n){return typeof e=="string"?sh(Bc(t,e),n):sh(Bc(t,""),e)}class yle{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Fm(i.backgroundColor),this.hoverBorderColor=(r,i)=>Fm(i.borderColor),this.hoverColor=(r,i)=>Fm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Hm(this,e,n)}get(e){return Bc(this,e)}describe(e,n){return Hm(k1,e,n)}override(e,n){return Hm(Fs,e,n)}route(e,n,r,i){const s=Bc(this,e),o=Bc(this,r),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],h=o[i];return st(c)?Object.assign({},h,c):tt(c,h)},set(c){this[l]=c}}})}apply(e){e.forEach(n=>n(this))}}var Wt=new yle({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dle,fle,ble]);function xle(t){return!t||It(t.size)||It(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sT(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function us(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function oT(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function S1(t,e,n,r){Y9(t,e,n,r,null)}function Y9(t,e,n,r,i){let s,o,l,c,h,u,d,f;const p=e.pointStyle,m=e.rotation,g=e.radius;let b=(m||0)*Gy;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(b),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,g,0,0,wn):t.arc(n,r,g,0,wn),t.closePath();break;case"triangle":u=i?i/2:g,t.moveTo(n+Math.sin(b)*u,r-Math.cos(b)*g),b+=Gd,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*g),b+=Gd,t.lineTo(n+Math.sin(b)*u,r-Math.cos(b)*g),t.closePath();break;case"rectRounded":h=g*.516,c=g-h,o=Math.cos(b+Cr)*c,d=Math.cos(b+Cr)*(i?i/2-h:c),l=Math.sin(b+Cr)*c,f=Math.sin(b+Cr)*(i?i/2-h:c),t.arc(n-d,r-l,h,b-yt,b-_n),t.arc(n+f,r-o,h,b-_n,b),t.arc(n+d,r+l,h,b,b+_n),t.arc(n-f,r+o,h,b+_n,b+yt),t.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*g,u=i?i/2:c,t.rect(n-u,r-c,2*u,2*c);break}b+=Cr;case"rectRot":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,l=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(n-d,r-l),t.lineTo(n+f,r-o),t.lineTo(n+d,r+l),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":b+=Cr;case"cross":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,l=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(n-d,r-l),t.lineTo(n+d,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,l=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(n-d,r-l),t.lineTo(n+d,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),b+=Cr,d=Math.cos(b)*(i?i/2:g),o=Math.cos(b)*g,l=Math.sin(b)*g,f=Math.sin(b)*(i?i/2:g),t.moveTo(n-d,r-l),t.lineTo(n+d,r+l),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(b)*g,l=Math.sin(b)*g,t.moveTo(n-o,r-l),t.lineTo(n+o,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(b)*(i?i/2:g),r+Math.sin(b)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function lh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function n0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function r0(t){t.restore()}function wle(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function _le(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function vle(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),It(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Tle(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,h=n+s.actualBoundingBoxDescent,u=i.strikethrough?(c+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function kle(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ch(t,e,n,r,i,s={}){const o=Bt(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,h;for(t.save(),t.font=i.string,vle(t,s),c=0;c<o.length;++c)h=o[c],s.backdrop&&kle(t,s.backdrop),l&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),It(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,n,r,s.maxWidth)),t.fillText(h,n,r,s.maxWidth),Tle(t,n,r,h,s),r+=Number(i.lineHeight);t.restore()}function Jd(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*yt,yt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,yt,_n,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,_n,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-_n,!0),t.lineTo(n+o.topLeft,r)}const Sle=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$le=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ele(t,e){const n=(""+t).match(Sle);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const jle=t=>+t||0;function G9(t,e){const n={},r=st(e),i=r?Object.keys(e):e,s=st(t)?r?o=>tt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=jle(s(o));return n}function Cle(t){return G9(t,{top:"y",right:"x",bottom:"y",left:"x"})}function To(t){return G9(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Mn(t){const e=Cle(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sn(t,e){t=t||{},e=e||Wt.font;let n=tt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=tt(t.style,e.style);r&&!(""+r).match($le)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:tt(t.family,e.family),lineHeight:Ele(tt(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:tt(t.weight,e.weight),string:""};return i.string=xle(i),i}function xu(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function Ale(t,e,n){const{min:r,max:i}=t,s=P9(e,(i-r)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ks(t,e){return Object.assign(Object.create(t),e)}function Zy(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=K9("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:l=>Zy([l,...t],e,s,r)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return J9(l,c,()=>Ble(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return cT(l).includes(c)},ownKeys(l){return cT(l)},set(l,c,h){const u=l._storage||(l._storage=i());return l[c]=u[c]=h,delete l._keys,!0}})}function Xo(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:X9(t,r),setContext:s=>Xo(t,s,n,r),override:s=>Xo(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,l){return J9(s,o,()=>Mle(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,l){return t[o]=l,delete s[o],!0}})}function X9(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:or(n)?n:()=>n,isIndexable:or(r)?r:()=>r}}const Ile=(t,e)=>t?t+Yy(e):e,ex=(t,e)=>st(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function J9(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function Mle(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let l=r[e];return or(l)&&o.isScriptable(e)&&(l=Lle(e,l,t,n)),Bt(l)&&l.length&&(l=Ole(e,l,t,o.isIndexable)),ex(e,l)&&(l=Xo(l,i,s&&s[e],o)),l}function Lle(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(s,o||r);return l.delete(t),ex(t,c)&&(c=tx(i._scopes,i,t,c)),c}function Ole(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:l}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(st(e[0])){const c=e,h=i._scopes.filter(u=>u!==c);e=[];for(const u of c){const d=tx(h,i,t,u);e.push(Xo(d,s,o&&o[t],l))}}return e}function Q9(t,e,n){return or(t)?t(e,n):t}const Rle=(t,e)=>t===!0?e:typeof t=="string"?oh(e,t):void 0;function Nle(t,e,n,r,i){for(const s of e){const o=Rle(n,s);if(o){t.add(o);const l=Q9(o._fallback,n,i);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function tx(t,e,n,r){const i=e._rootScopes,s=Q9(e._fallback,n,r),o=[...t,...i],l=new Set;l.add(r);let c=lT(l,o,n,s||n,r);return c===null||typeof s<"u"&&s!==n&&(c=lT(l,o,s,c,r),c===null)?!1:Zy(Array.from(l),[""],i,s,()=>Dle(e,n,r))}function lT(t,e,n,r,i){for(;n;)n=Nle(t,e,n,r,i);return n}function Dle(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Bt(i)&&st(n)?n:i||{}}function Ble(t,e,n,r){let i;for(const s of e)if(i=K9(Ile(s,t),n),typeof i<"u")return ex(t,i)?tx(n,r,t,i):i}function K9(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function cT(t){let e=t._keys;return e||(e=t._keys=Ple(t._scopes)),e}function Ple(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Fle=Number.EPSILON||1e-14,Jo=(t,e)=>e<t.length&&!t[e].skip&&t[e],Z9=t=>t==="x"?"y":"x";function Hle(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,l=Go(s,i),c=Go(o,s);let h=l/(l+c),u=c/(l+c);h=isNaN(h)?0:h,u=isNaN(u)?0:u;const d=r*h,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function zle(t,e,n){const r=t.length;let i,s,o,l,c,h=Jo(t,0);for(let u=0;u<r-1;++u)if(c=h,h=Jo(t,u+1),!(!c||!h)){if(Nc(e[u],0,Fle)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],l=Math.pow(i,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function qle(t,e,n="x"){const r=Z9(n),i=t.length;let s,o,l,c=Jo(t,0);for(let h=0;h<i;++h){if(o=l,l=c,c=Jo(t,h+1),!l)continue;const u=l[n],d=l[r];o&&(s=(u-o[n])/3,l[`cp1${n}`]=u-s,l[`cp1${r}`]=d-s*e[h]),c&&(s=(c[n]-u)/3,l[`cp2${n}`]=u+s,l[`cp2${r}`]=d+s*e[h])}}function Wle(t,e="x"){const n=Z9(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,l,c,h=Jo(t,0);for(o=0;o<r;++o)if(l=c,c=h,h=Jo(t,o+1),!!c){if(h){const u=h[e]-c[e];i[o]=u!==0?(h[n]-c[n])/u:0}s[o]=l?h?Yo(i[o-1])!==Yo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}zle(t,i,s),qle(t,s,e)}function wu(t,e,n){return Math.max(Math.min(t,n),e)}function Ule(t,e){let n,r,i,s,o,l=lh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=l,l=n<r-1&&lh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=wu(i.cp1x,e.left,e.right),i.cp1y=wu(i.cp1y,e.top,e.bottom)),l&&(i.cp2x=wu(i.cp2x,e.left,e.right),i.cp2y=wu(i.cp2y,e.top,e.bottom)))}function Vle(t,e,n,r,i){let s,o,l,c;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")Wle(t,i);else{let h=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)l=t[s],c=Hle(h,l,t[Math.min(s+1,o-(r?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}e.capBezierPoints&&Ule(t,n)}function nx(){return typeof window<"u"&&typeof document<"u"}function rx(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Qd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const i0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Yle(t,e){return i0(t).getPropertyValue(e)}const Gle=["top","right","bottom","left"];function js(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Gle[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Xle=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Jle(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,l,c;if(Xle(i,s,t.target))l=i,c=s;else{const h=e.getBoundingClientRect();l=r.clientX-h.left,c=r.clientY-h.top,o=!0}return{x:l,y:c,box:o}}function gs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=i0(n),s=i.boxSizing==="border-box",o=js(i,"padding"),l=js(i,"border","width"),{x:c,y:h,box:u}=Jle(t,n),d=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:p,height:m}=e;return s&&(p-=o.width+l.width,m-=o.height+l.height),{x:Math.round((c-d)/p*n.width/r),y:Math.round((h-f)/m*n.height/r)}}function Qle(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&rx(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),l=i0(s),c=js(l,"border","width"),h=js(l,"padding");e=o.width-h.width-c.width,n=o.height-h.height-c.height,r=Qd(l.maxWidth,s,"clientWidth"),i=Qd(l.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Yd,maxHeight:i||Yd}}const _u=t=>Math.round(t*10)/10;function Kle(t,e,n,r){const i=i0(t),s=js(i,"margin"),o=Qd(i.maxWidth,t,"clientWidth")||Yd,l=Qd(i.maxHeight,t,"clientHeight")||Yd,c=Qle(t,e,n);let{width:h,height:u}=c;if(i.boxSizing==="content-box"){const f=js(i,"border","width"),p=js(i,"padding");h-=p.width+f.width,u-=p.height+f.height}return h=Math.max(0,h-s.width),u=Math.max(0,r?h/r:u-s.height),h=_u(Math.min(h,o,c.maxWidth)),u=_u(Math.min(u,l,c.maxHeight)),h&&!u&&(u=_u(h/2)),(e!==void 0||n!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,h=_u(Math.floor(u*r))),{width:h,height:u}}function hT(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Zle=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};nx()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function uT(t,e){const n=Yle(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function bs(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ece(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function tce(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=bs(t,i,n),l=bs(i,s,n),c=bs(s,e,n),h=bs(o,l,n),u=bs(l,c,n);return bs(h,u,n)}const nce=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},rce=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ko(t,e,n){return t?nce(e,n):rce()}function eI(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function tI(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function nI(t){return t==="angle"?{between:Xd,compare:ele,normalize:ja}:{between:mc,compare:(e,n)=>e-n,normalize:e=>e}}function dT({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function ice(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:l}=nI(r),c=e.length;let{start:h,end:u,loop:d}=t,f,p;if(d){for(h+=c,u+=c,f=0,p=c;f<p&&o(l(e[h%c][r]),i,s);++f)h--,u--;h%=c,u%=c}return u<h&&(u+=c),{start:h,end:u,loop:d,style:t.style}}function ace(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:l,between:c,normalize:h}=nI(r),{start:u,end:d,loop:f,style:p}=ice(t,e,n),m=[];let g=!1,b=null,y,w,S;const E=()=>c(i,S,y)&&l(i,S)!==0,T=()=>l(s,y)===0||c(s,S,y),C=()=>g||E(),M=()=>!g||T();for(let R=u,D=u;R<=d;++R)w=e[R%o],!w.skip&&(y=h(w[r]),y!==S&&(g=c(y,i,s),b===null&&C()&&(b=l(y,i)===0?R:D),b!==null&&M()&&(m.push(dT({start:b,end:R,loop:f,count:o,style:p})),b=null),D=R,S=y));return b!==null&&m.push(dT({start:b,end:d,loop:f,count:o,style:p})),m}function sce(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=ace(r[i],t.points,e);s.length&&n.push(...s)}return n}function oce(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function lce(t,e,n,r){const i=t.length,s=[];let o=e,l=t[e],c;for(c=e+1;c<=n;++c){const h=t[c%i];h.skip||h.stop?l.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=h.stop?c:null):(o=c,l.skip&&(e=c)),l=h}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function cce(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:l}=oce(n,i,s,r);if(r===!0)return fT(t,[{start:o,end:l,loop:s}],n,e);const c=l<o?l+i:l,h=!!t._fullLoop&&o===0&&l===i-1;return fT(t,lce(n,o,c,h),n,e)}function fT(t,e,n,r){return!r||!r.setContext||!n?e:hce(t,e,n,r)}function hce(t,e,n,r){const i=t._chart.getContext(),s=pT(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=n.length,h=[];let u=s,d=e[0].start,f=d;function p(m,g,b,y){const w=l?-1:1;if(m!==g){for(m+=c;n[m%c].skip;)m-=w;for(;n[g%c].skip;)g+=w;m%c!==g%c&&(h.push({start:m%c,end:g%c,loop:b,style:y}),u=y,d=g%c)}}for(const m of e){d=l?d:m.start;let g=n[d%c],b;for(f=d+1;f<=m.end;f++){const y=n[f%c];b=pT(r.setContext(Ks(i,{type:"segment",p0:g,p1:y,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),uce(b,u)&&p(d,f-1,m.loop,u),g=y,u=b}d<f-1&&p(d,f-1,m.loop,u)}return h}function pT(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function uce(t,e){if(!e)return!1;const n=[],r=function(i,s){return Qy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function vu(t,e,n){return t.options.clip?t[n]:e[n]}function dce(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:vu(n,e,"left"),right:vu(n,e,"right"),top:vu(r,e,"top"),bottom:vu(r,e,"bottom")}:e}function fce(t,e){const n=e._clip;if(n.disabled)return!1;const r=dce(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class pce{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=W9.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ki=new pce;const mT="transparent",mce={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=iT(t||mT),i=r.valid&&iT(e||mT);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class gce{constructor(e,n,r,i){const s=n[r];i=xu([e.to,i,s,e.from]);const o=xu([e.from,s,i]);this._active=!0,this._fn=e.fn||mce[e.type||typeof o],this._easing=Dc[e.easing]||Dc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=xu([e.to,n,i,e.from]),this._from=xu([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||n<r),!this._active){this._target[i]=l,this._notify(!0);return}if(n<0){this._target[i]=s;return}c=n/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class ix{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!st(e))return;const n=Object.keys(Wt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!st(s))return;const o={};for(const l of n)o[l]=s[l];(Bt(s.properties)&&s.properties||[i]).forEach(l=>{(l===i||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,n){const r=n.options,i=yce(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&bce(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[h];let d=s[h];const f=r.get(h);if(d)if(f&&d.active()){d.update(f,u,l);continue}else d.cancel();if(!f||!f.duration){e[h]=u;continue}s[h]=d=new gce(f,e,h,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ki.add(this._chart,r),!0}}function bce(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function yce(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gT(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function xce(t,e,n){if(n===!1)return!1;const r=gT(t,n),i=gT(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function wce(t){let e,n,r,i;return st(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function rI(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function bT(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,l,c,h;if(e===null)return;let u=!1;for(o=0,l=i.length;o<l;++o){if(c=+i[o],c===n){if(u=!0,r.all)continue;break}h=t.values[c],lr(h)&&(s||e===0||Yo(e)===Yo(h))&&(e+=h)}return!u&&!r.all?0:e}function _ce(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,h,u;for(c=0,h=o.length;c<h;++c)u=o[c],l[c]={[i]:u,[s]:t[u]};return l}function zm(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function vce(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Tce(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function kce(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function yT(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function xT(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:l}=r,c=s.axis,h=o.axis,u=vce(s,o,r),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[c]:g,[h]:b}=m,y=m._stacks||(m._stacks={});f=y[h]=kce(i,u,g),f[l]=b,f._top=yT(f,o,!0,r.type),f._bottom=yT(f,o,!1,r.type);const w=f._visualValues||(f._visualValues={});w[l]=b}}function qm(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Sce(t,e){return Ks(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $ce(t,e,n){return Ks(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Jl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const Wm=t=>t==="reset"||t==="none",wT=(t,e)=>e?t:Object.assign({},t),Ece=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rI(n,!0),values:null};class ax{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,s=n.xAxisID=tt(r.xAxisID,qm(e,"x")),o=n.yAxisID=tt(r.yAxisID,qm(e,"y")),l=n.rAxisID=tt(r.rAxisID,qm(e,"r")),c=n.indexAxis,h=n.iAxisID=i(c,s,o,l),u=n.vAxisID=i(c,o,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tT(this._data,this),e._stacked&&Jl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(st(n)){const i=this._cachedMeta;this._data=_ce(n,i)}else if(r!==n){if(r){tT(r,this);const i=this._cachedMeta;Jl(i),i._parsed=[]}n&&Object.isExtensible(n)&&ile(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=zm(n.vScale,n),n.stack!==r.stack&&(i=!0,Jl(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(xT(this,n._parsed),n._stacked=zm(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,l=s.axis;let c=e===0&&n===i.length?!0:r._sorted,h=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{Bt(i[e])?f=this.parseArrayData(r,i,e,n):st(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const p=()=>d[l]===null||h&&d[l]<h[l];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],c&&(p()&&(c=!1),h=d);r._sorted=c}o&&xT(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,h=s.getLabels(),u=s===o,d=new Array(i);let f,p,m;for(f=0,p=i;f<p;++f)m=f+r,d[f]={[l]:u||s.parse(h[m],m),[c]:o.parse(n[m],m)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,l=new Array(i);let c,h,u,d;for(c=0,h=i;c<h;++c)u=c+r,d=n[u],l[c]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return l}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(i);let u,d,f,p;for(u=0,d=i;u<d;++u)f=u+r,p=n[f],h[u]={x:s.parse(oh(p,l),f),y:o.parse(oh(p,c),f)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],l={keys:rI(i,!0),values:n._stacks[e.axis]._visualValues};return bT(l,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const l=i&&r._stacks[n.axis];i&&l&&(i.values=l,o=bT(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,l=this._getOtherScale(e),c=Ece(n,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Tce(l);let f,p;function m(){p=i[f];const g=p[l.axis];return!lr(p[e.axis])||u>g||d<g}for(f=0;f<o&&!(!m()&&(this.updateRangeFromParsed(h,e,p,c),s));++f);if(s){for(f=o-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(h,e,p,c);break}}return h}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],lr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=wce(tt(this.options.clip,xce(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||i.length-l,h=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,l,c),u=l;u<l+c;++u){const d=i[u];d.hidden||(d.active&&h?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=$ce(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Sce(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,l=s[o],c=this.enableOptionSharing&&Tr(r);if(l)return wT(l,c);const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=h.getOptionScopes(this.getDataset(),u),p=Object.keys(Wt.elements[e]),m=()=>this.getContext(r,i,n),g=h.resolveNamedOptions(f,p,m,d);return g.$shared&&(g.$shared=c,s[o]=Object.freeze(wT(g,c))),g}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,l=s[o];if(l)return l;let c;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);c=u.createResolver(f,this.getContext(e,r,n))}const h=new ix(i,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Wm(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){Wm(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!Wm(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let l;const c=h=>{for(h.length+=n,l=h.length-1;l>=o;l--)h[l]=h[l-n]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Jl(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function jce(t,e,n){let r=1,i=1,s=0,o=0;if(e<wn){const l=t,c=l+e,h=Math.cos(l),u=Math.sin(l),d=Math.cos(c),f=Math.sin(c),p=(S,E,T)=>Xd(S,l,c,!0)?1:Math.max(E,E*n,T,T*n),m=(S,E,T)=>Xd(S,l,c,!0)?-1:Math.min(E,E*n,T,T*n),g=p(0,h,d),b=p(_n,u,f),y=m(yt,h,d),w=m(yt+_n,u,f);r=(g-y)/2,i=(b-w)/2,s=-(g+y)/2,o=-(b+w)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Cce extends ax{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const c=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=c=>+r[c];if(st(r[e])){const{key:c="value"}=this._parsing;s=h=>+oh(r[h],c)}let o,l;for(o=e,l=e+n;o<l;++o)i._parsed[o]=s(o)}}_getRotation(){return dn(this.options.rotation-90)}_getCircumference(){return dn(this.options.circumference)}_getRotationExtents(){let e=wn,n=-wn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-o)/2,0),c=Math.min(qoe(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=jce(d,u,c),b=(r.width-o)/f,y=(r.height-o)/p,w=Math.max(Math.min(b,y)/2,0),S=P9(this.options.radius,w),E=Math.max(S*c,0),T=(S-E)/this._getVisibleDatasetWeightTotal();this.offsetX=m*S,this.offsetY=g*S,i.total=this.calculateTotal(),this.outerRadius=S-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*h,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/wn)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,u=(l.left+l.right)/2,d=(l.top+l.bottom)/2,f=s&&h.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:b}=this._getSharedOptions(n,i);let y=this._getRotation(),w;for(w=0;w<n;++w)y+=this._circumference(w,s);for(w=n;w<n+r;++w){const S=this._circumference(w,s),E=e[w],T={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+S,circumference:S,outerRadius:m,innerRadius:p};b&&(T.options=g||this.resolveDataElementOptions(w,E.active?"active":i)),y+=S,this.updateElement(E,w,T,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?wn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Ky(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,l,c;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,l=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)c=l.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(tt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Ace extends ax{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=lle(n,i,o);this._drawStart=l,this._drawCount=c,cle(n)&&(l=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:h},e),this.updateElements(i,l,c,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,p=l.axis,{spanGaps:m,segment:g}=this.options,b=Ps(m)?m:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",w=n+r,S=e.length;let E=n>0&&this.getParsed(n-1);for(let T=0;T<S;++T){const C=e[T],M=y?C:{};if(T<n||T>=w){M.skip=!0;continue}const R=this.getParsed(T),D=It(R[p]),$=M[f]=o.getPixelForValue(R[f],T),L=M[p]=s||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,R,c):R[p],T);M.skip=isNaN($)||isNaN(L)||D,M.stop=T>0&&Math.abs(R[f]-E[f])>b,g&&(M.parsed=R,M.raw=h.data[T]),d&&(M.options=u||this.resolveDataElementOptions(T,C.active?"active":i)),y||this.updateElement(C,T,M,i),E=R}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function ds(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class sx{static override(e){Object.assign(sx.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ds()}parse(){return ds()}format(){return ds()}add(){return ds()}diff(){return ds()}startOf(){return ds()}endOf(){return ds()}}var Ice={_date:sx};function Mce(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,l=i._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const h=l._reversePixels?nle:ks;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=h(s,e,n-d),p=h(s,e,n+d);return{lo:f.lo,hi:p.hi}}}}else{const u=h(s,e,n);if(c){const{vScale:d}=i._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(g=>!It(g[d.axis]));u.lo-=Math.max(0,p);const m=f.slice(u.hi).findIndex(g=>!It(g[d.axis]));u.hi+=Math.max(0,m)}return u}}return{lo:0,hi:s.length-1}}function a0(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,c=s.length;l<c;++l){const{index:h,data:u}=s[l],{lo:d,hi:f}=Mce(s[l],e,o,i);for(let p=d;p<=f;++p){const m=u[p];m.skip||r(m,h,p)}}}function Lce(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Um(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||a0(t,n,e,function(l,c,h){!i&&!lh(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&s.push({element:l,datasetIndex:c,index:h})},!0),s}function Oce(t,e,n,r){let i=[];function s(o,l,c){const{startAngle:h,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=T1(o,{x:e.x,y:e.y});Xd(d,h,u)&&i.push({element:o,datasetIndex:l,index:c})}return a0(t,n,e,s),i}function Rce(t,e,n,r,i,s){let o=[];const l=Lce(n);let c=Number.POSITIVE_INFINITY;function h(u,d,f){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const m=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(m))&&!p)return;const b=l(e,m);b<c?(o=[{element:u,datasetIndex:d,index:f}],c=b):b===c&&o.push({element:u,datasetIndex:d,index:f})}return a0(t,n,e,h),o}function Vm(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?Oce(t,e,n,i):Rce(t,e,n,r,i,s)}function _T(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return a0(t,n,e,(c,h,u)=>{c[o]&&c[o](e[n],i)&&(s.push({element:c,datasetIndex:h,index:u}),l=l||c.inRange(e.x,e.y,i))}),r&&!l?[]:s}var Nce={modes:{index(t,e,n,r){const i=gs(e,t),s=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Um(t,i,s,r,o):Vm(t,i,s,!1,r,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const u=l[0].index,d=h.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:h.index,index:u})}),c):[]},dataset(t,e,n,r){const i=gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Um(t,i,s,r,o):Vm(t,i,s,!1,r,o);if(l.length>0){const c=l[0].datasetIndex,h=t.getDatasetMeta(c).data;l=[];for(let u=0;u<h.length;++u)l.push({element:h[u],datasetIndex:c,index:u})}return l},point(t,e,n,r){const i=gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Um(t,i,s,r,o)},nearest(t,e,n,r){const i=gs(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Vm(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=gs(e,t);return _T(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=gs(e,t);return _T(t,i,"y",n.intersect,r)}}};const iI=["left","top","right","bottom"];function Ql(t,e){return t.filter(n=>n.pos===e)}function vT(t,e){return t.filter(n=>iI.indexOf(n.pos)===-1&&n.box.axis===e)}function Kl(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Dce(t){const e=[];let n,r,i,s,o,l;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:l=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:l});return e}function Bce(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!iI.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Pce(t,e){const n=Bce(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,l;for(s=0,o=t.length;s<o;++s){l=t[s];const{fullSize:c}=l.box,h=n[l.stack],u=h&&l.stackWeight/h.weight;l.horizontal?(l.width=u?u*r:c&&e.availableWidth,l.height=i):(l.width=r,l.height=u?u*i:c&&e.availableHeight)}return n}function Fce(t){const e=Dce(t),n=Kl(e.filter(h=>h.box.fullSize),!0),r=Kl(Ql(e,"left"),!0),i=Kl(Ql(e,"right")),s=Kl(Ql(e,"top"),!0),o=Kl(Ql(e,"bottom")),l=vT(e,"x"),c=vT(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(l),chartArea:Ql(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(l)}}function TT(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function aI(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hce(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!st(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&aI(o,s.getPadding());const l=Math.max(0,e.outerWidth-TT(o,t,"left","right")),c=Math.max(0,e.outerHeight-TT(o,t,"top","bottom")),h=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,n.horizontal?{same:h,other:u}:{same:u,other:h}}function zce(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function qce(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function gc(t,e,n,r){const i=[];let s,o,l,c,h,u;for(s=0,o=t.length,h=0;s<o;++s){l=t[s],c=l.box,c.update(l.width||e.w,l.height||e.h,qce(l.horizontal,e));const{same:d,other:f}=Hce(e,n,l,r);h|=d&&i.length,u=u||f,c.fullSize||i.push(l)}return h&&gc(i,e,n,r)||u}function Tu(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function kT(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const l of t){const c=l.box,h=r[l.stack]||{placed:0,weight:1},u=l.stackWeight/h.weight||1;if(l.horizontal){const d=e.w*u,f=h.size||c.height;Tr(h.start)&&(o=h.start),c.fullSize?Tu(c,i.left,o,n.outerWidth-i.right-i.left,f):Tu(c,e.left+h.placed,o,d,f),h.start=o,h.placed+=d,o=c.bottom}else{const d=e.h*u,f=h.size||c.width;Tr(h.start)&&(s=h.start),c.fullSize?Tu(c,s,i.top,f,n.outerHeight-i.bottom-i.top):Tu(c,s,e.top+h.placed,f,d),h.start=s,h.placed+=d,s=c.right}}e.x=s,e.y=o}var Or={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Mn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),l=Fce(t.boxes),c=l.vertical,h=l.horizontal;Tt(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=c.reduce((g,b)=>b.box.options&&b.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);aI(f,Mn(r));const p=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),m=Pce(c.concat(h),d);gc(l.fullSize,p,d,m),gc(c,p,d,m),gc(h,p,d,m)&&gc(c,p,d,m),zce(p),kT(l.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,kT(l.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Tt(l.chartArea,g=>{const b=g.box;Object.assign(b,t.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class sI{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Wce extends sI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Gu="$chartjs",Uce={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ST=t=>t===null||t==="";function Vce(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Gu]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ST(i)){const s=uT(t,"width");s!==void 0&&(t.width=s)}if(ST(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=uT(t,"height");s!==void 0&&(t.height=s)}return t}const oI=Zle?{passive:!0}:!1;function Yce(t,e,n){t&&t.addEventListener(e,n,oI)}function Gce(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oI)}function Xce(t,e){const n=Uce[t.type]||t.type,{x:r,y:i}=gs(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Kd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Jce(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Kd(l.addedNodes,r),o=o&&!Kd(l.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Qce(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Kd(l.removedNodes,r),o=o&&!Kd(l.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const hh=new Map;let $T=0;function lI(){const t=window.devicePixelRatio;t!==$T&&($T=t,hh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Kce(t,e){hh.size||window.addEventListener("resize",lI),hh.set(t,e)}function Zce(t){hh.delete(t),hh.size||window.removeEventListener("resize",lI)}function ehe(t,e,n){const r=t.canvas,i=r&&rx(r);if(!i)return;const s=U9((l,c)=>{const h=i.clientWidth;n(l,c),h<i.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,u=c.contentRect.height;h===0&&u===0||s(h,u)});return o.observe(i),Kce(t,s),o}function Ym(t,e,n){n&&n.disconnect(),e==="resize"&&Zce(t)}function the(t,e,n){const r=t.canvas,i=U9(s=>{t.ctx!==null&&n(Xce(s,t))},t);return Yce(r,e,i),i}class nhe extends sI{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Vce(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Gu])return!1;const r=n[Gu].initial;["height","width"].forEach(s=>{const o=r[s];It(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Gu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:Jce,detach:Qce,resize:ehe}[n]||the;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Ym,detach:Ym,resize:Ym}[n]||Gce)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return Kle(e,n,r,i)}isAttached(e){const n=e&&rx(e);return!!(n&&n.isConnected)}}function rhe(t){return!nx()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Wce:nhe}class dr{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ps(this.x)&&Ps(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}function ihe(t,e){const n=t.options.ticks,r=ahe(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?ohe(e):[],o=s.length,l=s[0],c=s[o-1],h=[];if(o>i)return lhe(e,h,s,o/i),h;const u=she(s,e,i);if(o>0){let d,f;const p=o>1?Math.round((c-l)/(o-1)):null;for(ku(e,h,u,It(p)?0:l-p,l),d=0,f=o-1;d<f;d++)ku(e,h,u,s[d],s[d+1]);return ku(e,h,u,c,It(p)?e.length:c+p),h}return ku(e,h,u),h}function ahe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function she(t,e,n){const r=che(t),i=e.length/n;if(!r)return Math.max(i,1);const s=Joe(r);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>i)return c}return Math.max(i,1)}function ohe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function lhe(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function ku(t,e,n,r,i){const s=tt(r,0),o=Math.min(tt(i,t.length),t.length);let l=0,c,h,u;for(n=Math.ceil(n),i&&(c=i-r,n=c/Math.floor(c/n)),u=s;u<0;)l++,u=Math.round(s+l*n);for(h=Math.max(s,0);h<o;h++)h===u&&(e.push(t[h]),l++,u=Math.round(s+l*n))}function che(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const hhe=t=>t==="left"?"right":t==="right"?"left":t,ET=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,jT=(t,e)=>Math.min(e||t,t);function CT(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function uhe(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(i),h;if(!(n&&(r===1?h=Math.max(c-s,o-c):e===0?h=(t.getPixelForTick(1)-c)/2:h=(c-t.getPixelForTick(i-1))/2,c+=i<e?h:-h,c<s-l||c>o+l)))return c}function dhe(t,e){Tt(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Zl(t){return t.drawTicks?t.tickLength:0}function AT(t,e){if(!t.display)return 0;const n=sn(t.font,e),r=Mn(t.padding);return(Bt(t.text)?t.text.length:1)*n.lineHeight+r.height}function fhe(t,e){return Ks(t,{scale:e,type:"scale"})}function phe(t,e,n){return Ks(t,{tick:n,index:e,type:"tick"})}function mhe(t,e,n){let r=Jy(t);return(n&&e!=="right"||!n&&e==="right")&&(r=hhe(r)),r}function ghe(t,e,n,r){const{top:i,left:s,bottom:o,right:l,chart:c}=t,{chartArea:h,scales:u}=c;let d=0,f,p,m;const g=o-i,b=l-s;if(t.isHorizontal()){if(p=$n(r,s,l),st(n)){const y=Object.keys(n)[0],w=n[y];m=u[y].getPixelForValue(w)+g-e}else n==="center"?m=(h.bottom+h.top)/2+g-e:m=ET(t,n,e);f=l-s}else{if(st(n)){const y=Object.keys(n)[0],w=n[y];p=u[y].getPixelForValue(w)-b+e}else n==="center"?p=(h.left+h.right)/2-b+e:p=ET(t,n,e);m=$n(r,o,i),d=n==="left"?-_n:_n}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class ml extends dr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=di(e,Number.POSITIVE_INFINITY),n=di(n,Number.NEGATIVE_INFINITY),r=di(r,Number.POSITIVE_INFINITY),i=di(i,Number.NEGATIVE_INFINITY),{min:di(e,r),max:di(n,i),minDefined:lr(e),maxDefined:lr(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)o=l[c].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:di(n,di(r,n)),max:di(r,di(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){kt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ale(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?CT(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=ihe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){kt(this.options.afterUpdate,[this])}beforeSetDimensions(){kt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){kt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),kt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){kt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=kt(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){kt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){kt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=jT(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,l,c,h;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,p=Lr(this.chart.width-d,0,this.maxWidth);l=e.offset?this.maxWidth/r:p/(r-1),d+6>l&&(l=p/(r-(e.offset?.5:1)),c=this.maxHeight-Zl(e.grid)-n.padding-AT(e.title,this.chart.options.font),h=Math.sqrt(d*d+f*f),o=z9(Math.min(Math.asin(Lr((u.highest.height+6)/l,-1,1)),Math.asin(Lr(c/h,-1,1))-Math.asin(Lr(f/h,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){kt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){kt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=AT(i,n.options.font);if(l?(e.width=this.maxWidth,e.height=Zl(s)+c):(e.height=this.maxHeight,e.width=Zl(s)+c),r.display&&this.ticks.length){const{first:h,last:u,widest:d,highest:f}=this._getLabelSizes(),p=r.padding*2,m=dn(this.labelRotation),g=Math.cos(m),b=Math.sin(m);if(l){const y=r.mirror?0:b*d.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=r.mirror?0:g*d.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(h,u,b,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;c?h?(f=i*e.width,p=r*n.height):(f=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){kt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)It(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=CT(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(n/jT(n,r));let h=0,u=0,d,f,p,m,g,b,y,w,S,E,T;for(d=0;d<n;d+=c){if(m=e[d].label,g=this._resolveTickFontOptions(d),i.font=b=g.string,y=s[b]=s[b]||{data:{},gc:[]},w=g.lineHeight,S=E=0,!It(m)&&!Bt(m))S=sT(i,y.data,y.gc,S,m),E=w;else if(Bt(m))for(f=0,p=m.length;f<p;++f)T=m[f],!It(T)&&!Bt(T)&&(S=sT(i,y.data,y.gc,S,T),E+=w);o.push(S),l.push(E),h=Math.max(S,h),u=Math.max(E,u)}dhe(s,n);const C=o.indexOf(h),M=l.indexOf(u),R=D=>({width:o[D]||0,height:l[D]||0});return{first:R(0),last:R(n-1),widest:R(C),highest:R(M),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return tle(this._alignToPixels?us(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=phe(this.getContext(),e,r))}return this.$context||(this.$context=fhe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=dn(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>l*i?l/r:c/i:c*i<l*r?c/r:l/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:l}=i,c=s.offset,h=this.isHorizontal(),d=this.ticks.length+(c?1:0),f=Zl(s),p=[],m=l.setContext(this.getContext()),g=m.display?m.width:0,b=g/2,y=function(F){return us(r,F,g)};let w,S,E,T,C,M,R,D,$,L,q,P;if(o==="top")w=y(this.bottom),M=this.bottom-f,D=w-b,L=y(e.top)+b,P=e.bottom;else if(o==="bottom")w=y(this.top),L=e.top,P=y(e.bottom)-b,M=w+b,D=this.top+f;else if(o==="left")w=y(this.right),C=this.right-f,R=w-b,$=y(e.left)+b,q=e.right;else if(o==="right")w=y(this.left),$=e.left,q=y(e.right)-b,C=w+b,R=this.left+f;else if(n==="x"){if(o==="center")w=y((e.top+e.bottom)/2+.5);else if(st(o)){const F=Object.keys(o)[0],Y=o[F];w=y(this.chart.scales[F].getPixelForValue(Y))}L=e.top,P=e.bottom,M=w+b,D=M+f}else if(n==="y"){if(o==="center")w=y((e.left+e.right)/2);else if(st(o)){const F=Object.keys(o)[0],Y=o[F];w=y(this.chart.scales[F].getPixelForValue(Y))}C=w-b,R=C-f,$=e.left,q=e.right}const A=tt(i.ticks.maxTicksLimit,d),O=Math.max(1,Math.ceil(d/A));for(S=0;S<d;S+=O){const F=this.getContext(S),Y=s.setContext(F),Q=l.setContext(F),z=Y.lineWidth,j=Y.color,Z=Q.dash||[],te=Q.dashOffset,N=Y.tickWidth,U=Y.tickColor,J=Y.tickBorderDash||[],se=Y.tickBorderDashOffset;E=uhe(this,S,c),E!==void 0&&(T=us(r,E,z),h?C=R=$=q=T:M=D=L=P=T,p.push({tx1:C,ty1:M,tx2:R,ty2:D,x1:$,y1:L,x2:q,y2:P,width:z,color:j,borderDash:Z,borderDashOffset:te,tickWidth:N,tickColor:U,tickBorderDash:J,tickBorderDashOffset:se}))}return this._ticksLength=d,this._borderValue=w,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:u,mirror:d}=s,f=Zl(r.grid),p=f+u,m=d?-u:p,g=-dn(this.labelRotation),b=[];let y,w,S,E,T,C,M,R,D,$,L,q,P="middle";if(i==="top")C=this.bottom-m,M=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+m,M=this._getXAxisLabelAlignment();else if(i==="left"){const O=this._getYAxisLabelAlignment(f);M=O.textAlign,T=O.x}else if(i==="right"){const O=this._getYAxisLabelAlignment(f);M=O.textAlign,T=O.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+p;else if(st(i)){const O=Object.keys(i)[0],F=i[O];C=this.chart.scales[O].getPixelForValue(F)+p}M=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")T=(e.left+e.right)/2-p;else if(st(i)){const O=Object.keys(i)[0],F=i[O];T=this.chart.scales[O].getPixelForValue(F)}M=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(c==="start"?P="top":c==="end"&&(P="bottom"));const A=this._getLabelSizes();for(y=0,w=l.length;y<w;++y){S=l[y],E=S.label;const O=s.setContext(this.getContext(y));R=this.getPixelForTick(y)+s.labelOffset,D=this._resolveTickFontOptions(y),$=D.lineHeight,L=Bt(E)?E.length:1;const F=L/2,Y=O.color,Q=O.textStrokeColor,z=O.textStrokeWidth;let j=M;o?(T=R,M==="inner"&&(y===w-1?j=this.options.reverse?"left":"right":y===0?j=this.options.reverse?"right":"left":j="center"),i==="top"?h==="near"||g!==0?q=-L*$+$/2:h==="center"?q=-A.highest.height/2-F*$+$:q=-A.highest.height+$/2:h==="near"||g!==0?q=$/2:h==="center"?q=A.highest.height/2-F*$:q=A.highest.height-L*$,d&&(q*=-1),g!==0&&!O.showLabelBackdrop&&(T+=$/2*Math.sin(g))):(C=R,q=(1-L)*$/2);let Z;if(O.showLabelBackdrop){const te=Mn(O.backdropPadding),N=A.heights[y],U=A.widths[y];let J=q-te.top,se=0-te.left;switch(P){case"middle":J-=N/2;break;case"bottom":J-=N;break}switch(M){case"center":se-=U/2;break;case"right":se-=U;break;case"inner":y===w-1?se-=U:y>0&&(se-=U/2);break}Z={left:se,top:J,width:U+te.width,height:N+te.height,color:O.backdropColor}}b.push({label:E,font:D,textOffset:q,options:{rotation:g,color:Y,strokeColor:Q,strokeWidth:z,textAlign:j,textBaseline:P,translation:[T,C],backdrop:Z}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-dn(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let h,u;return n==="left"?i?(u=this.right+s,r==="near"?h="left":r==="center"?(h="center",u+=c/2):(h="right",u+=c)):(u=this.right-l,r==="near"?h="right":r==="center"?(h="center",u-=c/2):(h="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?h="right":r==="center"?(h="center",u-=c/2):(h="left",u-=c)):(u=this.left+l,r==="near"?h="left":r==="center"?(h="center",u+=c/2):(h="right",u=this.right)):h="right",{textAlign:h,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,h,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(h.x,h.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const c=i[s];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const l=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,u,d,f;this.isHorizontal()?(h=us(e,this.left,o)-o/2,u=us(e,this.right,l)+l/2,d=f=c):(d=us(e,this.top,o)-o/2,f=us(e,this.bottom,l)+l/2,h=u=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(h,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&n0(r,i);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,h=o.label,u=o.textOffset;ch(r,h,0,u,c,l)}i&&r0(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=sn(r.font),o=Mn(r.padding),l=r.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||st(n)?(c+=o.bottom,Bt(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;const{titleX:h,titleY:u,maxWidth:d,rotation:f}=ghe(this,c,n,l);ch(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:mhe(l,n,i),textBaseline:"middle",translation:[h,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=tt(e.grid&&e.grid.z,-1),i=tt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ml.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const l=n[s];l[r]===this.id&&(!e||l.type===e)&&i.push(l)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return sn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Su{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;xhe(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,bhe(e,o,r),this.override&&Wt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Wt[i]&&(delete Wt[i][r],this.override&&delete Fs[r])}}function bhe(t,e,n){const r=sh(Object.create(null),[n?Wt.get(n):{},Wt.get(e),t.defaults]);Wt.set(e,r),t.defaultRoutes&&yhe(e,t.defaultRoutes),t.descriptors&&Wt.describe(e,t.descriptors)}function yhe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),l=o.pop(),c=o.join(".");Wt.route(s,i,c,l)})}function xhe(t){return"id"in t&&"defaults"in t}class whe{constructor(){this.controllers=new Su(ax,"datasets",!0),this.elements=new Su(dr,"elements"),this.plugins=new Su(Object,"plugins"),this.scales=new Su(ml,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Tt(i,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,r){const i=Yy(e);kt(r["before"+i],[],r),n[e](r),kt(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var bi=new whe;class _he{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,l=o[r],c=[n,i,s.options];if(kt(l,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){It(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=tt(r.options&&r.options.plugins,{}),s=vhe(r);return i===!1&&!n?[]:khe(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function vhe(t){const e={},n=[],r=Object.keys(bi.plugins.items);for(let s=0;s<r.length;s++)n.push(bi.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function The(t,e){return!e&&t===!1?null:t===!0?{}:t}function khe(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const l of e){const c=l.id,h=The(r[c],i);h!==null&&s.push({plugin:l,options:She(t.config,{plugin:l,local:n[c]},h,o)})}return s}function She(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $1(t,e){const n=Wt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function $he(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Ehe(t,e){return t===e?"_index_":"_value_"}function IT(t){if(t==="x"||t==="y"||t==="r")return t}function jhe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function E1(t,...e){if(IT(t))return t;for(const n of e){const r=n.axis||jhe(n.position)||t.length>1&&IT(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function MT(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Che(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return MT(t,"x",n[0])||MT(t,"y",n[0])}return{}}function Ahe(t,e){const n=Fs[t.type]||{scales:{}},r=e.scales||{},i=$1(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!st(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=E1(o,l,Che(o,t),Wt.scales[l.type]),h=Ehe(c,i),u=n.scales||{};s[o]=Rc(Object.create(null),[{axis:c},l,u[c],u[h]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||$1(l,e),u=(Fs[l]||{}).scales||{};Object.keys(u).forEach(d=>{const f=$he(d,c),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),Rc(s[p],[{axis:f},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const l=s[o];Rc(l,[Wt.scales[l.type],Wt.scale])}),s}function cI(t){const e=t.options||(t.options={});e.plugins=tt(e.plugins,{}),e.scales=Ahe(t,e)}function hI(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Ihe(t){return t=t||{},t.data=hI(t.data),cI(t),t}const LT=new Map,uI=new Set;function $u(t,e){let n=LT.get(t);return n||(n=e(),LT.set(t,n),uI.add(n)),n}const ec=(t,e,n)=>{const r=oh(e,n);r!==void 0&&t.add(r)};class Mhe{constructor(e){this._config=Ihe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $u(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $u(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $u(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $u(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),l=o.get(n);if(l)return l;const c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(d=>ec(c,e,d))),u.forEach(d=>ec(c,i,d)),u.forEach(d=>ec(c,Fs[s]||{},d)),u.forEach(d=>ec(c,Wt,d)),u.forEach(d=>ec(c,k1,d))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),uI.has(n)&&o.set(n,h),h}chartOptionScopes(){const{options:e,type:n}=this;return[e,Fs[n]||{},Wt.datasets[n]||{},{type:n},Wt,k1]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=OT(this._resolverCache,e,i);let c=o;if(Ohe(o,n)){s.$shared=!1,r=or(r)?r():r;const h=this.createResolver(e,r,l);c=Xo(o,r,h)}for(const h of n)s[h]=c[h];return s}createResolver(e,n,r=[""],i){const{resolver:s}=OT(this._resolverCache,e,r);return st(n)?Xo(s,n,void 0,i):s}}function OT(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Zy(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(i,s)),s}const Lhe=t=>st(t)&&Object.getOwnPropertyNames(t).some(e=>or(t[e]));function Ohe(t,e){const{isScriptable:n,isIndexable:r}=X9(t);for(const i of e){const s=n(i),o=r(i),l=(o||s)&&t[i];if(s&&(or(l)||Lhe(l))||o&&Bt(l))return!0}return!1}var Rhe="4.5.0";const Nhe=["top","bottom","left","right","chartArea"];function RT(t,e){return t==="top"||t==="bottom"||Nhe.indexOf(t)===-1&&e==="x"}function NT(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function DT(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),kt(n&&n.onComplete,[t],e)}function Dhe(t){const e=t.chart,n=e.options.animation;kt(n&&n.onProgress,[t],e)}function dI(t){return nx()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Xu={},BT=t=>{const e=dI(t);return Object.values(Xu).filter(n=>n.canvas===e).pop()};function Bhe(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Phe(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let Cs=class{static defaults=Wt;static instances=Xu;static overrides=Fs;static registry=bi;static version=Rhe;static getChart=BT;static register(...e){bi.add(...e),PT()}static unregister(...e){bi.remove(...e),PT()}constructor(e,n){const r=this.config=new Mhe(n),i=dI(e),s=BT(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||rhe(i)),this.platform.updateConfig(r);const l=this.platform.acquireContext(i,o.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=zoe(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _he,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=sle(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Xu[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ki.listen(this,"complete",DT),Ki.listen(this,"progress",Dhe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return It(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return bi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oT(this.canvas,this.ctx),this}stop(){return Ki.stop(this),this}resize(e,n){Ki.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hT(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),kt(r.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Tt(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const l=n[o],c=E1(o,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),Tt(s,o=>{const l=o.options,c=l.id,h=E1(c,l),u=tt(l.type,o.dtype);(l.position===void 0||RT(l.position,h)!==RT(o.dposition))&&(l.position=o.dposition),i[c]=!0;let d=null;if(c in r&&r[c].type===u)d=r[c];else{const f=bi.getScale(u);d=new f({id:c,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(l,e)}),Tt(i,(o,l)=>{o||delete r[l]}),Tt(r,o=>{Or.configure(this,o,o.options),Or.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(NT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=s.indexAxis||$1(l,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const c=bi.getController(l),{datasetElementType:h,dataElementType:u}=Wt.datasets[l];Object.assign(c,{dataElementType:bi.getElement(u),datasetElementType:h&&bi.getElement(h)}),o.controller=new c(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Tt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,u=this.data.datasets.length;h<u;h++){const{controller:d}=this.getDatasetMeta(h),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Tt(s,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(NT("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Tt(this.scales,e=>{Or.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!K3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Bhe(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!K3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Or.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Tt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,or(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ki.has(this)?this.attached&&!Ki.running(this)&&Ki.start(this):(this.draw(),DT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=fce(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&n0(n,i),e.controller.draw(),i&&r0(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return lh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=Nce.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ks(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Tr(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(l=>l.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ki.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),oT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Xu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Tt(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(c,h)=>{n.addEventListener(this,c,h),e[c]=h},i=(c,h)=>{e[c]&&(n.removeEventListener(this,c,h),delete e[c])},s=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const l=()=>{i("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Tt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Tt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!Ud(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),l=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),l.length&&i.mode&&this.updateHoverStyle(l,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,l=this._getActiveElements(e,i,r,o),c=Goe(e),h=Phe(e,this._lastEvent,r,c);r&&(this._lastEvent=null,kt(s.onHover,[e,l,this],this),c&&kt(s.onClick,[e,l,this],this));const u=!Ud(l,i);return(u||n)&&(this._active=l,this._updateHoverStyles(l,i,n)),this._lastEvent=h,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};function PT(){return Tt(Cs.instances,t=>t._plugins.invalidate())}function fI(t,e,n=e){t.lineCap=tt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(tt(n.borderDash,e.borderDash)),t.lineDashOffset=tt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=tt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=tt(n.borderWidth,e.borderWidth),t.strokeStyle=tt(n.borderColor,e.borderColor)}function Fhe(t,e,n){t.lineTo(n.x,n.y)}function Hhe(t){return t.stepped?wle:t.tension||t.cubicInterpolationMode==="monotone"?_le:Fhe}function pI(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:l}=e,c=Math.max(i,o),h=Math.min(s,l),u=i<o&&s<o||i>l&&s>l;return{count:r,start:c,loop:e.loop,ilen:h<c&&!u?r+h-c:h-c}}function zhe(t,e,n,r){const{points:i,options:s}=e,{count:o,start:l,loop:c,ilen:h}=pI(i,n,r),u=Hhe(s);let{move:d=!0,reverse:f}=r||{},p,m,g;for(p=0;p<=h;++p)m=i[(l+(f?h-p:p))%o],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):u(t,g,m,f,s.stepped),g=m);return c&&(m=i[(l+(f?h:0))%o],u(t,g,m,f,s.stepped)),!!c}function qhe(t,e,n,r){const i=e.points,{count:s,start:o,ilen:l}=pI(i,n,r),{move:c=!0,reverse:h}=r||{};let u=0,d=0,f,p,m,g,b,y;const w=E=>(o+(h?l-E:E))%s,S=()=>{g!==b&&(t.lineTo(u,b),t.lineTo(u,g),t.lineTo(u,y))};for(c&&(p=i[w(0)],t.moveTo(p.x,p.y)),f=0;f<=l;++f){if(p=i[w(f)],p.skip)continue;const E=p.x,T=p.y,C=E|0;C===m?(T<g?g=T:T>b&&(b=T),u=(d*u+E)/++d):(S(),t.lineTo(E,T),m=C,d=0,g=b=T),y=T}S()}function j1(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?qhe:zhe}function Whe(t){return t.stepped?ece:t.tension||t.cubicInterpolationMode==="monotone"?tce:bs}function Uhe(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),fI(t,e.options),t.stroke(i)}function Vhe(t,e,n,r){const{segments:i,options:s}=e,o=j1(e);for(const l of i)fI(t,s,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Yhe=typeof Path2D=="function";function Ghe(t,e,n,r){Yhe&&!e.options.segment?Uhe(t,e,n,r):Vhe(t,e,n,r)}class Xhe extends dr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Vle(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cce(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=sce(this,{property:n,start:i,end:i});if(!o.length)return;const l=[],c=Whe(r);let h,u;for(h=0,u=o.length;h<u;++h){const{start:d,end:f}=o[h],p=s[d],m=s[f];if(p===m){l.push(p);continue}const g=Math.abs((i-p[n])/(m[n]-p[n])),b=c(p,m,g,r.stepped);b[n]=e[n],l.push(b)}return l.length===1?l[0]:l}pathSegment(e,n,r){return j1(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=j1(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of i)o&=s(e,this,l,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Ghe(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function FT(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Jhe extends dr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const i=this.options,{x:s,y:o}=this.getProps(["x","y"],r);return Math.pow(e-s,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,n){return FT(this,e,"x",n)}inYRange(e,n){return FT(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!lh(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,S1(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const HT=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Qhe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class zT extends dr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=kt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=sn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=HT(r,s);let h,u;n.font=i.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(o,s,l,c)+10):(u=this.maxHeight,h=this._fitCols(o,i,l,c)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],u=i+l;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((m,g)=>{const b=r+n/2+s.measureText(m.text).width;(g===0||h[h.length-1]+b+2*l>o)&&(d+=u,h[h.length-(g>0?0:1)]=0,p+=u,f++),c[g]={left:0,top:p,row:f,width:b,height:i},h[h.length-1]+=b+l}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],u=o-e;let d=l,f=0,p=0,m=0,g=0;return this.legendItems.forEach((b,y)=>{const{itemWidth:w,itemHeight:S}=Khe(r,n,s,b,i);y>0&&p+S+2*l>u&&(d+=f+l,h.push({width:f,height:p}),m+=f+l,g++,f=p=0),c[y]={left:m,top:p,col:g,width:w,height:S},f=Math.max(f,w),p+=S+l}),d+=f,h.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ko(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=$n(r,this.left+i,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,c=$n(r,this.left+i,this.right-this.lineWidths[l])),h.top+=this.top+e+i,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+i}else{let l=0,c=$n(r,this.top+e+i,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,c=$n(r,this.top+e+i,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+i,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;n0(e,this),this._draw(),r0(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,l=Wt.color,c=ko(e.rtl,this.left,this.width),h=sn(o.font),{padding:u}=o,d=h.size,f=d/2;let p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:m,boxHeight:g,itemHeight:b}=HT(o,d),y=function(C,M,R){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;i.save();const D=tt(R.lineWidth,1);if(i.fillStyle=tt(R.fillStyle,l),i.lineCap=tt(R.lineCap,"butt"),i.lineDashOffset=tt(R.lineDashOffset,0),i.lineJoin=tt(R.lineJoin,"miter"),i.lineWidth=D,i.strokeStyle=tt(R.strokeStyle,l),i.setLineDash(tt(R.lineDash,[])),o.usePointStyle){const $={radius:g*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:D},L=c.xPlus(C,m/2),q=M+f;Y9(i,$,L,q,o.pointStyleWidth&&m)}else{const $=M+Math.max((d-g)/2,0),L=c.leftForLtr(C,m),q=To(R.borderRadius);i.beginPath(),Object.values(q).some(P=>P!==0)?Jd(i,{x:L,y:$,w:m,h:g,radius:q}):i.rect(L,$,m,g),i.fill(),D!==0&&i.stroke()}i.restore()},w=function(C,M,R){ch(i,R.text,C,M+b/2,h,{strikethrough:R.hidden,textAlign:c.textAlign(R.textAlign)})},S=this.isHorizontal(),E=this._computeTitleHeight();S?p={x:$n(s,this.left+u,this.right-r[0]),y:this.top+u+E,line:0}:p={x:this.left+u,y:$n(s,this.top+E+u,this.bottom-n[0].height),line:0},eI(this.ctx,e.textDirection);const T=b+u;this.legendItems.forEach((C,M)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const R=i.measureText(C.text).width,D=c.textAlign(C.textAlign||(C.textAlign=o.textAlign)),$=m+f+R;let L=p.x,q=p.y;c.setWidth(this.width),S?M>0&&L+$+u>this.right&&(q=p.y+=T,p.line++,L=p.x=$n(s,this.left+u,this.right-r[p.line])):M>0&&q+T>this.bottom&&(L=p.x=L+n[p.line].width+u,p.line++,q=p.y=$n(s,this.top+E+u,this.bottom-n[p.line].height));const P=c.x(L);if(y(P,q,C),L=ole(D,L+m+f,S?L+$:this.right,e.rtl),w(c.x(L),q,C),S)p.x+=$+u;else if(typeof C.text!="string"){const A=h.lineHeight;p.y+=mI(C,A)+u}else p.y+=T}),tI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=sn(n.font),i=Mn(n.padding);if(!n.display)return;const s=ko(e.rtl,this.left,this.width),o=this.ctx,l=n.position,c=r.size/2,h=i.top+c;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+h,d=$n(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((g,b)=>Math.max(g,b.height),0);u=h+$n(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=$n(l,d,d+f);o.textAlign=s.textAlign(Jy(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ch(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=sn(e.font),r=Mn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(mc(e,this.left,this.right)&&mc(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],mc(e,i.left,i.left+i.width)&&mc(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!tue(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Qhe(i,r);i&&!s&&kt(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&kt(n.onHover,[e,r,this],this)}else r&&kt(n.onClick,[e,r,this],this)}}function Khe(t,e,n,r,i){const s=Zhe(r,t,e,n),o=eue(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Zhe(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function eue(t,e,n){let r=t;return typeof e.text!="string"&&(r=mI(e,n)),r}function mI(t,e){const n=t.text?t.text.length:0;return e*n}function tue(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nue={id:"legend",_element:zT,start(t,e,n){const r=t.legend=new zT({ctx:t.ctx,options:n,chart:t});Or.configure(t,r,n),Or.addBox(t,r)},stop(t){Or.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Or.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(n?0:void 0),u=Mn(h.borderWidth);return{text:e[c.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:h.borderColor,pointStyle:r||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class gI extends dr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Bt(r.text)?r.text.length:1;this._padding=Mn(r.padding);const s=i*sn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,l=o.align;let c=0,h,u,d;return this.isHorizontal()?(u=$n(l,r,s),d=n+e,h=s-r):(o.position==="left"?(u=r+e,d=$n(l,i,n),c=yt*-.5):(u=s-e,d=$n(l,n,i),c=yt*.5),h=i-n),{titleX:u,titleY:d,maxWidth:h,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=sn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(s);ch(e,n.text,0,0,r,{color:n.color,maxWidth:c,rotation:h,textAlign:Jy(n.align),textBaseline:"middle",translation:[o,l]})}}function rue(t,e){const n=new gI({ctx:t.ctx,options:e,chart:t});Or.configure(t,n,e),Or.addBox(t,n),t.titleBlock=n}var iue={id:"title",_element:gI,start(t,e,n){rue(t,n)},stop(t){const e=t.titleBlock;Or.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Or.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bc={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((l,c)=>l+c)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=t.length;s<o;++s){const c=t[s].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),u=Go(e,h);u<i&&(i=u,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,r=c.y}return{x:n,y:r}}};function mi(t,e){return e&&(Bt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Zi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function aue(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:l}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:l,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function qT(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:l}=e,c=sn(e.bodyFont),h=sn(e.titleFont),u=sn(e.footerFont),d=s.length,f=i.length,p=r.length,m=Mn(e.padding);let g=m.height,b=0,y=r.reduce((E,T)=>E+T.before.length+T.lines.length+T.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const E=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=p*E+(y-p)*c.lineHeight+(y-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let w=0;const S=function(E){b=Math.max(b,n.measureText(E).width+w)};return n.save(),n.font=h.string,Tt(t.title,S),n.font=c.string,Tt(t.beforeBody.concat(t.afterBody),S),w=e.displayColors?o+2+e.boxPadding:0,Tt(r,E=>{Tt(E.before,S),Tt(E.lines,S),Tt(E.after,S)}),w=0,n.font=u.string,Tt(t.footer,S),n.restore(),b+=m.width,{width:b,height:g}}function sue(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function oue(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function lue(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:l,right:c}}=t;let h="center";return r==="center"?h=i<=(l+c)/2?"left":"right":i<=s/2?h="left":i>=o-s/2&&(h="right"),oue(h,t,e,n)&&(h="center"),h}function WT(t,e,n){const r=n.yAlign||e.yAlign||sue(t,n);return{xAlign:n.xAlign||e.xAlign||lue(t,e,n,r),yAlign:r}}function cue(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function hue(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function UT(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:l,yAlign:c}=n,h=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:p}=To(o);let m=cue(e,l);const g=hue(e,c,h);return c==="center"?l==="left"?m+=h:l==="right"&&(m-=h):l==="left"?m-=Math.max(u,f)+i:l==="right"&&(m+=Math.max(d,p)+i),{x:Lr(m,0,r.width-e.width),y:Lr(g,0,r.height-e.height)}}function Eu(t,e,n){const r=Mn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function VT(t){return mi([],Zi(t))}function uue(t,e,n){return Ks(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function YT(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const bI={beforeTitle:Gi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gi,beforeBody:Gi,beforeLabel:Gi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return It(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gi,afterBody:Gi,beforeFooter:Gi,footer:Gi,afterFooter:Gi};function Zn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?bI[e].call(n,r):i}class GT extends dr{static positioners=bc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new ix(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=uue(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Zn(r,"beforeTitle",this,e),s=Zn(r,"title",this,e),o=Zn(r,"afterTitle",this,e);let l=[];return l=mi(l,Zi(i)),l=mi(l,Zi(s)),l=mi(l,Zi(o)),l}getBeforeBody(e,n){return VT(Zn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Tt(e,s=>{const o={before:[],lines:[],after:[]},l=YT(r,s);mi(o.before,Zi(Zn(l,"beforeLabel",this,s))),mi(o.lines,Zn(l,"label",this,s)),mi(o.after,Zi(Zn(l,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return VT(Zn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Zn(r,"beforeFooter",this,e),s=Zn(r,"footer",this,e),o=Zn(r,"afterFooter",this,e);let l=[];return l=mi(l,Zi(i)),l=mi(l,Zi(s)),l=mi(l,Zi(o)),l}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let l=[],c,h;for(c=0,h=n.length;c<h;++c)l.push(aue(this.chart,n[c]));return e.filter&&(l=l.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(l=l.sort((u,d)=>e.itemSort(u,d,r))),Tt(l,u=>{const d=YT(e.callbacks,u);i.push(Zn(d,"labelColor",this,u)),s.push(Zn(d,"labelPointStyle",this,u)),o.push(Zn(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const l=bc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const c=this._size=qT(this,r),h=Object.assign({},l,c),u=WT(this.chart,r,h),d=UT(r,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:d}=To(l),{x:f,y:p}=e,{width:m,height:g}=n;let b,y,w,S,E,T;return s==="center"?(E=p+g/2,i==="left"?(b=f,y=b-o,S=E+o,T=E-o):(b=f+m,y=b+o,S=E-o,T=E+o),w=b):(i==="left"?y=f+Math.max(c,u)+o:i==="right"?y=f+m-Math.max(h,d)-o:y=this.caretX,s==="top"?(S=p,E=S-o,b=y-o,w=y+o):(S=p+g,E=S+o,b=y+o,w=y-o),T=S),{x1:b,x2:y,x3:w,y1:S,y2:E,y3:T}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,l,c;if(s){const h=ko(r.rtl,this.x,this.width);for(e.x=Eu(this,r.titleAlign,r),n.textAlign=h.textAlign(r.titleAlign),n.textBaseline="middle",o=sn(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,c=0;c<s;++c)n.fillText(i[c],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:h}=s,u=sn(s.bodyFont),d=Eu(this,"left",s),f=i.x(d),p=c<u.lineHeight?(u.lineHeight-c)/2:0,m=n.y+p;if(s.usePointStyle){const g={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=i.leftForLtr(f,h)+h/2,y=m+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,S1(e,g,b,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,S1(e,g,b,y)}else{e.lineWidth=st(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=i.leftForLtr(f,h),b=i.leftForLtr(i.xPlus(f,1),h-2),y=To(o.borderRadius);Object.values(y).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Jd(e,{x:g,y:m,w:h,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Jd(e,{x:b,y:m+1,w:h-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,m,h,c),e.strokeRect(g,m,h,c),e.fillStyle=o.backgroundColor,e.fillRect(b,m+1,h-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=r,d=sn(r.bodyFont);let f=d.lineHeight,p=0;const m=ko(r.rtl,this.x,this.width),g=function(R){n.fillText(R,m.x(e.x+p),e.y+f/2),e.y+=f+s},b=m.textAlign(o);let y,w,S,E,T,C,M;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Eu(this,b,r),n.fillStyle=r.bodyColor,Tt(this.beforeBody,g),p=l&&b!=="right"?o==="center"?h/2+u:h+2+u:0,E=0,C=i.length;E<C;++E){for(y=i[E],w=this.labelTextColors[E],n.fillStyle=w,Tt(y.before,g),S=y.lines,l&&S.length&&(this._drawColorBox(n,e,E,m,r),f=Math.max(d.lineHeight,c)),T=0,M=S.length;T<M;++T)g(S[T]),f=d.lineHeight;Tt(y.after,g)}p=0,f=d.lineHeight,Tt(this.afterBody,g),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,l;if(s){const c=ko(r.rtl,this.x,this.width);for(e.x=Eu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",o=sn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:h,height:u}=r,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=To(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(l+d,c),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(l+h-f,c),n.quadraticCurveTo(l+h,c,l+h,c+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(l+h,c+u-m),n.quadraticCurveTo(l+h,c+u,l+h-m,c+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(l+p,c+u),n.quadraticCurveTo(l,c+u,l,c+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(l,c+d),n.quadraticCurveTo(l,c,l+d,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=bc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=qT(this,e),c=Object.assign({},o,this._size),h=WT(n,e,c),u=UT(e,c,h,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Mn(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),eI(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),tI(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),s=!Ud(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),l=this._positionChanged(o,e),c=n||!Ud(o,s)||l;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=bc[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}var due={id:"tooltip",_element:GT,positioners:bc,afterInit(t,e,n){n&&(t.tooltip=new GT({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fue=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function pue(t,e,n,r){const i=t.indexOf(e);if(i===-1)return fue(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const mue=(t,e)=>t===null?null:Lr(Math.round(t),0,e);function XT(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class gue extends ml{static id="category";static defaults={ticks:{callback:XT}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(It(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:pue(r,e,tt(n,e),this._addedLabels),mue(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return XT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function bue(t,e){const n=[],{bounds:i,step:s,min:o,max:l,precision:c,count:h,maxTicks:u,maxDigits:d,includeBounds:f}=t,p=s||1,m=u-1,{min:g,max:b}=e,y=!It(o),w=!It(l),S=!It(h),E=(b-g)/(d+1);let T=Z3((b-g)/m/p)*p,C,M,R,D;if(T<1e-14&&!y&&!w)return[{value:g},{value:b}];D=Math.ceil(b/T)-Math.floor(g/T),D>m&&(T=Z3(D*T/m/p)*p),It(c)||(C=Math.pow(10,c),T=Math.ceil(T*C)/C),i==="ticks"?(M=Math.floor(g/T)*T,R=Math.ceil(b/T)*T):(M=g,R=b),y&&w&&s&&Koe((l-o)/s,T/1e3)?(D=Math.round(Math.min((l-o)/T,u)),T=(l-o)/D,M=o,R=l):S?(M=y?o:M,R=w?l:R,D=h-1,T=(R-M)/D):(D=(R-M)/T,Nc(D,Math.round(D),T/1e3)?D=Math.round(D):D=Math.ceil(D));const $=Math.max(eT(T),eT(M));C=Math.pow(10,It(c)?$:c),M=Math.round(M*C)/C,R=Math.round(R*C)/C;let L=0;for(y&&(f&&M!==o?(n.push({value:o}),M<o&&L++,Nc(Math.round((M+L*T)*C)/C,o,JT(o,E,t))&&L++):M<o&&L++);L<D;++L){const q=Math.round((M+L*T)*C)/C;if(w&&q>l)break;n.push({value:q})}return w&&f&&R!==l?n.length&&Nc(n[n.length-1].value,l,JT(l,E,t))?n[n.length-1].value=l:n.push({value:l}):(!w||R===l)&&n.push({value:R}),n}function JT(t,e,{horizontal:n,minRotation:r}){const i=dn(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class yue extends ml{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return It(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=c=>i=n?i:c,l=c=>s=r?s:c;if(e){const c=Yo(i),h=Yo(s);c<0&&h<0?l(0):c>0&&h>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=bue(i,s);return e.bounds==="ticks"&&Zoe(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Ky(e,this.chart.options.locale,this.options.ticks.format)}}class xue extends yue{static id="linear";static defaults={ticks:{callback:V9.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lr(e)?e:0,this.max=lr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=dn(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const s0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ar=Object.keys(s0);function QT(t,e){return t-e}function KT(t,e){if(It(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),lr(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ps(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function ZT(t,e,n,r){const i=ar.length;for(let s=ar.indexOf(t);s<i-1;++s){const o=s0[ar[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=r)return ar[s]}return ar[i-1]}function wue(t,e,n,r,i){for(let s=ar.length-1;s>=ar.indexOf(n);s--){const o=ar[s];if(s0[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return ar[n?ar.indexOf(n):0]}function _ue(t){for(let e=ar.indexOf(t)+1,n=ar.length;e<n;++e)if(s0[ar[e]].common)return ar[e]}function e5(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Xy(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function vue(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+i.add(l,1,r))c=n[l],c>=0&&(e[c].major=!0);return e}function t5(t,e,n){const r=[],i={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],i[l]=o,r.push({value:l,major:!1});return s===0||!n?r:vue(t,r,i,n)}class n5 extends ml{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new Ice._date(e.adapters.date);i.init(n),Rc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:KT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!l&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=lr(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=lr(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,l=rle(i,s,o);return this._unit=n.unit||(r.autoSkip?ZT(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):wue(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_ue(this._unit),this.initOffsets(i),e.reverse&&l.reverse(),t5(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Lr(n,0,o),r=Lr(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||ZT(s.minUnit,n,r,this._getLabelCapacity(n)),l=tt(i.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,h=Ps(c)||c===!0,u={};let d=n,f,p;if(h&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,h?"day":o),e.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const m=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<r;f=+e.add(f,l,o),p++)e5(u,f,m);return(f===r||i.bounds==="ticks"||p===1)&&e5(u,f,m),Object.keys(u).sort(QT).map(g=>+g)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return kt(o,[e,n,r],this);const l=s.time.displayFormats,c=this._unit,h=this._majorUnit,u=c&&l[c],d=h&&l[h],f=r[n],p=h&&d&&f&&f.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=dn(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*o,h:r*o+l*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,t5(this,[e],this._majorUnit),i),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(KT(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ale(e.sort(QT))}}function ju(t,e,n){let r=0,i=t.length-1,s,o,l,c;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=ks(t,"pos",e)),{pos:s,time:l}=t[r],{pos:o,time:c}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=ks(t,"time",e)),{time:s,pos:l}=t[r],{time:o,pos:c}=t[i]);const h=o-s;return h?l+(c-l)*(e-s)/h:l}class Cpe extends n5{static id="timeseries";static defaults=n5.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ju(n,this.min),this._tableRange=ju(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,l,c,h,u;for(o=0,l=e.length;o<l;++o)h=e[o],h>=n&&h<=r&&i.push(h);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=i.length;o<l;++o)u=i[o+1],c=i[o-1],h=i[o],Math.round((u+c)/2)!==h&&s.push({time:h,pos:o/(l-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ju(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ju(this._table,r*this._tableRange+this._minPos,!0)}}const yI="label";function r5(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Tue(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function xI(t,e){t.labels=e}function wI(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yI;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function kue(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yI;const n={labels:[],datasets:[]};return xI(n,t.labels),wI(n,t.datasets,e),n}function Sue(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:l,options:c,plugins:h=[],fallbackContent:u,updateMode:d,...f}=t,p=je.useRef(null),m=je.useRef(null),g=()=>{p.current&&(m.current=new Cs(p.current,{type:o,data:kue(l,s),options:c&&{...c},plugins:h}),r5(e,m.current))},b=()=>{r5(e,null),m.current&&(m.current.destroy(),m.current=null)};return je.useEffect(()=>{!i&&m.current&&c&&Tue(m.current,c)},[i,c]),je.useEffect(()=>{!i&&m.current&&xI(m.current.config.data,l.labels)},[i,l.labels]),je.useEffect(()=>{!i&&m.current&&l.datasets&&wI(m.current.config.data,l.datasets,s)},[i,l.datasets]),je.useEffect(()=>{m.current&&(i?(b(),setTimeout(g)):m.current.update(d))},[i,c,l.labels,l.datasets,d]),je.useEffect(()=>{m.current&&(b(),setTimeout(g))},[o]),je.useEffect(()=>(g(),()=>b()),[]),na.createElement("canvas",{ref:p,role:"img",height:n,width:r,...f},u)}const $ue=je.forwardRef(Sue);function Eue(t,e){return Cs.register(e),je.forwardRef((n,r)=>na.createElement($ue,{...n,ref:r,type:t}))}const _I=Eue("line",Ace);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const i5={modes:{point(t,e){return Ju(t,e,{intersect:!0})},nearest(t,e,n){return Aue(t,e,n)},x(t,e,n){return Ju(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return Ju(t,e,{intersect:n.intersect,axis:"y"})}}};function ox(t,e,n){return(i5.modes[n.mode]||i5.modes.nearest)(t,e,n)}function jue(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Cue(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function Ju(t,e,n){return t.filter(r=>n.intersect?r.inRange(e.x,e.y):jue(r,e,n.axis))}function Aue(t,e,n){let r=Number.POSITIVE_INFINITY;return Ju(t,e,n).reduce((i,s)=>{const o=s.getCenterPoint(),l=Cue(e,o,n.axis),c=Go(e,l);return c<r?(i=[s],r=c):c===r&&i.push(s),i},[]).sort((i,s)=>i._index-s._index).slice(0,1)}function Zs(t,e,n){const r=Math.cos(n),i=Math.sin(n),s=e.x,o=e.y;return{x:s+r*(t.x-s)-i*(t.y-o),y:o+i*(t.x-s)+r*(t.y-o)}}const Iue=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Ss=.001,o0=(t,e,n)=>Math.min(n,Math.max(e,t)),vI=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function Mue(t,e,n){for(const r of Object.keys(t))t[r]=o0(t[r],e,n);return t}function Lue(t,e,n,r){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+r,2)}function TI(t,{x:e,y:n,x2:r,y2:i},s,{borderWidth:o,hitTolerance:l}){const c=(o+l)/2,h=t.x>=e-c-Ss&&t.x<=r+c+Ss,u=t.y>=n-c-Ss&&t.y<=i+c+Ss;return s==="x"?h:(s==="y"||h)&&u}function kI(t,{rect:e,center:n},r,{rotation:i,borderWidth:s,hitTolerance:o}){const l=Zs(t,n,dn(-i));return TI(l,e,r,{borderWidth:s,hitTolerance:o})}function eo(t,e){const{centerX:n,centerY:r}=t.getProps(["centerX","centerY"],e);return{x:n,y:r}}function Oue(t,e,n,r=!0){const i=n.split(".");let s=0;for(const o of e.split(".")){const l=i[s++];if(parseInt(o,10)<parseInt(l,10))break;if(Iue(l,o)){if(r)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const SI=t=>typeof t=="string"&&t.endsWith("%"),$I=t=>parseFloat(t)/100,EI=t=>o0($I(t),0,1),tc=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Rue={box:t=>tc(t.centerX,t.centerY),doughnutLabel:t=>tc(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>tc(t.centerX,t.centerY),line:t=>tc(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>tc(t.centerX,t.centerY)};function lx(t,e){return e==="start"?0:e==="end"?t:SI(e)?EI(e)*t:t/2}function Ua(t,e,n=!0){return typeof e=="number"?e:SI(e)?(n?EI(e):$I(e))*t:t}function Nue(t,e){const{x:n,width:r}=t,i=e.textAlign;return i==="center"?n+r/2:i==="end"||i==="right"?n+r:n}function jI(t,e,{borderWidth:n,position:r,xAdjust:i,yAdjust:s},o){const l=st(o),c=e.width+(l?o.width:0)+n,h=e.height+(l?o.height:0)+n,u=cx(r),d=a5(t.x,c,i,u.x),f=a5(t.y,h,s,u.y);return{x:d,y:f,x2:d+c,y2:f+h,width:c,height:h,centerX:d+c/2,centerY:f+h/2}}function cx(t,e="center"){return st(t)?{x:tt(t.x,e),y:tt(t.y,e)}:(t=tt(t,e),{x:t,y:t})}const CI=(t,e)=>t&&t.autoFit&&e<1;function AI(t,e){const n=t.font,r=Bt(n)?n:[n];return CI(t,e)?r.map(function(i){const s=sn(i);return s.size=Math.floor(i.size*e),s.lineHeight=i.lineHeight,sn(s)}):r.map(i=>sn(i))}function II(t){return t&&(Tr(t.xValue)||Tr(t.yValue))}function a5(t,e,n=0,r){return t-lx(e,r)+n}function gl(t,e,n){const r=n.init;if(r){if(r===!0)return LI(e,n)}else return;return Due(t,e,n)}function MI(t,e,n){let r=!1;return e.forEach(i=>{or(t[i])?(r=!0,n[i]=t[i]):Tr(n[i])&&delete n[i]}),r}function LI(t,e){const n=e.type||"line";return Rue[n](t)}function Due(t,e,n){const r=kt(n.init,[{chart:t,properties:e,options:n}]);if(r===!0)return LI(e,n);if(st(r))return r}const Gm=new Map,Bue=t=>isNaN(t)||t<=0,Pue=t=>t.reduce(function(e,n){return e+=n.string,e},"");function l0(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function c0(t,{x:e,y:n},r){r&&(t.translate(e,n),t.rotate(dn(r)),t.translate(-e,-n))}function ga(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function bl(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function h0(t,e){const n=e.content;if(l0(n))return{width:Ua(n.width,e.width),height:Ua(n.height,e.height)};const r=AI(e),i=e.textStrokeWidth,s=Bt(n)?n:[n],o=s.join()+Pue(r)+i+(t._measureText?"-spriting":"");return Gm.has(o)||Gm.set(o,que(t,s,r,i)),Gm.get(o)}function OI(t,e,n){const{x:r,y:i,width:s,height:o}=e;t.save(),bl(t,n);const l=ga(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Jd(t,{x:r,y:i,w:s,h:o,radius:Mue(To(n.borderRadius),0,Math.min(s,o)/2)}),t.closePath(),t.fill(),l&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function RI(t,e,n,r){const i=n.content;if(l0(i)){t.save(),t.globalAlpha=Vue(n.opacity,i.style.opacity),t.drawImage(i,e.x,e.y,e.width,e.height),t.restore();return}const s=Bt(i)?i:[i],o=AI(n,r),l=n.color,c=Bt(l)?l:[l],h=Nue(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Fue(t,n)&&Wue(t,{x:h,y:u},s,o),Uue(t,{x:h,y:u},s,{fonts:o,colors:c}),t.restore()}function Fue(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Hue(t,e,n,r){const{radius:i,options:s}=e,o=s.pointStyle,l=s.rotation;let c=(l||0)*Gy;if(l0(o)){t.save(),t.translate(n,r),t.rotate(c),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}Bue(i)||zue(t,{x:n,y:r,radius:i,rotation:l,style:o,rad:c})}function zue(t,{x:e,y:n,radius:r,rotation:i,style:s,rad:o}){let l,c,h,u;switch(t.beginPath(),s){default:t.arc(e,n,r,0,wn),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Gd,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Gd,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),t.closePath();break;case"rectRounded":u=r*.516,h=r-u,l=Math.cos(o+Cr)*h,c=Math.sin(o+Cr)*h,t.arc(e-l,n-c,u,o-yt,o-_n),t.arc(e+c,n-l,u,o-_n,o),t.arc(e+l,n+c,u,o,o+_n),t.arc(e-c,n+l,u,o+_n,o+yt),t.closePath();break;case"rect":if(!i){h=Math.SQRT1_2*r,t.rect(e-h,n-h,2*h,2*h);break}o+=Cr;case"rectRot":l=Math.cos(o)*r,c=Math.sin(o)*r,t.moveTo(e-l,n-c),t.lineTo(e+c,n-l),t.lineTo(e+l,n+c),t.lineTo(e-c,n+l),t.closePath();break;case"crossRot":o+=Cr;case"cross":l=Math.cos(o)*r,c=Math.sin(o)*r,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l);break;case"star":l=Math.cos(o)*r,c=Math.sin(o)*r,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l),o+=Cr,l=Math.cos(o)*r,c=Math.sin(o)*r,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l);break;case"line":l=Math.cos(o)*r,c=Math.sin(o)*r,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*r,n+Math.sin(o)*r);break}t.fill()}function que(t,e,n,r){t.save();const i=e.length;let s=0,o=r;for(let l=0;l<i;l++){const c=n[Math.min(l,n.length-1)];t.font=c.string;const h=e[l];s=Math.max(s,t.measureText(h).width+r),o+=c.lineHeight}return t.restore(),{width:s,height:o}}function Wue(t,{x:e,y:n},r,i){t.beginPath();let s=0;r.forEach(function(o,l){const c=i[Math.min(l,i.length-1)],h=c.lineHeight;t.font=c.string,t.strokeText(o,e,n+h/2+s),s+=h}),t.stroke()}function Uue(t,{x:e,y:n},r,{fonts:i,colors:s}){let o=0;r.forEach(function(l,c){const h=s[Math.min(c,s.length-1)],u=i[Math.min(c,i.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=h,t.fillText(l,e,n+d/2+o),o+=d,t.fill()})}function Vue(t,e){const n=Ps(t)?t:e;return Ps(n)?o0(n,0,1):1}const NI=["left","bottom","top","right"];function Yue(t,e){const{pointX:n,pointY:r,options:i}=e,s=i.callout,o=s&&s.display&&Kue(e,s);if(!o||ede(e,s,o))return;if(t.save(),t.beginPath(),!ga(t,s))return t.restore();const{separatorStart:c,separatorEnd:h}=Gue(e,o),{sideStart:u,sideEnd:d}=Jue(e,o,c);(s.margin>0||i.borderWidth===0)&&(t.moveTo(c.x,c.y),t.lineTo(h.x,h.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const f=Zs({x:n,y:r},e.getCenterPoint(),dn(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function Gue(t,e){const{x:n,y:r,x2:i,y2:s}=t,o=Xue(t,e);let l,c;return e==="left"||e==="right"?(l={x:n+o,y:r},c={x:l.x,y:s}):(l={x:n,y:r+o},c={x:i,y:l.y}),{separatorStart:l,separatorEnd:c}}function Xue(t,e){const{width:n,height:r,options:i}=t,s=i.callout.margin+i.borderWidth/2;return e==="right"?n+s:e==="bottom"?r+s:-s}function Jue(t,e,n){const{y:r,width:i,height:s,options:o}=t,l=o.callout.start,c=Que(e,o.callout);let h,u;return e==="left"||e==="right"?(h={x:n.x,y:r+Ua(s,l)},u={x:h.x+c,y:h.y}):(h={x:n.x+Ua(i,l),y:n.y},u={x:h.x,y:h.y+c}),{sideStart:h,sideEnd:u}}function Que(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function Kue(t,e){const n=e.position;return NI.includes(n)?n:Zue(t,e)}function Zue(t,e){const{x:n,y:r,x2:i,y2:s,width:o,height:l,pointX:c,pointY:h,centerX:u,centerY:d,rotation:f}=t,p={x:u,y:d},m=e.start,g=Ua(o,m),b=Ua(l,m),y=[n,n+g,n+g,i],w=[r+b,s,r,s],S=[];for(let E=0;E<4;E++){const T=Zs({x:y[E],y:w[E]},p,dn(f));S.push({position:NI[E],distance:Go(T,{x:c,y:h})})}return S.sort((E,T)=>E.distance-T.distance)[0].position}function ede(t,e,n){const{pointX:r,pointY:i}=t,s=e.margin;let o=r,l=i;return n==="left"?o+=s:n==="right"?o-=s:n==="top"?l+=s:n==="bottom"&&(l-=s),t.inRange(o,l)}const s5={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Qo(t,e,n){return e=typeof e=="number"?e:t.parse(e),lr(e)?t.getPixelForValue(e):n}function Hs(t,e,n){const r=e[n];if(r||n==="scaleID")return r;const i=n.charAt(0),s=Object.values(t).filter(o=>o.axis&&o.axis===i);return s.length?s[0].id:i}function DI(t,e){if(t){const n=t.options.reverse,r=Qo(t,e.min,n?e.end:e.start),i=Qo(t,e.max,n?e.start:e.end);return{start:r,end:i}}}function BI(t,e){const{chartArea:n,scales:r}=t,i=r[Hs(r,e,"xScaleID")],s=r[Hs(r,e,"yScaleID")];let o=n.width/2,l=n.height/2;return i&&(o=Qo(i,e.xValue,i.left+i.width/2)),s&&(l=Qo(s,e.yValue,s.top+s.height/2)),{x:o,y:l}}function hx(t,e){const n=t.scales,r=n[Hs(n,e,"xScaleID")],i=n[Hs(n,e,"yScaleID")];if(!r&&!i)return{};let{left:s,right:o}=r||t.chartArea,{top:l,bottom:c}=i||t.chartArea;const h=o5(r,{min:e.xMin,max:e.xMax,start:s,end:o});s=h.start,o=h.end;const u=o5(i,{min:e.yMin,max:e.yMax,start:c,end:l});return l=u.start,c=u.end,{x:s,y:l,x2:o,y2:c,width:o-s,height:c-l,centerX:s+(o-s)/2,centerY:l+(c-l)/2}}function PI(t,e){if(!II(e)){const n=hx(t,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,e.radius=r);const i=r*2,s=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:s-r,y:o-r,x2:s+r,y2:o+r,centerX:s,centerY:o,width:i,height:i,radius:r}}return nde(t,e)}function tde(t,e){const{scales:n,chartArea:r}=t,i=n[e.scaleID],s={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return i?rde(i,s,e):ide(n,s,e),s}function FI(t,e){const n=hx(t,e);return n.initProperties=gl(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:ode(t,n,e),initProperties:n.initProperties}],n}function nde(t,e){const n=BI(t,e),r=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:r,height:r}}function o5(t,e){const n=DI(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function rde(t,e,n){const r=Qo(t,n.value,NaN),i=Qo(t,n.endValue,r);t.isHorizontal()?(e.x=r,e.x2=i):(e.y=r,e.y2=i)}function ide(t,e,n){for(const r of Object.keys(s5)){const i=t[Hs(t,n,r)];if(i){const{min:s,max:o,start:l,end:c,startProp:h,endProp:u}=s5[r],d=DI(i,{min:n[s],max:n[o],start:i[l],end:i[c]});e[h]=d.start,e[u]=d.end}}}function ade({properties:t,options:e},n,r,i){const{x:s,x2:o,width:l}=t;return HI({start:s,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:i.left,end:i.right},adjust:e.label.xAdjust,size:n.width})}function sde({properties:t,options:e},n,r,i){const{y:s,y2:o,height:l}=t;return HI({start:s,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:i.top,end:i.bottom},adjust:e.label.yAdjust,size:n.height})}function HI(t,e){const{start:n,end:r,borderWidth:i}=t,{position:s,padding:{start:o,end:l},adjust:c}=e,h=r-i-n-o-l-e.size;return n+i/2+c+lx(h,s)}function ode(t,e,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const i=cx(r.position),s=Mn(r.padding),o=h0(t.ctx,r),l=ade({properties:e,options:n},o,i,s),c=sde({properties:e,options:n},o,i,s),h=o.width+s.width,u=o.height+s.height;return{x:l,y:c,x2:l+h,y2:c+u,width:h,height:u,centerX:l+h/2,centerY:c+u/2,rotation:r.rotation}}const C1=["enter","leave"],ux=C1.concat("click");function lde(t,e,n){e.listened=MI(n,ux,e.listeners),e.moveListened=!1,C1.forEach(r=>{or(n[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&or(r.click)&&(e.listened=!0),e.moveListened||C1.forEach(i=>{or(r[i])&&(e.listened=!0,e.moveListened=!0)})})}function cde(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return hde(t,e,n);case"click":return ude(t,e,n)}}function hde(t,e,n){if(!t.moveListened)return;let r;e.type==="mousemove"?r=ox(t.visibleElements,e,n.interaction):r=[];const i=t.hovered;t.hovered=r;const s={state:t,event:e};let o=l5(s,"leave",i,r);return l5(s,"enter",r,i)||o}function l5({state:t,event:e},n,r,i){let s;for(const o of r)i.indexOf(o)<0&&(s=zI(o.options[n]||t.listeners[n],o,e)||s);return s}function ude(t,e,n){const r=t.listeners,i=ox(t.visibleElements,e,n.interaction);let s;for(const o of i)s=zI(o.options.click||r.click,o,e)||s;return s}function zI(t,e,n){return kt(t,[e.$context,n])===!0}const Zd=["afterDraw","beforeDraw"];function dde(t,e,n){const r=e.visibleElements;e.hooked=MI(n,Zd,e.hooks),e.hooked||r.forEach(i=>{e.hooked||Zd.forEach(s=>{or(i.options[s])&&(e.hooked=!0)})})}function c5(t,e,n){if(t.hooked){const r=e.options[n]||t.hooks[n];return kt(r,[e.$context])}}function fde(t,e,n){const r=yde(t.scales,e,n);let i=h5(e,r,"min","suggestedMin");i=h5(e,r,"max","suggestedMax")||i,i&&or(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function pde(t,e){for(const n of t)gde(n,e)}function h5(t,e,n,r){if(lr(e[n])&&!mde(t.options,n,r)){const i=t[n]!==e[n];return t[n]=e[n],i}}function mde(t,e,n){return Tr(t[e])||Tr(t[n])}function gde(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const r=Hs(e,t,n);r&&!e[r]&&bde(t,n)&&console.warn(`No scale found with id '${r}' for annotation '${t.id}'`)}}function bde(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const r of["Min","Max","Value"])if(Tr(t[n+r]))return!0;return!1}function yde(t,e,n){const r=e.axis,i=e.id,s=r+"ScaleID",o={min:tt(e.min,Number.NEGATIVE_INFINITY),max:tt(e.max,Number.POSITIVE_INFINITY)};for(const l of n)l.scaleID===i?u5(l,e,["value","endValue"],o):Hs(t,l,s)===i&&u5(l,e,[r+"Min",r+"Max",r+"Value"],o);return o}function u5(t,e,n,r){for(const i of n){const s=t[i];if(Tr(s)){const o=e.parse(s);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class yl extends dr{inRange(e,n,r,i){const{x:s,y:o}=Zs({x:e,y:n},this.getCenterPoint(i),dn(-this.options.rotation));return TI({x:s,y:o},this.getProps(["x","y","x2","y2"],i),r,this.options)}getCenterPoint(e){return eo(this,e)}draw(e){e.save(),c0(e,this.getCenterPoint(),this.options.rotation),OI(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return FI(e,n)}}yl.id="boxAnnotation";yl.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};yl.defaultRoutes={borderColor:"color",backgroundColor:"color"};yl.descriptors={label:{_fallback:!0}};class u0 extends dr{inRange(e,n,r,i){return kI({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return eo(this,e)}draw(e){const n=this.options;!n.display||!n.content||(kde(e,this),e.save(),c0(e,this.getCenterPoint(),this.rotation),RI(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const r=xde(e,n);if(!r)return{};const{controllerMeta:i,point:s,radius:o}=_de(e,n,r);let l=h0(e.ctx,n);const c=vde(l,o);CI(n,c)&&(l={width:l.width*c,height:l.height*c});const{position:h,xAdjust:u,yAdjust:d}=n,f=jI(s,l,{borderWidth:0,position:h,xAdjust:u,yAdjust:d});return{initProperties:gl(e,f,n),...f,...i,rotation:n.rotation,_fitRatio:c}}}u0.id="doughnutLabelAnnotation";u0.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};u0.defaultRoutes={};function xde(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,r){const i=r.controller;return i instanceof Cce&&wde(t,e,r.data)&&(!n||i.innerRadius<n.controller.innerRadius)&&i.options.circumference>=90?r:n},void 0)}function wde(t,e,n){if(!e.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&t.getDataVisibility(r))return!0}function _de({chartArea:t},e,n){const{left:r,top:i,right:s,bottom:o}=t,{innerRadius:l,offsetX:c,offsetY:h}=n.controller,u=(r+s)/2+c,d=(i+o)/2+h,f={left:Math.max(u-l,r),right:Math.min(u+l,s),top:Math.max(d-l,i),bottom:Math.min(d+l,o)},p={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},m=e.spacing+e.borderWidth/2,g=l-m,b=p.y>d,y=b?i+m:o-m,w=Tde(y,u,d,g);return{controllerMeta:{_centerX:u,_centerY:d,_radius:g,_counterclockwise:b,...w},point:p,radius:Math.min(l,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function vde({width:t,height:e},n){const r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/r}function Tde(t,e,n,r){const i=Math.pow(n-t,2),s=Math.pow(r,2),o=e*-2,l=Math.pow(e,2)+i-s,c=Math.pow(o,2)-4*l;if(c<=0)return{_startAngle:0,_endAngle:wn};const h=(-o-Math.sqrt(c))/2,u=(-o+Math.sqrt(c))/2;return{_startAngle:T1({x:e,y:n},{x:h,y:t}).angle,_endAngle:T1({x:e,y:n},{x:u,y:t}).angle}}function kde(t,e){const{_centerX:n,_centerY:r,_radius:i,_startAngle:s,_endAngle:o,_counterclockwise:l,options:c}=e;t.save();const h=ga(t,c);t.fillStyle=c.backgroundColor,t.beginPath(),t.arc(n,r,i,s,o,l),t.closePath(),t.fill(),h&&t.stroke(),t.restore()}class Rh extends dr{inRange(e,n,r,i){return kI({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],i),center:this.getCenterPoint(i)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return eo(this,e)}draw(e){const n=this.options,r=!Tr(this._visible)||this._visible;!n.display||!n.content||!r||(e.save(),c0(e,this.getCenterPoint(),this.rotation),Yue(e,this),OI(e,this,n),RI(e,Sde(this),n),e.restore())}resolveElementProperties(e,n){let r;if(II(n))r=BI(e,n);else{const{centerX:l,centerY:c}=hx(e,n);r={x:l,y:c}}const i=Mn(n.padding),s=h0(e.ctx,n),o=jI(r,s,n,i);return{initProperties:gl(e,o,n),pointX:r.x,pointY:r.y,...o,rotation:n.rotation}}}Rh.id="labelAnnotation";Rh.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Rh.defaultRoutes={borderColor:"color"};function Sde({x:t,y:e,width:n,height:r,options:i}){const s=i.borderWidth/2,o=Mn(i.padding);return{x:t+o.left+s,y:e+o.top+s,width:n-o.left-o.right-i.borderWidth,height:r-o.top-o.bottom-i.borderWidth}}const dx=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),A1=(t,e,n)=>dx(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,d5=(t,e,n)=>dx(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,yc=t=>t*t,$de=(t,e,{x:n,y:r,x2:i,y2:s},o)=>o==="y"?{start:Math.min(r,s),end:Math.max(r,s),value:e}:{start:Math.min(n,i),end:Math.max(n,i),value:t},f5=(t,e,n,r)=>(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n,I1=(t,e,n,r)=>({x:f5(t.x,e.x,n.x,r),y:f5(t.y,e.y,n.y,r)}),p5=(t,e,n,r)=>2*(1-r)*(e-t)+2*r*(n-e),m5=(t,e,n,r)=>-Math.atan2(p5(t.x,e.x,n.x,r),p5(t.y,e.y,n.y,r))+.5*yt;class Nh extends dr{inRange(e,n,r,i){const s=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:n},{path:l,ctx:c}=this;if(l){ga(c,this.options),c.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,f=n*u.currentDevicePixelRatio,p=c.isPointInStroke(l,d,f)||M1(this,o,i);return c.restore(),p}const h=yc(s);return Ade(this,o,h,i)||M1(this,o,i)}return Ede(this,{mouseX:e,mouseY:n},r,{hitSize:s,useFinalPosition:i})}getCenterPoint(e){return eo(this,e)}draw(e){const{x:n,y:r,x2:i,y2:s,cp:o,options:l}=this;if(e.save(),!ga(e,l))return e.restore();bl(e,l);const c=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2));if(l.curve&&o)return Bde(e,this,o,c),e.restore();const{startOpts:h,endOpts:u,startAdjust:d,endAdjust:f}=qI(this),p=Math.atan2(s-r,i-n);e.translate(n,r),e.rotate(p),e.beginPath(),e.moveTo(0+d,0),e.lineTo(c-f,0),e.shadowColor=l.borderShadowColor,e.stroke(),L1(e,0,d,h),L1(e,c,-f,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const r=tde(e,n),{x:i,y:s,x2:o,y2:l}=r,c=jde(r,e.chartArea),h=c?Cde({x:i,y:s},{x:o,y:l},e.chartArea):{x:i,y:s,x2:o,y2:l,width:Math.abs(o-i),height:Math.abs(l-s)};if(h.centerX=(o+i)/2,h.centerY=(l+s)/2,h.initProperties=gl(e,h,n),n.curve){const d={x:h.x,y:h.y},f={x:h.x2,y:h.y2};h.cp=Dde(h,n,Go(d,f))}const u=Ide(e,h,n.label);return u._visible=c,h.elements=[{type:"label",optionScope:"label",properties:u,initProperties:h.initProperties}],h}}Nh.id="lineAnnotation";const g5={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Nh.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},g5),fill:!1,length:12,start:Object.assign({},g5),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Rh.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Nh.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Nh.defaultRoutes={borderColor:"color"};function Ede(t,{mouseX:e,mouseY:n},r,{hitSize:i,useFinalPosition:s}){const o=$de(e,n,t.getProps(["x","y","x2","y2"],s),r);return vI(o,i)||M1(t,{mouseX:e,mouseY:n},s,r)}function jde({x:t,y:e,x2:n,y2:r},{top:i,right:s,bottom:o,left:l}){return!(t<l&&n<l||t>s&&n>s||e<i&&r<i||e>o&&r>o)}function b5({x:t,y:e},n,{top:r,right:i,bottom:s,left:o}){return t<o&&(e=d5(o,{x:t,y:e},n),t=o),t>i&&(e=d5(i,{x:t,y:e},n),t=i),e<r&&(t=A1(r,{x:t,y:e},n),e=r),e>s&&(t=A1(s,{x:t,y:e},n),e=s),{x:t,y:e}}function Cde(t,e,n){const{x:r,y:i}=b5(t,e,n),{x:s,y:o}=b5(e,t,n);return{x:r,y:i,x2:s,y2:o,width:Math.abs(s-r),height:Math.abs(o-i)}}function Ade(t,{mouseX:e,mouseY:n},r=Ss,i){const{x:s,y:o,x2:l,y2:c}=t.getProps(["x","y","x2","y2"],i),h=l-s,u=c-o,d=yc(h)+yc(u),f=d===0?-1:((e-s)*h+(n-o)*u)/d;let p,m;return f<0?(p=s,m=o):f>1?(p=l,m=c):(p=s+f*h,m=o+f*u),yc(e-p)+yc(n-m)<=r}function M1(t,{mouseX:e,mouseY:n},r,i){const s=t.label;return s.options.display&&s.inRange(e,n,i,r)}function Ide(t,e,n){const r=n.borderWidth,i=Mn(n.padding),s=h0(t.ctx,n),o=s.width+i.width+r,l=s.height+i.height+r;return Lde(e,n,{width:o,height:l,padding:i},t.chartArea)}function Mde(t){const{x:e,y:n,x2:r,y2:i}=t,s=Math.atan2(i-n,r-e);return s>yt/2?s-yt:s<yt/-2?s+yt:s}function Lde(t,e,n,r){const{width:i,height:s,padding:o}=n,{xAdjust:l,yAdjust:c}=e,h={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?Mde(t):dn(e.rotation),f=Ode(i,s,d),p=Rde(t,e,{labelSize:f,padding:o},r),m=t.cp?I1(h,t.cp,u,p):dx(h,u,p),g={size:f.w,min:r.left,max:r.right,padding:o.left},b={size:f.h,min:r.top,max:r.bottom,padding:o.top},y=x5(m.x,g)+l,w=x5(m.y,b)+c;return{x:y-i/2,y:w-s/2,x2:y+i/2,y2:w+s/2,centerX:y,centerY:w,pointX:m.x,pointY:m.y,width:i,height:s,rotation:z9(d)}}function Ode(t,e,n){const r=Math.cos(n),i=Math.sin(n);return{w:Math.abs(t*r)+Math.abs(e*i),h:Math.abs(t*i)+Math.abs(e*r)}}function Rde(t,e,n,r){let i;const s=Nde(t,r);return e.position==="start"?i=y5({w:t.x2-t.x,h:t.y2-t.y},n,e,s):e.position==="end"?i=1-y5({w:t.x-t.x2,h:t.y-t.y2},n,e,s):i=lx(1,e.position),i}function y5(t,e,n,r){const{labelSize:i,padding:s}=e,o=t.w*r.dx,l=t.h*r.dy,c=o>0&&(i.w/2+s.left-r.x)/o,h=l>0&&(i.h/2+s.top-r.y)/l;return o0(Math.max(c,h),0,.25)}function Nde(t,e){const{x:n,x2:r,y:i,y2:s}=t,o=Math.min(i,s)-e.top,l=Math.min(n,r)-e.left,c=e.bottom-Math.max(i,s),h=e.right-Math.max(n,r);return{x:Math.min(l,h),y:Math.min(o,c),dx:l<=h?1:-1,dy:o<=c?1:-1}}function x5(t,e){const{size:n,min:r,max:i,padding:s}=e,o=n/2;return n>i-r?(i+r)/2:(r>=t-s-o&&(t=r+s+o),i<=t+s+o&&(t=i-s-o),t)}function qI(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:w5(t,n),endAdjust:w5(t,r)}}function w5(t,e){if(!e||!e.display)return 0;const{length:n,width:r}=e,i=t.options.borderWidth/2,s={x:n,y:r+i};return Math.abs(A1(0,s,{x:0,y:i}))}function L1(t,e,n,r){if(!r||!r.display)return;const{length:i,width:s,fill:o,backgroundColor:l,borderColor:c}=r,h=Math.abs(e-i)+n;t.beginPath(),bl(t,r),ga(t,r),t.moveTo(h,-s),t.lineTo(e+n,0),t.lineTo(h,s),o===!0?(t.fillStyle=l||c,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=r.borderShadowColor,t.stroke()}function Dde(t,e,n){const{x:r,y:i,x2:s,y2:o,centerX:l,centerY:c}=t,h=Math.atan2(o-i,s-r),u=cx(e.controlPoint,0),d={x:l+Ua(n,u.x,!1),y:c+Ua(n,u.y,!1)};return Zs(d,{x:l,y:c},h)}function _5(t,{x:e,y:n},{angle:r,adjust:i},s){!s||!s.display||(t.save(),t.translate(e,n),t.rotate(r),L1(t,0,-i,s),t.restore())}function Bde(t,e,n,r){const{x:i,y:s,x2:o,y2:l,options:c}=e,{startOpts:h,endOpts:u,startAdjust:d,endAdjust:f}=qI(e),p={x:i,y:s},m={x:o,y:l},g=m5(p,n,m,0),b=m5(p,n,m,1)-yt,y=I1(p,n,m,d/r),w=I1(p,n,m,1-f/r),S=new Path2D;t.beginPath(),S.moveTo(y.x,y.y),S.quadraticCurveTo(n.x,n.y,w.x,w.y),t.shadowColor=c.borderShadowColor,t.stroke(S),e.path=S,e.ctx=t,_5(t,y,{angle:g,adjust:d},h),_5(t,w,{angle:b,adjust:f},u)}class Dh extends dr{inRange(e,n,r,i){const s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return Pde({x:e,y:n},this.getProps(["width","height","centerX","centerY"],i),s,o);const{x:l,y:c,x2:h,y2:u}=this.getProps(["x","y","x2","y2"],i),d=r==="y"?{start:c,end:u}:{start:l,end:h},f=Zs({x:e,y:n},this.getCenterPoint(i),dn(-s));return f[r]>=d.start-o-Ss&&f[r]<=d.end+o+Ss}getCenterPoint(e){return eo(this,e)}draw(e){const{width:n,height:r,centerX:i,centerY:s,options:o}=this;e.save(),c0(e,this.getCenterPoint(),o.rotation),bl(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const l=ga(e,o);e.ellipse(i,s,r/2,n/2,yt/2,0,2*yt),e.fill(),l&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return FI(e,n)}}Dh.id="ellipseAnnotation";Dh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},yl.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Dh.defaultRoutes={borderColor:"color",backgroundColor:"color"};Dh.descriptors={label:{_fallback:!0}};function Pde(t,e,n,r){const{width:i,height:s,centerX:o,centerY:l}=e,c=i/2,h=s/2;if(c<=0||h<=0)return!1;const u=dn(n||0),d=Math.cos(u),f=Math.sin(u),p=Math.pow(d*(t.x-o)+f*(t.y-l),2),m=Math.pow(f*(t.x-o)-d*(t.y-l),2);return p/Math.pow(c+r,2)+m/Math.pow(h+r,2)<=1.0001}class d0 extends dr{inRange(e,n,r,i){const{x:s,y:o,x2:l,y2:c,width:h}=this.getProps(["x","y","x2","y2","width"],i),u=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?Lue({x:e,y:n},this.getCenterPoint(i),h/2,u):vI(r==="y"?{start:o,end:c,value:n}:{start:s,end:l,value:e},u)}getCenterPoint(e){return eo(this,e)}draw(e){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,bl(e,n);const i=ga(e,n);Hue(e,this,this.centerX,this.centerY),i&&!l0(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=r}resolveElementProperties(e,n){const r=PI(e,n);return r.initProperties=gl(e,r,n),r}}d0.id="pointAnnotation";d0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};d0.defaultRoutes={borderColor:"color",backgroundColor:"color"};class f0 extends dr{inRange(e,n,r,i){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&Hde(this.elements,e,n,i);const s=Zs({x:e,y:n},this.getCenterPoint(i),dn(-this.options.rotation)),o=this.elements.map(h=>r==="y"?h.bY:h.bX),l=Math.min(...o),c=Math.max(...o);return s[r]>=l&&s[r]<=c}getCenterPoint(e){return eo(this,e)}draw(e){const{elements:n,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,bl(e,r);const i=ga(e,r);let s=!0;for(const o of n)s?(e.moveTo(o.x,o.y),s=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),i&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const r=PI(e,n),{sides:i,rotation:s}=n,o=[],l=2*yt/i;let c=s*Gy;for(let h=0;h<i;h++,c+=l){const u=Fde(r,n,c);u.initProperties=gl(e,r,n),o.push(u)}return r.elements=o,r}}f0.id="polygonAnnotation";f0.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};f0.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Fde({centerX:t,centerY:e},{radius:n,borderWidth:r,hitTolerance:i},s){const o=(r+i)/2,l=Math.sin(s),c=Math.cos(s),h={x:t+l*n,y:e-c*n};return{type:"point",optionScope:"point",properties:{x:h.x,y:h.y,centerX:h.x,centerY:h.y,bX:t+l*(n+o),bY:e-c*(n+o)}}}function Hde(t,e,n,r){let i=!1,s=t[t.length-1].getProps(["bX","bY"],r);for(const o of t){const l=o.getProps(["bX","bY"],r);l.bY>n!=s.bY>n&&e<(s.bX-l.bX)*(n-l.bY)/(s.bY-l.bY)+l.bX&&(i=!i),s=l}return i}const Da={box:yl,doughnutLabel:u0,ellipse:Dh,label:Rh,line:Nh,point:d0,polygon:f0};Object.keys(Da).forEach(t=>{Wt.describe(`elements.${Da[t].id}`,{_fallback:"plugins.annotation.common"})});const zde={update:Object.assign},qde=ux.concat(Zd),v5=(t,e)=>st(e)?R1(t,e):t,O1=t=>t==="color"||t==="font";function fx(t="line"){return Da[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Wde(t,e,n,r){const i=Vde(t,n.animations,r),s=e.annotations,o=Xde(e.elements,s);for(let l=0;l<s.length;l++){const c=s[l],h=WI(o,l,c.type),u=c.setContext(Gde(t,h,o,c)),d=h.resolveElementProperties(t,u);d.skip=Ude(d),"elements"in d&&(Yde(h,d.elements,u,i),delete d.elements),Tr(h.x)||Object.assign(h,d),Object.assign(h,d.initProperties),d.options=UI(u),i.update(h,d)}}function Ude(t){return isNaN(t.x)||isNaN(t.y)}function Vde(t,e,n){return n==="reset"||n==="none"||n==="resize"?zde:new ix(t,e)}function Yde(t,e,n,r){const i=t.elements||(t.elements=[]);i.length=e.length;for(let s=0;s<e.length;s++){const o=e[s],l=o.properties,c=WI(i,s,o.type,o.initProperties),h=n[o.optionScope].override(o);l.options=UI(h),r.update(c,l)}}function WI(t,e,n,r){const i=Da[fx(n)];let s=t[e];return(!s||!(s instanceof i))&&(s=t[e]=new i,Object.assign(s,r)),s}function UI(t){const e=Da[fx(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,R1(t,e.defaults),R1(t,e.defaultRoutes));for(const r of qde)n[r]=t[r];return n}function R1(t,e){const n={};for(const r of Object.keys(e)){const i=e[r],s=t[r];O1(r)&&Bt(s)?n[r]=s.map(o=>v5(o,i)):n[r]=v5(s,i)}return n}function Gde(t,e,n,r){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(i=>i&&i.options)},id:r.id,type:"annotation"}))}function Xde(t,e){const n=e.length,r=t.length;if(r<n){const i=n-r;t.splice(r,0,...new Array(i))}else r>n&&t.splice(n,r-n);return t}var Jde="3.1.0";const Ca=new Map,T5=t=>t.type!=="doughnutLabel",Qde=ux.concat(Zd);var Kde={id:"annotation",version:Jde,beforeRegister(){Oue("chart.js","4.0",Cs.version)},afterRegister(){Cs.register(Da)},afterUnregister(){Cs.unregister(Da)},beforeInit(t){Ca.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const r=Ca.get(t),i=r.annotations=[];let s=n.annotations;st(s)?Object.keys(s).forEach(o=>{const l=s[o];st(l)&&(l.id=o,i.push(l))}):Bt(s)&&i.push(...s),pde(i.filter(T5),t.scales)},afterDataLimits(t,e){const n=Ca.get(t);fde(t,e.scale,n.annotations.filter(T5).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(t,e,n){const r=Ca.get(t);lde(t,r,n),Wde(t,r,n,e.mode),r.visibleElements=r.elements.filter(i=>!i.skip&&i.options.display),dde(t,r,n)},beforeDatasetsDraw(t,e,n){nc(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){nc(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){nc(t,e.index,n.clip)},beforeDraw(t,e,n){nc(t,"beforeDraw",n.clip)},afterDraw(t,e,n){nc(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const r=Ca.get(t);cde(r,e.event,n)&&(e.changed=!0)},afterDestroy(t){Ca.delete(t)},getAnnotations(t){const e=Ca.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return ox(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!Qde.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${Da[fx(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:O1,_fallback:!0},_indexable:O1}},additionalOptionScopes:[""]};function nc(t,e,n){const{ctx:r,chartArea:i}=t,s=Ca.get(t);n&&n0(r,i);const o=Zde(s.visibleElements,e).sort((l,c)=>l.element.options.z-c.element.options.z);for(const l of o)efe(r,i,s,l);n&&r0(r)}function Zde(t,e){const n=[];for(const r of t)if(r.options.drawTime===e&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const i of r.elements)i.options.display&&i.options.drawTime===e&&n.push({element:i});return n}function efe(t,e,n,r){const i=r.element;r.main?(c5(n,i,"beforeDraw"),i.draw(t,e),c5(n,i,"afterDraw")):i.draw(t,e)}Cs.register(gue,xue,Jhe,Xhe,iue,due,nue,Kde);const tfe=()=>{const[t,e]=je.useState(.5),n=3,r=0,[i,s]=je.useState(5),[o,l]=je.useState(15),c=n*(1-t)+o*t,h=r*(1-t)+i*t,u=Array.from({length:101},(g,b)=>b/100),d=u.map(g=>n*(1-g)+o*g),f=u.map(g=>r*(1-g)+i*g),p={labels:u.map(g=>(g*100).toFixed(0)+"%"),datasets:[{label:"Cooperate with Jesse",data:d,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1},{label:"Defect against Jesse",data:f,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.1}]},m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12}}},title:{display:!1},annotation:{annotations:{line1:{type:"line",xMin:t*100,xMax:t*100,borderColor:"rgba(0, 0, 0, 0.5)",borderWidth:2,borderDash:[5,5],label:{display:!1}}}}},scales:{x:{title:{display:!0,text:"How likely Jesse is to defect (%)",font:{size:11}},ticks:{maxTicksLimit:6,font:{size:10}}},y:{title:{display:!0,text:"Walter's expected prison sentence (years)",font:{size:11}},ticks:{font:{size:10}}}}};return a.jsxs("div",{className:K({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[a.jsx("h4",{className:K({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"When should Walter cooperate vs. defect against Jesse?"}),a.jsxs("p",{className:K({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"}),children:["We know that if ",a.jsx("strong",{children:"both cooperate, each gets 3 years"}),", and if"," ",a.jsx("strong",{children:"Walter defects while Jesse cooperates, Walter goes free (0 years)"}),". But what about the other scenarios? Adjust the sliders below to see when cooperation becomes Walter’s best choice."]}),a.jsxs("div",{className:K({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.8rem"}),children:[a.jsxs("div",{children:[a.jsxs("label",{children:[a.jsx("strong",{children:"If both defect:"})," ",i," years each"]}),a.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:i,onChange:g=>s(parseFloat(g.target.value)),className:K({width:"100%"})})]}),a.jsxs("div",{children:[a.jsxs("label",{children:[a.jsx("strong",{children:"If Jesse defects against Walter:"})," ",o," years for Walter"]}),a.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:o,onChange:g=>l(parseFloat(g.target.value)),className:K({width:"100%"})})]})]}),a.jsxs("div",{className:K({marginBottom:"1rem"}),children:[a.jsxs("label",{className:K({display:"block",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem",textAlign:"center"}),children:["How likely is Jesse to defect: ",a.jsxs("strong",{children:[(t*100).toFixed(0),"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:t,onChange:g=>e(parseFloat(g.target.value)),className:K({width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",outline:"none",cursor:"pointer"})})]}),a.jsx("div",{className:K({height:"250px",marginBottom:"1rem"}),children:a.jsx(_I,{data:p,options:m})}),a.jsxs("div",{className:K({backgroundColor:h<c?"#fef2f2":"#f0f9ff",border:h<c?"2px solid #dc2626":"2px solid #0066cc",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[a.jsxs("div",{className:K({textAlign:"center",fontSize:"1rem",fontWeight:"bold",color:h<c?"#dc2626":"#0066cc",marginBottom:"0.5rem"}),children:["🎯 Walter's Rational Choice: ",h<c?"Defect":"Cooperate"]}),a.jsxs("div",{className:K({fontSize:"0.85rem",color:"#374151",textAlign:"center"}),children:["Expected outcome: ",a.jsxs("strong",{children:[Math.min(c,h).toFixed(1)," years in prison"]})]})]})]})};function VI(t,e){return t==="C"&&e==="C"?[3,3]:t==="C"&&e==="D"?[15,0]:t==="D"&&e==="C"?[0,15]:[5,5]}function YI(t,e,n){const r=["D","C"],i=[],s=[],o=[],l=[],c=[],h=[];let u=0,d=0;for(let f=0;f<t;f++){let p,m;switch(e){case"random":p=r[Math.floor(Math.random()*2)];break;case"defect":p="D";break;case"cooperate":p="C";break;case"tit-for-tat":p=f===0?"C":s[f-1];break}switch(n){case"random":m=r[Math.floor(Math.random()*2)];break;case"defect":m="D";break;case"cooperate":m="C";break;case"tit-for-tat":m=f===0?"C":i[f-1];break}const[g,b]=VI(p,m);i.push(p),s.push(m),o.push(g),l.push(b),u+=g,d+=b,c.push(u),h.push(d)}return{payoffs1:o,payoffs2:l,totalPayoffs1:c,totalPayoffs2:h}}const nfe=()=>{const[t,e]=je.useState(null),[n,r]=je.useState(null),[i,s]=je.useState(null),o=h=>{e(h);const u=Math.random()<.5?"C":"D";r(u);const[d,f]=VI(h,u);s({walterSentence:d,jesseSentence:f})},l=()=>{e(null),r(null),s(null)},c=(h,u)=>h==="D"&&u==="D"?"We both blame each other - 5 years each!":h==="D"&&u==="C"?"I betray Jesse - I walk free!":h==="C"&&u==="D"?"Jesse betrays me - I get 15 years!":"We both cooperate - 3 years each, best mutual outcome!";return a.jsxs("div",{className:K({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[a.jsx("h4",{className:K({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"Interactive Scenario: What do you do?"}),a.jsx("p",{className:K({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Jesse's decision will be simulated randomly after you choose."}),t?a.jsxs("div",{children:[a.jsxs("div",{className:K({textAlign:"center",marginBottom:"1rem"}),children:[a.jsxs("p",{className:K({fontSize:"0.9rem",color:"#374151",marginBottom:"0.5rem"}),children:[a.jsx("strong",{children:"My choice:"})," ",t==="D"?"Blame Jesse":"Cooperate"]}),a.jsxs("p",{className:K({fontSize:"0.9rem",color:"#6b7280",marginBottom:"0.5rem"}),children:[a.jsx("strong",{children:"Jesse's choice (simulated):"})," ",n==="D"?"Blame me":"Cooperate"]})]}),i&&a.jsxs("div",{className:K({padding:"0.75rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"#f9fafb",marginTop:"1rem"}),children:[a.jsx("p",{className:K({textAlign:"center",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem"}),children:c(t,n)}),a.jsxs("div",{className:K({display:"flex",justifyContent:"center",gap:"2rem",fontSize:"0.8rem",color:"#6b7280"}),children:[a.jsxs("div",{children:[a.jsx("strong",{children:"My sentence:"})," ",i.walterSentence===0?"Free":`${i.walterSentence} years`]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Jesse's sentence:"})," ",i.jesseSentence===0?"Free":`${i.jesseSentence} years`]})]})]}),a.jsx("div",{className:K({textAlign:"center",marginTop:"1rem"}),children:a.jsx("button",{onClick:l,className:K({padding:"0.375rem 0.75rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"0.8rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#e5e7eb"}}),children:"Try again"})})]}):a.jsxs("div",{className:K({display:"flex",justifyContent:"center",gap:"1rem"}),children:[a.jsx("button",{onClick:()=>o("D"),className:K({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#1f2937"}}),children:"Blame Jesse"}),a.jsx("button",{onClick:()=>o("C"),className:K({padding:"0.5rem 1rem",backgroundColor:"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#0052a3"}}),children:"Cooperate"})]}),a.jsx("div",{className:K({marginTop:"1rem",fontSize:"0.7rem",color:"#9ca3af",textAlign:"center"}),children:a.jsx("p",{children:"Sentences: 0 years = immunity • 3 years = mutual cooperation • 5 years = mutual betrayal • 15 years = betrayed while cooperating"})})]})},rfe=()=>{const[t,e]=je.useState("tit-for-tat"),n=50,[r,i]=je.useState(!1),[s,o]=je.useState(null),l={random:"Unpredictable - chaotic storylines with random decisions based on emotions and circumstances",cooperate:"Always Cooperate - stick with your partner no matter what (Season 1 Jesse approach)",defect:"Always selfish - prioritize yourself and betray when convenient (Season 5 Walter approach)","tit-for-tat":"Tit-for-Tat - realistic relationship, start cooperating then match whatever Jesse did last time"},c={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},h=()=>{i(!0);const f=["random","cooperate","defect","tit-for-tat"],p=f[Math.floor(Math.random()*f.length)],m=YI(n,t,p);o({...m,jesseStrategy:p}),i(!1)},d=(()=>{if(!s)return null;const f=s.totalPayoffs1[s.totalPayoffs1.length-1],p=s.totalPayoffs2[s.totalPayoffs2.length-1],m=f/n,g=p/n;let b=!1,y="";const w=m-g,S=w<-3,E=w>3;E?(b=!0,y=`Jesse consistently got better deals while you suffered. Average difference: ${w.toFixed(1)} years worse for you.`):S?(b=!0,y=`You consistently got better deals while Jesse suffered. Average difference: ${Math.abs(w).toFixed(1)} years worse for Jesse.`):t==="cooperate"&&g<4&&m>8&&(b=!0,y="You cooperated but Jesse took advantage of your cooperation repeatedly.");let T="",C="";return S?(T="Exploitative partnership - you're taking advantage of Jesse's cooperation.",C="#dc2626"):E?(T="You're being exploited - Jesse is getting better deals while you suffer.",C="#dc2626"):m<4&&g<4?(T="Excellent partnership! You're both doing well.",C="#10b981"):m<6&&g<6?(T="Decent cooperation with some conflicts.",C="#f59e0b"):m<10?(T="Troubled relationship with frequent betrayals.",C="#f97316"):(T="Toxic partnership - this relationship is falling apart.",C="#ef4444"),{verdict:T,color:C,walterAvg:m,jesseAvg:g,exploited:b,exploitationMessage:y}})();return a.jsxs("div",{className:K({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[a.jsx("h4",{className:K({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:"🎭 Walter's Strategy Simulator: How Will Your Partnership Play Out?"}),a.jsx("p",{className:K({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Choose your approach as Walter. Jesse's strategy will be randomly selected to simulate the uncertainty of working with a partner. Each simulation runs for 50 episodes (two seasons)."}),a.jsx("div",{className:K({marginBottom:"1rem"}),children:a.jsxs("div",{children:[a.jsx("label",{className:K({display:"block",fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.5rem",color:"#374151",textAlign:"center"}),children:"Walter's Strategy (You):"}),a.jsx("div",{className:K({display:"flex",justifyContent:"center"}),children:a.jsxs("select",{value:t,onChange:f=>e(f.target.value),className:K({width:"60%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),children:[a.jsx("option",{value:"tit-for-tat",children:"Tit-for-Tat"}),a.jsx("option",{value:"cooperate",children:"Always Cooperate"}),a.jsx("option",{value:"defect",children:"Always selfish"}),a.jsx("option",{value:"random",children:"Unpredictable"})]})}),a.jsx("p",{className:K({fontSize:"0.75rem",color:"#6b7280",marginTop:"0.5rem",lineHeight:"1.3",textAlign:"center"}),children:l[t]})]})}),a.jsx("div",{className:K({textAlign:"center",marginBottom:"1rem"}),children:a.jsx("button",{onClick:h,disabled:r,className:K({padding:"0.75rem 1.5rem",backgroundColor:r?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:r?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:r?"#9ca3af":"#0052a3"}}),children:r?"🎬 Filming the season...":"🎬 Start the Season"})}),s&&d&&a.jsxs("div",{className:K({marginTop:"1rem"}),children:[a.jsxs("div",{className:K({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}),children:[a.jsxs("div",{className:K({textAlign:"center",marginBottom:"1rem"}),children:[a.jsx("h5",{className:K({fontSize:"1rem",fontWeight:"bold",color:"#374151",marginBottom:"0.5rem"}),children:"🎪 Season Finale: Walter vs Jesse"}),a.jsxs("div",{className:K({display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center",margin:"1rem 0"}),children:[a.jsxs("div",{className:K({textAlign:"center",padding:"0.75rem",backgroundColor:"#dbeafe",borderRadius:"6px"}),children:[a.jsx("div",{className:K({fontSize:"0.85rem",fontWeight:"bold",color:"#1d4ed8"}),children:"Walter (You)"}),a.jsx("div",{className:K({fontSize:"0.75rem",color:"#3730a3",marginTop:"0.25rem"}),children:l[t].split(" - ")[0]})]}),a.jsx("div",{className:K({fontSize:"1.5rem",textAlign:"center"}),children:"⚡"}),a.jsxs("div",{className:K({textAlign:"center",padding:"0.75rem",backgroundColor:"#faf5ff",borderRadius:"6px",border:"2px solid #a855f7"}),children:[a.jsx("div",{className:K({fontSize:"0.85rem",fontWeight:"bold",color:"#7c3aed"}),children:"Jesse"}),a.jsx("div",{className:K({fontSize:"0.75rem",color:"#6b21a8",marginTop:"0.25rem"}),children:c[s.jesseStrategy].split(" - ")[0]})]})]})]}),a.jsxs("div",{className:K({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.85rem"}),children:[a.jsxs("div",{className:K({textAlign:"center"}),children:[a.jsxs("div",{className:K({color:"#2563eb",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.walterAvg.toFixed(1)," years"]}),a.jsx("div",{className:K({color:"#6b7280",fontSize:"0.75rem"}),children:"Walter's Average Sentence"}),a.jsxs("div",{className:K({color:"#2563eb",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",s.totalPayoffs1[s.totalPayoffs1.length-1]," years"]})]}),a.jsxs("div",{className:K({textAlign:"center"}),children:[a.jsxs("div",{className:K({color:"#7c3aed",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.jesseAvg.toFixed(1)," years"]}),a.jsx("div",{className:K({color:"#6b7280",fontSize:"0.75rem"}),children:"Jesse's Average Sentence"}),a.jsxs("div",{className:K({color:"#7c3aed",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",s.totalPayoffs2[s.totalPayoffs2.length-1]," years"]})]})]}),a.jsx("div",{className:K({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${d.color}`,marginBottom:"1rem"}),children:a.jsx("div",{className:K({color:d.color,fontWeight:"bold",fontSize:"0.9rem"}),children:d.verdict})})]}),a.jsxs("div",{className:K({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[a.jsx("h6",{className:K({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:"📈 Cumulative Prison Sentences Over Time"}),a.jsx("div",{style:{position:"relative",height:"200px",width:"100%"},children:a.jsx(_I,{data:{labels:Array.from({length:n},(f,p)=>`Episode ${p+1}`),datasets:[{label:"Walter (You)",data:s.totalPayoffs1,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",borderWidth:2,fill:!1},{label:"Jesse",data:s.totalPayoffs2,borderColor:"#7c3aed",backgroundColor:"rgba(124, 58, 237, 0.1)",borderWidth:2,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,font:{size:11}}}},scales:{x:{display:!1},y:{beginAtZero:!0,title:{display:!0,text:"Total Prison Years",font:{size:10}},ticks:{font:{size:10}}}},elements:{point:{radius:0}}}})}),a.jsx("p",{className:K({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.5rem"}),children:"Lower is better - shows how prison sentences accumulate as the partnership progresses"})]}),a.jsx("div",{className:K({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:"💡 Try different strategies to see how they affect your partnership with Jesse"})]})]})},ife=()=>{const[t,e]=je.useState(null),[n,r]=je.useState(!1),i=["random","cooperate","defect","tit-for-tat"],s={random:"Unpredictable",cooperate:"Always Cooperate",defect:"Always selfish","tit-for-tat":"Tit-for-Tat"},o={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},l=()=>{r(!0),setTimeout(()=>{const d={};i.forEach(f=>{d[f]={},i.forEach(p=>{const m=Array.from({length:50},()=>{const{totalPayoffs1:y,totalPayoffs2:w}=YI(100,f,p);return{score1:y[y.length-1],score2:w[w.length-1]}}),g=m.reduce((y,w)=>y+w.score1,0)/m.length,b=m.reduce((y,w)=>y+w.score2,0)/m.length;d[f][p]={avgScore1:g.toFixed(1),avgScore2:b.toFixed(1)}})}),e(d),r(!1)},2e3)},c=d=>{if(!t)return null;let f="tit-for-tat",p=parseFloat(t["tit-for-tat"][d].avgScore1);return i.forEach(m=>{const g=parseFloat(t[m][d].avgScore1);g<p&&(p=g,f=m)}),{strategy:f,score:p}},h=d=>d<4?"#10b981":d<6?"#f59e0b":d<10?"#f97316":"#ef4444",u=d=>d<4?"Excellent outcome":d<6?"Decent cooperation":d<10?"Troubled relationship":"Toxic partnership";return a.jsxs("div",{className:K({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[a.jsx("h4",{className:K({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:"🧪 Walter's Strategy Guide: How to Handle Different Types of Jesse"}),a.jsx("p",{className:K({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Analyzes how different Walter strategies perform against each type of Jesse over a full season (100 episodes, 50 simulations per matchup). Find the optimal approach for each Jesse personality."}),a.jsx("div",{className:K({textAlign:"center",marginBottom:"1.5rem"}),children:a.jsx("button",{onClick:l,disabled:n,className:K({padding:"0.75rem 1.5rem",backgroundColor:n?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:n?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:n?"#9ca3af":"#0052a3"}}),children:n?"🔬 Analyzing character dynamics...":"🎭 Analyze Breaking Bad Strategies"})}),t&&a.jsxs("div",{children:[a.jsx("div",{className:K({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"}),children:i.map(d=>{const f=c(d),p=f?h(f.score):"#6b7280",m=f?u(f.score):"";return a.jsxs("div",{className:K({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem"}),children:[a.jsxs("div",{className:K({textAlign:"center",marginBottom:"0.75rem"}),children:[a.jsxs("h6",{className:K({fontSize:"0.9rem",fontWeight:"bold",color:"#374151",marginBottom:"0.25rem"}),children:["If Jesse is: ",s[d]]}),a.jsx("p",{className:K({fontSize:"0.7rem",color:"#6b7280",lineHeight:"1.3"}),children:o[d]})]}),f&&a.jsxs("div",{className:K({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${p}`}),children:[a.jsxs("div",{className:K({color:p,fontWeight:"bold",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:["🎯 Walter should be: ",s[f.strategy]]}),a.jsxs("div",{className:K({fontSize:"0.7rem",color:"#6b7280",marginBottom:"0.25rem"}),children:["Average: ",f.score," years prison"]}),a.jsx("div",{className:K({fontSize:"0.7rem",color:p,fontWeight:"medium"}),children:m})]})]},d)})}),a.jsxs("div",{className:K({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[a.jsx("h6",{className:K({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:"📊 Detailed Results: Walter's Average Prison Sentence"}),a.jsx("div",{className:K({overflowX:"auto"}),children:a.jsxs("table",{className:K({width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"}),children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:K({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"left"}),children:"Walter's Strategy ↓ / Jesse's Strategy →"}),i.map(d=>a.jsx("th",{className:K({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"center"}),children:s[d]},d))]})}),a.jsx("tbody",{children:i.map(d=>a.jsxs("tr",{children:[a.jsx("td",{className:K({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",fontWeight:"medium"}),children:s[d]}),i.map(f=>{const p=parseFloat(t[d][f].avgScore1),m=c(f)?.strategy===d;return a.jsxs("td",{className:K({border:"1px solid #d1d5db",padding:"0.5rem",textAlign:"center",backgroundColor:m?"#f0f9ff":"white",fontWeight:m?"bold":"normal",color:m?"#0066cc":"#374151"}),children:[p.toFixed(1)," years",m&&a.jsx("div",{className:K({fontSize:"0.6rem",color:"#0066cc"}),children:"✓ Best"})]},f)})]},d))})]})}),a.jsx("p",{className:K({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.75rem"}),children:"Lower numbers = better outcomes for Walter. Blue cells show the optimal Walter strategy for each Jesse type."})]}),a.jsx("div",{className:K({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:"💡 Understanding your partner's behavior is key to choosing the right strategy in repeated games"})]})]})},afe=()=>a.jsxs("article",{className:"prose prose-lg max-w-none",children:[a.jsx("p",{children:"Why did the 2024 Nobel Prize in Economics go to researchers who study why some countries prosper with strong institutions while others don’t? When I looked into the question, the answer turned out to be connected to a famous social game called the Prisoner’s Dilemma."}),a.jsxs("p",{children:["I had encountered the Prisoner’s Dilemma before as a single-game thought experiment, but the"," ",a.jsx("a",{href:"https://www.nobelprize.org/prizes/economic-sciences/2024/press-release/",children:"Nobel Prize work"}),` focuses on repeated interactions. When the same dilemma plays out over and over, questions like "Why should I pay taxes anyway?" or "Why should my country cut emissions if others won't?" become surprisingly complex strategic problems.`]}),a.jsx("p",{children:"To explore the dilemma, I wanted to work through its basic mechanics using a scenario that makes the challenges clear. This is why I chose to embed the discussion into the context of Breaking Bad, which felt like a perfect example."}),a.jsx("h2",{children:"Setting the scene with Breaking Bad"}),a.jsxs("p",{children:["The characters are: ",a.jsx("strong",{children:"Walter White"})," (high school chemistry teacher turned meth cook),"," ",a.jsx("strong",{children:"Jesse Pinkman"})," (Walter’s former student and business partner), and"," ",a.jsx("strong",{children:"Hank Schrader"})," (DEA agent)."]}),a.jsx("p",{children:"We can now consider these three characters in a standard scenario for prisoners: Walter White and Jesse Pinkman have been arrested by the DEA and are being interrogated separately. Agent Hank Schrader offers each the same deal: testify against your partner to get immunity, or stay silent and face whatever charges can be proven."}),a.jsx("p",{children:"This setup—two people who must choose between cooperation and defection without being able to communicate—provides a clean framework for analyzing why mutually beneficial cooperation often breaks down."}),a.jsx("h3",{children:"The Breaking Bad scenario"}),a.jsxs("p",{children:["This is the ",a.jsx("strong",{children:"perfect"})," Prisoner’s Dilemma scenario. Walter and Jesse each have exactly two choices:"]}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Cooperate (C)"}),': Stay loyal to your partner - "I don’t know this person, we’ve never met."']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Defect (D)"}),': Blame your partner - "He forced me into this, he’s the real criminal."']})]}),a.jsx("p",{children:"The sentences depend on what both choose:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Both cooperate (C, C)"}),": Each gets 3 years. The DEA has some evidence but not enough for major charges without testimony."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"One blames the other (D, C)"}),': The betrayer walks free with immunity, the cooperator gets 15 years for "being the mastermind."']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Both blame each other (D, D)"}),": Each gets 5 years. Their contradictory stories help neither case."]})]}),a.jsx("h3",{children:"The Dilemma Unfolds"}),a.jsx("p",{children:"Now try putting yourself in Walter’s position. You’re sitting across from DEA Agent Hank Schrader, knowing Jesse is in the next room facing the exact same choice. What goes through your mind?"}),a.jsx(nfe,{}),a.jsx("p",{children:'The interactive game above reveals something unsettling: there’s a strong pull toward betrayal. You might find yourself thinking, "If I blame Jesse, I could walk free. What do I owe him anyway?" This gut reaction points to the heart of the dilemma.'}),a.jsx("h3",{children:"Two Ways to Think About It"}),a.jsxs("p",{children:[a.jsx("strong",{children:"The Team Perspective:"}),' If Walter and Jesse could step back and ask "What’s best for us together?", the answer is clear. Both cooperating (3 years each) beats both betraying (5 years each). Total time served: 6 years versus 10 years. They’re partners against the DEA, not enemies.']}),a.jsxs("p",{children:[a.jsx("strong",{children:"The Individual Perspective:"}),' But here’s where Walter’s mind would really go: "What’s best for ',a.jsx("em",{children:"me"}),'?" And that’s where the mathematics becomes crucial—and troubling.']}),a.jsx("h3",{children:"Walter’s Cold Calculation"}),a.jsx("p",{children:'Walter is, at heart, a high school chemistry teacher who thinks systematically. He’d probably work through the logic like this: "Let me figure out what Jesse might do, then decide accordingly."'}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

Suppose Walter estimates there's a probability *p* that Jesse will betray him. That means there's a probability *(1-p)* that Jesse cooperates.

**Walter's expected sentence if he cooperates:**
- If Jesse cooperates (probability 1-p): 3 years
- If Jesse betrays (probability p): 15 years  
- Expected sentence: 3(1-p) + 15p = 3 + 12p years

**Walter's expected sentence if he betrays Jesse:**
- If Jesse cooperates (probability 1-p): 0 years (Walter goes free)
- If Jesse betrays (probability p): 5 years
- Expected sentence: 0(1-p) + 5p = 5p years

For Walter to prefer cooperating, we'd need: 3 + 12p < 5p

Solving this: 3 < 5p - 12p = -7p

This gives us: p < -3/7

Since probabilities can't be negative, this condition is impossible to satisfy. **Walter should always betray Jesse, regardless of what he thinks Jesse will do.**

This is the mathematical heart of the Prisoner's Dilemma: individual rationality leads both players to a worse outcome than cooperation would provide. The outcome where both players 
betray is what game theorists call a ["Nash equilibrium"](https://en.wikipedia.org/wiki/Nash_equilibrium) - a stable situation where neither player can improve their payoff by unilaterally changing their strategy. Even though both would prefer mutual cooperation, neither wants to be the "sucker" who cooperates while the other defects.

### When Cooperation Becomes Rational

Walter's calculation revealed a stark conclusion: betrayal dominates in his specific situation. But this raises a deeper question: are there *any* circumstances where cooperation becomes the rational choice in a prisoner's dilemma?

Let's step back from Walter's specific numbers and examine how this logic applies to any prisoner's dilemma. Game theorists use a standard notation to describe these situations:

- **T** = Temptation payoff (what you get for defecting when your partner cooperates)
- **R** = Reward for mutual cooperation (what both get when both cooperate)  
- **P** = Punishment for mutual defection (what both get when both defect)
- **S** = Sucker's payoff (what you get for cooperating when your partner defects)

In Walter's case: T = 0 years (immunity), R = 3 years, P = 5 years, S = 15 years.

For any situation to be a true prisoner's dilemma, we need T < R < P and S is the worst outcome. Using this general framework, let's rewrite Walter's expected value calculation:

**Expected sentence when cooperating:**

$$E[\\text{Cooperate}] = R(1-p) + Sp = R + (S-R)p$$

**Expected sentence when defecting:**  
$$E[\\text{Defect}] = T(1-p) + Pp = T + (P-T)p$$

For cooperation to be rational, we'd need: 

$$
E[\\text{Cooperate}] < E[\\text{Defect}]
$$

This gives us the condition (where we assume T=0 for simplicity):

$$
\\begin{align*}
R + (S-R)p &< Pp \\\\
R &< (R+P-S)p \\\\
p &> \\frac{R}{R+P-S}
\\end{align*}
$$

We can directly see that this equation only makes sense if S < R+P, as we would be dealing with negative probabilities otherwise. This replicates the situation
we encountered previously and hence confirms our earlier conclusion that Walter should betray Jesse.

But notice what happens if we change the payoffs. We know that $p<1$, which directly implies that cooperation becomes a viable option for $S < P$. The condition above
tells us exactly when cooperation becomes rational, and the interactive plot below lets you explore how different scenarios affect this critical threshold. 
Try adjusting the payoff values to see how they change the probability at which cooperation becomes individually rational.

`}),a.jsx(tfe,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

As you can see from experimenting with the plot, the condition for rational cooperation depends critically on the relationship between the payoffs. When the punishment for mutual defection becomes severe enough relative to being betrayed, cooperation can emerge as the individually rational choice.

**Real-World Applications:**

The mathematical analysis reveals something surprising: Walter should only cooperate if the punishment for mutual defection (P) exceeds the punishment for being betrayed while cooperating (S). In our scenario, mutual defection gives 5 years each, while being the "sucker" gives 15 years—so defection dominates.

But imagine if Walter and Jesse were part of a larger criminal organization. If both betray each other, they don't just get 5 years in prison—they 
also face execution by the organization for breaking the code of silence. Suddenly, mutual defection might carry a sentence equivalent to 20+ years (or death), while being betrayed only gets you the original 15 years.

This explains why organized crime groups, military units, and tight-knit communities develop strong codes of loyalty: they artificially raise the cost of mutual defection to make cooperation individually rational.

### The Single Game Conclusion

In our DEA interrogation room, Walter's rational analysis points to one conclusion: betray Jesse. 
The general mathematical framework confirms this isn't unique to Walter's situation—it's a fundamental feature of prisoner's dilemmas where the sucker's payoff is worse than mutual defection.

But Walter and Jesse don't just interact once—they're partners in a long-running operation. What happens when the same dilemma repeats over multiple "episodes"? This is where the mathematics becomes more hopeful, and where we can explore whether reputation, trust, and reciprocity can overcome the pull of individual rationality.

`}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`
## When Breaking Bad Becomes a Series: Repeated Interactions

Walter's rational analysis came to a depressing conclusion: in a single encounter, defection dominates. But this raises an important question: if everyone follows this logic, how does cooperation ever emerge in the real world?

### The Power of Repetition

The key insight is that repetition fundamentally changes the game. When Walter and Jesse know they'll face similar situations again, each decision carries weight beyond the immediate outcome. Future interactions create new incentives that can make cooperation rational even when it wouldn't be in a single encounter.

Consider Walter's strategic calculus now: "If I betray Jesse today, he'll remember that when we face our next crisis together. But if I stay loyal, maybe he'll reciprocate, and we'll both benefit in the long run." This forward-looking reasoning can make cooperation rational even when defection would be better in isolation.

The mathematical foundation is surprisingly simple: if both players value future payoffs enough (not discounting them too heavily), cooperative strategies can become Nash equilibria in repeated games. The exact threshold depends on the payoffs, but the principle holds broadly.

### Four Strategic Approaches

In repeated prisoner's dilemmas, players typically adopt consistent behavioral rules rather than making isolated decisions. Let's examine four fundamental strategies that capture different approaches to the cooperation-defection dilemma:

**1. Always Cooperate** (Season 1 Jesse approach)
- *Rule*: Stay loyal to your partner regardless of their past behavior
- *Logic*: Trust and loyalty should be unconditional
- *Risk*: Vulnerable to exploitation by defectors

**2. Always Defect** (Season 5 Walter approach)  
- *Rule*: Always prioritize self-interest, minimize your own sentence
- *Logic*: Others can't be trusted, so protect yourself first
- *Advantage*: Cannot be exploited, guarantees reasonable outcomes

**3. Tit-for-Tat** (Reciprocal relationship)
- *Rule*: Start by cooperating, then match whatever your partner did in the previous interaction
- *Logic*: Reward cooperation with cooperation, punish defection with defection
- *Balance*: Enables mutual benefit while deterring exploitation

**4. Random** (Unpredictable behavior)
- *Rule*: Make decisions based on emotions, circumstances, or chance
- *Logic*: Unpredictability might confuse opponents
- *Problem*: Cannot build trust or sustain beneficial patterns

### Interactive Strategy Exploration

These strategies aren't just theoretical—they reflect real behavioral patterns we see in ongoing relationships. Let's explore how they perform when Walter and Jesse face repeated crises:
      `}),a.jsx(rfe,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`


The simulation reveals key insights about repeated interactions:

- **Always cooperating** works well with trustworthy partners but becomes costly against defectors
- **Always defecting** provides security but forecloses opportunities for mutual benefit  
- **Tit-for-tat** balances cooperation and protection: starts nice, retaliates against betrayal, and forgives when partners return to cooperation
- **Random strategies** perform poorly because they can't build the consistent patterns needed for trust

💡 **Key Insight**: There's no universally "best" strategy—success depends on what your opponent does.

### Systematic Strategy Comparison

To move beyond individual simulations, let's examine how these strategies perform when they face each other systematically. This approach mirrors the famous research by political scientist [Robert Axelrod](https://axelrod.readthedocs.io/en/fix-documentation/reference/description.html), who ran computer tournaments in the 1970s to identify the most successful strategies in repeated prisoner's dilemmas.

Axelrod's key finding was that "nice" strategies (those that never defect first) often outperformed "nasty" strategies, but only when the population included enough other cooperative players. The winning strategy in his tournament was tit-for-tat—exactly the reciprocal approach we've been examining.

Let's run our own tournament to see how the Breaking Bad strategies fare against each other:
      `}),a.jsx(ife,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

### Interpreting the Tournament Results

The tournament results reveal a crucial insight about repeated interactions: **the dominance of defection in single games doesn't necessarily carry over to repeated games**. Here's what the data typically shows:

**When Strategies Face Each Other:**
- **Tit-for-Tat vs. Always Cooperate**: Mutual cooperation emerges, both players benefit
- **Always Defect vs. Always Cooperate**: Defection exploits cooperation, creating large payoff differences  
- **Tit-for-Tat vs. Always Defect**: Initial cooperation is punished, leading to mutual defection
- **Random vs. Any Strategy**: Unpredictability prevents stable cooperation patterns

**Key Findings from Game Theory Research:**
1. **Nice strategies** (never defect first) can outperform nasty ones when there are enough cooperative players
2. **Retaliatory strategies** (punish defection) prevent exploitation better than unconditional cooperation
3. **Forgiving strategies** (return to cooperation after punishment) enable recovery from conflicts
4. **Clear strategies** (predictable rules) build trust better than complex or random approaches

This connects directly to Robert Axelrod's famous finding: tit-for-tat succeeded because it was nice, retaliatory, forgiving, and clear. It could cooperate with other cooperative strategies while defending against exploitative ones.

## Conclusion: What Walter and Jesse Taught Us

Walter and Jesse's predicament in that DEA interrogation room captures something profound about human cooperation. In a single interaction, both would be better off if they could trust each other to stay loyal (3 years each vs. 5 years each), yet individual rationality pushes them toward mutual betrayal (5 years each).

But as we've seen, repetition changes everything. When the same players expect to face similar situations again, strategies like tit-for-tat can sustain cooperation by making betrayal costly in the long run. The prospect of future interactions makes present cooperation rational.

However, our analysis also reveals why cooperation remains fragile. Always-defect strategies are surprisingly robust—they can't be exploited, even if they forgo mutual benefits. This explains why selfish behavior persists even in repeated interactions, and why building cooperative institutions requires careful design.

**This Walter-Jesse dynamic isn't unique to criminal partnerships**—similar patterns appear throughout society whenever individual incentives conflict with group welfare:

- **Team Projects**: Each member faces the repeated choice between contributing effort or free-riding on others' work. Successful teams develop tit-for-tat norms: contribute when others do, withdraw effort when others slack.

- **Neighborhood Maintenance**: Each homeowner decides whether to maintain their property, knowing it affects everyone's property values. Communities with strong reciprocal norms (contribute to neighborhood appearance and receive social approval) maintain higher standards.

- **Climate Action**: Nations face repeated decisions about emissions, with each country's choices affecting all others. Successful climate agreements attempt to create tit-for-tat dynamics through monitoring and graduated sanctions.

- **International Trade**: Countries must repeatedly decide whether to honor agreements or pursue short-term advantages. Trade relationships prosper when nations adopt reciprocal strategies—cooperation for cooperation, retaliation for cheating.

The mathematical insight is that **cooperation can emerge from purely self-interested behavior when interactions repeat and players value future outcomes**. We don't need to change human nature—we need to create institutional structures that make cooperation rational for self-interested individuals.

This brings us full circle to the Nobel Prize research that started our exploration. When institutions create repeated-game dynamics with clear rules, predictable enforcement, and expectations of ongoing interaction, even selfish individuals find cooperation profitable. When institutions fail to create these conditions, societies can become trapped in cycles of mistrust and mutual defection—exactly what we see in countries with weak governance and extractive institutions.
      `})]}),sfe={title:"The Prisoner's Dilemma",publishing_date:"2025-06-25",tokenID:30,category:"others",description:"I explore the Prisoner's Dilemma through interactive game theory simulations. Discover strategic decision-making, Nash equilibrium, and how cooperation emerges in competition."},k5=Object.freeze(Object.defineProperty({__proto__:null,default:afe,meta:sfe},Symbol.toStringTag,{value:"Module"})),ofe={publishing_date:"2025-10-02",title:"Can we decentralize access to quantum computing with smart contracts ?",category:"quantum",secondaryCategory:"blockchain",description:"I explore how smart contracts can democratize access to quantum computing resources, enabling privacy-preserving decentralized payments and encrypted NFT results.",tokenID:123};function S5(t){const e={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"In this blog post, I want to dive into some ideas that have been going through my mind for a while now. I kept wondering, if it is possible to democratize access to quantum computing resources with the help of decentralized technologies, i.e. the blockchain. This question actually motivated a substantial amount of my work on the blockchain in the last few months and I will try to lay out my thoughts and learnings here."}),`
`,a.jsx(e.p,{children:"I think that this blog post will be the first one of roughly three posts. In this first one, I will lay out the context and the motivation. In the second one, I will try to connect the ideas to the learning that I have had so far with this website. In the third and last one, I will try to lay out some of the technical details of how the implementation could look like."}),`
`,a.jsx(e.p,{children:"But now let's get started on this topic."}),`
`,a.jsx(e.h2,{children:"The bold vision"}),`
`,a.jsx(e.p,{children:"Quantum computing is an upcoming computing technology with the potential to reshape the software and hardware industry. And due to the complexity of building the machines it is a cloud first technology at this stage. Within this context, it would be great to unlock this power to as many stakeholders as possible with decentralized technologies."}),`
`,a.jsx(e.h2,{children:"The point of this document"}),`
`,a.jsx(e.p,{children:"It is fun to work on tough problems. But it is only really fun once you get to share and think about them together with other collaborators and try to see how to solve it together. So these blog posts aremeant as a first piece that allows everyone that cares to shape some basic concepts and ideas and get this beyond the currently fuzzy ideas (maybe kill it, maybe make it a working reality)."}),`
`,a.jsxs(e.p,{children:["Accidentally ",a.jsx(e.a,{href:"https://www.wearedevelopers.com/magazine/how-to-create-dao-guide",children:"this blog post"})," also recommends to start out with a clear intent document etc before you get into more technical details."]}),`
`,a.jsx(e.h2,{children:"The problem that should be solved"}),`
`,a.jsxs(e.p,{children:["I already described the problem a bit ",a.jsx(e.a,{href:"https://alqor-ug.github.io/sqooler/v0.9/idea_payment/",children:"on this repo"}),", but for the sake of completeness I will try to summarize it again here. If people try to use quantum computers nowadays it goes a bit like this:"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Write some instructions, i.e. some json."}),`
`,a.jsx(e.li,{children:"Send the instructions to some super fancy machine you do not really understand, i.e. a quantum computer."}),`
`,a.jsx(e.li,{children:"Get back the result that you really do not want to share with anyone but that you also do not really understand in a lot of cases."}),`
`]}),`
`,a.jsxs(e.p,{children:["Quite frankly, almost no one cares on which machine the calculations are done. And how you can and should pay for the results is a bit of an open question but for the moment people go through good old web2 approaches like amazon ",a.jsx(e.a,{href:"https://aws.amazon.com/de/braket/",children:"braket"})," etc."]}),`
`,a.jsx(e.p,{children:"Taken together it might not take too much fantasy to think that it could be quite awesome to find a privacy conserving, decentral payment solution to this problem."}),`
`,a.jsx(e.h2,{children:"The fuzzy “smart contracts for quantum computing” idea"}),`
`,a.jsx(e.p,{children:"Beware, the following ideas are based on an embarrassingly poor understanding of blockchain technologies but they are too tempting to not be scribbled down. The main questions that I have been asking myself are:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Wouldn’t it be cool if the payment could be based on smart contracts ?"}),`
`,a.jsx(e.li,{children:"Wouldn’t it be possible to just send the instructions out to some “reliable” node and get back the result ?"}),`
`,a.jsx(e.li,{children:"Could the result be an encrypted NFT or something like that ?"}),`
`]}),`
`,a.jsx(e.p,{children:"Taken together it would seem that smart contracts could provide a really needed technological solution to a problem that is decentral and involves payments. So how to solve it ? I worked through some of the technicalities in a web2 world and did not see any real roadblocks for the moment. However, transitioning towards the block-chain is a very different beast. If you look through the website you will see that a lot of the blockchain + ai work actually implements solutions that are not too far away from this idea. This is what I will talk about in the next blog post."}),`
`,a.jsx(e.p,{children:"If you have experiences, ideas or suggestions, feel free to write down ideas here, exchange and get active. The more people that care are, the more real gets the idea of a functioning smart contract for quantum computing."})]})}function lfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(S5,{...t})}):S5(t)}const $5=Object.freeze(Object.defineProperty({__proto__:null,default:lfe,frontmatter:ofe},Symbol.toStringTag,{value:"Module"})),jn=["Chief Kai","Chief Tala","Chief Sina"],nt={g0:.03,g1:.001,y0:.01,c0:.125,c_islands:[.125,.25,.75,1],s_init:100,nplayers:4},ho={base_quota:.2,efficiency_bonus:.1,cooperation_bonus:.05},px=(t,e)=>Math.pow(nt.y0*t/e,2)/nt.nplayers,Pc=t=>Math.pow(nt.g0/nt.y0*(1-nt.g1*t),2)/nt.nplayers,cfe=()=>{const t=Math.floor(Pc(nt.s_init)),e=Math.floor(px(nt.s_init,nt.c0));return{low_fishing:t,intensive_fishing:e}},qt=cfe(),ef=(t,e)=>nt.y0*t*Math.sqrt(e),mx=t=>nt.g0*(t-nt.g1*t*t),hfe=(t,e,n,r,i)=>{const o={aggressive:2.5,moderate:1,conservative:.4};let l,c=0;i!==void 0&&(c=(n-i)/i),n<.85*r||c<-.08?t===0?l="moderate":l="conservative":n>.98*r&&c>-.02?l="aggressive":l="moderate";const h=o[l];return{adjustedSustainableBoats:e*h,strategy:l,conservationFactor:h}},E5=(t,e,n,r=.1,i=.25)=>{let s;t<=1?s="efficiency":t>=2?s="hybrid":s="equal";const o=[];if(s==="equal")for(let l=0;l<e;l++)o.push(1/e);else if(s==="efficiency"){let l=0;for(let c=0;c<e;c++){const h=e-c-1,u=i+h*r*1.5;o.push(u),l+=u}for(let c=0;c<o.length;c++)o[c]=o[c]/l}else{let l=0;for(let c=0;c<e;c++){const h=e-c-1;let u=i+h*r*.7;c===t&&(u+=n),o.push(u),l+=u}for(let c=0;c<o.length;c++)o[c]=o[c]/l}return{quotaWeights:o,method:s}},j5=t=>{const e={progressive:.2,moderate:.15,conservative:.1};let n;return t>=2?n="progressive":t===0?n="conservative":n="moderate",{redistributionRate:e[n],policy:n}},ufe=({scenario:t,setScenario:e,history:n})=>{const r={random:{name:"🏝️ Mixed Islands",description:`Some chiefs sustainable (~${qt.low_fishing} boats), others competitive (~${qt.intensive_fishing} boats)`},sustainable:{name:"🌊 Harmony Islands",description:`Chiefs here value long-term thinking (~${qt.low_fishing} boats each)`},aggressive:{name:"⚔️ Competition Islands",description:`Every chief fights for maximum catch (~${qt.intensive_fishing} boats each)`}},i=n.some(s=>s.moanaBoats!==null);return a.jsxs("div",{className:K({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[a.jsx("div",{className:K({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🌏 Neighboring Islands Culture"}),a.jsx("div",{className:K({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(r).map(([s,o])=>{const l=t===s,c=i;return a.jsxs("button",{onClick:()=>{c||e(s)},disabled:c,className:K({padding:"12px 16px",border:l?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:c?"#f3f4f6":l?"#eff6ff":"#fff",cursor:c?"not-allowed":"pointer",textAlign:"left",maxWidth:"200px",fontSize:"14px",opacity:c?.6:1,position:"relative"}),title:c?"Scenario locked during active game":"",children:[c&&l&&a.jsx("div",{className:K({position:"absolute",top:"4px",right:"6px",fontSize:"12px",color:"#6b7280"}),children:"🔒"}),a.jsx("div",{className:K({fontWeight:"600",marginBottom:"4px",color:c?"#9ca3af":"#111827"}),children:o.name}),a.jsx("div",{className:K({color:c?"#9ca3af":"#64748b",fontSize:"12px",lineHeight:"1.3"}),children:o.description})]},s)})}),a.jsxs("div",{className:K({marginTop:"16px"}),children:[a.jsxs("div",{className:K({fontSize:"14px",color:"#64748b",marginBottom:"8px",fontWeight:"500"}),children:["Active Scenario: ",r[t].name]}),i?a.jsx("div",{className:K({fontSize:"13px",color:"#9ca3af",fontStyle:"italic"}),children:'Scenario is locked during the game. Use "Play again" to change scenarios.'}):a.jsxs("div",{className:K({fontSize:"14px",color:"#64748b"}),children:["As Moana, you can choose to send ",qt.low_fishing,","," ",Math.floor((qt.low_fishing+qt.intensive_fishing)/2),", or"," ",qt.intensive_fishing," boats. What's your strategy?"]})]})]})},dfe=({round:t,gameOver:e,history:n,onBoatChoice:r})=>{const i=n[t-1],s=i.moanaBoats!==null;return a.jsxs("div",{className:K({display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"16px"}),children:[a.jsx("div",{className:K({display:"flex",gap:"8px",marginBottom:"8px"}),children:[1,2,3].map(o=>a.jsx("div",{className:K({width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",background:o<t?"#10b981":o===t?"#3b82f6":"#e5e7eb",color:o<t||o===t?"#fff":"#9ca3af"}),children:o<t?"✓":o},o))}),a.jsxs("div",{className:K({fontSize:"16px",textAlign:"center",marginBottom:"8px"}),children:[a.jsxs("div",{className:K({fontWeight:"600",marginBottom:"4px"}),children:["Round ",t," of 3 • Fish Stock: ",t===1?nt.s_init:n[t-2].fishAfter," 🐟"]}),a.jsx("div",{className:K({color:"#64748b",fontSize:"14px"}),children:"How many boats should Moana send out today?"})]}),!e&&!s&&a.jsxs("div",{className:K({display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"}),children:[a.jsxs("button",{onClick:()=>r(qt.low_fishing),className:K({padding:"10px 16px",border:"1px solid #10b981",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["🌊 ",qt.low_fishing," Boats (Sustainable)"]}),a.jsxs("button",{onClick:()=>r(Math.floor((qt.low_fishing+qt.intensive_fishing)/2)),className:K({padding:"10px 16px",border:"1px solid #f59e0b",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["⚖️ ",Math.floor((qt.low_fishing+qt.intensive_fishing)/2)," Boats (Moderate)"]}),a.jsxs("button",{onClick:()=>r(qt.intensive_fishing),className:K({padding:"10px 16px",border:"1px solid #ef4444",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["⚡ ",qt.intensive_fishing," Boats (Intensive)"]})]}),!e&&s&&a.jsxs("div",{className:K({fontSize:"14px",color:"#64748b",textAlign:"center",marginTop:"4px"}),children:[a.jsxs("div",{className:K({marginBottom:"4px"}),children:[a.jsx("strong",{children:"Moana:"})," ",i.moanaBoats," boats → ",i.moanaFish," fish"]}),a.jsxs("div",{className:K({marginBottom:"4px"}),children:[a.jsx("strong",{children:"Other Chiefs:"})," ",i.otherBoats?.map((o,l)=>`${jn[l]}: ${o} boats (${i.otherFish?.[l]} fish)`).join(", ")]}),a.jsxs("div",{className:K({marginBottom:"4px"}),children:[a.jsx("strong",{children:"Total:"})," ",i.totalBoats," boats caught ",i.totalCatch," fish"]}),i.regeneration&&i.regeneration>0&&a.jsxs("div",{className:K({color:"#10b981"}),children:["🌱 Ocean regenerated: +",i.regeneration," fish"]})]})]})},ffe=({history:t})=>{const e=t.reduce((i,s)=>i+(s.moanaFish??0),0),n=jn.map((i,s)=>t.reduce((o,l)=>o+(l.otherFish&&l.otherFish[s]!==void 0?l.otherFish[s]:0),0));function r(i,s){if(i===null||s===null)return a.jsx("span",{children:"-"});const o=i<=qt.low_fishing+1,l=i>=qt.intensive_fishing-2;return a.jsxs("span",{style:{background:o?"#d1fae5":l?"#fef2f2":"#fef9c3",color:o?"#047857":l?"#dc2626":"#b45309",borderRadius:4,padding:"2px 6px",fontWeight:500,display:"inline-block",minWidth:40},title:`${i} boats → ${s} fish`,children:[i,"🛥️ → ",s,"🐟"]})}return a.jsx("div",{className:K({margin:"18px 0"}),children:a.jsx("div",{className:K({display:"flex",justifyContent:"center"}),children:a.jsxs("table",{className:K({borderCollapse:"collapse",fontSize:"14px",minWidth:"480px"}),children:[a.jsx("thead",{children:a.jsxs("tr",{className:K({background:"#bae6fd"}),children:[a.jsx("th",{className:K({padding:"6px 8px"}),children:"Round"}),a.jsx("th",{className:K({padding:"6px 8px"}),children:"Moana"}),jn.map(i=>a.jsx("th",{className:K({padding:"6px 8px",fontSize:"12px"}),children:i.replace("Chief ","")},i)),a.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),a.jsxs("tbody",{children:[t.map((i,s)=>a.jsxs("tr",{style:{background:s%2===0?"#f8fafc":"#fff"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:i.round}),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:r(i.moanaBoats,i.moanaFish)}),jn.map((o,l)=>a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:i.otherBoats&&i.otherFish&&i.otherBoats[l]!==void 0&&i.otherFish[l]!==void 0?r(i.otherBoats[l],i.otherFish[l]):"-"},l)),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:i.fishAfter!==null?`${i.fishAfter}🐟`:"-"})]},s)),a.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:"Total"}),a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[e,"🐟"]}),n.map((i,s)=>a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[i,"🐟"]},s)),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",color:"#64748b"},children:"–"})]})]})]})})})},pfe=({scenario:t,fishStock:e,moanaTotal:n,onReset:r})=>{const i={random:{name:"🏝️ Mixed Islands",color:"#f59e0b"},sustainable:{name:"🌊 Harmony Islands",color:"#10b981"},aggressive:{name:"⚔️ Competition Islands",color:"#ef4444"}},o=e>=80?{text:"Excellent! The ocean thrives.",color:"#10b981"}:e>=60?{text:"Good sustainability achieved.",color:"#f59e0b"}:e>=40?{text:"The ocean is stressed but surviving.",color:"#f59e0b"}:{text:"Critical! The ocean ecosystem is collapsing.",color:"#ef4444"};return a.jsxs("div",{style:{textAlign:"center",margin:"18px 0"},children:[a.jsx("div",{style:{fontSize:17,fontWeight:600,marginBottom:12},children:"Game Complete!"}),a.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[a.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[a.jsx("strong",{children:"Scenario:"})," ",a.jsx("span",{style:{color:i[t].color},children:i[t].name})]}),a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🐟 ",a.jsx("strong",{children:e})," fish remaining in the ocean"]}),a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🌺 ",a.jsx("strong",{children:n})," fish caught by Moana"]}),a.jsx("div",{style:{fontSize:14,color:o.color,fontWeight:500,marginTop:8},children:o.text})]}),a.jsx("button",{onClick:r,style:{padding:"12px 24px",border:"none",borderRadius:8,background:"#0891b2",color:"#fff",fontWeight:600,fontSize:15,cursor:"pointer"},children:"🔄 Try Different Scenario"})]})},mfe=({scenario:t,setScenario:e})=>{const n={democratic:{name:"🤝 Democratic Fishing Council",description:"Rotating leadership, graduated quotas, wealth redistribution based on Ostrom's principles"},hierarchical:{name:"👑 Moana-Led Governance",description:"Fixed leadership by Moana, efficiency focus, minimal redistribution"}};return a.jsxs("div",{className:K({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[a.jsx("div",{className:K({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🏛️ Community Governance System"}),a.jsx("div",{className:K({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(n).map(([r,i])=>{const s=t===r;return a.jsxs("button",{onClick:()=>{e(r)},style:{padding:"12px 16px",border:s?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:8,background:s?"#eff6ff":"#fff",cursor:"pointer",textAlign:"left",maxWidth:220,fontSize:14,position:"relative"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:4,color:"#111827"},children:i.name}),a.jsx("div",{style:{color:"#64748b",fontSize:12,lineHeight:"1.3"},children:i.description})]},r)})})]})},gfe=({scenario:t,setScenario:e})=>{const n={sustainable:{name:"🌍 Equal Responsibility Policy",description:"All islands fish at the same sustainable level regardless of their individual costs"},aggressive:{name:"💰 Market-Driven Approach",description:"Each island fishes at their cost-optimal level (islands with lower costs fish more)"}};return a.jsxs("div",{className:K({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[a.jsx("div",{className:K({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🌏 Fishing Management System"}),a.jsx("div",{className:K({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(n).map(([r,i])=>{const s=t===r;return a.jsxs("button",{onClick:()=>{e(r)},style:{padding:"12px 16px",border:s?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:8,background:s?"#eff6ff":"#fff",cursor:"pointer",textAlign:"left",maxWidth:200,fontSize:14,position:"relative"},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:4,color:"#111827"},children:i.name}),a.jsx("div",{style:{color:"#64748b",fontSize:12,lineHeight:"1.3"},children:i.description})]},r)})})]})},bfe=({history:t})=>{const e=t.reduce((o,l)=>o+(l.moanaFish??0),0),n=jn.map((o,l)=>t.reduce((c,h)=>c+(h.otherFish&&h.otherFish[l]!==void 0?h.otherFish[l]:0),0)),r=t.reduce((o,l)=>o+(l.moanaCost??0),0),i=jn.map((o,l)=>t.reduce((c,h)=>c+(h.otherCosts&&h.otherCosts[l]!==void 0?h.otherCosts[l]:0),0));function s(o,l,c,h){return o===null||l===null||c===null||h===null?a.jsx("span",{children:"-"}):a.jsxs("span",{title:`${Math.round(o)} fish • $${l.toFixed(2)} total cost • $${c.toFixed(2)} per fish`,children:[Math.round(o),"🐟",a.jsx("br",{}),"$",l.toFixed(2)]})}return a.jsx("div",{style:{margin:"18px 0"},children:a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsxs("table",{style:{borderCollapse:"collapse",fontSize:14,minWidth:480},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#bae6fd"},children:[a.jsx("th",{style:{padding:"6px 8px"},children:"Round"}),a.jsxs("th",{style:{padding:"6px 8px"},children:["Moana",a.jsx("br",{}),"($",nt.c_islands[0],"/boat)"]}),jn.map((o,l)=>a.jsxs("th",{style:{padding:"6px 8px",fontSize:12},children:[o.replace("Chief ",""),a.jsx("br",{}),"($",nt.c_islands[l+1],"/boat)"]},o)),a.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),a.jsxs("tbody",{children:[t.map((o,l)=>a.jsxs("tr",{style:{background:l%2===0?"#f8fafc":"#fff"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:o.round}),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:s(o.moanaFish,o.moanaCost,o.moanaCostPerFish,o.avgCostPerFish)}),jn.map((c,h)=>a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:o.otherFish&&o.otherCosts&&o.otherCostPerFish&&o.otherFish[h]!==void 0&&o.otherCosts[h]!==void 0?s(o.otherFish[h],o.otherCosts[h],o.otherCostPerFish[h],o.avgCostPerFish):"-"},h)),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:o.fishAfter!==null?`${Math.round(o.fishAfter)}🐟`:"-"})]},l)),a.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:"Total"}),a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(e),"🐟",a.jsx("br",{}),"$",r.toFixed(2)]}),n.map((o,l)=>a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(o),"🐟",a.jsx("br",{}),"$",i[l].toFixed(2)]},l)),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",color:"#64748b"},children:"–"})]})]})]})})})},yfe=({history:t})=>{const e=t.reduce((c,h)=>c+(h.moanaFish??0),0),n=jn.map((c,h)=>t.reduce((u,d)=>u+(d.otherFish&&d.otherFish[h]!==void 0?d.otherFish[h]:0),0)),r=t.reduce((c,h)=>c+h.redistributionAmount,0),i=t.reduce((c,h)=>c+(h.moanaCost??0),0),s=jn.map((c,h)=>t.reduce((u,d)=>u+(d.otherCosts&&d.otherCosts[h]!==void 0?d.otherCosts[h]:0),0));function o(c,h,u,d){return c===null||h===null||u===null||d===null?a.jsx("span",{children:"-"}):a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("div",{style:{fontSize:12},children:[c.toFixed(1),"🐟 → ",h.toFixed(1),"🐟"]}),a.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:["$",d.toFixed(2)]})]})}function l(c,h,u,d){const f=["Moana","Kai","Tala","Sina"],p={conservative:"🛡️",moderate:"⚖️",aggressive:"⚔️"},m={equal:"🟰",hybrid:"🔄",efficiency:"📈"},g={conservative:"🔐",moderate:"🔄",progressive:"🔓"};return a.jsxs("div",{style:{textAlign:"center"},children:[a.jsx("div",{style:{fontWeight:600,fontSize:12,marginBottom:"2px"},children:f[c]}),a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2px",fontSize:"10px",marginBottom:"2px"},children:[a.jsx("span",{title:`Conservation Strategy: ${h}`,children:p[h]||"❓"}),a.jsx("span",{title:`Distribution Method: ${u||"unknown"}`,children:u&&m[u]||"❓"}),a.jsx("span",{title:`Redistribution Policy: ${d||"unknown"}`,children:d&&g[d]||"❓"})]})]})}return a.jsxs("div",{style:{margin:"18px 0"},children:[a.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"12px",border:"1px solid #e2e8f0"},children:[a.jsx("div",{style:{fontWeight:"600",marginBottom:"6px"},children:"Leadership Decision Icons Guide:"}),a.jsxs("div",{style:{marginBottom:"4px"},children:[a.jsx("strong",{children:"Conservation Strategy:"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🛡️ conservative (protect stocks)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"⚖️ moderate (balanced approach)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"⚔️ aggressive (maximize current catch)"})]}),a.jsxs("div",{style:{marginBottom:"4px"},children:[a.jsx("strong",{children:"Distribution Method:"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🟰 equal (same quotas for all)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🔄 hybrid (balanced allocation)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"📈 efficiency (quota based on capability)"})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Redistribution Policy:"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🔐 conservative (minimal sharing)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🔄 moderate (balanced redistribution)"}),a.jsx("span",{style:{marginLeft:"8px"},children:"🔓 progressive (significant wealth sharing)"})]})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsxs("table",{style:{borderCollapse:"collapse",fontSize:14,minWidth:600},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{background:"#bae6fd"},children:[a.jsx("th",{style:{padding:"6px 8px"},children:"Round"}),a.jsx("th",{style:{padding:"6px 8px"},children:"Leader"}),a.jsxs("th",{style:{padding:"6px 8px"},children:["Moana",a.jsx("br",{}),"Original → Final • Cost"]}),jn.map(c=>a.jsxs("th",{style:{padding:"6px 8px",fontSize:12},children:[c.replace("Chief ",""),a.jsx("br",{}),"Original → Final • Cost"]},c)),a.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),a.jsxs("tbody",{children:[t.map((c,h)=>a.jsxs("tr",{style:{background:h%2===0?"#f8fafc":"#fff"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:c.round}),a.jsx("td",{style:{padding:"4px 8px"},children:l(c.leader,c.leaderStrategy,c.leaderDistributionMethod,c.leaderRedistributionPolicy)}),a.jsx("td",{style:{padding:"4px 8px"},children:o(c.moanaOriginalCatch,c.moanaFish,c.moanaNetTransfer,c.moanaCost)}),jn.map((u,d)=>a.jsx("td",{style:{padding:"4px 8px"},children:c.otherFish&&c.otherOriginalCatch&&c.otherFish[d]!==void 0&&c.otherCosts?o(c.otherOriginalCatch[d],c.otherFish[d],c.otherFish[d]-c.otherOriginalCatch[d],c.otherCosts[d]):"-"},d)),a.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:c.fishAfter!==null?`${Math.round(c.fishAfter)}🐟`:"-"})]},h)),a.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[a.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},colSpan:2,children:"Total"}),a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(e),"🐟",a.jsx("br",{}),a.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["$",i.toFixed(2)]})]}),n.map((c,h)=>a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(c),"🐟",a.jsx("br",{}),a.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["$",s[h].toFixed(2)]})]},h)),a.jsxs("td",{style:{padding:"4px 8px",textAlign:"center",fontSize:11},children:["Redistributed: ",r.toFixed(1),"🐟"]})]})]})]})})]})},xfe=({scenario:t,fishStock:e,history:n})=>{const r=n.reduce((u,d)=>u+d.redistributionAmount,0),i=[...new Set(n.flatMap(u=>u.activeOstromPrinciples))],s=n.reduce((u,d)=>u+(d.totalCatch??0),0),o=n.reduce((u,d)=>u+(d.moanaCost??0),0),l=jn.map((u,d)=>n.reduce((f,p)=>f+(p.otherCosts&&p.otherCosts[d]!==void 0?p.otherCosts[d]:0),0)),c=o+l.reduce((u,d)=>u+d,0),h=s>0?c/s:0;return a.jsxs("div",{style:{textAlign:"center",margin:"18px 0"},children:[a.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🏛️ ",a.jsx("strong",{children:t==="democratic"?"Democratic Council":"Moana-Led Governance"})," Results"]}),a.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["🐟 ",a.jsx("strong",{children:Math.round(s)})," fish caught ","·"," 💰"," ",a.jsxs("strong",{children:["$",h.toFixed(2)]})," average cost per fish"]}),t==="democratic"&&a.jsx("div",{style:{fontSize:12,marginBottom:8,color:"#10b981",fontStyle:"italic"},children:"✨ Community Benefit: Lower costs through coordinated fishing"}),a.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["↔️ Fish Redistributed: ",a.jsxs("strong",{children:[r.toFixed(1),"🐟"]})]}),a.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["🌊 ",a.jsx("strong",{children:Math.round(e)})," fish remaining in ocean"]})]}),a.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:12,marginBottom:16,fontSize:13},children:[a.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"🎯 Active Ostrom Principles:"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"},children:i.map((u,d)=>a.jsx("span",{style:{background:"#dcfce7",color:"#166534",padding:"2px 8px",borderRadius:12,fontSize:11},children:u},d))})]})]})},wfe=({fishStock:t,history:e})=>{const n=e.reduce((s,o)=>s+(o.totalCatch??0),0),r=e.reduce((s,o)=>s+(o.totalCost??0),0),i=n>0?r/n:0;return a.jsx("div",{style:{textAlign:"center",margin:"18px 0"},children:a.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🐟 ",a.jsx("strong",{children:Math.round(n)})," fish caught • 💰 ",a.jsxs("strong",{children:["$",r.toFixed(2)]})," ","total cost"]}),a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["📊 Average cost: ",a.jsxs("strong",{children:["$",i.toFixed(2)]})," per fish"]}),a.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🌊 ",a.jsx("strong",{children:Math.round(t)})," fish remaining in the ocean"]})]})})},_fe=()=>{const[t,e]=je.useState(1),[n,r]=je.useState(nt.s_init),[i,s]=je.useState(0),[o,l]=je.useState("random"),[c,h]=je.useState([{round:1,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:2,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:3,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null}]),[u,d]=je.useState(!1);function f(m){if(u||c[t-1].moanaBoats!==null)return;let g;switch(o){case"sustainable":g=jn.map(()=>Math.floor(Math.random()*2)+Math.max(1,qt.low_fishing-1));break;case"aggressive":g=jn.map(()=>Math.floor(Math.random()*4)+Math.max(8,qt.intensive_fishing-2));break;case"random":default:g=jn.map(()=>Math.random()<.5?Math.max(1,qt.low_fishing+Math.floor(Math.random()*3)):Math.max(8,qt.intensive_fishing-Math.floor(Math.random()*4)));break}const b=m+g.reduce((R,D)=>R+D,0),y=t===1?nt.s_init:c[t-2].fishAfter??nt.s_init,w=mx(y),S=ef(y,b),E=Math.round(m/b*S),T=g.map(R=>Math.round(R/b*S)),C=y-S+w,M=c.map((R,D)=>D===t-1?{round:t,moanaBoats:m,moanaFish:E,otherBoats:g,otherFish:T,totalBoats:b,totalCatch:Math.round(S),fishAfter:Math.round(C),regeneration:Math.round(w)}:R);h(M),s(i+E),r(Math.round(C)),t===3?d(!0):e(t+1)}function p(){e(1),r(nt.s_init),s(0),h([{round:1,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:2,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:3,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null}]),d(!1),l("random")}return a.jsxs("div",{className:K({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[a.jsx(ufe,{scenario:o,setScenario:l,history:c}),a.jsx(dfe,{round:t,gameOver:u,history:c,onBoatChoice:f}),a.jsx(ffe,{history:c}),u&&a.jsx(pfe,{scenario:o,fishStock:n,moanaTotal:i,onReset:p})]})},vfe=()=>{const[t,e]=je.useState("sustainable"),[n,r]=je.useState([]),[i,s]=je.useState(nt.s_init);return je.useEffect(()=>{let l=nt.s_init;const c=[];for(let h=1;h<=3;h++){let u;switch(t){case"sustainable":u=[0,1,2,3].map(()=>Pc(l));break;case"aggressive":default:u=[0,1,2,3].map(q=>px(l,nt.c_islands[q]));break}const d=u[0],f=u.slice(1),p=u.reduce((q,P)=>q+P,0),m=mx(l),g=ef(l,p),b=u.map(q=>q/p*g),y=b[0],w=b.slice(1),S=u.map((q,P)=>q*nt.c_islands[P]),E=S[0],T=S.slice(1),C=S.map((q,P)=>b[P]>0?q/b[P]:0),M=C[0],R=C.slice(1),D=S.reduce((q,P)=>q+P,0),$=g>0?D/g:0,L=l-g+m;c.push({round:h,moanaBoats:d,moanaFish:y,moanaCost:E,moanaCostPerFish:M,otherBoats:f,otherFish:w,otherCosts:T,otherCostPerFish:R,totalBoats:p,totalCatch:g,totalCost:D,avgCostPerFish:$,fishAfter:L,regeneration:m}),l=Math.max(0,L)}setTimeout(()=>{r(c),s(l)},0)},[t]),a.jsxs("div",{className:K({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[a.jsx(gfe,{scenario:t,setScenario:e}),a.jsx(bfe,{history:n}),a.jsx(wfe,{fishStock:i,history:n})]})},Tfe=()=>{const[t,e]=je.useState("democratic"),[n,r]=je.useState([]),[i,s]=je.useState(nt.s_init),o=(l,c)=>{const h=[];return c==="democratic"?(h.push("1. Clearly defined boundaries"),h.push("2. Collective choice arrangements"),h.push("3. Community monitoring"),h.push("4. Graduated sanctions"),h.push("5. Conflict resolution mechanisms"),h.push("7. Nested enterprises"),l!==0&&h.push("6. Recognition of rights to organize")):(h.push("1. Clearly defined boundaries"),h.push("8. Congruence with local conditions"),l===0&&h.push("3. Monitoring by authorities")),h};return je.useEffect(()=>{const l=(f,p,m)=>{const b=j5(p).redistributionRate,y=ef(m,Pc(m))/nt.nplayers,w=new Array(nt.nplayers).fill(0),S=new Array(nt.nplayers).fill(0),E=[...f];for(let R=0;R<nt.nplayers;R++)if(f[R]>y){const D=f[R]-y;w[R]=D*b,E[R]-=w[R]}else w[R]=0;for(let R=0;R<nt.nplayers;R++)E[R]<y?S[R]=y-E[R]:S[R]=0;const T=w.reduce((R,D)=>R+D,0),C=S.reduce((R,D)=>R+D,0),M=new Array(nt.nplayers).fill(0);if(C>0){for(let R=0;R<nt.nplayers;R++)if(S[R]>0){const D=S[R]/C,$=T*D;E[R]+=$,M[R]=$}}return{finalCatches:E,redistributionAmount:T,netTransfers:M.map((R,D)=>R-w[D])}};let h=nt.s_init;const u=[];let d;for(let f=1;f<=5;f++){const p=t==="democratic"?(f-1)%nt.nplayers:0,m=Pc(h)*nt.nplayers,g=hfe(p,m,h,nt.s_init,d),b=g.adjustedSustainableBoats,y=g.strategy;let w;t==="hierarchical"?w=[0,1,2,3].map(()=>Pc(h)):w=E5(p,nt.nplayers,ho.cooperation_bonus,ho.efficiency_bonus,ho.base_quota).quotaWeights.map((N,U)=>{const J=px(h,nt.c_islands[U]);return J>b*N?b*N:J});const S=w[0],E=w.slice(1),T=w.reduce((te,N)=>te+N,0),C=mx(h),M=ef(h,T),R=w.map(te=>te/T*M),D=R[0],$=R.slice(1);let L,q,P,A,O="equal",F="conservative";if(t==="democratic"){O=E5(p,nt.nplayers,ho.cooperation_bonus,ho.efficiency_bonus,ho.base_quota).method;const N=l(R,p,h);F=j5(p).policy,L=N.finalCatches[0],q=N.finalCatches.slice(1),P=N.netTransfers[0],A=N.redistributionAmount}else L=D,q=$,P=0,A=0;const Y=o(p,t),Q=w.map((te,N)=>te*nt.c_islands[N]),z=Q[0],j=Q.slice(1),Z=h-M+C;u.push({round:f,moanaBoats:S,moanaFish:L,otherBoats:E,otherFish:q,totalBoats:T,totalCatch:M,fishAfter:Z,regeneration:C,leader:p,leaderStrategy:y,leaderDistributionMethod:O,leaderRedistributionPolicy:F,redistributionAmount:A,moanaNetTransfer:P,activeOstromPrinciples:Y,moanaOriginalCatch:D,otherOriginalCatch:$,moanaCost:z,otherCosts:j}),h=Math.max(0,Z),d=h}setTimeout(()=>{r(u),s(h)},0)},[t]),a.jsxs("div",{className:K({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[a.jsx(mfe,{scenario:t,setScenario:e}),a.jsx(yfe,{history:n}),a.jsx(xfe,{scenario:t,fishStock:i,history:n})]})},kfe=()=>a.jsxs("article",{children:[a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

Every day, we make seemingly rational decisions that, collectively, destroy the very resources we depend on. From not buying electric cars because they might be inconvenient to depleting groundwater aquifers, we face a paradox that has puzzled scientists for a long time.

This raises a fundamental question: **How should we govern common pool resources?**

In unrestrained scenarios, these resources deplete and collapse. This led to the widespread belief that only the state or the market can effectively govern common resources. However, Elinor Ostrom demonstrated that communities can self-organize to govern common resources successfully. This earned her the economics [Nobel Prize in 2009](https://www.nobelprize.org/prizes/economic-sciences/2009/ostrom/facts/) as the first woman to receive the award in that category. She explored this through carefully designed social experiments and real-world case studies, which I will examine here through interactive simulations.

Throughout the blog post, we look into the topic through the lens of Moana's journey. we'll explore three approaches to solving this dilemma:

💰 **The Market Solution:** Tradeable fishing quotas that reward efficiency - but what about equity?

🏛️ **The State Solution:** An Island Fishing Authority with centralized control - effective but costly?

🤝 **The Community Solution:** The chiefs create their own rules together - can self-governance work?

## From Theory to Reality: A Chief's Dilemma

But how do these abstract governance theories play out in practice? To understand this, let's step into the sandals of someone facing exactly these choices every single day.

Meet Moana - no longer the adventurous teenager from Disney's story, but now a seasoned chief responsible for her island's survival. Each morning, she faces a decision that will determine whether her people can eat well or go hungry: how many fishing boats should she send out to the shared waters that sustain 
not just her community, but three neighboring islands as well?

The neighboring islands' chiefs have called a meeting. The fish that have sustained these communities for generations are becoming scarcer. 
The great tuna schools that once appeared predictably now show up only occasionally. A decision must be made about how to manage their shared waters.

This isn't just a thought experiment. Fishing provides the perfect lens to examine common pool resource governance because it's visual, well-documented in research, 
and demonstrates the key tensions between individual incentives and collective welfare. This scenario captures the essential elements of any common pool resource dilemma - whether it's fisheries, groundwater, grazing lands, or even digital commons like open-source software.

### The fundamental dynamics of common pool resources

The situation Moana faces demonstrates the core elements present in all common pool resource scenarios:
            
- Multiple decision-makers (Moana and the three other chiefs) choose resource extraction levels
- Individual decisions aggregate to affect the shared resource (fish stock)
- Each participant's catch depends on both their effort and the total pressure on the resource
- Resource regeneration occurs, but extraction can exceed sustainable levels


To understand how these dynamics play out, let&rsquo;s experience Moana&rsquo;s dilemma firsthand. As she sits 
with the other three chiefs overlooking the shared fishing grounds, each faces identical incentives, but their
collective choices will determine everyone&rsquo;s fate:
            `}),a.jsx(_fe,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`
How did the simulation go? Most likely, you found it challenging to maintain fish stock stability.
It's difficult to resist the temptation to fish intensively, especially when other chiefs do the same.

The dilemma Moana faces illustrates the classic **Tragedy of the Commons**. This concept, popularized by [Garrett Hardin in 1968](https://math.uchicago.edu/~shmuel/Modeling/Hardin,%20Tragedy%20of%20the%20Commons.pdf), describes how rational individual choices can lead to irrational collective outcomes - depleting shared resources that everyone depends on.

But this raises the central question: **If individual rationality leads to collective irrationality, what governance mechanisms can solve this dilemma?**

## State solutions: The centralized authority approach

Back on her island, Moana stares at the empty nets from yesterday&rsquo;s failed cooperation. The other chiefs are equally frustrated. &ldquo;This can&rsquo;t continue,&rdquo; Chief Kai declares. &ldquo;We need rules - someone above all of us who sets limits and enforces them fairly.&rdquo;

Within days, they contact the Regional Maritime Authority. The solution feels natural: surrender their fishing decisions to an Island Fishing Authority with centralized control. For Moana, this means no more daily choices about boat deployments - that responsibility now belongs to others.

**The centralized approach:** An Island Council sets fishing limits, monitors compliance, and enforces penalties. However, the Authority quickly discovers that equal treatment isn't necessarily fair treatment - the islands have vastly different fishing costs:

- **Moana's Island**: $0.125 per boat (modern harbor, efficient boats)
- **Kai's Island**: $0.25 per boat (decent infrastructure)  
- **Tala's Island**: $0.75 per boat (remote location, older equipment)
- **Sina's Island**: $1.00 per boat (very remote, harsh conditions)

This creates the central policy dilemma: equal quotas or economic efficiency? Try both approaches below:

      `}),a.jsx(vfe,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

**What the Results Show:**

The cost differences create significant fairness challenges. In the "🌍 Equal Responsibility Policy", everyone fishes sustainably at the same level - but Sina's island pays 8 times more per fish than Moana's island! In the "💰 Market-Driven Approach", each island fishes at their economically optimal level - but this means efficient islands like Moana's catch much more fish.

Neither approach is perfect: equal fishing quotas seem fair in principle but create economic hardship for less efficient islands. Market-driven approaches seem economically efficient but can lead to inequality in outcomes. This is why real-world commons governance often needs more sophisticated solutions that balance both equity and efficiency concerns.


As you can see from the simulation, centralized regulation successfully prevents the tragedy of the commons. The fish stocks remain stable, and systematic management replaces chaotic individual decisions.

After months under this system, Moana observes both the benefits and costs: *"No more sleepless nights wondering about boat deployments - the Authority decides everything. The fish are recovering, but the bureaucracy is expensive and my crews have lost their drive to innovate when quotas are fixed."*

The simulation reveals the core tension: equal access ensures fairness but sacrifices efficiency, while efficiency-based allocation maximizes output but creates inequality.

### A market refinement: Individual Transferable Quotas (ITQs)

Recognizing the efficiency problems, the Authority proposes a refinement: **Individual Transferable Quotas (ITQs)**. The government still sets total sustainable fishing limits, but now chiefs can buy and sell their fishing rights to each other. 

This allows efficient fishers like Moana to expand while maintaining overall sustainability. However, as quota prices rise, wealthy chiefs can monopolize access, excluding traditional fishing families. As Moana reflects: *"This system rewards skill and saves fish, but I&rsquo;ve watched smaller islands get priced out entirely."*

This sets the stage for Ostrom's breakthrough insight: communities can govern themselves.

## Ostrom's Community Solution: Learning from Failure

After months of failed cooperation and bureaucratic frustration, Moana realizes something crucial: **"We keep trying solutions that worked elsewhere, but we never asked what makes solutions work at all."**

**The Missing Piece:** Elinor Ostrom asked the same question. Her research revealed that successful community resource management isn't about finding the "right" rules—it's about building the right **institutions** for making and adapting rules.

**From Tragedy to Success:** What transforms a failing commons into a thriving one? Through studying [thousands of cases worldwide](https://www.actu-environnement.com/media/pdf/ostrom_1990.pdf) Ostrom identified eight institutional design principles that separate successful commons from failures:

**Ostrom's Eight Design Principles:**

1. **Clearly defined boundaries** - Everyone knows who belongs to the fishing community and what waters they govern
2. **Collective choice arrangements** - The chiefs affected by fishing rules participate in making and changing them  
3. **Monitoring** - Community members keep watch over each other's compliance, not outside enforcers
4. **Graduated sanctions** - Violations start with warnings, escalate fairly—building trust, not resentment
5. **Conflict resolution mechanisms** - Chiefs have ways to resolve disputes locally and quickly
6. **Recognition of rights to organize** - External authorities (like the Regional Maritime Authority) respect their self-governance
7. **Nested enterprises** - Rules work at multiple levels—daily fishing decisions, seasonal planning, long-term stock management
8. **Congruence with local conditions** - Rules match the unique conditions of their specific waters and communities

**Moana's Leadership Challenge:** Real community leadership isn't about making one perfect decision—it's about balancing multiple competing concerns simultaneously. Watch how each rotating leader faces three interconnected choices that affect different aspects of community welfare:

1. **Resource Conservation Strategy**: How aggressive should we be in protecting fish stocks for future generations?
2. **Fair Distribution Method**: Should fishing quotas be allocated equally, based on efficiency, or through a balanced approach?
3. **Community Redistribution Policy**: How much should successful fishers share with struggling islands to maintain social cohesion?

Each decision activates different Ostrom principles and creates different community outcomes. Experience how these institutional elements play out in practice:

            `}),a.jsx(Tfe,{}),a.jsx(_i,{remarkPlugins:[vi],rehypePlugins:[Ti],children:`

**Understanding Multi-Dimensional Leadership:** The simulation demonstrates that effective community governance requires leaders to simultaneously balance:

- **Sustainability vs. Immediate Needs**: Conservation strategies determine long-term resource health
- **Equality vs. Efficiency**: Distribution methods affect fairness and economic optimization  
- **Individual Success vs. Community Cohesion**: Redistribution policies maintain social stability

**The Deeper Lesson:** Notice how the *process* of governance—who decides, how monitoring works, how conflicts are resolved—matters more than the specific fishing quotas chosen. Democratic rotation implements 6-7 of Ostrom's principles simultaneously, while hierarchical governance implements only 2-3.

**What makes community solutions different?** Unlike markets that rely on prices or states that impose rules, communities create governance systems where the people affected by decisions are the ones making them. Moana's council demonstrates this: the chiefs who depend on the fish are the same people setting fishing limits and monitoring compliance.

## Personal Reflections: Why This Matters

This exploration through Moana's world has been more revealing than I expected. It's forced me to recognize that a lot of meaningful work happens not in markets or under government regulation, but in community spaces - research collaborations, open-source projects, innovation networks where informal governance determines whether we succeed or fail.

The tragedy of the commons isn't just an abstract economic concept. It's the daily reality of every shared Slack channel that becomes chaotic, every open-source project that fragments, every research community that loses focus. But Ostrom's work suggests these failures aren't inevitable.

**It makes you wonder how to apply commons governance to knowledge work:**
- **Clearly defined boundaries:** Who belongs to this research community? What counts as contribution?
- **Collective choice:** Do the people doing the work have a voice in setting priorities?  
- **Monitoring:** How do we track contributions without destroying intrinsic motivation?
- **Graduated sanctions:** How do we handle free-riders without creating surveillance culture?

Writing this has convinced me that there is a lot to learn in the context of innovation management. It depends less on perfecting market mechanisms and more on learning to govern knowledge commons well. TBC.
            `})]}),Sfe={title:"Tale of Four Islands: Solutions to the Tragedy of the Commons",publishing_date:"2025-07-21",tokenID:35,category:"others",description:"I explore solutions to the Tragedy of the Commons through interactive island simulations. See how governance models affect resource sustainability and community outcomes."},C5=Object.freeze(Object.defineProperty({__proto__:null,default:kfe,meta:Sfe},Symbol.toStringTag,{value:"Module"})),$fe={publishing_date:"2025-05-14",title:"My short lived contact with the world of VCs in Germany",category:"others",secondaryCategory:"quantum",description:"I explore the challenges of transitioning from quantum research to startup entrepreneurship. Valuable lessons about VC funding, deep tech development, and German startup realities."};function A5(t){const e={a:"a",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["For a number of years, I worked in academia on the topic of quantum hardware. You can find the traces of these activities sprinkled over this blog. But over time it became increasingly clear to me that I would like to venture outside of this well-trodden path. As this was the time when names like ",a.jsx(e.a,{href:"https://ionq.com/",children:"IonQ"}),", ",a.jsx(e.a,{href:"https://quantum.ibm.com/",children:"IBM"})," or ",a.jsx(e.a,{href:"https://www.pasqal.com/",children:"Pasqal"})," really were exciting developments, I obviously also investigated the possibility of a startup. If these (senior) peers could do it, why not me ?"]}),`
`,a.jsx(e.h2,{children:"The motivation"}),`
`,a.jsx(e.p,{children:"My research experience focused on hardware development, so it felt natural to look into this direction and I left the topic of software on the side. However, this comes with enormous drawbacks:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["Quantum hardware is ",a.jsx(e.em,{children:"notoriously"})," slow to develop. It takes you years to get something close to a working industrial prototype."]}),`
`,a.jsx(e.li,{children:"Quantum hardware is notoriously expensive, which means that you are very quickly forced to raise substantial amounts of capital for deep tech. 1M is basically the very minimum to even start thinking about something super basic."}),`
`,a.jsx(e.li,{children:"Without working prototypes, we couldn't make a convincing business case."}),`
`]}),`
`,a.jsx(e.p,{children:"Taken together these three conditions meant that the very first steps of the company would need 1 to 2M€ of funding in the seed / preseed phase. To get this amount of money we basically had two options:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Option A - Get public funding"}),": This comes attached with A LOT of strings, A LOT of administration and it is quite slow. It is nice to slowly expend out of your lab, but is not really adapted to get a startup of the ground."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Option B - Go to the VCs and pitch your case"}),": Sounds fast, business oriented and with a clear growth path."]}),`
`]}),`
`,a.jsx(e.p,{children:"So we had a deeper look into option B with the VCs."}),`
`,a.jsx(e.h2,{children:"The VCs"}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"A new culture:"})," As we started, we needed a team of at least three people to start our fundraising campaign. Talking to VCs, we quickly realized that that they really do not care about the tech but only about the business case. But how do you explain the business case without a working prototype ? You basically have to make up the business case based on your current knowledge. And once you dream up those business cases, you have to show that they are scalable. FAST. So we had no working prototype for industrial standards, therefore no possibility to benchmark the business cases on sound numbers. Yet, we still had to present enormously ambitious business plans to the VCs."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"A world of (unfounded?) assumptions:"})," This world was completely different from the academic environment that I was used to. This made the beginning of the whole adventure super exciting. People are fast and responsive. They have a different perspective to your well known technical approach. They force you to think about the project in business ways that you never thought about before. On the other hand, this world is also based on enormous amounts of assumptions. hese assumptions were often impossible to verify for years. And these assumptions got stretched increasingly to make the ambitions of the VCs work. Further, these assumptions have substantial consequences. This was in deep contrast to the academic world, where failure does not threaten your job. When your academic experiments fail, you do another one and move on. If your business assumptions fail you have burned massive amounts of money and everyone lost their job."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Diverging expections:"})," Given these consequences, I personally would have liked to go the cautious route. Yet, within the process our predictions got increasingly detached from reality. At some point we had discussions with technical experts that told us that our time lines are at least by a factor of two (rather four) to optimistic. On the other hand, we had discussions with VCs that told us that our timelines were at least a factor of two (rather four) to slow to make the fundraising cycle work. Personally, this was hard to digest and eventually one of the reasons why I had to get out of this business quite quickly."]}),`
`,a.jsx(e.h2,{children:"Some realities on returns"}),`
`,a.jsx(e.p,{children:"You might think it's still worth it for the freedom and potential wealth, right ? Well, not so fast."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"VCs in Germany typically asked for at least 20-30% of the company to invest 1-2M €."}),`
`,a.jsx(e.li,{children:"They also expect you to keep the equity within the company."}),`
`,a.jsx(e.li,{children:"You have leaver clauses which bind you for years to the company."}),`
`,a.jsx(e.li,{children:"With each round the shares of the owners get quite substantially diluted."}),`
`]}),`
`,a.jsx(e.p,{children:"Then you can go through the different scenarios"}),`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Scenario A: You go bust."})," This is what happens in something like 80% of the time. Over the years, you got your salary. It was sub industry and with enormous amounts of stress. To make the numbers simple let's say that you can assume that this scenario lost you roughly 100k (give or take) compared to your standard industry job."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Scenario B: You muddle through."})," This will happen approximately 15% of the time. In this scenario you do better than in scenario A and you do not go bust. You have a product. It works, but it is not quite as profiable as you would like. This is after you raised Seed (VC took 30%), Series A (VC took 30%) and now it becomes clear that a Series B will not fly. So you have to find some buyer that takes the IP of the company for 5M and move on. So in this scenario, you basically end with a 500k payday as one of the founders."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Scenario C: Payout by the big industrial player."})," This will happen between 1 and 5 % of the time. This is the dream scenario where everythings works out for you. You perform, you have raised Seed (VC took 30%), Series A (VC took 30%) and Series B (VC took 30%) and now you have pay day with a buyout of 50M. So in this scenario, you basically end with a 5M payday personally."]}),`
`,a.jsx(e.p,{children:"What is the expected value of the whole enterprise ? Taking the numbers above, we get to:"}),`
`,a.jsx(e.p,{children:"(80% × -100.000€) + (15% × 500.000€) + (5% × 5M€) = ~250.000€"}),`
`,a.jsx(e.p,{children:"So I end up with a rough expected return of 250k give or take. So it is certainly not a loss. But is this worth the stress and the uncertainty ? This is most likely the key question that everyone has to decide."}),`
`,a.jsx(e.h2,{children:"And the freedom in all of this ?"}),`
`,a.jsx(e.p,{children:"With the startup does not just come the premise of money, but also the freedom to do what you want. The little I saw, I have strong doubts about this. The VCs bring the money and this means that they also set the tone. Your business plan becomes focused on securing the next funding round, not what you think is best. And I would be slightly surprised if there was a relaxed approach to monitoring progress. Remember that they gave you 1M for an idea ? Now you better deliver. If you want to leave, remember those leaver clauses which bind you to the company for a number of years. So you are basically stuck in a company that you do not like anymore. Taken together I rarely had the feeling of freedom in this setup as the VCs are the ones that set the tone. Not the clients. Not the employees. Not the founders. The VCs. But I genuinely hope that I had simply had a bad impression on this part."}),`
`,a.jsx(e.h2,{children:"The end of the story"}),`
`,a.jsx(e.p,{children:"I felt a huge amount of releave when I left this scene. I was never able to shake the imposter syndrome and could not enjoy the ride. I felt the excitement but the negative feeling were substantially stronger. Nowadays, I evolved on towards a completely different career path, which I am grateful about."}),`
`,a.jsx(e.p,{children:"What saddens me most is how difficult it is to launch a deep tech startup in Germany. I still feel that the step from academic research and deep tech startups in Germany is so much bigger than it could be and a number of things could improve the situation quite drastically:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Better incubators connected to Universities. Many universities have little incentive to develop strong incubator programs. Hence they are rarely up the potential. This would lighten the knowledge gap of researchers as they have to discuss the wonderful world of business. I would be interested to hear about successful examples."}),`
`,a.jsx(e.li,{children:"Simplify the public funding process. It was really a nightmare to go through the public funding process. It genuinely felt like a bureaucracy that was only made to up to let some people feel important. Please, make it easier."}),`
`,a.jsx(e.li,{children:"Get us all VCs with deeper knowledge. I think that this speaks to itself."}),`
`]}),`
`,a.jsx(e.p,{children:"I hope that you enjoyed the post. If you have any comments or suggestions, please leave them in the comments below. I would be happy to hear from you. And as usual, do not forget to push the like button."})]})}function Efe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(A5,{...t})}):A5(t)}const I5=Object.freeze(Object.defineProperty({__proto__:null,default:Efe,frontmatter:$fe},Symbol.toStringTag,{value:"Module"})),jfe={author:["Fred Jendrzejewski","Selim Jochim"],order:1,title:"Lecture 1 - Some cooking recipes for Quantum Mechanics"};function M5(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this first lecture we will review the foundations of quantum
mechanics at the level of a cooking recipe. This will enable us to use
them later for the discussion of the atomic structure and interaction
between atoms and light.`}),`
`,a.jsx(e.p,{children:`This is the first lecture of the Advanced Atomic Physics course at
Heidelberg University, as tought in the wintersemester 2019/2020. It is
intended for master students, which have a basic understanding of
quantum mechanics and electromagnetism. In total, we will study multiple
topics of modern atomic, molecular and optical physics over a total of
24 lectures, where each lectures is approximately 90 minutes.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"We will start the series with some basics on quantum mechanics."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Then work our way into the harmonic oscillator and the hydrogen
atom.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We will then leave the path of increasingly complex atoms for a
moment to have some fun with light-propagation, lasers and
discussion of the Bell inequalities.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`A discussion of more complex atoms gives us the acutual tools at
hand that are in the lab.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`This sets up a discussion of di-atomic molecules, which ends the
old-school AMO.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We move on to quantized atom-light interaction, the Jaynes Cummings
model and strong-field lasers.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We will finally finish with modern ways to implement quantum
simulators and quantum computers.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The topics of the lectures will be discussed in more details in the
associated tutorials.`}),`
`,a.jsx(e.h1,{children:"Introduction"}),`
`,a.jsx(e.p,{children:`In AMO physics we will encounter the consequences of quantum mechanics
all the time. So we will start out with a review of the basic
ingredients to facilitate the later discussion of the experiments.`}),`
`,a.jsxs(e.p,{children:[`Some good introductions on the traditional approach can be found in
`,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2002",id:"user-content-fnref-2002","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),", ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-ct1",id:"user-content-fnref-ct1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),", ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-ct2",id:"user-content-fnref-ct2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"4"})}),`. Previously, we mostly followed the discussion
of Ref. `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),". Nowadays, I also recommend the works by Scott Aaronson in ",a.jsx(e.a,{href:"https://scottaaronson.com/democritus/lec9.html",children:"this"})," and ",a.jsx(e.a,{href:"https://www.scottaaronson.com/barbados-2016.pdf",children:"this lecture"}),". There is also a good ",a.jsx(e.a,{href:"https://www.quantamagazine.org/quantum-theory-rebuilt-from-simple-physical-principles-20170830/#",children:`article by
Quanta-Magazine`}),`
on the whole effort to derive quantum mechanics from some simple
principles. This effort started with `,a.jsx(e.a,{href:"https://arxiv.org/abs/quant-ph/0101012v4",children:"this paper"}),`, which actually
makes for a nice read.`]}),`
`,a.jsx(e.p,{children:`Before we start with the detailled cooking recipe let us give you some
examples of quantum systems, which are of major importance throughout
the lecture:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Orbit in an atom, molecule etc"}),`. Most of you might have studied
this during the introduction into quantum mechanics.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Occupation number of a photon mode"}),`. Any person working on quantum
optics has to understand the quantum properties of photons.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.em,{children:"Position of an atom"}),` is of great importance for double slit
experiments, the quantum simulation of condensed matter systems with
atoms, or matterwave experiments.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"spin degree of freedom"}),` of an atom like in the historical
Stern-Gerlach experiment.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The classical coin-toss or bit, which connects us nicely to simple
classical probability theory or computing`}),`
`]}),`
`]}),`
`,a.jsx(e.h1,{children:"The possible outcomes (the Hilbert Space) for the Problem in Question"}),`
`,a.jsxs(e.p,{children:[`The first step is to identify the right Hilbert space for your problem.
For a classical problem, we would simply list all the different possible
outcomes in a list $$(p_1, \\cdots, p_N)$$ of `,a.jsx(e.em,{children:"real"}),` numbers. As one of the
outcomes has to happen, we obtain the normalization condition:`]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-math",children:` \\sum_i p_i = 1
`})}),`
`,a.jsx(e.p,{children:`In quantum mechanics, we follow a similar approach of first identifying
the possible outcomes. But instead of describing the outcomes with real
numbers, we now associate a complex number $$\\alpha_i$$ to each outcome
$$(\\alpha_1, \\cdots, \\alpha_N)$$, with $$\\alpha_i \\in \\mathbb{C}$$. Given
that they should also describe some probability they have to be
normalized to one, but now we have the condition:`}),`
`,a.jsx(e.p,{children:`$$
\\sum_i |\\alpha_i|^2 = 1
$$`}),`
`,a.jsx(e.p,{children:`Aaronson claims that this is just measuring probabilities in in $L_2$
norm. I would highly recommend his discussions on his blog for a more
instructive derivation[@quantum]. Next we will not use the traditional
lists, but the bra-ket notation, by writing:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\sum_i \\alpha_i \\left|i\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`And given that these are complex vectors, we will measure their overlap
through a Hermitian scalar product`}),`
`,a.jsx(e.p,{children:`$$
\\langle\\psi_1 \\psi_2\\rangle=(\\langle{\\psi_2}| \\psi_1\\rangle)^*.
$$`}),`
`,a.jsx(e.h2,{children:"The coin toss"}),`
`,a.jsx(e.p,{children:`The situation becomes particularly nice to follow for the two level
system or the coin toss. In classical systems, we will get heads up
$\\uparrow$ with a certain probability p. So the inverse $\\downarrow$
arrives with likelyhood $1-p$. We would then classical list the
probabilities with $(p,1-p)$. In the quantum world we achieve such a
coin for example in spin 1/2 systems or qubits in general. We will then
describe the system through the state:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\alpha_\\uparrow \\left|\\uparrow\\right\\rangle + \\alpha_\\downarrow \\left|\\downarrow\\right\\rangle  \\qquad \\text{with} ; \\langle\\psi | \\psi\\rangle = 1.
$$`}),`
`,a.jsx(e.p,{children:`The next problem is how to act on the system in the classical world or
in the quantum world.`}),`
`,a.jsx(e.h2,{children:"Quantum rules"}),`
`,a.jsxs(e.p,{children:[`Having set up the space on which we want to act we have to follow the
rules of quantum mechanics. The informal way of describing is actually
nicely described by Chris Monroe `,a.jsx(e.a,{href:"https://youtu.be/CC7nlBM2cSM",children:`in this
video`}),`. We might summarize them as
follows:`]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Quantum objects can be in several states at the same time."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Rule number one only works when you are not looking."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The more methematical fashion is two say that there two ways of
manipulating quantum states:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Unitary transformations $\\hat{U}$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Measurements."}),`
`]}),`
`]}),`
`,a.jsx(e.h1,{children:"Unitary transformations"}),`
`,a.jsx(e.p,{children:`As states change and evolve, we know that the total probability should
be conserved. So we transform the state by some operator $\\hat{U}$,
which just maps the state
$\\left|\\psi\\right\\rangle\\xrightarrow[]{U}\\left|\\psi'\\right\\rangle$.
This should not change the norm, and we obtain the condition:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\psi\\right|\\hat{U}^\\dag\\hat{U} \\left|\\psi\\right\\rangle = 1\\
\\hat{U}^\\dag\\hat{U}  = \\mathbb{1}
$$`}),`
`,a.jsx(e.p,{children:`That's the very definition of unitary operators and
unitary matrices. Going back to the case of a coin toss, we see that we
can then transform our qubit through the unitary operator:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{U}=\\frac{1}{\\sqrt{2}}\\left(\\begin{array}{cc}
1 & -1\\
1 & 1
\\end{array}\\right)
$$`}),`
`,a.jsx(e.p,{children:`Applying it on the previously defined states $\\uparrow$
and $\\downarrow$, we get the superposition state:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{U}\\left|\\uparrow\\right\\rangle = \\frac{\\left|\\uparrow\\right\\rangle-\\left|\\downarrow\\right\\rangle}{\\sqrt{2}}\\
\\hat{U}\\left|\\downarrow\\right\\rangle = \\frac{\\left|\\uparrow\\right\\rangle+\\left|\\downarrow\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:`As we use the unitary matrices we also see why we might
one to use complex numbers. Imagine that we would like to do something
that is roughly the square root of the unitary, which often just means
that the system should evolve for half the time as we will see later. If
we then have negative nummbers, they will immediately become imaginary.`}),`
`,a.jsx(e.p,{children:`Such superposition would not be possible in the classical case, as
non-negative values are forbidden there. Actually, operations on
classical propability distributions are only possible if every entry of
the matrix is non-negative (probabilities are never negative right ?)
and each column adds up to one (we cannot loose something in a
transformation). Such matrices are called .`}),`
`,a.jsx(e.h1,{children:"Observables and Measurements"}),`
`,a.jsx(e.p,{children:`As much fun as it might be to manipulate a quantum state, we also have
to measure it and how it connects to the properties of the system at
hand. Any given physical quantity $A$ is associated with a Hermitian
operator $\\hat{A} = \\hat{A}^\\dag$ acting in the Hilbert space of the
system, which we defined previously. Please, be utterly aware that those
Hermitian operators have absolutely no need to be unitary. However, any
unitary operator might be written as $\\hat{U}= e^{i\\hat{A}}$.`}),`
`,a.jsxs(e.p,{children:["In a ",a.jsx(e.em,{children:"measurement"}),` , the possible outcomes are then the eigenvalues
$a_\\alpha$ of the operator $\\hat{A}$:`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{A}\\left|\\alpha\\right\\rangle=a_{\\alpha}\\left|\\alpha\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`The system will collapse to the corresponding
eigenvector and the probability of finding the system in state
$\\left|\\alpha\\right\\rangle$ is`}),`
`,a.jsxs(e.p,{children:[`$$
P(\\left|\\alpha\\right\\rangle)=||\\hat{P}`,a.jsx(e.em,{children:"{\\left|\\alpha\\right\\rangle} \\left|\\psi\\right\\rangle||^2 = \\left\\langle\\psi\\right| \\hat{P}^{\\dag}"}),`{\\left|\\alpha\\right\\rangle} \\hat{P}_{\\left|\\alpha\\right\\rangle} \\left|\\psi\\right\\rangle,
$$`]}),`
`,a.jsx(e.p,{children:`where
$\\hat{P}_{\\left|\\alpha\\right\\rangle}= \\left|\\alpha\\right\\rangle \\left\\langle\\alpha\\right|$.`}),`
`,a.jsx(e.p,{children:`As for our previous examples, how would you measure them typically, i.e.
what would be the operator ?`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`In atoms the operators will be angular moment, radius, vibrations
etc.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For the occupation number we have nowadays number counting
photodectors.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The position of an atom might be detected through high-resolution
CCD cameras.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["For the ",a.jsx(e.em,{children:"measurement of the spin"}),`, we typically correlate the
internal degree of freedom to the spatial degree of freedom. This is
done by applying a magnetic field gradient acting on the magnetic
moment $\\hat{\\vec{\\mu}}$ , which in turn is associated with the spin
via $\\hat{\\vec{\\mu}} = g \\mu_B \\hat{\\vec{s}}/\\hbar$, where $g$ is
the Landé $g$-factor and $\\mu_B$ is the Bohr magneton . The energy
of the system is $\\hat{H} = -\\hat{\\vec{\\mu}} \\cdot \\vec{B}$.`]}),`
`]}),`
`]}),`
`,a.jsx(e.h1,{children:"Time Evolution"}),`
`,a.jsxs(e.p,{children:[`Being able to access the operator values and intialize the wavefunction
in some way, we also want to have a prediction on its time-evolution.
For most cases of this lecture we can simply describe the system by the
non-relativistic `,a.jsx(e.strong,{children:"Schrödinger Equation."})," It reads"]}),`
`,a.jsx(e.p,{children:`$$
i\\hbar\\partial_t\\left|\\psi(t)\\right\\rangle=\\hat{H}(t)\\left|\\psi(t)\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`In general, the Hamilton operator $\\hat{H}$ is
time-dependent. For a time-independent Hamilton operator $\\hat{H}$, we
can find eigenstates $\\left|\\phi_n\\right\\rangle$ with
corresponding eigenenergies $E_n$ :`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}\\left|\\phi_n\\right\\rangle=E_n\\left|\\phi_n\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`The eigenstates $\\left|\\phi_n\\right\\rangle$
in turn have a simple time evolution:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\phi_n(t)\\right\\rangle=\\left|\\phi_n(0)\\right\\rangle\\cdot \\exp{-i E_nt/\\hbar}.
$$`}),`
`,a.jsx(e.p,{children:"If we know the initial state of a system"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(0)\\right\\rangle=\\sum_n \\alpha_n\\left|\\phi_n\\right\\rangle,
$$`}),`
`,a.jsx(e.p,{children:`where $\\alpha_n=\\langle\\phi_n | \\psi(0)\\rangle$, we will
know the full dimension time evolution`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t)\\right\\rangle=\\sum_n\\alpha_n\\left|\\phi_n\\right\\rangle\\exp{-i E_n t/\\hbar}. ;, \\text{(Schrödinger picture)}
$$`}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."}),` Sometimes it is beneficial to work in the
Heisenberg picture, which works with static ket vectors
$\\left|\\psi\\right\\rangle^{(H)}$ and incorporates the time
evolution in the operators. `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"5"})}),` In certain cases one would have to have
access to relativistic dynamics, which are then described by the `,a.jsx(e.strong,{children:`Dirac
equation`}),`. However, we will only touch on this topic very briefly, as
it directly leads us into the intruiging problems of `,a.jsx(e.strong,{children:`quantum
electrodynamics`}),"."]}),`
`,a.jsx(e.h2,{children:"The Heisenberg picture"}),`
`,a.jsx(e.p,{children:`As mentionned in the first lecture it can benefitial to work in the
Heisenberg picture instead of the Schrödinger picture. This approach is
widely used in the field of many-body physics, as it underlies the
formalism of the second quantization. To make the connection with the
Schrödinger picture we should remember that we have the formal solution
of`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t)\\right\\rangle = \\mathrm{e}^{-i\\hat{H}t}\\left|\\psi(0)\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`So, if we would like to look into the expectation value
of some operator, we have:`}),`
`,a.jsx(e.p,{children:`$$
\\langle\\hat{A}(t)\\rangle = \\left\\langle\\psi(0)\\right|\\mathrm{e}^{i\\hat{H}t}\\hat{A}_S\\mathrm{e}^{-i\\hat{H}t}\\left|\\psi(0)\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`This motivates the following definition of the operator
in the Heisenberg picture:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{A}_H=\\mathrm{e}^{i{\\hat{H} t}/{\\hbar}} \\hat{A}_S \\mathrm{e}^{-i{\\hat{H} t}/{\\hbar}}
$$`}),`
`,a.jsx(e.p,{children:`where $\\exp{-i{\\hat{H} t}/{\\hbar}}$ is a time evolution
operator (N.B.: $\\hat{H}_S = \\hat{H}_H$). The time evolution of
$\\hat{A}_H$ is:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{d}{dt} \\hat{A}_H = \\frac{i}{\\hbar}\\hat{H}\\mathrm{e}^{i{\\hat{H}t}/{\\hbar}}\\hat{A}_S \\mathrm{e}^{-i{\\hat{H} t}/{\\hbar}}\\
-\\frac{i}{\\hbar} \\mathrm{e}^{i{\\hat{H} t}/{\\hbar}}\\hat{A}_S \\mathrm{e}^{-i{\\hat{H}t}/{\\hbar}}\\hat{H}+\\partial_t \\hat{A}_H\\
= \\frac{i}{\\hbar}\\left[\\hat{H},\\hat{A}_H\\right] + \\mathrm{e}^{i{\\hat{H}t}/{\\hbar}}\\partial_t\\hat{A}_S\\mathrm{e}^{-i{\\hat{H}t}/{\\hbar}}
$$`}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."}),` In the Heisenberg picture the state vectors
are time-independent:`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle_H \\equiv \\left|\\psi(t=0)\\right\\rangle=\\exp{i{\\hat{H}}t/{\\hbar}} \\left|\\psi(t)\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`Therefore, the results of measurements are the same in
both pictures:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\psi(t)\\right|\\hat{A}\\left|\\psi(t)\\right\\rangle = \\left\\langle\\psi\\right|_H \\hat{A}_H \\left|\\psi\\right\\rangle_H.
$$`}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-2002",children:[`
`,a.jsxs(e.p,{children:["Dalibard Basdevant. Quantum Mechanics. Springer-Verlag, 2002 ",a.jsx(e.a,{href:"#user-content-fnref-2002","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-2006",children:[`
`,a.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. The Quantum Mechanics Solver. Springer-Verlag, 2006. ",a.jsx(e.a,{href:"#user-content-fnref-2006","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})," ",a.jsxs(e.a,{href:"#user-content-fnref-2006-2","data-footnote-backref":"","aria-label":"Back to reference 2-2",className:"data-footnote-backref",children:["↩",a.jsx(e.sup,{children:"2"})]})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-ct1",children:[`
`,a.jsxs(e.p,{children:["Quantum Mechanics, Volume 1. ",a.jsx(e.a,{href:"#user-content-fnref-ct1","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-ct2",children:[`
`,a.jsxs(e.p,{children:["Quantum Mechanics, Volume 2. ",a.jsx(e.a,{href:"#user-content-fnref-ct2","data-footnote-backref":"","aria-label":"Back to reference 4",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`We will follow this route in the discussion of the two-level
system and the Bloch sphere. `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 5",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Cfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(M5,{...t})}):M5(t)}const L5=Object.freeze(Object.defineProperty({__proto__:null,default:Cfe,frontmatter:jfe},Symbol.toStringTag,{value:"Module"})),Afe={author:["Fred Jendrzejewski"],order:10,title:"Lecture 10 - Propagation of light in dielectric media"};function O5(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will study the propagation of light through a
dielectric medium like atomic gases. We will see that it is
characterized by the susceptibility and discuss the case of two-level
atoms. This sets the stage for the laser.`}),`
`,a.jsx(e.p,{children:`Until now we focused on the properties of atoms and how can control them
through external fields. In this lecture, we will focus much more on the
properties of the light passing through a medium.`}),`
`,a.jsx(e.h2,{children:"Introduction"}),`
`,a.jsxs(e.p,{children:[`We would like to study the propagation of a electric field through an
ensemble of atoms as visualized in Fig.
`,a.jsx(e.a,{href:"#fig-dielectric",children:"1"}),`. We assume a
mono-chromatic plane wave to come in, such that we can write down the
electric field as:`]}),`
`,a.jsx(e.p,{children:`$$
\\vec{E}_{in}= E_0 \\vec{\\epsilon}e^{i kz -i\\omega_L t}
$$`}),`
`,a.jsx(e.p,{children:"This incoming field will polarize the gas of dipoles."}),`
`,`
`,a.jsx(e.p,{children:"For the propagation we will do the following assumptions:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The atoms are independent."}),`
`,a.jsx(e.li,{children:"We can describe them as small dipoles."}),`
`,a.jsx(e.li,{children:"We can describe the light in the semi-classical approximation."}),`
`]}),`
`,a.jsx(e.p,{children:`We have already employed this picture in in the slightly abstract
formulation in Lecture 4, where we studied the evolution of the atoms in
electric fields and in Lecture 6
concerning the transition rules in hydrogen. This allows us to calculate
the expectation value of the dipole operator through:`}),`
`,a.jsx(e.p,{children:`$$
\\langle \\vec{D}\\rangle = \\left\\langle\\psi\\right|\\vec{D}\\left|\\psi\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"As already discussed in Lecture 6 we can then write it down as:"}),`
`,a.jsx(e.p,{children:`$$
\\langle \\vec{D}\\rangle = E_0 \\vec{\\alpha}
$$`}),`
`,a.jsxs(e.p,{children:["We call $\\alpha$ the ",a.jsx(e.strong,{children:"polarizability"}),`. For a large gas
with a constant density of dipoles $n$, we obtain a macroscopic
polarization of:`]}),`
`,a.jsx(e.p,{children:`$$
\\vec{P} = n \\langle \\vec{D}\\rangle\\
= n \\vec{\\alpha} E_0
$$`}),`
`,a.jsx(e.p,{children:`This leads us then to identify the susceptibility of the
dielectric medium:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\vec{P} = \\epsilon_0 \\chi \\vec{E}\\
\\chi = \\frac{n \\alpha}{\\epsilon_0}
$$`}),`
`,a.jsx(e.p,{children:"To notes to this relation:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:`The linear relationship between polarization and electric field is
only valid for weak electric fields. For stronger fields, higher
order terms become important. They are the fundamental ingredient of
non-linear optics. In general, we can write:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
P_i = \\epsilon_0 \\sum_{j}\\chi_{ij}^{1}E_j+\\epsilon_0 \\sum_{jk}\\chi_{ijk}^{2}E_jE_k + ...`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ol,{start:"2",children:[`
`,a.jsx(e.li,{children:`Given that $\\chi$ and $\\alpha$ are proportional to
$\\langle D \\rangle$, they can be complex. We will see that real and
imaginary part have very different interpretations.`}),`
`]}),`
`,a.jsx(e.h2,{children:"Propagation of light"}),`
`,a.jsx(e.p,{children:`At this stage we would like to understand the propagation of an electric
field through such a polarized medium. The general Maxwell equation
actually reads:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\nabla^2 \\vec{E}-\\frac{1}{c^2}\\frac{\\partial^2 \\vec{E}}{\\partial t^2}= \\frac{1}{\\epsilon_0 c^2}\\frac{\\partial^2 \\vec{P}}{\\partial t^2}
$$`}),`
`,a.jsx(e.p,{children:`This equation can be massively simplified by only
looking at a slowly-evolving envelope $\\mathcal{E}(r,t)$ and
$\\mathcal{P}(r,t)$, which are defined through:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{E} = \\mathcal{E} e^{ikz-i \\omega_L t}\\
\\vec{P} = \\mathcal{P} e^{ikz-i \\omega_L t}\\
$$`}),`
`,a.jsxs(e.p,{children:["As shown in more detail in ",a.jsx(e.a,{href:"http://lukin.physics.harvard.edu/wp-uploads/Papers/285b_notes_2005-1.Lily.pdf",children:"Chapter 4 of Lukin"}),", the Maxwell equation reduces then to:"]}),`
`,a.jsx(e.p,{children:`$$
\\frac{\\partial}{\\partial z}\\mathcal{E}+\\frac{1}{c}\\frac{\\partial}{\\partial t}\\mathcal{E} = \\frac{ik}{2\\epsilon_0}\\mathcal{P}
$$`}),`
`,a.jsx(e.p,{children:`This equation becomes especially transparent, if we investigate it for
very long times, such that we can perform a Fourier transformation and
obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{\\partial}{\\partial z}\\mathcal{E}= i\\frac{\\omega}{c}\\mathcal{E} +\\frac{ik}{2\\epsilon_0}\\mathcal{P}
$$`}),`
`,a.jsx(e.p,{children:"Finally, we can use the definition of the susceptibility to write:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{\\partial}{\\partial z}\\mathcal{E}= i\\left(\\frac{\\omega}{c} +\\frac{k}{2} \\chi(\\omega)\\right) \\mathcal{E}\\
\\mathcal{E}(\\omega, z) =E_0 e^{i\\left(\\frac{\\omega}{c} +\\frac{k}{2}\\chi(\\omega)\\right)z}
$$`}),`
`,a.jsx(e.h3,{children:"Absorption and refraction"}),`
`,a.jsx(e.p,{children:`The meaning of the susceptibility becomes especially clear for a
continuous wave, where $\\omega\\rightarrow 0$ and we obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\mathcal{E}(\\omega\\rightarrow 0, z) =E_0 e^{i\\frac{k\\chi(0)}{2} z}
$$`}),`
`,a.jsx(e.p,{children:"We can then see that:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The imaginary part of the susceptibility leads to absorption on a
scale $l^{-1} = \\frac{k}{2}\\text{Im}(\\chi(0))$`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The real part describes a phase shift. The evolution of the electric
field can be seen as propagating with a wavevector
$k \\rightarrow k +\\frac{k}{2}\\text{Re}(\\chi(0))$, so the dielectric
medium has a refractive index $n = 1 + \\frac{\\text{Re}(\\chi(0))}{2}$`}),`
`]}),`
`]}),`
`,a.jsx(e.h3,{children:"Dispersion"}),`
`,a.jsx(e.p,{children:`If the electric field has a certain frequency distribution, we might
have to perform the proper integral to obtain the time evolution, i.e.:`}),`
`,a.jsx(e.p,{children:`$$
\\mathcal{E}(t, z) =\\int d\\omega e^{-i\\omega t}\\mathcal{E}(\\omega,0) e^{i\\left(\\frac{\\omega}{c} +\\frac{k}{2}\\chi(\\omega)\\right)z}
$$`}),`
`,a.jsx(e.p,{children:"To solve the problem we can develop the susceptibility:"}),`
`,a.jsx(e.p,{children:`$$
\\chi(\\omega) = \\chi(0)+\\frac{d\\chi}{d\\omega}\\omega
$$`}),`
`,a.jsx(e.p,{children:"And we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\mathcal{E}(t, z) =e^{izk\\chi(0)/2}
\\mathcal{E}(t-z/v_g, 0)\\
v_g = \\frac{c}{1+\\frac{\\omega_L}{2}\\frac{d\\chi}{d\\omega}}
$$`}),`
`,a.jsx(e.p,{children:`So the group velocity is controlled by the derivative of the
susceptibility !`}),`
`,a.jsx(e.h2,{children:"Two level system"}),`
`,a.jsx(e.p,{children:`After this rather general discussion, we will now employ it to
understand the action of two-level systems on the travelling beam. So we
will now focus on the influence of the atoms on the field in comparision
with the previous discussions. Further, we will have to take into
account the finite lifetime of the excited states in a phenomenological
manner. For a two level system with excited state
$\\left|e\\right\\rangle$ and groundstate
$\\left|g\\right\\rangle$, we can directly write down the
wavefunction as:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\gamma_g\\left|g\\right\\rangle+ \\gamma_e\\left|e\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"In this basis, the dipole element reads:"}),`
`,a.jsx(e.p,{children:`$$
\\langle D\\rangle = \\left\\langle e\\right|D\\left|g\\right\\rangle \\gamma_e^*\\gamma_g\\
= d \\sigma_{eg}
$$`}),`
`,a.jsx(e.p,{children:"In the second line we introduced the notations:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$d = \\left\\langle e\\right|D\\left|g\\right\\rangle$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`The product $\\gamma_e^*\\gamma_g$ can identified with the
off-diagonal component of the density operator
$\\sigma=\\left|\\psi\\right\\rangle\\left\\langle\\psi\\right|$.
We will often call it `,a.jsx(e.strong,{children:"coherence"}),"."]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The Hamiltonian of this model reads then in the rotating
wave-approximation:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = 0\\left|g\\right\\rangle\\left\\langle g\\right|+\\hbar\\delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\hbar\\Omega\\left[\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|\\right]\\
\\Omega = d E/\\hbar
$$`}),`
`,a.jsx(e.p,{children:`This is exactly the model that we discussed in the
lectures 3 and 4 [@Jendrzejewskib; @Jendrzejewskia]. We then found that
the time evolution might be described via:`}),`
`,a.jsx(e.p,{children:`$$
i\\dot{\\gamma}_g(t) = \\Omega \\gamma_e\\
i\\dot{\\gamma}_e(t) = \\delta \\gamma_e +\\Omega \\gamma_g\\
$$`}),`
`,a.jsx(e.p,{children:`We can combine them to the components of the density
operator, which then read:`}),`
`,a.jsx(e.p,{children:`$$
\\sigma_{ij} = c_{i}^*c_j
$$`}),`
`,a.jsx(e.p,{children:`From these coefficients, we can now obtain the evolution
of the populations:`}),`
`,a.jsxs(e.p,{children:[`$$
\\dot{N}`,a.jsx(e.em,{children:"g = \\dot{\\sigma}"}),"{gg} = \\dot{\\gamma}",a.jsx(e.em,{children:"{g}^*\\gamma_g+ \\gamma"}),"{g}^*\\dot{\\gamma}",a.jsx(e.em,{children:`g\\
= i\\Omega(\\sigma`}),`{eg}-\\sigma_{ge})\\
\\dot{N}_e = -\\dot{N}_g
$$`]}),`
`,a.jsx(e.p,{children:`So the total number of atoms stays automatically
conserved. As for the coherences we obtain:`}),`
`,a.jsxs(e.p,{children:[`$$
\\dot{\\sigma}`,a.jsx(e.em,{children:"{eg} = \\dot{\\gamma}"}),"{e}^",a.jsx(e.em,{children:"\\gamma_g+ \\gamma_{e}^"}),"\\dot{\\gamma}",a.jsx(e.em,{children:`g\\
= i\\delta \\sigma`}),`{eg}+i (N_g-N_e)\\Omega\\
\\dot{\\sigma}`,a.jsx(e.em,{children:"{ge}= -i\\delta \\sigma"}),`{ge}-i (N_g-N_e)\\Omega
$$`]}),`
`,a.jsx(e.p,{children:`This density operator approach allows us to introduce spontaneous decay
in a very straight-forward fashion:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The time evolution of the excited state gets an additional term
$-\\Gamma N_e$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Atoms coming from the excited state relax to the ground state, so we
add a term $\\Gamma N_e$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The coherence decays also through a term $-\\Gamma_2 \\sigma_{ge}$. We
will use here for simplicity the limit of $\\Gamma_2 = \\Gamma/2$`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"So the full equations read now:"}),`
`,a.jsxs(e.p,{children:[`$$
\\dot{N}`,a.jsx(e.em,{children:"g = i\\Omega(\\sigma"}),`{eg}-\\sigma_{ge})+\\Gamma N_e\\
\\dot{\\sigma}`,a.jsx(e.em,{children:"{ge}= -i\\delta \\sigma"}),`{ge}-i (N_g-N_e)\\Omega-\\Gamma_2\\sigma_{ge}
$$`]}),`
`,a.jsxs(e.p,{children:[`At this stage we can find the steady-state solutions by setting
$\\dot{N}`,a.jsx(e.em,{children:"g = \\dot{\\sigma}"}),"{ge} = 0$. This leads too:"]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`N_e = \\frac{1}{2}\\frac{\\Omega^2 \\frac{\\Gamma_2}{\\Gamma}}{(\\omega_0-\\omega_L)^2+\\Gamma_2^2+\\Omega^2\\frac{\\Gamma_2}{\\Gamma}}
$$`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma_2-i(\\omega_L-\\omega_0)}{\\Gamma_2^2+(\\omega_0-\\omega_L)^2+\\Omega^2\\Gamma_2/\\Gamma}
$$`}),`
`,a.jsx(e.p,{children:`In the next lecture we will employ those results to
study the laser.`})]})}function Ife(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(O5,{...t})}):O5(t)}const R5=Object.freeze(Object.defineProperty({__proto__:null,default:Ife,frontmatter:Afe},Symbol.toStringTag,{value:"Module"})),Mfe={author:["Fred Jendrzejewski"],order:11,title:"Lecture 11 - Laser fundamentals"};function N5(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"We will study some basic properties of the laser."}),`
`,a.jsxs(e.p,{children:[`In the last lecture we studied the interaction of atoms
and light. Most importantly, we saw that electric field can be dephased
and absorped through the interaction with atomic gases. In this lecture,
we will see how this interaction can be employed to induce lasing and
then study some basic properties of the laser. In the laser would most
importantly find a situation in which the light coming out of the
dielectric medium is amplified as shown in Fig.
`,a.jsx(e.a,{href:"#fig-laser",children:"1"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`The crucial idea of the system is that it is possible to find a
configuration for the medium in which it has a certain gain for the
propagation of the electric field. So if the light comes into the gain
medium with amplitude $I_A$ it exits with amplitude $G^{(0)}I_A$. The
output mirror and losses lower the intensity such that the intensity. We
can describe losses by the aborption rate $A$. The transmission of the
semi-transparent mirror is quantified by the transmission coefficient
$T$. Putting it all together, the intensity just before reentering the
medium reads then $G^{(0)}I_A(1-T)(1-A)$. Amplification will happen if
this intensity is higher than the initial one:`}),`
`,a.jsx(e.p,{children:`$$
G^{(0)}>\\frac{1}{(1-T)(1-A)}
$$`}),`
`,a.jsx(e.p,{children:`We will see that such a configuration is not trivial at all on the
two-level system. Then we will discuss the appropiate configuration for
lasing and a few properties of the laser.`}),`
`,a.jsx(e.h2,{children:"The two level system"}),`
`,a.jsx(e.p,{children:`In the last lecture, we saw that the two-level system might be described
by the following rate equations:`}),`
`,a.jsxs(e.p,{children:[`$$
\\dot{N}`,a.jsx(e.em,{children:"g = i\\Omega(\\sigma"}),`{eg}-\\sigma_{ge})+\\Gamma N_e\\
\\dot{\\sigma}`,a.jsx(e.em,{children:"{ge}= -i\\delta \\sigma"}),`{ge}-i (N_g-N_e)\\Omega-\\frac{\\Gamma}{2}\\sigma_{ge}
$$`]}),`
`,a.jsx(e.p,{children:"The definitions were:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\Omega$ is the strength of the Rabi coupling."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\delta$ the detuning."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\Gamma$ is the lifetime of the excited state."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$N_g$ the groundstate population."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`And $\\sigma_{g,e}$ is the coherence
$\\sigma_{g,e} = \\gamma_g^* \\gamma_e$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\Gamma_2$ is the lifetime of the coherence. For the moment we will
work in the limit $\\Gamma_2 = \\frac{\\Gamma}{2}$. Let we will relax
this point a bit.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`At this stage we can find the steady-state solutions by setting
$\\dot{N}`,a.jsx(e.em,{children:"g = \\dot{\\sigma}"}),"{ge} = 0$. This leads too:"]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`N_e = \\frac{1}{2}\\frac{\\Omega^2}{2\\delta^2+\\Gamma^2/2+\\Omega^2}
$$`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma-i2\\delta}{2\\delta^2+\\Gamma^2/2+\\Omega^2}
$$`}),`
`,a.jsx(e.p,{children:`We will now discuss these results in the two important regimes of very
weak and very strong coupling. The first one is important for probe
experiments, while the second one is typically the one, where we would
like to operate a laser.`}),`
`,a.jsx(e.h3,{children:"Linear response"}),`
`,a.jsx(e.p,{children:`For very small coupling strength we can neglect the $\\Omega$ dependence
in the coherence and we obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\sigma_{ge} = \\frac{\\Omega}{2}\\frac{\\delta+i\\Gamma/2}{\\Gamma^2/4+\\delta^2}
$$`}),`
`,a.jsxs(e.p,{children:["We can now plug this into the dipole element ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
D = d \\sigma_{eg}\\
D = \\frac{d^2}{2}\\frac{\\delta-i\\Gamma/2}{\\Gamma^2/4+\\delta^2}E
$$`}),`
`,a.jsx(e.p,{children:`In the second line, we used the relationship
$\\Omega = dE$ from lecture 4 [@Jendrzejewskia]. We can then directly
read of the polarizability and hence the susceptibility, which was
defined through $D = \\alpha E$:`}),`
`,a.jsx(e.p,{children:`$$
\\alpha =\\frac{d^2}{2}\\frac{\\delta-i\\Gamma/2}{\\Gamma^2/4+\\delta^2}
$$`}),`
`,a.jsx(e.p,{children:"On resonance $\\delta=0$ we have:"}),`
`,a.jsx(e.p,{children:`$$
\\alpha(0) =-i\\frac{d^2}{\\Gamma}\\
\\chi(0) = -i\\frac{n}{\\epsilon_0}\\frac{d^2}{\\Gamma}
$$`}),`
`,a.jsx(e.p,{children:"We obtain now rather directly that:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Absorption is maximal on resonance."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"There is no dephasing on resonance."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For large detunings the absorption can be increasingly neglected and
the media becomes refractive as it only keeps an optical index.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`We can then also look for maximum dephasing and find the it happens
close to the resonance. A summary can be found in Fig.
`,a.jsx(e.a,{href:"#fig-susc",children:"2"}),"."]}),`
`,`
`,a.jsx(e.h3,{children:"Saturation"}),`
`,a.jsx(e.p,{children:`The population and coherence in the two-level system will saturate as a
substantial amount of atoms is excited. To simplify the discussion let
us rewrite the eq. the populations and coherence of the two-level system on resonance:`}),`
`,a.jsx(e.p,{children:`$$
N_e = \\frac{1}{2}\\frac{\\Omega^2}{\\Gamma^2/2+\\Omega^2}\\
\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma}{\\Gamma^2/2+\\Omega^2}
$$`}),`
`,a.jsx(e.p,{children:`We can see that the excited fraction is limited to $1/2$
of the atoms. So at some point the system cannot react anymore to the
additional coupling strength. This is also the reason for the decay of
the coherence at very large $\\Omega$, which is basically telling us that
the medium becomes transparent. This kind of observations motivates for
practical purposes to introduce the saturation intensity
$I_{sat} \\propto \\frac{\\Gamma^2}{2}$, which allows us to rewrite the
previous to equations as:`}),`
`,a.jsx(e.p,{children:`$$
N_e = \\frac{1}{2}\\frac{I/I_{sat}}{1+I/I_{sat}}
$$`}),`
`,a.jsx(e.p,{children:`Finally, this kind of expressions allows us also nicely to see the
direct connection between the dipole element and the number of excited
atoms:`}),`
`,a.jsx(e.p,{children:`$$
\\sigma_{ge} = i\\frac{N_e}{\\Omega}
$$`}),`
`,a.jsx(e.p,{children:`So we never obtain a situation, where the two-level
system amplifies light. Let us look into this situation once again from
a technical point of view to see if we can obtain situations of
amplificiation.`}),`
`,a.jsx(e.h2,{children:"Rate equations"}),`
`,a.jsx(e.p,{children:`To understand laser it is best to formulate the interaction of atoms and
light in terms of rate equations for the populations, assuming that the
coherences follow adiabatically. While strict derivations can become
very tedious, they can be written down in a phenomenological way rather
easily. So we will convince us here in some limiting cases of the
usefulness.`}),`
`,a.jsx(e.p,{children:`We now would like to use the previous discussions to set up the
necessary formalism for laser amplification, which is based on the idea
of rate equations. While these equations are of phenomenological nature,
we can convince ourselves of their soundness in a first step.`}),`
`,a.jsx(e.h3,{children:"The two-level system"}),`
`,a.jsx(e.p,{children:`In the last lecture we saw that we can write down the following Bloch
equations for the two-level system on resonance:`}),`
`,a.jsxs(e.p,{children:[`$$
\\dot{N}`,a.jsx(e.em,{children:"g = -i\\Omega(\\sigma"}),`{eg}-\\sigma_{ge})+\\Gamma N_e\\
\\dot{\\sigma}`,a.jsx(e.em,{children:"{ge}= i (N_g-N_e)\\Omega-\\Gamma_2\\sigma"}),`{ge}
$$`]}),`
`,a.jsx(e.p,{children:`In a substantial amount of situations the coherences
reach the steady state much faster than the population. This can be due
to technical noise, collisions or other effects. In this case we can
assume $\\dot{\\sigma}_{ge}=0$ and the solve for the populations:`}),`
`,a.jsx(e.p,{children:`$$
\\sigma_{ge}= i \\frac{\\Omega}{\\Gamma_2} (N_g-N_e)\\
\\sigma_{eg}-\\sigma_{ge} = -2i \\frac{\\Omega}{\\Gamma_2} (N_g-N_e)
$$`}),`
`,a.jsxs(e.p,{children:[`We can see in this limit that the inversion of the sign
of the dipole element would come with $N_g < N_e$ `,a.jsx(e.strong,{children:`in the
steady-state`}),`. We saw previously that we cannot achieve this limit in
the two-level system.`]}),`
`,a.jsx(e.p,{children:`Having eliminated adiabatically the coherences, we end up with the
following time evolution of the population:`}),`
`,a.jsx(e.p,{children:`$$
\\dot{N}_g = 2\\frac{\\Omega^2}{\\Gamma_2}(N_e-N_g)+\\Gamma N_e\\
$$`}),`
`,a.jsx(e.p,{children:"We can now identify the three terms as:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Stimulated emission."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Stimulated absorption."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Spontaneous emission."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We will then focus on the rate equation for the populations and attempt
to find situations, where $N_g < N_e$.`}),`
`,a.jsx(e.h3,{children:"Optional: Rate equations for light"}),`
`,a.jsxs(e.p,{children:[`To see, when light amplification will happen, we now need to connect the
rate equations to evolution of light within the medium. One heuristic
approach is guided by the Beer-Lambert law (Ch. 4.2.3 of `,a.jsx(e.a,{href:"https://doi.org/10.1007%2F978-3-642-54322-7",children:"Hertel 2015"}),`
).`]}),`
`,a.jsx(e.p,{children:`$$
\\frac{dI}{dz}=- N_g\\sigma I
$$`}),`
`,a.jsx(e.p,{children:`We would like to translate this now more precisely into
a change of photon numbers through the relation:`}),`
`,a.jsx(e.p,{children:`$$
I = c \\hbar\\omega N_{ph}
$$`}),`
`,a.jsx(e.p,{children:`This allows us to rewrite for a propagation wave with
$z = ct$:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`\\frac{N_g\\sigma I}{\\hbar \\omega} = \\frac{d}{dt}N_{ph} = \\frac{dN_g}{dt} = -\\frac{dN_e}{dt}
$$`}),`
`]}),`
`,a.jsx(e.p,{children:"This allows us to define an absorption rate:"}),`
`,a.jsx(e.p,{children:`$$
R_{ab} =  \\frac{\\sigma I}{\\hbar \\omega}\\
= \\frac{1}{N_g}\\frac{dN_g}{dt}
$$`}),`
`,a.jsxs(e.p,{children:["This process is just the description of ",a.jsx(e.strong,{children:`stimulated
absorption`}),`. Nothing was special about the discussion of the absorption
and we can actually also have exactly the inverse situation, where we
assume that all the atoms start out in the excited state and then lead
to an increased intensity:`]}),`
`,a.jsx(e.p,{children:`$$
\\frac{dI}{dz}= N_e\\sigma I
$$`}),`
`,a.jsx(e.p,{children:`Both processes are now computing and we obtain in
general:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{dI}{dz}= (N_e-N_g)\\sigma I
$$`}),`
`,a.jsx(e.p,{children:`So if we have most atoms in the excited state and neglect the atoms in
the ground state we can actually have light amplification. This is idea
is underlying the laser. However, we have already seen for the two-level
system that this situation is not easily achieved and we will now
discuss it a bit further.`}),`
`,a.jsx(e.h2,{children:"Lasing condition in a four-level system"}),`
`,a.jsx(e.p,{children:`To obtain in the medium, it is necessary to have an excited state
population which is higher than the population of the ground state. This
is not possible in the two-level system and in practice realized mostly
in four-level systems.`}),`
`,`
`,a.jsx(e.p,{children:"The idea of such a system is the following:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"A strong pumping beam excites atoms into the state $e$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`From $e$ they decay rapidely into the state b. This is the upper
state for the lasing transition $b\\rightarrow a$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We obtain lasing on the transition $b\\rightarrow a$, which has a
decay rate of $\\tau_B$`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The lower state $a$ is easily depopulated through the fast
relaxation $a\\rightarrow g$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We can now write down the rate equations for a weak laser, such that we
can only keep terms in first order:`}),`
`,a.jsx(e.p,{children:`$$
\\dot{N}_e = w(N_g-N_e)-N_e/\\tau_e\\
\\dot{N}_b = \\frac{N_e}{\\tau_e}-N_b/\\tau_b\\
\\dot{N}_a = \\frac{N_b}{\\tau_b}-N_a/\\tau_a\\
\\dot{N}_g = \\frac{N_a}{\\tau_a}-w(N_g-N_e)
$$`}),`
`,a.jsx(e.p,{children:`We can now find steady state solutions assuming that
$\\tau_e, \\tau_a \\ll \\tau_b$. Further we assume that the pumping to $e$
is not too strong, i.e. $w \\tau_e\\ll1$. We then obtain:`}),`
`,a.jsx(e.p,{children:`$$
N_e \\simeq w\\tau_e N_g\\
N_b \\simeq w\\tau_b N_g\\
N_a \\simeq w\\tau_a N_g
$$`}),`
`,a.jsx(e.p,{children:"We then obtain the state populations:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{N_b-N_a}{N_g + N_e + N_a + N_b}\\simeq \\frac{w\\tau_b}{1+w\\tau_b}
$$`}),`
`,a.jsx(e.p,{children:`Lasing is then obtained above the pumping threshold at which the gain
overcomes the losses.`}),`
`,a.jsx(e.h2,{children:"Steady-state operation of the laser"}),`
`,a.jsx(e.p,{children:`Assuming that the lasing condition is fullfilled, we can now investigate
its steady-state behavior. Quite importantly, we have to have an
electric field, which remains exactly constant after each round
trip.This implies to conditions:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The gain has to cancel the losses:"}),`
`]}),`
`,a.jsx(e.p,{children:`$$
G = \\frac{1}{(1-T)(1-A)}`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The phase after the round trip has to be a multiple of $2\\pi$"}),`
`]}),`
`,a.jsx(e.p,{children:`For a cavity of length $L$, the wavelength $\\lambda_p$ has to be an
integer fraction:`}),`
`,a.jsx(e.p,{children:`$$
L_{cav} = p\\lambda_p\\text{ with }p \\in  \\mathbb{N}\\
\\omega_p/2\\pi =p \\frac{c}{L}
$$`}),`
`,a.jsxs(e.p,{children:[`So the lasing will not happen at one single frequency,
but actually for any wavelength fulfilling this condition. The laser has
multiple `,a.jsx(e.strong,{children:"longitudinal modes"}),`. Some tricks allow to suppress this
multi-mode behavior, such that we obtain a very pure light source.`]}),`
`,`
`,a.jsx(e.h2,{children:"Mode-locked operation"}),`
`,a.jsx(e.p,{children:`We have seen in the last section that a laser might act in the multimode
regime. So let us write down for simplicity the total field, where we
assume that the relative phase between modes in uncorrelated and that
the amplitude is the same for all of them. We then have:`}),`
`,a.jsx(e.p,{children:`$$
E(t) = \\sum_{k=0}^{N-1}E_0 \\cos(\\omega_k t +\\phi_k)
$$`}),`
`,a.jsx(e.p,{children:"The frequency of each mode:"}),`
`,a.jsx(e.p,{children:`$$
\\omega_k = \\omega_0 + k \\Delta\\text{ with }\\Delta/2\\pi = \\frac{c}{L_{cav}}
$$`}),`
`,a.jsx(e.p,{children:"Summing the electric fields leads to an intensity:"}),`
`,a.jsx(e.p,{children:`$$
I(t)= \\frac{NE_0^2}{2}+E_0^2\\sum_{j_k}\\cos\\left[(\\omega_j-\\omega_k)t+\\phi_j-\\phi_k\\right]
$$`}),`
`,a.jsxs(e.p,{children:[`For uncorrelated fields this intensity is on average
$\\overline{I} = \\frac{NE_0^2}{2}$ with temporal fluctuations in the
order of the amplitude itself `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),` For correlated fields the equations
simplify a lot and we obtain:`]}),`
`,a.jsx(e.p,{children:`$$
I = \\frac{1}{2}\\left|\\sum_{k=0}^{N-1}E_0e^{-i\\omega_k t}\\right|^2\\
= \\frac{E_0^2}{2}\\left|\\sum_{k=0}^{N-1}e^{i k\\Delta  t}\\right|^2\\
= \\frac{E_0^2}{2}\\left|\\frac{\\sin(\\frac{N\\Delta t}{2})}{\\sin(\\frac{\\Delta t}{2})}\\right|^2
$$`}),`
`,a.jsx(e.p,{children:"The maximum intensity in this coherent sum is now"}),`
`,a.jsx(e.p,{children:`$$
I_{max} = N\\overline{I}
$$`}),`
`,a.jsx(e.p,{children:"We can then reach petawatt (!!) peak powers."}),`
`,a.jsx(e.p,{children:"In the next lecture, we will study how the laser is actually used for the study of entanglement"}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`The sign change appears as we are now working with $\\sigma_{eg}$
instead of $\\sigma_{ge}$ `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,a.jsxs(e.p,{children:["We obtain actually a speckle pattern in time here. ",a.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Lfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(N5,{...t})}):N5(t)}const D5=Object.freeze(Object.defineProperty({__proto__:null,default:Lfe,frontmatter:Mfe},Symbol.toStringTag,{value:"Module"})),Ofe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:12,title:"Lecture 12- Entanglement"};function B5(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We will discuss the creation of entangled photons and how they can be
used for the test of Bell's inequalities.`}),`
`,a.jsx(e.p,{children:`We have previously discussed how complicated gain media allow for the
amplification light. Here we will discuss how it is
used to create entangled photons and then dive into the fundamental test
of the Bell inequalities.`}),`
`,a.jsx(e.h1,{children:"Parametric down-conversion"}),`
`,`
`,a.jsxs(e.p,{children:["Fig. ",a.jsx(e.a,{href:"#fig-downcon",children:"1"}),` shows the
schematic setup of an experiment where pairs of entangled photons are
created by a two-photon source. Two polarizers can be used to probe the
polarization of the photons.`]}),`
`,a.jsx(e.h2,{children:"Three-wave mixing"}),`
`,a.jsx(e.p,{children:`The crystal in the medium is a non-linear crystal, which means that we
can write the polarization is not just linear, but higher order terms
will play a role. We will consider for starters that there are actually
two pump waves in the same direction, which allows us to write:`}),`
`,a.jsx(e.p,{children:`$$
P_{NL}(z) = 2\\epsilon_0 \\chi^{(2)}\\mathcal{E}_1(z)\\mathcal{E}_2(z)e^{i(k_1+k_2)z}
$$`}),`
`,a.jsx(e.p,{children:`This non-linear polarizability leads to the following
equations of motion [@grynberg]:`}),`
`,a.jsxs(e.p,{children:[`$$
\\frac{d\\mathcal{E}`,a.jsx(e.em,{children:"3}{dz}e^{ik_3 z} = \\frac{i\\omega_3}{2\\epsilon_0n_3c}P"}),`{NL}(z) \\
\\frac{d\\mathcal{E}_3}{dz}= \\frac{i\\omega_3}{n_3c}\\chi^{(2)}\\mathcal{E}_1(z)\\mathcal{E}_2(z)e^{i(k_1+k_2-k_3)z} \\,
$$`]}),`
`,a.jsx(e.p,{children:`where $\\omega_3 = \\omega_1 + \\omega_2$. We can now
additionally assume that:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The effect of the medium does not change the strong pump to much."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The amplified field is zero initially."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The oscillating phase factor $(k_1+k_2-k_3)z$ can be ignored, i.e.
where we have:`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\vec{k}_3 = \\vec{k}_1 + \\vec{k}_2`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:"We can then simplify to:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d\\mathcal{E}_3}{dz}=\\frac{i\\omega_3 \\chi^{(2)}}{n_3c}\\mathcal{E}_1\\mathcal{E}_2
$$`}),`
`,a.jsx(e.p,{children:`So the amplitude of the mixed field increases in a
linear fashion in the non-linear medium. However, the typical amplitude
for production is below 1% for commonly used crystals.`}),`
`,a.jsx(e.h1,{children:"Polarization entangled photons"}),`
`,a.jsx(e.p,{children:`We will try to observe correlations between the photons. Two optical
fibers are collecting the pairs of photons and transmit them to the
single photon detectors. Finite collection and detection efficiency
causes only one of the two photons to be detected in most cases.
Therefore, a coincidence circuit registers events in which two photons
arrive within 30 ns. As the rate of detected individual photons is about
50 kHz, we assume that photons arriving during such a small time window
were created in the same event.`}),`
`,a.jsx(e.h2,{children:"Polarization analysis"}),`
`,a.jsxs(e.p,{children:[`To study the quantum nature of the correlations, we will employ
polarizers and later dive into Bell's inequalities as well as
entanglement in general. The interested reader will have a great time
reading through the complement 5.C of `,a.jsx(e.a,{href:"https://www.cambridge.org/core/books/introduction-to-quantum-optics/F45DCE785DC8226D4156EC15CAD5FA9A",children:"Grynberg"}),"."]}),`
`,a.jsxs(e.p,{children:[`The first emitted photon is analyzed by a rotatable polarizers
$\\hat{A}(\\theta)$, which has two detection paths $\\pm1$. The other
polarizer will be called $\\hat{B}(\\theta)$ the only difference is that
he only acts on photon 2. Basically, we are following the `,a.jsx(e.em,{children:"Alice"}),` and
`,a.jsx(e.em,{children:"Bob"})," notation here."]}),`
`,a.jsx(e.p,{children:`We can express it then in our basis states of vertical polarization
$\\left|V\\right\\rangle$ and horizontal polarization
$\\left|H\\right\\rangle$. The polarizer aligned with $H$ has
eigenvalues:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{A} \\left|H\\right\\rangle= +\\left|H\\right\\rangle\\
\\hat{A} \\left|V\\right\\rangle= -\\left|V\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`To analyse the polarization of each photon in detail we can also rotate
the polarizer by an angle of $\\theta$. In this case the transmitted
eigenstates are:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\theta\\right\\rangle_{+} = \\cos(\\theta)\\left|H\\right\\rangle +\\sin(\\theta)\\left|V\\right\\rangle\\
\\left|\\theta\\right\\rangle_{-} = -\\sin(\\theta)\\left|H\\right\\rangle +\\cos(\\theta)\\left|V\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`Taking as input states
$\\left|H\\right\\rangle$, we simply find Malus law:`}),`
`,a.jsx(e.p,{children:`$$
P_+(\\theta) = \\cos(\\theta)^2\\
P_-(\\theta) = \\sin(\\theta)^2\\
$$`}),`
`,a.jsx(e.p,{children:`In the rotated basis we can express the polarization
operator as:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{A}(\\theta) = \\left(\\begin{array}{cc}
\\cos(2\\theta)& \\sin(2\\theta)\\
\\sin(2\\theta)& -\\cos(2\\theta)
\\end{array}\\right)
$$`}),`
`,a.jsxs(e.p,{children:[`We can now employ the two polarizers to investigate the
two emitted photons as shown in Fig. `,a.jsx(e.a,{href:"#fig-polar-anal",children:"2"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`The possible outcome of our experiments are the four states
\${HH, HV, VH, VV}$ and hence we could decompose our full wavefunction
as:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = c_0 \\left|HH\\right\\rangle+ c_1 \\left|HV\\right\\rangle + c_2 \\left|VH\\right\\rangle + c_3\\left|VV\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`Using the two polarizers we can now start to investigate
the prefactors of the full wavefunction. Let us first look into the
results of a polarizer that is not rotated. We find:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\psi\\right|\\hat{A}\\left|\\psi\\right\\rangle=|c_0|^2 + |c_1|^2 - |c_2|^2-|c_3|^2
$$`}),`
`,a.jsx(e.p,{children:"For Bobs polarizer in the same position we would find:"}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\psi\\right|\\hat{B}\\left|\\psi\\right\\rangle=|c_0|^2+ |c_2|^2 - |c_1|^2 -|c_3|^2
$$`}),`
`,a.jsx(e.h2,{children:"An equivalent 2 qubit circuit"}),`
`,a.jsx(e.p,{children:`The optics setup handles two independent photons, with two outcomes
each. So we can also see the presented setup as a two qubit system. A
circuit diagram would mostly look the following way.`}),`
`,`
`,a.jsx(e.p,{children:`The two photons originate from an unknown source, which is here modelled
by photons propagating through some unitary matrix $\\hat{U}$. The
measurement is performed in the last step, projecting the qubit on its
up or down state. The rotation around the x axis $\\hat{R}_x$ transforms
a qubit state into a superposition. In strong analogy to the
polarization`}),`
`,a.jsx(e.h2,{children:"A naive guess"}),`
`,a.jsx(e.p,{children:`We know that we have two photons in the system. Both can have some
polarization and clearly they are propagation in different directions.
So it does not seems to much of a stretch to guess that the total
wavefunction is the product of two superposition states:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\left|\\psi\\right\\rangle_{p} = (c_{H,1}\\left|H\\right\\rangle +c_{V,1} \\left|V\\right\\rangle)\\otimes(c_{H,2}\\left|H\\right\\rangle+c_{V,2}\\left|V\\right\\rangle) \\
= (c_{H,1}c_{H,2}\\left|HH\\right\\rangle + c_{V,1}c_{V,2}\\left|VV\\right\\rangle + c_{V,1}c_{H,2}\\left|VH\\right\\rangle + c_{H,1}c_{V,2}\\left|HV\\right\\rangle)
$$`}),`
`,a.jsx(e.h2,{children:"The experimental observation of entanglement"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We find a lot of counts if both polarizers are set vertical or
horizontal. So the state has a $VV$ and a $HH$ component, which
tells us that $c_0$ and $c_{3}$ are non-zero. The equal rate of
measuring further tells us that they are roughly similiar in
amplitude, so we can write for simplicity $|c_0| = |c_3|$`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We find zero correlation if the polarizers are opposite. So the
mixed terms are zero $c_1 = c_2 = 0$`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"In summary we can expect the Bell state can to be written as:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_B\\right\\rangle = \\frac{\\left|HH\\right\\rangle +\\left|VV\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:"This is quite clearly incompatible with our naive guess, which means that we have an entangled state."}),`
`,a.jsx(e.h1,{children:"Optional: Quantifying entanglement"}),`
`,a.jsx(e.p,{children:`We will study the properties of the entangled states later in more
detail. However, we will take a short moment to cite two ways of
quanitfying the entanglement through the density operator:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho} = \\sum_i \\eta_i \\left|i\\right\\rangle \\left\\langle i\\right|
$$`}),`
`,a.jsx(e.p,{children:`The reduced density operator, which shows mixed states if there is
entanglement:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\rho}`,a.jsx(e.em,{children:"1 = \\mathrm{tr}"}),`{2}(\\hat{\\rho})
$$`]}),`
`,a.jsx(e.p,{children:`In this case, $\\hat{\\rho}$ is the density operator
of a pure state and $\\textrm{tr}_2$ is the trace over the Hilbert
space of particle 2.`}),`
`,a.jsx(e.p,{children:`The von Neumann entropy, which measures the remaining uncertainty
within a quantum state:`}),`
`,a.jsx(e.p,{children:`$$
S=-\\mathrm{tr}(\\hat{\\rho}\\ln\\hat{\\rho})\\
= - \\sum_i \\eta_i \\ln \\eta_i = \\sum_i \\eta_i \\ln \\frac{1}{\\eta_i}
$$`}),`
`,a.jsx(e.p,{children:"For the Bell states of we find then:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho_B}_1 = \\frac{1}{2} \\left( \\left|H\\right\\rangle\\left\\langle H\\right| + \\left|V\\right\\rangle\\left\\langle V\\right| \\right)
$$`}),`
`,a.jsx(e.p,{children:`Its corresponding entropy is $S=\\ln 2$, the entropy of a
pure state is $S=0$.`}),`
`,a.jsx(e.h1,{children:"Back to the correlation between distant photons"}),`
`,a.jsx(e.p,{children:`In the last sections we performed measurements on joined detection
probabilities between two independent polarizers. Quite importantly we
saw that:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Each photon is in a superposition of
$\\left|H\\right\\rangle$ and
$\\left|V\\right\\rangle$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Both photons are always detected in the same polarization state."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["From Fig. ",a.jsx(e.a,{href:"#fig-polar-anal",children:"2"}),` it
seems as if 1 was a bit closer to the source than 2 `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),`. So 1 is
detected a bit earlier and projected onto one of the two states.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Yet, 2 seems to instantaneously on which polarization 1 was
projected and choses the same one.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`For our set-up the distances are small, but the same observations and
arguments hold also for very large distances between the detectors.
Einstein, Podolski and Rosen understood this long distance correlation
and decided that something was funky about quantum mechanics
[@Einstein_1935].`}),`
`,a.jsx(e.p,{children:`Therefore, the idea of an additional hidden shared parameter can be
introduced to explain the correlations between distant objects. We will
simply assume that the two photons have well-defined polarization with
angle $\\lambda$ from the starting point, yet this polarization varies
randomly from pair to pair between 0 and $2\\pi$. Hence we have uniform
probability distribution $\\rho(\\lambda) = \\frac{1}{2\\pi}$. The
measurement of the polarizers can then simply be modelled through`}),`
`,a.jsx(e.p,{children:`$$
A_{hv}(\\lambda, \\theta) =\\text{sign}\\left(\\cos2 (\\theta-\\lambda)\\right)
$$`}),`
`,a.jsx(e.p,{children:`This model reproduces nicely all the tests that we ran
previously. Namely, maximum detection for HH and VV as well as zero
correlation for $HV$. They can be nicely compared through the
correlation coefficient $E(\\theta_1,\\theta_2)$. The particularly
perturbing case is that this simple model for hidden parameters works
even perfectly well in the case of $45^\\circ$ angles. So is there any
measurable difference between our observations and the hidden variable
models ?`}),`
`,`
`,a.jsx(e.h1,{children:"Bell's theorem"}),`
`,a.jsxs(e.p,{children:[`Bell posed the previous discussion on a more general and quite simple
footing `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physicsphysiquefizika.1.195",children:"Bell 1964"})," and later extended by ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.23.880",children:"Clauser, Horner, Shimony, Holt"}),`. For the hidden parameter we need just a standard
density distribution with:`]}),`
`,a.jsx(e.p,{children:`$$
\\rho(\\lambda)\\geq 0\\
\\int d\\lambda \\rho(\\lambda) = 1
$$`}),`
`,a.jsx(e.p,{children:`We additionally should describe the polarizer by some function that
takes the value $\\pm 1$ depending on the angle of the polarizer and the
hidden variable:`}),`
`,a.jsx(e.p,{children:`$$
|A(\\lambda, \\theta_1) |= |A(\\lambda, \\theta_2) | =1
$$`}),`
`,a.jsxs(e.p,{children:[`In the experiment we now have two polarizers $A$ for
Alice and $B$ for Bob, which we will allow to be in some position
$\\theta$ as visualized in Fig. `,a.jsx(e.a,{href:"#fig-bell",children:"5"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"We will now calculate the the expectation value for joint detection:"}),`
`,a.jsx(e.p,{children:`$$
E(\\theta_1, \\theta_2)=\\overline{A(\\theta_1)B(\\theta_2)}-\\overline{A(\\theta_1)}~\\overline{B(\\theta_2)}
$$`}),`
`,a.jsx(e.p,{children:`We can simplify further for equal probability of having
H or V polarization, which leads too:`}),`
`,a.jsx(e.p,{children:`$$
E(\\theta_1, \\theta_2)=\\overline{A(\\theta_1)B(\\theta_2)}\\
=\\int d\\lambda  A(\\lambda, \\theta_1)B(\\lambda, \\theta_2)
$$`}),`
`,a.jsx(e.p,{children:`Bells inequalities are then studying the correlations
between photons in four different configuations:`}),`
`,a.jsx(e.p,{children:`$$
s(\\lambda, \\theta_1, \\theta_1', \\theta_2, \\theta_2')= A(\\lambda, \\theta_1)B(\\lambda, \\theta_2)-A(\\lambda, \\theta_1)B(\\lambda, \\theta_2') +A(\\lambda, \\theta_1')B(\\lambda, \\theta_2)+A(\\lambda, \\theta_1')B(\\lambda, \\theta_2')\\
= A(\\lambda, \\theta_1)(B(\\lambda, \\theta_2)-B(\\lambda, \\theta_2'))+A(\\lambda, \\theta_1')(B(\\lambda, \\theta_2)+B(\\lambda, \\theta_2'))\\
= \\pm 2
$$`}),`
`,a.jsx(e.p,{children:`We actually have no access to the hidden parameter, so
we are looking for its average value:`}),`
`,a.jsx(e.p,{children:`$$
S = \\int d\\lambda \\rho(\\lambda) s(\\lambda, \\theta_1, \\theta_1', \\theta_2, \\theta_2')\\
-2\\leq S\\leq 2
$$`}),`
`,a.jsx(e.p,{children:`And this value can now be measured experimentally as we
can identify:`}),`
`,a.jsx(e.p,{children:`$$
S = E(\\theta_1, \\theta_2)-E(\\theta_1, \\theta_2')+E(\\theta_1', \\theta_2)+E(\\theta_1', \\theta_2')
$$`}),`
`,a.jsx(e.p,{children:`This is known as the Bell--Clauser--Horn--Shimony--Holt
(CHSH) inequalities.`}),`
`,a.jsx(e.h2,{children:"The inconsistency between hidden parameters and quantum mechanics"}),`
`,a.jsx(e.p,{children:`We can now go again through the predictions of quantum mechanics and
test if there is a region of interest in which we should observe a
violation of the CHSH inequalities. Actually there is an important
configuration at which we should break them rather violantly namely for:`}),`
`,a.jsx(e.p,{children:`$$
|\\theta_1-\\theta_2| =\\frac{\\pi}{8}(22.5^\\circ)\\
|\\theta_1'-\\theta_2| =\\frac{\\pi}{8}(22.5^\\circ)\\
|\\theta_1'-\\theta_2'| =\\frac{\\pi}{8}(22.5^\\circ)\\
|\\theta_1-\\theta_2'| =\\frac{3\\pi}{8}(67.5^\\circ)\\
$$`}),`
`,a.jsx(e.p,{children:`Here, we expect to have $S= 2\\sqrt{2}$. So to test Bells
inequalities we have to measure the joint probabilities in rather
unusual angles. This also explains why quantum mechanics and local
hidden variables seem so similiar in this kind of experiments, the
biggest differences are hard to see accidentally.`}),`
`,a.jsx(e.h2,{children:"The experimental test"}),`
`,a.jsx(e.p,{children:"We can now study the correlations for the following configuration."}),`
`,a.jsx(e.p,{children:`$$
\\theta_1 = 0 \\text{ and }\\theta_1' = \\frac{\\pi}{4}\\
\\theta_2 = \\frac{\\pi}{8} \\text{ and }\\theta_2' = \\frac{3\\pi}{8}\\
$$`}),`
`,`
`,a.jsx(e.p,{children:`In the figure above we present correlation measurement between the two photons measured with the
setup shown in the second figure. One of the rotatable polarizers stays at an angle
$\\gamma \\in { 0^\\circ, 45^\\circ, 90^\\circ, 135^\\circ }$ while the
other polarizer is rotated counter-clockwise in small steps between
$0^{\\circ}$ and $360^{\\circ}$. Experimentally we observe quite frequently values above 2. However,
please be aware that there are a lot of loopholes in our test. The most
obvious ones are:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Position of the polarizers is not random."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The detectors are not well separated."}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`Other loopholes exist, but all realistically known loopholes have been
closed over the course of the last three decades with examples from `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.115.250401",children:"Gustina et al."}),", ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.115.250402",children:"Shalm et al."})," and ",a.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature15759",children:"Hensen et al."}),"."]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`The exact order does not matter, but they are most certainly not
at exactly the same distance from the source `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Rfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(B5,{...t})}):B5(t)}const P5=Object.freeze(Object.defineProperty({__proto__:null,default:Rfe,frontmatter:Ofe},Symbol.toStringTag,{value:"Module"})),Nfe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:13,title:"Lecture 13 - Atoms with many electrons"};function F5(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",h4:"h4",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`After our discussion of extremely simple atoms like hydrogen and helium,
we will now discuss the most important properties of more complex atoms.
We will see, how we can categorize them and discuss some of the general
properties`}),`
`,a.jsx(e.p,{children:`We started the discussion of atoms in lecture 3 by an extremely simple
and powerful model, the two-level system . We then moved
on to discuss how it can emerge within the hydrogen atom and the Helium
atom. For both of these we dived again into simplified schemes.
Especially for Hydrogen, we saw in lecture 7 the exploding complexity of
the models as we tried to describe it. If we now want
to leave these rather academic problems and turn to the other widely
used atoms, molecules etc, we have towards effective models for two
reasons:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Analytical solutions do not exist."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Full numerical solutions become extremely and expansive."}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`A particularly instructive discussion of the ineffeciency of brute force
numerical methods was given by Kenneth Wilson, the father of the
renormalization group, in Sec 3 of `,a.jsx(e.a,{href:"http://dx.doi.org/10.1016/0001-8708(75)90149-8",children:"Wilson 1975"}),"."]}),`
`,`
`,a.jsxs(e.p,{children:["The main idea is plotted in Fig. ",a.jsx(e.a,{href:"#fig-toy",children:"1"}),` and its description in the words of Kenny Wilson can
be found in Fig. `,a.jsx(e.a,{href:"#fig-ineff",children:"2"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`We will come back to different experimental approaches to solve problems
for which we cannot devise effective theories at a later stage, when we
discuss quantum simulation and quantum computation with atomic systems.
But first we will try to gain a good understanding of atoms with many
electrons.`}),`
`,a.jsx(e.h1,{children:"Atoms with Many Electrons"}),`
`,a.jsx(e.p,{children:`As already discussed before, the N electron system cannot be solved in
its full complexity, so we have to walk through the different levels of
physical effects to understand what is going on. We will start out with
the simplest model, which consists of`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"N electrons without spin"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Bound to the point-like nucleus of charge $Z$, which is supposed to
be not moving.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"In natural units, the Hamiltonian can be written as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\sum_i^N \\left(-\\frac{1}{2} \\vec{\\nabla}^2_{r_i} - \\frac{Z}{r_i} \\right) + \\sum_{i<j} \\frac{1}{r_{ij}}.
$$`}),`
`,a.jsxs(e.p,{children:[`The system is visualized in Fig.
`,a.jsx(e.a,{href:"#fig-three-ele",children:"3"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"As before the Hamiltonian has two contributions:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The well understood binding of each electron to the nucleus, which
allows us to make the connection with the hydrogen orbitals.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The interaction between the electrons, which couples all the
orbitals.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`How can we deal with the $1/r_{ij}$ terms? If many electrons are
contained in the system we cannot ignore the influence of the
electron-electron interaction on the system, which was already a
questionable approximation in the Helium atom.`}),`
`,a.jsx(e.h1,{children:"Central Field Approximation"}),`
`,a.jsx(e.p,{children:`But we can bring back the system to the well-known problems with
spherical symmetry by splitting the interaction into two parts. One will
be assumed to have spherical symmetry and will be written as
$\\sum_i S(r_i)$ and the rest will be treated as a perturbation. So we
obtain the Hamiltonian:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H} = \\hat{H}`,a.jsxs(e.em,{children:["s + \\hat{H}",a.jsxs(e.em,{children:[`1\\
\\hat{H}`,a.jsx(e.em,{children:"s = \\sum_i^N \\left(-\\frac{1}{2} \\vec{\\nabla}^2"}),"{r_i} + V"]}),`\\textrm{cf}(r_i) \\right)\\
V`]}),`\\textrm{cf} (r_i) = - \\frac{Z}{r_i} + S(r_i),
$$`]}),`
`,a.jsx(e.p,{children:`The perturbation is then difference between the
spherically symmetric part of the interaction and the true
electron-electron interaction:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H}`,a.jsx(e.em,{children:"1 = \\sum"}),`{i<j} \\frac{1}{r_{ij}} - \\sum_i S(r_i)
$$`]}),`
`,a.jsxs(e.p,{children:[`$S(r_i)$ describes now the screening of the nucleus due
to the other electrons. This function interpolates between (see
`,a.jsx(e.a,{href:"#fig-screening",children:"4"}),"):"]}),`
`,a.jsx(e.p,{children:`$$
V_\\textrm{cf} (\\vec{r}_i) = \\left{ \\begin{array}{ccc} -\\frac{Z}{r_i} &\\text{for}& r\\to 0 \\ \\ -\\frac{Z-N+1}{r_i} & \\text{for} & r\\to\\infty  \\end{array} \\right.
$$`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For very small distances the electron mainly sees the strong
attraction of the nucleus.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For very large distances the other electrons mostly screen the
charge of the nucleus and electron feels the $1/r$ potential of the
hydrogen atom.`}),`
`]}),`
`]}),`
`,`
`,a.jsx(e.p,{children:`We can now focus on the study of the part with spherical symmetry
$\\hat{H}_s$. Given its symmetry, we can once again use the conservation
of orbital angular momentum (see Lecture 5). As a
result, the wave function can be a product state of single-particle wave
functions:`}),`
`,a.jsxs(e.p,{children:[`$$
\\psi_\\textrm{cf} (\\vec{r}`,a.jsx(e.em,{children:"1 , \\cdots , \\vec{r}"}),"\\textrm{n} ) = \\psi_1 (\\vec{r}",a.jsxs(e.em,{children:["1) \\cdot \\psi_2(\\vec{r}",a.jsx(e.em,{children:"2) \\cdot \\cdots \\psi"}),"\\textrm{n}(\\vec{r}"]}),`\\textrm{n}),
$$`]}),`
`,a.jsx(e.p,{children:`where $\\psi_i(\\vec{r}_i)$ are solutions of the
Schrödinger equation:`}),`
`,a.jsxs(e.p,{children:[`$$
\\left( - \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}`,a.jsx(e.em,{children:"i} + V"}),`\\textrm{cf} (r_i) \\right) \\psi_i (\\vec{r}_i) = E_i \\psi_i(\\vec{r}_i).
$$`]}),`
`,a.jsx(e.p,{children:`$\\psi_i$ can be split up into a radial and an angular
part:`}),`
`,a.jsxs(e.p,{children:[`$$
\\psi_i = \\psi(nlm)`,a.jsx(e.em,{children:"i = Y"}),`{lm} (\\theta, \\varphi) \\cdot R_{nl} (r).
$$`]}),`
`,a.jsx(e.p,{children:`For the radial part we get $u(r) = r\\cdot R(r)$. Thus,
$u(r)$ solves the radial Schrödinger equation:`}),`
`,a.jsx(e.p,{children:`$$
\\left( - \\frac{1}{2} \\frac{d^2}{dr^2} + V_\\textrm{cf}(r) + \\frac{l(l+1)}{2r^2}\\right) u_{nl} = E_{nl} u_{nl} (r).
$$`}),`
`,a.jsx(e.p,{children:`The major difference to the $\\mathrm{H}$ atom is that
the degeneracy of the $l$ levels is lifted because of $V_\\textrm{cf}$.`}),`
`,a.jsx(e.h2,{children:"On the determination of the effective potential"}),`
`,a.jsxs(e.p,{children:[`We will not discuss here the different techniques to derive the central
field in detail as this is quickly diving into the different numerical
techniques of many-body systems. A first discussion of the different
approaches can be found in chapter 10 of `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_10",children:"Hertel 2015"}),`. The different
levels of sophistication are:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"Thomas-Fermi"}),` model, which assumes that the $N$ electrons
behave like a Fermi gas inside the $Z/r$ potential.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The Hartree method, in which the effective potential is iteratively
recalculated based on the obtained solutions to the radial
Schrödinger equation.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The Hartree Fock method, in which we also take into account the
proper symmetrization of the wavefunctions.`}),`
`]}),`
`]}),`
`,a.jsx(e.h1,{children:"Filling up the shells"}),`
`,a.jsx(e.p,{children:`If we can ignore the spin for the determination of the energy levels, we
have the following quantum numbers:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$n$, which is electron shell."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$l$, which is the orbital angular momentum with $l<n$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$s$, which is the spin of the electron and it can be $\\pm 1/2$"}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`As the electrons are fermions we can fill up each of the $nl$ states
with two of them. We then write down the configuration of the electron
by writing down the numbers of electrons per $nl$ configuration. So we
get the periodic table shown in Fig. `,a.jsx(e.a,{href:"#783282",children:"5"}),`{reference-type="ref"
reference="783282"}. We will typically use the following notation:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["A ",a.jsx(e.em,{children:"configuration"}),` is the distribution of the electrons over the
different orbits.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["Electrons with the same $n$ are part of the same ",a.jsx(e.em,{children:"shell"}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`Electrons with the same $n$ and $l$ are part of the same
`,a.jsx(e.em,{children:"sub-shell"}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The inner shells are typically filled and form the ",a.jsx(e.em,{children:"core"}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The outermost shell is typically named the ",a.jsx(e.em,{children:"valence"})," shell."]}),`
`]}),`
`]}),`
`,`
`,a.jsx(e.h1,{children:"Alkali Atoms"}),`
`,a.jsx(e.p,{children:`Alkali atoms are the simplest to understand and widely used in the field
of laser cooling. The electron configurations are`}),`
`,a.jsx(e.h4,{children:"Examples."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\mathrm{Li}$: 1s$^2$ 2s"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\mathrm{Na}$:
1s$^2$ 2s$^2$ 2p$^6$ 3s`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\mathrm{K}$:
1s$^2$ 2s$^2$ 2p$^6$ 3s$^2$ 3p$^6$ 4s,
so we fill up the 4s orbitals before the 3d orbitals.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\mathrm{Rb}$:
1s$^2$ 2s$^2$ 2p$^6$ 3s$^2$ 3p$^6$ 3d$^{10}$ 4s$^2$ 4p$^6$ 5s,
so we fill up the 5s orbitals before the 4d and 4f orbitals.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\mathrm{Cs}$:
1s$^2$ 2s$^2$ 2p$^6$ 3s$^2$ 3p$^6$ 3d$^{10}$ 4s$^2$ 4p$^6$ 4d$^{10}$ 5s$^{2}$ 5p$^6$ 6s,
so we fill up the 6s orbitals before the 4f, 5d and 5f orbitals.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`This structure can be nicely understood by the idea of screening as
introduced in the central field approximation. Consider for example the
$\\mathrm{Na}$ for which one electron has to be on the third shell.
Within the hydrogen atom the 3s, 3p and 3d are degenerate, however the
screening will lift this degeneracy.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Electrons in the s-shell spend a lot of time close to the nucleus
and fill a strong binding potential, i.e. they have a low energy.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`On the other extreme the electrons in the d-shell have large angular
momentum, which hinders them from getting close to the core. The 10
electrons can therefore efficiently screen the nucleus from the
electron. The energy of the d shell is therefore quite close to the
energy of the hydrogen atom.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"For $\\mathrm{K}$ the same principle applies."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The 4s orbital is strongly shifted down to the strong nuclear
potential.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The 3d orbital is well screened by the other electrons, such that it
is of higher energy than the 4s orbit.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:["We can describe this effect empirically through the ",a.jsx(e.em,{children:"quantum defect"}),`. We
simply write down the energy levels as:`]}),`
`,a.jsx(e.p,{children:`$$
E_{nl} \\cong -  R_{y,\\infty} \\cdot \\left( \\frac{1}{n-\\delta_l} \\right)^2,
$$`}),`
`,a.jsxs(e.p,{children:[`where $\\delta_l$ is the quantum defect for a certain
value of $l$. Some examples are summarized in Fig.
`,a.jsx(e.a,{href:"#fig-quantum-defect",children:"6"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`The effect of the quantum defect is actually so substantial that it
introduces optical transitions between the different subshells of Alkali
atoms.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"For Li there is a $2s\\rightarrow 2p$ transition at 671 nm."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"For Na there is a $3s\\rightarrow 3p$ transition at 589 nm."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"For K there is a $4s\\rightarrow 4p$ transition at 767 nm and 770nm."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For Rb there is a $5s\\rightarrow 5p$ transition at 780 nm and at
795nm.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For Cs there is a $6s\\rightarrow 6p$ transition at 852 nm and at
894nm.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`What is the origin of these doublets ? The scaling of the splitting with
the nucleus indicates relativistic origins and the splitting is indeed
due to spin-orbit coupling, which we will discuss in the next lecture.`})]})}function Dfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(F5,{...t})}):F5(t)}const H5=Object.freeze(Object.defineProperty({__proto__:null,default:Dfe,frontmatter:Nfe},Symbol.toStringTag,{value:"Module"})),Bfe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:14,title:"Lecture 14 - The spin in atoms with many electrons"};function z5(t){const e={a:"a",blockquote:"blockquote",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In the last lecture we have seen that we can typically
treat complex atomic systems within the central field approximation.`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H} = \\underbrace{\\sum_i^N \\left( \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}`,a.jsx(e.em,{children:"i} + V"}),"\\textrm{cf} (r_i) \\right)}",a.jsxs(e.em,{children:["{\\hat{H}",a.jsx(e.em,{children:"0} + \\underbrace{\\sum^N"}),"{j>i} \\left( \\frac{1}{r"]}),`{ij}} - S(r_i) \\right)}_{\\hat{H}_1}
$$`]}),`
`,a.jsx(e.p,{children:`So we we can can treat atoms through the shell structure known from the
$\\mathrm{H}$ atom, but the screening lifts the $l$ degeneracy. For a
single outer electron, we have even seen how this screening can be
described by the quantum defect.`}),`
`,a.jsx(e.p,{children:`We would now like to go beyond this simple picture and discuss the
following questions:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"How should the residual term $\\hat{H}_1$ be taken into account?"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"How do we properly take into account the Pauli principle ?"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"How can we treat the fine-splitting ?"}),`
`]}),`
`]}),`
`,a.jsx(e.h1,{children:"On the residual coupling"}),`
`,a.jsxs(e.p,{children:[`If we ignore the residual coupling, we obtain a spherically symmetric
problem, which implies that the angular momentum $\\vec{l}`,a.jsx(e.em,{children:`i$ of each
electron is conserved. This conservation will be broken by
$\\hat{H}`}),`{1}$. However, these forces are internal, which implies that
the total angular momentum $\\vec{L} = \\sum_i \\vec{l}_i$ is conserved. So
we should label the states in the complex Hamiltonian by $\\vec{L}$.`]}),`
`,a.jsx(e.p,{children:`The total angular momentum will then set the symmetry of the spatial
wavefunction. As already discussed in some detail for the He atom, this
has wide-reaching consquence on the spin degree of freedom through
exchange interaction.`}),`
`,a.jsx(e.h1,{children:"The Pauli principle and spin"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`According to the Pauli principle, each single-particle state can be
occupied only by one electron. After distributing all electrons over
different single-particle eigenstates ("orbitals"), the resulting
state needs to be fully antisymmetrized (Slater determinant).`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`There is a simplification for atoms with many electrons: The angular
momenta and spins of a complete subshell with
$n,,l,,{m_{-l},\\cdots,m_l}$ add to zero and can be ignored in
the further considerations ("shell structure"). Note that this is
often broken in molecular binding!`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`Alkali atoms are the simplest atoms with shell structure: All but
one `,a.jsx(e.em,{children:"valence"}),` electron add to $L=0,S=0$. The ground state thus has
$L=0,S=1/2$.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For more complex atoms, the valence electrons couple to a total
orbital angular momentum $L$ with a given symmetry according to
particle exchange.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Let us have a look at two examples for light atoms, starting with
$\\mathrm{He}$:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$1s^2 \\rightarrow L=0,S=0$. The corresponding term is $^1S$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$1s2s \\rightarrow L=0, {S=0,S=1}$. The corresponding terms are
$^1S$ and $^3S$. .`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"The electronic configuration of $\\mathrm{Si}$ is:"}),`
`,a.jsx(e.p,{children:`$$
\\underbrace{1s^2 2s^2 2p^6 3s^2}_{L=0,,S=0} 3p^2
$$`}),`
`,a.jsx(e.p,{children:`Per valence electron we have $l=1$ and $s=1/2$. So we
get $L=0,1,2$ and $S=0,1$. Here $S=1$ means symmetry and $S=0$
antisymmetry with respect to particle exchange. In principle we can form
the following terms:`}),`
`,a.jsx(e.p,{children:`$$
^1 S, ^3 S, ^1 P, ^3 P,^1 D,^3 D
$$`}),`
`,a.jsx(e.p,{children:`Which of these terms can be fully antisymmetrized? Here,
only the terms $^1S$, $^3P$ and $^1D$ fulfill Pauli's principle. In
general the exchange interaction (seen in the discussion of He), will
then lower the energy of the states with high spins.`}),`
`,a.jsx(e.h2,{children:"Optional: Symmetry of the $L$ states"}),`
`,a.jsx(e.p,{children:"We can construct the following $L$-states for them:"}),`
`,a.jsx(e.p,{children:`$$
\\left|L=2,M_L=2\\right\\rangle = \\left|\\overbrace{1^{l_1},\\overbrace{1}^{m_{l_1}};\\overbrace{1}^{l_2},\\overbrace{1}^{m_{l_2}}}\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
\\left|L=1,M_L=0\\right\\rangle = \\frac{1}{\\sqrt{2}} ( \\left|\\overbrace{1^{m_{l_1}},\\overbrace{-1}^{m_{l_2}}}\\right\\rangle - \\left|-1,1 )\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
\\left|L=0,M_L=0\\right\\rangle = \\frac{1}{\\sqrt{3}}(\\left|\\overbrace{1^{m_{l_1}},\\overbrace{-1}^{m_{l_2}}}\\right\\rangle - \\left|0,0\\right\\rangle + \\left|-1,1\\right\\rangle )
$$`}),`
`,a.jsx(e.p,{children:`The first and third states are symmetric and the second state is antisymmetric with respect to particle
exchange.`}),`
`,a.jsx(e.h1,{children:"Fine splitting"}),`
`,a.jsx(e.p,{children:`We have already seen in the discussion of the hydrogen atom that
relativistic effects should be taken into account to fully understand
the level spectrum of different atoms. To take into account the spin, we
can decompose the Hamiltonian as follows:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.p,{children:["\\hat{H} = \\underbrace{\\sum_i^N \\left( \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}",a.jsx(e.em,{children:"i} + V"}),"\\textrm{cf} (r_i) \\right)}",a.jsxs(e.em,{children:["{\\hat{H}",a.jsx(e.em,{children:"0} + \\underbrace{\\sum^N"}),"{j>i} \\left( \\frac{1}{r"]}),"{ij}} - S(r_i) \\right)}_{\\hat{H}_1} + \\underbrace{\\sum_i^N c_i(\\vec{r}_i) \\hat{\\vec{L}}_i \\cdot \\hat{\\vec{S}}",a.jsx(e.em,{children:"i}"}),`{\\hat{H}_2}
$$`]}),`
`,a.jsx(e.p,{children:`The term $\\hat{H}_0$ is from the central field and the
independent particle model. The Hamiltonian $\\hat{H}_1$ results from the
residual electrostatic interaction and the Hamiltonian $\\hat{H}_2$ comes
from the spin-orbit coupling of individual electrons.`}),`
`,a.jsx(e.p,{children:`The question is now which term dominates. Since
$\\hat{H}_2 \\propto (Z\\alpha)^2$, we can ignore it if $Z$ is small. This
is the case for light atoms.`}),`
`,a.jsx(e.p,{children:`For our example this means that $^3P$ is the lowest energy state.
However, the triplet state has a multiplicity. Which are these states?
There has to be an additional degree of freedom. The total electronic
angular momentum $\\hat{\\vec{J}} = \\hat{\\vec{L}} + \\hat{\\vec{S}}$ of the
atom is a conserved quantity. The basis`}),`
`,a.jsx(e.p,{children:`$$
\\left|L,S,M_\\textrm{l},M_\\textrm{s}\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`is therefore not the right basis, since $M_\\textrm{l}$
and $M_\\textrm{s}$ are not conserved because of $LS$ coupling. The
correct basis is`}),`
`,a.jsx(e.p,{children:`$$
\\left|L,S,J,M_\\textrm{j}\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`Which $J$ corresponds to the ground state? If the
outermost shell is more than half filled, the maximum $J$ value is the
ground state, otherwise, the ground state has the minimum $J$ value. In
our example, $\\mathrm{Si}$: $^3P_0$ is the ground state!`}),`
`,a.jsx(e.p,{children:`So far, we have been concerned with the "Russell-Saunders" coupling,
also known as $LS$ coupling. However, for atoms with large $Z$, the term
$\\hat{H}_2$ in the Hamiltonian might become large, since it is
proportional to $(Z \\alpha)^2$. We can ignore $\\hat{H}_1$ instead.`}),`
`,a.jsxs(e.p,{children:[`According to $\\hat{H}_2$ the individual electron orbital angular
momentum $l$ pairs with the spin $s$ of the same electron to form the
total electron angular momentum $j$. This will lead us to the concept of
$jj$ coupling. Let us consider carbon first (see
`,a.jsx(e.a,{href:"#693186",children:"1"}),`{reference-type="ref" reference="693186"}). The ground state
reads:`]}),`
`,a.jsx(e.p,{children:`$$
\\mathrm{C}: 1s^22s^22p^2.
$$`}),`
`,a.jsx(e.p,{children:"Let us consider one excited state:"}),`
`,a.jsx(e.p,{children:`$$
1s^22s^22p3s.
$$`}),`
`,`
`,a.jsxs(e.p,{children:[`In the figure above "The splitting of levels in the first excited $^1$ P and $^3$P terms of
the carbon sequence. As $Z$ increases, the two electrons change their
character from being in an $LS$ coupled state to a $jj$ coupled state."
It is taken from `,"Bransden","."]}),`
`,a.jsx(e.p,{children:`According to $LS$ coupling the total angular momentum of the two valence
electrons is $L=1$ and the total spin can be $S=0,1$. Thus, we should
expect a singlet and a triplet. For heavy atoms we can observe two
doublets instead of a singlet and a triplet. Because of the very strong
$\\hat{\\vec{L}}_i \\cdot \\hat{\\vec{S}}_i$ coupling, $\\hat{\\vec{L}}$ and
$\\hat{\\vec{S}}$ are no longer conserved quantities. On the contrary,
$\\hat{\\vec{J}}$ still is a conserved quantity. In very heavy atoms,
$l_i$ and $s_i$ couple to $j_i$ for each electron $i$. In our example we
get`}),`
`,a.jsx(e.p,{children:`$$
l_1=0, s_1=\\frac{1}{2} \\qquad \\text{and} \\qquad l_2=1, s_2=\\frac{1}{2}
$$`}),`
`,a.jsx(e.p,{children:"for electron $1$ and $2$ and thus"}),`
`,a.jsx(e.p,{children:`$$
j_1=\\frac{1}{2} \\qquad \\text{and}\\qquad j_2=\\frac{1}{2},\\frac{3}{2}.
$$`}),`
`,a.jsx(e.p,{children:`The individual $j_i$ couple to a total orbital angular
momentum $J$ in the following manner:`}),`
`,a.jsx(e.p,{children:`$$
J= \\left{ \\begin{array}{ccc}0,1 & \\text{for} & (j_1,j_2)=\\left(\\frac{1}{2},\\frac{1}{2}\\right)\\ && \\ 1,2 & \\text{for} &(j_1,j_2) = \\left(\\frac{1}{2}, \\frac{3}{2}\\right) \\end{array} \\right.
$$`}),`
`,a.jsx(e.h1,{children:"Hyperfine splitting"}),`
`,a.jsx(e.p,{children:"Until now we have investigated the structure of the atom depending on:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The orbital angular momentum $\\vec{L}$, which defines the shells."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The total electronic angular momentum $\\vec{J} = \\vec{L} + \\vec{S}$,
which defines the fine structure because of the spin-orbit coupling.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Further the nucleus has a spin angular momentum $\\vec{I}$, which leads
to a magnetic moment:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{\\mu}_I= g_I \\mu_N \\vec{I}
$$`}),`
`,a.jsx(e.p,{children:"We have introduced the new constants:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$g_I$, which is always in the order of one, but it changes due to
the changing structure of the different nuclei.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"nuclear magneton"}),`
$\\mu_N = \\frac{e\\hbar}{2m_p}= \\frac{m_e}{m_p}\\mu_B$.`]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`From the values of the prefactors, we can immediatly deduce that the
hyperfine structure will be roughly three orders of magnitude smaller
than the fine structure. As with the spin-orbit coupling this nuclear
spin will experience the magnetic field produced by the motion of the
electrons $\\vec{B}_{el}$ and we have:`}),`
`,a.jsxs(e.p,{children:[`$$
H_{hfs} = -\\vec{\\mu}`,a.jsx(e.em,{children:"I \\cdot \\vec{B}"}),`{el}\\
= A_{hfs}\\vec{I}\\vec{J}
$$`]}),`
`,a.jsx(e.p,{children:`This couples $\\vec{I}$ and $\\vec{J}$ and the full
structure is given by total angular momentum:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{F} = \\vec{J} + \\vec{I}
$$`}),`
`,a.jsx(e.h2,{children:"Hydrogen"}),`
`,a.jsx(e.p,{children:`In hydrogen the ground state has no angular momentum and the spin is
simply $S=1/2$. The nucleus has the same, such that we have $I=1/2$ and
the groundstate splits into the $F=0$ and the $F=1$ doublet. They are
separated by an energy difference of $1.42$GHz. This corresponds to a
transition wavelength of 21 cm, which is widely used in astronomy.`}),`
`,a.jsx(e.h2,{children:"Cesium clocks"}),`
`,a.jsxs(e.p,{children:[`The definition of time is based the hyperfine levels of Cs. Cs has just
one stable isotope Cs-133 with nuclear spin $I=7/2$. The ground state
electron is in the the 6s state in the $^2 S_{1/2}$ state. So the
groundstate splits into the $F=3$ and $F=4$ manifold. They are separated
by 9.4GHz and the clicking between these transitions is our definition
of time. The second is actually `,a.jsx(e.a,{href:"https://www.physics.nist.gov/cuu/Units/current.html",children:"defined as"}),":"]}),`
`,a.jsxs(e.blockquote,{children:[`
`,a.jsx(e.p,{children:`The second is the duration of 9 192 631 770 periods of the radiation
corresponding to the transition between the two hyperfine levels of
the ground state of the cesium 133 atom.`}),`
`]}),`
`,a.jsx(e.p,{children:`All the other units have similiar definitions, except the embarrising
kilogram. It is defined as:`}),`
`,a.jsxs(e.blockquote,{children:[`
`,a.jsx(e.p,{children:`The kilogram is the unit of mass; it is equal to the mass of the
international prototype of the kilogram.`}),`
`]}),`
`,a.jsxs(e.p,{children:["This will change soon as the member states of ",a.jsx(e.em,{children:`Bureau International des
Poids et des Mesures`}),` decided to base the SI system on the measurement
of fundamental constants instead of some prototypes. So, now the
fundamental constants will have no errorbars left, as shown in Fig.
`,a.jsx(e.a,{href:"#fig-si-units",children:"2"}),"."]}),`
`,`
`,a.jsx(e.h2,{children:"Bosonic and fermionic isotopes"}),`
`,a.jsx(e.p,{children:`A particularly interesting problem is the influence of the nuclear spin
on how the atoms talk to each other. For example we have two different
stable isotope of Li, namely Li $^6$ and Li$^7$, which only differ by one
neutron in the nucleus. All the wavelengths for controlling the atoms
are extremely similiar, however the hyperfine structure is different.
For Li$^6$ we have a nuclear spin of $I=1$ and for Li$^7$ $I=3/2$. The
resulting total angular momentum`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$F=1/2$ in the ground state of Li$^6$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$F=1$ in the ground state of Li$^7$"}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`So one is of them is an integer spin boson and the other one is a spin
half fermion. One can nicely see these differences as one tries to put
them onto each other for cold temperatures and tight traps as visualized
in the Figure below and reproduced from `,a.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.1059318",children:"Truscott 2001"}),"."]})]})}function Pfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(z5,{...t})}):z5(t)}const q5=Object.freeze(Object.defineProperty({__proto__:null,default:Pfe,frontmatter:Bfe},Symbol.toStringTag,{value:"Module"})),Ffe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:15,title:"Lecture 15 - Diatomic molecules"};function W5(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will start to put atoms together to build simple
molecules. We will first use the Born-Oppenheimer approximation, to
eliminate slow processes from the study of the fast electron dynamics.
Then, we will study simple mechanisms of binding atoms.`}),`
`,a.jsx(e.h1,{children:"Introduction"}),`
`,a.jsx(e.p,{children:`Molecules add a new layer of complexity to the system. In atoms, we had
different combinations of nuclei and electrons, leading to different
kinds of atoms. In this lecture, we will use atoms as basic building
block of more complex structures, the molecules. While this complexity
makes it necessary to introduce new approximations, it also allows us to
study new processes in nature.`}),`
`,a.jsxs(e.p,{children:[`So we will start out with the simplest of all molecules, barely a
molecule, the $H_2^+$ ion. We start out with a discussion of the
Born-Oppenheimer approximation. Detailled discussions can be found in
`,a.jsx(e.a,{href:"https://books.google.de/books?id=9KEPAQAAMAAJ",children:"Chapter 8 of Atkins"}),", ",a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Chapter 9 of Demtröder"}),` and
`,a.jsx(e.a,{href:"https://books.google.de/books?id=i5IPWXDQlcIC",children:"Chapter 10 of Bransden"}),"."]}),`
`,a.jsx(e.h1,{children:"Molecular hydrogen ion"}),`
`,a.jsxs(e.p,{children:[`In molecular hydrogen we have only three ingredients. A single electron,
which is bound to two nuclei as shown in Fig.
`,a.jsx(e.a,{href:"#fig-hydrogen-ion",children:"1"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"The full Hamiltonian of the system at study would read:"}),`
`,a.jsxs(e.p,{children:["$$\\hat{H} = - \\frac{1}{2}\\nabla_\\mathbf{r}^2 - \\frac{1}{2M}\\left(\\nabla_{\\mathbf{R}",a.jsx(e.em,{children:"\\mathrm{A}}^2 +\\nabla"}),"{\\mathbf{R}",a.jsx(e.em,{children:"\\mathrm{B}}^2\\right) + V(\\mathbf{r}, \\mathbf{R}"}),`\\mathrm{A}, \\mathbf{R}_\\mathrm{B})$$
We will further introduce the short-hand notations:`]}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{T}`,a.jsx(e.em,{children:"e = - \\frac{1}{2}\\nabla"}),`\\mathbf{r}^2 \\
\\hat{T}`,a.jsx(e.em,{children:"n = - \\frac{1}{2M}\\left(\\nabla"}),"{\\mathbf{R}",a.jsx(e.em,{children:"\\mathrm{A}}^2 +\\nabla"}),`{\\mathbf{R}_\\mathrm{B}}^2\\right)
$$`]}),`
`,a.jsx(e.p,{children:`In a stark difference to atoms, we now have two charged nuclei. The
relative distance between them and between the electron will be of major
importance. Most importantly, we should answer the question, why this
configuration should be stable at all given that the two protons repel
each other. To handle the problem, we will once again separate out
energy scales.`}),`
`,a.jsx(e.h2,{children:"The Born-Oppenheimer approximation"}),`
`,a.jsxs(e.p,{children:["The idea of the ",a.jsx(e.strong,{children:"Born-Oppenheimer approximation"}),` is to separate the
fast electronic motion from the slow motion of the heavy nuclueus
($M=1836$). So we will`]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Solve the electronic motion with the nuclear coordinates fixed."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Solve the nuclear motion, assuming that the electron wavefunction
adapts instantaneously.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`So the ansatz is:
$$\\Psi(\\mathbf{R}`,a.jsx(e.em,{children:"\\mathrm{A}, \\mathbf{R}"}),"\\mathrm{B}, \\mathbf{r}) = \\psi_e(\\mathbf{R}",a.jsx(e.em,{children:"\\mathrm{A}, \\mathbf{R}"}),"\\mathrm{B}, \\mathbf{r})\\cdot \\psi_n(\\mathbf{R}",a.jsx(e.em,{children:"\\mathrm{A}, \\mathbf{R}"}),"\\mathrm{B})$$"]}),`
`,a.jsxs(e.p,{children:[`We will plug this into the Schrödinger equation to obtain:
$$\\psi_n\\hat{T}`,a.jsxs(e.em,{children:["e\\psi_e +\\psi_e\\hat{T}",a.jsx(e.em,{children:"n\\psi_n + V(\\mathbf{r}, \\mathbf{R}"}),"\\mathrm{A}, \\mathbf{R}"]}),"\\mathrm{B})\\psi_e \\psi_n + W = E \\psi_e\\psi_n$$"]}),`
`,a.jsxs(e.p,{children:["This transformation introduced the ",a.jsx(e.em,{children:"non-adiabatic"}),` effects:
$$W = -\\frac{1}{2M}\\sum_{i=A,B} \\left[(\\nabla_{\\mathbf{R}`,a.jsx(e.em,{children:"i}\\psi_e)\\cdot(\\nabla"}),"{\\mathbf{R}",a.jsx(e.em,{children:"i}\\psi_n)+\\psi_n \\nabla"}),"{\\mathbf{R}_i}^2 \\psi_e\\right]$$"]}),`
`,a.jsxs(e.p,{children:[`In the following we will neglect these effects. And obtain:
$$\\psi_e \\hat{T}_n\\psi_n + \\left(\\hat{T}`,a.jsxs(e.em,{children:[`e\\psi_e+V\\psi_e\\right)\\psi_n = E \\psi_e\\psi_n$$
So we will first solve the `,a.jsx(e.em,{children:"electronic motion"}),`:
$$\\left(\\hat{T}`,a.jsx(e.em,{children:"e+\\hat{V}\\right)\\psi_e = E_e(\\mathbf{R}"}),"\\mathrm{A}, \\mathbf{R}"]}),`\\mathrm{B}) \\psi_e$$
To be explicit we obtain for the ionic hydrogen:`]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`H_e = -\\frac{1}{2} \\nabla_\\mathbf{r}^2-\\frac{1}{r_A}-\\frac{1}{r_B}+\\frac{1}{R}
$$`}),`
`,a.jsx(e.p,{children:`At this stage we can just focus on the electronic part to understand the
structure of simple diatomic molecules, while assuming that $R$ is an
independent parameter. Most importantly, we will focus at usual on
symmetries, which will tell us more about the allowed states in the
system.`}),`
`,a.jsx(e.p,{children:`In the second step we will solve the nuclear motion:
$$\\hat{T}_n\\psi_n + E_e \\psi_n = E \\psi_n$$`}),`
`,a.jsx(e.p,{children:`This nuclear motion will be at the origin of rotational and vibrational
levels, which will be discussed in on of the next lectures.`}),`
`,a.jsx(e.h1,{children:"Symmetries of the electronic wavefunction"}),`
`,a.jsx(e.p,{children:`This discussion follows along similiar lines as for the hydrogen atom
and the helium atom. We basically can categorize the different states by
their properties. This will help us later enormously to understand
allowed transition etc.`}),`
`,a.jsx(e.h2,{children:"Angular momentum"}),`
`,a.jsx(e.p,{children:`For any (diatomic) molecule we break the spherical symmetry that we
relied on for the atomic systems. This means that angular momentum is
not a conserved quantity anymore.`}),`
`,a.jsx(e.p,{children:`However, the full Hamiltonian is invariant under the rotation around the
axis of the diatomic molecule. One can verify that this implies that:`}),`
`,a.jsx(e.p,{children:`$$
[H_e, L_z] = 0\\
\\Rightarrow L_z \\psi_e = \\pm \\Lambda \\psi_e (a.u.)
$$`}),`
`,a.jsxs(e.p,{children:[`The reason is that
$\\hat{L}`,a.jsx(e.em,{children:"z =\\frac{1}{i}\\partial"}),`\\varphi$ depends solely on the angle
$\\varphi$ and not on $R$. Here the quantum number can have the integer
values $\\Lambda= 0, 1, 2 , \\cdots$. We also note them
$\\Sigma, \\Pi, \\Delta, \\Phi$ or $\\sigma, \\pi, \\delta, \\phi$ for single
electrons.`]}),`
`,a.jsx(e.h2,{children:"Parity"}),`
`,a.jsxs(e.p,{children:["We further have symmetry under parity operation for ",a.jsx(e.em,{children:`homo-nuclear,
diatomic`}),` molecules $A_2$. This means that we have once more:
$$\\hat{P}\\psi_e(\\mathbf{r}) = \\pm\\psi_e(\\mathbf{r})$$ In the same way as
in the lecture on the Helium atom we distinguish the states by `,a.jsx(e.em,{children:"gerade"}),`
and `,a.jsx(e.em,{children:"ungerade"}),`. So we then end up with something like
$\\Lambda_{u,g}^\\pm$.`]}),`
`,a.jsx(e.h2,{children:"Spin"}),`
`,a.jsxs(e.p,{children:[`If the system does not have explicit spin-orbit coupling, the total spin
$S$ of the system will be conserved. So the full notation for electronic
states is typically: $$^{2S+1}\\Lambda^{\\pm}`,a.jsx(e.em,{children:`{g,u}$$ Most of the time the
ground state of the system is $^{1}\\Sigma^{+}`}),"{g}$."]}),`
`,a.jsx(e.h1,{children:"Stability of the ground state molecule"}),`
`,a.jsxs(e.p,{children:[`We have now studied the symmetries that the system should have, but
until now we did not discuss the most important question: Is this
molecule stable ? Within the Born-Oppenheimer approximation, we can
actually solve the ionic hydrogen molecule analytically (see `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:`Chapter 9 of
Demtröder`}),"). The resulting ",a.jsx(e.strong,{children:"molecular potential curves"}),` are
shown in Fig. `,a.jsx(e.a,{href:"#fig-potentials",children:"2"}),"."]}),`
`,`
`,a.jsx(e.h2,{children:"Linear combination of atomic orbitals"}),`
`,a.jsxs(e.p,{children:[`The analytical solutions are rather bulky and not particularly
instructive. One powerful idea, and very good approximation, is to
decompose the molecule wavefunction over the atomic orbitals of its
components. Going back to Fig. `,a.jsx(e.a,{href:"#fig-hydrogen-ion",children:"1"}),` we could make the simple Ansatz:
$$\\psi_e(\\mathbf{r})= c_1 \\psi_{1s}(\\mathbf{r}`,a.jsx(e.em,{children:"\\mathrm{A})+c_2 \\psi"}),"{1s}(\\mathbf{r}_\\mathrm{B})$$"]}),`
`,a.jsx(e.p,{children:`Note, that we made a very simple Ansatz at this stage and we could
decompose the system over a much larger set of excited states. But for
pedagogical reason we will stick to the simple model at this stage.
Going through the symmetry requirements, we find that we can write the
full wavefunction as:`}),`
`,a.jsxs(e.p,{children:[`$$
\\psi_{g,u}(\\mathbf{r})= \\frac{1}{\\sqrt{2\\pm2S}}\\left(\\psi_{1s}(\\mathbf{r}`,a.jsx(e.em,{children:"\\mathrm{A})\\pm \\psi"}),`{1s}(\\mathbf{r}_\\mathrm{B})\\right)
$$`]}),`
`,a.jsxs(e.p,{children:[`The contribution $S$ describes the overlap of the two atomic orbitals
$$S =  \\int d\\mathbf{r}\\psi_{1s}^*(\\mathbf{r}`,a.jsx(e.em,{children:"\\mathrm{A})\\psi"}),`{1s}(\\mathbf{r}_\\mathrm{B})$$
We can then evaluate the energy of the two states through the
variational principle:`]}),`
`,a.jsxs(e.p,{children:[`$$
E_{g,u} = \\left\\langle\\psi_{g,u}\\right|\\hat{H}`,a.jsx(e.em,{children:"e\\left|\\psi"}),`{g,u}\\right\\rangle\\
= \\frac{1}{2\\pm2S}\\left(\\left\\langle\\psi_A\\right|\\pm \\left\\langle\\psi_B\\right|\\right)\\hat{H}`,a.jsx(e.em,{children:`e\\left(\\left|\\psi_A\\right\\rangle\\pm \\left|\\psi_B\\right\\rangle\\right)\\
= \\frac{E`}),`{AA}\\pm E_{AB}}{1\\pm S}\\
$$`]}),`
`,a.jsxs(e.p,{children:["The resulting energy surfaces are shown in Fig. ",a.jsx(e.a,{href:"#fig-lcao",children:"3"}),`. In the most
simplistic interpretation the gerade state does not have a node in the
middle and it is therefore of smaller kinetic energy.`]}),`
`,`
`,a.jsx(e.h1,{children:"The neutral hydrogen molecule"}),`
`,a.jsx(e.p,{children:`In the previous section we have seen how we can treat the coupling of
the nuclei through the exchange of a single shared electron. However, we
should now move on to the case of two neutral particles binding
together. What is here the relevant mechanism ?`}),`
`,`
`,a.jsx(e.p,{children:`In the following we will only consider the electronic part, which adds
up too:`}),`
`,a.jsxs(e.p,{children:["$$\\hat{H} = -\\frac{1}{2}\\left(\\nabla_{\\mathbf{r}",a.jsx(e.em,{children:"1}^2+\\nabla"}),"{\\mathbf{r}",a.jsx(e.em,{children:"2}^2\\right)-\\frac{1}{r"}),"{A1}}-\\frac{1}{r_{A2}}-\\frac{1}{r_{B1}}-\\frac{1}{r_{B2}}+\\frac{1}{r_{12}}+\\frac{1}{R}$$"]}),`
`,a.jsx(e.p,{children:"We can now rewrite this Hamiltonian in the more instructive form"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.p,{children:[`\\hat{H} = H_{0,1}+H_{0,2}+\\frac{1}{r_{12}}+\\frac{1}{R}\\
H_{0,i} = -\\frac{1}{2}\\nabla_{\\mathbf{r}`,a.jsx(e.em,{children:"i}^2-\\frac{1}{r"}),"{A,i}}-\\frac{1}{r_{B,i}}"]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`We have can now use the results of the hydrogen ion to understand this
system.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We have for each electron the solution of hydrogen molecule ion."}),`
`,a.jsxs(e.li,{children:[`In the next step, we have to put the two electrons properly within
this orbit with $S=0$ and `,a.jsx(e.em,{children:"ignoring"})," the $e^-$ - $e^-$ interaction."]}),`
`]}),`
`,a.jsx(e.p,{children:"So we can make the Ansatz:"}),`
`,a.jsxs(e.p,{children:[`$$
\\psi(\\mathbf{r}`,a.jsxs(e.em,{children:["1, \\mathbf{r}",a.jsx(e.em,{children:"2) = \\psi"}),"{g}(\\mathbf{r}",a.jsx(e.em,{children:"1)\\cdot\\psi"}),"{g}(\\mathbf{r}",a.jsx(e.em,{children:`2)\\
= \\frac{1}{2 + 2S}\\left(\\psi`}),"{1s}(\\mathbf{r}"]}),"{A1})+\\psi_{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B1})\\right)\\left(\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A2})+\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:`{B2})\\right)\\
= \\frac{1}{2 + 2S}\\left(\\psi`}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A1})\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B2})+\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B1})\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A2}) +\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A1})\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A2})+\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B1})\\psi"}),`{1s}(\\mathbf{r}_{B2}) \\right)
$$`]}),`
`,a.jsxs(e.p,{children:["The first two terms describe ",a.jsx(e.strong,{children:"kovalent binding"}),`. They
describe situations where each electron is associated with one core. The
last two terms describe `,a.jsx(e.strong,{children:"ionic binding"}),` as one associated both
electrons with a single atom and then looks one the attraction of
another ionic core. This is quite similiar to the interaction in the
$H_2^+$ molecule.`]}),`
`,a.jsx(e.p,{children:`Within this approach, one actually finds a binding energy of
$E_b = {-2.64}\\text{eV}$ at an equilibrium distance of $R_e = 1.4 a_0$.
The experimentally measured values differs quite substantially as we
have $E_b = {-4.7}\\text{eV}$. A substantial approximation was here that we
neglected the interaction between the electrons, which should repel.`}),`
`,a.jsx(e.h2,{children:"The Heitler-London method"}),`
`,a.jsx(e.p,{children:`As the two electrons should repel each other, we can assume that the
ionic binding is strongly suppressed. So the wavefunction is now assumed
to be:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.p,{children:["\\psi_{HL} = \\frac{1}{\\sqrt{2 + 2S^2}}\\left(\\psi_{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{A1})\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B2})+\\psi"}),"{1s}(\\mathbf{r}",a.jsx(e.em,{children:"{B1})\\psi"}),`{1s}(\\mathbf{r}_{A2})\\right)
$$`]}),`
`,a.jsx(e.p,{children:`Again, the wavefunction cannot be factorized and the two
electrons are entangled because of the interactions. Recognize the
common theme with the Helium atom. Calculation of the binding energy
within this approximation leads to $E_b = {-3.14}\\text{eV}$ and
$R_e=1.6a_0$.`}),`
`,a.jsx(e.p,{children:`In the next lecture we will discuss how we can move on
from these extremely simple diatomic molecules to the assembly of richer
systems.`})]})}function Hfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(W5,{...t})}):W5(t)}const U5=Object.freeze(Object.defineProperty({__proto__:null,default:Hfe,frontmatter:Ffe},Symbol.toStringTag,{value:"Module"})),zfe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:16,title:"Lecture 16 - Molecular Orbitals of Diatomic Molecules"};function V5(t){const e={a:"a",del:"del",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will discuss a systematic approach to build up
molecules from more complex atoms.`}),`
`,a.jsx(e.p,{children:`In the last lecture we discussed the existing orbits within
the linear combination of orbitals. We will now try to systematically
fill up the orbitals with electrons in order of their energy.`}),`
`,a.jsx(e.h1,{children:"Molecular bindings"}),`
`,a.jsxs(e.p,{children:[`A good overview over the different mechanism for molecular binding is
given in Fig. `,a.jsx(e.a,{href:"#fig-hydrogen-overview",children:"1"}),`. In
the last lecture we have seen two different binding processes of
molecular bonding:`]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Ionic binding, which was important in the $H_2^+$ molecule."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Kovalent binding, which dominated the $H_2$ molecule."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Both are important for small distances. For large distance the van der
Waals interaction can create weakly bound molecules.`}),`
`,`
`,a.jsx(e.h1,{children:"Van-der Vaals interaction"}),`
`,a.jsx(e.p,{children:`The question is then how can these systems interact ? They do not share
electrons and they are neutral, so they do not have a permanent electric
dipole moment. The magnetic dipole interaction is extremely weak anyway.`}),`
`,a.jsx(e.p,{children:`The key is induced dipole moment of the atom in in an electric field,
seen in lecture 6. Each of the atoms can have a dipole
moment $\\mathbf{D}_i = q \\mathbf{r}_i$. As each atom is neutral, they
interact through their dipole-dipole interaction:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{W}_{dd} =\\frac{1}{4\\pi \\epsilon_0}\\frac{e^2}{R^3}\\left(\\mathbf{r}_A\\cdot \\mathbf{r}_B-3(\\mathbf{r}_A\\cdot \\mathbf{n})(\\mathbf{r}_B\\cdot \\mathbf{n})\\right)
$$`}),`
`,a.jsxs(e.p,{children:[`We now have to perform the amplitude of this energy
quantum mechanically. In a first step, we express $\\hat{W}`,a.jsx(e.em,{children:`{dd}$ in
terms of the operators $\\hat{X}`}),"{A,B}, \\hat{Y}",a.jsx(e.em,{children:"{A,B}, \\hat{Z}"}),`{A,B}$.
The orientation of the atom is sketched in the inset in Fig.
`,a.jsx(e.a,{href:"#fig-two-atoms",children:"2"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"We can write then:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{W}_{dd} =\\frac{1}{4\\pi \\epsilon_0}\\frac{e^2}{R^3}\\left(\\hat{X}_A \\hat{X}_B + \\hat{Y}_A\\hat{Y}_B - 2 \\hat{Z}_A \\hat{Z}_B\\right)
$$`}),`
`,a.jsx(e.p,{children:`We are only interested in their interaction at very large distances,
such that we can treat the interaction perturbatively (see lecture 7). To first order, we have to evaluate:`}),`
`,a.jsxs(e.p,{children:[`$$
E_1 = \\left\\langle\\phi_{n,0,0^A, \\phi_{n,0,0}^B}\\right| \\hat{W}`,a.jsx(e.em,{children:`{dd}
\\left|\\phi`}),`{n,0,0^A, \\phi_{n,0,0}^B}\\right\\rangle
$$`]}),`
`,a.jsxs(e.p,{children:[`It only contains terms of the kind
$\\left\\langle\\phi_{n,0,0^i}\\right| \\hat{X}`,a.jsx(e.em,{children:"i \\left|\\phi"}),`{n,0,0^i}\\right\\rangle$.
As the dipole moment is zero, the first order correction in the energy
is zero too. The idea is then that the mean electric field created by
the atom might be zero. However, quantum mechanics allows for
fluctuations of the type $\\langle |e\\mathbf{r}|^2\\rangle$. They are
taken into account through second order perturbation theory. We obtain
directly:`]}),`
`,a.jsxs(e.p,{children:[`$$
E_2 = \\sum_{\\phi,\\phi'} \\frac{|\\left\\langle\\psi_{\\phi^A,\\psi_{\\phi'}^B}\\right|\\hat{W}`,a.jsx(e.em,{children:"{dd}\\left|\\psi"}),`{0^A,\\psi_{0}^B}\\right\\rangle|^2}{(E_{0}^A+E_0^B -E_\\phi^A -E_{\\phi'}^B)}
$$`]}),`
`,a.jsxs(e.p,{children:[`And we can also pull out the $R^3$ dependence of each
$W$, to obtain a general expression for the `,a.jsx(e.strong,{children:`van-der-Waals
interaction`}),":"]}),`
`,a.jsx(e.p,{children:`$$
E_2 = - \\frac{C_6}{R^6}
$$`}),`
`,a.jsx(e.p,{children:`To get an estimate for the typical scale of the binding we can have a
look into the prefactor $C_6$. We will do this here for highly excited
states of hydrogen as it is relevant to the other alkalis too:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Each $\\hat{X}$ will be be proportional to the typical extension of
its orbit, such that we have $\\hat{X} \\sim n^2 a_0$ within the
electronic shells.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`As for the energy difference, we know that the energy of high $n$
$E_n \\approx \\frac{ R_{y,\\infty}}{n^2}$ (the screening makes all
alkalis look very similiar for high energies). The energy difference
is therefore in the order of
$\\delta E_n \\approx \\frac{ R_{y,\\infty}}{n^3}$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"Putting it all together, we obtain"}),`
`,a.jsx(e.p,{children:`$$
C_6 \\approx \\frac{e^4 a_0^4 n^8}{R_{y,\\infty}/n^3} \\approx \\frac{e^4 a_0^4}{R_{y,\\infty} (4\\pi\\epsilon_0)^2} n^{11}
$$`}),`
`,a.jsxs(e.p,{children:["This prediction has been directly tested as shown in Fig. ",a.jsx(e.a,{href:"#fig-beguin",children:"3"}),"."]}),`
`,`
`,a.jsx(e.h1,{children:"Molecular orbit theory"}),`
`,a.jsx(e.p,{children:`We would like to put together more complex molecules step-by-step. Let's
take a step back to the hydrogen molecule to formulate the problem.`}),`
`,a.jsx(e.h2,{children:"The hydrogen molecule"}),`
`,a.jsxs(e.p,{children:["Let us have a brief look at H",a.jsx(e.del,{children:"2"}),` again and consider only contributions
from $1s$ atomic orbitals. We saw that we can distribute the two
electrons within the gerade and ungerade orbital of the hydrogen ion. So
our basic orbitals will be:`]}),`
`,a.jsxs(e.p,{children:[`$$
\\sigma_g \\propto \\left( \\psi_{1s} (\\vec{r}`,a.jsx(e.em,{children:"\\textrm{a}) + \\psi"}),`{1s} (\\vec{r}_\\textrm{b}) \\right)
$$`]}),`
`,a.jsxs(e.p,{children:[`$$
\\sigma_u \\propto \\left( \\psi_{1s} (\\vec{r}`,a.jsx(e.em,{children:"\\textrm{a}) - \\psi"}),`{1s} (\\vec{r}_\\textrm{b}) \\right).
$$`]}),`
`,a.jsx(e.p,{children:`Lower case letters stand for the individual electrons
while upper case letters characterize the whole system. We will now
attempt to fill up the two orbitals with the two electrons:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Both electrons in a gerade orbital $1\\sigma_g^{2}$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Both electrons in an ungerade orbital $1\\sigma_u^{2}$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`One electron in a gerade orbtial and one electron in an ungerade
orbital: $\\sigma_g^{1}1\\sigma_u^{1}$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`In a second step, we need to respect the Pauli principle for the two
electrons, which states that the full wavefunction should be
anti-symmetric under exchange of particles. We had a detailled
discussion of the topic on helium. So for the first
configuration $1\\sigma_g^{2}$ we have:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_1 \\propto \\sigma_g(1) \\cdot \\sigma_g(2) \\qquad (S=0, ^1\\Sigma_g)
$$`}),`
`,a.jsx(e.p,{children:`The spin has to be in a singlet here as the wavefunction
itself is symmetric. Further, the parity of the full wavefunction is
gerade as $g \\times g = g$. So $\\psi_1$ is in a $^1\\Sigma_g$
configuration.`}),`
`,a.jsx(e.p,{children:`As one atom is in $1\\sigma_g^{1}$ and the other one is in
$1\\sigma_u^{1}$, the parity of the full wavefunction is $g\\times u = u$.
Additionally, we can choose which atom to position in which orbital and
then also the symmetry of the superposition. The symmetric superposition
is:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_{2} \\propto \\left (\\sigma_g(1) \\cdot \\sigma_u(2) + \\sigma_u(1) \\cdot \\sigma_u(2)\\right) \\quad \\qquad (S=0, ^1\\Sigma_u)
$$`}),`
`,a.jsx(e.p,{children:`As the orbital superposition is symmetric, we once again
have work in a spin singlet to achieve the overall anti-symmetry of the
two-electron wavefunction. So $\\psi_2$ is in a $^1\\Sigma_u$
configuration.`}),`
`,a.jsx(e.p,{children:`We can also choose anti-symmetric superposition of the two
distinguishable orbitals:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_3 \\propto \\left( \\sigma_g(1)\\cdot \\sigma_u(2)-\\sigma_u(1) \\cdot \\sigma_g(2) \\right) \\qquad (S=1, ^3\\Sigma_u)
$$`}),`
`,a.jsx(e.p,{children:`As the orbital superposition is anti-symmetric, we have
work in a spin triplet to achieve the overall anti-symmetry of the
two-electron wavefunction. So $\\psi_3$ is in a $^3\\Sigma_u$
configuration.`}),`
`,a.jsx(e.p,{children:"And finally we have for $1\\sigma_u^{2}$:"}),`
`,a.jsx(e.p,{children:`$$
\\psi_4 \\propto \\sigma_u(1)\\cdot \\sigma_u(2) \\qquad (S=0, ^1\\Sigma_g)
$$`}),`
`,a.jsx(e.p,{children:`The spin has to be in a singlet here as the wavefunction
itself is symmetric. Further, the parity of the full wavefunction is
gerade as $u \\times u = g$. So $\\psi_4$ is in a $^1\\Sigma_g$
configuration.`}),`
`,a.jsx(e.p,{children:`At short distance the energy ordering is
$E(\\psi_1) < E(\\psi_2) \\sim E(\\psi_3) < E(\\psi_4)$.`}),`
`,`
`,a.jsxs(e.p,{children:[`In the figure above the faded lines indicate how the energy
of $\\psi_1$ and $\\psi_4$ would naively. If the system is diagonalized in
a more flexible basis, that allows for superpositions, the orbits repel.
Taken from `,a.jsx(e.a,{href:"https://global.oup.com/academic/product/molecular-quantum-mechanics-9780199541423",children:"here"}),"."]}),`
`,a.jsx(e.p,{children:`However for larger distances the gerade or ungerade character of each
wave function becomes of less importance and the two configurations
$\\psi_1$ and $\\psi_4$ become of similiar energy. They are further both
$^1\\Sigma_g$ states. Therefore also all linear combinations of the two
states have the valid symmetries and and more flexibel trial solution
would be of the form:`}),`
`,a.jsx(e.p,{children:`$$
c_1 \\psi_1 + c_4 \\psi_4
$$`}),`
`,a.jsx(e.p,{children:`The full solution then shows clear level repulsion
between the two uncoupled channels. This concept is called
"configuration interaction".`}),`
`,a.jsx(e.h2,{children:"Conditions for (anti-)binding of particular orbitals."}),`
`,a.jsxs(e.p,{children:[`The conditions for the creating of (anti-)binding orbitals is viusalized
in Fig `,a.jsx(e.a,{href:"#fig-binding",children:"5"}),"."]}),`
`,a.jsx(e.p,{children:`In a first step, there has to be sufficient wave function overlap, such
that there can be constructive and destructive interference. This
implies that the orbit has to be large enough to 'see' the other atom,
but not to diffuse. This typically implies that only the valence shell
has to be considered.`}),`
`,a.jsxs(e.p,{children:[`Only orbits of the same symmetry group can form a bond. The main
symmetry property here is the total $L_z$ with respect to the axis of
the molecule. We have `,a.jsx(e.a,{href:"https://global.oup.com/academic/product/molecular-quantum-mechanics-9780199541423",children:"table 4.5 of Demtröder_2010"}),":"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$s$, $p_z$ and $d_{z^2}$ have $L_z = 0$ ($\\Sigma$)."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$p_x$, $p_y$ as well as $d_{yz}$, $d_{zx}$ have $|L_z| = 1$($\\Pi$)"}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Having a sufficient overlap is obviously not enough, the two orbits also
have to have the same a similiar energy, which is easily fulfilled in a
homonuclear molecule. But if we now have two different molecules the
orbital energy of (A) might be different from the orbital energy of (B).
The larger the difference, the smaller is the shift.`}),`
`,`
`,a.jsx(e.h1,{children:"Homo-nuclear shell structure"}),`
`,a.jsxs(e.p,{children:[`We can finally put all this together to build up the shell structure of
homo-cuclear diatomic molecules as shown in Fig.
`,a.jsx(e.a,{href:"#fig-homo",children:"6"}),"."]}),`
`,`
`,a.jsxs(e.p,{children:[`The name of the molecule indicates the highest occupied molecular orbit
(`,a.jsx(e.em,{children:"HOMO"}),`). The next empty shell is then called the lowest occupied
molecular orbit (`,a.jsx(e.em,{children:"LUMO"}),")."]})]})}function qfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(V5,{...t})}):V5(t)}const Y5=Object.freeze(Object.defineProperty({__proto__:null,default:qfe,frontmatter:zfe},Symbol.toStringTag,{value:"Module"})),Wfe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:18,title:"Lecture 18 - Quantization of the Electromagnetic field"};function G5(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We are looking into the quantization of the electromagnetic field. How
to find the conjugate momenta and how we can identify the photon as a
quantized particle.`}),`
`,a.jsx(e.p,{children:`Until now we exclusively treated the atom, molecule etc in a
quantum-mechanical way. The electromagnetic field was always treated
classically. We will attempt to change that for various reasons:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Spontaneous emission and the Lamb shift can only be understood
within quantum electrodynamics.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Several experiments control the electromagnetic field at the single
photon level, so we have to understand how this works.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"It frankly very unsatifying to only quantize half the problem."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`So before we start the endevour let us start out with the some reminders
on the properties of radiation in classical electromagnetism.`}),`
`,a.jsx(e.h1,{children:"Maxwell's Equations and Vector Potential"}),`
`,a.jsx(e.p,{children:"Electrodynamics is described by Maxwell's equations:"}),`
`,a.jsx(e.p,{children:`$$
\\vec{\\nabla} \\cdot \\vec{B} = 0\\
\\vec{\\nabla} \\times \\vec{E} + \\frac{\\partial \\vec{B}}{\\partial t}=0\\
\\vec{\\nabla} \\cdot \\vec{E} = \\frac{1}{\\epsilon_0}\\rho(\\vec{r},t) \\
\\vec{\\nabla} \\times \\vec{B} = \\frac{1}{c^2} \\frac{\\partial \\vec{E}}{\\partial t}+\\frac{1}{\\epsilon_0 c^2}\\vec{j}
$$`}),`
`,a.jsx(e.p,{children:`These equations are the equations of motion for the
electromagnetic field. The first two are the homogeneous Maxwell
equations and we can directly solve them by setting:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{B} = \\vec{\\nabla}\\times\\vec{A}\\
\\vec{E}= -\\frac{\\partial}{\\partial t}A-\\nabla \\phi
$$`}),`
`,a.jsxs(e.p,{children:[`Quite importantly, the choice of the potential $\\vec{A}$
has an inherent gauge freedom as we can basically perform the `,a.jsx(e.em,{children:`local
gauge transformation`}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\vec{A} \\rightarrow \\vec{A} + \\vec{\\nabla} f (\\vec{r},t)\\
\\phi \\rightarrow \\phi - \\frac{\\partial f}{\\partial t}
$$`}),`
`,a.jsx(e.p,{children:`So we can transform the electromagnetic field and the
magnetic field, but the equations of motion remain the same. It is this
local gauge freedom, which also allows us to have charge conservation.
But it is also this gauge freedom, which will make the quantization
rather technically involved.`}),`
`,a.jsx(e.h2,{children:"Free radiation"}),`
`,a.jsx(e.p,{children:`To simplify the problem, we will actually, only work on free
electromagnetic radiation, which simplifies the remaining Maxwell
equations too:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{\\nabla} \\cdot \\vec{E} = 0 \\
\\vec{\\nabla} \\times \\vec{B} = \\frac{1}{c^2} \\frac{\\partial\\vec{E}}{\\partial t}
$$`}),`
`,a.jsxs(e.p,{children:["They become very simple to within the ",a.jsx(e.strong,{children:"Coulomb gauge"}),`,
were we fix:`]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\nabla \\cdot \\vec{A} = 0
$$`}),`
`,a.jsx(e.p,{children:"For the electric field we have:"}),`
`,a.jsx(e.p,{children:`$$
\\vec{\\nabla} \\cdot \\left(-\\frac{\\partial}{\\partial t}A-\\nabla \\phi\\right) = 0 \\
-\\Delta \\phi = 0
$$`}),`
`,a.jsxs(e.p,{children:[`This is solved through the boring solution $\\phi = 0$.
For the magnetic field we obtain`,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\vec{\\nabla} \\times (\\nabla \\times \\vec{A}) = -\\frac{1}{c^2} \\frac{\\partial^2\\vec{A}}{\\partial t^2}\\
\\nabla^2 \\vec{A}  -\\frac{1}{c^2} \\frac{\\partial^2\\vec{A}}{\\partial t^2}=0
$$`}),`
`,a.jsx(e.h2,{children:"Solution in terms of plane waves"}),`
`,a.jsx(e.p,{children:"We can directly solve the problem, by using the Fourier representation:"}),`
`,a.jsx(e.p,{children:`$$
\\vec{A}(\\vec{r}, t)= \\frac{1}{(2\\pi)^{3/2}}\\int d^3\\vec{k}\\vec{A}(\\vec{k},t)e^{i\\vec{k}\\vec{r}}
$$`}),`
`,a.jsx(e.p,{children:"We then find that the solutions fulfill the requirement:"}),`
`,a.jsx(e.p,{children:`$$
\\left(\\vec{k}^2 +\\frac{1}{c^2} \\frac{\\partial^2}{\\partial t^2}\\right)\\vec{A}(\\vec{k},t)=0
$$`}),`
`,a.jsx(e.p,{children:`So the free radiation describes a travelling wave in the direction
$\\vec{k}$. The coulomb gauge further tells us that the vector potential only
has components, which are orthogonal to $\\vec{k}$ as:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{k}\\cdot\\vec{A} = 0\\
\\vec{A}(\\vec{k}) = \\vec{e}_1 A_1(\\vec{k}) + \\vec{e}_2 A_2(\\vec{k})
$$`}),`
`,a.jsx(e.p,{children:`Given that these equations of motion for the vector potential look a lot
like the ones of a harmonic oscillator, let us go through the
quantization of the harmonic oscillator first.`}),`
`,a.jsx(e.h1,{children:"Quantization procedure for the harmonic oscillator"}),`
`,a.jsx(e.p,{children:`To the the problem, we first have to go back the cooking recipe for the
quantization of a classical problem. In a first step, we have to obtain
the relevant Lagrangian. Knowing what is it, is a rather interesting
artform of theoretical physics, but for most cases you might just take
it as a given thing. We have:`}),`
`,a.jsx(e.p,{children:`$$
L_{HO} = \\frac{1}{2}m\\dot{x}^2-\\frac{m\\omega^2}{2}x^2
$$`}),`
`,a.jsx(e.p,{children:"We can now identify the conjugate momentum as:"}),`
`,a.jsx(e.p,{children:`$$
p = \\frac{\\partial L}{\\partial \\dot{x}}\\
= m\\dot{x}
$$`}),`
`,a.jsx(e.p,{children:"At this stage we can calculate the Hamiltonian:"}),`
`,a.jsx(e.p,{children:`$$
H = \\dot{x}p - L\\
H_{HO} = \\frac{p^2}{2m}+\\frac{m\\omega^2}{2}x^2
$$`}),`
`,a.jsx(e.p,{children:`At this stage we can identify the classical equations of
motion through:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{dx}{dt}= \\frac{\\partial H}{\\partial p}\\
\\frac{dp}{dt}= -\\frac{\\partial H}{\\partial x}
$$`}),`
`,a.jsx(e.p,{children:`It results just in the usual Newtons law. To get now the
quantum formulation, we can quantize the system by imposing the
commutation relationship on position and its conjugate momentum:`}),`
`,a.jsx(e.p,{children:`$$
~[\\hat{x}, \\hat{p}] = i\\hbar
$$`}),`
`,a.jsx(e.p,{children:"We then had the final Hamiltonian:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\frac{\\hat{p}^2}{2m}+\\frac{m\\omega^2}{2}\\hat{x}^2
$$`}),`
`,a.jsx(e.p,{children:`However, we know from the previous lecture that it is
much nicer to work in the basis of raising and lowering operators:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{a} = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}x+i\\frac{p}{\\sqrt{m\\omega}}\\right)\\
\\hat{a}^\\dag = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}x-i\\frac{p}{\\sqrt{m\\omega}}\\right)\\
~[\\hat{a}, \\hat{a}^\\dag] =1
$$`}),`
`,a.jsx(e.p,{children:"for which we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} =\\hbar\\omega\\left(\\hat{a}^\\dag \\hat{a}+\\frac{1}{2}\\right)
$$`}),`
`,a.jsx(e.h1,{children:"The lagrangien for the electromagnetism"}),`
`,a.jsxs(e.p,{children:[`At this stage we would like to roll out the formalism for
electromagnetism, following the discussion of `,a.jsx(e.a,{href:"https://laboutique.edpsciences.fr/produit/1061/9782759823369/mecanique-quantique-tome-3",children:`Cohen-Tannoudji Vol 3
(appendix of 18)`}),`. It adds sequentially the following new
problems, which we will tackle as we get to them:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The Lagrangien has plenty degrees of freedom."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The dynamical variables are complex."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"We start out with the Lagrangien:"}),`
`,a.jsx(e.p,{children:`$$
L = \\int d^3r \\mathcal{L}(\\vec{r},t)\\
\\mathcal{L}(\\vec{r},t)= \\frac{\\epsilon_0}{2}\\left(\\vec{E}^2-c^2\\vec{B}^2\\right)
$$`}),`
`,a.jsx(e.p,{children:`As it depends explicitly on the electric and magnetic
field it is manifestly gauge invariant. However, the current version
does not allow us to to identify the conjugate variables. We will use
the vector potential to introduce them:`}),`
`,a.jsx(e.p,{children:`$$
\\mathcal{L}(\\vec{r},t)= \\frac{\\epsilon_0}{2}\\left(\\dot{\\vec{A}}^2(\\vec{r},t)-c^2\\left(\\nabla \\times \\vec{A}\\right)^2\\right)
$$`}),`
`,a.jsx(e.p,{children:`Now we obtained the time derivative, which we can employ
to identify the conjugate momentum, but it also gave us the unwanted rot
term. We get rid of them transforming into Fourier space: We can then
write:`}),`
`,a.jsxs(e.p,{children:[`$$
\\int d\\vec{r} \\vec{E}(\\vec{r},t)\\vec{E}(\\vec{r},t)= \\int d\\vec{k} \\dot{\\vec{A}}(\\vec{k},t)\\dot{\\vec{A}}^`,a.jsx(e.em,{children:`(\\vec{k},t)\\
\\int d\\vec{r} \\vec{B}(\\vec{r},t)\\vec{B}(\\vec{r},t)= \\int d\\vec{k}k^2 \\vec{A}(\\vec{k},t)\\vec{A}^`}),`(\\vec{k},t)\\
$$`]}),`
`,a.jsx(e.p,{children:"We can then write the Lagrangien as:"}),`
`,a.jsxs(e.p,{children:[`$$
L = \\int d^3k \\mathcal{L}(\\vec{k},t)\\
\\mathcal{L}(\\vec{k},t) = \\epsilon_0\\left( \\dot{\\vec{A}}(\\vec{k},t)\\dot{\\vec{A}}^`,a.jsx(e.em,{children:"(\\vec{k},t)-c^2k^2 \\vec{A}(\\vec{k},t)\\vec{A}^"}),`(\\vec{k},t)\\right)
$$`]}),`
`,a.jsx(e.p,{children:`As for the integral over $\\vec{k}$, we will only
integrate over the positive contributions. This avoids summing over
identical terms at $\\vec{k}$ and $-\\vec{k}$. Finally, we can also use
the polarization to obtain:`}),`
`,a.jsxs(e.p,{children:[`$$
\\mathcal{L}(\\vec{k},t)= \\epsilon_0\\sum_i \\left( \\dot{A}_i(\\vec{k},t)\\dot{A}_i^`,a.jsx(e.em,{children:"(\\vec{k},t)-c^2k^2 A_i(\\vec{k},t)A_i^"}),`(\\vec{k},t)\\right)
$$`]}),`
`,a.jsx(e.h2,{children:"The conjugate moment and hamiltonian"}),`
`,a.jsx(e.p,{children:`We have discussed in the section on the quantization of the harmonic oscillator how to find the conjugate momentum for classical
variables. Here, we have complex variables. But, we can deduce the
conjugate momentum through as decomposition $X = x_1 + i x_2$. We
actually obtain:`}),`
`,a.jsx(e.p,{children:`$$
P = \\frac{\\partial L}{\\partial \\dot{X}^*}
$$`}),`
`,a.jsx(e.p,{children:"Here, it implies that the conjugate momentum $\\Pi_i(\\vec{k})$ is"}),`
`,a.jsx(e.p,{children:`$$
\\Pi_i(\\vec{k}) = \\frac{\\partial\\mathcal{L}(\\vec{k},t)}{\\partial \\dot{A}^*_i(\\vec{k},t)}\\
= \\epsilon_0 \\dot{A}_i(\\vec{k},t)\\
= -\\epsilon_0 E_i(\\vec{k},t)
$$`}),`
`,a.jsx(e.p,{children:a.jsx(e.strong,{children:`So the conjugate momentum to the vector potential is
the electric field.`})}),`
`,a.jsx(e.p,{children:`We can now calculate the Hamiltonian before we quantize the system. We
obtain:`}),`
`,a.jsxs(e.p,{children:[`$$
H = \\sum_i \\int d\\vec{k}\\left(\\dot{A}_i(\\vec{k},t)\\Pi_i(\\vec{k},t)+\\dot{A}^`,a.jsx(e.em,{children:"_i(\\vec{k},t)\\Pi^"}),`_i(\\vec{k},t)\\right)-L
$$`]}),`
`,a.jsx(e.p,{children:"We finally obtain the Hamiltonian of free radiation:"}),`
`,a.jsxs(e.p,{children:[`$$
H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\
\\mathcal{H}(\\vec{k}) = \\sum_i  \\left(\\frac{1}{\\epsilon_0}\\Pi_i^`,a.jsx(e.em,{children:"(\\vec{k},t)\\Pi_i(\\vec{k},t)+\\epsilon_0c^2k^2 A^"}),`_i(\\vec{k},t)A_i(\\vec{k},t)\\right)
$$`]}),`
`,a.jsx(e.h2,{children:"The quantized Hamiltonian"}),`
`,a.jsx(e.p,{children:`We are now ready to quantize the system, we simply have to be careful
about the quantization of the complex operators. Going through the
components, we obtain:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$A_i^*\\rightarrow \\hat{A}_i^\\dag$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$A_i\\rightarrow \\hat{A}_i$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["$[\\hat{A}",a.jsx(e.em,{children:"i(\\vec{k}),\\hat{\\Pi}^\\dag_j(\\vec{k}')]= i\\hbar \\delta"}),"{ij}\\delta(\\vec{k}-\\vec{k}')$"]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"Hence, the fully quantized Hamiltonian is:"}),`
`,a.jsx(e.p,{children:`$$
H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\
\\hat{\\mathcal{H}}(\\vec{k}) = \\sum_i  \\left(\\frac{1}{\\epsilon_0}\\hat{\\Pi}_i^\\dag(\\vec{k})\\hat{\\Pi}_i(\\vec{k})+\\epsilon_0c^2k^2 \\hat{A}^\\dag_i(\\vec{k})\\hat{A}_i(\\vec{k})\\right)\\
= \\epsilon_0 \\sum_i  \\left(\\hat{E}_i^\\dag(\\vec{k})\\hat{E}_i(\\vec{k})+c^2k^2 \\hat{A}^\\dag_i(\\vec{k})\\hat{A}_i(\\vec{k})\\right)
$$`}),`
`,a.jsx(e.h1,{children:"The normal modes"}),`
`,a.jsxs(e.p,{children:[`The hamiltonian above looks roughly like a harmonic oscillator, but not
really yet as there are some funny conjugates trailing. This can get
solved through the definition of the appropiate raising and lowering
operators, named `,a.jsx(e.strong,{children:"normal modes"}),". They are defined through:"]}),`
`,a.jsx(e.p,{children:`$$
\\hat{a}_i(\\vec{k}) = \\sqrt{\\frac{\\epsilon_0 \\omega}{2\\hbar }}\\left(\\hat{A}_i(\\vec{k})+\\frac{i}{\\epsilon_0\\omega}\\hat{\\Pi}_i\\right)\\
\\hat{a}^\\dag_i(\\vec{k}) = \\sqrt{\\frac{\\epsilon_0 \\omega}{2\\hbar }}\\left(\\hat{A}^\\dag_i(\\vec{k})-\\frac{i}{\\epsilon_0\\omega}\\hat{\\Pi}_i^\\dag \\right)
$$`}),`
`,a.jsx(e.p,{children:`With the underlying commutation relationships of the
conjugate operators we obtain the usual raising and lowering operators:`}),`
`,a.jsxs(e.p,{children:[`$$
~[\\hat{a}`,a.jsx(e.em,{children:"i(\\vec{k}), \\hat{a}^\\dag_j(\\vec{k}')] =\\delta"}),`{ij}\\delta(\\vec{k}-\\vec{k}')
$$`]}),`
`,a.jsx(e.p,{children:`Multiplying it out brings the Hamiltonian in normal
form:`}),`
`,a.jsx(e.p,{children:`$$
H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\
\\hat{\\mathcal{H}}(\\vec{k}) = \\sum_i  \\frac{\\hbar\\omega_k}{2}\\left(\\hat{a}_i(\\vec{k})\\hat{a}_i^\\dag(\\vec{k})+\\hat{a}_i^\\dag(\\vec{k})\\hat{a}_i(\\vec{k})\\right)\\
= \\sum_i \\hbar\\omega_k\\left(\\hat{a}^\\dag_i(\\vec{k})\\hat{a}_i(\\vec{k})+\\frac{1}{2}\\right)
$$`}),`
`,a.jsx(e.h2,{children:"Quadratures"}),`
`,a.jsx(e.p,{children:`It is common to push the terminology of the harmonic oscillator even
further, by the definition of the quadratures:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{a}_i(\\vec{k}) = \\frac{1}{\\sqrt{\\hbar2}}\\left(\\hat{Q}_i(\\vec{k})+\\hat{P}_i(\\vec{k})\\right)\\
\\hat{a}^\\dag_i(\\vec{k}) =\\frac{1}{\\sqrt{\\hbar2}}\\left(\\hat{Q}_i(\\vec{k})-\\hat{P}_i(\\vec{k})\\right)
$$`}),`
`,a.jsx(e.h2,{children:"The field operators"}),`
`,a.jsx(e.p,{children:`We can also express the actual field operators in terms of the normal
modes:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{E}(\\vec{r})= i \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)\\
\\hat{B}(\\vec{r})= \\frac{i}{c} \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)(\\vec{k}\\times\\vec{e}_i)\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)\\
\\hat{A}(\\vec{r})=  \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar}{2\\epsilon_0\\omega}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}+\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)
$$`}),`
`,a.jsx(e.p,{children:`In the following lectures we will typically focus on the electric field
as it couples to the electron charge through the electric dipole moment:`}),`
`,a.jsx(e.p,{children:`$$
H_I = \\vec{D}\\cdot\\vec{E}
$$`}),`
`,a.jsx(e.p,{children:"This will be the content of the next lecture."}),`
`,a.jsx(e.h1,{children:"The notion of the photon"}),`
`,a.jsx(e.p,{children:`We can now get back to the interpretation of the eigenstates of the
raising and lowering operators as a photon. We have seen previously in
lecture 6 that the operator
$\\hat{n}_i(\\vec{k}) = \\hat{a}_i^\\dag (\\vec{k}) \\hat{a}_i(\\vec{k})$ is
counting the occupation number in the Fock basis:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{n}_i(\\vec{k}) \\left|n_i\\right\\rangle= n_i\\left|n_i\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`The $n_i$ are then non-negative integers. We can further create a
well-defined photon number state through the raising operators from the
vacuum:`}),`
`,a.jsx(e.p,{children:`$$
\\left|n\\right\\rangle = \\frac{(a^\\dag)^n}{\\sqrt{n!}}\\left|0\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`Given all the numbers the single photon energy is
corresponding to intensities in the order pico to femto
Watts($\\sim 10^{-12}$ -- $10^{-15}$W).`}),`
`,a.jsxs(e.p,{children:[`A rather nice discussion concerning the details of a proper quantization
of the interacting field theory of quantum electromagnetism is given in
the `,a.jsx(e.a,{href:"http://users.physik.fu-berlin.de/~kleinert/b6/psfiles/Chapter-11-qed.pdf",children:"book by Kleinert"}),"."]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`Remember
$\\vec{\\nabla} \\times (\\nabla \\times \\vec{A}) =\\nabla(\\nabla \\vec{A})-\\nabla^2 \\vec{A}$ `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Ufe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(G5,{...t})}):G5(t)}const X5=Object.freeze(Object.defineProperty({__proto__:null,default:Ufe,frontmatter:Wfe},Symbol.toStringTag,{value:"Module"})),Vfe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:19,title:"Lecture 19 - Atom-Light Interactions and Dressed States"};function J5(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We have seen that we can understand matter with increasing complexity
from the simple two-level system up to molecules. We further studied,
how they can be control by classical electromagnetic fields to a very
high accuracy.`}),`
`,a.jsxs(e.p,{children:[`In the last lecture we also studied how we can understand the
electromagnetic field as an ensemble of quantum mechanical photon modes.
So in today's lecture we will focus on the interaction between atoms and
light, which is in a particularly clean set-up, namely cavity quantum
electrodynamics. The fundamental ingredients are sketched in Fig.
`,a.jsx(e.a,{href:"#fig-rydberg",children:"1"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"They are:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The electric field confined in a high finesse cavity. It will
bescribed by $\\hat{H}_\\textrm{f}$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"An atom transversing the cavity, described by $\\hat{H}_\\textrm{a}$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The interaction between the atomic charge and the electric field of
the cavity described by $\\hat{H}_\\textrm{af}$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"The Hamiltonian reads:"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.p,{children:["\\hat{H}",a.jsx(e.em,{children:"0 = \\hat{H}"}),"\\textrm{a} + \\hat{H}",a.jsx(e.em,{children:"\\textrm{f} + \\hat{H}"}),`\\textrm{af}
$$`]}),`
`,a.jsx(e.h1,{children:"The qubit system"}),`
`,a.jsx(e.p,{children:`The first ingredient of the Hamiltonian is the qubit system. Several
widely studied system that we will come back to exist. The most widely
studied are:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The internal qubit states of ions."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The transmon qubit in superconducting systems."}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:["Another approach are well isolated states in atoms, namely ",a.jsx(e.strong,{children:"Rydberg"}),`
states.`]}),`
`,a.jsx(e.h2,{children:"Rydberg atoms"}),`
`,a.jsx(e.p,{children:`The Rydberg states are highly excited states of Alkali atoms, which have
only one electron on the outer shell. As such they are similiar to the
hydrogen atom and hence they can be well described within atomic
physics. In the hydrogen atom the energy states are described by the
principle quantum number $n$:`}),`
`,a.jsx(e.p,{children:`$$
E_n = -E_I \\frac{1}{n^2} \\text{ with }E_I = 13.6 eV
$$`}),`
`,a.jsx(e.p,{children:`The typically employed Rydberg states are then in the
order of $n\\approx 50$, such that the energy difference between two
neighboring states is in the order of a few 50 GHz. Focusing only on two
of those states we can write the Hamiltonian as:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\textrm{a} = \\frac{\\hbar\\omega_0}{2} \\left(\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right| \\right)
$$`}),`
`,a.jsx(e.p,{children:`Through the remainder of the lecture we will frequently
switch notations between the spin language and the two-level system:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\sigma}`,a.jsx(e.em,{children:`z = \\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|\\
\\hat{\\sigma}`}),`+ = \\left|e\\right\\rangle\\left\\langle g\\right|\\
\\hat{\\sigma}_- = \\left|g\\right\\rangle\\left\\langle e\\right|
$$`]}),`
`,a.jsx(e.p,{children:"Using these highly excited states has several advantages:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The energy spacing of a few GHz falls into the regime of microwaves,
which are extremely precisely controlled.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Given the high quantum number, the electron is typically far away
from the nucleus and the induced dipole moments can be rather
large.As a such a strong coupling between light-field and qubit
seems achievable.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The lifetime of the Rydberg states is in the order of a few
microseconds, which can be long compared to most other time scales
within the experiments.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"The next step is to couple qubit to a suitable cavity."}),`
`,a.jsx(e.h1,{children:"The cavity field"}),`
`,a.jsx(e.p,{children:`The atom has be coupled to a suitable electric field. The electric field
reads in general:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{E}(\\vec{r})= i \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)
$$`}),`
`,a.jsx(e.p,{children:`We can simplify it a lot by working in a suitable
cavity. The most important properties of the cavity are the:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The resonant frequency $\\omega_L$ of the light trapped in the
cavity.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The quality factor $Q$, which describes the number of round trips
the photon makes within the cavity.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`The cavities employed for cavity electrodynamics in Paris are made of
superconducting material and feature quality factors of up to $10^{10}$.
For such high quality factors the electric field can be well reduced to
a single relevant mode `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\hat{E} \\sim (\\hat{a} + \\hat{a}^\\dag)
$$`}),`
`,a.jsxs(e.p,{children:[`The full Hamiltonian of the electromagnetic field reads
then `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\textrm{f} = \\hbar\\omega_L \\hat{a}^\\dag \\hat{a}
$$`}),`
`,a.jsx(e.p,{children:`The $\\hat{a}$ is the raising operator for the
electro-magnetic field. We typcially describe the electric field in the
Fock basis of $\\left|n\\right\\rangle$.`}),`
`,a.jsx(e.p,{children:`$$
\\hat{n} \\left|n\\right\\rangle = n \\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`While is the natural choice for the given Hamiltonian,
this is obviously not the natural basis of the raising and lowering
operators:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{a} \\left|n\\right\\rangle = \\sqrt{n} \\left|n-1\\right\\rangle\\
\\hat{a}^\\dag \\left|n\\right\\rangle = \\sqrt{n+1} \\left|n+1\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"From those we can construct any Fock state as:"}),`
`,a.jsx(e.p,{children:`$$
\\left|n\\right\\rangle = \\frac{\\left(\\hat{a}^\\dag\\right)^n}{n!}\\left|0\\right\\rangle
$$`}),`
`,a.jsxs(e.p,{children:[`But experimentally we rarely manipulate the Hamiltonian
directly, we much rather control the electric field, which is
proportional to the raising and lowering operators. As such, photon
states are widely described in the basis of `,a.jsx(e.strong,{children:"coherent"})," states:"]}),`
`,a.jsx(e.p,{children:`$$
\\hat{a}\\left|\\alpha\\right\\rangle= \\alpha\\left|\\alpha\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`So the eigenvalues are complex numbers corresponding to
the complex electric field amplitudes we know from classical optics. To
make a connection to the Fock space we can then use the above
definitions to write:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\alpha\\right\\rangle =e^{-|\\alpha|^2/2}\\sum_n \\frac{\\alpha^n}{\\sqrt{n!}}\\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`A very useful visualization of the coherent states
happens in phase space $X = \\frac{a+a^\\dag}{2}$ and
$P = i\\frac{a-a^\\dag}{2}$. They are Gaussian wave packages displaced by
an amplitude $|\\alpha|$ and rotating at speed $\\omega_L$.`}),`
`,a.jsx(e.h1,{children:"The atom-field interaction"}),`
`,a.jsx(e.p,{children:`Finally, we have to describe interaction between the atoms and the
field. Interactions between the atoms and the light field are governed
by the electric dipole interaction between the atom and the light`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\textrm{af}= -\\hat{\\vec{D}} \\cdot \\hat{\\vec{E}}
$$`}),`
`,a.jsx(e.p,{children:`We can expand the dipole operator over the two levels of
the atom:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\vec{D}} = \\vec{d}\\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)\\
\\hat{\\vec{D}} = \\vec{d}\\left(\\hat{\\sigma}`,a.jsx(e.em,{children:"- + \\hat{\\sigma}"}),`+\\right)
$$`]}),`
`,a.jsx(e.p,{children:"We can now write:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\textrm{af}= \\frac{\\hbar \\Omega_0}{2} \\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)\\left(\\hat{a}+\\hat{a}^\\dag\\right)
$$`}),`
`,a.jsx(e.p,{children:`Multiplying out the different the two brackets leads to two processes of
the type:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\hat{\\sigma}_- \\hat{a}^\\dag$, which describes the emission of a
photon by deexcitation of the atom.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$\\hat{\\sigma}_+ \\hat{a}$, which describes the absorption of a photon
by excitation of the atom.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The other two processes are strongly off-resonant and we can typically
ignore them. This approximation consists in the rotating wave
approximation, discussed in lecture 4. The coupling
hamiltonian reads then:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H}`,a.jsx(e.em,{children:"\\textrm{af}= \\frac{\\hbar \\Omega_0}{2} \\left(\\hat{\\sigma}"}),`- a^\\dag +\\hat{\\sigma}_+ a\\right)
$$`]}),`
`,a.jsx(e.p,{children:`We can put the full Hamiltonian together to obtain the Jaynes-Cummings
model:`}),`
`,a.jsxs(e.p,{children:[`$$
H_{JC}=\\hbar\\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right| +\\hbar\\omega_L \\hat{a}^\\dag \\hat{a} +\\frac{\\hbar \\Omega_0}{2} \\left(\\hat{\\sigma}`,a.jsx(e.em,{children:"- a^\\dag +\\hat{\\sigma}"}),`+ a\\right)
$$`]}),`
`,a.jsx(e.h1,{children:"Dressed Atom Picture"}),`
`,a.jsx(e.p,{children:`We can now analyze the Hamiltonian step-by-step in the dressed atom
picture.`}),`
`,a.jsx(e.h2,{children:"Optional: Bare States"}),`
`,a.jsx(e.p,{children:`Let us first look at the unperturbed ("bare") states, ignoring
$H_\\textrm{af}$ and depict the ground and excited state
$\\left|g\\right\\rangle$ and
$\\left|e\\right\\rangle$ of the atom on an energy scale, as
shown in below.`}),`
`,`
`,a.jsx(e.p,{children:`The ground and excited state $\\left|g\\right\\rangle$
and $\\left|e\\right\\rangle$ of the atom on an energy scale. Here, the
energy of the ground state is $E_g\\ =\\ 0$. The energy difference between
the two states is $\\hbar\\omega_0$. A photon of the surrounding light
field has an energy $\\hbar\\omega_L$. The Hamiltonian of the system then reads`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H} = \\hat{H}`,a.jsx(e.em,{children:"\\textrm{a} + \\hat{H}"}),`\\textrm{f} = \\hbar \\omega_0 \\left|e\\right\\rangle \\left\\langle e\\right| + \\hbar \\omega_\\textrm{L} \\hat{a}^\\dag \\hat{a}
$$`]}),`
`,a.jsx(e.p,{children:`The Hilbert space of this Hamiltonian contains both the state of the
atom and the state of the field. We can write them as product states of
the form`}),`
`,a.jsx(e.p,{children:`$$
\\left|g/e, n\\right\\rangle = \\left|g/e\\right\\rangle \\otimes \\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`The left substate of the tensor product denotes the
state of the atom and the right substate is defined by the number of
photons in the external field. We then have:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}\\left|g/e, n\\right\\rangle = \\left(\\hbar\\omega_0 \\delta_{g/e,e}+\\hbar\\omega_L n\\right)\\left|g/e, n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`We will assume that there is a very small detuning $\\delta_\\textrm{l}$
between the atom and the light field:`}),`
`,a.jsx(e.p,{children:`$$
|\\delta_\\textrm{l}| = |\\omega_\\textrm{L}- \\omega_0 | \\ll \\omega_0
$$`}),`
`,`
`,a.jsxs(e.p,{children:[`We can draw another energy diagram (see
`,a.jsx(e.a,{href:"#fig-bare-diagram",children:"3"}),`), where the state
of the atom and the state of the light field are contained in one "bare"
state. It does `,a.jsx(e.em,{children:"not"}),` yet include the interaction between the atom and
the light field. From the diagram one can see that the states forming
the manifold`]}),`
`,a.jsx(e.p,{children:`$$
\\Sigma (n) = \\left{ \\left|g,n+1\\right\\rangle, \\left|e,n\\right\\rangle \\right}
$$`}),`
`,a.jsx(e.p,{children:"are almost degenerate."}),`
`,a.jsx(e.h2,{children:"Dressed States"}),`
`,a.jsx(e.p,{children:`$\\hat{H}_\\textrm{af}$ couples now only the two states within each
manifold
$\\Sigma(n)= \\left{ \\left|g,n+1\\right\\rangle, \\left|e,n\\right\\rangle \\right}$.
We thus obtain a two-state system (see lecture 3) for
which we can write:`}),`
`,a.jsx(e.p,{children:`$$
\\left( \\begin{array}{c} c_1 \\ c_2 \\end{array} \\right) \\equiv c_1 \\left|g,n+1\\right\\rangle + c_2 \\left|e,n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"The off-diagonal matric element reads:"}),`
`,a.jsx(e.p,{children:`$$
h_n = \\left\\langle e,n|\\hat{H_\\textrm{af}|g,n+1}\\right\\rangle = \\frac{\\hbar \\Omega_0}{2} \\sqrt{n+1}.
$$`}),`
`,a.jsx(e.p,{children:`Note that the square of the matrix element is
proportional to $I \\propto (n+1) \\approx n$ for large $n$. The three
Hamiltonians can then be written in matrix notation and the
total Hamiltonian can be constructed:`}),`
`,a.jsx(e.p,{children:`$$
H_\\textrm{a} = \\left( \\begin{array}{cc} 0 & 0 \\ 0 & \\hbar \\omega_0 \\end{array} \\right),\\
H_\\textrm{f} = \\left( \\begin{array}{cc} (n+1)\\hbar \\omega_\\textrm{l} & 0 \\ 0 & n \\hbar \\omega_\\textrm{l} \\end{array} \\right) =  \\left( \\begin{array}{cc} \\hbar \\omega_\\textrm{l} & 0 \\ 0 & 0 \\end{array} \\right) + n \\hbar \\omega_\\textrm{l} \\cdot \\mathbb{1},\\
H_\\textrm{af} = \\left( \\begin{array}{cc} 0 & h_n \\ h_n & 0 \\end{array} \\right), \\qquad \\text{where} \\qquad h_n = \\hbar \\frac{\\Omega_0}{2}\\sqrt{n+1},\\
\\hat{H} = \\left( \\begin{array}{cc} \\hbar \\omega_\\textrm{l} & h_n \\ h_n & \\hbar \\omega_0 \\end{array} \\right) + n \\hbar \\omega_\\textrm{l} \\cdot \\mathbb{1},
$$`}),`
`,a.jsxs(e.p,{children:[`The "dressed states" are obtained by diagonalizing
$\\hat{H}$ within $\\Sigma(n)$, which es effectively once again a two
level system `,a.jsx(e.a,{href:"#fig-dressed-diagram",children:"4"}),` shows
an energy diagram including the bare and the dressed states. The energy
difference between the states $\\left|1(n)\\right\\rangle$ and
$\\left|2(n)\\right\\rangle$ is`]}),`
`,a.jsx(e.p,{children:`$$
\\hbar \\Omega = \\hbar \\sqrt{\\delta_\\textrm{l}^2 + \\Omega_0^2}
$$`}),`
`,a.jsx(e.p,{children:"with the effective Rabi frequency $\\Omega$."}),`
`,`
`,a.jsx(e.p,{children:`The corresponding eigenvectors are then a mixture of atom and light as
visualized in the figure below.`}),`
`,`
`,a.jsx(e.h1,{children:"Quantum Rabi oscillations"}),`
`,a.jsx(e.p,{children:`In the resonant case, the Jaynes-Cummings model simply describes a
two-level system that is coupled by a quantized Rabi coupling strength`}),`
`,a.jsx(e.p,{children:`$$
\\Omega_n = \\Omega_0 \\sqrt{n+1}
$$`}),`
`,a.jsx(e.p,{children:`So even for an empty cavity the vacuum is predicted to
induce Rabi coupling, if it is switched on and off. If more than one
photon is in the cavity the oscillation is simply a superposition of
several coupling strength:`}),`
`,a.jsx(e.p,{children:`$$
P_e(t)=\\sum_n p_n\\frac{1+\\cos\\left[\\Omega_n t\\right]}{2}
$$`}),`
`,a.jsxs(e.p,{children:["This effect has been observed in Ref. ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.76.1800",children:"Brune 1996"}),` as
summarized in Fig. `,a.jsx(e.a,{href:"#fig-coherence",children:"6"}),"."]}),`
`,`
`,a.jsx(e.h1,{children:"Making Schrödingers kitten"}),`
`,a.jsx(e.p,{children:`In the previous section the cavity was tuned exactly on resonance with
the incoming Rydberg atoms, such that coherent oscillations where
possible. On the other hand it is possible to work in the regime, where
$\\delta_L$ is much larger than the Rabi coupling. In this 'dispersive'
regime the atom does not change its internal state, but it only picks up
a phase $\\Phi_0 =  \\frac{\\delta_L^2}{4\\Omega} T_R$. The inverse of the
phase is then imprinted onto the electric field in the cavity. To create
a kitten state the experiment goes as follows:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The cavity is filled by a coherent state $\\alpha$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The Rydberg atom is prepare in a superposition state
$\\frac{\\left|e\\right\\rangle+\\left|g\\right\\rangle}{\\sqrt{2}}$`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The atom now interacts with the cavity for the time $T_R$. At the
end, the entangled state is created:`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\Psi\\right\\rangle_1= \\frac{e^{-i\\Phi_0}\\left|e, \\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|g,\\alpha e^{i\\Phi_0}\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:`This is the typical situation of Scrödingers cat.
Pushing to the extreme case $\\Phi_0 = \\frac{\\pi}{2}$ we entangled the
atom with the state $\\left|\\pm i\\alpha\\right\\rangle$. As
$\\alpha$ is a complex number we entangled a single atom with a large
'cat' state. As the atom is detected it projects the full Schrödinger
cat onto the dead or alive state. This projection can be avoided by
adding a second Ramsey pulse, which mixes once again the states
$\\left|e\\right\\rangle$ and
$\\left|g\\right\\rangle$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|e\\right\\rangle\\rightarrow\\frac{\\left|e\\right\\rangle+e^{i\\varphi}\\left|g\\right\\rangle}{\\sqrt{2}}\\
\\left|g\\right\\rangle\\rightarrow\\frac{\\left|g\\right\\rangle-e^{-i\\varphi}\\left|e\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:"The field now becomes:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\Psi_2\\right\\rangle = \\frac{1}{2}\\left|e\\right\\rangle\\otimes\\left[e^{-i\\Phi_0}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle-e^{-i\\varphi}\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]+\\frac{1}{2}\\left|g\\right\\rangle\\otimes\\left[e^{i(\\varphi-\\Phi_0)}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]
$$`}),`
`,a.jsx(e.p,{children:"The final read-out is then given by:"}),`
`,a.jsx(e.p,{children:`$$
P_e = \\frac{1}{2}\\left(1- e^{-n(1-\\cos(2\\Phi_0))}\\cos(\\varphi-\\Phi_0-n\\sin(2\\Phi_0))\\right)
$$`}),`
`,a.jsx(e.p,{children:`So the presence of the cat leads to a phase shift and a
decrease in fringe contrast. This was observed in the experiments`}),`
`,a.jsx(e.h1,{children:"Making Schrödingers kitten"}),`
`,a.jsx(e.p,{children:`In the previous section the cavity was tuned exactly on resonance with
the incoming Rydberg atoms, such that coherent oscillations where
possible. On the other hand it is possible to work in the regime, where
$\\delta_L$ is much larger than the Rabi coupling. In this 'dispersive'
regime the atom does not change its internal state, but it only picks up
a phase $\\Phi_0 =  \\frac{\\delta_L^2}{4\\Omega} T_R$. The inverse of the
phase is then imprinted onto the electric field in the cavity. To create
a kitten state the experiment goes as follows:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The cavity is filled by a coherent state $\\alpha$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The Rydberg atom is prepare in a superposition state
$\\frac{\\left|e\\right\\rangle+\\left|g\\right\\rangle}{\\sqrt{2}}$`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The atom now interacts with the cavity for the time $T_R$. At the
end, the entangled state is created:`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\Psi\\right\\rangle_1= \\frac{e^{-i\\Phi_0}\\left|e, \\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|g,\\alpha e^{i\\Phi_0}\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:`This is the typical situation of Scrödingers cat.
Pushing to the extreme case $\\Phi_0 = \\frac{\\pi}{2}$ we entangled the
atom with the state $\\left|\\pm i\\alpha\\right\\rangle$. As
$\\alpha$ is a complex number we entangled a single atom with a large
'cat' state. As the atom is detected it projects the full Schrödinger
cat onto the dead or alive state. This projection can be avoided by
adding a second Ramsey pulse, which mixes once again the states
$\\left|e\\right\\rangle$ and
$\\left|g\\right\\rangle$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|e\\right\\rangle\\rightarrow\\frac{\\left|e\\right\\rangle+e^{i\\varphi}\\left|g\\right\\rangle}{\\sqrt{2}}\\
\\left|g\\right\\rangle\\rightarrow\\frac{\\left|g\\right\\rangle-e^{-i\\varphi}\\left|e\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:"The field now becomes:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\Psi_2\\right\\rangle = \\frac{1}{2}\\left|e\\right\\rangle\\otimes\\left[e^{-i\\Phi_0}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle-e^{-i\\varphi}\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]+\\frac{1}{2}\\left|g\\right\\rangle\\otimes\\left[e^{i(\\varphi-\\Phi_0)}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]
$$`}),`
`,a.jsx(e.p,{children:"The final read-out is then given by:"}),`
`,a.jsx(e.p,{children:`$$
P_e = \\frac{1}{2}\\left(1- e^{-n(1-\\cos(2\\Phi_0))}\\cos(\\varphi-\\Phi_0-n\\sin(2\\Phi_0))\\right)
$$`}),`
`,a.jsx(e.p,{children:`So the presence of the cat leads to a phase shift and a
decrease in fringe contrast.`}),`
`,a.jsx(e.p,{children:`Nowadays the entangled states have become an interesting platform to
create increasingly large Schrödinger cats. A common example is here the
creation of a GHZ state:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\frac{\\left|0 \\cdots 0\\right\\rangle+ \\left|1\\cdots 1\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsxs(e.p,{children:[`A interesting demonstration for up to 14 ions was performed in
`,a.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.106.130506",children:"Monz 2011"}),`. Importantly it also highlights the extremely fast decoherence of larger cat states. We will go into more detail on how to
create increasingly larger cats in the next lecture. However, I would
like to finish the lecture with the discussion of quantum non-demolition
measurements.`]}),`
`,a.jsxs(e.p,{children:["As of the time of writing cold atom systems systems ",a.jsx(e.a,{href:"https://arxiv.org/abs/1905.05721",children:"rOmran 2019"}),` cold
the record of the largest cat with 20 atoms.`]}),`
`,a.jsx(e.h1,{children:"Seeing a photon without destroying it"}),`
`,a.jsxs(e.p,{children:[`The tool of the Rabi oscillations has been extend to observe photons
without destroying them as detailed in great detail in the book by
`,a.jsx(e.a,{href:"https://academic.oup.com/book/7346",children:"Raymond and Haroche"}),`. The underlying principle is the
following:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The atom is supposed to be in the ground state and the cavity is
filled with one photon.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The interaction time is tuned such that the atom undergoes exactly
one Rabi oscillation.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The initial and final state are therefore exactly the same, but the
atom has picked up a phase $\\pi$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"If the cavity was empty at the atom does not acquire a phase shift."}),`
`,a.jsxs(e.p,{children:[`Finally, the phase is read out through a Ramsey sequence between the
state $g$ and some unaffected independent state $i$ . This was implemented in Ref. `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/22275",children:"Nogues 1999"}),`. Based on this technique,
the team later observed quantum jumps `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature05589",children:"Gleyzes 2007"}),` and even the
stabilization of a Fock state through quantum feedback `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature10376",children:"Sayrin 2011"}),"."]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`We chose the phase of the electric field such that we can
eliminate the minus sign in the Hamiltonian `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,a.jsxs(e.p,{children:[`We ignore the energy of the quantum vacuum as it is not relevant
for the following discussions `,a.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Yfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(J5,{...t})}):J5(t)}const Q5=Object.freeze(Object.defineProperty({__proto__:null,default:Yfe,frontmatter:Vfe},Symbol.toStringTag,{value:"Module"})),Gfe={author:["Fred Jendrzejewski","Selim Jochim"],order:2,title:"Lecture 2 - A few more cooking recipes for quantum mechanics"};function K5(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this second lecture we will finish the discussion of the basic
cooking recipes and discuss a few of the consequences like the
uncertainty relation, the existance of wave packages and the Ehrenfest
theorem.`}),`
`,a.jsxs(e.p,{children:[`In the first lecture we discussed briefly the basic
principles of quantum mechanics like operators, state vectors and the
Schrödinger equation. We will finish this discussion today and then
introduce the most important consequences. We will continue to closely
follow the discussion of the introductory chapter of Ref. `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),`
`,a.jsx(e.h2,{children:"Composite systems"}),`
`,a.jsx(e.p,{children:`It is actually quite rare that we can label the system with a single
quantum number. Any atom will involve spin, position, angular momentum.
Other examples might just involve two spin which we observe. So the
question is then on how we label those systems. We then have two
questions to answer:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`How many labels do we need for a system to fully determine its
quantum state ?`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Once I know all the labels, how do I construct the full state out of
them ?`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We will actually discuss the second question first as it sets the
notation for the first question.`}),`
`,a.jsx(e.h3,{children:"Entangled States"}),`
`,a.jsx(e.p,{children:`In AMO we typically would like to characterize is the state of an
electron in a hydrogen atom. We need to define its angular momentum
label $L$, which might be 0, 1, 2 and also its electron spin $S$, which
might be \${\\uparrow, \\downarrow}$. It state is then typically labelled
as something like`}),`
`,a.jsx(e.p,{children:"$$\\left|L=0, S=\\uparrow\\right\\rangle = \\left|0,\\uparrow\\right\\rangle$$"}),`
`,a.jsx(e.p,{children:"etc."}),`
`,a.jsxs(e.p,{children:[`Another, simple example is that of two spins, each one having two
possible states \${\\uparrow, \\downarrow}$. This is a standard problem
in optical communication, where you send correlated photons with a
certain polarization to different people. We will typically call them
Alice and Bob `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"."]}),`
`,a.jsx(e.p,{children:`We now would like to understand than if we can disentangle the
information about the different labels. Naively, we can now associate
with Alice one set of outcomes and describe it by some state
$\\left|\\psi_{A}\\right\\rangle$ and the Bob has another set
$\\left|\\psi_{B}\\right\\rangle$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_A\\right\\rangle= a_{\\uparrow} \\left|\\uparrow_A\\right\\rangle+ a_{\\downarrow} \\left|\\downarrow_A\\right\\rangle\\
\\left|\\psi_B\\right\\rangle= b_{\\uparrow} \\left|\\uparrow_B\\right\\rangle+ b_{\\downarrow} \\left|\\downarrow_B\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`The full state will then be described by the possible outcomes
\${\\uparrow_A\\uparrow_B,\\downarrow_A\\uparrow_B,\\uparrow_A\\downarrow_B, \\downarrow_A\\downarrow_B}$.
We can then write:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\alpha_{\\uparrow\\uparrow}(\\left|\\uparrow_A\\right\\rangle\\otimes\\left|\\uparrow_B\\right\\rangle)+\\alpha_{\\uparrow\\downarrow}(\\left|\\uparrow_A\\right\\rangle\\otimes\\left|\\downarrow_B\\right\\rangle)+\\alpha_{\\downarrow\\uparrow}(\\left|\\downarrow_A\\right\\rangle\\otimes\\left|\\uparrow_B\\right\\rangle)+\\alpha_{\\downarrow\\downarrow}(\\left|\\downarrow_A\\right\\rangle\\otimes\\left|\\downarrow_B\\right\\rangle)\\
= \\alpha_{\\uparrow\\uparrow}\\left|\\uparrow\\uparrow\\right\\rangle+\\alpha_{\\uparrow\\downarrow}\\left|\\uparrow\\downarrow\\right\\rangle+\\alpha_{\\downarrow\\uparrow}\\left|\\downarrow \\uparrow\\right\\rangle+\\alpha_{\\downarrow\\downarrow}\\left|\\downarrow\\downarrow\\right\\rangle
$$`}),`
`,a.jsxs(e.p,{children:[`So we will typically just plug the labels into a single
ket and drop indices, to avoid rewriting the tensor symbol each time. We
say that a state is `,a.jsx(e.em,{children:"separable"}),`, if we can write it as a product of the
two individual states as above:`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\left|\\psi_A\\right\\rangle\\otimes\\left|\\psi_B\\right\\rangle\\
=a_{\\uparrow} b_\\uparrow \\left|\\uparrow\\uparrow\\right\\rangle+a_{\\downarrow} b_\\uparrow \\left|\\downarrow\\uparrow\\right\\rangle+a_{\\uparrow} b_\\downarrow \\left|\\uparrow\\downarrow\\right\\rangle+a_{\\downarrow} b_\\downarrow \\left|\\downarrow\\downarrow\\right\\rangle
$$`}),`
`,a.jsxs(e.p,{children:["All other states are called ",a.jsx(e.em,{children:"entangled"}),`. The most famous entangled
states are the Bell states:`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_\\textrm{Bell}\\right\\rangle=\\frac{\\left|\\uparrow\\uparrow\\right\\rangle+\\left|\\downarrow\\downarrow\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:`In general we will say that the quantum system is formed by two
subsystems $S_1$ and $S_2$. If they are independent we can write each of
them as:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_1\\right\\rangle=\\sum_m^M a_m \\left|\\alpha_m\\right\\rangle,\\
\\left|\\psi_2\\right\\rangle=\\sum_n^N b_n \\left|\\beta_n\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:"In general we will then write:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle=\\sum_m^M \\sum_n^N c_{mn}(\\left|\\alpha_m\\right\\rangle\\otimes \\left|\\beta_n\\right\\rangle).
$$`}),`
`,a.jsxs(e.p,{children:[`So we can determine such a state by $M \\times N$ numbers
$c_{mn}$ here. If the states are `,a.jsx(e.em,{children:"separable"}),`, we can write
$\\left|\\psi\\right\\rangle$ as a product of the individual
states:`]}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle=\\left|\\psi_1\\right\\rangle\\otimes\\left|\\psi_2\\right\\rangle=\\left(\\sum_m^M a_m \\left|\\alpha_m\\right\\rangle\\right) \\otimes \\left(\\sum_n^N b_n \\left|\\beta_n\\right\\rangle\\right)
$$`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle=\\sum_m^M \\sum_n^N a_m b_n \\left|\\alpha_m\\right\\rangle \\otimes \\left|\\beta_n\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`Separable states thus only describes a small subset of all possible
states.`}),`
`,a.jsx(e.h2,{children:"Statistical Mixtures and Density Operator"}),`
`,a.jsx(e.p,{children:`Having set up the formalism for writing down the full quantum state with
plenty of labels, we have to solve the next problem. As an
experimentalist, you will rarely measure all of them. This means that
you only perform a partial measurement and you have only partial
information of the system. The extreme case is the thermodynamic
ensemble, where we measure only temperature to describe $10^{23}$
particles.`}),`
`,a.jsx(e.p,{children:`A similiar problem arises for Alice and Bob. They typically measure the
state of the qubit in their lab without knowing what the other did. So
they need some way to describe the system locally. This is done through
the density operator approach.`}),`
`,a.jsx(e.p,{children:`In the density operator approach the state of the system is described by
a Hermitian density operator`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho} = \\sum_{n=1}^N p_n \\left|\\phi_n\\right\\rangle\\left\\langle\\phi_n\\right|.
$$`}),`
`,a.jsx(e.p,{children:`Here, $\\left\\langle\\phi_n\\right|$ are the
eigenstates of $\\hat{\\rho}$, and $p_n$ are the probabilities to find the
system in the respective states
$\\left|\\phi_n\\right\\rangle$. The trace of the density
operator is the sum of all probabilities $p_n$:`}),`
`,a.jsx(e.p,{children:`$$
\\mathrm{tr}(\\hat{\\rho}) = \\sum p_n = 1.
$$`}),`
`,a.jsx(e.p,{children:`For a pure state $\\left|\\psi\\right\\rangle$, we get $p_n=1$
for only one value of $n$. For every other $n$, the probabilities
vanish. We thus obtain a "pure" density operator
$\\hat{\\rho}_{\\text{pure}}$ which has the properties of a projection
operator:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho}_{\\text{pure}} = \\left|\\psi\\right\\rangle\\left\\langle\\psi\\right| \\qquad \\Longleftrightarrow \\qquad \\hat{\\rho}^2 = \\hat{\\rho}.
$$`}),`
`,a.jsx(e.p,{children:"For the simple qubit we then have:"}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\rho}= \\left(\\alpha_\\uparrow\\left|\\uparrow\\right\\rangle+\\alpha_\\downarrow\\left|\\downarrow\\right\\rangle\\right)\\left(\\alpha_\\uparrow^`,a.jsx(e.em,{children:"\\left\\langle\\uparrow\\right|+\\alpha_\\downarrow^"}),`\\left\\langle\\downarrow\\right|\\right)\\
= |\\alpha_\\uparrow|^2\\left|\\uparrow\\right\\rangle\\left\\langle\\uparrow\\right|+|\\alpha_\\downarrow|^2\\left|\\downarrow\\right\\rangle\\left\\langle\\downarrow\\right|+\\alpha_\\downarrow\\alpha_\\uparrow^`,a.jsx(e.em,{children:"\\left|\\downarrow\\right\\rangle\\left\\langle\\uparrow\\right|+\\alpha_\\uparrow\\alpha_\\downarrow^"}),`\\left|\\uparrow\\right\\rangle\\left\\langle\\downarrow\\right|
$$`]}),`
`,a.jsx(e.p,{children:"Then it is even simpler to write in matrix form:"}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\rho}= \\left(\\begin{array}{cc}
|\\alpha_\\uparrow|^2&\\alpha_\\uparrow\\alpha_\\downarrow^`,a.jsx(e.em,{children:`\\
\\alpha_\\downarrow\\alpha_\\uparrow^`}),`&|\\alpha_\\downarrow|^2
\\end{array}\\right)
$$`]}),`
`,a.jsx(e.p,{children:"For a thermal state on the other hand we have:"}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\rho}`,a.jsx(e.em,{children:"{\\text{thermal}} = \\sum"}),`{n=1}^N \\frac{e^{-\\frac{E_n}{k_BT}}}{Z} \\left|\\phi_n\\right\\rangle\\left\\langle\\phi_n\\right|\\text{ with }Z = \\sum_{n=1}^N e^{-\\frac{E_n}{k_BT}}
$$`]}),`
`,a.jsx(e.p,{children:`With this knowledge we can now determine the result of a
measurement of an observable $A$ belonging to an operator $\\hat{A}$. For
the pure state $\\left|\\psi\\right\\rangle$ we get:`}),`
`,a.jsx(e.p,{children:`$$
\\langle \\hat{A}\\rangle = \\left\\langle\\psi\\right| \\hat{A} \\left|\\psi\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:"For a mixed state we get:"}),`
`,a.jsx(e.p,{children:`$$
\\langle \\hat{A}\\rangle = \\mathrm{tr}(\\hat{\\rho}\\cdot \\hat{A}) = \\sum_n {p_n} \\left\\langle\\phi_n\\right| \\hat{A} \\left|\\phi_n\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`The time evolution of the density operator can be
expressed with the von Neumann equation:`}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\partial_{t}\\hat{\\rho}(t) = [\\hat{H}(t),\\hat{\\rho}(t)].
$$`}),`
`,a.jsx(e.h3,{children:"Back to partial measurements"}),`
`,a.jsx(e.p,{children:`We can now come back to the correlated photons sent to Alice and Bob,
sharing a Bell pair. They full density matrix is then especially simple:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho}= \\left(\\begin{array}{cccc}
\\frac{1}{2}& 0& 0 &\\frac{1}{2}\\
0 & 0 & 0& 0\\
0&0&0&0\\
\\frac{1}{2}&0&0&\\frac{1}{2}
\\end{array}\\right)
$$`}),`
`,a.jsx(e.p,{children:`Let us write the system as $S = S_A \\otimes S_B$. If we are looking for
the density operator $\\hat{\\rho}_i$ of each individual, we can simply
write:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{\\rho}`,a.jsx(e.em,{children:"A=\\mathrm{tr}"}),`{B}(\\hat{\\rho}),\\
\\hat{\\rho}`,a.jsx(e.em,{children:"B=\\mathrm{tr}"}),`{A}(\\hat{\\rho}),
$$`]}),`
`,a.jsx(e.p,{children:`where
$\\hat{\\rho}=\\left|\\psi\\right\\rangle\\left\\langle\\psi\\right|$
and $\\mathrm{tr}_{j}(\\hat{\\rho})$ is the trace over the Hilbert space of
subsystem $j$.`}),`
`,a.jsx(e.p,{children:`To reduce the density matrix of the Bell state it is actually helpful to
write out the definitions:`}),`
`,a.jsx(e.p,{children:`$$
\\mathrm{tr}_{B}(\\hat{\\rho}) = \\left\\langle\\uparrow_B\\right|\\hat{\\rho}\\left|\\uparrow_B\\right\\rangle+\\left\\langle\\downarrow_B\\right|\\hat{\\rho}\\left|\\downarrow_B\\right\\rangle\\
=\\frac{1}{2}\\left(\\left|\\uparrow_A\\right\\rangle\\left\\langle\\uparrow_A\\right|+\\left|\\downarrow_A\\right\\rangle\\left\\langle\\downarrow_A\\right|\\right)
$$`}),`
`,a.jsx(e.p,{children:"So we end up with the fully mixed state:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\rho}_{A,B} = \\left(\\begin{array}{cc}
\\frac{1}{2}&0\\
0&\\frac{1}{2}
\\end{array}\\right)
$$`}),`
`,a.jsx(e.p,{children:`Alice and Bob are simply cossing a coin if they ignore
the outcome of the other member. But once they start comparing results
we will see that the quantum case can dramatically differ from the
classical case. This will be the content of lecture 12 [@entanglement].`}),`
`,a.jsx(e.h2,{children:"Important Consequences of the Principles"}),`
`,a.jsx(e.h3,{children:"Uncertainty Relation"}),`
`,a.jsx(e.p,{children:`The product of the variances o two noncommuting operators has a lower
limit:`}),`
`,a.jsx(e.p,{children:`$$
\\Delta \\hat{A} \\cdot \\Delta \\hat{B} \\geq \\frac{1}{2} \\left| \\left\\langle\\left[\\hat{A,\\hat{B}}\\right]\\right\\rangle \\right|,
$$`}),`
`,a.jsx(e.p,{children:`where the variance is defined as
$\\Delta \\hat{A} = \\sqrt{\\left\\langle\\hat{A^2}\\right\\rangle-\\left\\langle\\hat{A}^2\\right\\rangle}$.`}),`
`,a.jsx(e.p,{children:a.jsx(e.strong,{children:"Examples."})}),`
`,a.jsxs(e.p,{children:[`$$
\\left[ \\hat{x}, \\hat{p} \\right] = i \\hbar \\
\\left[ \\hat{J}_i , \\hat{J}`,a.jsx(e.em,{children:"j \\right] = i \\hbar \\epsilon"}),`{ijk} \\hat{J}_k
$$`]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."})," This is a statement about the ",a.jsx(e.em,{children:"state"}),` itself, and not the
measurement!`]}),`
`,a.jsx(e.h3,{children:"Ehrenfest Theorem"}),`
`,a.jsx(e.p,{children:`With the Ehrenfest theorem, one can determine the time evolution of the
expectation value of an operator $\\hat{A}$:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{d}{dt}\\left\\langle\\hat{A}\\right\\rangle=\\frac{1}{i\\hbar}\\left\\langle\\left[\\hat{A},\\hat{H}\\right]\\right\\rangle+\\left\\langle\\partial_t\\hat{A}(t)\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`If $\\hat{A}$ is time-independent and
$\\left[\\hat{A},\\hat{H}\\right]=0$, the expectation value
$\\left\\langle\\hat{A}\\right\\rangle$ is a constant of the
motion.`}),`
`,a.jsx(e.h3,{children:"Complete Set of Commuting Observables"}),`
`,a.jsx(e.p,{children:`A set of commuting operators
\${\\hat{A},\\hat{B},\\hat{C},\\cdots,\\hat{X}}$ is considered a complete
set if their common eigenbasis is unique. Thus, the measurement of all
quantities \${A,B,\\cdots,X}$ will determine the system uniquely. The
clean identification of such a Hilbert space can be quite challenging
and a nice way of its measurment even more. Coming back to our previous
examples:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Performing the full spectroscopy of the atom. Even for the hydrogen
atom we will see that the full answer can be rather involved...`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The occupation number is rather straight forward. However, we have
to be careful that we really collect a substantial amount of the
photons etc.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Are we able to measure the full position information ? What is the
resolution of the detector and the point-spread function ?`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Here it is again rather clean to put a very efficient detector at
the output of the two arms ...`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`What are the components of the spin that we can access ? The $z$
component does not commute with the other components, so what should
we measure ?`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"https://www.authorea.com/326444/GsbfEypTdf4dvncV23L8_Q",children:`third
lecture`}),` of this
course will start to apply these discussions to the two-level system,
which is one of the simplest yet most powerful models of quantum
mechanics.`]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-2006",children:[`
`,a.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. The Quantum Mechanics Solver. Springer-Verlag, 2006. ",a.jsx(e.a,{href:"#user-content-fnref-2006","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:["And if someone wants to listen the person is called Eve ",a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Xfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(K5,{...t})}):K5(t)}const Z5=Object.freeze(Object.defineProperty({__proto__:null,default:Xfe,frontmatter:Gfe},Symbol.toStringTag,{value:"Module"})),Jfe={author:["Fred Jendrzejewski"],order:20,title:"Lecture 20 - A few words on quantum computing with trapped ions"};function ek(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we are going to discuss the fundamental ingredients for
quantum computing with trapped ions. In a first step, we discuss
trapping and cooling, then single qubit operations and finally two-qubit
operations.`}),`
`,a.jsxs(e.p,{children:[`Quantum computation has become a branch of research at the interaction
of physics, engineering, mathematices and computer science by now. The
standard book on the topic is most likely the book by Nielsen and Chang
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1017/cbo9780511976667",children:"Nielsen 2009"}),`. However, an enormous amount of additional literature
exists, I will only reference here to `,a.jsx(e.a,{href:"https://arxiv.org/abs/1804.03719v1",children:"a nice introduction"}),` a
more complete list is left for future discussions.`]}),`
`,a.jsxs(e.p,{children:[`In this lecture we will discuss shortly the idea behind quantum
computing and the discuss its implementation on trapped ions. While a
large number of them exist, we decided to start with trapped ions for
several very subjective reasons `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]}),`
`,a.jsxs(e.p,{children:[`And before we can start the discussion we would highly recommend the
readers to take some time to go through the Nobel prize lecture of Dave
Wineland as it gives a detailled discussion of the field from his point
of view `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.85.1103",children:"Wineland 2013"}),"."]}),`
`,a.jsx(e.h1,{children:"What do we want from a QC ?"}),`
`,a.jsx(e.p,{children:`In a QC we would like to implement algorithms, which are based on well
defined operations. Influential examples of such algorithms are the
quantum Fourier transform and the Grover algorithm.`}),`
`,a.jsx(e.p,{children:`Given that computations are typically implemented through logical truth
tables, we typically base a quantum computer on qubits. We then call one
state $\\left|0\\right\\rangle$ and on
$\\left|1\\right\\rangle$. Given that we would like to have
reproducable computations, we always assume that we start them out with
all qubits in the $\\left|0\\right\\rangle$ state.`}),`
`,a.jsx(e.p,{children:`A computation consists then in applying a number of gates. The key is
here that any algorithm might be built up from an extremely limited
number of gates. Typically four are sufficient:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The three gates that rotate each individual qubit on the Bloch
sphere.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`A gate that entangles them properly. The standard example is here
the CNOT gate, which we will come back too.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Such computations are then typically nicely visualized through circuit
diagrams as used them already for the study of Bell inequalities and
visualized below.`}),`
`,`
`,a.jsx(e.p,{children:`As atomic physics is only a minor part of the QC field, we typically
have to learn the new notations of the field again. As such single qubit
gates are typically not explained through the Pauli matrices but by
different symbols like $H$ or $Z$. We come back to this later.`}),`
`,a.jsx(e.h2,{children:"Some of the hopes for QCs"}),`
`,a.jsxs(e.p,{children:[`The major point to about a properly chosen set of gates is that it
allows us to implement ANY algorithm. So they allow us to implement a
`,a.jsx(e.em,{children:"universal"}),` quantum computer. The main question is then how powerful
such a QC would be. Could it solve problems as fast a a classical
computer or maybe even faster ? This question is at the hard of the
field of complexity classes, which studies which kind of problem can be
solved `,a.jsx(e.a,{href:"https://complexityzoo.uwaterloo.ca/Petting_Zoo",children:"how efficiently"}),"."]}),`
`,a.jsx(e.p,{children:`The most fundamental question is then if a problem can be solved in a
polynomial time (P hard) or not (NP-hard). Linear problems are P-hard
and the travelling salesman problem is NP-hard. For some problems a
quantum computer might then provide an answer in polynomial time, where
a classical computer would not... The factorization of prime numbers is
one of these problems as discussed in Shor algorithm.`}),`
`,a.jsxs(e.p,{children:[`And the google paper that was published in 2019 actually indicated for
the first time that a quantum computer achieved such a task
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/s41586-019-1666-5",children:"Arute 2019"}),"."]}),`
`,a.jsx(e.h2,{children:"Requirements for a QC"}),`
`,a.jsxs(e.p,{children:[`Given our excitement for a quantum computer, we might want a checklist
of what we want from a quantum computer hardware. DiVincenzo proposed
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1016/j.physrep.2008.09.003",children:"the following ingredients"}),":"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Qubits that can store information in a scalable system."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The ability to initialize the system in the right state."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"A universal set of gates."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Long coherence times, which are much longer than gate operation
times.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Good measurement capabilities"}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Trapped ions allow us to fulfill all these requirements as we will see
in this lecture and we will go through them step-by-step.`}),`
`,a.jsx(e.h1,{children:"Trapping and cooling"}),`
`,a.jsx(e.p,{children:`For computing experiments one typically works with singe-charged ions
like $^{40}Ca^+$. Given their charge, they can be trapped in very clean
traps under vacuum. As such they are extremely well isolated from the
environment and high precision experiments can be performed. Finally,
they have only one remain electron in the outer shell. Therefore they
have a hydrogenlike atomic structure.`}),`
`,a.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
$\\text{div} \\vec{E} = 0$. So, the experimentalists have to play some
tricks with oscillating fields. We will not derive in detail how a
resulting `,a.jsx(e.strong,{children:"Paul trap"})," works, but the ",a.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:`linked
video`}),` gives a very nice impression of the
idea behind it.`]}),`
`,a.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,a.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.531",children:"Wolfgang Paul"})," and ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.525",children:"Hans Dehmelt"}),`. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known as `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.541",children:"Ramsey spectroscopy"}),"."]}),`
`,`
`,`
`,a.jsx(e.p,{children:`A Paul trap provides a harmonic oscillator confinement with trapping
frequencies in the order of hundreds of kHz. An ion trapped in such a
trap can the be described by the Hamiltonian:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H}_{t} = \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega_t^2}{2}\\hat{x}^2
$$`}),`
`,a.jsx(e.p,{children:`The two variables $p$ and $x$ are non-commuting $[x, p] = i\\hbar$, so
they cannot be measured at the same time. It can be nicely diagonalized
in terms of the ladder operators:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{x} = \\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}+\\hat{a}^\\dag\\right)\\
\\hat{p} = i\\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}^\\dag-\\hat{a}\\right)\\
$$`}),`
`,a.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\hbar \\omega_t \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dag a
$$`}),`
`,a.jsx(e.p,{children:`Having loaded the ions into the Paul trap we also need
to cool them down.`}),`
`,a.jsx(e.h1,{children:"Atom-light interaction"}),`
`,a.jsx(e.p,{children:`Given that the ions keep only on atom on the outer shell, they have a
hydrogenlike structure, which makes
them optically well controllable. To control the ions further we use
light of amplitude $E_0$ and frequency $\\omega_L$:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{E}(t) = \\vec{E}_0 \\cos(kx - \\omega_L t+\\varphi)\\
= \\frac{\\vec{E}_0}{2} \\left(e^{i[kx - \\omega_lt+\\varphi]}+e^{-i[kx-\\omega_lt+\\varphi]}\\right)
$$`}),`
`,a.jsx(e.p,{children:`We will describe the interal states of the ion for the
moment with the simple two state system of ground state
$\\left|g\\right\\rangle$ and excited state
$\\left|e\\right\\rangle$ at an energy $\\hbar \\omega_0$, which
is typically in the order of thousands of THz. It has the Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
H_{ion} = \\hbar \\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right|
$$`}),`
`,a.jsx(e.p,{children:`Putting this ion into propagating light will induce a
coupling between these two internal states. As previously , we will
describe the coupling in the semi-classical approximation through
$H_\\textrm{int} = -\\hat{\\vec{D}} \\cdot \\vec{E}$. However, in this
context we will not ignore the propagating nature of the light field and
keep its position dependence. This is necessary as we would like to
understand how the light influences the movement of the atoms and not
only the internal states. Putting them together we obtain:`}),`
`,a.jsx(e.p,{children:`$$
H_\\textrm{int} = \\frac{\\Omega}{2}\\left([\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|]e^{i(k \\hat{x} - \\omega_L t+\\varphi)} + h.c.\\right)
$$`}),`
`,a.jsx(e.p,{children:`The laser frequency is tuned closely to the frequency of
the internal state transition and we will be only interested in the
detuning $\\Delta = \\omega_0 - \\omega_L$. Importantly, it couples the
position of the atom and the internal states.`}),`
`,a.jsx(e.p,{children:`To simplify the problem, we can work in the rotating frame to describe
the external and internal degrees of freedom for the ion:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H}= \\hbar \\omega_t \\hat{a}^\\dag \\hat{a} + \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\left(k \\hat{x}+\\varphi\\right)} + h.c.\\right)
$$`}),`
`,a.jsx(e.p,{children:`We will now see how this system is used to cool the ions to the motional
groundstate, perform single qubit operations and then two-qubit
operations.`}),`
`,a.jsx(e.h1,{children:"Doppler cooling"}),`
`,a.jsx(e.p,{children:`This interaction of the atom with a photon is at the origin of the
all-important Laser cooling, which was pioneered for ions in the 1970s
(!!) by the Wineland group. For cooling transition we couple the ground
state to an excited state of finitie lifetime $\\tau= \\frac{1}{\\Gamma}$.`}),`
`,`
`,a.jsxs(e.p,{children:[`The basic idea of laser cooling. The incoming light gives the ion a
momentum kick $\\vec{k}`,a.jsx(e.em,{children:`{in}$. The photon is reemitted in a random
direction such that $<\\vec{k}`}),"{out}>=0$."]}),`
`,a.jsxs(e.p,{children:[`This laser cooling had a tremendous impact on the field of atomic
physics in general. Notably it gave rise to the field of cold atoms to
which we will get back in the next lecture. This importance was
recognized in the Nobel prizes of 1997 for `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.685",children:"Steve Chu"}),", ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.707",children:`Claude
Cohen-Tannoudji`})," and ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.721",children:"Bill Phillips"}),"."]}),`
`,a.jsx(e.h2,{children:"Working in the Lamb-Dicke regime"}),`
`,a.jsx(e.p,{children:`After this initial cooling stage the atoms have to be cooled to the
ground state in the trap. To treat the trapped particles we will express
the position operator in terms of the ladder operator, such that:`}),`
`,a.jsx(e.p,{children:`$$
k\\hat{x} = \\eta (\\hat{a}^\\dag+ \\hat{a})\\
\\eta = \\sqrt{\\frac{\\hbar^2 k^2/2m}{\\hbar \\omega_t}} =\\sqrt{\\frac{E_R}{\\hbar \\omega_t}}
$$`}),`
`,a.jsxs(e.p,{children:["$\\eta$ is called the ",a.jsx(e.em,{children:"Lamb-Dicke"}),` parameter. It compares
the change in motional energy due to the absorption of the photon
$E_r = \\frac{(\\hbar k)^2}{2m}$ compared to the energy spacing
$\\hbar \\omega_t$ in the trap. When it is small it suppresses the change
of the motional state of the atom due to the absorption of a photon.`]}),`
`,a.jsx(e.p,{children:`For simplicity we will set in this section $\\varphi=0$ and develop the
exponent to obtain:`}),`
`,a.jsx(e.p,{children:`$$
H_\\textrm{int} = \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|\\left(1 + i\\eta[\\hat{a}^\\dag+ \\hat{a}]\\right) + h.c.\\right)
$$`}),`
`,a.jsx(e.p,{children:`So it contains three couplings for different trap levels
and internal states:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"carrier"}),` transition
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n\\right\\rangle$
with strength $\\Omega$.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"red"}),` sideband
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n-1\\right\\rangle$
with strength $\\eta \\Omega(n+1)$. It leads to a reduction of the
trap level and it is resonant for $\\Delta = -\\omega_t$.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"blue"}),` sideband
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n+1\\right\\rangle$
with strength $\\eta \\Omega n$. It leads to an increase of the trap
level and it is resonant for $\\Delta = \\omega_t$.`]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"The full energy diagram is summarized in the figure below."}),`
`,`
`,a.jsxs(e.p,{children:["This scheme is used to perform ",a.jsx(e.strong,{children:"Raman side-band cooling"}),`. The laser is
tuned on the transition
$\\left|n,g\\right\\rangle\\rightarrow \\left|n-1,e\\right\\rangle$
such that each absorption involves a reduction in the trap level. This
set-up for cooling was first demonstrated in `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.75.4011",children:"1995 by the Wineland group"}),"."]}),`
`,a.jsx(e.p,{children:`It is at this stage that the ions are in the motional ground state and
we can focus our attention to the high control of the internal qubit
states of the ion for quantum computing.`}),`
`,a.jsx(e.h1,{children:"Single-qubit operations"}),`
`,a.jsx(e.p,{children:`The single qubit operations can now be identified with the transition
$\\left|e,n\\right\\rangle\\leftrightarrow \\left|g,n\\right\\rangle$.
We can then simplify the atom-light interaction too:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}= \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\hbar\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\varphi} +\\left|g\\right\\rangle\\left\\langle e\\right|e^{-i\\varphi}\\right)
$$`}),`
`,a.jsx(e.p,{children:`We can translate this into the language of qubit
operations through the definitions:`}),`
`,a.jsx(e.p,{children:`$$
\\sigma_z = \\frac{\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|}{2}\\
\\sigma_x = \\frac{\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|}{2}\\
\\sigma_y = \\frac{i\\left|e\\right\\rangle\\left\\langle g\\right|-i\\left|g\\right\\rangle\\left\\langle e\\right|}{2}
$$`}),`
`,a.jsx(e.p,{children:"So we can now simply write the Hamiltonian as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}= \\hbar\\Delta \\sigma_z +\\Omega_x \\sigma_x +\\Omega_y \\sigma_y\\
\\Omega_x = \\Omega \\cos(\\varphi)\\
\\Omega_y = \\Omega \\sin(\\varphi)
$$`}),`
`,a.jsxs(e.p,{children:[`In the QC community people rarely talk about the Pauli matrices, but
much rather about a few specific gates. The most cited here is the
`,a.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
$\\left|0/1\\right\\rangle\\rightarrow \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}$.
So it has no good classical analog. Further a double application brings
us back to the origin.`]}),`
`,a.jsx(e.p,{children:`The other gate we named about was a Z gate, which is simply a $\\pi$
rotation around the z axis.`}),`
`,a.jsx(e.h1,{children:"Two-qubit operations"}),`
`,a.jsxs(e.p,{children:[`To implement a quantum computer the system has to be completed by a
two-qubit operation. For ions a number of two-qubit gates exist as
discussed nicely in `,a.jsx(e.a,{href:"http://dx.doi.org/10.1016/j.physrep.2008.09.003",children:"Sec. 2.6 of Haffner 2008"}),":"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"Cirac-Zoller"})," gate was the ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.74.4091",children:"first proposed two-qubit gate"}),`
[@Cirac_1995] and it was also the first one realized `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.75.4714",children:`within the same
year`}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"Soerensen-Moelmer"})," gate was ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.82.1971",children:"proposed later"}),`,
but it is extremely important from a practical point of view as it
leads to very high entanglement fidelities.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`Another realization, which we mention for completeness is the
geometric phase-gate, which is used `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature01492",children:"in the NIST group"}),"."]}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`We will now discuss a bit the Soerensen-Moelmer gate, which is nicely
described `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physreva.62.022311",children:"here"}),`. In this set-up two ions sit in a
common trap. The cost of energy for exciting one of the ions will be
labelled $\\omega_t$ as in the first section. So we assume that the
scheme starts in the state $\\left|ggn\\right\\rangle$, where
both atoms are in the internal ground-state $g$ and in some excited trap
level $n$.`]}),`
`,a.jsx(e.p,{children:`In the next step, these two ions experience two lasers, which are
coupling excited and the ground state of the ions:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`One laser has frequency $\\omega_1=\\omega_0-\\omega_t+\\delta$ and Rabi
coupling strength $\\Omega$. It is therefore only slightly detuned
from the transitions
$|ggn\\rangle\\rightarrow|eg,n-1\\rangle |ge,n-1\\rangle$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The second laser has frequency $\\omega_2=\\omega_0+\\omega_t-\\delta$
and Rabi coupling strength $\\Omega$. It is therefore only slightly
detuned from the transitions
$|ggn\\rangle\\rightarrow|eg,n+1\\rangle |ge,n+1\\rangle$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"The resulting level diagram is depicted below."}),`
`,`
`,a.jsx(e.p,{children:`The gate is then operated in the regime of small coupling strength
$\\eta \\Omega n \\ll \\delta$. In this case coupling to the excited
motional states $n\\pm 1$ is suppressed by a factor of
$\\frac{\\eta \\Omega n}{\\delta}$. On the other hand we are exactly on
resonance for the two-photon transitions
$|ggn\\rangle\\rightarrow|eg,n+1\\rangle\\rightarrow|ee,n\\rangle$ etc. So we
can do second-order pertubation theory to obtain the
effective Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
H_\\mathrm{SM} = \\frac{\\Omega_\\mathrm{SL}}{2}\\left(\\left|ggn\\right\\rangle\\left\\langle een\\right| + (\\left|een\\right\\rangle\\left\\langle ggn\\right|\\right)\\text{ with }\\Omega_{SL} = -\\frac{(\\Omega \\eta)^2}{2(\\eta - \\delta)}
$$`}),`
`,a.jsx(e.p,{children:`So starting out with the state
$\\left|gg\\right\\rangle$ and applying the laser for
$t\\Omega =\\frac{\\pi}{2}$, we obtain the entangled state that we are
looking for.`}),`
`,a.jsxs(e.p,{children:[`The operation of the gate was first demonstrated in 2000 by the Wineland
group and allowed at the time for generating a Bell state `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/35005011",children:`with a
fidelity of 83%`}),`. This limit has been increasingly pushed
of the years and now `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.117.060504",children:"reaches the 99.9% region"}),"."]}),`
`,a.jsx(e.p,{children:`Such a fidelity sounds very impressive on first sight and it is by now
the result of several decades of work. However, in a quantum computer we
would like to chain a large number of these gates behind each other.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 10 iterations the fidelity dropped to 99%."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 100 iterations the fidelity dropped to 90%."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 1000 iterations the fidelity dropped to 30%."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`So even with such an excellent fidelity it will barely be possible to
chain much more than 100 gates before the some extremely iffy things
start to happen.`}),`
`,`
`,a.jsx(e.p,{children:`So we have experimentally the choice of entanglement tool in the way
that is most adapted to our work.`}),`
`,a.jsx(e.h1,{children:"Practical considerations"}),`
`,a.jsx(e.p,{children:`A commonly used ion is $\\mathrm{Ca+} , (Z=20)$. The level scheme of the calcium atom is shown below. The different
transitions are used for different purposes:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The broad transition at 397nm is used for cooling."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Coupling between the qubit states is performed through the 729nm
transition.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The 866nm and the 854nm are used for pumping the atoms into
appropiate substates.`}),`
`]}),`
`]}),`
`,`
`,a.jsxs(e.p,{children:[`Several solutions for scaling up the quantum computing architecture are
under way . `,a.jsx(e.em,{children:"Long ion chains"}),` in linear Paul traps with up to 40
ions are the current 'work-horse'. This is the 'simplest' existing
architecture. In such a geometry Shors algorithm was `,a.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.aad9480",children:`shown for the
number 15`}),` with five qubits and entanglement between up to
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.106.130506",children:"14 qubits was studied"}),`. However, it reaches its natural
limits for entangling distant ions due to cross-talk with other ions
during the operation. Therefore, different approaches are currently
tested to scale the architecture to larger `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevx.7.041061",children:"fault-tolerant geometries"}),"."]}),`
`,a.jsx(e.p,{children:`By no means we will be able to give a full picture of the booming field.
However, a few main players are:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`NIST, JQI and IonQ, which are all strongly connected through their
shared past with Dave Wineland.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Innsbruck,  Mainz and AQT which are connected through their shared
past and present with Rainer Blatt.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"ETH, Oxford, ..."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The AQTION and the MicroQC network, which are part of the European
flagship initiative.`}),`
`]}),`
`]}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`Philipp Hauke worked a lot with them. Fred is an AMO person and
Ferdinand Schmidt-Kaler was kind enough to provide a lot of
background information on the experiments `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Qfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(ek,{...t})}):ek(t)}const tk=Object.freeze(Object.defineProperty({__proto__:null,default:Qfe,frontmatter:Jfe},Symbol.toStringTag,{value:"Module"})),Kfe={author:["Fred Jendrzejewski","Selim Jochim"],order:3,title:"Lecture 3 - The two-level system"};function nk(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We are going to discuss the two-level system, it's static properties
like level splitting at avoided crossings and dynamical properties like
Rabi oscillations.`}),`
`,a.jsxs(e.p,{children:[`After the previous discussions of some basic cooking recipes to quantum
mechanics in last weeks lectures, we will use them to understand the two-level system. A very detailled
discussion can be found in chapter 4 of Ref. `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-ct1",id:"user-content-fnref-ct1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),`. The importance of the
two-level system is at least three-fold:`]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`It is the simplest system of quantum mechanics as it spans a Hilbert
space of only two states.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`It is quite ubiquitous in nature and very widely used in atomic
physics.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The two-level system is another word for the qubit, which is the
fundamental building block of the exploding field of quantum
computing and quantum information science.`}),`
`]}),`
`]}),`
`,`
`,a.jsx(e.p,{children:`Examples for two-state systems. a) Benzene: In the ground state, the
electrons are delocalized. b) Ammonia: The nitrogen atom is either found
above or below the hydrogen triangle. The state changes when the
nitrogen atom tunnels. c) Molecular ion : The electron is either
localized near proton 1 or 2.`}),`
`,a.jsx(e.p,{children:`Some of the many examples for two-level systems that can be found in
nature:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Spin of the electron: Up vs. down state"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Two-level atom with one electron (simplified): Excited vs. ground
state`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Structures of molecules, e.g., $NH_3$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Occupation of mesoscopic capacitors in nanodevices."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Current states in superconducting loops."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Nitrogen-vacancy centers in diamond."}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"Hamiltonian, Eigenstates and Matrix Notation"}),`
`,a.jsx(e.p,{children:`To start out, we will consider two eigenstates
$\\left|0\\right\\rangle$, $\\left|1\\right\\rangle$
of the Hamiltonian $\\hat{H}_0$ with`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0\\left|0\\right\\rangle=E_0\\left|0\\right\\rangle, \\qquad \\hat{H}_0\\left|1\\right\\rangle=E_1\\left|1\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`Quite typically we might think of it as a two-level atom
with states 1 and 2. The eigenstates can be expressed in matrix
notation:`}),`
`,a.jsx(e.p,{children:`$$
\\left|0\\right\\rangle=\\left( \\begin{array}{c} 1 \\ 0 \\end{array} \\right), \\qquad \\left|1\\right\\rangle=\\left( \\begin{array}{c} 0 \\ 1 \\end{array} \\right),
$$`}),`
`,a.jsx(e.p,{children:"so that $\\hat{H}_0$ be written as a diagonal matrix"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0 = \\left(\\begin{array}{cc} E_0 & 0 \\ 0 & E_1 \\end{array}\\right).
$$`}),`
`,a.jsxs(e.p,{children:[`If we would only prepare eigenstates the system would be
rather boring. However, we typically have the ability to change the
Hamiltonian by switching on and off laser or microwave fields `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),`. We
can then write the Hamiltonian in its most general form as:`]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} \\Delta  & \\Omega_x - i\\Omega_y\\ \\Omega_x +i\\Omega_y & -\\Delta \\end{array} \\right)
$$`}),`
`,a.jsx(e.p,{children:"Sometimes we will also chose the definition:"}),`
`,a.jsx(e.p,{children:`$$
\\Omega = |\\Omega| e^{i\\varphi}=\\Omega_x + i\\Omega_y
$$`}),`
`,a.jsx(e.p,{children:`It is particularly useful for the case in which the
coupling is created by a laser. Another useful way of thinking about the
two-level system is as a spin in a magnetic field. Let us remind us of
the definitions of the of the spin-1/2 matrices:`}),`
`,a.jsx(e.p,{children:`$$
s_x = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & 1\\
1 &  0
\\end{array}
\\right)~
s_y = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & -i\\
i &  0
\\end{array}
\\right)~s_z =\\frac{\\hbar}{2} \\left(\\begin{array}{cc}
1 & 0\\
0 &  -1
\\end{array}
\\right)
$$`}),`
`,a.jsx(e.p,{children:"We then obtain:"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H} = \\mathbf{B}\\cdot\\hat{\\mathbf{s}}\\text{ with }\\mathbf{B} = (\\Omega_x, \\Omega_y, \\Delta)
$$`}),`
`,a.jsx(e.p,{children:`You will go through this calculation in the excercise of
this week.`}),`
`,a.jsx(e.h3,{children:"Case of no perturbation $\\Omega = 0$"}),`
`,a.jsx(e.p,{children:`This is exactly the case of no applied laser fields that we discussed
previously. We simply removed the energy offset
$E_m = \\frac{E_0+E_1}{2}$ and pulled out the factor $\\hbar$, such that
$\\Delta$ measures a frequency. So we have:`}),`
`,a.jsx(e.p,{children:`$$
E_0 = E_m+ \\frac{\\hbar}{2}\\Delta\\
E_1 = E_m- \\frac{\\hbar}{2}\\Delta
$$`}),`
`,a.jsxs(e.p,{children:[`We typically call $\\Delta$ the energy difference between
the levels or the `,a.jsx(e.strong,{children:"detuning"}),"."]}),`
`,a.jsx(e.h3,{children:"Case of no detuning $\\Delta = 0$"}),`
`,a.jsx(e.p,{children:`Let us suppose that the diagonal elements are exactly zero. And for
simplicity we will also keep $\\Omega_y =0$ as it simply complicates the
calculations without adding much to the discussion at this stage. The
Hamiltonian reads then:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} 0  & \\Omega\\ \\Omega &0 \\end{array} \\right)
$$`}),`
`,a.jsx(e.p,{children:`Quite clearly the states $\\varphi_{1,2}$ are not the eigenstates of the
system anymore. How should the system be described now ? We can once
again diagonalize the system and write`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}\\left|\\varphi_{\\pm}\\right\\rangle = E_{\\pm}\\left|\\varphi_\\pm\\right\\rangle\\
E_{\\pm} = \\pm\\frac{\\hbar}{2}\\Omega\\
\\left|\\varphi_\\pm\\right\\rangle = \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:`Two important consequences can be understood from this
result:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The coupling of the two states shifts their energy by $\\Omega$. This
is the idea of level repulsion.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The coupled states are a superposition of the initial states."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`This is also a motivation the formulation of the 'bare' system for
$\\Omega = 0$ and the 'dressed' states for the coupled system.`}),`
`,a.jsx(e.h3,{children:"General case"}),`
`,a.jsx(e.p,{children:`Quite importantly we can solve the system completely even in the general
case. By diagonalizing the Hamiltonian we obtain:`}),`
`,a.jsx(e.p,{children:`$$
E_\\pm = \\pm \\frac{\\hbar}{2} \\sqrt{\\Delta^2+|\\Omega|^2}
$$`}),`
`,a.jsx(e.p,{children:"The energies can be nicely summarized as in Fig."}),`
`,`
`,a.jsx(e.p,{children:"The Eigenstates then read:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_+\\right\\rangle=\\cos\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{-i{\\varphi}/{2}}\\left|0\\right\\rangle+\\sin\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{i{\\varphi}/{2}}\\left|1\\right\\rangle,
$$`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_-\\right\\rangle=-\\sin\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{-i{\\varphi}/{2}}\\left|0\\right\\rangle+\\cos\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{i{\\varphi}/{2}}\\left|1\\right\\rangle,
$$`}),`
`,a.jsx(e.p,{children:"where"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\tan(\\theta) = \\frac{|\\Omega|}{\\Delta}
$$`}),`
`,a.jsx(e.h2,{children:"The Bloch sphere"}),`
`,a.jsx(e.p,{children:`While we could just discuss the details of the above state in the
abstract, it is extremely helpful to visualize the problem on the Bloch
sphere. The idea of the Bloch sphere is that the we have a complex wave
function of well defined norm and two free parameters. So it seems quite
natural to look for a good representation of it. And this is the Bloch
sphere as drawn below`}),`
`,`
`,a.jsx(e.p,{children:`We will see especially its usefulness especially as we discuss the
dynamics of the two-state system.`}),`
`,a.jsx(e.h2,{children:"Dynamical Aspects"}),`
`,a.jsx(e.h3,{children:"Time Evolution of $\\left|\\psi(t)\\right\\rangle$"}),`
`,a.jsx(e.p,{children:`After the static case we now want to investigate the dynamical
properties of the two-state system. We calculate the time evolution of
$\\left|\\psi(t)\\right\\rangle = c_0(t)\\left|0\\right\\rangle + c_1(t)\\left|1\\right\\rangle$
with the Schrödinger equation and the perturbed Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\frac{d}{dt}\\left|\\psi(t)\\right\\rangle=\\hat{H}\\left|\\psi(t)\\right\\rangle,\\
i \\frac{d}{dt}\\left(\\begin{array}{c} c_0(t) \\ c_1(t) \\end{array}\\right) = \\frac{1}{2}\\left( \\begin{array}{cc} \\Delta & \\Omega \\ \\Omega^* & -\\Delta \\end{array} \\right) \\left(\\begin{array}{c} c_0(t) \\ c_1(t) \\end{array} \\right).
$$`}),`
`,a.jsx(e.p,{children:`We have two coupled differential equations and we luckily already know
how to solve them as we have calculated the two eigenenergies in the
previous section. For the state
$\\left|\\psi(t)\\right\\rangle$ we get`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t)\\right\\rangle=\\lambda \\mathrm{e}^{-i{E_+}t/{\\hbar}} \\left|\\psi_+\\right\\rangle + \\mu \\mathrm{e}^{-i{E_-}t/{\\hbar}} \\left|\\psi_-\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`with the factors $\\lambda$ and $\\mu$, which are defined
by the initial state. The most common question is then what happens to
the system if we start out in the bare state
$\\left|0\\right\\rangle$ and then let it evolve under
coupling with a laser ? So what is the probability to find it in the
other state $\\left|1\\right\\rangle$:`}),`
`,a.jsx(e.p,{children:`$$
P_1(t)=\\left|\\left\\langle 1|\\psi(t)\\right\\rangle\\right|^2.
$$`}),`
`,a.jsx(e.p,{children:`As a first step, we have to apply the initial condition
to and express
$\\left|\\varphi\\right\\rangle$ in terms of $|\\psi_+$ and $|\\psi_-$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(0)\\right\\rangle \\overset{!}{=} \\left|0\\right\\rangle\\
= \\mathrm{e}^{i{\\varphi}/{2}} \\left[ \\cos\\left( \\frac{\\theta}{2}\\right) \\left|\\psi_+\\right\\rangle-\\sin\\left(\\frac{\\theta}{2}\\right)\\left|\\psi_-\\right\\rangle\\right]
$$`}),`
`,a.jsx(e.p,{children:`By equating the coefficients we get for $\\lambda$ and
$\\mu$:`}),`
`,a.jsx(e.p,{children:`$$
\\lambda = \\mathrm{e}^{i{\\varphi}/{2}}\\cos\\left(\\frac{\\theta}{2}\\right), \\qquad  \\mu = -\\mathrm{e}^{i{\\varphi}/{2}}\\sin\\left(\\frac{\\theta}{2}\\right).
$$`}),`
`,a.jsx(e.p,{children:"One thus gets:"}),`
`,a.jsx(e.p,{children:`$$
\\hspace{-2mm} P_1(t)=\\left|\\left\\langle 1|\\psi(t)\\right\\rangle\\right|^2 \\
= \\left|\\mathrm{e}^{i\\varphi} \\sin\\left(\\frac{\\theta}{2}\\right)\\cos\\left(\\frac{\\theta}{2}\\right)\\left[\\mathrm{e}^{-i{E_+}t/{\\hbar}} - \\mathrm{e}^{-i{E_-}t/{\\hbar}}\\right]\\right|^2\\
= \\sin^2(\\theta)\\sin^2\\left(\\frac{E_+-E_-}{2\\hbar}t\\right)
$$`}),`
`,a.jsx(e.p,{children:`$P_1(t)$ can be expressed with $\\Delta$ and $\\Omega$
alone. The obtained relation is called Rabi's formula:`}),`
`,a.jsx(e.p,{children:`$$
P_1(t)=\\frac{1}{1+\\left(\\frac{\\Delta}{|\\Omega|}\\right)^2}\\sin^2\\left(\\sqrt{|\\Omega|^2+\\Delta^2}\\frac{t}{2}\\right)
$$`}),`
`,`
`,a.jsx(e.h3,{children:"Visualization of the dynamics in the spin picture"}),`
`,a.jsx(e.p,{children:`While the previous derivation might be the standard one, which certainly
leads to the right results it might not be the most intuitive way of
thinking about the dynamics. They become actually quite transparent in
the spin language and on the Bloch sphere. So let us go back to the
formulation of the Hamiltonian in terms of spins as at the beginning of the lecture.`}),`
`,a.jsx(e.p,{children:`How would the question of the time evolution from $0$ to $1$ and back go
now ? Basically, we would assume that the spin has been initialize into
one of the eigenstates of the $z$-basis and now starts to rotate in some
magnetic field. How ? This can be nicely studied in the Heisenberg
picture, where operators have a time evolution. In the Heisenberg
picture we have:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{d}{dt} \\hat{s}_i = \\frac{i}{\\hbar}\\left[\\hat{H},\\hat{s}_i\\right]\\
\\frac{d}{dt} \\hat{s}_i = \\frac{i}{\\hbar}\\sum_j B_j \\left[\\hat{s}_j,\\hat{s}_i\\right]\\`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`So to understand we time evolution, we only need to
employ the commutator relationships between the spins:`}),`
`,a.jsx(e.p,{children:`$$
= \\hbar is_z~~[ s_y, s_z] = \\hbar is_x~~[ s_z, s_x] = \\hbar is_y
$$`}),`
`,a.jsx(e.p,{children:`For the specific case of $B_x=\\Omega$, $B_y = B_z = 0$,
we have then:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{d}{dt} \\hat{s}_x = 0\\
\\frac{d}{dt} \\hat{s}_y = -\\Omega \\hat{s}_z\\
\\frac{d}{dt} \\hat{s}_z = \\Omega \\hat{s}_y`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`So applying a field in x-direction leads to a rotation of the spin
around the $x$ axis with velocity $\\Omega$. We can now use this general
picture to understand the dynamics as rotations around an axis, which is
defined by the different components of the magnetic field.`}),`
`,a.jsx(e.h2,{children:"A few words on the quantum information notation"}),`
`,a.jsxs(e.p,{children:[`The qubit is THE basic ingredient of quantum computers. A nice way to
play around with them is actually the `,a.jsx(e.a,{href:"https://quantum-computing.ibm.com/",children:`IBM Quantum
experience`}),`. However, you will
typically not find Pauli matrices etc within these systems. The typical
notation there is:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$R_x(\\phi)$ is a rotation around the x-axis for an angle $\\phi$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Same holds for $R_y$ and $R_z$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$X$ denotes the rotation around the x axis for an angle $\\pi$. So it
transforms $\\left|1\\right\\rangle$ into
$\\left|0\\right\\rangle$ and vise versa.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$Z$ denotes the rotation around the x axis for an angle $\\pi$. So it
transforms $\\left|+\\right\\rangle$ into
$\\left|-\\right\\rangle$ and vise versa.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`The most commonly used gate is actually one that we did not talk about
at all, it is the `,a.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
$\\left|1\\right\\rangle$ into
$\\left|-\\right\\rangle$ and
$\\left|0\\right\\rangle$ into
$\\left|+\\right\\rangle$:`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}\\left|1\\right\\rangle = \\left|-\\right\\rangle  ~   \\hat{H}\\left|0\\right\\rangle = \\left|+\\right\\rangle\\
\\hat{H}\\left|-\\right\\rangle = \\left|1\\right\\rangle  ~   \\hat{H}\\left|+\\right\\rangle = \\left|0\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"In the forth lecture we will see how it is that a time-dependent field can actually couple two atomic states, which are normally of very different energies."}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-ct1",children:[`
`,a.jsxs(e.p,{children:["Quantum Mechanics, Volume 1. Cohen-Tannoudji, Diu, Laloe. Wiley-VCH, 2006. ",a.jsx(e.a,{href:"#user-content-fnref-ct1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:["See the discussions of the next lecture ",a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Zfe(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(nk,{...t})}):nk(t)}const rk=Object.freeze(Object.defineProperty({__proto__:null,default:Zfe,frontmatter:Kfe},Symbol.toStringTag,{value:"Module"})),e0e={author:["Fred Jendrzejewski","Selim Jochim"],order:4,title:"Lecture 4 - Atoms in oscillating fields"};function ik(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In the lecture, we will see how a time dependent coupling allows us to
engineer a new Hamiltonian. Most importantly, we will discuss the
resonant coupling of two levels and the decay of a single level to a
continuum.`}),`
`,a.jsx(e.p,{children:`In the last lecture, we discussed the properties of two
coupled levels. However, we did not elaborate at any stage how such a
system might emerge in a true atom. Two fundamental questions come to
mind:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`How is it that a laser allows to treat two atomic levels of very
different energies as if they were degenerate ?`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`An atom has many energy levels $E_n$ and most of them are not
degenerate. How can we reduce this complicated structure to a
two-level system?`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`The solution is to resonantly couple two of the atom's levels by
applying an external, oscillatory field, which is very nicely discussed
in chapter 12 of Ref. `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2002",id:"user-content-fnref-2002","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-cohen_tannoudji_1998",id:"user-content-fnref-cohen_tannoudji_1998","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),`. We will discuss
important and fundamental properties of systems with a time-dependent
Hamiltonian.`]}),`
`,a.jsx(e.p,{children:`We will discuss a simple model for the atom in the oscillatory field. We
can write down the Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\hat{H}_0 + \\hat{V}(t).
$$`}),`
`,a.jsx(e.p,{children:`Here, $\\hat{H}_0$ belongs to the atom and $V(t)$
describes the time-dependent field and its interaction with the atom. We
assume that $\\left|n\\right\\rangle$ is an eigenstate of
$\\hat{H}_0$ and write:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0\\left|n\\right\\rangle = E_n \\left|n\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`If the system is initially prepared in the state
$\\left|i\\right\\rangle$, so that`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t=0)\\right\\rangle = \\left|i\\right\\rangle,
$$`}),`
`,a.jsx(e.p,{children:"what is the probability"}),`
`,a.jsx(e.p,{children:`$$
P_m(t) = \\left|\\left\\langle m|\\psi(t)\\right\\rangle\\right|^2
$$`}),`
`,a.jsx(e.p,{children:`to find the system in the state
$\\left|m\\right\\rangle$ at the time $t$?`}),`
`,a.jsx(e.h2,{children:"Evolution Equation"}),`
`,a.jsx(e.p,{children:`The system $\\left|\\psi(t)\\right\\rangle$ can be expressed as
follows:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t)\\right\\rangle = \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\left|n\\right\\rangle,
$$`}),`
`,a.jsx(e.p,{children:`where the exponential is the time evolution for
$\\hat{H}_1 =~0$. We plug this equation in the Schrödinger equation and
get:`}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\sum_n\\left(\\dot{\\gamma}_n(t)-i\\frac{E_n}{\\hbar}\\gamma_n(t)\\right)\\mathrm{e}^{-i{E_n}t/{\\hbar}}\\left|n\\right\\rangle = \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}}\\left(\\hat{H}_0 + \\hat{V}\\right) \\left|n\\right\\rangle\\
\\Longleftrightarrow i\\hbar\\sum_n \\dot{\\gamma}_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\left|n\\right\\rangle
= \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\hat{V} \\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`If we multiply the equation with $\\left\\langle k\\right|$ we
obtain a set of coupled differential equations`}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\dot{\\gamma}_k \\mathrm{e}^{-i{E_k}t/{\\hbar}} = \\sum_n \\gamma_n \\mathrm{e}^{-{E_n}t/{\\hbar}}\\left\\langle k\\right|\\hat{V}\\left|n\\right\\rangle,\\
i\\hbar \\dot{\\gamma}_k = \\sum_n \\gamma_n \\mathrm{e}^{-i {(E_n-E_k)}t/{\\hbar}} \\left\\langle k\\right| \\hat{V}\\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`with initial conditions
$\\left|\\psi(t=0)\\right\\rangle$. They determine the full
time evolution.`}),`
`,a.jsx(e.p,{children:`The solution of this set of equations depends on the details of the
system. However, there are a few important points:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`For short enough times, the dynamics are driving by the coupling
strength
$\\left\\langle k\\right|\\hat{V} \\left|n\\right\\rangle$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The right-hand sight will oscillate on time scales of $E_n-E_k$ and
typically average to zero for long times.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`If the coupling element is an oscillating field
$\\propto e^{i\\omega_L t}$, it might put certain times on resonance
and allow us to avoid the averaging effect. It is exactly this
effect, which allows us to isolate specific transitions to a very
high degree `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})})]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We will now see how the two-state system emerges from these
approximations and then set-up the perturbative treatment step-by-step.`}),`
`,a.jsx(e.h2,{children:"Rotating wave approximation"}),`
`,a.jsx(e.p,{children:`We will now assume that the coupling term in indeed an oscillating field
with frequency $\\omega_L$, so it reads:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{V} = \\hat{V}_0 \\cos(\\omega_Lt) = \\frac{\\hat{V}_0}{2} \\left(e^{i\\omega_lt}+e^{-i\\omega_lt}\\right)
$$`}),`
`,a.jsx(e.p,{children:`We will further assume the we would like use it to
isolate the transition $i\\rightarrow f$, which is of frequency
$\\hbar \\omega_0 = E_f - E_i$. The relevant quantity is then the detuning
$\\delta = \\omega_0 - \\omega_L$. If it is much smaller than any other
energy difference $E_n-E_i$, we directly reduce the system to the
following closed system:`}),`
`,a.jsx(e.p,{children:`$$
i\\dot{\\gamma}_i = \\gamma_f \\mathrm{e}^{-i \\delta t} \\Omega\\
i\\dot{\\gamma}_f = \\gamma_i \\mathrm{e}^{i \\delta t}\\Omega^*
$$`}),`
`,a.jsx(e.p,{children:`Here we defined
$\\Omega = \\left\\langle i\\right| \\frac{\\hat{V_0}}{2\\hbar}\\left|f\\right\\rangle$.
And to make it really a time-of the same form as the two-level system
from the last lecture, we perform the transformation
$\\gamma_f = \\tilde{\\gamma}_f e^{i\\delta t}$, which reduces the system
too:`}),`
`,a.jsx(e.p,{children:`$$
i \\dot{\\gamma}_i = \\Omega \\tilde{\\gamma}_f \\
i\\dot{\\tilde{\\gamma}}_f = \\delta \\tilde{\\gamma}_f + \\Omega^* \\gamma_i
$$`}),`
`,a.jsx(e.p,{children:`This has exactly the form of the two-level system that
we studied previously.`}),`
`,a.jsx(e.h3,{children:"Adiabatic elimination"}),`
`,a.jsx(e.p,{children:`We can now proceed to the quite important case of far detuning, where
$\\delta \\gg \\Omega$. In this case, the final state
$\\left|f\\right\\rangle$ gets barely populated and the time
evolution can be approximated to to be zero [@lukin].`}),`
`,a.jsx(e.p,{children:`$$
\\dot{\\tilde{\\gamma}}_f = 0
$$`}),`
`,a.jsxs(e.p,{children:[`We can use this equation to eliminate $\\gamma$ from the
time evolution of the ground state. This approximation is known as
`,a.jsx(e.em,{children:"adiabatic elimination"}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\tilde{\\gamma}_f = \\frac{\\Omega^*}{\\delta}\\gamma_i\\
\\Rightarrow i\\hbar \\dot{\\gamma}_i = \\frac{|\\Omega|^2}{\\delta} \\tilde{\\gamma}_i
$$`}),`
`,a.jsxs(e.p,{children:[`The last equation described the evolution of the initial
state with an energy $E_i = \\frac{|\\Omega|^2}{\\delta}$. If the Rabi
coupling is created through an oscillating electric field, i.e. a laser,
this is know as the `,a.jsx(e.strong,{children:"light shift"})," or the ",a.jsx(e.strong,{children:"optical dipole potential"}),`.
It is this concept that underlies the optical tweezer for which Arthur
Ashkin got the `,a.jsx(e.a,{href:"https://www.nobelprize.org/uploads/2018/10/advanced-physicsprize2018.pdf",children:"nobel prize in the 2018"}),"."]}),`
`,a.jsx(e.h3,{children:"Example: Atomic clocks in optical tweezers"}),`
`,a.jsxs(e.p,{children:["A neat example that ties the previous concepts together is ",a.jsx(e.a,{href:"https://arxiv.org/abs/1908.05619v2",children:`the recent
paper`}),". The experimental setup is visualized in the figure below."]}),`
`,`
`,a.jsxs(e.p,{children:[`While nice examples these clocks are still far away from the best clocks
out there, which are based on `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.87.637",children:"optical lattice clocks and ions"}),"."]}),`
`,a.jsx(e.h2,{children:"Perturbative Solution"}),`
`,a.jsx(e.p,{children:`The more formal student might wonder at which points all these rather
hefty approximation are actually valid, which is obviously a very
substantial question. So, we will now try to isolate the most important
contributions to the complicated system through perturbation theory. For
that we will assume that we can write:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{V}(t) =\\lambda \\hat{H}_1(t)
$$`}),`
`,a.jsxs(e.p,{children:[`, where $\\lambda$ is a small parameter. In other words
we assume that the initial system $\\hat{H}_0$ is only weakly perturbed.
Having identified the small parameter $\\lambda$, we make the
`,a.jsx(e.em,{children:"perturbative ansatz"})]}),`
`,a.jsx(e.p,{children:`$$
\\gamma_n(t) = \\gamma_n^{(0)} + \\lambda \\gamma_n^{(1)} + \\lambda^2 \\gamma_n^{(2)} + \\cdots
$$`}),`
`,a.jsx(e.p,{children:`and plug this ansatz in the evolution equations and sort
them by terms of equal power in $\\lambda$.`}),`
`,a.jsx(e.p,{children:"The $0$th order reads"}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\dot{\\gamma}_k^{(0)} = 0.
$$`}),`
`,a.jsx(e.p,{children:`The $0$th order does not have a time evolution since we
prepared it in an eigenstate of $\\hat{H}_0$. Any evolution arises due
the coupling, which is at least of order $\\lambda$.`}),`
`,a.jsx(e.p,{children:"So, for the $1$st order we get"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`i\\hbar \\dot{\\gamma}_k^{(1)} = \\sum_n \\gamma_n^{(0)} \\mathrm{e}^{-i(E_n-E_k)t/{\\hbar}}\\left\\langle k\\right|\\hat{H}_1\\left|n\\right\\rangle.
$$`}),`
`,a.jsx(e.h3,{children:"First Order Solution (Born Approximation)"}),`
`,a.jsx(e.p,{children:`For the initial conditions $\\psi(t=0)=\\left|i\\right\\rangle$
we get`}),`
`,a.jsx(e.p,{children:`$$
\\gamma_k^{(0)}(t) = \\delta_{ik}.
$$`}),`
`,a.jsx(e.p,{children:`We plug this in the $1$st order approximation and obtain the rate for the system to go
to the final state $\\left|f\\right\\rangle$:`}),`
`,a.jsx(e.p,{children:`$$
i \\hbar\\dot{\\gamma}^{(1)} = \\mathrm{e}^{i(E_f-E_i)t/{\\hbar}} \\left\\langle f\\right|\\hat{H}_1 \\left|i\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"Integration with $\\gamma_f^{(1)}(t=0) = 0$ yields"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\gamma_f^{(1)} = \\frac{1}{i\\hbar}\\int\\limits_0^t \\mathrm{e}^{i(E_f-E_i)t'/{\\hbar}} \\left\\langle f\\right| \\hat{H}_1(t')\\left|i\\right\\rangle \\mathop{}!\\mathrm{d}t',
$$`}),`
`,a.jsx(e.p,{children:`so that we obtain the probability for ending up in the
final state:`}),`
`,a.jsx(e.p,{children:`$$
P_{i\\to f}(t) = \\lambda^2\\left| \\gamma_f^{(1)}(t)\\right|^2.
$$`}),`
`,a.jsx(e.p,{children:`Note that $P_{i\\to f}(t) \\ll 1$ is the condition for
this approximation to be valid!`}),`
`,a.jsx(e.p,{children:a.jsx(e.strong,{children:"Example 1: Constant Perturbation."})}),`
`,`
`,a.jsx(e.p,{children:"Sketch of a constant perturbation."}),`
`,a.jsx(e.p,{children:`We apply a constant perturbation in the time interval
$\\left[0,T\\right]$, as shown in above. If we use the expression for $\\gamma_f^{(1)}$ and set $\\hbar \\omega_0 = E_f-E_i$, we get`}),`
`,a.jsx(e.p,{children:`$$
\\gamma_f^{(1)}(t\\geq T) = \\frac{1}{i \\hbar} \\left\\langle f\\right|\\hat{H}_1\\left|i\\right\\rangle \\frac{\\mathrm{e}^{i\\omega_0 T}-1}{i\\omega_0},
$$`}),`
`,a.jsx(e.p,{children:"and therefore"}),`
`,a.jsx(e.p,{children:`$$
P_{i\\to f} = \\frac{1}{\\hbar^2}\\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2 \\underbrace{\\frac{\\sin^2\\left(\\omega_0\\frac{T}{2}\\right)}{\\left(\\frac{\\omega_0}{2}\\right)^2}}_{\\mathrm{y}(\\omega_0,T)}.
$$`}),`
`,a.jsx(e.p,{children:"A sketch of $\\mathrm{y}(\\omega_0,T)$ is shown below"}),`
`,`
`,a.jsx(e.p,{children:"A sketch of y"}),`
`,a.jsx(e.p,{children:`We can push this calculation to the extreme case of
$T\\rightarrow \\infty$. This results in a delta function, which is peaked
round $\\omega_0 = 0$ and we can write:`}),`
`,a.jsx(e.p,{children:`$$
P_{i\\to f} =  T\\frac{2\\pi}{\\hbar^2}\\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2\\delta(\\omega_0)
$$`}),`
`,a.jsxs(e.p,{children:["This is the celebrated ",a.jsx(e.strong,{children:"Fermi's golden rule"}),"."]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Example 2: Sinusoidal Perturbation."})," For the perturbation"]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_1(t) = \\left{ \\begin{array}{ccl} \\hat{H}_1\\mathrm{e}^{-i\\omega t} && \\text{for}; 0 < t < T \\ 0 &&\\text{otherwise}\\end{array} \\right.
$$`}),`
`,a.jsx(e.p,{children:"we obtain the probability"}),`
`,a.jsx(e.p,{children:`$$
P_{i\\to f} (t \\geq T) = \\frac{1}{\\hbar^2} \\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2 \\mathrm{y}(\\omega_0 - \\omega, T).
$$`}),`
`,a.jsx(e.p,{children:"At $\\omega = \\left|E_f - E_i\\right|/\\hbar$ we are on resonance."}),`
`,a.jsx(e.p,{children:"In the fifth lecture, we will start to dive into the hydrogen atom."}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-2002",children:[`
`,a.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. Quantum Mechanics. Springer-Verlag, 2002. ",a.jsx(e.a,{href:"#user-content-fnref-2002","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-cohen_tannoudji_1998",children:[`
`,a.jsxs(e.p,{children:["Claude Cohen-Tannoudji, Jacques Dupont-Roc, Gilbert Grynberg. Atom-Photon Interactions. Wiley-VCH Verlag GmbH, 1998. ",a.jsx(e.a,{href:"#user-content-fnref-cohen_tannoudji_1998","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`This is the idea behind atomic and optical clocks, which work
nowadays at $10^{-18}$. `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function t0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(ik,{...t})}):ik(t)}const ak=Object.freeze(Object.defineProperty({__proto__:null,default:t0e,frontmatter:e0e},Symbol.toStringTag,{value:"Module"})),n0e={author:["Fred Jendrzejewski","Selim Jochim"],order:5,title:"Lecture 5 - The Hydrogen Atom"};function sk(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will first discuss the diagonalization of the
harmonic oscillator and then discuss the main properties of the hydrogen
atom.`}),`
`,a.jsx(e.p,{children:`In the previous lectures we have seen how to treat eigenstates of the
two-level system and then how we can derive its effective emergence from
some complex level structure if we apply oscillating
fields.`}),`
`,a.jsx(e.p,{children:`Today, we will increase the complexity towards the harmonic oscillator
and the hydrogen atom.`}),`
`,a.jsx(e.h1,{children:"The harmonic oscillator"}),`
`,a.jsx(e.p,{children:`The harmonic oscillator is another great toy model to understand certain
properties of quantum mechanical systems. Most importantly, it is a
great introduction into the properties of bound systems and ladder
operators. The basic Hamiltonian comes along in a rather innocent
fashion, namely:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H} = \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega^2}{2}\\hat{x}^2
$$`}),`
`,a.jsx(e.p,{children:`The two variables $\\hat{p}$ and $\\hat{x}$ are
non-commuting $[\\hat{x}, \\hat{p}] = i\\hbar$, so they cannot be measured
at the same time. We would now like to put the operator into a diagonal
form such that it reads something like:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H} = \\sum_n \\epsilon_n \\left|n\\right\\rangle\\left\\langle n\\right|
$$`}),`
`,a.jsxs(e.p,{children:["We will follow he quite closely ",a.jsx(e.a,{href:"https://ocw.mit.edu/courses/nuclear-engineering/22-51-quantum-theory-of-radiation-interactions-fall-2012/lecture-notes/MIT22_51F12_Ch9.pdf",children:"this discussion"}),"."]}),`
`,a.jsx(e.h2,{children:"The ladder operators"}),`
`,a.jsx(e.p,{children:`We would like to get the spectrum first. So make the equation look a bit
nicer we will define $\\hat{p} = \\hat{P} \\sqrt{m\\omega}$ and
$\\hat{x} = \\frac{\\hat{X}}{\\sqrt{m\\omega}}$ such that we have:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H} = \\frac{\\omega}{2}\\left(\\hat{P}^2 + \\hat{X}^2\\right)
$$`}),`
`,a.jsxs(e.p,{children:[a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),` The next step is then to define the ladder
operators:`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{a} = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\hat{X}+i\\hat{P}\\right)\\
\\hat{a}^\\dag = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\hat{X}-i\\hat{P}\\right)\\
$$`}),`
`,a.jsx(e.p,{children:`At this stage we can just try to rewrite the Hamiltonian
in terms of the operators, such that:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{a}^\\dag \\hat{a} = \\frac{1}{2\\hbar}(\\hat{X}-i\\hat{P})(\\hat{X}+i\\hat{P})\\
= \\frac{1}{2\\hbar}(\\hat{X}^2 +\\hat{P}^2 -\\hbar)\\
\\frac{1}{2}(X^2 +\\hat{P}^2 ) = \\hbar \\left(\\hat{a}^\\dag \\hat{a}-\\frac{1}{2}\\right)
$$`}),`
`,a.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\hbar \\omega \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dag a
$$`}),`
`,a.jsx(e.p,{children:`At this stage we have diagonalized the Hamiltonian, what
remains to be understood is the the values that $\\hat{a}^\\dag a$ can
take.`}),`
`,a.jsx(e.h2,{children:"Action of the ladder operators in the Fock basis"}),`
`,a.jsx(e.p,{children:"We would like to understand the basis, which is defined by:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{N} \\left|n\\right\\rangle = n \\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`The non-commutation between $\\hat{X}$ and $\\hat{P}$ is
translated to the ladder operators as:`}),`
`,a.jsx(e.p,{children:`$$
= \\frac{1}{2\\hbar}[\\hat{X}+iP,\\hat{X}-i\\hat{P}] = 1\\
~[\\hat{N}, a] = -\\hat{a}\\
~[\\hat{N}, a^\\dag] = a^\\dag
$$`}),`
`,a.jsx(e.p,{children:"From these relationship we can show then that:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{a}\\left|n\\right\\rangle = \\sqrt{n}\\left|n-1\\right\\rangle\\
\\hat{a}^\\dag \\left|n\\right\\rangle = \\sqrt{n+1}\\left|n+1\\right\\rangle\\
$$`}),`
`,a.jsx(e.p,{children:`These relations are the motivation for the name ladder
operators as they connect the different eigenstates. And they are
raising/lowering the quantum number by one. Finally we have to find the
lower limit. And this is quite naturally 0 as
$n = \\left\\langle n\\right|\\hat{N}\\left|n\\right\\rangle = \\left\\langle\\psi_1\\right|\\left|\\psi_1\\right\\rangle\\geq 0$.
So we can construct the full basis by just defining the action of the
lowering operator on the zero element
$a\\left|0\\right\\rangle = 0$ and the other operators are
then constructed as:`}),`
`,a.jsx(e.p,{children:`$$
\\left|n\\right\\rangle = \\frac{(a^\\dag)^n}{\\sqrt{n!}}\\left|0\\right\\rangle
$$`}),`
`,a.jsx(e.h2,{children:"Spatial representation of the eigenstates"}),`
`,a.jsx(e.p,{children:`While we now have the spectrum it would be really nice to obtain the
spatial properties of the different states. For that we have to project
them onto the x basis. Let us start out with the ground state for which
we have $\\hat{a}\\left|0\\right\\rangle= 0$:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle x\\right|\\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}\\hat{x} +i \\frac{1}{\\sqrt{m\\omega}}\\hat{p}\\right)\\left|0\\right\\rangle= 0\\
\\left(\\sqrt{\\frac{m\\omega}{\\hbar}}x + \\sqrt{\\frac{\\hbar}{m\\omega}}\\partial_x\\right)\\psi_0(x)= 0\\
\\Rightarrow \\psi_0(x) \\propto e^{-\\frac{x^2}{2a_{HO}^2}}
$$`}),`
`,a.jsx(e.p,{children:`This also introduces the typical distance in the quantum
harmonic oscillator which is given by $a_{HO} =\\sqrt{\\hbar/m\\omega}$.
The other states are solutions to the defining equations:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_n(x) = \\frac{1}{\\sqrt{n!}2^n}\\left(\\sqrt{m\\omega}x - \\frac{1}{\\sqrt{m\\omega}}\\frac{d}{dx}\\right)^n \\psi_0(x)\\
\\psi_n(x) = \\frac{1}{\\sqrt{n!}2^n}H_n(x) \\psi_0(x)\\
$$`}),`
`,a.jsx(e.p,{children:"where $H_n(x)$ are the Hermite polynoms."}),`
`,a.jsx(e.h1,{children:"The hamiltonian of the hydrogen atom"}),`
`,a.jsxs(e.p,{children:["The hydrogen atom plays at central role in atomic physics as it is ",a.jsx(e.em,{children:"the"}),`
basic ingredient of atomic structures. It describes a single `,a.jsx(e.em,{children:"electron"}),`,
which is bound to the nucleus of a single `,a.jsx(e.em,{children:"proton"}),`. As such it is the
simplest of all atoms and can be described analytically within high
precision. This has motivated an enormous body of literature on the
problem, which derives all imaginable properties in nauseating detail.
Therefore, we will focus here on the main properties and only sketch the
derivations, while we will reference to the more technical details.`]}),`
`,`
`,a.jsx(e.p,{children:`Sketch of the hydrogen atom with the relative coordinate and the
coordinates of the proton and the electron.`}),`
`,a.jsx(e.p,{children:"For the hydrogen atom as shown in above, we can write down the Hamiltonian"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}=\\frac{{{\\hat{\\vec{p}}}^2_\\text{p}}}{2m_\\text{p}} + \\frac{{\\hat{\\vec{p}}}^2_\\text{e}}{2m_\\text{e}} - \\frac{Ze^2}{4\\pi\\epsilon_0 r},
$$`}),`
`,a.jsx(e.p,{children:`where $Ze$ is the nuclear charge. To solve the problem,
we have to find the right Hilbert space. We can not solve the problem of
the electron alone. If we do a separation of coordinates, i.e., we
separate the Hamiltonian into the the center of mass and the relative
motion, we get`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H} = \\underbrace{\\frac{{\\hat{\\vec{p}}}^2_{\\textrm{cm}}}{2M}}`,a.jsx(e.em,{children:"{\\hat{H}"}),"{\\textrm{cm}}} + \\underbrace{\\frac{{\\hat{\\vec{p}}}^2_\\text{r}}{2\\mu}- \\frac{Ze^2}{4\\pi\\epsilon_0r}}",a.jsx(e.em,{children:"{\\hat{H}"}),`{\\text{atom}}}
$$`]}),`
`,a.jsx(e.p,{children:`with the reduced mass $1/\\mu=1/m_\\text{e}+1/m_\\text{p}$.
If the state of the hydrogen atom $\\left|\\psi\\right\\rangle$
is an eigenstate of $\\hat{H}$, we can write`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H}\\left|\\psi\\right\\rangle=\\left(\\hat{H}`,a.jsx(e.em,{children:"\\textrm{cm}+\\hat{H}"}),`{\\text{atom}} \\right)\\left|\\psi_\\textrm{cm}\\right\\rangle\\otimes \\left|\\psi_\\text{atom}\\right\\rangle \\
= \\left( E_{\\text{kin}} + E_\\text{atom} \\right) \\left|\\psi\\right\\rangle.
$$`]}),`
`,a.jsx(e.p,{children:`Both states are eigenstates of the system. The state
$\\left|\\psi\\right\\rangle$ can be split up as shown since
the two degrees of freedom are generally not entangled.`}),`
`,a.jsxs(e.p,{children:[a.jsx(e.img,{src:"figures/Bildschirmfoto-2018-09-28-um-16-07-07/Bildschirmfoto-2018-09-28-um-16-07-07",alt:`Sketch of the hydrogen atom with the relative coordinate and the
coordinates of the proton and the electron.
`}),`{#261310
width="0.70\\columnwidth"}`]}),`
`,a.jsx(e.p,{children:"The wave function of the system then reads:"}),`
`,a.jsx(e.p,{children:`$$
\\psi(\\vec{R},\\vec{r}) = \\left( \\left\\langle R\\right| \\otimes \\left\\langle r\\right|\\right)\\left( \\left|\\psi_\\textrm{cm}\\right\\rangle \\otimes \\left|\\psi_{\\text{atom}}\\right\\rangle\\right)\\
= \\psi(\\vec{R}) \\cdot \\psi (\\vec{r})
$$`}),`
`,a.jsx(e.p,{children:`Our goal is now to find the eigenfunctions and
eigenenergies of $\\hat{H}_\\text{atom}$. In order to further divide the
Hilbert space, we can use the symmetries.`}),`
`,a.jsx(e.h1,{children:"Conservation of orbital angular momentum"}),`
`,a.jsxs(e.p,{children:[`$\\hat{H}_\\text{atom}$ possesses spherical symmetry, which implies that
`,a.jsx(e.strong,{children:"orbital angular momentum"}),` $\\hat{\\vec{L}}$ is conserved. It is defined
as:`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\vec{L}}=\\hat{\\vec{r}} \\times \\hat{\\vec{p}}
$$`}),`
`,a.jsx(e.p,{children:"In other words, we have:"}),`
`,a.jsx(e.p,{children:`$$
= 0
$$`}),`
`,a.jsx(e.p,{children:`Let us show first that the kinetic term commutes with
the angular momentum operator, We will employ the commutator
relationships for position and momentum $[x_i, p_j]=i\\hbar$ and the
relationship $[A,BC] = [A,B]C+B[A,C]$ and
$[f(x), p_x] = [x,p_x]\\frac{\\partial f(x)}{\\partial x}$. So we obtain:`}),`
`,a.jsx(e.p,{children:`$$
= [p_x^2,xp_y]-[p_y^2,yp_x] \\
= [p_x^2,x]p_y-[p_y^2,y] p_x\\
=i\\hbar 2 p_xp_y-2i\\hbar p_y p_x\\
= 0
$$`}),`
`,a.jsx(e.p,{children:`Analog calculations show that $L_y$ and $L_z$ commute.
In a similiar fashion we can verify that the potential term commutes
with the different components of $\\hat{\\vec{L}}$`}),`
`,a.jsx(e.p,{children:`$$
= [\\frac{1}{r}, xp_y]-[\\frac{1}{r}, yp_x]\\
= x[\\frac{1}{r}, p_y]-y[\\frac{1}{r}, p_x]\\
= -x \\frac{yi\\hbar}{2r^{3/2}}+y\\frac{xi\\hbar}{2r^{3/2}}\\
=0
$$`}),`
`,a.jsxs(e.p,{children:[`We can therefore decompose the eigenfunctions of the
hydrogen atom over the eigenbasis of the angular momentum operator. A
detailled discussion of the properties of $\\vec{L}$ can be found in
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:"Appendix B of Hertel"}),`. To find the eigenbasis, we first need to
identify the commutation relationships between the components of
$\\hat{\\vec{L}}$. We can calculate them following commutation
relationships:`]}),`
`,a.jsx(e.p,{children:`$$
= [yp_z - zp_y, zp_x - xp_z]\\
=[yp_z, zp_x]-[yp_z,xp_z]- [zp_y, zp_x] + [zp_y,xp_z]\\
=[yp_z, zp_x] + [zp_y,xp_z]\\
=[yp_z, z]p_x +x[zp_y,p_z]\\
=-i\\hbar yp_x +i\\hbar xp_y\\
= i\\hbar L_z
$$`}),`
`,a.jsx(e.p,{children:`This relationship holds for all the other components too
and we have in general:`}),`
`,a.jsx(e.p,{children:`$$
= i\\hbar \\epsilon_{ijk}L_k
$$`}),`
`,a.jsx(e.p,{children:`The orbital angular momentum is therefore part of the
large family of angular momentum operators, which also comprises spin
etc. In particular the different components are not independent, and
therefore we cannot form a basis out the three components. A suitable
choice is actually to use the following combinations:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\vec{L}}^2\\left|l,m_l\\right\\rangle = \\hbar^2 l (l+1)\\left|l,m_l\\right\\rangle\\
\\hat{L}_z\\left|l,m_l\\right\\rangle = \\hbar m_l \\left|l,m_l\\right\\rangle
$$`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["$l$ is a non-negative integer and it is called the ",a.jsx(e.strong,{children:`orbital angular
momentum quantum number`}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`$m_l$ takes values $-l, -l+1, ..., l-1, l$ and it is sometimes
called the `,a.jsx(e.strong,{children:"projection of the angular momentum"}),"."]}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"Eigenfunction of the angular momentum operators"}),`
`,a.jsx(e.p,{children:`Having identified the relevant operators it would be nice to obtain a
space representation of them. This works especially nicely in spherical
coordinates. There, we get`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{L}`,a.jsx(e.em,{children:"z= - i \\hbar \\partial"}),`{\\phi}\\
\\hat{\\vec{L}}^2 = - \\hbar^2 \\left[\\frac{1}{\\sin(\\theta)}\\partial_{\\theta} \\left( \\sin(\\theta) \\partial_\\theta\\right) + \\frac{1}{\\sin^2(\\theta)} \\partial_{\\phi\\phi} \\right].
$$`]}),`
`,a.jsx(e.p,{children:"The corresponding wave functions are"}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\theta, \\phi | l,m_l\\right\\rangle = Y_{lm}(\\theta,\\phi).
$$`}),`
`,a.jsxs(e.p,{children:["Where $Y_{lm}(\\theta, \\phi)$ are the ",a.jsx(e.strong,{children:"spherical harmonics"}),"."]}),`
`,a.jsx(e.h1,{children:"The radial wave equation"}),`
`,a.jsx(e.p,{children:`Given that we now know that the angular momentum is conserved for the
hydrogen atom, we can actually rewrite the Hamltonian in terms of the angular momentum as
we find:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\text{atom} = \\hat{H}_r + \\frac{\\hat{L}}{2\\mu r^2}+V(r) \\
\\hat{H}_r = -\\frac{\\hbar^2}{2\\mu}\\frac{1}{r^2}\\frac{\\partial}{\\partial r}\\left(r^2\\frac{\\partial}{\\partial r}\\right)
$$`}),`
`,a.jsxs(e.p,{children:[`We can now separate out the angular part and decompose
it over the eigenfunctions of $\\hat{\\vec{L}}$, such that we make the
ansatz `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\psi (r,\\theta,\\phi) = R(r) Y_{lm}(\\theta,\\phi)
$$`}),`
`,a.jsx(e.p,{children:`We can plug this separated ansatz in the Schrödinger equation. We
already solved the angular in the discussion of the angular momentum and
for the radial part we obtain:`}),`
`,a.jsx(e.p,{children:`$$
-\\frac{\\hbar^2}{2\\mu}\\frac{1}{r}\\frac{d^2(rR(r))}{dr^2} - \\frac{Ze^2}{4\\pi\\epsilon_0 r} R(r) + \\frac{\\hbar^2}{2\\mu}\\frac{l(l+1)}{r^2}R(r) = ER(r)
$$`}),`
`,a.jsx(e.p,{children:"Substituting $R(r)=u(r)/r$ leads to"}),`
`,a.jsxs(e.p,{children:[`$$
-\\frac{\\hbar^2}{2\\mu}\\frac{d^2}{dr^2}u(r) +\\underbrace{ \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0 r} + \\frac{\\hbar^2}{2\\mu} \\frac{l(l+1)}{r^2} \\right)}`,a.jsx(e.em,{children:"{V"}),`{\\text{eff}}} u(r) = E , u(r),
$$`]}),`
`,a.jsxs(e.p,{children:[`which is known as the "radial wave equation". It is a
very general result for `,a.jsx(e.em,{children:"any"}),` central potential. It can also be used to
describe unbound states ($E>0$) that occur during scattering.`]}),`
`,a.jsx(e.p,{children:`In the next lecture we will look into the energy scales of the hydrogen atom and then start
coupling different levels.`}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:[`The commutator between $\\hat{X}$ and $\\hat{P}$ is still as for $x$
and $p$. `,a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,a.jsxs(e.p,{children:[`Only if the system is in a well-defined angular momentum state, we
can write it down like this. `,a.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function r0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(sk,{...t})}):sk(t)}const ok=Object.freeze(Object.defineProperty({__proto__:null,default:r0e,frontmatter:n0e},Symbol.toStringTag,{value:"Module"})),i0e={author:["Fred Jendrzejewski","Selim Jochim"],order:6,title:"Lecture 6 - The dipole approximation in the hydrogen atom"};function lk(t){const e={a:"a",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We will continue with some properties of the hydrogen atom. First
compare it to the harmonic oscillator, then look into dipole transitions
and end with the coupling to static magnetic fields.`}),`
`,a.jsx(e.p,{children:`In the last lecture, we discussed the basic properties of the
hydrogen atom and found its eigenstates. We will now summarize the most
important properties and look into its orbitals. From that we will
understand the understand the interaction with electromagnetic waves and
introduce the selection rules for dipole transitions.`}),`
`,a.jsx(e.h1,{children:"The energies of Hydrogen and its wavefunctions"}),`
`,a.jsx(e.p,{children:`In the last lecture, we looked into hydrogen and saw that we could write
it's Hamiltonian as:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\text{atom} = \\hat{H}_r + \\frac{\\hat{L}}{2\\mu r^2}+V(r) \\
\\hat{H}_r = -\\frac{\\hbar^2}{2\\mu}\\frac{1}{r^2}\\frac{\\partial}{\\partial r}\\left(r^2\\frac{\\partial}{\\partial r}\\right)
$$`}),`
`,a.jsx(e.p,{children:`We could then separate out the angular part and
decompose it as:`}),`
`,a.jsx(e.p,{children:`$$
\\psi (r,\\theta,\\phi) = \\frac{u(r)}{r} Y_{lm}(\\theta,\\phi)
$$`}),`
`,a.jsx(e.p,{children:"The radial wave equation reads then:"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.p,{children:["-\\frac{\\hbar^2}{2\\mu}\\frac{d^2}{dr^2}u(r) +\\underbrace{ \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0 r} + \\frac{\\hbar^2}{2\\mu} \\frac{l(l+1)}{r^2} \\right)}",a.jsx(e.em,{children:"{V"}),`{\\text{eff}}} u(r) = E , u(r),
$$`]}),`
`,a.jsx(e.h2,{children:"Energy scales"}),`
`,a.jsx(e.p,{children:"We can now make the last equation dimensionless, by rewriting:"}),`
`,a.jsx(e.p,{children:`$$
r = \\rho \\tilde{a}_{0}
$$`}),`
`,a.jsx(e.p,{children:"So we rewrite:"}),`
`,a.jsxs(e.p,{children:[`$$
-\\frac{\\hbar^2}{2\\mu \\tilde{a}`,a.jsx(e.em,{children:"{0}^2}\\frac{d^2}{d\\rho^2}u(r) + \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0\\tilde{a}"}),`{0}}\\frac{1}{\\rho} + \\frac{\\hbar^2}{2\\mu \\tilde{a}_{0}^2} \\frac{l(l+1)}{\\rho^2} \\right) u(r) = E , u(r),
$$`]}),`
`,a.jsx(e.p,{children:"This allows us to measure energies in units of:"}),`
`,a.jsx(e.p,{children:`$$
E = \\epsilon R_{y,\\textrm{m}}\\
R_{y,\\textrm{m}} = -\\frac{\\hbar^2}{2\\mu \\tilde{a}_{0}^2}
$$`}),`
`,a.jsx(e.p,{children:"The equation reads then:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d^2}{d\\rho^2}u(\\rho) + \\left( \\frac{\\mu Ze^2 \\tilde{a}_{0}}{\\hbar^2 4\\pi\\epsilon_0}\\frac{2}{\\rho} - \\frac{l(l+1)}{\\rho^2} \\right) u(\\rho) = \\epsilon u(\\rho),
$$`}),`
`,a.jsx(e.p,{children:"If we finally set"}),`
`,a.jsx(e.p,{children:`$$
\\tilde{a}_{0}=\\frac{4\\pi\\epsilon_0 \\hbar^2}{\\mu Z e^2}
$$`}),`
`,a.jsx(e.p,{children:"We obtain the especially elegant formulation:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d^2}{d\\rho^2}u(\\rho) + \\left( \\frac{2}{\\rho} - \\frac{l(l+1)}{\\rho^2} \\right) u(\\rho) = \\epsilon u(\\rho),
$$`}),`
`,a.jsxs(e.p,{children:["We typically call $\\tilde{a}",a.jsxs(e.em,{children:["{0}$ the ",a.jsx(e.strong,{children:"Bohr radius"}),`
for an atom with reduced mass $\\mu$ and with a nucleus with charge
number $Z$. $R`]}),"{y,\\textrm{m}}$ is the ",a.jsx(e.strong,{children:"Rydberg energy"}),` of such an
atom.`]}),`
`,a.jsx(e.p,{children:`The universal constant is defined for the infinite mass limit
$\\mu \\approx m_e$ and for $Z=1$. As a length scale we introduce the Bohr
radius for infinite nuclear mass`}),`
`,a.jsx(e.p,{children:`$$
a_0 = \\frac{4\\pi\\epsilon_0\\hbar^2}{m_e e^2} = 0.5\\text{angstrom} = 0.05 \\text{nm}.
$$`}),`
`,a.jsx(e.p,{children:"The energy scale reads:"}),`
`,a.jsx(e.p,{children:`$$
R_{y,\\infty} = \\frac{m_e e^4}{32 \\pi^2 \\epsilon_0^2 \\hbar^2}\\
\\approx 2.179e-18\\textrm{J}\\
\\approx e \\times 13.6\\textrm{eV}\\
\\approx h \\times 3289\\textrm{THz}
$$`}),`
`,a.jsx(e.p,{children:`So if we excite the hydrogen atom for time scales of a
few attoseconds, we will coherently create superposition states of all
existing levels. But which ones ? And at which frequency ?`}),`
`,a.jsx(e.h2,{children:"Solution of the radial wave equation"}),`
`,a.jsx(e.p,{children:"At this stage we can have a look into the energy landscape:"}),`
`,`
`,a.jsx(e.p,{children:"Energy potential of the hydrogen atom"}),`
`,a.jsx(e.p,{children:"The energies read then"}),`
`,a.jsx(e.p,{children:`$$
E_n = -\\frac{R_{y,\\textrm{m}}}{n^2} \\qquad \\text{with} \\qquad  n=1,2,3,\\cdots
$$`}),`
`,a.jsx(e.p,{children:"for $l=0$ and"}),`
`,a.jsx(e.p,{children:`$$
E_n = -\\frac{R_{y,\\textrm{m}}}{n^2} \\qquad \\text{with} \\qquad  n=2,3,4,\\cdots
$$`}),`
`,a.jsx(e.p,{children:`for $l=1$. Despite the different effective potentials, we get the
same eigenstates. This looks like an accidental degeneracy. Actually,
there is a hidden symmetry which comes from the so-called "Runge-Lenz"
vector. It only occurs in an attractive $1/r$-potential . This
vector reads: $$\\mathbf{A} =\\mathbf{p}\\times\\mathbf{L}-\\mathbf{r}$$`}),`
`,a.jsx(e.p,{children:`Finally, we can also visualize the radial wavefunctions for the hydrogen
atom as shown below`}),`
`,`
`,a.jsxs(e.p,{children:[`Associated with these radial wavefunctions, we also have the angular
profiles. Where $Y_{lm}(\\theta, \\phi)$ are the `,a.jsx(e.strong,{children:"spherical harmonics"}),`
as shown below`]}),`
`,`
`,a.jsx(e.p,{children:`Their shape is especially important for understanding the possibility of
coupling different orbits through electromagnetic waves.`}),`
`,a.jsx(e.h1,{children:"The electric dipole approximation"}),`
`,a.jsx(e.p,{children:`Below you see the interaction between an atom and an electromagnetic wave $\\vec{E}$ with
wave vector $\\vec{k}$. The states $\\text{|g>}$ and $\\text{|e>}$ stand
for the ground and excited state and $\\hbar\\omega_0$ is the energy of
the resonant transition between the states.`}),`
`,`
`,a.jsx(e.p,{children:`We consider an atom which is located in a radiation field. By resonant
coupling with the frequency $\\omega_0$, it can go from the ground state
$\\left|g\\right\\rangle$ to the excited state
$\\left|e\\right\\rangle$.`}),`
`,a.jsx(e.p,{children:`The potential energy of a charge distribution in a homogeneous
electromagnetic field $\\vec{E}$ is:`}),`
`,a.jsx(e.p,{children:`$$
E_\\text{pot} = \\sum_i q_i \\vec{r}_i\\cdot \\vec{E}.
$$`}),`
`,a.jsx(e.p,{children:`If the upper limit of the sum is 2, we obtain the dipole
moment`}),`
`,a.jsx(e.p,{children:`$$
\\vec{D} = e \\vec{r}.
$$`}),`
`,a.jsx(e.p,{children:`For the hydrogen atom, the distance corresponds to the
Bohr radius.`}),`
`,`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."}),` Apart from the monopole, the dipole potential is the lowest
order term of the multipole expansion of the scalar potential $\\phi$:`]}),`
`,a.jsx(e.p,{children:`$$
\\phi \\left( \\vec{r} \\right) = \\frac{1}{4\\pi\\epsilon_0}\\frac{\\vec{D}\\cdot\\vec{r}}{|\\vec{r}|^3}\\
\\vec{E}(\\vec{r})= \\vec{\\nabla}\\phi(\\vec{r}) = \\frac{ 3 \\left(\\vec{D}\\cdot \\vec{r}\\right) \\vec{r}/{|\\vec{r}|^2}- \\vec{D}}{4\\pi\\epsilon_0|\\vec{r}|^3}.
$$`}),`
`,a.jsx(e.p,{children:`For the dipole approximation we consider the size of the atom and
compare it to the wavelength $\\lambda$ of the electromagnetic field:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle|r|\\right\\rangle \\sim 1\\text{angstrom}\\ll \\lambda \\sim 10^3\\text{angstrom}
$$`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`Therefore, we assume that the field is homogeneous in space and omit
the spatial dependence:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
E(r,t) \\approx E(t)`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`The correction term resulting from the semi-classical dipole
approximation then is`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_1(t)=-e\\hat{\\vec{r}} \\cdot \\vec{E}(t) = -\\hat{\\vec{D}} \\cdot \\vec{E}(t)`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`Why can the magnetic field be ignored in this approximation? The
velocity of an electron is $\\sim \\alpha c$. The hydrogen atom only
has small relativistic corrections. If we compare the modulus of the
magnetic and the electric field, we get:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\left| \\vec{B} \\right| = \\frac{|\\vec{E}|}{c}
$$`}),`
`,a.jsx(e.p,{children:"The electric field contribution thus dominates. Now we choose"}),`
`,a.jsx(e.p,{children:`$$
\\vec{E} = E_0 \\vec{\\epsilon} \\cos \\left(\\omega t - \\vec{k} \\cdot \\vec{r}\\right)
$$`}),`
`,a.jsx(e.p,{children:"and do time-dependent perturbation theory:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(t)\\right\\rangle = \\gamma_1(t) \\mathrm{e}^{-iE_1t/\\hbar} \\left|1\\right\\rangle + \\gamma_2(t) \\mathrm{e}^{-iE_2t/\\hbar} \\left|2\\right\\rangle\\
+\\sum_{n=3}^\\infty \\gamma_n \\mathrm{e}^{-iE_nt/\\hbar} \\left|n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"As initial condition we choose"}),`
`,a.jsx(e.p,{children:`$$
\\gamma_i(0) = \\left{ \\begin{array}{ccc} 1 &\\text{for}&  i=1 \\ 0 &\\text{for}& i>1  \\end{array} \\right.
$$`}),`
`,a.jsx(e.p,{children:`We write $\\omega_0 = (E_2-E_1)/\\hbar$ and get to first
order $\\hat{\\vec{D}}$:`}),`
`,a.jsx(e.p,{children:`$$
\\gamma_2(t) = \\overbrace{\\frac{E_0}{2\\hbar} \\left\\langle 2|\\hat{\\vec{D}}\\cdot \\vec{\\epsilon}|1\\right\\rangle}^{\\text{Rabi frequency }\\Omega} \\underbrace{\\left(\\frac{\\mathrm{e}^{i(\\omega_0 + \\omega)t}-1}{\\omega_0 + \\omega} + \\frac{\\mathrm{e}^{i(\\omega_0 - \\omega)t}-1}{\\omega_0 - \\omega}\\right)}_{\\text{time evolution of the system}}
$$`}),`
`,a.jsx(e.p,{children:`The term before the round brackets is called dipole
matrix element:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\left\\langle 2|\\hat{\\vec{D}}\\cdot \\vec{\\epsilon},|1\\right\\rangle =e \\int \\psi_2\\left(\\vec{r}\\right) \\cdot \\vec{r} \\cdot \\vec{\\epsilon} \\cdot \\psi_1\\left(\\vec{r}\\right) \\mathop{}!\\mathrm{d}\\vec{r}.
$$`}),`
`,`
`,a.jsx(e.h1,{children:"Selection rules"}),`
`,a.jsx(e.p,{children:`We can now look into the allowed transition in the atom as they are what
we will typically observe within experiments.`}),`
`,a.jsx(e.h2,{children:"Change of parity"}),`
`,a.jsx(e.p,{children:"The parity operator is defined as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{P}\\psi(\\vec{r}) = \\psi(-\\vec{r})
$$`}),`
`,a.jsx(e.p,{children:"For the eigenfunction we have:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{P} \\psi(\\vec{r}) = \\lambda \\psi(\\vec{r})\\
\\lambda = \\pm 1
$$`}),`
`,a.jsxs(e.p,{children:["The eigenvalues are called ",a.jsx(e.em,{children:"odd"})," and ",a.jsx(e.em,{children:"even"}),`. From the
definition of the dipole operator we can see that it is of odd parity.
What about the parity of the states that it is coupling ? If they have
both the same parity than the whole integral will disappear and no
dipole transition can appear.`]}),`
`,a.jsx(e.p,{children:`We can become more concrete for the given eigenfunctions as we have
within spherical coordinates:`}),`
`,a.jsx(e.p,{children:`$$
(r, \\theta, \\phi) \\rightarrow (r, \\pi -\\theta, \\phi+\\pi)
$$`}),`
`,a.jsx(e.p,{children:`For the orbitals of the hydrogen atom we then have
explicitly:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{P}\\psi_{nlm}(r, \\theta, \\phi) = R_{nl}(r)Y_{lm}(\\pi -\\theta, \\phi+\\pi)\\
= (-1)^l R_{nl}(r)Y_{lm}(, \\theta, \\phi)
$$`}),`
`,a.jsxs(e.p,{children:[`This gives us the first selection rule that the
`,a.jsx(e.strong,{children:"orbital angular momentum has to change for dipole transitions"}),`
$\\Delta  l = \\pm 1$.`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$s$ orbitals are only coupled to $p$ orbitals through dipole
transitions.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`$p$ orbitals are only coupled to $s$ and $d$ orbitals through dipole
transitions.`}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"Coupling for linearly polarized light"}),`
`,a.jsx(e.p,{children:`Having established the need for parity change, we also need to
investigate the influence of the polarization of the light, which enters
the dipole operator through the vector $\\epsilon$. In the simplest case
the light has linear polarization ($\\pi$ polarized) and we can write:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{E}(t) = \\vec{e}_zE_0 \\cos(\\omega t +\\varphi)
$$`}),`
`,a.jsx(e.p,{children:"This means that the dipole transition element is now given by:"}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle 2\\right|\\vec{D}\\cdot\\vec{e}_z\\left|1\\right\\rangle = e \\int \\psi_2(\\vec{r}) z \\psi_1\\left(\\vec{r}\\right) \\mathop{}!\\mathrm{d}\\vec{r}
$$`}),`
`,a.jsx(e.p,{children:`We can now transform z into the spherical coordinates
$z= r \\cos(\\theta) = r\\sqrt{\\frac{4\\pi}{3}}Y_{10}(\\theta, \\phi)$. We can
further separate out the angular part of the integral to obtain:`}),`
`,a.jsxs(e.p,{children:[`$$
\\left\\langle 2\\right|\\vec{D}\\cdot\\vec{e}`,a.jsx(e.em,{children:"z\\left|1\\right\\rangle \\propto e \\int \\sin(\\theta) d\\theta d\\varphi Y"}),`{l',m'}(\\theta, \\varphi) Y_{10}(\\theta, \\phi) Y_{l,m}(\\theta, \\varphi)
$$`]}),`
`,a.jsxs(e.p,{children:["This element is only non-zero if $m = m'$ (see ",a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:`appendix
C of Hertel 2015`})," for all the gorious details)."]}),`
`,`
`,a.jsx(e.p,{children:"Above are the dipole selection rules for different polarizations of light."}),`
`,a.jsx(e.h2,{children:"Circularly polarized light"}),`
`,a.jsx(e.p,{children:`Light has not just linear polarization, but it might also have some
circular polarization. In this case we can write:`}),`
`,a.jsxs(e.p,{children:[`$$
\\vec{E}(t) = \\frac{E_0}{\\sqrt{2}} \\left(\\cos(\\omega t +\\varphi)\\vec{e}`,a.jsxs(e.em,{children:["x + \\sin(\\omega t +\\varphi)\\vec{e}",a.jsx(e.em,{children:`y\\right)\\
\\vec{E}(t) = \\text{Re}\\left(\\vec{e}`}),`+ E_0 e^{-i\\omega t +\\phi}\\right)\\
\\vec{e}`]}),`\\pm = \\frac{\\vec{e}_x\\pm i\\vec{e}_y}{\\sqrt{2}}
$$`]}),`
`,a.jsxs(e.p,{children:["So light with polarization $\\vec{\\epsilon} = \\vec{e}",a.jsx(e.em,{children:`+$
is called right-hand circular ($\\sigma^+$) and
$\\vec{\\epsilon} = \\vec{e}`}),`-$ is called left-hand circular ($\\sigma^-$).
Let us now evaluate the transition elements here. The dipole operator
element boils now down to the evaluation of the integral:`]}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle l',m',n'\\right|x+iy\\left|l,m,n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`As previously we can express the coupling term in
spherical coordinates:`}),`
`,a.jsx(e.p,{children:`$$
\\frac{x+iy}{\\sqrt{2}} = -r \\sqrt{\\frac{4\\pi}{3}}Y_{11}(\\theta, \\varphi)
$$`}),`
`,a.jsx(e.p,{children:`Evaluation of the integrals lead now to the rule the
projection of the quantum number has to change $m' = m+1$. In a similiar
fashion we find for left-hand circular light the selection rule
$m' = m - 1$.`}),`
`,a.jsx(e.p,{children:`In the next lecture, we will investigate the influence of
perturbative effects and see how the fine structure arises.`})]})}function a0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(lk,{...t})}):lk(t)}const ck=Object.freeze(Object.defineProperty({__proto__:null,default:a0e,frontmatter:i0e},Symbol.toStringTag,{value:"Module"})),s0e={author:["Fred Jendrzejewski","Selim Jochim"],order:7,title:"Lecture 7 - Beyond the 'boring' hydrogen atom"};function hk(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will use the hydrogen atom to study static
perturbations in form of external magnetic fields and relativistic
effects, leading to the fine structure splitting.`}),`
`,a.jsx(e.p,{children:`We spend quite some time on the properties of the hydrogen atom in the
previous lectures [@Jendrzejewski; @atom]. However, we completely
neglected any effects of quantum-electrodynamics and relativistic
physics. In this lecture we will study, why this is a good approximation
for the hydrogen atom and then investigate in a perturbative fashion the
terms. Most importantly, we will introduce that coupling between the
orbital angular momentum and the spin of the electron, which leads to
the fine splitting.`}),`
`,a.jsx(e.h2,{children:"Perturbation theory"}),`
`,a.jsx(e.p,{children:`Up to now have studied the hydrogen atom to find its eigensystem and
then studied how it evolves under the presence of oscillating electric
fields. This allowed us to understand in more detail the idea of
eigenstates and then of time-dependent perturbation theory. However, one
of the most important concepts that can be introduced very nicely on the
hydrogen atom is stationnary perturbation theory in form of external
magnetic fields or relativistic corrections. We will remind you of
perturbation theory here and then apply it to some simple cases.`}),`
`,a.jsx(e.p,{children:"We can now simply write down the problem as:"}),`
`,a.jsx(e.p,{children:`$$
\\left(\\hat{H}_0+\\lambda \\hat{W}\\right)\\left|\\psi_m\\right\\rangle = E_m\\left|\\psi_m\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$\\lambda$ is a very small parameter and $\\hat{H}_0$ is
describing the hydrogen atom system. We will note the eigenvalues and
eigenstates of this system as:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H}_0\\left|\\varphi_n\\right\\rangle = \\epsilon_n \\left|\\varphi_n\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`While, we do not know the exact solution of
$\\left|\\psi_m\\right\\rangle$ and the energy $E_m$, we decide
to decompose them in the following expansion of the small parameter
$\\lambda$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_m\\right\\rangle = \\left|\\psi_m^{(0)}\\right\\rangle + \\lambda\\left|\\psi_m^{(1)}\\right\\rangle+\\lambda^2\\left|\\psi_m^{(2)}\\right\\rangle+O(\\lambda^3)\\
E_m = E_m^{(0)} +\\lambda E_m^{(1)} + \\lambda^2 E_m^{(2)}+O(\\lambda^3),
$$`}),`
`,a.jsx(e.p,{children:"To zeroth order in $\\lambda$ we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0\\left|\\psi_m^{(0)}\\right\\rangle = E_m^{(0)}\\left|\\psi_m^{(0)}\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`So it is just the unperturbed system and we can
identify:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_m^{(0)}\\right\\rangle = \\left|\\varphi_m\\right\\rangle~~E_m^{(0)} = \\epsilon_m
$$`}),`
`,a.jsx(e.p,{children:"For the first order we have to solve"}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`(\\hat{H}_0-E_m^{(0)}) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(0)}\\right\\rangle= 0\\
(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\varphi_m\\right\\rangle= 0
$$`}),`
`,a.jsx(e.p,{children:`We can multiply the whole equation by
$\\left\\langle\\varphi_m\\right|$ from the right. As
$\\left\\langle\\varphi_m\\right|\\hat{H}_0= \\epsilon_m\\left\\langle\\varphi_m\\right|$,
the first term cancels out. Hence, we obtain:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\boxed{E_m^{(1)} = \\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle}
$$`}),`
`,a.jsx(e.p,{children:`We now also need to obtain the correction to the
eigenstate. For that, we put the solution for the energy into the Ansatz to obain:`}),`
`,a.jsx(e.p,{children:`$$
(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}\\left|\\varphi_m\\right\\rangle-\\left|\\varphi_m\\right\\rangle\\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle)= 0
$$`}),`
`,a.jsx(e.p,{children:`We can now multiply the whole equation by
$\\left\\langle\\varphi_i\\right|$ from the right and obtain:`}),`
`,a.jsx(e.p,{children:`$$
(\\epsilon_i-\\epsilon_m)\\left\\langle\\varphi_i\\right|\\left|\\psi_m^{(1)}\\right\\rangle+\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle = 0
$$`}),`
`,a.jsx(e.p,{children:`By rewriting the above equation, this directly gives us
the decompositon of the $\\left|\\psi_m^{(1)}\\right\\rangle$
onto the original eigenstates and have:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\boxed{\\left|\\psi_m^{(1)}\\right\\rangle = \\sum_{i\\neq m} \\frac{\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle}{(\\epsilon_m-\\epsilon_i)}\\left|\\varphi_i\\right\\rangle}
$$`}),`
`,a.jsx(e.p,{children:`And we end the calculation with second order pertubation
in $\\lambda$`}),`
`,a.jsx(e.p,{children:`$$
(\\hat{H}_0-E_m^{(0)}) \\left|\\psi_m^{(2)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(1)}\\right\\rangle-E_m^{(2)} \\left|\\psi_m^{(0)}\\right\\rangle= 0\\
(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(2)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(1)}\\right\\rangle-E_m^{(2)} \\left|\\varphi_m\\right\\rangle= 0\\
$$`}),`
`,a.jsx(e.p,{children:`We can multiply once again whole equation by
$\\left\\langle\\varphi_m\\right|$ from the right, which
directly drops the first term. The term
$E_m^{(1)}\\left\\langle\\varphi_m\\right|\\left|\\psi_m^{(1)}\\right\\rangle$
drops out as the first order perturbation does not contain a projection
onto the initial state. So we can write:`}),`
`,a.jsx(e.p,{children:`$$
E_m^{(2)}= \\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\psi_m^{(1)}\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"Plugging in our solution, we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\boxed{E_m^{(2)} = \\sum_{i\\neq m} \\frac{|\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle|^2}{(\\epsilon_m-\\epsilon_i)}}
$$`}),`
`,a.jsx(e.h2,{children:"Static external magnetic fields"}),`
`,a.jsx(e.p,{children:`A first beautiful application of perturbation theory is the study of
static magnetic fields (see Ch 1.9 and Ch. 2.7.1 of [@Hertel_2015] for
more details). The motion of the electron around the nucleus implies a
magnetic current`}),`
`,a.jsx(e.p,{children:`$$
I = \\frac{e}{t} = \\frac{ev}{2\\pi r}
$$`}),`
`,a.jsx(e.p,{children:`and this implies a magnetic moment $M = I A$, with the
enclosed surface $A=\\pi r^2$. It may be rewritten as:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{M}_L = -\\frac{e}{2m_e}\\vec{L} =-\\frac{\\mu_B}{\\hbar} \\vec{L} \\
\\mu_B = \\frac{\\hbar e}{2m_e}
$$`}),`
`,a.jsxs(e.p,{children:["where $\\mu_B$ is the ",a.jsx(e.strong,{children:"Bohr magneton"}),`. Its potential
energy in a magnetic field $\\vec{B} = B_0 \\vec{e}_z$ is then:`]}),`
`,a.jsx(e.p,{children:`$$
V_B = -\\vec{M}_L\\cdot \\vec{B}\\
= \\frac{\\mu_B}{\\hbar} L_z B_0
$$`}),`
`,a.jsx(e.p,{children:"Its contribution is directly evaluated from the expression on first oder pertubation theory to be:"}),`
`,a.jsx(e.p,{children:`$$
E_{Zeeman} = \\mu_B m B_0
$$`}),`
`,a.jsx(e.p,{children:`This is the Zeeman splitting of the different magnetic
substates. It is visualized below`}),`
`,`
`,a.jsx(e.p,{children:"The Zeeman effect in the hydrogen atom."}),`
`,a.jsx(e.h2,{children:"Trapping with electric or magnetic fields"}),`
`,a.jsx(e.p,{children:`We have now investigated the structure of the hydrogen atom and seen how
its energy gets shifted in external magnetic fields. We can combine this
understanding to study conservative traps for atoms and ions. Neutral
atoms experience the external field:`}),`
`,a.jsx(e.p,{children:`$$
E_{mag}(x,y) = \\mu_B m B_0(x,y)
$$`}),`
`,a.jsx(e.p,{children:`For ions on the other hand we have fully charged
particles. So they simply experience the external electric field
directly:`}),`
`,a.jsx(e.p,{children:`$$
E_{el}(x,y) = -q E(x,y)
$$`}),`
`,a.jsx(e.p,{children:`Trapping atoms and ions has to be done under very good vacuum such that
they are well isolate from the enviromnent and high precision
experiments can be performed.`}),`
`,a.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
$\\text{div} \\vec{E} = 0$ and $\\text{div} \\vec{B} = 0$. So, the
experimentalists have to play some tricks with oscillating fields. We
will not derive in detail how a resulting `,a.jsx(e.strong,{children:"Paul trap"}),` works, but the
`,a.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:"linked video"}),` gives a very nice
impression of the idea behind it. A sketch is presented in Fig.`]}),`
`,`
`,a.jsxs(e.p,{children:[`The upper stage shows the phases of The two phases of the oscillating
electric field of a Paul trap. Taken
from `,a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Quadrupole_ion_trap",children:"wikipedia"}),`.
Below we can see a linear ion (Paul) trap containing six calcium 40
ions. Taken
from `,a.jsx(e.a,{href:"https://quantumoptics.at/en/research/lintrap.html",children:"here"}),"."]}),`
`,a.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,a.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.531",children:"Wolfgang Paul"})," and",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.525",children:"Hans Dehmelt"}),`. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.541",children:"as Ramsey spectroscopy"}),"."]}),`
`,a.jsxs(e.p,{children:[`For atoms we can play similiar games with magnetic traps. Again we have
to solve the problem of the zero magnetic fields. Widely used
configurations are the Ioffe-Pritchard trap, where quadrupole fields are
superposed `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.51.1336",children:"with a bias field"}),", or ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.74.3352",children:"TOP-traps"}),"."]}),`
`,a.jsx(e.p,{children:`Ion traps are now the basis of ionic quantum computers and
magnetic traps paved the way for quantum simulators with cold atoms as will see later on.`}),`
`,a.jsx(e.h3,{children:"What we missed from the Dirac equation"}),`
`,a.jsx(e.p,{children:`Until now we have completely neglected relativistic effects, i.e. we
should have really solved the Dirac equation instead of the Schrödinger
equation. However, this is is major task, which we will not undertake
here. But what were the main approximations ?`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"We neglected the existance of the electron spin."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"We did not take into account the relativistic effects."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`So, how does relativity affect the hydrogen spectrum? In a first step,
we should actually introduce the magnetic moment of the spin:`}),`
`,a.jsx(e.p,{children:`$$
\\vec{M}_S = -g_e \\mu_B \\frac{\\vec{S}}{\\hbar}
$$`}),`
`,a.jsxs(e.p,{children:[`The spin of the electron is $1/2$, making it a fermion
and the `,a.jsx(e.em,{children:"g factor of the electron"})," reads"]}),`
`,a.jsx(e.p,{children:`$$
g_e \\approx 2.0023
$$`}),`
`,a.jsxs(e.p,{children:[`Further discussions of the g-factor might be found in
`,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:"Chapter 6.6 of Hertel"}),"."]}),`
`,a.jsx(e.h4,{children:"Amplitude of the relativistic effects"}),`
`,a.jsx(e.p,{children:`We saw in the previous lectures, that the
energy levels of hydrogenlike atoms are given by:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`E_n = \\frac{Z^2 R_{y,\\infty}}{n^2}\\
R_{y,\\infty} = \\frac{m_e e^4}{32 \\pi^2 \\epsilon_0^2 \\hbar^2}
$$`}),`
`,a.jsx(e.p,{children:`We can now use the fine-structure constant, which
measures the coupling strength of the electric charges to the
electromagnetic field:`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\alpha = \\frac{e^2}{4\\pi\\epsilon_0\\hbar c}\\
= \\frac{1}{137.035999139(31)}
$$`}),`
`,a.jsx(e.p,{children:"We can now rewrite the energies of the hydrogen atom as:"}),`
`,a.jsx(e.p,{children:`$$
E_n = \\frac{1}{2} \\underbrace{m_e c^2}_{\\text{rest mass energy}} Z^2 \\alpha^2 \\frac{1}{n^2}
$$`}),`
`,a.jsx(e.p,{children:`Here, $m_e c^2\\approx 511\\textrm{k eV}$ is the rest
mass energy of the electron. $E_n \\approx 10\\text{eV}$ on the other hand
is the energy of the bound state and therefore in the order of the
kinetic energy of the electron. As long as it is much smaller than the
rest-mass of the electron, we can neglect the relativistic effects. A
few observations:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Relativistic effects are most pronounced for deeply bound states of
small quantum number $n$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Relativistic effects effects will become important once
$(Z\\alpha)\\approx 1$, so they will play a major role in heavy
nuclei.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`For the hydrogen atom we can thus treat the relativistic effects in a
perturbative approach.But the most important consequence of the
relativistic terms is actually the existance of the electron spin.`}),`
`,a.jsx(e.h3,{children:"The relativistic mass and Darwin term"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:`"Relativistic mass": The relativistic relation between energy and
momentum reads:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
E_\\text{rel} = \\sqrt{(mc^2)^2+(\\vec{p}c)^2}\\
\\approx mc^2 + \\frac{p^2}{2m}- \\frac{\\vec{p}^{,4}}{8m^3c^2} + \\cdots
$$`}),`
`,a.jsx(e.p,{children:`The first two terms of the expansion are the
nonrelativistic limit and the third term is the first correction.
Therefore, the corresponding Hamiltonian is:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\text{rm} = - \\frac{\\hat{\\vec{p}}^{,4}}{8m^3c^2}.
$$`}),`
`,a.jsxs(e.ol,{start:"2",children:[`
`,a.jsx(e.li,{children:`Darwin term: If $r=0$, the potential $V(r)$ diverges to $-\\infty$.
We get:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_\\text{Darwin} = \\frac{\\pi \\hbar^2}{2m^2c^2}\\left( \\frac{Ze^2}{4\\pi\\epsilon_0}\\right) \\delta(\\hat{\\vec{r}})
$$`}),`
`,a.jsx(e.p,{children:`If we perform a first correction to the energy of the eigenstates
$\\left\\langle n,l,m\\right\\rangle$ by calculating`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle n,l,m|\\hat{H'|n,l,m}\\right\\rangle,
$$`}),`
`,a.jsxs(e.p,{children:[`we find that it works perfectly for case (1) and (2)
which is due to degeneracy. $\\hat{H}`,a.jsx(e.em,{children:`\\text{rm}$ and
$\\hat{H}`}),`\\text{Darwin}$ commute with all observables forming the
complete set of commuting observables (CSCO) for $\\hat{H}_0$`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0,\\hat{\\vec{L}}^2, \\hat{L}_z,
$$`}),`
`,a.jsx(e.p,{children:"with states described by $\\left|n,l,m\\right\\rangle$."})]})}function o0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(hk,{...t})}):hk(t)}const uk=Object.freeze(Object.defineProperty({__proto__:null,default:o0e,frontmatter:s0e},Symbol.toStringTag,{value:"Module"})),l0e={author:["Fred Jendrzejewski","Selim Jochim"],order:8,title:"Lecture 8 - The Helium atom"};function dk(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this lecture we will discuss some basic properties of the Helium
atom. We will introduce first some useful notations for the specific
Hamiltonian at hand. Then we will focus on the important consequences
played by the electron-electron interaction on the spin structure and
the level scheme of the system. Finally, we will introduce the
variational method for the estimation of the ground state energy.`}),`
`,a.jsx(e.p,{children:`In todays lecture, we will see how the electron spin couples to the
orbital angular momentum and how this creates spin-orbit coupling. We
will then start out with the discussion of the Helium atom.`}),`
`,a.jsx(e.h2,{children:"Spin-orbit coupling"}),`
`,a.jsxs(e.p,{children:[`The third term, which arises from the Dirac equation is the spin-orbit
coupling. We will give here a common hand-waving explanation in a
similiar spirit to the discussion of the magnetic moment `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:`for given
angular momentum`}),`. Please, be aware that it misses a
factor of 2. The electron has a spin 1/2 and hence a magnetic moment
$\\vec{M}_S = -g_e \\mu_B \\frac{\\vec{S}}{\\hbar}$. This magnetic moment
experiences a magnetic field, simply due to the motion of the electron
charge itself. Assuming a circular motion of the electron, we obtain the
magnetic field amplitude:`]}),`
`,a.jsx(e.p,{children:`$$
B = \\frac{\\mu_0 i}{2r}\\
B = \\frac{\\mu_0 ev}{4\\pi r^2}\\
B = \\frac{\\mu_0 e}{4\\pi m_e r^3}L\\
$$`}),`
`,a.jsxs(e.p,{children:[`Through the coupling with the spin and introducing a
fudge factor of 2 `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", we obtain the Hamiltonian:"]}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\hat{H}_{LS} = \\frac{g_e}{4\\pi \\epsilon_0}\\frac{e^2}{2m_e^2c^2 r^3}  \\hat{\\vec{L}}\\cdot \\hat{\\vec{S}}
$$`}),`
`,a.jsx(e.p,{children:`How does it act on a state $\\left|\\psi\\right\\rangle$? For
the example`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:"we get:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{L}_z \\cdot \\hat{S}_z \\left( \\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle \\right)
= \\hbar^2 m_l \\cdot m_s (\\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle)
$$`}),`
`,a.jsx(e.p,{children:"The states"}),`
`,a.jsx(e.p,{children:`$$
\\left|n,l,m_l\\right\\rangle \\otimes \\left|s,m_s\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`span the complete Hilbert space. Any state of the atom can be
represented by:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi\\right\\rangle = \\sum_{{n,l,m_l,m_s}} c_{n,l,m_l,m_s} \\left|n,l,m_l,m_s\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`As usual we can massively simplify the problem by using
the appropiate conserved quantities.`}),`
`,a.jsx(e.h3,{children:"Conservation of total angular momentum"}),`
`,a.jsx(e.p,{children:`We can look into it a bit further into the details and see that the
Hamiltonian $\\hat{H}_\\textrm{LS}$ does not commute with $\\hat{L}_z$:`}),`
`,a.jsx(e.p,{children:`$$
= [L_z, L_x S_x + L_y S_y + L_z S_z]\\
[L_z, \\vec{L}\\cdot \\vec{S}] = [L_z, L_x ]S_x + [L_z,  L_y  ]S_y\\
[L_z, \\vec{L}\\cdot \\vec{S}] = i\\hbar L_y S_x -i\\hbar L_x S_y\\neq 0
$$`}),`
`,a.jsx(e.p,{children:`This suggests that $L_z$ is not a good quantum number
anymore. We have to include the spin degree of freedom into the
description. Let us repeat the same procedure for the spin projection:`}),`
`,a.jsx(e.p,{children:`$$
= [S_z, L_x S_x + L_y S_y + L_z S_z]\\
[S_z, \\vec{L}\\cdot \\vec{S}] = L_x [S_z,  S_x] + L_y [S_z,  S_y]\\
[S_z, \\vec{L}\\cdot \\vec{S}] = i\\hbar L_x S_y -i\\hbar L_y S_x\\neq 0
$$`}),`
`,a.jsxs(e.p,{children:[`This implies that the spin projection is not a conserved
quantity either. However, the sum of spin and orbital angular momentum
will commute $[L_z + S_z, \\vec{L}\\vec{S}] =0$ according to the above
calculations. Similiar calculations hold for the other components,
indicating that the `,a.jsx(e.em,{children:"total angular momentum"})," is conserved ",a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\vec{J} = \\vec{L} + \\vec{S}
$$`}),`
`,a.jsx(e.p,{children:`We can now rewrite $\\hat{H}_{LS}$ in terms of the conserved quantities through the following following
little trick:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\vec{J}}^2 = \\left( \\hat{\\vec{L}} + \\hat{\\vec{S}} \\right) ^2 = \\hat{\\vec{L}}^2 + 2 \\hat{\\vec{L}} \\cdot \\hat{\\vec{S}} + \\hat{\\vec{S}}^2\\
\\hat{\\vec{L}} \\cdot \\hat{\\vec{S}} = \\frac{1}{2} \\left( \\hat{\\vec{J}}^2 - \\hat{\\vec{L}}^2 - \\hat{\\vec{S}}^2 \\right)
$$`}),`
`,a.jsxs(e.p,{children:[`This directly implies that $\\hat{J}^2$, $\\hat{L}^2$ and $\\hat{S}^2$ are
new conserved quantities of the system. If we call $\\hat{H}_0$ the
Hamiltonian of the hydrogen atom, we previously used the complete set of
commuting observables `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-3",id:"user-content-fnref-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),":"]}),`
`,a.jsx(e.p,{children:`$$
\\left{ \\hat{H}_0, \\hat{\\vec{L}}^2, \\hat{L}_z,\\hat{\\vec{S}}^2, \\hat{S}_z \\right}
$$`}),`
`,a.jsx(e.p,{children:"We now use the complete set of commuting observables:"}),`
`,a.jsxs(e.p,{children:[`$$
\\left{ \\hat{H}`,a.jsx(e.em,{children:"0 + \\hat{H}"}),`{LS}, \\hat{\\vec{L}}^2,\\hat{\\vec{S}}^2, \\hat{\\vec{J}}^2, \\hat{J}_z \\right}.
$$`]}),`
`,a.jsx(e.p,{children:`The corresponding basis states
$\\left|n,l,j,m_j\\right\\rangle$ are given by:`}),`
`,a.jsx(e.p,{children:`$$
\\left|n,l,j,m_j\\right\\rangle = \\sum_{m_l,m_s} \\left|n, l, m_l, m_s\\right\\rangle \\underbrace{\\left\\langle n, l, m_l, m_s | n, l, j, m_j\\right\\rangle}_{\\text{Clebsch-Gordan coefficients}}
$$`}),`
`,a.jsxs(e.p,{children:["Here, the Clebsch-Gordan coefficients (cf. ",a.jsx(e.a,{href:"http://dx.doi.org/10.1088/1674-1137/38/9/090001",children:"Olive 2014 p. 557"})," or the ",a.jsx(e.a,{href:"http://pdg.lbl.gov/2002/clebrpp.pdf",children:"PDG"}),`)
describe the coupling of angular momentum states.`]}),`
`,a.jsx(e.p,{children:a.jsx(e.strong,{children:"Example: $l=1$ and $s=1/2$."})}),`
`,a.jsx(e.p,{children:`With the Clebsch-Gordan coefficients, the following example
states---given by $Jj$ and $m_j$---can be expressed by linear
combinations of states defined by $m_l$ and $m_s$:`}),`
`,a.jsx(e.p,{children:`$$
\\left|j=\\frac{3}{2}, m_j = \\frac{3}{2}\\right\\rangle = \\left|m_l=1, m_s = +\\frac{1}{2}\\right\\rangle\\
\\left|j=\\frac{3}{2}, m_j = \\frac{1}{2}\\right\\rangle = \\sqrt{\\frac{1}{3}} \\left|m_l=1, m_s = -\\frac{1}{2}\\right\\rangle +\\sqrt{\\frac{2}{3}} \\left|m_l = 0, m_s = +\\frac{1}{2}\\right\\rangle
$$`}),`
`,a.jsx(e.h3,{children:"Summary of the relativistic shifts"}),`
`,a.jsx(e.p,{children:`We can now proceed to a summary of the relativistic effects in the
hydrogen atom as presented in Fig.`}),`
`,`
`,a.jsxs(e.p,{children:["Fine structure of the Hydrogen atom. Adapted from ",a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Demtröder 2010 Fig. 5.33"})]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`The states should be characterized by angular momentum anymore, but
by the total angular momentum $J$ and the orbital angular momentum.
We introduce the notation:`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
nl_{j}
$$`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"All shifts are on the order of $\\alpha^2$ and hence pertubative."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Some levels remain degenerate in relativistic theory, most
importantly the $2s_{1/2}$ and the $2p_{1/2}$ state.`}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"The Lamb shift"}),`
`,a.jsxs(e.p,{children:[`The previous discussions studied the effects of the Dirac equation onto
our understanding of the Hydrogen atom. Most importantly, we saw that we
can test those predictions quite well through the shifts in the level
scheme. It is possible to push this analysis even further. One
particularly important candidate here are the degenerate levels
$2s_{1/2}$ and $2p_{1/2}$. Being able to see any splitting here, will be
proof physics beyond the Dirac equation. And it is a relative
measurement, for which it therefore not necessary to have insane
absolute precisions. It is exactly this measurement that `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrev.72.241",children:`Lamb and
Retherford undertook in 1947`}),`. They observed actually a
splitting of roughly $1$GHz, which they drove through direct
rf-transitions. The observed shift was immediately `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrev.72.339",children:"explained by Bethe"}),` through the idea of QED a concept that we will come back
to later in this lecture in a much simpler context of cavity QED.`]}),`
`,a.jsxs(e.p,{children:[`We would simply like to add here that the long story of the hydrogen
atom and the Lamb shift is far from over as open questions remained
until September 2019. Basically, a group of people measured the radius
in some 'heavy' muonic hydrogen very `,a.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature09250",children:"precisely in 2010"}),`.
They could only explain them by changing the size of the proton radius,
which was previously assumed to be well measured. It was only this year
the another team reperformed a similiar measurement on electronic
hydrogen (the normal one), `,a.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.aau7807",children:"obtaining consistent results"}),`. A nice summary of the "proton radius puzzle" can be
found `,a.jsx(e.a,{href:"https://www.quantamagazine.org/physicists-finally-nail-the-protons-size-and-hope-dies-20190911/",children:"here"}),"."]}),`
`,a.jsx(e.h2,{children:"The helium problem"}),`
`,a.jsxs(e.p,{children:[`In this lecture we will discuss the Helium atom and what makes it so
interesting in the laboratory. We will most importantly see that you
cannot solve the problem exactly. This makes it a great historical
example where a simple system was used to test state-of-the-art
theories. An extensive discussion can be found in Chapter 7 of Bransden `,a.jsx(e.sup,{children:a.jsx(e.a,{href:"#user-content-fn-bransden",id:"user-content-fnref-bransden","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"4"})})," or ",a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Chapter 6 of Demtröder 20210"}),". Even nowadays, the system continues to be a nice test-bed of many-body theories, see for example the paper by ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevx.7.041035",children:"Combescot in 2017"})," or by ",a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.123.203401",children:"Ott in 2019"}),".."]}),`
`,a.jsx(e.p,{children:`The Helium atom describes a two electron system as shown in the figure
below.`}),`
`,`
`,a.jsx(e.p,{children:`The helium atom describes two electrons coupled to the nucleus of
charge Z=2.`}),`
`,a.jsx(e.p,{children:`In the reference frame of center-of-mass we obtain the following
Hamiltonian:
$$H = -\\frac{\\hbar^2}{2\\mu}\\nabla_{r_1}^2 -\\frac{\\hbar^2}{2\\mu}\\nabla_{r_2}^2-\\frac{\\hbar^2}{M}\\nabla_{r_1}\\cdot\\nabla_{r_2}+\\frac{e^2}{4\\pi \\epsilon_0}\\left(-\\frac{Z}{r_1}-\\frac{Z}{r_2}+\\frac{1}{r_{12}}\\right)$$`}),`
`,a.jsx(e.p,{children:`The term in the middle is the mass polarization term. We further
introduced the reduced mass $$\\mu = \\frac{m_eM}{m_e + M}$$ For the very
large mass differences $M= 7300 m_e \\gg m_e$, we can do two
simplifications:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Omit the term on the mass polarization."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Set the reduced mass to the mass of the electron."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`So we obtain the simplified Hamiltonian
$$H = -\\frac{\\hbar^2}{2m_e}\\nabla_{r_1}^2 -\\frac{\\hbar^2}{2m_e}\\nabla_{r_2}^2+\\frac{e^2}{4\\pi \\epsilon_0}\\left(-\\frac{Z}{r_1}-\\frac{Z}{r_2}+\\frac{1}{r_{12}}\\right)$$`}),`
`,a.jsx(e.h2,{children:"Natural units"}),`
`,a.jsxs(e.p,{children:["For simplicity it is actually nice to work in the so-called ",a.jsx(e.strong,{children:`natural
units`}),`, where we measure all energies and distance on typical scales.
We will start out by measuring all distances in units of $a_0$, which is
defined as:
$$a_0 = \\frac{4\\pi \\epsilon_0 \\hbar^2}{me^2} = 0.5\\text{angstrom}$$ So
we can introduce the replacement: $$\\mathbf{r} = \\mathbf{\\tilde{r}}a_0$$
So the Hamiltonian reads:`]}),`
`,a.jsxs(e.p,{children:[`$$
H = -\\frac{\\hbar^2}{2m_ea_0^2}\\nabla_{\\tilde{r}`,a.jsx(e.em,{children:"1}^2 -\\frac{\\hbar^2}{2m_ea_0^2}\\nabla"}),"{\\tilde{r}_2}^2+\\frac{e^2}{4\\pi \\epsilon_0 a_0}\\left(-\\frac{Z}{\\tilde{r}",a.jsxs(e.em,{children:["1}-\\frac{Z}{\\tilde{r}",a.jsx(e.em,{children:"2}+\\frac{1}{\\tilde{r}"}),`{12}}\\right)\\
H = -\\frac{e^4 m}{2(4\\pi\\epsilon_0)^2 \\hbar^2}\\nabla`]}),"{\\tilde{r}",a.jsx(e.em,{children:"1}^2 -\\frac{e^4 m}{2(4\\pi\\epsilon_0)^2 \\hbar^2}\\nabla"}),"{\\tilde{r}_2}^2+\\frac{e^4 m}{(4\\pi \\epsilon_0)^2\\hbar^2}\\left(-\\frac{Z}{\\tilde{r}_1}-\\frac{Z}{\\tilde{r}",a.jsx(e.em,{children:"2}+\\frac{1}{\\tilde{r}"}),`{12}}\\right)
$$`]}),`
`,a.jsx(e.p,{children:`And finally we can measure all energies in units of
$$E_0 = \\frac{e^4 m}{(4\\pi\\epsilon_0)^2\\hbar^2} = 1\\text{hartree} = 27.2\\text{eV}$$
So the Hamiltonian reads in these natural units:`}),`
`,a.jsxs(e.p,{children:[`$$
\\tilde{H} = -\\frac{1}{2}\\nabla_{\\tilde{r}`,a.jsx(e.em,{children:"1}^2 -\\frac{1}{2}\\nabla"}),"{\\tilde{r}_2}^2+\\left(-\\frac{Z}{\\tilde{r}_1}-\\frac{Z}{\\tilde{r}",a.jsx(e.em,{children:"2}+\\frac{1}{\\tilde{r}"}),`{12}}\\right)
$$`]}),`
`,a.jsx(e.p,{children:"Another, more common, way of introducing this is to define:"}),`
`,a.jsx(e.p,{children:`$$
m = \\hbar = e = 4\\pi \\epsilon_0 \\equiv 1\\
\\alpha = \\frac{e^2}{(4\\pi \\epsilon_0) \\hbar c}= \\frac{1}{137}\\
\\Rightarrow c = \\frac{1}{\\alpha}
$$`}),`
`,a.jsx(e.p,{children:`Within these units we have for the hydrogen atom:
$$E_n = \\frac{Z^2}{2}\\frac{1}{n^2}E_0$$`}),`
`,a.jsx(e.p,{children:a.jsx(e.strong,{children:`For the remainder of this lecture we will assume that we are working
in natural units and just omit the tildas.`})}),`
`,a.jsx(e.h2,{children:"Electron-electron interaction"}),`
`,a.jsxs(e.p,{children:[`Now we can decompose the Hamiltonian in the following fashion:
$$H = H_1 + H_2 + H_{12}$$ So without the coupling term between the
electrons we would just have once again two hydrogen atoms. The whole
crux is now that the term $H_{12}$ is actually coupling or
`,a.jsx(e.strong,{children:"entangling"})," the two electrons."]}),`
`,a.jsx(e.h2,{children:"Symmetries"}),`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"exchange"})," operator is defined as:"]}),`
`,a.jsx(e.p,{children:`$$
P_{12}\\psi(r_1,r_2) = \\psi(r_2, r_1)
$$`}),`
`,a.jsx(e.p,{children:`We directly see for the Hamiltonian of Helium in the reduced units that the exchange operator commutes with
the Hamiltonian, $[H,P_{12}] = 0$. This implies directly that the parity
is a conserved quantity of the system and that we have a set of
Eigenstates associated with the parity.`}),`
`,a.jsx(e.p,{children:"We can now apply the operator twice:"}),`
`,a.jsx(e.p,{children:`$$
P_{12}^2\\psi(r_1,r_2) = \\lambda^2 \\psi(r_1, r_2) = \\psi(r_1, r_2)
$$`}),`
`,a.jsx(e.p,{children:`So we can see that there are two sets of eigenvalues with
$\\lambda = \\pm 1$.`}),`
`,a.jsx(e.p,{children:`$$
P_{12}\\psi_\\pm = \\pm \\psi_\\pm
$$`}),`
`,a.jsx(e.p,{children:"We will call:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\psi_+$ are para-states"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$\\psi_-$ are ortho-states"}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`This symmetry is a really strong one and it was only recently that
direct transitions between `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.119.173401",children:"ortho and para-states were observed"}),`. Interestingly, we did not need to look into the spin
and the Pauli principle for this discussion at all. This will happen in
the next step.`]}),`
`,a.jsx(e.h2,{children:"Spin and Pauli principle"}),`
`,a.jsx(e.p,{children:`We have seen that the Hamiltonian does not contain the spin degree of
freedom. So we can decompose the total wave function as:`}),`
`,a.jsx(e.p,{children:`$$
\\overline{\\psi} = \\psi(\\mathbf{r}_1, \\mathbf{r}_2) \\cdot \\chi(1,2)
$$`}),`
`,a.jsx(e.h3,{children:"Spin degree of freedom"}),`
`,a.jsxs(e.p,{children:[`Given that the electron is $s=\\frac{1}{2}$, we can decompose each
wavefunction as:
$$\\chi = \\alpha |\\uparrow\\rangle + \\beta |\\downarrow\\rangle$$ So if the
two spins were `,a.jsx(e.em,{children:"not"}),` correlated, we could just write the spin
wavefunction as: $$\\chi(1,2) = \\chi_\\mathrm{1}\\cdot\\chi_\\mathrm{2}$$
However, the electron-electron interaction entangles the atoms. An
example would be the singlet state:
$$\\chi(1,2) = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow \\downarrow\\rangle - |\\downarrow\\uparrow \\rangle\\right)$$`]}),`
`,a.jsxs(e.p,{children:[`To construct the full wave function we need to take into account the
`,a.jsx(e.em,{children:"Pauli"})," principle, which telles us for Fermions that the ",a.jsx(e.em,{children:"full"}),`
wavefunction should anti-sysmmetrc under exchange of particles:`]}),`
`,a.jsx(e.p,{children:`$$
\\overline{\\psi}(q_1, q_2, \\cdots, q_i,\\cdots,  q_j, \\cdots) =
-\\overline{\\psi}(q_1, q_2, \\cdots, q_j,\\cdots,  q_i, \\cdots)
$$`}),`
`,a.jsx(e.p,{children:`This tells us that each quantum state can be only occupied by a single
electron at maximum.`}),`
`,a.jsx(e.p,{children:`Now we can come back to the full wavefunction using the results of the
previous section. We have:`}),`
`,a.jsx(e.p,{children:`$$
\\overline{\\psi}(1,2) = \\psi_{\\pm}(r_1,r_2)\\chi_\\mp(1,2)
$$`}),`
`,a.jsx(e.p,{children:`with
$P_{12}\\chi_\\pm = \\pm \\chi_\\pm$. Now can once again look for good
solutions to this problem. It is basically the total spin
$\\mathbf{S} = \\mathbf{S}_1 + \\mathbf{S}_2$, or better $\\mathbf{S}^2$.
This commutes with both the Hamiltonian and the parity operator, so it
is a conserved quantity. Sorting out the solutions we have`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`\\chi*- = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow\\downarrow\\rangle - |\\downarrow\\uparrow\\rangle\\right)\\
\\chi*{+,1} = |\\uparrow\\uparrow\\rangle \\
\\chi*{+,1} = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow\\downarrow\\rangle + |\\downarrow\\uparrow\\rangle\\right) \\
\\chi*{+,-1} = |\\downarrow\\downarrow\\rangle \\`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsx(e.p,{children:`So $\\chi_+$ is associated with spin 1 and $\\chi_-$ is
associated with spin 0.`}),`
`,a.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[a.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,a.jsxs(e.p,{children:["It's proper derivation is left to quantum field theory lectures ",a.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,a.jsxs(e.p,{children:["It should be as there is no external torque acting on the atom ",a.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-3",children:[`
`,a.jsxs(e.p,{children:["see lecture 2 for a few words on the definition of such a set ",a.jsx(e.a,{href:"#user-content-fnref-3","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,a.jsxs(e.li,{id:"user-content-fn-bransden",children:[`
`,a.jsxs(e.p,{children:["Brian Harold Bransden, Charles Jean Joachain. Physics of atoms and molecules. Pearson Education India, 2003. ",a.jsx(e.a,{href:"#user-content-fnref-bransden","data-footnote-backref":"","aria-label":"Back to reference 4",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function c0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(dk,{...t})}):dk(t)}const fk=Object.freeze(Object.defineProperty({__proto__:null,default:c0e,frontmatter:l0e},Symbol.toStringTag,{value:"Module"})),h0e={author:["Fred Jendrzejewski","Selim Jochim"],order:9,title:"Lecture 9 - More on the Helium atom"};function pk(t){const e={a:"a",del:"del",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We will finish our discussion of the Helium atom. Most importantly, we
will dive into the strong separation between singlet and triplet states.`}),`
`,a.jsx(e.p,{children:`In the last lecture, we saw some important properties
of the He atom:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`Total angular momentum, spin and the electronic quantum number are
labelling the states.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The exchange symmetry introduces the important distinction between
ortho and para-states.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Today, we will see how this exchange symmetry enters the level scheme
and how it is linked to the spin.`}),`
`,a.jsx(e.h1,{children:"Level scheme"}),`
`,a.jsx(e.p,{children:`We can now continue through the level scheme of Helium and try to
understand our observations. No radiative transitions between $S=0$ and
$S=1$, which means that we will basically have two independent schemes.
They are characterized by:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"electronic excitations, which are the main quantum numbers $N$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"orbital angular momentum, with quantum number $L$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"total spin with quantum number $S$"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`total angular momentum $J$, but the spin-orbit coupling in Helium is
actually extremly small.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We will then use the term notation: $$N ^{2S+1}L_J$$ the superscript is
giving the multiplicity or the number of different $J$ levels.`}),`
`,a.jsx(e.p,{children:`Having the level structure, we are now able to calculate the energies of
the different states. We will start out with the ground state and then
work our way through the excited states.`}),`
`,a.jsx(e.h1,{children:"Independent particle model"}),`
`,a.jsx(e.p,{children:`We will now go back to the influence of the interaction on the
eigenenergies of the system. Going back to the Helium atoms, we will
treat the single particle Hamiltonians as unperturbed system and
$H_{12}$ as the perturbation:`}),`
`,a.jsx(e.p,{children:`$$
H_0 = -\\frac{1}{2}\\nabla_{r_1}^2 -\\frac{Z}{r_1} -\\frac{1}{2}\\nabla_{r_2}^2 -\\frac{Z}{r_2}\\
H_1 =\\frac{1}{r_{12}}
$$`}),`
`,a.jsx(e.p,{children:`We now know the solutions to $H_0$, because the
factorize:`}),`
`,a.jsx(e.p,{children:`$$
\\left(\\hat{H}_1 + \\hat{H}_2\\right)|\\psi_1\\rangle\\otimes|\\psi_2\\rangle =
\\left(E_1 + E_2\\right)|\\psi_1\\rangle\\otimes|\\psi_2\\rangle
$$`}),`
`,a.jsx(e.h2,{children:"Groundstate energy - perturbative approach"}),`
`,a.jsx(e.p,{children:`At this stage we can try to calculate the groundstate energy. We can
derive that the unperturbed energy reads: $$E_0^{(0)}= Z^2\\text{hartree}$$
The electron interaction leads within first order perturbation theory to
an energy shift of:
$$E_0^{(1)}= \\langle\\psi_0|\\frac{1}{r_{12}}|\\psi_0\\rangle = \\frac{5}{8}Z$$
We can see that the first order energy shift is actually not that small,
so we might start to question perturbation theory.`}),`
`,a.jsx(e.h2,{children:"Groundstate energy - variational approach"}),`
`,a.jsx(e.p,{children:`In the variational approach, we will try to find the minimal energy of
the ground state. Namely we will minimize:
$$E_{var} = \\frac{\\langle\\psi|\\hat{H}|\\psi\\rangle}{\\langle\\psi|\\psi\\rangle}$$
We can actually proof that this works nicely within a few lines. For
that we will expand our trial function $|\\psi\\rangle$ into the (unknown)
eigenstates of $\\hat{H}$: $$|\\psi\\rangle = \\sum_n c_n |\\psi_n\\rangle$$
For the energies this implies:
$$\\hat{H}|\\psi_n\\rangle = E_n|\\psi_n\\rangle$$ So we end up with:`}),`
`,a.jsx(e.p,{children:`$$
\\langle \\psi|H|\\psi\\rangle - E_0 = \\sum_n E_n c_n^*c_n - E_0 \\sum_n c_n^*c_n\\
= \\sum_n (E_n-E_0)|c_n|^2 \\geq 0
$$`}),`
`,a.jsx(e.p,{children:`So the variational principle always gives an upper bound
on the ground state energy. The question is how good is this bound in
each individual case.`}),`
`,a.jsxs(e.p,{children:[`To apply the variational approach, we will introduce a variational
parameter. This parameter is typically guessed from physical intuition.
Here it will be the charge, which will be replaced by an `,a.jsx(e.em,{children:`screened
charge`})," $Z_{eff}$."]}),`
`,a.jsx(e.p,{children:`As variational wavefunction, we will employ the groundstate of the
hydrogen atom, which reads:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_{var}(r_1, r_2) = e^{-Z_{eff}(r_1+r_2)}
$$`}),`
`,a.jsx(e.p,{children:`We find then that the total energy is:
$$E_{var}^0 = Z_{eff}^2 -2ZZ_{eff}+\\frac{5}{8}Z_{eff}$$ It becomes
minimal at`}),`
`,a.jsx(e.p,{children:`$$
Z_{eff} = Z- \\frac{5}{16}
$$`}),`
`,a.jsx(e.p,{children:`So at this stage, we might compare the different levels
of approximation to the experimental result:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The experimental observation is $E_{exp}^0=-2.90372$ hartree"}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The independent particle model predicts $E^0 = -4$ hartree."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"First order pertubation theory predicts $E^0 = -2,709$ hartree."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The variational principle predicts $E^0 = -2.84$ hartree."}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:["The best theories achieve an accuracy of $10^{-7}$, see ",a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_7",children:`Hertel 2015,
Chapter 7.2.5`}),"."]}),`
`,a.jsx(e.h1,{children:"Exchange Interaction"}),`
`,a.jsxs(e.p,{children:[`Up to now we focused on the ground state properties of the $1^
1S$ state. In the next step we will try to understand the influence of
the interaction term on the excited states (c.f. `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_7",children:`Hertel 2015,
Chapter 7`}),"). To attack this problem we will approach it pertubatively."]}),`
`,a.jsx(e.p,{children:`We saw that we could factorize the full wavefunction into external and
internal degrees of freedom. Further, we have the singlet $\\chi_S$
(anti-symmetric) and triplet states $\\chi_T$ (symmetric) for the spin.
This can now be combined too:`}),`
`,a.jsxs(e.p,{children:[`$$
\\overline{\\psi}`,a.jsx(e.em,{children:"S(1,2) = \\psi"}),`{+}(r_1, r_2)\\chi_S(1,2)\\
\\overline{\\psi}`,a.jsx(e.em,{children:"T(1,2) = \\psi"}),`{-}(r_1, r_2)\\chi_T(1,2)\\
$$`]}),`
`,a.jsx(e.p,{children:`In a next step, we can construct $\\psi_{\\pm}$ from the eigenstates of
the unperturbed Hamiltonian. We define the states
$\\left|q_1\\right\\rangle \\equiv \\left|n_1,l_1,m_1\\right\\rangle$
and
$\\left|q_2\\right\\rangle \\equiv \\left|n_2,l_2,m_2\\right\\rangle$.
The properly symmetrized states are:`}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi_\\pm\\right\\rangle = \\frac{1}{\\sqrt{2}}\\left( \\left|q_1\\right\\rangle_1 \\otimes \\left|q_2\\right\\rangle_2 \\pm \\left|q_2\\right\\rangle_1 \\otimes \\left|q_1\\right\\rangle_2 \\right)
$$`}),`
`,a.jsx(e.p,{children:`Now we can perform an estimate of the energy shift on
these states.`}),`
`,a.jsxs(e.p,{children:[`$$
\\Delta E_{S,T} = \\left\\langle\\overline{\\psi_{S,T} }\\right|\\frac{1}{\\hat{r}`,a.jsx(e.em,{children:"{12}} \\left|\\overline{\\psi"}),`{S,T}}\\right\\rangle\\
= \\left\\langle\\psi_{+,- }\\right|\\frac{1}{\\hat{r}`,a.jsx(e.em,{children:"{12}} \\left|\\psi"}),`{+,- }\\right\\rangle
$$`]}),`
`,a.jsx(e.p,{children:"We then get"}),`
`,a.jsxs(e.p,{children:[`$$
\\Delta E_{S,T} = \\frac{1}{2} \\left(\\left\\langle q_1 q_2 \\right| \\pm \\left\\langle q_2 q_1\\right|\\right) \\left| \\frac{1}{\\hat{r}`,a.jsx(e.em,{children:`{12}} \\right| \\left( \\left|q_1 q_2\\right\\rangle \\pm \\left|q_2 q_1\\right\\rangle \\right)\\
= \\left\\langle q_1 q_2\\right| \\frac{1}{\\hat{r}`}),`{12}}\\left|q_1 q_2\\right\\rangle \\pm \\left\\langle q_1 q_2\\right| \\frac{1}{\\hat{r}_{12}} \\left|q_2 q_1\\right\\rangle
$$`]}),`
`,a.jsx(e.p,{children:"So we summarize:"}),`
`,a.jsx(e.p,{children:`$$
\\Delta E_S = J_{nl} + K_{nl}\\
\\Delta E_T = J_{nl} - K_{nl}
$$`}),`
`,a.jsxs(e.p,{children:["The first term is called ",a.jsx(e.em,{children:"direct"}),` (Coulomb) term and the second term is
known as `,a.jsx(e.em,{children:"exchange"})," term. If we integrate the direct term, we get:"]}),`
`,a.jsxs(e.p,{children:[`$$
J_{nl} = \\int \\int \\psi_{q_1}^`,a.jsxs(e.em,{children:["\\left(\\vec{r}",a.jsx(e.em,{children:"1\\right) \\psi"}),"{q_2}^"]})," \\left(\\vec{r}",a.jsx(e.em,{children:"2\\right) \\frac{1}{r"}),"{12}} \\psi_{q_1} \\left(\\vec{r}",a.jsx(e.em,{children:"1\\right) \\psi"}),"{q_2} \\left(\\vec{r}_2\\right) \\mathop{}!\\mathrm{d}\\vec{r}_1 \\mathop{}!\\mathrm{d}\\vec{r}",a.jsx(e.em,{children:`2 \\
= \\int \\int \\left| \\psi`}),"{q_1} \\left(\\vec{r}",a.jsx(e.em,{children:"1\\right) \\right|^2 \\left| \\psi"}),"{q_2}\\left(\\vec{r}",a.jsx(e.em,{children:"2\\right) \\right|^2 \\frac{1}{r"}),`{12}} \\mathop{}!\\mathrm{d}\\vec{r}_1 \\mathop{}!\\mathrm{d}\\vec{r}_2.
$$`]}),`
`,a.jsx(e.p,{children:"This is Coulomb repulsion."}),`
`,a.jsx(e.h2,{children:"Exchange term"}),`
`,a.jsx(e.p,{children:"The integration of the exchange term yields:"}),`
`,a.jsxs(e.p,{children:[`$$
K = \\left\\langle q_1 q_2\\right| \\frac{1}{r_{12}} \\left|q_2 q_1\\right\\rangle = \\int \\psi_{q_1}^* \\left(\\vec{r}`,a.jsx(e.em,{children:"1\\right) \\psi"}),"{q_2}^* \\left( \\vec{r}",a.jsx(e.em,{children:"2 \\right) \\frac{1}{r"}),"{12}} \\psi_{q_2}\\left(\\vec{r}",a.jsx(e.em,{children:"1\\right) \\psi"}),`{q_1} \\left( \\vec{r}_2 \\right) \\mathop{}!\\mathrm{d}\\vec{r}_1 \\mathop{}!\\mathrm{d}\\vec{r}_2
$$`]}),`
`,a.jsx(e.p,{children:`To understand it a bit better, we can rewrite it in a
more transparent way in terms of the spin operator, which measures the
difference between the singlet and the triplet state. Especially suited
is:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 = \\frac{1}{2} \\left(\\hat{\\vec{S}}^2 - \\hat{\\vec{S}}_1^2 - \\hat{\\vec{S}}_2^2 \\right)\\
\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 \\chi_T = \\frac{1}{4} \\chi_T\\
\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 \\chi_S = -\\frac{3}{4} \\chi_S
$$`}),`
`,a.jsx(e.p,{children:`This allows us to rewrite the splitting in terms of an
effective Hamiltonian`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H}`,a.jsx(e.em,{children:"\\text{eff} = J"}),"{nl} + \\frac{1}{2}\\left(1+ 4\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}",a.jsx(e.em,{children:"2\\right) K"}),`{nl}
$$`]}),`
`,a.jsx(e.h1,{children:"Obtained energy shifts."}),`
`,a.jsx(e.p,{children:"As an example, we have a look at the energy shifts (see figure below) for two electrons in the states defined by:"}),`
`,a.jsx(e.p,{children:`$$
q_1: n_1=1,l_1 = 0\\
q_2:_2=2,l_2= 0,1
$$`}),`
`,a.jsx(e.p,{children:"The $2^3S$ level for example corresponds to the state"}),`
`,a.jsx(e.p,{children:`$$
\\frac{1}{\\sqrt{2}} \\left( \\left|1s2s\\right\\rangle - \\left|2s1s\\right\\rangle \\right) \\otimes \\left|\\uparrow \\uparrow\\right\\rangle
$$`}),`
`,`
`,a.jsx(e.p,{children:`This splitting is in the order of 0.25eV and hence much larger than the
typical spin-orbit coupling. This explains, why the coupling to the
total angular momentum $J$ remains largely ignored for helium.`}),`
`,a.jsx(e.h1,{children:"Summary: Structure of the He Atom"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"In the independent particle model, a state is determined by:"}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\left|n_1 l_1 m_1\\right\\rangle \\otimes \\left|n_2 l_2 m_2 \\right\\rangle`}),`
`,a.jsx(e.p,{children:"$$"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`Only one electron can be electronically excited to a stable state.
An excellent discussion of the auto-ionization can be found in `,a.jsx(e.a,{href:"http://dx.doi.org/10.1017/cbo9780511778261",children:`Sec.
1.3 of Grynberg 2009`}),". Thus, $N$ is the quantum number of the electronic excitation."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[`Ignoring the spin degree of freedom, the eigenstates have a discrete
symmetry with respect to particle exchange. The $\\mathrm{He}$
eigenstates are therefore either in a `,a.jsx(e.em,{children:"triplet"})," or in a ",a.jsx(e.em,{children:"singlet"}),`
state. Here, we are talking about the symmetry with respect to the
exchange of two particles. No inversion of space is done here! Why
can we not assume a finite mass of the nucleui in order to describe
two electrons by hydrogenic wave functions? The nucleus' motion
would introduce an additional coupling term between the electrons`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The quantum number $L$ stands for the total orbital angular
momentum.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`There is another conserved quantity we have not discussed yet: The
total angular momentum`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\hat{\\vec{J}} = \\hat{\\vec{L}} + \\hat{\\vec{S}}.
$$`}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."})," For $\\mathrm{^4He}$, there is no nuclear spin, meaning that there is no hyperfine structure."]}),`
`,a.jsx(e.p,{children:"Let us now have a look at the level scheme of the helium atom as depicted below."}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."})," The general notation used in the figure below is"]}),`
`,a.jsx(e.p,{children:`$$
N^{2S+1}L_J,
$$`}),`
`,a.jsx(e.p,{children:"where $2S+1$ denotes the multiplicity of the spin."}),`
`,`
`,a.jsxs(e.p,{children:[`Level scheme of singlet and triplet states of the helium atom from L=0
up to L=3. The ground state 1^1^S`,a.jsx(e.del,{children:"0"}),` is chosen to have the energy E=0.
Taken from `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Demtröder 2010"}),"."]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`The fact that we can write the state down with a well-defined $S$
and $L$ is called $LS$ or Russell-Saunders coupling. All $s_i$
couple to $S = \\sum_i s_i$ and all $l_j$ couple to $L=\\sum_j l_j$.
There is no coupling between the spin and the spatial degree of
freedom!`}),`
`]}),`
`,`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`We have introduced an effective spin interaction, but we have
ignored the "real" interactions between the spins! What does it
mean? How should we introduce it if we wanted to? How can we find
out whether what we did is justifiable?`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The dipole interaction between two spins is"}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`$$
\\sim\\frac{\\mu_0(g \\mu_B/2)^2}{4\\pi \\hbar d^3} = \\frac{\\alpha^2}{4} ;(\\text{a.u.})
$$`}),`
`,a.jsxs(e.p,{children:[`where $\\mu_0 = 4\\pi \\alpha^2$, $\\mu_B=1/2$,
$\\hbar=1$, and $d\\approx`,a.jsx(e.del,{children:"a_0"}),`=~1$. Compared to the energy difference
between $2^1S$ and $2^3S$, which is $>\\alpha^2$ and on the order
of eV, it is a very small effect.`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:`Also, we have ignored the spin-orbit interaction of each electron
between its own spin and its orbital angular momentum. From the
hydrogen atom we know that the energy for the spin-orbit interaction`}),`
`]}),`
`,a.jsx(e.p,{children:`$$
E_\\textrm{ls} \\propto (Z\\alpha)^2
$$`}),`
`,a.jsx(e.p,{children:"is very strongly suppressed compared to the exchange interaction and the Coulomb repulsion."}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"Note."})," This will be different for heavy atoms, where $Z$ is large."]}),`
`,a.jsx(e.h1,{children:"Dipole Selection Rules in Helium"}),`
`,`
`,a.jsxs(e.p,{children:[`If helium atoms are excited in a gas discharge, one can see
characteristic emission lines as shown above (taken from `,a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Helium",children:"Wikipedia"}),")."]}),`
`,`
`,a.jsxs(e.p,{children:[`Possible transitions within the singlet and triplet system of helium.
Taken from `,a.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Demtröder 2010"}),`.
The singlet and triplet levels are always plotted separately and there is no
transition between a singlet and a triplet state. Because of this
observation, people thought in the beginning that there were two
different types of helium ("para" and "ortho").`]}),`
`,a.jsx(e.p,{children:`The rules for transitions to occur are determined by the dipole matrix
element containing the initial state $i$ and the final state $f$:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle i|\\hat{\\vec{r}|f}\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:"Due to the $LS$ coupling scheme, we get:"}),`
`,a.jsx(e.p,{children:`$$
\\left|\\psi(\\vec{r_1, \\vec{r}_2)}\\right\\rangle \\otimes \\left|\\chi (1,2)\\right\\rangle.
$$`}),`
`,a.jsx(e.p,{children:`There is no entanglement between the degrees of freedom
and no mixed symmetry between spin and spatial degree of freedom! If we
plug this into the matrix element and multiply it out, we get, because the
operator $\\hat{\\vec{r}}$ does not act on the spin degree of freedom:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle i|\\hat{\\vec{r},|f}\\right\\rangle = \\left\\langle\\chi(1,2) | \\chi'(1,2)\\right\\rangle \\cdot \\left\\langle\\psi(\\vec{r_1, \\vec{r}_2)|\\hat{\\vec{r}} ,| \\psi'(\\vec{r}_1, \\vec{r}_2)}\\right\\rangle
$$`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The first factor has to be zero if the total spin is not the same.
Then the relative alignment is not the same. Thus, there are no
dipole transitions between singlet and triplet atoms!`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`From the second factor we infer that transitions can only occur
between states of opposite parity, e.g., $\\Delta l = \\pm 1$,
together with angular momentum conservation.`}),`
`]}),`
`]})]})}function u0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(pk,{...t})}):pk(t)}const mk=Object.freeze(Object.defineProperty({__proto__:null,default:u0e,frontmatter:h0e},Symbol.toStringTag,{value:"Module"})),d0e={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:17,title:"Lecture 17 - Rotation and Vibration of Molecules"};function gk(t){const e={a:"a",del:"del",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`We will study the existance of vibrational and rotational levels in
molecules. It allows us investigate the transitions of molecules and
introduce the Franck-Condon principle. Finally, we will study how such
intruiging molecules are used for the study of the permanent electric
dipole moment of the electron.`}),`
`,a.jsx(e.p,{children:`We studied during the last two lectures the properties the electronic
structure. For atoms the next step was the analysis of the transition
rules to understand the spectrum. However, for molecules the electronic
transition directly couple to the vibrational and rotational motion of
the nuclei, which will have to study first.`}),`
`,a.jsx(e.h1,{children:"A short reminder on nuclear motion"}),`
`,a.jsxs(e.p,{children:[`We discussed diatomic molecules, with $N$ electrons bound to the nuclei. The full Hamiltonian of the molecule could be written in
the following fashion:
$$\\hat{H} = \\hat{T}`,a.jsxs(e.em,{children:["e + \\hat{T}",a.jsx(e.em,{children:"N + V(\\hat{\\mathbf{R}"}),"\\mathrm{A}}, \\hat{\\mathbf{R}"]}),`\\mathrm{B}},\\hat{\\mathbf{r}}_1,\\cdots, \\hat{\\mathbf{r}}_N)$$
$\\hat{T}`,a.jsxs(e.em,{children:["e$ describes the kinetic energy of the electrons, $\\hat{T}",a.jsx(e.em,{children:`N$
the kinetic energy of the nuclei and $V$ the coupling between them. The
we decomposed the full wavefunction over a nuclear part and an
electronic part:
$$\\Psi(\\mathbf{R}`}),"\\mathrm{A}, \\mathbf{R}"]}),"\\mathrm{B}, \\mathbf{r}",a.jsxs(e.em,{children:["1,\\cdots, \\mathbf{r}",a.jsx(e.em,{children:"N) = \\psi_e(\\mathbf{R}"}),"\\mathrm{A}, \\mathbf{R}"]}),"\\mathrm{B}, \\mathbf{r}",a.jsxs(e.em,{children:["1,\\cdots, \\mathbf{r}",a.jsx(e.em,{children:"N)\\cdot \\psi_n(\\mathbf{R}"}),"\\mathrm{A}, \\mathbf{R}"]}),`\\mathrm{B})$$
This allowed us to decouple nicely the two motions and study the
properties of the electronic potentials first. In the Born-Oppenheimer
approximation we obtained:`]}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{T}`,a.jsx(e.em,{children:"N \\psi_N + E_e (\\vec{R}"}),`\\textrm{a}, \\vec{R}_\\textrm{b}) \\psi_N = E \\psi_N
$$`]}),`
`,a.jsx(e.p,{children:"with"}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{T}`,a.jsx(e.em,{children:"N = - \\frac{1}{2 M"}),"\\textrm{a}} \\Delta_{\\vec{R}",a.jsx(e.em,{children:"\\textrm{a}} - \\frac{1}{2 M"}),`\\textrm{b}} \\Delta_{\\vec{R}_\\textrm{b}},
$$`]}),`
`,a.jsxs(e.p,{children:[`the total energy $E$ and the masses of the individual
atoms $M_\\textrm{a}$ and $M_\\textrm{b}$. For the electronic energy
$E_e$, only $\\vec{R} = \\vec{R}`,a.jsx(e.em,{children:"\\textrm{a} - \\vec{R}"}),`\\textrm{b}$ matters.
We then calculated the molecular potential curves $E_e(R)$, which differ
for each electronic configuration, discussed in the last lecture and sketched once more in Fig.
`,a.jsx(e.a,{href:"#fig-potential",children:"1"}),"."]}),`
`,`
`,a.jsx(e.p,{children:"In the center of mass frame we can tranform and get:"}),`
`,a.jsx(e.p,{children:`$$
\\left( - \\frac{1}{2M} \\Delta_{\\vec{R}} + E_e (\\vec{R}) \\right) \\psi_\\textrm{n} (\\vec{R}) = E \\psi_\\textrm{n} (\\vec{R}),
$$`}),`
`,a.jsx(e.p,{children:"$\\vec{R}$ is spherically symmetric, and"}),`
`,a.jsx(e.p,{children:`$$
M = \\frac{M_\\textrm{a} \\cdot M_\\textrm{b}}{M_\\textrm{a} + M_\\textrm{b}}
$$`}),`
`,a.jsx(e.p,{children:`is the reduced mass. This means that we can separate the
angular and radial motion to obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\psi_\\textrm{n} (R,\\theta,\\varphi) = \\frac{1}{R} S(R) \\cdot Y_l^m (\\theta,\\varphi)
$$`}),`
`,a.jsx(e.p,{children:`They describe the rotational and vibrational levels of
the nucleus.`}),`
`,a.jsx(e.h1,{children:"Rotations"}),`
`,a.jsx(e.p,{children:`If we assume a "rigid" molecule where the distance between the atoms is
fixed, the rotational energy is simply given by:`}),`
`,a.jsx(e.p,{children:`$$
E_\\text{rot} (R) = \\frac{J\\cdot (J+1)}{2M R^2}, (\\text{a.u.})
$$`}),`
`,a.jsx(e.p,{children:`where $M$ is the reduced mass of the nuclei in atomic
units and $J$ is the angular momentum quantum number. The factor $MR^2$
represents the moment of inertia. For more complex atoms the
relationship is not quite as simple and the rotational energy is
typically described by the moment of interia $I_{ij}$. The Hamiltonian
for this rotation reads then:`}),`
`,a.jsxs(e.p,{children:[`$$
\\hat{H}`,a.jsx(e.em,{children:"{rot} =\\frac{J_x^2}{2I"}),`{xx}}+\\frac{J_y^2}{2I_{yy}}+\\frac{J_z^2}{2I_{zz}}
$$`]}),`
`,a.jsx(e.p,{children:`The molecule $H_2$ has then a rotational frequency
$\\omega/2\\pi =3\\cdot 10^{12}\\cdot J(J+1) \\text{Hz}$.`}),`
`,a.jsx(e.h1,{children:"Vibrations"}),`
`,a.jsx(e.p,{children:`As already known from the hydrogen atom we can use the angular solutions
to discuss the radial solutions. We have to solve now:`}),`
`,a.jsx(e.p,{children:`$$
\\left( \\frac{1}{2M} \\frac{d^2}{dR^2} + E_e (R) + \\frac{1}{2M} \\frac{J(J+1)}{R^2} \\right) S(r) = E_\\text{vib} S(R)
$$`}),`
`,a.jsxs(e.p,{children:["If the extension from the minimum (see ",a.jsx(e.a,{href:"#fig-internuclear",children:"2"}),`) is small, we can approximate it by a harmonic
potential. We can then find a vibrational energy
$E_\\text{vib} = \\omega_0 (\\nu+\\frac{1}{2}), \\nu=0,1,\\cdots$ The
harmonic expansion around the minimum reads:`]}),`
`,a.jsx(e.p,{children:`$$
E_e \\approx E_0 + \\frac{1}{2} M \\omega_0^2 (R-R_0 )^2
$$`}),`
`,a.jsxs(e.p,{children:["For the example of H",a.jsx(e.del,{children:"2"}),", we get $\\omega/2\\pi \\sim 10^{14}$ Hz."]}),`
`,`
`,a.jsxs(e.p,{children:[`A better approximation of the vibrational level structure than the
simple harmonic oscillator is the `,a.jsx(e.strong,{children:"Morse potential"}),"."]}),`
`,a.jsx(e.h2,{children:"The Morse potential"}),`
`,a.jsx(e.p,{children:"In this case we approximate the molecular potential curves by:"}),`
`,a.jsx(e.p,{children:`$$
E_e(R) \\approx V_\\text{morse}(R)\\
V_\\text{morse}(R) =hcD_e(1-e^{-ax})^2\\text{ with }a =\\sqrt{\\frac{k}{2hcD_e}}\\
x = R-R_0
$$`}),`
`,a.jsx(e.p,{children:`Its particular usefulness stems from the fact that it is
still analyitically solvable and we obtain:`}),`
`,a.jsx(e.p,{children:`$$
E_{vib}=(\\nu+\\frac{1}{2})\\hbar \\omega-(\\nu+\\frac{1}{2})^2 \\hbar \\omega x_e\\
\\omega x_e = \\frac{a^2\\hbar}{2M}
$$`}),`
`,a.jsx(e.p,{children:"$x_e$ is then called the anharmonicity parameter."}),`
`,a.jsx(e.h1,{children:"Molecular transitions"}),`
`,a.jsx(e.p,{children:`We are now ready to discuss the different transitions that might appear
in the spectrum. And we will work our way through the different levels
of energy as we will see that they are all coupled.`}),`
`,a.jsx(e.h2,{children:"Rotational transitions"}),`
`,a.jsx(e.p,{children:`We will start out with the transitions of the lowest frequency, the
rotational transitions. So, we would like to know if it is possible to
transition from a state
$\\left|\\epsilon, J, M_J\\right\\rangle$ to another state
$\\left|\\epsilon, J', M_J'\\right\\rangle$, where $\\epsilon$
describes the electronic and vibrational degree of freedom. This means
that we have to calculate as usual the the electric dipole moment:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\epsilon, J', M_J'\\right| \\vec{D}\\left|\\epsilon, J, M_J\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`Within the Born-Oppenheimer approximation electronic and
rotational degree of freedom decouple and we can write:`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\epsilon, J', M_J'\\right| \\vec{D}\\left|\\epsilon, J, M_J\\right\\rangle = \\left\\langle J', M_J'\\right| \\left\\langle\\epsilon\\right|\\vec{D}\\left|\\epsilon\\right\\rangle\\left| J, M_J\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`This electric dipole transitions were forbidden in atoms
as they do not have a permanent electric dipole moment. However,
hetero-nuclear atoms can have such a permanent electric dipole moment,
they are called polar molecules. Examples are alkali-alkali molecules
like NaK, NaCs, KRb whose permenanent electric dipole moment can be up
$3 ea_0$. It follows that:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:a.jsx(e.strong,{children:"Pure rotational transitions exist in polar molecules."})}),`
`]}),`
`,a.jsx(e.p,{children:`The transition rules are di-atomic molecules: $\\Delta J = \\pm 1$ and
$\\Delta M_J= 0, \\pm1$. For more complex molecules these transition rules
can vary quite substantially as the rotational degree of freedom might
have to be described by an additional quantum number.`}),`
`,a.jsx(e.h2,{children:"Vibrational transitions"}),`
`,a.jsx(e.p,{children:`In the next step, we would like to understand the transitions between
different vibrational levels. Hence, we are investigating the electric
dipole moment`}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\epsilon, \\nu'\\right| \\vec{D}\\left|\\epsilon, \\nu\\right\\rangle= \\left\\langle\\nu'\\right| \\vec{D}_\\epsilon\\left|\\nu\\right\\rangle
$$`}),`
`,a.jsx(e.p,{children:`The evaluation is now not quite as simple as for the
rotational degree of freedom as both $\\nu$ and $\\epsilon$ will influence
the length of the molecule, they both directly depend on $R$. We can
develop the electric dipole moment as a function of distance from the
equilibrium and write then:`}),`
`,a.jsxs(e.p,{children:[`$$
\\left\\langle\\nu'\\right| \\vec{D}`,a.jsx(e.em,{children:"\\epsilon\\left|\\nu\\right\\rangle= \\left\\langle\\nu'\\right| \\left(\\vec{D}"}),"\\epsilon(0)+ \\frac{d\\vec{D}",a.jsx(e.em,{children:`\\epsilon}{dx}x+\\cdots\\right)\\left|\\nu\\right\\rangle\\
= \\frac{d\\vec{D}`}),`\\epsilon}{dx}\\left\\langle\\nu'\\right|x\\left|\\nu\\right\\rangle+\\cdots
$$`]}),`
`,a.jsx(e.p,{children:`So vibrational transistions will only happen in
molecules for which the permanent electric dipole changes as a function
of distance. Once again they are non-existant in homo-nuclear molecules.`}),`
`,a.jsx(e.h1,{children:"Vibronic transitions"}),`
`,a.jsxs(e.p,{children:[`At this stage, we are ready to discuss electronic transitions. If we are
performing an electronic transition this also implies a change on the
molecular potential curve as indicated in Fig.
`,a.jsx(e.a,{href:"#fig-franck-condon",children:"3"}),`. Imagine now the
transition of the ground state molecular branch (called the X branch) to
a higher electronic shell (called A, B, C, ...). Such a transition will
happen at constant internuclear radius as they are much faster than the
nuclei motion. This implies that an electronic transition will typically
excite the molecule into a high vibrational branch. The dipole moment is
then proportional too:`]}),`
`,a.jsx(e.p,{children:`$$
\\left\\langle\\epsilon', \\nu'\\right| \\vec{D}\\left|\\epsilon, \\nu\\right\\rangle\\approx \\vec{D}_{\\epsilon, \\epsilon'} \\left\\langle\\nu'\\right| \\left|\\nu\\right\\rangle
$$`}),`
`,`
`,a.jsx(e.p,{children:`The factor
$S(\\nu, \\nu')=|\\left\\langle\\nu\\right|\\left|\\nu'\\right\\rangle|^2$
is then called the Franck-Condon factor and it describes the strength of
the transitions.`}),`
`,a.jsx(e.p,{children:`It is exactly this coupling of different hierarchies that makes the
molecular spectra so rich and also extremely tough to control.`}),`
`,a.jsx(e.h1,{children:"Can we get into the groundstate ?"}),`
`,a.jsxs(e.p,{children:[`Given all the complexities of molecules it seems non-trivial to find a
scheme that gets them into the ground state. For atoms laser cooling has
proven very efficient as we will discuss later. However, it mainly
adresses the cooling of external degrees of freedom. In molecules a
significant amount of energy its in the rotational and vibrational
levels. In this connection, a beautiful solution has been demonstrated
in `,a.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.1163861",children:"Ni 2008"}),"."]}),`
`,a.jsxs(e.p,{children:["The scheme is visualized in Fig. ",a.jsx(e.a,{href:"#fig-ni2008",children:"4"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`In a first step the atoms are cooled and then associated to a highly
excited molecule in the a^3^$\\Sigma$ state. From there the atom has to
be transferred down in to the ground state
$\\left|g\\right\\rangle$. A direct thransfer is not possible
as the Franck-Condon factors do not allow for it. Another path is to go
through an intermediate level (here the 2$^3 \\Sigma$ level), which has
overlap with both of them. However, this level has typically overlap
with plenty of other levels and a finite lifetime. How can we then
optimize the transfer ? The idea is to use the concept of dark states in
the triplet of \${i, e, g}$.`}),`
`,a.jsx(e.h2,{children:"The dark states in three level systems"}),`
`,a.jsx(e.p,{children:`We can visualize the idea of the dark state transfer through the
following Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}= \\Omega_1\\left(\\left|i\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle i\\right|\\right)+\\Omega_2\\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)
$$`}),`
`,a.jsx(e.p,{children:"We can rewrite it as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}= (\\Omega_1\\left|i\\right\\rangle+\\Omega_2\\left|g\\right\\rangle)\\left\\langle e\\right|+\\left|e\\right\\rangle(\\Omega_1\\left\\langle i\\right|+\\Omega_2\\left\\langle g\\right|)\\
\\propto\\left|B\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle B\\right|\\
\\left|B\\right\\rangle= \\frac{\\Omega_1\\left|i\\right\\rangle+\\Omega_2\\left|g\\right\\rangle}{\\sqrt{\\Omega_1^2+\\Omega_2^2}}
$$`}),`
`,a.jsx(e.p,{children:`So in the three level scheme the excited state is always
could to the so-called bright state, which is a coherent superposition
of $\\left|g\\right\\rangle$ and
$\\left|i\\right\\rangle$. The orthogonal state is the dark
state:`}),`
`,a.jsx(e.p,{children:`$$
\\left|D\\right\\rangle= \\frac{\\Omega_1\\left|g\\right\\rangle-\\Omega_2\\left|i\\right\\rangle}{\\sqrt{\\Omega_1^2+\\Omega_2^2}}\\
\\langle B| D\\rangle = 0
$$`}),`
`,a.jsx(e.p,{children:`Now we can also discuss the transfer sequence non as
STIRAP (stimulated Raman adiabatic passage).`}),`
`,a.jsx(e.h2,{children:"STIRAP"}),`
`,a.jsx(e.p,{children:`STIRAP transfers the loosely bound molecules coherently into the
groundstate without ever passing through the lossy excited level. It has
the following steps:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The dressing laser $\\Omega_2$ is ramped on. The initial
$\\left|i\\right\\rangle$ is now the dark state.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The coupling laser $\\Omega_1$ is ramped on, while the laser
$\\Omega_2$ is ramped down. This transfers the
$\\left|i\\right\\rangle$ adiabatically into the state
$\\left|g\\right\\rangle$, which is the dark state for
fully switched of $\\Omega_2$.`}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The molecules are now in the groundstate with a transfer efficiency of
roughly $50%$.`}),`
`,a.jsx(e.h1,{children:"Measurement of the electron electric dipole moment"}),`
`,a.jsxs(e.p,{children:[`Despite their complexity, molecules can be an enormously powerful tool
for precision measurements as you might find in `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.90.025008",children:"this"})," or ",a.jsx(e.a,{href:"https://arxiv.org/abs/1710.02504",children:"this review"}),`. The test of
the existance of a permanent electric dipole moment (electron edm) of
the electron is one of these tests.`]}),`
`,a.jsxs(e.p,{children:[`What does does the existance of electron edm actually mean ? We have
already discussed quite heavily the existance of a permanent edm for
polar molecules. The amplitude of their dipole moment is in the order of
a few $ea_0$, which is also the natural unit for the induced edm of
atoms. One could now also imagine that the electron itself has an edm,
which is aligned with its spin $\\vec{D}_e = d_e \\vec{s}_e$. The standard
model actually predicts such a permanent electron edm, but only of the
amplitude $d_e \\approx 10^{-30}ea_0$, which is fantastically small .
However, the search continues as most extensions of the standard model
actually predict substantially higher values as summarized in Fig.
`,a.jsx(e.a,{href:"#fig-dipole",children:"5"}),`. As we can see the
most precise measurments are actually performed in very heavy di-atomic
molecules.`]}),`
`,a.jsxs(e.p,{children:[`In these molecules the electron 'feels' enormous effective electric
fields, which can reach the `,a.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.119.153001",children:"several GV/cm regime"}),"."]}),`
`,`
`,a.jsx(e.p,{children:`The search for the dipole moment is then testing the dependence of the
electron energy:`}),`
`,a.jsx(e.p,{children:`$$
E_\\pm  = \\pm(\\mu B_0 + d_e E)
$$`}),`
`,a.jsx(e.p,{children:`This energy difference can be read out through Ramsey
spectroscopy. Switching the electric field allows then to switch the
frequency difference by $\\hbar \\delta \\omega = 4d_e E$. Only an upper
limit is known up to now $|d_e|< 8.7 e cm$.`})]})}function f0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(gk,{...t})}):gk(t)}const bk=Object.freeze(Object.defineProperty({__proto__:null,default:f0e,frontmatter:d0e},Symbol.toStringTag,{value:"Module"})),p0e={author:["Fred Jendrzejewski"],order:3,title:"Tutorial on the nobel prize 2022 - How to win Bell's game"};function yk(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"The nobel prize of physics for the year 2022 was awarded to three physicists for the test of Bell inequalities. As this work is foundational to any kind of modern quantum technology, we decided to provide you here with a description of the experiments in terms of a game. While the game is slightly odd it shows you nicely how quantum mechanics allow you to break the casino and what the experiments demonstrated specifically."}),`
`,a.jsxs(e.p,{children:["To make the discussion very direct and hands-on we will implement it in some simple ",a.jsx(e.code,{children:"qiskit"})," circuits such that you can test them directly on your own."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`import random

from qiskit.circuit import QuantumCircuit
from qiskit import Aer

import numpy as np
import matplotlib.pyplot as plt
from tqdm import trange
`})}),`
`,a.jsx(e.h2,{children:"The casino version of Bell's (CHSH) game"}),`
`,a.jsx(e.p,{children:"A casino invented a new and exciting game, where Alice and Bob can try to win some nice objects at a huge discount together. To participate in the game they have to pay 300 € as a team, but they have a good chance to come out of the game with objects that are worth 400€. Here are the rules of the game:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Alice and Bob have to go into isolated cabins, where they get to see one out of two nice Apple watches (one being black and one being white). Quite importantly, they do not know which car was given to the other contestant."}),`
`,a.jsx(e.li,{children:'Now Alice and Bob have to tell the Referee what they would like to do. They have two options. They can either say that they would like to "sell" the watch or "keep" it.'}),`
`]}),`
`,a.jsx(e.p,{children:"After they told the referee, their answers are compared. They can win in the following fashion:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:'If Alice and Bob both saw a white watch, they win of one wanted to "sell" and the other one wanted to "keep" the car.'}),`
`,a.jsx(e.li,{children:'In any other case, they win if both answered the same way ("keep" or "sell")'}),`
`]}),`
`,a.jsx(e.p,{children:"Let us simply translate these rules into python code."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def bell_game(color_a: str, color_b: str, choice_a: str, choice_b: str) -> str:
    """
    The bell casino game translated into python

    Args:
      color_a: the color that Alice sees (either \`black\` or \`white\`)
      color_b: the color that Alice sees (either \`black\` or \`white\`)
      choice_a: the choice the Alice makes (\`keep\` or \`sell\`)
      choice_b: the choice the Bob makes (\`keep\` or \`sell\`)

    Returns:
      A sring that says if Alice and Bob "won" or "lost"
    """
    # the one case where Alice and Bob have to have different results
    if color_a == "white" and color_b == "white":
        if choice_a == "keep" and choice_b == "sell":
            return "won"
        if choice_a == "sell" and choice_b == "keep":
            return "won"
    else:
        if choice_a == choice_b:
            return "won"
    return "lost"
`})}),`
`,a.jsx(e.h2,{children:"The best classical strategy"}),`
`,a.jsx(e.p,{children:'It turns out that the best way to win for Alice and Bob is to cooperate and decide before if they would like to "keep" or "sell" the watch. Then they will get their wish in 75% of the cases and only lose if both see a white watch. We can even simulate this casino session in simple python code'}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`n_games = 10000
wins = np.zeros(n_games)

# Alice and Bob decided to cooperate and always say "sell"
choice_alice = "sell"
choice_bob = "sell"

for ii in range(n_games):

    # get the colors
    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        wins[ii] = 1

print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        wins.sum(), n_games, wins.sum() / n_games * 100
    )
)
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Alice and Bob won 7489.0 games out of 10000. Hence a win rate of 74.89 %
`})}),`
`,a.jsx(e.p,{children:"We can see this makes the game fair as Bob and Alice have an expectation value of exactly 300€, so the casino and the players will have just an enjoyable time if we look at the wins and losses over the games."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`profit = wins * 400 - np.ones(n_games) * 300
accu_profit = profit.cumsum()

f, ax = plt.subplots()
ax.plot(accu_profit)
ax.set_ylabel("profit in €")
ax.set_xlabel("number of games")
ax.axhline(0, color="k")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`<matplotlib.lines.Line2D at 0x1111181f0>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"/quantum/basics/bell_inequalities_files/bell_inequalities_7_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Breaking the casino with quantum technologies"}),`
`,a.jsx(e.p,{children:"Quite interestingly Alice and Bob could win more often if they have access to quantum technologies. So we just assume that Alice and Bob are really good techies and had access to a quantum computer, which allows them to entangle two qubits. Let us first plot up the kind of instructions that Alice and Bob have to give the quantum computer to obtain the entangled pair."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")

qc = QuantumCircuit(2)
qc.h(0)
qc.cx(0, 1)
qc.draw("mpl")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"/quantum/basics/bell_inequalities_files/bell_inequalities_9_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"As a result of the circuit they have created a pair of entangled qubits. Imagine now that Alice and Bob can each one take one of the qubits into their cabin to play the quantum game. Given that Alice and Bob have to carry the qubit they have to have it in a box with two buttons."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["The first button says ",a.jsx(e.code,{children:"measurement"})," such that they can read out the recommendation of their qubit."]}),`
`,a.jsx(e.li,{children:"The second button allows them change their personal qubit a bit once they saw if they have a white or black watch in front of them."}),`
`,a.jsx(e.li,{children:"The key thing is that the box is not sending out any signal to the other player. So they are following perfectly the rules of the casino."}),`
`]}),`
`,a.jsx(e.h2,{children:"A naive quantum strategy"}),`
`,a.jsxs(e.p,{children:["A naive way of using the qubit is to simply push the ",a.jsx(e.code,{children:"measurement"}),' and nothing else.If the qubit results in a zero, they will tell the casino that they would like to "keep" the watch. If it is qubit result is a one, they decide to "sell" the watch.']}),`
`,a.jsxs(e.p,{children:["We can just implement this once as a ",a.jsx(e.code,{children:"qiskit"})," circuit and look at the result."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`n_games = 10000

naive_q_wins = np.zeros(n_games)
for ii in trange(n_games):

    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    # time to prepare the Bell pair
    qc = QuantumCircuit(2)
    qc.h(0)
    qc.cx(0, 1)

    # both measure
    qc.measure_all()

    # now run the circuit
    job = sim.run(qc, shots=1)
    outcome = job.result().get_counts()

    # a horribly intransparent way to get the value of the outcome
    keys = [*outcome][0]
    choice_alice = "sell" if keys[0] == "0" else "keep"
    choice_bob = "sell" if keys[1] == "0" else "keep"

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        naive_q_wins[ii] = 1

print("")
print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        naive_q_wins.sum(), n_games, naive_q_wins.sum() / n_games * 100
    )
)
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`100%|███████████████████████████████████| 10000/10000 [00:03<00:00, 2953.99it/s]


Alice and Bob won 7500.0 games out of 10000. Hence a win rate of 75.00 %
`})}),`
`,a.jsx(e.p,{children:"As you can see above the players right now will always make the same choice. This is just a very geeky variation of the classical strategy that we implemented above."}),`
`,a.jsx(e.h2,{children:"The winning quantum strategy"}),`
`,a.jsx(e.p,{children:"But being really good in quantum tech, Alice and Bob now also have the second button at hand to have a more sophisticated strategy, which allows them to take into account the color of the watches that they see in front of them."}),`
`,a.jsx(e.p,{children:"So what is the physics Bob and Alice developped the following strategy:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["If Alice sees a ",a.jsx(e.em,{children:"black"})," watch she simply measures her qubit."]}),`
`,a.jsxs(e.li,{children:["If Alice sees a ",a.jsx(e.em,{children:"white"})," watch she changes her personal qubit a bit by pushing the button on her qubit bag. In physics terms, it applies a hardamard gate on her qubit. Then she measures her qubit."]}),`
`]}),`
`,a.jsx(e.p,{children:"Bob does the following:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["If he sees a ",a.jsx(e.em,{children:"white"})," watch he switches the button to ",a.jsx(e.code,{children:"white"}),". This performs $R_y$ a rotation of qubit by $\\frac{\\pi}{8}$."]}),`
`,a.jsxs(e.li,{children:["If he sees a ",a.jsx(e.em,{children:"black"})," watch he switches the button to ",a.jsx(e.code,{children:"black"}),". This performs $R_y$ a rotation of qubit by $-\\frac{\\pi}{8}$."]}),`
`]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`n_games = 10000

fancy_q_wins = np.zeros(n_games)
for ii in trange(n_games):

    # get the numbers that tell us if Alice and Bob obtained
    # a white or a black watch
    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    # time to prepare the Bell pair
    qc = QuantumCircuit(2)
    qc.h(0)
    qc.cx(0, 1)

    # Alice acts her qubit
    if color_alice == "white":
        qc.h(0)

    # Bob acts on his qubit
    if color_bob == "white":
        qc.ry(np.pi / 8, 1)
    else:
        qc.ry(-np.pi / 8, 1)

    # both measure
    qc.measure_all()

    # now run the circuit
    job = sim.run(qc, shots=1)
    outcome = job.result().get_counts()
    result = "lost"

    # a horribly intransparent way to get the value of the outcome
    keys = [*outcome][0]
    choice_alice = "sell" if keys[0] == "0" else "keep"
    choice_bob = "sell" if keys[1] == "0" else "keep"

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        fancy_q_wins[ii] = 1

print("")
print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        fancy_q_wins.sum(), n_games, fancy_q_wins.sum() / n_games * 100
    )
)
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`100%|███████████████████████████████████| 10000/10000 [00:03<00:00, 2636.13it/s]


Alice and Bob won 8318.0 games out of 10000. Hence a win rate of 83.18 %
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`fancy_profit = fancy_q_wins * 400 - np.ones(n_games) * 300
fancy_accu_profit = fancy_profit.cumsum()

f, ax = plt.subplots()
ax.plot(accu_profit, label="classical tech", lw=3, alpha=0.5)
ax.plot(fancy_accu_profit, label="quantum tech", lw=3)
ax.axhline(0, color="k")
ax.set_ylabel("profit in €")
ax.set_xlabel("number of games")
ax.legend()
ax.set_xlim(0, n_games)
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`(0.0, 10000.0)
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"/quantum/basics/bell_inequalities_files/bell_inequalities_15_1.png",alt:"png"})}),`
`,a.jsxs(e.p,{children:["This graph nicely summarizes that Alice and Bob have found a clear ",a.jsx(e.strong,{children:"quantum advantage"})," in the game. They could break the casino if the casino let's them play long enough. It is fairly crucial to underline that Alice and Bob did not cheat in any way. They were simply able to do ",a.jsx(e.strong,{children:"more"})," with quantum technologies than it would be possible with any classical approach."]}),`
`,a.jsx(e.h2,{children:"The link to the Nobel prize"}),`
`,a.jsx(e.p,{children:"This quantum advantage was formulated in a clean fashion in Bell's inequalities in the 1970s. The three Nobel prize winners (John Clauser, Alain Aspect, Anton Zeilinger) tested experimentally that it is indeed possible for Alice and Bob to break the casino without any cheating."}),`
`,a.jsxs(e.p,{children:["Of course, the experimentalists did not take qubits into a casino. The experiments performed the game in highly controlled lab experiments. The qubits were implemented through flying photons and the decisions on the colors of the watches were high quality random number generators. Even as the experiments became more and more sophisticated they continued to show that the entangled qubits allowed for quantum advantage. And this work was so foundational to modern quantum technologies that it obtained this years ",a.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/2022/press-release/",children:"Nobel prize"}),". Modern quantum computing systems and sophisticated algorithms essentially attempts to reproduce this clear advantage in increasingly complex situations like ",a.jsx(e.a,{href:"https://alqor.io/tutorials/introduction-to-generative-modelling-with-quantum-hardware",children:"unsupervised machine learning"}),"."]})]})}function m0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(yk,{...t})}):yk(t)}const xk=Object.freeze(Object.defineProperty({__proto__:null,default:m0e,frontmatter:p0e},Symbol.toStringTag,{value:"Module"})),g0e={author:["Fred Jendrzejewski"],order:1,title:"Tutorial 1 - Basic concepts of quantum technologies"};function wk(t){const e={h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"In today's world, the word “quantum” evokes similar dreams, hopes and reactions like the words “blockchain” or “artificial intelligence”. Enthusiasts focus exclusively on the disruptive potential while the greater public sees it mostly as a big hype which is impossible to understand for normal people. This hipster role is rather new to the quantum sector which has largely evolved under the radar to the greater public for the last one hundred years. In this tutorial series, we will summarize some basic concepts of quantum physics and then  discuss the four pillars of quantum technologies:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum metrology"}),", where we use quantum physics for precise measurements."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum cryptography"}),", where we improve security through quantum physics."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum simulation"}),", where we solve specific problems that are hard for normal computers with quantum systems."]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum computing"}),", where we build a new computational framework with quantum mechanics."]}),`
`]}),`
`,a.jsx(e.h2,{children:"The esoteric beginnings of quantum physics in the 1920s"}),`
`,a.jsx(e.p,{children:`Theoretical physicists like Planck, Einstein, Schrödinger or Heisenberg (before he was reborn as a drug kingpin in a TV series) founded quantum physics in the 1920s. They tried to explain rather esoteric physical effects like black body radiation or the photoelectric effect. This work proved to have major implications to our understanding of physics and became integral to the description of our world.
The mathematical framework behind quantum mechanics is sufficiently advanced to go well beyond high school physics, so we will skip it here. But if you have the feeling that you would like to have a deeper understanding, here are some ways of doing this:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We wrote a university lecture on the cooking recipes for quantum mechanics with plenty of references. It is a one hour summary that might get you started if you are familiar with most of the maths."}),`
`,a.jsx(e.li,{children:"If you would like to get a marvelous introduction into some basic principles of quantum mechanics we recommend the absolutely outstanding Feynman lectures. "}),`
`,a.jsx(e.li,{children:"The books by Cohen Tannoudji give an extensive and clean introduction into quantum mechanics with discussions of numerous problems."}),`
`]}),`
`,a.jsx(e.h2,{children:"Two rules, no math"}),`
`,a.jsx(e.p,{children:"In this tutorial series, we discuss quantum mechanics based on two rules with no math. This beautiful description was given by Chris Monroe in a short youtube video that we highly recommend before you continue."}),`
`,a.jsxs(e.p,{children:["We will just call the rules from the video ",a.jsx(e.strong,{children:"quantum rules one and two"})," throughout the tutorial series."]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum rule 1"}),": Quantum objects can be in several states at the same time. "]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Quantum rule 2"}),": Rule number one only works when you are not looking."]}),`
`]}),`
`,a.jsx(e.p,{children:"We will see these two rules in action in every single quantum technology, but here we will visualize them directly by the famous Schrödinger cat."}),`
`,a.jsx(e.h2,{children:"Schrödingers cat"}),`
`,a.jsx(e.p,{children:"Erwin Schrödinger, one of the founders of quantum mechanics, illustrated the rules of quantum mechanics through the following thought experiment."}),`
`,a.jsx(e.p,{children:"It is a thought experiment of a cat that is trapped in a box together with a closed bottle of toxic gas. A very thin filament that might snap at any time keeps a hammer above the bottle from falling. And when the hammer hits the bottle the unfortunate cat dies of poisoning. The final ingredient is that we cannot see or hear anything of what is happening within the box without opening it. So if we look at this problem through the rules of quantum mechanics two options are imaginable:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["Option A: The filament holds, the bottle remains intact and the ",a.jsx(e.strong,{children:"cat stays alive"}),"."]}),`
`,a.jsxs(e.li,{children:["Option B: The filament snaps, the bottle breaks and the ",a.jsx(e.strong,{children:"cat is dead"}),"."]}),`
`]}),`
`,a.jsxs(e.p,{children:[a.jsx(e.strong,{children:"If we can apply the rules of quantum mechanics"})," we know from quantum rule 1 the cat will therefore be in both states at the same time, it is dead and alive as long as the box is closed. We will often use the terms ",a.jsx(e.strong,{children:"superposition"})," to describe a situation where a system is in multiple states at the same time. But as soon as we open the box, we will only see it as being dead or alive according to quantum rule 2."]}),`
`,a.jsx(e.p,{children:"The art of quantum technologies is then to build up systems that follow these rules in a very controlled manner. Physicists developed increasingly refined approaches over the last one hundred years. The technologies have lead to different quantum hardware platforms based on atoms, electrons or even light. We have a whole series of tutorials on quantum hardware if you would like to know more about it. Over the years, physicists have learned to master these systems to an increasingly high degree. And it has now even been possible to realize Schrödinger's thought experiment. See for example here for a realization with atoms."}),`
`,a.jsx(e.h2,{children:"The two quantum rules in the different quantum technologies"}),`
`,a.jsx(e.p,{children:"To end this tutorial, we now discuss how we use the two rules as essential ingredients in all quantum technology stacks. We leave the much more detailed discussion to the next parts of the series."}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:["In ",a.jsx(e.strong,{children:"quantum metrology"})," we put the measurement system into a superposition in the first step (quantum rule 1). We can think of it like a coin that is tossed and rotates at a speed that might depend on gravity. We then measure the result after some time and as for any coin, we will always get heads or tails. "]}),`
`,a.jsxs(e.li,{children:["In ",a.jsx(e.strong,{children:"quantum cryptography"})," we put a pair of photons into a superposition. Then, we send them to the partners that would like to communicate. If someone tries to listen to the discussion he will measure the system and destroy the superposition. Smart protocols use this to secure the communication."]}),`
`,a.jsxs(e.li,{children:["In ",a.jsx(e.strong,{children:"quantum simulation"})," physicists design a system to solve a very specific problem efficiently by testing multiple solutions in parallel. The measurement in the end allows the observers the solution to the problem."]}),`
`,a.jsxs(e.li,{children:["In ",a.jsx(e.strong,{children:"quantum computing"})," we put we computational units into superpositions. Then, smartly designed algorithms can solve certain problems more efficiently than classical computers. The final measurement is then telling the user the result of the computation."]}),`
`]}),`
`,a.jsx(e.h2,{children:"Summary"}),`
`,a.jsx(e.p,{children:"In this tutorial we discussed basic concepts of quantum technologies. We saw that the key challenge is to implement systems that follow the two quantum rules. The designer chooses then the technologies that solve the problem at hand in the most efficient way. We will focus on quantum metrology in our next tutorial before we move on to the other pillars."})]})}function b0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(wk,{...t})}):wk(t)}const _k=Object.freeze(Object.defineProperty({__proto__:null,default:b0e,frontmatter:g0e},Symbol.toStringTag,{value:"Module"})),y0e={author:["Fred Jendrzejewski"],order:2,title:"Tutorial 2 - Quantum metrology"};function vk(t){const e={a:"a",blockquote:"blockquote",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"Welcome back to our second lesson on quantum technologies. In this lesson, we will discuss how quantum systems are used for precise measurements in a variety of situations. We saw in the last lesson, that quantum physics was initially developed to explain some observations in the laboratory. However, in the 1960s and 1970s more and more lasers became accessible as a new tool for experimental physicists. They allowed brave pioneers to cool and trap individual particles. This work was purely curiosity-driven and was launched in a tiny number of university and government laboratories. It suddenly allowed people like Dave Wineland, Bill Phillipps or Claude Cohen-Tannoudji a previously unimaginable degree of control over atoms and ions. This kind of work had such an important impact on physics that it was recognized with several nobel prizes and is now used to define our measurement units like the second, the meter etc."}),`
`,a.jsx(e.p,{children:"We will go through three specific examples and see how quantum technologies are used there."}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"The measurement of time is nowadays done with atomic clocks and so precise that clocks can be used for the measurement of height."}),`
`,a.jsx(e.li,{children:"The measurement of magnetic fields is getting more and more precise thanks to quantum technologies. We are now even able to measure the magnetic fields that are created by brain activity."}),`
`,a.jsx(e.li,{children:"Measurement of forces are essential for navigation of planes and large ships. Quantum technologies are an essential tool to improve these measurement to a stage where satellites are not needed anymore."}),`
`]}),`
`,a.jsx(e.h2,{children:"Measuring time with atomic clocks"}),`
`,a.jsx(e.p,{children:"Precise time keeping is essential to mondern industry. Financial services are highly timed, navigation depends on the precise timing of the GPS satellites and we are all following the same time of the network time protocol. And nowadays time is kept with increasingly precise atomic clocks, which are one of the earliest quantum technologies we have. A few reasons which atomic clocks are such marvelous time keepers are:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"No need to get the american, chinese or european atom as they are all equal. Once we agreed with other how we measure time with atoms we all have exactly the tools at hand."}),`
`,a.jsx(e.li,{children:"Atomic clocks a extremely precise. Commercially available rubidium clocks (for a few thousand euros) are precise to within 10^{-11}. Modern research has push this to 10^{-21} as described in this paper."}),`
`]}),`
`,a.jsx(e.h2,{children:"How do atomic clocks roughly ?"}),`
`,a.jsx(e.p,{children:"You might have heard that atoms consist of a nucleus which is positively charged and a bunch of negatively charged electrons circling around this nucleus. And as for satellites that orbit around earth, their speed is different in different orbits. So, electrons that are closer to the core, in a lower orbit, take less time to circle around the core than electrons that that further away, in a higher orbit. And it was one of the first discoveries by quantum mechanics that only a number of very specific orbits with sharply defined frequencies are allowed."}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"/quantum/basics/AtomWithOrbits.png",alt:"Atoms"})}),`
`,a.jsx(e.p,{children:"And then then electrons can then jump from one orbit to another if you shine in microwave radiation at the corresponding frequency. Yes, it is the same kind of radiation that heats up your food in the microwave oven. Except that here the radiation does not heat the atom it just makes the electron jump to another orbit. And this highly controlled transition of the electron between two orbits is what atomic clocks are building upon. Actually, we have now defined the second based on this idea. The definition reads:"}),`
`,a.jsxs(e.blockquote,{children:[`
`,a.jsx(e.p,{children:"The second, symbol $s$, is the SI unit of time. It is defined by taking the fixed numerical value of the caesium frequency $\\Delta \\nu_\\text{Cs}$, the unperturbed ground-state hyperfine transition frequency of the caesium-133 atom, to be 9 192 631 770 when expressed in the > unit Hz, which is equal to $s^{-1}$."}),`
`,a.jsxs(e.p,{children:["From the website of the ",a.jsx(e.a,{href:"https://www.bipm.org/en/si-base-units/second",children:"bureau international des poids et des measures"}),"."]}),`
`]}),`
`,a.jsxs(e.p,{children:["If you have some time, we also recommend you to have a look into the ",a.jsx(e.a,{href:"https://youtu.be/8WWQrD_TzaY",children:"talk by Nobel prize Bill Philipps"}),", where he gives a highly entertaining introduction."]}),`
`,a.jsxs(e.p,{children:["A more scientific discussion can be found in this ",a.jsx(e.a,{href:"https://arxiv.org/abs/1407.3493",children:"detailled review"})," paper."]}),`
`,a.jsx(e.h2,{children:"Measuring magnetic fields"}),`
`,a.jsxs(e.p,{children:[a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/History_of_the_compass",children:"Compasses"})," have been used for navigation of 2000 years now. This makes the measurement of magnetic field is one of the long standing tools of navigation that we have. And the precise measurement of magnetic fields remains a major industrial challenge, where the most precise magnetometers are nowadays based on quantum technologies. Most of them of a similar approach as they measure the influence of the magnetic field on electrons. The existence of the magnetic field slightly changes how the electrons would like to move. So looking back to the electrons in an atom, it means that the frequency of each orbit is shifted slightly. And as all the orbits are slightly different, each of them experiences a slightly different energy shift."]}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"AtomWithOrbitsUnderMagneticField.png",alt:"AtomsWithField"})}),`
`,a.jsxs(e.p,{children:["We can measure this energy shifts very precisely. And hence we can use very precise frequency measurements for very precise magnetometry. They are nowadays pushing the frontiers of nanotechnology, brain studies and space science as you might read in ",a.jsx(e.a,{href:"https://arxiv.org/pdf/1905.00618.pdf",children:"this review"}),". The described principle is not limited to atoms. Similiar approaches are used in magnetometers which are based on diamonds, commercialized by companies like ",a.jsx(e.a,{href:"https://wainvam-e.com/",children:"Wainvam-e"}),", or superconducting loops, commercialized by companies like ",a.jsx(e.a,{href:"https://qd-europe.com/de/en/products/magnetism/magnetometers/",children:"QuantumDesign"}),". The magnetic field always slightly shifts around a frequency and we measure this shift precisely."]}),`
`,a.jsx(e.h2,{children:"Measuring forces"}),`
`,a.jsx(e.p,{children:"This kind of precision measurements is also available for the measurement of forces. Whenever, you change your speed or direction, this means that a force is applied onto you. So if you are able to precisely measure the forces that you experience at a certain moment in time, you always know where you are compared to your starting point. Suppose that you would like to take a ship that travels the Atlantic. Then you could theoretically do the whole travel only based on your force measurements. Unfortunately, these measurements have to be extremely precise and we currently have to rely on satellite navigation (which relies on atomic clocks)."}),`
`,a.jsxs(e.p,{children:["However, some well established companies like ",a.jsx(e.a,{href:"https://www.ixblue.com/quantum-gravimeter/",children:"iXBlue"})," in France or ",a.jsx(e.a,{href:"https://aosense.com/",children:"AOSense"})," in the US can offer ultraprecise sensors to their customers. These sensors are based on the ",a.jsx(e.a,{href:"https://www.ixblue.com/first-3-axis-quantum-inertial-sensor/",children:"movement of ultracold atoms"}),". The sensing power is so high that it provides new possibilities for navigation of vessels that might have no access to satellite navigation, i.e. submarines. In other words, it makes for an interesting technology for the military which is one of the bigger investors and clients into quantum sensors. However, the hefty price tag and the close connection to military applications explain why this sector still remains fairly unknown to the public despite its clearly established use-cases and growing importance to various important industries."]}),`
`,a.jsx(e.h2,{children:"Summary"}),`
`,a.jsx(e.p,{children:"In this lesson, we have discussed three very distinct examples of quantum metrology. We also discussed how this enables new industrial measurements already today. However, given the fairly high price of those tools, they are often only understood by a group of experts."})]})}function x0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(vk,{...t})}):vk(t)}const Tk=Object.freeze(Object.defineProperty({__proto__:null,default:x0e,frontmatter:y0e},Symbol.toStringTag,{value:"Module"})),w0e={author:["Fred Jendrzejewski"],order:1,title:"Tutorial 1 - The qubit or the two level system"};function kk(t){const e={code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"In this first tutorial we are going to discuss the two-level system as it is the simplest unit of quantum computing systems. We discuss on a physics level with Hamiltonians etc its static properties like level splitting and avoided crossings. Then we discuss dynamical processes like Rabi oscillations and their connection to the notation of quantum computation."}),`
`,a.jsx(e.p,{children:"This lays the basis for the discussion of quantum computation hardware in the next tutorials. Namely:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"superconducting qubits"}),`
`,a.jsx(e.li,{children:"trapped ions"}),`
`,a.jsx(e.li,{children:"neutral atoms"}),`
`]}),`
`,a.jsx(e.h2,{children:"Hamiltonian, Eigenstates and Matrix Notation"}),`
`,a.jsx(e.p,{children:"To start out, we will consider two eigenstates $|0\\rangle,~|1\\rangle $ of the Hamiltonian $\\hat{H}_0$ with"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0|0\\rangle=E_0|0\\rangle, \\qquad \\hat{H}_0|1\\rangle=E_1|1\\rangle.
$$`}),`
`,a.jsx(e.p,{children:"Quite typically we might think of it as a two-level atom with states 0 and 1. The eigenstates can be expressed in matrix notation:"}),`
`,a.jsx(e.p,{children:`$$
|0\\rangle=\\left( \\begin{array}{c} 1 \\ 0 \\end{array} \\right), \\qquad |1\\rangle=\\left( \\begin{array}{c} 0 \\ 1 \\end{array} \\right),
$$`}),`
`,a.jsx(e.p,{children:"so that $\\hat{H}_0$ be written as a diagonal matrix"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_0 = \\left(\\begin{array}{cc} E_0 & 0 \\ 0 & E_1 \\end{array}\\right).
$$`}),`
`,a.jsx(e.p,{children:"If we would only prepare eigenstates the system would be rather boring. However, we typically have the ability to change the Hamiltonian by switching on and off laser or microwave fields. We can then write the Hamiltonian in its most general form as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} \\Delta  & \\Omega_x - i\\Omega_y\\ \\Omega_x +i\\Omega_y & -\\Delta \\end{array} \\right)
$$`}),`
`,a.jsx(e.p,{children:"Sometimes we will also chose the definition:"}),`
`,a.jsx(e.p,{children:`$$
\\Omega = |\\Omega| e^{i\\varphi}=\\Omega_x + i\\Omega_y
$$`}),`
`,a.jsx(e.p,{children:"It is particularly useful for the case in which the coupling is created by a laser. Another useful way of thinking about the two-level system is as a spin in a magnetic field. Let us remind us of the definitions of the of the spin-1/2 matrices:"}),`
`,a.jsx(e.p,{children:`$$
s_x = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & 1\\
1 &  0
\\end{array}
\\right)~
s_y = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & -i\\
i &  0
\\end{array}
\\right)~s_z =\\frac{\\hbar}{2} \\left(\\begin{array}{cc}
1 & 0\\
0 &  -1
\\end{array}
\\right)
$$`}),`
`,a.jsx(e.p,{children:"We then obtain:"}),`
`,a.jsx(e.p,{children:`$$
%\\label{Eq:HamSpin}
\\hat{H} = \\mathbf{B}\\cdot\\hat{\\mathbf{s}}\\text{ with }\\mathbf{B} = (\\Omega_x, \\Omega_y, \\Delta)
$$`}),`
`,a.jsx(e.p,{children:"You will go through this calculation in the excercise of this week."}),`
`,a.jsx(e.h2,{children:"Case of no perturbation $\\Omega = 0$"}),`
`,a.jsx(e.p,{children:"This is exactly the case of no applied laser fields that we discussed previously. We simply removed the energy offset $E_m = \\frac{E_0+E_1}{2}$ and pulled out the factor $\\hbar$, such that $\\Delta$ measures a frequency. So we have:"}),`
`,a.jsx(e.p,{children:`$$
E_0 = E_m+ \\frac{\\hbar}{2}\\Delta\\
E_1 = E_m- \\frac{\\hbar}{2}\\Delta
$$`}),`
`,a.jsxs(e.p,{children:["We typically call $\\Delta$ the energy difference between the levels or the ",a.jsx(e.em,{children:"detuning"}),"."]}),`
`,a.jsx(e.h2,{children:"Case of no detuning $\\Delta = 0$"}),`
`,a.jsx(e.p,{children:"Let us suppose that the diagonal elements are exactly zero. And for simplicity we will also keep $\\Omega_y =0$ as it simply complicates the calculations without adding much to the discussion at this stage. The Hamiltonian reads then:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} 0  & \\Omega\\ \\Omega &0 \\end{array} \\right)
$$`}),`
`,a.jsx(e.p,{children:"Quite clearly the states $\\varphi_{1,2}$ are not the eigenstates of the system anymore. How should the system be described now ? We can once again diagonalize the system and write"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}|\\varphi_{\\pm}\\rangle = E_{\\pm}|\\varphi_{\\pm}\\rangle\\
E_{\\pm} = \\pm\\frac{\\hbar}{2}\\Omega\\
|\\varphi_{\\pm}\\rangle = \\frac{|0\\rangle\\pm|1\\rangle}{\\sqrt{2}}
$$`}),`
`,a.jsx(e.p,{children:"Two important consequences can be understood from this result:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The coupling of the two states shifts their energy by $\\Omega$. This is the idea of level repulsion."}),`
`,a.jsx(e.li,{children:"The coupled states are a superposition of the initial states."}),`
`]}),`
`,a.jsx(e.p,{children:"This is also a motivation the formulation of the 'bare' system for $\\Omega = 0$ and the 'dressed' states for the coupled system."}),`
`,a.jsx(e.h2,{children:"General case"}),`
`,a.jsx(e.p,{children:"Quite importantly we can solve the system completely even in the general case. By diagonalizing the Hamiltonian we obtain:"}),`
`,a.jsx(e.p,{children:`$$
E_\\pm = \\pm \\frac{\\hbar}{2} \\sqrt{\\Delta^2+|\\Omega|^2}
$$`}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`import matplotlib.pyplot as plt
import numpy as np

deltaMax = 5
delta = np.linspace(-deltaMax, deltaMax, 100)
omega = 1

Eplus = np.sqrt(delta**2+omega**2)/2
Eminus = -np.sqrt(delta**2+omega**2)/2

f, ax = plt.subplots()
ax.plot(delta, Eplus, label="$E_+$")
ax.plot(delta, Eminus, label="$E_+$")
ax.legend()
ax.set_xlabel("detuning $\\Delta$")
ax.set_ylabel("energy $E$");
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_101_3_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"The Eigenstates then read:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi_+\\rangle =\\cos\\left(\\frac{\\theta}{2}\\right) e^{-i{\\varphi}/{2}}|0\\rangle+\\sin\\left(\\frac{\\theta}{2}\\right) e^{i{\\varphi}/{2}}|1\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
|\\psi_-\\rangle =-\\sin\\left(\\frac{\\theta}{2}\\right)e^{-i{\\varphi}/{2}}|0\\rangle+\\cos\\left(\\frac{\\theta}{2}\\right) e^{i{\\varphi}/{2}}|1\\rangle
$$`}),`
`,a.jsx(e.p,{children:"where"}),`
`,a.jsx(e.p,{children:`$$
\\tan(\\theta) = \\frac{|\\Omega|}{\\Delta}
$$`}),`
`,a.jsx(e.h2,{children:"Dynamical Aspects"}),`
`,a.jsx(e.p,{children:"After the static case we now want to investigate the dynamical properties of the two-state system. We calculate the time evolution of $|\\psi(t)\\rangle = c_0(t)|0\\rangle + c_1(t)|1\\rangle$ with the Schrödinger equation and the perturbed Hamiltonian :"}),`
`,a.jsx(e.p,{children:`$$
i\\hbar \\frac{d}{dt}|\\psi(t)\\rangle=\\hat{H}|\\psi(t)\\rangle,
$$`}),`
`,a.jsx(e.p,{children:`$$
i \\frac{d}{dt}\\left(\\begin{array}{c} c_0(t) \\ c_1(t) \\end{array}\\right) = \\frac{1}{2}\\left( \\begin{array}{cc} \\Delta & \\Omega \\ \\Omega^* & -\\Delta \\end{array} \\right) \\left(\\begin{array}{c} c_0(t) \\ c_1(t) \\end{array} \\right).
$$`}),`
`,a.jsx(e.p,{children:"We have two coupled differential equations and we luckily already know how to solve them as we have calculated the two eigenenergies in the previous section. For the state $|\\psi(t)\\rangle$ we get"}),`
`,a.jsx(e.p,{children:`$$
|\\psi(t)\\rangle=\\lambda e^{-i{E_+}t/{\\hbar}} |\\psi_+\\rangle + \\mu e^{-i{E_-}t/{\\hbar}} |\\psi_-\\rangle
$$`}),`
`,a.jsx(e.p,{children:"with the factors $\\lambda$ and $\\mu$, which are defined by the initial state. The most common question is then what happens to the system if we start out in the bare state $|0\\rangle$ and then let it evolve under coupling with a laser ? So what is the probability to find it in the other state $|1\\rangle$:"}),`
`,a.jsx(e.p,{children:`$$
P_1(t)=\\left|\\langle 1|\\psi(t)\\rangle\\right|^2.
$$`}),`
`,a.jsx(e.p,{children:"As a first step, we have to apply the initial condition and express $|\\psi(0)\\rangle$ in terms of $|\\psi_{\\pm}\\rangle$:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi(0)\\rangle \\overset{!}{=} |0\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
=  e^{i{\\varphi}/{2}} \\left[ \\cos\\left( \\frac{\\theta}{2}\\right) |\\psi_{+}\\rangle-\\sin\\left(\\frac{\\theta}{2}\\right)|\\psi_{-}\\rangle\\right]
$$`}),`
`,a.jsx(e.p,{children:"By equating the coefficients we get for $\\lambda$ and $\\mu$:"}),`
`,a.jsx(e.p,{children:`$$
\\lambda = e^{i{\\varphi}/{2}}\\cos\\left(\\frac{\\theta}{2}\\right), \\qquad  \\mu = -e^{i{\\varphi}/{2}}\\sin\\left(\\frac{\\theta}{2}\\right).
$$`}),`
`,a.jsx(e.p,{children:"One thus gets:"}),`
`,a.jsx(e.p,{children:`$$
P_1(t)= \\left|e^{i\\varphi} \\sin\\left(\\frac{\\theta}{2}\\right)\\cos\\left(\\frac{\\theta}{2}\\right)\\left[e^{-i{E_+}t/{\\hbar}} - e^{-i{E_-}t/{\\hbar}}\\right]\\right|^2
$$`}),`
`,a.jsx(e.p,{children:`$$
= \\sin^2(\\theta)\\sin^2\\left(\\frac{E_+-E_-}{2\\hbar}t\\right)
$$`}),`
`,a.jsx(e.p,{children:"$P_1(t)$ can be expressed with $\\Delta$ and $\\Omega$ alone. The obtained relation is called Rabi's formula:"}),`
`,a.jsx(e.p,{children:`$$
P_1(t)=\\frac{1}{1+\\left(\\frac{\\Delta}{|\\Omega|}\\right)^2}\\sin^2\\left(\\sqrt{|\\Omega|^2+\\Delta^2}\\frac{t}{2}\\right)
$$`}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def rabi_osc(time: float, omega: float, delta: float) -> float:
  """
  time evolution in the Rabi oscillation

  Args:
    time: time at which we measure
    omega: coupling strength
    delta: detuning

  Returns:
    float: probability to be in the excited state
  """
  return 1/(1+(delta/omega)**2)*np.sin(np.sqrt(omega**2+delta**2)*time/2)**2


omega = 2*np.pi*1
time = np.linspace(0,2, 100)



delta = 0

f, ax = plt.subplots()
ax.plot(time, rabi_osc(time, omega, 0), label = "$\\Delta = 0$")
ax.plot(time, rabi_osc(time, omega, omega), label = "$\\Delta = \\Omega$")
ax.plot(time, rabi_osc(time, omega, 10*omega), label = "$\\Delta = 10\\cdot\\Omega$")
ax.legend()
ax.set_xlabel("time $t$")
ax.set_ylabel("probability $P_1$")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, 'probability $P_1$')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_101_6_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"A few key words concerning Rabi oscillations are in order:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The probability to be in the excited state is indeed maximal if there is zero detuning."}),`
`,a.jsxs(e.li,{children:["The speed of the oscillations get higher with higher detuning. This fact is often overlooked at first sight but key in approximations like the ",a.jsx(e.em,{children:"rotating wave approximation"}),"."]}),`
`]}),`
`,a.jsx(e.h2,{children:"A few words on the quantum information notation"}),`
`,a.jsx(e.p,{children:"The qubit is THE basic ingredient of quantum computers. However, you will typically not find Pauli matrices and other common notations of two-state systems in the platforms. The typical notation there is:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"$R_x(\\phi)$ is a rotation around the x-axis for an angle $\\phi$."}),`
`,a.jsx(e.li,{children:"Same holds for $R_y$ and $R_z$."}),`
`,a.jsx(e.li,{children:"$X$ denotes the rotation around the x axis for an angle $\\pi$. So it transforms $|1\\rangle$ into $|0\\rangle$ and vise versa."}),`
`,a.jsx(e.li,{children:"$Z$ denotes the rotation around the x axis for an angle $\\pi$. So it transforms $|+\\rangle$ into $|-\\rangle$ and vise versa."}),`
`]}),`
`,a.jsx(e.p,{children:"The most commonly used gate is actually one that we did not talk about at all, it is the Hadamard gate, which transforms $|1\\rangle$ into $|-\\rangle$ and $|0\\rangle$ into $|+\\rangle$:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}|1\\rangle = |-\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}|0\\rangle = |+\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}|-\\rangle = |1\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}|+\\rangle = |0\\rangle
$$`}),`
`,a.jsx(e.p,{children:"In the next tutorial we will see how these concepts are implemented in real hardware."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python"})})]})}function _0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(kk,{...t})}):kk(t)}const Sk=Object.freeze(Object.defineProperty({__proto__:null,default:_0e,frontmatter:w0e},Symbol.toStringTag,{value:"Module"})),v0e={author:["Fred Jendrzejewski"],order:2,title:"Tutorial 2 - Continuous variables or the quantum harmonic oscillator"};function $k(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./0",children:"first tutorial"})," we saw a simple description of the qubit, which is quite often as far as hardware discussions go. Qubits are pretty awesome for the solution to a substantial amount of binary problems. However, the translation of continouous variables (CV) onto qubit is most of the time a rather sad moment. But to simply solve a problem with CV on a quantum system, there is no fundamental reason in going through a qubit representation."]}),`
`,a.jsx(e.p,{children:"We will examplify this at the widely discussed problem of the harmonic oscillator. This also lays the groundwork for the discussion of such hardware systems like photonic quantum systems, cold atoms or even the readout of qubit based hardware like trapped ions or superconducting devices."}),`
`,a.jsx(e.h2,{children:"The classical harmonic oscillator"}),`
`,a.jsx(e.p,{children:"Within physics we love to describe the evolution of a system with differential equations up to second order. The absolute classic is a particle of mass $m$ that is moving in a harmonic potential. We describe its position as $x$. Its equation of motion is then:"}),`
`,a.jsx(e.p,{children:`$$
\\ddot{x} +\\omega^2 x = 0
$$`}),`
`,a.jsx(e.p,{children:"The solutions are then just oscillatory solutions:"}),`
`,a.jsx(e.p,{children:`$$
x(t) = a \\cos(\\omega t)+ b \\sin(\\omega t)
$$`}),`
`,a.jsx(e.p,{children:`$$
\\dot{x}(t) = -a\\omega \\sin(\\omega t)+ b\\omega \\cos(\\omega t)
$$`}),`
`,a.jsx(e.p,{children:`$$
\\ddot{x}(t) = -\\omega^2 x(t)
$$`}),`
`,a.jsx(e.p,{children:"The two prefactors are are fully determined by:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The initial speed of the particle $\\dot{x}(t=0) = v_0$, or its associated momentum $p = mv$."}),`
`,a.jsx(e.li,{children:"The initial position of the particle $x(t=0) = x_0$."}),`
`]}),`
`,a.jsx(e.p,{children:"This results in:"}),`
`,a.jsx(e.p,{children:`$$
x(t=0) = a  = x_0
$$`}),`
`,a.jsx(e.p,{children:`$$
\\dot{x}(t=0) = b\\omega = v_0
$$`}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`import numpy as np
import matplotlib.pyplot as plt
from numpy import pi

`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`# steepness of the potential
m = 1;
omega = 2*np.pi*1;

# initial conditions
x0 = 0;
v0 = 1;

tlin = np.linspace(0,3,100);

xt = x0*np.cos(omega*tlin)+v0/omega*np.sin(omega*tlin);
vt = -x0*omega*np.sin(omega*tlin)+v0*np.cos(omega*tlin);

f, (ax1,ax2) = plt.subplots(2,1, sharex=True)
ax1.plot(tlin, xt)
ax2.plot(tlin, vt)
ax1.set_xlabel('time $t$')
ax1.set_ylabel('position $x$')
ax2.set_ylabel('velocity $v$')
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, 'velocity $v$')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_3_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We learn a few things from this example:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The position and momentum are independent variables of the problem."}),`
`,a.jsxs(e.li,{children:["If we cannot solve the equations of motion analytically or numerically, we have to resort to an ",a.jsx(e.em,{children:"'experiment'"})," that solves the differential equation for us. However, every ",a.jsx(e.em,{children:"'experiment'"})," will only solve one eom for one set of parameters for us."]}),`
`]}),`
`,a.jsx(e.h3,{children:"Random initial conditions"}),`
`,a.jsx(e.p,{children:"We have seen that the system might be solved analytically, however this might hit some problems for more complex problems. Then we have to investigate the solutions experimentally. For this work, we will prepare the system with some fidelity in some initial state. We assume:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We have some precision $\\Delta x$ on the initial state preparation at $x_0$."}),`
`,a.jsx(e.li,{children:"We have some precision $\\Delta v$ on the initial state preparation at $v_0$."}),`
`]}),`
`,a.jsx(e.p,{children:"Let us just assume a gaussian for simplicity. To describe this initial state we can then use the probability distribution $P_0(x)$ and $P_0(v)$. For a finite grid size it means that we describe the initial state by a vector whose a elements are positive real numbers between 0 and 1 with the normalization condition:"}),`
`,a.jsx(e.p,{children:`$$
\\sum p_i = 1
$$`}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`v0 = 1;dv = 0.1;
x0 = 0; dx = 0.1;

Px = np.random.normal(x0, dx, 500)
Pv = np.random.normal(v0, dv, 500)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.hist(Px, density=True)
ax2.hist(Pv, density=True)
ax1.set_xlabel('initial position $x$')
ax2.set_xlabel('initial velocity $v$')
f.tight_layout()
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_6_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"\\And depending on these initial conditions, we will obtain some final distributions $P(x_f)$ and $P(v_f)$"}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`# initial conditions
v0 = 3;dv = 0.1;
x0 = 0; dx = 0.1;
Ntries = 100;

x0s = np.random.normal(x0, dx, Ntries);
v0s = np.random.normal(v0, dv, Ntries);


tlin = np.linspace(0,3,100);

xts = np.zeros((100, Ntries));
vts = np.zeros((100, Ntries));
for ii in np.arange(Ntries):
    xts[:,ii] = x0s[ii]*np.cos(omega*tlin)+v0s[ii]/omega*np.sin(omega*tlin);
    vts[:,ii] = -x0s[ii]*omega*np.sin(omega*tlin)+v0s[ii]*np.cos(omega*tlin);

f, (ax1,ax2) = plt.subplots(2,1, sharex=True)
ax1.plot(tlin, xts, 'bo', alpha = 0.1)
ax2.plot(tlin, vts, 'bo', alpha = 0.1)
ax1.set_xlabel('time $t$')
ax1.set_ylabel('position $x$')
ax2.set_ylabel('velocity $v$')
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, 'velocity $v$')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"qquantum_hardware_102_8_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"quite importantly we can only test one set of initial conditions for each trajectory. The particle cannot be at several positions at the same time. With quantum mechanics, we can now look into a system where this restriction gets lifted."}),`
`,a.jsx(e.h2,{children:"Quantum harmonic oscillator"}),`
`,a.jsx(e.h3,{children:"Finding the Hamiltonian"}),`
`,a.jsxs(e.p,{children:["To find the quantum mechanical analog to some classical equations of motion, we must re-express them in terms of a ",a.jsx(e.strong,{children:"Lagrangien"})," $L$. It is a functional, which depends on the position $x$ and the independent velocity $\\dot{x}$. The equations of motion of the particle are then given as:"]}),`
`,a.jsx(e.p,{children:`$$
\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{x}}\\right) = \\frac{\\partial L}{\\partial x}
$$`}),`
`,a.jsx(e.p,{children:"For the harmonic oscillator we have the Lagrangien:"}),`
`,a.jsx(e.p,{children:`$$
L_{h.o.} = \\frac{m\\dot{x}^2}{2}-\\frac{m\\omega^2}{2}x^2
$$`}),`
`,a.jsx(e.p,{children:"We can then identify from it several fundamental quantities:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"the kinetic energy of the particle $T = \\frac{m\\dot{x}^2}{2}$."}),`
`,a.jsx(e.li,{children:"Its potential energy $V = \\frac{m\\omega^2}{2}x^2$."}),`
`,a.jsx(e.li,{children:"Its total energy $E = T + V$"}),`
`]}),`
`,a.jsxs(e.p,{children:["However, for the translation to quantum mechanics it is even more important that the Lagrangien allows us to define the ",a.jsx(e.em,{children:"conjugate momentum"})," to the position:"]}),`
`,a.jsx(e.p,{children:`$$
p = \\frac{\\partial L}{\\partial \\dot{x}}
$$`}),`
`,a.jsx(e.p,{children:"We then obtain the classical Hamiltonian for the system, which is:"}),`
`,a.jsx(e.p,{children:`$$
H = \\dot{x} p - L
$$`}),`
`,a.jsx(e.p,{children:`$$
H_{h.o.} = \\frac{p^2}{2m}+\\frac{m\\omega^2}{2}x^2
$$`}),`
`,a.jsx(e.p,{children:"We have now assembled all ingridients to 'quantize' the system."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We know the Hamiltonian."}),`
`,a.jsx(e.li,{children:"We know its conjugate variables."}),`
`]}),`
`,a.jsx(e.p,{children:"The system is then described by the Hamiltonian:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{H}_{H.O.} = \\frac{\\hat{p}^2}{2m} + \\frac{m\\omega^2}{2}\\hat{x}^2
$$`}),`
`,a.jsx(e.p,{children:"and the commutation relationship:"}),`
`,a.jsx(e.p,{children:`$$
[\\hat{x}, \\hat{p}] = i\\hbar
$$`}),`
`,a.jsx(e.p,{children:`$$
[\\hat{x}, \\hat{p}] \\equiv \\hat{x} \\hat{p} - \\hat{p}\\hat{x}
$$`}),`
`,a.jsx(e.p,{children:"The fact that the commutators are not disappearing is telling us that for any quantum system we cannot observe its position and momentum to arbitrary position at the same time. A few notes before we continue:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"In the quantum mechanical system we can still have completely continouous observables $\\hat{x}$ and $\\hat{p}$. Nothing has changed here."}),`
`,a.jsx(e.li,{children:"As we will see we now have a quantized energy spectrum, which is a fundamental change to quantum mechanics."}),`
`,a.jsx(e.li,{children:"As we will also see, we can launch the system in a superposition of different initial conditions, which are then explored in a parallel fashion."}),`
`]}),`
`,a.jsx(e.h3,{children:"Time evolution"}),`
`,a.jsx(e.p,{children:"This set of equations allows us to obtain the equations of motion through the Heisenberg equation as:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d \\hat{x}}{dt} = \\frac{i}{\\hbar}[\\hat{H}, \\hat{x}]
$$`}),`
`,a.jsx(e.p,{children:`$$
\\frac{d \\hat{p}}{dt} = \\frac{i}{\\hbar}[\\hat{H}, \\hat{p}]
$$`}),`
`,a.jsx(e.p,{children:"For the position the harmonic oscillator we obtain then:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d \\hat{x}}{dt} = \\frac{i}{\\hbar}[\\hat{H}_{H.O.}, \\hat{x}]
$$`}),`
`,a.jsx(e.p,{children:`$$
= \\frac{i}{\\hbar}[\\frac{p^2}{2m}, \\hat{x}]
$$`}),`
`,a.jsx(e.p,{children:`$$
= \\frac{\\hat{p}}{m}
$$`}),`
`,a.jsx(e.p,{children:"and for its momentum we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\frac{d \\hat{p}}{dt} = \\frac{i}{\\hbar}[\\hat{H}_{H.O.}, \\hat{p}]
$$`}),`
`,a.jsx(e.p,{children:`$$
= \\frac{i}{\\hbar}[\\frac{m\\omega^2}{2} \\hat{x}^2, \\hat{p}]
$$`}),`
`,a.jsx(e.p,{children:`$$
= -m\\omega^2 \\hat{x}
$$`}),`
`,a.jsx(e.p,{children:"So we are basically back at the set of differential equations, which looks similiar to what we had previously, except of th funny operator symbol on top of $x$ and $p$. For all practical purposes you might see these operators as some massive matrices acting on some kind complex vectors $|\\psi\\rangle$. A few comments here:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"To solve the problem you have to numerically solve the time evolution of the massive matrix and not only of one variable. One example of quantum paralellism."}),`
`,a.jsx(e.li,{children:"The state vectors contain the initial state as we will see in a moment."}),`
`,a.jsx(e.li,{children:"To solve the problem we typically decompose the matrices into the eigenstates and eigenvalues, which are then the energies."}),`
`,a.jsx(e.li,{children:"If you want to solve the problem analytically it is most common to work with the Schrödinger picture, but it looks a bit different on first sight and we will just leave it to the appendix for the moment."}),`
`]}),`
`,a.jsx(e.h3,{children:"Initial conditions"}),`
`,a.jsx(e.p,{children:"In the quantum mechanical system we do not describe the initial conditions through its probability distributions anymore, but rather the wavefunction $|\\psi_0\\rangle$."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Imagine that we are now observing the position of the particle. Each outcome is noted $|x_i \\rangle$. It is basically the points on the grid with a spacing set by the resolution of the detector or the size of my quantum computer etc. This discretization is just for a simpler discussion, you can also just replace the sums, by integrals if you would like."}),`
`,a.jsx(e.li,{children:"To each outcome we associate some complex number $\\psi(x_i)$ to describe the initial condition."}),`
`,a.jsx(e.li,{children:"We obtain the probability distribution $P(x_i) = |\\psi(x_i)|^2$"}),`
`]}),`
`,a.jsx(e.p,{children:"We then typically write the initial state as:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi_{init}\\rangle = \\int dx~\\psi(x) |x\\rangle\\langle x|
$$`}),`
`,a.jsx(e.p,{children:"Or if you prefer the discrete version:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi_{init}\\rangle = \\sum_i \\alpha_i|x_i\\rangle
$$`}),`
`,a.jsx(e.p,{children:"So we can describe the initial state, by a vector whose entries are complex numbers and which fulfill the normalization conditions:"}),`
`,a.jsx(e.p,{children:`$$
\\int dx~ |\\psi(x)|^2 = 1
$$`}),`
`,a.jsx(e.p,{children:"For conciseness it is always nice to just use a Gaussian with width $\\sigma_x$"}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`xlin = np.linspace(-10,10, 100);
sigmax = 1;
# initial shape
psiInit = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2);

# normalization
np.trapz(psiInit**2, xlin)

f, ax = plt.subplots()
ax.plot(xlin, psiInit)
ax.set_xlabel('position (x)')
ax.set_ylabel('$\\psi$')
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, '$\\\\psi$')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_15_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"But what about the momentum distribution ? In the same way as we were able to assign some values to the initial distribution of the position, we can associate some distribution for the distribution in momentum:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We will note every possible outcome for position as $|k_j \\rangle$"}),`
`,a.jsx(e.li,{children:"We will associate its components with some complex value $\\beta_j$"}),`
`]}),`
`,a.jsx(e.p,{children:"We then typically write the initial state as:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi_{init}\\rangle = \\int dk~\\psi(k) |k\\rangle\\langle k|
$$`}),`
`,a.jsx(e.p,{children:"Or if you prefer the discrete version:"}),`
`,a.jsx(e.p,{children:`$$
|\\psi_{init}\\rangle = \\sum_j \\beta_j|k_j\\rangle
$$`}),`
`,a.jsx(e.p,{children:"Once again the entries are complex numbers and fulfill the normalization condition:"}),`
`,a.jsx(e.p,{children:`$$
\\int dk~ |\\psi(k)|^2 = 1
$$`}),`
`,a.jsx(e.p,{children:"The two representations are not independent. They are connected through the Fourier transform:"}),`
`,a.jsx(e.p,{children:`$$
\\psi(k) = \\frac{1}{\\sqrt{2\\pi}}\\int dx \\psi(x) e^{-ikx}
$$`}),`
`,a.jsx(e.p,{children:"For a Gaussian of width $\\sigma_x$ in position space, this results in a gaussian of width $\\sigma_k = 1/2\\sigma_x$"}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`xlin = np.linspace(-10,10, 100);
klin = np.linspace(-10,10, 100);
sigmax = 1;
sigmak = 1/2/sigmax;
# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2);
psiInit_k = 1/(2*np.pi*sigmak**2)**(1/4)*np.exp(-klin**2/4/sigmak**2);

# normalization
np.trapz(psiInit_x**2, xlin)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.plot(xlin, psiInit_x)
ax1.set_xlabel('position $x$')
ax1.set_ylabel('$\\psi(x)$')
ax2.plot(klin, psiInit_k)
ax2.set_xlabel('momentum $k$')
ax2.set_ylabel('$\\psi(k)$')
f.tight_layout()
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_17_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"It is of fundamental importance to recognize that we can now choose initial conditions in which the particle is in several initial conditions at the same time. As an example it is perfectly valid to have a particle which is centered at zero, but is in a super position of opposite velocities."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`import scipy.fftpack as ft

Nx = 256;Nk = 100;
xlin = np.linspace(-10,10, Nx);

# size of the wavepackage
sigmax = 1;
#initial velocity
k0 = 4;

# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*1/np.sqrt(2)*(np.exp(1j*k0*xlin)+np.exp(-1j*k0*xlin));

# normalization
Nx = np.trapz(abs(psiInit_x)**2, xlin);
print(Nx)


# get its Fourier transform
dx = np.diff(xlin).mean()
k_fft = ft.fftfreq(xlin.size,d = dx)
k_fft = 2*np.pi*ft.fftshift(k_fft)
dk = np.diff(k_fft).mean()

psiInit_fft = np.fft.fftshift(np.fft.fft(psiInit_x));
# normalization
Nk = np.trapz(abs(psiInit_fft)**2, k_fft);
psiInit_fft = psiInit_fft/np.sqrt(Nk)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.plot(xlin, abs(psiInit_x)**2)
ax1.set_xlabel('position $x$')
ax1.set_ylabel('$\\psi(x)$')
#ax2.plot(klin, psiInit_k)
ax2.plot(k_fft, abs(psiInit_fft)**2)
ax2.set_xlabel('momentum $k$')
ax2.set_ylabel('$\\psi(k)$')
f.tight_layout()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`1.0000000000000124
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_19_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Connection the dots"}),`
`,a.jsx(e.p,{children:`We have now seen how to define the initial conditions and how obtain the time evolution of momentum and position. To connect the two of them, we
have to look into expectation values, which are defined as:`}),`
`,a.jsx(e.p,{children:`$$
x(t) = \\langle\\psi_0| \\hat{x}(t) |\\psi_0\\rangle
$$`}),`
`,a.jsx(e.p,{children:`$$
p(t) = \\langle\\psi_0| \\hat{p}(t) |\\psi_0\\rangle
$$`}),`
`,a.jsx(e.p,{children:"This also allows us to obtain some typical classical equations of motion:"}),`
`,a.jsx(e.p,{children:`$$
\\langle\\psi_0|\\frac{d \\hat{x}}{dt} |\\psi_0\\rangle = \\frac{\\langle\\psi_0|\\hat{p}|\\psi_0\\rangle}{m}
$$`}),`
`,a.jsx(e.p,{children:"and for its momentum we obtain:"}),`
`,a.jsx(e.p,{children:`$$
\\langle\\psi_0|\\frac{d \\hat{p}}{dt} |\\psi_0\\rangle = -m\\omega^2 \\langle\\psi_0|\\hat{x}|\\psi_0\\rangle
$$`}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from numpy import linalg as LA

Nx = 256;
xvec = np.linspace(-10,10, Nx);

omega = 1; m = 1; hbar = 1;

# kinetic energy
dx = np.diff(xvec).mean()

dia = -2*np.ones(Nx)
offdia = np.ones(Nx-1)
d2grid = np.mat(np.diag(dia,0) + np.diag(offdia,-1) + np.diag(offdia,1))/dx**2
d2grid[0,:]=0
d2grid[Nx-1,:]=0

Ekin = -hbar**2/(2*m)*d2grid
Ekin

# potential energy
x = np.mat(np.diag(xvec,0))
Vx = m*omega**2/2*xvec**2;
Epot = np.mat(np.diag(Vx,0))

H =  Ekin + Epot

# diagonalization
w, v = LA.eig(H)
# sort it such that things look nice later
sortinds = np.argsort(w)
EigVecs = v[:,sortinds]
EigVals = w[sortinds]

# size of the wavepackage
sigmax = 1;

#initial velocity
k0 = 4;

# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*1/np.sqrt(2)*(np.exp(1j*k0*xlin)+np.exp(-1j*k0*xlin));
#psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*np.exp(1j*k0*xlin);
#psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*np.exp(-1j*k0*xlin);
psiInit_x = np.mat(psiInit_x).T
#transform to matrix
EigVals = np.mat(EigVals).T

# EigVecs contains the Eigenvectors as columns,
# conjugate transpose times Psi0 calculates the scalar product
# of every energy-eigenvector with Psi0 (yields the representation in the energy-eigenbasis)
Psi0Eig = EigVecs.H * psiInit_x

tmax = 30
NSteps = 300
dt = tmax/NSteps
meanx = np.zeros(NSteps)
xsq = np.zeros(NSteps)
ts = np.zeros(NSteps)
psi_t = 1j*np.zeros((Nx, NSteps))
n_t = np.zeros((Nx, NSteps))
t = 0
for k in range(0,NSteps):

    # Time evolution is just a phase evolution in the energy eigenbasis
    PsitEig = np.multiply( np.exp(-1j*EigVals/hbar*t),Psi0Eig )

    # Transform back to the grid representation (calculate the time-evolved
    # superposition of energy-eigenstates)
    Psit = EigVecs*PsitEig
    psi_t[:,k] = Psit.flatten();
    n_t[:,k] = np.array(np.abs(Psit.flatten()))**2;
    # calculate the mean position
    meanx[k] = np.real(Psit.H*x*Psit);
    xsq[k] = np.real(Psit.H*x**2*Psit);
    t = t+dt
    ts[k]=t

xstd = np.sqrt(xsq-meanx**2);

f, ax = plt.subplots()
ax.pcolormesh(ts, xvec, n_t);
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"quantum_hardware_102_21_0.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"So what is discrete or quanitized in the quantum harmonic oscillator ?"}),`
`,a.jsx(e.p,{children:"We have seen now that one fundamental difference between the classical and the quantum implementation of the harmonic oscillator is the possibility of superpositions in the initial state. This did not change that the observables are perfectly continuous variables. However the dramatic change happens in the accessible energy levels."}),`
`,a.jsx(e.h3,{children:"Energies for the classical harmonic oscillator"}),`
`,a.jsx(e.p,{children:"For the classical harmonic oscillator the energy is directly linked to the speed and the position of the particle and it is given as:"}),`
`,a.jsx(e.p,{children:`$$
E_{h.o.} = \\frac{mv^2}{2}+\\frac{m\\omega^2}{2}x^2
$$`}),`
`,a.jsx(e.p,{children:"So it can take any value. For the quantum system this is dramatically different. The energies are quantized now and given by"}),`
`,a.jsx(e.p,{children:`$$
E_n = \\hbar \\omega(n+1/2)\\mbox{ with }n\\in \\mathbb{N}
$$`}),`
`,a.jsx(e.p,{children:"So this thing is now discrete in the quantum version of the harmonic oscillator, not more and not less."}),`
`,a.jsx(e.h2,{children:"Summary"}),`
`,a.jsxs(e.p,{children:["In this tutorial we have seen the description of the quantum harmonic oscillator, how it connects to certain problems and how to solve this numerically. In the ",a.jsx(e.a,{href:"qhw3",children:"third tutorial"}),", we will see how it is used to trap and cool ions, which are one of the leading quantum computation platforms."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python"})})]})}function T0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx($k,{...t})}):$k(t)}const Ek=Object.freeze(Object.defineProperty({__proto__:null,default:T0e,frontmatter:v0e},Symbol.toStringTag,{value:"Module"})),k0e={author:["Fred Jendrzejewski"],order:3,title:"Tutorial 3 - A few words about quantum computing with trapped ions"};function jk(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:`In this tutorial, we are going to discuss the fundamental ingredients for
quantum computing with trapped ions.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["In a first step, we discuss trapping and cooling in a harmonic oscillator, which was introduced in the ",a.jsx(e.a,{href:"qhw2",children:"second tutorial"}),"."]}),`
`,a.jsxs(e.li,{children:["Then we can discuss the implementation and control of the single qubit as generally summarized in the ",a.jsx(e.a,{href:"qhw1",children:"first tutorial"})," operations."]}),`
`,a.jsx(e.li,{children:"Finally, we discuss how two ions are entangled through different two-qubit gates."}),`
`]}),`
`,a.jsxs(e.p,{children:[`Even if an enormous amount of additional literature
exists, I will only reference here to a `,a.jsx(e.a,{href:"https://arxiv.org/abs/1804.03719v1",children:"nice introduction"})," and a more complete list is left for future discussions."]}),`
`,a.jsx(e.h2,{children:"What do we want from a quantum computing hardware ?"}),`
`,a.jsx(e.p,{children:`In a QC we would like to implement algorithms, which are based on well
defined operations. Influential examples of such algorithms are the
quantum Fourier transform and the Grover algorithm.`}),`
`,a.jsx(e.p,{children:`Given that computations are often implemented through logical truth
tables, we typically base a quantum computer on qubits. We then call one
state $\\left|0\\right\\rangle$ and on
$\\left|1\\right\\rangle$. Given that we would like to have
reproducable computations, we always assume that we start them out with
all qubits in the $\\left|0\\right\\rangle$ state.`}),`
`,a.jsx(e.p,{children:`A computation then consists then in applying a number of gates. The key is
here that any algorithm might be built up from an extremely limited
number of gates. Typically four are sufficient:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The three gates that rotate each individual qubit on the Bloch
sphere.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`A gate that entangles them properly. The standard example is here
the CNOT gate, which we will come back too.`}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`Such computations are then typically nicely visualized through circuit
diagrams often resulting from the interaction with programming framworks like `,a.jsx(e.code,{children:"pennylane"})," or ",a.jsx(e.code,{children:"qiskit"}),`. To make the programs flexible enough, we might want a checklist of what we want from a quantum computer hardware. DiVincenzo proposed
the `,a.jsx(e.a,{href:"https://www.sciencedirect.com/science/article/abs/pii/S0370157308003463?via%3Dihub",children:"following ingredients"}),":"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Qubits that can store information in a scalable system."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The ability to initialize the system in the right state."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"A universal set of gates."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Long coherence times, which are much longer than gate operation times."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Good measurement capabilities"}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Trapped ions allow us to fulfill all these requirements as we will see
in this lecture and we will go through them step-by-step.`}),`
`,a.jsx(e.h2,{children:"Trapping and cooling"}),`
`,a.jsx(e.p,{children:`For computing experiments one typically works with singe-charged ions
like $Ca^+$. Given their charge, they can be trapped in very clean
traps under vacuum. As such they are extremely well isolated from the
environment and high precision experiments can be performed. Finally,
they have only one remain electron in the outer shell. Therefore they
have a hydrogenlike atomic structure.`}),`
`,a.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
$\\text{div} \\vec{E} = 0$. So, the experimentalists have to play some
tricks with oscillating fields. We will not derive in detail how a
resulting `,a.jsx(e.strong,{children:"Paul trap"})," works, but the ",a.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:`linked
video`}),` gives a very nice impression of the
idea behind it.`]}),`
`,a.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,a.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
Wolfgang Paul and Hans Dehmelt. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known as Ramsey spectroscopy.`]}),`
`,a.jsx(e.p,{children:`A Paul trap provides a harmonic oscillator confinement with trapping
frequencies in the order of hundreds of kHz. An ion trapped in such a
trap can the be described by the Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H}_{t} &= \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega_t^2}{2}\\hat{x}^2\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`The two variables $p$ and $x$ are non-commuting $[x, p] = i\\hbar$, so
they cannot be measured at the same time. It can be nicely diagonalized
in terms of the ladder operators:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{x} &= \\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}+\\hat{a}^\\dagger\\right)\\
\\hat{p} &= i\\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}^\\dagger-\\hat{a}\\right)\\\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H} &= \\hbar \\omega_t \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dagger a
\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`Having loaded the ions into the Paul trap we also need to cool them
down.`}),`
`,a.jsx(e.h2,{children:"Atom-light interaction"}),`
`,a.jsx(e.p,{children:`Given that the ions keep only on atom on the outer shell, they have a
hydrogenlike structure, which makes them well controllable with light.`}),`
`,a.jsx(e.p,{children:"Experimentally, we will then use light of amplitude $E_0$ and frequency $\\omega_L$:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\vec{E}(t) &= \\vec{E}_0 \\cos(kx - \\omega_L t+\\varphi)\\
&= \\frac{\\vec{E}_0}{2} \\left(e^{i[kx - \\omega_lt+\\varphi]}+e^{-i[kx-\\omega_lt+\\varphi]}\\right) \\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We will describe the interal states of the ion for the moment with the
simple two state system of ground state
$\\left|g\\right\\rangle$ and excited state
$\\left|e\\right\\rangle$ at an energy $\\hbar \\omega_0$, which
is typically in the order of thousands of THz. It has the Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
H_{ion} = \\hbar \\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right|\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`Putting this ion into propagating light will induce a coupling between
these two internal states. As previously , we will describe the coupling
in the semi-classical approximation through
$H_\\textrm{int} = -\\hat{\\vec{D}} \\cdot \\vec{E}$. However, in this
context we will not ignore the propagating nature of the light field and
keep its position dependence. This is necessary as we would like to
understand how the light influences the movement of the atoms and not
only the internal states. Putting them together we obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
H_\\textrm{int} &= \\frac{\\Omega}{2}\\left([\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|]e^{i(k \\hat{x} - \\omega_L t+\\varphi)} + h.c.\\right)\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`The laser frequency is tuned closely to the frequency of the internal
state transition and we will be only interested in the detuning
$\\Delta = \\omega_0 - \\omega_L$. Importantly, it couples the position of
the atom and the internal states.`}),`
`,a.jsx(e.p,{children:`To simplify the problem, we can work in the rotating frame to describe
the external and internal degrees of freedom for the ion:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H}= \\hbar \\omega_t \\hat{a}^\\dagger \\hat{a} + \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\left(k \\hat{x}+\\varphi\\right)} + h.c.\\right)\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We will now see how this system is used to cool the ions to the motional
groundstate, perform single qubit operations and then two-qubit
operations.`}),`
`,a.jsx(e.h2,{children:"Doppler cooling"}),`
`,a.jsx(e.p,{children:`This interaction of the atom with a photon is at the origin of the
all-important Laser cooling, which was pioneered for ions in the 1970s
(!!) by the Wineland group. For cooling transition we couple the ground
state to an excited state of finitie lifetime $\\tau= \\frac{1}{\\Gamma}$.`}),`
`,a.jsxs(e.p,{children:[`This laser cooling had a tremendous impact on the field of atomic
physics in general. This importance was
recognized in the `,a.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1997/summary/",children:"Nobel prizes of 1997"}),` for Steve Chu , Claude
Cohen-Tannoudji and Bill Phillips.`]}),`
`,a.jsx(e.h3,{children:"Working in the Lamb-Dicke regime"}),`
`,a.jsx(e.p,{children:`After this initial cooling stage the atoms have to be cooled to the
ground state in the trap. To treat the trapped particles we will express
the position operator in terms of the ladder operator, such that:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
k\\hat{x} &= \\eta (\\hat{a}^\\dagger+ \\hat{a})\\
\\eta &= \\sqrt{\\frac{\\hbar^2 k^2/2m}{\\hbar \\omega_t}} =\\sqrt{\\frac{E_R}{\\hbar \\omega_t}}\\end{aligned}
$$`}),`
`,a.jsxs(e.p,{children:["$\\eta$ is called the ",a.jsx(e.em,{children:"Lamb-Dicke"}),` parameter. It compares the change in
motional energy due to the absorption of the photon
$E_r = \\frac{(\\hbar k)^2}{2m}$ compared to the energy spacing
$\\hbar \\omega_t$ in the trap. When it is small it suppresses the change
of the motional state of the atom due to the absorption of a photon.`]}),`
`,a.jsx(e.p,{children:`For simplicity we will set in this section $\\varphi=0$ and develop the
exponent to obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
H_\\textrm{int} &= \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|\\left(1 + i\\eta[\\hat{a}^\\dagger+ \\hat{a}]\\right) + h.c.\\right)\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`So it contains three couplings for different trap levels and internal
states:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"carrier"}),` transition
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n\\right\\rangle$
with strength $\\Omega$.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"red"}),` sideband
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n-1\\right\\rangle$
with strength $\\eta \\Omega(n+1)$. It leads to a reduction of the
trap level and it is resonant for $\\Delta = -\\omega_t$.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.em,{children:"blue"}),` sideband
$\\left|g,n\\right\\rangle\\rightarrow \\left|e,n+1\\right\\rangle$
with strength $\\eta \\Omega n$. It leads to an increase of the trap
level and it is resonant for $\\Delta = \\omega_t$.`]}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:["This scheme is used to perform ",a.jsx(e.strong,{children:"Raman side-band cooling"}),`. The laser is
tuned on the transition
$\\left|n,g\\right\\rangle\\rightarrow \\left|n-1,e\\right\\rangle$
such that each absorption involves a reduction in the trap level. This
set-up for cooling was first demonstrated in 1995 by the Wineland group.`]}),`
`,a.jsx(e.p,{children:`It is at this stage that the ions are in the motional ground state and
we can focus our attention to the high control of the internal qubit
states of the ion for quantum computing.`}),`
`,a.jsx(e.h2,{children:"Single-qubit operations"}),`
`,a.jsx(e.p,{children:`The single qubit operations can now be identified with the transition
$\\left|e,n\\right\\rangle\\leftrightarrow \\left|g,n\\right\\rangle$.
We can then simplify the above equation too:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H}= \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\hbar\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\varphi} +\\left|g\\right\\rangle\\left\\langle e\\right|e^{-i\\varphi}\\right)
\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We can translate this into the language of qubit operations through the
definitions:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\sigma_z &= \\frac{\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|}{2}\\
\\sigma_x &= \\frac{\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|}{2}\\
\\sigma_y &= \\frac{i\\left|e\\right\\rangle\\left\\langle g\\right|-i\\left|g\\right\\rangle\\left\\langle e\\right|}{2}
\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:"So we can now simply write the Hamiltonian as:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H}/\\hbar &= \\Delta \\sigma_z +\\Omega_x \\sigma_x +\\Omega_y \\sigma_y\\
\\Omega_x &= \\Omega \\cos(\\varphi)\\
\\Omega_y &= \\Omega \\sin(\\varphi)
\\end{aligned}
$$`}),`
`,a.jsxs(e.p,{children:[`In the QC community people rarely talk about the Pauli matrices, but
much rather about a few specific gates. The most cited here is the
`,a.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
$\\left|0/1\\right\\rangle\\rightarrow \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}$.
So it has no good classical analog. Further a double application brings
us back to the origin.`]}),`
`,a.jsx(e.p,{children:`The other gate we named about was a Z gate, which is simply a $\\pi$
rotation around the z axis.`}),`
`,a.jsx(e.h2,{children:"Two-qubit operations"}),`
`,a.jsx(e.p,{children:`To implement a quantum computer the system has to be completed by a
two-qubit operation. For ions a number of two-qubit gates exist:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"Cirac-Zoller"})," gate was the ",a.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.74.4091",children:"first proposed"})," two-qubit gate and it was also the first one realized within the ",a.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.75.4714",children:"same year"})," ."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.82.1971",children:a.jsx(e.strong,{children:"Soerensen-Moelmer"})})," gate was proposed later, but it is extremely important from a practical point of view as it leads to very high entanglement fidelities."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["Another realization, which we mention for completeness is the ",a.jsx(e.a,{href:"https://www.nature.com/articles/nature01492",children:"geometric phase-gate"}),", which is used in the NIST group."]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`We will now discuss a bit the Soerensen-Moelmer gate. In this set-up two ions sit in a common trap. The cost of energy for exciting one of the ions will be
labelled $\\omega_t$ as in the first section. So we assume that the
scheme starts in the state $\\left|ggn\\right\\rangle$, where
both atoms are in the internal ground-state $g$ and in some excited trap
level $n$.`}),`
`,a.jsx(e.p,{children:`In the next step, these two ions experience two lasers, which are
coupling excited and the ground state of the ions:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`One laser has frequency $\\omega_1=\\omega_0-\\omega_t+\\delta$ and Rabi
coupling strength $\\Omega$. It is therefore only slightly detuned from the transitions $|ggn\\rangle\\rightarrow|eg,n-1\\rangle |ge,n-1\\rangle$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"The second laser has frequency $\\omega_2=\\omega_0+\\omega_t-\\delta$ and Rabi coupling strength $\\Omega$. It is therefore only slightly detuned from the transitions $|ggn\\rangle\\rightarrow|eg,n+1\\rangle |ge,n+1\\rangle$."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`The gate is then operated in the regime of small coupling strength
$\\eta \\Omega n \\ll \\delta$. In this case coupling to the excited
motional states $n\\pm 1$ is suppressed by a factor of
$\\frac{\\eta \\Omega n}{\\delta}$. On the other hand we are exactly on
resonance for the two-photon transitions
$|ggn\\rangle\\rightarrow|eg,n+1\\rangle\\rightarrow|ee,n\\rangle$ etc. So we
can do second-order pertubation theory or
adiabatic elimination to obtain the
effective Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
H_\\mathrm{SM} &= \\frac{\\Omega_\\mathrm{SL}}{2}\\left(\\left|ggn\\right\\rangle\\left\\langle een\\right| + (\\left|een\\right\\rangle\\left\\langle ggn\\right|\\right)\\text{ with }\\Omega_{SL} = -\\frac{(\\Omega \\eta)^2}{2(\\eta - \\delta)}\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`So starting out with the state $\\left|gg\\right\\rangle$ and
applying the laser for $t\\Omega =\\frac{\\pi}{2}$, we obtain the entangled
state that we are looking for.`}),`
`,a.jsxs(e.p,{children:[`The operation of the gate was first demonstrated in 2000 by the Wineland
group and allowed at the time for generating a Bell state with a
`,a.jsx(e.a,{href:"https://www.nature.com/articles/35005011",children:"fidelity of 83%"}),". This limit has been increasingly pushed of the years and now reaches the 99.9% region."]}),`
`,a.jsx(e.p,{children:`Such a fidelity sounds very impressive on first sight and it is by now
the result of several decades of work. However, in a quantum computer we
would like to chain a large number of these gates behind each other.`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 10 iterations the fidelity dropped to 99%."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 100 iterations the fidelity dropped to 90%."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"After 1000 iterations the fidelity dropped to 30%."}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`So even with such an excellent fidelity it will barely be possible to
chain much more than 100 gates before the some extremely iffy things
start to happen.`}),`
`,a.jsx(e.p,{children:`So we have experimentally the choice of entanglement tool in the way
that is most adapted to our work.`}),`
`,a.jsx(e.h2,{children:"Summary"}),`
`,a.jsx(e.p,{children:"Trapped ions have now become a major platform for quantum computation and in this tutorial, we have discussed the main ingriedients that underlie the computation. If you would like to use the devices, there are now emerging three major competitors within this technology stack:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.a,{href:"https://ionq.com/",children:"IonQ"})," is based in Maryland with Chris Monroe as one of the founders. It was one of the first pure quantum computation companies and is now publically traded at the NASDAQ."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.a,{href:"https://www.aqt.eu/",children:"AQT"})," is a european company that is closely connected to the research team in Innsbruck around some of the founding fathers of the field like Rainer Blatt or Peter Zoller."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:[a.jsx(e.a,{href:"https://www.quantinuum.com/",children:"Quantinuum"})," has its traditions in the NIST Boulder region on the hardware side. Despite their slightly younger age as a company they have recently demonstrated very high fidelity processors and became one of the leading players."]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:"In next weeks tutorial, we will move on to superconducting qubits and see how they are implementated."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python"})})]})}function S0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(jk,{...t})}):jk(t)}const Ck=Object.freeze(Object.defineProperty({__proto__:null,default:S0e,frontmatter:k0e},Symbol.toStringTag,{value:"Module"})),$0e={author:["Fred Jendrzejewski"],order:4,title:"Tutorial 4 - A few words about quantum computing with superconducting qubits"};function Ak(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["We have seen in the ",a.jsx(e.a,{href:"./2",children:"last tutorial"}),` the
possibilities of quantum computation with trapped ions. However, a second major platform are superconducting qubits. They the platform of choice of commercial giants like `,a.jsx(e.a,{href:"https://quantumai.google/",children:"google"}),", ",a.jsx(e.a,{href:"https://www.ibm.com/quantum",children:"IBM"})," or ",a.jsx(e.a,{href:"https://www.rigetti.com/",children:"Rigetti"}),`.
In this tutorial, we will identify the existence of qubits in superconducting circuits, the different gates and the read-out. We will finish by a comparison in the computing performance of trapped ions and
superconducting qubits.`]}),`
`,a.jsx(e.h2,{children:"The quantum LC-oscillator"}),`
`,a.jsx(e.p,{children:`As in the second tutorial, we have to find the appropiate harmonic oscillator, but this time in electric circuits. Then we can discuss
the need of the Josephson junction for the implementation of
superconducting qubits.`}),`
`,a.jsxs(e.p,{children:[`The fundamental ingredient for superconducting qubits are LC
oscillators, which are simply put a loop of wire which is not closed. To study
its quantum behavior we will closely follow the discussion in Sec. II of
`,a.jsx(e.a,{href:"https://arxiv.org/abs/1904.06560v2",children:`"A Quantum Engineer's Guide to Superconducting Qubits"`}),"."]}),`
`,a.jsx(e.p,{children:`In electrical engineering we first have to identify the conjugate
variables within the circuit. We will therefore follow the standard procedure of:`}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Identifying the equations of motion."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Identify the Lagrangien."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Identify the conjugate variables."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Write down the Hamiltonian."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"Quantize the Hamiltonian."}),`
`]}),`
`]}),`
`,a.jsxs(e.p,{children:[`While it might be overly complicated for simple LC circuits it provides
a powerful framework for more complex systems (see `,a.jsx(e.a,{href:"https://doi.org/10.1103/physrevlett.108.240502",children:"Nigg et al."}),`
)`]}),`
`,a.jsx(e.h3,{children:"Lagrangien formulation"}),`
`,a.jsxs(e.p,{children:["The wire is caracterized by an ",a.jsx(e.em,{children:"inductivity"}),`, which is counteracting the
change in current:`]}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
V = L\\frac{dI}{dt}\\end{aligned}
$$`}),`
`,a.jsxs(e.p,{children:["and a ",a.jsx(e.em,{children:"capacitance"}),`, which allows us
to measure the cost of putting charges on the ends of the wire:`]}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
I = C\\frac{dV}{dt}\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`To put it under a partical form for
quantization we typically express them through the flux, which is
defined as:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\Phi(t) = \\int_{-\\infty}^tV(t')dt'\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`The electromagnetic
energy stored within the loop of wire is in general given by:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
E(t) &= \\int_{-\\infty}^t V(t')I(t')dt'\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We then obtain the
energies:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
E_{kin} = \\frac{1}{2}C\\dot{\\Phi}^2\\
E_{pot} = \\frac{1}{2L}\\Phi^2\\\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`This now leads to the
Lagrangien:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
L &= \\frac{1}{2}C\\dot{\\Phi}^2-\\frac{1}{2L}\\Phi^2\\end{aligned}
$$`}),`
`,a.jsx(e.h3,{children:"Quantization"}),`
`,a.jsx(e.p,{children:"We can now identify the conjugate momentum the flux as:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\frac{\\partial L}{\\partial\\dot{\\Phi}} &= C \\dot{\\Phi}\\
&= Q\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`So the charge is the conjugate variable to the flux
in the loop. They will be therefore the two fundamental variables of
quantum theory, very much like position and momentum are for massive
particles.`}),`
`,a.jsx(e.p,{children:"We can now write down the Hamiltonian as:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
H &= Q\\dot{\\Phi}- L\\
&= \\frac{Q^2}{2C}+\\frac{\\Phi^2}{2L}\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`At this stage we can
quantize the system through the commutation relation:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
[\\hat{\\Phi},\\hat{Q}]&= i\\hbar\\
\\hat{H} &= \\frac{\\hat{Q}^2}{2C}+\\frac{\\hat{\\Phi}^2}{2L}\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`So it is once again a harmonic oscillator with resonance frequency
$\\omega_r = \\frac{1}{\\sqrt{LC}}$ and 'mass' $C$. So the system reads:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H} &= \\hbar \\omega_r \\left(\\hat{a}^\\dagger a + \\frac{1}{2}\\right)\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`While this is now a quantum system, it is manifestly not a qubit as the
transitions are equidistant in energy with $\\omega_r$. The typical order
of magnitude is here 3-6GHz.`}),`
`,a.jsx(e.p,{children:"To prepare for the introduction of superconducting elements, we typically rewrite the equations above in terms of dimensionless quantities. Namely the Cooper pair density $n = \\frac{Q}{2e}$ and the reduced flux $\\phi= 2\\pi \\Phi/\\Phi_0$ with $\\Phi_0 = \\frac{h}{2e}$. These two quantities correspond directly to the density and the phase of the superconducting wavefunction that we will discuss in the next section. We then obtain the Hamiltonian $$\\begin{aligned} \\hat{H} = 4E_C n^2 + \\frac{1}{2}E_L \\varphi^2\\end{aligned}$$ So we quantify the influence of each lump element through their energy:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$E_C=\\frac{e^2}{2C}$ is the energy required to add a cooper pair."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"$E_L=\\frac{(\\Phi_0/2\\pi)^2}{L}$ is the inductive energy"}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"The Josephson junction"}),`
`,a.jsxs(e.p,{children:[`To resolve the degeneracy we need to make the oscillator anharmonic.
This is done through `,a.jsx(e.em,{children:"Josephson junctions"}),`, which are the backbone of
superconducting electronics (very much like the transistor or the diode
are classical electronics). To understand them roughly, we will fall
back on the `,a.jsx(e.a,{href:"http://www.feynmanlectures.caltech.edu/III_21.html",children:`Feynman
picture`}),` of
Josephson dynamics.`]}),`
`,a.jsx(e.h3,{children:"A simplistic picture of superconductivity"}),`
`,a.jsxs(e.p,{children:[`We could spend several lectures to understand the physics of Josephson
junctions in all its gory details. A good overview might be found in the
following books `,a.jsx(e.a,{href:"https://www.crcpress.com/Superfluidity-and-Superconductivity/Tilley-Tilley/p/book/9780750300339",children:"(D.R. Tilley, 1990"}),"; ",a.jsx(e.a,{href:"https://books.google.de/books?id=VpUk3NfwDIkC",children:"Tinkham, 2004)"}),`. However, the basic idea is that the fermionic electrons form cooper
pairs at very low temperatures. These pairs are bosonic and can hence
condense into a macroscopic wavefunction: $$\\begin{aligned}
\\psi(x,t) &= \\sqrt{n}e^{i\\varphi(x,t)}\\end{aligned}$$ Now the system can
be understood through the following relations:`]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:"the density is given by $n= |\\psi(x,t)|^2$."}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The velocity is set by the gradient of the phase
$\\vec{v}= \\frac{\\hbar}{2m_e}\\nabla \\varphi$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The voltage is set by the time evolution of the phase
$V = \\frac{\\hbar}{2e} \\frac{\\partial \\varphi}{\\partial t}$.`}),`
`]}),`
`]}),`
`,a.jsx(e.h3,{children:"The Josephson relations"}),`
`,a.jsx(e.p,{children:`A Josephson junction describes now a system where two superconducting
regions are slightly separated by a normal metal such that only
tunneling is allowed between the two regions.`}),`
`,a.jsx(e.p,{children:"We can now write down the Schrödinger equation for this setup:"}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
i\\hbar \\partial_t \\psi_L &= \\frac{eV}{2}\\psi_L+J \\psi_R\\
i\\hbar \\partial_t \\psi_R &= -\\frac{eV}{2}\\psi_R+J \\psi_L\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`$V$ is the voltage applied to the junction and $J$ is the tunneling
element. We now use the decomposition to write:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\dot{n}_L &= \\frac{2}{\\hbar}J\\sqrt{n_Rn_L}\\sin(\\delta )\\
\\dot{n}_R &= -\\frac{2}{\\hbar}J\\sqrt{n_Rn_L}\\sin(\\delta)\\
\\phi &=\\varphi_L-\\varphi_R\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We can now use it to write
down the current-phase relationship:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
I &= I_c\\sin(\\phi)\\
I_c &= \\frac{2}{\\hbar}Jn\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`We can once again integrate the
equation of motion to obtain:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H} = 4E_Cn^2-E_J \\cos(\\phi)\\
E_C = \\frac{e^2}{2(C+C_J)}\\
E_J = \\frac{I_C\\Phi_0}{2\\pi}\\end{aligned}
$$`}),`
`,a.jsx(e.h2,{children:"Single qubit control"}),`
`,a.jsx(e.p,{children:`Superconducting qubits can be controlled either through inductive or
capacitive coupling. Inductive coupling is widely used for flux-qubits
like the rf-squid. However, here we focus on the transmon qubit, which
is typically capacitavely coupled`}),`
`,a.jsx(e.p,{children:`Going through the quantization procedure we discussed above, we can write
the circuit Hamiltonian as:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H} &= \\frac{\\tilde{Q}^2}{2C_\\Sigma}+\\frac{\\Phi^2}{2L}+\\frac{C_d}{C_\\Sigma}V_d(t)\\tilde{Q}\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`The charge is defined for this system as
$\\tilde{Q} = C_\\Sigma\\dot{\\Phi} - C_d V_d(t)$. In the limit of weak
coupling $C_d V_d \\ll C_\\Sigma \\dot{\\Phi}$, we have can quantize the
system as before and only need to understand the influence of the last
term.`}),`
`,a.jsx(e.p,{children:`The second part of the Hamiltonian resembles strong the electric dipole
coupling we discussed in the last lecture. It contains the displaced
charge, which is linearly coupled to an oscillating electric field. So
we can rewrite the charge once again in terms of raising an lower
operators and arrive at the coupled Hamiltonian:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
\\hat{H} &= \\frac{\\omega_t}{2}\\hat{\\sigma}_z+\\Omega V_d(t)\\hat{\\sigma}_y\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`All the other discussions are equivalent to our discussion on the ion
and any other single qubit system.`}),`
`,a.jsx(e.h2,{children:"Generating entanglement"}),`
`,a.jsx(e.p,{children:`Having identified the qubit, we can now also implement the entanglement
gate to build the universal quantum computer. Different options exist:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsx(e.p,{children:`The qubit island could be coupled through a mutual capacitance, such
that $\\hat{H}_{int}= C_g V_1 V_2$.`}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The qubit island could be coupled through a mututal inductance, such that $\\hat{H}",a.jsx(e.em,{children:"{int}= M"}),"{12} I_1 I_2$."]}),`
`]}),`
`]}),`
`,a.jsx(e.p,{children:`Typically the inductive coupling is chosen in a regime of very small
coupling $C_g \\ll C_1, C_2$, where the $C_i$ describe the transmon
qubits. The full Hamiltonian reads then:`}),`
`,a.jsxs(e.p,{children:[`$$
\\begin{aligned}
\\hat{H} &=\\hat{H}`,a.jsx(e.em,{children:"{T,1}+\\hat{H}"}),`{T,2}+4e^2\\frac{C_g}{C_1C_2}n_1n_2\\end{aligned}
$$`]}),`
`,a.jsx(e.p,{children:`we identified here $V_i = \\frac{2e}{C_i}n_i$. We can now further rewrite
the occupation in terms of raising and lowering operators
$n\\propto i(a-a^\\dagger)$, which is can be expressed as a Pauli matrix for
the buttom manifold. So we actually have the coupling:`}),`
`,a.jsxs(e.p,{children:[`$$
\\begin{aligned}
\\hat{H} &=\\hat{H}`,a.jsx(e.em,{children:"{T,1}+\\hat{H}"}),`{T,2}+g\\sigma_{y,1}\\sigma_{y,2}\\end{aligned}
$$`]}),`
`,a.jsx(e.p,{children:`While this basic operating principle of capacitive coupling is indeed
widely used, it is worth to read the fine-print as the different actual
implementation can to different 2-Qubit gates:`}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"iSWAP"}),` gate is the implementation of the $\\sigma_y \\sigma_y$
coupling.`]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"phase"})," gate, shows very high fidelities, but makes it necessary to tune the freuqency of the qubit. It implements a $\\sigma_z \\sigma_z$-coupling on the spins. Fidelities of > 99% were demonstrated for this gate ",a.jsx(e.a,{href:"https://doi.org/10.1038/nature13171",children:"(Barends et al., 2014)"}),"."]}),`
`]}),`
`,a.jsxs(e.li,{children:[`
`,a.jsxs(e.p,{children:["The ",a.jsx(e.strong,{children:"cross-resonance"}),` (CR) gate is only controlled through
microwaves. It implements the a $\\sigma_x \\sigma_z$-coupling on the
spins. This is gate employed by IBM `,a.jsx(e.a,{href:"https://doi.org/10.1103/physrevlett.107.080502",children:"(Chow et al., 2011)"}),"."]}),`
`]}),`
`]}),`
`,a.jsx(e.h2,{children:"A CNOT gate constructed from the physical entangling gates"}),`
`,a.jsx(e.p,{children:`We would now like to discuss how we can use the capacitive coupling to
implement a CNOT gates. This discussion is closely related to the
possibility of using a Soerensen-Molmer gate, discussed in lecture 2, to
implement a CNOT gate.`}),`
`,a.jsx(e.p,{children:`The $\\sigma_y \\sigma_y$ coupling for the right amount of leads to a
coupling matrix:`}),`
`,a.jsx(e.p,{children:`$$
\\begin{aligned}
iSWAP &= \\left(\\begin{array}{cccc}
1 & 0 & 0 & 0\\
0 & 0 &-i & 0\\
0 & -i & 0 & 0\\
0 & 0 & 0 & 1
\\end{array}\\right)\\end{aligned}
$$`}),`
`,a.jsx(e.p,{children:`The iSWAP can then be used to
represent the CNOT gate.`}),`
`,a.jsxs(e.p,{children:[`So we will focus shortly on the current limitations of qubit systems.
Please be aware that this is a rapidly evolving field, so most likely
the paragraph will be outdated within a few months. One good summary can
be found in `,a.jsx(e.a,{href:"https://doi.org/10.1073/pnas.1618020114",children:"(Linke et al., 2017)"})," and written by an ion trapping group."]}),`
`,a.jsx(e.h2,{children:"Summmary"}),`
`,a.jsx(e.p,{children:"In this tutorial, we discussed how the two level system is implemented in superconducting devices and how they are coupled. This should give you a basic feeling for this widely used hardware platform and its limitations."})]})}function E0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Ak,{...t})}):Ak(t)}const Ik=Object.freeze(Object.defineProperty({__proto__:null,default:E0e,frontmatter:$0e},Symbol.toStringTag,{value:"Module"})),j0e={author:["Fred Jendrzejewski"],order:5,title:"Tutorial 5 - Quantum simulation with cold atoms"};function Mk(t){const e={a:"a",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the previous lessons we talked about ",a.jsx(e.a,{href:"qhw3",children:"trapped ions"})," and ",a.jsx(e.a,{href:"qhw4",children:"superconducting qubits"}),". They are the leading platforms for the creation of ",a.jsx(e.strong,{children:"universal quantum computers"}),", which hold the premise of exponential speed-up for a variety of NP-hard problems. However, this universality usually comes at the price of algorithmic overhead for a wide range of tasks which generally leads to worse overall fidelity. If we give up the constraint of a universal quantum computer, we can build specialized quantum hardware for the problems of interest. Such systems are called quantum simulators. Cold atoms have become a leading platform of such quantum simulators at a large scale. Already demonstrated applications involve an enormous variety of condensed-matter problems like e.g. the ",a.jsx(e.a,{href:"https://journals.aps.org/rmp/abstract/10.1103/RevModPhys.80.885",children:"Hubbard model"}),", topological systems, ",a.jsx(e.a,{href:"https://www.sciencedirect.com/science/article/abs/pii/S1049250X06540017?via%3Dihub",children:"superfluidity"})," and ",a.jsx(e.a,{href:"https://physicstoday.scitation.org/doi/10.1063/1.3206091",children:"disorder"}),". More recently, cold atoms started to find applications to ",a.jsx(e.a,{href:"https://arxiv.org/abs/2002.07413",children:"Ising models"})," and ",a.jsx(e.a,{href:"https://royalsocietypublishing.org/doi/full/10.1098/rsta.2021.0064",children:"high-energy physics"}),". "]}),`
`,a.jsx(e.h2,{children:"Summary for the cold atoms hardware "}),`
`,a.jsx(e.p,{children:"Ultracold atoms are gases that are well isolated from the environment and are cooled to near zero and in this regard quite close to trapped ion systems, which also heavily draw on the experimental techniques of atomic physics and optics. At such low temperatures, quantum effects are dominant in the behavior of the gas cloud. Thanks to their precise control and flexibility, they are now a well-established platform for the quantum simulation of complex quantum problems. "}),`
`,a.jsx(e.p,{children:"The high precision and versatility have made cold atoms one of the dominating quantum hardware platforms in the European academic research sector. To underline the fact, in Heidelberg alone there are four research groups working with cold atoms. Munich, Hamburg and Bonn have similar numbers. France has at least 20 research groups on cold atoms, 1 on trapped ions and a handful on superconducting qubits. Similar numbers hold for Italy."}),`
`,a.jsx(e.h2,{children:"Qubits based on Rydberg atoms"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Use case"}),": The same as trapped ions and superconducting qubits"]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Companies"}),": Pasqal, Quera, Atom Computing, ColdQuanta, planqc"]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Research Groups"}),": Paris, Harvard, Caltech, Munich, Heidelberg, … "]}),`
`]}),`
`,a.jsx(e.p,{children:"The situation, which is closest to superconducting qubit systems are Rydberg quantum simulators. In these systems the atoms are confined in optical tweezer and strongly interact when they are excited into Rydberg states , as such implementing interacting qubit systems. They share many of features, which are similar to ions and superconducting qubits. The Hamiltonian, which is implemented in these systems, is a complex Ising type model:"}),`
`,a.jsxs(e.p,{children:["$H=\\sum_i\\hat{\\sigma}",a.jsx(e.em,{children:"{x,i}+\\sum_iU"}),"{ij}\\hat{n}_i\\hat{n}",a.jsx(e.em,{children:"j $, with $\\hat{\\sigma}"}),"{x,i}=| r⟩⟨g​|_i+| g⟩⟨r​|_i$ and $\\hat{n}_i=|r⟩⟨r​|_i$."]}),`
`,a.jsxs(e.p,{children:["They are currently, well established candidates for the quantum simulation of maximum-independent set problems, which already let to the foundation of the start-ups ",a.jsx(e.a,{href:"https://pasqal.io/",children:"Pasqal"}),", ",a.jsx(e.a,{href:"https://www.quera.com/",children:"Quera"}),", ",a.jsx(e.a,{href:"https://atom-computing.com/",children:"Atom Computing"}),", ",a.jsx(e.a,{href:"https://coldquanta.com/",children:"ColdQuanta"})," or ",a.jsx(e.a,{href:"https://www.planqc.eu/",children:"planqc"}),"."]}),`
`,a.jsx(e.h2,{children:"Itinerant particles built from cold atoms"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Use case"}),": Condensed matter, chemistry"]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Research Groups"}),": Munich, Heidelberg, Zurich, Harvard, … "]}),`
`,a.jsxs(e.li,{children:[a.jsx(e.strong,{children:"Representable as circuit"}),": Yes"]}),`
`]}),`
`,a.jsx(e.p,{children:"The most widely used configuration of cold atoms are moving atoms in some external optical potential. The atomic clouds are typically trapped by focused laser beams, which can be shaped in a flexible fashion. As such a wide variety of systems exists:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Traps with hundreds of thousands of atoms, which emulate superfluid behavior and Bose-Einstein condensation."}),`
`,a.jsx(e.li,{children:"Traps with hundreds of atoms for the study of continuous variables and large-scale entanglement."}),`
`,a.jsx(e.li,{children:"Optical lattices from the interference of laser beams are now widely used for the study of lattice models in condensed matter with system sizes well above the 100 sites and atoms."}),`
`]}),`
`,a.jsx(e.p,{children:"Additionally, the quantum statistics can be tuned widely:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Working with fermionic or bosonic isotopes the atoms can directly emulate fermionic or bosonic problems."}),`
`,a.jsx(e.li,{children:"If a large number of bosons are condensed into a single spatial mode they can form large collective spins, i.e. continuous variables, from their internal degrees of freedom."}),`
`,a.jsx(e.li,{children:"The connection between moving particles and spin degrees leads to a variety of exotic behaviors like topological band structures, if needed."}),`
`]}),`
`,a.jsx(e.p,{children:"The particles are interacting in various ways:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Most Alkali based system are described through a simple contact interaction."}),`
`,a.jsx(e.li,{children:"Alkaline-earth atoms and Rydberg systems have long range interactions."}),`
`]}),`
`,a.jsx(e.p,{children:"The readout of the system can be performed in various fashion:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Spatially resolved fluorescence imaging provides a destructive, state-sensitive readout. "}),`
`,a.jsx(e.li,{children:"Depending on the measurement protocol momentum or position can be measured."}),`
`,a.jsx(e.li,{children:"[Dispersive measurements allow for weak measurement protocols."}),`
`]}),`
`,a.jsx(e.p,{children:"If the external potential is an optical lattice they provide a synthetic realization of strongly correlated lattice models as visualized in Figure 2."}),`
`,a.jsx(e.p,{children:"Nowadays, the systems are used for the study of quantum dynamics with quench protocols very similar to quantum computation systems as visualized on the right-hand side of the figure. Those experiments realize the Hubbard model:"}),`
`,a.jsx(e.p,{children:"$H= -J\\sum_i(\\hat{c}_{i+1}^\\dagger \\hat{c}_i+h.c.) +\\frac{U}{2}\\sum_i \\hat{n}_i(\\hat{n}_i-1)$"}),`
`,a.jsx(e.p,{children:"As such they have been widely employed for the study of many-body problems, which come originally from condensed matter. In the early stages this was used to study ground state properties of complex systems like unitary fermions or strongly correlated lattice systems. Importantly, experiments have gone well into the regime of non-perturbative theories. They are therefore well-established benchmarks for sophisticated numerical techniques, which would be otherwise uncontrolled."}),`
`,a.jsxs(e.p,{children:["Currently, this kind of quench experiments have to be completely programmed at the hardware level. However, with ",a.jsx(e.a,{href:"https://qiskit-extensions.github.io/qiskit-cold-atom/tutorials/03_fermionic_tweezer_hardware.html",children:"qiskit-cold-atoms"})," it is now possible to emulate such problems and a hardware integration seems only like a question of time."]}),`
`,a.jsx(e.h2,{children:"Application to quantum chemistry"}),`
`,a.jsx(e.p,{children:"As IBM already demonstrated beautifully in previous experiments, molecular systems are made for the study of NISQ devices. However, the translation of the fermionic electrons on Qubits currently involves complex transformations like the Jordan-Wigner transformation. These can lead to substantial overhead and substantially increase the required circuit depth. Using fermionic atoms in microtraps, we directly emulate the chemistry problem onto the hardware."}),`
`,a.jsx(e.p,{children:"In these systems the molecule is translated into its orbital basis. Each orbit is then represented by the occupation of a fermion of an optical tweezer. These fermionic systems are described by a hopping term HJand a non-commuting interaction term HU. As such they become a potential resource for variational algorithms, which again would heavily benefit from an integration."}),`
`,a.jsx(e.p,{children:"These systems are also excellent candidates for the quantum simulation of chemistry problems as they naturally realize interacting fermions on different spatial orbits."}),`
`,a.jsx(e.p,{children:"Mixed integer problems in atomic mixtures"}),`
`,a.jsx(e.p,{children:"Use cases: High-energy physics. Power plant optimization"}),`
`,a.jsx(e.p,{children:"Research Groups: MIT, Heidelberg, Karlsruhe, Harvard, JILA "}),`
`,a.jsx(e.p,{children:"Atomic mixtures are an extension to cold atoms as the provide the ability to let two independent atomic species interact. As such they are an ideal platform to study complex problems, which are defined on complex computational sectors as we describe for lattice gauge theories. "}),`
`,a.jsx(e.p,{children:"In the fundamental laws of physics, gauge fields mediate the interaction between charged particles. An example is quantum electrodynamics—the theory of electrons interacting with the electromagnetic field—based on U(1) gauge symmetry. Solving such gauge theories is in general a hard problem for classical computational techniques. While quantum computers suggest a way forward, it is difficult to build large-scale digital quantum devices required for complex simulations. In cold atoms, we work on a fully scalable analog quantum simulator of a U(1) gauge theory in one spatial dimension. Some experiments demonstrated the experimental realization of the elementary building block as a key step towards a platform for large-scale quantum simulations of continuous gauge theories."}),`
`,a.jsx(e.p,{children:"In the experiments one atomic species emulates the gauge fields described by the Hamiltonian $H_g$ and the other species the matter field with Hamiltonian $H_m$, interacting through a coupling Hamiltonian $H_{mg}$. In the typical experiments the gauge field is tuned through an x-rotation and then the system is left to evolve under the full Hamiltonian $H=H_g+H_m+H_{mg}$ :"}),`
`,a.jsxs(e.p,{children:["$H= \\chi \\sum_ i\\hat{L}",a.jsxs(e.em,{children:["{z,i}^2+M\\sum_i (-1)^i\\hat{n}",a.jsx(e.em,{children:"i+J\\sum_i(\\hat{c}"}),"{i+1}^\\dagger\\hat{L}"]}),"{+,i}\\hat{c}_i+h.c. )$"]}),`
`,a.jsxs(e.p,{children:["These Hamiltonian are extremely demanding computationally as the gauge field is defined on the Hilbert space of a ",a.jsx(e.a,{href:"qhw2",children:"continuous variable"})," $L$ and the matter field on the Hilbert space of itinerant fermions. As such it presents a physical example of a NP-hard mixed-integer problem."]}),`
`,a.jsxs(e.p,{children:["Again, this kind of experiments have to be completely programmed at the hardware level. Quite importantly, this translation currently requires a good knowledge of the hardware from all participants, even high-energy physicists. This makes the experiments currently extremely cumbersome to translate from atomic physics to high-energy physics and back. As such they are one of the interesting use cases that drove the development of ",a.jsx(e.a,{href:"https://github.com/Qiskit-Extensions/qiskit-cold-atom",children:"qiskit-cold-atoms"}),"."]}),`
`,a.jsx(e.h2,{children:"Machine learning and power plant optimization"}),`
`,a.jsxs(e.p,{children:["Machine learning algorithms heavily draw on similar problems like chemistry as they attempt to optimize energy functionals. However, in those problems some of the variables are typically ",a.jsx(e.a,{href:"qhw2",children:"continuous variables"})," and some ",a.jsx(e.a,{href:"qhw1",children:"binary"}),". These mixed-integer optimization problems are NP hard to solve on classical hardware. The continuous variables on the other hand make them extremely resource intensive for qubit-based systems. Cold atoms show a way forward to employ continuous variables and qubits directly into the system and employ a variational algorithm on them. Similar problems arise for power plant optimizations, when the power plant can give certain power outputs above a certain threshold. Both topics are under active investigation, but currently suffer from the lack of an intermediate programming layer between the users and the hardware developers."]}),`
`,a.jsx(e.h2,{children:"Summary"}),`
`,a.jsx(e.p,{children:"This is the last lesson of this course. You learned:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"That cold atoms have become one of the leading quantum simulation platforms."}),`
`,a.jsx(e.li,{children:"Rydberg atoms can implement qubit systems, which are similar to trapped ions of superconducting qubits."}),`
`,a.jsx(e.li,{children:"Cold atoms can easily tackle complex problems with itinerant particles."}),`
`]})]})}function C0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Mk,{...t})}):Mk(t)}const Lk=Object.freeze(Object.defineProperty({__proto__:null,default:C0e,frontmatter:j0e},Symbol.toStringTag,{value:"Module"})),A0e={author:["Fred Jendrzejewski"],order:0,title:"QML 001 - A summary of classical supervised learning"};function Ok(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"In this tutorial, we will discuss some basic ideas behind classical supervised learning before we jump into the quantum part."}),`
`,a.jsx(e.p,{children:"The notebook is structured as follows:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We introduce the learning task of classifying data points $x_i$ with labels $y_i$"}),`
`,a.jsx(e.li,{children:"We introduce simple classification through logistic regression with bias and weight."}),`
`,a.jsx(e.li,{children:"We provide simple training"}),`
`,a.jsx(e.li,{children:"We test the performance of the circuit."}),`
`]}),`
`,a.jsxs(e.p,{children:['We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature. So readers thank think "yet another tutorial on logistic regression", can most likely directly jump to the very ',a.jsx(e.a,{href:"qml101",children:"first tutorial"})," on quantum machine learning."]}),`
`,a.jsx(e.h2,{children:"A simple learning task"}),`
`,a.jsx(e.p,{children:"For simplicity we will start out with a simple problem, where each data set has only a single variable and extend it later to higher dimensional data sets."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0* (x <  1)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel(r"input value $x_i$");
ax.set_ylabel(r"label $y_i$");
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_3_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"The learning task is now to predict the label $y_i$ from the input value $x_i$. To get started we have to divide the data set into a training part and a test part:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["On the ",a.jsx(e.em,{children:"training set"})," we will optimize the algorithm to achieve the highest possible accuracy in predicting the label."]}),`
`,a.jsxs(e.li,{children:["On the ",a.jsx(e.em,{children:"test set"})," we will test the performance of the algorithm with data it has never seen."]}),`
`]}),`
`,a.jsx(e.p,{children:"The usual problem is here to find a good balance between a sufficient amount of training data, yet leaving enough test data to have a statistically significant test."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from sklearn.model_selection import train_test_split
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_6_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Logistice regression as a minimal algorithm"}),`
`,a.jsxs(e.p,{children:["It is now time to set up the algorithm for the training. We will use ",a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Logistic_regression",children:"logistic regression"}),", despite the fact that this horse has been ridden to death. It is has just all the right ingredients that are necessary to agree on basic concepts and notations. The logistic function itself is defined as:"]}),`
`,a.jsx(e.p,{children:`$$
p(x) = \\frac{1}{1+e^{-(W\\cdot x+b)}}
$$`}),`
`,a.jsx(e.p,{children:"It has a number of useful properties for us:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"It interpolates nicely between 0 and 1."}),`
`,a.jsxs(e.li,{children:["The value of the transition is set by the ",a.jsx(e.em,{children:"bias"})," $b$. For $x \\gg b$ the exponential goes to zero and $p(x) \\rightarrow 1$, while it goes to 0 for the other side."]}),`
`,a.jsx(e.li,{children:"The sharpness of the transition is set by the weight $W$, which tells us how much of an influence we should attach to the input value $x$."}),`
`]}),`
`,a.jsx(e.p,{children:"Below you can find a general example of such a logistic regression."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weight = 3
bias = 1

y_log = 1/(1+np.exp(-(weight*x+bias)))
f, ax = plt.subplots()
ax.plot(x, y_log, 'o')
ax.set_xlabel('x_i')
ax.set_ylabel('p(x)')
ax.set_title("logistic regression");
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_8_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can use this logistic regression for labelling, but simply deciding that the label is 0, if $p(x) <\\frac{1}{2}$ and and 1 if $p(x) > \\frac{1}{2}$."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_accuracy(weight: float, bias: float, xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the logistic regression for a given set of data.

    Args:
      weight: the training parameter for the weight
      bias: the training parameter for the bias
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        y_log = 1/(1+np.exp(-(weight*xinput+bias)))
        pred_label = 1.0*(y_log>1/2)
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,a.jsx(e.p,{children:"And now we can have a look at the labeling with some randomly guessed initial values."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weight = -0.8
bias = 0
accuracy, y_pred = get_accuracy(bias = bias, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has an accuracy of 0.85





<matplotlib.legend.Legend at 0x7f75c9992110>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_12_2.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"As we can see above there is quite a regime, where the model does to predict the labels very well. This can be improved by training the model parameters systematically."}),`
`,a.jsx(e.h2,{children:"Training the minimalistic algorithm"}),`
`,a.jsx(e.p,{children:"To improve the performance of the circuit, we have to train it. This basically involves the minimization of some loss function as a function of the circuit parameters $W$ and $b$. In this example, we can simply calculate the accuracy of the circuit as a function of the bias and obtain its minimimum."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weight = -1

Nbias = 101
biases = np.linspace(-2, 2, Nbias)
accuracies = np.zeros(Nbias)

for ii, bias_val in enumerate(tqdm(biases)):
    accuracy, y_pred = get_accuracy(bias = bias_val, weight=weight, xvals=x_train, yvals=y_train)
    accuracies[ii] = accuracy
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`100%|██████████| 101/101 [00:00<00:00, 761.27it/s]
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`opt_bias = biases[accuracies.argmax()]

f, ax = plt.subplots()
ax.plot(biases, accuracies)
ax.axvline(opt_bias, color="C1", label="optimal bias")
ax.set_ylabel("accuracy")
ax.set_xlabel("biases")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`<matplotlib.legend.Legend at 0x7f75bd886f10>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_16_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We clearly identify a optimal value for the bias at which the accuracy is maximal. This allows to test the accuracy on the optimal value of the weights again to obtain."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(bias = opt_bias , weight= weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_18_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Testing the algorithm"}),`
`,a.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    bias = opt_bias, weight=weight, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend();
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has a test accuracy of 1.0
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_001_20_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Summary of classical supervised learning"}),`
`,a.jsx(e.p,{children:"In this tutorial, we studied some basic concepts like training and classification for an extremely simple case. We saw:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"the existence of a classification algorithm."}),`
`,a.jsx(e.li,{children:"How it relates input and output label."}),`
`,a.jsx(e.li,{children:"How it is trained."}),`
`,a.jsx(e.li,{children:"How it is tested on test data."}),`
`]}),`
`,a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"https://colab.research.google.com/drive/1XMkIBrU1lBLTT-oVufVTifHivss0HDI1?usp=sharing",children:"first tutorial on QML"}),", we will see how this translate in the simplest fashion to quantum algorithms."]})]})}function I0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Ok,{...t})}):Ok(t)}const Rk=Object.freeze(Object.defineProperty({__proto__:null,default:I0e,frontmatter:A0e},Symbol.toStringTag,{value:"Module"})),M0e={author:["Fred Jendrzejewski"],order:1,title:"QML 101 - Some basic concepts"};function Nk(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsx(e.p,{children:"This is the second part of our beginners guide to quantum machine learning. In the last part we introduced some basic notions of classical supervised learning, on which we will build up on. In this tutorial, we will discuss some basic ideas behind quantum machine learning. Hereby, we focus on classifiers, which are part of the big class of supervised (deep) learning algorithms."}),`
`,a.jsx(e.p,{children:"The notebook is structured as follows:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"We introduce the learning task of classifying data points $x_i$ with labels $y_i$"}),`
`,a.jsx(e.li,{children:"We introduce the circuit structure and the cost function."}),`
`,a.jsx(e.li,{children:"We provide simple training"}),`
`,a.jsx(e.li,{children:"We test the performance of the circuit."}),`
`]}),`
`,a.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature."}),`
`,a.jsx(e.h2,{children:"A simple learning task"}),`
`,a.jsx(e.p,{children:"For simplicity we will start out with a simple problem, where each data set has only a single variable and extend it later to higher dimensional data sets."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`# only necessary on colab

!pip install qiskit
!pip install pylatexenc
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0 * (abs(x) > np.pi / 2)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, 'label')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_4_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"The task will then be to predict the label $y_i$ from the input value $x_i$. To get started we have to divide the data set into a training part and a test part:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["On the ",a.jsx(e.em,{children:"training set"})," we will optimize the algorithm to achieve the highest possible accuracy in predicting the label."]}),`
`,a.jsxs(e.li,{children:["On the ",a.jsx(e.em,{children:"test set"})," we will test the performance of the algorithm with data it has never seen."]}),`
`]}),`
`,a.jsx(e.p,{children:"The usual problem is here to find a good balance between a sufficient amount of training data, yet leaving enough test data to have a statistically significant test."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from sklearn.model_selection import train_test_split
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_7_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"A first algorithm"}),`
`,a.jsx(e.p,{children:"It is now time to set up the algorithm for the training. Given that there are only two labels, we can directly work with a single qubit. The algorithm is then of the following structure:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Prepare the initial state."}),`
`,a.jsx(e.li,{children:"Apply a parametrized circuit with parameters $\\mathbf{w}$ that depend on the input $U(\\mathbf{w}, x_i)$."}),`
`,a.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,a.jsx(e.p,{children:"In the simplest of all cases, we might then just apply a single qubit rotation with the angle $w x_i$"}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer

sim = Aer.get_backend("aer_simulator")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`theta = Parameter(r"$\\theta$")

qc = QuantumCircuit(1)
qc.rx(theta, 0)
qc.measure_all()
qc.draw("mpl")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_10_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weight: float, xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      weight: the training parameter
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta: weight * xinput},
            inplace=False,
        )
        # run the job and obtain the counts
        job = sim.run(circuit, shots=1000)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < 500)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weight = 0.8

accuracy, y_pred = get_accuracy(qc, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has an accuracy of 0.9





<matplotlib.legend.Legend at 0x7ff478a0ef70>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_13_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Training"}),`
`,a.jsx(e.p,{children:"To improve the performance of the circuit, we have to train it. This basically involves the minimization of some loss function as a function of the circuit parameters $\\mathbf{w}$. In this example we can simply calculate the accuracy of the circuit as a function of the weight and obtain its minimimum."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weights = np.linspace(0, 2, 50)
accuracies = np.zeros(50)

for ii, weight_val in enumerate(tqdm(weights)):
    accuracy, y_pred = get_accuracy(qc, weight=weight_val, xvals=x_train, yvals=y_train)
    accuracies[ii] = accuracy
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`100%|███████████████████████████████████████████| 50/50 [00:06<00:00,  8.14it/s]
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`opt_weight = weights[accuracies.argmax()]

f, ax = plt.subplots()
ax.plot(weights, accuracies)
ax.axvline(opt_weight, color="C1", label="optimal weight")
ax.set_ylabel("accuracy")
ax.set_xlabel("weights")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`<matplotlib.legend.Legend at 0x7ff4aca197f0>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_16_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to obtain."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weight=opt_weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_18_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Test"}),`
`,a.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weight=opt_weight, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7ff4acb05cd0>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_101_20_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Outlook for supervised learning"}),`
`,a.jsx(e.p,{children:"In this tutorial, we studied some basic concepts like training and classification for an extremely simple case."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsxs(e.li,{children:["In the ",a.jsx(e.a,{href:"qml102",children:"next tutorial"}),", we will see how deeper circuits allow us to learn more complex dependencies between input and output."]}),`
`,a.jsx(e.li,{children:"The extension towards higher dimensional inputs allows us to look into more complext tasks like image processing."}),`
`]})]})}function L0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Nk,{...t})}):Nk(t)}const Dk=Object.freeze(Object.defineProperty({__proto__:null,default:L0e,frontmatter:M0e},Symbol.toStringTag,{value:"Module"})),O0e={author:["Fred Jendrzejewski"],order:2,title:"QML 102 - Deeper Classifiers"};function Bk(t){const e={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./1",children:"last tutorial"})," we saw the most basic ideas of quantum machine learning algorithms. They included:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"division in training and test data"}),`
`,a.jsx(e.li,{children:"simple training"}),`
`,a.jsx(e.li,{children:"accuracy tests."}),`
`]}),`
`,a.jsx(e.p,{children:"However, all of this happened in an extremely simple case, which allowed us to work with simple algorithms. In this tutorial, we will discuss the possibility to learn more complicated structures with deeper circuits. As in the last tutorial, the task will be once again the classification of data points $x_i$ with labels $y_i$. However the structure will be more complicated, such that the previous circuits would fail. So in this tutorial we will learn:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"deeper reuploading circuits"}),`
`,a.jsx(e.li,{children:"training with optimizers."}),`
`,a.jsxs(e.li,{children:["All circuits will be implemented with ",a.jsx(e.code,{children:"qiskit"})," because of its wide ranging use."]}),`
`]}),`
`,a.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature and later tutorials."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`# only necessary on colab to have all the required packages installed

!pip install qiskit
!pip install pylatexenc
`})}),`
`,a.jsx(e.h2,{children:"The learning task"}),`
`,a.jsx(e.p,{children:"As previously, we will focus on a problem with one dimensional input data, which we associate with a label {0, 1}. However, the data set has a strucute, which will require deeper circuits."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0 * (abs(x) > 1.4*np.pi/2)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0, 0.5, 'label')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_4_1.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)


f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_6_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"A deeper algorithm"}),`
`,a.jsxs(e.p,{children:["To achieve training for this more complex data set we have to work with a ",a.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". It is similiar to our previous approach as it does the following."]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Prepare the initial state."}),`
`,a.jsx(e.li,{children:"Apply a parametrized circuit with parameters $\\mathbf{w}$ that depend on the input $U(\\mathbf{w}, x_i)$."}),`
`,a.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,a.jsxs(e.p,{children:["However, the circuit has now a structure, where input parameter is is applied again and again, interleaved with some processing layer. This allows for non-trivial classification tasks, which was analyzed in great detail ",a.jsx(e.a,{href:"https://journals.aps.org/pra/abstract/10.1103/PhysRevA.103.032430",children:"here"}),"."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`theta = Parameter(r"$\\theta$")
alpha1 = Parameter(r"$\\alpha_1$")
qc = QuantumCircuit(1)
qc.rx(theta, 0)
qc.rz(alpha1, 0)
qc.rx(theta, 0)
qc.measure_all()
qc.draw("mpl")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_9_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, alpha: float, weight: float,
    xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameter
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta: weight*xinput,
             alpha1: alpha,
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < Nshots/2)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`weight = 1
alpha = np.pi/4

accuracy, y_pred = get_accuracy(qc, alpha=alpha, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has an accuracy of 0.275





<matplotlib.legend.Legend at 0x7f1f9a216a10>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_12_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Training"}),`
`,a.jsxs(e.p,{children:["We once again have to train the circuit. However, this time it does not have a single training variable, but four. We therefore have to fall back to ",a.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:a.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weight = params_flat[0]
        alpha = params_flat[1]
        accuracy, y_pred = get_accuracy(qc, alpha=alpha, weight=weight, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=2)
params_flat = params.flatten()

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`accuracy = 0.675
accuracy = 0.6
accuracy = 0.775
accuracy = 0.65
accuracy = 0.4
accuracy = 0.9
accuracy = 0.65
accuracy = 0.65
accuracy = 0.825
accuracy = 0.825
accuracy = 1.0
accuracy = 0.925
accuracy = 0.9625
accuracy = 1.0
accuracy = 0.9625
accuracy = 0.975
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
`})}),`
`,a.jsx(e.p,{children:"We can see that the accuracy is converging throughout the training quite nicely and it is now time to look into the optimal training parameters."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`opt_weight, opt_alpha = res.x
print(f"optimal weight = {opt_weight}")
print(f"optimal alpha = {opt_alpha}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`optimal weight = 0.5093757145525236
optimal alpha = 1.3032510317367447
`})}),`
`,a.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weight=opt_weight, alpha = opt_alpha, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_20_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Test"}),`
`,a.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weight=opt_weight, alpha = opt_alpha, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7f1f99613150>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_102_22_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Summary and outlook"}),`
`,a.jsx(e.p,{children:"In this tutorial, we have seen that the extension of the circuit to deeper structures allows us to learn training sets, which were previously impossible to evaluate. In the next tutorials, we will extend these circuits in two directions:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Work with larger dimensions of input parameters. This is what we would like to do quantum machine learning anyways and where the main innovation of the data reuploading circuits lies."}),`
`,a.jsx(e.li,{children:"Work on circuits with multiple qubits to classify different classes and introduce entanglement in a systematic fashion."}),`
`]})]})}function R0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Bk,{...t})}):Bk(t)}const Pk=Object.freeze(Object.defineProperty({__proto__:null,default:R0e,frontmatter:O0e},Symbol.toStringTag,{value:"Module"})),N0e={author:["Fred Jendrzejewski"],order:3,title:"QML 103 - Teaching the circle"};function Fk(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./2",children:"last tutorial"})," we saw how deeper algorithms allow us to model more complex dependencies of single input variables and binary labels. However, it is now time to train the algorithms on problems with more than a single input variable it is common in image recognition etc."]}),`
`,a.jsx(e.p,{children:"In this tutorial, we will introduce slightly more complex data sets and see how we can handle the classification with data reuploading circuits. We will learn:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"that more input parameters require deeper circuits."}),`
`,a.jsx(e.li,{children:"the required dimension of the circuit is only set by the number of labels in the problem. So in this most basic ideas of quantum machine learning algorithms."}),`
`]}),`
`,a.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature and later tutorials."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`# only necessary on colab to have all the required packages installed

!pip install qiskit
!pip install pylatexenc
`})}),`
`,a.jsx(e.p,{children:"And we also install the other dependencies"}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,a.jsx(e.h2,{children:"Learning two-dimensional inputs"}),`
`,a.jsxs(e.p,{children:["We will now work with a problem with data that have two-dimensional input $\\mathbf{x}",a.jsx(e.em,{children:"i = (x"}),"{1,i}, x_{2,i})$ and as previously a binary label $y_i \\in {0, 1}$. A nice example of such a data-set is a circle in a plane as visualized below."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def circle(samples: int, center: List[float] = [0.0, 0.0], radius:float =np.sqrt(2 / np.pi)) -> Union[np.array, np.array]:
    """
    Produce the data set of a circle in a plane that spans from -1 to +1

    Args:
      sample: The number of samples we would like to generate
      center: where should be the center of the circle
      radius: What should be the radius of the sample
    Returns:
      The array of the xvalues and the array of the labels.
    """
    xvals, yvals = [], []

    for i in range(samples):
        x = 2 * (np.random.rand(2)) - 1
        y = 1
        if np.linalg.norm(x) < radius:
            y = 0
        xvals.append(x)
        yvals.append(y)
    return np.array(xvals), np.array(yvals)


def plot_data(x, y, fig=None, ax=None, title=None):

    if fig == None:
        fig, ax = plt.subplots(1, 1, figsize=(5, 5))
    reds = y == 0
    blues = y == 1
    ax.scatter(x[reds, 0], x[reds, 1], c="red", s=20, edgecolor="k")
    ax.scatter(x[blues, 0], x[blues, 1], c="blue", s=20, edgecolor="k")
    ax.set_xlabel("$x_1$")
    ax.set_ylabel("$x_2$")
    ax.set_title(title)


xdata, ydata = circle(200)
fig, ax = plt.subplots(1, 1, figsize=(4, 4))
plot_data(xdata, ydata, fig=fig, ax=ax)
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_5_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    xdata, ydata, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_test, y_test, fig=f, ax=ax2, title="test data")

f.tight_layout()
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_7_0.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Working with multiple inputs"}),`
`,a.jsxs(e.p,{children:["To achieve training now, we have to upload all the input parameters into the circuit. We will once again follow the ",a.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". In summary, we will"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Prepare the initial state."}),`
`,a.jsx(e.li,{children:"Apply a parametrized circuit with parameters $\\mathbf{w}$ that depend on the input $U(\\mathbf{w}, \\mathbf{x}_i)$."}),`
`,a.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,a.jsx(e.p,{children:"The main difference is now that the upload $S(\\mathbf{x}_i)$ will have multiple rotations. In our fairly simple case of two input parameters, we will then set it as:"}),`
`,a.jsx(e.p,{children:`$$
\\hat{S}(x_{1,i}, x_{2,i}) = \\hat{R}_z(w_2 \\cdot x_2) \\hat{R}_x(w_1 \\cdot x_1)
$$`}),`
`,a.jsxs(e.p,{children:["Let us just visualize it once in ",a.jsx(e.code,{children:"qiskit"}),"."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`theta1 = Parameter(r"$\\theta_1$")
theta2 = Parameter(r"$\\theta_2$")

alpha0 = Parameter(r"$\\alpha_0$")
alpha1 = Parameter(r"$\\alpha_1$")

beta0 = Parameter(r"$\\beta_0$")
beta1 = Parameter(r"$\\beta_1$")

gamma0 = Parameter(r"$\\gamma_0$")
gamma1 = Parameter(r"$\\gamma_1$")


#alpha1 = Parameter(r"$\\alpha_1$")
qc = QuantumCircuit(1)

# first upload
qc.rx(theta1, 0)
qc.rz(theta2, 0)

# first processing
qc.rx(alpha0, 0)
qc.rz(beta0, 0)
qc.rx(gamma0, 0)

# second upload
qc.rx(theta1, 0)
qc.rz(theta2, 0)

# second processing
qc.rx(alpha1, 0)
qc.rz(beta1, 0)
qc.rx(gamma1, 0)


qc.measure_all()
qc.draw("mpl")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_10_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weights: List[float] , alphas: List[float], betas: List[float], gammas: List[float],
    xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameters for the z processing gate
      gammas: the training parameters for the x processing gate
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta1: weights[0]*xinput[0],
             theta2: weights[1]*xinput[1],
             alpha0: alphas[0],
             alpha1: alphas[1],
             beta0: betas[0],
             beta1: betas[1],
             gamma0: gammas[0],
             gamma1: gammas[1],
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < Nshots/2)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(123)

weights = np.random.uniform(size=2)
alphas = np.random.uniform(size=2)
betas = np.random.uniform(size=2)
gammas = np.random.uniform(size=2)

accuracy, y_pred = get_accuracy(qc, alphas=alphas, betas = betas, weights=weights, gammas = gammas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The randomly initialized circuit has an accuracy of {accuracy}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The randomly initialized circuit has an accuracy of 0.3875
`})}),`
`,a.jsx(e.p,{children:"Now it is time to visualize the quality of the prediction with random parameters. We can clearly see that the overlap is ... random."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_15_0.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Training"}),`
`,a.jsxs(e.p,{children:["We once again have to train the circuit as discussed in the",a.jsx(e.a,{href:"qml102",children:" previous tutorial"})," with ",a.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:a.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weights = params_flat[:2]
        alphas = params_flat[2:4]
        betas = params_flat[4:6]
        gammas = params_flat[6:]
        accuracy, y_pred = get_accuracy(qc, alphas=alphas, betas = betas, weights=weights, gammas = gammas, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=8)
params_flat = params.flatten()

# initial parameters which are guessed
weights = np.array([1,1])
alphas = [0,0]
betas = [0,0]
gammas = [0,0]
params_flat = np.zeros(8)
#params_flat[:2] = 1

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`accuracy = 0.53125
accuracy = 0.70625
accuracy = 0.6875
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.70625
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.5
accuracy = 0.6
accuracy = 0.55625
accuracy = 0.70625
accuracy = 0.725
accuracy = 0.71875
accuracy = 0.71875
accuracy = 0.725
accuracy = 0.69375
accuracy = 0.725
accuracy = 0.73125
accuracy = 0.7125
accuracy = 0.73125
accuracy = 0.71875
accuracy = 0.71875
accuracy = 0.74375
accuracy = 0.73125
accuracy = 0.7375
accuracy = 0.71875
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.70625
accuracy = 0.74375
accuracy = 0.7125
accuracy = 0.74375
accuracy = 0.725
accuracy = 0.725
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
`})}),`
`,a.jsx(e.p,{children:"We can see that the accuracy is converging to a value of roughly slightly more than 70% nd it is now time to look into the optimal training parameters."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`opt_weights = res.x[:2]
opt_alphas = res.x[2:4]
opt_betas = res.x[4:6]
opt_gammas = res.x[6:8]

print(f"optimal weights = {opt_weights}")
print(f"optimal alpha = {opt_alphas}")
print(f"optimal betas = {opt_betas}")
print(f"optimal gammas = {opt_gammas}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`optimal weights = [1.17532389 0.86949734]
optimal alpha = [ 0.40087815 -0.07970246]
optimal betas = [-0.03898444  1.24761263]
optimal gammas = [-0.31645471 -0.01597381]
`})}),`
`,a.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weights=opt_weights, alphas = opt_alphas, betas = opt_betas, gammas = opt_gammas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit has an accuracy of 0.73
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_24_0.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Test"}),`
`,a.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weights=opt_weights,  alphas = opt_alphas, betas = opt_betas, gammas = opt_gammas, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has a test accuracy of 0.78
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_103_26_1.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Summary and outlook"}),`
`,a.jsx(e.p,{children:"In this tutorial, we have seen that the data reuploading circuit can be extended to handle multiple input parameters. So have put everything together that we would like at this stage:"}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"More input parameters can be handle through more gates in the layer $S(\\mathbf{x}_i)$"}),`
`,a.jsx(e.li,{children:"More complex data structures can be embedded through deeper circuit structures."}),`
`]}),`
`,a.jsx(e.p,{children:"Improved circuits typically work with tuning of:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"Different optimizers."}),`
`,a.jsx(e.li,{children:"Cost functions that are easier to differentiate."}),`
`,a.jsx(e.li,{children:"Libraries that perform faster differentiation."}),`
`,a.jsx(e.li,{children:"More parameters for the circuits."}),`
`]}),`
`,a.jsx(e.p,{children:"Up to this point we have exclusively worked with circuits that work on a single qubit. While this allowed us to learn more fundamental concepts, it clearly ignores one important parameter that is commonly seen as a differentiator between classical and quantum systems, namely entanglement. So in the next and last tutorial of this series we will work with multiple qubits, entangle them and see how we can systematically study the role of entanglement in the circuit performance."})]})}function D0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(Fk,{...t})}):Fk(t)}const Hk=Object.freeze(Object.defineProperty({__proto__:null,default:D0e,frontmatter:N0e},Symbol.toStringTag,{value:"Module"})),B0e={author:["Fred Jendrzejewski"],order:4,title:"QML 104 - More is different ? Working with multiple qubits"};function zk(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return a.jsxs(a.Fragment,{children:[a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./3",children:"previous tutorial"})," we saw how we might be able to handle more complex inputs through reuploading. However, we only discussed algorithms with single qubits until now and there is little chance that such algorithms have an impact beyond their pedagogical power."]}),`
`,a.jsx(e.p,{children:"In this tutorial, we will present one for to introduce multiple qubits and entangle them. We will learn:"}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"How multiple qubits can work with multiple labels."}),`
`,a.jsx(e.li,{children:"Entanglement might be used to control the performance of the circuit."}),`
`]}),`
`,a.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,a.jsx(e.h2,{children:"A multi-label data set"}),`
`,a.jsxs(e.p,{children:["In the ",a.jsx(e.a,{href:"./1",children:"first tutorials"})," we saw how to label data that depend only on one input and had binary labels $y_i \\in {0, 1}$. In the ",a.jsx(e.a,{href:"./3",children:"third tutorial"}),", we worked with a data set that had a two-dimensional input $\\mathbf{x}",a.jsx(e.em,{children:"i = (x"}),"{1,i}, x_{2,i})$ and a binary label $y_i \\in {0, 1}$. We will now build up on this work and use a data set that has:"]}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"one dimensional input $x$."}),`
`,a.jsx(e.li,{children:"Labels that go from $y_i \\in {0, 1, 2, 3}$. Extending our previous data set."}),`
`]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
xdata = np.random.uniform(0, 2, 100)
ydata = np.ceil(2*xdata)-1

f, ax = plt.subplots()
ax.plot(xdata, ydata, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label");
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_4_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    xdata, ydata, test_size=0.20, random_state=42
)


f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")

f.tight_layout()
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_6_0.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Handling multiple labels"}),`
`,a.jsxs(e.p,{children:["To achieve training now, we have to handle labels that go beyond binary. Quite interestingly there is a multitude of approaches on how to encode such labels, one of them was propose in the original paper ",a.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". However, we will follow a more intuitive path in which we simply use the qubits as ",a.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Binary_number",children:"binary encoding"})," of the labels. To represent the number $3$, we therefore need two qubits as the result $|11\\rangle$ is then translated in $2^1+1^1 = 3$. In summary, we will"]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"Prepare the initial state, where multiple qubits are initialized in $0$."}),`
`,a.jsx(e.li,{children:"Apply a parametrized circuit with parameters $\\mathbf{w}$ that depend on the input $U(\\mathbf{w},x_i)$."}),`
`,a.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,a.jsxs(e.p,{children:["The main difference is now that we have multiple qubits that we should handle in this approach and we have to choose how to properly parametrize the circuit. This falls into the large class of variational circuits, about which we might do a series of tutorials, if interest exists. A nice review on different choices can be found ",a.jsx(e.a,{href:"https://arxiv.org/abs/2008.08605",children:"in this paper"}),". Here, we will choose the following parametrization."]}),`
`,a.jsxs(e.ol,{children:[`
`,a.jsx(e.li,{children:"We apply a rotation gate $R_x$ on each qubit."}),`
`,a.jsx(e.li,{children:"We entangle the two qubit through a parametrized two qubit gate. A wide choice exists, but the $R_{zz}$ gate is especially nice as it creates entanglement and does not commute with the $R_x$ gates."}),`
`,a.jsx(e.li,{children:"We apply another rotation gate $R_x$ on each qubit."}),`
`]}),`
`,a.jsxs(e.p,{children:["Let us just visualize it once in ",a.jsx(e.code,{children:"qiskit"}),"."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`theta1 = Parameter(r"$\\theta_1$")
theta2 = Parameter(r"$\\theta_2$")

alpha0 = Parameter(r"$\\alpha_0$")

qc = QuantumCircuit(2)

# first upload
qc.rx(theta1, 0)
qc.rx(theta2, 1)

# first processing
qc.rzz(alpha0, 0,1)

# second upload
qc.rx(theta1, 0)
qc.rx(theta2, 1)


qc.measure_all()
qc.draw("mpl")
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_9_0.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weights: List[float] , alphas: List[float], xvals: List[float], yvals: List[int]) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameters for the z processing gate
      gammas: the training parameters for the x processing gate
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta1: weights[0]*xinput,
             theta2: weights[1]*xinput,
             alpha0: alphas
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()  # e.g. counts = {"00": 2000, "11": 2000}

        # obtain the predicted label on average
        av_label = 0
        for el in counts1:
          av_label += int(el,2)*counts1[el]/Nshots
        pred_label = round(av_label)

        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`np.random.seed(123)

weights = np.random.uniform(size=2)
alphas = np.random.uniform()


accuracy, y_pred = get_accuracy(qc, alphas=alphas, weights=weights, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The randomly initialized circuit has an accuracy of {accuracy}")

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The randomly initialized circuit has an accuracy of 0.275





<matplotlib.legend.Legend at 0x7f016e522a50>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_12_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Training"}),`
`,a.jsxs(e.p,{children:["We once again have to train the circuit as discussed in the",a.jsx(e.a,{href:"./3",children:" previous tutorial"})," with ",a.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:a.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weights = params_flat[:2]
        alphas = params_flat[2]
        accuracy, y_pred = get_accuracy(qc, alphas=alphas, weights=weights, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=3)
params_flat = params.flatten()

# params, which are guessed close to what we know to be a good result
params_flat = [0.9,0.9,0.7]

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`accuracy = 0.975
accuracy = 0.6125
accuracy = 0.3125
accuracy = 0.375
accuracy = 0.2625
accuracy = 0.5375
accuracy = 0.8
accuracy = 0.8
accuracy = 0.75
accuracy = 0.9375
accuracy = 0.95
accuracy = 0.95
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9875
accuracy = 0.9625
accuracy = 0.95
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9875
accuracy = 0.9875
accuracy = 0.9625
accuracy = 0.95
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
`})}),`
`,a.jsx(e.p,{children:"We can see that the accuracy is converging to a value of more than 95% and it is now time to look into the optimal training parameters."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`opt_weights = res.x[:2]
opt_alphas = res.x[2]

print(f"optimal weights = {opt_weights}")
print(f"optimal alpha = {opt_alphas}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`optimal weights = [0.9010178  0.90824815]
optimal alpha = 0.7131673355135238
`})}),`
`,a.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weights=opt_weights, alphas = opt_alphas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The trained circuit has an accuracy of {accuracy:.2}")

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit has an accuracy of 0.96





<matplotlib.legend.Legend at 0x7f016e5952d0>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_20_2.png",alt:"png"})}),`
`,a.jsx(e.p,{children:"We can see quite excellent training for this data set. One common question that always comes up for these kinds of circuits is also about the potential role of entanglement. The simplest thing would be to simply set the alpha parameter to zero."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`accuracy_wo_entanglement, _ = get_accuracy(qc, weights=opt_weights, alphas = 0, xvals=x_train, yvals=y_train)
print(f"The trained circuit without entanglement has an accuracy of {accuracy_wo_entanglement:.2}")
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The trained circuit without entanglement has an accuracy of 0.79
`})}),`
`,a.jsx(e.p,{children:"We can see that the correlation between the two qubits plays and substantial role in the prediction of the labels. The training of the circuit without any kind of entanglement is left to the reader. Or you just send us a comment if you would like to have a cleaner introduction on this issue."}),`
`,a.jsx(e.h2,{children:"Test"}),`
`,a.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weights=opt_weights,  alphas = opt_alphas, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")

f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,a.jsx(e.pre,{children:a.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7f016e403c50>
`})}),`
`,a.jsx(e.p,{children:a.jsx(e.img,{src:"./qml_104_25_2.png",alt:"png"})}),`
`,a.jsx(e.h2,{children:"Summary and outlook"}),`
`,a.jsx(e.p,{children:"In this last tutorial of this introductory series, we have seen that the data reuploading can be extended towards multiple labels."}),`
`,a.jsxs(e.ul,{children:[`
`,a.jsx(e.li,{children:"The crucial step was the extension to multiple qubits."}),`
`,a.jsx(e.li,{children:"To make the algorithm work efficiently we entangled the qudits with an entanglement gate and then trained the full circuit with the whole data set."}),`
`]}),`
`,a.jsx(e.p,{children:"Of course, we have not gone into complex data-sets like the MNIST or other problems in this series. This will be up to the more complex literature or more advanced courses. However, we hope that this series gave you a basic idea of some fairly common concepts that are used in the field nowadays."})]})}function P0e(t={}){const{wrapper:e}=t.components||{};return e?a.jsx(e,{...t,children:a.jsx(zk,{...t})}):zk(t)}const qk=Object.freeze(Object.defineProperty({__proto__:null,default:P0e,frontmatter:B0e},Symbol.toStringTag,{value:"Module"})),N1={blog:{eager:Object.assign({"../blog/blog_stack.md":Aw,"../blog/blog_updates.md":Mw,"../blog/collect_imagegen.md":Ow,"../blog/decentral_like.md":Nw,"../blog/finishing_amo.md":Bw,"../blog/hello_world.mdx":Fw,"../blog/images.md":zw,"../blog/ipfs.md":Ww,"../blog/merkle_ai_batching.tsx":Av,"../blog/merkle_ai_batching_fundamentals.tsx":B3,"../blog/mirror.md":F3,"../blog/moving_lectures.md":z3,"../blog/nft_blog.md":W3,"../blog/nft_gallery.md":V3,"../blog/prisoners_dilemma_interactive.tsx":k5,"../blog/smart_quantum.md":$5,"../blog/tragedy_of_commons_fishing.tsx":C5,"../blog/vc_lessons.md":I5}),lazy:Object.assign({"../blog/blog_stack.md":()=>_e(()=>Promise.resolve().then(()=>Aw),void 0),"../blog/blog_updates.md":()=>_e(()=>Promise.resolve().then(()=>Mw),void 0),"../blog/collect_imagegen.md":()=>_e(()=>Promise.resolve().then(()=>Ow),void 0),"../blog/decentral_like.md":()=>_e(()=>Promise.resolve().then(()=>Nw),void 0),"../blog/finishing_amo.md":()=>_e(()=>Promise.resolve().then(()=>Bw),void 0),"../blog/hello_world.mdx":()=>_e(()=>Promise.resolve().then(()=>Fw),void 0),"../blog/images.md":()=>_e(()=>Promise.resolve().then(()=>zw),void 0),"../blog/ipfs.md":()=>_e(()=>Promise.resolve().then(()=>Ww),void 0),"../blog/merkle_ai_batching.tsx":()=>_e(()=>Promise.resolve().then(()=>Av),void 0),"../blog/merkle_ai_batching_fundamentals.tsx":()=>_e(()=>Promise.resolve().then(()=>B3),void 0),"../blog/mirror.md":()=>_e(()=>Promise.resolve().then(()=>F3),void 0),"../blog/moving_lectures.md":()=>_e(()=>Promise.resolve().then(()=>z3),void 0),"../blog/nft_blog.md":()=>_e(()=>Promise.resolve().then(()=>W3),void 0),"../blog/nft_gallery.md":()=>_e(()=>Promise.resolve().then(()=>V3),void 0),"../blog/prisoners_dilemma_interactive.tsx":()=>_e(()=>Promise.resolve().then(()=>k5),void 0),"../blog/smart_quantum.md":()=>_e(()=>Promise.resolve().then(()=>$5),void 0),"../blog/tragedy_of_commons_fishing.tsx":()=>_e(()=>Promise.resolve().then(()=>C5),void 0),"../blog/vc_lessons.md":()=>_e(()=>Promise.resolve().then(()=>I5),void 0)})},"quantum/amo":{eager:Object.assign({"../quantum/amo/lecture1.md":L5,"../quantum/amo/lecture10.md":R5,"../quantum/amo/lecture11.md":D5,"../quantum/amo/lecture12.md":P5,"../quantum/amo/lecture13.md":H5,"../quantum/amo/lecture14.md":q5,"../quantum/amo/lecture15.md":U5,"../quantum/amo/lecture16.md":Y5,"../quantum/amo/lecture18.md":X5,"../quantum/amo/lecture19.md":Q5,"../quantum/amo/lecture2.md":Z5,"../quantum/amo/lecture20.md":tk,"../quantum/amo/lecture3.md":rk,"../quantum/amo/lecture4.md":ak,"../quantum/amo/lecture5.md":ok,"../quantum/amo/lecture6.md":ck,"../quantum/amo/lecture7.md":uk,"../quantum/amo/lecture8.md":fk,"../quantum/amo/lecture9.md":mk,"../quantum/amo/lecure17.md":bk}),lazy:Object.assign({"../quantum/amo/lecture1.md":()=>_e(()=>Promise.resolve().then(()=>L5),void 0),"../quantum/amo/lecture10.md":()=>_e(()=>Promise.resolve().then(()=>R5),void 0),"../quantum/amo/lecture11.md":()=>_e(()=>Promise.resolve().then(()=>D5),void 0),"../quantum/amo/lecture12.md":()=>_e(()=>Promise.resolve().then(()=>P5),void 0),"../quantum/amo/lecture13.md":()=>_e(()=>Promise.resolve().then(()=>H5),void 0),"../quantum/amo/lecture14.md":()=>_e(()=>Promise.resolve().then(()=>q5),void 0),"../quantum/amo/lecture15.md":()=>_e(()=>Promise.resolve().then(()=>U5),void 0),"../quantum/amo/lecture16.md":()=>_e(()=>Promise.resolve().then(()=>Y5),void 0),"../quantum/amo/lecture18.md":()=>_e(()=>Promise.resolve().then(()=>X5),void 0),"../quantum/amo/lecture19.md":()=>_e(()=>Promise.resolve().then(()=>Q5),void 0),"../quantum/amo/lecture2.md":()=>_e(()=>Promise.resolve().then(()=>Z5),void 0),"../quantum/amo/lecture20.md":()=>_e(()=>Promise.resolve().then(()=>tk),void 0),"../quantum/amo/lecture3.md":()=>_e(()=>Promise.resolve().then(()=>rk),void 0),"../quantum/amo/lecture4.md":()=>_e(()=>Promise.resolve().then(()=>ak),void 0),"../quantum/amo/lecture5.md":()=>_e(()=>Promise.resolve().then(()=>ok),void 0),"../quantum/amo/lecture6.md":()=>_e(()=>Promise.resolve().then(()=>ck),void 0),"../quantum/amo/lecture7.md":()=>_e(()=>Promise.resolve().then(()=>uk),void 0),"../quantum/amo/lecture8.md":()=>_e(()=>Promise.resolve().then(()=>fk),void 0),"../quantum/amo/lecture9.md":()=>_e(()=>Promise.resolve().then(()=>mk),void 0),"../quantum/amo/lecure17.md":()=>_e(()=>Promise.resolve().then(()=>bk),void 0)})},"quantum/basics":{eager:Object.assign({"../quantum/basics/bell_inequalities.md":xk,"../quantum/basics/qtech_intro.md":_k,"../quantum/basics/quantum_metrology.md":Tk}),lazy:Object.assign({"../quantum/basics/bell_inequalities.md":()=>_e(()=>Promise.resolve().then(()=>xk),void 0),"../quantum/basics/qtech_intro.md":()=>_e(()=>Promise.resolve().then(()=>_k),void 0),"../quantum/basics/quantum_metrology.md":()=>_e(()=>Promise.resolve().then(()=>Tk),void 0)})},"quantum/hardware":{eager:Object.assign({"../quantum/hardware/quantum_hardware_101.md":Sk,"../quantum/hardware/quantum_hardware_102.md":Ek,"../quantum/hardware/quantum_hardware_103.md":Ck,"../quantum/hardware/quantum_hardware_104.md":Ik,"../quantum/hardware/quantum_hardware_105.md":Lk}),lazy:Object.assign({"../quantum/hardware/quantum_hardware_101.md":()=>_e(()=>Promise.resolve().then(()=>Sk),void 0),"../quantum/hardware/quantum_hardware_102.md":()=>_e(()=>Promise.resolve().then(()=>Ek),void 0),"../quantum/hardware/quantum_hardware_103.md":()=>_e(()=>Promise.resolve().then(()=>Ck),void 0),"../quantum/hardware/quantum_hardware_104.md":()=>_e(()=>Promise.resolve().then(()=>Ik),void 0),"../quantum/hardware/quantum_hardware_105.md":()=>_e(()=>Promise.resolve().then(()=>Lk),void 0)})},"quantum/qml":{eager:Object.assign({"../quantum/qml/qml_001.md":Rk,"../quantum/qml/qml_101.md":Dk,"../quantum/qml/qml_102.md":Pk,"../quantum/qml/qml_103.md":Hk,"../quantum/qml/qml_104.md":qk}),lazy:Object.assign({"../quantum/qml/qml_001.md":()=>_e(()=>Promise.resolve().then(()=>Rk),void 0),"../quantum/qml/qml_101.md":()=>_e(()=>Promise.resolve().then(()=>Dk),void 0),"../quantum/qml/qml_102.md":()=>_e(()=>Promise.resolve().then(()=>Pk),void 0),"../quantum/qml/qml_103.md":()=>_e(()=>Promise.resolve().then(()=>Hk),void 0),"../quantum/qml/qml_104.md":()=>_e(()=>Promise.resolve().then(()=>qk),void 0)})}},F0e=async(t,e,n)=>{const r=N1[t];if(!r)throw new Error(`Unsupported directory: ${t}. Supported: ${Object.keys(N1).join(", ")}`);const i=n?r.eager:r.lazy,s=`../${t}/${e}`,o=i[s];if(!o){const l=Object.keys(i).join(", ");throw new Error(`Module not found: ${s}. Available modules: ${l}`)}return n?o:await o()},H0e=t=>t in N1;function z0e({id:t,host:e,repo:n,repoId:r,category:i,categoryId:s,mapping:o,term:l,strict:c,reactionsEnabled:h,emitMetadata:u,inputPosition:d,theme:f,lang:p,loading:m}){const[g,b]=je.useState(!1);return je.useEffect(()=>{g||_e(()=>import("./chunk-cvwcBf5t.js"),[]).then(()=>b(!0))},[]),g?a.jsx("giscus-widget",{id:t,host:e,repo:n,repoid:r,category:i,categoryid:s,mapping:o,term:l,strict:c,reactionsenabled:h,emitmetadata:u,inputposition:d,theme:f,lang:p,loading:m}):null}const q0e=({componentPath:t,tokenID:e})=>{const[n,r]=na.useState(null),[i,s]=na.useState(null),[o,l]=na.useState(!0);return na.useEffect(()=>{(async()=>{try{const h=t.replace(/^\.\.\//,"").split("/"),u=h.slice(0,-1).join("/"),d=h[h.length-1];if(!H0e(u))throw new Error(`Unsupported directory: ${u}. Supported directories: blog, quantum/amo, quantum/basics, quantum/hardware, quantum/qml`);const p=(await F0e(u,d,!0)).default;if(!p)throw new Error(`No default export found in ${d}`);r(()=>p),l(!1)}catch(h){console.error("ReactPostRenderer: Error loading React component:",h),s(h instanceof Error?h.message:"Unknown error occurred"),l(!1)}})()},[t]),o?a.jsx("div",{className:yr.contentContainer,children:a.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[a.jsx("p",{children:"🔄 Lade interaktive Komponente..."}),a.jsxs("p",{style:{fontSize:"0.9em",color:"#666"},children:["Pfad: ",a.jsx("code",{children:t})]})]})}):i||!n?a.jsx("div",{className:yr.contentContainer,children:a.jsxs("div",{style:{border:"1px solid #dc3545",borderRadius:"4px",padding:"20px",backgroundColor:"#f8d7da",color:"#721c24",margin:"20px 0"},children:[a.jsx("h3",{children:"❌ Fehler beim Laden der React-Komponente"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Fehler:"})," ",i||"Komponente konnte nicht geladen werden"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Pfad:"})," ",a.jsx("code",{children:t})]}),a.jsxs("details",{style:{marginTop:"10px"},children:[a.jsx("summary",{children:"Mögliche Lösungen"}),a.jsxs("ul",{style:{marginTop:"10px"},children:[a.jsx("li",{children:"Überprüfen Sie, ob die TSX-Datei existiert"}),a.jsx("li",{children:"Stellen Sie sicher, dass die Komponente als default export verfügbar ist"}),a.jsx("li",{children:"Überprüfen Sie die Konsolenausgabe für weitere Details"})]})]})]})}):a.jsxs("div",{className:yr.contentContainer,children:[e&&a.jsx(K$,{tokenId:e}),a.jsx(na.Suspense,{fallback:a.jsx("div",{style:{padding:"20px",textAlign:"center"},children:a.jsx("p",{children:"⚡ Lade Komponente..."})}),children:a.jsx(n,{})})]})};function Ape({title:t,content:e,publishing_date:n,prevPost:r,nextPost:i,basePath:s="",tokenID:o,type:l="markdown",componentPath:c}){const h=na.useRef(null);return console.log("Post component rendering with props:",{title:t,tokenID:o,publishing_date:n,type:l}),o?console.log("Rendering NFTHeroCard with tokenID:",o):console.log("No tokenID provided, skipping NFTHeroCard"),na.useEffect(()=>{h.current&&l!=="react"&&_e(()=>import("./chunk-BS6e80c2.js"),__vite__mapDeps([59,6,7,8,9,10,11,12,13,14,15,16])).then(u=>{const d=u.default;h.current&&d(h.current,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})})},[e,l]),a.jsxs(a.Fragment,{children:[a.jsx("h1",{className:rM.title,children:t}),a.jsx(vW,{publishingDate:n,showSupport:!0}),l==="react"&&c?a.jsx(q0e,{componentPath:c,tokenID:o}):a.jsxs("div",{className:yr.contentContainer,ref:h,children:[o&&a.jsx(K$,{tokenId:o}),a.jsx(_i,{remarkPlugins:[vi,sH],rehypePlugins:[Ti,wW],children:e})]}),(r||i)&&a.jsxs("div",{className:yr.navigation,children:[r?a.jsx("div",{className:`${yr.navLink} ${yr.navLinkPrev}`,children:a.jsxs(jx,{href:`${s}/${r.id}`,children:[a.jsx("span",{className:yr.navLabel,children:"Previous: "}),a.jsx("span",{className:yr.navTitle,children:r.title})]})}):a.jsx("div",{}),i?a.jsx("div",{className:`${yr.navLink} ${yr.navLinkNext}`,children:a.jsxs(jx,{href:`${s}/${i.id}`,children:[a.jsx("span",{className:yr.navLabel,children:"Next: "}),a.jsx("span",{className:yr.navTitle,children:i.title})]})}):a.jsx("div",{})]}),a.jsx(z0e,{id:"comments",repo:"fretchen/fretchen.github.io",repoId:"MDEwOlJlcG9zaXRvcnkzMzkyNzQ5OA=",category:"General",categoryId:"DIC_kwDOAgWxSs4ClveO",mapping:"pathname",term:"Welcome to @giscus/react component!",reactionsEnabled:"1",emitMetadata:"0",inputPosition:"top",theme:"light",lang:"en",loading:"lazy"})]})}export{ppe as $,rV as A,rpe as B,Ac as C,ji as D,WW as E,uV as F,dy as G,Cn as H,dE as I,JJ as J,zZ as K,WX as L,Uw as M,IX as N,k_ as O,T_ as P,dpe as Q,ope as R,hpe as S,cpe as T,Xe as U,ape as V,oo as W,Wb as X,upe as Y,spe as Z,v as _,aV as a,Me as a$,fpe as a0,lpe as a1,$U as a2,Po as a3,tpe as a4,Nf as a5,LZ as a6,UU as a7,Ib as a8,i_ as a9,Spe as aA,_pe as aB,Le as aC,vpe as aD,ine as aE,Zte as aF,Kte as aG,ste as aH,MX as aI,epe as aJ,Ch as aK,ite as aL,rte as aM,Ys as aN,AZ as aO,hC as aP,If as aQ,Rf as aR,Md as aS,dC as aT,cC as aU,sZ as aV,Fb as aW,Aa as aX,b_ as aY,uG as aZ,Gc as a_,RX as aa,Fu as ab,HZ as ac,ZU as ad,_h as ae,Ce as af,Fe as ag,_E as ah,Ite as ai,wA as aj,kpe as ak,KJ as al,ln as am,Xa as an,ny as ao,VC as ap,Js as aq,yC as ar,Ape as as,CZ as at,_K as au,vZ as av,ry as aw,kv as ax,vne as ay,Tpe as az,iV as b,Kj as b0,sr as b1,iG as b2,Pb as b3,RE as b4,kh as b5,BE as b6,ipe as b7,qW as b8,jZ as b9,aC as bA,b1 as bB,IZ as bC,Of as bD,_Z as ba,lK as bb,iy as bc,nZ as bd,MZ as be,Eh as bf,cl as bg,Cd as bh,fZ as bi,Une as bj,$h as bk,Id as bl,oZ as bm,rC as bn,uK as bo,dK as bp,ms as bq,W_ as br,fK as bs,ay as bt,hK as bu,gK as bv,hl as bw,Ga as bx,P_ as by,sy as bz,wt as c,ut as d,wE as e,rn as f,oV as g,pa as h,Br as i,iQ as j,fg as k,ce as l,ol as m,wC as n,vh as o,npe as p,Epe as q,$pe as r,sV as s,lV as t,ei as u,cV as v,UZ as w,QJ as x,Xte as y,mpe as z};
