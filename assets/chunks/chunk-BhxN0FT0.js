var hr=Object.defineProperty;var dr=(i,t,e)=>t in i?hr(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var T=(i,t,e)=>dr(i,typeof t!="symbol"?t+"":t,e);import{r as N,R as Ks,j as b,h as w}from"./chunk-DozKHz-q.js";/* empty css              */import{M as ie,r as ne,a as se}from"./chunk-BhprifKK.js";import"./chunk-B7I0Dq53.js";/* empty css              *//* empty css              *//* empty css              */import"./chunk-Cek0CpfS.js";import"./chunk-CH2_7slJ.js";import"./chunk-XcZQRiLD.js";import"./chunk-C2ZNN1IO.js";import"./chunk-DtbnvMqb.js";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function De(i){return i+.5|0}const xt=(i,t,e)=>Math.max(Math.min(i,e),t);function fe(i){return xt(De(i*2.55),0,255)}function _t(i){return xt(De(i*255),0,255)}function gt(i){return xt(De(i/2.55)/100,0,1)}function _n(i){return xt(De(i*100),0,100)}const nt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ji=[..."0123456789ABCDEF"],fr=i=>ji[i&15],ur=i=>ji[(i&240)>>4]+ji[i&15],Ee=i=>(i&240)>>4===(i&15),gr=i=>Ee(i.r)&&Ee(i.g)&&Ee(i.b)&&Ee(i.a);function pr(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&nt[i[1]]*17,g:255&nt[i[2]]*17,b:255&nt[i[3]]*17,a:t===5?nt[i[4]]*17:255}:(t===7||t===9)&&(e={r:nt[i[1]]<<4|nt[i[2]],g:nt[i[3]]<<4|nt[i[4]],b:nt[i[5]]<<4|nt[i[6]],a:t===9?nt[i[7]]<<4|nt[i[8]]:255})),e}const mr=(i,t)=>i<255?t(i):"";function br(i){var t=gr(i)?fr:ur;return i?"#"+t(i.r)+t(i.g)+t(i.b)+mr(i.a,t):void 0}const yr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gs(i,t,e){const n=t*Math.min(e,1-e),s=(o,r=(o+i/30)%12)=>e-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function xr(i,t,e){const n=(s,o=(s+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function _r(i,t,e){const n=Gs(i,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)n[s]*=1-t-e,n[s]+=t;return n}function wr(i,t,e,n,s){return i===s?(t-e)/n+(t<e?6:0):t===s?(e-i)/n+2:(i-t)/n+4}function Ki(i){const e=i.r/255,n=i.g/255,s=i.b/255,o=Math.max(e,n,s),r=Math.min(e,n,s),a=(o+r)/2;let l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=wr(e,n,s,h,o),l=l*60+.5),[l|0,c||0,a]}function Gi(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(_t)}function Zi(i,t,e){return Gi(Gs,i,t,e)}function vr(i,t,e){return Gi(_r,i,t,e)}function Sr(i,t,e){return Gi(xr,i,t,e)}function Zs(i){return(i%360+360)%360}function kr(i){const t=yr.exec(i);let e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?fe(+t[5]):_t(+t[5]));const s=Zs(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?n=vr(s,o,r):t[1]==="hsv"?n=Sr(s,o,r):n=Zi(s,o,r),{r:n[0],g:n[1],b:n[2],a:e}}function Mr(i,t){var e=Ki(i);e[0]=Zs(e[0]+t),e=Zi(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Cr(i){if(!i)return;const t=Ki(i),e=t[0],n=_n(t[1]),s=_n(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${s}%, ${gt(i.a)})`:`hsl(${e}, ${n}%, ${s}%)`}const wn={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Tr(){const i={},t=Object.keys(vn),e=Object.keys(wn);let n,s,o,r,a;for(n=0;n<t.length;n++){for(r=a=t[n],s=0;s<e.length;s++)o=e[s],a=a.replace(o,wn[o]);o=parseInt(vn[r],16),i[a]=[o>>16&255,o>>8&255,o&255]}return i}let We;function Pr(i){We||(We=Tr(),We.transparent=[0,0,0,0]);const t=We[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Dr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ar(i){const t=Dr.exec(i);let e=255,n,s,o;if(t){if(t[7]!==n){const r=+t[7];e=t[8]?fe(r):xt(r*255,0,255)}return n=+t[1],s=+t[3],o=+t[5],n=255&(t[2]?fe(n):xt(n,0,255)),s=255&(t[4]?fe(s):xt(s,0,255)),o=255&(t[6]?fe(o):xt(o,0,255)),{r:n,g:s,b:o,a:e}}}function Or(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${gt(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Si=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Nt=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Rr(i,t,e){const n=Nt(gt(i.r)),s=Nt(gt(i.g)),o=Nt(gt(i.b));return{r:_t(Si(n+e*(Nt(gt(t.r))-n))),g:_t(Si(s+e*(Nt(gt(t.g))-s))),b:_t(Si(o+e*(Nt(gt(t.b))-o))),a:i.a+e*(t.a-i.a)}}function Le(i,t,e){if(i){let n=Ki(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=Zi(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function Qs(i,t){return i&&Object.assign(t||{},i)}function Sn(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=_t(i[3]))):(t=Qs(i,{r:0,g:0,b:0,a:1}),t.a=_t(t.a)),t}function jr(i){return i.charAt(0)==="r"?Ar(i):kr(i)}class Se{constructor(t){if(t instanceof Se)return t;const e=typeof t;let n;e==="object"?n=Sn(t):e==="string"&&(n=pr(t)||Pr(t)||jr(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Qs(this._rgb);return t&&(t.a=gt(t.a)),t}set rgb(t){this._rgb=Sn(t)}rgbString(){return this._valid?Or(this._rgb):void 0}hexString(){return this._valid?br(this._rgb):void 0}hslString(){return this._valid?Cr(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,s=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Rr(this._rgb,t._rgb,e)),this}clone(){return new Se(this.rgb)}alpha(t){return this._rgb.a=_t(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=De(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Le(this._rgb,2,t),this}darken(t){return Le(this._rgb,2,-t),this}saturate(t){return Le(this._rgb,1,t),this}desaturate(t){return Le(this._rgb,1,-t),this}rotate(t){return Mr(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function dt(){}const Ir=(()=>{let i=0;return()=>i++})();function W(i){return i==null}function L(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function A(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function tt(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function lt(i,t){return tt(i)?i:t}function D(i,t){return typeof i>"u"?t:i}const zr=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,to=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function E(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function z(i,t,e,n){let s,o,r;if(L(i))for(o=i.length,s=0;s<o;s++)t.call(e,i[s],s);else if(A(i))for(r=Object.keys(i),o=r.length,s=0;s<o;s++)t.call(e,i[r[s]],r[s])}function ei(i,t){let e,n,s,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(s=i[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function ii(i){if(L(i))return i.map(ii);if(A(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let s=0;for(;s<n;++s)t[e[s]]=ii(i[e[s]]);return t}return i}function eo(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Er(i,t,e,n){if(!eo(i))return;const s=t[i],o=e[i];A(s)&&A(o)?ke(s,o,n):t[i]=ii(o)}function ke(i,t,e){const n=L(t)?t:[t],s=n.length;if(!A(i))return i;e=e||{};const o=e.merger||Er;let r;for(let a=0;a<s;++a){if(r=n[a],!A(r))continue;const l=Object.keys(r);for(let c=0,h=l.length;c<h;++c)o(l[c],i,r,e)}return i}function xe(i,t){return ke(i,t,{merger:Wr})}function Wr(i,t,e){if(!eo(i))return;const n=t[i],s=e[i];A(n)&&A(s)?xe(n,s):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=ii(s))}const kn={"":i=>i,x:i=>i.x,y:i=>i.y};function Lr(i){const t=i.split("."),e=[];let n="";for(const s of t)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function Br(i){const t=Lr(i);return e=>{for(const n of t){if(n==="")break;e=e&&e[n]}return e}}function Me(i,t){return(kn[t]||(kn[t]=Br(t)))(i)}function Qi(i){return i.charAt(0).toUpperCase()+i.slice(1)}const et=i=>typeof i<"u",Q=i=>typeof i=="function",Mn=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function Fr(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const R=Math.PI,$=2*R,Nr=$+R,ni=Number.POSITIVE_INFINITY,tn=R/180,X=R/2,st=R/4,si=R*2/3,io=Math.log10,$t=Math.sign;function _e(i,t,e){return Math.abs(i-t)<e}function Cn(i){const t=Math.round(i);i=_e(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(io(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function Hr(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function Vr(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function jt(i){return!Vr(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Yr(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function $r(i,t,e){let n,s,o;for(n=0,s=i.length;n<s;n++)o=i[n][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function V(i){return i*(R/180)}function no(i){return i*(180/R)}function Tn(i){if(!tt(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Ii(i,t){const e=t.x-i.x,n=t.y-i.y,s=Math.sqrt(e*e+n*n);let o=Math.atan2(n,e);return o<-.5*R&&(o+=$),{angle:o,distance:s}}function Xt(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Xr(i,t){return(i-t+Nr)%$-R}function bt(i){return(i%$+$)%$}function oi(i,t,e,n){const s=bt(i),o=bt(t),r=bt(e),a=bt(o-s),l=bt(r-s),c=bt(s-o),h=bt(s-r);return s===o||s===r||n&&o===r||a>l&&c<h}function ot(i,t,e){return Math.max(t,Math.min(e,i))}function Jr(i){return ot(i,-32768,32767)}function ue(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function en(i,t,e){e=e||(r=>i[r]<t);let n=i.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,e(o)?s=o:n=o;return{lo:s,hi:n}}const Dt=(i,t,e,n)=>en(i,e,n?s=>{const o=i[s][t];return o<e||o===e&&i[s+1][t]===e}:s=>i[s][t]<e),Ur=(i,t,e)=>en(i,e,n=>i[n][t]>=e);function qr(i,t,e){let n=0,s=i.length;for(;n<s&&i[n]<t;)n++;for(;s>n&&i[s-1]>e;)s--;return n>0||s<i.length?i.slice(n,s):i}const so=["push","pop","shift","splice","unshift"];function Kr(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),so.forEach(e=>{const n="_onData"+Qi(e),s=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function Pn(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,s=n.indexOf(t);s!==-1&&n.splice(s,1),!(n.length>0)&&(so.forEach(o=>{delete i[o]}),delete i._chartjs)}function Gr(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const oo=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function ro(i,t){let e=[],n=!1;return function(...s){e=s,n||(n=!0,oo.call(window,()=>{n=!1,i.apply(t,e)}))}}function Zr(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}const nn=i=>i==="start"?"left":i==="end"?"right":"center",J=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,Qr=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function ta(i,t,e){const n=t.length;let s=0,o=n;if(i._sorted){const{iScale:r,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=r.axis,{min:d,max:f,minDefined:u,maxDefined:g}=r.getUserBounds();if(u){if(s=Math.min(Dt(l,h,d).lo,e?n:Dt(t,h,r.getPixelForValue(d)).lo),c){const p=l.slice(0,s+1).reverse().findIndex(m=>!W(m[a.axis]));s-=Math.max(0,p)}s=ot(s,0,n-1)}if(g){let p=Math.max(Dt(l,r.axis,f,!0).hi+1,e?0:Dt(t,h,r.getPixelForValue(f),!0).hi+1);if(c){const m=l.slice(p-1).findIndex(y=>!W(y[a.axis]));p+=Math.max(0,m)}o=ot(p,s,n)-s}else o=n-s}return{start:s,count:o}}function ea(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=s,!0;const o=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),o}const Be=i=>i===0||i===1,Dn=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*$/e)),An=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*$/e)+1,we={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*X)+1,easeOutSine:i=>Math.sin(i*X),easeInOutSine:i=>-.5*(Math.cos(R*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Be(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Be(i)?i:Dn(i,.075,.3),easeOutElastic:i=>Be(i)?i:An(i,.075,.3),easeInOutElastic(i){return Be(i)?i:i<.5?.5*Dn(i*2,.1125,.45):.5+.5*An(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-we.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?we.easeInBounce(i*2)*.5:we.easeOutBounce(i*2-1)*.5+.5};function sn(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function On(i){return sn(i)?i:new Se(i)}function ki(i){return sn(i)?i:new Se(i).saturate(.5).darken(.1).hexString()}const ia=["x","y","borderWidth","radius","tension"],na=["color","borderColor","backgroundColor"];function sa(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:na},numbers:{type:"number",properties:ia}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function oa(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Rn=new Map;function ra(i,t){t=t||{};const e=i+JSON.stringify(t);let n=Rn.get(e);return n||(n=new Intl.NumberFormat(i,t),Rn.set(e,n)),n}function on(i,t,e){return ra(t,e).format(i)}const aa={values(i){return L(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const n=this.chart.options.locale;let s,o=i;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=la(i,e)}const r=io(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),on(i,n,l)}};function la(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var ao={formatters:aa};function ca(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ao.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const It=Object.create(null),zi=Object.create(null);function ve(i,t){if(!t)return i;const e=t.split(".");for(let n=0,s=e.length;n<s;++n){const o=e[n];i=i[o]||(i[o]=Object.create(null))}return i}function Mi(i,t,e){return typeof t=="string"?ke(ve(i,t),e):ke(ve(i,""),t)}class ha{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>ki(s.backgroundColor),this.hoverBorderColor=(n,s)=>ki(s.borderColor),this.hoverColor=(n,s)=>ki(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Mi(this,t,e)}get(t){return ve(this,t)}describe(t,e){return Mi(zi,t,e)}override(t,e){return Mi(It,t,e)}route(t,e,n,s){const o=ve(this,t),r=ve(this,n),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=r[s];return A(l)?Object.assign({},c,l):D(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}}var B=new ha({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[sa,oa,ca]);function da(i){return!i||W(i.size)||W(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function jn(i,t,e,n,s){let o=t[s];return o||(o=t[s]=i.measureText(s).width,e.push(s)),o>n&&(n=o),n}function Mt(i,t,e){const n=i.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*n)/n+s}function In(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function Ei(i,t,e,n){lo(i,t,e,n,null)}function lo(i,t,e,n,s){let o,r,a,l,c,h,d,f;const u=t.pointStyle,g=t.rotation,p=t.radius;let m=(g||0)*tn;if(u&&typeof u=="object"&&(o=u.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(m),i.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),i.restore();return}if(!(isNaN(p)||p<=0)){switch(i.beginPath(),u){default:s?i.ellipse(e,n,s/2,p,0,0,$):i.arc(e,n,p,0,$),i.closePath();break;case"triangle":h=s?s/2:p,i.moveTo(e+Math.sin(m)*h,n-Math.cos(m)*p),m+=si,i.lineTo(e+Math.sin(m)*h,n-Math.cos(m)*p),m+=si,i.lineTo(e+Math.sin(m)*h,n-Math.cos(m)*p),i.closePath();break;case"rectRounded":c=p*.516,l=p-c,r=Math.cos(m+st)*l,d=Math.cos(m+st)*(s?s/2-c:l),a=Math.sin(m+st)*l,f=Math.sin(m+st)*(s?s/2-c:l),i.arc(e-d,n-a,c,m-R,m-X),i.arc(e+f,n-r,c,m-X,m),i.arc(e+d,n+a,c,m,m+X),i.arc(e-f,n+r,c,m+X,m+R),i.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,h=s?s/2:l,i.rect(e-h,n-l,2*h,2*l);break}m+=st;case"rectRot":d=Math.cos(m)*(s?s/2:p),r=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(s?s/2:p),i.moveTo(e-d,n-a),i.lineTo(e+f,n-r),i.lineTo(e+d,n+a),i.lineTo(e-f,n+r),i.closePath();break;case"crossRot":m+=st;case"cross":d=Math.cos(m)*(s?s/2:p),r=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(s?s/2:p),i.moveTo(e-d,n-a),i.lineTo(e+d,n+a),i.moveTo(e+f,n-r),i.lineTo(e-f,n+r);break;case"star":d=Math.cos(m)*(s?s/2:p),r=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(s?s/2:p),i.moveTo(e-d,n-a),i.lineTo(e+d,n+a),i.moveTo(e+f,n-r),i.lineTo(e-f,n+r),m+=st,d=Math.cos(m)*(s?s/2:p),r=Math.cos(m)*p,a=Math.sin(m)*p,f=Math.sin(m)*(s?s/2:p),i.moveTo(e-d,n-a),i.lineTo(e+d,n+a),i.moveTo(e+f,n-r),i.lineTo(e-f,n+r);break;case"line":r=s?s/2:Math.cos(m)*p,a=Math.sin(m)*p,i.moveTo(e-r,n-a),i.lineTo(e+r,n+a);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(m)*(s?s/2:p),n+Math.sin(m)*p);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Ce(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function di(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function fi(i){i.restore()}function fa(i,t,e,n,s){if(!t)return i.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else s==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function ua(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function ga(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),W(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function pa(i,t,e,n,s){if(s.strikethrough||s.underline){const o=i.measureText(n),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(r,h),i.lineTo(a,h),i.stroke()}}function ma(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Te(i,t,e,n,s,o={}){const r=L(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(i.save(),i.font=s.string,ga(i,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&ma(i,o.backdrop),a&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),W(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(c,e,n,o.maxWidth)),i.fillText(c,e,n,o.maxWidth),pa(i,e,n,c,o),n+=Number(s.lineHeight);i.restore()}function ri(i,t){const{x:e,y:n,w:s,h:o,radius:r}=t;i.arc(e+r.topLeft,n+r.topLeft,r.topLeft,1.5*R,R,!0),i.lineTo(e,n+o-r.bottomLeft),i.arc(e+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,R,X,!0),i.lineTo(e+s-r.bottomRight,n+o),i.arc(e+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,X,0,!0),i.lineTo(e+s,n+r.topRight),i.arc(e+s-r.topRight,n+r.topRight,r.topRight,0,-X,!0),i.lineTo(e+r.topLeft,n)}const ba=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ya=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function xa(i,t){const e=(""+i).match(ba);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const _a=i=>+i||0;function co(i,t){const e={},n=A(t),s=n?Object.keys(t):t,o=A(i)?n?r=>D(i[r],i[t[r]]):r=>i[r]:()=>i;for(const r of s)e[r]=_a(o(r));return e}function wa(i){return co(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Ht(i){return co(i,["topLeft","topRight","bottomLeft","bottomRight"])}function U(i){const t=wa(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function H(i,t){i=i||{},t=t||B.font;let e=D(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=D(i.style,t.style);n&&!(""+n).match(ya)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:D(i.family,t.family),lineHeight:xa(D(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:D(i.weight,t.weight),string:""};return s.string=da(s),s}function Fe(i,t,e,n){let s,o,r;for(s=0,o=i.length;s<o;++s)if(r=i[s],r!==void 0&&r!==void 0)return r}function va(i,t,e){const{min:n,max:s}=i,o=to(t,(s-n)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Et(i,t){return Object.assign(Object.create(i),t)}function rn(i,t=[""],e,n,s=()=>i[0]){const o=e||i;typeof n>"u"&&(n=go("_fallback",i));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:n,_getTarget:s,override:a=>rn([a,...i],t,o,n)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return fo(a,l,()=>Aa(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return En(a).includes(l)},ownKeys(a){return En(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Jt(i,t,e,n){const s={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:ho(i,n),setContext:o=>Jt(i,o,e,n),override:o=>Jt(i.override(o),t,e,n)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete i[r],!0},get(o,r,a){return fo(o,r,()=>ka(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(i,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,r)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,r){return Reflect.has(i,r)},ownKeys(){return Reflect.ownKeys(i)},set(o,r,a){return i[r]=a,delete o[r],!0}})}function ho(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:s=t.allKeys}=i;return{allKeys:s,scriptable:e,indexable:n,isScriptable:Q(e)?e:()=>e,isIndexable:Q(n)?n:()=>n}}const Sa=(i,t)=>i?i+Qi(t):t,an=(i,t)=>A(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function fo(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const n=e();return i[t]=n,n}function ka(i,t,e){const{_proxy:n,_context:s,_subProxy:o,_descriptors:r}=i;let a=n[t];return Q(a)&&r.isScriptable(t)&&(a=Ma(t,a,i,e)),L(a)&&a.length&&(a=Ca(t,a,i,r.isIndexable)),an(t,a)&&(a=Jt(a,s,o&&o[t],r)),a}function Ma(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(o,r||n);return a.delete(i),an(i,l)&&(l=ln(s._scopes,s,i,l)),l}function Ca(i,t,e,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=e;if(typeof o.index<"u"&&n(i))return t[o.index%t.length];if(A(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=ln(c,s,i,h);t.push(Jt(d,o,r&&r[i],a))}}return t}function uo(i,t,e){return Q(i)?i(t,e):i}const Ta=(i,t)=>i===!0?t:typeof i=="string"?Me(t,i):void 0;function Pa(i,t,e,n,s){for(const o of t){const r=Ta(e,o);if(r){i.add(r);const a=uo(r._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(r===!1&&typeof n<"u"&&e!==n)return null}return!1}function ln(i,t,e,n){const s=t._rootScopes,o=uo(t._fallback,e,n),r=[...i,...s],a=new Set;a.add(n);let l=zn(a,r,e,o||e,n);return l===null||typeof o<"u"&&o!==e&&(l=zn(a,r,o,l,n),l===null)?!1:rn(Array.from(a),[""],s,o,()=>Da(t,e,n))}function zn(i,t,e,n,s){for(;e;)e=Pa(i,t,e,n,s);return e}function Da(i,t,e){const n=i._getTarget();t in n||(n[t]={});const s=n[t];return L(s)&&A(e)?e:s||{}}function Aa(i,t,e,n){let s;for(const o of t)if(s=go(Sa(o,i),e),typeof s<"u")return an(i,s)?ln(e,n,i,s):s}function go(i,t){for(const e of t){if(!e)continue;const n=e[i];if(typeof n<"u")return n}}function En(i){let t=i._keys;return t||(t=i._keys=Oa(i._scopes)),t}function Oa(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(n);return Array.from(t)}const Ra=Number.EPSILON||1e-14,Ut=(i,t)=>t<i.length&&!i[t].skip&&i[t],po=i=>i==="x"?"y":"x";function ja(i,t,e,n){const s=i.skip?t:i,o=t,r=e.skip?t:e,a=Xt(o,s),l=Xt(r,o);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=n*c,f=n*h;return{previous:{x:o.x-d*(r.x-s.x),y:o.y-d*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function Ia(i,t,e){const n=i.length;let s,o,r,a,l,c=Ut(i,0);for(let h=0;h<n-1;++h)if(l=c,c=Ut(i,h+1),!(!l||!c)){if(_e(t[h],0,Ra)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=s*r*t[h],e[h+1]=o*r*t[h])}}function za(i,t,e="x"){const n=po(e),s=i.length;let o,r,a,l=Ut(i,0);for(let c=0;c<s;++c){if(r=a,a=l,l=Ut(i,c+1),!a)continue;const h=a[e],d=a[n];r&&(o=(h-r[e])/3,a[`cp1${e}`]=h-o,a[`cp1${n}`]=d-o*t[c]),l&&(o=(l[e]-h)/3,a[`cp2${e}`]=h+o,a[`cp2${n}`]=d+o*t[c])}}function Ea(i,t="x"){const e=po(t),n=i.length,s=Array(n).fill(0),o=Array(n);let r,a,l,c=Ut(i,0);for(r=0;r<n;++r)if(a=l,l=c,c=Ut(i,r+1),!!l){if(c){const h=c[t]-l[t];s[r]=h!==0?(c[e]-l[e])/h:0}o[r]=a?c?$t(s[r-1])!==$t(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}Ia(i,s,o),za(i,o,t)}function Ne(i,t,e){return Math.max(Math.min(i,e),t)}function Wa(i,t){let e,n,s,o,r,a=Ce(i[0],t);for(e=0,n=i.length;e<n;++e)r=o,o=a,a=e<n-1&&Ce(i[e+1],t),o&&(s=i[e],r&&(s.cp1x=Ne(s.cp1x,t.left,t.right),s.cp1y=Ne(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=Ne(s.cp2x,t.left,t.right),s.cp2y=Ne(s.cp2y,t.top,t.bottom)))}function La(i,t,e,n,s){let o,r,a,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Ea(i,s);else{let c=n?i[i.length-1]:i[0];for(o=0,r=i.length;o<r;++o)a=i[o],l=ja(c,a,i[Math.min(o+1,r-(n?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&Wa(i,e)}function cn(){return typeof window<"u"&&typeof document<"u"}function hn(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function ai(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}const ui=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Ba(i,t){return ui(i).getPropertyValue(t)}const Fa=["top","right","bottom","left"];function Ot(i,t,e){const n={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=Fa[s];n[o]=parseFloat(i[t+"-"+o+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const Na=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Ha(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:s,offsetY:o}=n;let r=!1,a,l;if(Na(s,o,i.target))a=s,l=o;else{const c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function Tt(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,s=ui(e),o=s.boxSizing==="border-box",r=Ot(s,"padding"),a=Ot(s,"border","width"),{x:l,y:c,box:h}=Ha(i,e),d=r.left+(h&&a.left),f=r.top+(h&&a.top);let{width:u,height:g}=t;return o&&(u-=r.width+a.width,g-=r.height+a.height),{x:Math.round((l-d)/u*e.width/n),y:Math.round((c-f)/g*e.height/n)}}function Va(i,t,e){let n,s;if(t===void 0||e===void 0){const o=i&&hn(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const r=o.getBoundingClientRect(),a=ui(o),l=Ot(a,"border","width"),c=Ot(a,"padding");t=r.width-c.width-l.width,e=r.height-c.height-l.height,n=ai(a.maxWidth,o,"clientWidth"),s=ai(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:n||ni,maxHeight:s||ni}}const He=i=>Math.round(i*10)/10;function Ya(i,t,e,n){const s=ui(i),o=Ot(s,"margin"),r=ai(s.maxWidth,i,"clientWidth")||ni,a=ai(s.maxHeight,i,"clientHeight")||ni,l=Va(i,t,e);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=Ot(s,"border","width"),u=Ot(s,"padding");c-=u.width+f.width,h-=u.height+f.height}return c=Math.max(0,c-o.width),h=Math.max(0,n?c/n:h-o.height),c=He(Math.min(c,r,l.maxWidth)),h=He(Math.min(h,a,l.maxHeight)),c&&!h&&(h=He(c/2)),(t!==void 0||e!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=He(Math.floor(h*n))),{width:c,height:h}}function Wn(i,t,e){const n=t||1,s=Math.floor(i.height*n),o=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const r=i.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${i.height}px`,r.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||r.height!==s||r.width!==o?(i.currentDevicePixelRatio=n,r.height=s,r.width=o,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const $a=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};cn()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function Ln(i,t){const e=Ba(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Pt(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Xa(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Ja(i,t,e,n){const s={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},r=Pt(i,s,e),a=Pt(s,o,e),l=Pt(o,t,e),c=Pt(r,a,e),h=Pt(a,l,e);return Pt(c,h,e)}const Ua=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},qa=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function Vt(i,t,e){return i?Ua(t,e):qa()}function mo(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function bo(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function yo(i){return i==="angle"?{between:oi,compare:Xr,normalize:bt}:{between:ue,compare:(t,e)=>t-e,normalize:t=>t}}function Bn({start:i,end:t,count:e,loop:n,style:s}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:s}}function Ka(i,t,e){const{property:n,start:s,end:o}=e,{between:r,normalize:a}=yo(n),l=t.length;let{start:c,end:h,loop:d}=i,f,u;if(d){for(c+=l,h+=l,f=0,u=l;f<u&&r(a(t[c%l][n]),s,o);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:i.style}}function Ga(i,t,e){if(!e)return[i];const{property:n,start:s,end:o}=e,r=t.length,{compare:a,between:l,normalize:c}=yo(n),{start:h,end:d,loop:f,style:u}=Ka(i,t,e),g=[];let p=!1,m=null,y,x,v;const S=()=>l(s,v,y)&&a(s,v)!==0,_=()=>a(o,y)===0||l(o,v,y),k=()=>p||S(),C=()=>!p||_();for(let M=h,P=h;M<=d;++M)x=t[M%r],!x.skip&&(y=c(x[n]),y!==v&&(p=l(y,s,o),m===null&&k()&&(m=a(y,s)===0?M:P),m!==null&&C()&&(g.push(Bn({start:m,end:M,loop:f,count:r,style:u})),m=null),P=M,v=y));return m!==null&&g.push(Bn({start:m,end:d,loop:f,count:r,style:u})),g}function Za(i,t){const e=[],n=i.segments;for(let s=0;s<n.length;s++){const o=Ga(n[s],i.points,t);o.length&&e.push(...o)}return e}function Qa(i,t,e,n){let s=0,o=t-1;if(e&&!n)for(;s<t&&!i[s].skip;)s++;for(;s<t&&i[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&i[o%t].skip;)o--;return o%=t,{start:s,end:o}}function tl(i,t,e,n){const s=i.length,o=[];let r=t,a=i[t],l;for(l=t+1;l<=e;++l){const c=i[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:t%s,end:(l-1)%s,loop:n}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:n}),o}function el(i,t){const e=i.points,n=i.options.spanGaps,s=e.length;if(!s)return[];const o=!!i._loop,{start:r,end:a}=Qa(e,s,o,n);if(n===!0)return Fn(i,[{start:r,end:a,loop:o}],e,t);const l=a<r?a+s:a,c=!!i._fullLoop&&r===0&&a===s-1;return Fn(i,tl(e,r,l,c),e,t)}function Fn(i,t,e,n){return!n||!n.setContext||!e?t:il(i,t,e,n)}function il(i,t,e,n){const s=i._chart.getContext(),o=Nn(i.options),{_datasetIndex:r,options:{spanGaps:a}}=i,l=e.length,c=[];let h=o,d=t[0].start,f=d;function u(g,p,m,y){const x=a?-1:1;if(g!==p){for(g+=l;e[g%l].skip;)g-=x;for(;e[p%l].skip;)p+=x;g%l!==p%l&&(c.push({start:g%l,end:p%l,loop:m,style:y}),h=y,d=p%l)}}for(const g of t){d=a?d:g.start;let p=e[d%l],m;for(f=d+1;f<=g.end;f++){const y=e[f%l];m=Nn(n.setContext(Et(s,{type:"segment",p0:p,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),nl(m,h)&&u(d,f-1,g.loop,h),p=y,h=m}d<f-1&&u(d,f-1,g.loop,h)}return c}function Nn(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function nl(i,t){if(!t)return!1;const e=[],n=function(s,o){return sn(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function Ve(i,t,e){return i.options.clip?i[e]:t[e]}function sl(i,t){const{xScale:e,yScale:n}=i;return e&&n?{left:Ve(e,t,"left"),right:Ve(e,t,"right"),top:Ve(n,t,"top"),bottom:Ve(n,t,"bottom")}:t}function ol(i,t){const e=t._clip;if(e.disabled)return!1;const n=sl(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class rl{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,s){const o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=oo.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const o=n.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,t,"progress")),o.length||(n.running=!1,this._notify(s,n,t,"complete"),n.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ft=new rl;const Hn="transparent",al={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const n=On(i||Hn),s=n.valid&&On(t||Hn);return s&&s.valid?s.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class ll{constructor(t,e,n,s){const o=e[n];s=Fe([t.to,s,o,t.from]);const r=Fe([t.from,o,s]);this._active=!0,this._fn=t.fn||al[t.type||typeof r],this._easing=we[t.easing]||we.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Fe([t.to,e,s,t.from]),this._from=Fe([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||e<n),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}}class dn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!A(t))return;const e=Object.keys(B.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!A(o))return;const r={};for(const a of e)r[a]=o[a];(L(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(t,e){const n=e.options,s=hl(t,n);if(!s)return[];const o=this._createAnimations(s,n);return n.$shared&&cl(t.options.$animations,n).then(()=>{t.options=n},()=>{}),o}_createAnimations(t,e){const n=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[c];let d=o[c];const f=n.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}o[c]=d=new ll(f,t,c,h),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const n=this._createAnimations(t,e);if(n.length)return ft.add(this._chart,n),!0}}function cl(i,t){const e=[],n=Object.keys(t);for(let s=0;s<n.length;s++){const o=i[n[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function hl(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Vn(i,t){const e=i&&i.options||{},n=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:n?o:s,end:n?s:o}}function dl(i,t,e){if(e===!1)return!1;const n=Vn(i,e),s=Vn(t,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function fl(i){let t,e,n,s;return A(i)?(t=i.top,e=i.right,n=i.bottom,s=i.left):t=e=n=s=i,{top:t,right:e,bottom:n,left:s,disabled:i===!1}}function xo(i,t){const e=[],n=i._getSortedDatasetMetas(t);let s,o;for(s=0,o=n.length;s<o;++s)e.push(n[s].index);return e}function Yn(i,t,e,n={}){const s=i.keys,o=n.mode==="single";let r,a,l,c;if(t===null)return;let h=!1;for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(h=!0,n.all)continue;break}c=i.values[l],tt(c)&&(o||t===0||$t(t)===$t(c))&&(t+=c)}return!h&&!n.all?0:t}function ul(i,t){const{iScale:e,vScale:n}=t,s=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(i),a=new Array(r.length);let l,c,h;for(l=0,c=r.length;l<c;++l)h=r[l],a[l]={[s]:h,[o]:i[h]};return a}function Ci(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function gl(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function pl(i){const{min:t,max:e,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function ml(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function $n(i,t,e,n){for(const s of t.getMatchingVisibleMetas(n).reverse()){const o=i[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function Xn(i,t){const{chart:e,_cachedMeta:n}=i,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,h=gl(o,r,n),d=t.length;let f;for(let u=0;u<d;++u){const g=t[u],{[l]:p,[c]:m}=g,y=g._stacks||(g._stacks={});f=y[c]=ml(s,h,p),f[a]=m,f._top=$n(f,r,!0,n.type),f._bottom=$n(f,r,!1,n.type);const x=f._visualValues||(f._visualValues={});x[a]=m}}function Ti(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function bl(i,t){return Et(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function yl(i,t,e){return Et(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function oe(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const s of t){const o=s._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}const Pi=i=>i==="reset"||i==="none",Jn=(i,t)=>t?i:Object.assign({},i),xl=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:xo(e,!0),values:null};class Yt{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ci(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&oe(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),s=(d,f,u,g)=>d==="x"?f:d==="r"?g:u,o=e.xAxisID=D(n.xAxisID,Ti(t,"x")),r=e.yAxisID=D(n.yAxisID,Ti(t,"y")),a=e.rAxisID=D(n.rAxisID,Ti(t,"r")),l=e.indexAxis,c=e.iAxisID=s(l,o,r,a),h=e.vAxisID=s(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Pn(this._data,this),t._stacked&&oe(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(A(e)){const s=this._cachedMeta;this._data=ul(e,s)}else if(n!==e){if(n){Pn(n,this);const s=this._cachedMeta;oe(s),s._parsed=[]}e&&Object.isExtensible(e)&&Kr(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=Ci(e.vScale,e),e.stack!==n.stack&&(s=!0,oe(e),e.stack=n.stack),this._resyncElements(t),(s||o!==e._stacked)&&(Xn(this,e._parsed),e._stacked=Ci(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:s}=this,{iScale:o,_stacked:r}=n,a=o.axis;let l=t===0&&e===s.length?!0:n._sorted,c=t>0&&n._parsed[t-1],h,d,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{L(s[t])?f=this.parseArrayData(n,s,t,e):A(s[t])?f=this.parseObjectData(n,s,t,e):f=this.parsePrimitiveData(n,s,t,e);const u=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<e;++h)n._parsed[h+t]=d=f[h],l&&(u()&&(l=!1),c=d);n._sorted=l}r&&Xn(this,f)}parsePrimitiveData(t,e,n,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),h=o===r,d=new Array(s);let f,u,g;for(f=0,u=s;f<u;++f)g=f+n,d[f]={[a]:h||o.parse(c[g],g),[l]:r.parse(e[g],g)};return d}parseArrayData(t,e,n,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+n,d=e[h],a[l]={x:o.parse(d[0],h),y:r.parse(d[1],h)};return a}parseObjectData(t,e,n,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,u;for(h=0,d=s;h<d;++h)f=h+n,u=e[f],c[h]={x:o.parse(Me(u,a),f),y:r.parse(Me(u,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const s=this.chart,o=this._cachedMeta,r=e[t.axis],a={keys:xo(s,!0),values:e._stacks[t.axis]._visualValues};return Yn(a,r,o.index,{mode:n})}updateRangeFromParsed(t,e,n,s){const o=n[e.axis];let r=o===null?NaN:o;const a=s&&n._stacks[e.axis];s&&a&&(s.values=a,r=Yn(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const n=this._cachedMeta,s=n._parsed,o=n._sorted&&t===n.iScale,r=s.length,a=this._getOtherScale(t),l=xl(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=pl(a);let f,u;function g(){u=s[f];const p=u[a.axis];return!tt(u[t.axis])||h>p||d<p}for(f=0;f<r&&!(!g()&&(this.updateRangeFromParsed(c,t,u,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(c,t,u,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let s,o,r;for(s=0,o=e.length;s<o;++s)r=e[s][t.axis],tt(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=fl(D(this.options.clip,dl(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,s=n.data||[],o=e.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,e){const n=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=yl(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=bl(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=n,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const s=e==="active",o=this._cachedDataOpts,r=t+"-"+e,a=o[r],l=this.enableOptionSharing&&et(n);if(a)return Jn(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),u=Object.keys(B.elements[t]),g=()=>this.getContext(n,s,e),p=c.resolveNamedOptions(f,u,g,d);return p.$shared&&(p.$shared=l,o[r]=Object.freeze(Jn(p,l))),p}_resolveAnimations(t,e,n){const s=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,n,e))}const c=new dn(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Pi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(n),r=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,n),{sharedOptions:o,includeOptions:r}}updateElement(t,e,n,s){Pi(s)?Object.assign(t,n):this._resolveAnimations(e,s).update(t,n)}updateSharedOptions(t,e,n){t&&!Pi(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,n,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=n.length,o=e.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,n=!0){const s=this._cachedMeta,o=s.data,r=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=r;a--)c[a]=c[a-e]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),n&&this.updateElements(o,t,e,"reset")}updateElements(t,e,n,s){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(t,e);n._stacked&&oe(n,s)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,s]=t;this[e](n,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}T(Yt,"defaults",{}),T(Yt,"datasetElementType",null),T(Yt,"dataElementType",null);function _l(i,t,e){let n=1,s=1,o=0,r=0;if(t<$){const a=i,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),u=(v,S,_)=>oi(v,a,l,!0)?1:Math.max(S,S*e,_,_*e),g=(v,S,_)=>oi(v,a,l,!0)?-1:Math.min(S,S*e,_,_*e),p=u(0,c,d),m=u(X,h,f),y=g(R,c,d),x=g(R+X,h,f);n=(p-y)/2,s=(m-x)/2,o=-(p+y)/2,r=-(m+x)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}class ge extends Yt{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let o=l=>+n[l];if(A(n[t])){const{key:l="value"}=this._parsing;o=c=>+Me(n[c],l)}let r,a;for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return V(this.options.rotation-90)}_getCircumference(){return V(this.options.circumference)}_getRotationExtents(){let t=$,e=-$;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(zr(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:u,offsetX:g,offsetY:p}=_l(d,h,l),m=(n.width-r)/f,y=(n.height-r)/u,x=Math.max(Math.min(m,y)/2,0),v=to(this.options.radius,x),S=Math.max(v*l,0),_=(v-S)/this._getVisibleDatasetWeightTotal();this.offsetX=g*v,this.offsetY=p*v,s.total=this.calculateTotal(),this.outerRadius=v-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const n=this.options,s=this._cachedMeta,o=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/$)}updateElements(t,e,n,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=o&&c.animateScale,u=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,s);let y=this._getRotation(),x;for(x=0;x<e;++x)y+=this._circumference(x,o);for(x=e;x<e+n;++x){const v=this._circumference(x,o),S=t[x],_={x:h+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+v,circumference:v,outerRadius:g,innerRadius:u};m&&(_.options=p||this.resolveDataElementOptions(x,S.active?"active":s)),y+=v,this.updateElement(S,x,_,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n=0,s;for(s=0;s<e.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?$*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,s=n.data.labels||[],o=on(e._parsed[t],n.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const n=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=n.data.datasets.length;s<o;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,s=t.length;n<s;++n){const o=this.resolveDataElementOptions(n);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(D(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}T(ge,"id","doughnut"),T(ge,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),T(ge,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),T(ge,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:s}}=t.legend.options;return e.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}});class Ke extends Yt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:s=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:l}=ta(e,s,r);this._drawStart=a,this._drawCount=l,ea(e)&&(a=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,e,n,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,s),f=r.axis,u=a.axis,{spanGaps:g,segment:p}=this.options,m=jt(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",x=e+n,v=t.length;let S=e>0&&this.getParsed(e-1);for(let _=0;_<v;++_){const k=t[_],C=y?k:{};if(_<e||_>=x){C.skip=!0;continue}const M=this.getParsed(_),P=W(M[u]),j=C[f]=r.getPixelForValue(M[f],_),O=C[u]=o||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,M,l):M[u],_);C.skip=isNaN(j)||isNaN(O)||P,C.stop=_>0&&Math.abs(M[f]-S[f])>m,p&&(C.parsed=M,C.raw=c.data[_]),d&&(C.options=h||this.resolveDataElementOptions(_,k.active?"active":s)),y||this.updateElement(k,_,C,s),S=M}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return n;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}T(Ke,"id","line"),T(Ke,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),T(Ke,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ct(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class fn{constructor(t){T(this,"options");this.options=t||{}}static override(t){Object.assign(fn.prototype,t)}init(){}formats(){return Ct()}parse(){return Ct()}format(){return Ct()}add(){return Ct()}diff(){return Ct()}startOf(){return Ct()}endOf(){return Ct()}}var wl={_date:fn};function vl(i,t,e,n){const{controller:s,data:o,_sorted:r}=i,a=s._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const c=a._reversePixels?Ur:Dt;if(n){if(s._sharedOptions){const h=o[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const f=c(o,t,e-d),u=c(o,t,e+d);return{lo:f.lo,hi:u.hi}}}}else{const h=c(o,t,e);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=i,u=f.slice(0,h.lo+1).reverse().findIndex(p=>!W(p[d.axis]));h.lo-=Math.max(0,u);const g=f.slice(h.hi).findIndex(p=>!W(p[d.axis]));h.hi+=Math.max(0,g)}return h}}return{lo:0,hi:o.length-1}}function gi(i,t,e,n,s){const o=i.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:h}=o[a],{lo:d,hi:f}=vl(o[a],t,r,s);for(let u=d;u<=f;++u){const g=h[u];g.skip||n(g,c,u)}}}function Sl(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,s){const o=t?Math.abs(n.x-s.x):0,r=e?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Di(i,t,e,n,s){const o=[];return!s&&!i.isPointInArea(t)||gi(i,e,t,function(a,l,c){!s&&!Ce(a,i.chartArea,0)||a.inRange(t.x,t.y,n)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function kl(i,t,e,n){let s=[];function o(r,a,l){const{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],n),{angle:d}=Ii(r,{x:t.x,y:t.y});oi(d,c,h)&&s.push({element:r,datasetIndex:a,index:l})}return gi(i,e,t,o),s}function Ml(i,t,e,n,s,o){let r=[];const a=Sl(e);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const u=h.inRange(t.x,t.y,s);if(n&&!u)return;const g=h.getCenterPoint(s);if(!(!!o||i.isPointInArea(g))&&!u)return;const m=a(t,g);m<l?(r=[{element:h,datasetIndex:d,index:f}],l=m):m===l&&r.push({element:h,datasetIndex:d,index:f})}return gi(i,e,t,c),r}function Ai(i,t,e,n,s,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!n?kl(i,t,e,s):Ml(i,t,e,n,s,o)}function Un(i,t,e,n,s){const o=[],r=e==="x"?"inXRange":"inYRange";let a=!1;return gi(i,e,t,(l,c,h)=>{l[r]&&l[r](t[e],s)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),n&&!a?[]:o}var Cl={modes:{index(i,t,e,n){const s=Tt(t,i),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?Di(i,s,o,n,r):Ai(i,s,o,!1,n,r),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(i,t,e,n){const s=Tt(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?Di(i,s,o,n,r):Ai(i,s,o,!1,n,r);if(a.length>0){const l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(i,t,e,n){const s=Tt(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return Di(i,s,o,n,r)},nearest(i,t,e,n){const s=Tt(t,i),o=e.axis||"xy",r=e.includeInvisible||!1;return Ai(i,s,o,e.intersect,n,r)},x(i,t,e,n){const s=Tt(t,i);return Un(i,s,"x",e.intersect,n)},y(i,t,e,n){const s=Tt(t,i);return Un(i,s,"y",e.intersect,n)}}};const _o=["left","top","right","bottom"];function re(i,t){return i.filter(e=>e.pos===t)}function qn(i,t){return i.filter(e=>_o.indexOf(e.pos)===-1&&e.box.axis===t)}function ae(i,t){return i.sort((e,n)=>{const s=t?n:e,o=t?e:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Tl(i){const t=[];let e,n,s,o,r,a;for(e=0,n=(i||[]).length;e<n;++e)s=i[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function Pl(i){const t={};for(const e of i){const{stack:n,pos:s,stackWeight:o}=e;if(!n||!_o.includes(s))continue;const r=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function Dl(i,t){const e=Pl(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=i.length;o<r;++o){a=i[o];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*n:l&&t.availableWidth,a.height=s):(a.width=n,a.height=h?h*s:l&&t.availableHeight)}return e}function Al(i){const t=Tl(i),e=ae(t.filter(c=>c.box.fullSize),!0),n=ae(re(t,"left"),!0),s=ae(re(t,"right")),o=ae(re(t,"top"),!0),r=ae(re(t,"bottom")),a=qn(t,"x"),l=qn(t,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:re(t,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Kn(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function wo(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Ol(i,t,e,n){const{pos:s,box:o}=e,r=i.maxPadding;if(!A(s)){e.size&&(i[s]-=e.size);const d=n[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?o.height:o.width),e.size=d.size/d.count,i[s]+=e.size}o.getPadding&&wo(r,o.getPadding());const a=Math.max(0,t.outerWidth-Kn(r,i,"left","right")),l=Math.max(0,t.outerHeight-Kn(r,i,"top","bottom")),c=a!==i.w,h=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function Rl(i){const t=i.maxPadding;function e(n){const s=Math.max(t[n]-i[n],0);return i[n]+=s,s}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function jl(i,t){const e=t.maxPadding;function n(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return n(i?["left","right"]:["top","bottom"])}function pe(i,t,e,n){const s=[];let o,r,a,l,c,h;for(o=0,r=i.length,c=0;o<r;++o){a=i[o],l=a.box,l.update(a.width||t.w,a.height||t.h,jl(a.horizontal,t));const{same:d,other:f}=Ol(t,e,a,n);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&pe(s,t,e,n)||h}function Ye(i,t,e,n,s){i.top=e,i.left=t,i.right=t+n,i.bottom=e+s,i.width=n,i.height=s}function Gn(i,t,e,n){const s=e.padding;let{x:o,y:r}=t;for(const a of i){const l=a.box,c=n[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;et(c.start)&&(r=c.start),l.fullSize?Ye(l,s.left,r,e.outerWidth-s.right-s.left,f):Ye(l,t.left+c.placed,r,d,f),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*h,f=c.size||l.width;et(c.start)&&(o=c.start),l.fullSize?Ye(l,o,s.top,f,e.outerHeight-s.bottom-s.top):Ye(l,o,t.top+c.placed,f,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}var rt={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const s=U(i.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(e-s.height,0),a=Al(i.boxes),l=a.vertical,c=a.horizontal;z(i.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=l.reduce((p,m)=>m.box.options&&m.box.options.display===!1?p:p+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),f=Object.assign({},s);wo(f,U(n));const u=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),g=Dl(l.concat(c),d);pe(a.fullSize,u,d,g),pe(l,u,d,g),pe(c,u,d,g)&&pe(l,u,d,g),Rl(u),Gn(a.leftAndTop,u,d,g),u.x+=u.w,u.y+=u.h,Gn(a.rightAndBottom,u,d,g),i.chartArea={left:u.left,top:u.top,right:u.left+u.w,bottom:u.top+u.h,height:u.h,width:u.w},z(a.chartArea,p=>{const m=p.box;Object.assign(m,i.chartArea),m.update(u.w,u.h,{left:0,top:0,right:0,bottom:0})})}};class vo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,s){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):n)}}isAttached(t){return!0}updateConfig(t){}}class Il extends vo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ge="$chartjs",zl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zn=i=>i===null||i==="";function El(i,t){const e=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[Ge]={initial:{height:n,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Zn(s)){const o=Ln(i,"width");o!==void 0&&(i.width=o)}if(Zn(n))if(i.style.height==="")i.height=i.width/(t||2);else{const o=Ln(i,"height");o!==void 0&&(i.height=o)}return i}const So=$a?{passive:!0}:!1;function Wl(i,t,e){i&&i.addEventListener(t,e,So)}function Ll(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,So)}function Bl(i,t){const e=zl[i.type]||i.type,{x:n,y:s}=Tt(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function li(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function Fl(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||li(a.addedNodes,n),r=r&&!li(a.removedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Nl(i,t,e){const n=i.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||li(a.removedNodes,n),r=r&&!li(a.addedNodes,n);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const Pe=new Map;let Qn=0;function ko(){const i=window.devicePixelRatio;i!==Qn&&(Qn=i,Pe.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Hl(i,t){Pe.size||window.addEventListener("resize",ko),Pe.set(i,t)}function Vl(i){Pe.delete(i),Pe.size||window.removeEventListener("resize",ko)}function Yl(i,t,e){const n=i.canvas,s=n&&hn(n);if(!s)return;const o=ro((a,l)=>{const c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(s),Hl(i,o),r}function Oi(i,t,e){e&&e.disconnect(),t==="resize"&&Vl(i)}function $l(i,t,e){const n=i.canvas,s=ro(o=>{i.ctx!==null&&e(Bl(o,i))},i);return Wl(n,t,s),s}class Xl extends vo{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(El(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Ge])return!1;const n=e[Ge].initial;["height","width"].forEach(o=>{const r=n[o];W(r)?e.removeAttribute(o):e.setAttribute(o,r)});const s=n.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Ge],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),r={attach:Fl,detach:Nl,resize:Yl}[e]||$l;s[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),s=n[e];if(!s)return;({attach:Oi,detach:Oi,resize:Oi}[e]||Ll)(t,e,s),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,s){return Ya(t,e,n,s)}isAttached(t){const e=t&&hn(t);return!!(e&&e.isConnected)}}function Jl(i){return!cn()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Il:Xl}class q{constructor(){T(this,"x");T(this,"y");T(this,"active",!1);T(this,"options");T(this,"$animations")}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return jt(this.x)&&jt(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const s={};return t.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}}T(q,"defaults",{}),T(q,"defaultRoutes");function Ul(i,t){const e=i.options.ticks,n=ql(i),s=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?Gl(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return Zl(t,c,o,r/s),c;const h=Kl(o,t,s);if(r>0){let d,f;const u=r>1?Math.round((l-a)/(r-1)):null;for($e(t,c,h,W(u)?0:a-u,a),d=0,f=r-1;d<f;d++)$e(t,c,h,o[d],o[d+1]);return $e(t,c,h,l,W(u)?t.length:l+u),c}return $e(t,c,h),c}function ql(i){const t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),s=i._maxLength/e;return Math.floor(Math.min(n,s))}function Kl(i,t,e){const n=Ql(i),s=t.length/e;if(!n)return Math.max(s,1);const o=Hr(n);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function Gl(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function Zl(i,t,e,n){let s=0,o=e[0],r;for(n=Math.ceil(n),r=0;r<i.length;r++)r===o&&(t.push(i[r]),s++,o=e[s*n])}function $e(i,t,e,n,s){const o=D(n,0),r=Math.min(D(s,i.length),i.length);let a=0,l,c,h;for(e=Math.ceil(e),s&&(l=s-n,e=l/Math.floor(l/e)),h=o;h<0;)a++,h=Math.round(o+a*e);for(c=Math.max(o,0);c<r;c++)c===h&&(t.push(i[c]),a++,h=Math.round(o+a*e))}function Ql(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}const tc=i=>i==="left"?"right":i==="right"?"left":i,ts=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,es=(i,t)=>Math.min(t||i,i);function is(i,t){const e=[],n=i.length/t,s=i.length;let o=0;for(;o<s;o+=n)e.push(i[Math.floor(o)]);return e}function ec(i,t,e){const n=i.ticks.length,s=Math.min(t,n-1),o=i._startPixel,r=i._endPixel,a=1e-6;let l=i.getPixelForTick(s),c;if(!(e&&(n===1?c=Math.max(l-o,r-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function ic(i,t){z(i,e=>{const n=e.gc,s=n.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[n[o]];n.splice(0,s)}})}function le(i){return i.drawTicks?i.tickLength:0}function ns(i,t){if(!i.display)return 0;const e=H(i.font,t),n=U(i.padding);return(L(i.text)?i.text.length:1)*e.lineHeight+n.height}function nc(i,t){return Et(i,{scale:t,type:"scale"})}function sc(i,t,e){return Et(i,{tick:e,index:t,type:"tick"})}function oc(i,t,e){let n=nn(i);return(e&&t!=="right"||!e&&t==="right")&&(n=tc(n)),n}function rc(i,t,e,n){const{top:s,left:o,bottom:r,right:a,chart:l}=i,{chartArea:c,scales:h}=l;let d=0,f,u,g;const p=r-s,m=a-o;if(i.isHorizontal()){if(u=J(n,o,a),A(e)){const y=Object.keys(e)[0],x=e[y];g=h[y].getPixelForValue(x)+p-t}else e==="center"?g=(c.bottom+c.top)/2+p-t:g=ts(i,e,t);f=a-o}else{if(A(e)){const y=Object.keys(e)[0],x=e[y];u=h[y].getPixelForValue(x)-m+t}else e==="center"?u=(c.left+c.right)/2-m+t:u=ts(i,e,t);g=J(n,r,s),d=e==="left"?-X:X}return{titleX:u,titleY:g,maxWidth:f,rotation:d}}class Kt extends q{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return t=lt(t,Number.POSITIVE_INFINITY),e=lt(e,Number.NEGATIVE_INFINITY),n=lt(n,Number.POSITIVE_INFINITY),s=lt(s,Number.NEGATIVE_INFINITY),{min:lt(t,n),max:lt(e,s),minDefined:tt(t),maxDefined:tt(e)}}getMinMax(t){let{min:e,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:n};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,r.min)),o||(n=Math.max(n,r.max));return e=o&&e>n?n:e,n=s&&e>n?e:n,{min:lt(e,lt(n,e)),max:lt(n,lt(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){E(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=va(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?is(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Ul(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){E(this.options.afterUpdate,[this])}beforeSetDimensions(){E(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){E(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),E(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){E(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n],o.label=E(e.callback,[o.value,n,t],this)}afterTickToLabelConversion(){E(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){E(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=es(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!e.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,u=ot(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/n:u/(n-1),d+6>a&&(a=u/(n-(t.offset?.5:1)),l=this.maxHeight-le(t.grid)-e.padding-ns(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),r=no(Math.min(Math.asin(ot((h.highest.height+6)/a,-1,1)),Math.asin(ot(l/c,-1,1))-Math.asin(ot(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){E(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){E(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=ns(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=le(o)+l):(t.height=this.maxHeight,t.width=le(o)+l),n.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),u=n.padding*2,g=V(this.labelRotation),p=Math.cos(g),m=Math.sin(g);if(a){const y=n.mirror?0:m*d.width+p*f.height;t.height=Math.min(this.maxHeight,t.height+y+u)}else{const y=n.mirror?0:p*d.width+m*f.height;t.width=Math.min(this.maxWidth,t.width+y+u)}this._calculatePadding(c,h,m,p)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,u=0;l?c?(f=s*t.width,u=n*e.height):(f=n*t.height,u=s*e.width):o==="start"?u=e.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,u=e.width/2),this.paddingLeft=Math.max((f-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((u-d+r)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;o==="start"?(h=0,d=t.height):o==="end"&&(h=e.height,d=0),this.paddingTop=h+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){E(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)W(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=is(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(e/es(e,n));let c=0,h=0,d,f,u,g,p,m,y,x,v,S,_;for(d=0;d<e;d+=l){if(g=t[d].label,p=this._resolveTickFontOptions(d),s.font=m=p.string,y=o[m]=o[m]||{data:{},gc:[]},x=p.lineHeight,v=S=0,!W(g)&&!L(g))v=jn(s,y.data,y.gc,v,g),S=x;else if(L(g))for(f=0,u=g.length;f<u;++f)_=g[f],!W(_)&&!L(_)&&(v=jn(s,y.data,y.gc,v,_),S+=x);r.push(v),a.push(S),c=Math.max(v,c),h=Math.max(S,h)}ic(o,e);const k=r.indexOf(c),C=a.indexOf(h),M=P=>({width:r[P]||0,height:a[P]||0});return{first:M(0),last:M(e-1),widest:M(k),highest:M(C),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Jr(this._alignToPixels?Mt(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=sc(this.getContext(),t,n))}return this.$context||(this.$context=nc(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=V(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=le(o),u=[],g=a.setContext(this.getContext()),p=g.display?g.width:0,m=p/2,y=function(Y){return Mt(n,Y,p)};let x,v,S,_,k,C,M,P,j,O,I,K;if(r==="top")x=y(this.bottom),C=this.bottom-f,P=x-m,O=y(t.top)+m,K=t.bottom;else if(r==="bottom")x=y(this.top),O=t.top,K=y(t.bottom)-m,C=x+m,P=this.top+f;else if(r==="left")x=y(this.right),k=this.right-f,M=x-m,j=y(t.left)+m,I=t.right;else if(r==="right")x=y(this.left),j=t.left,I=y(t.right)-m,k=x+m,M=this.left+f;else if(e==="x"){if(r==="center")x=y((t.top+t.bottom)/2+.5);else if(A(r)){const Y=Object.keys(r)[0],it=r[Y];x=y(this.chart.scales[Y].getPixelForValue(it))}O=t.top,K=t.bottom,C=x+m,P=C+f}else if(e==="y"){if(r==="center")x=y((t.left+t.right)/2);else if(A(r)){const Y=Object.keys(r)[0],it=r[Y];x=y(this.chart.scales[Y].getPixelForValue(it))}k=x-m,M=k-f,j=t.left,I=t.right}const at=D(s.ticks.maxTicksLimit,d),F=Math.max(1,Math.ceil(d/at));for(v=0;v<d;v+=F){const Y=this.getContext(v),it=o.setContext(Y),je=a.setContext(Y),Ie=it.lineWidth,Bt=it.color,ze=je.dash||[],Ft=je.dashOffset,te=it.tickWidth,St=it.tickColor,ee=it.tickBorderDash||[],kt=it.tickBorderDashOffset;S=ec(this,v,l),S!==void 0&&(_=Mt(n,S,Ie),c?k=M=j=I=_:C=P=O=K=_,u.push({tx1:k,ty1:C,tx2:M,ty2:P,x1:j,y1:O,x2:I,y2:K,width:Ie,color:Bt,borderDash:ze,borderDashOffset:Ft,tickWidth:te,tickColor:St,tickBorderDash:ee,tickBorderDashOffset:kt}))}return this._ticksLength=d,this._borderValue=x,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=o,f=le(n.grid),u=f+h,g=d?-h:u,p=-V(this.labelRotation),m=[];let y,x,v,S,_,k,C,M,P,j,O,I,K="middle";if(s==="top")k=this.bottom-g,C=this._getXAxisLabelAlignment();else if(s==="bottom")k=this.top+g,C=this._getXAxisLabelAlignment();else if(s==="left"){const F=this._getYAxisLabelAlignment(f);C=F.textAlign,_=F.x}else if(s==="right"){const F=this._getYAxisLabelAlignment(f);C=F.textAlign,_=F.x}else if(e==="x"){if(s==="center")k=(t.top+t.bottom)/2+u;else if(A(s)){const F=Object.keys(s)[0],Y=s[F];k=this.chart.scales[F].getPixelForValue(Y)+u}C=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")_=(t.left+t.right)/2-u;else if(A(s)){const F=Object.keys(s)[0],Y=s[F];_=this.chart.scales[F].getPixelForValue(Y)}C=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?K="top":l==="end"&&(K="bottom"));const at=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){v=a[y],S=v.label;const F=o.setContext(this.getContext(y));M=this.getPixelForTick(y)+o.labelOffset,P=this._resolveTickFontOptions(y),j=P.lineHeight,O=L(S)?S.length:1;const Y=O/2,it=F.color,je=F.textStrokeColor,Ie=F.textStrokeWidth;let Bt=C;r?(_=M,C==="inner"&&(y===x-1?Bt=this.options.reverse?"left":"right":y===0?Bt=this.options.reverse?"right":"left":Bt="center"),s==="top"?c==="near"||p!==0?I=-O*j+j/2:c==="center"?I=-at.highest.height/2-Y*j+j:I=-at.highest.height+j/2:c==="near"||p!==0?I=j/2:c==="center"?I=at.highest.height/2-Y*j:I=at.highest.height-O*j,d&&(I*=-1),p!==0&&!F.showLabelBackdrop&&(_+=j/2*Math.sin(p))):(k=M,I=(1-O)*j/2);let ze;if(F.showLabelBackdrop){const Ft=U(F.backdropPadding),te=at.heights[y],St=at.widths[y];let ee=I-Ft.top,kt=0-Ft.left;switch(K){case"middle":ee-=te/2;break;case"bottom":ee-=te;break}switch(C){case"center":kt-=St/2;break;case"right":kt-=St;break;case"inner":y===x-1?kt-=St:y>0&&(kt-=St/2);break}ze={left:kt,top:ee,width:St+Ft.width,height:te+Ft.height,color:F.backdropColor}}m.push({label:S,font:P,textOffset:I,options:{rotation:p,color:it,strokeColor:je,strokeWidth:Ie,textAlign:Bt,textBaseline:K,translation:[_,k],backdrop:ze}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-V(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,h;return e==="left"?s?(h=this.right+o,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?s?(h=this.left+o,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:s,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,s,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){const l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Mt(t,this.left,r)-r/2,h=Mt(t,this.right,a)+a/2,d=f=l):(d=Mt(t,this.top,r)-r/2,f=Mt(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,d),e.lineTo(h,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&di(n,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,h=r.textOffset;Te(n,c,0,h,l,a)}s&&fi(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;const o=H(n.font),r=U(n.padding),a=n.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||A(e)?(l+=r.bottom,L(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=rc(this,l,e,a);Te(t,n.text,0,0,o,{color:n.color,maxWidth:d,rotation:f,textAlign:oc(a,e,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=D(t.grid&&t.grid.z,-1),s=D(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Kt.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[n]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return H(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xe{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;cc(e)&&(n=this.register(e));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,ac(t,r,n),this.override&&B.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,s=this.scope;n in e&&delete e[n],s&&n in B[s]&&(delete B[s][n],this.override&&delete It[n])}}function ac(i,t,e){const n=ke(Object.create(null),[e?B.get(e):{},B.get(t),i.defaults]);B.set(t,n),i.defaultRoutes&&lc(t,i.defaultRoutes),i.descriptors&&B.describe(t,i.descriptors)}function lc(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),s=n.pop(),o=[i].concat(n).join("."),r=t[e].split("."),a=r.pop(),l=r.join(".");B.route(o,s,l,a)})}function cc(i){return"id"in i&&"defaults"in i}class hc{constructor(){this.controllers=new Xe(Yt,"datasets",!0),this.elements=new Xe(q,"elements"),this.plugins=new Xe(Object,"plugins"),this.scales=new Xe(Kt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(s=>{const o=n||this._getRegistryForType(s);n||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):z(s,r=>{const a=n||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,n){const s=Qi(t);E(n["before"+s],[],n),e[t](n),E(n["after"+s],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return s}}var ht=new hc;class dc{constructor(){this._init=[]}notify(t,e,n,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,e,n);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,n,s){s=s||{};for(const o of t){const r=o.plugin,a=r[n],l=[e,s,o.options];if(E(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){W(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,s=D(n.options&&n.options.plugins,{}),o=fc(n);return s===!1&&!e?[]:gc(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,n),t,"stop"),this._notify(s(n,e),t,"start")}}function fc(i){const t={},e=[],n=Object.keys(ht.plugins.items);for(let o=0;o<n.length;o++)e.push(ht.getPlugin(n[o]));const s=i.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function uc(i,t){return!t&&i===!1?null:i===!0?{}:i}function gc(i,{plugins:t,localIds:e},n,s){const o=[],r=i.getContext();for(const a of t){const l=a.id,c=uc(n[l],s);c!==null&&o.push({plugin:a,options:pc(i.config,{plugin:a,local:e[l]},c,r)})}return o}function pc(i,{plugin:t,local:e},n,s){const o=i.pluginScopeKeys(t),r=i.getOptionScopes(n,o);return e&&t.defaults&&r.push(t.defaults),i.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wi(i,t){const e=B.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function mc(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function bc(i,t){return i===t?"_index_":"_value_"}function ss(i){if(i==="x"||i==="y"||i==="r")return i}function yc(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function Li(i,...t){if(ss(i))return i;for(const e of t){const n=e.axis||yc(e.position)||i.length>1&&ss(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function os(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function xc(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return os(i,"x",e[0])||os(i,"y",e[0])}return{}}function _c(i,t){const e=It[i.type]||{scales:{}},n=t.scales||{},s=Wi(i.type,t),o=Object.create(null);return Object.keys(n).forEach(r=>{const a=n[r];if(!A(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Li(r,a,xc(r,i),B.scales[a.type]),c=bc(l,s),h=e.scales||{};o[r]=xe(Object.create(null),[{axis:l},a,h[l],h[c]])}),i.data.datasets.forEach(r=>{const a=r.type||i.type,l=r.indexAxis||Wi(a,t),h=(It[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=mc(d,l),u=r[f+"AxisID"]||f;o[u]=o[u]||Object.create(null),xe(o[u],[{axis:f},n[u],h[d]])})}),Object.keys(o).forEach(r=>{const a=o[r];xe(a,[B.scales[a.type],B.scale])}),o}function Mo(i){const t=i.options||(i.options={});t.plugins=D(t.plugins,{}),t.scales=_c(i,t)}function Co(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function wc(i){return i=i||{},i.data=Co(i.data),Mo(i),i}const rs=new Map,To=new Set;function Je(i,t){let e=rs.get(i);return e||(e=t(),rs.set(i,e),To.add(e)),e}const ce=(i,t,e)=>{const n=Me(t,e);n!==void 0&&i.add(n)};class vc{constructor(t){this._config=wc(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Co(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Mo(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Je(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Je(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Je(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,n=this.type;return Je(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let s=n.get(t);return(!s||e)&&(s=new Map,n.set(t,s)),s}getOptionScopes(t,e,n){const{options:s,type:o}=this,r=this._cachedScopes(t,n),a=r.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>ce(l,t,d))),h.forEach(d=>ce(l,s,d)),h.forEach(d=>ce(l,It[o]||{},d)),h.forEach(d=>ce(l,B,d)),h.forEach(d=>ce(l,zi,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),To.has(e)&&r.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,It[e]||{},B.datasets[e]||{},{type:e},B,zi]}resolveNamedOptions(t,e,n,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=as(this._resolverCache,t,s);let l=r;if(kc(r,e)){o.$shared=!1,n=Q(n)?n():n;const c=this.createResolver(t,n,a);l=Jt(r,n,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,n=[""],s){const{resolver:o}=as(this._resolverCache,t,n);return A(e)?Jt(o,e,void 0,s):o}}function as(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const s=e.join();let o=n.get(s);return o||(o={resolver:rn(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(s,o)),o}const Sc=i=>A(i)&&Object.getOwnPropertyNames(i).some(t=>Q(i[t]));function kc(i,t){const{isScriptable:e,isIndexable:n}=ho(i);for(const s of t){const o=e(s),r=n(s),a=(r||o)&&i[s];if(o&&(Q(a)||Sc(a))||r&&L(a))return!0}return!1}var Mc="4.5.0";const Cc=["top","bottom","left","right","chartArea"];function ls(i,t){return i==="top"||i==="bottom"||Cc.indexOf(i)===-1&&t==="x"}function cs(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function hs(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),E(e&&e.onComplete,[i],t)}function Tc(i){const t=i.chart,e=t.options.animation;E(e&&e.onProgress,[i],t)}function Po(i){return cn()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Ze={},ds=i=>{const t=Po(i);return Object.values(Ze).filter(e=>e.canvas===t).pop()};function Pc(i,t,e){const n=Object.keys(i);for(const s of n){const o=+s;if(o>=t){const r=i[s];delete i[s],(e>0||o>t)&&(i[o+e]=r)}}}function Dc(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var mt;let Rt=(mt=class{static register(...t){ht.add(...t),fs()}static unregister(...t){ht.remove(...t),fs()}constructor(t,e){const n=this.config=new vc(e),s=Po(t),o=ds(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Jl(s)),this.platform.updateConfig(n);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Ir(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Zr(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Ze[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ft.listen(this,"complete",hs),ft.listen(this,"progress",Tc),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:s,_aspectRatio:o}=this;return W(t)?e&&o?o:s?n/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ht}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return In(this.canvas,this.ctx),this}stop(){return ft.stop(this),this}resize(t,e){ft.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,s=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Wn(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),E(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};z(e,(n,s)=>{n.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,s=Object.keys(n).reduce((r,a)=>(r[a]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const a=e[r],l=Li(r,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),z(o,r=>{const a=r.options,l=a.id,c=Li(l,a),h=D(a.type,r.dtype);(a.position===void 0||ls(a.position,c)!==ls(r.dposition))&&(a.position=r.dposition),s[l]=!0;let d=null;if(l in n&&n[l].type===h)d=n[l];else{const f=ht.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(a,t)}),z(s,(r,a)=>{r||delete n[a]}),z(n,r=>{rt.configure(this,r,r.options),rt.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((s,o)=>s.index-o.index),n>e){for(let s=e;s<n;++s)this._destroyDatasetMeta(s);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(cs("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,s)=>{e.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=e.length;n<s;n++){const o=e[n];let r=this.getDatasetMeta(n);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Wi(a,this.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=ht.getController(a),{datasetElementType:c,dataElementType:h}=B.datasets[a];Object.assign(l,{dataElementType:ht.getElement(h),datasetElementType:c&&ht.getElement(c)}),r.controller=new l(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){z(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||z(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(cs("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){z(this.scales,t=>{rt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Mn(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:o}of e){const r=n==="_removeElements"?-o:o;Pc(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=n(0);for(let o=1;o<e;o++)if(!Mn(s,n(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rt.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],z(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,Q(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),s={meta:n,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ft.has(this)?this.attached&&!ft.running(this)&&ft.start(this):(this.draw(),hs({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let s,o;for(s=0,o=e.length;s<o;++s){const r=e[s];(!t||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},s=ol(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&di(e,s),t.controller.draw(),s&&fi(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Ce(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,s){const o=Cl.modes[e];return typeof o=="function"?o(this,t,n,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let s=n.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=Et(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!e.hidden}setDatasetVisibility(t,e){const n=this.getDatasetMeta(t);n.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const s=n?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);et(e)?(o.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),r.update(o,{visible:n}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ft.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),In(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ze[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};z(this.options.events,o=>n(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){z(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},z(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const s=n?"set":"remove";let o,r,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!ei(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,n){const s=this.options.hover,o=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),r=o(e,t),a=n?t:o(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const o=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(o||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:s=[],options:o}=this,r=e,a=this._getActiveElements(t,s,n,r),l=Fr(t),c=Dc(t,this._lastEvent,n,l);n&&(this._lastEvent=null,E(o.onHover,[t,a,this],this),l&&E(o.onClick,[t,a,this],this));const h=!ei(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,h}_getActiveElements(t,e,n,s){if(t.type==="mouseout")return[];if(!n)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},T(mt,"defaults",B),T(mt,"instances",Ze),T(mt,"overrides",It),T(mt,"registry",ht),T(mt,"version",Mc),T(mt,"getChart",ds),mt);function fs(){return z(Rt.instances,i=>i._plugins.invalidate())}function Do(i,t,e=t){i.lineCap=D(e.borderCapStyle,t.borderCapStyle),i.setLineDash(D(e.borderDash,t.borderDash)),i.lineDashOffset=D(e.borderDashOffset,t.borderDashOffset),i.lineJoin=D(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=D(e.borderWidth,t.borderWidth),i.strokeStyle=D(e.borderColor,t.borderColor)}function Ac(i,t,e){i.lineTo(e.x,e.y)}function Oc(i){return i.stepped?fa:i.tension||i.cubicInterpolationMode==="monotone"?ua:Ac}function Ao(i,t,e={}){const n=i.length,{start:s=0,end:o=n-1}=e,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!h?n+c-l:c-l}}function Rc(i,t,e,n){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=Ao(s,e,n),h=Oc(o);let{move:d=!0,reverse:f}=n||{},u,g,p;for(u=0;u<=c;++u)g=s[(a+(f?c-u:u))%r],!g.skip&&(d?(i.moveTo(g.x,g.y),d=!1):h(i,p,g,f,o.stepped),p=g);return l&&(g=s[(a+(f?c:0))%r],h(i,p,g,f,o.stepped)),!!l}function jc(i,t,e,n){const s=t.points,{count:o,start:r,ilen:a}=Ao(s,e,n),{move:l=!0,reverse:c}=n||{};let h=0,d=0,f,u,g,p,m,y;const x=S=>(r+(c?a-S:S))%o,v=()=>{p!==m&&(i.lineTo(h,m),i.lineTo(h,p),i.lineTo(h,y))};for(l&&(u=s[x(0)],i.moveTo(u.x,u.y)),f=0;f<=a;++f){if(u=s[x(f)],u.skip)continue;const S=u.x,_=u.y,k=S|0;k===g?(_<p?p=_:_>m&&(m=_),h=(d*h+S)/++d):(v(),i.lineTo(S,_),g=k,d=0,p=m=_),y=_}v()}function Bi(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?jc:Rc}function Ic(i){return i.stepped?Xa:i.tension||i.cubicInterpolationMode==="monotone"?Ja:Pt}function zc(i,t,e,n){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,n)&&s.closePath()),Do(i,t.options),i.stroke(s)}function Ec(i,t,e,n){const{segments:s,options:o}=t,r=Bi(t);for(const a of s)Do(i,o,a.style),i.beginPath(),r(i,t,a,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}const Wc=typeof Path2D=="function";function Lc(i,t,e,n){Wc&&!t.options.segment?zc(i,t,e,n):Ec(i,t,e,n)}class me extends q{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;La(this._points,n,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=el(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,s=t[e],o=this.points,r=Za(this,{property:e,start:s,end:s});if(!r.length)return;const a=[],l=Ic(n);let c,h;for(c=0,h=r.length;c<h;++c){const{start:d,end:f}=r[c],u=o[d],g=o[f];if(u===g){a.push(u);continue}const p=Math.abs((s-u[e])/(g[e]-u[e])),m=l(u,g,p,n.stepped);m[e]=t[e],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,e,n){return Bi(this)(t,this,e,n)}path(t,e,n){const s=this.segments,o=Bi(this);let r=this._loop;e=e||0,n=n||this.points.length-e;for(const a of s)r&=o(t,this,a,{start:e,end:e+n-1});return!!r}draw(t,e,n,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Lc(t,this,n,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}T(me,"id","line"),T(me,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),T(me,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),T(me,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function us(i,t,e,n){const s=i.options,{[e]:o}=i.getProps([e],n);return Math.abs(t-o)<s.radius+s.hitRadius}class Qe extends q{constructor(e){super();T(this,"parsed");T(this,"skip");T(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,n){return us(this,e,"x",n)}inYRange(e,n){return us(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!Ce(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Ei(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}T(Qe,"id","point"),T(Qe,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),T(Qe,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const gs=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},Bc=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class ps extends q{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=E(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,s)=>t.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,s=H(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=gs(n,o);let c,h;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=t;o.textAlign="left",o.textBaseline="middle";let f=-1,u=-h;return this.legendItems.forEach((g,p)=>{const m=n+e/2+o.measureText(g.text).width;(p===0||c[c.length-1]+m+2*a>r)&&(d+=h,c[c.length-(p>0?0:1)]=0,u+=h,f++),l[p]={left:0,top:u,row:f,width:m,height:s},c[c.length-1]+=m+a}),d}_fitCols(t,e,n,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=r-t;let d=a,f=0,u=0,g=0,p=0;return this.legendItems.forEach((m,y)=>{const{itemWidth:x,itemHeight:v}=Fc(n,e,o,m,s);y>0&&u+v+2*a>h&&(d+=f+a,c.push({width:f,height:u}),g+=f+a,p++,f=u=0),l[y]={left:g,top:u,col:p,width:x,height:v},f=Math.max(f,x),u+=v+a}),d+=f,c.push({width:f,height:u}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:o}}=this,r=Vt(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=J(n,this.left+s,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=J(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=J(n,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=J(n,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;di(t,this),this._draw(),fi(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:s}=this,{align:o,labels:r}=t,a=B.color,l=Vt(t.rtl,this.left,this.width),c=H(r.font),{padding:h}=r,d=c.size,f=d/2;let u;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:g,boxHeight:p,itemHeight:m}=gs(r,d),y=function(k,C,M){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;s.save();const P=D(M.lineWidth,1);if(s.fillStyle=D(M.fillStyle,a),s.lineCap=D(M.lineCap,"butt"),s.lineDashOffset=D(M.lineDashOffset,0),s.lineJoin=D(M.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=D(M.strokeStyle,a),s.setLineDash(D(M.lineDash,[])),r.usePointStyle){const j={radius:p*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:P},O=l.xPlus(k,g/2),I=C+f;lo(s,j,O,I,r.pointStyleWidth&&g)}else{const j=C+Math.max((d-p)/2,0),O=l.leftForLtr(k,g),I=Ht(M.borderRadius);s.beginPath(),Object.values(I).some(K=>K!==0)?ri(s,{x:O,y:j,w:g,h:p,radius:I}):s.rect(O,j,g,p),s.fill(),P!==0&&s.stroke()}s.restore()},x=function(k,C,M){Te(s,M.text,k,C+m/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},v=this.isHorizontal(),S=this._computeTitleHeight();v?u={x:J(o,this.left+h,this.right-n[0]),y:this.top+h+S,line:0}:u={x:this.left+h,y:J(o,this.top+S+h,this.bottom-e[0].height),line:0},mo(this.ctx,t.textDirection);const _=m+h;this.legendItems.forEach((k,C)=>{s.strokeStyle=k.fontColor,s.fillStyle=k.fontColor;const M=s.measureText(k.text).width,P=l.textAlign(k.textAlign||(k.textAlign=r.textAlign)),j=g+f+M;let O=u.x,I=u.y;l.setWidth(this.width),v?C>0&&O+j+h>this.right&&(I=u.y+=_,u.line++,O=u.x=J(o,this.left+h,this.right-n[u.line])):C>0&&I+_>this.bottom&&(O=u.x=O+e[u.line].width+h,u.line++,I=u.y=J(o,this.top+S+h,this.bottom-e[u.line].height));const K=l.x(O);if(y(K,I,k),O=Qr(P,O+g+f,v?O+j:this.right,t.rtl),x(l.x(O),I,k),v)u.x+=j+h;else if(typeof k.text!="string"){const at=c.lineHeight;u.y+=Oo(k,at)+h}else u.y+=_}),bo(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=H(e.font),s=U(e.padding);if(!e.display)return;const o=Vt(t.rtl,this.left,this.width),r=this.ctx,a=e.position,l=n.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=J(t.align,d,this.right-f);else{const g=this.columnSizes.reduce((p,m)=>Math.max(p,m.height),0);h=c+J(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const u=J(a,d,d+f);r.textAlign=o.textAlign(nn(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,Te(r,e.text,u,h,n)}_computeTitleHeight(){const t=this.options.title,e=H(t.font),n=U(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,s,o;if(ue(t,this.left,this.right)&&ue(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],ue(t,s.left,s.left+s.width)&&ue(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(t){const e=this.options;if(!Vc(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=Bc(s,n);s&&!o&&E(e.onLeave,[t,s,this],this),this._hoveredItem=n,n&&!o&&E(e.onHover,[t,n,this],this)}else n&&E(e.onClick,[t,n,this],this)}}function Fc(i,t,e,n,s){const o=Nc(n,i,t,e),r=Hc(s,n,t.lineHeight);return{itemWidth:o,itemHeight:r}}function Nc(i,t,e,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+n.measureText(s).width}function Hc(i,t,e){let n=i;return typeof t.text!="string"&&(n=Oo(t,e)),n}function Oo(i,t){const e=i.text?i.text.length:0;return t*e}function Vc(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var Yc={id:"legend",_element:ps,start(i,t,e){const n=i.legend=new ps({ctx:i.ctx,options:e,chart:i});rt.configure(i,n,e),rt.addBox(i,n)},stop(i){rt.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;rt.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),t.hidden=!0):(s.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=U(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Ro extends q{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=L(n.text)?n.text.length:1;this._padding=U(n.padding);const o=s*H(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:n,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,h,d;return this.isHorizontal()?(h=J(a,n,o),d=e+t,c=o-n):(r.position==="left"?(h=n+t,d=J(a,s,e),l=R*-.5):(h=o-t,d=J(a,e,s),l=R*.5),c=s-e),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=H(e.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Te(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:c,textAlign:nn(e.align),textBaseline:"middle",translation:[r,a]})}}function $c(i,t){const e=new Ro({ctx:i.ctx,options:t,chart:i});rt.configure(i,e,t),rt.addBox(i,e),i.titleBlock=e}var Xc={id:"title",_element:Ro,start(i,t,e){$c(i,e)},stop(i){const t=i.titleBlock;rt.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;rt.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const be={average(i){if(!i.length)return!1;let t,e,n=new Set,s=0,o=0;for(t=0,e=i.length;t<e;++t){const a=i[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();n.add(l.x),s+=l.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=i.length;o<r;++o){const l=i[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=Xt(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function ct(i,t){return t&&(L(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function ut(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Jc(i,t){const{element:e,datasetIndex:n,index:s}=t,o=i.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:i,label:r,parsed:o.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function ms(i,t){const e=i.chart.ctx,{body:n,footer:s,title:o}=i,{boxWidth:r,boxHeight:a}=t,l=H(t.bodyFont),c=H(t.titleFont),h=H(t.footerFont),d=o.length,f=s.length,u=n.length,g=U(t.padding);let p=g.height,m=0,y=n.reduce((S,_)=>S+_.before.length+_.lines.length+_.after.length,0);if(y+=i.beforeBody.length+i.afterBody.length,d&&(p+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),y){const S=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;p+=u*S+(y-u)*l.lineHeight+(y-1)*t.bodySpacing}f&&(p+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let x=0;const v=function(S){m=Math.max(m,e.measureText(S).width+x)};return e.save(),e.font=c.string,z(i.title,v),e.font=l.string,z(i.beforeBody.concat(i.afterBody),v),x=t.displayColors?r+2+t.boxPadding:0,z(n,S=>{z(S.before,v),z(S.lines,v),z(S.after,v)}),x=0,e.font=h.string,z(i.footer,v),e.restore(),m+=g.width,{width:m,height:p}}function Uc(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function qc(i,t,e,n){const{x:s,width:o}=n,r=e.caretSize+e.caretPadding;if(i==="left"&&s+o+r>t.width||i==="right"&&s-o-r<0)return!0}function Kc(i,t,e,n){const{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=i;let c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),qc(c,i,t,e)&&(c="center"),c}function bs(i,t,e){const n=e.yAlign||t.yAlign||Uc(i,e);return{xAlign:e.xAlign||t.xAlign||Kc(i,t,e,n),yAlign:n}}function Gc(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function Zc(i,t,e){let{y:n,height:s}=i;return t==="top"?n+=e:t==="bottom"?n-=s+e:n-=s/2,n}function ys(i,t,e,n){const{caretSize:s,caretPadding:o,cornerRadius:r}=i,{xAlign:a,yAlign:l}=e,c=s+o,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:u}=Ht(r);let g=Gc(t,a);const p=Zc(t,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(h,f)+s:a==="right"&&(g+=Math.max(d,u)+s),{x:ot(g,0,n.width-t.width),y:ot(p,0,n.height-t.height)}}function Ue(i,t,e){const n=U(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function xs(i){return ct([],ut(i))}function Qc(i,t,e){return Et(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function _s(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const jo={beforeTitle:dt,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:dt,beforeBody:dt,beforeLabel:dt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return W(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:dt,afterBody:dt,beforeFooter:dt,footer:dt,afterFooter:dt};function G(i,t,e,n){const s=i[t].call(e,n);return typeof s>"u"?jo[t].call(e,n):s}class Fi extends q{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&e.options.animation&&n.animations,o=new dn(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Qc(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:n}=e,s=G(n,"beforeTitle",this,t),o=G(n,"title",this,t),r=G(n,"afterTitle",this,t);let a=[];return a=ct(a,ut(s)),a=ct(a,ut(o)),a=ct(a,ut(r)),a}getBeforeBody(t,e){return xs(G(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,s=[];return z(t,o=>{const r={before:[],lines:[],after:[]},a=_s(n,o);ct(r.before,ut(G(a,"beforeLabel",this,o))),ct(r.lines,G(a,"label",this,o)),ct(r.after,ut(G(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,e){return xs(G(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,s=G(n,"beforeFooter",this,t),o=G(n,"footer",this,t),r=G(n,"afterFooter",this,t);let a=[];return a=ct(a,ut(s)),a=ct(a,ut(o)),a=ct(a,ut(r)),a}_createItems(t){const e=this._active,n=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Jc(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,n))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,n))),z(a,h=>{const d=_s(t.callbacks,h);s.push(G(d,"labelColor",this,h)),o.push(G(d,"labelPointStyle",this,h)),r.push(G(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,e){const n=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=be[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=ms(this,n),c=Object.assign({},a,l),h=bs(this.chart,n,c),d=ys(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,s){const o=this.getCaretPosition(t,n,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,n){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Ht(a),{x:f,y:u}=t,{width:g,height:p}=e;let m,y,x,v,S,_;return o==="center"?(S=u+p/2,s==="left"?(m=f,y=m-r,v=S+r,_=S-r):(m=f+g,y=m+r,v=S-r,_=S+r),x=m):(s==="left"?y=f+Math.max(l,h)+r:s==="right"?y=f+g-Math.max(c,d)-r:y=this.caretX,o==="top"?(v=u,S=v-r,m=y-r,x=y+r):(v=u+p,S=v+r,m=y+r,x=y-r),_=v),{x1:m,x2:y,x3:x,y1:v,y2:S,y3:_}}drawTitle(t,e,n){const s=this.title,o=s.length;let r,a,l;if(o){const c=Vt(n.rtl,this.x,this.width);for(t.x=Ue(this,n.titleAlign,n),e.textAlign=c.textAlign(n.titleAlign),e.textBaseline="middle",r=H(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=r.string,l=0;l<o;++l)e.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,s,o){const r=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=o,h=H(o.bodyFont),d=Ue(this,"left",o),f=s.x(d),u=l<h.lineHeight?(h.lineHeight-l)/2:0,g=e.y+u;if(o.usePointStyle){const p={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},m=s.leftForLtr(f,c)+c/2,y=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ei(t,p,m,y),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ei(t,p,m,y)}else{t.lineWidth=A(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const p=s.leftForLtr(f,c),m=s.leftForLtr(s.xPlus(f,1),c-2),y=Ht(r.borderRadius);Object.values(y).some(x=>x!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ri(t,{x:p,y:g,w:c,h:l,radius:y}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),ri(t,{x:m,y:g+1,w:c-2,h:l-2,radius:y}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(p,g,c,l),t.strokeRect(p,g,c,l),t.fillStyle=r.backgroundColor,t.fillRect(m,g+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=n,d=H(n.bodyFont);let f=d.lineHeight,u=0;const g=Vt(n.rtl,this.x,this.width),p=function(M){e.fillText(M,g.x(t.x+u),t.y+f/2),t.y+=f+o},m=g.textAlign(r);let y,x,v,S,_,k,C;for(e.textAlign=r,e.textBaseline="middle",e.font=d.string,t.x=Ue(this,m,n),e.fillStyle=n.bodyColor,z(this.beforeBody,p),u=a&&m!=="right"?r==="center"?c/2+h:c+2+h:0,S=0,k=s.length;S<k;++S){for(y=s[S],x=this.labelTextColors[S],e.fillStyle=x,z(y.before,p),v=y.lines,a&&v.length&&(this._drawColorBox(e,t,S,g,n),f=Math.max(d.lineHeight,l)),_=0,C=v.length;_<C;++_)p(v[_]),f=d.lineHeight;z(y.after,p)}u=0,f=d.lineHeight,z(this.afterBody,p),t.y-=o}drawFooter(t,e,n){const s=this.footer,o=s.length;let r,a;if(o){const l=Vt(n.rtl,this.x,this.width);for(t.x=Ue(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=l.textAlign(n.footerAlign),e.textBaseline="middle",r=H(n.footerFont),e.fillStyle=n.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+n.footerSpacing}}drawBackground(t,e,n,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:h}=n,{topLeft:d,topRight:f,bottomLeft:u,bottomRight:g}=Ht(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+d,l),r==="top"&&this.drawCaret(t,e,n,s),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,e,n,s),e.lineTo(a+c,l+h-g),e.quadraticCurveTo(a+c,l+h,a+c-g,l+h),r==="bottom"&&this.drawCaret(t,e,n,s),e.lineTo(a+u,l+h),e.quadraticCurveTo(a,l+h,a,l+h-u),r==="center"&&o==="left"&&this.drawCaret(t,e,n,s),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,s=n&&n.x,o=n&&n.y;if(s||o){const r=be[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=ms(this,t),l=Object.assign({},r,this._size),c=bs(e,t,l),h=ys(t,l,c,e);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=U(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(o,t,s,e),mo(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),bo(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!ei(n,s),r=this._positionChanged(s,e);(o||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,n),a=this._positionChanged(r,t),l=e||!ei(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,n,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,n);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:n,caretY:s,options:o}=this,r=be[o.position].call(this,t,e);return r!==!1&&(n!==r.x||s!==r.y)}}T(Fi,"positioners",be);var th={id:"tooltip",_element:Fi,positioners:be,afterInit(i,t,e){e&&(i.tooltip=new Fi({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jo},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const eh=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function ih(i,t,e,n){const s=i.indexOf(t);if(s===-1)return eh(i,t,e,n);const o=i.lastIndexOf(t);return s!==o?e:s}const nh=(i,t)=>i===null?null:ot(Math.round(i),0,t);function ws(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class Ni extends Kt{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:s,label:o}of e)n[s]===o&&n.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(W(t))return null;const n=this.getLabels();return e=isFinite(e)&&n[e]===t?e:ih(n,t,D(e,t),this._addedLabels),nh(e,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),e||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){return ws.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}T(Ni,"id","category"),T(Ni,"defaults",{ticks:{callback:ws}});function sh(i,t){const e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=i,u=o||1,g=h-1,{min:p,max:m}=t,y=!W(r),x=!W(a),v=!W(c),S=(m-p)/(d+1);let _=Cn((m-p)/g/u)*u,k,C,M,P;if(_<1e-14&&!y&&!x)return[{value:p},{value:m}];P=Math.ceil(m/_)-Math.floor(p/_),P>g&&(_=Cn(P*_/g/u)*u),W(l)||(k=Math.pow(10,l),_=Math.ceil(_*k)/k),s==="ticks"?(C=Math.floor(p/_)*_,M=Math.ceil(m/_)*_):(C=p,M=m),y&&x&&o&&Yr((a-r)/o,_/1e3)?(P=Math.round(Math.min((a-r)/_,h)),_=(a-r)/P,C=r,M=a):v?(C=y?r:C,M=x?a:M,P=c-1,_=(M-C)/P):(P=(M-C)/_,_e(P,Math.round(P),_/1e3)?P=Math.round(P):P=Math.ceil(P));const j=Math.max(Tn(_),Tn(C));k=Math.pow(10,W(l)?j:l),C=Math.round(C*k)/k,M=Math.round(M*k)/k;let O=0;for(y&&(f&&C!==r?(e.push({value:r}),C<r&&O++,_e(Math.round((C+O*_)*k)/k,r,vs(r,S,i))&&O++):C<r&&O++);O<P;++O){const I=Math.round((C+O*_)*k)/k;if(x&&I>a)break;e.push({value:I})}return x&&f&&M!==a?e.length&&_e(e[e.length-1].value,a,vs(a,S,i))?e[e.length-1].value=a:e.push({value:a}):(!x||M===a)&&e.push({value:M}),e}function vs(i,t,{horizontal:e,minRotation:n}){const s=V(n),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+i).length;return Math.min(t/o,r)}class oh extends Kt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return W(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=e?s:l,a=l=>o=n?o:l;if(t){const l=$t(s),c=$t(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:n}=t,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=sh(s,o);return t.bounds==="ticks"&&$r(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const s=(n-e)/Math.max(t.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return on(t,this.chart.options.locale,this.options.ticks.format)}}class Hi extends oh{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=tt(t)?t:0,this.max=tt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=V(this.options.ticks.minRotation),s=(t?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}T(Hi,"id","linear"),T(Hi,"defaults",{ticks:{callback:ao.formatters.numeric}});const pi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Z=Object.keys(pi);function Ss(i,t){return i-t}function ks(i,t){if(W(t))return null;const e=i._adapter,{parser:n,round:s,isoWeekday:o}=i._parseOpts;let r=t;return typeof n=="function"&&(r=n(r)),tt(r)||(r=typeof n=="string"?e.parse(r,n):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(jt(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function Ms(i,t,e,n){const s=Z.length;for(let o=Z.indexOf(i);o<s-1;++o){const r=pi[Z[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(a*r.size))<=n)return Z[o]}return Z[s-1]}function rh(i,t,e,n,s){for(let o=Z.length-1;o>=Z.indexOf(e);o--){const r=Z[o];if(pi[r].common&&i._adapter.diff(s,n,r)>=t-1)return r}return Z[e?Z.indexOf(e):0]}function ah(i){for(let t=Z.indexOf(i)+1,e=Z.length;t<e;++t)if(pi[Z[t]].common)return Z[t]}function Cs(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:n,hi:s}=en(e,t),o=e[n]>=t?e[n]:e[s];i[o]=!0}}function lh(i,t,e,n){const s=i._adapter,o=+s.startOf(t[0].value,n),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function Ts(i,t,e){const n=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,n.push({value:a,major:!1});return o===0||!e?n:lh(i,n,s,e)}class ci extends Kt{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),s=this._adapter=new wl._date(t.adapters.date);s.init(e),xe(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ks(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=tt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),n),o=tt(o)&&!isNaN(o)?o:+e.endOf(Date.now(),n)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=qr(s,o,r);return this._unit=e.unit||(n.autoSkip?Ms(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):rh(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:ah(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),Ts(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,n=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?n=o:n=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=ot(e,0,r),n=ot(n,0,r),this._offsets={start:e,end:n,factor:1/(e+1+n)}}_generate(){const t=this._adapter,e=this.min,n=this.max,s=this.options,o=s.time,r=o.unit||Ms(o.minUnit,e,n,this._getLabelCapacity(e)),a=D(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=jt(l)||l===!0,h={};let d=e,f,u;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(n,e,r)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+r);const g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,u=0;f<n;f=+t.add(f,a,r),u++)Cs(h,f,g);return(f===n||s.bounds==="ticks"||u===1)&&Cs(h,f,g),Object.keys(h).sort(Ss).map(p=>+p)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,r=e||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,s){const o=this.options,r=o.ticks.callback;if(r)return E(r,[t,e,n],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=n[e],u=c&&d&&f&&f.major;return this._adapter.format(t,s||(u?d:h))}generateTickLabels(t){let e,n,s;for(e=0,n=t.length;e<n;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,s=V(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*r,h:n*r+a*o}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,s=n[e.unit]||n.millisecond,o=this._tickFormatFunction(t,0,Ts(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,n;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,n=s.length;e<n;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const s=this.getLabels();for(e=0,n=s.length;e<n;++e)t.push(ks(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Gr(t.sort(Ss))}}T(ci,"id","time"),T(ci,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qe(i,t,e){let n=0,s=i.length-1,o,r,a,l;e?(t>=i[n].pos&&t<=i[s].pos&&({lo:n,hi:s}=Dt(i,"pos",t)),{pos:o,time:a}=i[n],{pos:r,time:l}=i[s]):(t>=i[n].time&&t<=i[s].time&&({lo:n,hi:s}=Dt(i,"time",t)),{time:o,pos:a}=i[n],{time:r,pos:l}=i[s]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class Ps extends ci{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=qe(e,this.min),this._tableRange=qe(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,s=[],o=[];let r,a,l,c,h;for(r=0,a=t.length;r<a;++r)c=t[r],c>=e&&c<=n&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],c=s[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(qe(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return qe(this._table,n*this._tableRange+this._minPos,!0)}}T(Ps,"id","timeseries"),T(Ps,"defaults",ci.defaults);const Io="label";function Ds(i,t){typeof i=="function"?i(t):i&&(i.current=t)}function ch(i,t){const e=i.options;e&&t&&Object.assign(e,t)}function zo(i,t){i.labels=t}function Eo(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Io;const n=[];i.datasets=t.map(s=>{const o=i.datasets.find(r=>r[e]===s[e]);return!o||!s.data||n.includes(o)?{...s}:(n.push(o),Object.assign(o,s),o)})}function hh(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Io;const e={labels:[],datasets:[]};return zo(e,i.labels),Eo(e,i.datasets,t),e}function dh(i,t){const{height:e=150,width:n=300,redraw:s=!1,datasetIdKey:o,type:r,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...f}=i,u=N.useRef(null),g=N.useRef(null),p=()=>{u.current&&(g.current=new Rt(u.current,{type:r,data:hh(a,o),options:l&&{...l},plugins:c}),Ds(t,g.current))},m=()=>{Ds(t,null),g.current&&(g.current.destroy(),g.current=null)};return N.useEffect(()=>{!s&&g.current&&l&&ch(g.current,l)},[s,l]),N.useEffect(()=>{!s&&g.current&&zo(g.current.config.data,a.labels)},[s,a.labels]),N.useEffect(()=>{!s&&g.current&&a.datasets&&Eo(g.current.config.data,a.datasets,o)},[s,a.datasets]),N.useEffect(()=>{g.current&&(s?(m(),setTimeout(p)):g.current.update(d))},[s,l,a.labels,a.datasets,d]),N.useEffect(()=>{g.current&&(m(),setTimeout(p))},[r]),N.useEffect(()=>(p(),()=>m()),[]),Ks.createElement("canvas",{ref:u,role:"img",height:e,width:n,...f},h)}const fh=N.forwardRef(dh);function uh(i,t){return Rt.register(t),N.forwardRef((e,n)=>Ks.createElement(fh,{...e,ref:n,type:i}))}const Wo=uh("line",Ke);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const As={modes:{point(i,t){return ti(i,t,{intersect:!0})},nearest(i,t,e){return mh(i,t,e)},x(i,t,e){return ti(i,t,{intersect:e.intersect,axis:"x"})},y(i,t,e){return ti(i,t,{intersect:e.intersect,axis:"y"})}}};function un(i,t,e){return(As.modes[e.mode]||As.modes.nearest)(i,t,e)}function gh(i,t,e){return e!=="x"&&e!=="y"?i.inRange(t.x,t.y,"x",!0)||i.inRange(t.x,t.y,"y",!0):i.inRange(t.x,t.y,e,!0)}function ph(i,t,e){return e==="x"?{x:i.x,y:t.y}:e==="y"?{x:t.x,y:i.y}:t}function ti(i,t,e){return i.filter(n=>e.intersect?n.inRange(t.x,t.y):gh(n,t,e.axis))}function mh(i,t,e){let n=Number.POSITIVE_INFINITY;return ti(i,t,e).reduce((s,o)=>{const r=o.getCenterPoint(),a=ph(t,r,e.axis),l=Xt(t,a);return l<n?(s=[o],n=l):l===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)}function Wt(i,t,e){const n=Math.cos(e),s=Math.sin(e),o=t.x,r=t.y;return{x:o+n*(i.x-o)-s*(i.y-r),y:r+s*(i.x-o)+n*(i.y-r)}}const bh=(i,t)=>t>i||i.length>t.length&&i.slice(0,t.length)===t,At=.001,mi=(i,t,e)=>Math.min(e,Math.max(t,i)),Lo=(i,t)=>i.value>=i.start-t&&i.value<=i.end+t;function yh(i,t,e){for(const n of Object.keys(i))i[n]=mi(i[n],t,e);return i}function xh(i,t,e,n){return!i||!t||e<=0?!1:Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)<=Math.pow(e+n,2)}function Bo(i,{x:t,y:e,x2:n,y2:s},o,{borderWidth:r,hitTolerance:a}){const l=(r+a)/2,c=i.x>=t-l-At&&i.x<=n+l+At,h=i.y>=e-l-At&&i.y<=s+l+At;return o==="x"?c:(o==="y"||c)&&h}function Fo(i,{rect:t,center:e},n,{rotation:s,borderWidth:o,hitTolerance:r}){const a=Wt(i,e,V(-s));return Bo(a,t,n,{borderWidth:o,hitTolerance:r})}function Lt(i,t){const{centerX:e,centerY:n}=i.getProps(["centerX","centerY"],t);return{x:e,y:n}}function _h(i,t,e,n=!0){const s=e.split(".");let o=0;for(const r of t.split(".")){const a=s[o++];if(parseInt(r,10)<parseInt(a,10))break;if(bh(a,r)){if(n)throw new Error(`${i} v${e} is not supported. v${t} or newer is required.`);return!1}}return!0}const No=i=>typeof i=="string"&&i.endsWith("%"),Ho=i=>parseFloat(i)/100,Vo=i=>mi(Ho(i),0,1),he=(i,t)=>({x:i,y:t,x2:i,y2:t,width:0,height:0}),wh={box:i=>he(i.centerX,i.centerY),doughnutLabel:i=>he(i.centerX,i.centerY),ellipse:i=>({centerX:i.centerX,centerY:i.centerX,radius:0,width:0,height:0}),label:i=>he(i.centerX,i.centerY),line:i=>he(i.x,i.y),point:i=>({centerX:i.centerX,centerY:i.centerY,radius:0,width:0,height:0}),polygon:i=>he(i.centerX,i.centerY)};function gn(i,t){return t==="start"?0:t==="end"?i:No(t)?Vo(t)*i:i/2}function vt(i,t,e=!0){return typeof t=="number"?t:No(t)?(e?Vo(t):Ho(t))*i:i}function vh(i,t){const{x:e,width:n}=i,s=t.textAlign;return s==="center"?e+n/2:s==="end"||s==="right"?e+n:e}function Yo(i,t,{borderWidth:e,position:n,xAdjust:s,yAdjust:o},r){const a=A(r),l=t.width+(a?r.width:0)+e,c=t.height+(a?r.height:0)+e,h=pn(n),d=Os(i.x,l,s,h.x),f=Os(i.y,c,o,h.y);return{x:d,y:f,x2:d+l,y2:f+c,width:l,height:c,centerX:d+l/2,centerY:f+c/2}}function pn(i,t="center"){return A(i)?{x:D(i.x,t),y:D(i.y,t)}:(i=D(i,t),{x:i,y:i})}const $o=(i,t)=>i&&i.autoFit&&t<1;function Xo(i,t){const e=i.font,n=L(e)?e:[e];return $o(i,t)?n.map(function(s){const o=H(s);return o.size=Math.floor(s.size*t),o.lineHeight=s.lineHeight,H(o)}):n.map(s=>H(s))}function Jo(i){return i&&(et(i.xValue)||et(i.yValue))}function Os(i,t,e=0,n){return i-gn(t,n)+e}function Gt(i,t,e){const n=e.init;if(n){if(n===!0)return qo(t,e)}else return;return Sh(i,t,e)}function Uo(i,t,e){let n=!1;return t.forEach(s=>{Q(i[s])?(n=!0,e[s]=i[s]):et(e[s])&&delete e[s]}),n}function qo(i,t){const e=t.type||"line";return wh[e](i)}function Sh(i,t,e){const n=E(e.init,[{chart:i,properties:t,options:e}]);if(n===!0)return qo(t,e);if(A(n))return n}const Ri=new Map,kh=i=>isNaN(i)||i<=0,Mh=i=>i.reduce(function(t,e){return t+=e.string,t},"");function bi(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function yi(i,{x:t,y:e},n){n&&(i.translate(t,e),i.rotate(V(n)),i.translate(-t,-e))}function pt(i,t){if(t&&t.borderWidth)return i.lineCap=t.borderCapStyle||"butt",i.setLineDash(t.borderDash),i.lineDashOffset=t.borderDashOffset,i.lineJoin=t.borderJoinStyle||"miter",i.lineWidth=t.borderWidth,i.strokeStyle=t.borderColor,!0}function Zt(i,t){i.shadowColor=t.backgroundShadowColor,i.shadowBlur=t.shadowBlur,i.shadowOffsetX=t.shadowOffsetX,i.shadowOffsetY=t.shadowOffsetY}function xi(i,t){const e=t.content;if(bi(e))return{width:vt(e.width,t.width),height:vt(e.height,t.height)};const n=Xo(t),s=t.textStrokeWidth,o=L(e)?e:[e],r=o.join()+Mh(n)+s+(i._measureText?"-spriting":"");return Ri.has(r)||Ri.set(r,Dh(i,o,n,s)),Ri.get(r)}function Ko(i,t,e){const{x:n,y:s,width:o,height:r}=t;i.save(),Zt(i,e);const a=pt(i,e);i.fillStyle=e.backgroundColor,i.beginPath(),ri(i,{x:n,y:s,w:o,h:r,radius:yh(Ht(e.borderRadius),0,Math.min(o,r)/2)}),i.closePath(),i.fill(),a&&(i.shadowColor=e.borderShadowColor,i.stroke()),i.restore()}function Go(i,t,e,n){const s=e.content;if(bi(s)){i.save(),i.globalAlpha=Rh(e.opacity,s.style.opacity),i.drawImage(s,t.x,t.y,t.width,t.height),i.restore();return}const o=L(s)?s:[s],r=Xo(e,n),a=e.color,l=L(a)?a:[a],c=vh(t,e),h=t.y+e.textStrokeWidth/2;i.save(),i.textBaseline="middle",i.textAlign=e.textAlign,Ch(i,e)&&Ah(i,{x:c,y:h},o,r),Oh(i,{x:c,y:h},o,{fonts:r,colors:l}),i.restore()}function Ch(i,t){if(t.textStrokeWidth>0)return i.lineJoin="round",i.miterLimit=2,i.lineWidth=t.textStrokeWidth,i.strokeStyle=t.textStrokeColor,!0}function Th(i,t,e,n){const{radius:s,options:o}=t,r=o.pointStyle,a=o.rotation;let l=(a||0)*tn;if(bi(r)){i.save(),i.translate(e,n),i.rotate(l),i.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),i.restore();return}kh(s)||Ph(i,{x:e,y:n,radius:s,rotation:a,style:r,rad:l})}function Ph(i,{x:t,y:e,radius:n,rotation:s,style:o,rad:r}){let a,l,c,h;switch(i.beginPath(),o){default:i.arc(t,e,n,0,$),i.closePath();break;case"triangle":i.moveTo(t+Math.sin(r)*n,e-Math.cos(r)*n),r+=si,i.lineTo(t+Math.sin(r)*n,e-Math.cos(r)*n),r+=si,i.lineTo(t+Math.sin(r)*n,e-Math.cos(r)*n),i.closePath();break;case"rectRounded":h=n*.516,c=n-h,a=Math.cos(r+st)*c,l=Math.sin(r+st)*c,i.arc(t-a,e-l,h,r-R,r-X),i.arc(t+l,e-a,h,r-X,r),i.arc(t+a,e+l,h,r,r+X),i.arc(t-l,e+a,h,r+X,r+R),i.closePath();break;case"rect":if(!s){c=Math.SQRT1_2*n,i.rect(t-c,e-c,2*c,2*c);break}r+=st;case"rectRot":a=Math.cos(r)*n,l=Math.sin(r)*n,i.moveTo(t-a,e-l),i.lineTo(t+l,e-a),i.lineTo(t+a,e+l),i.lineTo(t-l,e+a),i.closePath();break;case"crossRot":r+=st;case"cross":a=Math.cos(r)*n,l=Math.sin(r)*n,i.moveTo(t-a,e-l),i.lineTo(t+a,e+l),i.moveTo(t+l,e-a),i.lineTo(t-l,e+a);break;case"star":a=Math.cos(r)*n,l=Math.sin(r)*n,i.moveTo(t-a,e-l),i.lineTo(t+a,e+l),i.moveTo(t+l,e-a),i.lineTo(t-l,e+a),r+=st,a=Math.cos(r)*n,l=Math.sin(r)*n,i.moveTo(t-a,e-l),i.lineTo(t+a,e+l),i.moveTo(t+l,e-a),i.lineTo(t-l,e+a);break;case"line":a=Math.cos(r)*n,l=Math.sin(r)*n,i.moveTo(t-a,e-l),i.lineTo(t+a,e+l);break;case"dash":i.moveTo(t,e),i.lineTo(t+Math.cos(r)*n,e+Math.sin(r)*n);break}i.fill()}function Dh(i,t,e,n){i.save();const s=t.length;let o=0,r=n;for(let a=0;a<s;a++){const l=e[Math.min(a,e.length-1)];i.font=l.string;const c=t[a];o=Math.max(o,i.measureText(c).width+n),r+=l.lineHeight}return i.restore(),{width:o,height:r}}function Ah(i,{x:t,y:e},n,s){i.beginPath();let o=0;n.forEach(function(r,a){const l=s[Math.min(a,s.length-1)],c=l.lineHeight;i.font=l.string,i.strokeText(r,t,e+c/2+o),o+=c}),i.stroke()}function Oh(i,{x:t,y:e},n,{fonts:s,colors:o}){let r=0;n.forEach(function(a,l){const c=o[Math.min(l,o.length-1)],h=s[Math.min(l,s.length-1)],d=h.lineHeight;i.beginPath(),i.font=h.string,i.fillStyle=c,i.fillText(a,t,e+d/2+r),r+=d,i.fill()})}function Rh(i,t){const e=jt(i)?i:t;return jt(e)?mi(e,0,1):1}const Zo=["left","bottom","top","right"];function jh(i,t){const{pointX:e,pointY:n,options:s}=t,o=s.callout,r=o&&o.display&&Lh(t,o);if(!r||Fh(t,o,r))return;if(i.save(),i.beginPath(),!pt(i,o))return i.restore();const{separatorStart:l,separatorEnd:c}=Ih(t,r),{sideStart:h,sideEnd:d}=Eh(t,r,l);(o.margin>0||s.borderWidth===0)&&(i.moveTo(l.x,l.y),i.lineTo(c.x,c.y)),i.moveTo(h.x,h.y),i.lineTo(d.x,d.y);const f=Wt({x:e,y:n},t.getCenterPoint(),V(-t.rotation));i.lineTo(f.x,f.y),i.stroke(),i.restore()}function Ih(i,t){const{x:e,y:n,x2:s,y2:o}=i,r=zh(i,t);let a,l;return t==="left"||t==="right"?(a={x:e+r,y:n},l={x:a.x,y:o}):(a={x:e,y:n+r},l={x:s,y:a.y}),{separatorStart:a,separatorEnd:l}}function zh(i,t){const{width:e,height:n,options:s}=i,o=s.callout.margin+s.borderWidth/2;return t==="right"?e+o:t==="bottom"?n+o:-o}function Eh(i,t,e){const{y:n,width:s,height:o,options:r}=i,a=r.callout.start,l=Wh(t,r.callout);let c,h;return t==="left"||t==="right"?(c={x:e.x,y:n+vt(o,a)},h={x:c.x+l,y:c.y}):(c={x:e.x+vt(s,a),y:e.y},h={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:h}}function Wh(i,t){const e=t.side;return i==="left"||i==="top"?-e:e}function Lh(i,t){const e=t.position;return Zo.includes(e)?e:Bh(i,t)}function Bh(i,t){const{x:e,y:n,x2:s,y2:o,width:r,height:a,pointX:l,pointY:c,centerX:h,centerY:d,rotation:f}=i,u={x:h,y:d},g=t.start,p=vt(r,g),m=vt(a,g),y=[e,e+p,e+p,s],x=[n+m,o,n,o],v=[];for(let S=0;S<4;S++){const _=Wt({x:y[S],y:x[S]},u,V(f));v.push({position:Zo[S],distance:Xt(_,{x:l,y:c})})}return v.sort((S,_)=>S.distance-_.distance)[0].position}function Fh(i,t,e){const{pointX:n,pointY:s}=i,o=t.margin;let r=n,a=s;return e==="left"?r+=o:e==="right"?r-=o:e==="top"?a+=o:e==="bottom"&&(a-=o),i.inRange(r,a)}const Rs={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function qt(i,t,e){return t=typeof t=="number"?t:i.parse(t),tt(t)?i.getPixelForValue(t):e}function zt(i,t,e){const n=t[e];if(n||e==="scaleID")return n;const s=e.charAt(0),o=Object.values(i).filter(r=>r.axis&&r.axis===s);return o.length?o[0].id:s}function Qo(i,t){if(i){const e=i.options.reverse,n=qt(i,t.min,e?t.end:t.start),s=qt(i,t.max,e?t.start:t.end);return{start:n,end:s}}}function tr(i,t){const{chartArea:e,scales:n}=i,s=n[zt(n,t,"xScaleID")],o=n[zt(n,t,"yScaleID")];let r=e.width/2,a=e.height/2;return s&&(r=qt(s,t.xValue,s.left+s.width/2)),o&&(a=qt(o,t.yValue,o.top+o.height/2)),{x:r,y:a}}function mn(i,t){const e=i.scales,n=e[zt(e,t,"xScaleID")],s=e[zt(e,t,"yScaleID")];if(!n&&!s)return{};let{left:o,right:r}=n||i.chartArea,{top:a,bottom:l}=s||i.chartArea;const c=js(n,{min:t.xMin,max:t.xMax,start:o,end:r});o=c.start,r=c.end;const h=js(s,{min:t.yMin,max:t.yMax,start:l,end:a});return a=h.start,l=h.end,{x:o,y:a,x2:r,y2:l,width:r-o,height:l-a,centerX:o+(r-o)/2,centerY:a+(l-a)/2}}function er(i,t){if(!Jo(t)){const e=mn(i,t);let n=t.radius;(!n||isNaN(n))&&(n=Math.min(e.width,e.height)/2,t.radius=n);const s=n*2,o=e.centerX+t.xAdjust,r=e.centerY+t.yAdjust;return{x:o-n,y:r-n,x2:o+n,y2:r+n,centerX:o,centerY:r,width:s,height:s,radius:n}}return Hh(i,t)}function Nh(i,t){const{scales:e,chartArea:n}=i,s=e[t.scaleID],o={x:n.left,y:n.top,x2:n.right,y2:n.bottom};return s?Vh(s,o,t):Yh(e,o,t),o}function ir(i,t){const e=mn(i,t);return e.initProperties=Gt(i,e,t),e.elements=[{type:"label",optionScope:"label",properties:Jh(i,e,t),initProperties:e.initProperties}],e}function Hh(i,t){const e=tr(i,t),n=t.radius*2;return{x:e.x-t.radius+t.xAdjust,y:e.y-t.radius+t.yAdjust,x2:e.x+t.radius+t.xAdjust,y2:e.y+t.radius+t.yAdjust,centerX:e.x+t.xAdjust,centerY:e.y+t.yAdjust,radius:t.radius,width:n,height:n}}function js(i,t){const e=Qo(i,t)||t;return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}function Vh(i,t,e){const n=qt(i,e.value,NaN),s=qt(i,e.endValue,n);i.isHorizontal()?(t.x=n,t.x2=s):(t.y=n,t.y2=s)}function Yh(i,t,e){for(const n of Object.keys(Rs)){const s=i[zt(i,e,n)];if(s){const{min:o,max:r,start:a,end:l,startProp:c,endProp:h}=Rs[n],d=Qo(s,{min:e[o],max:e[r],start:s[a],end:s[l]});t[c]=d.start,t[h]=d.end}}}function $h({properties:i,options:t},e,n,s){const{x:o,x2:r,width:a}=i;return nr({start:o,end:r,borderWidth:t.borderWidth},{position:n.x,padding:{start:s.left,end:s.right},adjust:t.label.xAdjust,size:e.width})}function Xh({properties:i,options:t},e,n,s){const{y:o,y2:r,height:a}=i;return nr({start:o,end:r,borderWidth:t.borderWidth},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:t.label.yAdjust,size:e.height})}function nr(i,t){const{start:e,end:n,borderWidth:s}=i,{position:o,padding:{start:r,end:a},adjust:l}=t,c=n-s-e-r-a-t.size;return e+s/2+l+gn(c,o)}function Jh(i,t,e){const n=e.label;n.backgroundColor="transparent",n.callout.display=!1;const s=pn(n.position),o=U(n.padding),r=xi(i.ctx,n),a=$h({properties:t,options:e},r,s,o),l=Xh({properties:t,options:e},r,s,o),c=r.width+o.width,h=r.height+o.height;return{x:a,y:l,x2:a+c,y2:l+h,width:c,height:h,centerX:a+c/2,centerY:l+h/2,rotation:n.rotation}}const Vi=["enter","leave"],bn=Vi.concat("click");function Uh(i,t,e){t.listened=Uo(e,bn,t.listeners),t.moveListened=!1,Vi.forEach(n=>{Q(e[n])&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(n=>{!t.listened&&Q(n.click)&&(t.listened=!0),t.moveListened||Vi.forEach(s=>{Q(n[s])&&(t.listened=!0,t.moveListened=!0)})})}function qh(i,t,e){if(i.listened)switch(t.type){case"mousemove":case"mouseout":return Kh(i,t,e);case"click":return Gh(i,t,e)}}function Kh(i,t,e){if(!i.moveListened)return;let n;t.type==="mousemove"?n=un(i.visibleElements,t,e.interaction):n=[];const s=i.hovered;i.hovered=n;const o={state:i,event:t};let r=Is(o,"leave",s,n);return Is(o,"enter",n,s)||r}function Is({state:i,event:t},e,n,s){let o;for(const r of n)s.indexOf(r)<0&&(o=sr(r.options[e]||i.listeners[e],r,t)||o);return o}function Gh(i,t,e){const n=i.listeners,s=un(i.visibleElements,t,e.interaction);let o;for(const r of s)o=sr(r.options.click||n.click,r,t)||o;return o}function sr(i,t,e){return E(i,[t.$context,e])===!0}const hi=["afterDraw","beforeDraw"];function Zh(i,t,e){const n=t.visibleElements;t.hooked=Uo(e,hi,t.hooks),t.hooked||n.forEach(s=>{t.hooked||hi.forEach(o=>{Q(s.options[o])&&(t.hooked=!0)})})}function zs(i,t,e){if(i.hooked){const n=t.options[e]||i.hooks[e];return E(n,[t.$context])}}function Qh(i,t,e){const n=sd(i.scales,t,e);let s=Es(t,n,"min","suggestedMin");s=Es(t,n,"max","suggestedMax")||s,s&&Q(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function td(i,t){for(const e of i)id(e,t)}function Es(i,t,e,n){if(tt(t[e])&&!ed(i.options,e,n)){const s=i[e]!==t[e];return i[e]=t[e],s}}function ed(i,t,e){return et(i[t])||et(i[e])}function id(i,t){for(const e of["scaleID","xScaleID","yScaleID"]){const n=zt(t,i,e);n&&!t[n]&&nd(i,e)&&console.warn(`No scale found with id '${n}' for annotation '${i.id}'`)}}function nd(i,t){if(t==="scaleID")return!0;const e=t.charAt(0);for(const n of["Min","Max","Value"])if(et(i[e+n]))return!0;return!1}function sd(i,t,e){const n=t.axis,s=t.id,o=n+"ScaleID",r={min:D(t.min,Number.NEGATIVE_INFINITY),max:D(t.max,Number.POSITIVE_INFINITY)};for(const a of e)a.scaleID===s?Ws(a,t,["value","endValue"],r):zt(i,a,o)===s&&Ws(a,t,[n+"Min",n+"Max",n+"Value"],r);return r}function Ws(i,t,e,n){for(const s of e){const o=i[s];if(et(o)){const r=t.parse(o);n.min=Math.min(n.min,r),n.max=Math.max(n.max,r)}}}class Qt extends q{inRange(t,e,n,s){const{x:o,y:r}=Wt({x:t,y:e},this.getCenterPoint(s),V(-this.options.rotation));return Bo({x:o,y:r},this.getProps(["x","y","x2","y2"],s),n,this.options)}getCenterPoint(t){return Lt(this,t)}draw(t){t.save(),yi(t,this.getCenterPoint(),this.options.rotation),Ko(t,this,this.options),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return ir(t,e)}}Qt.id="boxAnnotation";Qt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Qt.defaultRoutes={borderColor:"color",backgroundColor:"color"};Qt.descriptors={label:{_fallback:!0}};class _i extends q{inRange(t,e,n,s){return Fo({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Lt(this,t)}draw(t){const e=this.options;!e.display||!e.content||(hd(t,this),t.save(),yi(t,this.getCenterPoint(),this.rotation),Go(t,this,e,this._fitRatio),t.restore())}resolveElementProperties(t,e){const n=od(t,e);if(!n)return{};const{controllerMeta:s,point:o,radius:r}=ad(t,e,n);let a=xi(t.ctx,e);const l=ld(a,r);$o(e,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:h,yAdjust:d}=e,f=Yo(o,a,{borderWidth:0,position:c,xAdjust:h,yAdjust:d});return{initProperties:Gt(t,f,e),...f,...s,rotation:e.rotation,_fitRatio:l}}}_i.id="doughnutLabelAnnotation";_i.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};_i.defaultRoutes={};function od(i,t){return i.getSortedVisibleDatasetMetas().reduce(function(e,n){const s=n.controller;return s instanceof ge&&rd(i,t,n.data)&&(!e||s.innerRadius<e.controller.innerRadius)&&s.options.circumference>=90?n:e},void 0)}function rd(i,t,e){if(!t.autoHide)return!0;for(let n=0;n<e.length;n++)if(!e[n].hidden&&i.getDataVisibility(n))return!0}function ad({chartArea:i},t,e){const{left:n,top:s,right:o,bottom:r}=i,{innerRadius:a,offsetX:l,offsetY:c}=e.controller,h=(n+o)/2+l,d=(s+r)/2+c,f={left:Math.max(h-a,n),right:Math.min(h+a,o),top:Math.max(d-a,s),bottom:Math.min(d+a,r)},u={x:(f.left+f.right)/2,y:(f.top+f.bottom)/2},g=t.spacing+t.borderWidth/2,p=a-g,m=u.y>d,y=m?s+g:r-g,x=cd(y,h,d,p);return{controllerMeta:{_centerX:h,_centerY:d,_radius:p,_counterclockwise:m,...x},point:u,radius:Math.min(a,Math.min(f.right-f.left,f.bottom-f.top)/2)}}function ld({width:i,height:t},e){const n=Math.sqrt(Math.pow(i,2)+Math.pow(t,2));return e*2/n}function cd(i,t,e,n){const s=Math.pow(e-i,2),o=Math.pow(n,2),r=t*-2,a=Math.pow(t,2)+s-o,l=Math.pow(r,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:$};const c=(-r-Math.sqrt(l))/2,h=(-r+Math.sqrt(l))/2;return{_startAngle:Ii({x:t,y:e},{x:c,y:i}).angle,_endAngle:Ii({x:t,y:e},{x:h,y:i}).angle}}function hd(i,t){const{_centerX:e,_centerY:n,_radius:s,_startAngle:o,_endAngle:r,_counterclockwise:a,options:l}=t;i.save();const c=pt(i,l);i.fillStyle=l.backgroundColor,i.beginPath(),i.arc(e,n,s,o,r,a),i.closePath(),i.fill(),c&&i.stroke(),i.restore()}class Ae extends q{inRange(t,e,n,s){return Fo({x:t,y:e},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(t){return Lt(this,t)}draw(t){const e=this.options,n=!et(this._visible)||this._visible;!e.display||!e.content||!n||(t.save(),yi(t,this.getCenterPoint(),this.rotation),jh(t,this),Ko(t,this,e),Go(t,dd(this),e),t.restore())}resolveElementProperties(t,e){let n;if(Jo(e))n=tr(t,e);else{const{centerX:a,centerY:l}=mn(t,e);n={x:a,y:l}}const s=U(e.padding),o=xi(t.ctx,e),r=Yo(n,o,e,s);return{initProperties:Gt(t,r,e),pointX:n.x,pointY:n.y,...r,rotation:e.rotation}}}Ae.id="labelAnnotation";Ae.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Ae.defaultRoutes={borderColor:"color"};function dd({x:i,y:t,width:e,height:n,options:s}){const o=s.borderWidth/2,r=U(s.padding);return{x:i+r.left+o,y:t+r.top+o,width:e-r.left-r.right-s.borderWidth,height:n-r.top-r.bottom-s.borderWidth}}const yn=(i,t,e)=>({x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}),Yi=(i,t,e)=>yn(t,e,Math.abs((i-t.y)/(e.y-t.y))).x,Ls=(i,t,e)=>yn(t,e,Math.abs((i-t.x)/(e.x-t.x))).y,ye=i=>i*i,fd=(i,t,{x:e,y:n,x2:s,y2:o},r)=>r==="y"?{start:Math.min(n,o),end:Math.max(n,o),value:t}:{start:Math.min(e,s),end:Math.max(e,s),value:i},Bs=(i,t,e,n)=>(1-n)*(1-n)*i+2*(1-n)*n*t+n*n*e,$i=(i,t,e,n)=>({x:Bs(i.x,t.x,e.x,n),y:Bs(i.y,t.y,e.y,n)}),Fs=(i,t,e,n)=>2*(1-n)*(t-i)+2*n*(e-t),Ns=(i,t,e,n)=>-Math.atan2(Fs(i.x,t.x,e.x,n),Fs(i.y,t.y,e.y,n))+.5*R;class Oe extends q{inRange(t,e,n,s){const o=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y"){const r={mouseX:t,mouseY:e},{path:a,ctx:l}=this;if(a){pt(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:h}=this.$context,d=t*h.currentDevicePixelRatio,f=e*h.currentDevicePixelRatio,u=l.isPointInStroke(a,d,f)||Xi(this,r,s);return l.restore(),u}const c=ye(o);return md(this,r,c,s)||Xi(this,r,s)}return ud(this,{mouseX:t,mouseY:e},n,{hitSize:o,useFinalPosition:s})}getCenterPoint(t){return Lt(this,t)}draw(t){const{x:e,y:n,x2:s,y2:o,cp:r,options:a}=this;if(t.save(),!pt(t,a))return t.restore();Zt(t,a);const l=Math.sqrt(Math.pow(s-e,2)+Math.pow(o-n,2));if(a.curve&&r)return kd(t,this,r,l),t.restore();const{startOpts:c,endOpts:h,startAdjust:d,endAdjust:f}=or(this),u=Math.atan2(o-n,s-e);t.translate(e,n),t.rotate(u),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-f,0),t.shadowColor=a.borderShadowColor,t.stroke(),Ji(t,0,d,c),Ji(t,l,-f,h),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){const n=Nh(t,e),{x:s,y:o,x2:r,y2:a}=n,l=gd(n,t.chartArea),c=l?pd({x:s,y:o},{x:r,y:a},t.chartArea):{x:s,y:o,x2:r,y2:a,width:Math.abs(r-s),height:Math.abs(a-o)};if(c.centerX=(r+s)/2,c.centerY=(a+o)/2,c.initProperties=Gt(t,c,e),e.curve){const d={x:c.x,y:c.y},f={x:c.x2,y:c.y2};c.cp=Sd(c,e,Xt(d,f))}const h=bd(t,c,e.label);return h._visible=l,c.elements=[{type:"label",optionScope:"label",properties:h,initProperties:c.initProperties}],c}}Oe.id="lineAnnotation";const Hs={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Oe.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Hs),fill:!1,length:12,start:Object.assign({},Hs),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Ae.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Oe.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Oe.defaultRoutes={borderColor:"color"};function ud(i,{mouseX:t,mouseY:e},n,{hitSize:s,useFinalPosition:o}){const r=fd(t,e,i.getProps(["x","y","x2","y2"],o),n);return Lo(r,s)||Xi(i,{mouseX:t,mouseY:e},o,n)}function gd({x:i,y:t,x2:e,y2:n},{top:s,right:o,bottom:r,left:a}){return!(i<a&&e<a||i>o&&e>o||t<s&&n<s||t>r&&n>r)}function Vs({x:i,y:t},e,{top:n,right:s,bottom:o,left:r}){return i<r&&(t=Ls(r,{x:i,y:t},e),i=r),i>s&&(t=Ls(s,{x:i,y:t},e),i=s),t<n&&(i=Yi(n,{x:i,y:t},e),t=n),t>o&&(i=Yi(o,{x:i,y:t},e),t=o),{x:i,y:t}}function pd(i,t,e){const{x:n,y:s}=Vs(i,t,e),{x:o,y:r}=Vs(t,i,e);return{x:n,y:s,x2:o,y2:r,width:Math.abs(o-n),height:Math.abs(r-s)}}function md(i,{mouseX:t,mouseY:e},n=At,s){const{x:o,y:r,x2:a,y2:l}=i.getProps(["x","y","x2","y2"],s),c=a-o,h=l-r,d=ye(c)+ye(h),f=d===0?-1:((t-o)*c+(e-r)*h)/d;let u,g;return f<0?(u=o,g=r):f>1?(u=a,g=l):(u=o+f*c,g=r+f*h),ye(t-u)+ye(e-g)<=n}function Xi(i,{mouseX:t,mouseY:e},n,s){const o=i.label;return o.options.display&&o.inRange(t,e,s,n)}function bd(i,t,e){const n=e.borderWidth,s=U(e.padding),o=xi(i.ctx,e),r=o.width+s.width+n,a=o.height+s.height+n;return xd(t,e,{width:r,height:a,padding:s},i.chartArea)}function yd(i){const{x:t,y:e,x2:n,y2:s}=i,o=Math.atan2(s-e,n-t);return o>R/2?o-R:o<R/-2?o+R:o}function xd(i,t,e,n){const{width:s,height:o,padding:r}=e,{xAdjust:a,yAdjust:l}=t,c={x:i.x,y:i.y},h={x:i.x2,y:i.y2},d=t.rotation==="auto"?yd(i):V(t.rotation),f=_d(s,o,d),u=wd(i,t,{labelSize:f,padding:r},n),g=i.cp?$i(c,i.cp,h,u):yn(c,h,u),p={size:f.w,min:n.left,max:n.right,padding:r.left},m={size:f.h,min:n.top,max:n.bottom,padding:r.top},y=$s(g.x,p)+a,x=$s(g.y,m)+l;return{x:y-s/2,y:x-o/2,x2:y+s/2,y2:x+o/2,centerX:y,centerY:x,pointX:g.x,pointY:g.y,width:s,height:o,rotation:no(d)}}function _d(i,t,e){const n=Math.cos(e),s=Math.sin(e);return{w:Math.abs(i*n)+Math.abs(t*s),h:Math.abs(i*s)+Math.abs(t*n)}}function wd(i,t,e,n){let s;const o=vd(i,n);return t.position==="start"?s=Ys({w:i.x2-i.x,h:i.y2-i.y},e,t,o):t.position==="end"?s=1-Ys({w:i.x-i.x2,h:i.y-i.y2},e,t,o):s=gn(1,t.position),s}function Ys(i,t,e,n){const{labelSize:s,padding:o}=t,r=i.w*n.dx,a=i.h*n.dy,l=r>0&&(s.w/2+o.left-n.x)/r,c=a>0&&(s.h/2+o.top-n.y)/a;return mi(Math.max(l,c),0,.25)}function vd(i,t){const{x:e,x2:n,y:s,y2:o}=i,r=Math.min(s,o)-t.top,a=Math.min(e,n)-t.left,l=t.bottom-Math.max(s,o),c=t.right-Math.max(e,n);return{x:Math.min(a,c),y:Math.min(r,l),dx:a<=c?1:-1,dy:r<=l?1:-1}}function $s(i,t){const{size:e,min:n,max:s,padding:o}=t,r=e/2;return e>s-n?(s+n)/2:(n>=i-o-r&&(i=n+o+r),s<=i+o+r&&(i=s-o-r),i)}function or(i){const t=i.options,e=t.arrowHeads&&t.arrowHeads.start,n=t.arrowHeads&&t.arrowHeads.end;return{startOpts:e,endOpts:n,startAdjust:Xs(i,e),endAdjust:Xs(i,n)}}function Xs(i,t){if(!t||!t.display)return 0;const{length:e,width:n}=t,s=i.options.borderWidth/2,o={x:e,y:n+s};return Math.abs(Yi(0,o,{x:0,y:s}))}function Ji(i,t,e,n){if(!n||!n.display)return;const{length:s,width:o,fill:r,backgroundColor:a,borderColor:l}=n,c=Math.abs(t-s)+e;i.beginPath(),Zt(i,n),pt(i,n),i.moveTo(c,-o),i.lineTo(t+e,0),i.lineTo(c,o),r===!0?(i.fillStyle=a||l,i.closePath(),i.fill(),i.shadowColor="transparent"):i.shadowColor=n.borderShadowColor,i.stroke()}function Sd(i,t,e){const{x:n,y:s,x2:o,y2:r,centerX:a,centerY:l}=i,c=Math.atan2(r-s,o-n),h=pn(t.controlPoint,0),d={x:a+vt(e,h.x,!1),y:l+vt(e,h.y,!1)};return Wt(d,{x:a,y:l},c)}function Js(i,{x:t,y:e},{angle:n,adjust:s},o){!o||!o.display||(i.save(),i.translate(t,e),i.rotate(n),Ji(i,0,-s,o),i.restore())}function kd(i,t,e,n){const{x:s,y:o,x2:r,y2:a,options:l}=t,{startOpts:c,endOpts:h,startAdjust:d,endAdjust:f}=or(t),u={x:s,y:o},g={x:r,y:a},p=Ns(u,e,g,0),m=Ns(u,e,g,1)-R,y=$i(u,e,g,d/n),x=$i(u,e,g,1-f/n),v=new Path2D;i.beginPath(),v.moveTo(y.x,y.y),v.quadraticCurveTo(e.x,e.y,x.x,x.y),i.shadowColor=l.borderShadowColor,i.stroke(v),t.path=v,t.ctx=i,Js(i,y,{angle:p,adjust:d},c),Js(i,x,{angle:m,adjust:f},h)}class Re extends q{inRange(t,e,n,s){const o=this.options.rotation,r=(this.options.borderWidth+this.options.hitTolerance)/2;if(n!=="x"&&n!=="y")return Md({x:t,y:e},this.getProps(["width","height","centerX","centerY"],s),o,r);const{x:a,y:l,x2:c,y2:h}=this.getProps(["x","y","x2","y2"],s),d=n==="y"?{start:l,end:h}:{start:a,end:c},f=Wt({x:t,y:e},this.getCenterPoint(s),V(-o));return f[n]>=d.start-r-At&&f[n]<=d.end+r+At}getCenterPoint(t){return Lt(this,t)}draw(t){const{width:e,height:n,centerX:s,centerY:o,options:r}=this;t.save(),yi(t,this.getCenterPoint(),r.rotation),Zt(t,this.options),t.beginPath(),t.fillStyle=r.backgroundColor;const a=pt(t,r);t.ellipse(s,o,n/2,e/2,R/2,0,2*R),t.fill(),a&&(t.shadowColor=r.borderShadowColor,t.stroke()),t.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(t,e){return ir(t,e)}}Re.id="ellipseAnnotation";Re.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Qt.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Re.defaultRoutes={borderColor:"color",backgroundColor:"color"};Re.descriptors={label:{_fallback:!0}};function Md(i,t,e,n){const{width:s,height:o,centerX:r,centerY:a}=t,l=s/2,c=o/2;if(l<=0||c<=0)return!1;const h=V(e||0),d=Math.cos(h),f=Math.sin(h),u=Math.pow(d*(i.x-r)+f*(i.y-a),2),g=Math.pow(f*(i.x-r)-d*(i.y-a),2);return u/Math.pow(l+n,2)+g/Math.pow(c+n,2)<=1.0001}class wi extends q{inRange(t,e,n,s){const{x:o,y:r,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],s),h=(this.options.borderWidth+this.options.hitTolerance)/2;return n!=="x"&&n!=="y"?xh({x:t,y:e},this.getCenterPoint(s),c/2,h):Lo(n==="y"?{start:r,end:l,value:e}:{start:o,end:a,value:t},h)}getCenterPoint(t){return Lt(this,t)}draw(t){const e=this.options,n=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,Zt(t,e);const s=pt(t,e);Th(t,this,this.centerX,this.centerY),s&&!bi(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=n}resolveElementProperties(t,e){const n=er(t,e);return n.initProperties=Gt(t,n,e),n}}wi.id="pointAnnotation";wi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};wi.defaultRoutes={borderColor:"color",backgroundColor:"color"};class vi extends q{inRange(t,e,n,s){if(n!=="x"&&n!=="y")return this.options.radius>=.1&&this.elements.length>1&&Td(this.elements,t,e,s);const o=Wt({x:t,y:e},this.getCenterPoint(s),V(-this.options.rotation)),r=this.elements.map(c=>n==="y"?c.bY:c.bX),a=Math.min(...r),l=Math.max(...r);return o[n]>=a&&o[n]<=l}getCenterPoint(t){return Lt(this,t)}draw(t){const{elements:e,options:n}=this;t.save(),t.beginPath(),t.fillStyle=n.backgroundColor,Zt(t,n);const s=pt(t,n);let o=!0;for(const r of e)o?(t.moveTo(r.x,r.y),o=!1):t.lineTo(r.x,r.y);t.closePath(),t.fill(),s&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){const n=er(t,e),{sides:s,rotation:o}=e,r=[],a=2*R/s;let l=o*tn;for(let c=0;c<s;c++,l+=a){const h=Cd(n,e,l);h.initProperties=Gt(t,n,e),r.push(h)}return n.elements=r,n}}vi.id="polygonAnnotation";vi.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};vi.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Cd({centerX:i,centerY:t},{radius:e,borderWidth:n,hitTolerance:s},o){const r=(n+s)/2,a=Math.sin(o),l=Math.cos(o),c={x:i+a*e,y:t-l*e};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:i+a*(e+r),bY:t-l*(e+r)}}}function Td(i,t,e,n){let s=!1,o=i[i.length-1].getProps(["bX","bY"],n);for(const r of i){const a=r.getProps(["bX","bY"],n);a.bY>e!=o.bY>e&&t<(o.bX-a.bX)*(e-a.bY)/(o.bY-a.bY)+a.bX&&(s=!s),o=a}return s}const wt={box:Qt,doughnutLabel:_i,ellipse:Re,label:Ae,line:Oe,point:wi,polygon:vi};Object.keys(wt).forEach(i=>{B.describe(`elements.${wt[i].id}`,{_fallback:"plugins.annotation.common"})});const Pd={update:Object.assign},Dd=bn.concat(hi),Us=(i,t)=>A(t)?qi(i,t):i,Ui=i=>i==="color"||i==="font";function xn(i="line"){return wt[i]?i:(console.warn(`Unknown annotation type: '${i}', defaulting to 'line'`),"line")}function Ad(i,t,e,n){const s=Rd(i,e.animations,n),o=t.annotations,r=zd(t.elements,o);for(let a=0;a<o.length;a++){const l=o[a],c=rr(r,a,l.type),h=l.setContext(Id(i,c,r,l)),d=c.resolveElementProperties(i,h);d.skip=Od(d),"elements"in d&&(jd(c,d.elements,h,s),delete d.elements),et(c.x)||Object.assign(c,d),Object.assign(c,d.initProperties),d.options=ar(h),s.update(c,d)}}function Od(i){return isNaN(i.x)||isNaN(i.y)}function Rd(i,t,e){return e==="reset"||e==="none"||e==="resize"?Pd:new dn(i,t)}function jd(i,t,e,n){const s=i.elements||(i.elements=[]);s.length=t.length;for(let o=0;o<t.length;o++){const r=t[o],a=r.properties,l=rr(s,o,r.type,r.initProperties),c=e[r.optionScope].override(r);a.options=ar(c),n.update(l,a)}}function rr(i,t,e,n){const s=wt[xn(e)];let o=i[t];return(!o||!(o instanceof s))&&(o=i[t]=new s,Object.assign(o,n)),o}function ar(i){const t=wt[xn(i.type)],e={};e.id=i.id,e.type=i.type,e.drawTime=i.drawTime,Object.assign(e,qi(i,t.defaults),qi(i,t.defaultRoutes));for(const n of Dd)e[n]=i[n];return e}function qi(i,t){const e={};for(const n of Object.keys(t)){const s=t[n],o=i[n];Ui(n)&&L(o)?e[n]=o.map(r=>Us(r,s)):e[n]=Us(o,s)}return e}function Id(i,t,e,n){return t.$context||(t.$context=Object.assign(Object.create(i.getContext()),{element:t,get elements(){return e.filter(s=>s&&s.options)},id:n.id,type:"annotation"}))}function zd(i,t){const e=t.length,n=i.length;if(n<e){const s=e-n;i.splice(n,0,...new Array(s))}else n>e&&i.splice(e,n-e);return i}var Ed="3.1.0";const yt=new Map,qs=i=>i.type!=="doughnutLabel",Wd=bn.concat(hi);var Ld={id:"annotation",version:Ed,beforeRegister(){_h("chart.js","4.0",Rt.version)},afterRegister(){Rt.register(wt)},afterUnregister(){Rt.unregister(wt)},beforeInit(i){yt.set(i,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(i,t,e){const n=yt.get(i),s=n.annotations=[];let o=e.annotations;A(o)?Object.keys(o).forEach(r=>{const a=o[r];A(a)&&(a.id=r,s.push(a))}):L(o)&&s.push(...o),td(s.filter(qs),i.scales)},afterDataLimits(i,t){const e=yt.get(i);Qh(i,t.scale,e.annotations.filter(qs).filter(n=>n.display&&n.adjustScaleRange))},afterUpdate(i,t,e){const n=yt.get(i);Uh(i,n,e),Ad(i,n,e,t.mode),n.visibleElements=n.elements.filter(s=>!s.skip&&s.options.display),Zh(i,n,e)},beforeDatasetsDraw(i,t,e){de(i,"beforeDatasetsDraw",e.clip)},afterDatasetsDraw(i,t,e){de(i,"afterDatasetsDraw",e.clip)},beforeDatasetDraw(i,t,e){de(i,t.index,e.clip)},beforeDraw(i,t,e){de(i,"beforeDraw",e.clip)},afterDraw(i,t,e){de(i,"afterDraw",e.clip)},beforeEvent(i,t,e){const n=yt.get(i);qh(n,t.event,e)&&(t.changed=!0)},afterDestroy(i){yt.delete(i)},getAnnotations(i){const t=yt.get(i);return t?t.elements:[]},_getAnnotationElementsAtEventForMode(i,t,e){return un(i,t,e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:i=>!Wd.includes(i)&&i!=="init",annotations:{_allKeys:!1,_fallback:(i,t)=>`elements.${wt[xn(t.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Ui,_fallback:!0},_indexable:Ui}},additionalOptionScopes:[""]};function de(i,t,e){const{ctx:n,chartArea:s}=i,o=yt.get(i);e&&di(n,s);const r=Bd(o.visibleElements,t).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of r)Fd(n,s,o,a);e&&fi(n)}function Bd(i,t){const e=[];for(const n of i)if(n.options.drawTime===t&&e.push({element:n,main:!0}),n.elements&&n.elements.length)for(const s of n.elements)s.options.display&&s.options.drawTime===t&&e.push({element:s});return e}function Fd(i,t,e,n){const s=n.element;n.main?(zs(e,s,"beforeDraw"),s.draw(i,t),zs(e,s,"afterDraw")):s.draw(i,t)}Rt.register(Ni,Hi,Qe,me,Xc,th,Yc,Ld);const Nd=()=>{const[i,t]=N.useState(.5),e=3,n=0,[s,o]=N.useState(5),[r,a]=N.useState(15),l=e*(1-i)+r*i,c=n*(1-i)+s*i,h=Array.from({length:101},(p,m)=>m/100),d=h.map(p=>e*(1-p)+r*p),f=h.map(p=>n*(1-p)+s*p),u={labels:h.map(p=>(p*100).toFixed(0)+"%"),datasets:[{label:"Cooperate with Jesse",data:d,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1},{label:"Defect against Jesse",data:f,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.1}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12}}},title:{display:!1},annotation:{annotations:{line1:{type:"line",xMin:i*100,xMax:i*100,borderColor:"rgba(0, 0, 0, 0.5)",borderWidth:2,borderDash:[5,5],label:{display:!1}}}}},scales:{x:{title:{display:!0,text:"How likely Jesse is to defect (%)",font:{size:11}},ticks:{maxTicksLimit:6,font:{size:10}}},y:{title:{display:!0,text:"Walter's expected prison sentence (years)",font:{size:11}},ticks:{font:{size:10}}}}};return b.jsxs("div",{className:w({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[b.jsx("h4",{className:w({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"When should Walter cooperate vs. defect against Jesse?"}),b.jsxs("p",{className:w({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"}),children:["We know that if ",b.jsx("strong",{children:"both cooperate, each gets 3 years"}),", and if"," ",b.jsx("strong",{children:"Walter defects while Jesse cooperates, Walter goes free (0 years)"}),". But what about the other scenarios? Adjust the sliders below to see when cooperation becomes Walters best choice."]}),b.jsxs("div",{className:w({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.8rem"}),children:[b.jsxs("div",{children:[b.jsxs("label",{children:[b.jsx("strong",{children:"If both defect:"})," ",s," years each"]}),b.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:s,onChange:p=>o(parseFloat(p.target.value)),className:w({width:"100%"})})]}),b.jsxs("div",{children:[b.jsxs("label",{children:[b.jsx("strong",{children:"If Jesse defects against Walter:"})," ",r," years for Walter"]}),b.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:r,onChange:p=>a(parseFloat(p.target.value)),className:w({width:"100%"})})]})]}),b.jsxs("div",{className:w({marginBottom:"1rem"}),children:[b.jsxs("label",{className:w({display:"block",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem",textAlign:"center"}),children:["How likely is Jesse to defect: ",b.jsxs("strong",{children:[(i*100).toFixed(0),"%"]})]}),b.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:p=>t(parseFloat(p.target.value)),className:w({width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",outline:"none",cursor:"pointer"})})]}),b.jsx("div",{className:w({height:"250px",marginBottom:"1rem"}),children:b.jsx(Wo,{data:u,options:g})}),b.jsxs("div",{className:w({backgroundColor:c<l?"#fef2f2":"#f0f9ff",border:c<l?"2px solid #dc2626":"2px solid #0066cc",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[b.jsxs("div",{className:w({textAlign:"center",fontSize:"1rem",fontWeight:"bold",color:c<l?"#dc2626":"#0066cc",marginBottom:"0.5rem"}),children:[" Walter's Rational Choice: ",c<l?"Defect":"Cooperate"]}),b.jsxs("div",{className:w({fontSize:"0.85rem",color:"#374151",textAlign:"center"}),children:["Expected outcome: ",b.jsxs("strong",{children:[Math.min(l,c).toFixed(1)," years in prison"]})]})]})]})};function lr(i,t){return i==="C"&&t==="C"?[3,3]:i==="C"&&t==="D"?[15,0]:i==="D"&&t==="C"?[0,15]:[5,5]}function cr(i,t,e){const n=["D","C"],s=[],o=[],r=[],a=[],l=[],c=[];let h=0,d=0;for(let f=0;f<i;f++){let u,g;switch(t){case"random":u=n[Math.floor(Math.random()*2)];break;case"defect":u="D";break;case"cooperate":u="C";break;case"tit-for-tat":u=f===0?"C":o[f-1];break}switch(e){case"random":g=n[Math.floor(Math.random()*2)];break;case"defect":g="D";break;case"cooperate":g="C";break;case"tit-for-tat":g=f===0?"C":s[f-1];break}const[p,m]=lr(u,g);s.push(u),o.push(g),r.push(p),a.push(m),h+=p,d+=m,l.push(h),c.push(d)}return{payoffs1:r,payoffs2:a,totalPayoffs1:l,totalPayoffs2:c}}const Hd=()=>{const[i,t]=N.useState(null),[e,n]=N.useState(null),[s,o]=N.useState(null),r=c=>{t(c);const h=Math.random()<.5?"C":"D";n(h);const[d,f]=lr(c,h);o({walterSentence:d,jesseSentence:f})},a=()=>{t(null),n(null),o(null)},l=(c,h)=>c==="D"&&h==="D"?"We both blame each other - 5 years each!":c==="D"&&h==="C"?"I betray Jesse - I walk free!":c==="C"&&h==="D"?"Jesse betrays me - I get 15 years!":"We both cooperate - 3 years each, best mutual outcome!";return b.jsxs("div",{className:w({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[b.jsx("h4",{className:w({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"Interactive Scenario: What do you do?"}),b.jsx("p",{className:w({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Jesse's decision will be simulated randomly after you choose."}),i?b.jsxs("div",{children:[b.jsxs("div",{className:w({textAlign:"center",marginBottom:"1rem"}),children:[b.jsxs("p",{className:w({fontSize:"0.9rem",color:"#374151",marginBottom:"0.5rem"}),children:[b.jsx("strong",{children:"My choice:"})," ",i==="D"?"Blame Jesse":"Cooperate"]}),b.jsxs("p",{className:w({fontSize:"0.9rem",color:"#6b7280",marginBottom:"0.5rem"}),children:[b.jsx("strong",{children:"Jesse's choice (simulated):"})," ",e==="D"?"Blame me":"Cooperate"]})]}),s&&b.jsxs("div",{className:w({padding:"0.75rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"#f9fafb",marginTop:"1rem"}),children:[b.jsx("p",{className:w({textAlign:"center",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem"}),children:l(i,e)}),b.jsxs("div",{className:w({display:"flex",justifyContent:"center",gap:"2rem",fontSize:"0.8rem",color:"#6b7280"}),children:[b.jsxs("div",{children:[b.jsx("strong",{children:"My sentence:"})," ",s.walterSentence===0?"Free":`${s.walterSentence} years`]}),b.jsxs("div",{children:[b.jsx("strong",{children:"Jesse's sentence:"})," ",s.jesseSentence===0?"Free":`${s.jesseSentence} years`]})]})]}),b.jsx("div",{className:w({textAlign:"center",marginTop:"1rem"}),children:b.jsx("button",{onClick:a,className:w({padding:"0.375rem 0.75rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"0.8rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#e5e7eb"}}),children:"Try again"})})]}):b.jsxs("div",{className:w({display:"flex",justifyContent:"center",gap:"1rem"}),children:[b.jsx("button",{onClick:()=>r("D"),className:w({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#1f2937"}}),children:"Blame Jesse"}),b.jsx("button",{onClick:()=>r("C"),className:w({padding:"0.5rem 1rem",backgroundColor:"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#0052a3"}}),children:"Cooperate"})]}),b.jsx("div",{className:w({marginTop:"1rem",fontSize:"0.7rem",color:"#9ca3af",textAlign:"center"}),children:b.jsx("p",{children:"Sentences: 0 years = immunity  3 years = mutual cooperation  5 years = mutual betrayal  15 years = betrayed while cooperating"})})]})},Vd=()=>{const[i,t]=N.useState("tit-for-tat"),e=50,[n,s]=N.useState(!1),[o,r]=N.useState(null),a={random:"Unpredictable - chaotic storylines with random decisions based on emotions and circumstances",cooperate:"Always Cooperate - stick with your partner no matter what (Season 1 Jesse approach)",defect:"Always selfish - prioritize yourself and betray when convenient (Season 5 Walter approach)","tit-for-tat":"Tit-for-Tat - realistic relationship, start cooperating then match whatever Jesse did last time"},l={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},c=()=>{s(!0);const f=["random","cooperate","defect","tit-for-tat"],u=f[Math.floor(Math.random()*f.length)],g=cr(e,i,u);r({...g,jesseStrategy:u}),s(!1)},d=(()=>{if(!o)return null;const f=o.totalPayoffs1[o.totalPayoffs1.length-1],u=o.totalPayoffs2[o.totalPayoffs2.length-1],g=f/e,p=u/e;let m=!1,y="";const x=g-p,v=x<-3,S=x>3;S?(m=!0,y=`Jesse consistently got better deals while you suffered. Average difference: ${x.toFixed(1)} years worse for you.`):v?(m=!0,y=`You consistently got better deals while Jesse suffered. Average difference: ${Math.abs(x).toFixed(1)} years worse for Jesse.`):i==="cooperate"&&p<4&&g>8&&(m=!0,y="You cooperated but Jesse took advantage of your cooperation repeatedly.");let _="",k="";return v?(_="Exploitative partnership - you're taking advantage of Jesse's cooperation.",k="#dc2626"):S?(_="You're being exploited - Jesse is getting better deals while you suffer.",k="#dc2626"):g<4&&p<4?(_="Excellent partnership! You're both doing well.",k="#10b981"):g<6&&p<6?(_="Decent cooperation with some conflicts.",k="#f59e0b"):g<10?(_="Troubled relationship with frequent betrayals.",k="#f97316"):(_="Toxic partnership - this relationship is falling apart.",k="#ef4444"),{verdict:_,color:k,walterAvg:g,jesseAvg:p,exploited:m,exploitationMessage:y}})();return b.jsxs("div",{className:w({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[b.jsx("h4",{className:w({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:" Walter's Strategy Simulator: How Will Your Partnership Play Out?"}),b.jsx("p",{className:w({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Choose your approach as Walter. Jesse's strategy will be randomly selected to simulate the uncertainty of working with a partner. Each simulation runs for 50 episodes (two seasons)."}),b.jsx("div",{className:w({marginBottom:"1rem"}),children:b.jsxs("div",{children:[b.jsx("label",{className:w({display:"block",fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.5rem",color:"#374151",textAlign:"center"}),children:"Walter's Strategy (You):"}),b.jsx("div",{className:w({display:"flex",justifyContent:"center"}),children:b.jsxs("select",{value:i,onChange:f=>t(f.target.value),className:w({width:"60%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),children:[b.jsx("option",{value:"tit-for-tat",children:"Tit-for-Tat"}),b.jsx("option",{value:"cooperate",children:"Always Cooperate"}),b.jsx("option",{value:"defect",children:"Always selfish"}),b.jsx("option",{value:"random",children:"Unpredictable"})]})}),b.jsx("p",{className:w({fontSize:"0.75rem",color:"#6b7280",marginTop:"0.5rem",lineHeight:"1.3",textAlign:"center"}),children:a[i]})]})}),b.jsx("div",{className:w({textAlign:"center",marginBottom:"1rem"}),children:b.jsx("button",{onClick:c,disabled:n,className:w({padding:"0.75rem 1.5rem",backgroundColor:n?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:n?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:n?"#9ca3af":"#0052a3"}}),children:n?" Filming the season...":" Start the Season"})}),o&&d&&b.jsxs("div",{className:w({marginTop:"1rem"}),children:[b.jsxs("div",{className:w({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}),children:[b.jsxs("div",{className:w({textAlign:"center",marginBottom:"1rem"}),children:[b.jsx("h5",{className:w({fontSize:"1rem",fontWeight:"bold",color:"#374151",marginBottom:"0.5rem"}),children:" Season Finale: Walter vs Jesse"}),b.jsxs("div",{className:w({display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center",margin:"1rem 0"}),children:[b.jsxs("div",{className:w({textAlign:"center",padding:"0.75rem",backgroundColor:"#dbeafe",borderRadius:"6px"}),children:[b.jsx("div",{className:w({fontSize:"0.85rem",fontWeight:"bold",color:"#1d4ed8"}),children:"Walter (You)"}),b.jsx("div",{className:w({fontSize:"0.75rem",color:"#3730a3",marginTop:"0.25rem"}),children:a[i].split(" - ")[0]})]}),b.jsx("div",{className:w({fontSize:"1.5rem",textAlign:"center"}),children:""}),b.jsxs("div",{className:w({textAlign:"center",padding:"0.75rem",backgroundColor:"#faf5ff",borderRadius:"6px",border:"2px solid #a855f7"}),children:[b.jsx("div",{className:w({fontSize:"0.85rem",fontWeight:"bold",color:"#7c3aed"}),children:"Jesse"}),b.jsx("div",{className:w({fontSize:"0.75rem",color:"#6b21a8",marginTop:"0.25rem"}),children:l[o.jesseStrategy].split(" - ")[0]})]})]})]}),b.jsxs("div",{className:w({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.85rem"}),children:[b.jsxs("div",{className:w({textAlign:"center"}),children:[b.jsxs("div",{className:w({color:"#2563eb",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.walterAvg.toFixed(1)," years"]}),b.jsx("div",{className:w({color:"#6b7280",fontSize:"0.75rem"}),children:"Walter's Average Sentence"}),b.jsxs("div",{className:w({color:"#2563eb",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",o.totalPayoffs1[o.totalPayoffs1.length-1]," years"]})]}),b.jsxs("div",{className:w({textAlign:"center"}),children:[b.jsxs("div",{className:w({color:"#7c3aed",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.jesseAvg.toFixed(1)," years"]}),b.jsx("div",{className:w({color:"#6b7280",fontSize:"0.75rem"}),children:"Jesse's Average Sentence"}),b.jsxs("div",{className:w({color:"#7c3aed",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",o.totalPayoffs2[o.totalPayoffs2.length-1]," years"]})]})]}),b.jsx("div",{className:w({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${d.color}`,marginBottom:"1rem"}),children:b.jsx("div",{className:w({color:d.color,fontWeight:"bold",fontSize:"0.9rem"}),children:d.verdict})})]}),b.jsxs("div",{className:w({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[b.jsx("h6",{className:w({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:" Cumulative Prison Sentences Over Time"}),b.jsx("div",{style:{position:"relative",height:"200px",width:"100%"},children:b.jsx(Wo,{data:{labels:Array.from({length:e},(f,u)=>`Episode ${u+1}`),datasets:[{label:"Walter (You)",data:o.totalPayoffs1,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",borderWidth:2,fill:!1},{label:"Jesse",data:o.totalPayoffs2,borderColor:"#7c3aed",backgroundColor:"rgba(124, 58, 237, 0.1)",borderWidth:2,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,font:{size:11}}}},scales:{x:{display:!1},y:{beginAtZero:!0,title:{display:!0,text:"Total Prison Years",font:{size:10}},ticks:{font:{size:10}}}},elements:{point:{radius:0}}}})}),b.jsx("p",{className:w({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.5rem"}),children:"Lower is better - shows how prison sentences accumulate as the partnership progresses"})]}),b.jsx("div",{className:w({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:" Try different strategies to see how they affect your partnership with Jesse"})]})]})},Yd=()=>{const[i,t]=N.useState(null),[e,n]=N.useState(!1),s=["random","cooperate","defect","tit-for-tat"],o={random:"Unpredictable",cooperate:"Always Cooperate",defect:"Always selfish","tit-for-tat":"Tit-for-Tat"},r={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},a=()=>{n(!0),setTimeout(()=>{const d={};s.forEach(f=>{d[f]={},s.forEach(u=>{const g=Array.from({length:50},()=>{const{totalPayoffs1:y,totalPayoffs2:x}=cr(100,f,u);return{score1:y[y.length-1],score2:x[x.length-1]}}),p=g.reduce((y,x)=>y+x.score1,0)/g.length,m=g.reduce((y,x)=>y+x.score2,0)/g.length;d[f][u]={avgScore1:p.toFixed(1),avgScore2:m.toFixed(1)}})}),t(d),n(!1)},2e3)},l=d=>{if(!i)return null;let f="tit-for-tat",u=parseFloat(i["tit-for-tat"][d].avgScore1);return s.forEach(g=>{const p=parseFloat(i[g][d].avgScore1);p<u&&(u=p,f=g)}),{strategy:f,score:u}},c=d=>d<4?"#10b981":d<6?"#f59e0b":d<10?"#f97316":"#ef4444",h=d=>d<4?"Excellent outcome":d<6?"Decent cooperation":d<10?"Troubled relationship":"Toxic partnership";return b.jsxs("div",{className:w({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[b.jsx("h4",{className:w({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:" Walter's Strategy Guide: How to Handle Different Types of Jesse"}),b.jsx("p",{className:w({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Analyzes how different Walter strategies perform against each type of Jesse over a full season (100 episodes, 50 simulations per matchup). Find the optimal approach for each Jesse personality."}),b.jsx("div",{className:w({textAlign:"center",marginBottom:"1.5rem"}),children:b.jsx("button",{onClick:a,disabled:e,className:w({padding:"0.75rem 1.5rem",backgroundColor:e?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:e?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:e?"#9ca3af":"#0052a3"}}),children:e?" Analyzing character dynamics...":" Analyze Breaking Bad Strategies"})}),i&&b.jsxs("div",{children:[b.jsx("div",{className:w({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"}),children:s.map(d=>{const f=l(d),u=f?c(f.score):"#6b7280",g=f?h(f.score):"";return b.jsxs("div",{className:w({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem"}),children:[b.jsxs("div",{className:w({textAlign:"center",marginBottom:"0.75rem"}),children:[b.jsxs("h6",{className:w({fontSize:"0.9rem",fontWeight:"bold",color:"#374151",marginBottom:"0.25rem"}),children:["If Jesse is: ",o[d]]}),b.jsx("p",{className:w({fontSize:"0.7rem",color:"#6b7280",lineHeight:"1.3"}),children:r[d]})]}),f&&b.jsxs("div",{className:w({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${u}`}),children:[b.jsxs("div",{className:w({color:u,fontWeight:"bold",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:[" Walter should be: ",o[f.strategy]]}),b.jsxs("div",{className:w({fontSize:"0.7rem",color:"#6b7280",marginBottom:"0.25rem"}),children:["Average: ",f.score," years prison"]}),b.jsx("div",{className:w({fontSize:"0.7rem",color:u,fontWeight:"medium"}),children:g})]})]},d)})}),b.jsxs("div",{className:w({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[b.jsx("h6",{className:w({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:" Detailed Results: Walter's Average Prison Sentence"}),b.jsx("div",{className:w({overflowX:"auto"}),children:b.jsxs("table",{className:w({width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"}),children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{className:w({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"left"}),children:"Walter's Strategy  / Jesse's Strategy "}),s.map(d=>b.jsx("th",{className:w({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"center"}),children:o[d]},d))]})}),b.jsx("tbody",{children:s.map(d=>b.jsxs("tr",{children:[b.jsx("td",{className:w({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",fontWeight:"medium"}),children:o[d]}),s.map(f=>{var p;const u=parseFloat(i[d][f].avgScore1),g=((p=l(f))==null?void 0:p.strategy)===d;return b.jsxs("td",{className:w({border:"1px solid #d1d5db",padding:"0.5rem",textAlign:"center",backgroundColor:g?"#f0f9ff":"white",fontWeight:g?"bold":"normal",color:g?"#0066cc":"#374151"}),children:[u.toFixed(1)," years",g&&b.jsx("div",{className:w({fontSize:"0.6rem",color:"#0066cc"}),children:" Best"})]},f)})]},d))})]})}),b.jsx("p",{className:w({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.75rem"}),children:"Lower numbers = better outcomes for Walter. Blue cells show the optimal Walter strategy for each Jesse type."})]}),b.jsx("div",{className:w({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:" Understanding your partner's behavior is key to choosing the right strategy in repeated games"})]})]})},rf=()=>b.jsxs("article",{className:"prose prose-lg max-w-none",children:[b.jsx("p",{children:"Why did the 2024 Nobel Prize in Economics go to researchers who study why some countries prosper with strong institutions while others dont? When I looked into the question, the answer turned out to be connected to a famous social game called the Prisoners Dilemma."}),b.jsxs("p",{children:["I had encountered the Prisoners Dilemma before as a single-game thought experiment, but the"," ",b.jsx("a",{href:"https://www.nobelprize.org/prizes/economic-sciences/2024/press-release/",children:"Nobel Prize work"}),` focuses on repeated interactions. When the same dilemma plays out over and over, questions like "Why should I pay taxes anyway?" or "Why should my country cut emissions if others won't?" become surprisingly complex strategic problems.`]}),b.jsx("p",{children:"To explore the dilemma, I wanted to work through its basic mechanics using a scenario that makes the challenges clear. This is why I chose to embed the discussion into the context of Breaking Bad, which felt like a perfect example."}),b.jsx("h2",{children:"Setting the scene with Breaking Bad"}),b.jsxs("p",{children:["The characters are: ",b.jsx("strong",{children:"Walter White"})," (high school chemistry teacher turned meth cook),"," ",b.jsx("strong",{children:"Jesse Pinkman"})," (Walters former student and business partner), and"," ",b.jsx("strong",{children:"Hank Schrader"})," (DEA agent)."]}),b.jsx("p",{children:"We can now consider these three characters in a standard scenario for prisoners: Walter White and Jesse Pinkman have been arrested by the DEA and are being interrogated separately. Agent Hank Schrader offers each the same deal: testify against your partner to get immunity, or stay silent and face whatever charges can be proven."}),b.jsx("p",{children:"This setuptwo people who must choose between cooperation and defection without being able to communicateprovides a clean framework for analyzing why mutually beneficial cooperation often breaks down."}),b.jsx("h3",{children:"The Breaking Bad scenario"}),b.jsxs("p",{children:["This is the ",b.jsx("strong",{children:"perfect"})," Prisoners Dilemma scenario. Walter and Jesse each have exactly two choices:"]}),b.jsxs("ul",{children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Cooperate (C)"}),': Stay loyal to your partner - "I dont know this person, weve never met."']}),b.jsxs("li",{children:[b.jsx("strong",{children:"Defect (D)"}),': Blame your partner - "He forced me into this, hes the real criminal."']})]}),b.jsx("p",{children:"The sentences depend on what both choose:"}),b.jsxs("ul",{children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Both cooperate (C, C)"}),": Each gets 3 years. The DEA has some evidence but not enough for major charges without testimony."]}),b.jsxs("li",{children:[b.jsx("strong",{children:"One blames the other (D, C)"}),': The betrayer walks free with immunity, the cooperator gets 15 years for "being the mastermind."']}),b.jsxs("li",{children:[b.jsx("strong",{children:"Both blame each other (D, D)"}),": Each gets 5 years. Their contradictory stories help neither case."]})]}),b.jsx("h3",{children:"The Dilemma Unfolds"}),b.jsx("p",{children:"Now try putting yourself in Walters position. Youre sitting across from DEA Agent Hank Schrader, knowing Jesse is in the next room facing the exact same choice. What goes through your mind?"}),b.jsx(Hd,{}),b.jsx("p",{children:'The interactive game above reveals something unsettling: theres a strong pull toward betrayal. You might find yourself thinking, "If I blame Jesse, I could walk free. What do I owe him anyway?" This gut reaction points to the heart of the dilemma.'}),b.jsx("h3",{children:"Two Ways to Think About It"}),b.jsxs("p",{children:[b.jsx("strong",{children:"The Team Perspective:"}),' If Walter and Jesse could step back and ask "Whats best for us together?", the answer is clear. Both cooperating (3 years each) beats both betraying (5 years each). Total time served: 6 years versus 10 years. Theyre partners against the DEA, not enemies.']}),b.jsxs("p",{children:[b.jsx("strong",{children:"The Individual Perspective:"}),' But heres where Walters mind would really go: "Whats best for ',b.jsx("em",{children:"me"}),'?" And thats where the mathematics becomes crucialand troubling.']}),b.jsx("h3",{children:"Walters Cold Calculation"}),b.jsx("p",{children:'Walter is, at heart, a high school chemistry teacher who thinks systematically. Hed probably work through the logic like this: "Let me figure out what Jesse might do, then decide accordingly."'}),b.jsx(ie,{remarkPlugins:[se],rehypePlugins:[ne],children:`

Suppose Walter estimates there's a probability *p* that Jesse will betray him. That means there's a probability *(1-p)* that Jesse cooperates.

**Walter's expected sentence if he cooperates:**
- If Jesse cooperates (probability 1-p): 3 years
- If Jesse betrays (probability p): 15 years  
- Expected sentence: 3(1-p) + 15p = 3 + 12p years

**Walter's expected sentence if he betrays Jesse:**
- If Jesse cooperates (probability 1-p): 0 years (Walter goes free)
- If Jesse betrays (probability p): 5 years
- Expected sentence: 0(1-p) + 5p = 5p years

For Walter to prefer cooperating, we'd need: 3 + 12p < 5p

Solving this: 3 < 5p - 12p = -7p

This gives us: p < -3/7

Since probabilities can't be negative, this condition is impossible to satisfy. **Walter should always betray Jesse, regardless of what he thinks Jesse will do.**

This is the mathematical heart of the Prisoner's Dilemma: individual rationality leads both players to a worse outcome than cooperation would provide. The outcome where both players 
betray is what game theorists call a ["Nash equilibrium"](https://en.wikipedia.org/wiki/Nash_equilibrium) - a stable situation where neither player can improve their payoff by unilaterally changing their strategy. Even though both would prefer mutual cooperation, neither wants to be the "sucker" who cooperates while the other defects.

### When Cooperation Becomes Rational

Walter's calculation revealed a stark conclusion: betrayal dominates in his specific situation. But this raises a deeper question: are there *any* circumstances where cooperation becomes the rational choice in a prisoner's dilemma?

Let's step back from Walter's specific numbers and examine how this logic applies to any prisoner's dilemma. Game theorists use a standard notation to describe these situations:

- **T** = Temptation payoff (what you get for defecting when your partner cooperates)
- **R** = Reward for mutual cooperation (what both get when both cooperate)  
- **P** = Punishment for mutual defection (what both get when both defect)
- **S** = Sucker's payoff (what you get for cooperating when your partner defects)

In Walter's case: T = 0 years (immunity), R = 3 years, P = 5 years, S = 15 years.

For any situation to be a true prisoner's dilemma, we need T < R < P and S is the worst outcome. Using this general framework, let's rewrite Walter's expected value calculation:

**Expected sentence when cooperating:**

$$E[\\text{Cooperate}] = R(1-p) + Sp = R + (S-R)p$$

**Expected sentence when defecting:**  
$$E[\\text{Defect}] = T(1-p) + Pp = T + (P-T)p$$

For cooperation to be rational, we'd need: 

$$
E[\\text{Cooperate}] < E[\\text{Defect}]
$$

This gives us the condition (where we assume T=0 for simplicity):

$$
\\begin{align*}
R + (S-R)p &< Pp \\\\
R &< (R+P-S)p \\\\
p &> \\frac{R}{R+P-S}
\\end{align*}
$$

We can directly see that this equation only makes sense if S < R+P, as we would be dealing with negative probabilities otherwise. This replicates the situation
we encountered previously and hence confirms our earlier conclusion that Walter should betray Jesse.

But notice what happens if we change the payoffs. We know that $p<1$, which directly implies that cooperation becomes a viable option for $S < P$. The condition above
tells us exactly when cooperation becomes rational, and the interactive plot below lets you explore how different scenarios affect this critical threshold. 
Try adjusting the payoff values to see how they change the probability at which cooperation becomes individually rational.

`}),b.jsx(Nd,{}),b.jsx(ie,{remarkPlugins:[se],rehypePlugins:[ne],children:`

As you can see from experimenting with the plot, the condition for rational cooperation depends critically on the relationship between the payoffs. When the punishment for mutual defection becomes severe enough relative to being betrayed, cooperation can emerge as the individually rational choice.

**Real-World Applications:**

The mathematical analysis reveals something surprising: Walter should only cooperate if the punishment for mutual defection (P) exceeds the punishment for being betrayed while cooperating (S). In our scenario, mutual defection gives 5 years each, while being the "sucker" gives 15 yearsso defection dominates.

But imagine if Walter and Jesse were part of a larger criminal organization. If both betray each other, they don't just get 5 years in prisonthey 
also face execution by the organization for breaking the code of silence. Suddenly, mutual defection might carry a sentence equivalent to 20+ years (or death), while being betrayed only gets you the original 15 years.

This explains why organized crime groups, military units, and tight-knit communities develop strong codes of loyalty: they artificially raise the cost of mutual defection to make cooperation individually rational.

### The Single Game Conclusion

In our DEA interrogation room, Walter's rational analysis points to one conclusion: betray Jesse. 
The general mathematical framework confirms this isn't unique to Walter's situationit's a fundamental feature of prisoner's dilemmas where the sucker's payoff is worse than mutual defection.

But Walter and Jesse don't just interact oncethey're partners in a long-running operation. What happens when the same dilemma repeats over multiple "episodes"? This is where the mathematics becomes more hopeful, and where we can explore whether reputation, trust, and reciprocity can overcome the pull of individual rationality.

`}),b.jsx(ie,{remarkPlugins:[se],rehypePlugins:[ne],children:`
## When Breaking Bad Becomes a Series: Repeated Interactions

Walter's rational analysis came to a depressing conclusion: in a single encounter, defection dominates. But this raises an important question: if everyone follows this logic, how does cooperation ever emerge in the real world?

### The Power of Repetition

The key insight is that repetition fundamentally changes the game. When Walter and Jesse know they'll face similar situations again, each decision carries weight beyond the immediate outcome. Future interactions create new incentives that can make cooperation rational even when it wouldn't be in a single encounter.

Consider Walter's strategic calculus now: "If I betray Jesse today, he'll remember that when we face our next crisis together. But if I stay loyal, maybe he'll reciprocate, and we'll both benefit in the long run." This forward-looking reasoning can make cooperation rational even when defection would be better in isolation.

The mathematical foundation is surprisingly simple: if both players value future payoffs enough (not discounting them too heavily), cooperative strategies can become Nash equilibria in repeated games. The exact threshold depends on the payoffs, but the principle holds broadly.

### Four Strategic Approaches

In repeated prisoner's dilemmas, players typically adopt consistent behavioral rules rather than making isolated decisions. Let's examine four fundamental strategies that capture different approaches to the cooperation-defection dilemma:

**1. Always Cooperate** (Season 1 Jesse approach)
- *Rule*: Stay loyal to your partner regardless of their past behavior
- *Logic*: Trust and loyalty should be unconditional
- *Risk*: Vulnerable to exploitation by defectors

**2. Always Defect** (Season 5 Walter approach)  
- *Rule*: Always prioritize self-interest, minimize your own sentence
- *Logic*: Others can't be trusted, so protect yourself first
- *Advantage*: Cannot be exploited, guarantees reasonable outcomes

**3. Tit-for-Tat** (Reciprocal relationship)
- *Rule*: Start by cooperating, then match whatever your partner did in the previous interaction
- *Logic*: Reward cooperation with cooperation, punish defection with defection
- *Balance*: Enables mutual benefit while deterring exploitation

**4. Random** (Unpredictable behavior)
- *Rule*: Make decisions based on emotions, circumstances, or chance
- *Logic*: Unpredictability might confuse opponents
- *Problem*: Cannot build trust or sustain beneficial patterns

### Interactive Strategy Exploration

These strategies aren't just theoreticalthey reflect real behavioral patterns we see in ongoing relationships. Let's explore how they perform when Walter and Jesse face repeated crises:
      `}),b.jsx(Vd,{}),b.jsx(ie,{remarkPlugins:[se],rehypePlugins:[ne],children:`


The simulation reveals key insights about repeated interactions:

- **Always cooperating** works well with trustworthy partners but becomes costly against defectors
- **Always defecting** provides security but forecloses opportunities for mutual benefit  
- **Tit-for-tat** balances cooperation and protection: starts nice, retaliates against betrayal, and forgives when partners return to cooperation
- **Random strategies** perform poorly because they can't build the consistent patterns needed for trust

 **Key Insight**: There's no universally "best" strategysuccess depends on what your opponent does.

### Systematic Strategy Comparison

To move beyond individual simulations, let's examine how these strategies perform when they face each other systematically. This approach mirrors the famous research by political scientist [Robert Axelrod](https://axelrod.readthedocs.io/en/fix-documentation/reference/description.html), who ran computer tournaments in the 1970s to identify the most successful strategies in repeated prisoner's dilemmas.

Axelrod's key finding was that "nice" strategies (those that never defect first) often outperformed "nasty" strategies, but only when the population included enough other cooperative players. The winning strategy in his tournament was tit-for-tatexactly the reciprocal approach we've been examining.

Let's run our own tournament to see how the Breaking Bad strategies fare against each other:
      `}),b.jsx(Yd,{}),b.jsx(ie,{remarkPlugins:[se],rehypePlugins:[ne],children:`

### Interpreting the Tournament Results

The tournament results reveal a crucial insight about repeated interactions: **the dominance of defection in single games doesn't necessarily carry over to repeated games**. Here's what the data typically shows:

**When Strategies Face Each Other:**
- **Tit-for-Tat vs. Always Cooperate**: Mutual cooperation emerges, both players benefit
- **Always Defect vs. Always Cooperate**: Defection exploits cooperation, creating large payoff differences  
- **Tit-for-Tat vs. Always Defect**: Initial cooperation is punished, leading to mutual defection
- **Random vs. Any Strategy**: Unpredictability prevents stable cooperation patterns

**Key Findings from Game Theory Research:**
1. **Nice strategies** (never defect first) can outperform nasty ones when there are enough cooperative players
2. **Retaliatory strategies** (punish defection) prevent exploitation better than unconditional cooperation
3. **Forgiving strategies** (return to cooperation after punishment) enable recovery from conflicts
4. **Clear strategies** (predictable rules) build trust better than complex or random approaches

This connects directly to Robert Axelrod's famous finding: tit-for-tat succeeded because it was nice, retaliatory, forgiving, and clear. It could cooperate with other cooperative strategies while defending against exploitative ones.

## Conclusion: What Walter and Jesse Taught Us

Walter and Jesse's predicament in that DEA interrogation room captures something profound about human cooperation. In a single interaction, both would be better off if they could trust each other to stay loyal (3 years each vs. 5 years each), yet individual rationality pushes them toward mutual betrayal (5 years each).

But as we've seen, repetition changes everything. When the same players expect to face similar situations again, strategies like tit-for-tat can sustain cooperation by making betrayal costly in the long run. The prospect of future interactions makes present cooperation rational.

However, our analysis also reveals why cooperation remains fragile. Always-defect strategies are surprisingly robustthey can't be exploited, even if they forgo mutual benefits. This explains why selfish behavior persists even in repeated interactions, and why building cooperative institutions requires careful design.

**This Walter-Jesse dynamic isn't unique to criminal partnerships**similar patterns appear throughout society whenever individual incentives conflict with group welfare:

- **Team Projects**: Each member faces the repeated choice between contributing effort or free-riding on others' work. Successful teams develop tit-for-tat norms: contribute when others do, withdraw effort when others slack.

- **Neighborhood Maintenance**: Each homeowner decides whether to maintain their property, knowing it affects everyone's property values. Communities with strong reciprocal norms (contribute to neighborhood appearance and receive social approval) maintain higher standards.

- **Climate Action**: Nations face repeated decisions about emissions, with each country's choices affecting all others. Successful climate agreements attempt to create tit-for-tat dynamics through monitoring and graduated sanctions.

- **International Trade**: Countries must repeatedly decide whether to honor agreements or pursue short-term advantages. Trade relationships prosper when nations adopt reciprocal strategiescooperation for cooperation, retaliation for cheating.

The mathematical insight is that **cooperation can emerge from purely self-interested behavior when interactions repeat and players value future outcomes**. We don't need to change human naturewe need to create institutional structures that make cooperation rational for self-interested individuals.

This brings us full circle to the Nobel Prize research that started our exploration. When institutions create repeated-game dynamics with clear rules, predictable enforcement, and expectations of ongoing interaction, even selfish individuals find cooperation profitable. When institutions fail to create these conditions, societies can become trapped in cycles of mistrust and mutual defectionexactly what we see in countries with weak governance and extractive institutions.
      `})]}),af={title:"The Prisoner's Dilemma",publishing_date:"2025-06-25",tokenID:30};export{rf as default,af as meta};
