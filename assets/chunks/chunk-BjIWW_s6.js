import{M as N,N as b,O as w,P as v,Q as A,R as E,T as S,U as _,r as f,V as C,j as e,w as n}from"./chunk-DspFOiA9.js";import{A as I,r as T}from"./chunk-CDsUcDsD.js";import{u as y,g as k,a as D,G as W,L as F}from"./chunk-DxyLn1b5.js";async function B(t,{account:o=t.account,message:s}){if(!o)throw new I({docsPath:"/docs/actions/wallet/signMessage"});const i=N(o);if(i.signMessage)return i.signMessage({message:s});const r=typeof s=="string"?b(s):s.raw instanceof Uint8Array?w(s.raw):s.raw;return t.request({method:"personal_sign",params:[r,i.address]},{retryCount:0})}function O(t,o={}){return{async queryFn({queryKey:s}){const i=o.abi;if(!i)throw new Error("abi is required");const{functionName:r,scopeKey:x,...d}=s[1],m=(()=>{const l=s[1];if(l.address)return{address:l.address};if(l.code)return{code:l.code};throw new Error("address or code is required")})();if(!r)throw new Error("functionName is required");return T(t,{abi:i,functionName:r,args:d.args,...m,...d})},queryKey:z(o)}}function z(t={}){const{abi:o,...s}=t;return["readContract",v(s)]}function Q(t={}){const{abi:o,address:s,functionName:i,query:r={}}=t,x=t.code,d=A(t),m=E({config:d}),l=O(d,{...t,chainId:t.chainId??m}),g=!!((s||x)&&o&&i&&(r.enabled??!0));return S({...r,...l,enabled:g,structuralSharing:r.structuralSharing??_})}const L=t=>{const o=t.split(":");return o.length===3?o[2]:null},R="/agent-registration.json",U={name:"",description:"",image:"",wallet:null,walletShort:null,genimgEndpoint:null,llmEndpoint:null,openApiUrl:null,supportedTrust:[],raw:null};function P(t={}){const{agentUrl:o=R,autoFetch:s=!0}=t,[i,r]=f.useState(U),[x,d]=f.useState(!1),[m,l]=f.useState(null),g=f.useCallback(async()=>{d(!0),l(null);try{const c=await fetch(o);if(!c.ok)throw new Error(`Failed to fetch agent registration: ${c.status}`);const a=await c.json(),u=a.endpoints.find(h=>h.name==="agentWallet")?.endpoint,p=u?L(u):null,j={name:a.name,description:a.description,image:a.image,wallet:p,walletShort:p?`${p.slice(0,6)}...${p.slice(-4)}`:null,genimgEndpoint:a.endpoints.find(h=>h.name==="genimg")?.endpoint||null,llmEndpoint:a.endpoints.find(h=>h.name==="llm")?.endpoint||null,openApiUrl:a.endpoints.find(h=>h.name==="OpenAPI")?.endpoint||null,supportedTrust:a.supportedTrust,raw:a};r(j)}catch(c){const a=c instanceof Error?c.message:"Unknown error fetching agent";l(a),console.error("Agent fetch error:",c)}finally{d(!1)}},[o]);return f.useEffect(()=>{s&&g()},[s,g]),{agent:i,isLoading:x,error:m,refetch:g}}function G({service:t="genimg",variant:o="footer"}){const[s,i]=f.useState(!1),{agent:r,isLoading:x,error:d}=P(),m=C({label:"imagegen.poweredBy"}),{network:l}=y(W),{network:g}=y(F),c=o==="sidebar";if(x)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.500",textAlign:c?"left":"center",mt:"2"}),children:[m," Optimism..."]});if(d||!r.wallet)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.600",textAlign:c?"left":"center",mt:"2"}),children:[m," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Optimism"})]});const a=t==="genimg"?r.genimgEndpoint:r.llmEndpoint,u=a?new URL(a).hostname:null,p=t==="genimg"?k(l):D(g);return c?e.jsxs("div",{className:n({fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"space-between",color:"gray.600",cursor:"pointer",_hover:{color:"gray.800"}}),onClick:()=>i(!s),children:[e.jsxs("span",{className:n({display:"flex",alignItems:"center",gap:"1"}),children:[e.jsx("span",{children:"ðŸ¤–"}),e.jsx("span",{className:n({fontFamily:"mono",color:"blue.600"}),children:r.walletShort})]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),s&&e.jsxs("div",{className:n({mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"20px",height:"20px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800",fontSize:"xs"}),children:r.name})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600",fontSize:"xs"}),children:[u&&e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Endpoint: "}),e.jsx("code",{className:n({fontFamily:"mono",color:"gray.700"}),children:u})]}),e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Trust: "}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",flexDirection:"column",gap:"1",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),p&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${p}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]}),e.jsx("a",{href:"/agent-onboarding/",className:n({display:"block",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200",color:"brand",textDecoration:"none",fontSize:"xs",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ†• Become a provider"})]}):e.jsxs("div",{className:n({mt:"2",fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"center",gap:"2",color:"gray.600"}),children:[e.jsxs("span",{className:n({cursor:"pointer",_hover:{color:"gray.800"},display:"inline-flex",alignItems:"center",gap:"2"}),onClick:()=>i(!s),children:[e.jsxs("span",{children:[m," Optimism"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:n({fontFamily:"mono",color:"blue.600",display:"inline-flex",alignItems:"center",gap:"1"}),title:`Agent: ${r.wallet}`,children:["ðŸ¤– ",r.walletShort]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),e.jsx("span",{children:"â€¢"}),e.jsx("a",{href:"/agent-onboarding/",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Add your agent â†’"})]}),s&&e.jsxs("div",{className:n({mt:"3",p:"3",bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"md",textAlign:"left"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"24px",height:"24px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800"}),children:r.name}),e.jsx("span",{className:n({ml:"auto",px:"2",py:"0.5",bg:"green.100",color:"green.700",borderRadius:"full",fontSize:"xs"}),children:"âœ“ Active"})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600"}),children:[e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Wallet:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700",wordBreak:"break-all"}),children:r.wallet})]}),u&&e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Endpoint:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700"}),children:u})]}),e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Trust:"}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",gap:"3",mt:"3",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),r.openApiUrl&&e.jsx("a",{href:r.openApiUrl,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“‹ OpenAPI Spec"}),p&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${p}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]})]})}export{G as A,B as s,Q as u};
