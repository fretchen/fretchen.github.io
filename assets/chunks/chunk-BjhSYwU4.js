import{y,z as N,A as b,r as m,C as v,j as e,w as n}from"./chunk-DmvswTr-.js";import{A as w}from"./chunk-B606wt9R.js";import{g as A,l as S}from"./chunk-CNgOLzuP.js";async function z(i,{account:a=i.account,message:s}){if(!a)throw new w({docsPath:"/docs/actions/wallet/signMessage"});const l=y(a);if(l.signMessage)return l.signMessage({message:s});const r=typeof s=="string"?N(s):s.raw instanceof Uint8Array?b(s.raw):s.raw;return i.request({method:"personal_sign",params:[r,l.address]},{retryCount:0})}const E=i=>{const a=i.split(":");return a.length===3?a[2]:null},C="/agent-registration.json",_={name:"",description:"",image:"",wallet:null,walletShort:null,genimgEndpoint:null,llmEndpoint:null,openApiUrl:null,supportedTrust:[],raw:null};function D(i={}){const{agentUrl:a=C,autoFetch:s=!0}=i,[l,r]=m.useState(_),[f,x]=m.useState(!1),[g,d]=m.useState(null),p=m.useCallback(async()=>{x(!0),d(null);try{const o=await fetch(a);if(!o.ok)throw new Error(`Failed to fetch agent registration: ${o.status}`);const t=await o.json(),u=t.endpoints.find(c=>c.name==="agentWallet")?.endpoint,h=u?E(u):null,j={name:t.name,description:t.description,image:t.image,wallet:h,walletShort:h?`${h.slice(0,6)}...${h.slice(-4)}`:null,genimgEndpoint:t.endpoints.find(c=>c.name==="genimg")?.endpoint||null,llmEndpoint:t.endpoints.find(c=>c.name==="llm")?.endpoint||null,openApiUrl:t.endpoints.find(c=>c.name==="OpenAPI")?.endpoint||null,supportedTrust:t.supportedTrust,raw:t};r(j)}catch(o){const t=o instanceof Error?o.message:"Unknown error fetching agent";d(t),console.error("Agent fetch error:",o)}finally{x(!1)}},[a]);return m.useEffect(()=>{s&&p()},[s,p]),{agent:l,isLoading:f,error:g,refetch:p}}function W({service:i="genimg",variant:a="footer"}){const[s,l]=m.useState(!1),{agent:r,isLoading:f,error:x}=D(),g=v({label:"imagegen.poweredBy"}),d=a==="sidebar";if(f)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.500",textAlign:d?"left":"center",mt:"2"}),children:[g," Optimism..."]});if(x||!r.wallet)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.600",textAlign:d?"left":"center",mt:"2"}),children:[g," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Optimism"})]});const p=i==="genimg"?r.genimgEndpoint:r.llmEndpoint,o=p?new URL(p).hostname:null,t=i==="genimg"?A.address:S.address;return d?e.jsxs("div",{className:n({fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"space-between",color:"gray.600",cursor:"pointer",_hover:{color:"gray.800"}}),onClick:()=>l(!s),children:[e.jsxs("span",{className:n({display:"flex",alignItems:"center",gap:"1"}),children:[e.jsx("span",{children:"ðŸ¤–"}),e.jsx("span",{className:n({fontFamily:"mono",color:"blue.600"}),children:r.walletShort})]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),s&&e.jsxs("div",{className:n({mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"20px",height:"20px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800",fontSize:"xs"}),children:r.name})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600",fontSize:"xs"}),children:[o&&e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Endpoint: "}),e.jsx("code",{className:n({fontFamily:"mono",color:"gray.700"}),children:o})]}),e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Trust: "}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",flexDirection:"column",gap:"1",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),t&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${t}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]}),e.jsx("a",{href:"/agent-onboarding/",className:n({display:"block",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200",color:"brand",textDecoration:"none",fontSize:"xs",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ†• Become a provider"})]}):e.jsxs("div",{className:n({mt:"2",fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"center",gap:"2",color:"gray.600"}),children:[e.jsxs("span",{className:n({cursor:"pointer",_hover:{color:"gray.800"},display:"inline-flex",alignItems:"center",gap:"2"}),onClick:()=>l(!s),children:[e.jsxs("span",{children:[g," Optimism"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:n({fontFamily:"mono",color:"blue.600",display:"inline-flex",alignItems:"center",gap:"1"}),title:`Agent: ${r.wallet}`,children:["ðŸ¤– ",r.walletShort]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),e.jsx("span",{children:"â€¢"}),e.jsx("a",{href:"/agent-onboarding/",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Add your agent â†’"})]}),s&&e.jsxs("div",{className:n({mt:"3",p:"3",bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"md",textAlign:"left"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"24px",height:"24px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800"}),children:r.name}),e.jsx("span",{className:n({ml:"auto",px:"2",py:"0.5",bg:"green.100",color:"green.700",borderRadius:"full",fontSize:"xs"}),children:"âœ“ Active"})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600"}),children:[e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Wallet:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700",wordBreak:"break-all"}),children:r.wallet})]}),o&&e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Endpoint:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700"}),children:o})]}),e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Trust:"}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",gap:"3",mt:"3",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),r.openApiUrl&&e.jsx("a",{href:r.openApiUrl,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“‹ OpenAPI Spec"}),t&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${t}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]})]})}export{W as A,z as s};
