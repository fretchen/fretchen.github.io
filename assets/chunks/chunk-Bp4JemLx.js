const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-jnzJBBj2.js","assets/chunks/chunk-ETYCELfk.js","assets/chunks/chunk-CtTzrfVU.js","assets/static/vike-react-9c9f96f4.BcWtY8Ol.css","assets/static/layouts_style-b34a8e57.D8B4iL9t.css","assets/static/layouts_panda-c5b34b81.CV8UWsF_.css","assets/chunks/chunk-DRgEv4WX.js","assets/chunks/chunk-DXE_3V0h.js","assets/chunks/chunk-DEtOIP_z.js","assets/chunks/chunk-D8a241Zo.js","assets/chunks/chunk-BnGJDgHI.js","assets/static/katex-afcc0501.-PCUNDC-.css","assets/chunks/chunk-BAob7-BJ.js","assets/chunks/chunk-D5JS5SeU.js","assets/chunks/chunk-BFRAHB11.js","assets/chunks/chunk-hhwF28KP.js","assets/chunks/chunk-B9W4oiv_.js","assets/chunks/chunk-4-6f7spc.js","assets/chunks/chunk-BgxK-UXt.js","assets/chunks/chunk-CK8mMtyx.js","assets/chunks/chunk-Bm1txeZN.js","assets/chunks/chunk-CCCIdvel.js","assets/chunks/chunk-koLrDGuz.js","assets/chunks/chunk-D0oOL_O5.js","assets/chunks/chunk-C19IkP6e.js","assets/chunks/chunk-Dy59IJPR.js","assets/chunks/chunk-BrqMLr9B.js","assets/chunks/chunk-BMToxxnj.js","assets/chunks/chunk-CraNESBI.js","assets/chunks/chunk-D8M8z0nc.js","assets/chunks/chunk-Czqx0-Ds.js","assets/chunks/chunk-B99zaibj.js","assets/chunks/chunk-B9z2ZVFc.js","assets/chunks/chunk-Gi6I4Gst.js","assets/chunks/chunk-C4B-KCzX.js","assets/chunks/chunk-CKyA-B4i.js","assets/chunks/chunk-C5aK-hbc.js","assets/chunks/chunk-Rw8fTCEW.js","assets/chunks/chunk-DO4YpjyP.js","assets/chunks/chunk-B3eQ_ba4.js","assets/chunks/chunk-BQuT2Sni.js","assets/chunks/chunk-BMWuKsf7.js","assets/chunks/chunk-DLEMFQjW.js","assets/chunks/chunk-DvtK-ZOT.js","assets/chunks/chunk-BHPJ2YhP.js","assets/chunks/chunk-RPrisssf.js","assets/chunks/chunk-DUmRX6vr.js","assets/chunks/chunk-e6bJLZxO.js","assets/chunks/chunk-CwV0TLfP.js","assets/chunks/chunk-BiJt0Ile.js","assets/chunks/chunk-KbN_Uvxm.js","assets/chunks/chunk-CLJUOUAx.js","assets/chunks/chunk-B6vbOnME.js","assets/chunks/chunk-CbNutYQ2.js","assets/chunks/chunk-0luMpL6x.js","assets/chunks/chunk-C-yDx5yH.js","assets/chunks/chunk-B_VTizGO.js","assets/chunks/chunk-DZe2Lwku.js","assets/chunks/chunk-DRgxaV-K.js","assets/chunks/chunk-BL5cFjpd.js"])))=>i.map(i=>d[i]);
import{ch as wg,ah as c_,r as ae,j as y,c as Y}from"./chunk-CtTzrfVU.js";import{r as h_}from"./chunk-BgxK-UXt.js";import{_ as Tt}from"./chunk-ETYCELfk.js";var _s={exports:{}},wo,Mu;function Ma(){if(Mu)return wo;Mu=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,n=e-6;return wo={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:n,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},wo}var vo={},Co,$u;function $a(){return $u||($u=1,Co=typeof process=="object"&&vo&&vo.NODE_DEBUG&&/\bsemver\b/i.test(vo.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),Co}var Iu;function rs(){return Iu||(Iu=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=Ma(),s=$a();e=t.exports={};const o=e.re=[],a=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],h=e.t={};let u=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",n],[d,i]],p=b=>{for(const[x,_]of f)b=b.split(`${x}*`).join(`${x}{0,${_}}`).split(`${x}+`).join(`${x}{1,${_}}`);return b},g=(b,x,_)=>{const T=p(x),C=u++;s(b,C,x),h[b]=C,l[C]=x,c[C]=T,o[C]=new RegExp(x,_?"g":void 0),a[C]=new RegExp(T,_?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),g("FULL",`^${l[h.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),g("LOOSE",`^${l[h.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),g("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${l[h.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[h.COERCEPLAIN]+`(?:${l[h.PRERELEASE]})?(?:${l[h.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[h.COERCE],!0),g("COERCERTLFULL",l[h.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(_s,_s.exports)),_s.exports}var So,Ou;function rh(){if(Ou)return So;Ou=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return So=i=>i?typeof i!="object"?t:i:e,So}var ko,Pu;function vg(){if(Pu)return ko;Pu=1;const t=/^[0-9]+$/,e=(i,n)=>{const s=t.test(i),o=t.test(n);return s&&o&&(i=+i,n=+n),i===n?0:s&&!o?-1:o&&!s?1:i<n?-1:1};return ko={compareIdentifiers:e,rcompareIdentifiers:(i,n)=>e(n,i)},ko}var To,Fu;function de(){if(Fu)return To;Fu=1;const t=$a(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=Ma(),{safeRe:i,t:n}=rs(),s=rh(),{compareIdentifiers:o}=vg();class a{constructor(c,h){if(h=s(h),c instanceof a){if(c.loose===!!h.loose&&c.includePrerelease===!!h.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",c,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const u=c.trim().match(h.loose?i[n.LOOSE]:i[n.FULL]);if(!u)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const f=+d;if(f>=0&&f<r)return f}return d}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(t("SemVer.compare",this.version,this.options,c),!(c instanceof a)){if(typeof c=="string"&&c===this.version)return 0;c=new a(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof a||(c=new a(c,this.options)),o(this.major,c.major)||o(this.minor,c.minor)||o(this.patch,c.patch)}comparePre(c){if(c instanceof a||(c=new a(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let h=0;do{const u=this.prerelease[h],d=c.prerelease[h];if(t("prerelease compare",h,u,d),u===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(u===void 0)return-1;if(u===d)continue;return o(u,d)}while(++h)}compareBuild(c){c instanceof a||(c=new a(c,this.options));let h=0;do{const u=this.build[h],d=c.build[h];if(t("build compare",h,u,d),u===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(u===void 0)return-1;if(u===d)continue;return o(u,d)}while(++h)}inc(c,h,u){if(c.startsWith("pre")){if(!h&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const d=`-${h}`.match(this.options.loose?i[n.PRERELEASELOOSE]:i[n.PRERELEASE]);if(!d||d[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,u),this.inc("pre",h,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,u),this.inc("pre",h,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[d];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(h===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(h){let f=[h,d];u===!1&&(f=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return To=a,To}var Eo,Nu;function Gi(){if(Nu)return Eo;Nu=1;const t=de();return Eo=(r,i,n=!1)=>{if(r instanceof t)return r;try{return new t(r,i)}catch(s){if(!n)return null;throw s}},Eo}var Ao,ju;function u_(){if(ju)return Ao;ju=1;const t=Gi();return Ao=(r,i)=>{const n=t(r,i);return n?n.version:null},Ao}var Lo,Du;function d_(){if(Du)return Lo;Du=1;const t=Gi();return Lo=(r,i)=>{const n=t(r.trim().replace(/^[=v]+/,""),i);return n?n.version:null},Lo}var Bo,qu;function f_(){if(qu)return Bo;qu=1;const t=de();return Bo=(r,i,n,s,o)=>{typeof n=="string"&&(o=s,s=n,n=void 0);try{return new t(r instanceof t?r.version:r,n).inc(i,s,o).version}catch{return null}},Bo}var Ro,Hu;function p_(){if(Hu)return Ro;Hu=1;const t=Gi();return Ro=(r,i)=>{const n=t(r,null,!0),s=t(i,null,!0),o=n.compare(s);if(o===0)return null;const a=o>0,l=a?n:s,c=a?s:n,h=!!l.prerelease.length;if(!!c.prerelease.length&&!h){if(!c.patch&&!c.minor)return"major";if(c.compareMain(l)===0)return c.minor&&!c.patch?"minor":"patch"}const d=h?"pre":"";return n.major!==s.major?d+"major":n.minor!==s.minor?d+"minor":n.patch!==s.patch?d+"patch":"prerelease"},Ro}var Mo,zu;function g_(){if(zu)return Mo;zu=1;const t=de();return Mo=(r,i)=>new t(r,i).major,Mo}var $o,Wu;function m_(){if(Wu)return $o;Wu=1;const t=de();return $o=(r,i)=>new t(r,i).minor,$o}var Io,Uu;function y_(){if(Uu)return Io;Uu=1;const t=de();return Io=(r,i)=>new t(r,i).patch,Io}var Oo,Vu;function b_(){if(Vu)return Oo;Vu=1;const t=Gi();return Oo=(r,i)=>{const n=t(r,i);return n&&n.prerelease.length?n.prerelease:null},Oo}var Po,Gu;function He(){if(Gu)return Po;Gu=1;const t=de();return Po=(r,i,n)=>new t(r,n).compare(new t(i,n)),Po}var Fo,Yu;function x_(){if(Yu)return Fo;Yu=1;const t=He();return Fo=(r,i,n)=>t(i,r,n),Fo}var No,Xu;function __(){if(Xu)return No;Xu=1;const t=He();return No=(r,i)=>t(r,i,!0),No}var jo,Ju;function ih(){if(Ju)return jo;Ju=1;const t=de();return jo=(r,i,n)=>{const s=new t(r,n),o=new t(i,n);return s.compare(o)||s.compareBuild(o)},jo}var Do,Ku;function w_(){if(Ku)return Do;Ku=1;const t=ih();return Do=(r,i)=>r.sort((n,s)=>t(n,s,i)),Do}var qo,Zu;function v_(){if(Zu)return qo;Zu=1;const t=ih();return qo=(r,i)=>r.sort((n,s)=>t(s,n,i)),qo}var Ho,Qu;function Ia(){if(Qu)return Ho;Qu=1;const t=He();return Ho=(r,i,n)=>t(r,i,n)>0,Ho}var zo,td;function nh(){if(td)return zo;td=1;const t=He();return zo=(r,i,n)=>t(r,i,n)<0,zo}var Wo,ed;function Cg(){if(ed)return Wo;ed=1;const t=He();return Wo=(r,i,n)=>t(r,i,n)===0,Wo}var Uo,rd;function Sg(){if(rd)return Uo;rd=1;const t=He();return Uo=(r,i,n)=>t(r,i,n)!==0,Uo}var Vo,id;function sh(){if(id)return Vo;id=1;const t=He();return Vo=(r,i,n)=>t(r,i,n)>=0,Vo}var Go,nd;function ah(){if(nd)return Go;nd=1;const t=He();return Go=(r,i,n)=>t(r,i,n)<=0,Go}var Yo,sd;function kg(){if(sd)return Yo;sd=1;const t=Cg(),e=Sg(),r=Ia(),i=sh(),n=nh(),s=ah();return Yo=(a,l,c,h)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a===c;case"!==":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a!==c;case"":case"=":case"==":return t(a,c,h);case"!=":return e(a,c,h);case">":return r(a,c,h);case">=":return i(a,c,h);case"<":return n(a,c,h);case"<=":return s(a,c,h);default:throw new TypeError(`Invalid operator: ${l}`)}},Yo}var Xo,ad;function C_(){if(ad)return Xo;ad=1;const t=de(),e=Gi(),{safeRe:r,t:i}=rs();return Xo=(s,o)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?r[i.COERCEFULL]:r[i.COERCE]);else{const f=o.includePrerelease?r[i.COERCERTLFULL]:r[i.COERCERTL];let p;for(;(p=f.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||p.index+p[0].length!==a.index+a[0].length)&&(a=p),f.lastIndex=p.index+p[1].length+p[2].length;f.lastIndex=-1}if(a===null)return null;const l=a[2],c=a[3]||"0",h=a[4]||"0",u=o.includePrerelease&&a[5]?`-${a[5]}`:"",d=o.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${l}.${c}.${h}${u}${d}`,o)},Xo}var Jo,od;function S_(){if(od)return Jo;od=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const i=this.map.get(r);if(i!==void 0)return this.map.delete(r),this.map.set(r,i),i}delete(r){return this.map.delete(r)}set(r,i){if(!this.delete(r)&&i!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(r,i)}return this}}return Jo=t,Jo}var Ko,ld;function ze(){if(ld)return Ko;ld=1;const t=/\s+/g;class e{constructor(S,L){if(L=n(L),S instanceof e)return S.loose===!!L.loose&&S.includePrerelease===!!L.includePrerelease?S:new e(S.raw,L);if(S instanceof s)return this.raw=S.value,this.set=[[S]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=S.trim().replace(t," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(j=>!g(j[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&b(j[0])){this.set=[j];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let S=0;S<this.set.length;S++){S>0&&(this.formatted+="||");const L=this.set[S];for(let N=0;N<L.length;N++)N>0&&(this.formatted+=" "),this.formatted+=L[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(S){const N=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+S,j=i.get(N);if(j)return j;const B=this.options.loose,A=B?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];S=S.replace(A,z(this.options.includePrerelease)),o("hyphen replace",S),S=S.replace(l[c.COMPARATORTRIM],h),o("comparator trim",S),S=S.replace(l[c.TILDETRIM],u),o("tilde trim",S),S=S.replace(l[c.CARETTRIM],d),o("caret trim",S);let q=S.split(" ").map(F=>_(F,this.options)).join(" ").split(/\s+/).map(F=>E(F,this.options));B&&(q=q.filter(F=>(o("loose invalid filter",F,this.options),!!F.match(l[c.COMPARATORLOOSE])))),o("range list",q);const W=new Map,U=q.map(F=>new s(F,this.options));for(const F of U){if(g(F))return[F];W.set(F.value,F)}W.size>1&&W.has("")&&W.delete("");const $=[...W.values()];return i.set(N,$),$}intersects(S,L){if(!(S instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>x(N,L)&&S.set.some(j=>x(j,L)&&N.every(B=>j.every(A=>B.intersects(A,L)))))}test(S){if(!S)return!1;if(typeof S=="string")try{S=new a(S,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(I(this.set[L],S,this.options))return!0;return!1}}Ko=e;const r=S_(),i=new r,n=rh(),s=Oa(),o=$a(),a=de(),{safeRe:l,t:c,comparatorTrimReplace:h,tildeTrimReplace:u,caretTrimReplace:d}=rs(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=Ma(),g=k=>k.value==="<0.0.0-0",b=k=>k.value==="",x=(k,S)=>{let L=!0;const N=k.slice();let j=N.pop();for(;L&&N.length;)L=N.every(B=>j.intersects(B,S)),j=N.pop();return L},_=(k,S)=>(o("comp",k,S),k=R(k,S),o("caret",k),k=C(k,S),o("tildes",k),k=O(k,S),o("xrange",k),k=w(k,S),o("stars",k),k),T=k=>!k||k.toLowerCase()==="x"||k==="*",C=(k,S)=>k.trim().split(/\s+/).map(L=>v(L,S)).join(" "),v=(k,S)=>{const L=S.loose?l[c.TILDELOOSE]:l[c.TILDE];return k.replace(L,(N,j,B,A,q)=>{o("tilde",k,N,j,B,A,q);let W;return T(j)?W="":T(B)?W=`>=${j}.0.0 <${+j+1}.0.0-0`:T(A)?W=`>=${j}.${B}.0 <${j}.${+B+1}.0-0`:q?(o("replaceTilde pr",q),W=`>=${j}.${B}.${A}-${q} <${j}.${+B+1}.0-0`):W=`>=${j}.${B}.${A} <${j}.${+B+1}.0-0`,o("tilde return",W),W})},R=(k,S)=>k.trim().split(/\s+/).map(L=>M(L,S)).join(" "),M=(k,S)=>{o("caret",k,S);const L=S.loose?l[c.CARETLOOSE]:l[c.CARET],N=S.includePrerelease?"-0":"";return k.replace(L,(j,B,A,q,W)=>{o("caret",k,j,B,A,q,W);let U;return T(B)?U="":T(A)?U=`>=${B}.0.0${N} <${+B+1}.0.0-0`:T(q)?B==="0"?U=`>=${B}.${A}.0${N} <${B}.${+A+1}.0-0`:U=`>=${B}.${A}.0${N} <${+B+1}.0.0-0`:W?(o("replaceCaret pr",W),B==="0"?A==="0"?U=`>=${B}.${A}.${q}-${W} <${B}.${A}.${+q+1}-0`:U=`>=${B}.${A}.${q}-${W} <${B}.${+A+1}.0-0`:U=`>=${B}.${A}.${q}-${W} <${+B+1}.0.0-0`):(o("no pr"),B==="0"?A==="0"?U=`>=${B}.${A}.${q}${N} <${B}.${A}.${+q+1}-0`:U=`>=${B}.${A}.${q}${N} <${B}.${+A+1}.0-0`:U=`>=${B}.${A}.${q} <${+B+1}.0.0-0`),o("caret return",U),U})},O=(k,S)=>(o("replaceXRanges",k,S),k.split(/\s+/).map(L=>P(L,S)).join(" ")),P=(k,S)=>{k=k.trim();const L=S.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return k.replace(L,(N,j,B,A,q,W)=>{o("xRange",k,N,j,B,A,q,W);const U=T(B),$=U||T(A),F=$||T(q),V=F;return j==="="&&V&&(j=""),W=S.includePrerelease?"-0":"",U?j===">"||j==="<"?N="<0.0.0-0":N="*":j&&V?($&&(A=0),q=0,j===">"?(j=">=",$?(B=+B+1,A=0,q=0):(A=+A+1,q=0)):j==="<="&&(j="<",$?B=+B+1:A=+A+1),j==="<"&&(W="-0"),N=`${j+B}.${A}.${q}${W}`):$?N=`>=${B}.0.0${W} <${+B+1}.0.0-0`:F&&(N=`>=${B}.${A}.0${W} <${B}.${+A+1}.0-0`),o("xRange return",N),N})},w=(k,S)=>(o("replaceStars",k,S),k.trim().replace(l[c.STAR],"")),E=(k,S)=>(o("replaceGTE0",k,S),k.trim().replace(l[S.includePrerelease?c.GTE0PRE:c.GTE0],"")),z=k=>(S,L,N,j,B,A,q,W,U,$,F,V)=>(T(N)?L="":T(j)?L=`>=${N}.0.0${k?"-0":""}`:T(B)?L=`>=${N}.${j}.0${k?"-0":""}`:A?L=`>=${L}`:L=`>=${L}${k?"-0":""}`,T(U)?W="":T($)?W=`<${+U+1}.0.0-0`:T(F)?W=`<${U}.${+$+1}.0-0`:V?W=`<=${U}.${$}.${F}-${V}`:k?W=`<${U}.${$}.${+F+1}-0`:W=`<=${W}`,`${L} ${W}`.trim()),I=(k,S,L)=>{for(let N=0;N<k.length;N++)if(!k[N].test(S))return!1;if(S.prerelease.length&&!L.includePrerelease){for(let N=0;N<k.length;N++)if(o(k[N].semver),k[N].semver!==s.ANY&&k[N].semver.prerelease.length>0){const j=k[N].semver;if(j.major===S.major&&j.minor===S.minor&&j.patch===S.patch)return!0}return!1}return!0};return Ko}var Zo,cd;function Oa(){if(cd)return Zo;cd=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(h,u){if(u=r(u),h instanceof e){if(h.loose===!!u.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),o("comparator",h,u),this.options=u,this.loose=!!u.loose,this.parse(h),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(h){const u=this.options.loose?i[n.COMPARATORLOOSE]:i[n.COMPARATOR],d=h.match(u);if(!d)throw new TypeError(`Invalid comparator: ${h}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(h){if(o("Comparator.test",h,this.options.loose),this.semver===t||h===t)return!0;if(typeof h=="string")try{h=new a(h,this.options)}catch{return!1}return s(h,this.operator,this.semver,this.options)}intersects(h,u){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(h.value,u).test(this.value):h.operator===""?h.value===""?!0:new l(this.value,u).test(h.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||s(this.semver,"<",h.semver,u)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||s(this.semver,">",h.semver,u)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}Zo=e;const r=rh(),{safeRe:i,t:n}=rs(),s=kg(),o=$a(),a=de(),l=ze();return Zo}var Qo,hd;function Pa(){if(hd)return Qo;hd=1;const t=ze();return Qo=(r,i,n)=>{try{i=new t(i,n)}catch{return!1}return i.test(r)},Qo}var tl,ud;function k_(){if(ud)return tl;ud=1;const t=ze();return tl=(r,i)=>new t(r,i).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" ")),tl}var el,dd;function T_(){if(dd)return el;dd=1;const t=de(),e=ze();return el=(i,n,s)=>{let o=null,a=null,l=null;try{l=new e(n,s)}catch{return null}return i.forEach(c=>{l.test(c)&&(!o||a.compare(c)===-1)&&(o=c,a=new t(o,s))}),o},el}var rl,fd;function E_(){if(fd)return rl;fd=1;const t=de(),e=ze();return rl=(i,n,s)=>{let o=null,a=null,l=null;try{l=new e(n,s)}catch{return null}return i.forEach(c=>{l.test(c)&&(!o||a.compare(c)===1)&&(o=c,a=new t(o,s))}),o},rl}var il,pd;function A_(){if(pd)return il;pd=1;const t=de(),e=ze(),r=Ia();return il=(n,s)=>{n=new e(n,s);let o=new t("0.0.0");if(n.test(o)||(o=new t("0.0.0-0"),n.test(o)))return o;o=null;for(let a=0;a<n.set.length;++a){const l=n.set[a];let c=null;l.forEach(h=>{const u=new t(h.semver.version);switch(h.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!c||r(u,c))&&(c=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),c&&(!o||r(o,c))&&(o=c)}return o&&n.test(o)?o:null},il}var nl,gd;function L_(){if(gd)return nl;gd=1;const t=ze();return nl=(r,i)=>{try{return new t(r,i).range||"*"}catch{return null}},nl}var sl,md;function oh(){if(md)return sl;md=1;const t=de(),e=Oa(),{ANY:r}=e,i=ze(),n=Pa(),s=Ia(),o=nh(),a=ah(),l=sh();return sl=(h,u,d,f)=>{h=new t(h,f),u=new i(u,f);let p,g,b,x,_;switch(d){case">":p=s,g=a,b=o,x=">",_=">=";break;case"<":p=o,g=l,b=s,x="<",_="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(h,u,f))return!1;for(let T=0;T<u.set.length;++T){const C=u.set[T];let v=null,R=null;if(C.forEach(M=>{M.semver===r&&(M=new e(">=0.0.0")),v=v||M,R=R||M,p(M.semver,v.semver,f)?v=M:b(M.semver,R.semver,f)&&(R=M)}),v.operator===x||v.operator===_||(!R.operator||R.operator===x)&&g(h,R.semver))return!1;if(R.operator===_&&b(h,R.semver))return!1}return!0},sl}var al,yd;function B_(){if(yd)return al;yd=1;const t=oh();return al=(r,i,n)=>t(r,i,">",n),al}var ol,bd;function R_(){if(bd)return ol;bd=1;const t=oh();return ol=(r,i,n)=>t(r,i,"<",n),ol}var ll,xd;function M_(){if(xd)return ll;xd=1;const t=ze();return ll=(r,i,n)=>(r=new t(r,n),i=new t(i,n),r.intersects(i,n)),ll}var cl,_d;function $_(){if(_d)return cl;_d=1;const t=Pa(),e=He();return cl=(r,i,n)=>{const s=[];let o=null,a=null;const l=r.sort((d,f)=>e(d,f,n));for(const d of l)t(d,i,n)?(a=d,o||(o=d)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const c=[];for(const[d,f]of s)d===f?c.push(d):!f&&d===l[0]?c.push("*"):f?d===l[0]?c.push(`<=${f}`):c.push(`${d} - ${f}`):c.push(`>=${d}`);const h=c.join(" || "),u=typeof i.raw=="string"?i.raw:String(i);return h.length<u.length?h:i},cl}var hl,wd;function I_(){if(wd)return hl;wd=1;const t=ze(),e=Oa(),{ANY:r}=e,i=Pa(),n=He(),s=(u,d,f={})=>{if(u===d)return!0;u=new t(u,f),d=new t(d,f);let p=!1;t:for(const g of u.set){for(const b of d.set){const x=l(g,b,f);if(p=p||x!==null,x)continue t}if(p)return!1}return!0},o=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],l=(u,d,f)=>{if(u===d)return!0;if(u.length===1&&u[0].semver===r){if(d.length===1&&d[0].semver===r)return!0;f.includePrerelease?u=o:u=a}if(d.length===1&&d[0].semver===r){if(f.includePrerelease)return!0;d=a}const p=new Set;let g,b;for(const O of u)O.operator===">"||O.operator===">="?g=c(g,O,f):O.operator==="<"||O.operator==="<="?b=h(b,O,f):p.add(O.semver);if(p.size>1)return null;let x;if(g&&b){if(x=n(g.semver,b.semver,f),x>0)return null;if(x===0&&(g.operator!==">="||b.operator!=="<="))return null}for(const O of p){if(g&&!i(O,String(g),f)||b&&!i(O,String(b),f))return null;for(const P of d)if(!i(O,String(P),f))return!1;return!0}let _,T,C,v,R=b&&!f.includePrerelease&&b.semver.prerelease.length?b.semver:!1,M=g&&!f.includePrerelease&&g.semver.prerelease.length?g.semver:!1;R&&R.prerelease.length===1&&b.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const O of d){if(v=v||O.operator===">"||O.operator===">=",C=C||O.operator==="<"||O.operator==="<=",g){if(M&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===M.major&&O.semver.minor===M.minor&&O.semver.patch===M.patch&&(M=!1),O.operator===">"||O.operator===">="){if(_=c(g,O,f),_===O&&_!==g)return!1}else if(g.operator===">="&&!i(g.semver,String(O),f))return!1}if(b){if(R&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===R.major&&O.semver.minor===R.minor&&O.semver.patch===R.patch&&(R=!1),O.operator==="<"||O.operator==="<="){if(T=h(b,O,f),T===O&&T!==b)return!1}else if(b.operator==="<="&&!i(b.semver,String(O),f))return!1}if(!O.operator&&(b||g)&&x!==0)return!1}return!(g&&C&&!b&&x!==0||b&&v&&!g&&x!==0||M||R)},c=(u,d,f)=>{if(!u)return d;const p=n(u.semver,d.semver,f);return p>0?u:p<0||d.operator===">"&&u.operator===">="?d:u},h=(u,d,f)=>{if(!u)return d;const p=n(u.semver,d.semver,f);return p<0?u:p>0||d.operator==="<"&&u.operator==="<="?d:u};return hl=s,hl}var ul,vd;function O_(){if(vd)return ul;vd=1;const t=rs(),e=Ma(),r=de(),i=vg(),n=Gi(),s=u_(),o=d_(),a=f_(),l=p_(),c=g_(),h=m_(),u=y_(),d=b_(),f=He(),p=x_(),g=__(),b=ih(),x=w_(),_=v_(),T=Ia(),C=nh(),v=Cg(),R=Sg(),M=sh(),O=ah(),P=kg(),w=C_(),E=Oa(),z=ze(),I=Pa(),k=k_(),S=T_(),L=E_(),N=A_(),j=L_(),B=oh(),A=B_(),q=R_(),W=M_(),U=$_(),$=I_();return ul={parse:n,valid:s,clean:o,inc:a,diff:l,major:c,minor:h,patch:u,prerelease:d,compare:f,rcompare:p,compareLoose:g,compareBuild:b,sort:x,rsort:_,gt:T,lt:C,eq:v,neq:R,gte:M,lte:O,cmp:P,coerce:w,Comparator:E,Range:z,satisfies:I,toComparators:k,maxSatisfying:S,minSatisfying:L,minVersion:N,validRange:j,outside:B,gtr:A,ltr:q,intersects:W,simplifyRange:U,subset:$,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},ul}var Lt={},yt={},Cd;function P_(){if(Cd)return yt;Cd=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.toBig=yt.shrSL=yt.shrSH=yt.rotrSL=yt.rotrSH=yt.rotrBL=yt.rotrBH=yt.rotr32L=yt.rotr32H=yt.rotlSL=yt.rotlSH=yt.rotlBL=yt.rotlBH=yt.add5L=yt.add5H=yt.add4L=yt.add4H=yt.add3L=yt.add3H=void 0,yt.add=x,yt.fromBig=r,yt.split=i;const t=BigInt(2**32-1),e=BigInt(32);function r(P,w=!1){return w?{h:Number(P&t),l:Number(P>>e&t)}:{h:Number(P>>e&t)|0,l:Number(P&t)|0}}function i(P,w=!1){const E=P.length;let z=new Uint32Array(E),I=new Uint32Array(E);for(let k=0;k<E;k++){const{h:S,l:L}=r(P[k],w);[z[k],I[k]]=[S,L]}return[z,I]}const n=(P,w)=>BigInt(P>>>0)<<e|BigInt(w>>>0);yt.toBig=n;const s=(P,w,E)=>P>>>E;yt.shrSH=s;const o=(P,w,E)=>P<<32-E|w>>>E;yt.shrSL=o;const a=(P,w,E)=>P>>>E|w<<32-E;yt.rotrSH=a;const l=(P,w,E)=>P<<32-E|w>>>E;yt.rotrSL=l;const c=(P,w,E)=>P<<64-E|w>>>E-32;yt.rotrBH=c;const h=(P,w,E)=>P>>>E-32|w<<64-E;yt.rotrBL=h;const u=(P,w)=>w;yt.rotr32H=u;const d=(P,w)=>P;yt.rotr32L=d;const f=(P,w,E)=>P<<E|w>>>32-E;yt.rotlSH=f;const p=(P,w,E)=>w<<E|P>>>32-E;yt.rotlSL=p;const g=(P,w,E)=>w<<E-32|P>>>64-E;yt.rotlBH=g;const b=(P,w,E)=>P<<E-32|w>>>64-E;yt.rotlBL=b;function x(P,w,E,z){const I=(w>>>0)+(z>>>0);return{h:P+E+(I/2**32|0)|0,l:I|0}}const _=(P,w,E)=>(P>>>0)+(w>>>0)+(E>>>0);yt.add3L=_;const T=(P,w,E,z)=>w+E+z+(P/2**32|0)|0;yt.add3H=T;const C=(P,w,E,z)=>(P>>>0)+(w>>>0)+(E>>>0)+(z>>>0);yt.add4L=C;const v=(P,w,E,z,I)=>w+E+z+I+(P/2**32|0)|0;yt.add4H=v;const R=(P,w,E,z,I)=>(P>>>0)+(w>>>0)+(E>>>0)+(z>>>0)+(I>>>0);yt.add5L=R;const M=(P,w,E,z,I,k)=>w+E+z+I+k+(P/2**32|0)|0;yt.add5H=M;const O={fromBig:r,split:i,toBig:n,shrSH:s,shrSL:o,rotrSH:a,rotrSL:l,rotrBH:c,rotrBL:h,rotr32H:u,rotr32L:d,rotlSH:f,rotlSL:p,rotlBH:g,rotlBL:b,add:x,add3L:_,add3H:T,add4L:C,add4H:v,add5H:M,add5L:R};return yt.default=O,yt}var dl={},sn={},Sd;function F_(){return Sd||(Sd=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.crypto=void 0,sn.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),sn}var kd;function Js(){return kd||(kd=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=i,t.abytes=n,t.ahash=s,t.aexists=o,t.aoutput=a,t.u8=l,t.u32=c,t.clean=h,t.createView=u,t.rotr=d,t.rotl=f,t.byteSwap=p,t.byteSwap32=g,t.bytesToHex=_,t.hexToBytes=v,t.asyncLoop=M,t.utf8ToBytes=O,t.bytesToUtf8=P,t.toBytes=w,t.kdfInputToBytes=E,t.concatBytes=z,t.checkOpts=I,t.createHasher=S,t.createOptHasher=L,t.createXOFer=N,t.randomBytes=j;const e=F_();function r(B){return B instanceof Uint8Array||ArrayBuffer.isView(B)&&B.constructor.name==="Uint8Array"}function i(B){if(!Number.isSafeInteger(B)||B<0)throw new Error("positive integer expected, got "+B)}function n(B,...A){if(!r(B))throw new Error("Uint8Array expected");if(A.length>0&&!A.includes(B.length))throw new Error("Uint8Array expected of length "+A+", got length="+B.length)}function s(B){if(typeof B!="function"||typeof B.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");i(B.outputLen),i(B.blockLen)}function o(B,A=!0){if(B.destroyed)throw new Error("Hash instance has been destroyed");if(A&&B.finished)throw new Error("Hash#digest() has already been called")}function a(B,A){n(B);const q=A.outputLen;if(B.length<q)throw new Error("digestInto() expects output buffer of length at least "+q)}function l(B){return new Uint8Array(B.buffer,B.byteOffset,B.byteLength)}function c(B){return new Uint32Array(B.buffer,B.byteOffset,Math.floor(B.byteLength/4))}function h(...B){for(let A=0;A<B.length;A++)B[A].fill(0)}function u(B){return new DataView(B.buffer,B.byteOffset,B.byteLength)}function d(B,A){return B<<32-A|B>>>A}function f(B,A){return B<<A|B>>>32-A>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(B){return B<<24&4278190080|B<<8&16711680|B>>>8&65280|B>>>24&255}t.swap8IfBE=t.isLE?B=>B:B=>p(B),t.byteSwapIfBE=t.swap8IfBE;function g(B){for(let A=0;A<B.length;A++)B[A]=p(B[A]);return B}t.swap32IfBE=t.isLE?B=>B:g;const b=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",x=Array.from({length:256},(B,A)=>A.toString(16).padStart(2,"0"));function _(B){if(n(B),b)return B.toHex();let A="";for(let q=0;q<B.length;q++)A+=x[B[q]];return A}const T={_0:48,_9:57,A:65,F:70,a:97,f:102};function C(B){if(B>=T._0&&B<=T._9)return B-T._0;if(B>=T.A&&B<=T.F)return B-(T.A-10);if(B>=T.a&&B<=T.f)return B-(T.a-10)}function v(B){if(typeof B!="string")throw new Error("hex string expected, got "+typeof B);if(b)return Uint8Array.fromHex(B);const A=B.length,q=A/2;if(A%2)throw new Error("hex string expected, got unpadded hex of length "+A);const W=new Uint8Array(q);for(let U=0,$=0;U<q;U++,$+=2){const F=C(B.charCodeAt($)),V=C(B.charCodeAt($+1));if(F===void 0||V===void 0){const K=B[$]+B[$+1];throw new Error('hex string expected, got non-hex character "'+K+'" at index '+$)}W[U]=F*16+V}return W}const R=async()=>{};t.nextTick=R;async function M(B,A,q){let W=Date.now();for(let U=0;U<B;U++){q(U);const $=Date.now()-W;$>=0&&$<A||(await(0,t.nextTick)(),W+=$)}}function O(B){if(typeof B!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(B))}function P(B){return new TextDecoder().decode(B)}function w(B){return typeof B=="string"&&(B=O(B)),n(B),B}function E(B){return typeof B=="string"&&(B=O(B)),n(B),B}function z(...B){let A=0;for(let W=0;W<B.length;W++){const U=B[W];n(U),A+=U.length}const q=new Uint8Array(A);for(let W=0,U=0;W<B.length;W++){const $=B[W];q.set($,U),U+=$.length}return q}function I(B,A){if(A!==void 0&&{}.toString.call(A)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(B,A)}class k{}t.Hash=k;function S(B){const A=W=>B().update(w(W)).digest(),q=B();return A.outputLen=q.outputLen,A.blockLen=q.blockLen,A.create=()=>B(),A}function L(B){const A=(W,U)=>B(U).update(w(W)).digest(),q=B({});return A.outputLen=q.outputLen,A.blockLen=q.blockLen,A.create=W=>B(W),A}function N(B){const A=(W,U)=>B(U).update(w(W)).digest(),q=B({});return A.outputLen=q.outputLen,A.blockLen=q.blockLen,A.create=W=>B(W),A}t.wrapConstructor=S,t.wrapConstructorWithOpts=L,t.wrapXOFConstructorWithOpts=N;function j(B=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(B));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(B));throw new Error("crypto.getRandomValues must be defined")}}(dl)),dl}var Td;function Tg(){if(Td)return Lt;Td=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.shake256=Lt.shake128=Lt.keccak_512=Lt.keccak_384=Lt.keccak_256=Lt.keccak_224=Lt.sha3_512=Lt.sha3_384=Lt.sha3_256=Lt.sha3_224=Lt.Keccak=void 0,Lt.keccakP=b;const t=P_(),e=Js(),r=BigInt(0),i=BigInt(1),n=BigInt(2),s=BigInt(7),o=BigInt(256),a=BigInt(113),l=[],c=[],h=[];for(let C=0,v=i,R=1,M=0;C<24;C++){[R,M]=[M,(2*R+3*M)%5],l.push(2*(5*M+R)),c.push((C+1)*(C+2)/2%64);let O=r;for(let P=0;P<7;P++)v=(v<<i^(v>>s)*a)%o,v&n&&(O^=i<<(i<<BigInt(P))-i);h.push(O)}const u=(0,t.split)(h,!0),d=u[0],f=u[1],p=(C,v,R)=>R>32?(0,t.rotlBH)(C,v,R):(0,t.rotlSH)(C,v,R),g=(C,v,R)=>R>32?(0,t.rotlBL)(C,v,R):(0,t.rotlSL)(C,v,R);function b(C,v=24){const R=new Uint32Array(10);for(let M=24-v;M<24;M++){for(let w=0;w<10;w++)R[w]=C[w]^C[w+10]^C[w+20]^C[w+30]^C[w+40];for(let w=0;w<10;w+=2){const E=(w+8)%10,z=(w+2)%10,I=R[z],k=R[z+1],S=p(I,k,1)^R[E],L=g(I,k,1)^R[E+1];for(let N=0;N<50;N+=10)C[w+N]^=S,C[w+N+1]^=L}let O=C[2],P=C[3];for(let w=0;w<24;w++){const E=c[w],z=p(O,P,E),I=g(O,P,E),k=l[w];O=C[k],P=C[k+1],C[k]=z,C[k+1]=I}for(let w=0;w<50;w+=10){for(let E=0;E<10;E++)R[E]=C[w+E];for(let E=0;E<10;E++)C[w+E]^=~R[(E+2)%10]&R[(E+4)%10]}C[0]^=d[M],C[1]^=f[M]}(0,e.clean)(R)}class x extends e.Hash{constructor(v,R,M,O=!1,P=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=v,this.suffix=R,this.outputLen=M,this.enableXOF=O,this.rounds=P,(0,e.anumber)(M),!(0<v&&v<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),b(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(v){(0,e.aexists)(this),v=(0,e.toBytes)(v),(0,e.abytes)(v);const{blockLen:R,state:M}=this,O=v.length;for(let P=0;P<O;){const w=Math.min(R-this.pos,O-P);for(let E=0;E<w;E++)M[this.pos++]^=v[P++];this.pos===R&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:v,suffix:R,pos:M,blockLen:O}=this;v[M]^=R,(R&128)!==0&&M===O-1&&this.keccak(),v[O-1]^=128,this.keccak()}writeInto(v){(0,e.aexists)(this,!1),(0,e.abytes)(v),this.finish();const R=this.state,{blockLen:M}=this;for(let O=0,P=v.length;O<P;){this.posOut>=M&&this.keccak();const w=Math.min(M-this.posOut,P-O);v.set(R.subarray(this.posOut,this.posOut+w),O),this.posOut+=w,O+=w}return v}xofInto(v){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(v)}xof(v){return(0,e.anumber)(v),this.xofInto(new Uint8Array(v))}digestInto(v){if((0,e.aoutput)(v,this),this.finished)throw new Error("digest() was already called");return this.writeInto(v),this.destroy(),v}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(v){const{blockLen:R,suffix:M,outputLen:O,rounds:P,enableXOF:w}=this;return v||(v=new x(R,M,O,w,P)),v.state32.set(this.state32),v.pos=this.pos,v.posOut=this.posOut,v.finished=this.finished,v.rounds=P,v.suffix=M,v.outputLen=O,v.enableXOF=w,v.destroyed=this.destroyed,v}}Lt.Keccak=x;const _=(C,v,R)=>(0,e.createHasher)(()=>new x(v,C,R));Lt.sha3_224=_(6,144,224/8),Lt.sha3_256=_(6,136,256/8),Lt.sha3_384=_(6,104,384/8),Lt.sha3_512=_(6,72,512/8),Lt.keccak_224=_(1,144,224/8),Lt.keccak_256=_(1,136,256/8),Lt.keccak_384=_(1,104,384/8),Lt.keccak_512=_(1,72,512/8);const T=(C,v,R)=>(0,e.createXOFer)((M={})=>new x(v,C,M.dkLen===void 0?R:M.dkLen,!0));return Lt.shake128=T(31,168,128/8),Lt.shake256=T(31,136,256/8),Lt}var fl={},Nr={},jr={},pl={},Dr={},Be={},qr={},an={},Ed;function Eg(){if(Ed)return an;Ed=1,Object.defineProperty(an,"__esModule",{value:!0}),an.StructError=void 0;class t extends TypeError{constructor(r,i){let n;const{message:s,explanation:o,...a}=r,{path:l}=r,c=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[r,...i()])}}return an.StructError=t,an}var Ut={},Vt={},Ad;function Fa(){if(Ad)return Vt;Ad=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.run=Vt.toFailures=Vt.toFailure=Vt.shiftIterator=Vt.print=Vt.isPlainObject=Vt.isObject=void 0;function t(l){return e(l)&&typeof l[Symbol.iterator]=="function"}function e(l){return typeof l=="object"&&l!==null}Vt.isObject=e;function r(l){if(Object.prototype.toString.call(l)!=="[object Object]")return!1;const c=Object.getPrototypeOf(l);return c===null||c===Object.prototype}Vt.isPlainObject=r;function i(l){return typeof l=="symbol"?l.toString():typeof l=="string"?JSON.stringify(l):`${l}`}Vt.print=i;function n(l){const{done:c,value:h}=l.next();return c?void 0:h}Vt.shiftIterator=n;function s(l,c,h,u){if(l===!0)return;l===!1?l={}:typeof l=="string"&&(l={message:l});const{path:d,branch:f}=c,{type:p}=h,{refinement:g,message:b=`Expected a value of type \`${p}\`${g?` with refinement \`${g}\``:""}, but received: \`${i(u)}\``}=l;return{value:u,type:p,refinement:g,key:d[d.length-1],path:d,branch:f,...l,message:b}}Vt.toFailure=s;function*o(l,c,h,u){t(l)||(l=[l]);for(const d of l){const f=s(d,c,h,u);f&&(yield f)}}Vt.toFailures=o;function*a(l,c,h={}){const{path:u=[],branch:d=[l],coerce:f=!1,mask:p=!1}=h,g={path:u,branch:d};if(f&&(l=c.coercer(l,g),p&&c.type!=="type"&&e(c.schema)&&e(l)&&!Array.isArray(l)))for(const x in l)c.schema[x]===void 0&&delete l[x];let b="valid";for(const x of c.validator(l,g))x.explanation=h.message,b="not_valid",yield[x,void 0];for(let[x,_,T]of c.entries(l,g)){const C=a(_,T,{path:x===void 0?u:[...u,x],branch:x===void 0?d:[...d,_],coerce:f,mask:p,message:h.message});for(const v of C)v[0]?(b=v[0].refinement===null||v[0].refinement===void 0?"not_valid":"not_refined",yield[v[0],void 0]):f&&(_=v[1],x===void 0?l=_:l instanceof Map?l.set(x,_):l instanceof Set?l.add(_):e(l)&&(_!==void 0||x in l)&&(l[x]=_))}if(b!=="not_valid")for(const x of c.refiner(l,g))x.explanation=h.message,b="not_refined",yield[x,void 0];b==="valid"&&(yield[void 0,l])}return Vt.run=a,Vt}var Ld;function is(){if(Ld)return Ut;Ld=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.validate=Ut.is=Ut.mask=Ut.create=Ut.assert=Ut.ExactOptionalStruct=Ut.Struct=void 0;const t=Eg(),e=Fa();class r{constructor(u){const{type:d,schema:f,validator:p,refiner:g,coercer:b=_=>_,entries:x=function*(){}}=u;this.type=d,this.schema=f,this.entries=x,this.coercer=b,p?this.validator=(_,T)=>{const C=p(_,T);return(0,e.toFailures)(C,T,this,_)}:this.validator=()=>[],g?this.refiner=(_,T)=>{const C=g(_,T);return(0,e.toFailures)(C,T,this,_)}:this.refiner=()=>[]}assert(u,d){return s(u,this,d)}create(u,d){return o(u,this,d)}is(u){return l(u,this)}mask(u,d){return a(u,this,d)}validate(u,d={}){return c(u,this,d)}}Ut.Struct=r;const i="EXACT_OPTIONAL";class n extends r{constructor(u){super({...u,type:`exact optional ${u.type}`}),this.brand=i}static isExactOptional(u){return(0,e.isObject)(u)&&"brand"in u&&u.brand===i}}Ut.ExactOptionalStruct=n;function s(h,u,d){const f=c(h,u,{message:d});if(f[0])throw f[0]}Ut.assert=s;function o(h,u,d){const f=c(h,u,{coerce:!0,message:d});if(f[0])throw f[0];return f[1]}Ut.create=o;function a(h,u,d){const f=c(h,u,{coerce:!0,mask:!0,message:d});if(f[0])throw f[0];return f[1]}Ut.mask=a;function l(h,u){return!c(h,u)[0]}Ut.is=l;function c(h,u,d={}){const f=(0,e.run)(h,u,d),p=(0,e.shiftIterator)(f);return p[0]?[new t.StructError(p[0],function*(){for(const x of f)x[0]&&(yield x[0])}),void 0]:[void 0,p[1]]}return Ut.validate=c,Ut}var ar={},ct={},jt={},Bd;function Ag(){if(Bd)return jt;Bd=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.pick=jt.partial=jt.omit=jt.lazy=jt.dynamic=jt.deprecated=jt.define=jt.assign=void 0;const t=is(),e=lh();function r(...h){const u=h[0]?.type==="type",d=h.map(({schema:p})=>p),f=Object.assign({},...d);return u?(0,e.type)(f):(0,e.object)(f)}jt.assign=r;function i(h,u){return new t.Struct({type:h,schema:null,validator:u})}jt.define=i;function n(h,u){return new t.Struct({...h,refiner:(d,f)=>d===void 0||h.refiner(d,f),validator(d,f){return d===void 0?!0:(u(d,f),h.validator(d,f))}})}jt.deprecated=n;function s(h){return new t.Struct({type:"dynamic",schema:null,*entries(u,d){yield*h(u,d).entries(u,d)},validator(u,d){return h(u,d).validator(u,d)},coercer(u,d){return h(u,d).coercer(u,d)},refiner(u,d){return h(u,d).refiner(u,d)}})}jt.dynamic=s;function o(h){let u;return new t.Struct({type:"lazy",schema:null,*entries(d,f){u??(u=h()),yield*u.entries(d,f)},validator(d,f){return u??(u=h()),u.validator(d,f)},coercer(d,f){return u??(u=h()),u.coercer(d,f)},refiner(d,f){return u??(u=h()),u.refiner(d,f)}})}jt.lazy=o;function a(h,u){const{schema:d}=h,f={...d};for(const p of u)delete f[p];switch(h.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}jt.omit=a;function l(h){const u=h instanceof t.Struct,d=u?{...h.schema}:{...h};for(const f in d)d[f]=(0,e.optional)(d[f]);return u&&h.type==="type"?(0,e.type)(d):(0,e.object)(d)}jt.partial=l;function c(h,u){const{schema:d}=h,f={};for(const p of u)f[p]=d[p];switch(h.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}return jt.pick=c,jt}var Rd;function lh(){if(Rd)return ct;Rd=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.unknown=ct.union=ct.type=ct.tuple=ct.string=ct.set=ct.regexp=ct.record=ct.exactOptional=ct.optional=ct.object=ct.number=ct.nullable=ct.never=ct.map=ct.literal=ct.intersection=ct.integer=ct.instance=ct.func=ct.enums=ct.date=ct.boolean=ct.bigint=ct.array=ct.any=void 0;const t=is(),e=Fa(),r=Ag();function i(){return(0,r.define)("any",()=>!0)}ct.any=i;function n(I){return new t.Struct({type:"array",schema:I,*entries(k){if(I&&Array.isArray(k))for(const[S,L]of k.entries())yield[S,L,I]},coercer(k){return Array.isArray(k)?k.slice():k},validator(k){return Array.isArray(k)||`Expected an array value, but received: ${(0,e.print)(k)}`}})}ct.array=n;function s(){return(0,r.define)("bigint",I=>typeof I=="bigint")}ct.bigint=s;function o(){return(0,r.define)("boolean",I=>typeof I=="boolean")}ct.boolean=o;function a(){return(0,r.define)("date",I=>I instanceof Date&&!isNaN(I.getTime())||`Expected a valid \`Date\` object, but received: ${(0,e.print)(I)}`)}ct.date=a;function l(I){const k={},S=I.map(L=>(0,e.print)(L)).join();for(const L of I)k[L]=L;return new t.Struct({type:"enums",schema:k,validator(L){return I.includes(L)||`Expected one of \`${S}\`, but received: ${(0,e.print)(L)}`}})}ct.enums=l;function c(){return(0,r.define)("func",I=>typeof I=="function"||`Expected a function, but received: ${(0,e.print)(I)}`)}ct.func=c;function h(I){return(0,r.define)("instance",k=>k instanceof I||`Expected a \`${I.name}\` instance, but received: ${(0,e.print)(k)}`)}ct.instance=h;function u(){return(0,r.define)("integer",I=>typeof I=="number"&&!isNaN(I)&&Number.isInteger(I)||`Expected an integer, but received: ${(0,e.print)(I)}`)}ct.integer=u;function d(I){return new t.Struct({type:"intersection",schema:null,*entries(k,S){for(const{entries:L}of I)yield*L(k,S)},*validator(k,S){for(const{validator:L}of I)yield*L(k,S)},*refiner(k,S){for(const{refiner:L}of I)yield*L(k,S)}})}ct.intersection=d;function f(I){const k=(0,e.print)(I),S=typeof I;return new t.Struct({type:"literal",schema:S==="string"||S==="number"||S==="boolean"?I:null,validator(L){return L===I||`Expected the literal \`${k}\`, but received: ${(0,e.print)(L)}`}})}ct.literal=f;function p(I,k){return new t.Struct({type:"map",schema:null,*entries(S){if(I&&k&&S instanceof Map)for(const[L,N]of S.entries())yield[L,L,I],yield[L,N,k]},coercer(S){return S instanceof Map?new Map(S):S},validator(S){return S instanceof Map||`Expected a \`Map\` object, but received: ${(0,e.print)(S)}`}})}ct.map=p;function g(){return(0,r.define)("never",()=>!1)}ct.never=g;function b(I){return new t.Struct({...I,validator:(k,S)=>k===null||I.validator(k,S),refiner:(k,S)=>k===null||I.refiner(k,S)})}ct.nullable=b;function x(){return(0,r.define)("number",I=>typeof I=="number"&&!isNaN(I)||`Expected a number, but received: ${(0,e.print)(I)}`)}ct.number=x;function _(I){const k=I?Object.keys(I):[],S=g();return new t.Struct({type:"object",schema:I??null,*entries(L){if(I&&(0,e.isObject)(L)){const N=new Set(Object.keys(L));for(const j of k){N.delete(j);const B=I[j];t.ExactOptionalStruct.isExactOptional(B)&&!Object.prototype.hasOwnProperty.call(L,j)||(yield[j,L[j],I[j]])}for(const j of N)yield[j,L[j],S]}},validator(L){return(0,e.isObject)(L)||`Expected an object, but received: ${(0,e.print)(L)}`},coercer(L){return(0,e.isObject)(L)?{...L}:L}})}ct.object=_;function T(I){return new t.Struct({...I,validator:(k,S)=>k===void 0||I.validator(k,S),refiner:(k,S)=>k===void 0||I.refiner(k,S)})}ct.optional=T;function C(I){return new t.ExactOptionalStruct(I)}ct.exactOptional=C;function v(I,k){return new t.Struct({type:"record",schema:null,*entries(S){if((0,e.isObject)(S))for(const L in S){const N=S[L];yield[L,L,I],yield[L,N,k]}},validator(S){return(0,e.isObject)(S)||`Expected an object, but received: ${(0,e.print)(S)}`}})}ct.record=v;function R(){return(0,r.define)("regexp",I=>I instanceof RegExp)}ct.regexp=R;function M(I){return new t.Struct({type:"set",schema:null,*entries(k){if(I&&k instanceof Set)for(const S of k)yield[S,S,I]},coercer(k){return k instanceof Set?new Set(k):k},validator(k){return k instanceof Set||`Expected a \`Set\` object, but received: ${(0,e.print)(k)}`}})}ct.set=M;function O(){return(0,r.define)("string",I=>typeof I=="string"||`Expected a string, but received: ${(0,e.print)(I)}`)}ct.string=O;function P(I){const k=g();return new t.Struct({type:"tuple",schema:null,*entries(S){if(Array.isArray(S)){const L=Math.max(I.length,S.length);for(let N=0;N<L;N++)yield[N,S[N],I[N]||k]}},validator(S){return Array.isArray(S)||`Expected an array, but received: ${(0,e.print)(S)}`}})}ct.tuple=P;function w(I){const k=Object.keys(I);return new t.Struct({type:"type",schema:I,*entries(S){if((0,e.isObject)(S))for(const L of k)yield[L,S[L],I[L]]},validator(S){return(0,e.isObject)(S)||`Expected an object, but received: ${(0,e.print)(S)}`},coercer(S){return(0,e.isObject)(S)?{...S}:S}})}ct.type=w;function E(I){const k=I.map(S=>S.type).join(" | ");return new t.Struct({type:"union",schema:null,coercer(S){for(const L of I){const[N,j]=L.validate(S,{coerce:!0});if(!N)return j}return S},validator(S,L){const N=[];for(const j of I){const[...B]=(0,e.run)(S,j,L),[A]=B;if(!A?.[0])return[];for(const[q]of B)q&&N.push(q)}return[`Expected the value to satisfy a union of \`${k}\`, but received: ${(0,e.print)(S)}`,...N]}})}ct.union=E;function z(){return(0,r.define)("unknown",()=>!0)}return ct.unknown=z,ct}var Md;function N_(){if(Md)return ar;Md=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.trimmed=ar.defaulted=ar.coerce=void 0;const t=is(),e=Fa(),r=lh();function i(o,a,l){return new t.Struct({...o,coercer:(c,h)=>(0,t.is)(c,a)?o.coercer(l(c,h),h):o.coercer(c,h)})}ar.coerce=i;function n(o,a,l={}){return i(o,(0,r.unknown)(),c=>{const h=typeof a=="function"?a():a;if(c===void 0)return h;if(!l.strict&&(0,e.isPlainObject)(c)&&(0,e.isPlainObject)(h)){const u={...c};let d=!1;for(const f in h)u[f]===void 0&&(u[f]=h[f],d=!0);if(d)return u}return c})}ar.defaulted=n;function s(o){return i(o,(0,r.string)(),a=>a.trim())}return ar.trimmed=s,ar}var Gt={},$d;function j_(){if($d)return Gt;$d=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.refine=Gt.size=Gt.pattern=Gt.nonempty=Gt.min=Gt.max=Gt.empty=void 0;const t=is(),e=Fa();function r(h){return c(h,"empty",u=>{const d=i(u);return d===0||`Expected an empty ${h.type} but received one with a size of \`${d}\``})}Gt.empty=r;function i(h){return h instanceof Map||h instanceof Set?h.size:h.length}function n(h,u,d={}){const{exclusive:f}=d;return c(h,"max",p=>f?p<u:p<=u||`Expected a ${h.type} less than ${f?"":"or equal to "}${u} but received \`${p}\``)}Gt.max=n;function s(h,u,d={}){const{exclusive:f}=d;return c(h,"min",p=>f?p>u:p>=u||`Expected a ${h.type} greater than ${f?"":"or equal to "}${u} but received \`${p}\``)}Gt.min=s;function o(h){return c(h,"nonempty",u=>i(u)>0||`Expected a nonempty ${h.type} but received an empty one`)}Gt.nonempty=o;function a(h,u){return c(h,"pattern",d=>u.test(d)||`Expected a ${h.type} matching \`/${u.source}/\` but received "${d}"`)}Gt.pattern=a;function l(h,u,d=u){const f=`Expected a ${h.type}`,p=u===d?`of \`${u}\``:`between \`${u}\` and \`${d}\``;return c(h,"size",g=>{if(typeof g=="number"||g instanceof Date)return u<=g&&g<=d||`${f} ${p} but received \`${g}\``;if(g instanceof Map||g instanceof Set){const{size:x}=g;return u<=x&&x<=d||`${f} with a size ${p} but received one with a size of \`${x}\``}const{length:b}=g;return u<=b&&b<=d||`${f} with a length ${p} but received one with a length of \`${b}\``})}Gt.size=l;function c(h,u,d){return new t.Struct({...h,*refiner(f,p){yield*h.refiner(f,p);const g=d(f,p),b=(0,e.toFailures)(g,p,h,f);for(const x of b)yield{...x,refinement:u}}})}return Gt.refine=c,Gt}var Id;function Qe(){return Id||(Id=1,function(t){var e=qr&&qr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=qr&&qr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Eg(),t),r(is(),t),r(N_(),t),r(j_(),t),r(lh(),t),r(Ag(),t)}(qr)),qr}var _e={};class ch extends Error{constructor(e,{cause:r}={}){super(e),this.name=ch.name,r&&(this.cause=r),this.message=e}}const D_=Object.freeze(Object.defineProperty({__proto__:null,ErrorWithCause:ch},Symbol.toStringTag,{value:"Module"})),q_=wg(D_),H_=(t,e)=>{if(!t||!e||!(t instanceof Error)||!(e.prototype instanceof Error)&&e!==Error)return;const r=new Set;let i=t;for(;i&&!r.has(i);){if(r.add(i),i instanceof e)return i;i=Na(i)}},Na=t=>{if(!(!t||typeof t!="object"||!("cause"in t)))if(typeof t.cause=="function"){const e=t.cause();return e instanceof Error?e:void 0}else return t.cause instanceof Error?t.cause:void 0},Lg=(t,e)=>{if(!(t instanceof Error))return"";const r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;const i=Na(t);return i?(e.add(t),r+`
caused by: `+Lg(i,e)):r},z_=t=>Lg(t,new Set),Bg=(t,e,r)=>{if(!(t instanceof Error))return"";const i=r?"":t.message||"";if(e.has(t))return i+": ...";const n=Na(t);if(n){e.add(t);const s="cause"in t&&typeof t.cause=="function";return i+(s?"":": ")+Bg(n,e,s)}else return i},W_=t=>Bg(t,new Set),U_=Object.freeze(Object.defineProperty({__proto__:null,findCauseByReference:H_,getErrorCause:Na,messageWithCauses:W_,stackWithCauses:z_},Symbol.toStringTag,{value:"Module"})),V_=wg(U_);var gl,Od;function G_(){if(Od)return gl;Od=1;const{ErrorWithCause:t}=q_,{findCauseByReference:e,getErrorCause:r,messageWithCauses:i,stackWithCauses:n}=V_;return gl={ErrorWithCause:t,findCauseByReference:e,getErrorCause:r,stackWithCauses:n,messageWithCauses:i},gl}var ml={},Pd;function hh(){return Pd||(Pd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.getKnownPropertyNames=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(h){return Array.isArray(h)&&h.length>0}t.isNonEmptyArray=e;function r(h){return h==null}t.isNullOrUndefined=r;function i(h){return!!h&&typeof h=="object"&&!Array.isArray(h)}t.isObject=i;const n=(h,u)=>Object.hasOwnProperty.call(h,u);t.hasProperty=n;function s(h){return Object.getOwnPropertyNames(h)}t.getKnownPropertyNames=s,function(h){h[h.Null=4]="Null",h[h.Comma=1]="Comma",h[h.Wrapper=1]="Wrapper",h[h.True=4]="True",h[h.False=5]="False",h[h.Quote=1]="Quote",h[h.Colon=1]="Colon",h[h.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function o(h){if(typeof h!="object"||h===null)return!1;try{let u=h;for(;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(h)===u}catch{return!1}}t.isPlainObject=o;function a(h){return h.charCodeAt(0)<=127}t.isASCII=a;function l(h){return h.split("").reduce((d,f)=>a(f)?d+1:d+2,0)+(h.match(t.ESCAPE_CHARACTERS_REGEXP)??[]).length}t.calculateStringSize=l;function c(h){return h.toString().length}t.calculateNumberSize=c}(ml)),ml}var Fd;function Rg(){if(Fd)return _e;Fd=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.wrapError=_e.getErrorMessage=_e.isErrorWithStack=_e.isErrorWithMessage=_e.isErrorWithCode=void 0;const t=G_(),e=hh();function r(l){return l instanceof Error||(0,e.isObject)(l)&&l.constructor.name==="Error"}function i(l){return typeof l=="object"&&l!==null&&"code"in l}_e.isErrorWithCode=i;function n(l){return typeof l=="object"&&l!==null&&"message"in l}_e.isErrorWithMessage=n;function s(l){return typeof l=="object"&&l!==null&&"stack"in l}_e.isErrorWithStack=s;function o(l){return n(l)&&typeof l.message=="string"?l.message:(0,e.isNullOrUndefined)(l)?"":String(l)}_e.getErrorMessage=o;function a(l,c){if(r(l)){let h;return Error.length===2?h=new Error(c,{cause:l}):h=new t.ErrorWithCause(c,{cause:l}),i(l)&&(h.code=l.code),h}return c.length>0?new Error(`${String(l)}: ${c}`):new Error(String(l))}return _e.wrapError=a,_e}var Nd;function $r(){if(Nd)return Be;Nd=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.assertExhaustive=Be.assertStruct=Be.assert=Be.AssertionError=void 0;const t=Qe(),e=Rg();function r(c){return typeof c?.prototype?.constructor?.name=="string"}function i(c){return(0,e.getErrorMessage)(c).replace(/\.$/u,"")}function n(c,h){return r(c)?new c({message:h}):c({message:h})}class s extends Error{constructor(h){super(h.message),this.code="ERR_ASSERTION"}}Be.AssertionError=s;function o(c,h="Assertion failed.",u=s){if(!c)throw h instanceof Error?h:n(u,h)}Be.assert=o;function a(c,h,u="Assertion failed",d=s){try{(0,t.assert)(c,h)}catch(f){throw n(d,`${u}: ${i(f)}.`)}}Be.assertStruct=a;function l(c){throw new Error("Invalid branch reached. Should be detected during compilation.")}return Be.assertExhaustive=l,Be}var on={},jd;function Mg(){if(jd)return on;jd=1,Object.defineProperty(on,"__esModule",{value:!0}),on.base64=void 0;const t=Qe(),e=$r(),r=(i,n={})=>{const s=n.paddingRequired??!1,o=n.characterSet??"base64";let a;o==="base64"?a=String.raw`[A-Za-z0-9+\/]`:((0,e.assert)(o==="base64url"),a=String.raw`[-_A-Za-z0-9]`);let l;return s?l=new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):l=new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,t.pattern)(i,l)};return on.base64=r,on}var bt={},yl={},Dd;function Y_(){return Dd||(Dd=1,function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;function e($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function r($,...F){if(!e($))throw new Error("Uint8Array expected");if(F.length>0&&!F.includes($.length))throw new Error("Uint8Array expected of length "+F+", got length="+$.length)}function i($,F){return Array.isArray(F)?F.length===0?!0:$?F.every(V=>typeof V=="string"):F.every(V=>Number.isSafeInteger(V)):!1}function n($){if(typeof $!="function")throw new Error("function expected");return!0}function s($,F){if(typeof F!="string")throw new Error(`${$}: string expected`);return!0}function o($){if(!Number.isSafeInteger($))throw new Error(`invalid integer: ${$}`)}function a($){if(!Array.isArray($))throw new Error("array expected")}function l($,F){if(!i(!0,F))throw new Error(`${$}: array of strings expected`)}function c($,F){if(!i(!1,F))throw new Error(`${$}: array of numbers expected`)}function h(...$){const F=Z=>Z,V=(Z,pt)=>gt=>Z(pt(gt)),K=$.map(Z=>Z.encode).reduceRight(V,F),Q=$.map(Z=>Z.decode).reduce(V,F);return{encode:K,decode:Q}}function u($){const F=typeof $=="string"?$.split(""):$,V=F.length;l("alphabet",F);const K=new Map(F.map((Q,Z)=>[Q,Z]));return{encode:Q=>(a(Q),Q.map(Z=>{if(!Number.isSafeInteger(Z)||Z<0||Z>=V)throw new Error(`alphabet.encode: digit index outside alphabet "${Z}". Allowed: ${$}`);return F[Z]})),decode:Q=>(a(Q),Q.map(Z=>{s("alphabet.decode",Z);const pt=K.get(Z);if(pt===void 0)throw new Error(`Unknown letter: "${Z}". Allowed: ${$}`);return pt}))}}function d($=""){return s("join",$),{encode:F=>(l("join.decode",F),F.join($)),decode:F=>(s("join.decode",F),F.split($))}}function f($,F="="){return o($),s("padding",F),{encode(V){for(l("padding.encode",V);V.length*$%8;)V.push(F);return V},decode(V){l("padding.decode",V);let K=V.length;if(K*$%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;K>0&&V[K-1]===F;K--)if((K-1)*$%8===0)throw new Error("padding: invalid, string has too much padding");return V.slice(0,K)}}}function p($){return n($),{encode:F=>F,decode:F=>$(F)}}function g($,F,V){if(F<2)throw new Error(`convertRadix: invalid from=${F}, base cannot be less than 2`);if(V<2)throw new Error(`convertRadix: invalid to=${V}, base cannot be less than 2`);if(a($),!$.length)return[];let K=0;const Q=[],Z=Array.from($,gt=>{if(o(gt),gt<0||gt>=F)throw new Error(`invalid integer: ${gt}`);return gt}),pt=Z.length;for(;;){let gt=0,Et=!0;for(let At=K;At<pt;At++){const ne=Z[At],Mt=F*gt,Bt=Mt+ne;if(!Number.isSafeInteger(Bt)||Mt/F!==gt||Bt-ne!==Mt)throw new Error("convertRadix: carry overflow");const Ft=Bt/V;gt=Bt%V;const zt=Math.floor(Ft);if(Z[At]=zt,!Number.isSafeInteger(zt)||zt*V+gt!==Bt)throw new Error("convertRadix: carry overflow");if(Et)zt?Et=!1:K=At;else continue}if(Q.push(gt),Et)break}for(let gt=0;gt<$.length-1&&$[gt]===0;gt++)Q.push(0);return Q.reverse()}const b=($,F)=>F===0?$:b(F,$%F),x=($,F)=>$+(F-b($,F)),_=(()=>{let $=[];for(let F=0;F<40;F++)$.push(2**F);return $})();function T($,F,V,K){if(a($),F<=0||F>32)throw new Error(`convertRadix2: wrong from=${F}`);if(V<=0||V>32)throw new Error(`convertRadix2: wrong to=${V}`);if(x(F,V)>32)throw new Error(`convertRadix2: carry overflow from=${F} to=${V} carryBits=${x(F,V)}`);let Q=0,Z=0;const pt=_[F],gt=_[V]-1,Et=[];for(const At of $){if(o(At),At>=pt)throw new Error(`convertRadix2: invalid data word=${At} from=${F}`);if(Q=Q<<F|At,Z+F>32)throw new Error(`convertRadix2: carry overflow pos=${Z} from=${F}`);for(Z+=F;Z>=V;Z-=V)Et.push((Q>>Z-V&gt)>>>0);const ne=_[Z];if(ne===void 0)throw new Error("invalid carry");Q&=ne-1}if(Q=Q<<V-Z&gt,!K&&Z>=F)throw new Error("Excess padding");if(!K&&Q>0)throw new Error(`Non-zero padding: ${Q}`);return K&&Z>0&&Et.push(Q>>>0),Et}function C($){o($);const F=2**8;return{encode:V=>{if(!e(V))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(V),F,$)},decode:V=>(c("radix.decode",V),Uint8Array.from(g(V,$,F)))}}function v($,F=!1){if(o($),$<=0||$>32)throw new Error("radix2: bits should be in (0..32]");if(x(8,$)>32||x($,8)>32)throw new Error("radix2: carry overflow");return{encode:V=>{if(!e(V))throw new Error("radix2.encode input should be Uint8Array");return T(Array.from(V),8,$,!F)},decode:V=>(c("radix2.decode",V),Uint8Array.from(T(V,$,8,F)))}}function R($){return n($),function(...F){try{return $.apply(null,F)}catch{}}}function M($,F){return o($),n(F),{encode(V){if(!e(V))throw new Error("checksum.encode: input should be Uint8Array");const K=F(V).slice(0,$),Q=new Uint8Array(V.length+$);return Q.set(V),Q.set(K,V.length),Q},decode(V){if(!e(V))throw new Error("checksum.decode: input should be Uint8Array");const K=V.slice(0,-$),Q=V.slice(-$),Z=F(K).slice(0,$);for(let pt=0;pt<$;pt++)if(Z[pt]!==Q[pt])throw new Error("Invalid checksum");return K}}}t.utils={alphabet:u,chain:h,checksum:M,convertRadix:g,convertRadix2:T,radix:C,radix2:v,join:d,padding:f},t.base16=h(v(4),u("0123456789ABCDEF"),d("")),t.base32=h(v(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),d("")),t.base32nopad=h(v(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),d("")),t.base32hex=h(v(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),d("")),t.base32hexnopad=h(v(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),d("")),t.base32crockford=h(v(5),u("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),d(""),p($=>$.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const O=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",P=($,F)=>{s("base64",$);const V=F?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,K=F?"base64url":"base64";if($.length>0&&!V.test($))throw new Error("invalid base64");return Uint8Array.fromBase64($,{alphabet:K,lastChunkHandling:"strict"})};t.base64=O?{encode($){return r($),$.toBase64()},decode($){return P($,!1)}}:h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),d("")),t.base64nopad=h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d("")),t.base64url=O?{encode($){return r($),$.toBase64({alphabet:"base64url"})},decode($){return P($,!0)}}:h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),d("")),t.base64urlnopad=h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),d(""));const w=$=>h(C(58),u($),d(""));t.base58=w("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=w("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=w("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const E=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode($){let F="";for(let V=0;V<$.length;V+=8){const K=$.subarray(V,V+8);F+=t.base58.encode(K).padStart(E[K.length],"1")}return F},decode($){let F=[];for(let V=0;V<$.length;V+=11){const K=$.slice(V,V+11),Q=E.indexOf(K.length),Z=t.base58.decode(K);for(let pt=0;pt<Z.length-Q;pt++)if(Z[pt]!==0)throw new Error("base58xmr: wrong padding");F=F.concat(Array.from(Z.slice(Z.length-Q)))}return Uint8Array.from(F)}};const z=$=>h(M(4,F=>$($(F))),t.base58);t.createBase58check=z,t.base58check=t.createBase58check;const I=h(u("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),d("")),k=[996825010,642813549,513874426,1027748829,705979059];function S($){const F=$>>25;let V=($&33554431)<<5;for(let K=0;K<k.length;K++)(F>>K&1)===1&&(V^=k[K]);return V}function L($,F,V=1){const K=$.length;let Q=1;for(let Z=0;Z<K;Z++){const pt=$.charCodeAt(Z);if(pt<33||pt>126)throw new Error(`Invalid prefix (${$})`);Q=S(Q)^pt>>5}Q=S(Q);for(let Z=0;Z<K;Z++)Q=S(Q)^$.charCodeAt(Z)&31;for(let Z of F)Q=S(Q)^Z;for(let Z=0;Z<6;Z++)Q=S(Q);return Q^=V,I.encode(T([Q%_[30]],30,5,!1))}function N($){const F=$==="bech32"?1:734539939,V=v(5),K=V.decode,Q=V.encode,Z=R(K);function pt(Mt,Bt,Ft=90){s("bech32.encode prefix",Mt),e(Bt)&&(Bt=Array.from(Bt)),c("bech32.encode",Bt);const zt=Mt.length;if(zt===0)throw new TypeError(`Invalid prefix length ${zt}`);const Se=zt+7+Bt.length;if(Ft!==!1&&Se>Ft)throw new TypeError(`Length ${Se} exceeds limit ${Ft}`);const Cr=Mt.toLowerCase(),Sr=L(Cr,Bt,F);return`${Cr}1${I.encode(Bt)}${Sr}`}function gt(Mt,Bt=90){s("bech32.decode input",Mt);const Ft=Mt.length;if(Ft<8||Bt!==!1&&Ft>Bt)throw new TypeError(`invalid string length: ${Ft} (${Mt}). Expected (8..${Bt})`);const zt=Mt.toLowerCase();if(Mt!==zt&&Mt!==Mt.toUpperCase())throw new Error("String must be lowercase or uppercase");const Se=zt.lastIndexOf("1");if(Se===0||Se===-1)throw new Error('Letter "1" must be present between prefix and data only');const Cr=zt.slice(0,Se),Sr=zt.slice(Se+1);if(Sr.length<6)throw new Error("Data must be at least 6 characters long");const gs=I.decode(Sr).slice(0,-6),pi=L(Cr,gs,F);if(!Sr.endsWith(pi))throw new Error(`Invalid checksum in ${Mt}: expected "${pi}"`);return{prefix:Cr,words:gs}}const Et=R(gt);function At(Mt){const{prefix:Bt,words:Ft}=gt(Mt,!1);return{prefix:Bt,words:Ft,bytes:K(Ft)}}function ne(Mt,Bt){return pt(Mt,Q(Bt))}return{encode:pt,decode:gt,encodeFromBytes:ne,decodeToBytes:At,decodeUnsafe:Et,fromWords:K,fromWordsUnsafe:Z,toWords:Q}}t.bech32=N("bech32"),t.bech32m=N("bech32m"),t.utf8={encode:$=>new TextDecoder().decode($),decode:$=>new TextEncoder().encode($)};const j=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",B={encode($){return r($),$.toHex()},decode($){return s("hex",$),Uint8Array.fromHex($)}};t.hex=j?B:h(v(4),u("0123456789abcdef"),d(""),p($=>{if(typeof $!="string"||$.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof $} with length ${$.length}`);return $.toLowerCase()}));const A={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},q="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",W=($,F)=>{if(typeof $!="string"||!A.hasOwnProperty($))throw new TypeError(q);if(!e(F))throw new TypeError("bytesToString() expects Uint8Array");return A[$].encode(F)};t.bytesToString=W,t.str=t.bytesToString;const U=($,F)=>{if(!A.hasOwnProperty($))throw new TypeError(q);if(typeof F!="string")throw new TypeError("stringToBytes() expects string");return A[$].decode(F)};t.stringToBytes=U,t.bytes=t.stringToBytes}(yl)),yl}var bl={},qd;function ja(){return qd||(qd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.isValidChecksumAddress=t.getChecksumAddress=t.isValidHexAddress=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.HexChecksumAddressStruct=t.HexAddressStruct=t.StrictHexStruct=t.HexStruct=void 0;const e=Qe(),r=Tg(),i=$r(),n=uh();t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu),t.HexAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]{40}$/u),t.HexChecksumAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-fA-F]{40}$/u);function s(p){return(0,e.is)(p,t.HexStruct)}t.isHexString=s;function o(p){return(0,e.is)(p,t.StrictHexStruct)}t.isStrictHexString=o;function a(p){(0,i.assert)(s(p),"Value must be a hexadecimal string.")}t.assertIsHexString=a;function l(p){(0,i.assert)(o(p),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=l;function c(p){return(0,e.is)(p,t.HexAddressStruct)||u(p)}t.isValidHexAddress=c;function h(p){(0,i.assert)((0,e.is)(p,t.HexChecksumAddressStruct),"Invalid hex address.");const g=f(p.toLowerCase()),b=f((0,n.bytesToHex)((0,r.keccak_256)(g)));return`0x${g.split("").map((x,_)=>{const T=b[_];return(0,i.assert)((0,e.is)(T,(0,e.string)()),"Hash shorter than address."),parseInt(T,16)>7?x.toUpperCase():x}).join("")}`}t.getChecksumAddress=h;function u(p){return(0,e.is)(p,t.HexChecksumAddressStruct)?h(p)===p:!1}t.isValidChecksumAddress=u;function d(p){return p.startsWith("0x")?p:p.startsWith("0X")?`0x${p.substring(2)}`:`0x${p}`}t.add0x=d;function f(p){return p.startsWith("0x")||p.startsWith("0X")?p.substring(2):p}t.remove0x=f}(bl)),bl}var Hd;function uh(){if(Hd)return bt;Hd=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.createDataView=bt.concatBytes=bt.valueToBytes=bt.base64ToBytes=bt.stringToBytes=bt.numberToBytes=bt.signedBigIntToBytes=bt.bigIntToBytes=bt.hexToBytes=bt.bytesToBase64=bt.bytesToString=bt.bytesToNumber=bt.bytesToSignedBigInt=bt.bytesToBigInt=bt.bytesToHex=bt.assertIsBytes=bt.isBytes=void 0;const t=Y_(),e=$r(),r=ja(),i=48,n=58,s=87;function o(){const w=[];return()=>{if(w.length===0)for(let E=0;E<256;E++)w.push(E.toString(16).padStart(2,"0"));return w}}const a=o();function l(w){return w instanceof Uint8Array}bt.isBytes=l;function c(w){(0,e.assert)(l(w),"Value must be a Uint8Array.")}bt.assertIsBytes=c;function h(w){if(c(w),w.length===0)return"0x";const E=a(),z=new Array(w.length);for(let I=0;I<w.length;I++)z[I]=E[w[I]];return(0,r.add0x)(z.join(""))}bt.bytesToHex=h;function u(w){c(w);const E=h(w);return BigInt(E)}bt.bytesToBigInt=u;function d(w){c(w);let E=BigInt(0);for(const z of w)E=(E<<BigInt(8))+BigInt(z);return BigInt.asIntN(w.length*8,E)}bt.bytesToSignedBigInt=d;function f(w){c(w);const E=u(w);return(0,e.assert)(E<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(E)}bt.bytesToNumber=f;function p(w){return c(w),new TextDecoder().decode(w)}bt.bytesToString=p;function g(w){return c(w),t.base64.encode(w)}bt.bytesToBase64=g;function b(w){if(w?.toLowerCase?.()==="0x")return new Uint8Array;(0,r.assertIsHexString)(w);const E=(0,r.remove0x)(w).toLowerCase(),z=E.length%2===0?E:`0${E}`,I=new Uint8Array(z.length/2);for(let k=0;k<I.length;k++){const S=z.charCodeAt(k*2),L=z.charCodeAt(k*2+1),N=S-(S<n?i:s),j=L-(L<n?i:s);I[k]=N*16+j}return I}bt.hexToBytes=b;function x(w){(0,e.assert)(typeof w=="bigint","Value must be a bigint."),(0,e.assert)(w>=BigInt(0),"Value must be a non-negative bigint.");const E=w.toString(16);return b(E)}bt.bigIntToBytes=x;function _(w,E){(0,e.assert)(E>0);const z=w>>BigInt(31);return!((~w&z)+(w&~z)>>BigInt(E*8+-1))}function T(w,E){(0,e.assert)(typeof w=="bigint","Value must be a bigint."),(0,e.assert)(typeof E=="number","Byte length must be a number."),(0,e.assert)(E>0,"Byte length must be greater than 0."),(0,e.assert)(_(w,E),"Byte length is too small to represent the given value.");let z=w;const I=new Uint8Array(E);for(let k=0;k<I.length;k++)I[k]=Number(BigInt.asUintN(8,z)),z>>=BigInt(8);return I.reverse()}bt.signedBigIntToBytes=T;function C(w){(0,e.assert)(typeof w=="number","Value must be a number."),(0,e.assert)(w>=0,"Value must be a non-negative number."),(0,e.assert)(Number.isSafeInteger(w),"Value is not a safe integer. Use `bigIntToBytes` instead.");const E=w.toString(16);return b(E)}bt.numberToBytes=C;function v(w){return(0,e.assert)(typeof w=="string","Value must be a string."),new TextEncoder().encode(w)}bt.stringToBytes=v;function R(w){return(0,e.assert)(typeof w=="string","Value must be a string."),t.base64.decode(w)}bt.base64ToBytes=R;function M(w){if(typeof w=="bigint")return x(w);if(typeof w=="number")return C(w);if(typeof w=="string")return w.startsWith("0x")?b(w):v(w);if(l(w))return w;throw new TypeError(`Unsupported value type: "${typeof w}".`)}bt.valueToBytes=M;function O(w){const E=new Array(w.length);let z=0;for(let k=0;k<w.length;k++){const S=M(w[k]);E[k]=S,z+=S.length}const I=new Uint8Array(z);for(let k=0,S=0;k<E.length;k++)I.set(E[k],S),S+=E[k].length;return I}bt.concatBytes=O;function P(w){if(typeof Buffer<"u"&&w instanceof Buffer){const E=w.buffer.slice(w.byteOffset,w.byteOffset+w.byteLength);return new DataView(E)}return new DataView(w.buffer,w.byteOffset,w.byteLength)}return bt.createDataView=P,bt}var xl={},zd;function X_(){return zd||(zd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toCaipChainId=t.parseCaipAccountId=t.parseCaipChainId=t.isCaipAssetId=t.isCaipAssetType=t.isCaipAccountAddress=t.isCaipAccountId=t.isCaipReference=t.isCaipNamespace=t.isCaipChainId=t.KnownCaipNamespace=t.CaipAssetIdStruct=t.CaipAssetTypeStruct=t.CaipAccountAddressStruct=t.CaipAccountIdStruct=t.CaipReferenceStruct=t.CaipNamespaceStruct=t.CaipChainIdStruct=t.CAIP_ASSET_ID_REGEX=t.CAIP_ASSET_TYPE_REGEX=t.CAIP_ACCOUNT_ADDRESS_REGEX=t.CAIP_ACCOUNT_ID_REGEX=t.CAIP_REFERENCE_REGEX=t.CAIP_NAMESPACE_REGEX=t.CAIP_CHAIN_ID_REGEX=void 0;const e=Qe();t.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,t.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,t.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,t.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,t.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,t.CaipChainIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_CHAIN_ID_REGEX),t.CaipNamespaceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_NAMESPACE_REGEX),t.CaipReferenceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_REFERENCE_REGEX),t.CaipAccountIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ID_REGEX),t.CaipAccountAddressStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ADDRESS_REGEX),t.CaipAssetTypeStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_TYPE_REGEX),t.CaipAssetIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_ID_REGEX),function(d){d.Bip122="bip122",d.Eip155="eip155",d.Wallet="wallet"}(t.KnownCaipNamespace||(t.KnownCaipNamespace={}));function r(d){return(0,e.is)(d,t.CaipChainIdStruct)}t.isCaipChainId=r;function i(d){return(0,e.is)(d,t.CaipNamespaceStruct)}t.isCaipNamespace=i;function n(d){return(0,e.is)(d,t.CaipReferenceStruct)}t.isCaipReference=n;function s(d){return(0,e.is)(d,t.CaipAccountIdStruct)}t.isCaipAccountId=s;function o(d){return(0,e.is)(d,t.CaipAccountAddressStruct)}t.isCaipAccountAddress=o;function a(d){return(0,e.is)(d,t.CaipAssetTypeStruct)}t.isCaipAssetType=a;function l(d){return(0,e.is)(d,t.CaipAssetIdStruct)}t.isCaipAssetId=l;function c(d){const f=t.CAIP_CHAIN_ID_REGEX.exec(d);if(!f?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:f.groups.namespace,reference:f.groups.reference}}t.parseCaipChainId=c;function h(d){const f=t.CAIP_ACCOUNT_ID_REGEX.exec(d);if(!f?.groups)throw new Error("Invalid CAIP account ID.");return{address:f.groups.accountAddress,chainId:f.groups.chainId,chain:{namespace:f.groups.namespace,reference:f.groups.reference}}}t.parseCaipAccountId=h;function u(d,f){if(!i(d))throw new Error(`Invalid "namespace", must match: ${t.CAIP_NAMESPACE_REGEX.toString()}`);if(!n(f))throw new Error(`Invalid "reference", must match: ${t.CAIP_REFERENCE_REGEX.toString()}`);return`${d}:${f}`}t.toCaipChainId=u}(xl)),xl}var ln={},Wd;function J_(){if(Wd)return ln;Wd=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.ChecksumStruct=void 0;const t=Qe(),e=Mg();return ln.ChecksumStruct=(0,t.size)((0,e.base64)((0,t.string)(),{paddingRequired:!0}),44,44),ln}var Re={},Ud;function K_(){if(Ud)return Re;Ud=1,Object.defineProperty(Re,"__esModule",{value:!0}),Re.createHex=Re.createBytes=Re.createBigInt=Re.createNumber=void 0;const t=Qe(),e=$r(),r=uh(),i=ja(),n=(0,t.union)([(0,t.number)(),(0,t.bigint)(),(0,t.string)(),i.StrictHexStruct]),s=(0,t.coerce)((0,t.number)(),n,Number),o=(0,t.coerce)((0,t.bigint)(),n,BigInt);(0,t.union)([i.StrictHexStruct,(0,t.instance)(Uint8Array)]);const a=(0,t.coerce)((0,t.instance)(Uint8Array),(0,t.union)([i.StrictHexStruct]),r.hexToBytes),l=(0,t.coerce)(i.StrictHexStruct,(0,t.instance)(Uint8Array),r.bytesToHex);function c(f){try{const p=(0,t.create)(f,s);return(0,e.assert)(Number.isFinite(p),`Expected a number-like value, got "${f}".`),p}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${f}".`):p}}Re.createNumber=c;function h(f){try{return(0,t.create)(f,o)}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${String(p.value)}".`):p}}Re.createBigInt=h;function u(f){if(typeof f=="string"&&f.toLowerCase()==="0x")return new Uint8Array;try{return(0,t.create)(f,a)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}Re.createBytes=u;function d(f){if(f instanceof Uint8Array&&f.length===0||typeof f=="string"&&f.toLowerCase()==="0x")return"0x";try{return(0,t.create)(f,l)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}return Re.createHex=d,Re}var Me={},Vd;function Z_(){if(Vd)return Me;Vd=1;var t=Me&&Me.__classPrivateFieldGet||function(o,a,l,c){if(l==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?o!==a||!c:!a.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?c:l==="a"?c.call(o):c?c.value:a.get(o)},e=Me&&Me.__classPrivateFieldSet||function(o,a,l,c,h){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?o!==a||!h:!a.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?h.call(o,l):h?h.value=l:a.set(o,l),l},r,i;Object.defineProperty(Me,"__esModule",{value:!0}),Me.FrozenSet=Me.FrozenMap=void 0;class n{get size(){return t(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return t(this,r,"f")[Symbol.iterator]()}constructor(a){r.set(this,void 0),e(this,r,new Map(a),"f"),Object.freeze(this)}entries(){return t(this,r,"f").entries()}forEach(a,l){return t(this,r,"f").forEach((c,h,u)=>a.call(l,c,h,this))}get(a){return t(this,r,"f").get(a)}has(a){return t(this,r,"f").has(a)}keys(){return t(this,r,"f").keys()}values(){return t(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([a,l])=>`${String(a)} => ${String(l)}`).join(", ")} `:""}}`}}Me.FrozenMap=n;class s{get size(){return t(this,i,"f").size}[(i=new WeakMap,Symbol.iterator)](){return t(this,i,"f")[Symbol.iterator]()}constructor(a){i.set(this,void 0),e(this,i,new Set(a),"f"),Object.freeze(this)}entries(){return t(this,i,"f").entries()}forEach(a,l){return t(this,i,"f").forEach((c,h,u)=>a.call(l,c,h,this))}has(a){return t(this,i,"f").has(a)}keys(){return t(this,i,"f").keys()}values(){return t(this,i,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(a=>String(a)).join(", ")} `:""}}`}}return Me.FrozenSet=s,Object.freeze(n),Object.freeze(n.prototype),Object.freeze(s),Object.freeze(s.prototype),Me}var _l={},Gd;function Q_(){return Gd||(Gd=1,Object.defineProperty(_l,"__esModule",{value:!0})),_l}var wl={},Yd;function tw(){return Yd||(Yd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.getSafeJson=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=t.exactOptional=t.object=void 0;const e=Qe(),r=$r(),i=hh(),n=w=>(0,e.object)(w);t.object=n;function s({path:w,branch:E}){const z=w[w.length-1];return(0,i.hasProperty)(E[E.length-2],z)}function o(w){return new e.Struct({...w,type:`optional ${w.type}`,validator:(E,z)=>!s(z)||w.validator(E,z),refiner:(E,z)=>!s(z)||w.refiner(E,z)})}t.exactOptional=o;const a=()=>(0,e.define)("finite number",w=>(0,e.is)(w,(0,e.number)())&&Number.isFinite(w));t.UnsafeJsonStruct=(0,e.union)([(0,e.literal)(null),(0,e.boolean)(),a(),(0,e.string)(),(0,e.array)((0,e.lazy)(()=>t.UnsafeJsonStruct)),(0,e.record)((0,e.string)(),(0,e.lazy)(()=>t.UnsafeJsonStruct))]),t.JsonStruct=(0,e.coerce)(t.UnsafeJsonStruct,(0,e.any)(),w=>((0,r.assertStruct)(w,t.UnsafeJsonStruct),JSON.parse(JSON.stringify(w,(E,z)=>{if(!(E==="__proto__"||E==="constructor"))return z}))));function l(w){try{return c(w),!0}catch{return!1}}t.isValidJson=l;function c(w){return(0,e.create)(w,t.JsonStruct)}t.getSafeJson=c;function h(w){(0,r.assertStruct)(w,t.JsonStruct,"Invalid JSON value");const E=JSON.stringify(w);return new TextEncoder().encode(E).byteLength}t.getJsonSize=h,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,t.object)({code:(0,e.integer)(),message:(0,e.string)(),data:o(t.JsonStruct),stack:o((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)]),t.JsonRpcRequestStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)}),t.JsonRpcNotificationStruct=(0,t.object)({jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)});function u(w){return(0,e.is)(w,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=u;function d(w,E){(0,r.assertStruct)(w,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",E)}t.assertIsJsonRpcNotification=d;function f(w){return(0,e.is)(w,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=f;function p(w,E){(0,r.assertStruct)(w,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",E)}t.assertIsJsonRpcRequest=p,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function g(w){return(0,e.is)(w,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=g;function b(w,E){(0,r.assertStruct)(w,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",E)}t.assertIsPendingJsonRpcResponse=b;function x(w){return(0,e.is)(w,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=x;function _(w,E){(0,r.assertStruct)(w,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",E)}t.assertIsJsonRpcResponse=_;function T(w){return(0,e.is)(w,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=T;function C(w,E){(0,r.assertStruct)(w,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",E)}t.assertIsJsonRpcSuccess=C;function v(w){return(0,e.is)(w,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=v;function R(w,E){(0,r.assertStruct)(w,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",E)}t.assertIsJsonRpcFailure=R;function M(w){return(0,e.is)(w,t.JsonRpcErrorStruct)}t.isJsonRpcError=M;function O(w,E){(0,r.assertStruct)(w,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",E)}t.assertIsJsonRpcError=O;function P(w){const{permitEmptyString:E,permitFractions:z,permitNull:I}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...w};return S=>!!(typeof S=="number"&&(z||Number.isInteger(S))||typeof S=="string"&&(E||S.length>0)||I&&S===null)}t.getJsonRpcIdValidator=P}(wl)),wl}var vl={},Xd;function ew(){return Xd||(Xd=1,Object.defineProperty(vl,"__esModule",{value:!0})),vl}var or={},Jd;function rw(){if(Jd)return or;Jd=1;var t=or&&or.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(or,"__esModule",{value:!0}),or.createModuleLogger=or.createProjectLogger=void 0;const r=(0,t(h_()).default)("metamask");function i(s){return r.extend(s)}or.createProjectLogger=i;function n(s,o){return s.extend(o)}return or.createModuleLogger=n,or}var $e={},Kd;function iw(){if(Kd)return $e;Kd=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.hexToBigInt=$e.hexToNumber=$e.bigIntToHex=$e.numberToHex=void 0;const t=$r(),e=ja(),r=o=>((0,t.assert)(typeof o=="number","Value must be a number."),(0,t.assert)(o>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(o),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,e.add0x)(o.toString(16)));$e.numberToHex=r;const i=o=>((0,t.assert)(typeof o=="bigint","Value must be a bigint."),(0,t.assert)(o>=0,"Value must be a non-negative bigint."),(0,e.add0x)(o.toString(16)));$e.bigIntToHex=i;const n=o=>{(0,e.assertIsHexString)(o);const a=parseInt(o,16);return(0,t.assert)(Number.isSafeInteger(a),"Value is not a safe integer. Use `hexToBigInt` instead."),a};$e.hexToNumber=n;const s=o=>((0,e.assertIsHexString)(o),BigInt((0,e.add0x)(o)));return $e.hexToBigInt=s,$e}var Cl={},Zd;function nw(){return Zd||(Zd=1,Object.defineProperty(Cl,"__esModule",{value:!0})),Cl}var cn={},Qd;function sw(){if(Qd)return cn;Qd=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.createDeferredPromise=void 0;function t({suppressUnhandledRejection:e=!1}={}){let r,i;const n=new Promise((s,o)=>{r=s,i=o});return e&&n.catch(s=>{}),{promise:n,resolve:r,reject:i}}return cn.createDeferredPromise=t,cn}var Sl={},tf;function aw(){return tf||(tf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,r=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function i(s,o){return r(s,"count"),s*o}t.inMilliseconds=i;function n(s){return r(s,"timestamp"),Date.now()-s}t.timeSince=n}(Sl)),Sl}var kl={},ef;function ow(){return ef||(ef=1,Object.defineProperty(kl,"__esModule",{value:!0})),kl}var Tl={},rf;function lw(){return rf||(rf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=Qe(),r=O_(),i=$r();t.VersionStruct=(0,e.refine)((0,e.string)(),"Version",u=>(0,r.valid)(u)===null?`Expected SemVer version, got "${u}"`:!0),t.VersionRangeStruct=(0,e.refine)((0,e.string)(),"Version range",u=>(0,r.validRange)(u)===null?`Expected SemVer range, got "${u}"`:!0);function n(u){return(0,e.is)(u,t.VersionStruct)}t.isValidSemVerVersion=n;function s(u){return(0,e.is)(u,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(u){(0,i.assertStruct)(u,t.VersionStruct)}t.assertIsSemVerVersion=o;function a(u){(0,i.assertStruct)(u,t.VersionRangeStruct)}t.assertIsSemVerRange=a;function l(u,d){return(0,r.gt)(u,d)}t.gtVersion=l;function c(u,d){return(0,r.gtr)(u,d)}t.gtRange=c;function h(u,d){return(0,r.satisfies)(u,d,{includePrerelease:!0})}t.satisfiesVersionRange=h}(Tl)),Tl}var nf;function xe(){return nf||(nf=1,function(t){var e=Dr&&Dr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Dr&&Dr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r($r(),t),r(Mg(),t),r(uh(),t),r(X_(),t),r(J_(),t),r(K_(),t),r(Z_(),t),r(Q_(),t),r(Rg(),t),r(ja(),t),r(tw(),t),r(ew(),t),r(rw(),t),r(hh(),t),r(iw(),t),r(nw(),t),r(sw(),t),r(aw(),t),r(ow(),t),r(lw(),t)}(Dr)),Dr}var El={},sf;function tr(){return sf||(sf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.getErrorStack=t.getErrorMessage=void 0;const e=xe(),r=s=>typeof s=="string"?s:s instanceof Error||(0,e.isObject)(s)&&(0,e.hasProperty)(s,"message")&&typeof s.message=="string"?s.message:"Unknown error.";t.getErrorMessage=r;const i=s=>{if(s instanceof Error)return s.stack};t.getErrorStack=i;class n extends Error{constructor(o,a){super(o),this.name="ParserError";const l=(0,t.getErrorStack)(a);l&&(this.stack=l)}}t.ParserError=n}(El)),El}var Al={},hn={},af;function cw(){if(af)return hn;af=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.iterate=void 0;const t=xe(),e=function*(r,i=32){for(let n=0;n<r.length;n+=i){const s=a=>{(0,t.assert)(a>=0,"Cannot skip a negative number of bytes."),(0,t.assert)(a%i===0,"Length must be a multiple of the size."),n+=a},o=r.subarray(n);yield{skip:s,value:o}}return{skip:()=>{},value:new Uint8Array}};return hn.iterate=e,hn}var Hr={},Ll={},zr={},lr={},of;function hw(){if(of)return lr;of=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.padEnd=lr.padStart=lr.set=void 0;const t=xe(),e=32,r=(s,o,a)=>(0,t.concatBytes)([s.subarray(0,a),o,s.subarray(a+o.length)]);lr.set=r;const i=(s,o=e)=>{const a=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([a,s])};lr.padStart=i;const n=(s,o=e)=>{const a=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([s,a])};return lr.padEnd=n,lr}var lf;function Yi(){return lf||(lf=1,function(t){var e=zr&&zr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=zr&&zr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(hw(),t)}(zr)),zr}var cf;function uw(){return cf||(cf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.address=t.getAddress=void 0;const e=xe(),r=tr(),i=Yi(),n=s=>{const o=(0,e.createBytes)(s);return(0,e.assert)(o.length<=20,new r.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${o.length} bytes.`)),(0,i.padStart)(o,20)};t.getAddress=n,t.address={isDynamic:!1,isType:s=>s==="address",getByteLength(){return 32},encode({buffer:s,value:o,packed:a}){const l=(0,t.getAddress)(o);if(a)return(0,e.concatBytes)([s,l]);const c=(0,i.padStart)(l);return(0,e.concatBytes)([s,c])},decode({value:s}){return(0,e.add0x)((0,e.bytesToHex)(s.slice(12,32)))}}}(Ll)),Ll}var Bl={},Rl={},hf;function dh(){return hf||(hf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fixedBytes=t.getByteLength=void 0;const e=xe(),r=tr(),i=Yi(),n=/^bytes([0-9]{1,2})$/u,s=o=>{const a=o.match(n)?.[1];(0,e.assert)(a,`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`);const l=Number(a);return(0,e.assert)(l>0&&l<=32,new r.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`)),l};t.getByteLength=s,t.fixedBytes={isDynamic:!1,isType(o){return n.test(o)},getByteLength(){return 32},encode({type:o,buffer:a,value:l,packed:c}){const h=(0,t.getByteLength)(o),u=(0,e.createBytes)(l);return(0,e.assert)(u.length<=h,new r.ParserError(`Expected a value of length ${h}, but received a value of length ${u.length}.`)),c?(0,e.concatBytes)([a,(0,i.padEnd)(u,h)]):(0,e.concatBytes)([a,(0,i.padEnd)(u)])},decode({type:o,value:a}){const l=(0,t.getByteLength)(o);return a.slice(0,l)}}}(Rl)),Rl}var Ml={},uf;function $g(){return uf||(uf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tuple=t.getTupleElements=void 0;const e=xe(),r=tr(),i=fh(),n=/^\((.+)\)$/u,s=a=>n.test(a),o=a=>{(0,e.assert)(a.startsWith("(")&&a.endsWith(")"),new r.ParserError(`Invalid tuple type. Expected tuple type, but received "${a}".`));const l=[];let c="",h=0;for(let u=1;u<a.length-1;u++){const d=a[u];d===","&&h===0?(l.push(c.trim()),c=""):(c+=d,d==="("?h+=1:d===")"&&(h-=1))}return c.trim()&&l.push(c.trim()),l};t.getTupleElements=o,t.tuple={isDynamic(a){return(0,t.getTupleElements)(a).some(c=>{const h=(0,i.getParser)(c);return(0,i.isDynamicParser)(h,c)})},isType(a){return s(a)},getByteLength(a){return(0,i.isDynamicParser)(this,a)?32:(0,t.getTupleElements)(a).reduce((c,h)=>c+(0,i.getParser)(h).getByteLength(h),0)},encode({type:a,buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getTupleElements)(a);return(0,i.pack)({types:d,values:c,byteArray:l,packed:h,tight:u})},decode({type:a,value:l,skip:c}){const h=(0,t.getTupleElements)(a),u=this.getByteLength(a)-32;return c(u),(0,i.unpack)(h,l)}}}(Ml)),Ml}var df;function dw(){return df||(df=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.array=t.getTupleType=t.getArrayType=t.isArrayType=void 0;const e=xe(),r=tr(),i=fh(),n=Yi(),s=dh(),o=$g(),a=/^(?<type>.*)\[(?<length>\d*?)\]$/u,l=u=>a.test(u);t.isArrayType=l;const c=u=>{const d=u.match(a);return(0,e.assert)(d?.groups?.type,new r.ParserError(`Invalid array type. Expected an array type, but received "${u}".`)),[d.groups.type,d.groups.length?parseInt(d.groups.length,10):void 0]};t.getArrayType=c;const h=(u,d)=>`(${new Array(d).fill(u).join(",")})`;t.getTupleType=h,t.array={isDynamic(u){const[d,f]=(0,t.getArrayType)(u);return f===void 0||(0,i.isDynamicParser)((0,i.getParser)(d),d)},isType(u){return(0,t.isArrayType)(u)},getByteLength(u){(0,e.assert)((0,t.isArrayType)(u),new r.ParserError(`Expected an array type, but received "${u}".`));const[d,f]=(0,t.getArrayType)(u);return!(0,i.isDynamicParser)(this,u)&&f!==void 0?o.tuple.getByteLength((0,t.getTupleType)(d,f)):32},encode({type:u,buffer:d,value:f,packed:p,tight:g}){const[b,x]=(0,t.getArrayType)(u);if((0,e.assert)(!p||!(0,t.isArrayType)(b),new r.ParserError("Cannot pack nested arrays.")),p&&(0,i.isDynamicParser)((0,i.getParser)(b),b))return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:d,packed:p,arrayPacked:!0,tight:g});if(x)return(0,e.assert)(x===f.length,new r.ParserError(`Array length does not match type length. Expected a length of ${x}, but received ${f.length}.`)),o.tuple.encode({type:(0,t.getTupleType)(b,x),buffer:d,value:f,packed:s.fixedBytes.isType(b)&&g,tight:g});if(p)return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:d,packed:s.fixedBytes.isType(b)&&g,arrayPacked:!0,tight:g});const _=(0,n.padStart)((0,e.numberToBytes)(f.length));return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:(0,e.concatBytes)([d,_]),packed:p,tight:g})},decode({type:u,value:d,...f}){const[p,g]=(0,t.getArrayType)(u);if(g){const x=o.tuple.decode({type:(0,t.getTupleType)(p,g),value:d,...f});return(0,e.assert)(x.length===g,new r.ParserError(`Array length does not match type length. Expected a length of ${g}, but received ${x.length}.`)),x}const b=(0,e.bytesToNumber)(d.subarray(0,32));return(0,i.unpack)(new Array(b).fill(p),d.subarray(32))}}}(Bl)),Bl}var $l={},Il={},ff;function Ig(){return ff||(ff=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.number=t.getBigInt=t.assertNumberLength=t.getLength=t.isSigned=void 0;const e=xe(),r=tr(),i=Yi(),n=/^u?int(?<length>[0-9]*)?$/u,s=c=>!c.startsWith("u");t.isSigned=s;const o=c=>{if(c==="int"||c==="uint")return 256;const h=c.match(n);(0,e.assert)(h?.groups?.length,new r.ParserError(`Invalid number type. Expected a number type, but received "${c}".`));const u=parseInt(h.groups.length,10);return(0,e.assert)(u>=8&&u<=256,new r.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${c}".`)),(0,e.assert)(u%8===0,new r.ParserError(`Invalid number length. Expected a multiple of 8, but received "${c}".`)),u};t.getLength=o;const a=(c,h)=>{const u=(0,t.getLength)(h),d=BigInt(2)**BigInt(u-((0,t.isSigned)(h)?1:0))-BigInt(1);if((0,t.isSigned)(h)){(0,e.assert)(c>=-(d+BigInt(1))&&c<=d,new r.ParserError(`Number "${c}" is out of range for type "${h}".`));return}(0,e.assert)(c<=d,new r.ParserError(`Number "${c}" is out of range for type "${h}".`))};t.assertNumberLength=a;const l=c=>{try{return(0,e.createBigInt)(c)}catch{throw new r.ParserError(`Invalid number. Expected a valid number value, but received "${c}".`)}};t.getBigInt=l,t.number={isDynamic:!1,isType(c){return n.test(c)},getByteLength(){return 32},encode({type:c,buffer:h,value:u,packed:d}){const f=(0,t.getBigInt)(u);if((0,t.assertNumberLength)(f,c),(0,t.isSigned)(c)){if(d){const p=(0,t.getLength)(c)/8;return(0,e.concatBytes)([h,(0,e.signedBigIntToBytes)(f,p)])}return(0,e.concatBytes)([h,(0,i.padStart)((0,e.signedBigIntToBytes)(f,32))])}if(d){const p=(0,t.getLength)(c)/8;return(0,e.concatBytes)([h,(0,i.padStart)((0,e.bigIntToBytes)(f),p)])}return(0,e.concatBytes)([h,(0,i.padStart)((0,e.bigIntToBytes)(f))])},decode({type:c,value:h}){const u=h.subarray(0,32);if((0,t.isSigned)(c)){const f=(0,e.bytesToSignedBigInt)(u);return(0,t.assertNumberLength)(f,c),f}const d=(0,e.bytesToBigInt)(u);return(0,t.assertNumberLength)(d,c),d}}}(Il)),Il}var pf;function fw(){return pf||(pf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bool=t.getBooleanValue=void 0;const e=Qe(),r=xe(),i=tr(),n=Ig(),s=(0,e.coerce)((0,e.boolean)(),(0,e.union)([(0,e.literal)("true"),(0,e.literal)("false")]),a=>a==="true"),o=a=>{try{return(0,e.create)(a,s)?BigInt(1):BigInt(0)}catch{throw new i.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${a}".`)}};t.getBooleanValue=o,t.bool={isDynamic:!1,isType:a=>a==="bool",getByteLength(){return 32},encode({buffer:a,value:l,packed:c,tight:h}){const u=(0,t.getBooleanValue)(l);return c?(0,r.concatBytes)([a,(0,r.bigIntToBytes)(u)]):n.number.encode({type:"uint256",buffer:a,value:u,packed:c,tight:h})},decode(a){return n.number.decode({...a,type:"uint256"})===BigInt(1)}}}($l)),$l}var un={},gf;function Og(){if(gf)return un;gf=1,Object.defineProperty(un,"__esModule",{value:!0}),un.bytes=void 0;const t=xe(),e=Yi();return un.bytes={isDynamic:!0,isType:r=>r==="bytes",getByteLength(){return 32},encode({buffer:r,value:i,packed:n}){const s=(0,t.createBytes)(i);if(n)return(0,t.concatBytes)([r,s]);const o=Math.ceil(s.byteLength/32)*32;return(0,t.concatBytes)([r,(0,e.padStart)((0,t.numberToBytes)(s.byteLength)),(0,e.padEnd)(s,o)])},decode({value:r}){const i=r.subarray(0,32),n=(0,t.bytesToNumber)(i);return r.slice(32,32+n)}},un}var Ol={},mf;function pw(){return mf||(mf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.getFunction=void 0;const e=Qe(),r=xe(),i=tr(),n=dh(),s=(0,e.coerce)((0,e.object)({address:r.StrictHexStruct,selector:r.StrictHexStruct}),(0,e.union)([r.StrictHexStruct,(0,e.instance)(Uint8Array)]),a=>{const l=(0,r.createBytes)(a);return(0,r.assert)(l.length===24,new i.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${l.length} bytes.`)),{address:(0,r.bytesToHex)(l.subarray(0,20)),selector:(0,r.bytesToHex)(l.subarray(20,24))}}),o=a=>{const l=(0,e.create)(a,s);return(0,r.concatBytes)([(0,r.hexToBytes)(l.address),(0,r.hexToBytes)(l.selector)])};t.getFunction=o,t.fn={isDynamic:!1,isType:a=>a==="function",getByteLength(){return 32},encode({buffer:a,value:l,packed:c,tight:h}){const u=(0,t.getFunction)(l);return n.fixedBytes.encode({type:"bytes24",buffer:a,value:u,packed:c,tight:h})},decode({value:a}){return{address:(0,r.bytesToHex)(a.slice(0,20)),selector:(0,r.bytesToHex)(a.slice(20,24))}}}}(Ol)),Ol}var Pl={},yf;function gw(){return yf||(yf=1,Object.defineProperty(Pl,"__esModule",{value:!0})),Pl}var dn={},bf;function mw(){if(bf)return dn;bf=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.string=void 0;const t=xe(),e=Og();return dn.string={isDynamic:!0,isType:r=>r==="string",getByteLength(){return 32},encode({buffer:r,value:i,packed:n,tight:s}){return e.bytes.encode({type:"bytes",buffer:r,value:(0,t.stringToBytes)(i),packed:n,tight:s})},decode(r){return(0,t.bytesToString)(e.bytes.decode(r))}},dn}var xf;function yw(){return xf||(xf=1,function(t){var e=Hr&&Hr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Hr&&Hr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(uw(),t),r(dw(),t),r(fw(),t),r(Og(),t),r(dh(),t),r(pw(),t),r(Ig(),t),r(gw(),t),r(mw(),t),r($g(),t)}(Hr)),Hr}var _f;function fh(){return _f||(_f=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.isDynamicParser=t.getParser=void 0;const e=xe(),r=tr(),i=cw(),n=yw(),s=Yi(),o=h=>{const u={address:n.address,array:n.array,bool:n.bool,bytes:n.bytes,fixedBytes:n.fixedBytes,function:n.fn,number:n.number,string:n.string,tuple:n.tuple},d=u[h];if(d)return d;const f=Object.values(u).find(p=>p.isType(h));if(f)return f;throw new r.ParserError(`The type "${h}" is not supported.`)};t.getParser=o;const a=(h,u)=>{const{isDynamic:d}=h;return typeof d=="function"?d(u):d};t.isDynamicParser=a;const l=({types:h,values:u,packed:d=!1,tight:f=!1,arrayPacked:p=!1,byteArray:g=new Uint8Array})=>{(0,e.assert)(h.length===u.length,new r.ParserError(`The number of types (${h.length}) does not match the number of values (${u.length}).`));const{staticBuffer:b,dynamicBuffer:x,pointers:_}=h.reduce(({staticBuffer:v,dynamicBuffer:R,pointers:M},O,P)=>{const w=(0,t.getParser)(O),E=u[P];if(d||p||!(0,t.isDynamicParser)(w,O))return{staticBuffer:w.encode({buffer:v,value:E,type:O,packed:d,tight:f}),dynamicBuffer:R,pointers:M};const z=(0,e.concatBytes)([v,new Uint8Array(32)]),I=w.encode({buffer:R,value:E,type:O,packed:d,tight:f});return{staticBuffer:z,dynamicBuffer:I,pointers:[...M,{position:v.length,pointer:R.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,e.assert)(!d&&!p||x.length===0,new r.ParserError("Invalid pack state."));const T=b.length,C=_.reduce((v,{pointer:R,position:M})=>{const O=(0,s.padStart)((0,e.numberToBytes)(T+R));return(0,s.set)(v,O,M)},b);return(0,e.concatBytes)([g,C,x])};t.pack=l;const c=(h,u)=>{const d=(0,i.iterate)(u);return h.map(f=>{const{value:{value:p,skip:g},done:b}=d.next();(0,e.assert)(!b,new r.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${f}".`));const x=(0,t.getParser)(f);if((0,t.isDynamicParser)(x,f)){const T=(0,e.bytesToNumber)(p.subarray(0,32)),C=u.subarray(T);return x.decode({type:f,value:C,skip:g})}return x.decode({type:f,value:p,skip:g})})};t.unpack=c}(Al)),Al}var wf;function bw(){return wf||(wf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSingle=t.decode=t.encodePacked=t.encodeSingle=t.encode=void 0;const e=xe(),r=tr(),i=fh(),n=(c,h,u,d)=>{try{return(0,i.pack)({types:c,values:h,packed:u,tight:d})}catch(f){throw f instanceof r.ParserError?new r.ParserError(`Unable to encode value: ${f.message}`,f):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(f)}`,f)}};t.encode=n;const s=(c,h)=>(0,t.encode)([c],[h]);t.encodeSingle=s;const o=(c,h,u)=>(0,t.encode)(c,h,!0,u);t.encodePacked=o;const a=(c,h)=>{const u=(0,e.createBytes)(h);try{return(0,i.unpack)(c,u)}catch(d){throw d instanceof r.ParserError?new r.ParserError(`Unable to decode value: ${d.message}`,d):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(d)}`,d)}};t.decode=a;const l=(c,h)=>{const u=(0,t.decode)([c],h);return(0,e.assert)(u.length===1,new r.ParserError("Decoded value array has unexpected length.")),u[0]};t.decodeSingle=l}(pl)),pl}var Wr={},Fl={},vf;function xw(){return vf||(vf=1,Object.defineProperty(Fl,"__esModule",{value:!0})),Fl}var Cf;function _w(){return Cf||(Cf=1,function(t){var e=Wr&&Wr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Wr&&Wr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(xw(),t)}(Wr)),Wr}var Sf;function Pg(){return Sf||(Sf=1,function(t){var e=jr&&jr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=jr&&jr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(bw(),t),r(tr(),t),r(_w(),t)}(jr)),jr}var Ie={},Nl={},vt={},kf;function ww(){if(kf)return vt;kf=1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(vt,"__esModule",{value:!0}),vt.notImplemented=vt.bitMask=void 0,vt.isBytes=r,vt.abytes=i,vt.abool=n,vt.numberToHexUnpadded=s,vt.hexToNumber=o,vt.bytesToHex=c,vt.hexToBytes=d,vt.bytesToNumberBE=f,vt.bytesToNumberLE=p,vt.numberToBytesBE=g,vt.numberToBytesLE=b,vt.numberToVarBytesBE=x,vt.ensureBytes=_,vt.concatBytes=T,vt.equalBytes=C,vt.utf8ToBytes=v,vt.inRange=M,vt.aInRange=O,vt.bitLen=P,vt.bitGet=w,vt.bitSet=E,vt.createHmacDrbg=S,vt.validateObject=N,vt.memoized=B;const t=BigInt(0),e=BigInt(1);function r(A){return A instanceof Uint8Array||ArrayBuffer.isView(A)&&A.constructor.name==="Uint8Array"}function i(A){if(!r(A))throw new Error("Uint8Array expected")}function n(A,q){if(typeof q!="boolean")throw new Error(A+" boolean expected, got "+q)}function s(A){const q=A.toString(16);return q.length&1?"0"+q:q}function o(A){if(typeof A!="string")throw new Error("hex string expected, got "+typeof A);return A===""?t:BigInt("0x"+A)}const a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",l=Array.from({length:256},(A,q)=>q.toString(16).padStart(2,"0"));function c(A){if(i(A),a)return A.toHex();let q="";for(let W=0;W<A.length;W++)q+=l[A[W]];return q}const h={_0:48,_9:57,A:65,F:70,a:97,f:102};function u(A){if(A>=h._0&&A<=h._9)return A-h._0;if(A>=h.A&&A<=h.F)return A-(h.A-10);if(A>=h.a&&A<=h.f)return A-(h.a-10)}function d(A){if(typeof A!="string")throw new Error("hex string expected, got "+typeof A);if(a)return Uint8Array.fromHex(A);const q=A.length,W=q/2;if(q%2)throw new Error("hex string expected, got unpadded hex of length "+q);const U=new Uint8Array(W);for(let $=0,F=0;$<W;$++,F+=2){const V=u(A.charCodeAt(F)),K=u(A.charCodeAt(F+1));if(V===void 0||K===void 0){const Q=A[F]+A[F+1];throw new Error('hex string expected, got non-hex character "'+Q+'" at index '+F)}U[$]=V*16+K}return U}function f(A){return o(c(A))}function p(A){return i(A),o(c(Uint8Array.from(A).reverse()))}function g(A,q){return d(A.toString(16).padStart(q*2,"0"))}function b(A,q){return g(A,q).reverse()}function x(A){return d(s(A))}function _(A,q,W){let U;if(typeof q=="string")try{U=d(q)}catch(F){throw new Error(A+" must be hex string or Uint8Array, cause: "+F)}else if(r(q))U=Uint8Array.from(q);else throw new Error(A+" must be hex string or Uint8Array");const $=U.length;if(typeof W=="number"&&$!==W)throw new Error(A+" of length "+W+" expected, got "+$);return U}function T(...A){let q=0;for(let U=0;U<A.length;U++){const $=A[U];i($),q+=$.length}const W=new Uint8Array(q);for(let U=0,$=0;U<A.length;U++){const F=A[U];W.set(F,$),$+=F.length}return W}function C(A,q){if(A.length!==q.length)return!1;let W=0;for(let U=0;U<A.length;U++)W|=A[U]^q[U];return W===0}function v(A){if(typeof A!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(A))}const R=A=>typeof A=="bigint"&&t<=A;function M(A,q,W){return R(A)&&R(q)&&R(W)&&q<=A&&A<W}function O(A,q,W,U){if(!M(q,W,U))throw new Error("expected valid "+A+": "+W+" <= n < "+U+", got "+q)}function P(A){let q;for(q=0;A>t;A>>=e,q+=1);return q}function w(A,q){return A>>BigInt(q)&e}function E(A,q,W){return A|(W?e:t)<<BigInt(q)}const z=A=>(e<<BigInt(A))-e;vt.bitMask=z;const I=A=>new Uint8Array(A),k=A=>Uint8Array.from(A);function S(A,q,W){if(typeof A!="number"||A<2)throw new Error("hashLen must be a number");if(typeof q!="number"||q<2)throw new Error("qByteLen must be a number");if(typeof W!="function")throw new Error("hmacFn must be a function");let U=I(A),$=I(A),F=0;const V=()=>{U.fill(1),$.fill(0),F=0},K=(...gt)=>W($,U,...gt),Q=(gt=I(0))=>{$=K(k([0]),gt),U=K(),gt.length!==0&&($=K(k([1]),gt),U=K())},Z=()=>{if(F++>=1e3)throw new Error("drbg: tried 1000 values");let gt=0;const Et=[];for(;gt<q;){U=K();const At=U.slice();Et.push(At),gt+=U.length}return T(...Et)};return(gt,Et)=>{V(),Q(gt);let At;for(;!(At=Et(Z()));)Q();return V(),At}}const L={bigint:A=>typeof A=="bigint",function:A=>typeof A=="function",boolean:A=>typeof A=="boolean",string:A=>typeof A=="string",stringOrUint8Array:A=>typeof A=="string"||r(A),isSafeInteger:A=>Number.isSafeInteger(A),array:A=>Array.isArray(A),field:(A,q)=>q.Fp.isValid(A),hash:A=>typeof A=="function"&&Number.isSafeInteger(A.outputLen)};function N(A,q,W={}){const U=($,F,V)=>{const K=L[F];if(typeof K!="function")throw new Error("invalid validator function");const Q=A[$];if(!(V&&Q===void 0)&&!K(Q,A))throw new Error("param "+String($)+" is invalid. Expected "+F+", got "+Q)};for(const[$,F]of Object.entries(q))U($,F,!1);for(const[$,F]of Object.entries(W))U($,F,!0);return A}const j=()=>{throw new Error("not implemented")};vt.notImplemented=j;function B(A){const q=new WeakMap;return(W,...U)=>{const $=q.get(W);if($!==void 0)return $;const F=A(W,...U);return q.set(W,F),F}}return vt}var Oe={},Tf;function vw(){if(Tf)return Oe;Tf=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.aoutput=Oe.anumber=Oe.aexists=Oe.abytes=void 0;const t=Js();return Oe.abytes=t.abytes,Oe.aexists=t.aexists,Oe.anumber=t.anumber,Oe.aoutput=t.aoutput,Oe}var Ef;function Fg(){return Ef||(Ef=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.assertBytes=t.assertBool=t.utf8ToBytes=t.toHex=t.createView=t.concatBytes=t.bytesToHex=void 0,t.bytesToUtf8=s,t.hexToBytes=o,t.equalsBytes=a,t.wrapHash=l;const e=ww();Object.defineProperty(t,"assertBool",{enumerable:!0,get:function(){return e.abool}});const r=vw();Object.defineProperty(t,"assertBytes",{enumerable:!0,get:function(){return r.abytes}});const i=Js();var n=Js();Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return n.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return n.createView}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return n.utf8ToBytes}});function s(c){if(!(c instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof c}`);return new TextDecoder().decode(c)}function o(c){const h=c.startsWith("0x")?c.substring(2):c;return(0,i.hexToBytes)(h)}function a(c,h){if(c.length!==h.length)return!1;for(let u=0;u<c.length;u++)if(c[u]!==h[u])return!1;return!0}function l(c){return h=>((0,r.abytes)(h),c(h))}}(Nl)),Nl}var Af;function ns(){if(Af)return Ie;Af=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.compare=Ie.concat=Ie.toHex=Ie.toBytes=void 0;const t=Fg();function e(s){return s instanceof Uint8Array?s:typeof s=="string"?(0,t.hexToBytes)(s):new Uint8Array(s)}Ie.toBytes=e;function r(s){return typeof s=="string"?((0,t.hexToBytes)(s),s.replace(/^(0x)?/,"0x")):s instanceof Uint8Array?"0x"+(0,t.bytesToHex)(s):"0x"+(0,t.bytesToHex)(new Uint8Array(s))}Ie.toHex=r;function i(s){return(0,t.concatBytes)(...s.map(e))}Ie.concat=i;function n(s,o){const a=BigInt(r(s))-BigInt(r(o));return a>0?1:a<0?-1:0}return Ie.compare=n,Ie}var Yt={},cr={},Pe={},Lf;function Cw(){if(Lf)return Pe;Lf=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.keccak512=Pe.keccak384=Pe.keccak256=Pe.keccak224=void 0;const t=Tg(),e=Fg();return Pe.keccak224=(0,e.wrapHash)(t.keccak_224),Pe.keccak256=(()=>{const r=(0,e.wrapHash)(t.keccak_256);return r.create=t.keccak_256.create,r})(),Pe.keccak384=(0,e.wrapHash)(t.keccak_384),Pe.keccak512=(0,e.wrapHash)(t.keccak_512),Pe}var Bf;function Ng(){if(Bf)return cr;Bf=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.standardNodeHash=cr.standardLeafHash=cr.keccak256=void 0;const t=Pg(),e=Cw(),r=ns();function i(o){return(0,r.toHex)((0,e.keccak256)((0,r.toBytes)(o)))}cr.keccak256=i;function n(o,a){return i(i((0,t.encode)(o,a)))}cr.standardLeafHash=n;function s(o,a){return i((0,r.concat)([o,a].sort(r.compare)))}return cr.standardNodeHash=s,cr}var we={},Rf;function Da(){if(Rf)return we;Rf=1,Object.defineProperty(we,"__esModule",{value:!0}),we.invariant=we.validateArgument=we.InvalidArgumentError=we.InvariantError=we.throwError=void 0;function t(s){throw new Error(s)}we.throwError=t;class e extends Error{constructor(o){super(o),this.name="InvariantError"}}we.InvariantError=e;class r extends Error{constructor(o){super(o),this.name="InvalidArgumentError"}}we.InvalidArgumentError=r;function i(s,o){if(!s)throw new r(o)}we.validateArgument=i;function n(s,o){if(!s)throw new e(o)}return we.invariant=n,we}var Mf;function ph(){if(Mf)return Yt;Mf=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.renderMerkleTree=Yt.isValidMerkleTree=Yt.processMultiProof=Yt.getMultiProof=Yt.processProof=Yt.getProof=Yt.makeMerkleTree=void 0;const t=ns(),e=Ng(),r=Da(),i=C=>2*C+1,n=C=>2*C+2,s=C=>C>0?Math.floor((C-1)/2):(0,r.throwError)("Root has no parent"),o=C=>C>0?C-(-1)**(C%2):(0,r.throwError)("Root has no siblings"),a=(C,v)=>v>=0&&v<C.length,l=(C,v)=>a(C,i(v)),c=(C,v)=>a(C,v)&&!l(C,v),h=C=>(0,t.toBytes)(C).length===32,u=(C,v)=>void(c(C,v)||(0,r.throwError)("Index is not a leaf")),d=C=>void(h(C)||(0,r.throwError)("Merkle tree nodes must be Uint8Array of length 32"));function f(C,v=e.standardNodeHash){C.forEach(d),(0,r.validateArgument)(C.length!==0,"Expected non-zero number of leaves");const R=new Array(2*C.length-1);for(const[M,O]of C.entries())R[R.length-1-M]=(0,t.toHex)(O);for(let M=R.length-1-C.length;M>=0;M--)R[M]=v(R[i(M)],R[n(M)]);return R}Yt.makeMerkleTree=f;function p(C,v){u(C,v);const R=[];for(;v>0;)R.push((0,t.toHex)(C[o(v)])),v=s(v);return R}Yt.getProof=p;function g(C,v,R=e.standardNodeHash){return d(C),v.forEach(d),(0,t.toHex)(v.reduce(R,C))}Yt.processProof=g;function b(C,v){v.forEach(P=>u(C,P)),v.sort((P,w)=>w-P),(0,r.validateArgument)(v.slice(1).every((P,w)=>P!==v[w]),"Cannot prove duplicated index");const R=Array.from(v),M=[],O=[];for(;R.length>0&&R[0]>0;){const P=R.shift(),w=o(P),E=s(P);w===R[0]?(O.push(!0),R.shift()):(O.push(!1),M.push((0,t.toHex)(C[w]))),R.push(E)}return v.length===0&&M.push((0,t.toHex)(C[0])),{leaves:v.map(P=>(0,t.toHex)(C[P])),proof:M,proofFlags:O}}Yt.getMultiProof=b;function x(C,v=e.standardNodeHash){C.leaves.forEach(d),C.proof.forEach(d),(0,r.validateArgument)(C.proof.length>=C.proofFlags.filter(O=>!O).length,"Invalid multiproof format"),(0,r.validateArgument)(C.leaves.length+C.proof.length===C.proofFlags.length+1,"Provided leaves and multiproof are not compatible");const R=Array.from(C.leaves),M=Array.from(C.proof);for(const O of C.proofFlags){const P=R.shift(),w=O?R.shift():M.shift();(0,r.invariant)(P!==void 0&&w!==void 0),R.push(v(P,w))}return(0,r.invariant)(R.length+M.length===1),(0,t.toHex)(R.pop()??M.shift())}Yt.processMultiProof=x;function _(C,v=e.standardNodeHash){for(const[R,M]of C.entries()){if(!h(M))return!1;const O=i(R),P=n(R);if(P>=C.length){if(O<C.length)return!1}else if((0,t.compare)(M,v(C[O],C[P])))return!1}return C.length>0}Yt.isValidMerkleTree=_;function T(C){(0,r.validateArgument)(C.length!==0,"Expected non-zero number of nodes");const v=[[0,[]]],R=[];for(;v.length>0;){const[M,O]=v.pop();R.push(O.slice(0,-1).map(P=>["   ","  "][P]).join("")+O.slice(-1).map(P=>[" "," "][P]).join("")+M+") "+(0,t.toHex)(C[M])),n(M)<C.length&&(v.push([n(M),O.concat(0)]),v.push([i(M),O.concat(1)]))}return R.join(`
`)}return Yt.renderMerkleTree=T,Yt}var fn={},pn={},$f;function Sw(){return $f||($f=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.defaultOptions=void 0,pn.defaultOptions={sortLeaves:!0}),pn}var If;function jg(){if(If)return fn;If=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.MerkleTreeImpl=void 0;const t=ns(),e=ph(),r=Sw(),i=Da();class n{constructor(o,a,l,c){this.tree=o,this.values=a,this.leafHash=l,this.nodeHash=c,(0,i.validateArgument)(a.every(({value:h})=>typeof h!="number"),"Leaf values cannot be numbers"),this.hashLookup=Object.fromEntries(a.map(({treeIndex:h},u)=>[o[h],u]))}static prepare(o,a={},l,c){const h=a.sortLeaves??r.defaultOptions.sortLeaves,u=o.map((p,g)=>({value:p,valueIndex:g,hash:l(p)}));h&&u.sort((p,g)=>(0,t.compare)(p.hash,g.hash));const d=(0,e.makeMerkleTree)(u.map(p=>p.hash),c),f=o.map(p=>({value:p,treeIndex:0}));for(const[p,{valueIndex:g}]of u.entries())f[g].treeIndex=d.length-p-1;return[d,f]}get root(){return this.tree[0]}get length(){return this.values.length}at(o){return this.values.at(o)?.value}render(){return(0,e.renderMerkleTree)(this.tree)}*entries(){for(const[o,{value:a}]of this.values.entries())yield[o,a]}validate(){this.values.forEach((o,a)=>this._validateValueAt(a)),(0,i.invariant)((0,e.isValidMerkleTree)(this.tree,this.nodeHash),"Merkle tree is invalid")}leafLookup(o){const a=this.hashLookup[this.leafHash(o)];return(0,i.validateArgument)(typeof a<"u","Leaf is not in tree"),a}getProof(o){const a=typeof o=="number"?o:this.leafLookup(o);this._validateValueAt(a);const{treeIndex:l}=this.values[a],c=(0,e.getProof)(this.tree,l);return(0,i.invariant)(this._verify(this.tree[l],c),"Unable to prove value"),c}getMultiProof(o){const a=o.map(h=>typeof h=="number"?h:this.leafLookup(h));for(const h of a)this._validateValueAt(h);const l=a.map(h=>this.values[h].treeIndex),c=(0,e.getMultiProof)(this.tree,l);return(0,i.invariant)(this._verifyMultiProof(c),"Unable to prove values"),{leaves:c.leaves.map(h=>this.values[this.hashLookup[h]].value),proof:c.proof,proofFlags:c.proofFlags}}verify(o,a){return this._verify(this._leafHash(o),a)}verifyMultiProof(o){return this._verifyMultiProof({leaves:o.leaves.map(a=>this._leafHash(a)),proof:o.proof,proofFlags:o.proofFlags})}_validateValueAt(o){const a=this.values[o];(0,i.validateArgument)(a!==void 0,"Index out of bounds"),(0,i.invariant)(this.tree[a.treeIndex]===this.leafHash(a.value),"Merkle tree does not contain the expected value")}_leafHash(o){if(typeof o=="number"){const a=this.values[o];(0,i.validateArgument)(a!==void 0,"Index out of bounds"),o=a.value}return this.leafHash(o)}_verify(o,a){return this.root===(0,e.processProof)(o,a,this.nodeHash)}_verifyMultiProof(o){return this.root===(0,e.processMultiProof)(o,this.nodeHash)}}return fn.MerkleTreeImpl=n,fn}var Of;function kw(){if(Of)return Nr;Of=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.SimpleMerkleTree=Nr.formatLeaf=void 0;const t=Pg(),e=ns(),r=ph(),i=jg(),n=Da();function s(a){return(0,e.toHex)((0,t.encode)(["bytes32"],[a]))}Nr.formatLeaf=s;class o extends i.MerkleTreeImpl{static of(l,c={}){const[h,u]=i.MerkleTreeImpl.prepare(l,c,s,c.nodeHash);return new o(h,u,s,c.nodeHash)}static load(l,c){(0,n.validateArgument)(l.format==="simple-v1",`Unknown format '${l.format}'`),(0,n.validateArgument)(c==null!=(l.hash=="custom"),c?"Data does not expect a custom node hashing function":"Data expects a custom node hashing function");const h=new o(l.tree,l.values,s,c);return h.validate(),h}static verify(l,c,h,u){return(0,e.toHex)(l)===(0,r.processProof)(s(c),h,u)}static verifyMultiProof(l,c,h){return(0,e.toHex)(l)===(0,r.processMultiProof)(c,h)}dump(){return{format:"simple-v1",tree:this.tree,values:this.values.map(({value:l,treeIndex:c})=>({value:(0,e.toHex)(l),treeIndex:c})),...this.nodeHash?{hash:"custom"}:{}}}}return Nr.SimpleMerkleTree=o,Nr}var gn={},Pf;function Tw(){if(Pf)return gn;Pf=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.StandardMerkleTree=void 0;const t=ns(),e=ph(),r=jg(),i=Ng(),n=Da();class s extends r.MerkleTreeImpl{constructor(a,l,c){super(a,l,h=>(0,i.standardLeafHash)(c,h)),this.tree=a,this.values=l,this.leafEncoding=c}static of(a,l,c={}){const[h,u]=r.MerkleTreeImpl.prepare(a,c,d=>(0,i.standardLeafHash)(l,d));return new s(h,u,l)}static load(a){(0,n.validateArgument)(a.format==="standard-v1",`Unknown format '${a.format}'`),(0,n.validateArgument)(a.leafEncoding!==void 0,"Expected leaf encoding");const l=new s(a.tree,a.values,a.leafEncoding);return l.validate(),l}static verify(a,l,c,h){return(0,t.toHex)(a)===(0,e.processProof)((0,i.standardLeafHash)(l,c),h)}static verifyMultiProof(a,l,c){return(0,t.toHex)(a)===(0,e.processMultiProof)({leaves:c.leaves.map(h=>(0,i.standardLeafHash)(l,h)),proof:c.proof,proofFlags:c.proofFlags})}dump(){return{format:"standard-v1",leafEncoding:this.leafEncoding,tree:this.tree,values:this.values}}}return gn.StandardMerkleTree=s,gn}var Ff;function Ew(){return Ff||(Ff=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardMerkleTree=t.SimpleMerkleTree=void 0;var e=kw();Object.defineProperty(t,"SimpleMerkleTree",{enumerable:!0,get:function(){return e.SimpleMerkleTree}});var r=Tw();Object.defineProperty(t,"StandardMerkleTree",{enumerable:!0,get:function(){return r.StandardMerkleTree}})}(fl)),fl}var Pi=Ew(),Is={exports:{}},Aw=Is.exports,Nf;function Lw(){return Nf||(Nf=1,function(t,e){(function(r,i){t.exports=i()})(Aw,function(){var r=1e3,i=6e4,n=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",d="quarter",f="year",p="date",g="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var S=["th","st","nd","rd"],L=k%100;return"["+k+(S[(L-20)%10]||S[L]||S[0])+"]"}},T=function(k,S,L){var N=String(k);return!N||N.length>=S?k:""+Array(S+1-N.length).join(L)+k},C={s:T,z:function(k){var S=-k.utcOffset(),L=Math.abs(S),N=Math.floor(L/60),j=L%60;return(S<=0?"+":"-")+T(N,2,"0")+":"+T(j,2,"0")},m:function k(S,L){if(S.date()<L.date())return-k(L,S);var N=12*(L.year()-S.year())+(L.month()-S.month()),j=S.clone().add(N,u),B=L-j<0,A=S.clone().add(N+(B?-1:1),u);return+(-(N+(L-j)/(B?j-A:A-j))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:u,y:f,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},v="en",R={};R[v]=_;var M="$isDayjsObject",O=function(k){return k instanceof z||!(!k||!k[M])},P=function k(S,L,N){var j;if(!S)return v;if(typeof S=="string"){var B=S.toLowerCase();R[B]&&(j=B),L&&(R[B]=L,j=B);var A=S.split("-");if(!j&&A.length>1)return k(A[0])}else{var q=S.name;R[q]=S,j=q}return!N&&j&&(v=j),j||!N&&v},w=function(k,S){if(O(k))return k.clone();var L=typeof S=="object"?S:{};return L.date=k,L.args=arguments,new z(L)},E=C;E.l=P,E.i=O,E.w=function(k,S){return w(k,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var z=function(){function k(L){this.$L=P(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[M]=!0}var S=k.prototype;return S.parse=function(L){this.$d=function(N){var j=N.date,B=N.utc;if(j===null)return new Date(NaN);if(E.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var A=j.match(b);if(A){var q=A[2]-1||0,W=(A[7]||"0").substring(0,3);return B?new Date(Date.UTC(A[1],q,A[3]||1,A[4]||0,A[5]||0,A[6]||0,W)):new Date(A[1],q,A[3]||1,A[4]||0,A[5]||0,A[6]||0,W)}}return new Date(j)}(L),this.init()},S.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},S.$utils=function(){return E},S.isValid=function(){return this.$d.toString()!==g},S.isSame=function(L,N){var j=w(L);return this.startOf(N)<=j&&j<=this.endOf(N)},S.isAfter=function(L,N){return w(L)<this.startOf(N)},S.isBefore=function(L,N){return this.endOf(N)<w(L)},S.$g=function(L,N,j){return E.u(L)?this[N]:this.set(j,L)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(L,N){var j=this,B=!!E.u(N)||N,A=E.p(L),q=function(Z,pt){var gt=E.w(j.$u?Date.UTC(j.$y,pt,Z):new Date(j.$y,pt,Z),j);return B?gt:gt.endOf(c)},W=function(Z,pt){return E.w(j.toDate()[Z].apply(j.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(pt)),j)},U=this.$W,$=this.$M,F=this.$D,V="set"+(this.$u?"UTC":"");switch(A){case f:return B?q(1,0):q(31,11);case u:return B?q(1,$):q(0,$+1);case h:var K=this.$locale().weekStart||0,Q=(U<K?U+7:U)-K;return q(B?F-Q:F+(6-Q),$);case c:case p:return W(V+"Hours",0);case l:return W(V+"Minutes",1);case a:return W(V+"Seconds",2);case o:return W(V+"Milliseconds",3);default:return this.clone()}},S.endOf=function(L){return this.startOf(L,!1)},S.$set=function(L,N){var j,B=E.p(L),A="set"+(this.$u?"UTC":""),q=(j={},j[c]=A+"Date",j[p]=A+"Date",j[u]=A+"Month",j[f]=A+"FullYear",j[l]=A+"Hours",j[a]=A+"Minutes",j[o]=A+"Seconds",j[s]=A+"Milliseconds",j)[B],W=B===c?this.$D+(N-this.$W):N;if(B===u||B===f){var U=this.clone().set(p,1);U.$d[q](W),U.init(),this.$d=U.set(p,Math.min(this.$D,U.daysInMonth())).$d}else q&&this.$d[q](W);return this.init(),this},S.set=function(L,N){return this.clone().$set(L,N)},S.get=function(L){return this[E.p(L)]()},S.add=function(L,N){var j,B=this;L=Number(L);var A=E.p(N),q=function($){var F=w(B);return E.w(F.date(F.date()+Math.round($*L)),B)};if(A===u)return this.set(u,this.$M+L);if(A===f)return this.set(f,this.$y+L);if(A===c)return q(1);if(A===h)return q(7);var W=(j={},j[a]=i,j[l]=n,j[o]=r,j)[A]||1,U=this.$d.getTime()+L*W;return E.w(U,this)},S.subtract=function(L,N){return this.add(-1*L,N)},S.format=function(L){var N=this,j=this.$locale();if(!this.isValid())return j.invalidDate||g;var B=L||"YYYY-MM-DDTHH:mm:ssZ",A=E.z(this),q=this.$H,W=this.$m,U=this.$M,$=j.weekdays,F=j.months,V=j.meridiem,K=function(pt,gt,Et,At){return pt&&(pt[gt]||pt(N,B))||Et[gt].slice(0,At)},Q=function(pt){return E.s(q%12||12,pt,"0")},Z=V||function(pt,gt,Et){var At=pt<12?"AM":"PM";return Et?At.toLowerCase():At};return B.replace(x,function(pt,gt){return gt||function(Et){switch(Et){case"YY":return String(N.$y).slice(-2);case"YYYY":return E.s(N.$y,4,"0");case"M":return U+1;case"MM":return E.s(U+1,2,"0");case"MMM":return K(j.monthsShort,U,F,3);case"MMMM":return K(F,U);case"D":return N.$D;case"DD":return E.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return K(j.weekdaysMin,N.$W,$,2);case"ddd":return K(j.weekdaysShort,N.$W,$,3);case"dddd":return $[N.$W];case"H":return String(q);case"HH":return E.s(q,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return Z(q,W,!0);case"A":return Z(q,W,!1);case"m":return String(W);case"mm":return E.s(W,2,"0");case"s":return String(N.$s);case"ss":return E.s(N.$s,2,"0");case"SSS":return E.s(N.$ms,3,"0");case"Z":return A}return null}(pt)||A.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(L,N,j){var B,A=this,q=E.p(N),W=w(L),U=(W.utcOffset()-this.utcOffset())*i,$=this-W,F=function(){return E.m(A,W)};switch(q){case f:B=F()/12;break;case u:B=F();break;case d:B=F()/3;break;case h:B=($-U)/6048e5;break;case c:B=($-U)/864e5;break;case l:B=$/n;break;case a:B=$/i;break;case o:B=$/r;break;default:B=$}return j?B:E.a(B)},S.daysInMonth=function(){return this.endOf(u).$D},S.$locale=function(){return R[this.$L]},S.locale=function(L,N){if(!L)return this.$L;var j=this.clone(),B=P(L,N,!0);return B&&(j.$L=B),j},S.clone=function(){return E.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},k}(),I=z.prototype;return w.prototype=I,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",p]].forEach(function(k){I[k[1]]=function(S){return this.$g(S,k[0],k[1])}}),w.extend=function(k,S){return k.$i||(k(S,z,w),k.$i=!0),w},w.locale=P,w.isDayjs=O,w.unix=function(k){return w(1e3*k)},w.en=R[v],w.Ls=R,w.p={},w})}(Is)),Is.exports}var Bw=Lw();const Rw=c_(Bw),Os={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},i)=>{if(!e)return r*2.55;t/=360,e/=100,r/=100;const n=r<.5?r*(1+e):r+e-r*e,s=2*r-n;switch(i){case"r":return Os.hue2rgb(s,n,t+1/3)*255;case"g":return Os.hue2rgb(s,n,t)*255;case"b":return Os.hue2rgb(s,n,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:r},i)=>{t/=255,e/=255,r/=255;const n=Math.max(t,e,r),s=Math.min(t,e,r),o=(n+s)/2;if(i==="l")return o*100;if(n===s)return 0;const a=n-s,l=o>.5?a/(2-n-s):a/(n+s);if(i==="s")return l*100;switch(n){case t:return((e-r)/a+(e<r?6:0))*60;case e:return((r-t)/a+2)*60;case r:return((t-e)/a+4)*60;default:return-1}}},Mw={clamp:(t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},$w={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},mt={channel:Os,lang:Mw,unit:$w},kr={};for(let t=0;t<=255;t++)kr[t]=mt.unit.dec2hex(t);const te={ALL:0,RGB:1,HSL:2};class Iw{constructor(){this.type=te.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=te.ALL}is(e){return this.type===e}}class Ow{constructor(e,r){this.color=r,this.changed=!1,this.data=e,this.type=new Iw}set(e,r){return this.color=r,this.changed=!1,this.data=e,this.type.type=te.ALL,this}_ensureHSL(){const e=this.data,{h:r,s:i,l:n}=e;r===void 0&&(e.h=mt.channel.rgb2hsl(e,"h")),i===void 0&&(e.s=mt.channel.rgb2hsl(e,"s")),n===void 0&&(e.l=mt.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r,g:i,b:n}=e;r===void 0&&(e.r=mt.channel.hsl2rgb(e,"r")),i===void 0&&(e.g=mt.channel.hsl2rgb(e,"g")),n===void 0&&(e.b=mt.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,r=e.r;return!this.type.is(te.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,r=e.g;return!this.type.is(te.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,r=e.b;return!this.type.is(te.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,r=e.h;return!this.type.is(te.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,r=e.s;return!this.type.is(te.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,r=e.l;return!this.type.is(te.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(te.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(te.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(te.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(te.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(te.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(te.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const qa=new Ow({r:0,g:0,b:0,a:0},"transparent"),ki={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(ki.re);if(!e)return;const r=e[1],i=parseInt(r,16),n=r.length,s=n%4===0,o=n>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return qa.set({r:(i>>l*(c+3)&h)*a,g:(i>>l*(c+2)&h)*a,b:(i>>l*(c+1)&h)*a,a:s?(i&h)*a/255:1},t)},stringify:t=>{const{r:e,g:r,b:i,a:n}=t;return n<1?`#${kr[Math.round(e)]}${kr[Math.round(r)]}${kr[Math.round(i)]}${kr[Math.round(n*255)]}`:`#${kr[Math.round(e)]}${kr[Math.round(r)]}${kr[Math.round(i)]}`}},Xr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Xr.hueRe);if(e){const[,r,i]=e;switch(i){case"grad":return mt.channel.clamp.h(parseFloat(r)*.9);case"rad":return mt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return mt.channel.clamp.h(parseFloat(r)*360)}}return mt.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const r=t.match(Xr.re);if(!r)return;const[,i,n,s,o,a]=r;return qa.set({h:Xr._hue2deg(i),s:mt.channel.clamp.s(parseFloat(n)),l:mt.channel.clamp.l(parseFloat(s)),a:o?mt.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:r,l:i,a:n}=t;return n<1?`hsla(${mt.lang.round(e)}, ${mt.lang.round(r)}%, ${mt.lang.round(i)}%, ${n})`:`hsl(${mt.lang.round(e)}, ${mt.lang.round(r)}%, ${mt.lang.round(i)}%)`}},Fn={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Fn.colors[t];if(e)return ki.parse(e)},stringify:t=>{const e=ki.stringify(t);for(const r in Fn.colors)if(Fn.colors[r]===e)return r}},Ln={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const r=t.match(Ln.re);if(!r)return;const[,i,n,s,o,a,l,c,h]=r;return qa.set({r:mt.channel.clamp.r(n?parseFloat(i)*2.55:parseFloat(i)),g:mt.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:mt.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?mt.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:r,b:i,a:n}=t;return n<1?`rgba(${mt.lang.round(e)}, ${mt.lang.round(r)}, ${mt.lang.round(i)}, ${mt.lang.round(n)})`:`rgb(${mt.lang.round(e)}, ${mt.lang.round(r)}, ${mt.lang.round(i)})`}},Ke={format:{keyword:Fn,hex:ki,rgb:Ln,rgba:Ln,hsl:Xr,hsla:Xr},parse:t=>{if(typeof t!="string")return t;const e=ki.parse(t)||Ln.parse(t)||Xr.parse(t)||Fn.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(te.HSL)||t.data.r===void 0?Xr.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Ln.stringify(t):ki.stringify(t)},Dg=(t,e)=>{const r=Ke.parse(t);for(const i in e)r[i]=mt.channel.clamp[i](e[i]);return Ke.stringify(r)},Nn=(t,e,r=0,i=1)=>{if(typeof t!="number")return Dg(t,{a:e});const n=qa.set({r:mt.channel.clamp.r(t),g:mt.channel.clamp.g(e),b:mt.channel.clamp.b(r),a:mt.channel.clamp.a(i)});return Ke.stringify(n)},Pw=t=>{const{r:e,g:r,b:i}=Ke.parse(t),n=.2126*mt.channel.toLinear(e)+.7152*mt.channel.toLinear(r)+.0722*mt.channel.toLinear(i);return mt.lang.round(n)},Fw=t=>Pw(t)>=.5,ss=t=>!Fw(t),qg=(t,e,r)=>{const i=Ke.parse(t),n=i[e],s=mt.channel.clamp[e](n+r);return n!==s&&(i[e]=s),Ke.stringify(i)},tt=(t,e)=>qg(t,"l",e),ht=(t,e)=>qg(t,"l",-e),H=(t,e)=>{const r=Ke.parse(t),i={};for(const n in e)e[n]&&(i[n]=r[n]+e[n]);return Dg(t,i)},Nw=(t,e,r=50)=>{const{r:i,g:n,b:s,a:o}=Ke.parse(t),{r:a,g:l,b:c,a:h}=Ke.parse(e),u=r/100,d=u*2-1,f=o-h,g=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,b=1-g,x=i*g+a*b,_=n*g+l*b,T=s*g+c*b,C=o*u+h*(1-u);return Nn(x,_,T,C)},J=(t,e=100)=>{const r=Ke.parse(t);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Nw(r,t,e)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Hg,setPrototypeOf:jf,isFrozen:jw,getPrototypeOf:Dw,getOwnPropertyDescriptor:qw}=Object;let{freeze:he,seal:Ee,create:zg}=Object,{apply:sc,construct:ac}=typeof Reflect<"u"&&Reflect;he||(he=function(e){return e});Ee||(Ee=function(e){return e});sc||(sc=function(e,r,i){return e.apply(r,i)});ac||(ac=function(e,r){return new e(...r)});const ws=ue(Array.prototype.forEach),Hw=ue(Array.prototype.lastIndexOf),Df=ue(Array.prototype.pop),mn=ue(Array.prototype.push),zw=ue(Array.prototype.splice),Ps=ue(String.prototype.toLowerCase),jl=ue(String.prototype.toString),qf=ue(String.prototype.match),yn=ue(String.prototype.replace),Ww=ue(String.prototype.indexOf),Uw=ue(String.prototype.trim),Fe=ue(Object.prototype.hasOwnProperty),se=ue(RegExp.prototype.test),bn=Vw(TypeError);function ue(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return sc(t,e,i)}}function Vw(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return ac(t,r)}}function xt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ps;jf&&jf(t,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const s=r(n);s!==n&&(jw(e)||(e[i]=s),n=s)}t[n]=!0}return t}function Gw(t){for(let e=0;e<t.length;e++)Fe(t,e)||(t[e]=null);return t}function dr(t){const e=zg(null);for(const[r,i]of Hg(t))Fe(t,r)&&(Array.isArray(i)?e[r]=Gw(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=dr(i):e[r]=i);return e}function xn(t,e){for(;t!==null;){const i=qw(t,e);if(i){if(i.get)return ue(i.get);if(typeof i.value=="function")return ue(i.value)}t=Dw(t)}function r(){return null}return r}const Hf=he(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Dl=he(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ql=he(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Yw=he(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hl=he(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Xw=he(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zf=he(["#text"]),Wf=he(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),zl=he(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Uf=he(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vs=he(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Jw=Ee(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Kw=Ee(/<%[\w\W]*|[\w\W]*%>/gm),Zw=Ee(/\$\{[\w\W]*/gm),Qw=Ee(/^data-[\-\w.\u00B7-\uFFFF]+$/),t2=Ee(/^aria-[\-\w]+$/),Wg=Ee(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),e2=Ee(/^(?:\w+script|data):/i),r2=Ee(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ug=Ee(/^html$/i),i2=Ee(/^[a-z][.\w]*(-[.\w]+)+$/i);var Vf=Object.freeze({__proto__:null,ARIA_ATTR:t2,ATTR_WHITESPACE:r2,CUSTOM_ELEMENT:i2,DATA_ATTR:Qw,DOCTYPE_NAME:Ug,ERB_EXPR:Kw,IS_ALLOWED_URI:Wg,IS_SCRIPT_OR_DATA:e2,MUSTACHE_EXPR:Jw,TMPLIT_EXPR:Zw});const _n={element:1,text:3,progressingInstruction:7,comment:8,document:9},n2=function(){return typeof window>"u"?null:window},s2=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";r&&r.hasAttribute(n)&&(i=r.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Gf=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Vg(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n2();const e=lt=>Vg(lt);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==_n.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,n=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:f}=t,p=l.prototype,g=xn(p,"cloneNode"),b=xn(p,"remove"),x=xn(p,"nextSibling"),_=xn(p,"childNodes"),T=xn(p,"parentNode");if(typeof o=="function"){const lt=r.createElement("template");lt.content&&lt.content.ownerDocument&&(r=lt.content.ownerDocument)}let C,v="";const{implementation:R,createNodeIterator:M,createDocumentFragment:O,getElementsByTagName:P}=r,{importNode:w}=i;let E=Gf();e.isSupported=typeof Hg=="function"&&typeof T=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:I,TMPLIT_EXPR:k,DATA_ATTR:S,ARIA_ATTR:L,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:j,CUSTOM_ELEMENT:B}=Vf;let{IS_ALLOWED_URI:A}=Vf,q=null;const W=xt({},[...Hf,...Dl,...ql,...Hl,...zf]);let U=null;const $=xt({},[...Wf,...zl,...Uf,...vs]);let F=Object.seal(zg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,K=null,Q=!0,Z=!0,pt=!1,gt=!0,Et=!1,At=!0,ne=!1,Mt=!1,Bt=!1,Ft=!1,zt=!1,Se=!1,Cr=!0,Sr=!1;const gs="user-content-";let pi=!0,en=!1,gi={},mi=null;const mu=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yu=null;const bu=xt({},["audio","video","img","source","image","track"]);let go=null;const xu=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ms="http://www.w3.org/1998/Math/MathML",ys="http://www.w3.org/2000/svg",ir="http://www.w3.org/1999/xhtml";let yi=ir,mo=!1,yo=null;const r_=xt({},[ms,ys,ir],jl);let bs=xt({},["mi","mo","mn","ms","mtext"]),xs=xt({},["annotation-xml"]);const i_=xt({},["title","style","font","a","script"]);let rn=null;const n_=["application/xhtml+xml","text/html"],s_="text/html";let Wt=null,bi=null;const a_=r.createElement("form"),_u=function(D){return D instanceof RegExp||D instanceof Function},bo=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(bi&&bi===D)){if((!D||typeof D!="object")&&(D={}),D=dr(D),rn=n_.indexOf(D.PARSER_MEDIA_TYPE)===-1?s_:D.PARSER_MEDIA_TYPE,Wt=rn==="application/xhtml+xml"?jl:Ps,q=Fe(D,"ALLOWED_TAGS")?xt({},D.ALLOWED_TAGS,Wt):W,U=Fe(D,"ALLOWED_ATTR")?xt({},D.ALLOWED_ATTR,Wt):$,yo=Fe(D,"ALLOWED_NAMESPACES")?xt({},D.ALLOWED_NAMESPACES,jl):r_,go=Fe(D,"ADD_URI_SAFE_ATTR")?xt(dr(xu),D.ADD_URI_SAFE_ATTR,Wt):xu,yu=Fe(D,"ADD_DATA_URI_TAGS")?xt(dr(bu),D.ADD_DATA_URI_TAGS,Wt):bu,mi=Fe(D,"FORBID_CONTENTS")?xt({},D.FORBID_CONTENTS,Wt):mu,V=Fe(D,"FORBID_TAGS")?xt({},D.FORBID_TAGS,Wt):dr({}),K=Fe(D,"FORBID_ATTR")?xt({},D.FORBID_ATTR,Wt):dr({}),gi=Fe(D,"USE_PROFILES")?D.USE_PROFILES:!1,Q=D.ALLOW_ARIA_ATTR!==!1,Z=D.ALLOW_DATA_ATTR!==!1,pt=D.ALLOW_UNKNOWN_PROTOCOLS||!1,gt=D.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Et=D.SAFE_FOR_TEMPLATES||!1,At=D.SAFE_FOR_XML!==!1,ne=D.WHOLE_DOCUMENT||!1,Ft=D.RETURN_DOM||!1,zt=D.RETURN_DOM_FRAGMENT||!1,Se=D.RETURN_TRUSTED_TYPE||!1,Bt=D.FORCE_BODY||!1,Cr=D.SANITIZE_DOM!==!1,Sr=D.SANITIZE_NAMED_PROPS||!1,pi=D.KEEP_CONTENT!==!1,en=D.IN_PLACE||!1,A=D.ALLOWED_URI_REGEXP||Wg,yi=D.NAMESPACE||ir,bs=D.MATHML_TEXT_INTEGRATION_POINTS||bs,xs=D.HTML_INTEGRATION_POINTS||xs,F=D.CUSTOM_ELEMENT_HANDLING||{},D.CUSTOM_ELEMENT_HANDLING&&_u(D.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(F.tagNameCheck=D.CUSTOM_ELEMENT_HANDLING.tagNameCheck),D.CUSTOM_ELEMENT_HANDLING&&_u(D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(F.attributeNameCheck=D.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),D.CUSTOM_ELEMENT_HANDLING&&typeof D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(F.allowCustomizedBuiltInElements=D.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Et&&(Z=!1),zt&&(Ft=!0),gi&&(q=xt({},zf),U=[],gi.html===!0&&(xt(q,Hf),xt(U,Wf)),gi.svg===!0&&(xt(q,Dl),xt(U,zl),xt(U,vs)),gi.svgFilters===!0&&(xt(q,ql),xt(U,zl),xt(U,vs)),gi.mathMl===!0&&(xt(q,Hl),xt(U,Uf),xt(U,vs))),D.ADD_TAGS&&(q===W&&(q=dr(q)),xt(q,D.ADD_TAGS,Wt)),D.ADD_ATTR&&(U===$&&(U=dr(U)),xt(U,D.ADD_ATTR,Wt)),D.ADD_URI_SAFE_ATTR&&xt(go,D.ADD_URI_SAFE_ATTR,Wt),D.FORBID_CONTENTS&&(mi===mu&&(mi=dr(mi)),xt(mi,D.FORBID_CONTENTS,Wt)),pi&&(q["#text"]=!0),ne&&xt(q,["html","head","body"]),q.table&&(xt(q,["tbody"]),delete V.tbody),D.TRUSTED_TYPES_POLICY){if(typeof D.TRUSTED_TYPES_POLICY.createHTML!="function")throw bn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof D.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw bn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=D.TRUSTED_TYPES_POLICY,v=C.createHTML("")}else C===void 0&&(C=s2(f,n)),C!==null&&typeof v=="string"&&(v=C.createHTML(""));he&&he(D),bi=D}},wu=xt({},[...Dl,...ql,...Yw]),vu=xt({},[...Hl,...Xw]),o_=function(D){let X=T(D);(!X||!X.tagName)&&(X={namespaceURI:yi,tagName:"template"});const nt=Ps(D.tagName),$t=Ps(X.tagName);return yo[D.namespaceURI]?D.namespaceURI===ys?X.namespaceURI===ir?nt==="svg":X.namespaceURI===ms?nt==="svg"&&($t==="annotation-xml"||bs[$t]):!!wu[nt]:D.namespaceURI===ms?X.namespaceURI===ir?nt==="math":X.namespaceURI===ys?nt==="math"&&xs[$t]:!!vu[nt]:D.namespaceURI===ir?X.namespaceURI===ys&&!xs[$t]||X.namespaceURI===ms&&!bs[$t]?!1:!vu[nt]&&(i_[nt]||!wu[nt]):!!(rn==="application/xhtml+xml"&&yo[D.namespaceURI]):!1},Ue=function(D){mn(e.removed,{element:D});try{T(D).removeChild(D)}catch{b(D)}},xi=function(D,X){try{mn(e.removed,{attribute:X.getAttributeNode(D),from:X})}catch{mn(e.removed,{attribute:null,from:X})}if(X.removeAttribute(D),D==="is")if(Ft||zt)try{Ue(X)}catch{}else try{X.setAttribute(D,"")}catch{}},Cu=function(D){let X=null,nt=null;if(Bt)D="<remove></remove>"+D;else{const Nt=qf(D,/^[\r\n\t ]+/);nt=Nt&&Nt[0]}rn==="application/xhtml+xml"&&yi===ir&&(D='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+D+"</body></html>");const $t=C?C.createHTML(D):D;if(yi===ir)try{X=new d().parseFromString($t,rn)}catch{}if(!X||!X.documentElement){X=R.createDocument(yi,"template",null);try{X.documentElement.innerHTML=mo?v:$t}catch{}}const Zt=X.body||X.documentElement;return D&&nt&&Zt.insertBefore(r.createTextNode(nt),Zt.childNodes[0]||null),yi===ir?P.call(X,ne?"html":"body")[0]:ne?X.documentElement:Zt},Su=function(D){return M.call(D.ownerDocument||D,D,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},xo=function(D){return D instanceof u&&(typeof D.nodeName!="string"||typeof D.textContent!="string"||typeof D.removeChild!="function"||!(D.attributes instanceof h)||typeof D.removeAttribute!="function"||typeof D.setAttribute!="function"||typeof D.namespaceURI!="string"||typeof D.insertBefore!="function"||typeof D.hasChildNodes!="function")},ku=function(D){return typeof a=="function"&&D instanceof a};function nr(lt,D,X){ws(lt,nt=>{nt.call(e,D,X,bi)})}const Tu=function(D){let X=null;if(nr(E.beforeSanitizeElements,D,null),xo(D))return Ue(D),!0;const nt=Wt(D.nodeName);if(nr(E.uponSanitizeElement,D,{tagName:nt,allowedTags:q}),At&&D.hasChildNodes()&&!ku(D.firstElementChild)&&se(/<[/\w!]/g,D.innerHTML)&&se(/<[/\w!]/g,D.textContent)||D.nodeType===_n.progressingInstruction||At&&D.nodeType===_n.comment&&se(/<[/\w]/g,D.data))return Ue(D),!0;if(!q[nt]||V[nt]){if(!V[nt]&&Au(nt)&&(F.tagNameCheck instanceof RegExp&&se(F.tagNameCheck,nt)||F.tagNameCheck instanceof Function&&F.tagNameCheck(nt)))return!1;if(pi&&!mi[nt]){const $t=T(D)||D.parentNode,Zt=_(D)||D.childNodes;if(Zt&&$t){const Nt=Zt.length;for(let fe=Nt-1;fe>=0;--fe){const sr=g(Zt[fe],!0);sr.__removalCount=(D.__removalCount||0)+1,$t.insertBefore(sr,x(D))}}}return Ue(D),!0}return D instanceof l&&!o_(D)||(nt==="noscript"||nt==="noembed"||nt==="noframes")&&se(/<\/no(script|embed|frames)/i,D.innerHTML)?(Ue(D),!0):(Et&&D.nodeType===_n.text&&(X=D.textContent,ws([z,I,k],$t=>{X=yn(X,$t," ")}),D.textContent!==X&&(mn(e.removed,{element:D.cloneNode()}),D.textContent=X)),nr(E.afterSanitizeElements,D,null),!1)},Eu=function(D,X,nt){if(Cr&&(X==="id"||X==="name")&&(nt in r||nt in a_))return!1;if(!(Z&&!K[X]&&se(S,X))){if(!(Q&&se(L,X))){if(!U[X]||K[X]){if(!(Au(D)&&(F.tagNameCheck instanceof RegExp&&se(F.tagNameCheck,D)||F.tagNameCheck instanceof Function&&F.tagNameCheck(D))&&(F.attributeNameCheck instanceof RegExp&&se(F.attributeNameCheck,X)||F.attributeNameCheck instanceof Function&&F.attributeNameCheck(X))||X==="is"&&F.allowCustomizedBuiltInElements&&(F.tagNameCheck instanceof RegExp&&se(F.tagNameCheck,nt)||F.tagNameCheck instanceof Function&&F.tagNameCheck(nt))))return!1}else if(!go[X]){if(!se(A,yn(nt,j,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&D!=="script"&&Ww(nt,"data:")===0&&yu[D])){if(!(pt&&!se(N,yn(nt,j,"")))){if(nt)return!1}}}}}}return!0},Au=function(D){return D!=="annotation-xml"&&qf(D,B)},Lu=function(D){nr(E.beforeSanitizeAttributes,D,null);const{attributes:X}=D;if(!X||xo(D))return;const nt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let $t=X.length;for(;$t--;){const Zt=X[$t],{name:Nt,namespaceURI:fe,value:sr}=Zt,nn=Wt(Nt),_o=sr;let Qt=Nt==="value"?_o:Uw(_o);if(nt.attrName=nn,nt.attrValue=Qt,nt.keepAttr=!0,nt.forceKeepAttr=void 0,nr(E.uponSanitizeAttribute,D,nt),Qt=nt.attrValue,Sr&&(nn==="id"||nn==="name")&&(xi(Nt,D),Qt=gs+Qt),At&&se(/((--!?|])>)|<\/(style|title)/i,Qt)){xi(Nt,D);continue}if(nt.forceKeepAttr)continue;if(!nt.keepAttr){xi(Nt,D);continue}if(!gt&&se(/\/>/i,Qt)){xi(Nt,D);continue}Et&&ws([z,I,k],Ru=>{Qt=yn(Qt,Ru," ")});const Bu=Wt(D.nodeName);if(!Eu(Bu,nn,Qt)){xi(Nt,D);continue}if(C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!fe)switch(f.getAttributeType(Bu,nn)){case"TrustedHTML":{Qt=C.createHTML(Qt);break}case"TrustedScriptURL":{Qt=C.createScriptURL(Qt);break}}if(Qt!==_o)try{fe?D.setAttributeNS(fe,Nt,Qt):D.setAttribute(Nt,Qt),xo(D)?Ue(D):Df(e.removed)}catch{xi(Nt,D)}}nr(E.afterSanitizeAttributes,D,null)},l_=function lt(D){let X=null;const nt=Su(D);for(nr(E.beforeSanitizeShadowDOM,D,null);X=nt.nextNode();)nr(E.uponSanitizeShadowNode,X,null),Tu(X),Lu(X),X.content instanceof s&&lt(X.content);nr(E.afterSanitizeShadowDOM,D,null)};return e.sanitize=function(lt){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,nt=null,$t=null,Zt=null;if(mo=!lt,mo&&(lt="<!-->"),typeof lt!="string"&&!ku(lt))if(typeof lt.toString=="function"){if(lt=lt.toString(),typeof lt!="string")throw bn("dirty is not a string, aborting")}else throw bn("toString is not a function");if(!e.isSupported)return lt;if(Mt||bo(D),e.removed=[],typeof lt=="string"&&(en=!1),en){if(lt.nodeName){const sr=Wt(lt.nodeName);if(!q[sr]||V[sr])throw bn("root node is forbidden and cannot be sanitized in-place")}}else if(lt instanceof a)X=Cu("<!---->"),nt=X.ownerDocument.importNode(lt,!0),nt.nodeType===_n.element&&nt.nodeName==="BODY"||nt.nodeName==="HTML"?X=nt:X.appendChild(nt);else{if(!Ft&&!Et&&!ne&&lt.indexOf("<")===-1)return C&&Se?C.createHTML(lt):lt;if(X=Cu(lt),!X)return Ft?null:Se?v:""}X&&Bt&&Ue(X.firstChild);const Nt=Su(en?lt:X);for(;$t=Nt.nextNode();)Tu($t),Lu($t),$t.content instanceof s&&l_($t.content);if(en)return lt;if(Ft){if(zt)for(Zt=O.call(X.ownerDocument);X.firstChild;)Zt.appendChild(X.firstChild);else Zt=X;return(U.shadowroot||U.shadowrootmode)&&(Zt=w.call(i,Zt,!0)),Zt}let fe=ne?X.outerHTML:X.innerHTML;return ne&&q["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&se(Ug,X.ownerDocument.doctype.name)&&(fe="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+fe),Et&&ws([z,I,k],sr=>{fe=yn(fe,sr," ")}),C&&Se?C.createHTML(fe):fe},e.setConfig=function(){let lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bo(lt),Mt=!0},e.clearConfig=function(){bi=null,Mt=!1},e.isValidAttribute=function(lt,D,X){bi||bo({});const nt=Wt(lt),$t=Wt(D);return Eu(nt,$t,X)},e.addHook=function(lt,D){typeof D=="function"&&mn(E[lt],D)},e.removeHook=function(lt,D){if(D!==void 0){const X=Hw(E[lt],D);return X===-1?void 0:zw(E[lt],X,1)[0]}return Df(E[lt])},e.removeHooks=function(lt){E[lt]=[]},e.removeAllHooks=function(){E=Gf()},e}var Fi=Vg(),Gg=Object.defineProperty,m=(t,e)=>Gg(t,"name",{value:e,configurable:!0}),a2=(t,e)=>{for(var r in e)Gg(t,r,{get:e[r],enumerable:!0})},hr={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},G={trace:m((...t)=>{},"trace"),debug:m((...t)=>{},"debug"),info:m((...t)=>{},"info"),warn:m((...t)=>{},"warn"),error:m((...t)=>{},"error"),fatal:m((...t)=>{},"fatal")},gh=m(function(t="fatal"){let e=hr.fatal;typeof t=="string"?t.toLowerCase()in hr&&(e=hr[t]):typeof t=="number"&&(e=t),G.trace=()=>{},G.debug=()=>{},G.info=()=>{},G.warn=()=>{},G.error=()=>{},G.fatal=()=>{},e<=hr.fatal&&(G.fatal=console.error?console.error.bind(console,ke("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",ke("FATAL"))),e<=hr.error&&(G.error=console.error?console.error.bind(console,ke("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",ke("ERROR"))),e<=hr.warn&&(G.warn=console.warn?console.warn.bind(console,ke("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",ke("WARN"))),e<=hr.info&&(G.info=console.info?console.info.bind(console,ke("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",ke("INFO"))),e<=hr.debug&&(G.debug=console.debug?console.debug.bind(console,ke("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ke("DEBUG"))),e<=hr.trace&&(G.trace=console.debug?console.debug.bind(console,ke("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ke("TRACE")))},"setLogLevel"),ke=m(t=>`%c${Rw().format("ss.SSS")} : ${t} : `,"format"),Yg=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,jn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,o2=/\s*%%.*\n/gm,Ai,Xg=(Ai=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},m(Ai,"UnknownDiagramError"),Ai),ii={},mh=m(function(t,e){t=t.replace(Yg,"").replace(jn,"").replace(o2,`
`);for(const[r,{detector:i}]of Object.entries(ii))if(i(t,e))return r;throw new Xg(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),oc=m((...t)=>{for(const{id:e,detector:r,loader:i}of t)Jg(e,r,i)},"registerLazyLoadedDiagrams"),Jg=m((t,e,r)=>{ii[t]&&G.warn(`Detector with key ${t} already exists. Overwriting.`),ii[t]={detector:e,loader:r},G.debug(`Detector with key ${t} added${r?" with loader":""}`)},"addDetector"),l2=m(t=>ii[t].loader,"getDiagramLoader"),lc=m((t,e,{depth:r=2,clobber:i=!1}={})=>{const n={depth:r,clobber:i};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>lc(t,s,n)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=lc(t[s],e[s],{depth:r-1,clobber:i})):(i||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),Kt=lc,Ha="#ffffff",za="#f2f2f2",oe=m((t,e)=>e?H(t,{s:-40,l:10}):H(t,{s:-40,l:-10}),"mkBorder"),Li,c2=(Li=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||H(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||H(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||oe(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||oe(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||J(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||J(this.tertiaryColor),this.lineColor=this.lineColor||J(this.background),this.arrowheadColor=this.arrowheadColor||J(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ht(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||J(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||tt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ht(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ht(this.mainBkg,10)):(this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||H(this.primaryColor,{h:30}),this.cScale4=this.cScale4||H(this.primaryColor,{h:60}),this.cScale5=this.cScale5||H(this.primaryColor,{h:90}),this.cScale6=this.cScale6||H(this.primaryColor,{h:120}),this.cScale7=this.cScale7||H(this.primaryColor,{h:150}),this.cScale8=this.cScale8||H(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||H(this.primaryColor,{h:270}),this.cScale10=this.cScale10||H(this.primaryColor,{h:300}),this.cScale11=this.cScale11||H(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=ht(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=ht(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||J(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||tt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||ht(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||H(this.mainBkg,{h:180,s:-15,l:e*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||H(this.mainBkg,{h:180,s:-15,l:e*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||H(this.primaryColor,{h:64}),this.fillType3=this.fillType3||H(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||H(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||H(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||H(this.primaryColor,{h:128}),this.fillType7=this.fillType7||H(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||H(this.primaryColor,{l:-10}),this.pie5=this.pie5||H(this.secondaryColor,{l:-10}),this.pie6=this.pie6||H(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||H(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||H(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||H(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||H(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||H(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||H(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||H(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||H(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||H(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||H(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||H(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||H(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ss(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||H(this.primaryColor,{h:-30}),this.git4=this.git4||H(this.primaryColor,{h:-60}),this.git5=this.git5||H(this.primaryColor,{h:-90}),this.git6=this.git6||H(this.primaryColor,{h:60}),this.git7=this.git7||H(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ha,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||za}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Li,"Theme"),Li),h2=m(t=>{const e=new c2;return e.calculate(t),e},"getThemeVariables"),Bi,u2=(Bi=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=tt(this.primaryColor,16),this.tertiaryColor=H(this.primaryColor,{h:-160}),this.primaryBorderColor=J(this.background),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=tt(J("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Nn(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ht("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ht(this.sectionBkgColor,10),this.taskBorderColor=Nn(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Nn(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ht(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=tt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=tt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=tt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=H(this.primaryColor,{h:64}),this.fillType3=H(this.secondaryColor,{h:64}),this.fillType4=H(this.primaryColor,{h:-64}),this.fillType5=H(this.secondaryColor,{h:-64}),this.fillType6=H(this.primaryColor,{h:128}),this.fillType7=H(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||H(this.primaryColor,{h:30}),this.cScale4=this.cScale4||H(this.primaryColor,{h:60}),this.cScale5=this.cScale5||H(this.primaryColor,{h:90}),this.cScale6=this.cScale6||H(this.primaryColor,{h:120}),this.cScale7=this.cScale7||H(this.primaryColor,{h:150}),this.cScale8=this.cScale8||H(this.primaryColor,{h:210}),this.cScale9=this.cScale9||H(this.primaryColor,{h:270}),this.cScale10=this.cScale10||H(this.primaryColor,{h:300}),this.cScale11=this.cScale11||H(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||tt(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||H(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||H(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||H(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||H(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||H(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||H(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||H(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||H(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ss(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=tt(this.secondaryColor,20),this.git1=tt(this.pie2||this.secondaryColor,20),this.git2=tt(this.pie3||this.tertiaryColor,20),this.git3=tt(this.pie4||H(this.primaryColor,{h:-30}),20),this.git4=tt(this.pie5||H(this.primaryColor,{h:-60}),20),this.git5=tt(this.pie6||H(this.primaryColor,{h:-90}),10),this.git6=tt(this.pie7||H(this.primaryColor,{h:60}),10),this.git7=tt(this.pie8||H(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||tt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Bi,"Theme"),Bi),d2=m(t=>{const e=new u2;return e.calculate(t),e},"getThemeVariables"),Ri,f2=(Ri=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=H(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=H(this.primaryColor,{h:-160}),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=Nn(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||H(this.primaryColor,{h:30}),this.cScale4=this.cScale4||H(this.primaryColor,{h:60}),this.cScale5=this.cScale5||H(this.primaryColor,{h:90}),this.cScale6=this.cScale6||H(this.primaryColor,{h:120}),this.cScale7=this.cScale7||H(this.primaryColor,{h:150}),this.cScale8=this.cScale8||H(this.primaryColor,{h:210}),this.cScale9=this.cScale9||H(this.primaryColor,{h:270}),this.cScale10=this.cScale10||H(this.primaryColor,{h:300}),this.cScale11=this.cScale11||H(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||H(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||H(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||H(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||J(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||J(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=H(this.primaryColor,{h:64}),this.fillType3=H(this.secondaryColor,{h:64}),this.fillType4=H(this.primaryColor,{h:-64}),this.fillType5=H(this.secondaryColor,{h:-64}),this.fillType6=H(this.primaryColor,{h:128}),this.fillType7=H(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||H(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||H(this.primaryColor,{l:-10}),this.pie5=this.pie5||H(this.secondaryColor,{l:-30}),this.pie6=this.pie6||H(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||H(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||H(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||H(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||H(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||H(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||H(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||H(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||H(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||H(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||H(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||H(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||H(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ss(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||H(this.primaryColor,{h:-30}),this.git4=this.git4||H(this.primaryColor,{h:-60}),this.git5=this.git5||H(this.primaryColor,{h:-90}),this.git6=this.git6||H(this.primaryColor,{h:60}),this.git7=this.git7||H(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||ht(J(this.git0),25),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ha,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||za}calculate(e){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Ri,"Theme"),Ri),p2=m(t=>{const e=new f2;return e.calculate(t),e},"getThemeVariables"),Mi,g2=(Mi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=tt("#cde498",10),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.primaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=ht(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||H(this.primaryColor,{h:30}),this.cScale4=this.cScale4||H(this.primaryColor,{h:60}),this.cScale5=this.cScale5||H(this.primaryColor,{h:90}),this.cScale6=this.cScale6||H(this.primaryColor,{h:120}),this.cScale7=this.cScale7||H(this.primaryColor,{h:150}),this.cScale8=this.cScale8||H(this.primaryColor,{h:210}),this.cScale9=this.cScale9||H(this.primaryColor,{h:270}),this.cScale10=this.cScale10||H(this.primaryColor,{h:300}),this.cScale11=this.cScale11||H(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||H(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||H(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||H(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=H(this.primaryColor,{h:64}),this.fillType3=H(this.secondaryColor,{h:64}),this.fillType4=H(this.primaryColor,{h:-64}),this.fillType5=H(this.secondaryColor,{h:-64}),this.fillType6=H(this.primaryColor,{h:128}),this.fillType7=H(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||H(this.primaryColor,{l:-30}),this.pie5=this.pie5||H(this.secondaryColor,{l:-30}),this.pie6=this.pie6||H(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||H(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||H(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||H(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||H(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||H(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||H(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||H(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||H(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||H(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||H(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||H(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||H(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ss(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||H(this.primaryColor,{h:-30}),this.git4=this.git4||H(this.primaryColor,{h:-60}),this.git5=this.git5||H(this.primaryColor,{h:-90}),this.git6=this.git6||H(this.primaryColor,{h:60}),this.git7=this.git7||H(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ha,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||za}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Mi,"Theme"),Mi),m2=m(t=>{const e=new g2;return e.calculate(t),e},"getThemeVariables"),$i,y2=($i=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=tt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=H(this.primaryColor,{h:-160}),this.primaryBorderColor=oe(this.primaryColor,this.darkMode),this.secondaryBorderColor=oe(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=oe(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=tt(this.contrast,55),this.border2=this.contrast,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||tt(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||H(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||H(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=tt(this.contrast,30),this.sectionBkgColor2=tt(this.contrast,30),this.taskBorderColor=ht(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=tt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ht(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=H(this.primaryColor,{h:64}),this.fillType3=H(this.secondaryColor,{h:64}),this.fillType4=H(this.primaryColor,{h:-64}),this.fillType5=H(this.secondaryColor,{h:-64}),this.fillType6=H(this.primaryColor,{h:128}),this.fillType7=H(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||H(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||H(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||H(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||H(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||H(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||H(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ss(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ht(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||H(this.primaryColor,{h:-30}),this.git4=this.pie5||H(this.primaryColor,{h:-60}),this.git5=this.pie6||H(this.primaryColor,{h:-90}),this.git6=this.pie7||H(this.primaryColor,{h:60}),this.git7=this.pie8||H(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ha,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||za}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m($i,"Theme"),$i),b2=m(t=>{const e=new y2;return e.calculate(t),e},"getThemeVariables"),yr={base:{getThemeVariables:h2},dark:{getThemeVariables:d2},default:{getThemeVariables:p2},forest:{getThemeVariables:m2},neutral:{getThemeVariables:b2}},Ve={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},Kg={...Ve,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:yr.default.getThemeVariables(),sequence:{...Ve.sequence,messageFont:m(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:m(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:m(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ve.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ve.c4,useWidth:void 0,personFont:m(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ve.flowchart,inheritDir:!1},external_personFont:m(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:m(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:m(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:m(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:m(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:m(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:m(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:m(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:m(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:m(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:m(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:m(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:m(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:m(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:m(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:m(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:m(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:m(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:m(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:m(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:m(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ve.pie,useWidth:984},xyChart:{...Ve.xyChart,useWidth:void 0},requirement:{...Ve.requirement,useWidth:void 0},packet:{...Ve.packet},radar:{...Ve.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},Zg=m((t,e="")=>Object.keys(t).reduce((r,i)=>Array.isArray(t[i])?r:typeof t[i]=="object"&&t[i]!==null?[...r,e+i,...Zg(t[i],"")]:[...r,e+i],[]),"keyify"),x2=new Set(Zg(Kg,"")),Qg=Kg,Ks=m(t=>{if(G.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>Ks(e));return}for(const e of Object.keys(t)){if(G.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!x2.has(e)||t[e]==null){G.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){G.debug("sanitizing object",e),Ks(t[e]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)e.includes(i)&&(G.debug("sanitizing css option",e),t[e]=_2(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const r=t.themeVariables[e];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}G.debug("After sanitization",t)}},"sanitizeDirective"),_2=m(t=>{let e=0,r=0;for(const i of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?e++:i==="}"&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),Ni=Object.freeze(Qg),ge=Kt({},Ni),tm,ji=[],Dn=Kt({},Ni),Wa=m((t,e)=>{let r=Kt({},t),i={};for(const n of e)im(n),i=Kt(i,n);if(r=Kt(r,i),i.theme&&i.theme in yr){const n=Kt({},tm),s=Kt(n.themeVariables||{},i.themeVariables);r.theme&&r.theme in yr&&(r.themeVariables=yr[r.theme].getThemeVariables(s))}return Dn=r,nm(Dn),Dn},"updateCurrentConfig"),w2=m(t=>(ge=Kt({},Ni),ge=Kt(ge,t),t.theme&&yr[t.theme]&&(ge.themeVariables=yr[t.theme].getThemeVariables(t.themeVariables)),Wa(ge,ji),ge),"setSiteConfig"),v2=m(t=>{tm=Kt({},t)},"saveConfigFromInitialize"),C2=m(t=>(ge=Kt(ge,t),Wa(ge,ji),ge),"updateSiteConfig"),em=m(()=>Kt({},ge),"getSiteConfig"),rm=m(t=>(nm(t),Kt(Dn,t),ee()),"setConfig"),ee=m(()=>Kt({},Dn),"getConfig"),im=m(t=>{t&&(["secure",...ge.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(G.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&im(t[e])}))},"sanitize"),S2=m(t=>{Ks(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),ji.push(t),Wa(ge,ji)},"addDirective"),Zs=m((t=ge)=>{ji=[],Wa(t,ji)},"reset"),k2={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Yf={},T2=m(t=>{Yf[t]||(G.warn(k2[t]),Yf[t]=!0)},"issueWarning"),nm=m(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&T2("LAZY_LOAD_DEPRECATED")},"checkConfig"),as=/<br\s*\/?>/gi,E2=m(t=>t?om(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),A2=(()=>{let t=!1;return()=>{t||(sm(),t=!0)}})();function sm(){const t="data-temp-href-target";Fi.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),Fi.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}m(sm,"setupDompurifyHooks");var am=m(t=>(A2(),Fi.sanitize(t)),"removeScript"),Xf=m((t,e)=>{if(e.flowchart?.htmlLabels!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=am(t):r!=="loose"&&(t=om(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=M2(t))}return t},"sanitizeMore"),Ae=m((t,e)=>t&&(e.dompurifyConfig?t=Fi.sanitize(Xf(t,e),e.dompurifyConfig).toString():t=Fi.sanitize(Xf(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),L2=m((t,e)=>typeof t=="string"?Ae(t,e):t.flat().map(r=>Ae(r,e)),"sanitizeTextOrArray"),B2=m(t=>as.test(t),"hasBreaks"),R2=m(t=>t.split(as),"splitBreaks"),M2=m(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),om=m(t=>t.replace(as,"#br#"),"breakToPlaceholder"),lm=m(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),Ht=m(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),$2=m(function(...t){const e=t.filter(r=>!isNaN(r));return Math.max(...e)},"getMax"),I2=m(function(...t){const e=t.filter(r=>!isNaN(r));return Math.min(...e)},"getMin"),Jf=m(function(t){const e=t.split(/(,)/),r=[];for(let i=0;i<e.length;i++){let n=e[i];if(n===","&&i>0&&i+1<e.length){const s=e[i-1],o=e[i+1];O2(s,o)&&(n=s+","+o,i++,r.pop())}r.push(P2(n))}return r.join("")},"parseGenericTypes"),cc=m((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),O2=m((t,e)=>{const r=cc(t,"~"),i=cc(e,"~");return r===1&&i===1},"shouldCombineSets"),P2=m(t=>{const e=cc(t,"~");let r=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),r=!0);const i=[...t];let n=i.indexOf("~"),s=i.lastIndexOf("~");for(;n!==-1&&s!==-1&&n!==s;)i[n]="<",i[s]=">",n=i.indexOf("~"),s=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),Kf=m(()=>window.MathMLElement!==void 0,"isMathMLSupported"),hc=/\$\$(.*)\$\$/g,Di=m(t=>(t.match(hc)?.length??0)>0,"hasKatex"),$O=m(async(t,e)=>{const r=document.createElement("div");r.innerHTML=await yh(t,e),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n},"calculateMathMLDimensions"),F2=m(async(t,e)=>{if(!Di(t))return t;if(!(Kf()||e.legacyMathML||e.forceLegacyMathML))return t.replace(hc,"MathML is unsupported in this environment.");{const{default:r}=await Tt(async()=>{const{default:n}=await import("./chunk-jnzJBBj2.js").then(s=>s.k);return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),i=e.forceLegacyMathML||!Kf()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(as).map(n=>Di(n)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${n}</div>`:`<div>${n}</div>`).join("").replace(hc,(n,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),yh=m(async(t,e)=>Ae(await F2(t,e),e),"renderKatexSanitized"),Xi={getRows:E2,sanitizeText:Ae,sanitizeTextOrArray:L2,hasBreaks:B2,splitBreaks:R2,lineBreakRegex:as,removeScript:am,getUrl:lm,evaluate:Ht,getMax:$2,getMin:I2},N2=m(function(t,e){for(let r of e)t.attr(r[0],r[1])},"d3Attrs"),j2=m(function(t,e,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${e}px;`)):(i.set("height",t),i.set("width",e)),i},"calculateSvgSizeAttrs"),cm=m(function(t,e,r,i){const n=j2(e,r,i);N2(t,n)},"configureSvgSize"),D2=m(function(t,e,r,i){const n=e.node().getBBox(),s=n.width,o=n.height;G.info(`SVG bounds: ${s}x${o}`,n);let a=0,l=0;G.info(`Graph bounds: ${a}x${l}`,t),a=s+r*2,l=o+r*2,G.info(`Calculated bounds: ${a}x${l}`),cm(e,l,a,i);const c=`${n.x-r} ${n.y-r} ${n.width+2*r} ${n.height+2*r}`;e.attr("viewBox",c)},"setupGraphViewbox"),Fs={},q2=m((t,e,r)=>{let i="";return t in Fs&&Fs[t]?i=Fs[t](r):G.warn(`No theme found for ${t}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${e}
`},"getStyles"),H2=m((t,e)=>{e!==void 0&&(Fs[t]=e)},"addStylesForDiagram"),z2=q2,hm={};a2(hm,{clear:()=>W2,getAccDescription:()=>Y2,getAccTitle:()=>V2,getDiagramTitle:()=>J2,setAccDescription:()=>G2,setAccTitle:()=>U2,setDiagramTitle:()=>X2});var bh="",xh="",_h="",wh=m(t=>Ae(t,ee()),"sanitizeText"),W2=m(()=>{bh="",_h="",xh=""},"clear"),U2=m(t=>{bh=wh(t).replace(/^\s+/g,"")},"setAccTitle"),V2=m(()=>bh,"getAccTitle"),G2=m(t=>{_h=wh(t).replace(/\n\s+/g,`
`)},"setAccDescription"),Y2=m(()=>_h,"getAccDescription"),X2=m(t=>{xh=wh(t)},"setDiagramTitle"),J2=m(()=>xh,"getDiagramTitle"),Zf=G,K2=gh,Ct=ee,IO=rm,OO=Ni,vh=m(t=>Ae(t,Ct()),"sanitizeText"),Z2=D2,Q2=m(()=>hm,"getCommonDb"),Qs={},ta=m((t,e,r)=>{Qs[t]&&Zf.warn(`Diagram with id ${t} already registered. Overwriting.`),Qs[t]=e,r&&Jg(t,r),H2(t,e.styles),e.injectUtils?.(Zf,K2,Ct,vh,Z2,Q2(),()=>{})},"registerDiagram"),uc=m(t=>{if(t in Qs)return Qs[t];throw new tv(t)},"getDiagram"),Ii,tv=(Ii=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},m(Ii,"DiagramNotFoundError"),Ii);function Ch(t){return typeof t>"u"||t===null}m(Ch,"isNothing");function um(t){return typeof t=="object"&&t!==null}m(um,"isObject");function dm(t){return Array.isArray(t)?t:Ch(t)?[]:[t]}m(dm,"toArray");function fm(t,e){var r,i,n,s;if(e)for(s=Object.keys(e),r=0,i=s.length;r<i;r+=1)n=s[r],t[n]=e[n];return t}m(fm,"extend");function pm(t,e){var r="",i;for(i=0;i<e;i+=1)r+=t;return r}m(pm,"repeat");function gm(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}m(gm,"isNegativeZero");var ev=Ch,rv=um,iv=dm,nv=pm,sv=gm,av=fm,qt={isNothing:ev,isObject:rv,toArray:iv,repeat:nv,isNegativeZero:sv,extend:av};function Sh(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),i+" "+r):i}m(Sh,"formatError");function qi(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Sh(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}m(qi,"YAMLException$1");qi.prototype=Object.create(Error.prototype);qi.prototype.constructor=qi;qi.prototype.toString=m(function(e){return this.name+": "+Sh(this,e)},"toString");var me=qi;function Ns(t,e,r,i,n){var s="",o="",a=Math.floor(n/2)-1;return i-e>a&&(s=" ... ",e=i-a+s.length),r-i>a&&(o=" ...",r=i+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"")+o,pos:i-e+s.length}}m(Ns,"getLine");function js(t,e){return qt.repeat(" ",e-t.length)+t}m(js,"padStart");function mm(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],s,o=-1;s=r.exec(t.buffer);)n.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,h=Math.min(t.line+e.linesAfter,n.length).toString().length,u=e.maxLength-(e.indent+h+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=Ns(t.buffer,i[o-l],n[o-l],t.position-(i[o]-i[o-l]),u),a=qt.repeat(" ",e.indent)+js((t.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=Ns(t.buffer,i[o],n[o],t.position,u),a+=qt.repeat(" ",e.indent)+js((t.line+1).toString(),h)+" | "+c.str+`
`,a+=qt.repeat("-",e.indent+h+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)c=Ns(t.buffer,i[o+l],n[o+l],t.position-(i[o]-i[o+l]),u),a+=qt.repeat(" ",e.indent)+js((t.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}m(mm,"makeSnippet");var ov=mm,lv=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],cv=["scalar","sequence","mapping"];function ym(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(i){e[String(i)]=r})}),e}m(ym,"compileStyleAliases");function bm(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(lv.indexOf(r)===-1)throw new me('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=ym(e.styleAliases||null),cv.indexOf(this.kind)===-1)throw new me('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}m(bm,"Type$1");var re=bm;function dc(t,e){var r=[];return t[e].forEach(function(i){var n=r.length;r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=o)}),r[n]=i}),r}m(dc,"compileList");function xm(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function i(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(m(i,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(i);return t}m(xm,"compileMap");function ea(t){return this.extend(t)}m(ea,"Schema$1");ea.prototype.extend=m(function(e){var r=[],i=[];if(e instanceof re)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new me("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof re))throw new me("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new me("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new me("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof re))throw new me("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(ea.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=dc(n,"implicit"),n.compiledExplicit=dc(n,"explicit"),n.compiledTypeMap=xm(n.compiledImplicit,n.compiledExplicit),n},"extend");var hv=ea,uv=new re("tag:yaml.org,2002:str",{kind:"scalar",construct:m(function(t){return t!==null?t:""},"construct")}),dv=new re("tag:yaml.org,2002:seq",{kind:"sequence",construct:m(function(t){return t!==null?t:[]},"construct")}),fv=new re("tag:yaml.org,2002:map",{kind:"mapping",construct:m(function(t){return t!==null?t:{}},"construct")}),pv=new hv({explicit:[uv,dv,fv]});function _m(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}m(_m,"resolveYamlNull");function wm(){return null}m(wm,"constructYamlNull");function vm(t){return t===null}m(vm,"isNull");var gv=new re("tag:yaml.org,2002:null",{kind:"scalar",resolve:_m,construct:wm,predicate:vm,represent:{canonical:m(function(){return"~"},"canonical"),lowercase:m(function(){return"null"},"lowercase"),uppercase:m(function(){return"NULL"},"uppercase"),camelcase:m(function(){return"Null"},"camelcase"),empty:m(function(){return""},"empty")},defaultStyle:"lowercase"});function Cm(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}m(Cm,"resolveYamlBoolean");function Sm(t){return t==="true"||t==="True"||t==="TRUE"}m(Sm,"constructYamlBoolean");function km(t){return Object.prototype.toString.call(t)==="[object Boolean]"}m(km,"isBoolean");var mv=new re("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Cm,construct:Sm,predicate:km,represent:{lowercase:m(function(t){return t?"true":"false"},"lowercase"),uppercase:m(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:m(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Tm(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}m(Tm,"isHexCode");function Em(t){return 48<=t&&t<=55}m(Em,"isOctCode");function Am(t){return 48<=t&&t<=57}m(Am,"isDecCode");function Lm(t){if(t===null)return!1;var e=t.length,r=0,i=!1,n;if(!e)return!1;if(n=t[r],(n==="-"||n==="+")&&(n=t[++r]),n==="0"){if(r+1===e)return!0;if(n=t[++r],n==="b"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!Tm(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!Em(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<e;r++)if(n=t[r],n!=="_"){if(!Am(t.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}m(Lm,"resolveYamlInteger");function Bm(t){var e=t,r=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}m(Bm,"constructYamlInteger");function Rm(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!qt.isNegativeZero(t)}m(Rm,"isInteger");var yv=new re("tag:yaml.org,2002:int",{kind:"scalar",resolve:Lm,construct:Bm,predicate:Rm,represent:{binary:m(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:m(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:m(function(t){return t.toString(10)},"decimal"),hexadecimal:m(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),bv=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Mm(t){return!(t===null||!bv.test(t)||t[t.length-1]==="_")}m(Mm,"resolveYamlFloat");function $m(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}m($m,"constructYamlFloat");var xv=/^[-+]?[0-9]+e/;function Im(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qt.isNegativeZero(t))return"-0.0";return r=t.toString(10),xv.test(r)?r.replace("e",".e"):r}m(Im,"representYamlFloat");function Om(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qt.isNegativeZero(t))}m(Om,"isFloat");var _v=new re("tag:yaml.org,2002:float",{kind:"scalar",resolve:Mm,construct:$m,predicate:Om,represent:Im,defaultStyle:"lowercase"}),Pm=pv.extend({implicit:[gv,mv,yv,_v]}),wv=Pm,Fm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Nm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function jm(t){return t===null?!1:Fm.exec(t)!==null||Nm.exec(t)!==null}m(jm,"resolveYamlTimestamp");function Dm(t){var e,r,i,n,s,o,a,l=0,c=null,h,u,d;if(e=Fm.exec(t),e===null&&(e=Nm.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(r,i,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(h=+e[10],u=+(e[11]||0),c=(h*60+u)*6e4,e[9]==="-"&&(c=-c)),d=new Date(Date.UTC(r,i,n,s,o,a,l)),c&&d.setTime(d.getTime()-c),d}m(Dm,"constructYamlTimestamp");function qm(t){return t.toISOString()}m(qm,"representYamlTimestamp");var vv=new re("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:jm,construct:Dm,instanceOf:Date,represent:qm});function Hm(t){return t==="<<"||t===null}m(Hm,"resolveYamlMerge");var Cv=new re("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Hm}),kh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function zm(t){if(t===null)return!1;var e,r,i=0,n=t.length,s=kh;for(r=0;r<n;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}m(zm,"resolveYamlBinary");function Wm(t){var e,r,i=t.replace(/[\r\n=]/g,""),n=i.length,s=kh,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return r=n%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}m(Wm,"constructYamlBinary");function Um(t){var e="",r=0,i,n,s=t.length,o=kh;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[i];return n=s%3,n===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):n===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):n===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}m(Um,"representYamlBinary");function Vm(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}m(Vm,"isBinary");var Sv=new re("tag:yaml.org,2002:binary",{kind:"scalar",resolve:zm,construct:Wm,predicate:Vm,represent:Um}),kv=Object.prototype.hasOwnProperty,Tv=Object.prototype.toString;function Gm(t){if(t===null)return!0;var e=[],r,i,n,s,o,a=t;for(r=0,i=a.length;r<i;r+=1){if(n=a[r],o=!1,Tv.call(n)!=="[object Object]")return!1;for(s in n)if(kv.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}m(Gm,"resolveYamlOmap");function Ym(t){return t!==null?t:[]}m(Ym,"constructYamlOmap");var Ev=new re("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Gm,construct:Ym}),Av=Object.prototype.toString;function Xm(t){if(t===null)return!0;var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(i=o[e],Av.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}m(Xm,"resolveYamlPairs");function Jm(t){if(t===null)return[];var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)i=o[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}m(Jm,"constructYamlPairs");var Lv=new re("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Xm,construct:Jm}),Bv=Object.prototype.hasOwnProperty;function Km(t){if(t===null)return!0;var e,r=t;for(e in r)if(Bv.call(r,e)&&r[e]!==null)return!1;return!0}m(Km,"resolveYamlSet");function Zm(t){return t!==null?t:{}}m(Zm,"constructYamlSet");var Rv=new re("tag:yaml.org,2002:set",{kind:"mapping",resolve:Km,construct:Zm}),Qm=wv.extend({implicit:[vv,Cv],explicit:[Sv,Ev,Lv,Rv]}),Lr=Object.prototype.hasOwnProperty,ra=1,t0=2,e0=3,ia=4,Wl=1,Mv=2,Qf=3,$v=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Iv=/[\x85\u2028\u2029]/,Ov=/[,\[\]\{\}]/,r0=/^(?:!|!!|![a-z\-]+!)$/i,i0=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function fc(t){return Object.prototype.toString.call(t)}m(fc,"_class");function De(t){return t===10||t===13}m(De,"is_EOL");function Ar(t){return t===9||t===32}m(Ar,"is_WHITE_SPACE");function le(t){return t===9||t===32||t===10||t===13}m(le,"is_WS_OR_EOL");function Jr(t){return t===44||t===91||t===93||t===123||t===125}m(Jr,"is_FLOW_INDICATOR");function n0(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}m(n0,"fromHexCode");function s0(t){return t===120?2:t===117?4:t===85?8:0}m(s0,"escapedHexLen");function a0(t){return 48<=t&&t<=57?t-48:-1}m(a0,"fromDecimalCode");function pc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}m(pc,"simpleEscapeSequence");function o0(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}m(o0,"charFromCodepoint");var l0=new Array(256),c0=new Array(256);for(Ur=0;Ur<256;Ur++)l0[Ur]=pc(Ur)?1:0,c0[Ur]=pc(Ur);var Ur;function h0(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Qm,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}m(h0,"State$1");function Th(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=ov(r),new me(e,r)}m(Th,"generateError");function ot(t,e){throw Th(t,e)}m(ot,"throwError");function zn(t,e){t.onWarning&&t.onWarning.call(null,Th(t,e))}m(zn,"throwWarning");var tp={YAML:m(function(e,r,i){var n,s,o;e.version!==null&&ot(e,"duplication of %YAML directive"),i.length!==1&&ot(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&ot(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&ot(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&zn(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:m(function(e,r,i){var n,s;i.length!==2&&ot(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],r0.test(n)||ot(e,"ill-formed tag handle (first argument) of the TAG directive"),Lr.call(e.tagMap,n)&&ot(e,'there is a previously declared suffix for "'+n+'" tag handle'),i0.test(s)||ot(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ot(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function br(t,e,r,i){var n,s,o,a;if(e<r){if(a=t.input.slice(e,r),i)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||ot(t,"expected valid JSON character");else $v.test(a)&&ot(t,"the stream contains non-printable characters");t.result+=a}}m(br,"captureSegment");function gc(t,e,r,i){var n,s,o,a;for(qt.isObject(r)||ot(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),o=0,a=n.length;o<a;o+=1)s=n[o],Lr.call(e,s)||(e[s]=r[s],i[s]=!0)}m(gc,"mergeMappings");function Kr(t,e,r,i,n,s,o,a,l){var c,h;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,h=n.length;c<h;c+=1)Array.isArray(n[c])&&ot(t,"nested arrays are not supported inside keys"),typeof n=="object"&&fc(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&fc(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)gc(t,e,s[c],r);else gc(t,e,s,r);else!t.json&&!Lr.call(r,n)&&Lr.call(e,n)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,ot(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete r[n];return e}m(Kr,"storeMappingPair");function Ua(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ot(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}m(Ua,"readLineBreak");function Ot(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Ar(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(De(n))for(Ua(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return r!==-1&&i!==0&&t.lineIndent<r&&zn(t,"deficient indentation"),i}m(Ot,"skipSeparationSpace");function os(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||le(r)))}m(os,"testDocumentSeparator");function Va(t,e){e===1?t.result+=" ":e>1&&(t.result+=qt.repeat(`
`,e-1))}m(Va,"writeFoldedLines");function u0(t,e,r){var i,n,s,o,a,l,c,h,u=t.kind,d=t.result,f;if(f=t.input.charCodeAt(t.position),le(f)||Jr(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(n=t.input.charCodeAt(t.position+1),le(n)||r&&Jr(n)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;f!==0;){if(f===58){if(n=t.input.charCodeAt(t.position+1),le(n)||r&&Jr(n))break}else if(f===35){if(i=t.input.charCodeAt(t.position-1),le(i))break}else{if(t.position===t.lineStart&&os(t)||r&&Jr(f))break;if(De(f))if(l=t.line,c=t.lineStart,h=t.lineIndent,Ot(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=h;break}}a&&(br(t,s,o,!1),Va(t,t.line-l),s=o=t.position,a=!1),Ar(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}return br(t,s,o,!1),t.result?!0:(t.kind=u,t.result=d,!1)}m(u0,"readPlainScalar");function d0(t,e){var r,i,n;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(br(t,i,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)i=t.position,t.position++,n=t.position;else return!0;else De(r)?(br(t,i,n,!0),Va(t,Ot(t,!1,e)),i=n=t.position):t.position===t.lineStart&&os(t)?ot(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);ot(t,"unexpected end of the stream within a single quoted scalar")}m(d0,"readSingleQuotedScalar");function f0(t,e){var r,i,n,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return br(t,r,t.position,!0),t.position++,!0;if(a===92){if(br(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),De(a))Ot(t,!1,e);else if(a<256&&l0[a])t.result+=c0[a],t.position++;else if((o=s0(a))>0){for(n=o,s=0;n>0;n--)a=t.input.charCodeAt(++t.position),(o=n0(a))>=0?s=(s<<4)+o:ot(t,"expected hexadecimal character");t.result+=o0(s),t.position++}else ot(t,"unknown escape sequence");r=i=t.position}else De(a)?(br(t,r,i,!0),Va(t,Ot(t,!1,e)),r=i=t.position):t.position===t.lineStart&&os(t)?ot(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}ot(t,"unexpected end of the stream within a double quoted scalar")}m(f0,"readDoubleQuotedScalar");function p0(t,e){var r=!0,i,n,s,o=t.tag,a,l=t.anchor,c,h,u,d,f,p=Object.create(null),g,b,x,_;if(_=t.input.charCodeAt(t.position),_===91)h=93,f=!1,a=[];else if(_===123)h=125,f=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),_=t.input.charCodeAt(++t.position);_!==0;){if(Ot(t,!0,e),_=t.input.charCodeAt(t.position),_===h)return t.position++,t.tag=o,t.anchor=l,t.kind=f?"mapping":"sequence",t.result=a,!0;r?_===44&&ot(t,"expected the node content, but found ','"):ot(t,"missed comma between flow collection entries"),b=g=x=null,u=d=!1,_===63&&(c=t.input.charCodeAt(t.position+1),le(c)&&(u=d=!0,t.position++,Ot(t,!0,e))),i=t.line,n=t.lineStart,s=t.position,ni(t,e,ra,!1,!0),b=t.tag,g=t.result,Ot(t,!0,e),_=t.input.charCodeAt(t.position),(d||t.line===i)&&_===58&&(u=!0,_=t.input.charCodeAt(++t.position),Ot(t,!0,e),ni(t,e,ra,!1,!0),x=t.result),f?Kr(t,a,p,b,g,x,i,n,s):u?a.push(Kr(t,null,p,b,g,x,i,n,s)):a.push(g),Ot(t,!0,e),_=t.input.charCodeAt(t.position),_===44?(r=!0,_=t.input.charCodeAt(++t.position)):r=!1}ot(t,"unexpected end of the stream within a flow collection")}m(p0,"readFlowCollection");function g0(t,e){var r,i,n=Wl,s=!1,o=!1,a=e,l=0,c=!1,h,u;if(u=t.input.charCodeAt(t.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(t.kind="scalar",t.result="";u!==0;)if(u=t.input.charCodeAt(++t.position),u===43||u===45)Wl===n?n=u===43?Qf:Mv:ot(t,"repeat of a chomping mode identifier");else if((h=a0(u))>=0)h===0?ot(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ot(t,"repeat of an indentation width identifier"):(a=e+h-1,o=!0);else break;if(Ar(u)){do u=t.input.charCodeAt(++t.position);while(Ar(u));if(u===35)do u=t.input.charCodeAt(++t.position);while(!De(u)&&u!==0)}for(;u!==0;){for(Ua(t),t.lineIndent=0,u=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&u===32;)t.lineIndent++,u=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),De(u)){l++;continue}if(t.lineIndent<a){n===Qf?t.result+=qt.repeat(`
`,s?1+l:l):n===Wl&&s&&(t.result+=`
`);break}for(i?Ar(u)?(c=!0,t.result+=qt.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=qt.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=qt.repeat(`
`,l):t.result+=qt.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=t.position;!De(u)&&u!==0;)u=t.input.charCodeAt(++t.position);br(t,r,t.position,!1)}return!0}m(g0,"readBlockScalar");function mc(t,e){var r,i=t.tag,n=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ot(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!le(o))));){if(a=!0,t.position++,Ot(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,ni(t,e,e0,!1,!0),s.push(t.result),Ot(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)ot(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=i,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}m(mc,"readBlockSequence");function m0(t,e,r){var i,n,s,o,a,l,c=t.tag,h=t.anchor,u={},d=Object.create(null),f=null,p=null,g=null,b=!1,x=!1,_;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),_=t.input.charCodeAt(t.position);_!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ot(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(_===63||_===58)&&le(i))_===63?(b&&(Kr(t,u,d,f,p,null,o,a,l),f=p=g=null),x=!0,b=!0,n=!0):b?(b=!1,n=!0):ot(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,_=i;else{if(o=t.line,a=t.lineStart,l=t.position,!ni(t,r,t0,!1,!0))break;if(t.line===s){for(_=t.input.charCodeAt(t.position);Ar(_);)_=t.input.charCodeAt(++t.position);if(_===58)_=t.input.charCodeAt(++t.position),le(_)||ot(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Kr(t,u,d,f,p,null,o,a,l),f=p=g=null),x=!0,b=!1,n=!1,f=t.tag,p=t.result;else if(x)ot(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=h,!0}else if(x)ot(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=h,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,a=t.lineStart,l=t.position),ni(t,e,ia,!0,n)&&(b?p=t.result:g=t.result),b||(Kr(t,u,d,f,p,g,o,a,l),f=p=g=null),Ot(t,!0,-1),_=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&_!==0)ot(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&Kr(t,u,d,f,p,null,o,a,l),x&&(t.tag=c,t.anchor=h,t.kind="mapping",t.result=u),x}m(m0,"readBlockMapping");function y0(t){var e,r=!1,i=!1,n,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ot(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(i=!0,n="!!",o=t.input.charCodeAt(++t.position)):n="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ot(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!le(o);)o===33&&(i?ot(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),r0.test(n)||ot(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Ov.test(s)&&ot(t,"tag suffix cannot contain flow indicator characters")}s&&!i0.test(s)&&ot(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ot(t,"tag name is malformed: "+s)}return r?t.tag=s:Lr.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:ot(t,'undeclared tag handle "'+n+'"'),!0}m(y0,"readTagProperty");function b0(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ot(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!le(r)&&!Jr(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ot(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}m(b0,"readAnchorProperty");function x0(t){var e,r,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!le(i)&&!Jr(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&ot(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Lr.call(t.anchorMap,r)||ot(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ot(t,!0,-1),!0}m(x0,"readAlias");function ni(t,e,r,i,n){var s,o,a,l=1,c=!1,h=!1,u,d,f,p,g,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=ia===r||e0===r,i&&Ot(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;y0(t)||b0(t);)Ot(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||n),(l===1||ia===r)&&(ra===r||t0===r?g=e:g=e+1,b=t.position-t.lineStart,l===1?a&&(mc(t,b)||m0(t,b,g))||p0(t,g)?h=!0:(o&&g0(t,g)||d0(t,g)||f0(t,g)?h=!0:x0(t)?(h=!0,(t.tag!==null||t.anchor!==null)&&ot(t,"alias node should not have any properties")):u0(t,g,ra===r)&&(h=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(h=a&&mc(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ot(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,d=t.implicitTypes.length;u<d;u+=1)if(p=t.implicitTypes[u],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Lr.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,f=t.typeMap.multi[t.kind||"fallback"],u=0,d=f.length;u<d;u+=1)if(t.tag.slice(0,f[u].tag.length)===f[u].tag){p=f[u];break}p||ot(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&ot(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ot(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||h}m(ni,"composeNode");function _0(t){var e=t.position,r,i,n,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Ot(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!le(o);)o=t.input.charCodeAt(++t.position);for(i=t.input.slice(r,t.position),n=[],i.length<1&&ot(t,"directive name must not be less than one character in length");o!==0;){for(;Ar(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!De(o));break}if(De(o))break;for(r=t.position;o!==0&&!le(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(r,t.position))}o!==0&&Ua(t),Lr.call(tp,i)?tp[i](t,i,n):zn(t,'unknown document directive "'+i+'"')}if(Ot(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ot(t,!0,-1)):s&&ot(t,"directives end mark is expected"),ni(t,t.lineIndent-1,ia,!1,!0),Ot(t,!0,-1),t.checkLineBreaks&&Iv.test(t.input.slice(e,t.position))&&zn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&os(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ot(t,!0,-1));return}if(t.position<t.length-1)ot(t,"end of the stream or a document separator is expected");else return}m(_0,"readDocument");function Eh(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new h0(t,e),i=t.indexOf("\0");for(i!==-1&&(r.position=i,ot(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)_0(r);return r.documents}m(Eh,"loadDocuments");function Pv(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var i=Eh(t,r);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}m(Pv,"loadAll$1");function w0(t,e){var r=Eh(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new me("expected a single document in the stream, but found more")}}m(w0,"load$1");var Fv=w0,Nv={load:Fv},v0=Object.prototype.toString,C0=Object.prototype.hasOwnProperty,Ah=65279,jv=9,Wn=10,Dv=13,qv=32,Hv=33,zv=34,yc=35,Wv=37,Uv=38,Vv=39,Gv=42,S0=44,Yv=45,na=58,Xv=61,Jv=62,Kv=63,Zv=64,k0=91,T0=93,Qv=96,E0=123,tC=124,A0=125,ie={};ie[0]="\\0";ie[7]="\\a";ie[8]="\\b";ie[9]="\\t";ie[10]="\\n";ie[11]="\\v";ie[12]="\\f";ie[13]="\\r";ie[27]="\\e";ie[34]='\\"';ie[92]="\\\\";ie[133]="\\N";ie[160]="\\_";ie[8232]="\\L";ie[8233]="\\P";var eC=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],rC=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function L0(t,e){var r,i,n,s,o,a,l;if(e===null)return{};for(r={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)o=i[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&C0.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}m(L0,"compileStyleMap");function B0(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else if(t<=4294967295)r="U",i=8;else throw new me("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+qt.repeat("0",i-e.length)+e}m(B0,"encodeHex");var iC=1,Un=2;function R0(t){this.schema=t.schema||Qm,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=qt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=L0(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Un:iC,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}m(R0,"State");function bc(t,e){for(var r=qt.repeat(" ",e),i=0,n=-1,s="",o,a=t.length;i<a;)n=t.indexOf(`
`,i),n===-1?(o=t.slice(i),i=a):(o=t.slice(i,n+1),i=n+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}m(bc,"indentString");function sa(t,e){return`
`+qt.repeat(" ",t.indent*e)}m(sa,"generateNextLine");function M0(t,e){var r,i,n;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(n=t.implicitTypes[r],n.resolve(e))return!0;return!1}m(M0,"testImplicitResolving");function Vn(t){return t===qv||t===jv}m(Vn,"isWhitespace");function Hi(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Ah||65536<=t&&t<=1114111}m(Hi,"isPrintable");function xc(t){return Hi(t)&&t!==Ah&&t!==Dv&&t!==Wn}m(xc,"isNsCharOrWhitespace");function _c(t,e,r){var i=xc(t),n=i&&!Vn(t);return(r?i:i&&t!==S0&&t!==k0&&t!==T0&&t!==E0&&t!==A0)&&t!==yc&&!(e===na&&!n)||xc(e)&&!Vn(e)&&t===yc||e===na&&n}m(_c,"isPlainSafe");function $0(t){return Hi(t)&&t!==Ah&&!Vn(t)&&t!==Yv&&t!==Kv&&t!==na&&t!==S0&&t!==k0&&t!==T0&&t!==E0&&t!==A0&&t!==yc&&t!==Uv&&t!==Gv&&t!==Hv&&t!==tC&&t!==Xv&&t!==Jv&&t!==Vv&&t!==zv&&t!==Wv&&t!==Zv&&t!==Qv}m($0,"isPlainSafeFirst");function I0(t){return!Vn(t)&&t!==na}m(I0,"isPlainSafeLast");function Si(t,e){var r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}m(Si,"codePointAt");function Lh(t){var e=/^\n* /;return e.test(t)}m(Lh,"needIndentIndicator");var O0=1,wc=2,P0=3,F0=4,vi=5;function N0(t,e,r,i,n,s,o,a){var l,c=0,h=null,u=!1,d=!1,f=i!==-1,p=-1,g=$0(Si(t,0))&&I0(Si(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Si(t,l),!Hi(c))return vi;g=g&&_c(c,h,a),h=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Si(t,l),c===Wn)u=!0,f&&(d=d||l-p-1>i&&t[p+1]!==" ",p=l);else if(!Hi(c))return vi;g=g&&_c(c,h,a),h=c}d=d||f&&l-p-1>i&&t[p+1]!==" "}return!u&&!d?g&&!o&&!n(t)?O0:s===Un?vi:wc:r>9&&Lh(t)?vi:o?s===Un?vi:wc:d?F0:P0}m(N0,"chooseScalarStyle");function j0(t,e,r,i,n){t.dump=function(){if(e.length===0)return t.quotingType===Un?'""':"''";if(!t.noCompatMode&&(eC.indexOf(e)!==-1||rC.test(e)))return t.quotingType===Un?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=i||t.flowLevel>-1&&r>=t.flowLevel;function l(c){return M0(t,c)}switch(m(l,"testAmbiguity"),N0(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!i,n)){case O0:return e;case wc:return"'"+e.replace(/'/g,"''")+"'";case P0:return"|"+vc(e,t.indent)+Cc(bc(e,s));case F0:return">"+vc(e,t.indent)+Cc(bc(D0(e,o),s));case vi:return'"'+q0(e)+'"';default:throw new me("impossible error: invalid scalar style")}}()}m(j0,"writeScalar");function vc(t,e){var r=Lh(t)?String(e):"",i=t[t.length-1]===`
`,n=i&&(t[t.length-2]===`
`||t===`
`),s=n?"+":i?"":"-";return r+s+`
`}m(vc,"blockHeader");function Cc(t){return t[t.length-1]===`
`?t.slice(0,-1):t}m(Cc,"dropEndingNewline");function D0(t,e){for(var r=/(\n+)([^\n]*)/g,i=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,Sc(t.slice(0,c),e)}(),n=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",i+=a+(!n&&!s&&l!==""?`
`:"")+Sc(l,e),n=s}return i}m(D0,"foldString");function Sc(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,i,n=0,s,o=0,a=0,l="";i=r.exec(t);)a=i.index,a-n>e&&(s=o>n?o:a,l+=`
`+t.slice(n,s),n=s+1),o=a;return l+=`
`,t.length-n>e&&o>n?l+=t.slice(n,o)+`
`+t.slice(o+1):l+=t.slice(n),l.slice(1)}m(Sc,"foldLine");function q0(t){for(var e="",r=0,i,n=0;n<t.length;r>=65536?n+=2:n++)r=Si(t,n),i=ie[r],!i&&Hi(r)?(e+=t[n],r>=65536&&(e+=t[n+1])):e+=i||B0(r);return e}m(q0,"escapeString");function H0(t,e,r){var i="",n=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(Ze(t,e,a,!1,!1)||typeof a>"u"&&Ze(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=n,t.dump="["+i+"]"}m(H0,"writeFlowSequence");function kc(t,e,r,i){var n="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Ze(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Ze(t,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=sa(t,e)),t.dump&&Wn===t.dump.charCodeAt(0)?n+="-":n+="- ",n+=t.dump);t.tag=s,t.dump=n||"[]"}m(kc,"writeBlockSequence");function z0(t,e,r){var i="",n=t.tag,s=Object.keys(r),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",i!==""&&(h+=", "),t.condenseFlow&&(h+='"'),l=s[o],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),Ze(t,e,l,!1,!1)&&(t.dump.length>1024&&(h+="? "),h+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ze(t,e,c,!1,!1)&&(h+=t.dump,i+=h));t.tag=n,t.dump="{"+i+"}"}m(z0,"writeFlowMapping");function W0(t,e,r,i){var n="",s=t.tag,o=Object.keys(r),a,l,c,h,u,d;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new me("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!i||n!=="")&&(d+=sa(t,e)),c=o[a],h=r[c],t.replacer&&(h=t.replacer.call(r,c,h)),Ze(t,e+1,c,!0,!0,!0)&&(u=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,u&&(t.dump&&Wn===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,u&&(d+=sa(t,e)),Ze(t,e+1,h,!0,u)&&(t.dump&&Wn===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,n+=d));t.tag=s,t.dump=n||"{}"}m(W0,"writeBlockMapping");function Tc(t,e,r){var i,n,s,o,a,l;for(n=r?t.explicitTypes:t.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,v0.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(C0.call(a.represent,l))i=a.represent[l](e,l);else throw new me("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=i}return!0}return!1}m(Tc,"detectType");function Ze(t,e,r,i,n,s,o){t.tag=null,t.dump=r,Tc(t,r,!1)||Tc(t,r,!0);var a=v0.call(t.dump),l=i,c;i&&(i=t.flowLevel<0||t.flowLevel>e);var h=a==="[object Object]"||a==="[object Array]",u,d;if(h&&(u=t.duplicates.indexOf(r),d=u!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(n=!1),d&&t.usedDuplicates[u])t.dump="*ref_"+u;else{if(h&&d&&!t.usedDuplicates[u]&&(t.usedDuplicates[u]=!0),a==="[object Object]")i&&Object.keys(t.dump).length!==0?(W0(t,e,t.dump,n),d&&(t.dump="&ref_"+u+t.dump)):(z0(t,e,t.dump),d&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?kc(t,e-1,t.dump,n):kc(t,e,t.dump,n),d&&(t.dump="&ref_"+u+t.dump)):(H0(t,e,t.dump),d&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&j0(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new me("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}m(Ze,"writeNode");function U0(t,e){var r=[],i=[],n,s;for(aa(t,r,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(r[i[n]]);e.usedDuplicates=new Array(s)}m(U0,"getDuplicateReferences");function aa(t,e,r){var i,n,s;if(t!==null&&typeof t=="object")if(n=e.indexOf(t),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)aa(t[n],e,r);else for(i=Object.keys(t),n=0,s=i.length;n<s;n+=1)aa(t[i[n]],e,r)}m(aa,"inspectNode");function nC(t,e){e=e||{};var r=new R0(e);r.noRefs||U0(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),Ze(r,0,i,!0,!0)?r.dump+`
`:""}m(nC,"dump$1");function sC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}m(sC,"renamed");var aC=Pm,oC=Nv.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Te={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Bn(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=It(t),e=It(e);const[r,i]=[t.x,t.y],[n,s]=[e.x,e.y],o=n-r,a=s-i;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}m(Bn,"calculateDeltaAndAngle");var It=m(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),lC=m(t=>({x:m(function(e,r,i){let n=0;const s=It(i[0]).x<It(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Te,t.arrowTypeStart)){const{angle:f,deltaX:p}=Bn(i[0],i[1]);n=Te[t.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Te,t.arrowTypeEnd)){const{angle:f,deltaX:p}=Bn(i[i.length-1],i[i.length-2]);n=Te[t.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const o=Math.abs(It(e).x-It(i[i.length-1]).x),a=Math.abs(It(e).y-It(i[i.length-1]).y),l=Math.abs(It(e).x-It(i[0]).x),c=Math.abs(It(e).y-It(i[0]).y),h=Te[t.arrowTypeStart],u=Te[t.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="right"?-1:1,n-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="right"?-1:1,n+=f}return It(e).x+n},"x"),y:m(function(e,r,i){let n=0;const s=It(i[0]).y<It(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Te,t.arrowTypeStart)){const{angle:f,deltaY:p}=Bn(i[0],i[1]);n=Te[t.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Te,t.arrowTypeEnd)){const{angle:f,deltaY:p}=Bn(i[i.length-1],i[i.length-2]);n=Te[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const o=Math.abs(It(e).y-It(i[i.length-1]).y),a=Math.abs(It(e).x-It(i[i.length-1]).x),l=Math.abs(It(e).y-It(i[0]).y),c=Math.abs(It(e).x-It(i[0]).x),h=Te[t.arrowTypeStart],u=Te[t.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="up"?-1:1,n-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="up"?-1:1,n+=f}return It(e).y+n},"y")}),"getLineFunctionsWithOffset"),Bh=m(({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0,i=e+r;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),cC=m(t=>{const{handDrawnSeed:e}=Ct();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),Ji=m(t=>{const e=hC([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),hC=m(t=>{const e=new Map;return t.forEach(r=>{const[i,n]=r.split(":");e.set(i.trim(),n?.trim())}),e},"styles2Map"),V0=m(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),at=m(t=>{const{stylesArray:e}=Ji(t),r=[],i=[],n=[],s=[];return e.forEach(o=>{const a=o[0];V0(a)?r.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),a.includes("stroke")&&n.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:e,borderStyles:n,backgroundStyles:s}},"styles2String"),it=m((t,e)=>{const{themeVariables:r,handDrawnSeed:i}=Ct(),{nodeBorder:n,mainBkg:s}=r,{stylesMap:o}=Ji(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||n,seed:i,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:uC(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),uC=m(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const n=isNaN(e[0])?0:e[0];return[n,n]}const r=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1];return[r,i]},"getStrokeDashArray"),wn={},Dt={},ep;function dC(){return ep||(ep=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.BLANK_URL=Dt.relativeFirstCharacters=Dt.whitespaceEscapeCharsRegex=Dt.urlSchemeRegex=Dt.ctrlCharactersRegex=Dt.htmlCtrlEntityRegex=Dt.htmlEntitiesRegex=Dt.invalidProtocolRegex=void 0,Dt.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Dt.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Dt.htmlCtrlEntityRegex=/&(newline|tab);/gi,Dt.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Dt.urlSchemeRegex=/^.+(:|&colon;)/gim,Dt.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Dt.relativeFirstCharacters=[".","/"],Dt.BLANK_URL="about:blank"),Dt}var rp;function fC(){if(rp)return wn;rp=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.sanitizeUrl=void 0;var t=dC();function e(o){return t.relativeFirstCharacters.indexOf(o[0])>-1}function r(o){var a=o.replace(t.ctrlCharactersRegex,"");return a.replace(t.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function i(o){return URL.canParse(o)}function n(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return t.BLANK_URL;var a,l=n(o.trim());do l=r(l).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),l=n(l),a=l.match(t.ctrlCharactersRegex)||l.match(t.htmlEntitiesRegex)||l.match(t.htmlCtrlEntityRegex)||l.match(t.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return t.BLANK_URL;if(e(c))return c;var h=c.trimStart(),u=h.match(t.urlSchemeRegex);if(!u)return c;var d=u[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(d))return t.BLANK_URL;var f=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return f;if(d==="http:"||d==="https:"){if(!i(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return wn.sanitizeUrl=s,wn}var pC=fC(),gC={value:()=>{}};function G0(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Ds(r)}function Ds(t){this._=t}function mC(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Ds.prototype=G0.prototype={constructor:Ds,on:function(t,e){var r=this._,i=mC(t+"",r),n,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((n=(t=i[s]).type)&&(n=yC(r[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=ip(r[n],t.name,e);else if(e==null)for(n in r)r[n]=ip(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Ds(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,s;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,n=s.length;i<n;++i)s[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,s=i.length;n<s;++n)i[n].value.apply(e,r)}};function yC(t,e){for(var r=0,i=t.length,n;r<i;++r)if((n=t[r]).name===e)return n.value}function ip(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=gC,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var Ec="http://www.w3.org/1999/xhtml";const np={svg:"http://www.w3.org/2000/svg",xhtml:Ec,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ga(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),np.hasOwnProperty(e)?{space:np[e],local:t}:t}function bC(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ec&&e.documentElement.namespaceURI===Ec?e.createElement(t):e.createElementNS(r,t)}}function xC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Y0(t){var e=Ga(t);return(e.local?xC:bC)(e)}function _C(){}function Rh(t){return t==null?_C:function(){return this.querySelector(t)}}function wC(t){typeof t!="function"&&(t=Rh(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new Ce(i,this._parents)}function vC(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function CC(){return[]}function X0(t){return t==null?CC:function(){return this.querySelectorAll(t)}}function SC(t){return function(){return vC(t.apply(this,arguments))}}function kC(t){typeof t=="function"?t=SC(t):t=X0(t);for(var e=this._groups,r=e.length,i=[],n=[],s=0;s<r;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),n.push(l));return new Ce(i,n)}function J0(t){return function(){return this.matches(t)}}function K0(t){return function(e){return e.matches(t)}}var TC=Array.prototype.find;function EC(t){return function(){return TC.call(this.children,t)}}function AC(){return this.firstElementChild}function LC(t){return this.select(t==null?AC:EC(typeof t=="function"?t:K0(t)))}var BC=Array.prototype.filter;function RC(){return Array.from(this.children)}function MC(t){return function(){return BC.call(this.children,t)}}function $C(t){return this.selectAll(t==null?RC:MC(typeof t=="function"?t:K0(t)))}function IC(t){typeof t!="function"&&(t=J0(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Ce(i,this._parents)}function Z0(t){return new Array(t.length)}function OC(){return new Ce(this._enter||this._groups.map(Z0),this._parents)}function oa(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}oa.prototype={constructor:oa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function PC(t){return function(){return t}}function FC(t,e,r,i,n,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):r[o]=new oa(t,s[o]);for(;o<l;++o)(a=e[o])&&(n[o]=a)}function NC(t,e,r,i,n,s,o){var a,l,c=new Map,h=e.length,u=s.length,d=new Array(h),f;for(a=0;a<h;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?n[a]=l:c.set(f,l));for(a=0;a<u;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(i[a]=l,l.__data__=s[a],c.delete(f)):r[a]=new oa(t,s[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(d[a])===l&&(n[a]=l)}function jC(t){return t.__data__}function DC(t,e){if(!arguments.length)return Array.from(this,jC);var r=e?NC:FC,i=this._parents,n=this._groups;typeof t!="function"&&(t=PC(t));for(var s=n.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],u=n[c],d=u.length,f=qC(t.call(h,h&&h.__data__,c,i)),p=f.length,g=a[c]=new Array(p),b=o[c]=new Array(p),x=l[c]=new Array(d);r(h,u,g,b,x,f,e);for(var _=0,T=0,C,v;_<p;++_)if(C=g[_]){for(_>=T&&(T=_+1);!(v=b[T])&&++T<p;);C._next=v||null}}return o=new Ce(o,i),o._enter=a,o._exit=l,o}function qC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function HC(){return new Ce(this._exit||this._groups.map(Z0),this._parents)}function zC(t,e,r){var i=this.enter(),n=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(n=e(n),n&&(n=n.selection())),r==null?s.remove():r(s),i&&n?i.merge(n).order():n}function WC(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,s=i.length,o=Math.min(n,s),a=new Array(n),l=0;l<o;++l)for(var c=r[l],h=i[l],u=c.length,d=a[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||h[p])&&(d[p]=f);for(;l<n;++l)a[l]=r[l];return new Ce(a,this._parents)}function UC(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],n=i.length-1,s=i[n],o;--n>=0;)(o=i[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function VC(t){t||(t=GC);function e(u,d){return u&&d?t(u.__data__,d.__data__):!u-!d}for(var r=this._groups,i=r.length,n=new Array(i),s=0;s<i;++s){for(var o=r[s],a=o.length,l=n[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(e)}return new Ce(n,this._parents).order()}function GC(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function YC(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function XC(){return Array.from(this)}function JC(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length;n<s;++n){var o=i[n];if(o)return o}return null}function KC(){let t=0;for(const e of this)++t;return t}function ZC(){return!this.node()}function QC(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n=e[r],s=0,o=n.length,a;s<o;++s)(a=n[s])&&t.call(a,a.__data__,s,n);return this}function tS(t){return function(){this.removeAttribute(t)}}function eS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rS(t,e){return function(){this.setAttribute(t,e)}}function iS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function nS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function sS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function aS(t,e){var r=Ga(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?eS:tS:typeof e=="function"?r.local?sS:nS:r.local?iS:rS)(r,e))}function Q0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function oS(t){return function(){this.style.removeProperty(t)}}function lS(t,e,r){return function(){this.style.setProperty(t,e,r)}}function cS(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function hS(t,e,r){return arguments.length>1?this.each((e==null?oS:typeof e=="function"?cS:lS)(t,e,r??"")):zi(this.node(),t)}function zi(t,e){return t.style.getPropertyValue(e)||Q0(t).getComputedStyle(t,null).getPropertyValue(e)}function uS(t){return function(){delete this[t]}}function dS(t,e){return function(){this[t]=e}}function fS(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function pS(t,e){return arguments.length>1?this.each((e==null?uS:typeof e=="function"?fS:dS)(t,e)):this.node()[t]}function ty(t){return t.trim().split(/^|\s+/)}function Mh(t){return t.classList||new ey(t)}function ey(t){this._node=t,this._names=ty(t.getAttribute("class")||"")}ey.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ry(t,e){for(var r=Mh(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function iy(t,e){for(var r=Mh(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function gS(t){return function(){ry(this,t)}}function mS(t){return function(){iy(this,t)}}function yS(t,e){return function(){(e.apply(this,arguments)?ry:iy)(this,t)}}function bS(t,e){var r=ty(t+"");if(arguments.length<2){for(var i=Mh(this.node()),n=-1,s=r.length;++n<s;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof e=="function"?yS:e?gS:mS)(r,e))}function xS(){this.textContent=""}function _S(t){return function(){this.textContent=t}}function wS(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function vS(t){return arguments.length?this.each(t==null?xS:(typeof t=="function"?wS:_S)(t)):this.node().textContent}function CS(){this.innerHTML=""}function SS(t){return function(){this.innerHTML=t}}function kS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function TS(t){return arguments.length?this.each(t==null?CS:(typeof t=="function"?kS:SS)(t)):this.node().innerHTML}function ES(){this.nextSibling&&this.parentNode.appendChild(this)}function AS(){return this.each(ES)}function LS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function BS(){return this.each(LS)}function RS(t){var e=typeof t=="function"?t:Y0(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function MS(){return null}function $S(t,e){var r=typeof t=="function"?t:Y0(t),i=e==null?MS:typeof e=="function"?e:Rh(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function IS(){var t=this.parentNode;t&&t.removeChild(this)}function OS(){return this.each(IS)}function PS(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function FS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function NS(t){return this.select(t?FS:PS)}function jS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function DS(t){return function(e){t.call(this,e,this.__data__)}}function qS(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function HS(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,n=e.length,s;r<n;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function zS(t,e,r){return function(){var i=this.__on,n,s=DS(e);if(i){for(var o=0,a=i.length;o<a;++o)if((n=i[o]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=e;return}}this.addEventListener(t.type,s,r),n={type:t.type,name:t.name,value:e,listener:s,options:r},i?i.push(n):this.__on=[n]}}function WS(t,e,r){var i=qS(t+""),n,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(n=0,h=a[l];n<s;++n)if((o=i[n]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?zS:HS,n=0;n<s;++n)this.each(a(i[n],e,r));return this}function ny(t,e,r){var i=Q0(t),n=i.CustomEvent;typeof n=="function"?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function US(t,e){return function(){return ny(this,t,e)}}function VS(t,e){return function(){return ny(this,t,e.apply(this,arguments))}}function GS(t,e){return this.each((typeof e=="function"?VS:US)(t,e))}function*YS(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length,o;n<s;++n)(o=i[n])&&(yield o)}var sy=[null];function Ce(t,e){this._groups=t,this._parents=e}function ls(){return new Ce([[document.documentElement]],sy)}function XS(){return this}Ce.prototype=ls.prototype={constructor:Ce,select:wC,selectAll:kC,selectChild:LC,selectChildren:$C,filter:IC,data:DC,enter:OC,exit:HC,join:zC,merge:WC,selection:XS,order:UC,sort:VC,call:YC,nodes:XC,node:JC,size:KC,empty:ZC,each:QC,attr:aS,style:hS,property:pS,classed:bS,text:vS,html:TS,raise:AS,lower:BS,append:RS,insert:$S,remove:OS,clone:NS,datum:jS,on:WS,dispatch:GS,[Symbol.iterator]:YS};function wt(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],sy)}function $h(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ay(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function cs(){}var Gn=.7,la=1/Gn,Ti="\\s*([+-]?\\d+)\\s*",Yn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JS=/^#([0-9a-f]{3,8})$/,KS=new RegExp(`^rgb\\(${Ti},${Ti},${Ti}\\)$`),ZS=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),QS=new RegExp(`^rgba\\(${Ti},${Ti},${Ti},${Yn}\\)$`),tk=new RegExp(`^rgba\\(${Je},${Je},${Je},${Yn}\\)$`),ek=new RegExp(`^hsl\\(${Yn},${Je},${Je}\\)$`),rk=new RegExp(`^hsla\\(${Yn},${Je},${Je},${Yn}\\)$`),sp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$h(cs,Xn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ap,formatHex:ap,formatHex8:ik,formatHsl:nk,formatRgb:op,toString:op});function ap(){return this.rgb().formatHex()}function ik(){return this.rgb().formatHex8()}function nk(){return oy(this).formatHsl()}function op(){return this.rgb().formatRgb()}function Xn(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=JS.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?lp(e):r===3?new ye(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Cs(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Cs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=KS.exec(t))?new ye(e[1],e[2],e[3],1):(e=ZS.exec(t))?new ye(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=QS.exec(t))?Cs(e[1],e[2],e[3],e[4]):(e=tk.exec(t))?Cs(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ek.exec(t))?up(e[1],e[2]/100,e[3]/100,1):(e=rk.exec(t))?up(e[1],e[2]/100,e[3]/100,e[4]):sp.hasOwnProperty(t)?lp(sp[t]):t==="transparent"?new ye(NaN,NaN,NaN,0):null}function lp(t){return new ye(t>>16&255,t>>8&255,t&255,1)}function Cs(t,e,r,i){return i<=0&&(t=e=r=NaN),new ye(t,e,r,i)}function sk(t){return t instanceof cs||(t=Xn(t)),t?(t=t.rgb(),new ye(t.r,t.g,t.b,t.opacity)):new ye}function Ac(t,e,r,i){return arguments.length===1?sk(t):new ye(t,e,r,i??1)}function ye(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}$h(ye,Ac,ay(cs,{brighter(t){return t=t==null?la:Math.pow(la,t),new ye(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gn:Math.pow(Gn,t),new ye(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ye(ei(this.r),ei(this.g),ei(this.b),ca(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cp,formatHex:cp,formatHex8:ak,formatRgb:hp,toString:hp}));function cp(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}`}function ak(){return`#${Zr(this.r)}${Zr(this.g)}${Zr(this.b)}${Zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function hp(){const t=ca(this.opacity);return`${t===1?"rgb(":"rgba("}${ei(this.r)}, ${ei(this.g)}, ${ei(this.b)}${t===1?")":`, ${t})`}`}function ca(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ei(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Zr(t){return t=ei(t),(t<16?"0":"")+t.toString(16)}function up(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ne(t,e,r,i)}function oy(t){if(t instanceof Ne)return new Ne(t.h,t.s,t.l,t.opacity);if(t instanceof cs||(t=Xn(t)),!t)return new Ne;if(t instanceof Ne)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),s=Math.max(e,r,i),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(r-i)/a+(r<i)*6:r===s?o=(i-e)/a+2:o=(e-r)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new Ne(o,a,l,t.opacity)}function ok(t,e,r,i){return arguments.length===1?oy(t):new Ne(t,e,r,i??1)}function Ne(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}$h(Ne,ok,ay(cs,{brighter(t){return t=t==null?la:Math.pow(la,t),new Ne(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gn:Math.pow(Gn,t),new Ne(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new ye(Ul(t>=240?t-240:t+120,n,i),Ul(t,n,i),Ul(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new Ne(dp(this.h),Ss(this.s),Ss(this.l),ca(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ca(this.opacity);return`${t===1?"hsl(":"hsla("}${dp(this.h)}, ${Ss(this.s)*100}%, ${Ss(this.l)*100}%${t===1?")":`, ${t})`}`}}));function dp(t){return t=(t||0)%360,t<0?t+360:t}function Ss(t){return Math.max(0,Math.min(1,t||0))}function Ul(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Ih=t=>()=>t;function ly(t,e){return function(r){return t+r*e}}function lk(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function PO(t,e){var r=e-t;return r?ly(t,r>180||r<-180?r-360*Math.round(r/360):r):Ih(isNaN(t)?e:t)}function ck(t){return(t=+t)==1?cy:function(e,r){return r-e?lk(e,r,t):Ih(isNaN(e)?r:e)}}function cy(t,e){var r=e-t;return r?ly(t,r):Ih(isNaN(t)?e:t)}const fp=function t(e){var r=ck(e);function i(n,s){var o=r((n=Ac(n)).r,(s=Ac(s)).r),a=r(n.g,s.g),l=r(n.b,s.b),c=cy(n.opacity,s.opacity);return function(h){return n.r=o(h),n.g=a(h),n.b=l(h),n.opacity=c(h),n+""}}return i.gamma=t,i}(1);function Tr(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Lc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(Lc.source,"g");function hk(t){return function(){return t}}function uk(t){return function(e){return t(e)+""}}function dk(t,e){var r=Lc.lastIndex=Vl.lastIndex=0,i,n,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=Lc.exec(t))&&(n=Vl.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:Tr(i,n)})),r=Vl.lastIndex;return r<e.length&&(s=e.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?uk(l[0].x):hk(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var pp=180/Math.PI,Bc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hy(t,e,r,i,n,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*r+e*i)&&(r-=t*l,i-=e*l),(a=Math.sqrt(r*r+i*i))&&(r/=a,i/=a,l/=a),t*i<e*r&&(t=-t,e=-e,l=-l,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,t)*pp,skewX:Math.atan(l)*pp,scaleX:o,scaleY:a}}var ks;function fk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bc:hy(e.a,e.b,e.c,e.d,e.e,e.f)}function pk(t){return t==null||(ks||(ks=document.createElementNS("http://www.w3.org/2000/svg","g")),ks.setAttribute("transform",t),!(t=ks.transform.baseVal.consolidate()))?Bc:(t=t.matrix,hy(t.a,t.b,t.c,t.d,t.e,t.f))}function uy(t,e,r,i){function n(c){return c.length?c.pop()+" ":""}function s(c,h,u,d,f,p){if(c!==u||h!==d){var g=f.push("translate(",null,e,null,r);p.push({i:g-4,x:Tr(c,u)},{i:g-2,x:Tr(h,d)})}else(u||d)&&f.push("translate("+u+e+d+r)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(n(u)+"rotate(",null,i)-2,x:Tr(c,h)})):h&&u.push(n(u)+"rotate("+h+i)}function a(c,h,u,d){c!==h?d.push({i:u.push(n(u)+"skewX(",null,i)-2,x:Tr(c,h)}):h&&u.push(n(u)+"skewX("+h+i)}function l(c,h,u,d,f,p){if(c!==u||h!==d){var g=f.push(n(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Tr(c,u)},{i:g-2,x:Tr(h,d)})}else(u!==1||d!==1)&&f.push(n(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=t(c),h=t(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var p=-1,g=d.length,b;++p<g;)u[(b=d[p]).i]=b.x(f);return u.join("")}}}var gk=uy(fk,"px, ","px)","deg)"),mk=uy(pk,", ",")",")"),Wi=0,Rn=0,vn=0,dy=1e3,ha,Mn,ua=0,si=0,Ya=0,Jn=typeof performance=="object"&&performance.now?performance:Date,fy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oh(){return si||(fy(yk),si=Jn.now()+Ya)}function yk(){si=0}function da(){this._call=this._time=this._next=null}da.prototype=py.prototype={constructor:da,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?Oh():+r)+(e==null?0:+e),!this._next&&Mn!==this&&(Mn?Mn._next=this:ha=this,Mn=this),this._call=t,this._time=r,Rc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rc())}};function py(t,e,r){var i=new da;return i.restart(t,e,r),i}function bk(){Oh(),++Wi;for(var t=ha,e;t;)(e=si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Wi}function gp(){si=(ua=Jn.now())+Ya,Wi=Rn=0;try{bk()}finally{Wi=0,_k(),si=0}}function xk(){var t=Jn.now(),e=t-ua;e>dy&&(Ya-=e,ua=t)}function _k(){for(var t,e=ha,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:ha=r);Mn=t,Rc(i)}function Rc(t){if(!Wi){Rn&&(Rn=clearTimeout(Rn));var e=t-si;e>24?(t<1/0&&(Rn=setTimeout(gp,t-Jn.now()-Ya)),vn&&(vn=clearInterval(vn))):(vn||(ua=Jn.now(),vn=setInterval(xk,dy)),Wi=1,fy(gp))}}function mp(t,e,r){var i=new da;return e=e==null?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,r),i}var wk=G0("start","end","cancel","interrupt"),vk=[],gy=0,yp=1,Mc=2,qs=3,bp=4,$c=5,Hs=6;function Xa(t,e,r,i,n,s){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Ck(t,r,{name:e,index:i,group:n,on:wk,tween:vk,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:gy})}function Ph(t,e){var r=We(t,e);if(r.state>gy)throw new Error("too late; already scheduled");return r}function er(t,e){var r=We(t,e);if(r.state>qs)throw new Error("too late; already running");return r}function We(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Ck(t,e,r){var i=t.__transition,n;i[e]=r,r.timer=py(s,0,r.time);function s(c){r.state=yp,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,d,f;if(r.state!==yp)return l();for(h in i)if(f=i[h],f.name===r.name){if(f.state===qs)return mp(o);f.state===bp?(f.state=Hs,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[h]):+h<e&&(f.state=Hs,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[h])}if(mp(function(){r.state===qs&&(r.state=bp,r.timer.restart(a,r.delay,r.time),a(c))}),r.state=Mc,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Mc){for(r.state=qs,n=new Array(d=r.tween.length),h=0,u=-1;h<d;++h)(f=r.tween[h].value.call(t,t.__data__,r.index,r.group))&&(n[++u]=f);n.length=u+1}}function a(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=$c,1),u=-1,d=n.length;++u<d;)n[u].call(t,h);r.state===$c&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=Hs,r.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function Sk(t,e){var r=t.__transition,i,n,s=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){s=!1;continue}n=i.state>Mc&&i.state<$c,i.state=Hs,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]}s&&delete t.__transition}}function kk(t){return this.each(function(){Sk(this,t)})}function Tk(t,e){var r,i;return function(){var n=er(this,t),s=n.tween;if(s!==r){i=r=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}n.tween=i}}function Ek(t,e,r){var i,n;if(typeof r!="function")throw new Error;return function(){var s=er(this,t),o=s.tween;if(o!==i){n=(i=o).slice();for(var a={name:e,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=a;break}l===c&&n.push(a)}s.tween=n}}function Ak(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=We(this.node(),r).tween,n=0,s=i.length,o;n<s;++n)if((o=i[n]).name===t)return o.value;return null}return this.each((e==null?Tk:Ek)(r,t,e))}function Fh(t,e,r){var i=t._id;return t.each(function(){var n=er(this,i);(n.value||(n.value={}))[e]=r.apply(this,arguments)}),function(n){return We(n,i).value[e]}}function my(t,e){var r;return(typeof e=="number"?Tr:e instanceof Xn?fp:(r=Xn(e))?(e=r,fp):dk)(t,e)}function Lk(t){return function(){this.removeAttribute(t)}}function Bk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rk(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttribute(t);return o===n?null:o===i?s:s=e(i=o,r)}}function Mk(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?s:s=e(i=o,r)}}function $k(t,e,r){var i,n,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a)))}}function Ik(t,e,r){var i,n,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a)))}}function Ok(t,e){var r=Ga(t),i=r==="transform"?mk:my;return this.attrTween(t,typeof e=="function"?(r.local?Ik:$k)(r,i,Fh(this,"attr."+t,e)):e==null?(r.local?Bk:Lk)(r):(r.local?Mk:Rk)(r,i,e))}function Pk(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Fk(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Nk(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Fk(t,s)),r}return n._value=e,n}function jk(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Pk(t,s)),r}return n._value=e,n}function Dk(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Ga(t);return this.tween(r,(i.local?Nk:jk)(i,e))}function qk(t,e){return function(){Ph(this,t).delay=+e.apply(this,arguments)}}function Hk(t,e){return e=+e,function(){Ph(this,t).delay=e}}function zk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qk:Hk)(e,t)):We(this.node(),e).delay}function Wk(t,e){return function(){er(this,t).duration=+e.apply(this,arguments)}}function Uk(t,e){return e=+e,function(){er(this,t).duration=e}}function Vk(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Wk:Uk)(e,t)):We(this.node(),e).duration}function Gk(t,e){if(typeof e!="function")throw new Error;return function(){er(this,t).ease=e}}function Yk(t){var e=this._id;return arguments.length?this.each(Gk(e,t)):We(this.node(),e).ease}function Xk(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;er(this,t).ease=r}}function Jk(t){if(typeof t!="function")throw new Error;return this.each(Xk(this._id,t))}function Kk(t){typeof t!="function"&&(t=J0(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new xr(i,this._parents,this._name,this._id)}function Zk(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,s=Math.min(i,n),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=r[a],h=l.length,u=o[a]=new Array(h),d,f=0;f<h;++f)(d=l[f]||c[f])&&(u[f]=d);for(;a<i;++a)o[a]=e[a];return new xr(o,this._parents,this._name,this._id)}function Qk(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function tT(t,e,r){var i,n,s=Qk(e)?Ph:er;return function(){var o=s(this,t),a=o.on;a!==i&&(n=(i=a).copy()).on(e,r),o.on=n}}function eT(t,e){var r=this._id;return arguments.length<2?We(this.node(),r).on.on(t):this.each(tT(r,t,e))}function rT(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function iT(){return this.on("end.remove",rT(this._id))}function nT(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Rh(t));for(var i=this._groups,n=i.length,s=new Array(n),o=0;o<n;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),h,u,d=0;d<l;++d)(h=a[d])&&(u=t.call(h,h.__data__,d,a))&&("__data__"in h&&(u.__data__=h.__data__),c[d]=u,Xa(c[d],e,r,d,c,We(h,r)));return new xr(s,this._parents,e,r)}function sT(t){var e=this._name,r=this._id;typeof t!="function"&&(t=X0(t));for(var i=this._groups,n=i.length,s=[],o=[],a=0;a<n;++a)for(var l=i[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var d=t.call(h,h.__data__,u,l),f,p=We(h,r),g=0,b=d.length;g<b;++g)(f=d[g])&&Xa(f,e,r,g,d,p);s.push(d),o.push(h)}return new xr(s,o,e,r)}var aT=ls.prototype.constructor;function oT(){return new aT(this._groups,this._parents)}function lT(t,e){var r,i,n;return function(){var s=zi(this,t),o=(this.style.removeProperty(t),zi(this,t));return s===o?null:s===r&&o===i?n:n=e(r=s,i=o)}}function yy(t){return function(){this.style.removeProperty(t)}}function cT(t,e,r){var i,n=r+"",s;return function(){var o=zi(this,t);return o===n?null:o===i?s:s=e(i=o,r)}}function hT(t,e,r){var i,n,s;return function(){var o=zi(this,t),a=r(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),zi(this,t))),o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a))}}function uT(t,e){var r,i,n,s="style."+e,o="end."+s,a;return function(){var l=er(this,t),c=l.on,h=l.value[s]==null?a||(a=yy(e)):void 0;(c!==r||n!==h)&&(i=(r=c).copy()).on(o,n=h),l.on=i}}function dT(t,e,r){var i=(t+="")=="transform"?gk:my;return e==null?this.styleTween(t,lT(t,i)).on("end.style."+t,yy(t)):typeof e=="function"?this.styleTween(t,hT(t,i,Fh(this,"style."+t,e))).each(uT(this._id,t)):this.styleTween(t,cT(t,i,e),r).on("end.style."+t,null)}function fT(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function pT(t,e,r){var i,n;function s(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&fT(t,o,r)),i}return s._value=e,s}function gT(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,pT(t,e,r??""))}function mT(t){return function(){this.textContent=t}}function yT(t){return function(){var e=t(this);this.textContent=e??""}}function bT(t){return this.tween("text",typeof t=="function"?yT(Fh(this,"text",t)):mT(t==null?"":t+""))}function xT(t){return function(e){this.textContent=t.call(this,e)}}function _T(t){var e,r;function i(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&xT(n)),e}return i._value=t,i}function wT(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,_T(t))}function vT(){for(var t=this._name,e=this._id,r=by(),i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=We(l,e);Xa(l,t,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new xr(i,this._parents,t,r)}function CT(){var t,e,r=this,i=r._id,n=r.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--n===0&&s()}};r.each(function(){var c=er(this,i),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),n===0&&s()})}var ST=0;function xr(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function by(){return++ST}var ur=ls.prototype;xr.prototype={constructor:xr,select:nT,selectAll:sT,selectChild:ur.selectChild,selectChildren:ur.selectChildren,filter:Kk,merge:Zk,selection:oT,transition:vT,call:ur.call,nodes:ur.nodes,node:ur.node,size:ur.size,empty:ur.empty,each:ur.each,on:eT,attr:Ok,attrTween:Dk,style:dT,styleTween:gT,text:bT,textTween:wT,remove:iT,tween:Ak,delay:zk,duration:Vk,ease:Yk,easeVarying:Jk,end:CT,[Symbol.iterator]:ur[Symbol.iterator]};function kT(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var TT={time:null,delay:0,duration:250,ease:kT};function ET(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function AT(t){var e,r;t instanceof xr?(e=t._id,t=t._name):(e=by(),(r=TT).time=Oh(),t=t==null?null:t+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Xa(l,t,e,c,o,r||ET(l,e));return new xr(i,this._parents,t,e)}ls.prototype.interrupt=kk;ls.prototype.transition=AT;const Ic=Math.PI,Oc=2*Ic,Vr=1e-6,LT=Oc-Vr;function xy(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function BT(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xy;const r=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}class RT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xy:BT(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,i,n){this._append`Q${+e},${+r},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,r,i,n,s,o){this._append`C${+e},${+r},${+i},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,i,n,s){if(e=+e,r=+r,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=n-r,h=o-e,u=a-r,d=h*h+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>Vr)if(!(Math.abs(u*l-c*h)>Vr)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let f=i-o,p=n-a,g=l*l+c*c,b=f*f+p*p,x=Math.sqrt(g),_=Math.sqrt(d),T=s*Math.tan((Ic-Math.acos((g+d-b)/(2*x*_)))/2),C=T/_,v=T/x;Math.abs(C-1)>Vr&&this._append`L${e+C*h},${r+C*u}`,this._append`A${s},${s},0,0,${+(u*f>h*p)},${this._x1=e+v*l},${this._y1=r+v*c}`}}arc(e,r,i,n,s,o){if(e=+e,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(n),l=i*Math.sin(n),c=e+a,h=r+l,u=1^o,d=o?n-s:s-n;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Vr||Math.abs(this._y1-h)>Vr)&&this._append`L${c},${h}`,i&&(d<0&&(d=d%Oc+Oc),d>LT?this._append`A${i},${i},0,1,${u},${e-a},${r-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=h}`:d>Vr&&this._append`A${i},${i},0,${+(d>=Ic)},${u},${this._x1=e+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(e,r,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function _i(t){return function(){return t}}const FO=Math.abs,NO=Math.atan2,jO=Math.cos,DO=Math.max,qO=Math.min,HO=Math.sin,zO=Math.sqrt,xp=1e-12,Nh=Math.PI,_p=Nh/2,WO=2*Nh;function UO(t){return t>1?0:t<-1?Nh:Math.acos(t)}function VO(t){return t>=1?_p:t<=-1?-_p:Math.asin(t)}function MT(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);e=i}return t},()=>new RT(e)}function $T(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _y(t){this._context=t}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fa(t){return new _y(t)}function IT(t){return t[0]}function OT(t){return t[1]}function PT(t,e){var r=_i(!0),i=null,n=fa,s=null,o=MT(a);t=typeof t=="function"?t:t===void 0?IT:_i(t),e=typeof e=="function"?e:e===void 0?OT:_i(e);function a(l){var c,h=(l=$T(l)).length,u,d=!1,f;for(i==null&&(s=n(f=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,c,l),+e(u,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:_i(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:_i(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:_i(!!l),a):r},a.curve=function(l){return arguments.length?(n=l,i!=null&&(s=n(i)),a):n},a.context=function(l){return arguments.length?(l==null?i=s=null:s=n(i=l),a):i},a}class wy{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function vy(t){return new wy(t,!0)}function Cy(t){return new wy(t,!1)}function Br(){}function pa(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Ja(t){this._context=t}Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function zs(t){return new Ja(t)}function Sy(t){this._context=t}Sy.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:pa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function FT(t){return new Sy(t)}function ky(t){this._context=t}ky.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:pa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NT(t){return new ky(t)}function Ty(t,e){this._basis=new Ja(t),this._beta=e}Ty.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var i=t[0],n=e[0],s=t[r]-i,o=e[r]-n,a=-1,l;++a<=r;)l=a/r,this._basis.point(this._beta*t[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(n+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const jT=function t(e){function r(i){return e===1?new Ja(i):new Ty(i,e)}return r.beta=function(i){return t(+i)},r}(.85);function ga(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function jh(t,e){this._context=t,this._k=(1-e)/6}jh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ga(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ey=function t(e){function r(i){return new jh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function Dh(t,e){this._context=t,this._k=(1-e)/6}Dh.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const DT=function t(e){function r(i){return new Dh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function qh(t,e){this._context=t,this._k=(1-e)/6}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ga(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const qT=function t(e){function r(i){return new qh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function Hh(t,e,r){var i=t._x1,n=t._y1,s=t._x2,o=t._y2;if(t._l01_a>xp){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,n=(n*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>xp){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*c+t._y1*t._l23_2a-r*t._l12_2a)/h}t._context.bezierCurveTo(i,n,s,o,t._x2,t._y2)}function Ay(t,e){this._context=t,this._alpha=e}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Hh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ly=function t(e){function r(i){return e?new Ay(i,e):new jh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function By(t,e){this._context=t,this._alpha=e}By.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Hh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const HT=function t(e){function r(i){return e?new By(i,e):new Dh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function Ry(t,e){this._context=t,this._alpha=e}Ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Hh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const zT=function t(e){function r(i){return e?new Ry(i,e):new qh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function My(t){this._context=t}My.prototype={areaStart:Br,areaEnd:Br,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function WT(t){return new My(t)}function wp(t){return t<0?-1:1}function vp(t,e,r){var i=t._x1-t._x0,n=e-t._x1,s=(t._y1-t._y0)/(i||n<0&&-0),o=(r-t._y1)/(n||i<0&&-0),a=(s*n+o*i)/(i+n);return(wp(s)+wp(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Cp(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Gl(t,e,r){var i=t._x0,n=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,n+a*e,s-a,o-a*r,s,o)}function ma(t){this._context=t}ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Gl(this,this._t0,Cp(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Gl(this,Cp(this,r=vp(this,t,e)),r);break;default:Gl(this,this._t0,r=vp(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function $y(t){this._context=new Iy(t)}($y.prototype=Object.create(ma.prototype)).point=function(t,e){ma.prototype.point.call(this,e,t)};function Iy(t){this._context=t}Iy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,i,n,s){this._context.bezierCurveTo(e,t,i,r,s,n)}};function Oy(t){return new ma(t)}function Py(t){return new $y(t)}function Fy(t){this._context=t}Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var i=Sp(t),n=Sp(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(i[0][s],n[0][s],i[1][s],n[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Sp(t){var e,r=t.length-1,i,n=new Array(r),s=new Array(r),o=new Array(r);for(n[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)n[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(n[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)i=n[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(n[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)n[e]=(o[e]-n[e+1])/s[e];for(s[r-1]=(t[r]+n[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-n[e+1];return[n,s]}function Ny(t){return new Fy(t)}function Ka(t,e){this._context=t,this._t=e}Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function jy(t){return new Ka(t,.5)}function Dy(t){return new Ka(t,0)}function qy(t){return new Ka(t,1)}function $n(t,e,r){this.k=t,this.x=e,this.y=r}$n.prototype={constructor:$n,scale:function(t){return t===1?this:new $n(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new $n(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$n.prototype;var Hy=typeof global=="object"&&global&&global.Object===Object&&global,UT=typeof self=="object"&&self&&self.Object===Object&&self,rr=Hy||UT||Function("return this")(),ya=rr.Symbol,zy=Object.prototype,VT=zy.hasOwnProperty,GT=zy.toString,Cn=ya?ya.toStringTag:void 0;function YT(t){var e=VT.call(t,Cn),r=t[Cn];try{t[Cn]=void 0;var i=!0}catch{}var n=GT.call(t);return i&&(e?t[Cn]=r:delete t[Cn]),n}var XT=Object.prototype,JT=XT.toString;function KT(t){return JT.call(t)}var ZT="[object Null]",QT="[object Undefined]",kp=ya?ya.toStringTag:void 0;function Ki(t){return t==null?t===void 0?QT:ZT:kp&&kp in Object(t)?YT(t):KT(t)}function ci(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var tE="[object AsyncFunction]",eE="[object Function]",rE="[object GeneratorFunction]",iE="[object Proxy]";function zh(t){if(!ci(t))return!1;var e=Ki(t);return e==eE||e==rE||e==tE||e==iE}var Yl=rr["__core-js_shared__"],Tp=function(){var t=/[^.]+$/.exec(Yl&&Yl.keys&&Yl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function nE(t){return!!Tp&&Tp in t}var sE=Function.prototype,aE=sE.toString;function hi(t){if(t!=null){try{return aE.call(t)}catch{}try{return t+""}catch{}}return""}var oE=/[\\^$.*+?()[\]{}|]/g,lE=/^\[object .+?Constructor\]$/,cE=Function.prototype,hE=Object.prototype,uE=cE.toString,dE=hE.hasOwnProperty,fE=RegExp("^"+uE.call(dE).replace(oE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pE(t){if(!ci(t)||nE(t))return!1;var e=zh(t)?fE:lE;return e.test(hi(t))}function gE(t,e){return t?.[e]}function ui(t,e){var r=gE(t,e);return pE(r)?r:void 0}var Kn=ui(Object,"create");function mE(){this.__data__=Kn?Kn(null):{},this.size=0}function yE(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var bE="__lodash_hash_undefined__",xE=Object.prototype,_E=xE.hasOwnProperty;function wE(t){var e=this.__data__;if(Kn){var r=e[t];return r===bE?void 0:r}return _E.call(e,t)?e[t]:void 0}var vE=Object.prototype,CE=vE.hasOwnProperty;function SE(t){var e=this.__data__;return Kn?e[t]!==void 0:CE.call(e,t)}var kE="__lodash_hash_undefined__";function TE(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Kn&&e===void 0?kE:e,this}function ai(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ai.prototype.clear=mE;ai.prototype.delete=yE;ai.prototype.get=wE;ai.prototype.has=SE;ai.prototype.set=TE;function EE(){this.__data__=[],this.size=0}function Za(t,e){return t===e||t!==t&&e!==e}function Qa(t,e){for(var r=t.length;r--;)if(Za(t[r][0],e))return r;return-1}var AE=Array.prototype,LE=AE.splice;function BE(t){var e=this.__data__,r=Qa(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():LE.call(e,r,1),--this.size,!0}function RE(t){var e=this.__data__,r=Qa(e,t);return r<0?void 0:e[r][1]}function ME(t){return Qa(this.__data__,t)>-1}function $E(t,e){var r=this.__data__,i=Qa(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function vr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}vr.prototype.clear=EE;vr.prototype.delete=BE;vr.prototype.get=RE;vr.prototype.has=ME;vr.prototype.set=$E;var Zn=ui(rr,"Map");function IE(){this.size=0,this.__data__={hash:new ai,map:new(Zn||vr),string:new ai}}function OE(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function to(t,e){var r=t.__data__;return OE(e)?r[typeof e=="string"?"string":"hash"]:r.map}function PE(t){var e=to(this,t).delete(t);return this.size-=e?1:0,e}function FE(t){return to(this,t).get(t)}function NE(t){return to(this,t).has(t)}function jE(t,e){var r=to(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function Ir(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Ir.prototype.clear=IE;Ir.prototype.delete=PE;Ir.prototype.get=FE;Ir.prototype.has=NE;Ir.prototype.set=jE;var DE="Expected a function";function hs(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(DE);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var o=t.apply(this,i);return r.cache=s.set(n,o)||s,o};return r.cache=new(hs.Cache||Ir),r}hs.Cache=Ir;function qE(){this.__data__=new vr,this.size=0}function HE(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function zE(t){return this.__data__.get(t)}function WE(t){return this.__data__.has(t)}var UE=200;function VE(t,e){var r=this.__data__;if(r instanceof vr){var i=r.__data__;if(!Zn||i.length<UE-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ir(i)}return r.set(t,e),this.size=r.size,this}function Zi(t){var e=this.__data__=new vr(t);this.size=e.size}Zi.prototype.clear=qE;Zi.prototype.delete=HE;Zi.prototype.get=zE;Zi.prototype.has=WE;Zi.prototype.set=VE;var ba=function(){try{var t=ui(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Wh(t,e,r){e=="__proto__"&&ba?ba(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Pc(t,e,r){(r!==void 0&&!Za(t[e],r)||r===void 0&&!(e in t))&&Wh(t,e,r)}function GE(t){return function(e,r,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[++n];if(r(s[l],l,s)===!1)break}return e}}var YE=GE(),Wy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ep=Wy&&typeof module=="object"&&module&&!module.nodeType&&module,XE=Ep&&Ep.exports===Wy,Ap=XE?rr.Buffer:void 0,Lp=Ap?Ap.allocUnsafe:void 0;function JE(t,e){if(e)return t.slice();var r=t.length,i=Lp?Lp(r):new t.constructor(r);return t.copy(i),i}var Bp=rr.Uint8Array;function KE(t){var e=new t.constructor(t.byteLength);return new Bp(e).set(new Bp(t)),e}function ZE(t,e){var r=e?KE(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function QE(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var Rp=Object.create,tA=function(){function t(){}return function(e){if(!ci(e))return{};if(Rp)return Rp(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Uy(t,e){return function(r){return t(e(r))}}var Vy=Uy(Object.getPrototypeOf,Object),eA=Object.prototype;function eo(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||eA;return t===r}function rA(t){return typeof t.constructor=="function"&&!eo(t)?tA(Vy(t)):{}}function us(t){return t!=null&&typeof t=="object"}var iA="[object Arguments]";function Mp(t){return us(t)&&Ki(t)==iA}var Gy=Object.prototype,nA=Gy.hasOwnProperty,sA=Gy.propertyIsEnumerable,xa=Mp(function(){return arguments}())?Mp:function(t){return us(t)&&nA.call(t,"callee")&&!sA.call(t,"callee")},_a=Array.isArray,aA=9007199254740991;function Yy(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=aA}function ro(t){return t!=null&&Yy(t.length)&&!zh(t)}function oA(t){return us(t)&&ro(t)}function lA(){return!1}var Xy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$p=Xy&&typeof module=="object"&&module&&!module.nodeType&&module,cA=$p&&$p.exports===Xy,Ip=cA?rr.Buffer:void 0,hA=Ip?Ip.isBuffer:void 0,Uh=hA||lA,uA="[object Object]",dA=Function.prototype,fA=Object.prototype,Jy=dA.toString,pA=fA.hasOwnProperty,gA=Jy.call(Object);function mA(t){if(!us(t)||Ki(t)!=uA)return!1;var e=Vy(t);if(e===null)return!0;var r=pA.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Jy.call(r)==gA}var yA="[object Arguments]",bA="[object Array]",xA="[object Boolean]",_A="[object Date]",wA="[object Error]",vA="[object Function]",CA="[object Map]",SA="[object Number]",kA="[object Object]",TA="[object RegExp]",EA="[object Set]",AA="[object String]",LA="[object WeakMap]",BA="[object ArrayBuffer]",RA="[object DataView]",MA="[object Float32Array]",$A="[object Float64Array]",IA="[object Int8Array]",OA="[object Int16Array]",PA="[object Int32Array]",FA="[object Uint8Array]",NA="[object Uint8ClampedArray]",jA="[object Uint16Array]",DA="[object Uint32Array]",Rt={};Rt[MA]=Rt[$A]=Rt[IA]=Rt[OA]=Rt[PA]=Rt[FA]=Rt[NA]=Rt[jA]=Rt[DA]=!0;Rt[yA]=Rt[bA]=Rt[BA]=Rt[xA]=Rt[RA]=Rt[_A]=Rt[wA]=Rt[vA]=Rt[CA]=Rt[SA]=Rt[kA]=Rt[TA]=Rt[EA]=Rt[AA]=Rt[LA]=!1;function qA(t){return us(t)&&Yy(t.length)&&!!Rt[Ki(t)]}function HA(t){return function(e){return t(e)}}var Ky=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qn=Ky&&typeof module=="object"&&module&&!module.nodeType&&module,zA=qn&&qn.exports===Ky,Xl=zA&&Hy.process,Op=function(){try{var t=qn&&qn.require&&qn.require("util").types;return t||Xl&&Xl.binding&&Xl.binding("util")}catch{}}(),Pp=Op&&Op.isTypedArray,Vh=Pp?HA(Pp):qA;function Fc(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var WA=Object.prototype,UA=WA.hasOwnProperty;function VA(t,e,r){var i=t[e];(!(UA.call(t,e)&&Za(i,r))||r===void 0&&!(e in t))&&Wh(t,e,r)}function GA(t,e,r,i){var n=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),n?Wh(r,a,l):VA(r,a,l)}return r}function YA(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var XA=9007199254740991,JA=/^(?:0|[1-9]\d*)$/;function Zy(t,e){var r=typeof t;return e=e??XA,!!e&&(r=="number"||r!="symbol"&&JA.test(t))&&t>-1&&t%1==0&&t<e}var KA=Object.prototype,ZA=KA.hasOwnProperty;function QA(t,e){var r=_a(t),i=!r&&xa(t),n=!r&&!i&&Uh(t),s=!r&&!i&&!n&&Vh(t),o=r||i||n||s,a=o?YA(t.length,String):[],l=a.length;for(var c in t)(e||ZA.call(t,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Zy(c,l)))&&a.push(c);return a}function tL(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var eL=Object.prototype,rL=eL.hasOwnProperty;function iL(t){if(!ci(t))return tL(t);var e=eo(t),r=[];for(var i in t)i=="constructor"&&(e||!rL.call(t,i))||r.push(i);return r}function Qy(t){return ro(t)?QA(t,!0):iL(t)}function nL(t){return GA(t,Qy(t))}function sL(t,e,r,i,n,s,o){var a=Fc(t,r),l=Fc(e,r),c=o.get(l);if(c){Pc(t,r,c);return}var h=s?s(a,l,r+"",t,e,o):void 0,u=h===void 0;if(u){var d=_a(l),f=!d&&Uh(l),p=!d&&!f&&Vh(l);h=l,d||f||p?_a(a)?h=a:oA(a)?h=QE(a):f?(u=!1,h=JE(l,!0)):p?(u=!1,h=ZE(l,!0)):h=[]:mA(l)||xa(l)?(h=a,xa(a)?h=nL(a):(!ci(a)||zh(a))&&(h=rA(l))):u=!1}u&&(o.set(l,h),n(h,l,i,s,o),o.delete(l)),Pc(t,r,h)}function tb(t,e,r,i,n){t!==e&&YE(e,function(s,o){if(n||(n=new Zi),ci(s))sL(t,e,o,r,tb,i,n);else{var a=i?i(Fc(t,o),s,o+"",t,e,n):void 0;a===void 0&&(a=s),Pc(t,o,a)}},Qy)}function eb(t){return t}function aL(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Fp=Math.max;function oL(t,e,r){return e=Fp(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=Fp(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(o),aL(t,this,a)}}function lL(t){return function(){return t}}var cL=ba?function(t,e){return ba(t,"toString",{configurable:!0,enumerable:!1,value:lL(e),writable:!0})}:eb,hL=800,uL=16,dL=Date.now;function fL(t){var e=0,r=0;return function(){var i=dL(),n=uL-(i-r);if(r=i,n>0){if(++e>=hL)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var pL=fL(cL);function gL(t,e){return pL(oL(t,e,eb),t+"")}function mL(t,e,r){if(!ci(r))return!1;var i=typeof e;return(i=="number"?ro(r)&&Zy(e,r.length):i=="string"&&e in r)?Za(r[e],t):!1}function yL(t){return gL(function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(n--,s):void 0,o&&mL(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,s)}return e})}var bL=yL(function(t,e,r){tb(t,e,r)}),xL="",_L={curveBasis:zs,curveBasisClosed:FT,curveBasisOpen:NT,curveBumpX:vy,curveBumpY:Cy,curveBundle:jT,curveCardinalClosed:DT,curveCardinalOpen:qT,curveCardinal:Ey,curveCatmullRomClosed:HT,curveCatmullRomOpen:zT,curveCatmullRom:Ly,curveLinear:fa,curveLinearClosed:WT,curveMonotoneX:Oy,curveMonotoneY:Py,curveNatural:Ny,curveStep:jy,curveStepAfter:qy,curveStepBefore:Dy},wL=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,vL=m(function(t,e){const r=rb(t,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const o=r.map(a=>a.args);Ks(o),i=Kt(i,[...o])}else i=r.args;if(!i)return;let n=mh(t,e);const s="config";return i[s]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),i[n]=i[s],delete i[s]),i},"detectInit"),rb=m(function(t,e=null){try{const r=new RegExp(`[%]{2}(?![{]${wL.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(r,"").replace(/'/gm,'"'),G.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let i;const n=[];for(;(i=jn.exec(t))!==null;)if(i.index===jn.lastIndex&&jn.lastIndex++,i&&!e||e&&i[1]?.match(e)||e&&i[2]?.match(e)){const s=i[1]?i[1]:i[2],o=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;n.push({type:s,args:o})}return n.length===0?{type:t,args:null}:n.length===1?n[0]:n}catch(r){return G.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),CL=m(function(t){return t.replace(jn,"")},"removeDirectives"),SL=m(function(t,e){for(const[r,i]of e.entries())if(i.match(t))return r;return-1},"isSubstringInArray");function Gh(t,e){if(!t)return e;const r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return _L[r]??e}m(Gh,"interpolateToCurve");function ib(t,e){const r=t.trim();if(r)return e.securityLevel!=="loose"?pC.sanitizeUrl(r):r}m(ib,"formatUrl");var kL=m((t,...e)=>{const r=t.split("."),i=r.length-1,n=r[i];let s=window;for(let o=0;o<i;o++)if(s=s[r[o]],!s){G.error(`Function name: ${t} not found in window`);return}s[n](...e)},"runFunc");function Yh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}m(Yh,"distance");function nb(t){let e,r=0;t.forEach(n=>{r+=Yh(n,e),e=n});const i=r/2;return Xh(t,i)}m(nb,"traverseEdge");function sb(t){return t.length===1?t[0]:nb(t)}m(sb,"calcLabelPosition");var Np=m((t,e=2)=>{const r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),Xh=m((t,e)=>{let r,i=e;for(const n of t){if(r){const s=Yh(n,r);if(s===0)return r;if(s<i)i-=s;else{const o=i/s;if(o<=0)return r;if(o>=1)return{x:n.x,y:n.y};if(o>0&&o<1)return{x:Np((1-o)*r.x+o*n.x,5),y:Np((1-o)*r.y+o*n.y,5)}}}r=n}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),TL=m((t,e,r)=>{G.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());const n=Xh(e,25),s=t?10:5,o=Math.atan2(e[0].y-n.y,e[0].x-n.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+n.x)/2,a.y=-Math.cos(o)*s+(e[0].y+n.y)/2,a},"calcCardinalityPosition");function ab(t,e,r){const i=structuredClone(r);G.info("our points",i),e!=="start_left"&&e!=="start_right"&&i.reverse();const n=25+t,s=Xh(i,n),o=10+t*.5,a=Math.atan2(i[0].y-s.y,i[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(i[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(i[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2),l}m(ab,"calcTerminalLabelPosition");function ob(t){let e="",r="";for(const i of t)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":e=e+i+";");return{style:e,labelStyle:r}}m(ob,"getStylesFromArray");var jp=0,EL=m(()=>(jp++,"id-"+Math.random().toString(36).substr(2,12)+"-"+jp),"generateId");function lb(t){let e="";const r="0123456789abcdef",i=r.length;for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*i));return e}m(lb,"makeRandomHex");var AL=m(t=>lb(t.length),"random"),LL=m(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),BL=m(function(t,e){const r=e.text.replace(Xi.lineBreakRegex," "),[,i]=io(e.fontSize),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.style("text-anchor",e.anchor),n.style("font-family",e.fontFamily),n.style("font-size",i),n.style("font-weight",e.fontWeight),n.attr("fill",e.fill),e.class!==void 0&&n.attr("class",e.class);const s=n.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(r),n},"drawSimpleText"),RL=hs((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Xi.lineBreakRegex.test(t)))return t;const i=t.split(" ").filter(Boolean),n=[];let s="";return i.forEach((o,a)=>{const l=_r(`${o} `,r),c=_r(s,r);if(l>e){const{hyphenatedStrings:d,remainingWord:f}=ML(o,e,"-",r);n.push(s,...d),s=f}else c+l>=e?(n.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===i.length&&n.push(s)}),n.filter(o=>o!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),ML=hs((t,e,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const n=[...t],s=[];let o="";return n.forEach((a,l)=>{const c=`${o}${a}`;if(_r(c,i)>=e){const u=l+1,d=n.length===u,f=`${c}${r}`;s.push(d?c:f),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(t,e,r="-",i)=>`${t}${e}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function cb(t,e){return Jh(t,e).height}m(cb,"calculateTextHeight");function _r(t,e){return Jh(t,e).width}m(_r,"calculateTextWidth");var Jh=hs((t,e)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:n=400}=e;if(!t)return{width:0,height:0};const[,s]=io(r),o=["sans-serif",i],a=t.split(Xi.lineBreakRegex),l=[],c=wt("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const d of o){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of a){const b=LL();b.text=g||xL;const x=BL(h,b).style("font-size",s).style("font-weight",n).style("font-family",d),_=(x._groups||x)[0][0].getBBox();if(_.width===0&&_.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,_.width)),f=Math.round(_.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}l.push(p)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Oi,$L=(Oi=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},m(Oi,"InitIDGenerator"),Oi),Ts,IL=m(function(t){return Ts=Ts||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Ts.innerHTML=t,unescape(Ts.textContent)},"entityDecode");function Kh(t){return"str"in t}m(Kh,"isDetailedError");var OL=m((t,e,r,i)=>{if(!i)return;const n=t.node()?.getBBox();n&&t.append("text").text(i).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-r).attr("class",e)},"insertTitle"),io=m(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function Zh(t,e){return bL({},t,e)}m(Zh,"cleanAndMerge");var je={assignWithDepth:Kt,wrapLabel:RL,calculateTextHeight:cb,calculateTextWidth:_r,calculateTextDimensions:Jh,cleanAndMerge:Zh,detectInit:vL,detectDirective:rb,isSubstringInArray:SL,interpolateToCurve:Gh,calcLabelPosition:sb,calcCardinalityPosition:TL,calcTerminalLabelPosition:ab,formatUrl:ib,getStylesFromArray:ob,generateId:EL,random:AL,runFunc:kL,entityDecode:IL,insertTitle:OL,isLabelCoordinateInPath:hb,parseFontSize:io,InitIDGenerator:$L},PL=m(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),e},"encodeEntities"),di=m(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),GO=m((t,e,{counter:r=0,prefix:i,suffix:n},s)=>s||`${i?`${i}_`:""}${t}_${e}_${r}${n?`_${n}`:""}`,"getEdgeId");function be(t){return t??null}m(be,"handleUndefinedAttr");function hb(t,e){const r=Math.round(t.x),i=Math.round(t.y),n=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return n.includes(r.toString())||n.includes(i.toString())}m(hb,"isLabelCoordinateInPath");const FL=Object.freeze({left:0,top:0,width:16,height:16}),wa=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),ub=Object.freeze({...FL,...wa}),NL=Object.freeze({...ub,body:"",hidden:!1}),jL=Object.freeze({width:null,height:null}),DL=Object.freeze({...jL,...wa}),qL=(t,e,r,i="")=>{const n=t.split(":");if(t.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;i=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const a=n.pop(),l=n.pop(),c={provider:n.length>0?n[0]:i,prefix:l,name:a};return Jl(c)?c:null}const s=n[0],o=s.split("-");if(o.length>1){const a={provider:i,prefix:o.shift(),name:o.join("-")};return Jl(a)?a:null}if(r&&i===""){const a={provider:i,prefix:"",name:s};return Jl(a,r)?a:null}return null},Jl=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function HL(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(r.rotate=i),r}function Dp(t,e){const r=HL(t,e);for(const i in NL)i in wa?i in t&&!(i in r)&&(r[i]=wa[i]):i in e?r[i]=e[i]:i in t&&(r[i]=t[i]);return r}function zL(t,e){const r=t.icons,i=t.aliases||Object.create(null),n=Object.create(null);function s(o){if(r[o])return n[o]=[];if(!(o in n)){n[o]=null;const a=i[o]&&i[o].parent,l=a&&s(a);l&&(n[o]=[a].concat(l))}return n[o]}return(e||Object.keys(r).concat(Object.keys(i))).forEach(s),n}function qp(t,e,r){const i=t.icons,n=t.aliases||Object.create(null);let s={};function o(a){s=Dp(i[a]||n[a],s)}return o(e),r.forEach(o),Dp(t,s)}function WL(t,e){if(t.icons[e])return qp(t,e,[]);const r=zL(t,[e])[e];return r?qp(t,e,r):null}const UL=/(-?[0-9.]*[0-9]+[0-9.]*)/g,VL=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Hp(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const i=t.split(UL);if(i===null||!i.length)return t;const n=[];let s=i.shift(),o=VL.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?n.push(s):n.push(Math.ceil(a*e*r)/r)}else n.push(s);if(s=i.shift(),s===void 0)return n.join("");o=!o}}function GL(t,e="defs"){let r="";const i=t.indexOf("<"+e);for(;i>=0;){const n=t.indexOf(">",i),s=t.indexOf("</"+e);if(n===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;r+=t.slice(n+1,s).trim(),t=t.slice(0,i).trim()+t.slice(o+1)}return{defs:r,content:t}}function YL(t,e){return t?"<defs>"+t+"</defs>"+e:e}function XL(t,e,r){const i=GL(t);return YL(i.defs,e+i.content+r)}const JL=t=>t==="unset"||t==="undefined"||t==="none";function KL(t,e){const r={...ub,...t},i={...DL,...e},n={left:r.left,top:r.top,width:r.width,height:r.height};let s=r.body;[r,i].forEach(g=>{const b=[],x=g.hFlip,_=g.vFlip;let T=g.rotate;x?_?T+=2:(b.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),b.push("scale(-1 1)"),n.top=n.left=0):_&&(b.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),b.push("scale(1 -1)"),n.top=n.left=0);let C;switch(T<0&&(T-=Math.floor(T/4)*4),T=T%4,T){case 1:C=n.height/2+n.top,b.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:b.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:C=n.width/2+n.left,b.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}T%2===1&&(n.left!==n.top&&(C=n.left,n.left=n.top,n.top=C),n.width!==n.height&&(C=n.width,n.width=n.height,n.height=C)),b.length&&(s=XL(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const o=i.width,a=i.height,l=n.width,c=n.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=Hp(u,l/c)):(h=o==="auto"?l:o,u=a===null?Hp(h,c/l):a==="auto"?c:a);const d={},f=(g,b)=>{JL(b)||(d[g]=b.toString())};f("width",h),f("height",u);const p=[n.left,n.top,l,c];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:s}}const ZL=/\sid="(\S+)"/g,QL="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let tB=0;function eB(t,e=QL){const r=[];let i;for(;i=ZL.exec(t);)r.push(i[1]);if(!r.length)return t;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(s=>{const o=typeof e=="function"?e(s):e+(tB++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+n+"$3")}),t=t.replace(new RegExp(n,"g"),""),t}function rB(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)r+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}function Qh(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var fi=Qh();function db(t){fi=t}var Hn={exec:()=>null};function kt(t,e=""){let r=typeof t=="string"?t:t.source,i={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ce.caret,"$1"),r=r.replace(n,o),i},getRegex:()=>new RegExp(r,e)};return i}var ce={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},iB=/^(?:[ \t]*(?:\n|$))+/,nB=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,sB=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ds=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,aB=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,tu=/(?:[*+-]|\d{1,9}[.)])/,fb=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,pb=kt(fb).replace(/bull/g,tu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),oB=kt(fb).replace(/bull/g,tu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),eu=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,lB=/^[^\n]+/,ru=/(?!\s*\])(?:\\.|[^\[\]\\])+/,cB=kt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",ru).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),hB=kt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,tu).getRegex(),no="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",iu=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,uB=kt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",iu).replace("tag",no).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),gb=kt(eu).replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",no).getRegex(),dB=kt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",gb).getRegex(),nu={blockquote:dB,code:nB,def:cB,fences:sB,heading:aB,hr:ds,html:uB,lheading:pb,list:hB,newline:iB,paragraph:gb,table:Hn,text:lB},zp=kt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",no).getRegex(),fB={...nu,lheading:oB,table:zp,paragraph:kt(eu).replace("hr",ds).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",zp).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",no).getRegex()},pB={...nu,html:kt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",iu).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Hn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:kt(eu).replace("hr",ds).replace("heading",` *#{1,6} *[^
]`).replace("lheading",pb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},gB=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,mB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mb=/^( {2,}|\\)\n(?!\s*$)/,yB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,so=/[\p{P}\p{S}]/u,su=/[\s\p{P}\p{S}]/u,yb=/[^\s\p{P}\p{S}]/u,bB=kt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,su).getRegex(),bb=/(?!~)[\p{P}\p{S}]/u,xB=/(?!~)[\s\p{P}\p{S}]/u,_B=/(?:[^\s\p{P}\p{S}]|~)/u,wB=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,xb=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,vB=kt(xb,"u").replace(/punct/g,so).getRegex(),CB=kt(xb,"u").replace(/punct/g,bb).getRegex(),_b="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",SB=kt(_b,"gu").replace(/notPunctSpace/g,yb).replace(/punctSpace/g,su).replace(/punct/g,so).getRegex(),kB=kt(_b,"gu").replace(/notPunctSpace/g,_B).replace(/punctSpace/g,xB).replace(/punct/g,bb).getRegex(),TB=kt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,yb).replace(/punctSpace/g,su).replace(/punct/g,so).getRegex(),EB=kt(/\\(punct)/,"gu").replace(/punct/g,so).getRegex(),AB=kt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),LB=kt(iu).replace("(?:-->|$)","-->").getRegex(),BB=kt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",LB).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),va=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,RB=kt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",va).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wb=kt(/^!?\[(label)\]\[(ref)\]/).replace("label",va).replace("ref",ru).getRegex(),vb=kt(/^!?\[(ref)\](?:\[\])?/).replace("ref",ru).getRegex(),MB=kt("reflink|nolink(?!\\()","g").replace("reflink",wb).replace("nolink",vb).getRegex(),au={_backpedal:Hn,anyPunctuation:EB,autolink:AB,blockSkip:wB,br:mb,code:mB,del:Hn,emStrongLDelim:vB,emStrongRDelimAst:SB,emStrongRDelimUnd:TB,escape:gB,link:RB,nolink:vb,punctuation:bB,reflink:wb,reflinkSearch:MB,tag:BB,text:yB,url:Hn},$B={...au,link:kt(/^!?\[(label)\]\((.*?)\)/).replace("label",va).getRegex(),reflink:kt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",va).getRegex()},Nc={...au,emStrongRDelimAst:kB,emStrongLDelim:CB,url:kt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},IB={...Nc,br:kt(mb).replace("{2,}","*").getRegex(),text:kt(Nc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Es={normal:nu,gfm:fB,pedantic:pB},Sn={normal:au,gfm:Nc,breaks:IB,pedantic:$B},OB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wp=t=>OB[t];function Ge(t,e){if(e){if(ce.escapeTest.test(t))return t.replace(ce.escapeReplace,Wp)}else if(ce.escapeTestNoEncode.test(t))return t.replace(ce.escapeReplaceNoEncode,Wp);return t}function Up(t){try{t=encodeURI(t).replace(ce.percentDecode,"%")}catch{return null}return t}function Vp(t,e){let r=t.replace(ce.findPipe,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=r.split(ce.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(ce.slashPipe,"|");return i}function kn(t,e,r){let i=t.length;if(i===0)return"";let n=0;for(;n<i&&t.charAt(i-n-1)===e;)n++;return t.slice(0,i-n)}function PB(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function Gp(t,e,r,i,n){let s=e.href,o=e.title||null,a=t[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function FB(t,e,r){let i=t.match(r.other.indentCodeCompensation);if(i===null)return e;let n=i[1];return e.split(`
`).map(s=>{let o=s.match(r.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=n.length?s.slice(n.length):s}).join(`
`)}var Ca=class{options;rules;lexer;constructor(e){this.options=e||fi}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let i=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:kn(i,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let i=r[0],n=FB(i,r[3]||"",this.rules);return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:n}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(this.rules.other.endingHash.test(i)){let n=kn(i,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(i=n.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:kn(r[0],`
`)}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let i=kn(r[0],`
`).split(`
`),n="",s="",o=[];for(;i.length>0;){let a=!1,l=[],c;for(c=0;c<i.length;c++)if(this.rules.other.blockquoteStart.test(i[c]))l.push(i[c]),a=!0;else if(!a)l.push(i[c]);else break;i=i.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${h}`:h,s=s?`${s}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,i.length===0)break;let f=o.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let p=f,g=p.raw+`
`+i.join(`
`),b=this.blockquote(g);o[o.length-1]=b,n=n.substring(0,n.length-p.raw.length)+b.raw,s=s.substring(0,s.length-p.text.length)+b.text;break}else if(f?.type==="list"){let p=f,g=p.raw+`
`+i.join(`
`),b=this.list(g);o[o.length-1]=b,n=n.substring(0,n.length-f.raw.length)+b.raw,s=s.substring(0,s.length-p.raw.length)+b.raw,i=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:s}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i=r[1].trim(),n=i.length>1,s={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");let o=this.rules.other.listItemRegex(i),a=!1;for(;e;){let c=!1,h="",u="";if(!(r=o.exec(e))||this.rules.block.hr.test(e))break;h=r[0],e=e.substring(h.length);let d=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,_=>" ".repeat(3*_.length)),f=e.split(`
`,1)[0],p=!d.trim(),g=0;if(this.options.pedantic?(g=2,u=d.trimStart()):p?g=r[1].length+1:(g=r[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=d.slice(g),g+=r[1].length),p&&this.rules.other.blankLine.test(f)&&(h+=f+`
`,e=e.substring(f.length+1),c=!0),!c){let _=this.rules.other.nextBulletRegex(g),T=this.rules.other.hrRegex(g),C=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),R=this.rules.other.htmlBeginRegex(g);for(;e;){let M=e.split(`
`,1)[0],O;if(f=M,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),O=f):O=f.replace(this.rules.other.tabCharGlobal,"    "),C.test(f)||v.test(f)||R.test(f)||_.test(f)||T.test(f))break;if(O.search(this.rules.other.nonSpaceChar)>=g||!f.trim())u+=`
`+O.slice(g);else{if(p||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(d)||v.test(d)||T.test(d))break;u+=`
`+f}!p&&!f.trim()&&(p=!0),h+=M+`
`,e=e.substring(M.length+1),d=O.slice(g)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let b=null,x;this.options.gfm&&(b=this.rules.other.listIsTask.exec(u),b&&(x=b[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!b,checked:x,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(d=>d.type==="space"),u=h.length>0&&h.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let i=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:n,title:s}}}table(e){let r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let i=Vp(r[1]),n=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===n.length){for(let a of n)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(Vp(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let i=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=kn(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=PB(r[2],"()");if(o===-2)return;if(o>-1){let a=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,a).trim(),r[3]=""}}let n=r[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(n);o&&(n=o[1],s=o[3])}else s=r[3]?r[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?n=n.slice(1):n=n.slice(1,-1)),Gp(r,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let n=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=r[n.toLowerCase()];if(!s){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return Gp(i,s,i[0],this.lexer,this.rules)}}emStrong(e,r,i=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!i||this.rules.inline.punctuation.exec(i))){let s=[...n[0]].length-1,o,a,l=s,c=0,h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(n=h.exec(r))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(a=[...o].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...n[0]][0].length,d=e.slice(0,s+n.index+u+a);if(Math.min(s,a)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(i),s=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return n&&s&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:r[0],text:i}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let i,n;return r[2]==="@"?(i=r[1],n="mailto:"+i):(i=r[1],n=i),{type:"link",raw:r[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let i,n;if(r[2]==="@")i=r[0],n="mailto:"+i;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(s!==r[0]);i=r[0],r[1]==="www."?n="http://"+r[0]:n=r[0]}return{type:"link",raw:r[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let i=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:i}}}},gr=class jc{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||fi,this.options.tokenizer=this.options.tokenizer||new Ca,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:ce,block:Es.normal,inline:Sn.normal};this.options.pedantic?(r.block=Es.pedantic,r.inline=Sn.pedantic):this.options.gfm&&(r.block=Es.gfm,this.options.breaks?r.inline=Sn.breaks:r.inline=Sn.gfm),this.tokenizer.rules=r}static get rules(){return{block:Es,inline:Sn}}static lex(e,r){return new jc(r).lex(e)}static lexInline(e,r){return new jc(r).inlineTokens(e)}lex(e){e=e.replace(ce.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],i=!1){for(this.options.pedantic&&(e=e.replace(ce.tabCharGlobal,"    ").replace(ce.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let o=r.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){let o=r.at(-1);i&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n),i=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i=e,n=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)a.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,r))?(e=e.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let c=r.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(e,i,o)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),r.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,h=e.slice(1),u;this.options.extensions.startInline.forEach(d=>{u=d.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;let c=r.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return r}},Sa=class{options;parser;constructor(e){this.options=e||fi}space(e){return""}code({text:e,lang:r,escaped:i}){let n=(r||"").match(ce.notSpaceStart)?.[0],s=e.replace(ce.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Ge(n)+'">'+(i?s:Ge(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Ge(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:r}){return`<h${r}>${this.parser.parseInline(e)}</h${r}>
`}hr(e){return`<hr>
`}list(e){let r=e.ordered,i=e.start,n="";for(let a=0;a<e.items.length;a++){let l=e.items[a];n+=this.listitem(l)}let s=r?"ol":"ul",o=r&&i!==1?' start="'+i+'"':"";return"<"+s+o+`>
`+n+"</"+s+`>
`}listitem(e){let r="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Ge(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):r+=i+" "}return r+=this.parser.parse(e.tokens,!!e.loose),`<li>${r}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let r="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);r+=this.tablerow({text:i});let n="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let r=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+r+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ge(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:r,tokens:i}){let n=this.parser.parseInline(i),s=Up(e);if(s===null)return n;e=s;let o='<a href="'+e+'"';return r&&(o+=' title="'+Ge(r)+'"'),o+=">"+n+"</a>",o}image({href:e,title:r,text:i,tokens:n}){n&&(i=this.parser.parseInline(n,this.parser.textRenderer));let s=Up(e);if(s===null)return Ge(i);e=s;let o=`<img src="${e}" alt="${i}"`;return r&&(o+=` title="${Ge(r)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ge(e.text)}},ou=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},mr=class Dc{options;renderer;textRenderer;constructor(e){this.options=e||fi,this.options.renderer=this.options.renderer||new Sa,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ou}static parse(e,r){return new Dc(r).parse(e)}static parseInline(e,r){return new Dc(r).parseInline(e)}parse(e,r=!0){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],l+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):i+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,r=this.renderer){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}let o=s;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},Ws=class{options;block;constructor(e){this.options=e||fi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?gr.lex:gr.lexInline}provideParser(){return this.block?mr.parse:mr.parseInline}},NB=class{defaults=Qh();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=mr;Renderer=Sa;TextRenderer=ou;Lexer=gr;Tokenizer=Ca;Hooks=Ws;constructor(...e){this.use(...e)}walkTokens(e,r){let i=[];for(let n of e)switch(i=i.concat(r.call(this,n)),n.type){case"table":{let s=n;for(let o of s.header)i=i.concat(this.walkTokens(o.tokens,r));for(let o of s.rows)for(let a of o)i=i.concat(this.walkTokens(a.tokens,r));break}case"list":{let s=n;i=i.concat(this.walkTokens(s.items,r));break}default:{let s=n;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,r))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,r)))}}return i}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{let n={...i};if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=r.renderers[s.name];o?r.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[s.level];o?o.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),n.extensions=r),i.renderer){let s=this.defaults.renderer||new Sa(this.defaults);for(let o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=i.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}n.renderer=s}if(i.tokenizer){let s=this.defaults.tokenizer||new Ca(this.defaults);for(let o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=i.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}n.tokenizer=s}if(i.hooks){let s=this.defaults.hooks||new Ws;for(let o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=i.hooks[a],c=s[a];Ws.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(d=>c.call(s,d));let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}n.hooks=s}if(i.walkTokens){let s=this.defaults.walkTokens,o=i.walkTokens;n.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return gr.lex(e,r??this.defaults)}parser(e,r){return mr.parse(e,r??this.defaults)}parseMarkdown(e){return(r,i)=>{let n={...i},s={...this.defaults,...n},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&n.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let a=s.hooks?s.hooks.provideLexer():e?gr.lex:gr.lexInline,l=s.hooks?s.hooks.provideParser():e?mr.parse:mr.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(c=>a(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(o);try{s.hooks&&(r=s.hooks.preprocess(r));let c=a(r,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let h=l(c,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(c){return o(c)}}}onError(e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+Ge(i.message+"",!0)+"</pre>";return r?Promise.resolve(n):n}if(r)return Promise.reject(i);throw i}}},oi=new NB;function St(t,e){return oi.parse(t,e)}St.options=St.setOptions=function(t){return oi.setOptions(t),St.defaults=oi.defaults,db(St.defaults),St};St.getDefaults=Qh;St.defaults=fi;St.use=function(...t){return oi.use(...t),St.defaults=oi.defaults,db(St.defaults),St};St.walkTokens=function(t,e){return oi.walkTokens(t,e)};St.parseInline=oi.parseInline;St.Parser=mr;St.parser=mr.parse;St.Renderer=Sa;St.TextRenderer=ou;St.Lexer=gr;St.lexer=gr.lex;St.Tokenizer=Ca;St.Hooks=Ws;St.parse=St;St.options;St.setOptions;St.use;St.walkTokens;St.parseInline;mr.parse;gr.lex;function Cb(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Array.from(typeof t=="string"?[t]:t);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var n=i.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,d;return(d=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0})):a},[]);if(n.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");i=i.map(function(a){return a.replace(s,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(d,f){return f===0?d:""+h+d}).join(`
`)),o+=u+i[l+1]}),o}var jB={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},qc=new Map,Sb=new Map,DB=m(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(G.debug("Registering icon pack:",e.name),"loader"in e)Sb.set(e.name,e.loader);else if("icons"in e)qc.set(e.name,e.icons);else throw G.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),kb=m(async(t,e)=>{const r=qL(t,!0,e!==void 0);if(!r)throw new Error(`Invalid icon name: ${t}`);const i=r.prefix||e;if(!i)throw new Error(`Icon name must contain a prefix: ${t}`);let n=qc.get(i);if(!n){const o=Sb.get(i);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{n={...await o(),prefix:i},qc.set(i,n)}catch(a){throw G.error(a),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=WL(n,r.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),qB=m(async t=>{try{return await kb(t),!0}catch{return!1}},"isIconAvailable"),fs=m(async(t,e,r)=>{let i;try{i=await kb(t,e?.fallbackPrefix)}catch(o){G.error(o),i=jB}const n=KL(i,e),s=rB(eB(n.body),{...n.attributes,...r});return Ae(s,ee())},"getIconSVG");function Tb(t,{markdownAutoWrap:e}){const i=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),n=Cb(i);return e===!1?n.replace(/ /g,"&nbsp;"):n}m(Tb,"preprocessMarkdown");function Eb(t,e={}){const r=Tb(t,e),i=St.lexer(r),n=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,n.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&n[s].push({content:d,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&n[s].push({content:a.text,type:"normal"})}return m(o,"processNode"),i.forEach(a=>{a.type==="paragraph"?a.tokens?.forEach(l=>{o(l)}):a.type==="html"?n[s].push({content:a.text,type:"normal"}):n[s].push({content:a.raw,type:"normal"})}),n}m(Eb,"markdownToLines");function Ab(t,{markdownAutoWrap:e}={}){const r=St.lexer(t);function i(n){return n.type==="text"?e===!1?n.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):n.text.replace(/\n */g,"<br/>"):n.type==="strong"?`<strong>${n.tokens?.map(i).join("")}</strong>`:n.type==="em"?`<em>${n.tokens?.map(i).join("")}</em>`:n.type==="paragraph"?`<p>${n.tokens?.map(i).join("")}</p>`:n.type==="space"?"":n.type==="html"?`${n.text}`:n.type==="escape"?n.text:(G.warn(`Unsupported markdown: ${n.type}`),n.raw)}return m(i,"output"),r.map(i).join("")}m(Ab,"markdownToHTML");function Lb(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}m(Lb,"splitTextToChars");function Bb(t,e){const r=Lb(e.content);return lu(t,[],r,e.type)}m(Bb,"splitWordToFitWidth");function lu(t,e,r,i){if(r.length===0)return[{content:e.join(""),type:i},{content:"",type:i}];const[n,...s]=r,o=[...e,n];return t([{content:o.join(""),type:i}])?lu(t,o,s,i):(e.length===0&&n&&(e.push(n),r.shift()),[{content:e.join(""),type:i},{content:r.join(""),type:i}])}m(lu,"splitWordToFitWidthRecursion");function Rb(t,e){if(t.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return ka(t,e)}m(Rb,"splitLineToFitWidth");function ka(t,e,r=[],i=[]){if(t.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let n="";t[0].content===" "&&(n=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...i];if(n!==""&&o.push({content:n,type:"normal"}),o.push(s),e(o))return ka(t,e,r,o);if(i.length>0)r.push(i),t.unshift(s);else if(s.content){const[a,l]=Bb(e,s);r.push([a]),l.content&&t.unshift(l)}return ka(t,e,r)}m(ka,"splitLineToFitWidthRecursion");function Hc(t,e){e&&t.attr("style",e)}m(Hc,"applyStyle");async function Mb(t,e,r,i,n=!1,s=ee()){const o=t.append("foreignObject");o.attr("width",`${10*r}px`),o.attr("height",`${10*r}px`);const a=o.append("xhtml:div"),l=Di(e.label)?await yh(e.label.replace(Xi.lineBreakRegex,`
`),s):Ae(e.label,s),c=e.isNode?"nodeLabel":"edgeLabel",h=a.append("span");h.html(l),Hc(h,e.labelStyle),h.attr("class",`${c} ${i}`),Hc(a,e.labelStyle),a.style("display","table-cell"),a.style("white-space","nowrap"),a.style("line-height","1.5"),a.style("max-width",r+"px"),a.style("text-align","center"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&a.attr("class","labelBkg");let u=a.node().getBoundingClientRect();return u.width===r&&(a.style("display","table"),a.style("white-space","break-spaces"),a.style("width",r+"px"),u=a.node().getBoundingClientRect()),o.node()}m(Mb,"addHtmlSpan");function ao(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}m(ao,"createTspan");function $b(t,e,r){const i=t.append("text"),n=ao(i,1,e);oo(n,r);const s=n.node().getComputedTextLength();return i.remove(),s}m($b,"computeWidthOfText");function HB(t,e,r){const i=t.append("text"),n=ao(i,1,e);oo(n,[{content:r,type:"normal"}]);const s=n.node()?.getBoundingClientRect();return s&&i.remove(),s}m(HB,"computeDimensionOfText");function Ib(t,e,r,i=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=m(d=>$b(s,1.1,d)<=t,"checkWidth"),u=h(c)?[c]:Rb(c,h);for(const d of u){const f=ao(a,l,1.1);oo(f,d),l++}}if(i){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}m(Ib,"createFormattedText");function oo(t,e){t.text(""),e.forEach((r,i)=>{const n=t.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?n.text(r.content):n.text(" "+r.content)})}m(oo,"updateTextContentAndStyles");async function Ob(t,e={}){const r=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(n,s,o)=>(r.push((async()=>{const a=`${s}:${o}`;return await qB(a)?await fs(a,void 0,{class:"label-icon"}):`<i class='${Ae(n,e).replace(":"," ")}'></i>`})()),n));const i=await Promise.all(r);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>i.shift()??"")}m(Ob,"replaceIconSubstring");var Or=m(async(t,e="",{style:r="",isTitle:i=!1,classes:n="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(G.debug("XYZ createText",e,r,i,n,s,o,"addSvgBackground: ",l),s){const h=Ab(e,c),u=await Ob(di(h),c),d=e.replace(/\\\\/g,"\\"),f={isNode:o,label:Di(e)?d:u,labelStyle:r.replace("fill:","color:")};return await Mb(t,f,a,n,l,c)}else{const h=e.replace(/<br\s*\/?>/g,"<br/>"),u=Eb(h.replace("<br>","<br/>"),c),d=Ib(a,t,u,e?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");wt(d).attr("style",f)}else{const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");wt(d).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");wt(d).select("text").attr("style",p)}return d}},"createText");function Kl(t,e,r){if(t&&t.length){const[i,n]=e,s=Math.PI/180*r,o=Math.cos(s),a=Math.sin(s);for(const l of t){const[c,h]=l;l[0]=(c-i)*o-(h-n)*a+i,l[1]=(c-i)*a+(h-n)*o+n}}}function zB(t,e){return t[0]===e[0]&&t[1]===e[1]}function WB(t,e,r,i=1){const n=r,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(n)for(const c of o)Kl(c,a,n);const l=function(c,h,u){const d=[];for(const _ of c){const T=[..._];zB(T[0],T[T.length-1])||T.push([T[0][0],T[0][1]]),T.length>2&&d.push(T)}const f=[];h=Math.max(h,.1);const p=[];for(const _ of d)for(let T=0;T<_.length-1;T++){const C=_[T],v=_[T+1];if(C[1]!==v[1]){const R=Math.min(C[1],v[1]);p.push({ymin:R,ymax:Math.max(C[1],v[1]),x:R===C[1]?C[0]:v[0],islope:(v[0]-C[0])/(v[1]-C[1])})}}if(p.sort((_,T)=>_.ymin<T.ymin?-1:_.ymin>T.ymin?1:_.x<T.x?-1:_.x>T.x?1:_.ymax===T.ymax?0:(_.ymax-T.ymax)/Math.abs(_.ymax-T.ymax)),!p.length)return f;let g=[],b=p[0].ymin,x=0;for(;g.length||p.length;){if(p.length){let _=-1;for(let T=0;T<p.length&&!(p[T].ymin>b);T++)_=T;p.splice(0,_+1).forEach(T=>{g.push({s:b,edge:T})})}if(g=g.filter(_=>!(_.edge.ymax<=b)),g.sort((_,T)=>_.edge.x===T.edge.x?0:(_.edge.x-T.edge.x)/Math.abs(_.edge.x-T.edge.x)),(u!==1||x%h==0)&&g.length>1)for(let _=0;_<g.length;_+=2){const T=_+1;if(T>=g.length)break;const C=g[_].edge,v=g[T].edge;f.push([[Math.round(C.x),b],[Math.round(v.x),b]])}b+=u,g.forEach(_=>{_.edge.x=_.edge.x+u*_.edge.islope}),x++}return f}(o,s,i);if(n){for(const c of o)Kl(c,a,-n);(function(c,h,u){const d=[];c.forEach(f=>d.push(...f)),Kl(d,h,u)})(l,a,-n)}return l}function ps(t,e){var r;const i=e.hachureAngle+90;let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let s=1;return e.roughness>=1&&(((r=e.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=n),WB(t,n,i,s||1)}class cu{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){const i=ps(e,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(e,r){const i=[];for(const n of e)i.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],r));return i}}function lo(t){const e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}class UB extends cu{fillPolygons(e,r){let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);const n=ps(e,Object.assign({},r,{hachureGap:i})),s=Math.PI/180*r.hachureAngle,o=[],a=.5*i*Math.cos(s),l=.5*i*Math.sin(s);for(const[c,h]of n)lo([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class VB extends cu{fillPolygons(e,r){const i=this._fillPolygons(e,r),n=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(e,n);return i.ops=i.ops.concat(s.ops),i}}class GB{constructor(e){this.helper=e}fillPolygons(e,r){const i=ps(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(i,r)}dotsOnLines(e,r){const i=[];let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const o=n/4;for(const a of e){const l=lo(a),c=l/n,h=Math.ceil(c)-1,u=l-h*n,d=(a[0][0]+a[1][0])/2-n/4,f=Math.min(a[0][1],a[1][1]);for(let p=0;p<h;p++){const g=f+u+p*n,b=d-o+2*Math.random()*o,x=g-o+2*Math.random()*o,_=this.helper.ellipse(b,x,s,s,r);i.push(..._.ops)}}return{type:"fillSketch",ops:i}}}class YB{constructor(e){this.helper=e}fillPolygons(e,r){const i=ps(e,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(e,r){const i=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,n=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return e.forEach(o=>{const a=lo(o),l=Math.floor(a/(i+n)),c=(a+n-l*(i+n))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const d=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let f=0;f<l;f++){const p=f*(i+n),g=p+i,b=[h[0]+p*Math.cos(d)+c*Math.cos(d),h[1]+p*Math.sin(d)+c*Math.sin(d)],x=[h[0]+g*Math.cos(d)+c*Math.cos(d),h[1]+g*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(b[0],b[1],x[0],x[1],r))}}),s}}class XB{constructor(e){this.helper=e}fillPolygons(e,r){const i=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,n=r.zigzagOffset<0?i:r.zigzagOffset,s=ps(e,r=Object.assign({},r,{hachureGap:i+n}));return{type:"fillSketch",ops:this.zigzagLines(s,n,r)}}zigzagLines(e,r,i){const n=[];return e.forEach(s=>{const o=lo(s),a=Math.round(o/(2*r));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const d=2*u*r,f=2*(u+1)*r,p=Math.sqrt(2*Math.pow(r,2)),g=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],b=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],x=[g[0]+p*Math.cos(h+Math.PI/4),g[1]+p*Math.sin(h+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],x[0],x[1],i),...this.helper.doubleLineOps(x[0],x[1],b[0],b[1],i))}}),n}}const pe={};class JB{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const KB=0,Zl=1,Yp=2,As={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function Ql(t,e){return t.type===e}function hu(t){const e=[],r=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:KB,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:Zl,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:Yp,text:""},a}(t);let i="BOD",n=0,s=r[n];for(;!Ql(s,Yp);){let o=0;const a=[];if(i==="BOD"){if(s.text!=="M"&&s.text!=="m")return hu("M0,0"+t);n++,o=As[s.text],i=s.text}else Ql(s,Zl)?o=As[i]:(n++,o=As[s.text],i=s.text);if(!(n+o<r.length))throw new Error("Path data ended short");for(let l=n;l<n+o;l++){const c=r[l];if(!Ql(c,Zl))throw new Error("Param not a number: "+i+","+c.text);a[a.length]=+c.text}if(typeof As[i]!="number")throw new Error("Bad segment: "+i);{const l={key:i,data:a};e.push(l),n+=o,s=r[n],i==="M"&&(i="L"),i==="m"&&(i="l")}}return e}function Pb(t){let e=0,r=0,i=0,n=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,r]=a,[i,n]=a;break;case"m":e+=a[0],r+=a[1],s.push({key:"M",data:[e,r]}),i=e,n=r;break;case"L":s.push({key:"L",data:[...a]}),[e,r]=a;break;case"l":e+=a[0],r+=a[1],s.push({key:"L",data:[e,r]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],r=a[5];break;case"c":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"C",data:l}),e=l[4],r=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],r=a[3];break;case"q":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"Q",data:l}),e=l[2],r=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],r=a[6];break;case"a":e+=a[5],r+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,r]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],r=a[3];break;case"s":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"S",data:l}),e=l[2],r=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],r=a[1];break;case"t":e+=a[0],r+=a[1],s.push({key:"T",data:[e,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=i,r=n}return s}function Fb(t){const e=[];let r="",i=0,n=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[i,n]=h,[s,o]=h;break;case"C":e.push({key:"C",data:[...h]}),i=h[4],n=h[5],a=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[i,n]=h;break;case"H":i=h[0],e.push({key:"L",data:[i,n]});break;case"V":n=h[0],e.push({key:"L",data:[i,n]});break;case"S":{let u=0,d=0;r==="C"||r==="S"?(u=i+(i-a),d=n+(n-l)):(u=i,d=n),e.push({key:"C",data:[u,d,...h]}),a=h[0],l=h[1],i=h[2],n=h[3];break}case"T":{const[u,d]=h;let f=0,p=0;r==="Q"||r==="T"?(f=i+(i-a),p=n+(n-l)):(f=i,p=n);const g=i+2*(f-i)/3,b=n+2*(p-n)/3,x=u+2*(f-u)/3,_=d+2*(p-d)/3;e.push({key:"C",data:[g,b,x,_,u,d]}),a=f,l=p,i=u,n=d;break}case"Q":{const[u,d,f,p]=h,g=i+2*(u-i)/3,b=n+2*(d-n)/3,x=f+2*(u-f)/3,_=p+2*(d-p)/3;e.push({key:"C",data:[g,b,x,_,f,p]}),a=u,l=d,i=f,n=p;break}case"A":{const u=Math.abs(h[0]),d=Math.abs(h[1]),f=h[2],p=h[3],g=h[4],b=h[5],x=h[6];u===0||d===0?(e.push({key:"C",data:[i,n,b,x,b,x]}),i=b,n=x):(i!==b||n!==x)&&(Nb(i,n,b,x,u,d,f,p,g).forEach(function(_){e.push({key:"C",data:_})}),i=b,n=x);break}case"Z":e.push({key:"Z",data:[]}),i=s,n=o}r=c}return e}function Tn(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function Nb(t,e,r,i,n,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let d=[],f=0,p=0,g=0,b=0;if(c)[f,p,g,b]=c;else{[t,e]=Tn(t,e,-h),[r,i]=Tn(r,i,-h);const I=(t-r)/2,k=(e-i)/2;let S=I*I/(n*n)+k*k/(s*s);S>1&&(S=Math.sqrt(S),n*=S,s*=S);const L=n*n,N=s*s,j=L*N-L*k*k-N*I*I,B=L*k*k+N*I*I,A=(a===l?-1:1)*Math.sqrt(Math.abs(j/B));g=A*n*k/s+(t+r)/2,b=A*-s*I/n+(e+i)/2,f=Math.asin(parseFloat(((e-b)/s).toFixed(9))),p=Math.asin(parseFloat(((i-b)/s).toFixed(9))),t<g&&(f=Math.PI-f),r<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let x=p-f;if(Math.abs(x)>120*Math.PI/180){const I=p,k=r,S=i;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=Nb(r=g+n*Math.cos(p),i=b+s*Math.sin(p),k,S,n,s,o,0,l,[p,I,g,b])}x=p-f;const _=Math.cos(f),T=Math.sin(f),C=Math.cos(p),v=Math.sin(p),R=Math.tan(x/4),M=4/3*n*R,O=4/3*s*R,P=[t,e],w=[t+M*T,e-O*_],E=[r+M*v,i-O*C],z=[r,i];if(w[0]=2*P[0]-w[0],w[1]=2*P[1]-w[1],c)return[w,E,z].concat(d);{d=[w,E,z].concat(d);const I=[];for(let k=0;k<d.length;k+=3){const S=Tn(d[k][0],d[k][1],h),L=Tn(d[k+1][0],d[k+1][1],h),N=Tn(d[k+2][0],d[k+2][1],h);I.push([S[0],S[1],L[0],L[1],N[0],N[1]])}return I}}const ZB={randOffset:function(t,e){return dt(t,e)},randOffsetWithRange:function(t,e,r){return Ta(t,e,r)},ellipse:function(t,e,r,i,n){const s=Db(r,i,n);return zc(t,e,n,s).opset},doubleLineOps:function(t,e,r,i,n){return Rr(t,e,r,i,n,!0)}};function jb(t,e,r,i,n){return{type:"path",ops:Rr(t,e,r,i,n)}}function Us(t,e,r){const i=(t||[]).length;if(i>2){const n=[];for(let s=0;s<i-1;s++)n.push(...Rr(t[s][0],t[s][1],t[s+1][0],t[s+1][1],r));return e&&n.push(...Rr(t[i-1][0],t[i-1][1],t[0][0],t[0][1],r)),{type:"path",ops:n}}return i===2?jb(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function QB(t,e,r,i,n){return function(s,o){return Us(s,!0,o)}([[t,e],[t+r,e],[t+r,e+i],[t,e+i]],n)}function Xp(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,i=Ls(r[0],1*(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:Ls(r[0],1.5*(1+.22*e.roughness),Zp(e));for(let s=1;s<r.length;s++){const o=r[s];if(o.length){const a=Ls(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Ls(o,1.5*(1+.22*e.roughness),Zp(e));for(const c of a)c.op!=="move"&&i.push(c);for(const c of l)c.op!=="move"&&n.push(c)}}return{type:"path",ops:i.concat(n)}}return{type:"path",ops:[]}}function Db(t,e,r){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),s=2*Math.PI/n;let o=Math.abs(t/2),a=Math.abs(e/2);const l=1-r.curveFitting;return o+=dt(o*l,r),a+=dt(a*l,r),{increment:s,rx:o,ry:a}}function zc(t,e,r,i){const[n,s]=Qp(i.increment,t,e,i.rx,i.ry,1,i.increment*Ta(.1,Ta(.4,1,r),r),r);let o=Ea(n,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[a]=Qp(i.increment,t,e,i.rx,i.ry,1.5,0,r),l=Ea(a,null,r);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Jp(t,e,r,i,n,s,o,a,l){const c=t,h=e;let u=Math.abs(r/2),d=Math.abs(i/2);u+=dt(.01*u,l),d+=dt(.01*d,l);let f=n,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,b=Math.min(g/2,(p-f)/2),x=tg(b,c,h,u,d,f,p,1,l);if(!l.disableMultiStroke){const _=tg(b,c,h,u,d,f,p,1.5,l);x.push(..._)}return o&&(a?x.push(...Rr(c,h,c+u*Math.cos(f),h+d*Math.sin(f),l),...Rr(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l)):x.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(f),h+d*Math.sin(f)]})),{type:"path",ops:x}}function Kp(t,e){const r=Fb(Pb(hu(t))),i=[];let n=[0,0],s=[0,0];for(const{key:o,data:a}of r)switch(o){case"M":s=[a[0],a[1]],n=[a[0],a[1]];break;case"L":i.push(...Rr(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,d,f]=a;i.push(...tR(l,c,h,u,d,f,s,e)),s=[d,f];break}case"Z":i.push(...Rr(s[0],s[1],n[0],n[1],e)),s=[n[0],n[1]]}return{type:"path",ops:i}}function tc(t,e){const r=[];for(const i of t)if(i.length){const n=e.maxRandomnessOffset||0,s=i.length;if(s>2){r.push({op:"move",data:[i[0][0]+dt(n,e),i[0][1]+dt(n,e)]});for(let o=1;o<s;o++)r.push({op:"lineTo",data:[i[o][0]+dt(n,e),i[o][1]+dt(n,e)]})}}return{type:"fillPath",ops:r}}function wi(t,e){return function(r,i){let n=r.fillStyle||"hachure";if(!pe[n])switch(n){case"zigzag":pe[n]||(pe[n]=new UB(i));break;case"cross-hatch":pe[n]||(pe[n]=new VB(i));break;case"dots":pe[n]||(pe[n]=new GB(i));break;case"dashed":pe[n]||(pe[n]=new YB(i));break;case"zigzag-line":pe[n]||(pe[n]=new XB(i));break;default:n="hachure",pe[n]||(pe[n]=new cu(i))}return pe[n]}(e,ZB).fillPolygons(t,e)}function Zp(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function qb(t){return t.randomizer||(t.randomizer=new JB(t.seed||0)),t.randomizer.next()}function Ta(t,e,r,i=1){return r.roughness*i*(qb(r)*(e-t)+t)}function dt(t,e,r=1){return Ta(-t,t,e,r)}function Rr(t,e,r,i,n,s=!1){const o=s?n.disableMultiStrokeFill:n.disableMultiStroke,a=Wc(t,e,r,i,n,!0,!1);if(o)return a;const l=Wc(t,e,r,i,n,!0,!0);return a.concat(l)}function Wc(t,e,r,i,n,s,o){const a=Math.pow(t-r,2)+Math.pow(e-i,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,d=.2+.2*qb(n);let f=n.bowing*n.maxRandomnessOffset*(i-e)/200,p=n.bowing*n.maxRandomnessOffset*(t-r)/200;f=dt(f,n,c),p=dt(p,n,c);const g=[],b=()=>dt(u,n,c),x=()=>dt(h,n,c),_=n.preserveVertices;return o?g.push({op:"move",data:[t+(_?0:b()),e+(_?0:b())]}):g.push({op:"move",data:[t+(_?0:dt(h,n,c)),e+(_?0:dt(h,n,c))]}),o?g.push({op:"bcurveTo",data:[f+t+(r-t)*d+b(),p+e+(i-e)*d+b(),f+t+2*(r-t)*d+b(),p+e+2*(i-e)*d+b(),r+(_?0:b()),i+(_?0:b())]}):g.push({op:"bcurveTo",data:[f+t+(r-t)*d+x(),p+e+(i-e)*d+x(),f+t+2*(r-t)*d+x(),p+e+2*(i-e)*d+x(),r+(_?0:x()),i+(_?0:x())]}),g}function Ls(t,e,r){if(!t.length)return[];const i=[];i.push([t[0][0]+dt(e,r),t[0][1]+dt(e,r)]),i.push([t[0][0]+dt(e,r),t[0][1]+dt(e,r)]);for(let n=1;n<t.length;n++)i.push([t[n][0]+dt(e,r),t[n][1]+dt(e,r)]),n===t.length-1&&i.push([t[n][0]+dt(e,r),t[n][1]+dt(e,r)]);return Ea(i,null,r)}function Ea(t,e,r){const i=t.length,n=[];if(i>3){const s=[],o=1-r.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<i;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],n.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):i===2&&n.push(...Wc(t[0][0],t[0][1],t[1][0],t[1][1],r,!0,!0));return n}function Qp(t,e,r,i,n,s,o,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+i*Math.cos(-t),r+n*Math.sin(-t)]);for(let h=0;h<=2*Math.PI;h+=t){const u=[e+i*Math.cos(h),r+n*Math.sin(h)];l.push(u),c.push(u)}c.push([e+i*Math.cos(0),r+n*Math.sin(0)]),c.push([e+i*Math.cos(t),r+n*Math.sin(t)])}else{const h=dt(.5,a)-Math.PI/2;c.push([dt(s,a)+e+.9*i*Math.cos(h-t),dt(s,a)+r+.9*n*Math.sin(h-t)]);const u=2*Math.PI+h-.01;for(let d=h;d<u;d+=t){const f=[dt(s,a)+e+i*Math.cos(d),dt(s,a)+r+n*Math.sin(d)];l.push(f),c.push(f)}c.push([dt(s,a)+e+i*Math.cos(h+2*Math.PI+.5*o),dt(s,a)+r+n*Math.sin(h+2*Math.PI+.5*o)]),c.push([dt(s,a)+e+.98*i*Math.cos(h+o),dt(s,a)+r+.98*n*Math.sin(h+o)]),c.push([dt(s,a)+e+.9*i*Math.cos(h+.5*o),dt(s,a)+r+.9*n*Math.sin(h+.5*o)])}return[c,l]}function tg(t,e,r,i,n,s,o,a,l){const c=s+dt(.1,l),h=[];h.push([dt(a,l)+e+.9*i*Math.cos(c-t),dt(a,l)+r+.9*n*Math.sin(c-t)]);for(let u=c;u<=o;u+=t)h.push([dt(a,l)+e+i*Math.cos(u),dt(a,l)+r+n*Math.sin(u)]);return h.push([e+i*Math.cos(o),r+n*Math.sin(o)]),h.push([e+i*Math.cos(o),r+n*Math.sin(o)]),Ea(h,null,l)}function tR(t,e,r,i,n,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let f=0;f<u;f++)f===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:dt(c[0],a)),o[1]+(d?0:dt(c[0],a))]}),h=d?[n,s]:[n+dt(c[f],a),s+dt(c[f],a)],l.push({op:"bcurveTo",data:[t+dt(c[f],a),e+dt(c[f],a),r+dt(c[f],a),i+dt(c[f],a),h[0],h[1]]});return l}function En(t){return[...t]}function eg(t,e=0){const r=t.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(En(t[0]),En(t[1]),En(t[2]),En(t[2]));else{const n=[];n.push(t[0],t[0]);for(let a=1;a<t.length;a++)n.push(t[a]),a===t.length-1&&n.push(t[a]);const s=[],o=1-e;i.push(En(n[0]));for(let a=1;a+2<n.length;a++){const l=n[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*n[a+1][0]-o*n[a-1][0])/6,l[1]+(o*n[a+1][1]-o*n[a-1][1])/6],s[2]=[n[a+1][0]+(o*n[a][0]-o*n[a+2][0])/6,n[a+1][1]+(o*n[a][1]-o*n[a+2][1])/6],s[3]=[n[a+1][0],n[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Vs(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function eR(t,e,r){const i=Vs(e,r);if(i===0)return Vs(t,e);let n=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/i;return n=Math.max(0,Math.min(1,n)),Vs(t,Gr(e,r,n))}function Gr(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function Uc(t,e,r,i){const n=i||[];if(function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],d=a[l+3];let f=3*h[0]-2*c[0]-d[0];f*=f;let p=3*h[1]-2*c[1]-d[1];p*=p;let g=3*u[0]-2*d[0]-c[0];g*=g;let b=3*u[1]-2*d[1]-c[1];return b*=b,f<g&&(f=g),p<b&&(p=b),f+p}(t,e)<r){const a=t[e+0];n.length?(s=n[n.length-1],o=a,Math.sqrt(Vs(s,o))>1&&n.push(a)):n.push(a),n.push(t[e+3])}else{const l=t[e+0],c=t[e+1],h=t[e+2],u=t[e+3],d=Gr(l,c,.5),f=Gr(c,h,.5),p=Gr(h,u,.5),g=Gr(d,f,.5),b=Gr(f,p,.5),x=Gr(g,b,.5);Uc([l,d,g,x],0,r,n),Uc([x,b,p,u],0,r,n)}var s,o;return n}function rR(t,e){return Aa(t,0,t.length,e)}function Aa(t,e,r,i,n){const s=n||[],o=t[e],a=t[r-1];let l=0,c=1;for(let h=e+1;h<r-1;++h){const u=eR(t[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>i?(Aa(t,e,c+1,i,s),Aa(t,c,r,i,s)):(s.length||s.push(o),s.push(a)),s}function ec(t,e=.15,r){const i=[],n=(t.length-1)/3;for(let s=0;s<n;s++)Uc(t,3*s,e,i);return r&&r>0?Aa(i,0,i.length,r):i}const ve="none";class La{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,i){return{shape:e,sets:r||[],options:i||this.defaultOptions}}line(e,r,i,n,s){const o=this._o(s);return this._d("line",[jb(e,r,i,n,o)],o)}rectangle(e,r,i,n,s){const o=this._o(s),a=[],l=QB(e,r,i,n,o);if(o.fill){const c=[[e,r],[e+i,r],[e+i,r+n],[e,r+n]];o.fillStyle==="solid"?a.push(tc([c],o)):a.push(wi([c],o))}return o.stroke!==ve&&a.push(l),this._d("rectangle",a,o)}ellipse(e,r,i,n,s){const o=this._o(s),a=[],l=Db(i,n,o),c=zc(e,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=zc(e,r,o,l).opset;h.type="fillPath",a.push(h)}else a.push(wi([c.estimatedPoints],o));return o.stroke!==ve&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,r,i,n){const s=this.ellipse(e,r,i,i,n);return s.shape="circle",s}linearPath(e,r){const i=this._o(r);return this._d("linearPath",[Us(e,!1,i)],i)}arc(e,r,i,n,s,o,a=!1,l){const c=this._o(l),h=[],u=Jp(e,r,i,n,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const f=Jp(e,r,i,n,s,o,!0,!1,d);f.type="fillPath",h.push(f)}else h.push(function(d,f,p,g,b,x,_){const T=d,C=f;let v=Math.abs(p/2),R=Math.abs(g/2);v+=dt(.01*v,_),R+=dt(.01*R,_);let M=b,O=x;for(;M<0;)M+=2*Math.PI,O+=2*Math.PI;O-M>2*Math.PI&&(M=0,O=2*Math.PI);const P=(O-M)/_.curveStepCount,w=[];for(let E=M;E<=O;E+=P)w.push([T+v*Math.cos(E),C+R*Math.sin(E)]);return w.push([T+v*Math.cos(O),C+R*Math.sin(O)]),w.push([T,C]),wi([w],_)}(e,r,i,n,s,o,c));return c.stroke!==ve&&h.push(u),this._d("arc",h,c)}curve(e,r){const i=this._o(r),n=[],s=Xp(e,i);if(i.fill&&i.fill!==ve)if(i.fillStyle==="solid"){const o=Xp(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...ec(eg([c[0],c[0],c[1],c[2]]),10,(1+i.roughness)/2)):o.push(...ec(eg(c),10,(1+i.roughness)/2))}o.length&&n.push(wi([o],i))}return i.stroke!==ve&&n.push(s),this._d("curve",n,i)}polygon(e,r){const i=this._o(r),n=[],s=Us(e,!0,i);return i.fill&&(i.fillStyle==="solid"?n.push(tc([e],i)):n.push(wi([e],i))),i.stroke!==ve&&n.push(s),this._d("polygon",n,i)}path(e,r){const i=this._o(r),n=[];if(!e)return this._d("path",n,i);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==ve,o=i.stroke!==ve,a=!!(i.simplification&&i.simplification<1),l=function(h,u,d){const f=Fb(Pb(hu(h))),p=[];let g=[],b=[0,0],x=[];const _=()=>{x.length>=4&&g.push(...ec(x,u)),x=[]},T=()=>{_(),g.length&&(p.push(g),g=[])};for(const{key:v,data:R}of f)switch(v){case"M":T(),b=[R[0],R[1]],g.push(b);break;case"L":_(),g.push([R[0],R[1]]);break;case"C":if(!x.length){const M=g.length?g[g.length-1]:b;x.push([M[0],M[1]])}x.push([R[0],R[1]]),x.push([R[2],R[3]]),x.push([R[4],R[5]]);break;case"Z":_(),g.push([b[0],b[1]])}if(T(),!d)return p;const C=[];for(const v of p){const R=rR(v,d);R.length&&C.push(R)}return C}(e,1,a?4-4*(i.simplification||1):(1+i.roughness)/2),c=Kp(e,i);if(s)if(i.fillStyle==="solid")if(l.length===1){const h=Kp(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else n.push(tc(l,i));else n.push(wi(l,i));return o&&(a?l.forEach(h=>{n.push(Us(h,!1,i))}):n.push(c)),this._d("path",n,i)}opsToPath(e,r){let i="";for(const n of e.ops){const s=typeof r=="number"&&r>=0?n.data.map(o=>+o.toFixed(r)):n.data;switch(n.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `}}return i.trim()}toPaths(e){const r=e.sets||[],i=e.options||this.defaultOptions,n=[];for(const s of r){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:ve};break;case"fillPath":o={d:this.opsToPath(s),stroke:ve,strokeWidth:0,fill:i.fill||ve};break;case"fillSketch":o=this.fillSketch(s,i)}o&&n.push(o)}return n}fillSketch(e,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||ve,strokeWidth:i,fill:ve}}_mergedShape(e){return e.filter((r,i)=>i===0||r.op!=="move")}}class iR{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new La(r)}draw(e){const r=e.sets||[],i=e.options||this.getDefaultOptions(),n=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":n.save(),n.strokeStyle=i.stroke==="none"?"transparent":i.stroke,n.lineWidth=i.strokeWidth,i.strokeLineDash&&n.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(n.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(n,o,s),n.restore();break;case"fillPath":{n.save(),n.fillStyle=i.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,o,s,a),n.restore();break}case"fillSketch":this.fillSketch(n,o,i)}}fillSketch(e,r,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2),e.save(),i.fillLineDash&&e.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(e.lineDashOffset=i.fillLineDashOffset),e.strokeStyle=i.fill||"",e.lineWidth=n,this._drawToContext(e,r,i.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,i,n="nonzero"){e.beginPath();for(const s of r.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}r.type==="fillPath"?e.fill(n):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,i,n,s){const o=this.gen.line(e,r,i,n,s);return this.draw(o),o}rectangle(e,r,i,n,s){const o=this.gen.rectangle(e,r,i,n,s);return this.draw(o),o}ellipse(e,r,i,n,s){const o=this.gen.ellipse(e,r,i,n,s);return this.draw(o),o}circle(e,r,i,n){const s=this.gen.circle(e,r,i,n);return this.draw(s),s}linearPath(e,r){const i=this.gen.linearPath(e,r);return this.draw(i),i}polygon(e,r){const i=this.gen.polygon(e,r);return this.draw(i),i}arc(e,r,i,n,s,o,a=!1,l){const c=this.gen.arc(e,r,i,n,s,o,a,l);return this.draw(c),c}curve(e,r){const i=this.gen.curve(e,r);return this.draw(i),i}path(e,r){const i=this.gen.path(e,r);return this.draw(i),i}}const Bs="http://www.w3.org/2000/svg";class nR{constructor(e,r){this.svg=e,this.gen=new La(r)}draw(e){const r=e.sets||[],i=e.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,s=n.createElementNS(Bs,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of r){let l=null;switch(a.type){case"path":l=n.createElementNS(Bs,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS(Bs,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,a,i)}l&&s.appendChild(l)}return s}fillSketch(e,r,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2);const s=e.createElementNS(Bs,"path");return s.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",n+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,i,n,s){const o=this.gen.line(e,r,i,n,s);return this.draw(o)}rectangle(e,r,i,n,s){const o=this.gen.rectangle(e,r,i,n,s);return this.draw(o)}ellipse(e,r,i,n,s){const o=this.gen.ellipse(e,r,i,n,s);return this.draw(o)}circle(e,r,i,n){const s=this.gen.circle(e,r,i,n);return this.draw(s)}linearPath(e,r){const i=this.gen.linearPath(e,r);return this.draw(i)}polygon(e,r){const i=this.gen.polygon(e,r);return this.draw(i)}arc(e,r,i,n,s,o,a=!1,l){const c=this.gen.arc(e,r,i,n,s,o,a,l);return this.draw(c)}curve(e,r){const i=this.gen.curve(e,r);return this.draw(i)}path(e,r){const i=this.gen.path(e,r);return this.draw(i)}}var rt={canvas:(t,e)=>new iR(t,e),svg:(t,e)=>new nR(t,e),generator:t=>new La(t),newSeed:()=>La.newSeed()},ft=m(async(t,e,r)=>{let i;const n=e.useHtmlLabels||Ht(Ct()?.htmlLabels);r?i=r:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",be(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await Or(o,Ae(di(a),Ct()),{useHtmlLabels:n,width:e.width||Ct().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const h=(e?.padding??0)/2;if(n){const u=l.children[0],d=wt(l),f=u.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(b=>{function x(){if(g.style.display="flex",g.style.flexDirection="column",p){const _=Ct().fontSize?Ct().fontSize:window.getComputedStyle(document.body).fontSize,T=5,[C=Qg.fontSize]=io(_),v=C*T+"px";g.style.minWidth=v,g.style.maxWidth=v}else g.style.width="100%";b(g)}m(x,"setupImage"),setTimeout(()=>{g.complete&&x()}),g.addEventListener("error",x),g.addEventListener("load",x)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return n?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),rc=m(async(t,e,r)=>{const i=r.useHtmlLabels||Ht(Ct()?.flowchart?.htmlLabels),n=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await Or(n,Ae(di(e),Ct()),{useHtmlLabels:i,width:r.width||Ct()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=s.getBBox();const a=r.padding/2;if(Ht(Ct()?.flowchart?.htmlLabels)){const l=s.children[0],c=wt(s);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}return i?n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):n.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:a,label:n}},"insertLabel"),st=m((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height},"updateNodeBounds"),ut=m((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function _t(t){const e=t.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return e.push("Z"),e.join(" ")}m(_t,"createPathFromPoints");function Mr(t,e,r,i,n,s){const o=[],l=r-t,c=i-e,h=l/s,u=2*Math.PI/h,d=e+c/2;for(let f=0;f<=50;f++){const p=f/50,g=t+p*l,b=d+n*Math.sin(u*(g-t));o.push({x:g,y:b})}return o}m(Mr,"generateFullSineWavePoints");function Qn(t,e,r,i,n,s){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(Qn,"generateCirclePoints");var sR=m((t,e)=>{var r=t.x,i=t.y,n=e.x-r,s=e.y-i,o=t.width/2,a=t.height/2,l,c;return Math.abs(s)*o>Math.abs(n)*a?(s<0&&(a=-a),l=s===0?0:a*n/s,c=a):(n<0&&(o=-o),l=o,c=n===0?0:o*s/n),{x:r+l,y:i+c}},"intersectRect"),Qi=sR;function Hb(t,e){e&&t.attr("style",e)}m(Hb,"applyStyle");async function zb(t){const e=wt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),i=Ct();let n=t.label;t.label&&Di(t.label)&&(n=await yh(t.label.replace(Xi.lineBreakRegex,`
`),i));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+n+"</span>";return r.html(Ae(o,i)),Hb(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}m(zb,"addHtmlLabel");var aR=m(async(t,e,r,i)=>{let n=t||"";if(typeof n=="object"&&(n=n[0]),Ht(Ct().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+n);const s={isNode:i,label:di(n).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await zb(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof n=="string"?o=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?o=n:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),Qr=aR,Pr=m((t,e,r,i,n)=>["M",t+n,e,"H",t+r-n,"A",n,n,0,0,1,t+r,e+n,"V",e+i-n,"A",n,n,0,0,1,t+r-n,e+i,"H",t+n,"A",n,n,0,0,1,t,e+i-n,"V",e+n,"A",n,n,0,0,1,t+n,e,"Z"].join(" "),"createRoundedRectPathD"),Wb=m(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const r=Ct(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=at(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Ht(r.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),p=await Or(f,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0});let g=p.getBBox();if(Ht(r.flowchart.htmlLabels)){const M=p.children[0],O=wt(p);g=M.getBoundingClientRect(),O.attr("width",g.width),O.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,_=e.x-b/2,T=e.y-x/2;G.trace("Data ",e,JSON.stringify(e));let C;if(e.look==="handDrawn"){const M=rt.svg(u),O=it(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:n}),P=M.path(Pr(_,T,b,x,0),O);C=u.insert(()=>(G.debug("Rough node insert CXC",P),P),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",_).attr("y",T).attr("width",b).attr("height",x);const{subGraphTitleTopMargin:v}=Bh(r);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),a){const M=f.select("span");M&&M.attr("style",a)}const R=C.node().getBBox();return e.offsetX=0,e.width=R.width,e.height=R.height,e.offsetY=g.height-e.padding/2,e.intersect=function(M){return Qi(e,M)},{cluster:u,labelBBox:g}},"rect"),oR=m((t,e)=>{const r=t.insert("g").attr("class","note-cluster").attr("id",e.id),i=r.insert("rect",":first-child"),n=0*e.padding,s=n/2;i.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");const o=i.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return Qi(e,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),lR=m(async(t,e)=>{const r=Ct(),{themeVariables:i,handDrawnSeed:n}=r,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=i,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const f=u.node().appendChild(await Qr(e.label,e.labelStyle,void 0,!0));let p=f.getBBox();if(Ht(r.flowchart.htmlLabels)){const P=f.children[0],w=wt(f);p=P.getBoundingClientRect(),w.attr("width",p.width),w.attr("height",p.height)}const g=0*e.padding,b=g/2,x=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+g;e.width<=p.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const _=e.height+g,T=e.height+g-p.height-6,C=e.x-x/2,v=e.y-_/2;e.width=x;const R=e.y-e.height/2-b+p.height+2;let M;if(e.look==="handDrawn"){const P=e.cssClasses.includes("statediagram-cluster-alt"),w=rt.svg(c),E=e.rx||e.ry?w.path(Pr(C,v,x,_,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:n}):w.rectangle(C,v,x,_,{seed:n});M=c.insert(()=>E,":first-child");const z=w.rectangle(C,R,x,T,{fill:P?s:o,fillStyle:P?"hachure":"solid",stroke:l,seed:n});M=c.insert(()=>E,":first-child"),d=c.insert(()=>z)}else M=h.insert("rect",":first-child"),M.attr("class","outer").attr("x",C).attr("y",v).attr("width",x).attr("height",_).attr("data-look",e.look),d.attr("class","inner").attr("x",C).attr("y",R).attr("width",x).attr("height",T);u.attr("transform",`translate(${e.x-p.width/2}, ${v+1-(Ht(r.flowchart.htmlLabels)?0:3)})`);const O=M.node().getBBox();return e.height=O.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(P){return Qi(e,P)},{cluster:c,labelBBox:p}},"roundedWithTitle"),cR=m(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const r=Ct(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=at(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Ht(r.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),p=await Or(f,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0,width:e.width});let g=p.getBBox();if(Ht(r.flowchart.htmlLabels)){const M=p.children[0],O=wt(p);g=M.getBoundingClientRect(),O.attr("width",g.width),O.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,_=e.x-b/2,T=e.y-x/2;G.trace("Data ",e,JSON.stringify(e));let C;if(e.look==="handDrawn"){const M=rt.svg(u),O=it(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:n}),P=M.path(Pr(_,T,b,x,e.rx),O);C=u.insert(()=>(G.debug("Rough node insert CXC",P),P),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",_).attr("y",T).attr("width",b).attr("height",x);const{subGraphTitleTopMargin:v}=Bh(r);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),a){const M=f.select("span");M&&M.attr("style",a)}const R=C.node().getBBox();return e.offsetX=0,e.width=R.width,e.height=R.height,e.offsetY=g.height-e.padding/2,e.intersect=function(M){return Qi(e,M)},{cluster:u,labelBBox:g}},"kanbanSection"),hR=m((t,e)=>{const r=Ct(),{themeVariables:i,handDrawnSeed:n}=r,{nodeBorder:s}=i,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const h=e.height+l,u=e.x-c/2,d=e.y-h/2;e.width=c;let f;if(e.look==="handDrawn"){const b=rt.svg(o).rectangle(u,d,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:n});f=o.insert(()=>b,":first-child")}else f=a.insert("rect",":first-child"),f.attr("class","divider").attr("x",u).attr("y",d).attr("width",c).attr("height",h).attr("data-look",e.look);const p=f.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return Qi(e,g)},{cluster:o,labelBBox:{}}},"divider"),uR=Wb,dR={rect:Wb,squareRect:uR,roundedWithTitle:lR,noteGroup:oR,divider:hR,kanbanSection:cR},Ub=new Map,fR=m(async(t,e)=>{const r=e.shape||"rect",i=await dR[r](t,e);return Ub.set(e.id,i),i},"insertCluster"),QO=m(()=>{Ub=new Map},"clear");function Vb(t,e){return t.intersect(e)}m(Vb,"intersectNode");var pR=Vb;function Gb(t,e,r,i){var n=t.x,s=t.y,o=n-i.x,a=s-i.y,l=Math.sqrt(e*e*a*a+r*r*o*o),c=Math.abs(e*r*o/l);i.x<n&&(c=-c);var h=Math.abs(e*r*a/l);return i.y<s&&(h=-h),{x:n+c,y:s+h}}m(Gb,"intersectEllipse");var Yb=Gb;function Xb(t,e,r){return Yb(t,e,e,r)}m(Xb,"intersectCircle");var gR=Xb;function Jb(t,e,r,i){var n,s,o,a,l,c,h,u,d,f,p,g,b,x,_;if(n=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=n*r.x+o*r.y+l,f=n*i.x+o*i.y+l,!(d!==0&&f!==0&&Vc(d,f))&&(s=i.y-r.y,a=r.x-i.x,c=i.x*r.y-r.x*i.y,h=s*t.x+a*t.y+c,u=s*e.x+a*e.y+c,!(h!==0&&u!==0&&Vc(h,u))&&(p=n*a-s*o,p!==0)))return g=Math.abs(p/2),b=o*c-a*l,x=b<0?(b-g)/p:(b+g)/p,b=s*l-n*c,_=b<0?(b-g)/p:(b+g)/p,{x,y:_}}m(Jb,"intersectLine");function Vc(t,e){return t*e>0}m(Vc,"sameSign");var mR=Jb;function Kb(t,e,r){let i=t.x,n=t.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=i-t.width/2-o,c=n-t.height/2-a;for(let h=0;h<e.length;h++){let u=e[h],d=e[h<e.length-1?h+1:0],f=mR(t,r,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});f&&s.push(f)}return s.length?(s.length>1&&s.sort(function(h,u){let d=h.x-r.x,f=h.y-r.y,p=Math.sqrt(d*d+f*f),g=u.x-r.x,b=u.y-r.y,x=Math.sqrt(g*g+b*b);return p<x?-1:p===x?0:1}),s[0]):t}m(Kb,"intersectPolygon");var yR=Kb,et={node:pR,circle:gR,ellipse:Yb,polygon:yR,rect:Qi};function Zb(t,e){const{labelStyles:r}=at(e);e.labelStyle=r;const i=ut(e);let n=i;i||(n="anchor");const s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=rt.svg(s),c=it(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",be(a)),st(e,u),e.intersect=function(d){return G.info("Circle intersect",e,o,d),et.circle(e,o,d)},s}m(Zb,"anchor");function Gc(t,e,r,i,n,s,o){const l=(t+r)/2,c=(e+i)/2,h=Math.atan2(i-e,r-t),u=(r-t)/2,d=(i-e)/2,f=u/n,p=d/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const b=Math.sqrt(1-g**2),x=l+b*s*Math.sin(h)*(o?-1:1),_=c-b*n*Math.cos(h)*(o?-1:1),T=Math.atan2((e-_)/s,(t-x)/n);let v=Math.atan2((i-_)/s,(r-x)/n)-T;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const R=[];for(let M=0;M<20;M++){const O=M/19,P=T+O*v,w=x+n*Math.cos(P),E=_+s*Math.sin(P);R.push({x:w,y:E})}return R}m(Gc,"generateArcPoints");async function Qb(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=e,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...Gc(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...Gc(o/2,a/2,o/2,-a/2,c,l,!0)],d=rt.svg(n),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=_t(u),g=d.path(p,f),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(${c/2}, 0)`),st(e,b),e.intersect=function(x){return et.polygon(e,u,x)},n}m(Qb,"bowTieRect");function Fr(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}m(Fr,"insertPolygonShape");async function tx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,h=l,u=-o,d=0,f=[{x:c+a,y:u},{x:h,y:u},{x:h,y:d},{x:c,y:d},{x:c,y:u+a},{x:c+a,y:u}];let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const b=rt.svg(n),x=it(e,{}),_=_t(f),T=b.path(_,x);p=n.insert(()=>T,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),g&&p.attr("style",g)}else p=Fr(n,l,o,f);return i&&p.attr("style",i),st(e,p),e.intersect=function(b){return et.polygon(e,f,b)},n}m(tx,"card");function ex(t,e){const{nodeStyles:r}=at(e);e.label="";const i=t.insert("g").attr("class",ut(e)).attr("id",e.domId??e.id),{cssStyles:n}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=rt.svg(i),l=it(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=_t(o),h=a.path(c,l),u=i.insert(()=>h,":first-child");return n&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",n),r&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(d){return et.polygon(e,o,d)},i}m(ex,"choice");async function rx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,halfPadding:o}=await ft(t,e,ut(e)),a=s.width/2+o;let l;const{cssStyles:c}=e;if(e.look==="handDrawn"){const h=rt.svg(n),u=it(e,{}),d=h.circle(0,0,a*2,u);l=n.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",be(c))}else l=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",a).attr("cx",0).attr("cy",0);return st(e,l),e.intersect=function(h){return G.info("Circle intersect",e,a,h),et.circle(e,a,h)},n}m(rx,"circle");function ix(t){const e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=t*2,n={x:i/2*e,y:i/2*r},s={x:-(i/2)*e,y:i/2*r},o={x:-(i/2)*e,y:-(i/2)*r},a={x:i/2*e,y:-(i/2)*r};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${n.x},${n.y} L ${o.x},${o.y}`}m(ix,"createLine");function nx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r,e.label="";const n=t.insert("g").attr("class",ut(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:o}=e,a=rt.svg(n),l=it(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=ix(s),u=a.path(h,l),d=n.insert(()=>c,":first-child");return d.insert(()=>u),o&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",o),i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),st(e,d),e.intersect=function(f){return G.info("crossedCircle intersect",e,{radius:s,point:f}),et.circle(e,s,f)},n}m(nx,"crossedCircle");function fr(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(fr,"generateCirclePoints");async function sx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...fr(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...fr(a/2+c*2,-c,c,20,-180,-270),...fr(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...fr(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...fr(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...fr(a/2+a*.1,-c,c,20,-180,-270),...fr(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...fr(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],f=rt.svg(n),p=it(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=_t(u).replace("Z",""),x=f.path(b,p),_=_t(d),T=f.path(_,{...p}),C=n.insert("g",":first-child");return C.insert(()=>T,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,d,v)},n}m(sx,"curlyBraceLeft");function pr(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:f,y:p})}return o}m(pr,"generateCirclePoints");async function ax(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...pr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...pr(a/2+c*2,-c,c,20,-180,-270),...pr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...pr(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...pr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...pr(a/2+c*2,-c,c,20,-180,-270),...pr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...pr(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],f=rt.svg(n),p=it(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=_t(u).replace("Z",""),x=f.path(b,p),_=_t(d),T=f.path(_,{...p}),C=n.insert("g",":first-child");return C.insert(()=>T,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,d,v)},n}m(ax,"curlyBraceRight");function Xt(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(Xt,"generateCirclePoints");async function ox(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Xt(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Xt(a/2+c*2,-c,c,20,-180,-270),...Xt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Xt(a/2,l/2,c,20,0,90)],d=[...Xt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Xt(-a/2-c/2,-c,c,20,0,90),...Xt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Xt(-a/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Xt(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Xt(a/2+c*2,-c,c,20,-180,-270),...Xt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Xt(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Xt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Xt(-a/2-c/2,-c,c,20,0,90),...Xt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Xt(-a/2+c+c/2,l/2,c,30,-180,-270)],p=rt.svg(n),g=it(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=_t(u).replace("Z",""),_=p.path(x,g),C=_t(d).replace("Z",""),v=p.path(C,g),R=_t(f),M=p.path(R,{...g}),O=n.insert("g",":first-child");return O.insert(()=>M,":first-child").attr("stroke-opacity",0),O.insert(()=>_,":first-child"),O.insert(()=>v,":first-child"),O.attr("class","text"),h&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",i),O.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,O),e.intersect=function(P){return et.polygon(e,f,P)},n}m(ox,"curlyBraces");async function lx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=rt.svg(n),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=l,g=c,b=p-h,x=g/4,_=[{x:b,y:0},{x,y:0},{x:0,y:g/2},{x,y:g},{x:b,y:g},...Qn(-b,-g/2,h,50,270,90)],T=_t(_),C=d.path(T,f),v=n.insert(()=>C,":first-child");return v.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",i),v.attr("transform",`translate(${-l/2}, ${-c/2})`),st(e,v),e.intersect=function(R){return et.polygon(e,_,R)},n}m(lx,"curvedTrapezoid");var bR=m((t,e,r,i,n,s)=>[`M${t},${e+s}`,`a${n},${s} 0,0,0 ${r},0`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),xR=m((t,e,r,i,n,s)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),_R=m((t,e,r,i,n,s)=>[`M${t-r/2},${-i/2}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function cx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+e.padding,e.height??0);let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=rt.svg(n),p=xR(0,0,a,h,l,c),g=_R(0,c,a,h,l,c),b=f.path(p,it(e,{})),x=f.path(g,it(e,{fill:"none"}));u=n.insert(()=>x,":first-child"),u=n.insert(()=>b,":first-child"),u.attr("class","basic label-container"),d&&u.attr("style",d)}else{const f=bR(0,0,a,h,l,c);u=n.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",be(d)).attr("style",i)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),st(e,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(f){const p=et.rect(e,f),g=p.x-(e.x??0);if(l!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let b=c*c*(1-g*g/(l*l));b>0&&(b=Math.sqrt(b)),b=c-b,f.y-(e.y??0)>0&&(b=-b),p.y+=b}return p},n}m(cx,"cylinder");async function hx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],b=f.polygon(g.map(_=>[_.x,_.y]),p),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(e.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(_){return et.rect(e,_)},n}m(hx,"dividedRectangle");async function ux(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,halfPadding:o}=await ft(t,e,ut(e)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=rt.svg(n),f=it(e,{roughness:.2,strokeWidth:2.5}),p=it(e,{roughness:.2,strokeWidth:1.5}),g=d.circle(0,0,l*2,f),b=d.circle(0,0,c*2,p);h=n.insert("g",":first-child"),h.attr("class",be(e.cssClasses)).attr("style",be(u)),h.node()?.appendChild(g),h.node()?.appendChild(b)}else{h=n.insert("g",":first-child");const d=h.insert("circle",":first-child"),f=h.insert("circle");h.attr("class","basic label-container").attr("style",i),d.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),f.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return st(e,h),e.intersect=function(d){return G.info("DoubleCircle intersect",e,l,d),et.circle(e,l,d)},n}m(ux,"doublecircle");function dx(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.label="",e.labelStyle=i;const s=t.insert("g").attr("class",ut(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=rt.svg(s),{nodeBorder:c}=r,h=it(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",a),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),st(e,d),e.intersect=function(f){return G.info("filledCircle intersect",e,{radius:o,point:f}),et.circle(e,o,f)},s}m(dx,"filledCircle");async function fx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=e,d=rt.svg(n),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=_t(h),g=d.path(p,f),b=n.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),e.width=a,e.height=l,st(e,b),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(x){return G.info("Triangle intersect",e,h,x),et.polygon(e,h,x)},n}m(fx,"flippedTriangle");function px(t,e,{dir:r,config:{state:i,themeVariables:n}}){const{nodeStyles:s}=at(e);e.label="";const o=t.insert("g").attr("class",ut(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);r==="LR"&&(l=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));const h=-1*l/2,u=-1*c/2,d=rt.svg(o),f=it(e,{stroke:n.lineColor,fill:n.lineColor});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=d.rectangle(h,u,l,c,f),g=o.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),st(e,g);const b=i?.padding??0;return e.width&&e.height&&(e.width+=b/2||0,e.height+=b/2||0),e.intersect=function(x){return et.rect(e,x)},o}m(px,"forkJoin");async function gx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const n=80,s=50,{shapeSvg:o,bbox:a}=await ft(t,e,ut(e)),l=Math.max(n,a.width+(e.padding??0)*2,e?.width??0),c=Math.max(s,a.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=rt.svg(o),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...Qn(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],g=_t(p),b=d.path(g,f),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),st(e,x),e.intersect=function(_){return G.info("Pill intersect",e,{radius:h,point:_}),et.polygon(e,p,_)},o}m(gx,"halfRoundedRectangle");async function mx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.height+(e.padding??0),a=s.width+(e.padding??0)*2.5,{cssStyles:l}=e,c=rt.svg(n),h=it(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");let u=a/2;const d=u/6;u=u+d;const f=o/2,p=f/2,g=u-p,b=[{x:-g,y:-f},{x:0,y:-f},{x:g,y:-f},{x:u,y:0},{x:g,y:f},{x:0,y:f},{x:-g,y:f},{x:-u,y:0}],x=_t(b),_=c.path(x,h),T=n.insert(()=>_,":first-child");return T.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",l),i&&e.look!=="handDrawn"&&T.selectChildren("path").attr("style",i),e.width=a,e.height=o,st(e,T),e.intersect=function(C){return et.polygon(e,b,C)},n}m(mx,"hexagon");async function yx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.label="",e.labelStyle=r;const{shapeSvg:n}=await ft(t,e,ut(e)),s=Math.max(30,e?.width??0),o=Math.max(30,e?.height??0),{cssStyles:a}=e,l=rt.svg(n),c=it(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=_t(h),d=l.path(u,c),f=n.insert(()=>d,":first-child");return f.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),i&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",i),f.attr("transform",`translate(${-s/2}, ${-o/2})`),st(e,f),e.intersect=function(p){return G.info("Pill intersect",e,{points:h}),et.polygon(e,h,p)},n}m(yx,"hourglass");async function bx(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(t,e,"icon-shape default"),d=e.pos==="t",f=a,p=a,{nodeBorder:g}=r,{stylesMap:b}=Ji(e),x=-p/2,_=-f/2,T=e.label?8:0,C=rt.svg(c),v=it(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const R=C.rectangle(x,_,p,f,v),M=Math.max(p,h.width),O=f+h.height+T,P=C.rectangle(-M/2,-O/2,M,O,{...v,fill:"transparent",stroke:"none"}),w=c.insert(()=>R,":first-child"),E=c.insert(()=>P);if(e.icon){const z=c.append("g");z.html(`<g>${await fs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const I=z.node().getBBox(),k=I.width,S=I.height,L=I.x,N=I.y;z.attr("transform",`translate(${-k/2-L},${d?h.height/2+T/2-S/2-N:-h.height/2-T/2-S/2-N})`),z.attr("style",`color: ${b.get("stroke")??g};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-O/2:O/2-h.height})`),w.attr("transform",`translate(0,${d?h.height/2+T/2:-h.height/2-T/2})`),st(e,E),e.intersect=function(z){if(G.info("iconSquare intersect",e,z),!e.label)return et.rect(e,z);const I=e.x??0,k=e.y??0,S=e.height??0;let L=[];return d?L=[{x:I-h.width/2,y:k-S/2},{x:I+h.width/2,y:k-S/2},{x:I+h.width/2,y:k-S/2+h.height+T},{x:I+p/2,y:k-S/2+h.height+T},{x:I+p/2,y:k+S/2},{x:I-p/2,y:k+S/2},{x:I-p/2,y:k-S/2+h.height+T},{x:I-h.width/2,y:k-S/2+h.height+T}]:L=[{x:I-p/2,y:k-S/2},{x:I+p/2,y:k-S/2},{x:I+p/2,y:k-S/2+f},{x:I+h.width/2,y:k-S/2+f},{x:I+h.width/2/2,y:k+S/2},{x:I-h.width/2,y:k+S/2},{x:I-h.width/2,y:k-S/2+f},{x:I-p/2,y:k-S/2+f}],et.polygon(e,L,z)},c}m(bx,"icon");async function xx(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await ft(t,e,"icon-shape default"),d=20,f=e.label?8:0,p=e.pos==="t",{nodeBorder:g,mainBkg:b}=r,{stylesMap:x}=Ji(e),_=rt.svg(c),T=it(e,{});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const C=x.get("fill");T.stroke=C??b;const v=c.append("g");e.icon&&v.html(`<g>${await fs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const R=v.node().getBBox(),M=R.width,O=R.height,P=R.x,w=R.y,E=Math.max(M,O)*Math.SQRT2+d*2,z=_.circle(0,0,E,T),I=Math.max(E,h.width),k=E+h.height+f,S=_.rectangle(-I/2,-k/2,I,k,{...T,fill:"transparent",stroke:"none"}),L=c.insert(()=>z,":first-child"),N=c.insert(()=>S);return v.attr("transform",`translate(${-M/2-P},${p?h.height/2+f/2-O/2-w:-h.height/2-f/2-O/2-w})`),v.attr("style",`color: ${x.get("stroke")??g};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-k/2:k/2-h.height})`),L.attr("transform",`translate(0,${p?h.height/2+f/2:-h.height/2-f/2})`),st(e,N),e.intersect=function(j){return G.info("iconSquare intersect",e,j),et.rect(e,j)},c}m(xx,"iconCircle");async function _x(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await ft(t,e,"icon-shape default"),f=e.pos==="t",p=a+u*2,g=a+u*2,{nodeBorder:b,mainBkg:x}=r,{stylesMap:_}=Ji(e),T=-g/2,C=-p/2,v=e.label?8:0,R=rt.svg(c),M=it(e,{});e.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const O=_.get("fill");M.stroke=O??x;const P=R.path(Pr(T,C,g,p,5),M),w=Math.max(g,h.width),E=p+h.height+v,z=R.rectangle(-w/2,-E/2,w,E,{...M,fill:"transparent",stroke:"none"}),I=c.insert(()=>P,":first-child").attr("class","icon-shape2"),k=c.insert(()=>z);if(e.icon){const S=c.append("g");S.html(`<g>${await fs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const L=S.node().getBBox(),N=L.width,j=L.height,B=L.x,A=L.y;S.attr("transform",`translate(${-N/2-B},${f?h.height/2+v/2-j/2-A:-h.height/2-v/2-j/2-A})`),S.attr("style",`color: ${_.get("stroke")??b};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-E/2:E/2-h.height})`),I.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),st(e,k),e.intersect=function(S){if(G.info("iconSquare intersect",e,S),!e.label)return et.rect(e,S);const L=e.x??0,N=e.y??0,j=e.height??0;let B=[];return f?B=[{x:L-h.width/2,y:N-j/2},{x:L+h.width/2,y:N-j/2},{x:L+h.width/2,y:N-j/2+h.height+v},{x:L+g/2,y:N-j/2+h.height+v},{x:L+g/2,y:N+j/2},{x:L-g/2,y:N+j/2},{x:L-g/2,y:N-j/2+h.height+v},{x:L-h.width/2,y:N-j/2+h.height+v}]:B=[{x:L-g/2,y:N-j/2},{x:L+g/2,y:N-j/2},{x:L+g/2,y:N-j/2+p},{x:L+h.width/2,y:N-j/2+p},{x:L+h.width/2/2,y:N+j/2},{x:L-h.width/2,y:N+j/2},{x:L-h.width/2,y:N-j/2+p},{x:L-g/2,y:N-j/2+p}],et.polygon(e,B,S)},c}m(_x,"iconRounded");async function wx(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await ft(t,e,"icon-shape default"),f=e.pos==="t",p=a+u*2,g=a+u*2,{nodeBorder:b,mainBkg:x}=r,{stylesMap:_}=Ji(e),T=-g/2,C=-p/2,v=e.label?8:0,R=rt.svg(c),M=it(e,{});e.look!=="handDrawn"&&(M.roughness=0,M.fillStyle="solid");const O=_.get("fill");M.stroke=O??x;const P=R.path(Pr(T,C,g,p,.1),M),w=Math.max(g,h.width),E=p+h.height+v,z=R.rectangle(-w/2,-E/2,w,E,{...M,fill:"transparent",stroke:"none"}),I=c.insert(()=>P,":first-child"),k=c.insert(()=>z);if(e.icon){const S=c.append("g");S.html(`<g>${await fs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const L=S.node().getBBox(),N=L.width,j=L.height,B=L.x,A=L.y;S.attr("transform",`translate(${-N/2-B},${f?h.height/2+v/2-j/2-A:-h.height/2-v/2-j/2-A})`),S.attr("style",`color: ${_.get("stroke")??b};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-E/2:E/2-h.height})`),I.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),st(e,k),e.intersect=function(S){if(G.info("iconSquare intersect",e,S),!e.label)return et.rect(e,S);const L=e.x??0,N=e.y??0,j=e.height??0;let B=[];return f?B=[{x:L-h.width/2,y:N-j/2},{x:L+h.width/2,y:N-j/2},{x:L+h.width/2,y:N-j/2+h.height+v},{x:L+g/2,y:N-j/2+h.height+v},{x:L+g/2,y:N+j/2},{x:L-g/2,y:N+j/2},{x:L-g/2,y:N-j/2+h.height+v},{x:L-h.width/2,y:N-j/2+h.height+v}]:B=[{x:L-g/2,y:N-j/2},{x:L+g/2,y:N-j/2},{x:L+g/2,y:N-j/2+p},{x:L+h.width/2,y:N-j/2+p},{x:L+h.width/2/2,y:N+j/2},{x:L-h.width/2,y:N+j/2},{x:L-h.width/2,y:N-j/2+p},{x:L-g/2,y:N-j/2+p}],et.polygon(e,B,S)},c}m(wx,"iconSquare");async function vx(t,e,{config:{flowchart:r}}){const i=new Image;i.src=e?.img??"",await i.decode();const n=Number(i.naturalWidth.toString().replace("px","")),s=Number(i.naturalHeight.toString().replace("px",""));e.imageAspectRatio=n/s;const{labelStyles:o}=at(e);e.labelStyle=o;const a=r?.wrappingWidth;e.defaultWidth=r?.wrappingWidth;const l=Math.max(e.label?a??0:0,e?.assetWidth??n),c=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:l,h=e.constraint==="on"?c/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(c,a??0);const{shapeSvg:u,bbox:d,label:f}=await ft(t,e,"image-shape default"),p=e.pos==="t",g=-c/2,b=-h/2,x=e.label?8:0,_=rt.svg(u),T=it(e,{});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const C=_.rectangle(g,b,c,h,T),v=Math.max(c,d.width),R=h+d.height+x,M=_.rectangle(-v/2,-R/2,v,R,{...T,fill:"none",stroke:"none"}),O=u.insert(()=>C,":first-child"),P=u.insert(()=>M);if(e.img){const w=u.append("image");w.attr("href",e.img),w.attr("width",c),w.attr("height",h),w.attr("preserveAspectRatio","none"),w.attr("transform",`translate(${-c/2},${p?R/2-h:-R/2})`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-h/2-d.height/2-x/2:h/2-d.height/2+x/2})`),O.attr("transform",`translate(0,${p?d.height/2+x/2:-d.height/2-x/2})`),st(e,P),e.intersect=function(w){if(G.info("iconSquare intersect",e,w),!e.label)return et.rect(e,w);const E=e.x??0,z=e.y??0,I=e.height??0;let k=[];return p?k=[{x:E-d.width/2,y:z-I/2},{x:E+d.width/2,y:z-I/2},{x:E+d.width/2,y:z-I/2+d.height+x},{x:E+c/2,y:z-I/2+d.height+x},{x:E+c/2,y:z+I/2},{x:E-c/2,y:z+I/2},{x:E-c/2,y:z-I/2+d.height+x},{x:E-d.width/2,y:z-I/2+d.height+x}]:k=[{x:E-c/2,y:z-I/2},{x:E+c/2,y:z-I/2},{x:E+c/2,y:z-I/2+h},{x:E+d.width/2,y:z-I/2+h},{x:E+d.width/2/2,y:z+I/2},{x:E-d.width/2,y:z+I/2},{x:E-d.width/2,y:z-I/2+h},{x:E-c/2,y:z-I/2+h}],et.polygon(e,k,w)},u}m(vx,"imageSquare");async function Cx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=it(e,{}),f=_t(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Fr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(Cx,"inv_trapezoid");async function co(t,e,r){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i;const{shapeSvg:s,bbox:o}=await ft(t,e,ut(e)),a=Math.max(o.width+r.labelPaddingX*2,e?.width||0),l=Math.max(o.height+r.labelPaddingY*2,e?.height||0),c=-a/2,h=-l/2;let u,{rx:d,ry:f}=e;const{cssStyles:p}=e;if(r?.rx&&r.ry&&(d=r.rx,f=r.ry),e.look==="handDrawn"){const g=rt.svg(s),b=it(e,{}),x=d||f?g.path(Pr(c,h,a,l,d||0),b):g.rectangle(c,h,a,l,b);u=s.insert(()=>x,":first-child"),u.attr("class","basic label-container").attr("style",be(p))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",n).attr("rx",be(d)).attr("ry",be(f)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return st(e,u),e.intersect=function(g){return et.rect(e,g)},s}m(co,"drawRect");async function Sx(t,e){const{shapeSvg:r,bbox:i,label:n}=await ft(t,e,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),n.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),st(e,s),e.intersect=function(l){return et.rect(e,l)},r}m(Sx,"labelRect");async function kx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=it(e,{}),f=_t(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Fr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(kx,"lean_left");async function Tx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=it(e,{}),f=_t(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Fr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(Tx,"lean_right");function Ex(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.label="",e.labelStyle=r;const n=t.insert("g").attr("class",ut(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,e?.width??0),a=Math.max(35,e?.height??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=rt.svg(n),u=it(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=_t(c),f=h.path(d,u),p=n.insert(()=>f,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),p.attr("transform",`translate(-${o/2},${-a})`),st(e,p),e.intersect=function(g){return G.info("lightningBolt intersect",e,g),et.polygon(e,c,g)},n}m(Ex,"lightningBolt");var wR=m((t,e,r,i,n,s,o)=>[`M${t},${e+s}`,`a${n},${s} 0,0,0 ${r},0`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${t},${e+s+o}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),vR=m((t,e,r,i,n,s,o)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${t},${e+s+o}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),CR=m((t,e,r,i,n,s)=>[`M${t-r/2},${-i/2}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Ax(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(e.padding??0),e.height??0),u=h*.1;let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=rt.svg(n),g=vR(0,0,a,h,l,c,u),b=CR(0,c,a,h,l,c),x=it(e,{}),_=p.path(g,x),T=p.path(b,x);n.insert(()=>T,":first-child").attr("class","line"),d=n.insert(()=>_,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const p=wR(0,0,a,h,l,c,u);d=n.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",be(f)).attr("style",i)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),st(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(p){const g=et.rect(e,p),b=g.x-(e.x??0);if(l!=0&&(Math.abs(b)<(e.width??0)/2||Math.abs(b)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-c)){let x=c*c*(1-b*b/(l*l));x>0&&(x=Math.sqrt(x)),x=c-x,p.y-(e.y??0)>0&&(x=-x),g.y+=x}return g},n}m(Ax,"linedCylinder");async function Lx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,{cssStyles:u}=e,d=rt.svg(n),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...Mr(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],g=d.polygon(p.map(x=>[x.x,x.y]),f),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),st(e,b),e.intersect=function(x){return et.polygon(e,p,x)},n}m(Lx,"linedWaveEdgedRect");async function Bx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{}),g=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],b=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=_t(g),_=f.path(x,p),T=_t(b),C=f.path(T,{...p,fill:"none"}),v=n.insert(()=>C,":first-child");return v.insert(()=>_,":first-child"),v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),st(e,v),e.intersect=function(R){return et.polygon(e,g,R)},n}m(Bx,"multiRect");async function Rx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,u=-a/2,d=-h/2,f=5,{cssStyles:p}=e,g=Mr(u-f,d+h+f,u+a-f,d+h+f,c,.8),b=g?.[g.length-1],x=[{x:u-f,y:d+f},{x:u-f,y:d+h+f},...g,{x:u+a-f,y:b.y-f},{x:u+a,y:b.y-f},{x:u+a,y:b.y-2*f},{x:u+a+f,y:b.y-2*f},{x:u+a+f,y:d-f},{x:u+f,y:d-f},{x:u+f,y:d},{x:u,y:d},{x:u,y:d+f}],_=[{x:u,y:d+f},{x:u+a-f,y:d+f},{x:u+a-f,y:b.y-f},{x:u+a,y:b.y-f},{x:u+a,y:d},{x:u,y:d}],T=rt.svg(n),C=it(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=_t(x),R=T.path(v,C),M=_t(_),O=T.path(M,C),P=n.insert(()=>R,":first-child");return P.insert(()=>O),P.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",i),P.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)+f-c/2-(s.y-(s.top??0))})`),st(e,P),e.intersect=function(w){return et.polygon(e,x,w)},n}m(Rx,"multiWaveEdgedRectangle");async function Mx(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i,e.useHtmlLabels||ee().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await ft(t,e,ut(e)),c=Math.max(a.width+(e.padding??0)*2,e?.width??0),h=Math.max(a.height+(e.padding??0)*2,e?.height??0),u=-c/2,d=-h/2,{cssStyles:f}=e,p=rt.svg(o),g=it(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=p.rectangle(u,d,c,h,g),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),st(e,x),e.intersect=function(_){return et.rect(e,_)},o}m(Mx,"note");var SR=m((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function $x(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=.5,h=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=rt.svg(n),p=it(e,{}),g=SR(0,0,l),b=f.path(g,p);u=n.insert(()=>b,":first-child").attr("transform",`translate(${-l/2+c}, ${l/2})`),d&&u.attr("style",d)}else u=Fr(n,l,l,h),u.attr("transform",`translate(${-l/2+c}, ${l/2})`);return i&&u.attr("style",i),st(e,u),e.intersect=function(f){return G.debug(`APA12 Intersect called SPLIT
point:`,f,`
node:
`,e,`
res:`,et.polygon(e,h,f)),et.polygon(e,h,f)},n}m($x,"question");async function Ix(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=-a/2,h=-l/2,u=h/2,d=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:f}=e,p=rt.svg(n),g=it(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=_t(d),x=p.path(b,g),_=n.insert(()=>x,":first-child");return _.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),st(e,_),e.intersect=function(T){return et.polygon(e,d,T)},n}m(Ix,"rect_left_inv_arrow");async function Ox(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;let n;e.cssClasses?n="node "+e.cssClasses:n="node default";const s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",i),l=e.description,c=e.label,h=a.node().appendChild(await Qr(c,e.labelStyle,!0,!0));let u={width:0,height:0};if(Ht(Ct()?.flowchart?.htmlLabels)){const O=h.children[0],P=wt(h);u=O.getBoundingClientRect(),P.attr("width",u.width),P.attr("height",u.height)}G.info("Text 2",l);const d=l||[],f=h.getBBox(),p=a.node().appendChild(await Qr(d.join?d.join("<br/>"):d,e.labelStyle,!0,!0)),g=p.children[0],b=wt(p);u=g.getBoundingClientRect(),b.attr("width",u.width),b.attr("height",u.height);const x=(e.padding||0)/2;wt(p).attr("transform","translate( "+(u.width>f.width?0:(f.width-u.width)/2)+", "+(f.height+x+5)+")"),wt(h).attr("transform","translate( "+(u.width<f.width?0:-(f.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-x+3)+")");const _=u.width+(e.padding||0),T=u.height+(e.padding||0),C=-u.width/2-x,v=-u.height/2-x;let R,M;if(e.look==="handDrawn"){const O=rt.svg(s),P=it(e,{}),w=O.path(Pr(C,v,_,T,e.rx||0),P),E=O.line(-u.width/2-x,-u.height/2-x+f.height+x,u.width/2+x,-u.height/2-x+f.height+x,P);M=s.insert(()=>(G.debug("Rough node insert CXC",w),E),":first-child"),R=s.insert(()=>(G.debug("Rough node insert CXC",w),w),":first-child")}else R=o.insert("rect",":first-child"),M=o.insert("line"),R.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-x).attr("y",-u.height/2-x).attr("width",u.width+(e.padding||0)).attr("height",u.height+(e.padding||0)),M.attr("class","divider").attr("x1",-u.width/2-x).attr("x2",u.width/2+x).attr("y1",-u.height/2-x+f.height+x).attr("y2",-u.height/2-x+f.height+x);return st(e,R),e.intersect=function(O){return et.rect(e,O)},s}m(Ox,"rectWithTitle");function In(t,e,r,i,n,s,o){const l=(t+r)/2,c=(e+i)/2,h=Math.atan2(i-e,r-t),u=(r-t)/2,d=(i-e)/2,f=u/n,p=d/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const b=Math.sqrt(1-g**2),x=l+b*s*Math.sin(h)*(o?-1:1),_=c-b*n*Math.cos(h)*(o?-1:1),T=Math.atan2((e-_)/s,(t-x)/n);let v=Math.atan2((i-_)/s,(r-x)/n)-T;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const R=[];for(let M=0;M<20;M++){const O=M/19,P=T+O*v,w=x+n*Math.cos(P),E=_+s*Math.sin(P);R.push({x:w,y:E})}return R}m(In,"generateArcPoints");async function Px(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=e?.padding??0,a=e?.padding??0,l=(e?.width?e?.width:s.width)+o*2,c=(e?.height?e?.height:s.height)+a*2,h=5,u=5,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...In(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...In(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...In(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...In(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],b=_t(g),x=f.path(b,p),_=n.insert(()=>x,":first-child");return _.attr("class","basic label-container outer-path"),d&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",d),i&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",i),st(e,_),e.intersect=function(T){return et.polygon(e,g,T)},n}m(Px,"roundedRect");async function Fx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=e?.padding??0,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],b=f.polygon(g.map(_=>[_.x,_.y]),p),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container").attr("style",be(d)),i&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(_){return et.rect(e,_)},n}m(Fx,"shadedProcess");async function Nx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=-a/2,h=-l/2,{cssStyles:u}=e,d=rt.svg(n),f=it(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],g=_t(p),b=d.path(g,f),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),x.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(_){return et.polygon(e,p,_)},n}m(Nx,"slopedRect");async function jx(t,e){const r={rx:0,ry:0,labelPaddingX:(e?.padding||0)*2,labelPaddingY:(e?.padding||0)*1};return co(t,e,r)}m(jx,"squareRect");async function Dx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.height+e.padding,a=s.width+o/4+e.padding,l=o/2,{cssStyles:c}=e,h=rt.svg(n),u=it(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=[{x:-a/2+l,y:-o/2},{x:a/2-l,y:-o/2},...Qn(-a/2+l,0,l,50,90,270),{x:a/2-l,y:o/2},...Qn(a/2-l,0,l,50,270,450)],f=_t(d),p=h.path(f,u),g=n.insert(()=>p,":first-child");return g.attr("class","basic label-container outer-path"),c&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",c),i&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",i),st(e,g),e.intersect=function(b){return et.polygon(e,d,b)},n}m(Dx,"stadium");async function qx(t,e){return co(t,e,{rx:5,ry:5})}m(qx,"state");function Hx(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=r,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),h=rt.svg(c),u=it(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),f=a??l,p=h.circle(0,0,5,{...u,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=c.insert(()=>d,":first-child");return g.insert(()=>p),s&&g.selectAll("path").attr("style",s),n&&g.selectAll("path").attr("style",n),st(e,g),e.intersect=function(b){return et.circle(e,7,b)},c}m(Hx,"stateEnd");function zx(t,e,{config:{themeVariables:r}}){const{lineColor:i}=r,n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=rt.svg(n).circle(0,0,14,cC(i));s=n.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=n.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return st(e,s),e.intersect=function(o){return et.circle(e,7,o)},n}m(zx,"stateStart");async function Wx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=(e?.padding||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const d=rt.svg(n),f=it(e,{}),p=d.rectangle(c-8,h,a+16,l,f),g=d.line(c,h,c,h+l,f),b=d.line(c+a,h,c+a,h+l,f);n.insert(()=>g,":first-child"),n.insert(()=>b,":first-child");const x=n.insert(()=>p,":first-child"),{cssStyles:_}=e;x.attr("class","basic label-container").attr("style",be(_)),st(e,x)}else{const d=Fr(n,a,l,u);i&&d.attr("style",i),st(e,d)}return e.intersect=function(d){return et.polygon(e,u,d)},n}m(Wx,"subroutine");async function Ux(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{}),g=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],b=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=_t(g),_=f.path(x,p),T=_t(b),C=f.path(T,{...p,fillStyle:"solid"}),v=n.insert(()=>C,":first-child");return v.insert(()=>_,":first-child"),v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),st(e,v),e.intersect=function(R){return et.polygon(e,g,R)},n}m(Ux,"taggedRect");async function Vx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=.2*a,u=.2*l,d=l+c,{cssStyles:f}=e,p=rt.svg(n),g=it(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=[{x:-a/2-a/2*.1,y:d/2},...Mr(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],x=-a/2+a/2*.1,_=-d/2-u*.4,T=[{x:x+a-h,y:(_+l)*1.4},{x:x+a,y:_+l-u},{x:x+a,y:(_+l)*.9},...Mr(x+a,(_+l)*1.3,x+a-h,(_+l)*1.5,-l*.03,.5)],C=_t(b),v=p.path(C,g),R=_t(T),M=p.path(R,{...g,fillStyle:"solid"}),O=n.insert(()=>M,":first-child");return O.insert(()=>v,":first-child"),O.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",i),O.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),st(e,O),e.intersect=function(P){return et.polygon(e,b,P)},n}m(Vx,"taggedWaveEdgedRectangle");async function Gx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=Math.max(s.width+e.padding,e?.width||0),a=Math.max(s.height+e.padding,e?.height||0),l=-o/2,c=-a/2,h=n.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),st(e,h),e.intersect=function(u){return et.rect(e,u)},n}m(Gx,"text");var kR=m((t,e,r,i,n,s)=>`M${t},${e}
    a${n},${s} 0,0,1 0,${-i}
    l${r},0
    a${n},${s} 0,0,1 0,${i}
    M${r},${-i}
    a${n},${s} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),TR=m((t,e,r,i,n,s)=>[`M${t},${e}`,`M${t+r},${e}`,`a${n},${s} 0,0,0 0,${-i}`,`l${-r},0`,`a${n},${s} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),ER=m((t,e,r,i,n,s)=>[`M${t+r/2},${-i/2}`,`a${n},${s} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function Yx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o,halfPadding:a}=await ft(t,e,ut(e)),l=e.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),d=s.width+u+l,{cssStyles:f}=e;let p;if(e.look==="handDrawn"){const g=rt.svg(n),b=TR(0,0,d,c,u,h),x=ER(0,0,d,c,u,h),_=g.path(b,it(e,{})),T=g.path(x,it(e,{fill:"none"}));p=n.insert(()=>T,":first-child"),p=n.insert(()=>_,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=kR(0,0,d,c,u,h);p=n.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",be(f)).attr("style",i),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),i&&p.selectAll("path").attr("style",i)}return p.attr("label-offset-x",u),p.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),st(e,p),e.intersect=function(g){const b=et.rect(e,g),x=b.y-(e.y??0);if(h!=0&&(Math.abs(x)<(e.height??0)/2||Math.abs(x)==(e.height??0)/2&&Math.abs(b.x-(e.x??0))>(e.width??0)/2-u)){let _=u*u*(1-x*x/(h*h));_!=0&&(_=Math.sqrt(Math.abs(_))),_=u-_,g.x-(e.x??0)>0&&(_=-_),b.x+=_}return b},n}m(Yx,"tiltedCylinder");async function Xx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=it(e,{}),f=_t(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Fr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(Xx,"trapezoid");async function Jx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),{cssStyles:h}=e,u=rt.svg(n),d=it(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=_t(f),g=u.path(p,d),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",h),i&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),st(e,b),e.intersect=function(x){return et.polygon(e,f,x)},n}m(Jx,"trapezoidalPentagon");async function Kx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Ht(Ct().flowchart?.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=e,f=rt.svg(n),p=it(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=_t(u),b=f.path(g,p),x=n.insert(()=>b,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),e.width=l,e.height=c,st(e,x),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(_){return G.info("Triangle intersect",e,u,_),et.polygon(e,u,_)},n}m(Kx,"triangle");async function Zx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/8,h=l+c,{cssStyles:u}=e,f=70-a,p=f>0?f/2:0,g=rt.svg(n),b=it(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-a/2-p,y:h/2},...Mr(-a/2-p,h/2,a/2+p,h/2,c,.8),{x:a/2+p,y:-h/2},{x:-a/2-p,y:-h/2}],_=_t(x),T=g.path(_,b),C=n.insert(()=>T,":first-child");return C.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,x,v)},n}m(Zx,"waveEdgedRectangle");async function Qx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await ft(t,e,ut(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=l/c;let u=l,d=c;u>d*h?d=u/h:u=d*h,u=Math.max(u,o),d=Math.max(d,a);const f=Math.min(d*.2,d/4),p=d+f*2,{cssStyles:g}=e,b=rt.svg(n),x=it(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const _=[{x:-u/2,y:p/2},...Mr(-u/2,p/2,u/2,p/2,f,1),{x:u/2,y:-p/2},...Mr(u/2,-p/2,-u/2,-p/2,f,-1)],T=_t(_),C=b.path(T,x),v=n.insert(()=>C,":first-child");return v.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",g),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),st(e,v),e.intersect=function(R){return et.polygon(e,_,R)},n}m(Qx,"waveRectangle");async function t1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await ft(t,e,ut(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,f=rt.svg(n),p=it(e,{}),g=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],b=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=f.path(b,p),_=n.insert(()=>x,":first-child");return _.attr("transform",`translate(${c/2}, ${c/2})`),_.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),st(e,_),e.intersect=function(T){return et.polygon(e,g,T)},n}m(t1,"windowPane");async function uu(t,e){const r=e;if(r.alias&&(e.label=r.alias),e.look==="handDrawn"){const{themeVariables:W}=ee(),{background:U}=W,$={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${U}`]};await uu(t,$)}const i=ee();e.useHtmlLabels=i.htmlLabels;let n=i.er?.diagramPadding??10,s=i.er?.entityPadding??6;const{cssStyles:o}=e,{labelStyles:a,nodeStyles:l}=at(e);if(r.attributes.length===0&&e.label){const W={rx:0,ry:0,labelPaddingX:n,labelPaddingY:n*1.5};_r(e.label,i)+W.labelPaddingX*2<i.er.minEntityWidth&&(e.width=i.er.minEntityWidth);const U=await co(t,e,W);if(!Ht(i.htmlLabels)){const $=U.select("text"),F=$.node()?.getBBox();$.attr("transform",`translate(${-F.width/2}, 0)`)}return U}i.htmlLabels||(n*=1.25,s*=1.25);let c=ut(e);c||(c="node default");const h=t.insert("g").attr("class",c).attr("id",e.domId||e.id),u=await Ci(h,e.label??"",i,0,0,["name"],a);u.height+=s;let d=0;const f=[],p=[];let g=0,b=0,x=0,_=0,T=!0,C=!0;for(const W of r.attributes){const U=await Ci(h,W.type,i,0,d,["attribute-type"],a);g=Math.max(g,U.width+n);const $=await Ci(h,W.name,i,0,d,["attribute-name"],a);b=Math.max(b,$.width+n);const F=await Ci(h,W.keys.join(),i,0,d,["attribute-keys"],a);x=Math.max(x,F.width+n);const V=await Ci(h,W.comment,i,0,d,["attribute-comment"],a);_=Math.max(_,V.width+n);const K=Math.max(U.height,$.height,F.height,V.height)+s;p.push({yOffset:d,rowHeight:K}),d+=K}let v=4;x<=n&&(T=!1,x=0,v--),_<=n&&(C=!1,_=0,v--);const R=h.node().getBBox();if(u.width+n*2-(g+b+x+_)>0){const W=u.width+n*2-(g+b+x+_);g+=W/v,b+=W/v,x>0&&(x+=W/v),_>0&&(_+=W/v)}const M=g+b+x+_,O=rt.svg(h),P=it(e,{});e.look!=="handDrawn"&&(P.roughness=0,P.fillStyle="solid");let w=0;p.length>0&&(w=p.reduce((W,U)=>W+(U?.rowHeight??0),0));const E=Math.max(R.width+n*2,e?.width||0,M),z=Math.max((w??0)+u.height,e?.height||0),I=-E/2,k=-z/2;h.selectAll("g:not(:first-child)").each((W,U,$)=>{const F=wt($[U]),V=F.attr("transform");let K=0,Q=0;if(V){const pt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(V);pt&&(K=parseFloat(pt[1]),Q=parseFloat(pt[2]),F.attr("class").includes("attribute-name")?K+=g:F.attr("class").includes("attribute-keys")?K+=g+b:F.attr("class").includes("attribute-comment")&&(K+=g+b+x))}F.attr("transform",`translate(${I+n/2+K}, ${Q+k+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(k+s/2)+")");const S=O.rectangle(I,k,E,z,P),L=h.insert(()=>S,":first-child").attr("style",o.join("")),{themeVariables:N}=ee(),{rowEven:j,rowOdd:B,nodeBorder:A}=N;f.push(0);for(const[W,U]of p.entries()){const F=(W+1)%2===0&&U.yOffset!==0,V=O.rectangle(I,u.height+k+U?.yOffset,E,U?.rowHeight,{...P,fill:F?j:B,stroke:A});h.insert(()=>V,"g.label").attr("style",o.join("")).attr("class",`row-rect-${F?"even":"odd"}`)}let q=O.line(I,u.height+k,E+I,u.height+k,P);h.insert(()=>q).attr("class","divider"),q=O.line(g+I,u.height+k,g+I,z+k,P),h.insert(()=>q).attr("class","divider"),T&&(q=O.line(g+b+I,u.height+k,g+b+I,z+k,P),h.insert(()=>q).attr("class","divider")),C&&(q=O.line(g+b+x+I,u.height+k,g+b+x+I,z+k,P),h.insert(()=>q).attr("class","divider"));for(const W of f)q=O.line(I,u.height+k+W,E+I,u.height+k+W,P),h.insert(()=>q).attr("class","divider");if(st(e,L),l&&e.look!=="handDrawn"){const U=l.split(";")?.filter($=>$.includes("stroke"))?.map($=>`${$}`).join("; ");h.selectAll("path").attr("style",U??""),h.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(W){return et.rect(e,W)},h}m(uu,"erBox");async function Ci(t,e,r,i=0,n=0,s=[],o=""){const a=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${i}, ${n})`).attr("style",o);e!==Jf(e)&&(e=Jf(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await Or(a,e,{width:_r(e,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Ht(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=wt(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}m(Ci,"addText");async function e1(t,e,r,i,n=r.class.padding??12){const s=i?0:3,o=t.insert("g").attr("class",ut(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,h=null,u=0,d=0,f=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const _=e.annotations[0];await On(a,{text:`${_}`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await On(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();d=p.height,c=o.insert("g").attr("class","members-group text");let g=0;for(const _ of e.members){const T=await On(c,_,g,[_.parseClassifier()]);g+=T+s}f=c.node().getBBox().height,f<=0&&(f=n/2),h=o.insert("g").attr("class","methods-group text");let b=0;for(const _ of e.methods){const T=await On(h,_,b,[_.parseClassifier()]);b+=T+s}let x=o.node().getBBox();if(a!==null){const _=a.node().getBBox();a.attr("transform",`translate(${-_.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${u})`),x=o.node().getBBox(),c.attr("transform",`translate(0, ${u+d+n*2})`),x=o.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(f?f+n*4:n*2)})`),x=o.node().getBBox(),{shapeSvg:o,bbox:x}}m(e1,"textHelper");async function On(t,e,r,i=[]){const n=t.insert("g").attr("class","label").attr("style",i.join("; ")),s=ee();let o="useHtmlLabels"in e?e.useHtmlLabels:Ht(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),Di(a)&&(o=!0);const l=await Or(n,vh(di(a)),{width:_r(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],d=wt(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const f=u.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(b=>{function x(){if(g.style.display="flex",g.style.flexDirection="column",p){const _=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,C=parseInt(_,10)*5+"px";g.style.minWidth=C,g.style.maxWidth=C}else g.style.width="100%";b(g)}m(x,"setupImage"),setTimeout(()=>{g.complete&&x()}),g.addEventListener("error",x),g.addEventListener("load",x)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{i.includes("font-weight: bolder")&&wt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return n.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}m(On,"addText");async function r1(t,e){const r=Ct(),i=r.class.padding??12,n=i,s=e.useHtmlLabels??Ht(r.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await e1(t,e,r,s,n),{labelStyles:c,nodeStyles:h}=at(e);e.labelStyle=c,e.cssStyles=o.styles||"";const u=o.styles?.join(";")||h||"";e.cssStyles||(e.cssStyles=u.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!r.class?.hideEmptyMembersBox,f=rt.svg(a),p=it(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l.width;let b=l.height;o.members.length===0&&o.methods.length===0?b+=n:o.members.length>0&&o.methods.length===0&&(b+=n*2);const x=-g/2,_=-b/2,T=f.rectangle(x-i,_-i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0),g+2*i,b+2*i+(d?i*2:o.members.length===0&&o.methods.length===0?-i:0),p),C=a.insert(()=>T,":first-child");C.attr("class","basic label-container");const v=C.node().getBBox();a.selectAll(".text").each((P,w,E)=>{const z=wt(E[w]),I=z.attr("transform");let k=0;if(I){const j=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(I);j&&(k=parseFloat(j[2]))}let S=k+_+i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0);s||(S-=4);let L=x;(z.attr("class").includes("label-group")||z.attr("class").includes("annotation-group"))&&(L=-z.node()?.getBBox().width/2||0,a.selectAll("text").each(function(N,j,B){window.getComputedStyle(B[j]).textAnchor==="middle"&&(L=0)})),z.attr("transform",`translate(${L}, ${S})`)});const R=a.select(".annotation-group").node().getBBox().height-(d?i/2:0)||0,M=a.select(".label-group").node().getBBox().height-(d?i/2:0)||0,O=a.select(".members-group").node().getBBox().height-(d?i/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const P=f.line(v.x,R+M+_+i,v.x+v.width,R+M+_+i,p);a.insert(()=>P).attr("class","divider").attr("style",u)}if(d||o.members.length>0||o.methods.length>0){const P=f.line(v.x,R+M+O+_+n*2+i,v.x+v.width,R+M+O+_+i+n*2,p);a.insert(()=>P).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),C.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",u),!s){const P=RegExp(/color\s*:\s*([^;]*)/),w=P.exec(u);if(w){const E=w[0].replace("color","fill");a.selectAll("tspan").attr("style",E)}else if(c){const E=P.exec(c);if(E){const z=E[0].replace("color","fill");a.selectAll("tspan").attr("style",z)}}}return st(e,C),e.intersect=function(P){return et.rect(e,P)},a}m(r1,"classBox");async function i1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const n=e,s=e,o=20,a=20,l="verifyMethod"in e,c=ut(e),h=t.insert("g").attr("class",c).attr("id",e.domId??e.id);let u;l?u=await Ye(h,`&lt;&lt;${n.type}&gt;&gt;`,0,e.labelStyle):u=await Ye(h,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let d=u;const f=await Ye(h,n.name,d,e.labelStyle+"; font-weight: bold;");if(d+=f+a,l){const R=await Ye(h,`${n.requirementId?`ID: ${n.requirementId}`:""}`,d,e.labelStyle);d+=R;const M=await Ye(h,`${n.text?`Text: ${n.text}`:""}`,d,e.labelStyle);d+=M;const O=await Ye(h,`${n.risk?`Risk: ${n.risk}`:""}`,d,e.labelStyle);d+=O,await Ye(h,`${n.verifyMethod?`Verification: ${n.verifyMethod}`:""}`,d,e.labelStyle)}else{const R=await Ye(h,`${s.type?`Type: ${s.type}`:""}`,d,e.labelStyle);d+=R,await Ye(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,d,e.labelStyle)}const p=(h.node()?.getBBox().width??200)+o,g=(h.node()?.getBBox().height??200)+o,b=-p/2,x=-g/2,_=rt.svg(h),T=it(e,{});e.look!=="handDrawn"&&(T.roughness=0,T.fillStyle="solid");const C=_.rectangle(b,x,p,g,T),v=h.insert(()=>C,":first-child");if(v.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((R,M,O)=>{const P=wt(O[M]),w=P.attr("transform");let E=0,z=0;if(w){const L=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(w);L&&(E=parseFloat(L[1]),z=parseFloat(L[2]))}const I=z-g/2;let k=b+o/2;(M===0||M===1)&&(k=E),P.attr("transform",`translate(${k}, ${I+o})`)}),d>u+f+a){const R=_.line(b,x+u+f+a,b+p,x+u+f+a,T);h.insert(()=>R).attr("style",i)}return st(e,v),e.intersect=function(R){return et.rect(e,R)},h}m(i1,"requirementBox");async function Ye(t,e,r,i=""){if(e==="")return 0;const n=t.insert("g").attr("class","label").attr("style",i),s=Ct(),o=s.htmlLabels??!0,a=await Or(n,vh(di(e)),{width:_r(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},s);let l;if(o){const c=a.children[0],h=wt(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);l=a.getBBox(),l.height+=6}return n.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}m(Ye,"addText");var AR=m(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function n1(t,e,{config:r}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await ft(t,e,ut(e)),h=e.padding||10;let u="",d;"ticket"in e&&e.ticket&&r?.kanban?.ticketBaseUrl&&(u=r?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),d=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,g;d?{label:p,bbox:g}=await rc(d,"ticket"in e&&e.ticket||"",f):{label:p,bbox:g}=await rc(a,"ticket"in e&&e.ticket||"",f);const{label:b,bbox:x}=await rc(a,"assigned"in e&&e.assigned||"",f);e.width=o;const _=10,T=e?.width||0,C=Math.max(g.height,x.height)/2,v=Math.max(l.height+_*2,e?.height||0)+C,R=-T/2,M=-v/2;c.attr("transform","translate("+(h-T/2)+", "+(-C-l.height/2)+")"),p.attr("transform","translate("+(h-T/2)+", "+(-C+l.height/2)+")"),b.attr("transform","translate("+(h+T/2-x.width-2*s)+", "+(-C+l.height/2)+")");let O;const{rx:P,ry:w}=e,{cssStyles:E}=e;if(e.look==="handDrawn"){const z=rt.svg(a),I=it(e,{}),k=P||w?z.path(Pr(R,M,T,v,P||0),I):z.rectangle(R,M,T,v,I);O=a.insert(()=>k,":first-child"),O.attr("class","basic label-container").attr("style",E||null)}else{O=a.insert("rect",":first-child"),O.attr("class","basic label-container __APA__").attr("style",n).attr("rx",P??5).attr("ry",w??5).attr("x",R).attr("y",M).attr("width",T).attr("height",v);const z="priority"in e&&e.priority;if(z){const I=a.append("line"),k=R+2,S=M+Math.floor((P??0)/2),L=M+v-Math.floor((P??0)/2);I.attr("x1",k).attr("y1",S).attr("x2",k).attr("y2",L).attr("stroke-width","4").attr("stroke",AR(z))}}return st(e,O),e.height=v,e.intersect=function(z){return et.rect(e,z)},a}m(n1,"kanbanItem");var LR=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:jx},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Px},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Dx},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Wx},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:cx},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:rx},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:$x},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:mx},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Tx},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:kx},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:Xx},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Cx},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:ux},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Gx},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:tx},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Fx},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:zx},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Hx},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:px},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:yx},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:sx},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:ax},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:ox},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Ex},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Zx},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:gx},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Yx},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Ax},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:lx},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:hx},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Kx},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:t1},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:dx},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Jx},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:fx},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Nx},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Rx},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Bx},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:Qb},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:nx},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Vx},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Ux},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Qx},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Ix},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Lx}],BR=m(()=>{const e=[...Object.entries({state:qx,choice:ex,note:Mx,rectWithTitle:Ox,labelRect:Sx,iconSquare:wx,iconCircle:xx,icon:bx,iconRounded:_x,imageSquare:vx,anchor:Zb,kanbanItem:n1,classBox:r1,erBox:uu,requirementBox:i1}),...LR.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(n=>[n,r.handler]))];return Object.fromEntries(e)},"generateShapeMap"),s1=BR();function RR(t){return t in s1}m(RR,"isValidShape");var ho=new Map;async function a1(t,e,r){let i,n;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?s1[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;r.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),n=await s(i,e,r)}else n=await s(t,e,r),i=n;return e.tooltip&&n.attr("title",e.tooltip),ho.set(e.id,i),e.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}m(a1,"insertNode");var t3=m((t,e)=>{ho.set(e.id,t)},"setNodeElem"),e3=m(()=>{ho.clear()},"clear"),r3=m(t=>{const e=ho.get(t.id);G.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=8,i=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+i-t.width/2)+", "+(t.y-t.height/2-r)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),i},"positionNode"),MR=m((t,e,r,i,n,s)=>{e.arrowTypeStart&&rg(t,"start",e.arrowTypeStart,r,i,n,s),e.arrowTypeEnd&&rg(t,"end",e.arrowTypeEnd,r,i,n,s)},"addEdgeMarkers"),$R={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},rg=m((t,e,r,i,n,s,o)=>{const a=$R[r];if(!a){G.warn(`Unknown arrow type: ${r}`);return}const l=a.type,h=`${n}_${s}-${l}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const u=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${u}`;if(!document.getElementById(d)){const f=document.getElementById(h);if(f){const p=f.cloneNode(!0);p.id=d,p.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",o),a.fill&&b.setAttribute("fill",o)}),f.parentNode?.appendChild(p)}}t.attr(`marker-${e}`,`url(${i}#${d})`)}else t.attr(`marker-${e}`,`url(${i}#${h})`)},"addEdgeMarker"),Ba=new Map,Jt=new Map,i3=m(()=>{Ba.clear(),Jt.clear()},"clear"),An=m(t=>t?t.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),IR=m(async(t,e)=>{let r=Ht(Ct().flowchart.htmlLabels);const i=await Or(t,e.label,{style:An(e.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});G.info("abc82",e,e.labelType);const n=t.insert("g").attr("class","edgeLabel"),s=n.insert("g").attr("class","label");s.node().appendChild(i);let o=i.getBBox();if(r){const l=i.children[0],c=wt(i);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),Ba.set(e.id,n),e.width=o.width,e.height=o.height;let a;if(e.startLabelLeft){const l=await Qr(e.startLabelLeft,An(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Jt.get(e.id)||Jt.set(e.id,{}),Jt.get(e.id).startLeft=c,Pn(a,e.startLabelLeft)}if(e.startLabelRight){const l=await Qr(e.startLabelRight,An(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=c.node().appendChild(l),h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Jt.get(e.id)||Jt.set(e.id,{}),Jt.get(e.id).startRight=c,Pn(a,e.startLabelRight)}if(e.endLabelLeft){const l=await Qr(e.endLabelLeft,An(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),Jt.get(e.id)||Jt.set(e.id,{}),Jt.get(e.id).endLeft=c,Pn(a,e.endLabelLeft)}if(e.endLabelRight){const l=await Qr(e.endLabelRight,An(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),Jt.get(e.id)||Jt.set(e.id,{}),Jt.get(e.id).endRight=c,Pn(a,e.endLabelRight)}return i},"insertEdgeLabel");function Pn(t,e){Ct().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}m(Pn,"setTerminalWidth");var OR=m((t,e)=>{G.debug("Moving label abc88 ",t.id,t.label,Ba.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath;const i=Ct(),{subGraphTitleTotalMargin:n}=Bh(i);if(t.label){const s=Ba.get(t.id);let o=t.x,a=t.y;if(r){const l=je.calcLabelPosition(r);G.debug("Moving label "+t.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+n/2})`)}if(t.startLabelLeft){const s=Jt.get(t.id).startLeft;let o=t.x,a=t.y;if(r){const l=je.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.startLabelRight){const s=Jt.get(t.id).startRight;let o=t.x,a=t.y;if(r){const l=je.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelLeft){const s=Jt.get(t.id).endLeft;let o=t.x,a=t.y;if(r){const l=je.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelRight){const s=Jt.get(t.id).endRight;let o=t.x,a=t.y;if(r){const l=je.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),PR=m((t,e)=>{const r=t.x,i=t.y,n=Math.abs(e.x-r),s=Math.abs(e.y-i),o=t.width/2,a=t.height/2;return n>=o||s>=a},"outsideNode"),FR=m((t,e,r)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const i=t.x,n=t.y,s=Math.abs(i-r.x),o=t.width/2;let a=r.x<e.x?o-s:o+s;const l=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*o>Math.abs(i-e.x)*l){let u=r.y<e.y?e.y-l-n:n-l-e.y;a=h*u/c;const d={x:r.x<e.x?r.x+a:r.x-h+a,y:r.y<e.y?r.y+c-u:r.y-c+u};return a===0&&(d.x=e.x,d.y=e.y),h===0&&(d.x=e.x),c===0&&(d.y=e.y),G.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,d),d}else{r.x<e.x?a=e.x-o-i:a=i-o-e.x;let u=c*a/h,d=r.x<e.x?r.x+h-a:r.x-h+a,f=r.y<e.y?r.y+u:r.y-u;return G.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:d,_y:f}),a===0&&(d=e.x,f=e.y),h===0&&(d=e.x),c===0&&(f=e.y),{x:d,y:f}}},"intersection"),ig=m((t,e)=>{G.warn("abc88 cutPathAtIntersect",t,e);let r=[],i=t[0],n=!1;return t.forEach(s=>{if(G.info("abc88 checking point",s,e),!PR(e,s)&&!n){const o=FR(e,i,s);G.debug("abc88 inside",s,i,o),G.debug("abc88 intersection",o,e);let a=!1;r.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?G.warn("abc88 no intersect",o,r):r.push(o),n=!0}else G.warn("abc88 outside",s,i),i=s,n||r.push(s)}),G.debug("returning points",r),r},"cutPathAtIntersect");function o1(t){const e=[],r=[];for(let i=1;i<t.length-1;i++){const n=t[i-1],s=t[i],o=t[i+1];(n.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-n.y)>5||n.y===s.y&&s.x===o.x&&Math.abs(s.x-n.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),r.push(i))}return{cornerPoints:e,cornerPointPositions:r}}m(o1,"extractCornerPoints");var ng=m(function(t,e,r){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n),o=r/s;return{x:e.x-o*i,y:e.y-o*n}},"findAdjacentPoint"),NR=m(function(t){const{cornerPointPositions:e}=o1(t),r=[];for(let i=0;i<t.length;i++)if(e.includes(i)){const n=t[i-1],s=t[i+1],o=t[i],a=ng(n,o,5),l=ng(s,o,5),c=l.x-a.x,h=l.y-a.y;r.push(a);const u=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(s.x-n.x)>10&&Math.abs(s.y-n.y)>=10){G.debug("Corner point fixing",Math.abs(s.x-n.x),Math.abs(s.y-n.y));const f=5;o.x===a.x?d={x:c<0?a.x-f+u:a.x+f-u,y:h<0?a.y-u:a.y+u}:d={x:c<0?a.x-u:a.x+u,y:h<0?a.y-f+u:a.y+f-u}}else G.debug("Corner point skipping fixing",Math.abs(s.x-n.x),Math.abs(s.y-n.y));r.push(d,l)}else r.push(t[i]);return r},"fixCorners"),jR=m(function(t,e,r,i,n,s,o){const{handDrawnSeed:a}=Ct();let l=e.points,c=!1;const h=n;var u=s;const d=[];for(const E in e.cssCompiledStyles)V0(E)||d.push(e.cssCompiledStyles[E]);u.intersect&&h.intersect&&(l=l.slice(1,e.points.length-1),l.unshift(h.intersect(l[0])),G.debug("Last point APA12",e.start,"-->",e.end,l[l.length-1],u,u.intersect(l[l.length-1])),l.push(u.intersect(l[l.length-1]))),e.toCluster&&(G.info("to cluster abc88",r.get(e.toCluster)),l=ig(e.points,r.get(e.toCluster).node),c=!0),e.fromCluster&&(G.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(l,null,2)),l=ig(l.reverse(),r.get(e.fromCluster).node).reverse(),c=!0);let f=l.filter(E=>!Number.isNaN(E.y));f=NR(f);let p=zs;switch(p=fa,e.curve){case"linear":p=fa;break;case"basis":p=zs;break;case"cardinal":p=Ey;break;case"bumpX":p=vy;break;case"bumpY":p=Cy;break;case"catmullRom":p=Ly;break;case"monotoneX":p=Oy;break;case"monotoneY":p=Py;break;case"natural":p=Ny;break;case"step":p=jy;break;case"stepAfter":p=qy;break;case"stepBefore":p=Dy;break;default:p=zs}const{x:g,y:b}=lC(e),x=PT().x(g).y(b).curve(p);let _;switch(e.thickness){case"normal":_="edge-thickness-normal";break;case"thick":_="edge-thickness-thick";break;case"invisible":_="edge-thickness-invisible";break;default:_="edge-thickness-normal"}switch(e.pattern){case"solid":_+=" edge-pattern-solid";break;case"dotted":_+=" edge-pattern-dotted";break;case"dashed":_+=" edge-pattern-dashed";break;default:_+=" edge-pattern-solid"}let T,C=x(f);const v=Array.isArray(e.style)?e.style:e.style?[e.style]:[];let R=v.find(E=>E?.startsWith("stroke:"));if(e.look==="handDrawn"){const E=rt.svg(t);Object.assign([],f);const z=E.path(C,{roughness:.3,seed:a});_+=" transition",T=wt(z).select("path").attr("id",e.id).attr("class"," "+_+(e.classes?" "+e.classes:"")).attr("style",v?v.reduce((k,S)=>k+";"+S,""):"");let I=T.attr("d");T.attr("d",I),t.node().appendChild(T.node())}else{const E=d.join(";"),z=v?v.reduce((S,L)=>S+L+";",""):"";let I="";e.animate&&(I=" edge-animation-fast"),e.animation&&(I=" edge-animation-"+e.animation);const k=E?E+";"+z+";":z;T=t.append("path").attr("d",C).attr("id",e.id).attr("class"," "+_+(e.classes?" "+e.classes:"")+(I??"")).attr("style",k),R=k.match(/stroke:([^;]+)/)?.[1]}let M="";(Ct().flowchart.arrowMarkerAbsolute||Ct().state.arrowMarkerAbsolute)&&(M=lm(!0)),G.info("arrowTypeStart",e.arrowTypeStart),G.info("arrowTypeEnd",e.arrowTypeEnd),MR(T,e,M,o,i,R);const O=Math.floor(l.length/2),P=l[O];je.isLabelCoordinateInPath(P,T.attr("d"))||(c=!0);let w={};return c&&(w.updatedPath=l),w.originalPath=e.points,w},"insertEdge"),DR=m((t,e,r,i)=>{e.forEach(n=>{rM[n](t,r,i)})},"insertMarkers"),qR=m((t,e,r)=>{G.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),HR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),zR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),WR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),UR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),VR=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),GR=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),YR=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),XR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),JR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),KR=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),ZR=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),QR=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),tM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),eM=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),rM={extension:qR,composition:HR,aggregation:zR,dependency:WR,lollipop:UR,point:VR,circle:GR,cross:YR,barb:XR,only_one:JR,zero_or_one:KR,one_or_more:ZR,zero_or_more:QR,requirement_arrow:tM,requirement_contains:eM},iM=DR,nM={common:Xi,getConfig:ee,insertCluster:fR,insertEdge:jR,insertEdgeLabel:IR,insertMarkers:iM,insertNode:a1,interpolateToCurve:Gh,labelHelper:ft,log:G,positionEdgeLabel:OR},ts={},l1=m(t=>{for(const e of t)ts[e.name]=e},"registerLayoutLoaders"),sM=m(()=>{l1([{name:"dagre",loader:m(async()=>await Tt(()=>import("./chunk-BAob7-BJ.js"),__vite__mapDeps([12,13,14,15,16,17,2,1,3,4,5,18])),"loader")}])},"registerDefaultLayoutLoaders");sM();var n3=m(async(t,e)=>{if(!(t.layoutAlgorithm in ts))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const r=ts[t.layoutAlgorithm];return(await r.loader()).render(t,e,nM,{algorithm:r.algorithm})},"render"),s3=m((t="",{fallback:e="dagre"}={})=>{if(t in ts)return t;if(e in ts)return G.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),sg={name:"mermaid",version:"11.10.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.0.0",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.0",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},aM=m(t=>{const{securityLevel:e}=Ct();let r=wt("body");if(e==="sandbox"){const s=wt(`#i${t}`).node()?.contentDocument??document;r=wt(s.body)}return r.select(`#${t}`)},"selectSvgElement"),c1="comm",h1="rule",u1="decl",oM="@import",lM="@namespace",cM="@keyframes",hM="@layer",d1=Math.abs,du=String.fromCharCode;function f1(t){return t.trim()}function Gs(t,e,r){return t.replace(e,r)}function uM(t,e,r){return t.indexOf(e,r)}function Ei(t,e){return t.charCodeAt(e)|0}function Ui(t,e,r){return t.slice(e,r)}function Xe(t){return t.length}function dM(t){return t.length}function Rs(t,e){return e.push(t),t}var uo=1,Vi=1,p1=0,Le=0,Pt=0,tn="";function fu(t,e,r,i,n,s,o,a){return{value:t,root:e,parent:r,type:i,props:n,children:s,line:uo,column:Vi,length:o,return:"",siblings:a}}function fM(){return Pt}function pM(){return Pt=Le>0?Ei(tn,--Le):0,Vi--,Pt===10&&(Vi=1,uo--),Pt}function qe(){return Pt=Le<p1?Ei(tn,Le++):0,Vi++,Pt===10&&(Vi=1,uo++),Pt}function Er(){return Ei(tn,Le)}function Ys(){return Le}function fo(t,e){return Ui(tn,t,e)}function es(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gM(t){return uo=Vi=1,p1=Xe(tn=t),Le=0,[]}function mM(t){return tn="",t}function ic(t){return f1(fo(Le-1,Yc(t===91?t+2:t===40?t+1:t)))}function yM(t){for(;(Pt=Er())&&Pt<33;)qe();return es(t)>2||es(Pt)>3?"":" "}function bM(t,e){for(;--e&&qe()&&!(Pt<48||Pt>102||Pt>57&&Pt<65||Pt>70&&Pt<97););return fo(t,Ys()+(e<6&&Er()==32&&qe()==32))}function Yc(t){for(;qe();)switch(Pt){case t:return Le;case 34:case 39:t!==34&&t!==39&&Yc(Pt);break;case 40:t===41&&Yc(t);break;case 92:qe();break}return Le}function xM(t,e){for(;qe()&&t+Pt!==57;)if(t+Pt===84&&Er()===47)break;return"/*"+fo(e,Le-1)+"*"+du(t===47?t:qe())}function _M(t){for(;!es(Er());)qe();return fo(t,Le)}function wM(t){return mM(Xs("",null,null,null,[""],t=gM(t),0,[0],t))}function Xs(t,e,r,i,n,s,o,a,l){for(var c=0,h=0,u=o,d=0,f=0,p=0,g=1,b=1,x=1,_=0,T="",C=n,v=s,R=i,M=T;b;)switch(p=_,_=qe()){case 40:if(p!=108&&Ei(M,u-1)==58){uM(M+=Gs(ic(_),"&","&\f"),"&\f",d1(c?a[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:M+=ic(_);break;case 9:case 10:case 13:case 32:M+=yM(p);break;case 92:M+=bM(Ys()-1,7);continue;case 47:switch(Er()){case 42:case 47:Rs(vM(xM(qe(),Ys()),e,r,l),l),(es(p||1)==5||es(Er()||1)==5)&&Xe(M)&&Ui(M,-1,void 0)!==" "&&(M+=" ");break;default:M+="/"}break;case 123*g:a[c++]=Xe(M)*x;case 125*g:case 59:case 0:switch(_){case 0:case 125:b=0;case 59+h:x==-1&&(M=Gs(M,/\f/g,"")),f>0&&(Xe(M)-u||g===0&&p===47)&&Rs(f>32?og(M+";",i,r,u-1,l):og(Gs(M," ","")+";",i,r,u-2,l),l);break;case 59:M+=";";default:if(Rs(R=ag(M,e,r,c,h,n,a,T,C=[],v=[],u,s),s),_===123)if(h===0)Xs(M,e,R,R,C,s,u,a,v);else{switch(d){case 99:if(Ei(M,3)===110)break;case 108:if(Ei(M,2)===97)break;default:h=0;case 100:case 109:case 115:}h?Xs(t,R,R,i&&Rs(ag(t,R,R,0,0,n,a,T,n,C=[],u,v),v),n,v,u,a,i?C:v):Xs(M,R,R,R,[""],v,0,a,v)}}c=h=f=0,g=x=1,T=M="",u=o;break;case 58:u=1+Xe(M),f=p;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&pM()==125)continue}switch(M+=du(_),_*g){case 38:x=h>0?1:(M+="\f",-1);break;case 44:a[c++]=(Xe(M)-1)*x,x=1;break;case 64:Er()===45&&(M+=ic(qe())),d=Er(),h=u=Xe(T=M+=_M(Ys())),_++;break;case 45:p===45&&Xe(M)==2&&(g=0)}}return s}function ag(t,e,r,i,n,s,o,a,l,c,h,u){for(var d=n-1,f=n===0?s:[""],p=dM(f),g=0,b=0,x=0;g<i;++g)for(var _=0,T=Ui(t,d+1,d=d1(b=o[g])),C=t;_<p;++_)(C=f1(b>0?f[_]+" "+T:Gs(T,/&\f/g,f[_])))&&(l[x++]=C);return fu(t,e,r,n===0?h1:a,l,c,h,u)}function vM(t,e,r,i){return fu(t,e,r,c1,du(fM()),Ui(t,2,-2),0,i)}function og(t,e,r,i,n){return fu(t,e,r,u1,Ui(t,0,i),Ui(t,i+1,-1),i,n)}function Xc(t,e){for(var r="",i=0;i<t.length;i++)r+=e(t[i],i,t,e)||"";return r}function CM(t,e,r,i){switch(t.type){case hM:if(t.children.length)break;case oM:case lM:case u1:return t.return=t.return||t.value;case c1:return"";case cM:return t.return=t.value+"{"+Xc(t.children,i)+"}";case h1:if(!Xe(t.value=t.props.join(",")))return""}return Xe(r=Xc(t.children,i))?t.return=t.value+"{"+r+"}":""}var SM=Uy(Object.keys,Object),kM=Object.prototype,TM=kM.hasOwnProperty;function EM(t){if(!eo(t))return SM(t);var e=[];for(var r in Object(t))TM.call(t,r)&&r!="constructor"&&e.push(r);return e}var Jc=ui(rr,"DataView"),Kc=ui(rr,"Promise"),Zc=ui(rr,"Set"),Qc=ui(rr,"WeakMap"),lg="[object Map]",AM="[object Object]",cg="[object Promise]",hg="[object Set]",ug="[object WeakMap]",dg="[object DataView]",LM=hi(Jc),BM=hi(Zn),RM=hi(Kc),MM=hi(Zc),$M=hi(Qc),Yr=Ki;(Jc&&Yr(new Jc(new ArrayBuffer(1)))!=dg||Zn&&Yr(new Zn)!=lg||Kc&&Yr(Kc.resolve())!=cg||Zc&&Yr(new Zc)!=hg||Qc&&Yr(new Qc)!=ug)&&(Yr=function(t){var e=Ki(t),r=e==AM?t.constructor:void 0,i=r?hi(r):"";if(i)switch(i){case LM:return dg;case BM:return lg;case RM:return cg;case MM:return hg;case $M:return ug}return e});var IM="[object Map]",OM="[object Set]",PM=Object.prototype,FM=PM.hasOwnProperty;function fg(t){if(t==null)return!0;if(ro(t)&&(_a(t)||typeof t=="string"||typeof t.splice=="function"||Uh(t)||Vh(t)||xa(t)))return!t.length;var e=Yr(t);if(e==IM||e==OM)return!t.size;if(eo(t))return!EM(t).length;for(var r in t)if(FM.call(t,r))return!1;return!0}var g1="c4",NM=m(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),jM=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CK8mMtyx.js");return{diagram:e}},__vite__mapDeps([19,20,2,1,3,4,5,18]));return{id:g1,diagram:t}},"loader"),DM={id:g1,detector:NM,loader:jM},qM=DM,m1="flowchart",HM=m((t,e)=>e?.flowchart?.defaultRenderer==="dagre-wrapper"||e?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(t),"detector"),zM=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CCCIdvel.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,2,1,3,4,5,18]));return{id:m1,diagram:t}},"loader"),WM={id:m1,detector:HM,loader:zM},UM=WM,y1="flowchart-v2",VM=m((t,e)=>e?.flowchart?.defaultRenderer==="dagre-d3"?!1:(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&e?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)),"detector"),GM=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CCCIdvel.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,2,1,3,4,5,18]));return{id:y1,diagram:t}},"loader"),YM={id:y1,detector:VM,loader:GM},XM=YM,b1="er",JM=m(t=>/^\s*erDiagram/.test(t),"detector"),KM=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BrqMLr9B.js");return{diagram:e}},__vite__mapDeps([26,23,24,25,2,1,3,4,5,18]));return{id:b1,diagram:t}},"loader"),ZM={id:b1,detector:JM,loader:KM},QM=ZM,x1="gitGraph",t$=m(t=>/^\s*gitGraph/.test(t),"detector"),e$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BMToxxnj.js");return{diagram:e}},__vite__mapDeps([27,28,29,30,1,14,16,17,2,3,4,5,18]));return{id:x1,diagram:t}},"loader"),r$={id:x1,detector:t$,loader:e$},i$=r$,_1="gantt",n$=m(t=>/^\s*gantt/.test(t),"detector"),s$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-B99zaibj.js");return{diagram:e}},__vite__mapDeps([31,2,1,3,4,5,32,33,34,18]));return{id:_1,diagram:t}},"loader"),a$={id:_1,detector:n$,loader:s$},o$=a$,w1="info",l$=m(t=>/^\s*info/.test(t),"detector"),c$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CKyA-B4i.js");return{diagram:e}},__vite__mapDeps([35,30,1,14,16,17,2,3,4,5,18]));return{id:w1,diagram:t}},"loader"),h$={id:w1,detector:l$,loader:c$},v1="pie",u$=m(t=>/^\s*pie/.test(t),"detector"),d$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-C5aK-hbc.js");return{diagram:e}},__vite__mapDeps([36,28,30,1,14,16,17,37,38,33,2,3,4,5,18]));return{id:v1,diagram:t}},"loader"),f$={id:v1,detector:u$,loader:d$},C1="quadrantChart",p$=m(t=>/^\s*quadrantChart/.test(t),"detector"),g$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-B3eQ_ba4.js");return{diagram:e}},__vite__mapDeps([39,32,33,34,2,1,3,4,5,18]));return{id:C1,diagram:t}},"loader"),m$={id:C1,detector:p$,loader:g$},y$=m$,S1="xychart",b$=m(t=>/^\s*xychart(-beta)?/.test(t),"detector"),x$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BQuT2Sni.js");return{diagram:e}},__vite__mapDeps([40,33,38,32,34,2,1,3,4,5,18]));return{id:S1,diagram:t}},"loader"),_$={id:S1,detector:b$,loader:x$},w$=_$,k1="requirement",v$=m(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),C$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BMWuKsf7.js");return{diagram:e}},__vite__mapDeps([41,23,24,2,1,3,4,5,18]));return{id:k1,diagram:t}},"loader"),S$={id:k1,detector:v$,loader:C$},k$=S$,T1="sequence",T$=m(t=>/^\s*sequenceDiagram/.test(t),"detector"),E$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-DLEMFQjW.js");return{diagram:e}},__vite__mapDeps([42,20,29,2,1,3,4,5,18]));return{id:T1,diagram:t}},"loader"),A$={id:T1,detector:T$,loader:E$},L$=A$,E1="class",B$=m((t,e)=>e?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t),"detector"),R$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-DvtK-ZOT.js");return{diagram:e}},__vite__mapDeps([43,44,22,23,24,2,1,3,4,5,18]));return{id:E1,diagram:t}},"loader"),M$={id:E1,detector:B$,loader:R$},$$=M$,A1="classDiagram",I$=m((t,e)=>/^\s*classDiagram/.test(t)&&e?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t),"detector"),O$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-RPrisssf.js");return{diagram:e}},__vite__mapDeps([45,44,22,23,24,2,1,3,4,5,18]));return{id:A1,diagram:t}},"loader"),P$={id:A1,detector:I$,loader:O$},F$=P$,L1="state",N$=m((t,e)=>e?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t),"detector"),j$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-DUmRX6vr.js");return{diagram:e}},__vite__mapDeps([46,47,23,24,13,14,15,16,2,1,3,4,5,18]));return{id:L1,diagram:t}},"loader"),D$={id:L1,detector:N$,loader:j$},q$=D$,B1="stateDiagram",H$=m((t,e)=>!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&e?.state?.defaultRenderer==="dagre-wrapper"),"detector"),z$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CwV0TLfP.js");return{diagram:e}},__vite__mapDeps([48,47,23,24,2,1,3,4,5,18]));return{id:B1,diagram:t}},"loader"),W$={id:B1,detector:H$,loader:z$},U$=W$,R1="journey",V$=m(t=>/^\s*journey/.test(t),"detector"),G$=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BiJt0Ile.js");return{diagram:e}},__vite__mapDeps([49,20,22,37,2,1,3,4,5,18]));return{id:R1,diagram:t}},"loader"),Y$={id:R1,detector:V$,loader:G$},X$=Y$,J$=m((t,e,r)=>{G.debug(`rendering svg for syntax error
`);const i=aM(e),n=i.append("g");i.attr("viewBox","0 0 2412 512"),cm(i,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),M1={draw:J$},K$=M1,Z$={db:{},renderer:M1,parser:{parse:m(()=>{},"parse")}},Q$=Z$,$1="flowchart-elk",tI=m((t,e={})=>/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&e?.flowchart?.defaultRenderer==="elk"?(e.layout="elk",!0):!1,"detector"),eI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CCCIdvel.js");return{diagram:e}},__vite__mapDeps([21,22,23,24,25,2,1,3,4,5,18]));return{id:$1,diagram:t}},"loader"),rI={id:$1,detector:tI,loader:eI},iI=rI,I1="timeline",nI=m(t=>/^\s*timeline/.test(t),"detector"),sI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-KbN_Uvxm.js");return{diagram:e}},__vite__mapDeps([50,37,2,1,3,4,5,18]));return{id:I1,diagram:t}},"loader"),aI={id:I1,detector:nI,loader:sI},oI=aI,O1="mindmap",lI=m(t=>/^\s*mindmap/.test(t),"detector"),cI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CLJUOUAx.js");return{diagram:e}},__vite__mapDeps([51,52,2,1,3,4,5,18]));return{id:O1,diagram:t}},"loader"),hI={id:O1,detector:lI,loader:cI},uI=hI,P1="kanban",dI=m(t=>/^\s*kanban/.test(t),"detector"),fI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-CbNutYQ2.js");return{diagram:e}},__vite__mapDeps([53,22,2,1,3,4,5,18]));return{id:P1,diagram:t}},"loader"),pI={id:P1,detector:dI,loader:fI},gI=pI,F1="sankey",mI=m(t=>/^\s*sankey(-beta)?/.test(t),"detector"),yI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-0luMpL6x.js");return{diagram:e}},__vite__mapDeps([54,38,33,2,1,3,4,5,18]));return{id:F1,diagram:t}},"loader"),bI={id:F1,detector:mI,loader:yI},xI=bI,N1="packet",_I=m(t=>/^\s*packet(-beta)?/.test(t),"detector"),wI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-C-yDx5yH.js");return{diagram:e}},__vite__mapDeps([55,28,30,1,14,16,17,2,3,4,5,18]));return{id:N1,diagram:t}},"loader"),vI={id:N1,detector:_I,loader:wI},j1="radar",CI=m(t=>/^\s*radar-beta/.test(t),"detector"),SI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-B_VTizGO.js");return{diagram:e}},__vite__mapDeps([56,28,30,1,14,16,17,2,3,4,5,18]));return{id:j1,diagram:t}},"loader"),kI={id:j1,detector:CI,loader:SI},D1="block",TI=m(t=>/^\s*block(-beta)?/.test(t),"detector"),EI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-DZe2Lwku.js");return{diagram:e}},__vite__mapDeps([57,22,17,14,13,25,2,1,3,4,5,18]));return{id:D1,diagram:t}},"loader"),AI={id:D1,detector:TI,loader:EI},LI=AI,q1="architecture",BI=m(t=>/^\s*architecture/.test(t),"detector"),RI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-DRgxaV-K.js");return{diagram:e}},__vite__mapDeps([58,28,30,1,14,16,17,52,2,3,4,5,18]));return{id:q1,diagram:t}},"loader"),MI={id:q1,detector:BI,loader:RI},$I=MI,H1="treemap",II=m(t=>/^\s*treemap/.test(t),"detector"),OI=m(async()=>{const{diagram:t}=await Tt(async()=>{const{diagram:e}=await import("./chunk-BL5cFjpd.js");return{diagram:e}},__vite__mapDeps([59,24,28,30,1,14,16,17,34,38,33,2,3,4,5,18]));return{id:H1,diagram:t}},"loader"),PI={id:H1,detector:II,loader:OI},pg=!1,po=m(()=>{pg||(pg=!0,ta("error",Q$,t=>t.toLowerCase().trim()==="error"),ta("---",{db:{clear:m(()=>{},"clear")},styles:{},renderer:{draw:m(()=>{},"draw")},parser:{parse:m(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:m(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),oc(iI,uI,$I),oc(qM,gI,F$,$$,QM,o$,h$,f$,k$,L$,XM,UM,oI,i$,U$,q$,X$,y$,xI,vI,w$,LI,kI,PI))},"addDiagrams"),FI=m(async()=>{G.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(ii).map(async([r,{detector:i,loader:n}])=>{if(n)try{uc(r)}catch{try{const{diagram:s,id:o}=await n();ta(o,s,i)}catch(s){throw G.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete ii[r],s}}}))).filter(r=>r.status==="rejected");if(e.length>0){G.error(`Failed to load ${e.length} external diagrams`);for(const r of e)G.error(r);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),NI="graphics-document document";function z1(t,e){t.attr("role",NI),e!==""&&t.attr("aria-roledescription",e)}m(z1,"setA11yDiagramInfo");function W1(t,e,r,i){if(t.insert!==void 0){if(r){const n=`chart-desc-${i}`;t.attr("aria-describedby",n),t.insert("desc",":first-child").attr("id",n).text(r)}if(e){const n=`chart-title-${i}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}m(W1,"addSVGa11yTitleDescription");var ri,th=(ri=class{constructor(e,r,i,n,s){this.type=e,this.text=r,this.db=i,this.parser=n,this.renderer=s}static async fromText(e,r={}){const i=ee(),n=mh(e,i);e=PL(e)+`
`;try{uc(n)}catch{const c=l2(n);if(!c)throw new Xg(`Diagram ${n} not found.`);const{id:h,diagram:u}=await c();ta(h,u)}const{db:s,parser:o,renderer:a,init:l}=uc(n);return o.parser&&(o.parser.yy=s),s.clear?.(),l?.(i),r.title&&s.setDiagramTitle?.(r.title),await o.parse(e),new ri(n,e,s,o,a)}async render(e,r){await this.renderer.draw(this.text,e,r,this)}getParser(){return this.parser}getType(){return this.type}},m(ri,"Diagram"),ri),gg=[],jI=m(()=>{gg.forEach(t=>{t()}),gg=[]},"attachFunctions"),DI=m(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function U1(t){const e=t.match(Yg);if(!e)return{text:t,metadata:{}};let r=oC(e[1],{schema:aC})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:t.slice(e[0].length),metadata:i}}m(U1,"extractFrontMatter");var qI=m(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),HI=m(t=>{const{text:e,metadata:r}=U1(t),{displayMode:i,title:n,config:s={}}=r;return i&&(s.gantt||(s.gantt={}),s.gantt.displayMode=i),{title:n,config:s,text:e}},"processFrontmatter"),zI=m(t=>{const e=je.detectInit(t)??{},r=je.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some(({type:i})=>i==="wrap"):r?.type==="wrap"&&(e.wrap=!0),{text:CL(t),directive:e}},"processDirectives");function pu(t){const e=qI(t),r=HI(e),i=zI(r.text),n=Zh(r.config,i.directive);return t=DI(i.text),{code:t,title:r.title,config:n}}m(pu,"preprocessDiagram");function V1(t){const e=new TextEncoder().encode(t),r=Array.from(e,i=>String.fromCodePoint(i)).join("");return btoa(r)}m(V1,"toBase64");var WI=5e4,UI="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",VI="sandbox",GI="loose",YI="http://www.w3.org/2000/svg",XI="http://www.w3.org/1999/xlink",JI="http://www.w3.org/1999/xhtml",KI="100%",ZI="100%",QI="border:0;margin:0;",tO="margin:0",eO="allow-top-navigation-by-user-activation allow-popups",rO='The "iframe" tag is not supported by your browser.',iO=["foreignobject"],nO=["dominant-baseline"];function gu(t){const e=pu(t);return Zs(),S2(e.config??{}),e}m(gu,"processAndSetConfigs");async function G1(t,e){po();try{const{code:r,config:i}=gu(t);return{diagramType:(await X1(r)).type,config:i}}catch(r){if(e?.suppressErrors)return!1;throw r}}m(G1,"parse");var mg=m((t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),sO=m((t,e=new Map)=>{let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const o=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(a=>{fg(a.styles)||o.forEach(l=>{r+=mg(a.id,l,a.styles)}),fg(a.textStyles)||(r+=mg(a.id,"tspan",(a?.textStyles||[]).map(l=>l.replace("color","fill"))))})}return r},"createCssStyles"),aO=m((t,e,r,i)=>{const n=sO(t,r),s=z2(e,n,t.themeVariables);return Xc(wM(`${i}{${s}}`),CM)},"createUserStyles"),oO=m((t="",e,r)=>{let i=t;return!r&&!e&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=di(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),lO=m((t="",e)=>{const r=e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":ZI,i=V1(`<body style="${tO}">${t}</body>`);return`<iframe style="width:${KI};height:${r};${QI}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${eO}">
  ${rO}
</iframe>`},"putIntoIFrame"),yg=m((t,e,r,i,n)=>{const s=t.append("div");s.attr("id",r),i&&s.attr("style",i);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",YI);return n&&o.attr("xmlns:xlink",n),o.append("g"),t},"appendDivSvgG");function eh(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}m(eh,"sandboxedIframe");var cO=m((t,e,r,i)=>{t.getElementById(e)?.remove(),t.getElementById(r)?.remove(),t.getElementById(i)?.remove()},"removeExistingElements"),hO=m(async function(t,e,r){po();const i=gu(e);e=i.code;const n=ee();G.debug(n),e.length>(n?.maxTextSize??WI)&&(e=UI);const s="#"+t,o="i"+t,a="#"+o,l="d"+t,c="#"+l,h=m(()=>{const I=wt(d?a:c).node();I&&"remove"in I&&I.remove()},"removeTempElements");let u=wt("body");const d=n.securityLevel===VI,f=n.securityLevel===GI,p=n.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),d){const z=eh(wt(r),o);u=wt(z.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=wt(r);yg(u,t,l,`font-family: ${p}`,XI)}else{if(cO(document,t,l,o),d){const z=eh(wt("body"),o);u=wt(z.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=wt("body");yg(u,t,l)}let g,b;try{g=await th.fromText(e,{title:i.title})}catch(z){if(n.suppressErrorRendering)throw h(),z;g=await th.fromText("error"),b=z}const x=u.select(c).node(),_=g.type,T=x.firstChild,C=T.firstChild,v=g.renderer.getClasses?.(e,g),R=aO(n,_,v,s),M=document.createElement("style");M.innerHTML=R,T.insertBefore(M,C);try{await g.renderer.draw(e,t,sg.version,g)}catch(z){throw n.suppressErrorRendering?h():K$.draw(e,t,sg.version),z}const O=u.select(`${c} svg`),P=g.db.getAccTitle?.(),w=g.db.getAccDescription?.();J1(_,O,P,w),u.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",JI);let E=u.select(c).node().innerHTML;if(G.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),E=oO(E,d,Ht(n.arrowMarkerAbsolute)),d){const z=u.select(c+" svg").node();E=lO(E,z)}else f||(E=Fi.sanitize(E,{ADD_TAGS:iO,ADD_ATTR:nO,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(jI(),b)throw b;return h(),{diagramType:_,svg:E,bindFunctions:g.db.bindFunctions}},"render");function Y1(t={}){const e=Kt({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),v2(e),e?.theme&&e.theme in yr?e.themeVariables=yr[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=yr.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?w2(e):em();gh(r.logLevel),po()}m(Y1,"initialize");var X1=m((t,e={})=>{const{code:r}=pu(t);return th.fromText(r,e)},"getDiagramFromText");function J1(t,e,r,i){z1(e,t),W1(e,r,i,e.attr("id"))}m(J1,"addA11yInfo");var li=Object.freeze({render:hO,parse:G1,getDiagramFromText:X1,initialize:Y1,getConfig:ee,setConfig:rm,getSiteConfig:em,updateSiteConfig:C2,reset:m(()=>{Zs()},"reset"),globalReset:m(()=>{Zs(Ni)},"globalReset"),defaultConfig:Ni});gh(ee().logLevel);Zs(ee());var uO=m((t,e,r)=>{G.warn(t),Kh(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),K1=m(async function(t={querySelector:".mermaid"}){try{await dO(t)}catch(e){if(Kh(e)&&G.error(e.str),wr.parseError&&wr.parseError(e),!t.suppressErrors)throw G.error("Use the suppressErrors option to suppress these errors"),e}},"run"),dO=m(async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){const i=li.getConfig();G.debug(`${t?"":"No "}Callback function found`);let n;if(r)n=r;else if(e)n=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");G.debug(`Found ${n.length} diagrams`),i?.startOnLoad!==void 0&&(G.debug("Start On Load: "+i?.startOnLoad),li.updateSiteConfig({startOnLoad:i?.startOnLoad}));const s=new je.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const a=[];for(const l of Array.from(n)){if(G.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=Cb(je.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=je.detectInit(o);h&&G.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:d}=await e_(c,o,l);l.innerHTML=u,t&&await t(c),d&&d(l)}catch(u){uO(u,a,wr.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),Z1=m(function(t){li.initialize(t)},"initialize"),fO=m(async function(t,e,r){G.warn("mermaid.init is deprecated. Please use run instead."),t&&Z1(t);const i={postRenderCallback:r,querySelector:".mermaid"};typeof e=="string"?i.querySelector=e:e&&(e instanceof HTMLElement?i.nodes=[e]:i.nodes=e),await K1(i)},"init"),pO=m(async(t,{lazyLoad:e=!0}={})=>{po(),oc(...t),e===!1&&await FI()},"registerExternalDiagrams"),Q1=m(function(){if(wr.startOnLoad){const{startOnLoad:t}=li.getConfig();t&&wr.run().catch(e=>G.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",Q1,!1);var gO=m(function(t){wr.parseError=t},"setParseErrorHandler"),Ra=[],nc=!1,t_=m(async()=>{if(!nc){for(nc=!0;Ra.length>0;){const t=Ra.shift();if(t)try{await t()}catch(e){G.error("Error executing queue",e)}}nc=!1}},"executeQueue"),mO=m(async(t,e)=>new Promise((r,i)=>{const n=m(()=>new Promise((s,o)=>{li.parse(t,e).then(a=>{s(a),r(a)},a=>{G.error("Error parsing",a),wr.parseError?.(a),o(a),i(a)})}),"performCall");Ra.push(n),t_().catch(i)}),"parse"),e_=m((t,e,r)=>new Promise((i,n)=>{const s=m(()=>new Promise((o,a)=>{li.render(t,e,r).then(l=>{o(l),i(l)},l=>{G.error("Error parsing",l),wr.parseError?.(l),a(l),n(l)})}),"performCall");Ra.push(s),t_().catch(n)}),"render"),yO=m(()=>Object.keys(ii).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),wr={startOnLoad:!0,mermaidAPI:li,parse:mO,render:e_,init:fO,run:K1,registerExternalDiagrams:pO,registerLayoutLoaders:l1,initialize:Z1,parseError:void 0,contentLoaded:Q1,setParseErrorHandler:gO,detectType:mh,registerIconPacks:DB,getRegisteredDiagramsMetadata:yO},bg=wr;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const Ms=({definition:t,title:e,className:r,config:i={}})=>{const n=ae.useRef(null);return ae.useEffect(()=>{(async()=>{if(n.current)try{const o={startOnLoad:!1,theme:"default",securityLevel:"loose"};bg.initialize({...o,...i});const a=`mermaid-diagram-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,{svg:l}=await bg.render(a,t);n.current&&(n.current.innerHTML=l)}catch(o){console.error("Error rendering Mermaid diagram:",o),n.current&&(n.current.innerHTML="<div>Diagram konnte nicht gerendert werden.</div>")}})()},[t,i]),y.jsxs("div",{className:`${Y({margin:"20px 0",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",textAlign:"center"})} ${r||""}`,children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"16px",color:"#374151"}),children:e}),y.jsx("div",{ref:n,className:Y({"& svg":{maxWidth:"100%",height:"auto"}})})]})},bO=`graph TD
    R1["R<br/>(Request 1)"] --> H1["H = hash(R)"]
    R2["R<br/>(Request 2)"] --> H2["H = hash(R)"]
    R3["R<br/>(Request 3)"] --> H3["H = hash(R)"]
    R4["R<br/>(Request 4)"] --> H4["H = hash(R)"]
    
    H1 --> H12["H = hash(H + H)"]
    H2 --> H12
    H3 --> H34["H = hash(H + H)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H + H)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    
    class R1,R2,R3,R4 requestNode
    class H1,H2,H3,H4,H12,H34 hashNode
    class ROOT rootNode`,xO=`sequenceDiagram
    Actor User
    participant Contract as GenImNFT Contract
    
    participant Serverless as Serverless Function
    participant AI as FLUX AI API
    participant S3 as S3 Storage
    Actor ServiceProvider as Image Creator Wallet

    User->>Contract: 1. Pay ~$0.10 ETH
    Contract->>Contract: 2. safeMint() creates NFT
    Note over Contract: NFT starts with placeholder image
    Contract->>Serverless: 3. Trigger function
    Serverless->>AI: 4. Call FLUX AI API
    AI-->>Serverless: Generated image data
    Serverless->>S3: 5. Upload to S3 storage
    S3-->>Serverless: Image URL
    Serverless->>Contract: 6. Update NFT metadata
    Note over Contract: NFT now has final image
    Contract->>ServiceProvider: 7. Auto-pay service provider
    ServiceProvider-->>Contract: Payment confirmed`,_O=`graph TD
    R1["R<br/>(Request 1)"] --> H1["H = hash(R)"]
    R2["R<br/>(Request 2)"] --> H2["H = hash(R)"]
    R3["R<br/>(Request 3)"] --> H3["H = hash(R)"]
    R4["R<br/>(Request 4)"] --> H4["H = hash(R)"]
    
    H1 --> H12["H = hash(H + H)"]
    H2 --> H12
    H3 --> H34["H = hash(H + H)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H + H)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    classDef proofPath fill:#fef3c7,stroke:#f59e0b,stroke-width:3px
    classDef proofNode fill:#ecfdf5,stroke:#10b981,stroke-width:2px
    
    class R1,R2,R4 requestNode
    class H1,H2 hashNode
    class ROOT rootNode
    class R3 proofPath
    class H3,H34 proofPath
    class H4,H12 proofNode`,wO=`sequenceDiagram
    Actor Alice as Alice
    participant Contract as LLM Contract
    participant Serverless as Serverless Function
    participant LLM as LLM API
    participant MerkleTree as Merkle Tree on S3 Storage
    Actor Blockchain as LLM Wallet

    Note over Alice,Contract: Phase 1: Prepaid Deposit
    Alice->>Contract: depositForLLM() - $50
    Contract->>Contract: Update balance[Alice] = $50

    Note over Alice,Blockchain: Phase 2: LLM Request Processing (Off-chain)
    Alice->>Serverless: Request: "Analyze sentiment"
    Serverless->>Contract: Check balance: Alice $50  $2 
    Serverless->>LLM: Call LLM API
    LLM-->>Serverless: Generated response
    Serverless-->>Alice: LLM Response
    Serverless->>MerkleTree: Create leaf from call

    Note over Serverless,MerkleTree: Phase 3: Batch Trigger (Once the Merkle tree is ready)
    MerkleTree->>MerkleTree: Calculate root hash
    MerkleTree->>MerkleTree: Generate proof for Alice's request

    Note over Contract,Blockchain: Phase 4: Atomic Settlement (On-chain)
    MerkleTree->>Contract: processBatch(root, requests, proofs)
    Contract->>Contract: Verify Alice's proof
    Contract->>Contract: Deduct: Alice -= $2
    Contract->>Contract: Mark batch as processed
    Contract->>Blockchain: Single transaction ($15 gas for entire batch)
    Contract-->>Alice: Settlement confirmed + individual proof`,vO={title:"A draft on Merkle Trees for LLM API Batching",publishing_date:"2025-07-29",tokenID:38},$s=["0xUser1Address...","0xUser2Address...","0xUser3Address...","0xUser4Address...","0xUser5Address..."],xg=["Analyze the sentiment of this customer review: 'The product is amazing!'","Translate this text to German: 'Hello, how are you today?'","Write a short Python function to calculate fibonacci numbers","Explain quantum computing in simple terms","Generate a creative story about a time-traveling cat","Summarize the benefits of renewable energy","Create a marketing strategy for a new mobile app","Debug this JavaScript code: console.log(hello world)"],ti={merkleRoot:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",requests:[{id:1,owner:"0xUser1Address...",prompt:"Analyze the sentiment of this customer review: 'The product is amazing!'",leafData:{id:1,timestamp:"2024-01-15T10:30:00.000Z",tokenCount:150,wallet:"0xUser1Address..."},leafHash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"},{id:2,owner:"0xUser2Address...",prompt:"Translate this text to German: 'Hello, how are you today?'",leafData:{id:2,timestamp:"2024-01-15T10:32:00.000Z",tokenCount:120,wallet:"0xUser2Address..."},leafHash:"0x2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c"},{id:3,owner:"0xUser3Address...",prompt:"Write a short Python function to calculate fibonacci numbers",leafData:{id:3,timestamp:"2024-01-15T10:35:00.000Z",tokenCount:180,wallet:"0xUser3Address..."},leafHash:"0x3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d"}]},CO=async t=>{const e=ti.requests[t],r=ti.requests.map(a=>[a.leafData.id,a.leafData.timestamp,a.leafData.tokenCount,a.leafData.wallet]),i=["uint256","string","uint256","string"],n=Pi.StandardMerkleTree.of(r,i),s=n.getProof(t),o=n.root;return{leafIndex:t,leafData:e.leafData,leafHash:e.leafHash,proof:s.map((a,l)=>({data:a,position:l%2===0?"left":"right"})),root:o}},SO=async t=>{try{const r=ti.requests.map(u=>[u.leafData.id,u.leafData.timestamp,u.leafData.tokenCount,u.leafData.wallet]),i=["uint256","string","uint256","string"],n=Pi.StandardMerkleTree.of(r,i),s=[t.leafData.id,t.leafData.timestamp,t.leafData.tokenCount,t.leafData.wallet],o=t.proof.map(u=>u.data),a=Pi.StandardMerkleTree.verify(n.root,i,s,o);let l=!1,c=-1;for(const[u,d]of n.entries())if(JSON.stringify(d)===JSON.stringify(s)){l=!0,c=u;break}const h=[" Used OpenZeppelin StandardMerkleTree.verify()",` Leaf Data: [${s.join(", ")}]`,` Tree Root: ${n.root.substring(0,16)}...`,` Proof Root: ${t.root.substring(0,16)}...`,` Leaf Index: ${c} (expected: ${t.leafIndex})`,` Root Match: ${n.root===t.root}`,` Leaf Exists: ${l}`,`${a?" Verification: VALID":" Verification: INVALID"}`];return{isValid:a&&l&&n.root===t.root,message:a&&l?"Proof is valid! Alice's payment is confirmed.":"Proof is invalid! This payment cannot be verified.",steps:h}}catch(e){return console.error("Proof validation failed:",e),{isValid:!1,message:"Error validating proof: "+e.message,steps:[]}}},kO=()=>{const[t,e]=ae.useState(0),[r,i]=ae.useState(null),[n,s]=ae.useState(""),[o,a]=ae.useState(null),[l,c]=ae.useState("generate"),h=async()=>{try{const f=await CO(t);i(f)}catch(f){console.error("Error generating proof:",f)}},u=async()=>{try{const f=JSON.parse(n),p=await SO(f);a(p)}catch(f){console.error("Proof validation failed:",f),a({isValid:!1,message:"Invalid JSON format",steps:[]})}},d=async f=>{try{await navigator.clipboard.writeText(f)}catch(p){console.error("Failed to copy to clipboard:",p)}};return y.jsxs("div",{className:Y({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[y.jsx("h3",{className:Y({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:" Interactive Proof Demo: Alice's Story"}),y.jsxs("div",{className:Y({marginBottom:"20px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #d1d5db"}),children:[y.jsxs("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:["Sample Batch (Merkle Root: ",ti.merkleRoot.substring(0,20),"...)"]}),y.jsx("div",{className:Y({display:"grid",gap:"8px"}),children:ti.requests.map((f,p)=>y.jsxs("div",{className:Y({padding:"8px 12px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"13px"}),children:[y.jsx("strong",{children:f.owner})," (R",y.jsx("sub",{children:p+1}),"): ",f.prompt," - ",f.leafData.tokenCount," tokens"]},f.id))})]}),y.jsx("div",{className:Y({marginBottom:"16px",borderBottom:"1px solid #e5e7eb"}),children:y.jsxs("div",{className:Y({display:"flex",gap:"0"}),children:[y.jsx("button",{onClick:()=>c("generate"),className:Y({padding:"8px 16px",backgroundColor:l==="generate"?"#f9fafb":"transparent",color:l==="generate"?"#374151":"#6b7280",border:l==="generate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:l==="generate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:l==="generate"?"medium":"normal"}),children:"Generate Proof"}),y.jsx("button",{onClick:()=>c("validate"),className:Y({padding:"8px 16px",backgroundColor:l==="validate"?"#f9fafb":"transparent",color:l==="validate"?"#374151":"#6b7280",border:l==="validate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:l==="validate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:l==="validate"?"medium":"normal"}),children:"Validate Proof"})]})}),l==="generate"&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 1: Select User to Generate Proof"}),y.jsx("select",{value:t,onChange:f=>e(Number(f.target.value)),className:Y({width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",marginBottom:"12px"}),children:ti.requests.map((f,p)=>y.jsxs("option",{value:p,children:[f.owner," - ",f.prompt]},f.id))}),y.jsx("button",{onClick:h,className:Y({padding:"8px 16px",backgroundColor:"#374151",color:"white",border:"1px solid #374151",borderRadius:"4px",cursor:"pointer",fontSize:"14px","&:hover":{backgroundColor:"#4b5563",borderColor:"#4b5563"}}),children:"Generate Merkle Proof"})]}),r&&y.jsxs("div",{className:Y({padding:"16px",backgroundColor:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsxs("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px",color:"#374151"}),children:["Generated Proof for ",ti.requests[t].owner]}),y.jsxs("div",{className:Y({marginBottom:"12px"}),children:[y.jsx("strong",{children:"Proof Path:"}),y.jsx("div",{className:Y({fontSize:"12px",fontFamily:"monospace",marginTop:"4px"}),children:r.proof.map((f,p)=>y.jsxs("div",{children:["Level ",p+1,": ",f.data.substring(0,20),"... (",f.position,")"]},p))})]}),y.jsxs("div",{className:Y({marginBottom:"12px"}),children:[y.jsx("strong",{children:"Complete Proof JSON:"}),y.jsxs("div",{className:Y({position:"relative"}),children:[y.jsx("pre",{className:Y({fontSize:"11px",fontFamily:"monospace",backgroundColor:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid #d1d5db",overflow:"auto",maxHeight:"200px",marginTop:"4px"}),children:JSON.stringify(r,null,2)}),y.jsx("button",{onClick:()=>d(JSON.stringify(r,null,2)),className:Y({position:"absolute",top:"8px",right:"8px",padding:"4px 8px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),children:"Copy"})]})]})]})]}),l==="validate"&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 2: Validate a Proof"}),y.jsx("label",{className:Y({display:"block",fontSize:"14px",marginBottom:"8px"}),children:"Paste Proof JSON:"}),y.jsx("textarea",{value:n,onChange:f=>s(f.target.value),placeholder:"Paste the complete proof JSON here...",className:Y({width:"100%",height:"120px",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace",marginBottom:"12px",resize:"vertical"})}),y.jsx("button",{onClick:u,disabled:!n.trim(),className:Y({padding:"8px 16px",backgroundColor:n.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:n.trim()?"pointer":"not-allowed",fontSize:"14px","&:hover":n.trim()?{backgroundColor:"#4b5563"}:{}}),children:"Validate Proof"})]}),o&&y.jsxs("div",{className:Y({padding:"16px",backgroundColor:o.isValid?"#f9fafb":"#fef2f2",borderRadius:"4px",border:`1px solid ${o.isValid?"#d1d5db":"#fecaca"}`}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Validation Result"}),y.jsx("div",{className:Y({fontSize:"14px",fontWeight:"medium",marginBottom:"12px",color:o.isValid?"#166534":"#dc2626"}),children:o.message}),o.steps.length>0&&y.jsxs("div",{children:[y.jsx("strong",{children:"Verification Steps:"}),y.jsx("div",{className:Y({marginTop:"8px"}),children:o.steps.map((f,p)=>y.jsx("div",{className:Y({fontSize:"12px",fontFamily:"monospace",backgroundColor:"#fff",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb",marginBottom:"4px"}),children:f},p))})]})]})]})]})},TO=async t=>{if(t.length===0)return"";const e=t.map(n=>[n.leafData.id,n.leafData.timestamp,n.leafData.tokenCount,n.leafData.wallet]),r=["uint256","string","uint256","string"];return Pi.StandardMerkleTree.of(e,r).root},EO=async t=>{if(t.length===0)return"";const e=t.map(s=>[s.leafData.id,s.leafData.timestamp,s.leafData.tokenCount,s.leafData.wallet]),r=["uint256","string","uint256","string"],i=Pi.StandardMerkleTree.of(e,r);let n=`Merkle Tree (OpenZeppelin StandardMerkleTree):
`;n+=`Root: ${i.root.substring(0,16)}...
`,n+=`
Tree Structure:
`;for(const[s,o]of i.entries()){const a=i.leafHash(o);n+=`Leaf ${s+1}: ${a.substring(0,16)}... (${o[0]}, ${o[3]})
`}return n},_g=4,AO=()=>{const[t,e]=ae.useState([]),[r,i]=ae.useState(""),[n,s]=ae.useState(""),[o,a]=ae.useState(!1),[l,c]=ae.useState(1),[h,u]=ae.useState(""),[d,f]=ae.useState($s[0]),p=async(_,T)=>{const C={id:l,timestamp:new Date().toISOString(),tokenCount:Math.floor(Math.random()*200)+100,wallet:_},v=[C.id,C.timestamp,C.tokenCount,C.wallet],R=["uint256","string","uint256","string"],O=Pi.StandardMerkleTree.of([v],R).leafHash(v),P=["The sentiment of this review is positive, indicating customer satisfaction.","Hallo, wie geht es dir heute?","Here's a Python function: def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)","Quantum computing uses quantum mechanical phenomena like superposition and entanglement to process information.","Once upon a time, a curious cat named Whiskers discovered a mysterious clock that could bend time...","Renewable energy reduces carbon emissions, creates jobs, and provides sustainable power solutions.","Focus on user experience, social media marketing, and influencer partnerships for app growth.","Fixed code: console.log('hello world'); // Missing quotes around string"],w=P[Math.floor(Math.random()*P.length)],E={id:l,prompt:T,model:"gpt-4-turbo",recipient:_,estimatedTokens:C.tokenCount,response:w,leafData:C,leafHash:O};return e(z=>[...z,E]),c(z=>z+1),u(""),E};ae.useEffect(()=>{(async()=>{if(t.length>=_g&&!o){const T=await TO(t),C=await EO(t);i(T),s(C),a(!0)}})()},[t.length,o]);const g=async()=>{h.trim()&&await p(d,h)},b=async()=>{const _=xg[Math.floor(Math.random()*xg.length)],T=$s[Math.floor(Math.random()*$s.length)];f(T),await p(T,_)},x=()=>{e([]),i(""),s(""),a(!1),c(1),u("")};return y.jsxs("div",{className:Y({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[y.jsx("h3",{className:Y({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:" Interactive LLM Batch Processing Demo"}),y.jsx("div",{className:Y({marginBottom:"20px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"}),children:y.jsxs("p",{className:Y({fontSize:"14px",color:"#1e40af",marginBottom:"8px"}),children:[y.jsx("strong",{children:"How it works:"})," Send LLM requests and get immediate responses. After ",_g," ","requests, a Merkle tree is automatically created for cost-efficient blockchain settlement."]})}),y.jsxs("div",{className:Y({marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem"}),children:"Send LLM Request"}),y.jsxs("div",{className:Y({marginBottom:"0.75rem"}),children:[y.jsx("label",{className:Y({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Wallet Address:"}),y.jsx("select",{value:d,onChange:_=>f(_.target.value),className:Y({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.85rem"}),children:$s.map(_=>y.jsx("option",{value:_,children:_},_))})]}),y.jsxs("div",{className:Y({marginBottom:"0.75rem"}),children:[y.jsx("label",{className:Y({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Prompt:"}),y.jsx("input",{type:"text",value:h,onChange:_=>u(_.target.value),placeholder:"Enter your LLM prompt...",className:Y({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),onKeyPress:_=>_.key==="Enter"&&g()})]}),y.jsxs("div",{className:Y({display:"flex",gap:"0.5rem",fontSize:"0.85rem"}),children:[y.jsx("button",{onClick:g,disabled:!h.trim(),className:Y({padding:"0.5rem 1rem",backgroundColor:h.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:h.trim()?"pointer":"not-allowed",transition:"background-color 0.2s","&:hover":{backgroundColor:h.trim()?"#4b5563":"#9ca3af"}}),children:"Send Request"}),y.jsx("button",{onClick:b,className:Y({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#4b5563"}}),children:"Send Random Request"}),y.jsx("button",{onClick:x,className:Y({padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#dc2626"}}),children:"Reset Demo"})]})]}),o&&y.jsxs("div",{className:Y({padding:"0.75rem",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"4px",marginBottom:"1rem"}),children:[y.jsx("strong",{children:" Merkle Root:"})," ",y.jsx("code",{className:Y({fontSize:"0.8rem"}),children:r}),y.jsx("div",{className:Y({fontSize:"0.8rem",color:"#166534",marginTop:"0.25rem"}),children:"All requests can now be processed with a single blockchain transaction!"}),n&&y.jsxs("div",{className:Y({marginTop:"0.75rem"}),children:[y.jsx("strong",{children:"Tree Structure:"}),y.jsx("pre",{className:Y({fontSize:"0.7rem",fontFamily:"monospace",backgroundColor:"#fff",padding:"0.5rem",borderRadius:"4px",border:"1px solid #bbf7d0",marginTop:"0.25rem",lineHeight:"1.4",overflow:"auto"}),children:n})]})]}),y.jsx("div",{className:Y({maxHeight:"400px",overflowY:"auto"}),children:t.length===0?y.jsx("div",{className:Y({padding:"1.5rem",textAlign:"center",color:"#6b7280",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:"No requests yet. Send your first LLM request above! "}):t.map((_,T)=>y.jsxs("div",{className:Y({padding:"1rem",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"4px",marginBottom:"0.75rem"}),children:[y.jsxs("div",{className:Y({marginBottom:"0.5rem"}),children:[y.jsx("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Prompt (not part of Merkle-Leafs):"}),y.jsx("div",{className:Y({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",marginBottom:"0.3rem",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:_.prompt}),y.jsx("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Response (not part of Merkle-Leafs):"}),y.jsx("div",{className:Y({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:_.response})]}),_.leafData&&y.jsxs("div",{className:Y({marginBottom:"0.5rem"}),children:[y.jsxs("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Data R",y.jsx("sub",{children:T+1})," (used for hash):"]}),y.jsx("pre",{className:Y({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.45rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",overflow:"auto",lineHeight:"1.3"}),children:JSON.stringify(_.leafData,null,2)})]}),_.leafHash&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Hash H",y.jsx("sub",{children:T+1}),":"]}),y.jsx("code",{className:Y({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#f3f4f6",padding:"0.22rem 0.5rem",borderRadius:"3px",border:"1px solid #e5e7eb",wordBreak:"break-all",display:"block"}),children:_.leafHash})]})]},_.id))})]})};function LO(){return y.jsxs("article",{children:[y.jsx("section",{children:y.jsx("p",{children:"The integration of Large Language Models (LLMs) into my website is an exciting possibility. But one problem remains: How can I reduce the blockchain transaction costs when users need multiple LLM API calls in an application? In this blog post, I will explore the possible setup and it might be extend through merkle trees."})}),y.jsxs("section",{children:[y.jsx("h2",{children:"The Current AI Setup for Image Generation"}),y.jsxs("p",{children:["Before diving into Merkle tree optimizations, let's examine how my current NFT-based AI image generation system works. My existing system uses the"," ",y.jsx("a",{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:"GenImNFT contract"})," ","on Optimism to coordinate between users, payments, and AI image generation:"]}),y.jsx(Ms,{definition:xO,title:"Workflow for Image Generation",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),y.jsx("p",{children:"This allowed me to set up a trustless system where any user with a wallet and optimism balance can access and only pay for successfully generated images, and the service is compensated automatically upon delivery."}),y.jsxs("div",{children:[y.jsx("h3",{children:"The Challenge with this system in the LLM context"}),y.jsx("p",{children:"While this system works great for my image generator, it faces limitations when scaling to multiple LLM API calls:"}),y.jsxs("ul",{children:[y.jsx("li",{children:" Every LLM request = Separate blockchain transaction"}),y.jsx("li",{children:" Gas costs multiply: 10 requests = 10 gas fees"}),y.jsx("li",{children:" User experience: Multiple wallet confirmations"}),y.jsx("li",{children:" Economic barrier: High costs limit adoption"})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Example:"})," If a user wants to generate 10 AI images for a project, they currently need 10 separate transactions costing ~$1.00 in total, plus the complexity of multiple wallet interactions."]})]}),y.jsxs("div",{children:[y.jsx("h3",{children:"Why This Setup Might benefit from a Merkle Tree Optimization"}),y.jsx("p",{children:"The current GenImNFT system proves that blockchain-AI integration works, but to make it truly scalable for multiple LLM interactions, we need:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Batch multiple requests into single transactions"}),y.jsx("li",{children:"Reduce per-request gas costs dramatically"}),y.jsx("li",{children:"Maintain payment security and user experience"}),y.jsx("li",{children:"Enable complex AI workflows without cost barriers"})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{children:"How Merkle Trees Work"}),y.jsx("p",{children:"A Merkle tree is a binary tree structure where each leaf represents a data element (in our case, an LLM request), and each parent node contains a cryptographic hash of its children. The mathematical foundation is:"}),y.jsx(Ms,{definition:bO,title:"Merkle Tree Mathematical Foundation"}),y.jsx("p",{children:"This single root hash can represent an entire batch of requests, enabling us to register thousands of LLM requests with just one blockchain transaction while maintaining cryptographic proof of each individual request."}),y.jsx("p",{children:"With Merkle Trees, we can bundle multiple LLM API payments into a single blockchain transaction. Try it in the interactive demo:"}),y.jsx(AO,{})]}),y.jsxs("section",{children:[y.jsx("h3",{children:"Proving Individual Transactions with Merkle Proofs"}),y.jsx("p",{children:"Now that we've seen how to batch LLM requests into a Merkle tree, there is actually another cool feature possible. The user can verify the validity of the tree with fairly reduced information."}),y.jsxs("p",{children:["A Merkle proof is a cryptographic proof that allows the user, we name her Alice, to demonstrate that her transaction is included in the Merkle tree without revealing any other transactions. To prove that Alice's transaction R",y.jsx("sub",{children:"3"}),' is in the tree, she provides a "proof path" - the minimum set of hash values needed to reconstruct the path from her leaf to the root:']}),y.jsxs("figure",{children:[y.jsx(Ms,{definition:_O,title:" Merkle Proof Path for Request 3 (R)"}),y.jsxs("figcaption",{children:["Visualization of the Merkle proof for R",y.jsx("sub",{children:"3"}),": Alice needs to provide the request and proof siblings that are highlighted in green. The hashes that are highlighted in orange can be calculated from the information. Finally, she can verify if the calculated root is the same as the root she was provided. If they are the same, her request is stored in the merkle tree."]})]}),y.jsx("p",{children:"This elegant mathematical verification proves Alice's transaction is authentic without revealing any other transaction details. In the little demonstrator below, you can test in a simple example how the proof can be generated and validated."}),y.jsx(kO,{})]}),y.jsxs("section",{children:[y.jsx("h2",{children:"From Theory to Practice - Prepaid Settlement Workflow"}),y.jsx("p",{children:"Now that we understand how Merkle proofs work, let's see how we can use it to extend our current workflow towards the LLM systems. The first major change is that we will not settle costs after each request, but rather require users to deposit funds upfront. This way, we can ensure that the user has enough balance to cover the costs of their requests. This is similar to a prepaid model, where users deposit funds users to deposit funds upfront. This creates a trustless system where:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"User deposits $50  Guaranteed $50 available"}),y.jsx("li",{children:"LLM requests consume balance  No payment risk"}),y.jsx("li",{children:"Batch settlement  Efficient blockchain transactions"}),y.jsx("li",{children:"Refunds possible  User controls remaining balance"})]}),y.jsx(Ms,{definition:wO,title:"LLM Workflow with Merkle Tree Batching",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),y.jsx("h3",{children:"Required features from each participant"}),y.jsx("p",{children:"The workflow diagram above shows Alice's complete journey through our Merkle tree batching system. Let's break down what is required from each participant in the system:"}),y.jsx("h4",{children:"Alice (User) and similiar the LLM Wallet"}),y.jsx("p",{children:"The requirements on the two wallets to not really change compare to the image generation. So this is straight forward."}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role of Alice:"})," End user who wants to use LLM services with blockchain payments"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role of the LLM Wallet:"})," Receives payments for providing LLM services"]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Functions:"})}),y.jsxs("ul",{children:[y.jsx("li",{children:"Alice' Wallet with ETH balance for initial deposit"}),y.jsx("li",{children:"Web3 connection to interact with smart contract"}),y.jsx("li",{children:"UI to send LLM requests and view responses"}),y.jsx("li",{children:"Ability to check balance and request history"})]}),y.jsx("h4",{children:"LLM API (AI Service)"}),y.jsx("p",{children:"The requirements on the LLM API also does not really change compared to the case of generating images. It it simple really nice if it is OpenAI compatible but thiat is. wallets to not really change compare to the image generation. So this is straight forward."}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," External AI service provider (OpenAI, Anthropic, etc.)"]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Features:"})}),y.jsxs("ul",{children:[y.jsx("li",{children:"RESTful API endpoint for completions"}),y.jsx("li",{children:"Authentication via API keys"}),y.jsx("li",{children:"Token counting for cost calculation"}),y.jsx("li",{children:"Consistent response format"})]}),y.jsx("h4",{children:"LLM Contract (Smart Contract)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," Central coordinator for deposits, balance tracking, and batch settlement"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Key Difference to GenImNFT:"})," While the GenImNFT contract handles immediate payments and minting for each request, the LLM contract uses a prepaid model with batch settlement. This makes it simpler in terms of individual transaction processing but more complex in batch verification logic."]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Functions:"})}),y.jsxs("ul",{children:[y.jsxs("li",{children:[y.jsx("code",{children:"depositForLLM()"})," - Accept user deposits"]}),y.jsxs("li",{children:[y.jsx("code",{children:"checkBalance(address user)"})," - Return user's available balance"]}),y.jsxs("li",{children:[y.jsx("code",{children:"processBatch(bytes32 root, Request[] requests, bytes32[][] proofs)"})," - Verify and settle batches"]}),y.jsxs("li",{children:[y.jsx("code",{children:"verifyMerkleProof()"})," - Validate individual transaction proofs"]}),y.jsxs("li",{children:[y.jsx("code",{children:"withdrawBalance()"})," - Allow users to withdraw remaining funds"]})]}),y.jsx("pre",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px",overflowX:"auto"}),children:y.jsxs("code",{children:['import "@openzeppelin/contracts/utils/cryptography/MerkleProof.sol";',y.jsx("br",{}),'import "@openzeppelin/contracts/access/Ownable.sol";',y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"struct Request ","{",y.jsx("br",{}),"bytes32 id; // Unique request identifier",y.jsx("br",{}),"string timestamp; // ISO timestamp string",y.jsx("br",{}),"uint256 tokenCount; // Number of tokens consumed",y.jsx("br",{}),"address wallet; // User's wallet address",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),"mapping(address => uint256) public llmBalance;",y.jsx("br",{}),"mapping(bytes32 => bool) public processedBatches;",y.jsx("br",{}),"event LLMDeposit(address user, uint256 amount);",y.jsx("br",{}),"event BatchProcessed(bytes32 root, uint256 totalCost);"]})}),y.jsx("h5",{children:" Detailed Function Analysis"}),y.jsx("p",{children:y.jsx("strong",{children:"1. checkBalance(address user)  uint256"})}),y.jsxs("p",{children:[y.jsx("strong",{children:"Return Value:"})," The user's ",y.jsx("em",{children:"currently available"})," balance (funds deposited minus already processed batches).",y.jsx("br",{}),y.jsx("strong",{children:"Important:"})," This does NOT account for pending requests in unprocessed Merkle trees. This means users could theoretically spend more than their balance if multiple requests are made before batch processing."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["function checkBalance(address user) public view returns (uint256) ","{",y.jsx("br",{}),"return llmBalance[user]; // Only settled balance",y.jsx("br",{}),"// Does NOT subtract pending requests!",y.jsx("br",{}),"}",y.jsx("br",{})]}),y.jsx("p",{children:y.jsx("strong",{children:"2. verifyMerkleProof()"})}),y.jsxs("p",{children:[y.jsx("strong",{children:"Gas Cost Clarification:"})," The ",y.jsx("code",{children:"verifyMerkleProof()"})," function is marked as"," ",y.jsx("code",{children:"pure"})," and only performs computations without state changes, so it costs"," ",y.jsx("strong",{children:"no gas when called directly"}),". Gas is only consumed when it's called within"," ",y.jsx("code",{children:"processBatch()"})," as part of a transaction."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:['import "@openzeppelin/contracts/utils/cryptography/MerkleProof.sol";',y.jsx("br",{}),y.jsx("br",{}),"function verifyMerkleProof(",y.jsx("br",{}),"bytes32[] memory proof,",y.jsx("br",{}),"bytes32 root,",y.jsx("br",{}),"bytes32 leaf) public pure returns (bool) ","{",y.jsx("br",{}),"return MerkleProof.verify(proof, root, leaf);",y.jsx("br",{}),"}"]}),y.jsx("p",{children:y.jsx("strong",{children:"3. processBatch() - The Core Settlement Function"})}),y.jsx("p",{children:"This function processes an entire batch of LLM requests in a single transaction. It verifies each proof, deducts costs from user balances, and pays the service provider."}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"32px"}),children:["function processBatch(",y.jsx("br",{}),"bytes32 merkleRoot,",y.jsx("br",{}),"Request[] memory requests,",y.jsx("br",{}),"bytes32[][] memory proofs) external onlyAuthorized ","{",y.jsx("br",{}),'require(!processedBatches[merkleRoot], "Batch already processed");',y.jsx("br",{}),"",y.jsx("br",{}),"uint256 totalCost = 0;",y.jsx("br",{}),"for (uint256 i = 0; i < requests.length; i++) ","{",y.jsx("br",{}),"// 1. Create leaf hash from request data",y.jsx("br",{}),"bytes32 leaf = keccak256(abi.encode(requests[i]));",y.jsx("br",{}),"",y.jsx("br",{}),"// 2. Verify proof against merkle root",y.jsx("br",{}),'require(verifyMerkleProof(proofs[i], merkleRoot, leaf), "Invalid proof");',y.jsx("br",{}),"",y.jsx("br",{}),"// 3. Deduct cost from user balance",y.jsx("br",{}),'require(llmBalance[requests[i].user] >= requests[i].cost, "Insufficient balance");',y.jsx("br",{}),"llmBalance[requests[i].user] -= requests[i].cost;",y.jsx("br",{}),"totalCost += requests[i].cost;",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 4. Pay service provider",y.jsx("br",{}),"payable(serviceProvider).transfer(totalCost);",y.jsx("br",{}),"",y.jsx("br",{}),"// 5. Mark batch as processed",y.jsx("br",{}),"processedBatches[merkleRoot] = true;",y.jsx("br",{}),"emit BatchProcessed(merkleRoot, totalCost);",y.jsx("br",{}),"}"]}),y.jsx("h4",{children:"Serverless Functions (Backend Services)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," Request handler and coordinator between users, blockchain, and AI services"]}),y.jsxs("p",{children:["Based on the existing image generation functions ( ",y.jsx("code",{children:"scw_js/image_service.js"})," and"," ",y.jsx("code",{children:"scw_js/readhandler_v2.js"}),"), the LLM system requires two main serverless functions with enhanced capabilities for batch processing:"]}),y.jsxs("h5",{children:["Function 1: LLM Request Handler (",y.jsx("code",{children:"llm_handler.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Comparison to Image Handler:"})," Similar to ",y.jsx("code",{children:"readhandler_v2.js"})," but with instant response capability and batch queuing instead of immediate blockchain settlement."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["import ","{"," getContract, createPublicClient, http ","}",' from "viem";',y.jsx("br",{}),"import ","{"," optimism ","}",' from "viem/chains";',y.jsx("br",{}),"import ","{"," llmContractAbi ","}",' from "./llm_abi.js";',y.jsx("br",{}),"import ","{"," callLLMAPI, createLeafData, queueForBatch ","}",' from "./llm_service.js";',y.jsx("br",{}),y.jsx("br",{}),"export async function handle(event, context, cb) ","{",y.jsx("br",{}),"// 1. Extract parameters (similar to image handler)",y.jsx("br",{}),"const prompt = event.queryStringParameters.prompt;",y.jsx("br",{}),"const userAddress = event.queryStringParameters.userAddress;",y.jsx("br",{}),'const model = event.queryStringParameters.model || "gpt-4-turbo";',y.jsx("br",{}),"",y.jsx("br",{}),"if (!prompt || !userAddress) ","{",y.jsx("br",{}),'return errorResponse("Missing prompt or userAddress", 400);',y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 2. Check user balance on-chain (like mint price check)",y.jsx("br",{}),"const publicClient = createPublicClient(","{",y.jsx("br",{}),"chain: optimism,",y.jsx("br",{}),"transport: http(),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const contract = getContract(","{",y.jsx("br",{}),'address: "0x[LLM_CONTRACT_ADDRESS]",',y.jsx("br",{}),"abi: llmContractAbi,",y.jsx("br",{}),"client: ","{"," public: publicClient ","}",",",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const userBalance = await contract.read.checkBalance([userAddress]);",y.jsx("br",{}),"const estimatedCost = estimateTokenCost(prompt, model);",y.jsx("br",{}),"",y.jsx("br",{}),"if (userBalance < estimatedCost) ","{",y.jsx("br",{}),'return errorResponse("Insufficient balance", 402);',y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 3. Call LLM API immediately (unlike delayed image generation)",y.jsx("br",{}),"const llmResponse = await callLLMAPI(prompt, model);",y.jsx("br",{}),"",y.jsx("br",{}),"// 4. Create leaf data for Merkle tree",y.jsx("br",{}),"const leafData = createLeafData(","{",y.jsx("br",{}),"userAddress,",y.jsx("br",{}),"prompt,",y.jsx("br",{}),"response: llmResponse.content,",y.jsx("br",{}),"tokenCount: llmResponse.usage.total_tokens,",y.jsx("br",{}),"cost: estimatedCost,",y.jsx("br",{}),"timestamp: new Date().toISOString(),",y.jsx("br",{}),"model",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"// 5. Queue for batch processing (new functionality)",y.jsx("br",{}),"await queueForBatch(leafData);",y.jsx("br",{}),"",y.jsx("br",{}),"// 6. Return immediate response (unlike image generation)",y.jsx("br",{}),"return ","{",y.jsx("br",{}),"statusCode: 200,",y.jsx("br",{}),"headers: ","{",' "Content-Type": "application/json" ',"}",",",y.jsx("br",{}),"body: JSON.stringify(","{",y.jsx("br",{}),"response: llmResponse.content,",y.jsx("br",{}),"tokenCount: llmResponse.usage.total_tokens,",y.jsx("br",{}),"cost: estimatedCost,",y.jsx("br",{}),"leafId: leafData.id,",y.jsx("br",{}),"userBalance: userBalance.toString(),",y.jsx("br",{}),'message: "Request processed, queued for batch settlement"',y.jsx("br",{}),"","}",")",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}"]}),y.jsxs("h5",{children:["Function 2: LLM Service Module (",y.jsx("code",{children:"llm_service.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Comparison to Image Service:"})," Enhanced version of ",y.jsx("code",{children:"image_service.js"})," with LLM API integration and Merkle tree batch management instead of S3 image uploads."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["import ","{"," S3Client, PutObjectCommand, GetObjectCommand ","}",' from "@aws-sdk/client-s3";',y.jsx("br",{}),"import ","{"," randomBytes ","}",' from "crypto";',y.jsx("br",{}),"import ","{"," StandardMerkleTree ","}",' from "@openzeppelin/merkle-tree";',y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),'const LLM_ENDPOINT = "https://api.openai.com/v1/chat/completions";',y.jsx("br",{}),'const BATCH_BUCKET = "llm-batches";',y.jsx("br",{}),"const BATCH_THRESHOLD = 50; ",y.jsx("br",{}),"const BATCH_TIMEOUT = 5 * 60 * 1000; ",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"const REQUEST_TYPES = [",y.jsx("br",{}),'"address", "string", "uint256", "uint256", "uint256", "string"',y.jsx("br",{}),"];",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),'export async function callLLMAPI(prompt, model = "gpt-4-turbo") ',"{",y.jsx("br",{}),"const apiKey = process.env.OPENAI_API_KEY; ",y.jsx("br",{}),"",y.jsx("br",{}),"const response = await fetch(LLM_ENDPOINT, ","{",y.jsx("br",{}),'method: "POST",',y.jsx("br",{}),"headers: ","{",y.jsx("br",{}),"Authorization: `Bearer $$","{","apiKey","}","`,",y.jsx("br",{}),'"Content-Type": "application/json",',y.jsx("br",{}),"","}",",",y.jsx("br",{}),"body: JSON.stringify(","{",y.jsx("br",{}),"model,",y.jsx("br",{}),"messages: [","{",' role: "user", content: prompt ',"}","],",y.jsx("br",{}),"max_tokens: 2000,",y.jsx("br",{}),"","}","),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"if (!response.ok) ","{",y.jsx("br",{}),"throw new Error(`LLM API Error: $$","{","response.status","}","`);",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"const data = await response.json();",y.jsx("br",{}),"return ","{",y.jsx("br",{}),"content: data.choices[0].message.content,",y.jsx("br",{}),"usage: data.usage,",y.jsx("br",{}),"model: data.model",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"* Creates leaf data for Merkle tree (new functionality)",y.jsx("br",{}),"*/",y.jsx("br",{}),"export function createLeafData(requestData) ","{",y.jsx("br",{}),"// Return simplified leaf data structure optimized for Merkle tree",y.jsx("br",{}),"// This matches the format used in the proof demo: (id, timestamp, tokenCount, wallet)",y.jsx("br",{}),"return ","{",y.jsx("br",{}),'id: randomBytes(16).toString("hex"),',y.jsx("br",{}),"timestamp: requestData.timestamp,",y.jsx("br",{}),"tokenCount: requestData.tokenCount,",y.jsx("br",{}),"wallet: requestData.userAddress",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"export async function queueForBatch(leafData) ","{",y.jsx("br",{}),"// Upload to S3 pending batch folder (similar to uploadToS3)",y.jsx("br",{}),"const fileName = `pending/$$","{","leafData.id","}",".json`;",y.jsx("br",{}),"await uploadToS3(leafData, fileName);",y.jsx("br",{}),"",y.jsx("br",{}),"// Check if batch threshold reached",y.jsx("br",{}),"const pendingCount = await getPendingRequestCount();",y.jsx("br",{}),"if (pendingCount >= BATCH_THRESHOLD) ","{",y.jsx("br",{}),"await triggerBatchProcessing();",y.jsx("br",{}),"","}",y.jsx("br",{}),"}"]}),y.jsxs("h5",{children:["Function 3: Batch Processor (",y.jsx("code",{children:"batch_processor.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"New Functionality:"})," This function has no equivalent in the image generation system. It handles the batch aggregation and Merkle tree construction that enables cost-efficient blockchain settlement."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:[y.jsx("br",{}),y.jsx("br",{}),"export async function triggerBatchProcessing() ","{",y.jsx("br",{}),"",y.jsx("br",{}),"const pendingRequests = await getAllPendingRequests();",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const treeData = pendingRequests.map(req => [",y.jsx("br",{}),"req.userAddress, ",y.jsx("br",{}),"req.prompt, ",y.jsx("br",{}),"req.tokenCount, ",y.jsx("br",{}),"req.cost, ",y.jsx("br",{}),"Math.floor(new Date(req.timestamp).getTime() / 1000), ",y.jsx("br",{}),"req.model ",y.jsx("br",{}),"]);",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const tree = StandardMerkleTree.of(treeData, REQUEST_TYPES);",y.jsx("br",{}),"const merkleRoot = tree.root;",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const proofs = [];",y.jsx("br",{}),"const contractRequests = [];",y.jsx("br",{}),"",y.jsx("br",{}),"for (const [index, value] of tree.entries()) ","{",y.jsx("br",{}),"const proof = tree.getProof(index);",y.jsx("br",{}),"proofs.push(proof);",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"contractRequests.push(","{",y.jsx("br",{}),"user: value[0],",y.jsx("br",{}),"prompt: value[1],",y.jsx("br",{}),"tokenCount: value[2],",y.jsx("br",{}),"cost: value[3],",y.jsx("br",{}),"timestamp: value[4],",y.jsx("br",{}),"model: value[5]",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const txHash = await submitBatchToContract(",y.jsx("br",{}),"merkleRoot, ",y.jsx("br",{}),"contractRequests, ",y.jsx("br",{}),"proofs ",y.jsx("br",{}),");",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"await archiveBatch(contractRequests, txHash);",y.jsx("br",{}),y.jsx("br",{}),"return ","{"," root: merkleRoot, txHash, processedCount: contractRequests.length ","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"async function submitBatchToContract(merkleRoot, requests, proofs) ","{",y.jsx("br",{}),"const walletClient = createWalletClient(","{",y.jsx("br",{}),"account: privateKeyToAccount(process.env.LLM_WALLET_PRIVATE_KEY),",y.jsx("br",{}),"chain: optimism,",y.jsx("br",{}),"transport: http(),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const contract = getContract(","{",y.jsx("br",{}),"address: process.env.LLM_CONTRACT_ADDRESS,",y.jsx("br",{}),"abi: llmContractAbi,",y.jsx("br",{}),"client: ","{"," wallet: walletClient ","}",",",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const txHash = await contract.write.processBatch([",y.jsx("br",{}),"merkleRoot, ",y.jsx("br",{}),"requests, ",y.jsx("br",{}),"proofs ",y.jsx("br",{}),"]);",y.jsx("br",{}),"",y.jsx("br",{}),"return txHash;",y.jsx("br",{}),"}"]}),y.jsx("h5",{children:" Key Differences from Image Generation Functions"}),y.jsxs("table",{className:Y({width:"100%",borderCollapse:"collapse",marginBottom:"16px",fontSize:"14px"}),children:[y.jsx("thead",{children:y.jsxs("tr",{className:Y({backgroundColor:"#f3f4f6"}),children:[y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"Aspect"}),y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"Image Generation"}),y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"LLM Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Response Time"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Delayed (async via blockchain update)"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Immediate (instant API response)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Payment Model"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Pay-per-transaction (immediate settlement)"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Prepaid balance (batch settlement)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Blockchain Interaction"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"One transaction per image"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"One transaction per batch (50+ requests)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Data Storage"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"S3: Images + ERC-721 metadata"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"S3: Request queue + Merkle proofs"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Error Handling"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Blockchain revert on failure"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Individual request isolation"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Scalability"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Limited by gas costs"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Scales with batch size"})]})]})]}),y.jsx("h5",{children:" Environment Configuration (serverless.yml)"}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["# Extended from existing serverless.yml",y.jsx("br",{}),"provider:",y.jsx("br",{}),"name: scaleway",y.jsx("br",{}),"runtime: node22",y.jsx("br",{}),"secret:",y.jsx("br",{}),"# Existing secrets",y.jsx("br",{}),"SCW_SECRET_KEY: $$","{","env:SCW_SECRET_KEY","}",y.jsx("br",{}),"SCW_ACCESS_KEY: $$","{","env:SCW_ACCESS_KEY","}",y.jsx("br",{}),"NFT_WALLET_PRIVATE_KEY: $$","{","env:NFT_WALLET_PRIVATE_KEY","}",y.jsx("br",{}),"# New LLM secrets",y.jsx("br",{}),"OPENAI_API_KEY: $$","{","env:OPENAI_API_KEY","}",y.jsx("br",{}),"LLM_WALLET_PRIVATE_KEY: $$","{","env:LLM_WALLET_PRIVATE_KEY","}",y.jsx("br",{}),"LLM_CONTRACT_ADDRESS: $$","{","env:LLM_CONTRACT_ADDRESS","}",y.jsx("br",{}),y.jsx("br",{}),"functions:",y.jsx("br",{}),"# Existing functions",y.jsx("br",{}),"readnftv2:",y.jsx("br",{}),"handler: readhandler_v2.handle",y.jsx("br",{}),"classicai:",y.jsx("br",{}),"handler: dec_ai.handle",y.jsx("br",{}),"# New LLM functions",y.jsx("br",{}),"llmhandler:",y.jsx("br",{}),"handler: llm_handler.handle",y.jsx("br",{}),"timeout: 30s # Longer timeout for LLM API calls",y.jsx("br",{}),"batchprocessor:",y.jsx("br",{}),"handler: batch_processor.handle",y.jsx("br",{}),"timeout: 60s # Longer timeout for batch processing",y.jsx("br",{}),"events:",y.jsx("br",{}),"- schedule: rate(5 minutes) # Auto-trigger batches"]})]})]})}const a3=Object.freeze(Object.defineProperty({__proto__:null,default:LO,meta:vO},Symbol.toStringTag,{value:"Module"}));export{DO as $,Nn as A,a2 as B,Z2 as C,Zh as D,ee as E,Qg as F,AL as G,aM as H,sg as I,aC as J,as as K,Ke as L,MT as M,Nh as N,jO as O,HO as P,_i as Q,_p as R,xp as S,WO as T,mt as U,zO as V,qO as W,FO as X,NO as Y,VO as Z,m as _,V2 as a,sk as a$,UO as a0,p2 as a1,Di as a2,$O as a3,io as a4,xL as a5,lm as a6,yh as a7,Jf as a8,PT as a9,st as aA,t3 as aB,jR as aC,OR as aD,IR as aE,HB as aF,$T as aG,fs as aH,DB as aI,jB as aJ,ci as aK,mL as aL,Qy as aM,Za as aN,ro as aO,_a as aP,eb as aQ,Zy as aR,VA as aS,Ih as aT,Tr as aU,fp as aV,dk as aW,Xn as aX,at as aY,V0 as aZ,ye as a_,zs as aa,EL as ab,D2 as ac,ss as ad,tt as ae,ht as af,hm as ag,fR as ah,a1 as ai,r3 as aj,lC as ak,Ht as al,Or as am,Bh as an,Ob as ao,di as ap,ob as aq,gL as ar,oA as as,lL as at,zh as au,fg as av,iM as aw,e3 as ax,i3 as ay,QO as az,U2 as b,$h as b0,ay as b1,cs as b2,cy as b3,PO as b4,Rw as b5,pL as b6,oL as b7,YE as b8,Wh as b9,eo as bA,a3 as bB,HA as ba,bL as bb,us as bc,Ki as bd,ya as be,QA as bf,EM as bg,hs as bh,xa as bi,GA as bj,Vy as bk,KE as bl,ZE as bm,Yr as bn,Op as bo,QE as bp,Uh as bq,JE as br,rA as bs,Zi as bt,Ir as bu,Bp as bv,Vh as bw,Yy as bx,Zc as by,yL as bz,Ct as c,wt as d,cm as e,Kt as f,Y2 as g,_r as h,Ae as i,pC as j,Xi as k,G as l,cb as m,IO as n,s3 as o,X2 as p,J2 as q,n3 as r,G2 as s,oC as t,je as u,RR as v,RL as w,GO as x,W2 as y,OO as z};
