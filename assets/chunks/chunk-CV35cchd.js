import{r as N,j as e,h as a,L as x,S as p}from"./chunk-CCBCLRFf.js";import{G as j,i as T}from"./chunk-ChDdD8F_.js";import{u as I,G as g}from"./chunk-DayoZtRg.js";const w=j.filter(n=>!T(n)),E=({tokenId:n,fallbackImageUrl:c,nftName:d})=>{const[f,l]=N.useState(null),[r,o]=N.useState(!0),m=w[0],h=I(m),t=async i=>{try{if(i.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",i),null;const s=await fetch(i);if(!s.ok)throw new Error(`Failed to fetch metadata: ${s.status}`);return await s.json()}catch(s){return console.error("Error fetching NFT metadata:",s),null}};return N.useEffect(()=>{(async()=>{try{if(o(!0),c){l(c),o(!1);return}if(n&&h){const u=await h.readContract({address:contractAddress,abi:g,functionName:"tokenURI",args:[BigInt(n)]}),y=await t(u);y?.image&&l(y.image)}}catch(s){console.warn("Failed to load NFT image:",s)}finally{o(!1)}})()},[n,c,h]),!f&&!r?null:e.jsx(e.Fragment,{children:r?e.jsx("div",{className:a.entryNftImage,style:{backgroundColor:"#f3f4f6"},title:"Loading NFT artwork..."}):e.jsx("img",{src:f,alt:d||"NFT Artwork",className:a.entryNftImage,title:`NFT Artwork${d?`: ${d}`:""}`,onError:()=>l(null)})})},k=({blogs:n,basePath:c,titleClassName:d,showDate:f=!1,reverseOrder:l=!1,limit:r,showViewAllLink:o=!1})=>{let m=l?[...n].reverse():n;const h=r&&n.length>r;return r&&(m=m.slice(0,r)),e.jsxs("div",{className:a.container,children:[m.map((t,i)=>{const s=t.originalIndex!==void 0?t.originalIndex:l?n.length-1-i:i,u=`${c}/${s}`,y=t.publishing_date?new Date(t.publishing_date).toISOString().split("T")[0]:null;return e.jsxs("article",{className:"h-entry",children:[e.jsx(x,{href:u,className:a.entry,children:e.jsxs("div",{className:a.entryContent,children:[(t.tokenID||t.nftMetadata?.imageUrl)&&e.jsx("div",{className:"u-featured",children:e.jsx(E,{tokenId:t.tokenID,fallbackImageUrl:t.nftMetadata?.imageUrl,nftName:t.nftMetadata?.name})}),e.jsx("div",{className:t.description?a.entryTextCompact:a.entryText,children:e.jsxs("div",{className:a.entryTextContent,children:[f&&t.publishing_date&&e.jsx("div",{className:t.description?a.entryDateWithDescription:a.entryDate,children:e.jsx("time",{className:"dt-published",dateTime:y||void 0,children:t.publishing_date})}),e.jsx("h3",{className:`p-name ${a.entryTitle} ${d||""}`,children:t.title}),t.description&&e.jsx("div",{className:`p-summary ${a.entryDescription}`,children:t.description}),t.category&&e.jsx("span",{className:"p-category",style:{display:"none"},children:t.category}),t.secondaryCategory&&e.jsx("span",{className:"p-category",style:{display:"none"},children:t.secondaryCategory})]})})]})}),e.jsx("a",{rel:"author",className:"p-author h-card",href:p.url,style:{display:"none"},children:p.name}),e.jsx("a",{className:"u-url",href:`${p.url}${u}`,style:{display:"none"}}),e.jsx("a",{className:"u-bridgy-fed",href:"https://fed.brid.gy/",hidden:!0,style:{display:"none"}})]},s)}),h&&o&&e.jsx("div",{className:a.viewAllContainer,children:e.jsx(x,{href:c,children:"View all entries â†’"})})]})};export{k as E};
