import{ac as L,be as k,u as P,r as c,e as R,l as z,j as n,bf as D}from"./chunk-DozKHz-q.js";import{b as A,c as F,a as W,z as G,u as q}from"./chunk-CH2_7slJ.js";class H extends L{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function J(r,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new H({value:r});let[s,e="0"]=r.split(".");const l=s.startsWith("-");if(l&&(s=s.slice(1)),e=e.replace(/(0+)$/,""),t===0)Math.round(+`.${e}`)===1&&(s=`${BigInt(s)+1n}`),e="";else if(e.length>t){const[i,g,o]=[e.slice(0,t-1),e.slice(t-1,t),e.slice(t)],d=Math.round(+`${g}.${o}`);d>9?e=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):e=`${i}${d}`,e.length>t&&(e=e.slice(1),s=`${BigInt(s)+1n}`),e=e.slice(0,t)}else e=e.padEnd(t,"0");return BigInt(`${l?"-":""}${s}${e}`)}function K(r,t="wei"){return J(r,k[t])}function O(){const t=P().urlPathname,[s,e]=c.useState(t),[l,i]=c.useState(!1),[g,o]=c.useState(null),[d,x]=c.useState(!1),{isConnected:N}=R(),b=z(),v=K("0.0002"),{writeContract:E,isPending:C,data:I,error:u}=A(),{isLoading:B,isSuccess:p}=F({hash:I});c.useEffect(()=>{const T=(window.location.origin+t).replace(/\/+$/,"");e(T)},[t]);const f=W(),w=G(),$=b===f.id,{data:h,error:m,isPending:U,refetch:j}=q({...w,functionName:"getLikesForUrl",args:[s],chainId:f.id}),y=async()=>{if(o(null),!s){o("URL ist erforderlich");return}if(!$){o(`Bitte wechsle zum ${f.name} Netzwerk`);return}i(!0),E({...w,functionName:"donate",args:[s],value:v})};c.useEffect(()=>{p&&(i(!1),o(null),setTimeout(()=>{j()},2e3)),u&&(i(!1),o((u==null?void 0:u.message)||"Transaktion fehlgeschlagen"))},[p,u,j]);const S=g||(!$&&N?`Bitte wechsle zum ${f.name} Netzwerk`:null),a=D,M=()=>U?n.jsx("div",{className:a.readDisplay,children:"Loading..."}):m?n.jsxs("div",{className:a.readDisplay,children:["Error: ",m.shortMessage||m.message]}):n.jsx("div",{className:a.readDisplay,children:(h==null?void 0:h.toString())||"0"});return n.jsx("div",{className:a.container,children:n.jsxs("div",{className:a.buttonGroup,children:[n.jsxs("div",{className:a.tooltipContainer,children:[n.jsx("button",{onClick:y,disabled:!N||l||C||B,className:a.writeButton,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:l||C?"Processing...":p?"Supported!":"Support"}),d&&S&&n.jsx("div",{className:a.tooltip,children:S})]}),M()]})})}const Y=function({title:r}){return n.jsxs("div",{className:"TitleBar",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h1",{children:r}),n.jsx(O,{})]})};export{Y as T};
