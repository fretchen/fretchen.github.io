const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-4rU0r1QT.js","assets/chunks/chunk-CLt8TAlY.js","assets/chunks/chunk-CLtrSzN1.js","assets/chunks/chunk-vyRkWT3K.js","assets/chunks/chunk-B6eVZcQH.js","assets/chunks/chunk-CNedx-kE.js","assets/chunks/chunk-CRgj_MmV.js","assets/chunks/chunk-D2xsvCX8.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.CuAyvkOY.css","assets/chunks/chunk-Dz2AaeAp.js","assets/chunks/chunk-9wxBADyr.js","assets/chunks/chunk-BlWxkPrA.js","assets/chunks/chunk-gk3fjt3L.js","assets/static/katex-afcc0501.CYb-BUsX.css","assets/chunks/chunk-BlXQIrXd.js","assets/chunks/chunk-B6vbOnME.js","assets/chunks/chunk-CCsNgQU5.js","assets/chunks/chunk-Yimyqa6c.js","assets/chunks/chunk-AVsbg-Kq.js","assets/chunks/chunk-BaSXSoKX.js","assets/chunks/chunk-DvyykW4T.js","assets/chunks/chunk-cPBQQiY1.js","assets/chunks/chunk-j4O14a4M.js","assets/chunks/chunk-B032gJ20.js","assets/chunks/chunk-tEmVEBwI.js","assets/chunks/chunk-CHhUGnpz.js","assets/chunks/chunk-DlicuhYc.js","assets/chunks/chunk-frBytnsl.js","assets/chunks/chunk-Bm71PN7A.js","assets/chunks/chunk-DJGHc8-H.js","assets/chunks/chunk-Gi6I4Gst.js","assets/chunks/chunk-C4B-KCzX.js","assets/chunks/chunk-DeSIO2OJ.js","assets/chunks/chunk-BxeSLKAr.js","assets/chunks/chunk-BIpSfl-w.js","assets/chunks/chunk-DO4YpjyP.js","assets/chunks/chunk-DtIu2zzu.js","assets/chunks/chunk-Wra8nRSA.js","assets/chunks/chunk-CFfuKSzf.js","assets/chunks/chunk-CWNXsusu.js","assets/chunks/chunk-DspqXAEt.js","assets/chunks/chunk-B61Bhgeu.js","assets/chunks/chunk-CjBeYOj8.js","assets/chunks/chunk-cvjx2jc8.js","assets/chunks/chunk-DpElkGt0.js","assets/chunks/chunk-GL3iJ2DX.js","assets/chunks/chunk-DyhEjYZt.js","assets/chunks/chunk-DSsyDc_j.js","assets/chunks/chunk-D6Tt3MC8.js","assets/chunks/chunk-A-tfs8zk.js","assets/chunks/chunk-CNdM3-zn.js","assets/chunks/chunk-Cg40SIdA.js","assets/chunks/chunk-DY96Auqz.js","assets/chunks/chunk-10lgrGVy.js","assets/chunks/chunk-CyRG3YuH.js","assets/chunks/chunk-DYmAkUUv.js","assets/chunks/chunk-DLEb2sg5.js","assets/chunks/chunk-qrhCpa0F.js"])))=>i.map(i=>d[i]);
import{B as EO,cs as SO,a4 as xg,j as i,r as pe,a1 as CO,ak as AO,ct as NO,_ as IO,u as jT,cu as io,cv as ri,D as V,aL as TT,a0 as Hn,cw as He,x as LO,S as OO,cx as Fn,L as Hy}from"./chunk-CRgj_MmV.js";import{c as MO,f as qy,u as RO,g as $y}from"./chunk-Dz2AaeAp.js";import{a as PO,b as DO,u as BO}from"./chunk-BlWxkPrA.js";/* empty css              */import{_ as oe}from"./chunk-D2xsvCX8.js";class FO extends EO{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function HO(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new FO({value:t});let[n,a="0"]=t.split(".");const r=n.startsWith("-");if(r&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),e===0)Math.round(+`.${a}`)===1&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>e){const[s,o,l]=[a.slice(0,e-1),a.slice(e-1,e),a.slice(e)],c=Math.round(+`${o}.${l}`);c>9?a=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):a=`${s}${c}`,a.length>e&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,e)}else a=a.padEnd(e,"0");return BigInt(`${r?"-":""}${n}${a}`)}function qO(t,e="wei"){return HO(t,SO[e])}function zy(t){const e=[],n=String(t||"");let a=n.indexOf(","),r=0,s=!1;for(;!s;){a===-1&&(a=n.length,s=!0);const o=n.slice(r,a).trim();(o||!s)&&e.push(o),r=a+1,a=n.indexOf(",",r)}return e}function kT(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const $O=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zO=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WO={};function Wy(t,e){return(WO.jsx?zO:$O).test(t)}const UO=/[ \t\n\f\r]/g;function VO(t){return typeof t=="object"?t.type==="text"?Uy(t.value):!1:Uy(t)}function Uy(t){return t.replace(UO,"")===""}let Wl=class{constructor(e,n,a){this.normal=n,this.property=e,a&&(this.space=a)}};Wl.prototype.normal={};Wl.prototype.property={};Wl.prototype.space=void 0;function ET(t,e){const n={},a={};for(const r of t)Object.assign(n,r.property),Object.assign(a,r.normal);return new Wl(n,a,e)}function _l(t){return t.toLowerCase()}let In=class{constructor(e,n){this.attribute=n,this.property=e}};In.prototype.attribute="";In.prototype.booleanish=!1;In.prototype.boolean=!1;In.prototype.commaOrSpaceSeparated=!1;In.prototype.commaSeparated=!1;In.prototype.defined=!1;In.prototype.mustUseProperty=!1;In.prototype.number=!1;In.prototype.overloadedBoolean=!1;In.prototype.property="";In.prototype.spaceSeparated=!1;In.prototype.space=void 0;let YO=0;const Pe=Lr(),jt=Lr(),Hf=Lr(),ae=Lr(),ct=Lr(),is=Lr(),Dn=Lr();function Lr(){return 2**++YO}const qf=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pe,booleanish:jt,commaOrSpaceSeparated:Dn,commaSeparated:is,number:ae,overloadedBoolean:Hf,spaceSeparated:ct},Symbol.toStringTag,{value:"Module"})),jd=Object.keys(qf);let yg=class extends In{constructor(e,n,a,r){let s=-1;if(super(e,n),Vy(this,"space",r),typeof a=="number")for(;++s<jd.length;){const o=jd[s];Vy(this,jd[s],(a&qf[o])===qf[o])}}};yg.prototype.defined=!0;function Vy(t,e,n){n&&(t[e]=n)}function Ps(t){const e={},n={};for(const[a,r]of Object.entries(t.properties)){const s=new yg(a,t.transform(t.attributes||{},a),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[_l(a)]=a,n[_l(s.attribute)]=a}return new Wl(e,n,t.space)}const ST=Ps({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:ae,ariaColIndex:ae,ariaColSpan:ae,ariaControls:ct,ariaCurrent:null,ariaDescribedBy:ct,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:ct,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:ct,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ct,ariaLevel:ae,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:ct,ariaPlaceholder:null,ariaPosInSet:ae,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:ct,ariaRowCount:ae,ariaRowIndex:ae,ariaRowSpan:ae,ariaSelected:jt,ariaSetSize:ae,ariaSort:null,ariaValueMax:ae,ariaValueMin:ae,ariaValueNow:ae,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function CT(t,e){return e in t?t[e]:e}function AT(t,e){return CT(t,e.toLowerCase())}const GO=Ps({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:is,acceptCharset:ct,accessKey:ct,action:null,allow:null,allowFullScreen:Pe,allowPaymentRequest:Pe,allowUserMedia:Pe,alt:null,as:null,async:Pe,autoCapitalize:null,autoComplete:ct,autoFocus:Pe,autoPlay:Pe,blocking:ct,capture:null,charSet:null,checked:Pe,cite:null,className:ct,cols:ae,colSpan:null,content:null,contentEditable:jt,controls:Pe,controlsList:ct,coords:ae|is,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pe,defer:Pe,dir:null,dirName:null,disabled:Pe,download:Hf,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pe,formTarget:null,headers:ct,height:ae,hidden:Hf,high:ae,href:null,hrefLang:null,htmlFor:ct,httpEquiv:ct,id:null,imageSizes:null,imageSrcSet:null,inert:Pe,inputMode:null,integrity:null,is:null,isMap:Pe,itemId:null,itemProp:ct,itemRef:ct,itemScope:Pe,itemType:ct,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pe,low:ae,manifest:null,max:null,maxLength:ae,media:null,method:null,min:null,minLength:ae,multiple:Pe,muted:Pe,name:null,nonce:null,noModule:Pe,noValidate:Pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pe,optimum:ae,pattern:null,ping:ct,placeholder:null,playsInline:Pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pe,referrerPolicy:null,rel:ct,required:Pe,reversed:Pe,rows:ae,rowSpan:ae,sandbox:ct,scope:null,scoped:Pe,seamless:Pe,selected:Pe,shadowRootClonable:Pe,shadowRootDelegatesFocus:Pe,shadowRootMode:null,shape:null,size:ae,sizes:null,slot:null,span:ae,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ae,step:null,style:null,tabIndex:ae,target:null,title:null,translate:null,type:null,typeMustMatch:Pe,useMap:null,value:jt,width:ae,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ct,axis:null,background:null,bgColor:null,border:ae,borderColor:null,bottomMargin:ae,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pe,declare:Pe,event:null,face:null,frame:null,frameBorder:null,hSpace:ae,leftMargin:ae,link:null,longDesc:null,lowSrc:null,marginHeight:ae,marginWidth:ae,noResize:Pe,noHref:Pe,noShade:Pe,noWrap:Pe,object:null,profile:null,prompt:null,rev:null,rightMargin:ae,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:ae,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ae,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pe,disableRemotePlayback:Pe,prefix:null,property:null,results:ae,security:null,unselectable:null},space:"html",transform:AT}),XO=Ps({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Dn,accentHeight:ae,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ae,amplitude:ae,arabicForm:null,ascent:ae,attributeName:null,attributeType:null,azimuth:ae,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ae,by:null,calcMode:null,capHeight:ae,className:ct,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ae,diffuseConstant:ae,direction:null,display:null,dur:null,divisor:ae,dominantBaseline:null,download:Pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:ae,enableBackground:null,end:null,event:null,exponent:ae,externalResourcesRequired:null,fill:null,fillOpacity:ae,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:is,g2:is,glyphName:is,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ae,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ae,horizOriginX:ae,horizOriginY:ae,id:null,ideographic:ae,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ae,k:ae,k1:ae,k2:ae,k3:ae,k4:ae,kernelMatrix:Dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ae,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ae,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ae,overlineThickness:ae,paintOrder:null,panose1:null,path:null,pathLength:ae,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ct,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ae,pointsAtY:ae,pointsAtZ:ae,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dn,rev:Dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dn,requiredFeatures:Dn,requiredFonts:Dn,requiredFormats:Dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ae,specularExponent:ae,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ae,strikethroughThickness:ae,string:null,stroke:null,strokeDashArray:Dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ae,strokeOpacity:ae,strokeWidth:null,style:null,surfaceScale:ae,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dn,tabIndex:ae,tableValues:null,target:null,targetX:ae,targetY:ae,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ae,underlineThickness:ae,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ae,values:null,vAlphabetic:ae,vMathematical:ae,vectorEffect:null,vHanging:ae,vIdeographic:ae,version:null,vertAdvY:ae,vertOriginX:ae,vertOriginY:ae,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ae,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:CT}),NT=Ps({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),IT=Ps({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:AT}),LT=Ps({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),JO={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QO=/[A-Z]/g,Yy=/-[a-z]/g,KO=/^data[-\w.:]+$/i;function bg(t,e){const n=_l(e);let a=e,r=In;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&KO.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Yy,eM);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Yy.test(s)){let o=s.replace(QO,ZO);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=yg}return new r(a,e)}function ZO(t){return"-"+t.toLowerCase()}function eM(t){return t.charAt(1).toUpperCase()}const fu=ET([ST,GO,NT,IT,LT],"html"),Ds=ET([ST,XO,NT,IT,LT],"svg");function Gy(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function OT(t){return t.join(" ").trim()}var Vr={},Td,Xy;function tM(){if(Xy)return Td;Xy=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,a=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,h="/",u="*",d="",m="comment",f="declaration";Td=function(g,x){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];x=x||{};var b=1,w=1;function k(M){var C=M.match(e);C&&(b+=C.length);var N=M.lastIndexOf(c);w=~N?M.length-N:w+M.length}function E(){var M={line:b,column:w};return function(C){return C.position=new v(M),O(),C}}function v(M){this.start=M,this.end={line:b,column:w},this.source=x.source}v.prototype.content=g;function S(M){var C=new Error(x.source+":"+b+":"+w+": "+M);if(C.reason=M,C.filename=x.source,C.line=b,C.column=w,C.source=g,!x.silent)throw C}function L(M){var C=M.exec(g);if(C){var N=C[0];return k(N),g=g.slice(N.length),C}}function O(){L(n)}function P(M){var C;for(M=M||[];C=j();)C!==!1&&M.push(C);return M}function j(){var M=E();if(!(h!=g.charAt(0)||u!=g.charAt(1))){for(var C=2;d!=g.charAt(C)&&(u!=g.charAt(C)||h!=g.charAt(C+1));)++C;if(C+=2,d===g.charAt(C-1))return S("End of comment missing");var N=g.slice(2,C-2);return w+=2,k(N),g=g.slice(C),w+=2,M({type:m,comment:N})}}function A(){var M=E(),C=L(a);if(C){if(j(),!L(r))return S("property missing ':'");var N=L(s),R=M({type:f,property:p(C[0].replace(t,d)),value:N?p(N[0].replace(t,d)):d});return L(o),R}}function q(){var M=[];P(M);for(var C;C=A();)C!==!1&&(M.push(C),P(M));return M}return O(),q()};function p(g){return g?g.replace(l,d):d}return Td}var Jy;function nM(){if(Jy)return Vr;Jy=1;var t=Vr&&Vr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=n;var e=t(tM());function n(a,r){var s=null;if(!a||typeof a!="string")return s;var o=(0,e.default)(a),l=typeof r=="function";return o.forEach(function(c){if(c.type==="declaration"){var h=c.property,u=c.value;l?r(h,u,c):u&&(s=s||{},s[h]=u)}}),s}return Vr}var ao={},Qy;function iM(){if(Qy)return ao;Qy=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,s=function(h){return!h||n.test(h)||t.test(h)},o=function(h,u){return u.toUpperCase()},l=function(h,u){return"".concat(u,"-")},c=function(h,u){return u===void 0&&(u={}),s(h)?h:(h=h.toLowerCase(),u.reactCompat?h=h.replace(r,l):h=h.replace(a,l),h.replace(e,o))};return ao.camelCase=c,ao}var ro,Ky;function aM(){if(Ky)return ro;Ky=1;var t=ro&&ro.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=t(nM()),n=iM();function a(r,s){var o={};return!r||typeof r!="string"||(0,e.default)(r,function(l,c){l&&c&&(o[(0,n.camelCase)(l,s)]=c)}),o}return a.default=a,ro=a,ro}var rM=aM();const sM=xg(rM),pu=MT("end"),Bi=MT("start");function MT(t){return e;function e(n){const a=n&&n.position&&n.position[t]||{};if(typeof a.line=="number"&&a.line>0&&typeof a.column=="number"&&a.column>0)return{line:a.line,column:a.column,offset:typeof a.offset=="number"&&a.offset>-1?a.offset:void 0}}}function oM(t){const e=Bi(t),n=pu(t);if(e&&n)return{start:e,end:n}}function nl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Zy(t.position):"start"in t||"end"in t?Zy(t):"line"in t||"column"in t?$f(t):""}function $f(t){return e0(t&&t.line)+":"+e0(t&&t.column)}function Zy(t){return $f(t&&t.start)+"-"+$f(t&&t.end)}function e0(t){return t&&typeof t=="number"?t:1}class rn extends Error{constructor(e,n,a){super(),typeof n=="string"&&(a=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof a=="string"){const c=a.indexOf(":");c===-1?s.ruleId=a:(s.source=a.slice(0,c),s.ruleId=a.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=l?l.line:void 0,this.name=nl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}rn.prototype.file="";rn.prototype.name="";rn.prototype.reason="";rn.prototype.message="";rn.prototype.stack="";rn.prototype.column=void 0;rn.prototype.line=void 0;rn.prototype.ancestors=void 0;rn.prototype.cause=void 0;rn.prototype.fatal=void 0;rn.prototype.place=void 0;rn.prototype.ruleId=void 0;rn.prototype.source=void 0;const wg={}.hasOwnProperty,lM=new Map,cM=/[A-Z]/g,hM=new Set(["table","tbody","thead","tfoot","tr"]),uM=new Set(["td","th"]),RT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function dM(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let a;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");a=wM(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");a=bM(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:a,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Ds:fu,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=PT(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function PT(t,e,n){if(e.type==="element")return mM(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return fM(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return gM(t,e,n);if(e.type==="mdxjsEsm")return pM(t,e);if(e.type==="root")return xM(t,e,n);if(e.type==="text")return yM(t,e)}function mM(t,e,n){const a=t.schema;let r=a;e.tagName.toLowerCase()==="svg"&&a.space==="html"&&(r=Ds,t.schema=r),t.ancestors.push(e);const s=BT(t,e.tagName,!1),o=_M(t,e);let l=vg(t,e);return hM.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!VO(c):!0})),DT(t,o,s,e),_g(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function fM(t,e){if(e.data&&e.data.estree&&t.evaluater){const a=e.data.estree.body[0];return a.type,t.evaluater.evaluateExpression(a.expression)}vl(t,e.position)}function pM(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);vl(t,e.position)}function gM(t,e,n){const a=t.schema;let r=a;e.name==="svg"&&a.space==="html"&&(r=Ds,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:BT(t,e.name,!0),o=vM(t,e),l=vg(t,e);return DT(t,o,s,e),_g(o,l),t.ancestors.pop(),t.schema=a,t.create(e,s,o,n)}function xM(t,e,n){const a={};return _g(a,vg(t,e)),t.create(e,t.Fragment,a,n)}function yM(t,e){return e.value}function DT(t,e,n,a){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=a)}function _g(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function bM(t,e,n){return a;function a(r,s,o,l){const h=Array.isArray(o.children)?n:e;return l?h(s,o,l):h(s,o)}}function wM(t,e){return n;function n(a,r,s,o){const l=Array.isArray(s.children),c=Bi(a);return e(r,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function _M(t,e){const n={};let a,r;for(r in e.properties)if(r!=="children"&&wg.call(e.properties,r)){const s=jM(t,r,e.properties[r]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&uM.has(e.tagName)?a=l:n[o]=l}}if(a){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=a}return n}function vM(t,e){const n={};for(const a of e.attributes)if(a.type==="mdxJsxExpressionAttribute")if(a.data&&a.data.estree&&t.evaluater){const s=a.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else vl(t,e.position);else{const r=a.name;let s;if(a.value&&typeof a.value=="object")if(a.value.data&&a.value.data.estree&&t.evaluater){const l=a.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else vl(t,e.position);else s=a.value===null?!0:a.value;n[r]=s}return n}function vg(t,e){const n=[];let a=-1;const r=t.passKeys?new Map:lM;for(;++a<e.children.length;){const s=e.children[a];let o;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const h=r.get(c)||0;o=c+"-"+h,r.set(c,h+1)}}const l=PT(t,s,o);l!==void 0&&n.push(l)}return n}function jM(t,e,n){const a=bg(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=a.commaSeparated?kT(n):OT(n)),a.property==="style"){let r=typeof n=="object"?n:TM(t,String(n));return t.stylePropertyNameCase==="css"&&(r=kM(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&a.space?JO[a.property]||a.property:a.attribute,n]}}function TM(t,e){try{return sM(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const a=n,r=new rn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=RT+"#cannot-parse-style-attribute",r}}function BT(t,e,n){let a;if(!n)a={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const l=Wy(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}a=o}else a=Wy(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(a.type==="Literal"){const r=a.value;return wg.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(a);vl(t)}function vl(t,e){const n=new rn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=RT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function kM(t){const e={};let n;for(n in t)wg.call(t,n)&&(e[EM(n)]=t[n]);return e}function EM(t){let e=t.replace(cM,SM);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function SM(t){return"-"+t.toLowerCase()}const kd={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},CM={};function jg(t,e){const n=CM,a=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return FT(t,a,r)}function FT(t,e,n){if(AM(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return t0(t.children,e,n)}return Array.isArray(t)?t0(t,e,n):""}function t0(t,e,n){const a=[];let r=-1;for(;++r<t.length;)a[r]=FT(t[r],e,n);return a.join("")}function AM(t){return!!(t&&typeof t=="object")}const n0=document.createElement("i");function Tg(t){const e="&"+t+";";n0.innerHTML=e;const n=n0.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function qn(t,e,n,a){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,a.length<1e4)o=Array.from(a),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<a.length;)o=a.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Xn(t,e){return t.length>0?(qn(t,t.length,0,e),t):e}const i0={}.hasOwnProperty;function HT(t){const e={};let n=-1;for(;++n<t.length;)NM(e,t[n]);return e}function NM(t,e){let n;for(n in e){const r=(i0.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){i0.call(r,o)||(r[o]=[]);const l=s[o];IM(r[o],Array.isArray(l)?l:l?[l]:[])}}}function IM(t,e){let n=-1;const a=[];for(;++n<e.length;)(e[n].add==="after"?t:a).push(e[n]);qn(t,0,0,a)}function qT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function gi(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const un=Ba(/[A-Za-z]/),Kt=Ba(/[\dA-Za-z]/),LM=Ba(/[#-'*+\--9=?A-Z^-~]/);function ph(t){return t!==null&&(t<32||t===127)}const zf=Ba(/\d/),OM=Ba(/[\dA-Fa-f]/),MM=Ba(/[!-/:-@[-`{-~]/);function Ae(t){return t!==null&&t<-2}function ot(t){return t!==null&&(t<0||t===32)}function Ue(t){return t===-2||t===-1||t===32}const gu=Ba(new RegExp("\\p{P}|\\p{S}","u")),_r=Ba(/\s/);function Ba(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Bs(t){const e=[];let n=-1,a=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Kt(t.charCodeAt(n+1))&&Kt(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(a,n),encodeURIComponent(o)),a=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(a)}function Ge(t,e,n,a){const r=a?a-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Ue(c)?(t.enter(n),l(c)):e(c)}function l(c){return Ue(c)&&s++<r?(t.consume(c),l):(t.exit(n),e(c))}}const RM={tokenize:PM};function PM(t){const e=t.attempt(this.parser.constructs.contentInitial,a,r);let n;return e;function a(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Ge(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return Ae(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const DM={tokenize:BM},a0={tokenize:FM};function BM(t){const e=this,n=[];let a=0,r,s,o;return l;function l(k){if(a<n.length){const E=n[a];return e.containerState=E[1],t.attempt(E[0].continuation,c,h)(k)}return h(k)}function c(k){if(a++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&w();const E=e.events.length;let v=E,S;for(;v--;)if(e.events[v][0]==="exit"&&e.events[v][1].type==="chunkFlow"){S=e.events[v][1].end;break}b(a);let L=E;for(;L<e.events.length;)e.events[L][1].end={...S},L++;return qn(e.events,v+1,0,e.events.slice(E)),e.events.length=L,h(k)}return l(k)}function h(k){if(a===n.length){if(!r)return m(k);if(r.currentConstruct&&r.currentConstruct.concrete)return p(k);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(a0,u,d)(k)}function u(k){return r&&w(),b(a),m(k)}function d(k){return e.parser.lazy[e.now().line]=a!==n.length,o=e.now().offset,p(k)}function m(k){return e.containerState={},t.attempt(a0,f,p)(k)}function f(k){return a++,n.push([e.currentConstruct,e.containerState]),m(k)}function p(k){if(k===null){r&&w(),b(0),t.consume(k);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),g(k)}function g(k){if(k===null){x(t.exit("chunkFlow"),!0),b(0),t.consume(k);return}return Ae(k)?(t.consume(k),x(t.exit("chunkFlow")),a=0,e.interrupt=void 0,l):(t.consume(k),g)}function x(k,E){const v=e.sliceStream(k);if(E&&v.push(null),k.previous=s,s&&(s.next=k),s=k,r.defineSkip(k.start),r.write(v),e.parser.lazy[k.start.line]){let S=r.events.length;for(;S--;)if(r.events[S][1].start.offset<o&&(!r.events[S][1].end||r.events[S][1].end.offset>o))return;const L=e.events.length;let O=L,P,j;for(;O--;)if(e.events[O][0]==="exit"&&e.events[O][1].type==="chunkFlow"){if(P){j=e.events[O][1].end;break}P=!0}for(b(a),S=L;S<e.events.length;)e.events[S][1].end={...j},S++;qn(e.events,O+1,0,e.events.slice(L)),e.events.length=S}}function b(k){let E=n.length;for(;E-- >k;){const v=n[E];e.containerState=v[1],v[0].exit.call(e,t)}n.length=k}function w(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function FM(t,e,n){return Ge(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ys(t){if(t===null||ot(t)||_r(t))return 1;if(gu(t))return 2}function xu(t,e,n){const a=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!a.includes(s)&&(e=s(e,n),a.push(s))}return e}const Wf={name:"attention",resolveAll:HM,tokenize:qM};function HM(t,e){let n=-1,a,r,s,o,l,c,h,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(a=n;a--;)if(t[a][0]==="exit"&&t[a][1].type==="attentionSequence"&&t[a][1]._open&&e.sliceSerialize(t[a][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[a][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[a][1].end.offset-t[a][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[a][1].end.offset-t[a][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[a][1].end},m={...t[n][1].start};r0(d,-c),r0(m,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...t[a][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:c>1?"strongText":"emphasisText",start:{...t[a][1].end},end:{...t[n][1].start}},r={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[a][1].end={...o.start},t[n][1].start={...l.end},h=[],t[a][1].end.offset-t[a][1].start.offset&&(h=Xn(h,[["enter",t[a][1],e],["exit",t[a][1],e]])),h=Xn(h,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),h=Xn(h,xu(e.parser.constructs.insideSpan.null,t.slice(a+1,n),e)),h=Xn(h,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,h=Xn(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,qn(t,a-1,n-a+3,h),n=a+h.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function qM(t,e){const n=this.parser.constructs.attentionMarkers.null,a=this.previous,r=ys(a);let s;return o;function o(c){return s=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===s)return t.consume(c),l;const h=t.exit("attentionSequence"),u=ys(c),d=!u||u===2&&r||n.includes(c),m=!r||r===2&&u||n.includes(a);return h._open=!!(s===42?d:d&&(r||!m)),h._close=!!(s===42?m:m&&(u||!d)),e(c)}}function r0(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const $M={name:"autolink",tokenize:zM};function zM(t,e,n){let a=0;return r;function r(f){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(f){return un(f)?(t.consume(f),o):f===64?n(f):h(f)}function o(f){return f===43||f===45||f===46||Kt(f)?(a=1,l(f)):h(f)}function l(f){return f===58?(t.consume(f),a=0,c):(f===43||f===45||f===46||Kt(f))&&a++<32?(t.consume(f),l):(a=0,h(f))}function c(f){return f===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):f===null||f===32||f===60||ph(f)?n(f):(t.consume(f),c)}function h(f){return f===64?(t.consume(f),u):LM(f)?(t.consume(f),h):n(f)}function u(f){return Kt(f)?d(f):n(f)}function d(f){return f===46?(t.consume(f),a=0,u):f===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(f),t.exit("autolinkMarker"),t.exit("autolink"),e):m(f)}function m(f){if((f===45||Kt(f))&&a++<63){const p=f===45?m:d;return t.consume(f),p}return n(f)}}const Ul={partial:!0,tokenize:WM};function WM(t,e,n){return a;function a(s){return Ue(s)?Ge(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||Ae(s)?e(s):n(s)}}const $T={continuation:{tokenize:VM},exit:YM,name:"blockQuote",tokenize:UM};function UM(t,e,n){const a=this;return r;function r(o){if(o===62){const l=a.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ue(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function VM(t,e,n){const a=this;return r;function r(o){return Ue(o)?Ge(t,s,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt($T,e,n)(o)}}function YM(t){t.exit("blockQuote")}const zT={name:"characterEscape",tokenize:GM};function GM(t,e,n){return a;function a(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return MM(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const WT={name:"characterReference",tokenize:XM};function XM(t,e,n){const a=this;let r=0,s,o;return l;function l(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),c}function c(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,o=Kt,u(d))}function h(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=OM,u):(t.enter("characterReferenceValue"),s=7,o=zf,u(d))}function u(d){if(d===59&&r){const m=t.exit("characterReferenceValue");return o===Kt&&!Tg(a.sliceSerialize(m))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&r++<s?(t.consume(d),u):n(d)}}const s0={partial:!0,tokenize:QM},o0={concrete:!0,name:"codeFenced",tokenize:JM};function JM(t,e,n){const a=this,r={partial:!0,tokenize:v};let s=0,o=0,l;return c;function c(S){return h(S)}function h(S){const L=a.events[a.events.length-1];return s=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,l=S,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===l?(o++,t.consume(S),u):o<3?n(S):(t.exit("codeFencedFenceSequence"),Ue(S)?Ge(t,d,"whitespace")(S):d(S))}function d(S){return S===null||Ae(S)?(t.exit("codeFencedFence"),a.interrupt?e(S):t.check(s0,g,E)(S)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(S))}function m(S){return S===null||Ae(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(S)):Ue(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ge(t,f,"whitespace")(S)):S===96&&S===l?n(S):(t.consume(S),m)}function f(S){return S===null||Ae(S)?d(S):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Ae(S)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(S)):S===96&&S===l?n(S):(t.consume(S),p)}function g(S){return t.attempt(r,E,x)(S)}function x(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),b}function b(S){return s>0&&Ue(S)?Ge(t,w,"linePrefix",s+1)(S):w(S)}function w(S){return S===null||Ae(S)?t.check(s0,g,E)(S):(t.enter("codeFlowValue"),k(S))}function k(S){return S===null||Ae(S)?(t.exit("codeFlowValue"),w(S)):(t.consume(S),k)}function E(S){return t.exit("codeFenced"),e(S)}function v(S,L,O){let P=0;return j;function j(N){return S.enter("lineEnding"),S.consume(N),S.exit("lineEnding"),A}function A(N){return S.enter("codeFencedFence"),Ue(N)?Ge(S,q,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):q(N)}function q(N){return N===l?(S.enter("codeFencedFenceSequence"),M(N)):O(N)}function M(N){return N===l?(P++,S.consume(N),M):P>=o?(S.exit("codeFencedFenceSequence"),Ue(N)?Ge(S,C,"whitespace")(N):C(N)):O(N)}function C(N){return N===null||Ae(N)?(S.exit("codeFencedFence"),L(N)):O(N)}}}function QM(t,e,n){const a=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}const Ed={name:"codeIndented",tokenize:ZM},KM={partial:!0,tokenize:eR};function ZM(t,e,n){const a=this;return r;function r(h){return t.enter("codeIndented"),Ge(t,s,"linePrefix",5)(h)}function s(h){const u=a.events[a.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?c(h):Ae(h)?t.attempt(KM,o,c)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||Ae(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),l)}function c(h){return t.exit("codeIndented"),e(h)}}function eR(t,e,n){const a=this;return r;function r(o){return a.parser.lazy[a.now().line]?n(o):Ae(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Ge(t,s,"linePrefix",5)(o)}function s(o){const l=a.events[a.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):Ae(o)?r(o):n(o)}}const tR={name:"codeText",previous:iR,resolve:nR,tokenize:aR};function nR(t){let e=t.length-4,n=3,a,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(a=n;++a<e;)if(t[a][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(a=n-1,e++;++a<=e;)r===void 0?a!==e&&t[a][1].type!=="lineEnding"&&(r=a):(a===e||t[a][1].type==="lineEnding")&&(t[r][1].type="codeTextData",a!==r+2&&(t[r][1].end=t[a-1][1].end,t.splice(r+2,a-r-2),e-=a-r-2,a=r+2),r=void 0);return t}function iR(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function aR(t,e,n){let a=0,r,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),l(d)}function l(d){return d===96?(t.consume(d),a++,l):(t.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),c):d===96?(s=t.enter("codeTextSequence"),r=0,u(d)):Ae(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("codeTextData"),h(d))}function h(d){return d===null||d===32||d===96||Ae(d)?(t.exit("codeTextData"),c(d)):(t.consume(d),h)}function u(d){return d===96?(t.consume(d),r++,u):r===a?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",h(d))}}class rR{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const a=n??Number.POSITIVE_INFINITY;return a<this.left.length?this.left.slice(e,a):e>this.left.length?this.right.slice(this.right.length-a+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-a+this.left.length).reverse())}splice(e,n,a){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return a&&so(this.left,a),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),so(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),so(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);so(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);so(this.left,n.reverse())}}}function so(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function UT(t){const e={};let n=-1,a,r,s,o,l,c,h;const u=new rR(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(a=u.get(n),n&&a[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(c=a[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(a[0]==="enter")a[1].contentType&&(Object.assign(e,sR(u,n)),n=e[n],h=!0);else if(a[1]._container){for(s=n,r=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(u.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(a[1].end={...u.get(r)[1].start},l=u.slice(r,n),l.unshift(a),u.splice(r,n-r+1,l))}}return qn(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!h}function sR(t,e){const n=t.get(e)[1],a=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=a.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],h={};let u,d,m=-1,f=n,p=0,g=0;const x=[g];for(;f;){for(;t.get(++r)[1]!==f;);s.push(r),f._tokenizer||(u=a.sliceStream(f),f.next||u.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++m<l.length;)l[m][0]==="exit"&&l[m-1][0]==="enter"&&l[m][1].type===l[m-1][1].type&&l[m][1].start.line!==l[m][1].end.line&&(g=m+1,x.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):x.pop(),m=x.length;m--;){const b=l.slice(x[m],x[m+1]),w=s.pop();c.push([w,w+b.length-1]),t.splice(w,2,b)}for(c.reverse(),m=-1;++m<c.length;)h[p+c[m][0]]=p+c[m][1],p+=c[m][1]-c[m][0]-1;return h}const oR={resolve:cR,tokenize:hR},lR={partial:!0,tokenize:uR};function cR(t){return UT(t),t}function hR(t,e){let n;return a;function a(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):Ae(l)?t.check(lR,o,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function uR(t,e,n){const a=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ge(t,s,"linePrefix")}function s(o){if(o===null||Ae(o))return n(o);const l=a.events[a.events.length-1];return!a.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(a.parser.constructs.flow,n,e)(o)}}function VT(t,e,n,a,r,s,o,l,c){const h=c||Number.POSITIVE_INFINITY;let u=0;return d;function d(b){return b===60?(t.enter(a),t.enter(r),t.enter(s),t.consume(b),t.exit(s),m):b===null||b===32||b===41||ph(b)?n(b):(t.enter(a),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),g(b))}function m(b){return b===62?(t.enter(s),t.consume(b),t.exit(s),t.exit(r),t.exit(a),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===62?(t.exit("chunkString"),t.exit(l),m(b)):b===null||b===60||Ae(b)?n(b):(t.consume(b),b===92?p:f)}function p(b){return b===60||b===62||b===92?(t.consume(b),f):f(b)}function g(b){return!u&&(b===null||b===41||ot(b))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(a),e(b)):u<h&&b===40?(t.consume(b),u++,g):b===41?(t.consume(b),u--,g):b===null||b===32||b===40||ph(b)?n(b):(t.consume(b),b===92?x:g)}function x(b){return b===40||b===41||b===92?(t.consume(b),g):g(b)}}function YT(t,e,n,a,r,s){const o=this;let l=0,c;return h;function h(f){return t.enter(a),t.enter(r),t.consume(f),t.exit(r),t.enter(s),u}function u(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(t.exit(s),t.enter(r),t.consume(f),t.exit(r),t.exit(a),e):Ae(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Ae(f)||l++>999?(t.exit("chunkString"),u(f)):(t.consume(f),c||(c=!Ue(f)),f===92?m:d)}function m(f){return f===91||f===92||f===93?(t.consume(f),l++,d):d(f)}}function GT(t,e,n,a,r,s){let o;return l;function l(m){return m===34||m===39||m===40?(t.enter(a),t.enter(r),t.consume(m),t.exit(r),o=m===40?41:m,c):n(m)}function c(m){return m===o?(t.enter(r),t.consume(m),t.exit(r),t.exit(a),e):(t.enter(s),h(m))}function h(m){return m===o?(t.exit(s),c(o)):m===null?n(m):Ae(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Ge(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(m))}function u(m){return m===o||m===null||Ae(m)?(t.exit("chunkString"),h(m)):(t.consume(m),m===92?d:u)}function d(m){return m===o||m===92?(t.consume(m),u):u(m)}}function il(t,e){let n;return a;function a(r){return Ae(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,a):Ue(r)?Ge(t,a,n?"linePrefix":"lineSuffix")(r):e(r)}}const dR={name:"definition",tokenize:fR},mR={partial:!0,tokenize:pR};function fR(t,e,n){const a=this;let r;return s;function s(f){return t.enter("definition"),o(f)}function o(f){return YT.call(a,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return r=gi(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)),f===58?(t.enter("definitionMarker"),t.consume(f),t.exit("definitionMarker"),c):n(f)}function c(f){return ot(f)?il(t,h)(f):h(f)}function h(f){return VT(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function u(f){return t.attempt(mR,d,d)(f)}function d(f){return Ue(f)?Ge(t,m,"whitespace")(f):m(f)}function m(f){return f===null||Ae(f)?(t.exit("definition"),a.parser.defined.push(r),e(f)):n(f)}}function pR(t,e,n){return a;function a(l){return ot(l)?il(t,r)(l):n(l)}function r(l){return GT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Ue(l)?Ge(t,o,"whitespace")(l):o(l)}function o(l){return l===null||Ae(l)?e(l):n(l)}}const gR={name:"hardBreakEscape",tokenize:xR};function xR(t,e,n){return a;function a(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return Ae(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const yR={name:"headingAtx",resolve:bR,tokenize:wR};function bR(t,e){let n=t.length-2,a=3,r,s;return t[a][1].type==="whitespace"&&(a+=2),n-2>a&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(a===n-1||n-4>a&&t[n-2][1].type==="whitespace")&&(n-=a+1===n?2:4),n>a&&(r={type:"atxHeadingText",start:t[a][1].start,end:t[n][1].end},s={type:"chunkText",start:t[a][1].start,end:t[n][1].end,contentType:"text"},qn(t,a,n-a+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function wR(t,e,n){let a=0;return r;function r(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&a++<6?(t.consume(u),o):u===null||ot(u)?(t.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),c(u)):u===null||Ae(u)?(t.exit("atxHeading"),e(u)):Ue(u)?Ge(t,l,"whitespace")(u):(t.enter("atxHeadingText"),h(u))}function c(u){return u===35?(t.consume(u),c):(t.exit("atxHeadingSequence"),l(u))}function h(u){return u===null||u===35||ot(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),h)}}const _R=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],l0=["pre","script","style","textarea"],vR={concrete:!0,name:"htmlFlow",resolveTo:kR,tokenize:ER},jR={partial:!0,tokenize:CR},TR={partial:!0,tokenize:SR};function kR(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ER(t,e,n){const a=this;let r,s,o,l,c;return h;function h(I){return u(I)}function u(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),d}function d(I){return I===33?(t.consume(I),m):I===47?(t.consume(I),s=!0,g):I===63?(t.consume(I),r=3,a.interrupt?e:T):un(I)?(t.consume(I),o=String.fromCharCode(I),x):n(I)}function m(I){return I===45?(t.consume(I),r=2,f):I===91?(t.consume(I),r=5,l=0,p):un(I)?(t.consume(I),r=4,a.interrupt?e:T):n(I)}function f(I){return I===45?(t.consume(I),a.interrupt?e:T):n(I)}function p(I){const H="CDATA[";return I===H.charCodeAt(l++)?(t.consume(I),l===H.length?a.interrupt?e:q:p):n(I)}function g(I){return un(I)?(t.consume(I),o=String.fromCharCode(I),x):n(I)}function x(I){if(I===null||I===47||I===62||ot(I)){const H=I===47,W=o.toLowerCase();return!H&&!s&&l0.includes(W)?(r=1,a.interrupt?e(I):q(I)):_R.includes(o.toLowerCase())?(r=6,H?(t.consume(I),b):a.interrupt?e(I):q(I)):(r=7,a.interrupt&&!a.parser.lazy[a.now().line]?n(I):s?w(I):k(I))}return I===45||Kt(I)?(t.consume(I),o+=String.fromCharCode(I),x):n(I)}function b(I){return I===62?(t.consume(I),a.interrupt?e:q):n(I)}function w(I){return Ue(I)?(t.consume(I),w):j(I)}function k(I){return I===47?(t.consume(I),j):I===58||I===95||un(I)?(t.consume(I),E):Ue(I)?(t.consume(I),k):j(I)}function E(I){return I===45||I===46||I===58||I===95||Kt(I)?(t.consume(I),E):v(I)}function v(I){return I===61?(t.consume(I),S):Ue(I)?(t.consume(I),v):k(I)}function S(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),c=I,L):Ue(I)?(t.consume(I),S):O(I)}function L(I){return I===c?(t.consume(I),c=null,P):I===null||Ae(I)?n(I):(t.consume(I),L)}function O(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||ot(I)?v(I):(t.consume(I),O)}function P(I){return I===47||I===62||Ue(I)?k(I):n(I)}function j(I){return I===62?(t.consume(I),A):n(I)}function A(I){return I===null||Ae(I)?q(I):Ue(I)?(t.consume(I),A):n(I)}function q(I){return I===45&&r===2?(t.consume(I),R):I===60&&r===1?(t.consume(I),$):I===62&&r===4?(t.consume(I),Y):I===63&&r===3?(t.consume(I),T):I===93&&r===5?(t.consume(I),B):Ae(I)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(jR,X,M)(I)):I===null||Ae(I)?(t.exit("htmlFlowData"),M(I)):(t.consume(I),q)}function M(I){return t.check(TR,C,X)(I)}function C(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),N}function N(I){return I===null||Ae(I)?M(I):(t.enter("htmlFlowData"),q(I))}function R(I){return I===45?(t.consume(I),T):q(I)}function $(I){return I===47?(t.consume(I),o="",U):q(I)}function U(I){if(I===62){const H=o.toLowerCase();return l0.includes(H)?(t.consume(I),Y):q(I)}return un(I)&&o.length<8?(t.consume(I),o+=String.fromCharCode(I),U):q(I)}function B(I){return I===93?(t.consume(I),T):q(I)}function T(I){return I===62?(t.consume(I),Y):I===45&&r===2?(t.consume(I),T):q(I)}function Y(I){return I===null||Ae(I)?(t.exit("htmlFlowData"),X(I)):(t.consume(I),Y)}function X(I){return t.exit("htmlFlow"),e(I)}}function SR(t,e,n){const a=this;return r;function r(o){return Ae(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return a.parser.lazy[a.now().line]?n(o):e(o)}}function CR(t,e,n){return a;function a(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Ul,e,n)}}const AR={name:"htmlText",tokenize:NR};function NR(t,e,n){const a=this;let r,s,o;return l;function l(T){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(T),c}function c(T){return T===33?(t.consume(T),h):T===47?(t.consume(T),v):T===63?(t.consume(T),k):un(T)?(t.consume(T),O):n(T)}function h(T){return T===45?(t.consume(T),u):T===91?(t.consume(T),s=0,p):un(T)?(t.consume(T),w):n(T)}function u(T){return T===45?(t.consume(T),f):n(T)}function d(T){return T===null?n(T):T===45?(t.consume(T),m):Ae(T)?(o=d,$(T)):(t.consume(T),d)}function m(T){return T===45?(t.consume(T),f):d(T)}function f(T){return T===62?R(T):T===45?m(T):d(T)}function p(T){const Y="CDATA[";return T===Y.charCodeAt(s++)?(t.consume(T),s===Y.length?g:p):n(T)}function g(T){return T===null?n(T):T===93?(t.consume(T),x):Ae(T)?(o=g,$(T)):(t.consume(T),g)}function x(T){return T===93?(t.consume(T),b):g(T)}function b(T){return T===62?R(T):T===93?(t.consume(T),b):g(T)}function w(T){return T===null||T===62?R(T):Ae(T)?(o=w,$(T)):(t.consume(T),w)}function k(T){return T===null?n(T):T===63?(t.consume(T),E):Ae(T)?(o=k,$(T)):(t.consume(T),k)}function E(T){return T===62?R(T):k(T)}function v(T){return un(T)?(t.consume(T),S):n(T)}function S(T){return T===45||Kt(T)?(t.consume(T),S):L(T)}function L(T){return Ae(T)?(o=L,$(T)):Ue(T)?(t.consume(T),L):R(T)}function O(T){return T===45||Kt(T)?(t.consume(T),O):T===47||T===62||ot(T)?P(T):n(T)}function P(T){return T===47?(t.consume(T),R):T===58||T===95||un(T)?(t.consume(T),j):Ae(T)?(o=P,$(T)):Ue(T)?(t.consume(T),P):R(T)}function j(T){return T===45||T===46||T===58||T===95||Kt(T)?(t.consume(T),j):A(T)}function A(T){return T===61?(t.consume(T),q):Ae(T)?(o=A,$(T)):Ue(T)?(t.consume(T),A):P(T)}function q(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),r=T,M):Ae(T)?(o=q,$(T)):Ue(T)?(t.consume(T),q):(t.consume(T),C)}function M(T){return T===r?(t.consume(T),r=void 0,N):T===null?n(T):Ae(T)?(o=M,$(T)):(t.consume(T),M)}function C(T){return T===null||T===34||T===39||T===60||T===61||T===96?n(T):T===47||T===62||ot(T)?P(T):(t.consume(T),C)}function N(T){return T===47||T===62||ot(T)?P(T):n(T)}function R(T){return T===62?(t.consume(T),t.exit("htmlTextData"),t.exit("htmlText"),e):n(T)}function $(T){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),U}function U(T){return Ue(T)?Ge(t,B,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):B(T)}function B(T){return t.enter("htmlTextData"),o(T)}}const kg={name:"labelEnd",resolveAll:MR,resolveTo:RR,tokenize:PR},IR={tokenize:DR},LR={tokenize:BR},OR={tokenize:FR};function MR(t){let e=-1;const n=[];for(;++e<t.length;){const a=t[e][1];if(n.push(t[e]),a.type==="labelImage"||a.type==="labelLink"||a.type==="labelEnd"){const r=a.type==="labelImage"?4:2;a.type="data",e+=r}}return t.length!==n.length&&qn(t,0,t.length,n),t}function RR(t,e){let n=t.length,a=0,r,s,o,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){a=2;break}}else r.type==="labelEnd"&&(o=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+a+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",c,e],["enter",h,e]],l=Xn(l,t.slice(s+1,s+a+3)),l=Xn(l,[["enter",u,e]]),l=Xn(l,xu(e.parser.constructs.insideSpan.null,t.slice(s+a+4,o-3),e)),l=Xn(l,[["exit",u,e],t[o-2],t[o-1],["exit",h,e]]),l=Xn(l,t.slice(o+1)),l=Xn(l,[["exit",c,e]]),qn(t,s,t.length,l),t}function PR(t,e,n){const a=this;let r=a.events.length,s,o;for(;r--;)if((a.events[r][1].type==="labelImage"||a.events[r][1].type==="labelLink")&&!a.events[r][1]._balanced){s=a.events[r][1];break}return l;function l(m){return s?s._inactive?d(m):(o=a.parser.defined.includes(gi(a.sliceSerialize({start:s.end,end:a.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),c):n(m)}function c(m){return m===40?t.attempt(IR,u,o?u:d)(m):m===91?t.attempt(LR,u,o?h:d)(m):o?u(m):d(m)}function h(m){return t.attempt(OR,u,d)(m)}function u(m){return e(m)}function d(m){return s._balanced=!0,n(m)}}function DR(t,e,n){return a;function a(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),r}function r(d){return ot(d)?il(t,s)(d):s(d)}function s(d){return d===41?u(d):VT(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return ot(d)?il(t,c)(d):u(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?GT(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function h(d){return ot(d)?il(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function BR(t,e,n){const a=this;return r;function r(l){return YT.call(a,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return a.parser.defined.includes(gi(a.sliceSerialize(a.events[a.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function FR(t,e,n){return a;function a(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const HR={name:"labelStartImage",resolveAll:kg.resolveAll,tokenize:qR};function qR(t,e,n){const a=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(l):e(l)}}const $R={name:"labelStartLink",resolveAll:kg.resolveAll,tokenize:zR};function zR(t,e,n){const a=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in a.parser.constructs?n(o):e(o)}}const Sd={name:"lineEnding",tokenize:WR};function WR(t,e){return n;function n(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ge(t,e,"linePrefix")}}const Gc={name:"thematicBreak",tokenize:UR};function UR(t,e,n){let a=0,r;return s;function s(h){return t.enter("thematicBreak"),o(h)}function o(h){return r=h,l(h)}function l(h){return h===r?(t.enter("thematicBreakSequence"),c(h)):a>=3&&(h===null||Ae(h))?(t.exit("thematicBreak"),e(h)):n(h)}function c(h){return h===r?(t.consume(h),a++,c):(t.exit("thematicBreakSequence"),Ue(h)?Ge(t,l,"whitespace")(h):l(h))}}const Tn={continuation:{tokenize:XR},exit:QR,name:"list",tokenize:GR},VR={partial:!0,tokenize:KR},YR={partial:!0,tokenize:JR};function GR(t,e,n){const a=this,r=a.events[a.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return l;function l(f){const p=a.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!a.containerState.marker||f===a.containerState.marker:zf(f)){if(a.containerState.type||(a.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Gc,n,h)(f):h(f);if(!a.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(f)}return n(f)}function c(f){return zf(f)&&++o<10?(t.consume(f),c):(!a.interrupt||o<2)&&(a.containerState.marker?f===a.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),h(f)):n(f)}function h(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||f,t.check(Ul,a.interrupt?n:u,t.attempt(VR,m,d))}function u(f){return a.containerState.initialBlankLine=!0,s++,m(f)}function d(f){return Ue(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),m):n(f)}function m(f){return a.containerState.size=s+a.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function XR(t,e,n){const a=this;return a.containerState._closeFlow=void 0,t.check(Ul,r,s);function r(l){return a.containerState.furtherBlankLines=a.containerState.furtherBlankLines||a.containerState.initialBlankLine,Ge(t,e,"listItemIndent",a.containerState.size+1)(l)}function s(l){return a.containerState.furtherBlankLines||!Ue(l)?(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,o(l)):(a.containerState.furtherBlankLines=void 0,a.containerState.initialBlankLine=void 0,t.attempt(YR,e,o)(l))}function o(l){return a.containerState._closeFlow=!0,a.interrupt=void 0,Ge(t,t.attempt(Tn,e,n),"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function JR(t,e,n){const a=this;return Ge(t,r,"listItemIndent",a.containerState.size+1);function r(s){const o=a.events[a.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===a.containerState.size?e(s):n(s)}}function QR(t){t.exit(this.containerState.type)}function KR(t,e,n){const a=this;return Ge(t,r,"listItemPrefixWhitespace",a.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=a.events[a.events.length-1];return!Ue(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const c0={name:"setextUnderline",resolveTo:ZR,tokenize:eP};function ZR(t,e){let n=t.length,a,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){a=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[a][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[a][1],e]),t[a][1].end={...t[s][1].end}):t[a][1]=o,t.push(["exit",o,e]),t}function eP(t,e,n){const a=this;let r;return s;function s(h){let u=a.events.length,d;for(;u--;)if(a.events[u][1].type!=="lineEnding"&&a.events[u][1].type!=="linePrefix"&&a.events[u][1].type!=="content"){d=a.events[u][1].type==="paragraph";break}return!a.parser.lazy[a.now().line]&&(a.interrupt||d)?(t.enter("setextHeadingLine"),r=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===r?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),Ue(h)?Ge(t,c,"lineSuffix")(h):c(h))}function c(h){return h===null||Ae(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const tP={tokenize:nP};function nP(t){const e=this,n=t.attempt(Ul,a,t.attempt(this.parser.constructs.flowInitial,r,Ge(t,t.attempt(this.parser.constructs.flow,r,t.attempt(oR,r)),"linePrefix")));return n;function a(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const iP={resolveAll:JT()},aP=XT("string"),rP=XT("text");function XT(t){return{resolveAll:JT(t==="text"?sP:void 0),tokenize:e};function e(n){const a=this,r=this.parser.constructs[t],s=n.attempt(r,o,l);return o;function o(u){return h(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),c}function c(u){return h(u)?(n.exit("data"),s(u)):(n.consume(u),c)}function h(u){if(u===null)return!0;const d=r[u];let m=-1;if(d)for(;++m<d.length;){const f=d[m];if(!f.previous||f.previous.call(a,a.previous))return!0}return!1}}}function JT(t){return e;function e(n,a){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,a):n}}function sP(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const a=t[n-1][1],r=e.sliceStream(a);let s=r.length,o=-1,l=0,c;for(;s--;){const h=r[s];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(h===-2)c=!0,l++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:a.start._bufferIndex+o,_index:a.start._index+s,line:a.end.line,column:a.end.column-l,offset:a.end.offset-l},end:{...a.end}};a.end={...h.start},a.start.offset===a.end.offset?Object.assign(a,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const oP={42:Tn,43:Tn,45:Tn,48:Tn,49:Tn,50:Tn,51:Tn,52:Tn,53:Tn,54:Tn,55:Tn,56:Tn,57:Tn,62:$T},lP={91:dR},cP={[-2]:Ed,[-1]:Ed,32:Ed},hP={35:yR,42:Gc,45:[c0,Gc],60:vR,61:c0,95:Gc,96:o0,126:o0},uP={38:WT,92:zT},dP={[-5]:Sd,[-4]:Sd,[-3]:Sd,33:HR,38:WT,42:Wf,60:[$M,AR],91:$R,92:[gR,zT],93:kg,95:Wf,96:tR},mP={null:[Wf,iP]},fP={null:[42,95]},pP={null:[]},gP=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:fP,contentInitial:lP,disable:pP,document:oP,flow:hP,flowInitial:cP,insideSpan:mP,string:uP,text:dP},Symbol.toStringTag,{value:"Module"}));function xP(t,e,n){let a={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],l=[];const c={attempt:L(v),check:L(S),consume:w,enter:k,exit:E,interrupt:L(S,{interrupt:!0})},h={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:m,sliceStream:f,write:d};let u=e.tokenize.call(h,c);return e.resolveAll&&s.push(e),h;function d(A){return o=Xn(o,A),x(),o[o.length-1]!==null?[]:(O(e,0),h.events=xu(s,h.events,h),h.events)}function m(A,q){return bP(f(A),q)}function f(A){return yP(o,A)}function p(){const{_bufferIndex:A,_index:q,line:M,column:C,offset:N}=a;return{_bufferIndex:A,_index:q,line:M,column:C,offset:N}}function g(A){r[A.line]=A.column,j()}function x(){let A;for(;a._index<o.length;){const q=o[a._index];if(typeof q=="string")for(A=a._index,a._bufferIndex<0&&(a._bufferIndex=0);a._index===A&&a._bufferIndex<q.length;)b(q.charCodeAt(a._bufferIndex));else b(q)}}function b(A){u=u(A)}function w(A){Ae(A)?(a.line++,a.column=1,a.offset+=A===-3?2:1,j()):A!==-1&&(a.column++,a.offset++),a._bufferIndex<0?a._index++:(a._bufferIndex++,a._bufferIndex===o[a._index].length&&(a._bufferIndex=-1,a._index++)),h.previous=A}function k(A,q){const M=q||{};return M.type=A,M.start=p(),h.events.push(["enter",M,h]),l.push(M),M}function E(A){const q=l.pop();return q.end=p(),h.events.push(["exit",q,h]),q}function v(A,q){O(A,q.from)}function S(A,q){q.restore()}function L(A,q){return M;function M(C,N,R){let $,U,B,T;return Array.isArray(C)?X(C):"tokenize"in C?X([C]):Y(C);function Y(K){return le;function le(he){const ue=he!==null&&K[he],Ee=he!==null&&K.null,Ce=[...Array.isArray(ue)?ue:ue?[ue]:[],...Array.isArray(Ee)?Ee:Ee?[Ee]:[]];return X(Ce)(he)}}function X(K){return $=K,U=0,K.length===0?R:I(K[U])}function I(K){return le;function le(he){return T=P(),B=K,K.partial||(h.currentConstruct=K),K.name&&h.parser.constructs.disable.null.includes(K.name)?W():K.tokenize.call(q?Object.assign(Object.create(h),q):h,c,H,W)(he)}}function H(K){return A(B,T),N}function W(K){return T.restore(),++U<$.length?I($[U]):R}}}function O(A,q){A.resolveAll&&!s.includes(A)&&s.push(A),A.resolve&&qn(h.events,q,h.events.length-q,A.resolve(h.events.slice(q),h)),A.resolveTo&&(h.events=A.resolveTo(h.events,h))}function P(){const A=p(),q=h.previous,M=h.currentConstruct,C=h.events.length,N=Array.from(l);return{from:C,restore:R};function R(){a=A,h.previous=q,h.currentConstruct=M,h.events.length=C,l=N,j()}}function j(){a.line in r&&a.column<2&&(a.column=r[a.line],a.offset+=r[a.line]-1)}}function yP(t,e){const n=e.start._index,a=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(a,s)];else{if(o=t.slice(n,r),a>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(a):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function bP(t,e){let n=-1;const a=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,a.push(o)}return a.join("")}function wP(t){const a={constructs:HT([gP,...(t||{}).extensions||[]]),content:r(RM),defined:[],document:r(DM),flow:r(tP),lazy:{},string:r(aP),text:r(rP)};return a;function r(s){return o;function o(l){return xP(a,s,l)}}}function _P(t){for(;!UT(t););return t}const h0=/[\0\t\n\r]/g;function vP(){let t=1,e="",n=!0,a;return r;function r(s,o,l){const c=[];let h,u,d,m,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(h0.lastIndex=d,h=h0.exec(s),m=h&&h.index!==void 0?h.index:s.length,f=s.charCodeAt(m),!h){e=s.slice(d);break}if(f===10&&d===m&&a)c.push(-3),a=void 0;else switch(a&&(c.push(-5),a=void 0),d<m&&(c.push(s.slice(d,m)),t+=m-d),f){case 0:{c.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,c.push(-2);t++<u;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:a=!0,t=1}d=m+1}return l&&(a&&c.push(-5),e&&c.push(e),c.push(null)),c}}const jP=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function TP(t){return t.replace(jP,kP)}function kP(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return qT(n.slice(s?2:1),s?16:10)}return Tg(n)||t}const QT={}.hasOwnProperty;function EP(t,e,n){return typeof e!="string"&&(n=e,e=void 0),SP(n)(_P(wP(n).document().write(vP()(t,e,!0))))}function SP(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ln),autolinkProtocol:P,autolinkEmail:P,atxHeading:s(st),blockQuote:s(Ee),characterEscape:P,characterReference:P,codeFenced:s(Ce),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ce,o),codeText:s(tt,o),codeTextData:P,data:P,codeFlowValue:P,definition:s(nt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Dt),hardBreakEscape:s(at),hardBreakTrailing:s(at),htmlFlow:s(xt,o),htmlFlowData:P,htmlText:s(xt,o),htmlTextData:P,image:s(vt),label:o,link:s(ln),listItem:s(ji),listItemValue:m,listOrdered:s(ii,d),listUnordered:s(ii),paragraph:s(zr),reference:I,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(st),strong:s(xa),thematicBreak:s(ya)},exit:{atxHeading:c(),atxHeadingSequence:v,autolink:c(),autolinkEmail:ue,autolinkProtocol:he,blockQuote:c(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:K,characterReference:le,codeFenced:c(x),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:j,codeIndented:c(b),codeText:c(N),codeTextData:j,data:j,definition:c(),definitionDestinationString:E,definitionLabelString:w,definitionTitleString:k,emphasis:c(),hardBreakEscape:c(q),hardBreakTrailing:c(q),htmlFlow:c(M),htmlFlowData:j,htmlText:c(C),htmlTextData:j,image:c($),label:B,labelText:U,lineEnding:A,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:H,resourceDestinationString:T,resourceTitleString:Y,resource:X,setextHeading:c(O),setextHeadingLineSequence:L,setextHeadingText:S,strong:c(),thematicBreak:c()}};KT(e,(t||{}).mdastExtensions||[]);const n={};return a;function a(ee){let ce={type:"root",children:[]};const Oe={stack:[ce],tokenStack:[],config:e,enter:l,exit:h,buffer:o,resume:u,data:n},Fe=[];let Xe=-1;for(;++Xe<ee.length;)if(ee[Xe][1].type==="listOrdered"||ee[Xe][1].type==="listUnordered")if(ee[Xe][0]==="enter")Fe.push(Xe);else{const yn=Fe.pop();Xe=r(ee,yn,Xe)}for(Xe=-1;++Xe<ee.length;){const yn=e[ee[Xe][0]];QT.call(yn,ee[Xe][1].type)&&yn[ee[Xe][1].type].call(Object.assign({sliceSerialize:ee[Xe][2].sliceSerialize},Oe),ee[Xe][1])}if(Oe.tokenStack.length>0){const yn=Oe.tokenStack[Oe.tokenStack.length-1];(yn[1]||u0).call(Oe,void 0,yn[0])}for(ce.position={start:ba(ee.length>0?ee[0][1].start:{line:1,column:1,offset:0}),end:ba(ee.length>0?ee[ee.length-2][1].end:{line:1,column:1,offset:0})},Xe=-1;++Xe<e.transforms.length;)ce=e.transforms[Xe](ce)||ce;return ce}function r(ee,ce,Oe){let Fe=ce-1,Xe=-1,yn=!1,Wn,bn,cn,Un;for(;++Fe<=Oe;){const Bt=ee[Fe];switch(Bt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bt[0]==="enter"?Xe++:Xe--,Un=void 0;break}case"lineEndingBlank":{Bt[0]==="enter"&&(Wn&&!Un&&!Xe&&!cn&&(cn=Fe),Un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Un=void 0}if(!Xe&&Bt[0]==="enter"&&Bt[1].type==="listItemPrefix"||Xe===-1&&Bt[0]==="exit"&&(Bt[1].type==="listUnordered"||Bt[1].type==="listOrdered")){if(Wn){let Ti=Fe;for(bn=void 0;Ti--;){const ai=ee[Ti];if(ai[1].type==="lineEnding"||ai[1].type==="lineEndingBlank"){if(ai[0]==="exit")continue;bn&&(ee[bn][1].type="lineEndingBlank",yn=!0),ai[1].type="lineEnding",bn=Ti}else if(!(ai[1].type==="linePrefix"||ai[1].type==="blockQuotePrefix"||ai[1].type==="blockQuotePrefixWhitespace"||ai[1].type==="blockQuoteMarker"||ai[1].type==="listItemIndent"))break}cn&&(!bn||cn<bn)&&(Wn._spread=!0),Wn.end=Object.assign({},bn?ee[bn][1].start:Bt[1].end),ee.splice(bn||Fe,0,["exit",Wn,Bt[2]]),Fe++,Oe++}if(Bt[1].type==="listItemPrefix"){const Ti={type:"listItem",_spread:!1,start:Object.assign({},Bt[1].start),end:void 0};Wn=Ti,ee.splice(Fe,0,["enter",Ti,Bt[2]]),Fe++,Oe++,cn=void 0,Un=!0}}}return ee[ce][1]._spread=yn,Oe}function s(ee,ce){return Oe;function Oe(Fe){l.call(this,ee(Fe),Fe),ce&&ce.call(this,Fe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(ee,ce,Oe){this.stack[this.stack.length-1].children.push(ee),this.stack.push(ee),this.tokenStack.push([ce,Oe||void 0]),ee.position={start:ba(ce.start),end:void 0}}function c(ee){return ce;function ce(Oe){ee&&ee.call(this,Oe),h.call(this,Oe)}}function h(ee,ce){const Oe=this.stack.pop(),Fe=this.tokenStack.pop();if(Fe)Fe[0].type!==ee.type&&(ce?ce.call(this,ee,Fe[0]):(Fe[1]||u0).call(this,ee,Fe[0]));else throw new Error("Cannot close `"+ee.type+"` ("+nl({start:ee.start,end:ee.end})+"): it’s not open");Oe.position.end=ba(ee.end)}function u(){return jg(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function m(ee){if(this.data.expectingFirstListItemValue){const ce=this.stack[this.stack.length-2];ce.start=Number.parseInt(this.sliceSerialize(ee),10),this.data.expectingFirstListItemValue=void 0}}function f(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.lang=ee}function p(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.meta=ee}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ee.replace(/(\r?\n|\r)$/g,"")}function w(ee){const ce=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=ce,Oe.identifier=gi(this.sliceSerialize(ee)).toLowerCase()}function k(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.title=ee}function E(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.url=ee}function v(ee){const ce=this.stack[this.stack.length-1];if(!ce.depth){const Oe=this.sliceSerialize(ee).length;ce.depth=Oe}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function L(ee){const ce=this.stack[this.stack.length-1];ce.depth=this.sliceSerialize(ee).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function P(ee){const Oe=this.stack[this.stack.length-1].children;let Fe=Oe[Oe.length-1];(!Fe||Fe.type!=="text")&&(Fe=Wa(),Fe.position={start:ba(ee.start),end:void 0},Oe.push(Fe)),this.stack.push(Fe)}function j(ee){const ce=this.stack.pop();ce.value+=this.sliceSerialize(ee),ce.position.end=ba(ee.end)}function A(ee){const ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Oe=ce.children[ce.children.length-1];Oe.position.end=ba(ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ce.type)&&(P.call(this,ee),j.call(this,ee))}function q(){this.data.atHardBreak=!0}function M(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ee}function C(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ee}function N(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.value=ee}function R(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=ce,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function $(){const ee=this.stack[this.stack.length-1];if(this.data.inReference){const ce=this.data.referenceType||"shortcut";ee.type+="Reference",ee.referenceType=ce,delete ee.url,delete ee.title}else delete ee.identifier,delete ee.label;this.data.referenceType=void 0}function U(ee){const ce=this.sliceSerialize(ee),Oe=this.stack[this.stack.length-2];Oe.label=TP(ce),Oe.identifier=gi(ce).toLowerCase()}function B(){const ee=this.stack[this.stack.length-1],ce=this.resume(),Oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Oe.type==="link"){const Fe=ee.children;Oe.children=Fe}else Oe.alt=ce}function T(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.url=ee}function Y(){const ee=this.resume(),ce=this.stack[this.stack.length-1];ce.title=ee}function X(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function H(ee){const ce=this.resume(),Oe=this.stack[this.stack.length-1];Oe.label=ce,Oe.identifier=gi(this.sliceSerialize(ee)).toLowerCase(),this.data.referenceType="full"}function W(ee){this.data.characterReferenceType=ee.type}function K(ee){const ce=this.sliceSerialize(ee),Oe=this.data.characterReferenceType;let Fe;Oe?(Fe=qT(ce,Oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Fe=Tg(ce);const Xe=this.stack[this.stack.length-1];Xe.value+=Fe}function le(ee){const ce=this.stack.pop();ce.position.end=ba(ee.end)}function he(ee){j.call(this,ee);const ce=this.stack[this.stack.length-1];ce.url=this.sliceSerialize(ee)}function ue(ee){j.call(this,ee);const ce=this.stack[this.stack.length-1];ce.url="mailto:"+this.sliceSerialize(ee)}function Ee(){return{type:"blockquote",children:[]}}function Ce(){return{type:"code",lang:null,meta:null,value:""}}function tt(){return{type:"inlineCode",value:""}}function nt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dt(){return{type:"emphasis",children:[]}}function st(){return{type:"heading",depth:0,children:[]}}function at(){return{type:"break"}}function xt(){return{type:"html",value:""}}function vt(){return{type:"image",title:null,url:"",alt:null}}function ln(){return{type:"link",title:null,url:"",children:[]}}function ii(ee){return{type:"list",ordered:ee.type==="listOrdered",start:null,spread:ee._spread,children:[]}}function ji(ee){return{type:"listItem",spread:ee._spread,checked:null,children:[]}}function zr(){return{type:"paragraph",children:[]}}function xa(){return{type:"strong",children:[]}}function Wa(){return{type:"text",value:""}}function ya(){return{type:"thematicBreak"}}}function ba(t){return{line:t.line,column:t.column,offset:t.offset}}function KT(t,e){let n=-1;for(;++n<e.length;){const a=e[n];Array.isArray(a)?KT(t,a):CP(t,a)}}function CP(t,e){let n;for(n in e)if(QT.call(e,n))switch(n){case"canContainEols":{const a=e[n];a&&t[n].push(...a);break}case"transforms":{const a=e[n];a&&t[n].push(...a);break}case"enter":case"exit":{const a=e[n];a&&Object.assign(t[n],a);break}}}function u0(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+nl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+nl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+nl({start:e.start,end:e.end})+") is still open")}function AP(t){const e=this;e.parser=n;function n(a){return EP(a,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function NP(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function IP(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function LP(t,e){const n=e.value?e.value+`
`:"",a={};e.lang&&(a.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:a,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function OP(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function MP(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function RP(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=String(e.identifier).toUpperCase(),r=Bs(a.toLowerCase()),s=t.footnoteOrder.indexOf(a);let o,l=t.footnoteCounts.get(a);l===void 0?(l=0,t.footnoteOrder.push(a),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(a,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,c);const h={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,h),t.applyData(e,h)}function PP(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function DP(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ZT(t,e){const n=e.referenceType;let a="]";if(n==="collapsed"?a+="[]":n==="full"&&(a+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+a}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=a:r.push({type:"text",value:a}),r}function BP(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return ZT(t,e);const r={src:Bs(a.url||""),alt:e.alt};a.title!==null&&a.title!==void 0&&(r.title=a.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function FP(t,e){const n={src:Bs(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,a),t.applyData(e,a)}function HP(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const a={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,a),t.applyData(e,a)}function qP(t,e){const n=String(e.identifier).toUpperCase(),a=t.definitionById.get(n);if(!a)return ZT(t,e);const r={href:Bs(a.url||"")};a.title!==null&&a.title!==void 0&&(r.title=a.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function $P(t,e){const n={href:Bs(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const a={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function zP(t,e,n){const a=t.all(e),r=n?WP(n):ek(e),s={},o=[];if(typeof e.checked=="boolean"){const u=a[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},a.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<a.length;){const u=a[l];(r||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!r?o.push(...u.children):o.push(u)}const c=a[a.length-1];c&&(r||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,h),t.applyData(e,h)}function WP(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let a=-1;for(;!e&&++a<n.length;)e=ek(n[a])}return e}function ek(t){const e=t.spread;return e??t.children.length>1}function UP(t,e){const n={},a=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<a.length;){const o=a[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(a,!0)};return t.patch(e,s),t.applyData(e,s)}function VP(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function YP(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function GP(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function XP(t,e){const n=t.all(e),a=n.shift(),r=[];if(a){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([a],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Bi(e.children[1]),c=pu(e.children[e.children.length-1]);l&&c&&(o.position={start:l,end:c}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function JP(t,e,n){const a=n?n.children:void 0,s=(a?a.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let c=-1;const h=[];for(;++c<l;){const d=e.children[c],m={},f=o?o[c]:void 0;f&&(m.align=f);let p={type:"element",tagName:s,properties:m,children:[]};d&&(p.children=t.all(d),t.patch(d,p),p=t.applyData(d,p)),h.push(p)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,u),t.applyData(e,u)}function QP(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const d0=9,m0=32;function KP(t){const e=String(t),n=/\r?\n|\r/g;let a=n.exec(e),r=0;const s=[];for(;a;)s.push(f0(e.slice(r,a.index),r>0,!0),a[0]),r=a.index+a[0].length,a=n.exec(e);return s.push(f0(e.slice(r),r>0,!1)),s.join("")}function f0(t,e,n){let a=0,r=t.length;if(e){let s=t.codePointAt(a);for(;s===d0||s===m0;)a++,s=t.codePointAt(a)}if(n){let s=t.codePointAt(r-1);for(;s===d0||s===m0;)r--,s=t.codePointAt(r-1)}return r>a?t.slice(a,r):""}function ZP(t,e){const n={type:"text",value:KP(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function eD(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const tD={blockquote:NP,break:IP,code:LP,delete:OP,emphasis:MP,footnoteReference:RP,heading:PP,html:DP,imageReference:BP,image:FP,inlineCode:HP,linkReference:qP,link:$P,listItem:zP,list:UP,paragraph:VP,root:YP,strong:GP,table:XP,tableCell:QP,tableRow:JP,text:ZP,thematicBreak:eD,toml:pc,yaml:pc,definition:pc,footnoteDefinition:pc};function pc(){}const tk=-1,yu=0,al=1,gh=2,Eg=3,Sg=4,Cg=5,Ag=6,nk=7,ik=8,p0=typeof self=="object"?self:globalThis,nD=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),a=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case yu:case tk:return n(o,r);case al:{const l=n([],r);for(const c of o)l.push(a(c));return l}case gh:{const l=n({},r);for(const[c,h]of o)l[a(c)]=a(h);return l}case Eg:return n(new Date(o),r);case Sg:{const{source:l,flags:c}=o;return n(new RegExp(l,c),r)}case Cg:{const l=n(new Map,r);for(const[c,h]of o)l.set(a(c),a(h));return l}case Ag:{const l=n(new Set,r);for(const c of o)l.add(a(c));return l}case nk:{const{name:l,message:c}=o;return n(new p0[l](c),r)}case ik:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new p0[s](o),r)};return a},g0=t=>nD(new Map,t)(0),Yr="",{toString:iD}={},{keys:aD}=Object,oo=t=>{const e=typeof t;if(e!=="object"||!t)return[yu,e];const n=iD.call(t).slice(8,-1);switch(n){case"Array":return[al,Yr];case"Object":return[gh,Yr];case"Date":return[Eg,Yr];case"RegExp":return[Sg,Yr];case"Map":return[Cg,Yr];case"Set":return[Ag,Yr];case"DataView":return[al,n]}return n.includes("Array")?[al,n]:n.includes("Error")?[nk,n]:[gh,n]},gc=([t,e])=>t===yu&&(e==="function"||e==="symbol"),rD=(t,e,n,a)=>{const r=(o,l)=>{const c=a.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=oo(o);switch(l){case yu:{let u=o;switch(c){case"bigint":l=ik,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return r([tk],o)}return r([l,u],o)}case al:{if(c){let m=o;return c==="DataView"?m=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(m=new Uint8Array(o)),r([c,[...m]],o)}const u=[],d=r([l,u],o);for(const m of o)u.push(s(m));return d}case gh:{if(c)switch(c){case"BigInt":return r([c,o.toString()],o);case"Boolean":case"Number":case"String":return r([c,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=r([l,u],o);for(const m of aD(o))(t||!gc(oo(o[m])))&&u.push([s(m),s(o[m])]);return d}case Eg:return r([l,o.toISOString()],o);case Sg:{const{source:u,flags:d}=o;return r([l,{source:u,flags:d}],o)}case Cg:{const u=[],d=r([l,u],o);for(const[m,f]of o)(t||!(gc(oo(m))||gc(oo(f))))&&u.push([s(m),s(f)]);return d}case Ag:{const u=[],d=r([l,u],o);for(const m of o)(t||!gc(oo(m)))&&u.push(s(m));return d}}const{message:h}=o;return r([l,{name:c,message:h}],o)};return s},x0=(t,{json:e,lossy:n}={})=>{const a=[];return rD(!(e||n),!!e,new Map,a)(t),a},bs=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?g0(x0(t,e)):structuredClone(t):(t,e)=>g0(x0(t,e));function sD(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function oD(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function lD(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||sD,a=t.options.footnoteBackLabel||oD,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[c]);if(!h)continue;const u=t.all(h),d=String(h.identifier).toUpperCase(),m=Bs(d.toLowerCase());let f=0;const p=[],g=t.footnoteCounts.get(d);for(;g!==void 0&&++f<=g;){p.length>0&&p.push({type:"text",value:" "});let w=typeof n=="string"?n:n(c,f);typeof w=="string"&&(w={type:"text",value:w}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof a=="string"?a:a(c,f),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const x=u[u.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const w=x.children[x.children.length-1];w&&w.type==="text"?w.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...p)}else u.push(...p);const b={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(u,!0)};t.patch(h,b),l.push(b)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...bs(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const bu=function(t){if(t==null)return dD;if(typeof t=="function")return wu(t);if(typeof t=="object")return Array.isArray(t)?cD(t):hD(t);if(typeof t=="string")return uD(t);throw new Error("Expected function, string, or object as test")};function cD(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=bu(t[n]);return wu(a);function a(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function hD(t){const e=t;return wu(n);function n(a){const r=a;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function uD(t){return wu(e);function e(n){return n&&n.type===t}}function wu(t){return e;function e(n,a,r){return!!(mD(n)&&t.call(this,n,typeof a=="number"?a:void 0,r||void 0))}}function dD(){return!0}function mD(t){return t!==null&&typeof t=="object"&&"type"in t}const ak=[],fD=!0,Uf=!1,pD="skip";function rk(t,e,n,a){let r;typeof e=="function"&&typeof n!="function"?(a=n,n=e):r=e;const s=bu(r),o=a?-1:1;l(t,void 0,[])();function l(c,h,u){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return m;function m(){let f=ak,p,g,x;if((!e||s(c,h,u[u.length-1]||void 0))&&(f=gD(n(c,u)),f[0]===Uf))return f;if("children"in c&&c.children){const b=c;if(b.children&&f[0]!==pD)for(g=(a?b.children.length:-1)+o,x=u.concat(b);g>-1&&g<b.children.length;){const w=b.children[g];if(p=l(w,g,x)(),p[0]===Uf)return p;g=typeof p[1]=="number"?p[1]:g+o}}return f}}}function gD(t){return Array.isArray(t)?t:typeof t=="number"?[fD,t]:t==null?ak:[t]}function _u(t,e,n,a){let r,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=a),rk(t,s,l,r);function l(c,h){const u=h[h.length-1],d=u?u.children.indexOf(c):void 0;return o(c,d,u)}}const Vf={}.hasOwnProperty,xD={};function yD(t,e){const n=e||xD,a=new Map,r=new Map,s=new Map,o={...tD,...n.handlers},l={all:h,applyData:wD,definitionById:a,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:bD,wrap:vD};return _u(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?a:r,m=String(u.identifier).toUpperCase();d.has(m)||d.set(m,u)}}),l;function c(u,d){const m=u.type,f=l.handlers[m];if(Vf.call(l.handlers,m)&&f)return f(l,u,d);if(l.options.passThrough&&l.options.passThrough.includes(m)){if("children"in u){const{children:g,...x}=u,b=bs(x);return b.children=l.all(u),b}return bs(u)}return(l.options.unknownHandler||_D)(l,u,d)}function h(u){const d=[];if("children"in u){const m=u.children;let f=-1;for(;++f<m.length;){const p=l.one(m[f],u);if(p){if(f&&m[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=y0(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=y0(g.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function bD(t,e){t.position&&(e.position=oM(t))}function wD(t,e){let n=e;if(t&&t.data){const a=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof a=="string")if(n.type==="element")n.tagName=a;else{const o="children"in n?n.children:[n];n={type:"element",tagName:a,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,bs(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function _D(t,e){const n=e.data||{},a="value"in e&&!(Vf.call(n,"hProperties")||Vf.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function vD(t,e){const n=[];let a=-1;for(e&&n.push({type:"text",value:`
`});++a<t.length;)a&&n.push({type:"text",value:`
`}),n.push(t[a]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function y0(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function b0(t,e){const n=yD(t,e),a=n.one(t,void 0),r=lD(n),s=Array.isArray(a)?{type:"root",children:a}:a||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function jD(t,e){return t&&"run"in t?async function(n,a){const r=b0(n,{file:a,...e});await t.run(r,a)}:function(n,a){return b0(n,{file:a,...t||e})}}function w0(t){if(t)throw t}var Cd,_0;function TD(){if(_0)return Cd;_0=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,r=function(h){return typeof Array.isArray=="function"?Array.isArray(h):e.call(h)==="[object Array]"},s=function(h){if(!h||e.call(h)!=="[object Object]")return!1;var u=t.call(h,"constructor"),d=h.constructor&&h.constructor.prototype&&t.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!u&&!d)return!1;var m;for(m in h);return typeof m>"u"||t.call(h,m)},o=function(h,u){n&&u.name==="__proto__"?n(h,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):h[u.name]=u.newValue},l=function(h,u){if(u==="__proto__")if(t.call(h,u)){if(a)return a(h,u).value}else return;return h[u]};return Cd=function c(){var h,u,d,m,f,p,g=arguments[0],x=1,b=arguments.length,w=!1;for(typeof g=="boolean"&&(w=g,g=arguments[1]||{},x=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});x<b;++x)if(h=arguments[x],h!=null)for(u in h)d=l(g,u),m=l(h,u),g!==m&&(w&&m&&(s(m)||(f=r(m)))?(f?(f=!1,p=d&&r(d)?d:[]):p=d&&s(d)?d:{},o(g,{name:u,newValue:c(w,p,m)})):typeof m<"u"&&o(g,{name:u,newValue:m}));return g},Cd}var kD=TD();const Ad=xg(kD);function Yf(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function ED(){const t=[],e={run:n,use:a};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...r);function l(c,...h){const u=t[++s];let d=-1;if(c){o(c);return}for(;++d<r.length;)(h[d]===null||h[d]===void 0)&&(h[d]=r[d]);r=h,u?SD(u,l)(...h):o(null,...h)}}function a(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function SD(t,e){let n;return a;function a(...o){const l=t.length>o.length;let c;l&&o.push(r);try{c=t.apply(this,o)}catch(h){const u=h;if(l&&n)throw u;return r(u)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,r):c instanceof Error?r(c):s(c))}function r(o,...l){n||(n=!0,e(o,...l))}function s(o){r(null,o)}}const Ii={basename:CD,dirname:AD,extname:ND,join:ID,sep:"/"};function CD(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Vl(t);let n=0,a=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else a<0&&(s=!0,a=r+1);return a<0?"":t.slice(n,a)}if(e===t)return"";let o=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(a=r):(l=-1,a=o));return n===a?a=o:a<0&&(a=t.length),t.slice(n,a)}function AD(t){if(Vl(t),t.length===0)return".";let e=-1,n=t.length,a;for(;--n;)if(t.codePointAt(n)===47){if(a){e=n;break}}else a||(a=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function ND(t){Vl(t);let e=t.length,n=-1,a=0,r=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){a=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===a+1?"":t.slice(r,n)}function ID(...t){let e=-1,n;for(;++e<t.length;)Vl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":LD(n)}function LD(t){Vl(t);const e=t.codePointAt(0)===47;let n=OD(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function OD(t,e){let n="",a=0,r=-1,s=0,o=-1,l,c;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||a!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",a=0):(n=n.slice(0,c),a=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",a=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",a=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),a=o-r-1;r=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Vl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const MD={cwd:RD};function RD(){return"/"}function Gf(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function PD(t){if(typeof t=="string")t=new URL(t);else if(!Gf(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return DD(t)}function DD(t){if(t.hostname!==""){const a=new TypeError('File URL host must be "localhost" or empty on darwin');throw a.code="ERR_INVALID_FILE_URL_HOST",a}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const a=e.codePointAt(n+2);if(a===70||a===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const Nd=["history","path","basename","stem","extname","dirname"];class sk{constructor(e){let n;e?Gf(e)?n={path:e}:typeof e=="string"||BD(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":MD.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let a=-1;for(;++a<Nd.length;){const s=Nd[a];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)Nd.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?Ii.basename(this.path):void 0}set basename(e){Ld(e,"basename"),Id(e,"basename"),this.path=Ii.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Ii.dirname(this.path):void 0}set dirname(e){v0(this.basename,"dirname"),this.path=Ii.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Ii.extname(this.path):void 0}set extname(e){if(Id(e,"extname"),v0(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ii.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Gf(e)&&(e=PD(e)),Ld(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Ii.basename(this.path,this.extname):void 0}set stem(e){Ld(e,"stem"),Id(e,"stem"),this.path=Ii.join(this.dirname||"",e+(this.extname||""))}fail(e,n,a){const r=this.message(e,n,a);throw r.fatal=!0,r}info(e,n,a){const r=this.message(e,n,a);return r.fatal=void 0,r}message(e,n,a){const r=new rn(e,n,a);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Id(t,e){if(t&&t.includes(Ii.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Ii.sep+"`")}function Ld(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function v0(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function BD(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const FD=function(t){const a=this.constructor.prototype,r=a[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,a),s},HD={}.hasOwnProperty;class Ng extends FD{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=ED()}copy(){const e=new Ng;let n=-1;for(;++n<this.attachers.length;){const a=this.attachers[n];e.use(...a)}return e.data(Ad(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Rd("data",this.frozen),this.namespace[e]=n,this):HD.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Rd("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...a]=this.attachers[this.freezeIndex];if(a[0]===!1)continue;a[0]===!0&&(a[0]=void 0);const r=n.call(e,...a);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=xc(e),a=this.parser||this.Parser;return Od("parse",a),a(String(n),n)}process(e,n){const a=this;return this.freeze(),Od("process",this.parser||this.Parser),Md("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const l=xc(e),c=a.parse(l);a.run(c,l,function(u,d,m){if(u||!d||!m)return h(u);const f=d,p=a.stringify(f,m);zD(p)?m.value=p:m.result=p,h(u,m)});function h(u,d){u||!d?o(u):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,a;return this.freeze(),Od("processSync",this.parser||this.Parser),Md("processSync",this.compiler||this.Compiler),this.process(e,r),T0("processSync","process",n),a;function r(s,o){n=!0,w0(s),a=o}}run(e,n,a){j0(e),this.freeze();const r=this.transformers;return!a&&typeof n=="function"&&(a=n,n=void 0),a?s(void 0,a):new Promise(s);function s(o,l){const c=xc(n);r.run(e,c,h);function h(u,d,m){const f=d||e;u?l(u):o?o(f):a(void 0,f,m)}}}runSync(e,n){let a=!1,r;return this.run(e,n,s),T0("runSync","run",a),r;function s(o,l){w0(o),r=l,a=!0}}stringify(e,n){this.freeze();const a=xc(n),r=this.compiler||this.Compiler;return Md("stringify",r),j0(e),r(e,a)}use(e,...n){const a=this.attachers,r=this.namespace;if(Rd("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")c(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[u,...d]=h;c(u,d)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(r.settings=Ad(!0,r.settings,h.settings))}function l(h){let u=-1;if(h!=null)if(Array.isArray(h))for(;++u<h.length;){const d=h[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function c(h,u){let d=-1,m=-1;for(;++d<a.length;)if(a[d][0]===h){m=d;break}if(m===-1)a.push([h,...u]);else if(u.length>0){let[f,...p]=u;const g=a[m][1];Yf(g)&&Yf(f)&&(f=Ad(!0,g,f)),a[m]=[h,f,...p]}}}}const qD=new Ng().freeze();function Od(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Md(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Rd(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function j0(t){if(!Yf(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function T0(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function xc(t){return $D(t)?t:new sk(t)}function $D(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function zD(t){return typeof t=="string"||WD(t)}function WD(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const UD="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",k0=[],E0={allowDangerousHtml:!0},VD=/^(https?|ircs?|mailto|xmpp)$/i,YD=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ok(t){const e=GD(t),n=XD(t);return JD(e.runSync(e.parse(n),n),t)}function GD(t){const e=t.rehypePlugins||k0,n=t.remarkPlugins||k0,a=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...E0}:E0;return qD().use(AP).use(n).use(jD,a).use(e)}function XD(t){const e=t.children||"",n=new sk;return typeof e=="string"&&(n.value=e),n}function JD(t,e){const n=e.allowedElements,a=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||QD;for(const u of YD)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+UD+u.id,void 0);return _u(t,h),dM(t,{Fragment:i.Fragment,components:r,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function h(u,d,m){if(u.type==="raw"&&m&&typeof d=="number")return o?m.children.splice(d,1):m.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let f;for(f in kd)if(Object.hasOwn(kd,f)&&Object.hasOwn(u.properties,f)){const p=u.properties[f],g=kd[f];(g===null||g.includes(u.tagName))&&(u.properties[f]=c(String(p||""),f,u))}}if(u.type==="element"){let f=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!f&&a&&typeof d=="number"&&(f=!a(u,d,m)),f&&m&&typeof d=="number")return l&&u.children?m.children.splice(d,1,...u.children):m.children.splice(d,1),d}}}function QD(t){const e=t.indexOf(":"),n=t.indexOf("?"),a=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||a!==-1&&e>a||VD.test(t.slice(0,e))?t:""}function S0(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let a=0,r=n.indexOf(e);for(;r!==-1;)a++,r=n.indexOf(e,r+e.length);return a}function KD(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ZD(t,e,n){const r=bu((n||{}).ignore||[]),s=eB(e);let o=-1;for(;++o<s.length;)rk(t,"text",l);function l(h,u){let d=-1,m;for(;++d<u.length;){const f=u[d],p=m?m.children:void 0;if(r(f,p?p.indexOf(f):void 0,m))return;m=f}if(m)return c(h,u)}function c(h,u){const d=u[u.length-1],m=s[o][0],f=s[o][1];let p=0;const x=d.children.indexOf(h);let b=!1,w=[];m.lastIndex=0;let k=m.exec(h.value);for(;k;){const E=k.index,v={index:k.index,input:k.input,stack:[...u,h]};let S=f(...k,v);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?m.lastIndex=E+1:(p!==E&&w.push({type:"text",value:h.value.slice(p,E)}),Array.isArray(S)?w.push(...S):S&&w.push(S),p=E+k[0].length,b=!0),!m.global)break;k=m.exec(h.value)}return b?(p<h.value.length&&w.push({type:"text",value:h.value.slice(p)}),d.children.splice(x,1,...w)):w=[h],x+w.length}}function eB(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let a=-1;for(;++a<n.length;){const r=n[a];e.push([tB(r[0]),nB(r[1])])}return e}function tB(t){return typeof t=="string"?new RegExp(KD(t),"g"):t}function nB(t){return typeof t=="function"?t:function(){return t}}const Pd="phrasing",Dd=["autolink","link","image","label"];function iB(){return{transforms:[hB],enter:{literalAutolink:rB,literalAutolinkEmail:Bd,literalAutolinkHttp:Bd,literalAutolinkWww:Bd},exit:{literalAutolink:cB,literalAutolinkEmail:lB,literalAutolinkHttp:sB,literalAutolinkWww:oB}}}function aB(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Pd,notInConstruct:Dd},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Pd,notInConstruct:Dd},{character:":",before:"[ps]",after:"\\/",inConstruct:Pd,notInConstruct:Dd}]}}function rB(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Bd(t){this.config.enter.autolinkProtocol.call(this,t)}function sB(t){this.config.exit.autolinkProtocol.call(this,t)}function oB(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function lB(t){this.config.exit.autolinkEmail.call(this,t)}function cB(t){this.exit(t)}function hB(t){ZD(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,uB],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),dB]],{ignore:["link","linkReference"]})}function uB(t,e,n,a,r){let s="";if(!lk(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!mB(n)))return!1;const o=fB(n+a);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function dB(t,e,n,a){return!lk(a,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function mB(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function fB(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],a=n.indexOf(")");const r=S0(t,"(");let s=S0(t,")");for(;a!==-1&&r>s;)t+=n.slice(0,a+1),n=n.slice(a+1),a=n.indexOf(")"),s++;return[t,n]}function lk(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||_r(n)||gu(n))&&(!e||n!==47)}ck.peek=jB;function pB(){this.buffer()}function gB(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function xB(){this.buffer()}function yB(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function bB(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=gi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function wB(t){this.exit(t)}function _B(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=gi(this.sliceSerialize(t)).toLowerCase(),n.label=e}function vB(t){this.exit(t)}function jB(){return"["}function ck(t,e,n,a){const r=n.createTracker(a);let s=r.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=r.move("]"),s}function TB(){return{enter:{gfmFootnoteCallString:pB,gfmFootnoteCall:gB,gfmFootnoteDefinitionLabelString:xB,gfmFootnoteDefinition:yB},exit:{gfmFootnoteCallString:bB,gfmFootnoteCall:wB,gfmFootnoteDefinitionLabelString:_B,gfmFootnoteDefinition:vB}}}function kB(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:ck},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(a,r,s,o){const l=s.createTracker(o);let c=l.move("[^");const h=s.enter("footnoteDefinition"),u=s.enter("label");return c+=l.move(s.safe(s.associationId(a),{before:c,after:"]"})),u(),c+=l.move("]:"),a.children&&a.children.length>0&&(l.shift(4),c+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(a,l.current()),e?hk:EB))),h(),c}}function EB(t,e,n){return e===0?t:hk(t,e,n)}function hk(t,e,n){return(n?"":"    ")+t}const SB=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uk.peek=LB;function CB(){return{canContainEols:["delete"],enter:{strikethrough:NB},exit:{strikethrough:IB}}}function AB(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:SB}],handlers:{delete:uk}}}function NB(t){this.enter({type:"delete",children:[]},t)}function IB(t){this.exit(t)}function uk(t,e,n,a){const r=n.createTracker(a),s=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function LB(){return"~"}function OB(t){return t.length}function MB(t,e){const n=e||{},a=(n.align||[]).concat(),r=n.stringLength||OB,s=[],o=[],l=[],c=[];let h=0,u=-1;for(;++u<t.length;){const g=[],x=[];let b=-1;for(t[u].length>h&&(h=t[u].length);++b<t[u].length;){const w=RB(t[u][b]);if(n.alignDelimiters!==!1){const k=r(w);x[b]=k,(c[b]===void 0||k>c[b])&&(c[b]=k)}g.push(w)}o[u]=g,l[u]=x}let d=-1;if(typeof a=="object"&&"length"in a)for(;++d<h;)s[d]=C0(a[d]);else{const g=C0(a);for(;++d<h;)s[d]=g}d=-1;const m=[],f=[];for(;++d<h;){const g=s[d];let x="",b="";g===99?(x=":",b=":"):g===108?x=":":g===114&&(b=":");let w=n.alignDelimiters===!1?1:Math.max(1,c[d]-x.length-b.length);const k=x+"-".repeat(w)+b;n.alignDelimiters!==!1&&(w=x.length+w+b.length,w>c[d]&&(c[d]=w),f[d]=w),m[d]=k}o.splice(1,0,m),l.splice(1,0,f),u=-1;const p=[];for(;++u<o.length;){const g=o[u],x=l[u];d=-1;const b=[];for(;++d<h;){const w=g[d]||"";let k="",E="";if(n.alignDelimiters!==!1){const v=c[d]-(x[d]||0),S=s[d];S===114?k=" ".repeat(v):S===99?v%2?(k=" ".repeat(v/2+.5),E=" ".repeat(v/2-.5)):(k=" ".repeat(v/2),E=k):E=" ".repeat(v)}n.delimiterStart!==!1&&!d&&b.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||d)&&b.push(" "),n.alignDelimiters!==!1&&b.push(k),b.push(w),n.alignDelimiters!==!1&&b.push(E),n.padding!==!1&&b.push(" "),(n.delimiterEnd!==!1||d!==h-1)&&b.push("|")}p.push(n.delimiterEnd===!1?b.join("").replace(/ +$/,""):b.join(""))}return p.join(`
`)}function RB(t){return t==null?"":String(t)}function C0(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const A0={}.hasOwnProperty;function dk(t,e){const n=e||{};function a(r,...s){let o=a.invalid;const l=a.handlers;if(r&&A0.call(r,t)){const c=String(r[t]);o=A0.call(l,c)?l[c]:a.unknown}if(o)return o.call(this,r,...s)}return a.handlers=n.handlers||{},a.invalid=n.invalid,a.unknown=n.unknown,a}function PB(t,e,n,a){const r=n.enter("blockquote"),s=n.createTracker(a);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),DB);return r(),o}function DB(t,e,n){return">"+(n?"":" ")+t}function BB(t,e){return N0(t,e.inConstruct,!0)&&!N0(t,e.notInConstruct,!1)}function N0(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let a=-1;for(;++a<e.length;)if(t.includes(e[a]))return!0;return!1}function I0(t,e,n,a){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&BB(n.stack,n.unsafe[r]))return/[ \t]/.test(a.before)?"":" ";return`\\
`}function FB(t,e){const n=String(t);let a=n.indexOf(e),r=a,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;a!==-1;)a===r?++s>o&&(o=s):s=1,r=a+e.length,a=n.indexOf(e,r);return o}function HB(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function qB(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function $B(t,e,n,a){const r=qB(n),s=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(HB(t,n)){const d=n.enter("codeIndented"),m=n.indentLines(s,zB);return d(),m}const l=n.createTracker(a),c=r.repeat(Math.max(FB(s,r)+1,3)),h=n.enter("codeFenced");let u=l.move(c);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=l.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...l.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...l.current()})),d()}return u+=l.move(`
`),s&&(u+=l.move(s+`
`)),u+=l.move(c),h(),u}function zB(t,e,n){return(n?"":"    ")+t}function Ig(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function WB(t,e,n,a){const r=Ig(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(a);let h=c.move("[");return h+=c.move(n.safe(n.associationId(t),{before:h,after:"]",...c.current()})),h+=c.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":`
`,...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),h+=c.move(" "+r),h+=c.move(n.safe(t.title,{before:h,after:r,...c.current()})),h+=c.move(r),l()),o(),h}function UB(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function jl(t){return"&#x"+t.toString(16).toUpperCase()+";"}function xh(t,e,n){const a=ys(t),r=ys(e);return a===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:a===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}mk.peek=VB;function mk(t,e,n,a){const r=UB(n),s=n.enter("emphasis"),o=n.createTracker(a),l=o.move(r);let c=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const h=c.charCodeAt(0),u=xh(a.before.charCodeAt(a.before.length-1),h,r);u.inside&&(c=jl(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=xh(a.after.charCodeAt(0),d,r);m.inside&&(c=c.slice(0,-1)+jl(d));const f=o.move(r);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},l+c+f}function VB(t,e,n){return n.options.emphasis||"*"}function YB(t,e){let n=!1;return _u(t,function(a){if("value"in a&&/\r?\n|\r/.test(a.value)||a.type==="break")return n=!0,Uf}),!!((!t.depth||t.depth<3)&&jg(t)&&(e.options.setext||n))}function GB(t,e,n,a){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(a);if(YB(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),m=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),u(),m+`
`+(r===1?"=":"-").repeat(m.length-(Math.max(m.lastIndexOf("\r"),m.lastIndexOf(`
`))+1))}const o="#".repeat(r),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let h=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(h)&&(h=jl(h.charCodeAt(0))+h.slice(1)),h=h?o+" "+h:o,n.options.closeAtx&&(h+=" "+o),c(),l(),h}fk.peek=XB;function fk(t){return t.value||""}function XB(){return"<"}pk.peek=JB;function pk(t,e,n,a){const r=Ig(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(a);let h=c.move("![");return h+=c.move(n.safe(t.alt,{before:h,after:"]",...c.current()})),h+=c.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),h+=c.move("<"),h+=c.move(n.safe(t.url,{before:h,after:">",...c.current()})),h+=c.move(">")):(l=n.enter("destinationRaw"),h+=c.move(n.safe(t.url,{before:h,after:t.title?" ":")",...c.current()}))),l(),t.title&&(l=n.enter(`title${s}`),h+=c.move(" "+r),h+=c.move(n.safe(t.title,{before:h,after:r,...c.current()})),h+=c.move(r),l()),h+=c.move(")"),o(),h}function JB(){return"!"}gk.peek=QB;function gk(t,e,n,a){const r=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("![");const h=n.safe(t.alt,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=u,s(),r==="full"||!h||h!==d?c+=l.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function QB(){return"!"}xk.peek=KB;function xk(t,e,n){let a=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(a);)r+="`";for(/[^ \r\n]/.test(a)&&(/^[ \r\n]/.test(a)&&/[ \r\n]$/.test(a)||/^`|`$/.test(a))&&(a=" "+a+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(a);){let h=c.index;a.charCodeAt(h)===10&&a.charCodeAt(h-1)===13&&h--,a=a.slice(0,h)+" "+a.slice(c.index+1)}}return r+a+r}function KB(){return"`"}function yk(t,e){const n=jg(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}bk.peek=ZB;function bk(t,e,n,a){const r=Ig(n),s=r==='"'?"Quote":"Apostrophe",o=n.createTracker(a);let l,c;if(yk(t,n)){const u=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=u,d}l=n.enter("link"),c=n.enter("label");let h=o.move("[");return h+=o.move(n.containerPhrasing(t,{before:h,after:"](",...o.current()})),h+=o.move("]("),c(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(c=n.enter("destinationLiteral"),h+=o.move("<"),h+=o.move(n.safe(t.url,{before:h,after:">",...o.current()})),h+=o.move(">")):(c=n.enter("destinationRaw"),h+=o.move(n.safe(t.url,{before:h,after:t.title?" ":")",...o.current()}))),c(),t.title&&(c=n.enter(`title${s}`),h+=o.move(" "+r),h+=o.move(n.safe(t.title,{before:h,after:r,...o.current()})),h+=o.move(r),c()),h+=o.move(")"),l(),h}function ZB(t,e,n){return yk(t,n)?"<":"["}wk.peek=e6;function wk(t,e,n,a){const r=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(a);let c=l.move("[");const h=n.containerPhrasing(t,{before:c,after:"]",...l.current()});c+=l.move(h+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:c,after:"]",...l.current()});return o(),n.stack=u,s(),r==="full"||!h||h!==d?c+=l.move(d+"]"):r==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function e6(){return"["}function Lg(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function t6(t){const e=Lg(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function n6(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function _k(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function i6(t,e,n,a){const r=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?n6(n):Lg(n);const l=t.ordered?o==="."?")":".":t6(n);let c=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),_k(n)===o&&u){let d=-1;for(;++d<t.children.length;){const m=t.children[d];if(m&&m.type==="listItem"&&m.children&&m.children[0]&&m.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const h=n.containerFlow(t,a);return n.bulletLastUsed=o,n.bulletCurrent=s,r(),h}function a6(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function r6(t,e,n,a){const r=a6(n);let s=n.bulletCurrent||Lg(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(a);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),h=n.indentLines(n.containerFlow(t,l.current()),u);return c(),h;function u(d,m,f){return m?(f?"":" ".repeat(o))+d:(f?s:s+" ".repeat(o-s.length))+d}}function s6(t,e,n,a){const r=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,a);return s(),r(),o}const o6=bu(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function l6(t,e,n,a){return(t.children.some(function(o){return o6(o)})?n.containerPhrasing:n.containerFlow).call(n,t,a)}function c6(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}vk.peek=h6;function vk(t,e,n,a){const r=c6(n),s=n.enter("strong"),o=n.createTracker(a),l=o.move(r+r);let c=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const h=c.charCodeAt(0),u=xh(a.before.charCodeAt(a.before.length-1),h,r);u.inside&&(c=jl(h)+c.slice(1));const d=c.charCodeAt(c.length-1),m=xh(a.after.charCodeAt(0),d,r);m.inside&&(c=c.slice(0,-1)+jl(d));const f=o.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:m.outside,before:u.outside},l+c+f}function h6(t,e,n){return n.options.strong||"*"}function u6(t,e,n,a){return n.safe(t.value,a)}function d6(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function m6(t,e,n){const a=(_k(n)+(n.options.ruleSpaces?" ":"")).repeat(d6(n));return n.options.ruleSpaces?a.slice(0,-1):a}const jk={blockquote:PB,break:I0,code:$B,definition:WB,emphasis:mk,hardBreak:I0,heading:GB,html:fk,image:pk,imageReference:gk,inlineCode:xk,link:bk,linkReference:wk,list:i6,listItem:r6,paragraph:s6,root:l6,strong:vk,text:u6,thematicBreak:m6};function f6(){return{enter:{table:p6,tableData:L0,tableHeader:L0,tableRow:x6},exit:{codeText:y6,table:g6,tableData:Fd,tableHeader:Fd,tableRow:Fd}}}function p6(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function g6(t){this.exit(t),this.data.inTable=void 0}function x6(t){this.enter({type:"tableRow",children:[]},t)}function Fd(t){this.exit(t)}function L0(t){this.enter({type:"tableCell",children:[]},t)}function y6(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,b6));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function b6(t,e){return e==="|"?e:t}function w6(t){const e=t||{},n=e.tableCellPadding,a=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:m,table:o,tableCell:c,tableRow:l}};function o(f,p,g,x){return h(u(f,g,x),f.align)}function l(f,p,g,x){const b=d(f,g,x),w=h([b]);return w.slice(0,w.indexOf(`
`))}function c(f,p,g,x){const b=g.enter("tableCell"),w=g.enter("phrasing"),k=g.containerPhrasing(f,{...x,before:s,after:s});return w(),b(),k}function h(f,p){return MB(f,{align:p,alignDelimiters:a,padding:n,stringLength:r})}function u(f,p,g){const x=f.children;let b=-1;const w=[],k=p.enter("table");for(;++b<x.length;)w[b]=d(x[b],p,g);return k(),w}function d(f,p,g){const x=f.children;let b=-1;const w=[],k=p.enter("tableRow");for(;++b<x.length;)w[b]=c(x[b],f,p,g);return k(),w}function m(f,p,g){let x=jk.inlineCode(f,p,g);return g.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function _6(){return{exit:{taskListCheckValueChecked:O0,taskListCheckValueUnchecked:O0,paragraph:j6}}}function v6(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:T6}}}function O0(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function j6(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const a=n.children[0];if(a&&a.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const l=r[s];if(l.type==="paragraph"){o=l;break}}o===n&&(a.value=a.value.slice(1),a.value.length===0?n.children.shift():n.position&&a.position&&typeof a.position.start.offset=="number"&&(a.position.start.column++,a.position.start.offset++,n.position.start=Object.assign({},a.position.start)))}}this.exit(t)}function T6(t,e,n,a){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(a);s&&l.move(o);let c=jk.listItem(t,e,n,{...a,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,h)),c;function h(u){return u+o}}function k6(){return[iB(),TB(),CB(),f6(),_6()]}function E6(t){return{extensions:[aB(),kB(t),AB(),w6(t),v6()]}}const S6={tokenize:O6,partial:!0},Tk={tokenize:M6,partial:!0},kk={tokenize:R6,partial:!0},Ek={tokenize:P6,partial:!0},C6={tokenize:D6,partial:!0},Sk={name:"wwwAutolink",tokenize:I6,previous:Ak},Ck={name:"protocolAutolink",tokenize:L6,previous:Nk},pa={name:"emailAutolink",tokenize:N6,previous:Ik},Fi={};function A6(){return{text:Fi}}let Ua=48;for(;Ua<123;)Fi[Ua]=pa,Ua++,Ua===58?Ua=65:Ua===91&&(Ua=97);Fi[43]=pa;Fi[45]=pa;Fi[46]=pa;Fi[95]=pa;Fi[72]=[pa,Ck];Fi[104]=[pa,Ck];Fi[87]=[pa,Sk];Fi[119]=[pa,Sk];function N6(t,e,n){const a=this;let r,s;return o;function o(d){return!Xf(d)||!Ik.call(a,a.previous)||Og(a.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(d))}function l(d){return Xf(d)?(t.consume(d),l):d===64?(t.consume(d),c):n(d)}function c(d){return d===46?t.check(C6,u,h)(d):d===45||d===95||Kt(d)?(s=!0,t.consume(d),c):u(d)}function h(d){return t.consume(d),r=!0,c}function u(d){return s&&r&&un(a.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function I6(t,e,n){const a=this;return r;function r(o){return o!==87&&o!==119||!Ak.call(a,a.previous)||Og(a.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(S6,t.attempt(Tk,t.attempt(kk,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function L6(t,e,n){const a=this;let r="",s=!1;return o;function o(d){return(d===72||d===104)&&Nk.call(a,a.previous)&&!Og(a.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(d),t.consume(d),l):n(d)}function l(d){if(un(d)&&r.length<5)return r+=String.fromCodePoint(d),t.consume(d),l;if(d===58){const m=r.toLowerCase();if(m==="http"||m==="https")return t.consume(d),c}return n(d)}function c(d){return d===47?(t.consume(d),s?h:(s=!0,c)):n(d)}function h(d){return d===null||ph(d)||ot(d)||_r(d)||gu(d)?n(d):t.attempt(Tk,t.attempt(kk,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function O6(t,e,n){let a=0;return r;function r(o){return(o===87||o===119)&&a<3?(a++,t.consume(o),r):o===46&&a===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function M6(t,e,n){let a,r,s;return o;function o(h){return h===46||h===95?t.check(Ek,c,l)(h):h===null||ot(h)||_r(h)||h!==45&&gu(h)?c(h):(s=!0,t.consume(h),o)}function l(h){return h===95?a=!0:(r=a,a=void 0),t.consume(h),o}function c(h){return r||a||!s?n(h):e(h)}}function R6(t,e){let n=0,a=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&a<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(Ek,e,s)(o):o===null||ot(o)||_r(o)?e(o):(t.consume(o),r)}function s(o){return o===41&&a++,t.consume(o),r}}function P6(t,e,n){return a;function a(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),a):l===38?(t.consume(l),s):l===93?(t.consume(l),r):l===60||l===null||ot(l)||_r(l)?e(l):n(l)}function r(l){return l===null||l===40||l===91||ot(l)||_r(l)?e(l):a(l)}function s(l){return un(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),a):un(l)?(t.consume(l),o):n(l)}}function D6(t,e,n){return a;function a(s){return t.consume(s),r}function r(s){return Kt(s)?n(s):e(s)}}function Ak(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ot(t)}function Nk(t){return!un(t)}function Ik(t){return!(t===47||Xf(t))}function Xf(t){return t===43||t===45||t===46||t===95||Kt(t)}function Og(t){let e=t.length,n=!1;for(;e--;){const a=t[e][1];if((a.type==="labelLink"||a.type==="labelImage")&&!a._balanced){n=!0;break}if(a._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const B6={tokenize:V6,partial:!0};function F6(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:z6,continuation:{tokenize:W6},exit:U6}},text:{91:{name:"gfmFootnoteCall",tokenize:$6},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:H6,resolveTo:q6}}}}function H6(t,e,n){const a=this;let r=a.events.length;const s=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let o;for(;r--;){const c=a.events[r][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const h=gi(a.sliceSerialize({start:o.end,end:a.now()}));return h.codePointAt(0)!==94||!s.includes(h.slice(1))?n(c):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(c),t.exit("gfmFootnoteCallLabelMarker"),e(c))}}function q6(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const a={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",a,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",a,e]];return t.splice(n,t.length-n+1,...l),t}function $6(t,e,n){const a=this,r=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",h)}function h(d){if(s>999||d===93&&!o||d===null||d===91||ot(d))return n(d);if(d===93){t.exit("chunkString");const m=t.exit("gfmFootnoteCallString");return r.includes(gi(a.sliceSerialize(m)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return ot(d)||(o=!0),s++,t.consume(d),d===92?u:h}function u(d){return d===91||d===92||d===93?(t.consume(d),s++,h):h(d)}}function z6(t,e,n){const a=this,r=a.parser.gfmFootnotes||(a.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),h}function h(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(p)}function u(p){if(o>999||p===93&&!l||p===null||p===91||ot(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=gi(a.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),m}return ot(p)||(l=!0),o++,t.consume(p),p===92?d:u}function d(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}function m(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),r.includes(s)||r.push(s),Ge(t,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return e(p)}}function W6(t,e,n){return t.check(Ul,e,t.attempt(B6,e,n))}function U6(t){t.exit("gfmFootnoteDefinition")}function V6(t,e,n){const a=this;return Ge(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const o=a.events[a.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function Y6(t){let n=(t||{}).singleTilde;const a={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:a},insideSpan:{null:[a]},attentionMarkers:{null:[126]}};function r(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let h=c;for(;h--;)if(o[h][0]==="exit"&&o[h][1].type==="strikethroughSequenceTemporary"&&o[h][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[h][1].end.offset-o[h][1].start.offset){o[c][1].type="strikethroughSequence",o[h][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[h][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[h][1].end),end:Object.assign({},o[c][1].start)},m=[["enter",u,l],["enter",o[h][1],l],["exit",o[h][1],l],["enter",d,l]],f=l.parser.constructs.insideSpan.null;f&&qn(m,m.length,0,xu(f,o.slice(h+1,c),l)),qn(m,m.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",u,l]]),qn(o,h-1,c-h+3,m),c=h+m.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const h=this.previous,u=this.events;let d=0;return m;function m(p){return h===126&&u[u.length-1][1].type!=="characterEscape"?c(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const g=ys(h);if(p===126)return d>1?c(p):(o.consume(p),d++,f);if(d<2&&!n)return c(p);const x=o.exit("strikethroughSequenceTemporary"),b=ys(p);return x._open=!b||b===2&&!!g,x._close=!g||g===2&&!!b,l(p)}}}class G6{constructor(){this.map=[]}add(e,n,a){X6(this,e,n,a)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const a=[];for(;n>0;)n-=1,a.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];a.push(e.slice()),e.length=0;let r=a.pop();for(;r;){for(const s of r)e.push(s);r=a.pop()}this.map.length=0}}function X6(t,e,n,a){let r=0;if(!(n===0&&a.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...a);return}r+=1}t.map.push([e,n,a])}}function J6(t,e){let n=!1;const a=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&a.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=a.length-1;a[s]=a[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return a}function Q6(){return{flow:{null:{name:"table",tokenize:K6,resolveAll:Z6}}}}function K6(t,e,n){const a=this;let r=0,s=0,o;return l;function l(j){let A=a.events.length-1;for(;A>-1;){const C=a.events[A][1].type;if(C==="lineEnding"||C==="linePrefix")A--;else break}const q=A>-1?a.events[A][1].type:null,M=q==="tableHead"||q==="tableRow"?S:c;return M===S&&a.parser.lazy[a.now().line]?n(j):M(j)}function c(j){return t.enter("tableHead"),t.enter("tableRow"),h(j)}function h(j){return j===124||(o=!0,s+=1),u(j)}function u(j){return j===null?n(j):Ae(j)?s>1?(s=0,a.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),f):n(j):Ue(j)?Ge(t,u,"whitespace")(j):(s+=1,o&&(o=!1,r+=1),j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(j)))}function d(j){return j===null||j===124||ot(j)?(t.exit("data"),u(j)):(t.consume(j),j===92?m:d)}function m(j){return j===92||j===124?(t.consume(j),d):d(j)}function f(j){return a.interrupt=!1,a.parser.lazy[a.now().line]?n(j):(t.enter("tableDelimiterRow"),o=!1,Ue(j)?Ge(t,p,"linePrefix",a.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):p(j))}function p(j){return j===45||j===58?x(j):j===124?(o=!0,t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),g):v(j)}function g(j){return Ue(j)?Ge(t,x,"whitespace")(j):x(j)}function x(j){return j===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),b):j===45?(s+=1,b(j)):j===null||Ae(j)?E(j):v(j)}function b(j){return j===45?(t.enter("tableDelimiterFiller"),w(j)):v(j)}function w(j){return j===45?(t.consume(j),w):j===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(j),t.exit("tableDelimiterMarker"),k):(t.exit("tableDelimiterFiller"),k(j))}function k(j){return Ue(j)?Ge(t,E,"whitespace")(j):E(j)}function E(j){return j===124?p(j):j===null||Ae(j)?!o||r!==s?v(j):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(j)):v(j)}function v(j){return n(j)}function S(j){return t.enter("tableRow"),L(j)}function L(j){return j===124?(t.enter("tableCellDivider"),t.consume(j),t.exit("tableCellDivider"),L):j===null||Ae(j)?(t.exit("tableRow"),e(j)):Ue(j)?Ge(t,L,"whitespace")(j):(t.enter("data"),O(j))}function O(j){return j===null||j===124||ot(j)?(t.exit("data"),L(j)):(t.consume(j),j===92?P:O)}function P(j){return j===92||j===124?(t.consume(j),O):O(j)}}function Z6(t,e){let n=-1,a=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,h,u,d;const m=new G6;for(;++n<t.length;){const f=t[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(l=!1,c!==0&&(M0(m,e,c,h,u),u=void 0,c=0),h={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",h,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(a=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},m.add(n,0,[["enter",u,e]])),r=p.type==="tableDelimiterRow"?2:u?3:1):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(a=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=yc(m,e,s,r,void 0,d),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(a?a=!1:(s[1]!==0&&(o[0]=o[1],d=yc(m,e,s,r,void 0,d)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(l=!0,c=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=yc(m,e,s,r,n,d)):o[1]!==0&&(d=yc(m,e,o,r,n,d)),r=0):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&M0(m,e,c,h,u),m.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=J6(e.events,n))}return t}function yc(t,e,n,a,r,s){const o=a===1?"tableHeader":a===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Kr(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const c=Kr(e.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const h=Kr(e.events,n[2]),u=Kr(e.events,n[3]),d={type:l,start:Object.assign({},h),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),a!==2){const m=e.events[n[2]],f=e.events[n[3]];if(m[1].end=Object.assign({},f[1].end),m[1].type="chunkText",m[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;t.add(p,g,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return r!==void 0&&(s.end=Object.assign({},Kr(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function M0(t,e,n,a,r){const s=[],o=Kr(e.events,n);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),a.end=Object.assign({},o),s.push(["exit",a,e]),t.add(n+1,0,s)}function Kr(t,e){const n=t[e],a=n[0]==="enter"?"start":"end";return n[1][a]}const e5={name:"tasklistCheck",tokenize:n5};function t5(){return{text:{91:e5}}}function n5(t,e,n){const a=this;return r;function r(c){return a.previous!==null||!a._gfmTasklistFirstContentOfListItem?n(c):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),s)}function s(c){return ot(c)?(t.enter("taskListCheckValueUnchecked"),t.consume(c),t.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(t.enter("taskListCheckValueChecked"),t.consume(c),t.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(t.enter("taskListCheckMarker"),t.consume(c),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(c)}function l(c){return Ae(c)?e(c):Ue(c)?t.check({tokenize:i5},e,n)(c):n(c)}}function i5(t,e,n){return Ge(t,a,"whitespace");function a(r){return r===null?n(r):e(r)}}function a5(t){return HT([A6(),F6(),Y6(t),Q6(),t5()])}const r5={};function s5(t){const e=this,n=t||r5,a=e.data(),r=a.micromarkExtensions||(a.micromarkExtensions=[]),s=a.fromMarkdownExtensions||(a.fromMarkdownExtensions=[]),o=a.toMarkdownExtensions||(a.toMarkdownExtensions=[]);r.push(a5(n)),s.push(k6()),o.push(E6(n))}const R0=/[#.]/g;function o5(t,e){const n=t||"",a={};let r=0,s,o;for(;r<n.length;){R0.lastIndex=r;const l=R0.exec(n),c=n.slice(r,l?l.index:n.length);c&&(s?s==="#"?a.id=c:Array.isArray(a.className)?a.className.push(c):a.className=[c]:o=c,r+=c.length),l&&(s=l[0],r++)}return{type:"element",tagName:o||e||"div",properties:a,children:[]}}function Lk(t,e,n){const a=n?u5(n):void 0;function r(s,o,...l){let c;if(s==null){c={type:"root",children:[]};const h=o;l.unshift(h)}else{c=o5(s,e);const h=c.tagName.toLowerCase(),u=a?a.get(h):void 0;if(c.tagName=u||h,l5(o))l.unshift(o);else for(const[d,m]of Object.entries(o))c5(t,c.properties,d,m)}for(const h of l)Jf(c.children,h);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return r}function l5(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const a of n){const r=e[a];if(r&&typeof r=="object"){if(!Array.isArray(r))return!0;const s=r;for(const o of s)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function c5(t,e,n,a){const r=bg(t,n);let s;if(a!=null){if(typeof a=="number"){if(Number.isNaN(a))return;s=a}else typeof a=="boolean"?s=a:typeof a=="string"?r.spaceSeparated?s=Gy(a):r.commaSeparated?s=zy(a):r.commaOrSpaceSeparated?s=Gy(zy(a).join(" ")):s=P0(r,r.property,a):Array.isArray(a)?s=[...a]:s=r.property==="style"?h5(a):String(a);if(Array.isArray(s)){const o=[];for(const l of s)o.push(P0(r,r.property,l));s=o}r.property==="className"&&Array.isArray(e.className)&&(s=e.className.concat(s)),e[r.property]=s}}function Jf(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)Jf(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?Jf(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function P0(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||_l(n)===_l(e)))return!0}return n}function h5(t){const e=[];for(const[n,a]of Object.entries(t))e.push([n,a].join(": "));return e.join("; ")}function u5(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const d5=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],m5=Lk(fu,"div"),f5=Lk(Ds,"g",d5);function p5(t){const e=String(t),n=[];return{toOffset:r,toPoint:a};function a(s){if(typeof s=="number"&&s>-1&&s<=e.length){let o=0;for(;;){let l=n[o];if(l===void 0){const c=D0(e,n[o-1]);l=c===-1?e.length+1:c+1,n[o]=l}if(l>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s};o++}}}function r(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const l=n[n.length-1],c=D0(e,l),h=c===-1?e.length+1:c+1;if(l===h)break;n.push(h)}const o=(s.line>1?n[s.line-2]:0)+s.column-1;if(o<n[s.line-1])return o}}}function D0(t,e){const n=t.indexOf("\r",e),a=t.indexOf(`
`,e);return a===-1?n:n===-1||n+1===a?a:n<a?n:a}const or={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ok={}.hasOwnProperty,g5=Object.prototype;function x5(t,e){const n=e||{};return Mg({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ds:fu,verbose:n.verbose||!1},t)}function Mg(t,e){let n;switch(e.nodeName){case"#comment":{const a=e;return n={type:"comment",value:a.data},Xc(t,a,n),n}case"#document":case"#document-fragment":{const a=e,r="mode"in a?a.mode==="quirks"||a.mode==="limited-quirks":!1;if(n={type:"root",children:Mk(t,e.childNodes),data:{quirksMode:r}},t.file&&t.location){const s=String(t.file),o=p5(s),l=o.toPoint(0),c=o.toPoint(s.length);n.position={start:l,end:c}}return n}case"#documentType":{const a=e;return n={type:"doctype"},Xc(t,a,n),n}case"#text":{const a=e;return n={type:"text",value:a.value},Xc(t,a,n),n}default:return n=y5(t,e),n}}function Mk(t,e){let n=-1;const a=[];for(;++n<e.length;){const r=Mg(t,e[n]);a.push(r)}return a}function y5(t,e){const n=t.schema;t.schema=e.namespaceURI===or.svg?Ds:fu;let a=-1;const r={};for(;++a<e.attrs.length;){const l=e.attrs[a],c=(l.prefix?l.prefix+":":"")+l.name;Ok.call(g5,c)||(r[c]=l.value)}const o=(t.schema.space==="svg"?f5:m5)(e.tagName,r,Mk(t,e.childNodes));if(Xc(t,e,o),o.tagName==="template"){const l=e,c=l.sourceCodeLocation,h=c&&c.startTag&&ts(c.startTag),u=c&&c.endTag&&ts(c.endTag),d=Mg(t,l.content);h&&u&&t.file&&(d.position={start:h.end,end:u.start}),o.content=d}return t.schema=n,o}function Xc(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const a=b5(t,n,e.sourceCodeLocation);a&&(t.location=!0,n.position=a)}}function b5(t,e,n){const a=ts(n);if(e.type==="element"){const r=e.children[e.children.length-1];if(a&&!n.endTag&&r&&r.position&&r.position.end&&(a.end=Object.assign({},r.position.end)),t.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Ok.call(n.attrs,o)&&(s[bg(t.schema,o).property]=ts(n.attrs[o]));n.startTag;const l=ts(n.startTag),c=n.endTag?ts(n.endTag):void 0,h={opening:l};c&&(h.closing=c),h.properties=s,e.data={position:h}}}return a}function ts(t){const e=B0({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=B0({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function B0(t){return t.line&&t.column?t:void 0}class Yl{constructor(e,n,a){this.property=e,this.normal=n,a&&(this.space=a)}}Yl.prototype.property={};Yl.prototype.normal={};Yl.prototype.space=null;function Rk(t,e){const n={},a={};let r=-1;for(;++r<t.length;)Object.assign(n,t[r].property),Object.assign(a,t[r].normal);return new Yl(n,a,e)}function Qf(t){return t.toLowerCase()}class ni{constructor(e,n){this.property=e,this.attribute=n}}ni.prototype.space=null;ni.prototype.boolean=!1;ni.prototype.booleanish=!1;ni.prototype.overloadedBoolean=!1;ni.prototype.number=!1;ni.prototype.commaSeparated=!1;ni.prototype.spaceSeparated=!1;ni.prototype.commaOrSpaceSeparated=!1;ni.prototype.mustUseProperty=!1;ni.prototype.defined=!1;let w5=0;const Re=Or(),Tt=Or(),Pk=Or(),re=Or(),ht=Or(),as=Or(),Bn=Or();function Or(){return 2**++w5}const Kf=Object.freeze(Object.defineProperty({__proto__:null,boolean:Re,booleanish:Tt,commaOrSpaceSeparated:Bn,commaSeparated:as,number:re,overloadedBoolean:Pk,spaceSeparated:ht},Symbol.toStringTag,{value:"Module"})),Hd=Object.keys(Kf);class Rg extends ni{constructor(e,n,a,r){let s=-1;if(super(e,n),F0(this,"space",r),typeof a=="number")for(;++s<Hd.length;){const o=Hd[s];F0(this,Hd[s],(a&Kf[o])===Kf[o])}}}Rg.prototype.defined=!0;function F0(t,e,n){n&&(t[e]=n)}const _5={}.hasOwnProperty;function Fs(t){const e={},n={};let a;for(a in t.properties)if(_5.call(t.properties,a)){const r=t.properties[a],s=new Rg(a,t.transform(t.attributes||{},a),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(a)&&(s.mustUseProperty=!0),e[a]=s,n[Qf(a)]=a,n[Qf(s.attribute)]=a}return new Yl(e,n,t.space)}const Dk=Fs({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Bk=Fs({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Fk(t,e){return e in t?t[e]:e}function Hk(t,e){return Fk(t,e.toLowerCase())}const qk=Fs({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Hk,properties:{xmlns:null,xmlnsXLink:null}}),$k=Fs({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Tt,ariaAutoComplete:null,ariaBusy:Tt,ariaChecked:Tt,ariaColCount:re,ariaColIndex:re,ariaColSpan:re,ariaControls:ht,ariaCurrent:null,ariaDescribedBy:ht,ariaDetails:null,ariaDisabled:Tt,ariaDropEffect:ht,ariaErrorMessage:null,ariaExpanded:Tt,ariaFlowTo:ht,ariaGrabbed:Tt,ariaHasPopup:null,ariaHidden:Tt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ht,ariaLevel:re,ariaLive:null,ariaModal:Tt,ariaMultiLine:Tt,ariaMultiSelectable:Tt,ariaOrientation:null,ariaOwns:ht,ariaPlaceholder:null,ariaPosInSet:re,ariaPressed:Tt,ariaReadOnly:Tt,ariaRelevant:null,ariaRequired:Tt,ariaRoleDescription:ht,ariaRowCount:re,ariaRowIndex:re,ariaRowSpan:re,ariaSelected:Tt,ariaSetSize:re,ariaSort:null,ariaValueMax:re,ariaValueMin:re,ariaValueNow:re,ariaValueText:null,role:null}}),v5=Fs({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Hk,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:as,acceptCharset:ht,accessKey:ht,action:null,allow:null,allowFullScreen:Re,allowPaymentRequest:Re,allowUserMedia:Re,alt:null,as:null,async:Re,autoCapitalize:null,autoComplete:ht,autoFocus:Re,autoPlay:Re,blocking:ht,capture:null,charSet:null,checked:Re,cite:null,className:ht,cols:re,colSpan:null,content:null,contentEditable:Tt,controls:Re,controlsList:ht,coords:re|as,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Re,defer:Re,dir:null,dirName:null,disabled:Re,download:Pk,draggable:Tt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Re,formTarget:null,headers:ht,height:re,hidden:Re,high:re,href:null,hrefLang:null,htmlFor:ht,httpEquiv:ht,id:null,imageSizes:null,imageSrcSet:null,inert:Re,inputMode:null,integrity:null,is:null,isMap:Re,itemId:null,itemProp:ht,itemRef:ht,itemScope:Re,itemType:ht,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Re,low:re,manifest:null,max:null,maxLength:re,media:null,method:null,min:null,minLength:re,multiple:Re,muted:Re,name:null,nonce:null,noModule:Re,noValidate:Re,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Re,optimum:re,pattern:null,ping:ht,placeholder:null,playsInline:Re,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Re,referrerPolicy:null,rel:ht,required:Re,reversed:Re,rows:re,rowSpan:re,sandbox:ht,scope:null,scoped:Re,seamless:Re,selected:Re,shadowRootClonable:Re,shadowRootDelegatesFocus:Re,shadowRootMode:null,shape:null,size:re,sizes:null,slot:null,span:re,spellCheck:Tt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:re,step:null,style:null,tabIndex:re,target:null,title:null,translate:null,type:null,typeMustMatch:Re,useMap:null,value:Tt,width:re,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ht,axis:null,background:null,bgColor:null,border:re,borderColor:null,bottomMargin:re,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Re,declare:Re,event:null,face:null,frame:null,frameBorder:null,hSpace:re,leftMargin:re,link:null,longDesc:null,lowSrc:null,marginHeight:re,marginWidth:re,noResize:Re,noHref:Re,noShade:Re,noWrap:Re,object:null,profile:null,prompt:null,rev:null,rightMargin:re,rules:null,scheme:null,scrolling:Tt,standby:null,summary:null,text:null,topMargin:re,valueType:null,version:null,vAlign:null,vLink:null,vSpace:re,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Re,disableRemotePlayback:Re,prefix:null,property:null,results:re,security:null,unselectable:null}}),j5=Fs({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Fk,properties:{about:Bn,accentHeight:re,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:re,amplitude:re,arabicForm:null,ascent:re,attributeName:null,attributeType:null,azimuth:re,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:re,by:null,calcMode:null,capHeight:re,className:ht,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:re,diffuseConstant:re,direction:null,display:null,dur:null,divisor:re,dominantBaseline:null,download:Re,dx:null,dy:null,edgeMode:null,editable:null,elevation:re,enableBackground:null,end:null,event:null,exponent:re,externalResourcesRequired:null,fill:null,fillOpacity:re,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:as,g2:as,glyphName:as,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:re,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:re,horizOriginX:re,horizOriginY:re,id:null,ideographic:re,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:re,k:re,k1:re,k2:re,k3:re,k4:re,kernelMatrix:Bn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:re,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:re,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:re,overlineThickness:re,paintOrder:null,panose1:null,path:null,pathLength:re,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ht,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:re,pointsAtY:re,pointsAtZ:re,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Bn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Bn,rev:Bn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Bn,requiredFeatures:Bn,requiredFonts:Bn,requiredFormats:Bn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:re,specularExponent:re,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:re,strikethroughThickness:re,string:null,stroke:null,strokeDashArray:Bn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:re,strokeOpacity:re,strokeWidth:null,style:null,surfaceScale:re,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Bn,tabIndex:re,tableValues:null,target:null,targetX:re,targetY:re,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Bn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:re,underlineThickness:re,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:re,values:null,vAlphabetic:re,vMathematical:re,vectorEffect:null,vHanging:re,vIdeographic:re,version:null,vertAdvY:re,vertOriginX:re,vertOriginY:re,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:re,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),T5=/^data[-\w.:]+$/i,H0=/-[a-z]/g,k5=/[A-Z]/g;function E5(t,e){const n=Qf(e);let a=e,r=ni;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&T5.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(H0,C5);a="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!H0.test(s)){let o=s.replace(k5,S5);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Rg}return new r(a,e)}function S5(t){return"-"+t.toLowerCase()}function C5(t){return t.charAt(1).toUpperCase()}const A5=Rk([Bk,Dk,qk,$k,v5],"html"),zk=Rk([Bk,Dk,qk,$k,j5],"svg"),N5={},I5={}.hasOwnProperty,Wk=dk("type",{handlers:{root:O5,element:B5,text:P5,comment:D5,doctype:R5}});function L5(t,e){const a=(e||N5).space;return Wk(t,a==="svg"?zk:A5)}function O5(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Pg(t.children,n,e),Hs(t,n),n}function M5(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Pg(t.children,n,e),Hs(t,n),n}function R5(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Hs(t,e),e}function P5(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Hs(t,e),e}function D5(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Hs(t,e),e}function B5(t,e){const n=e;let a=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(a=zk);const r=[];let s;if(t.properties){for(s in t.properties)if(s!=="children"&&I5.call(t.properties,s)){const c=F5(a,s,t.properties[s]);c&&r.push(c)}}const o=a.space,l={nodeName:t.tagName,tagName:t.tagName,attrs:r,namespaceURI:or[o],childNodes:[],parentNode:null};return l.childNodes=Pg(t.children,l,a),Hs(t,l),t.tagName==="template"&&t.content&&(l.content=M5(t.content,a)),l}function F5(t,e,n){const a=E5(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&a.boolean)return;Array.isArray(n)&&(n=a.commaSeparated?kT(n):OT(n));const r={name:a.attribute,value:n===!0?"":String(n)};if(a.space&&a.space!=="html"&&a.space!=="svg"){const s=r.name.indexOf(":");s<0?r.prefix="":(r.name=r.name.slice(s+1),r.prefix=a.attribute.slice(0,s)),r.namespace=or[a.space]}return r}function Pg(t,e,n){let a=-1;const r=[];if(t)for(;++a<t.length;){const s=Wk(t[a],n);s.parentNode=e,r.push(s)}return r}function Hs(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const H5=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],q5=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ft="�";var D;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(D||(D={}));const _n={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Uk(t){return t>=55296&&t<=57343}function $5(t){return t>=56320&&t<=57343}function z5(t,e){return(t-55296)*1024+9216+e}function Vk(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function Yk(t){return t>=64976&&t<=65007||q5.has(t)}var Z;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Z||(Z={}));const W5=65536;class U5{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=W5,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:a,col:r,offset:s}=this,o=r+n,l=s+n;return{code:e,startLine:a,endLine:a,startCol:o,endCol:o,startOffset:l,endOffset:l}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if($5(n))return this.pos++,this._addGap(),z5(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,D.EOF;return this._err(Z.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let a=0;a<e.length;a++)if((this.html.charCodeAt(this.pos+a)|32)!==e.charCodeAt(a))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,D.EOF;const a=this.html.charCodeAt(n);return a===D.CARRIAGE_RETURN?D.LINE_FEED:a}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,D.EOF;let e=this.html.charCodeAt(this.pos);return e===D.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,D.LINE_FEED):e===D.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Uk(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===D.LINE_FEED||e===D.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Vk(e)?this._err(Z.controlCharacterInInputStream):Yk(e)&&this._err(Z.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var qe;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(qe||(qe={}));function Gk(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const V5=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(t=>t.charCodeAt(0))),Y5=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function G5(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=Y5.get(t))!==null&&e!==void 0?e:t}var Rt;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Rt||(Rt={}));const X5=32;var Ea;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Ea||(Ea={}));function Zf(t){return t>=Rt.ZERO&&t<=Rt.NINE}function J5(t){return t>=Rt.UPPER_A&&t<=Rt.UPPER_F||t>=Rt.LOWER_A&&t<=Rt.LOWER_F}function Q5(t){return t>=Rt.UPPER_A&&t<=Rt.UPPER_Z||t>=Rt.LOWER_A&&t<=Rt.LOWER_Z||Zf(t)}function K5(t){return t===Rt.EQUALS||Q5(t)}var Mt;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Mt||(Mt={}));var ra;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(ra||(ra={}));class Z5{constructor(e,n,a){this.decodeTree=e,this.emitCodePoint=n,this.errors=a,this.state=Mt.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ra.Strict}startEntity(e){this.decodeMode=e,this.state=Mt.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Mt.EntityStart:return e.charCodeAt(n)===Rt.NUM?(this.state=Mt.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Mt.NamedEntity,this.stateNamedEntity(e,n));case Mt.NumericStart:return this.stateNumericStart(e,n);case Mt.NumericDecimal:return this.stateNumericDecimal(e,n);case Mt.NumericHex:return this.stateNumericHex(e,n);case Mt.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|X5)===Rt.LOWER_X?(this.state=Mt.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Mt.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,a,r){if(n!==a){const s=a-n;this.result=this.result*Math.pow(r,s)+Number.parseInt(e.substr(n,s),r),this.consumed+=s}}stateNumericHex(e,n){const a=n;for(;n<e.length;){const r=e.charCodeAt(n);if(Zf(r)||J5(r))n+=1;else return this.addToNumericResult(e,a,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(e,a,n,16),-1}stateNumericDecimal(e,n){const a=n;for(;n<e.length;){const r=e.charCodeAt(n);if(Zf(r))n+=1;else return this.addToNumericResult(e,a,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(e,a,n,10),-1}emitNumericEntity(e,n){var a;if(this.consumed<=n)return(a=this.errors)===null||a===void 0||a.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Rt.SEMI)this.consumed+=1;else if(this.decodeMode===ra.Strict)return 0;return this.emitCodePoint(G5(this.result),this.consumed),this.errors&&(e!==Rt.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:a}=this;let r=a[this.treeIndex],s=(r&Ea.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const o=e.charCodeAt(n);if(this.treeIndex=e4(a,r,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===ra.Attribute&&(s===0||K5(o))?0:this.emitNotTerminatedNamedEntity();if(r=a[this.treeIndex],s=(r&Ea.VALUE_LENGTH)>>14,s!==0){if(o===Rt.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==ra.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:a}=this,r=(a[n]&Ea.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,a){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[e]&~Ea.VALUE_LENGTH:r[e+1],a),n===3&&this.emitCodePoint(r[e+2],a),a}end(){var e;switch(this.state){case Mt.NamedEntity:return this.result!==0&&(this.decodeMode!==ra.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Mt.NumericDecimal:return this.emitNumericEntity(0,2);case Mt.NumericHex:return this.emitNumericEntity(0,3);case Mt.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Mt.EntityStart:return 0}}}function e4(t,e,n,a){const r=(e&Ea.BRANCH_LENGTH)>>7,s=e&Ea.JUMP_TABLE;if(r===0)return s!==0&&a===s?n:-1;if(s){const c=a-s;return c<0||c>=r?-1:t[n+c]-1}let o=n,l=o+r-1;for(;o<=l;){const c=o+l>>>1,h=t[c];if(h<a)o=c+1;else if(h>a)l=c-1;else return t[c+r]}return-1}var ne;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(ne||(ne={}));var gr;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(gr||(gr={}));var Jn;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Jn||(Jn={}));var Q;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(Q||(Q={}));var y;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(y||(y={}));const t4=new Map([[Q.A,y.A],[Q.ADDRESS,y.ADDRESS],[Q.ANNOTATION_XML,y.ANNOTATION_XML],[Q.APPLET,y.APPLET],[Q.AREA,y.AREA],[Q.ARTICLE,y.ARTICLE],[Q.ASIDE,y.ASIDE],[Q.B,y.B],[Q.BASE,y.BASE],[Q.BASEFONT,y.BASEFONT],[Q.BGSOUND,y.BGSOUND],[Q.BIG,y.BIG],[Q.BLOCKQUOTE,y.BLOCKQUOTE],[Q.BODY,y.BODY],[Q.BR,y.BR],[Q.BUTTON,y.BUTTON],[Q.CAPTION,y.CAPTION],[Q.CENTER,y.CENTER],[Q.CODE,y.CODE],[Q.COL,y.COL],[Q.COLGROUP,y.COLGROUP],[Q.DD,y.DD],[Q.DESC,y.DESC],[Q.DETAILS,y.DETAILS],[Q.DIALOG,y.DIALOG],[Q.DIR,y.DIR],[Q.DIV,y.DIV],[Q.DL,y.DL],[Q.DT,y.DT],[Q.EM,y.EM],[Q.EMBED,y.EMBED],[Q.FIELDSET,y.FIELDSET],[Q.FIGCAPTION,y.FIGCAPTION],[Q.FIGURE,y.FIGURE],[Q.FONT,y.FONT],[Q.FOOTER,y.FOOTER],[Q.FOREIGN_OBJECT,y.FOREIGN_OBJECT],[Q.FORM,y.FORM],[Q.FRAME,y.FRAME],[Q.FRAMESET,y.FRAMESET],[Q.H1,y.H1],[Q.H2,y.H2],[Q.H3,y.H3],[Q.H4,y.H4],[Q.H5,y.H5],[Q.H6,y.H6],[Q.HEAD,y.HEAD],[Q.HEADER,y.HEADER],[Q.HGROUP,y.HGROUP],[Q.HR,y.HR],[Q.HTML,y.HTML],[Q.I,y.I],[Q.IMG,y.IMG],[Q.IMAGE,y.IMAGE],[Q.INPUT,y.INPUT],[Q.IFRAME,y.IFRAME],[Q.KEYGEN,y.KEYGEN],[Q.LABEL,y.LABEL],[Q.LI,y.LI],[Q.LINK,y.LINK],[Q.LISTING,y.LISTING],[Q.MAIN,y.MAIN],[Q.MALIGNMARK,y.MALIGNMARK],[Q.MARQUEE,y.MARQUEE],[Q.MATH,y.MATH],[Q.MENU,y.MENU],[Q.META,y.META],[Q.MGLYPH,y.MGLYPH],[Q.MI,y.MI],[Q.MO,y.MO],[Q.MN,y.MN],[Q.MS,y.MS],[Q.MTEXT,y.MTEXT],[Q.NAV,y.NAV],[Q.NOBR,y.NOBR],[Q.NOFRAMES,y.NOFRAMES],[Q.NOEMBED,y.NOEMBED],[Q.NOSCRIPT,y.NOSCRIPT],[Q.OBJECT,y.OBJECT],[Q.OL,y.OL],[Q.OPTGROUP,y.OPTGROUP],[Q.OPTION,y.OPTION],[Q.P,y.P],[Q.PARAM,y.PARAM],[Q.PLAINTEXT,y.PLAINTEXT],[Q.PRE,y.PRE],[Q.RB,y.RB],[Q.RP,y.RP],[Q.RT,y.RT],[Q.RTC,y.RTC],[Q.RUBY,y.RUBY],[Q.S,y.S],[Q.SCRIPT,y.SCRIPT],[Q.SEARCH,y.SEARCH],[Q.SECTION,y.SECTION],[Q.SELECT,y.SELECT],[Q.SOURCE,y.SOURCE],[Q.SMALL,y.SMALL],[Q.SPAN,y.SPAN],[Q.STRIKE,y.STRIKE],[Q.STRONG,y.STRONG],[Q.STYLE,y.STYLE],[Q.SUB,y.SUB],[Q.SUMMARY,y.SUMMARY],[Q.SUP,y.SUP],[Q.TABLE,y.TABLE],[Q.TBODY,y.TBODY],[Q.TEMPLATE,y.TEMPLATE],[Q.TEXTAREA,y.TEXTAREA],[Q.TFOOT,y.TFOOT],[Q.TD,y.TD],[Q.TH,y.TH],[Q.THEAD,y.THEAD],[Q.TITLE,y.TITLE],[Q.TR,y.TR],[Q.TRACK,y.TRACK],[Q.TT,y.TT],[Q.U,y.U],[Q.UL,y.UL],[Q.SVG,y.SVG],[Q.VAR,y.VAR],[Q.WBR,y.WBR],[Q.XMP,y.XMP]]);function qs(t){var e;return(e=t4.get(t))!==null&&e!==void 0?e:y.UNKNOWN}const ie=y,n4={[ne.HTML]:new Set([ie.ADDRESS,ie.APPLET,ie.AREA,ie.ARTICLE,ie.ASIDE,ie.BASE,ie.BASEFONT,ie.BGSOUND,ie.BLOCKQUOTE,ie.BODY,ie.BR,ie.BUTTON,ie.CAPTION,ie.CENTER,ie.COL,ie.COLGROUP,ie.DD,ie.DETAILS,ie.DIR,ie.DIV,ie.DL,ie.DT,ie.EMBED,ie.FIELDSET,ie.FIGCAPTION,ie.FIGURE,ie.FOOTER,ie.FORM,ie.FRAME,ie.FRAMESET,ie.H1,ie.H2,ie.H3,ie.H4,ie.H5,ie.H6,ie.HEAD,ie.HEADER,ie.HGROUP,ie.HR,ie.HTML,ie.IFRAME,ie.IMG,ie.INPUT,ie.LI,ie.LINK,ie.LISTING,ie.MAIN,ie.MARQUEE,ie.MENU,ie.META,ie.NAV,ie.NOEMBED,ie.NOFRAMES,ie.NOSCRIPT,ie.OBJECT,ie.OL,ie.P,ie.PARAM,ie.PLAINTEXT,ie.PRE,ie.SCRIPT,ie.SECTION,ie.SELECT,ie.SOURCE,ie.STYLE,ie.SUMMARY,ie.TABLE,ie.TBODY,ie.TD,ie.TEMPLATE,ie.TEXTAREA,ie.TFOOT,ie.TH,ie.THEAD,ie.TITLE,ie.TR,ie.TRACK,ie.UL,ie.WBR,ie.XMP]),[ne.MATHML]:new Set([ie.MI,ie.MO,ie.MN,ie.MS,ie.MTEXT,ie.ANNOTATION_XML]),[ne.SVG]:new Set([ie.TITLE,ie.FOREIGN_OBJECT,ie.DESC]),[ne.XLINK]:new Set,[ne.XML]:new Set,[ne.XMLNS]:new Set},ep=new Set([ie.H1,ie.H2,ie.H3,ie.H4,ie.H5,ie.H6]);Q.STYLE,Q.SCRIPT,Q.XMP,Q.IFRAME,Q.NOEMBED,Q.NOFRAMES,Q.PLAINTEXT;var F;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(F||(F={}));const wt={DATA:F.DATA,RCDATA:F.RCDATA,RAWTEXT:F.RAWTEXT,SCRIPT_DATA:F.SCRIPT_DATA,PLAINTEXT:F.PLAINTEXT,CDATA_SECTION:F.CDATA_SECTION};function i4(t){return t>=D.DIGIT_0&&t<=D.DIGIT_9}function qo(t){return t>=D.LATIN_CAPITAL_A&&t<=D.LATIN_CAPITAL_Z}function a4(t){return t>=D.LATIN_SMALL_A&&t<=D.LATIN_SMALL_Z}function wa(t){return a4(t)||qo(t)}function q0(t){return wa(t)||i4(t)}function bc(t){return t+32}function Xk(t){return t===D.SPACE||t===D.LINE_FEED||t===D.TABULATION||t===D.FORM_FEED}function $0(t){return Xk(t)||t===D.SOLIDUS||t===D.GREATER_THAN_SIGN}function r4(t){return t===D.NULL?Z.nullCharacterReference:t>1114111?Z.characterReferenceOutsideUnicodeRange:Uk(t)?Z.surrogateCharacterReference:Yk(t)?Z.noncharacterCharacterReference:Vk(t)||t===D.CARRIAGE_RETURN?Z.controlCharacterReference:null}class s4{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=F.DATA,this.returnState=F.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new U5(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new Z5(V5,(a,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(a)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Z.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:a=>{this._err(Z.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+a)},validateNumericCharacterReference:a=>{const r=r4(a);r&&this._err(r,1)}}:void 0)}_err(e,n=0){var a,r;(r=(a=this.handler).onParseError)===null||r===void 0||r.call(a,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,a){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||a?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:qe.START_TAG,tagName:"",tagID:y.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:qe.END_TAG,tagName:"",tagID:y.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:qe.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:qe.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const a=this.currentToken;if(Gk(a,this.currentAttr.name)===null){if(a.attrs.push(this.currentAttr),a.location&&this.currentLocation){const r=(e=(n=a.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Z.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=qs(e.tagName),e.type===qe.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Z.endTagWithAttributes),e.selfClosing&&this._err(Z.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case qe.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case qe.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case qe.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:qe.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=Xk(e)?qe.WHITESPACE_CHARACTER:e===D.NULL?qe.NULL_CHARACTER:qe.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(qe.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=F.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?ra.Attribute:ra.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===F.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===F.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===F.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case F.DATA:{this._stateData(e);break}case F.RCDATA:{this._stateRcdata(e);break}case F.RAWTEXT:{this._stateRawtext(e);break}case F.SCRIPT_DATA:{this._stateScriptData(e);break}case F.PLAINTEXT:{this._statePlaintext(e);break}case F.TAG_OPEN:{this._stateTagOpen(e);break}case F.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case F.TAG_NAME:{this._stateTagName(e);break}case F.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case F.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case F.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case F.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case F.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case F.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case F.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case F.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case F.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case F.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case F.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case F.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case F.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case F.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case F.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case F.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case F.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case F.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case F.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case F.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case F.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case F.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case F.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case F.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case F.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case F.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case F.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case F.BOGUS_COMMENT:{this._stateBogusComment(e);break}case F.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case F.COMMENT_START:{this._stateCommentStart(e);break}case F.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case F.COMMENT:{this._stateComment(e);break}case F.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case F.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case F.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case F.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case F.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case F.COMMENT_END:{this._stateCommentEnd(e);break}case F.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case F.DOCTYPE:{this._stateDoctype(e);break}case F.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case F.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case F.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case F.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case F.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case F.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case F.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case F.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case F.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case F.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case F.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case F.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case F.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case F.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case F.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case F.CDATA_SECTION:{this._stateCdataSection(e);break}case F.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case F.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case F.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case F.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case D.LESS_THAN_SIGN:{this.state=F.TAG_OPEN;break}case D.AMPERSAND:{this._startCharacterReference();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitCodePoint(e);break}case D.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case D.AMPERSAND:{this._startCharacterReference();break}case D.LESS_THAN_SIGN:{this.state=F.RCDATA_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case D.LESS_THAN_SIGN:{this.state=F.RAWTEXT_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(wa(e))this._createStartTagToken(),this.state=F.TAG_NAME,this._stateTagName(e);else switch(e){case D.EXCLAMATION_MARK:{this.state=F.MARKUP_DECLARATION_OPEN;break}case D.SOLIDUS:{this.state=F.END_TAG_OPEN;break}case D.QUESTION_MARK:{this._err(Z.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=F.BOGUS_COMMENT,this._stateBogusComment(e);break}case D.EOF:{this._err(Z.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Z.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=F.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(wa(e))this._createEndTagToken(),this.state=F.TAG_NAME,this._stateTagName(e);else switch(e){case D.GREATER_THAN_SIGN:{this._err(Z.missingEndTagName),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Z.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=F.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.BEFORE_ATTRIBUTE_NAME;break}case D.SOLIDUS:{this.state=F.SELF_CLOSING_START_TAG;break}case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentTagToken();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.tagName+=ft;break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(qo(e)?bc(e):e)}}_stateRcdataLessThanSign(e){e===D.SOLIDUS?this.state=F.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=F.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){wa(e)?(this.state=F.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=F.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=F.BEFORE_ATTRIBUTE_NAME,!1;case D.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=F.SELF_CLOSING_START_TAG,!1;case D.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=F.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===D.SOLIDUS?this.state=F.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=F.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){wa(e)?(this.state=F.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=F.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case D.SOLIDUS:{this.state=F.SCRIPT_DATA_END_TAG_OPEN;break}case D.EXCLAMATION_MARK:{this.state=F.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=F.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){wa(e)?(this.state=F.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=F.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===D.HYPHEN_MINUS?(this.state=F.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=F.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===D.HYPHEN_MINUS?(this.state=F.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=F.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case D.HYPHEN_MINUS:{this.state=F.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case D.HYPHEN_MINUS:{this.state=F.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.state=F.SCRIPT_DATA_ESCAPED,this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=F.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case D.HYPHEN_MINUS:{this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case D.GREATER_THAN_SIGN:{this.state=F.SCRIPT_DATA,this._emitChars(">");break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.state=F.SCRIPT_DATA_ESCAPED,this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=F.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===D.SOLIDUS?this.state=F.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:wa(e)?(this._emitChars("<"),this.state=F.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=F.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){wa(e)?(this.state=F.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=F.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=F.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(_n.SCRIPT,!1)&&$0(this.preprocessor.peek(_n.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<_n.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=F.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case D.HYPHEN_MINUS:{this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case D.HYPHEN_MINUS:{this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case D.HYPHEN_MINUS:{this._emitChars("-");break}case D.LESS_THAN_SIGN:{this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case D.GREATER_THAN_SIGN:{this.state=F.SCRIPT_DATA,this._emitChars(">");break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ft);break}case D.EOF:{this._err(Z.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===D.SOLIDUS?(this.state=F.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(_n.SCRIPT,!1)&&$0(this.preprocessor.peek(_n.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<_n.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=F.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=F.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.SOLIDUS:case D.GREATER_THAN_SIGN:case D.EOF:{this.state=F.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case D.EQUALS_SIGN:{this._err(Z.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=F.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=F.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:case D.SOLIDUS:case D.GREATER_THAN_SIGN:case D.EOF:{this._leaveAttrName(),this.state=F.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case D.EQUALS_SIGN:{this._leaveAttrName(),this.state=F.BEFORE_ATTRIBUTE_VALUE;break}case D.QUOTATION_MARK:case D.APOSTROPHE:case D.LESS_THAN_SIGN:{this._err(Z.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.currentAttr.name+=ft;break}default:this.currentAttr.name+=String.fromCodePoint(qo(e)?bc(e):e)}}_stateAfterAttributeName(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.SOLIDUS:{this.state=F.SELF_CLOSING_START_TAG;break}case D.EQUALS_SIGN:{this.state=F.BEFORE_ATTRIBUTE_VALUE;break}case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentTagToken();break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=F.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.QUOTATION_MARK:{this.state=F.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case D.APOSTROPHE:{this.state=F.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingAttributeValue),this.state=F.DATA,this.emitCurrentTagToken();break}default:this.state=F.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case D.QUOTATION_MARK:{this.state=F.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case D.AMPERSAND:{this._startCharacterReference();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.currentAttr.value+=ft;break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case D.APOSTROPHE:{this.state=F.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case D.AMPERSAND:{this._startCharacterReference();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.currentAttr.value+=ft;break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this._leaveAttrValue(),this.state=F.BEFORE_ATTRIBUTE_NAME;break}case D.AMPERSAND:{this._startCharacterReference();break}case D.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=F.DATA,this.emitCurrentTagToken();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),this.currentAttr.value+=ft;break}case D.QUOTATION_MARK:case D.APOSTROPHE:case D.LESS_THAN_SIGN:case D.EQUALS_SIGN:case D.GRAVE_ACCENT:{this._err(Z.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this._leaveAttrValue(),this.state=F.BEFORE_ATTRIBUTE_NAME;break}case D.SOLIDUS:{this._leaveAttrValue(),this.state=F.SELF_CLOSING_START_TAG;break}case D.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=F.DATA,this.emitCurrentTagToken();break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this._err(Z.missingWhitespaceBetweenAttributes),this.state=F.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case D.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=F.DATA,this.emitCurrentTagToken();break}case D.EOF:{this._err(Z.eofInTag),this._emitEOFToken();break}default:this._err(Z.unexpectedSolidusInTag),this.state=F.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentComment(n);break}case D.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.data+=ft;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(_n.DASH_DASH,!0)?(this._createCommentToken(_n.DASH_DASH.length+1),this.state=F.COMMENT_START):this._consumeSequenceIfMatch(_n.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(_n.DOCTYPE.length+1),this.state=F.DOCTYPE):this._consumeSequenceIfMatch(_n.CDATA_START,!0)?this.inForeignNode?this.state=F.CDATA_SECTION:(this._err(Z.cdataInHtmlContent),this._createCommentToken(_n.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=F.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Z.incorrectlyOpenedComment),this._createCommentToken(2),this.state=F.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case D.HYPHEN_MINUS:{this.state=F.COMMENT_START_DASH;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptClosingOfEmptyComment),this.state=F.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=F.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case D.HYPHEN_MINUS:{this.state=F.COMMENT_END;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptClosingOfEmptyComment),this.state=F.DATA,this.emitCurrentComment(n);break}case D.EOF:{this._err(Z.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=F.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case D.HYPHEN_MINUS:{this.state=F.COMMENT_END_DASH;break}case D.LESS_THAN_SIGN:{n.data+="<",this.state=F.COMMENT_LESS_THAN_SIGN;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.data+=ft;break}case D.EOF:{this._err(Z.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case D.EXCLAMATION_MARK:{n.data+="!",this.state=F.COMMENT_LESS_THAN_SIGN_BANG;break}case D.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=F.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===D.HYPHEN_MINUS?this.state=F.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=F.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===D.HYPHEN_MINUS?this.state=F.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=F.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==D.GREATER_THAN_SIGN&&e!==D.EOF&&this._err(Z.nestedComment),this.state=F.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case D.HYPHEN_MINUS:{this.state=F.COMMENT_END;break}case D.EOF:{this._err(Z.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=F.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentComment(n);break}case D.EXCLAMATION_MARK:{this.state=F.COMMENT_END_BANG;break}case D.HYPHEN_MINUS:{n.data+="-";break}case D.EOF:{this._err(Z.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=F.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case D.HYPHEN_MINUS:{n.data+="--!",this.state=F.COMMENT_END_DASH;break}case D.GREATER_THAN_SIGN:{this._err(Z.incorrectlyClosedComment),this.state=F.DATA,this.emitCurrentComment(n);break}case D.EOF:{this._err(Z.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=F.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.BEFORE_DOCTYPE_NAME;break}case D.GREATER_THAN_SIGN:{this.state=F.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case D.EOF:{this._err(Z.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingWhitespaceBeforeDoctypeName),this.state=F.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(qo(e))this._createDoctypeToken(String.fromCharCode(bc(e))),this.state=F.DOCTYPE_NAME;else switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.NULL:{this._err(Z.unexpectedNullCharacter),this._createDoctypeToken(ft),this.state=F.DOCTYPE_NAME;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=F.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.AFTER_DOCTYPE_NAME;break}case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.name+=ft;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(qo(e)?bc(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(_n.PUBLIC,!1)?this.state=F.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(_n.SYSTEM,!1)?this.state=F.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Z.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case D.QUOTATION_MARK:{this._err(Z.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=F.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{this._err(Z.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=F.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.QUOTATION_MARK:{n.publicId="",this.state=F.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{n.publicId="",this.state=F.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case D.QUOTATION_MARK:{this.state=F.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.publicId+=ft;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case D.APOSTROPHE:{this.state=F.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.publicId+=ft;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case D.GREATER_THAN_SIGN:{this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.QUOTATION_MARK:{this._err(Z.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{this._err(Z.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.QUOTATION_MARK:{n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:{this.state=F.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case D.QUOTATION_MARK:{this._err(Z.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{this._err(Z.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.QUOTATION_MARK:{n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case D.APOSTROPHE:{n.systemId="",this.state=F.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case D.GREATER_THAN_SIGN:{this._err(Z.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.DATA,this.emitCurrentDoctype(n);break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case D.QUOTATION_MARK:{this.state=F.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.systemId+=ft;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case D.APOSTROPHE:{this.state=F.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case D.NULL:{this._err(Z.unexpectedNullCharacter),n.systemId+=ft;break}case D.GREATER_THAN_SIGN:{this._err(Z.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case D.SPACE:case D.LINE_FEED:case D.TABULATION:case D.FORM_FEED:break;case D.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.EOF:{this._err(Z.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Z.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=F.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case D.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=F.DATA;break}case D.NULL:{this._err(Z.unexpectedNullCharacter);break}case D.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case D.RIGHT_SQUARE_BRACKET:{this.state=F.CDATA_SECTION_BRACKET;break}case D.EOF:{this._err(Z.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===D.RIGHT_SQUARE_BRACKET?this.state=F.CDATA_SECTION_END:(this._emitChars("]"),this.state=F.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case D.GREATER_THAN_SIGN:{this.state=F.DATA;break}case D.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=F.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(D.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&q0(this.preprocessor.peek(1))?F.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){q0(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===D.SEMICOLON&&this._err(Z.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const Jk=new Set([y.DD,y.DT,y.LI,y.OPTGROUP,y.OPTION,y.P,y.RB,y.RP,y.RT,y.RTC]),z0=new Set([...Jk,y.CAPTION,y.COLGROUP,y.TBODY,y.TD,y.TFOOT,y.TH,y.THEAD,y.TR]),yh=new Set([y.APPLET,y.CAPTION,y.HTML,y.MARQUEE,y.OBJECT,y.TABLE,y.TD,y.TEMPLATE,y.TH]),o4=new Set([...yh,y.OL,y.UL]),l4=new Set([...yh,y.BUTTON]),W0=new Set([y.ANNOTATION_XML,y.MI,y.MN,y.MO,y.MS,y.MTEXT]),U0=new Set([y.DESC,y.FOREIGN_OBJECT,y.TITLE]),c4=new Set([y.TR,y.TEMPLATE,y.HTML]),h4=new Set([y.TBODY,y.TFOOT,y.THEAD,y.TEMPLATE,y.HTML]),u4=new Set([y.TABLE,y.TEMPLATE,y.HTML]),d4=new Set([y.TD,y.TH]);class m4{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,a){this.treeAdapter=n,this.handler=a,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=y.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===y.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ne.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const a=this._indexOf(e);this.items[a]=n,a===this.stackTop&&(this.current=n)}insertAfter(e,n,a){const r=this._indexOf(e)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,a),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ne.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const a=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(a,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(ep,ne.HTML)}popUntilTableCellPopped(){this.popUntilPopped(d4,ne.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let a=this.stackTop;a>=0;a--)if(e.has(this.tagIDs[a])&&this.treeAdapter.getNamespaceURI(this.items[a])===n)return a;return-1}clearBackTo(e,n){const a=this._indexOfTagNames(e,n);this.shortenToLength(a+1)}clearBackToTableContext(){this.clearBackTo(u4,ne.HTML)}clearBackToTableBodyContext(){this.clearBackTo(h4,ne.HTML)}clearBackToTableRowContext(){this.clearBackTo(c4,ne.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===y.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===y.HTML}hasInDynamicScope(e,n){for(let a=this.stackTop;a>=0;a--){const r=this.tagIDs[a];switch(this.treeAdapter.getNamespaceURI(this.items[a])){case ne.HTML:{if(r===e)return!0;if(n.has(r))return!1;break}case ne.SVG:{if(U0.has(r))return!1;break}case ne.MATHML:{if(W0.has(r))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,yh)}hasInListItemScope(e){return this.hasInDynamicScope(e,o4)}hasInButtonScope(e){return this.hasInDynamicScope(e,l4)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case ne.HTML:{if(ep.has(n))return!0;if(yh.has(n))return!1;break}case ne.SVG:{if(U0.has(n))return!1;break}case ne.MATHML:{if(W0.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ne.HTML)switch(this.tagIDs[n]){case e:return!0;case y.TABLE:case y.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===ne.HTML)switch(this.tagIDs[e]){case y.TBODY:case y.THEAD:case y.TFOOT:return!0;case y.TABLE:case y.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===ne.HTML)switch(this.tagIDs[n]){case e:return!0;case y.OPTION:case y.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&Jk.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&z0.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&z0.has(this.currentTagId);)this.pop()}}const qd=3;var Mi;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Mi||(Mi={}));const V0={type:Mi.Marker};class f4{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const a=[],r=n.length,s=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let l=0;l<this.entries.length;l++){const c=this.entries[l];if(c.type===Mi.Marker)break;const{element:h}=c;if(this.treeAdapter.getTagName(h)===s&&this.treeAdapter.getNamespaceURI(h)===o){const u=this.treeAdapter.getAttrList(h);u.length===r&&a.push({idx:l,attrs:u})}}return a}_ensureNoahArkCondition(e){if(this.entries.length<qd)return;const n=this.treeAdapter.getAttrList(e),a=this._getNoahArkConditionCandidates(e,n);if(a.length<qd)return;const r=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<a.length;o++){const l=a[o];l.attrs.every(c=>r.get(c.name)===c.value)&&(s+=1,s>=qd&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(V0)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Mi.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const a=this.entries.indexOf(this.bookmark);this.entries.splice(a,0,{type:Mi.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(V0);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(a=>a.type===Mi.Marker||this.treeAdapter.getTagName(a.element)===e);return n&&n.type===Mi.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Mi.Element&&n.element===e)}}const _a={createDocument(){return{nodeName:"#document",mode:Jn.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const a=t.childNodes.indexOf(n);t.childNodes.splice(a,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,a){const r=t.childNodes.find(s=>s.nodeName==="#documentType");if(r)r.name=e,r.publicId=n,r.systemId=a;else{const s={nodeName:"#documentType",name:e,publicId:n,systemId:a,parentNode:null};_a.appendChild(t,s)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(_a.isTextNode(n)){n.value+=e;return}}_a.appendChild(t,_a.createTextNode(e))},insertTextBefore(t,e,n){const a=t.childNodes[t.childNodes.indexOf(n)-1];a&&_a.isTextNode(a)?a.value+=e:_a.insertBefore(t,_a.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(a=>a.name));for(let a=0;a<e.length;a++)n.has(e[a].name)||t.attrs.push(e[a])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},Qk="html",p4="about:legacy-compat",g4="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Kk=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],x4=[...Kk,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],y4=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Zk=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],b4=[...Zk,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Y0(t,e){return e.some(n=>t.startsWith(n))}function w4(t){return t.name===Qk&&t.publicId===null&&(t.systemId===null||t.systemId===p4)}function _4(t){if(t.name!==Qk)return Jn.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===g4)return Jn.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),y4.has(n))return Jn.QUIRKS;let a=e===null?x4:Kk;if(Y0(n,a))return Jn.QUIRKS;if(a=e===null?Zk:b4,Y0(n,a))return Jn.LIMITED_QUIRKS}return Jn.NO_QUIRKS}const G0={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},v4="definitionurl",j4="definitionURL",T4=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),k4=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ne.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ne.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ne.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ne.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ne.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ne.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ne.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:ne.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ne.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ne.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ne.XMLNS}]]),E4=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),S4=new Set([y.B,y.BIG,y.BLOCKQUOTE,y.BODY,y.BR,y.CENTER,y.CODE,y.DD,y.DIV,y.DL,y.DT,y.EM,y.EMBED,y.H1,y.H2,y.H3,y.H4,y.H5,y.H6,y.HEAD,y.HR,y.I,y.IMG,y.LI,y.LISTING,y.MENU,y.META,y.NOBR,y.OL,y.P,y.PRE,y.RUBY,y.S,y.SMALL,y.SPAN,y.STRONG,y.STRIKE,y.SUB,y.SUP,y.TABLE,y.TT,y.U,y.UL,y.VAR]);function C4(t){const e=t.tagID;return e===y.FONT&&t.attrs.some(({name:a})=>a===gr.COLOR||a===gr.SIZE||a===gr.FACE)||S4.has(e)}function eE(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===v4){t.attrs[e].name=j4;break}}function tE(t){for(let e=0;e<t.attrs.length;e++){const n=T4.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function Dg(t){for(let e=0;e<t.attrs.length;e++){const n=k4.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function A4(t){const e=E4.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=qs(t.tagName))}function N4(t,e){return e===ne.MATHML&&(t===y.MI||t===y.MO||t===y.MN||t===y.MS||t===y.MTEXT)}function I4(t,e,n){if(e===ne.MATHML&&t===y.ANNOTATION_XML){for(let a=0;a<n.length;a++)if(n[a].name===gr.ENCODING){const r=n[a].value.toLowerCase();return r===G0.TEXT_HTML||r===G0.APPLICATION_XML}}return e===ne.SVG&&(t===y.FOREIGN_OBJECT||t===y.DESC||t===y.TITLE)}function L4(t,e,n,a){return(!a||a===ne.HTML)&&I4(t,e,n)||(!a||a===ne.MATHML)&&N4(t,e)}const O4="hidden",M4=8,R4=3;var z;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(z||(z={}));const P4={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},nE=new Set([y.TABLE,y.TBODY,y.TFOOT,y.THEAD,y.TR]),X0={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:_a,onParseError:null};class J0{constructor(e,n,a=null,r=null){this.fragmentContext=a,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=z.INITIAL,this.originalInsertionMode=z.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...X0,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new s4(this.options,this),this.activeFormattingElements=new f4(this.treeAdapter),this.fragmentContextID=a?qs(this.treeAdapter.getTagName(a)):y.UNKNOWN,this._setContextModes(a??this.document,this.fragmentContextID),this.openElements=new m4(this.document,this.treeAdapter,this)}static parse(e,n){const a=new this(n);return a.tokenizer.write(e,!0),a.document}static getFragmentParser(e,n){const a={...X0,...n};e??(e=a.treeAdapter.createElement(Q.TEMPLATE,ne.HTML,[]));const r=a.treeAdapter.createElement("documentmock",ne.HTML,[]),s=new this(a,r,e);return s.fragmentContextID===y.TEMPLATE&&s.tmplInsertionModeStack.unshift(z.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,a){var r;if(!this.onParseError)return;const s=(r=e.location)!==null&&r!==void 0?r:P4,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:a?s.startLine:s.endLine,endCol:a?s.startCol:s.endCol,endOffset:a?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(e,n,a){var r,s;(s=(r=this.treeAdapter).onItemPush)===null||s===void 0||s.call(r,e),a&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var a,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(r=(a=this.treeAdapter).onItemPop)===null||r===void 0||r.call(a,e,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(e,n){const a=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===ne.HTML;this.currentNotInHTML=!a,this.tokenizer.inForeignNode=!a&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,ne.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=z.TEXT}switchToPlaintextParsing(){this.insertionMode=z.TEXT,this.originalInsertionMode=z.IN_BODY,this.tokenizer.state=wt.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Q.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ne.HTML))switch(this.fragmentContextID){case y.TITLE:case y.TEXTAREA:{this.tokenizer.state=wt.RCDATA;break}case y.STYLE:case y.XMP:case y.IFRAME:case y.NOEMBED:case y.NOFRAMES:case y.NOSCRIPT:{this.tokenizer.state=wt.RAWTEXT;break}case y.SCRIPT:{this.tokenizer.state=wt.SCRIPT_DATA;break}case y.PLAINTEXT:{this.tokenizer.state=wt.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",a=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,a,r),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const a=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,a)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const a=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(a??this.document,e)}}_appendElement(e,n){const a=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(a,e.location)}_insertElement(e,n){const a=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(a,e.location),this.openElements.push(a,e.tagID)}_insertFakeElement(e,n){const a=this.treeAdapter.createElement(e,ne.HTML,[]);this._attachElementToTree(a,null),this.openElements.push(a,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,ne.HTML,e.attrs),a=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,a),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Q.HTML,ne.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,y.HTML)}_appendCommentNode(e,n){const a=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,a),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(a,e.location)}_insertCharacters(e){let n,a;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:a}=this._findFosterParentingLocation(),a?this.treeAdapter.insertTextBefore(n,e.chars,a):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(n),s=a?r.lastIndexOf(a):r.length,o=r[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:c,endCol:h,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:c,endCol:h,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let a=this.treeAdapter.getFirstChild(e);a;a=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(a),this.treeAdapter.appendChild(n,a)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const a=n.location,r=this.treeAdapter.getTagName(e),s=n.type===qe.END_TAG&&r===n.tagName?{endTag:{...a},endLine:a.endLine,endCol:a.endCol,endOffset:a.endOffset}:{endLine:a.startLine,endCol:a.startCol,endOffset:a.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,s)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,a;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,a=this.fragmentContextID):{current:n,currentTagId:a}=this.openElements,e.tagID===y.SVG&&this.treeAdapter.getTagName(n)===Q.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ne.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===y.MGLYPH||e.tagID===y.MALIGNMARK)&&a!==void 0&&!this._isIntegrationPoint(a,n,ne.HTML)}_processToken(e){switch(e.type){case qe.CHARACTER:{this.onCharacter(e);break}case qe.NULL_CHARACTER:{this.onNullCharacter(e);break}case qe.COMMENT:{this.onComment(e);break}case qe.DOCTYPE:{this.onDoctype(e);break}case qe.START_TAG:{this._processStartTag(e);break}case qe.END_TAG:{this.onEndTag(e);break}case qe.EOF:{this.onEof(e);break}case qe.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,a){const r=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return L4(e,r,s,a)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(r=>r.type===Mi.Marker||this.openElements.contains(r.element)),a=n===-1?e-1:n-1;for(let r=a;r>=0;r--){const s=this.activeFormattingElements.entries[r];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=z.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(y.P),this.openElements.popUntilTagNamePopped(y.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case y.TR:{this.insertionMode=z.IN_ROW;return}case y.TBODY:case y.THEAD:case y.TFOOT:{this.insertionMode=z.IN_TABLE_BODY;return}case y.CAPTION:{this.insertionMode=z.IN_CAPTION;return}case y.COLGROUP:{this.insertionMode=z.IN_COLUMN_GROUP;return}case y.TABLE:{this.insertionMode=z.IN_TABLE;return}case y.BODY:{this.insertionMode=z.IN_BODY;return}case y.FRAMESET:{this.insertionMode=z.IN_FRAMESET;return}case y.SELECT:{this._resetInsertionModeForSelect(e);return}case y.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case y.HTML:{this.insertionMode=this.headElement?z.AFTER_HEAD:z.BEFORE_HEAD;return}case y.TD:case y.TH:{if(e>0){this.insertionMode=z.IN_CELL;return}break}case y.HEAD:{if(e>0){this.insertionMode=z.IN_HEAD;return}break}}this.insertionMode=z.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const a=this.openElements.tagIDs[n];if(a===y.TEMPLATE)break;if(a===y.TABLE){this.insertionMode=z.IN_SELECT_IN_TABLE;return}}this.insertionMode=z.IN_SELECT}_isElementCausesFosterParenting(e){return nE.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case y.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ne.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case y.TABLE:{const a=this.treeAdapter.getParentNode(n);return a?{parent:a,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const a=this.treeAdapter.getNamespaceURI(e);return n4[a].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){d8(this,e);return}switch(this.insertionMode){case z.INITIAL:{lo(this,e);break}case z.BEFORE_HTML:{rl(this,e);break}case z.BEFORE_HEAD:{sl(this,e);break}case z.IN_HEAD:{ol(this,e);break}case z.IN_HEAD_NO_SCRIPT:{ll(this,e);break}case z.AFTER_HEAD:{cl(this,e);break}case z.IN_BODY:case z.IN_CAPTION:case z.IN_CELL:case z.IN_TEMPLATE:{aE(this,e);break}case z.TEXT:case z.IN_SELECT:case z.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case z.IN_TABLE:case z.IN_TABLE_BODY:case z.IN_ROW:{$d(this,e);break}case z.IN_TABLE_TEXT:{hE(this,e);break}case z.IN_COLUMN_GROUP:{bh(this,e);break}case z.AFTER_BODY:{wh(this,e);break}case z.AFTER_AFTER_BODY:{Jc(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){u8(this,e);return}switch(this.insertionMode){case z.INITIAL:{lo(this,e);break}case z.BEFORE_HTML:{rl(this,e);break}case z.BEFORE_HEAD:{sl(this,e);break}case z.IN_HEAD:{ol(this,e);break}case z.IN_HEAD_NO_SCRIPT:{ll(this,e);break}case z.AFTER_HEAD:{cl(this,e);break}case z.TEXT:{this._insertCharacters(e);break}case z.IN_TABLE:case z.IN_TABLE_BODY:case z.IN_ROW:{$d(this,e);break}case z.IN_COLUMN_GROUP:{bh(this,e);break}case z.AFTER_BODY:{wh(this,e);break}case z.AFTER_AFTER_BODY:{Jc(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){tp(this,e);return}switch(this.insertionMode){case z.INITIAL:case z.BEFORE_HTML:case z.BEFORE_HEAD:case z.IN_HEAD:case z.IN_HEAD_NO_SCRIPT:case z.AFTER_HEAD:case z.IN_BODY:case z.IN_TABLE:case z.IN_CAPTION:case z.IN_COLUMN_GROUP:case z.IN_TABLE_BODY:case z.IN_ROW:case z.IN_CELL:case z.IN_SELECT:case z.IN_SELECT_IN_TABLE:case z.IN_TEMPLATE:case z.IN_FRAMESET:case z.AFTER_FRAMESET:{tp(this,e);break}case z.IN_TABLE_TEXT:{co(this,e);break}case z.AFTER_BODY:{z4(this,e);break}case z.AFTER_AFTER_BODY:case z.AFTER_AFTER_FRAMESET:{W4(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case z.INITIAL:{U4(this,e);break}case z.BEFORE_HEAD:case z.IN_HEAD:case z.IN_HEAD_NO_SCRIPT:case z.AFTER_HEAD:{this._err(e,Z.misplacedDoctype);break}case z.IN_TABLE_TEXT:{co(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Z.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?m8(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case z.INITIAL:{lo(this,e);break}case z.BEFORE_HTML:{V4(this,e);break}case z.BEFORE_HEAD:{G4(this,e);break}case z.IN_HEAD:{bi(this,e);break}case z.IN_HEAD_NO_SCRIPT:{Q4(this,e);break}case z.AFTER_HEAD:{Z4(this,e);break}case z.IN_BODY:{sn(this,e);break}case z.IN_TABLE:{ws(this,e);break}case z.IN_TABLE_TEXT:{co(this,e);break}case z.IN_CAPTION:{XF(this,e);break}case z.IN_COLUMN_GROUP:{Hg(this,e);break}case z.IN_TABLE_BODY:{Tu(this,e);break}case z.IN_ROW:{ku(this,e);break}case z.IN_CELL:{KF(this,e);break}case z.IN_SELECT:{mE(this,e);break}case z.IN_SELECT_IN_TABLE:{e8(this,e);break}case z.IN_TEMPLATE:{n8(this,e);break}case z.AFTER_BODY:{a8(this,e);break}case z.IN_FRAMESET:{r8(this,e);break}case z.AFTER_FRAMESET:{o8(this,e);break}case z.AFTER_AFTER_BODY:{c8(this,e);break}case z.AFTER_AFTER_FRAMESET:{h8(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?f8(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case z.INITIAL:{lo(this,e);break}case z.BEFORE_HTML:{Y4(this,e);break}case z.BEFORE_HEAD:{X4(this,e);break}case z.IN_HEAD:{J4(this,e);break}case z.IN_HEAD_NO_SCRIPT:{K4(this,e);break}case z.AFTER_HEAD:{eF(this,e);break}case z.IN_BODY:{ju(this,e);break}case z.TEXT:{FF(this,e);break}case z.IN_TABLE:{Tl(this,e);break}case z.IN_TABLE_TEXT:{co(this,e);break}case z.IN_CAPTION:{JF(this,e);break}case z.IN_COLUMN_GROUP:{QF(this,e);break}case z.IN_TABLE_BODY:{np(this,e);break}case z.IN_ROW:{dE(this,e);break}case z.IN_CELL:{ZF(this,e);break}case z.IN_SELECT:{fE(this,e);break}case z.IN_SELECT_IN_TABLE:{t8(this,e);break}case z.IN_TEMPLATE:{i8(this,e);break}case z.AFTER_BODY:{gE(this,e);break}case z.IN_FRAMESET:{s8(this,e);break}case z.AFTER_FRAMESET:{l8(this,e);break}case z.AFTER_AFTER_BODY:{Jc(this,e);break}}}onEof(e){switch(this.insertionMode){case z.INITIAL:{lo(this,e);break}case z.BEFORE_HTML:{rl(this,e);break}case z.BEFORE_HEAD:{sl(this,e);break}case z.IN_HEAD:{ol(this,e);break}case z.IN_HEAD_NO_SCRIPT:{ll(this,e);break}case z.AFTER_HEAD:{cl(this,e);break}case z.IN_BODY:case z.IN_TABLE:case z.IN_CAPTION:case z.IN_COLUMN_GROUP:case z.IN_TABLE_BODY:case z.IN_ROW:case z.IN_CELL:case z.IN_SELECT:case z.IN_SELECT_IN_TABLE:{lE(this,e);break}case z.TEXT:{HF(this,e);break}case z.IN_TABLE_TEXT:{co(this,e);break}case z.IN_TEMPLATE:{pE(this,e);break}case z.AFTER_BODY:case z.IN_FRAMESET:case z.AFTER_FRAMESET:case z.AFTER_AFTER_BODY:case z.AFTER_AFTER_FRAMESET:{Fg(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===D.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case z.IN_HEAD:case z.IN_HEAD_NO_SCRIPT:case z.AFTER_HEAD:case z.TEXT:case z.IN_COLUMN_GROUP:case z.IN_SELECT:case z.IN_SELECT_IN_TABLE:case z.IN_FRAMESET:case z.AFTER_FRAMESET:{this._insertCharacters(e);break}case z.IN_BODY:case z.IN_CAPTION:case z.IN_CELL:case z.IN_TEMPLATE:case z.AFTER_BODY:case z.AFTER_AFTER_BODY:case z.AFTER_AFTER_FRAMESET:{iE(this,e);break}case z.IN_TABLE:case z.IN_TABLE_BODY:case z.IN_ROW:{$d(this,e);break}case z.IN_TABLE_TEXT:{cE(this,e);break}}}}function D4(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):oE(t,e),n}function B4(t,e){let n=null,a=t.openElements.stackTop;for(;a>=0;a--){const r=t.openElements.items[a];if(r===e.element)break;t._isSpecialElement(r,t.openElements.tagIDs[a])&&(n=r)}return n||(t.openElements.shortenToLength(Math.max(a,0)),t.activeFormattingElements.removeEntry(e)),n}function F4(t,e,n){let a=e,r=t.openElements.getCommonAncestor(e);for(let s=0,o=r;o!==n;s++,o=r){r=t.openElements.getCommonAncestor(o);const l=t.activeFormattingElements.getElementEntry(o),c=l&&s>=R4;!l||c?(c&&t.activeFormattingElements.removeEntry(l),t.openElements.remove(o)):(o=H4(t,l),a===e&&(t.activeFormattingElements.bookmark=l),t.treeAdapter.detachNode(a),t.treeAdapter.appendChild(o,a),a=o)}return a}function H4(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),a=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,a),e.element=a,a}function q4(t,e,n){const a=t.treeAdapter.getTagName(e),r=qs(a);if(t._isElementCausesFosterParenting(r))t._fosterParentElement(n);else{const s=t.treeAdapter.getNamespaceURI(e);r===y.TEMPLATE&&s===ne.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function $4(t,e,n){const a=t.treeAdapter.getNamespaceURI(n.element),{token:r}=n,s=t.treeAdapter.createElement(r.tagName,a,r.attrs);t._adoptNodes(e,s),t.treeAdapter.appendChild(e,s),t.activeFormattingElements.insertElementAfterBookmark(s,r),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,s,r.tagID)}function Bg(t,e){for(let n=0;n<M4;n++){const a=D4(t,e);if(!a)break;const r=B4(t,a);if(!r)break;t.activeFormattingElements.bookmark=a;const s=F4(t,r,a.element),o=t.openElements.getCommonAncestor(a.element);t.treeAdapter.detachNode(s),o&&q4(t,o,s),$4(t,r,a)}}function tp(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function z4(t,e){t._appendCommentNode(e,t.openElements.items[0])}function W4(t,e){t._appendCommentNode(e,t.document)}function Fg(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let a=t.openElements.stackTop;a>=n;a--)t._setEndLocation(t.openElements.items[a],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const a=t.openElements.items[0],r=t.treeAdapter.getNodeSourceCodeLocation(a);if(r&&!r.endTag&&(t._setEndLocation(a,e),t.openElements.stackTop>=1)){const s=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&t._setEndLocation(s,e)}}}}function U4(t,e){t._setDocumentType(e);const n=e.forceQuirks?Jn.QUIRKS:_4(e);w4(e)||t._err(e,Z.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=z.BEFORE_HTML}function lo(t,e){t._err(e,Z.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Jn.QUIRKS),t.insertionMode=z.BEFORE_HTML,t._processToken(e)}function V4(t,e){e.tagID===y.HTML?(t._insertElement(e,ne.HTML),t.insertionMode=z.BEFORE_HEAD):rl(t,e)}function Y4(t,e){const n=e.tagID;(n===y.HTML||n===y.HEAD||n===y.BODY||n===y.BR)&&rl(t,e)}function rl(t,e){t._insertFakeRootElement(),t.insertionMode=z.BEFORE_HEAD,t._processToken(e)}function G4(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.HEAD:{t._insertElement(e,ne.HTML),t.headElement=t.openElements.current,t.insertionMode=z.IN_HEAD;break}default:sl(t,e)}}function X4(t,e){const n=e.tagID;n===y.HEAD||n===y.BODY||n===y.HTML||n===y.BR?sl(t,e):t._err(e,Z.endTagWithoutMatchingOpenElement)}function sl(t,e){t._insertFakeElement(Q.HEAD,y.HEAD),t.headElement=t.openElements.current,t.insertionMode=z.IN_HEAD,t._processToken(e)}function bi(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.BASE:case y.BASEFONT:case y.BGSOUND:case y.LINK:case y.META:{t._appendElement(e,ne.HTML),e.ackSelfClosing=!0;break}case y.TITLE:{t._switchToTextParsing(e,wt.RCDATA);break}case y.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,wt.RAWTEXT):(t._insertElement(e,ne.HTML),t.insertionMode=z.IN_HEAD_NO_SCRIPT);break}case y.NOFRAMES:case y.STYLE:{t._switchToTextParsing(e,wt.RAWTEXT);break}case y.SCRIPT:{t._switchToTextParsing(e,wt.SCRIPT_DATA);break}case y.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=z.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(z.IN_TEMPLATE);break}case y.HEAD:{t._err(e,Z.misplacedStartTagForHeadElement);break}default:ol(t,e)}}function J4(t,e){switch(e.tagID){case y.HEAD:{t.openElements.pop(),t.insertionMode=z.AFTER_HEAD;break}case y.BODY:case y.BR:case y.HTML:{ol(t,e);break}case y.TEMPLATE:{Mr(t,e);break}default:t._err(e,Z.endTagWithoutMatchingOpenElement)}}function Mr(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==y.TEMPLATE&&t._err(e,Z.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(y.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Z.endTagWithoutMatchingOpenElement)}function ol(t,e){t.openElements.pop(),t.insertionMode=z.AFTER_HEAD,t._processToken(e)}function Q4(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.BASEFONT:case y.BGSOUND:case y.HEAD:case y.LINK:case y.META:case y.NOFRAMES:case y.STYLE:{bi(t,e);break}case y.NOSCRIPT:{t._err(e,Z.nestedNoscriptInHead);break}default:ll(t,e)}}function K4(t,e){switch(e.tagID){case y.NOSCRIPT:{t.openElements.pop(),t.insertionMode=z.IN_HEAD;break}case y.BR:{ll(t,e);break}default:t._err(e,Z.endTagWithoutMatchingOpenElement)}}function ll(t,e){const n=e.type===qe.EOF?Z.openElementsLeftAfterEof:Z.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=z.IN_HEAD,t._processToken(e)}function Z4(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.BODY:{t._insertElement(e,ne.HTML),t.framesetOk=!1,t.insertionMode=z.IN_BODY;break}case y.FRAMESET:{t._insertElement(e,ne.HTML),t.insertionMode=z.IN_FRAMESET;break}case y.BASE:case y.BASEFONT:case y.BGSOUND:case y.LINK:case y.META:case y.NOFRAMES:case y.SCRIPT:case y.STYLE:case y.TEMPLATE:case y.TITLE:{t._err(e,Z.abandonedHeadElementChild),t.openElements.push(t.headElement,y.HEAD),bi(t,e),t.openElements.remove(t.headElement);break}case y.HEAD:{t._err(e,Z.misplacedStartTagForHeadElement);break}default:cl(t,e)}}function eF(t,e){switch(e.tagID){case y.BODY:case y.HTML:case y.BR:{cl(t,e);break}case y.TEMPLATE:{Mr(t,e);break}default:t._err(e,Z.endTagWithoutMatchingOpenElement)}}function cl(t,e){t._insertFakeElement(Q.BODY,y.BODY),t.insertionMode=z.IN_BODY,vu(t,e)}function vu(t,e){switch(e.type){case qe.CHARACTER:{aE(t,e);break}case qe.WHITESPACE_CHARACTER:{iE(t,e);break}case qe.COMMENT:{tp(t,e);break}case qe.START_TAG:{sn(t,e);break}case qe.END_TAG:{ju(t,e);break}case qe.EOF:{lE(t,e);break}}}function iE(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function aE(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function tF(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function nF(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function iF(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_FRAMESET)}function aF(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML)}function rF(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&ep.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,ne.HTML)}function sF(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function oF(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML),n||(t.formElement=t.openElements.current))}function lF(t,e){t.framesetOk=!1;const n=e.tagID;for(let a=t.openElements.stackTop;a>=0;a--){const r=t.openElements.tagIDs[a];if(n===y.LI&&r===y.LI||(n===y.DD||n===y.DT)&&(r===y.DD||r===y.DT)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.popUntilTagNamePopped(r);break}if(r!==y.ADDRESS&&r!==y.DIV&&r!==y.P&&t._isSpecialElement(t.openElements.items[a],r))break}t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML)}function cF(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML),t.tokenizer.state=wt.PLAINTEXT}function hF(t,e){t.openElements.hasInScope(y.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(y.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML),t.framesetOk=!1}function uF(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(Q.A);n&&(Bg(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function dF(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function mF(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(y.NOBR)&&(Bg(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,ne.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function fF(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function pF(t,e){t.treeAdapter.getDocumentMode(t.document)!==Jn.QUIRKS&&t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._insertElement(e,ne.HTML),t.framesetOk=!1,t.insertionMode=z.IN_TABLE}function rE(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ne.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function sE(t){const e=Gk(t,gr.TYPE);return e!=null&&e.toLowerCase()===O4}function gF(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,ne.HTML),sE(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function xF(t,e){t._appendElement(e,ne.HTML),e.ackSelfClosing=!0}function yF(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._appendElement(e,ne.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function bF(t,e){e.tagName=Q.IMG,e.tagID=y.IMG,rE(t,e)}function wF(t,e){t._insertElement(e,ne.HTML),t.skipNextNewLine=!0,t.tokenizer.state=wt.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=z.TEXT}function _F(t,e){t.openElements.hasInButtonScope(y.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,wt.RAWTEXT)}function vF(t,e){t.framesetOk=!1,t._switchToTextParsing(e,wt.RAWTEXT)}function Q0(t,e){t._switchToTextParsing(e,wt.RAWTEXT)}function jF(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===z.IN_TABLE||t.insertionMode===z.IN_CAPTION||t.insertionMode===z.IN_TABLE_BODY||t.insertionMode===z.IN_ROW||t.insertionMode===z.IN_CELL?z.IN_SELECT_IN_TABLE:z.IN_SELECT}function TF(t,e){t.openElements.currentTagId===y.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML)}function kF(t,e){t.openElements.hasInScope(y.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,ne.HTML)}function EF(t,e){t.openElements.hasInScope(y.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(y.RTC),t._insertElement(e,ne.HTML)}function SF(t,e){t._reconstructActiveFormattingElements(),eE(e),Dg(e),e.selfClosing?t._appendElement(e,ne.MATHML):t._insertElement(e,ne.MATHML),e.ackSelfClosing=!0}function CF(t,e){t._reconstructActiveFormattingElements(),tE(e),Dg(e),e.selfClosing?t._appendElement(e,ne.SVG):t._insertElement(e,ne.SVG),e.ackSelfClosing=!0}function K0(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,ne.HTML)}function sn(t,e){switch(e.tagID){case y.I:case y.S:case y.B:case y.U:case y.EM:case y.TT:case y.BIG:case y.CODE:case y.FONT:case y.SMALL:case y.STRIKE:case y.STRONG:{dF(t,e);break}case y.A:{uF(t,e);break}case y.H1:case y.H2:case y.H3:case y.H4:case y.H5:case y.H6:{rF(t,e);break}case y.P:case y.DL:case y.OL:case y.UL:case y.DIV:case y.DIR:case y.NAV:case y.MAIN:case y.MENU:case y.ASIDE:case y.CENTER:case y.FIGURE:case y.FOOTER:case y.HEADER:case y.HGROUP:case y.DIALOG:case y.DETAILS:case y.ADDRESS:case y.ARTICLE:case y.SEARCH:case y.SECTION:case y.SUMMARY:case y.FIELDSET:case y.BLOCKQUOTE:case y.FIGCAPTION:{aF(t,e);break}case y.LI:case y.DD:case y.DT:{lF(t,e);break}case y.BR:case y.IMG:case y.WBR:case y.AREA:case y.EMBED:case y.KEYGEN:{rE(t,e);break}case y.HR:{yF(t,e);break}case y.RB:case y.RTC:{kF(t,e);break}case y.RT:case y.RP:{EF(t,e);break}case y.PRE:case y.LISTING:{sF(t,e);break}case y.XMP:{_F(t,e);break}case y.SVG:{CF(t,e);break}case y.HTML:{tF(t,e);break}case y.BASE:case y.LINK:case y.META:case y.STYLE:case y.TITLE:case y.SCRIPT:case y.BGSOUND:case y.BASEFONT:case y.TEMPLATE:{bi(t,e);break}case y.BODY:{nF(t,e);break}case y.FORM:{oF(t,e);break}case y.NOBR:{mF(t,e);break}case y.MATH:{SF(t,e);break}case y.TABLE:{pF(t,e);break}case y.INPUT:{gF(t,e);break}case y.PARAM:case y.TRACK:case y.SOURCE:{xF(t,e);break}case y.IMAGE:{bF(t,e);break}case y.BUTTON:{hF(t,e);break}case y.APPLET:case y.OBJECT:case y.MARQUEE:{fF(t,e);break}case y.IFRAME:{vF(t,e);break}case y.SELECT:{jF(t,e);break}case y.OPTION:case y.OPTGROUP:{TF(t,e);break}case y.NOEMBED:case y.NOFRAMES:{Q0(t,e);break}case y.FRAMESET:{iF(t,e);break}case y.TEXTAREA:{wF(t,e);break}case y.NOSCRIPT:{t.options.scriptingEnabled?Q0(t,e):K0(t,e);break}case y.PLAINTEXT:{cF(t,e);break}case y.COL:case y.TH:case y.TD:case y.TR:case y.HEAD:case y.FRAME:case y.TBODY:case y.TFOOT:case y.THEAD:case y.CAPTION:case y.COLGROUP:break;default:K0(t,e)}}function AF(t,e){if(t.openElements.hasInScope(y.BODY)&&(t.insertionMode=z.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function NF(t,e){t.openElements.hasInScope(y.BODY)&&(t.insertionMode=z.AFTER_BODY,gE(t,e))}function IF(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function LF(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(y.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(y.FORM):n&&t.openElements.remove(n))}function OF(t){t.openElements.hasInButtonScope(y.P)||t._insertFakeElement(Q.P,y.P),t._closePElement()}function MF(t){t.openElements.hasInListItemScope(y.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(y.LI),t.openElements.popUntilTagNamePopped(y.LI))}function RF(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function PF(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function DF(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function BF(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(Q.BR,y.BR),t.openElements.pop(),t.framesetOk=!1}function oE(t,e){const n=e.tagName,a=e.tagID;for(let r=t.openElements.stackTop;r>0;r--){const s=t.openElements.items[r],o=t.openElements.tagIDs[r];if(a===o&&(a!==y.UNKNOWN||t.treeAdapter.getTagName(s)===n)){t.openElements.generateImpliedEndTagsWithExclusion(a),t.openElements.stackTop>=r&&t.openElements.shortenToLength(r);break}if(t._isSpecialElement(s,o))break}}function ju(t,e){switch(e.tagID){case y.A:case y.B:case y.I:case y.S:case y.U:case y.EM:case y.TT:case y.BIG:case y.CODE:case y.FONT:case y.NOBR:case y.SMALL:case y.STRIKE:case y.STRONG:{Bg(t,e);break}case y.P:{OF(t);break}case y.DL:case y.UL:case y.OL:case y.DIR:case y.DIV:case y.NAV:case y.PRE:case y.MAIN:case y.MENU:case y.ASIDE:case y.BUTTON:case y.CENTER:case y.FIGURE:case y.FOOTER:case y.HEADER:case y.HGROUP:case y.DIALOG:case y.ADDRESS:case y.ARTICLE:case y.DETAILS:case y.SEARCH:case y.SECTION:case y.SUMMARY:case y.LISTING:case y.FIELDSET:case y.BLOCKQUOTE:case y.FIGCAPTION:{IF(t,e);break}case y.LI:{MF(t);break}case y.DD:case y.DT:{RF(t,e);break}case y.H1:case y.H2:case y.H3:case y.H4:case y.H5:case y.H6:{PF(t);break}case y.BR:{BF(t);break}case y.BODY:{AF(t,e);break}case y.HTML:{NF(t,e);break}case y.FORM:{LF(t);break}case y.APPLET:case y.OBJECT:case y.MARQUEE:{DF(t,e);break}case y.TEMPLATE:{Mr(t,e);break}default:oE(t,e)}}function lE(t,e){t.tmplInsertionModeStack.length>0?pE(t,e):Fg(t,e)}function FF(t,e){var n;e.tagID===y.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function HF(t,e){t._err(e,Z.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function $d(t,e){if(t.openElements.currentTagId!==void 0&&nE.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=z.IN_TABLE_TEXT,e.type){case qe.CHARACTER:{hE(t,e);break}case qe.WHITESPACE_CHARACTER:{cE(t,e);break}}else Gl(t,e)}function qF(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_CAPTION}function $F(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_COLUMN_GROUP}function zF(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Q.COLGROUP,y.COLGROUP),t.insertionMode=z.IN_COLUMN_GROUP,Hg(t,e)}function WF(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_TABLE_BODY}function UF(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Q.TBODY,y.TBODY),t.insertionMode=z.IN_TABLE_BODY,Tu(t,e)}function VF(t,e){t.openElements.hasInTableScope(y.TABLE)&&(t.openElements.popUntilTagNamePopped(y.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function YF(t,e){sE(e)?t._appendElement(e,ne.HTML):Gl(t,e),e.ackSelfClosing=!0}function GF(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,ne.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function ws(t,e){switch(e.tagID){case y.TD:case y.TH:case y.TR:{UF(t,e);break}case y.STYLE:case y.SCRIPT:case y.TEMPLATE:{bi(t,e);break}case y.COL:{zF(t,e);break}case y.FORM:{GF(t,e);break}case y.TABLE:{VF(t,e);break}case y.TBODY:case y.TFOOT:case y.THEAD:{WF(t,e);break}case y.INPUT:{YF(t,e);break}case y.CAPTION:{qF(t,e);break}case y.COLGROUP:{$F(t,e);break}default:Gl(t,e)}}function Tl(t,e){switch(e.tagID){case y.TABLE:{t.openElements.hasInTableScope(y.TABLE)&&(t.openElements.popUntilTagNamePopped(y.TABLE),t._resetInsertionMode());break}case y.TEMPLATE:{Mr(t,e);break}case y.BODY:case y.CAPTION:case y.COL:case y.COLGROUP:case y.HTML:case y.TBODY:case y.TD:case y.TFOOT:case y.TH:case y.THEAD:case y.TR:break;default:Gl(t,e)}}function Gl(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,vu(t,e),t.fosterParentingEnabled=n}function cE(t,e){t.pendingCharacterTokens.push(e)}function hE(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function co(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Gl(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const uE=new Set([y.CAPTION,y.COL,y.COLGROUP,y.TBODY,y.TD,y.TFOOT,y.TH,y.THEAD,y.TR]);function XF(t,e){const n=e.tagID;uE.has(n)?t.openElements.hasInTableScope(y.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(y.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=z.IN_TABLE,ws(t,e)):sn(t,e)}function JF(t,e){const n=e.tagID;switch(n){case y.CAPTION:case y.TABLE:{t.openElements.hasInTableScope(y.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(y.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=z.IN_TABLE,n===y.TABLE&&Tl(t,e));break}case y.BODY:case y.COL:case y.COLGROUP:case y.HTML:case y.TBODY:case y.TD:case y.TFOOT:case y.TH:case y.THEAD:case y.TR:break;default:ju(t,e)}}function Hg(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.COL:{t._appendElement(e,ne.HTML),e.ackSelfClosing=!0;break}case y.TEMPLATE:{bi(t,e);break}default:bh(t,e)}}function QF(t,e){switch(e.tagID){case y.COLGROUP:{t.openElements.currentTagId===y.COLGROUP&&(t.openElements.pop(),t.insertionMode=z.IN_TABLE);break}case y.TEMPLATE:{Mr(t,e);break}case y.COL:break;default:bh(t,e)}}function bh(t,e){t.openElements.currentTagId===y.COLGROUP&&(t.openElements.pop(),t.insertionMode=z.IN_TABLE,t._processToken(e))}function Tu(t,e){switch(e.tagID){case y.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_ROW;break}case y.TH:case y.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(Q.TR,y.TR),t.insertionMode=z.IN_ROW,ku(t,e);break}case y.CAPTION:case y.COL:case y.COLGROUP:case y.TBODY:case y.TFOOT:case y.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE,ws(t,e));break}default:ws(t,e)}}function np(t,e){const n=e.tagID;switch(e.tagID){case y.TBODY:case y.TFOOT:case y.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE);break}case y.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE,Tl(t,e));break}case y.BODY:case y.CAPTION:case y.COL:case y.COLGROUP:case y.HTML:case y.TD:case y.TH:case y.TR:break;default:Tl(t,e)}}function ku(t,e){switch(e.tagID){case y.TH:case y.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,ne.HTML),t.insertionMode=z.IN_CELL,t.activeFormattingElements.insertMarker();break}case y.CAPTION:case y.COL:case y.COLGROUP:case y.TBODY:case y.TFOOT:case y.THEAD:case y.TR:{t.openElements.hasInTableScope(y.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE_BODY,Tu(t,e));break}default:ws(t,e)}}function dE(t,e){switch(e.tagID){case y.TR:{t.openElements.hasInTableScope(y.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE_BODY);break}case y.TABLE:{t.openElements.hasInTableScope(y.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE_BODY,np(t,e));break}case y.TBODY:case y.TFOOT:case y.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(y.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=z.IN_TABLE_BODY,np(t,e));break}case y.BODY:case y.CAPTION:case y.COL:case y.COLGROUP:case y.HTML:case y.TD:case y.TH:break;default:Tl(t,e)}}function KF(t,e){const n=e.tagID;uE.has(n)?(t.openElements.hasInTableScope(y.TD)||t.openElements.hasInTableScope(y.TH))&&(t._closeTableCell(),ku(t,e)):sn(t,e)}function ZF(t,e){const n=e.tagID;switch(n){case y.TD:case y.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=z.IN_ROW);break}case y.TABLE:case y.TBODY:case y.TFOOT:case y.THEAD:case y.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),dE(t,e));break}case y.BODY:case y.CAPTION:case y.COL:case y.COLGROUP:case y.HTML:break;default:ju(t,e)}}function mE(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.OPTION:{t.openElements.currentTagId===y.OPTION&&t.openElements.pop(),t._insertElement(e,ne.HTML);break}case y.OPTGROUP:{t.openElements.currentTagId===y.OPTION&&t.openElements.pop(),t.openElements.currentTagId===y.OPTGROUP&&t.openElements.pop(),t._insertElement(e,ne.HTML);break}case y.HR:{t.openElements.currentTagId===y.OPTION&&t.openElements.pop(),t.openElements.currentTagId===y.OPTGROUP&&t.openElements.pop(),t._appendElement(e,ne.HTML),e.ackSelfClosing=!0;break}case y.INPUT:case y.KEYGEN:case y.TEXTAREA:case y.SELECT:{t.openElements.hasInSelectScope(y.SELECT)&&(t.openElements.popUntilTagNamePopped(y.SELECT),t._resetInsertionMode(),e.tagID!==y.SELECT&&t._processStartTag(e));break}case y.SCRIPT:case y.TEMPLATE:{bi(t,e);break}}}function fE(t,e){switch(e.tagID){case y.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===y.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===y.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===y.OPTGROUP&&t.openElements.pop();break}case y.OPTION:{t.openElements.currentTagId===y.OPTION&&t.openElements.pop();break}case y.SELECT:{t.openElements.hasInSelectScope(y.SELECT)&&(t.openElements.popUntilTagNamePopped(y.SELECT),t._resetInsertionMode());break}case y.TEMPLATE:{Mr(t,e);break}}}function e8(t,e){const n=e.tagID;n===y.CAPTION||n===y.TABLE||n===y.TBODY||n===y.TFOOT||n===y.THEAD||n===y.TR||n===y.TD||n===y.TH?(t.openElements.popUntilTagNamePopped(y.SELECT),t._resetInsertionMode(),t._processStartTag(e)):mE(t,e)}function t8(t,e){const n=e.tagID;n===y.CAPTION||n===y.TABLE||n===y.TBODY||n===y.TFOOT||n===y.THEAD||n===y.TR||n===y.TD||n===y.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(y.SELECT),t._resetInsertionMode(),t.onEndTag(e)):fE(t,e)}function n8(t,e){switch(e.tagID){case y.BASE:case y.BASEFONT:case y.BGSOUND:case y.LINK:case y.META:case y.NOFRAMES:case y.SCRIPT:case y.STYLE:case y.TEMPLATE:case y.TITLE:{bi(t,e);break}case y.CAPTION:case y.COLGROUP:case y.TBODY:case y.TFOOT:case y.THEAD:{t.tmplInsertionModeStack[0]=z.IN_TABLE,t.insertionMode=z.IN_TABLE,ws(t,e);break}case y.COL:{t.tmplInsertionModeStack[0]=z.IN_COLUMN_GROUP,t.insertionMode=z.IN_COLUMN_GROUP,Hg(t,e);break}case y.TR:{t.tmplInsertionModeStack[0]=z.IN_TABLE_BODY,t.insertionMode=z.IN_TABLE_BODY,Tu(t,e);break}case y.TD:case y.TH:{t.tmplInsertionModeStack[0]=z.IN_ROW,t.insertionMode=z.IN_ROW,ku(t,e);break}default:t.tmplInsertionModeStack[0]=z.IN_BODY,t.insertionMode=z.IN_BODY,sn(t,e)}}function i8(t,e){e.tagID===y.TEMPLATE&&Mr(t,e)}function pE(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(y.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):Fg(t,e)}function a8(t,e){e.tagID===y.HTML?sn(t,e):wh(t,e)}function gE(t,e){var n;if(e.tagID===y.HTML){if(t.fragmentContext||(t.insertionMode=z.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===y.HTML){t._setEndLocation(t.openElements.items[0],e);const a=t.openElements.items[1];a&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(a))===null||n===void 0)&&n.endTag)&&t._setEndLocation(a,e)}}else wh(t,e)}function wh(t,e){t.insertionMode=z.IN_BODY,vu(t,e)}function r8(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.FRAMESET:{t._insertElement(e,ne.HTML);break}case y.FRAME:{t._appendElement(e,ne.HTML),e.ackSelfClosing=!0;break}case y.NOFRAMES:{bi(t,e);break}}}function s8(t,e){e.tagID===y.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==y.FRAMESET&&(t.insertionMode=z.AFTER_FRAMESET))}function o8(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.NOFRAMES:{bi(t,e);break}}}function l8(t,e){e.tagID===y.HTML&&(t.insertionMode=z.AFTER_AFTER_FRAMESET)}function c8(t,e){e.tagID===y.HTML?sn(t,e):Jc(t,e)}function Jc(t,e){t.insertionMode=z.IN_BODY,vu(t,e)}function h8(t,e){switch(e.tagID){case y.HTML:{sn(t,e);break}case y.NOFRAMES:{bi(t,e);break}}}function u8(t,e){e.chars=ft,t._insertCharacters(e)}function d8(t,e){t._insertCharacters(e),t.framesetOk=!1}function xE(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==ne.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function m8(t,e){if(C4(e))xE(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),a=t.treeAdapter.getNamespaceURI(n);a===ne.MATHML?eE(e):a===ne.SVG&&(A4(e),tE(e)),Dg(e),e.selfClosing?t._appendElement(e,a):t._insertElement(e,a),e.ackSelfClosing=!0}}function f8(t,e){if(e.tagID===y.P||e.tagID===y.BR){xE(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const a=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(a)===ne.HTML){t._endTagOutsideForeignContent(e);break}const r=t.treeAdapter.getTagName(a);if(r.toLowerCase()===e.tagName){e.tagName=r,t.openElements.shortenToLength(n);break}}}Q.AREA,Q.BASE,Q.BASEFONT,Q.BGSOUND,Q.BR,Q.COL,Q.EMBED,Q.FRAME,Q.HR,Q.IMG,Q.INPUT,Q.KEYGEN,Q.LINK,Q.META,Q.PARAM,Q.SOURCE,Q.TRACK,Q.WBR;const p8=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,g8=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Z0={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function yE(t,e){const n=E8(t),a=dk("type",{handlers:{root:x8,element:y8,text:b8,comment:wE,doctype:w8,raw:v8},unknown:j8}),r={parser:n?new J0(Z0):J0.getFragmentParser(void 0,Z0),handle(l){a(l,r)},stitches:!1,options:e||{}};a(t,r),$s(r,Bi());const s=n?r.parser.document:r.parser.getFragment(),o=x5(s,{file:r.options.file});return r.stitches&&_u(o,"comment",function(l,c,h){const u=l;if(u.value.stitch&&h&&c!==void 0){const d=h.children;return d[c]=u.value.stitch,c}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function bE(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function x8(t,e){bE(t.children,e)}function y8(t,e){T8(t,e),bE(t.children,e),k8(t,e)}function b8(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:qe.CHARACTER,chars:t.value,location:Xl(t)};$s(e,Bi(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function w8(t,e){const n={type:qe.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Xl(t)};$s(e,Bi(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function _8(t,e){e.stitches=!0;const n=S8(t);if("children"in t&&"children"in n){const a=yE({type:"root",children:t.children},e.options);n.children=a.children}wE({type:"comment",value:{stitch:n}},e)}function wE(t,e){const n=t.value,a={type:qe.COMMENT,data:n,location:Xl(t)};$s(e,Bi(t)),e.parser.currentToken=a,e.parser._processToken(e.parser.currentToken)}function v8(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,_E(e,Bi(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(p8,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function j8(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))_8(n,e);else{let a="";throw g8.has(n.type)&&(a=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+a)}}function $s(t,e){_E(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=wt.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function _E(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function T8(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===wt.PLAINTEXT)return;$s(e,Bi(t));const a=e.parser.openElements.current;let r="namespaceURI"in a?a.namespaceURI:or.html;r===or.html&&n==="svg"&&(r=or.svg);const s=L5({...t,children:[]},{space:r===or.svg?"svg":"html"}),o={type:qe.START_TAG,tagName:n,tagID:qs(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Xl(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function k8(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&H5.includes(n)||e.parser.tokenizer.state===wt.PLAINTEXT)return;$s(e,pu(t));const a={type:qe.END_TAG,tagName:n,tagID:qs(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Xl(t)};e.parser.currentToken=a,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===wt.RCDATA||e.parser.tokenizer.state===wt.RAWTEXT||e.parser.tokenizer.state===wt.SCRIPT_DATA)&&(e.parser.tokenizer.state=wt.DATA)}function E8(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Xl(t){const e=Bi(t)||{line:void 0,column:void 0,offset:void 0},n=pu(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function S8(t){return"children"in t?bs({...t,children:[]}):bs(t)}function C8(t){return function(e,n){return yE(e,{...t,file:n})}}function A8(t){const[e,n]=pe.useState(!1),[a,r]=pe.useState(null),[s,o]=pe.useState(t),{isConnected:l}=CO(),c=AO(),h=qO("0.0002"),{writeContract:u,isPending:d,data:m,error:f}=PO(),{isLoading:p,isSuccess:g}=DO({hash:m});pe.useEffect(()=>{if(typeof window<"u"){const P=(window.location.origin+t).replace(/\/+$/,"");o(P)}},[t]);const x=MO(),b=c===x.id,{data:w,error:k,isPending:E,refetch:v}=BO({...qy,functionName:"getLikesForUrl",args:[s],chainId:x.id}),S=pe.useCallback(async()=>{if(r(null),!s){r("URL ist erforderlich");return}if(!b){r(`Bitte wechsle zum ${x.name} Netzwerk`);return}n(!0),u({...qy,functionName:"donate",args:[s],value:h})},[s,b,x.name,u,h]);pe.useEffect(()=>{g&&(NO("blog-support-success",{url:s}),n(!1),r(null),setTimeout(()=>{v()},2e3)),f&&(n(!1),r(f?.message||"Transaktion fehlgeschlagen"))},[g,f,v,s]);const L=a||(!b&&l?`Bitte wechsle zum ${x.name} Netzwerk`:null);return{supportCount:w?.toString()||"0",isLoading:e||d||p,isSuccess:g,errorMessage:L,isConnected:l,isReadPending:E,readError:k,handleSupport:S}}function N8({publishingDate:t,showSupport:e=!1,reactionCount:n,className:a}){const{trackEvent:r}=IO(),o=jT().urlPathname,{supportCount:l,isLoading:c,isSuccess:h,errorMessage:u,isConnected:d,handleSupport:m,isReadPending:f,readError:p}=A8(e?o:""),g=v=>{try{return new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return v}},x=v=>{v.preventDefault(),r("blog-support-click",{variant:"inline",currentSupports:parseInt(l,10),readingProgress:void 0,isConnected:d}),d&&m()},b=()=>{r("blog-support-button-hover",{variant:"inline",currentSupports:parseInt(l,10),readingProgress:void 0,isConnected:d})},w=()=>{if(!e)return null;if(f)return"☕ Loading...";if(p)return"☕ Error";const v=parseInt(l)||0,S=v===1?"supporter":"supporters";return i.jsx("div",{onMouseEnter:b,className:io.supportWrapper,children:i.jsx("button",{onClick:x,disabled:c||!d,className:io.supportButton,title:u||(d?"Support this content":"Connect wallet to support"),children:c?"☕ Supporting...":h?`★ ${v} ${S}`:`☕ ${v} ${S}`})})},k=()=>{if(n===void 0||n===0)return null;const v=n===1?"reaction":"reactions";return i.jsxs("span",{className:io.reactions,title:"Likes, reposts, and replies from the web",children:["💬 ",n," ",v]})},E=[t&&g(t),k(),w()].filter(Boolean);return E.length===0?null:i.jsx("div",{className:`${io.container} ${a||""}`,children:E.map((v,S)=>i.jsxs(pe.Fragment,{children:[S>0&&i.jsx("span",{className:io.separator,children:"•"}),v]},S))})}function I8(t,e=100){const n=t.match(/Prompt:\s*(.+?)(?:\n|$)/i);if(n&&n[1]){const r=n[1].trim();return r.length>e?`${r.substring(0,e)}...`:r}const a=t.substring(0,e);return a.length<t.length?`${a}...`:a}function vE({tokenId:t}){const[e,n]=pe.useState(!0),[a,r]=pe.useState(null),[s,o]=pe.useState(null),[l,c]=pe.useState(null),[h,u]=pe.useState(null),d=g=>g?I8(g,60):"",m=()=>{const g=d(l);return g?`Article Illustration: ${g}`:s?`Article Illustration: ${s}`:`Article Illustration: NFT #${t}`},f=RO(),p=async g=>{try{if(g.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",g),null;const x=await fetch(g);if(!x.ok)throw new Error(`Failed to fetch metadata: ${x.status}`);return await x.json()}catch(x){return console.error("Error fetching NFT metadata:",x),null}};return pe.useEffect(()=>{(async()=>{try{n(!0),u(null);const b=await f.readContract({address:$y.address,abi:$y.abi,functionName:"tokenURI",args:[BigInt(t)]}),w=await p(b);w&&(r(w.image||null),o(w.name||null),c(w.description||null)),n(!1)}catch(x){console.error(`Error loading NFT ${t}:`,x),u(`Failed to load NFT #${t}`),n(!1)}})()},[t,f]),e?i.jsx("div",{className:ri.container,children:i.jsxs("div",{className:ri.loading,children:[i.jsx("div",{className:ri.spinner}),i.jsx("p",{className:ri.loadingText,children:"Loading..."})]})}):h||!a?i.jsx("div",{className:ri.container,children:i.jsxs("div",{className:ri.placeholder,children:[i.jsxs("p",{className:ri.placeholderText,children:["NFT #",t]}),i.jsx("p",{className:ri.errorText,children:"Image unavailable"})]})}):i.jsxs("div",{className:ri.container,children:[i.jsx("img",{src:a,alt:s||`NFT #${t}`,className:`u-photo ${ri.image}`}),i.jsx("p",{className:ri.caption,children:m()})]})}const L8={publishing_date:"2025-01-03",title:"Ideas behind the blog stack",category:"webdev",description:"I share my journey from scattered notes to a unified blog using React and Vike. Modern web tech offers speed, simplicity, and full version control over traditional solutions."};function eb(t){const e={a:"a",blockquote:"blockquote",em:"em",p:"p",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"Over the last few years I kept writing notes and code in all kind of different ways. Sometimes I would use Wordpress, personal notes, markdown or Jupyter notebooks. They get saved in some repo and there you go. But these days I would like to bring them slowly together into some more common structure, i.e. on one common website."}),`
`,i.jsxs(e.p,{children:["My rather heavy reliance on Jupyter notebooks and markdown really mostly ruled out Wordpress. I also really like the ideas behind static site generators. They are simple, fast and can be version controlled. Then I had to choose the appropiate stack. The first logical idea would have been ",i.jsx(e.a,{href:"https://squidfunk.github.io/mkdocs-material/",children:"mkdocs-material"}),". I have made great experiences with it in the past. It is super simple to set up, very configurable and it looks great. However, I recently started to have a deeper look into proper web tech of the type of React and it is simply sooo much more natural to work with those components etc."]}),`
`,i.jsxs(e.p,{children:["Having settled on ",i.jsx(e.em,{children:"React"}),", I first thought that it is totally enough to work with ",i.jsx(e.a,{href:"https://create-react-app.dev/",children:"create-react-app"}),". However, you soon realize that there have been no releases over the last few years and that the project is not really maintained anymore. A cute little solution was then ",i.jsx(e.a,{href:"ttps://github.com/nano-react-app/nano-react-app",children:"nano-react-app"}),". It is a super minimalistic setup and worked well as I started to play around."]}),`
`,i.jsxs(e.p,{children:["This got me far enough with a single webpage. But as I wanted to have a blog with multiple posts, I had to think about how to structure the whole thing. And this is the moment where you need some kind of routers. And this is the moment, where I had to learn what react meant with the following statement ",i.jsx(e.a,{href:"https://react.dev/learn/start-a-new-react-project",children:"on their website"}),":"]}),`
`,i.jsxs(e.blockquote,{children:[`
`,i.jsx(e.p,{children:"If you want to build a new app or a new website fully with React, we recommend picking one of the React-powered frameworks popular in the community."}),`
`,i.jsx(e.p,{children:"You can use React without a framework, however we’ve found that most apps and sites eventually build solutions to common problems such as code-splitting, routing, data fetching, and generating HTML. These problems are common to all UI libraries, not just React."}),`
`,i.jsx(e.p,{children:"By starting with a framework, you can get started with React quickly, and avoid essentially building your own framework later."}),`
`]}),`
`,i.jsxs(e.p,{children:["I really wanted to avoid this blow at the beginning but with the need for multiple pages I had to dive into this. After some research, I settled on ",i.jsx(e.a,{href:"https://vike.dev/",children:"vike"}),". It provides everything I need and super flexible. It also has a bit of an indie vibe, which made it more sympathic. Finally setting it up is made quite easy with ",i.jsx(e.a,{href:"https://batijs.dev",children:"create-bati"}),"."]}),`
`,i.jsx(e.p,{children:"So here we are. I have a blog stack that I can work with. It is not perfect but it is a start. I will keep you updated on how it goes."})]})}function O8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(eb,{...t})}):eb(t)}const tb=Object.freeze(Object.defineProperty({__proto__:null,default:O8,frontmatter:L8},Symbol.toStringTag,{value:"Module"})),M8={publishing_date:"2025-05-26",title:"Updates to the website",tokenID:26,category:"webdev",description:"I explore my website's evolution over 6 months, from minimal CSS to Panda CSS and Copilot refactoring. See how modern tools dramatically boost development productivity."};function nb(t){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"It has been roughly 6 months since I started this website. All in all, it is a enjoyable experience to have this super flexible stack on which I can simply play around in the way I want. So it is time to summarize the most important changes and updates on the stack over the last few months."}),`
`,i.jsx(e.h2,{children:"Panda CSS for consistent styling"}),`
`,i.jsxs(e.p,{children:["At the beginning, I kept the styling super minimalistic and just used inline css. This was ok at the beginning but by the time that I started to add the lecture notes and the image generator it become quite cumbersome to work in this way. So I started to look for a proper CSS solution. I wanted something that is simple, flexible and does not require a lot of setup. After some research, I settled on ",i.jsx(e.a,{href:"https://panda-css.com/",children:"Panda CSS"}),". It allows me to write CSS in a very JS-like way, which is very convenient. It also has a great integration with Vike and works well with the rest of the stack. All in all, there will be no looking back."]}),`
`,i.jsx(e.h2,{children:"Copilot for code refactoring"}),`
`,i.jsxs(e.p,{children:["In the middle of the refactoring, I also made my first experiences with the ",i.jsx(e.a,{href:"https://github.blog/ai-and-ml/github-copilot/agent-mode-101-all-about-github-copilots-powerful-mode/",children:"Copilot Agent Mode"}),". Previously, I had only used Copilot in the normal way, i.e. it would suggest code snippets as I was typing. However, with the Agent Mode, I can now let Copilot refactor my code in a much more comprehensive way. I only gave the following instruction:"]}),`
`,i.jsxs(e.blockquote,{children:[`
`,i.jsxs(e.p,{children:["The code within the website folder uses pandacss. However in a lot of the components and pages similiar styles are defined independently and hence not consistent. The code should have all the style definitions in a consistent way in the ",i.jsx(e.code,{children:"styles.ts"})," file."]}),`
`]}),`
`,i.jsxs(e.p,{children:["Then I let Copilot run with ",i.jsx(e.a,{href:"https://www.anthropic.com/claude/sonnet",children:"Sonnet 4"})," for about 20 minutes. Quite amazingly, it did a remarkable job involving fifteen files and hundreds of lines of code. All I had to do was a lint fix and ",i.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io/commit/8b9f37cb0ce2ef54bed23b034a40cebde72608b4",children:"that's it"}),". This really makes you wonder which projects are now possible that I put on the backburner before because they were just to long and not fun enough."]}),`
`,i.jsx(e.h2,{children:"More lecture notes"}),`
`,i.jsxs(e.p,{children:["I was now able to move a number of lecture notes into the new ",i.jsx(e.a,{href:"../quantum",children:"quantum"})," section. It was all in all a rather straightforward process. I just had to convert the jupyter notebooks to markdown and then add them to the website. With the new content it actually became clear that the file based structure of content is a bit cumbersome. Yes, I previously started a new folder on each project. However, with the blog it would feel tempting to have a single stream of files, which are later sorted by tags etc into different views."]}),`
`,i.jsx(e.h2,{children:"A quick outlook"}),`
`,i.jsx(e.p,{children:"We will see where it takes me from here but a number of things could be cool:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"An image gallery for the generator that allows to browse the images, search for them and burn them if you feel like it. Maybe even have a functionality that automatically burns the images after a certain time if you don't want to keep them explicitly ?"}),`
`,i.jsx(e.li,{children:"Introducing more tags etc to the blog to get a simpler handle on the content. Maybe I will be able to get rid of the folder structure and just have a single stream of content."}),`
`,i.jsx(e.li,{children:"On the more ambitious side, I really start to wonder if I can finally get quantum onto the blockchain. I had some thoughts on this, I think that it is possible, but I have to find the motivation to get started on it."}),`
`]})]})}function R8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(nb,{...t})}):nb(t)}const ib=Object.freeze(Object.defineProperty({__proto__:null,default:R8,frontmatter:M8},Symbol.toStringTag,{value:"Module"})),P8={publishing_date:"2025-06-18",title:"A public gallery of AI generated images",tokenID:23,category:"ai",secondaryCategory:"blockchain",description:"I create a privacy-focused AI image gallery where creators share work and collectors mint NFTs. Discover the technical details combining open-source generation with blockchain incentives."};function ab(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./11",children:"previous blog post"}),", I described how I set up an image generator that quite nicely fulfills my needs: The generator in the background is open-source, I have full cost control, I made the system easily usable to others and it is really privacy-conserving. However, I could not resist the temptation to make it easier for others to see some of the images and to try to set up small incentive systems in the form of collector NFTs. The main changes are:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"A public gallery for images that you explicitly want to share with others."}),`
`,i.jsx(e.li,{children:"The possibility to collect public images in the form of NFTs and hence support the creators."}),`
`]}),`
`,i.jsx(e.p,{children:"They are all nicely visible in the screen shot below."}),`
`,`
`,i.jsx(e.p,{children:"Let me describe here, which major changes I made and give you some of the technical details."}),`
`,i.jsx(e.h2,{children:"Listing images in the public gallery"}),`
`,i.jsxs(e.p,{children:["I really enjoy the playful approach to image generation. But a lot of them fail and I do not really want to keep or share them. Hence, it is really easy to delete them from the blockchain and they are NOT listed to the public gallery by default. However, for a few of them I would actually be quite happy to share them with others. Hence, I added a simple new attribute to the smart contract, which is called ",i.jsx(e.code,{children:"isListed"})," and set to ",i.jsx(e.code,{children:"false"})," by default. The functionality is simple:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["If this is set to ",i.jsx(e.code,{children:"true"}),", the image is listed in the public gallery."]}),`
`,i.jsxs(e.li,{children:["If it is set to ",i.jsx(e.code,{children:"false"}),", the image is not listed and can only be seen in the other tab."]}),`
`]}),`
`,i.jsxs(e.p,{children:["This is a super simple approach, which is inspired by the ",i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Robots.txt",children:"robots.txt"})," approach. It does not securely make things private, but it unlists them from some public galleries. This approach is inspired by robots.txt - just as robots.txt doesn't technically prevent access but signals to web crawlers whether content should be indexed, the ",i.jsx(e.code,{children:"isListed"})," flag signals whether an image should appear in public galleries. The data remains on the blockchain and is technically accessible, but won't be displayed in the public interface."]}),`
`,i.jsx(e.h3,{children:"The pain of upgrading smart contracts"}),`
`,i.jsxs(e.p,{children:["I had already set up the smart contract to be upgradeable with ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/writing-upgradeable",children:"OpenZeppelin"}),". However, initially I really enjoyed the work with ",i.jsx(e.a,{href:"https://hardhat.org/ignition/docs/getting-started#overview",children:"hardhat ignition"})," (a deployment tool) and ",i.jsx(e.a,{href:"https://viem.sh/",children:"viem"})," (a TypeScript library for Ethereum). So I tried to make the upgrades work with these tools for quite some time. The main issue was that Hardhat Ignition and Viem don't have built-in support for OpenZeppelin's upgrade patterns."]}),`
`,i.jsxs(e.p,{children:["In the end it never really worked out and everything became much easier when I left hardhat ignition behind and simply used the ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/1.x/overview",children:"OpenZeppelin Hardhat Upgrades plugin"}),". The OpenZeppelin Hardhat Upgrades plugin handles the complex proxy logic automatically, including storage layout validation and initialization functions."]}),`
`,i.jsx(e.p,{children:"This unfortunately means that I have to change the deployment stack for the smart contracts completely. However, Claude Sonnet has proven to be a great friend for the corresponding code. I am still not proud about it, but it works good enough for now."}),`
`,i.jsx(e.h3,{children:"Updating the website"}),`
`,i.jsxs(e.p,{children:["The updates to the ",i.jsx(e.a,{href:"/imagegen",children:"imagegen"})," website were rather straightforward (again thanks to Claude Sonnet). I introduced a new tab which shows public images to anyone on the website. The functionality is obviously a bit different from the private tab, but overall the changes were fairly minimal."]}),`
`,i.jsx(e.h2,{children:"Making images collectible"}),`
`,i.jsxs(e.p,{children:["Once I was able to list images in the public gallery, I also wanted to allow others to collect them. The logic behind the little collect button is similar to the ",i.jsx(e.a,{href:"./7",children:"support system"})," for the blogs but a bit more evolved. In the contract for the support system, I implemented a simple mapping between the supported address and the number of supporters. Once you hit the support button, a small fee is sent to a specified address and the number of supporters is increased by one. However, this does not really create a market for the supported content and is very much a donation system."]}),`
`,i.jsx(e.h3,{children:"The basic features of the collector NFT contract"}),`
`,i.jsx(e.p,{children:"In the case of the image generator, I wanted to go a step further. So I set up the system in the following fashion:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"If you hit the collect button you get to mint a new NFT, which directly links to the original NFT. However, it is not from the same contract and hence the owner of the original NFT always remains the unique owner."}),`
`,i.jsx(e.li,{children:"When you collect the NFT, all the money is transferred into the wallet of the owner of the original NFT. This sets up a money transfer from the collector to the art creator and a financial resource stream similar to the one from the support button."}),`
`,i.jsxs(e.li,{children:["However, now the collector has his own tradable copy that he could sell on ",i.jsx(e.a,{href:"https://opensea.io/",children:"opensea.io"})," if he feels like it."]}),`
`]}),`
`,i.jsx(e.h3,{children:"Introducing scarcity"}),`
`,i.jsx(e.p,{children:`The whole thing is about artwork. So you have the strong feeling that it should be more expensive to collect "popular" art than the one from an unknown street artist. However, in a standard approach of unlimited collector NFTs, a collector could never achieve a price gain because any additional supporter would simply mint another NFT and that's it.`}),`
`,i.jsx(e.p,{children:"Therefore, I decided to introduce an exponential increase in the mint price of the collector NFTs. The pricing follows an exponential progression where the price doubles with each batch of collectors:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Collectors 1-5: 0.001 ETH (base price)"}),`
`,i.jsx(e.li,{children:"Collectors 6-10: 0.002 ETH (2x base price)"}),`
`,i.jsx(e.li,{children:"Collectors 11-15: 0.004 ETH (4x base price)"}),`
`,i.jsx(e.li,{children:"Collectors 16-20: 0.008 ETH (8x base price)"}),`
`,i.jsx(e.li,{children:"Collectors 21-25: 0.016 ETH (16x base price)"}),`
`,i.jsx(e.li,{children:"Collectors 26-30: 0.032 ETH (32x base price)"}),`
`,i.jsx(e.li,{children:"And so on..."}),`
`]}),`
`,i.jsx(e.p,{children:"This means if you're the 12th collector, you pay 0.004 ETH, but if someone becomes the 27th collector later, your NFT becomes more valuable as the entry price has increased to 0.032 ETH."}),`
`,i.jsx(e.p,{children:"This can solve a number of open questions:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"There is a clear increase in the value of a collector NFT for popular art. The more collectors come in the more expensive it gets and early collectors can profit from it."}),`
`,i.jsx(e.li,{children:"The owner of the original NFT can profit from the popularity of his art in an exponential fashion. This also feels quite natural."}),`
`,i.jsx(e.li,{children:"Finally, you clearly create substantial scarcity and it will be rare to have much more than a few dozen collectors of a single image."}),`
`]}),`
`,i.jsx(e.h3,{children:"More pain with upgrades"}),`
`,i.jsxs(e.p,{children:["As I worked on the ",i.jsx(e.code,{children:"CollectorNFT"}),", I had to fix a few bugs and wanted to implement them in an upgrade. However, at that point I discovered that OpenZeppelin actually uses annotations to mark certain functions. And these annotations are really important when you work with the upgradeable plugins as they help you to secure the contract. They are not documented super well, but if you try to introduce them later on, they break the upgrades. So better introduce them early on."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"The key lesson:"})," OpenZeppelin uses special annotations like ",i.jsx(e.code,{children:"@custom:oz-upgrades-unsafe-allow"})," to mark functions that might be dangerous in upgradeable contracts. These annotations must be present from the beginning - adding them later breaks the upgrade mechanism because the plugin validates the entire contract history."]}),`
`,i.jsx(e.h2,{children:"Conclusion"}),`
`,i.jsx(e.p,{children:"It is super stimulating to work on this kind of topics as they allow me to play around with new ideas which have plenty of possibilities."}),`
`,i.jsx(e.p,{children:"This project demonstrates how blockchain technology can create sustainable creator economies for AI-generated art. The combination of public galleries, collector NFTs, and exponential pricing creates interesting dynamics that traditional platforms can't replicate."}),`
`,i.jsx(e.p,{children:"Next steps I'm considering:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Implementing royalty mechanisms for secondary sales"}),`
`,i.jsx(e.li,{children:"More robust contracts and upgrade paths"}),`
`,i.jsx(e.li,{children:"Enhancing the public gallery with search and filtering"}),`
`,i.jsx(e.li,{children:"Adding community features like comments or ratings"}),`
`]}),`
`,i.jsxs(e.p,{children:["You can try the system yourself at ",i.jsx(e.a,{href:"/imagegen",children:"imagegen"})," - I'd love to see what images you create and whether anyone finds them worth collecting. The source code for both the smart contracts and frontend is available in my ",i.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io",children:"GitHub repository"}),"."]})]})}function D8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(ab,{...t})}):ab(t)}const rb=Object.freeze(Object.defineProperty({__proto__:null,default:D8,frontmatter:P8},Symbol.toStringTag,{value:"Module"})),B8={publishing_date:"2025-11-08",title:"Democracy beyond the nation-state - What is there ?",category:"others",description:"When climate, water, and digital challenges cross borders but democracy doesn't, what's the alternative? This narrative essay compares confederation, federation, and cosmopolitan democracy through three fictional characters on a Barcelona-Tunis ferry.",tokenID:160};function sb(t){const e={a:"a",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.h2,{children:"Prologue"}),`
`,i.jsx(e.p,{children:"In the last few weeks I kept wondering quite a bit about on the possibilty of democratic governance beyond nation-states. In the current environment your passport tells you where you can vote. But what if the decisions that shape your life—your climate, your data, your economic future—are made by governments you can't vote for? This is a paradox of modern governance approaches and in this blog post I decide to dive into different models, federations, conferations and cosmopolitan democracy that attempt to solve it."}),`
`,i.jsx(e.h2,{children:"Three people, one common issue"}),`
`,i.jsx(e.p,{children:"We are in the ferry's lounge on the ferry from Barcelona to Tunis. It is 2 am in the morning, so the lounge is nearly empty — just Amara, the humming coffee machine, and two other insomniacs she hasn't noticed yet."}),`
`,i.jsx(e.p,{children:`Amara spreads her research across two tables: water level charts from the Medjerda basin, extraction data from three countries, meeting notes from Barcelona that led
nowhere. European agricultural policies, Libyan water extraction, and Algerian dam
construction all determine whether her region has sustainable water—yet she can
vote in none of these jurisdictions.`}),`
`,i.jsx(e.p,{children:"Two tables away its Sofia, a seasoned member of the EU commision. She tries to focus on her own Tunisia briefing notes. But she keeps glancing at Amara's charts—the basin maps, the extraction data, the obvious frustration. She recognizes that frustration."}),`
`,i.jsx(e.p,{children:`Near the window, Adam curses quietly at his laptop. Three different regulatory
frameworks, three incompatible requirements, one AI model. He reaches for coffee
and notices the two women surrounded by governance documents. He's not the only
one having jurisdiction problems tonight.`}),`
`,i.jsx(e.h3,{children:"Amara's confederal trap"}),`
`,i.jsxs(e.p,{children:["Amara has spent years studying transboundary water governance, trying to understand why the system fails her region. From those studies she learns that shared water resources are governed through a ",i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Confederation",children:"confederation"})," — a loose association of sovereign states that cooperate voluntarily. The United Nations water conventions, Mediterranean water partnerships, bilateral treaties: all confederations."]}),`
`,i.jsx(e.p,{children:"In a confederation, member states keep their independence but sign treaties to act together on specific topics. The key institutional feature is that states retain full sovereignty—decisions require consensus, there are no binding enforcement mechanisms, and citizens participate only through their national governments."}),`
`,i.jsx(e.p,{children:"Water governance conferences illustrate this: neighboring countries produce agreements with no binding enforcement mechanisms. Summits produce commitments, countries pursue national interests, aquifers continue depleting—and communities like Amara's keep losing water. The Mediterranean water framework set cooperative targets, but when countries exceed extraction limits, there are no penalties beyond diplomatic complaints."}),`
`,i.jsx(e.p,{children:"Amara reviews here notes. Confederations preserve sovereignty above all—unanimous voting, withdrawal rights, no binding authority. They're functionally minimal, doing only what treaties explicitly allow. States remain equal sovereigns with no hierarchy above them. And citizens like her? They participate only through national governments, never directly."}),`
`,i.jsx(e.p,{children:"Worse from a democratic perspective, confederate treaties lack binding normative foundations. They define narrow goals—mutual defense, trade coordination—without establishing universal rights. When principles appear, like the UN Declaration of Human Rights, they're aspirational, weakly enforced. Sovereignty always trumps shared values—or survival."}),`
`,i.jsx(e.p,{children:"Weak enforcement, minimal democratic participation, fragmented governance. This is why she watches the ocean rise while having no democratic recourse."}),`
`,i.jsx(e.p,{children:"Amara sighs, reorganizing her charts for the third time. She's stuck, and she knows it."}),`
`,i.jsx(e.h2,{children:"The federal model—and Sofia's experience"}),`
`,i.jsx(e.p,{children:`Sofia has been sitting two tables away, trying to work on her own briefing notes
for the Tunisia meetings. But she keeps glancing at Amara's charts—the basin maps,
the extraction data, the obvious frustration in how Amara reorganizes the same
papers repeatedly.`}),`
`,i.jsx(e.p,{children:"She recognizes that frustration. She's felt it in every EU climate negotiation."}),`
`,i.jsx(e.p,{children:'"Transboundary water governance?" Sofia asks, moving to the adjacent table.'}),`
`,i.jsx(e.p,{children:`Amara looks up, surprised someone knows what she's looking at. "The kind that
doesn't work. You're familiar with it?"`}),`
`,i.jsx(e.p,{children:`"Different domain, same problem," Sofia says. "Twenty-seven countries, climate
policy, unanimous consent required. I work for the EU."`}),`
`,i.jsx(e.h3,{children:"What is a federation?"}),`
`,i.jsxs(e.p,{children:["What Sofia knows from Brussels is that the EU represents the world's most ambitious attempt at federal governance beyond the nation-state. A ",i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Federalism",children:"federation"})," differs fundamentally from confederation: it creates binding supranational authority. Germany, the United States, and the EU all share this structure — multiple levels of government with the higher level having enforcement power."]}),`
`,i.jsx(e.p,{children:"In a federation, federal law supersedes member state law. There's a shared constitution, binding courts, and citizens vote in both national and federal elections. The EU demonstrates this: European regulations become law across all member states, the European Court of Justice can overrule national courts, and citizens elect the European Parliament directly."}),`
`,i.jsx(e.p,{children:"Sofia's daily work operates within this federal structure: EU climate regulations have legal force, the Emissions Trading System binds all members, and enforcement mechanisms exist that confederations lack. Unlike climate conferences where Amara watches countries make voluntary pledges, Sofia works in a system where decisions become binding law."}),`
`,i.jsx(e.p,{children:'"The difference is hierarchy," Sofia explains. "Federal law supersedes member state law. We have territorial subsidiarity—decisions at appropriate levels, but within nested territories. Dual legitimacy—citizens vote at both national and EU levels. And constitutional unity: shared legal framework, binding courts."'}),`
`,i.jsx(e.p,{children:"Federations also embody strong normative foundations, she notes. Federal constitutions establish universal rights for all citizens—Germany's Basic Law, the US Bill of Rights. They create redistribution mechanisms ensuring minimum standards across regions. They distinguish sharply between insiders with full rights and outsiders."}),`
`,i.jsx(e.p,{children:"This federal structure gives Sofia tools Amara lacks: binding regulations, enforcement mechanisms, supranational courts, and democratic participation in institutions that wield real power."}),`
`,i.jsx(e.h3,{children:"Sofia's reality: federal power and federal gridlock"}),`
`,i.jsx(e.p,{children:"The EU might have binding power, but that doesn't mean it works smoothly."}),`
`,i.jsx(e.p,{children:"Twenty-seven countries, twenty-seven veto points. Even among democracies with similar values and roughly comparable economic systems, consensus proves extraordinarily difficult. Climate policy requires balancing Polish coal interests, German industrial concerns, French nuclear preferences, and Nordic renewable ambitions—all within a single legal framework."}),`
`,i.jsx(e.p,{children:"The federal model works within relatively bounded cultural and political contexts. The EU, operating among twenty-seven relatively similar states, already faces severe difficulties achieving consensus and maintaining democratic legitimacy. Sofia sees this daily: the formal power exists, but practical politics create gridlock."}),`
`,i.jsx(e.h3,{children:"The scale problem"}),`
`,i.jsx(e.p,{children:"After Sofia's explanations, Amara understands the challenge: scaling federal governance to 198 countries with fundamentally incompatible political systems presents a different magnitude of problem. The world includes liberal democracies, authoritarian states, theocracies, and hybrid regimes. Could China and the US share a constitution? Would Russia and the EU accept the same legal framework? Could India and Pakistan agree on a federal judiciary?"}),`
`,i.jsx(e.p,{children:"Multiplying the EU's complexity by seven—and adding nuclear weapons and fundamental ideological conflicts—suggests the obstacles to world federalism are not merely practical but structural. The federal model works within culturally relatively homogeneous boundaries. But the world exceeds those boundaries substantially."}),`
`,i.jsx(e.p,{children:`"So we're stuck choosing between systems that both fail," Amara says bitterly.`}),`
`,i.jsx(e.p,{children:`"Three jurisdictions, one AI model, zero coordination." Adam's voice carries from
the window table. The conversation between Sofia and Amara has grown increasingly animated. Adam has been listening from the window table—he can't help it. The problems they're describing feel painfully familiar. Finally, he has to join in. "I know exactly how stuck you are."`}),`
`,i.jsx(e.p,{children:'Sofia and Amara exchange glances, then Sofia calls over: "You work in IT?"'}),`
`,i.jsx(e.p,{children:`"Try to." Adam walks over with his laptop. "Adam. Malta-based, perpetually confused
about which rules to listen to. You're water and climate?"`}),`
`,i.jsx(e.p,{children:`"And EU gridlock," Sofia adds. "Apparently we're all having the same terrible night."`}),`
`,i.jsx(e.p,{children:"Over yet another coffee, Adam joins their conversation. He's been facing similar frustrations with digital governance—but from a different angle."}),`
`,i.jsx(e.h2,{children:"Cosmopolitan democracy: Overlapping networks"}),`
`,i.jsx(e.p,{children:'"Your models assume governance happens in territorial boxes," Adam says. "But consider my work on AI models: European regulators want to audit it. American platforms host it. Yet other authorities monitor it. Meanwhile, the open-source community that actually built the underlying framework has its own governance processes—completely separate from any government."'}),`
`,i.jsx(e.p,{children:`He continues: "Then there's the data. It flows across jurisdictions instantly. Some is governed by GDPR in Europe, some by different rules in California, some by Chinese data sovereignty laws, and some exists in regulatory grey zones. Multiple authorities, overlapping jurisdictions, no clear hierarchy."`}),`
`,i.jsx(e.p,{children:`Amara recognizes the pattern: "That's exactly what I experience with climate. Emissions come from everywhere, impacts hit everywhere, and governance is fragmented across states, corporations, NGOs, cities—all with different authorities that overlap and intersect."`}),`
`,i.jsx(e.p,{children:`Sofia nods: "And in the EU, we see this even within our federal structure. Climate policy involves the Commission, member states, regional governments, cities, private companies, and civil society organizations—all with different roles and authorities that don't fit neatly into a hierarchy."`}),`
`,i.jsx(e.p,{children:`Amara leans back, exhausted. "So we're stuck. Voluntary cooperation that fails,
or binding authority that can't scale. Is there even a third option?"`}),`
`,i.jsx(e.p,{children:'Sofia stares at her cold coffee, thinking. "I was in a seminar by some political theorist in Brussels once ...David Held. Now that I think about it, he wrote about exactly this problem back in the 90s. The whole argument was that neither confederation nor federation works for genuinely transnational challenges."'}),`
`,i.jsx(e.p,{children:'"And his solution?" Adam asks.'}),`
`,i.jsx(e.p,{children:`"Cosmopolitan democracy. Multiple overlapping networks of authority instead of
territorial hierarchies."`}),`
`,i.jsx(e.p,{children:`Adam directly googles the terms on his laptop and finds a relevant source: a 1995 book chapter on democratic governance beyond the nation-state.
"Here. He argues for democratic institutions that match how power actually works—
across borders, in networks, at multiple levels simultaneously...That's exactly what we've been describing."`}),`
`,i.jsx(e.p,{children:`"Let me send you both the reference," Adam says, sharing the document. "Doesn't look like we are going to sleep tonight anyways..." They huddle around Adam's laptop and start to dig. Sofia translates the academic jargon, Adam googles unfamiliar terms, Amara scribble notes on her water charts. Over the next few hours, they work through Held's framework together.`}),`
`,i.jsx(e.h2,{children:"The Institutional Design: How do you govern overlapping networks?"}),`
`,i.jsx(e.p,{children:"Helds network perspective differs fundamentally from both confederation and federation. Confederations assume states are the primary actors, cooperating voluntarily. Federations assume nested territorial hierarchies with clear authority levels. But reality—as Amara, Sofia, and Adam all experience—operates through overlapping functional networks that don't respect these boundaries."}),`
`,i.jsx(e.p,{children:"As our three night owls work through Held's framework together two core institutional mechanisms emerge..."}),`
`,i.jsx(e.h3,{children:"Institutional Principle 1 - Multi-level democratic law-making"}),`
`,i.jsx(e.p,{children:`The first principle breaks the assumption that only national governments make
binding laws. Instead, democratic law-making happens at every level where power
operates—local, national, regional, and global. Courts exist at each level, and
higher courts can check lower ones when rights are violated.`}),`
`,i.jsx(e.p,{children:`Think of it as governance that matches reality: when a water basin crosses three
borders, there's a basin-level authority with democratic accountability. When AI
systems operate globally, there's a global-level framework with enforceable rights.
Power is shared across multiple scales, not trapped in territorial boxes.`}),`
`,i.jsx(e.p,{children:`For Adam, this solves his regulatory gap problem directly—rules would exist at
every level where his AI systems operate, preventing the jurisdiction shopping
that currently plagues digital governance.`}),`
`,i.jsx(e.h3,{children:"Institutional Principle 2 - Nested citizenship"}),`
`,i.jsx(e.p,{children:`"The second principle is even more radical," Sofia says, scrolling down. "Citizenship isn't limited to your nation-state. You can be a citizen in multiple overlapping communities—city, region, country, and also transnational bodies that affect your life."`}),`
`,i.jsx(e.p,{children:`Adam looks up. "So I'd have democratic rights wherever my AI systems are governed?
Not just Malta, but also in the EU digital authority, the global AI standards body?"`}),`
`,i.jsx(e.p,{children:`"And I'd be a citizen of the climate system itself," Amara adds, seeing it. "Not
just voting in Tunisia, but having democratic standing in the institutions that
govern the emissions drowning my region."`}),`
`,i.jsx(e.p,{children:`"Your political voice follows the actual sources of power that shape your world,"
Sofia summarizes. "Not just where you were born."`}),`
`,i.jsx(e.p,{children:`For Adam, this means recognized political standing in the digital governance
networks that currently treat him as either a passive subject or an ungoverned actor.`}),`
`,i.jsxs(e.p,{children:[`"But wait," Adam says, looking up from the screen. "These mechanisms—multi-level
law-making, nested citizenship—they're just procedures. Who decides what these
institutions actually `,i.jsx(e.em,{children:"do"}),`? What stops a cosmopolitan climate authority from imposing
European environmental standards on Tunisia's development? Or global AI regulations
that serve Silicon Valley interests?"`]}),`
`,i.jsxs(e.p,{children:['Amara nods sharply. "True. The UN ',i.jsx(e.em,{children:"has"}),` mechanisms. The problem isn't structure alone but also whose values get encoded in the system."`]}),`
`,i.jsx(e.p,{children:`Sofia pauses. "Held anticipated this. The framework rests on normative foundations.
Look—five principles."`}),`
`,i.jsx(e.p,{children:"They lean over Adam's laptop, reading in silence. As the night wears on, each gravitates to different parts."}),`
`,i.jsx(e.h2,{children:"The Normative Foundation: Rights, not just rules"}),`
`,i.jsxs(e.p,{children:["Amara focuses on ",i.jsx(e.strong,{children:"global civic commitment"}),`: Climate finance for vulnerable
populations isn't charity—it's democratic obligation ensuring equal political
agency. High emitters don't `,i.jsx(e.em,{children:"choose"})," to help; they're constitutionally ",i.jsx(e.em,{children:"required"}),`
to ensure she has standing.`]}),`
`,i.jsx(e.p,{children:`"This changes everything," she says. "I'm not asking permission. I have standing."`}),`
`,i.jsxs(e.p,{children:["Adam zeroes in on ",i.jsx(e.strong,{children:"universal constitutional principles"}),`: No mass surveillance.
No algorithmic manipulation. No discriminatory systems. These aren't policy
preferences—they're red lines no actor can cross.`]}),`
`,i.jsx(e.p,{children:'"Boundaries," he murmurs. "Actual boundaries on power."'}),`
`,i.jsxs(e.p,{children:["Sofia sees the bigger architecture. ",i.jsx(e.strong,{children:"Cosmopolitan law"}),` establishes universal
rights everywhere—health, welfare, civic participation, climate stability. Not
diplomatic aspirations but legally enforceable across all jurisdictions.`]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Cosmopolitan social justice"}),` demands economic activity support democratic
equality. High emitters bear greater climate responsibilities; digital monopolies
that concentrate power violate the principle directly.`]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Non-coercive relations"}),` govern disputes through courts and mediation, collective
force only as last resort.`]}),`
`,i.jsx(e.p,{children:`"Both of you gain what you lacked," Sofia observes. "Democratic voice that follows
actual power, not just territory."`}),`
`,i.jsx(e.p,{children:"They sit in silence for a while moment, absorbing the implications. Adam closes his laptop. Amara stacks her charts. Sofia checks the time—almost dawn. Without discussion, they gather their things and head to the deck."}),`
`,i.jsx(e.h2,{children:"Epilogue"}),`
`,i.jsx(e.p,{children:"Dawn breaks over the Mediterranean as the ferry approaches Tunis harbor. At the railing, exhausted, they watch the city emerge from darkness."}),`
`,i.jsx(e.p,{children:`"So," Adam says quietly. "Did we just solve global governance, or have we been
talking in circles for six hours?"`}),`
`,i.jsx(e.p,{children:`Amara laughs tiredly. "Held's framework is elegant. But implementing it?" She
gestures at the harbor—container ships, border controls, national flags. "The world
still runs on sovereignty and power. Cosmopolitan democracy assumes actors will
accept constitutional limits. Will they?"`}),`
`,i.jsx(e.p,{children:`"The EU took fifty years to build what we have," Sofia says. "And we're still
gridlocked. Scaling this globally..." She doesn't finish.`}),`
`,i.jsx(e.p,{children:`They exchange phone numbers and emails anyway. Adam promises to send his digital
governance notes. Amara mentions a water governance conference in three months.
Sofia says she'll look for Held's book in Brussels.`}),`
`,i.jsx(e.p,{children:'"Feverdream or framework?" Adam asks as they gather their bags.'}),`
`,i.jsx(e.p,{children:`"Maybe both," Amara says. "But at least now we have language for what's broken.
And maybe—" she glances at her water charts, then at them— "maybe that's where
change starts."`}),`
`,i.jsx(e.p,{children:"The ferry docks. They walk off into separate directions, carrying the same questions."}),`
`,i.jsx(e.h3,{children:"References"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:'Held, David. "Democracy and the Global Order: From the Modern State to Cosmopolitan Governance." Stanford University Press, 1995.'}),`
`]})]})}function F8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(sb,{...t})}):sb(t)}const ob=Object.freeze(Object.defineProperty({__proto__:null,default:F8,frontmatter:B8},Symbol.toStringTag,{value:"Module"})),H8={publishing_date:"2025-04-21",title:"A decentral support button",category:"blockchain",secondaryCategory:"webdev",description:"I build a decentralized support button using smart contracts for direct content monetization. Learn how blockchain enables transparent micro-payments without platform intermediaries."};function lb(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["I recently came across the ",i.jsx(e.code,{children:"mirror"})," platfrom and was really impressed by the possibilities of such a dentralized ",i.jsx(e.a,{href:"4",children:"social platform"}),". What intrigued me most is that it might give content creators a very simple and direct way to get paid for the content. But after some more digging I must admit that it is not clear to me if ",i.jsx(e.a,{href:"https://mirror.xyz/",children:"mirror.xyz"})," is still really actively maintained. So I decided to give it a try and see if I might be able to build something similar. As you can see on the top right of this site I succeeded and will explain how I did it. I am not sure yet how long this post will be, so buckle up."]}),`
`,i.jsx(e.h2,{children:"The goal"}),`
`,i.jsx(e.p,{children:"I wanted to have a simple like / support button. Its functionality is quite straightforward:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"As the user clicks on the button, he commits to support the content with a small amount of money."}),`
`,i.jsx(e.li,{children:"The support is done via a transaction on the blckchain."}),`
`,i.jsx(e.li,{children:"The smart contract keeps track of the number of likes for each site."}),`
`]}),`
`,i.jsx(e.p,{children:"For me this is interesting for a few reasons:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"It is a really simple smart contract. So it allows me to learn the basics of smart contracts in a very simple way."}),`
`,i.jsx(e.li,{children:"It sets up a simple way to support the content that I create on this website."}),`
`]}),`
`,i.jsx(e.h2,{children:"How to use the support button"}),`
`,i.jsxs(e.p,{children:["To use the button you need to have a wallet that is connected to the Ethereum network. I used ",i.jsx(e.a,{href:"https://metamask.io/",children:"MetaMask"})," for this."]}),`
`,i.jsxs(e.p,{children:["In the next step, you need to make sure that you have sufficent ETH on the ",i.jsx(e.a,{href:"https://www.optimism.io",children:"optimism chain"}),". If you don't have any ETH on the optimism chain, you can use the ",i.jsx(e.a,{href:"https://app.optimism.io/bridge",children:"optimism bridge"})," to transfer some ETH from the Ethereum mainnet to the optimism chain."]}),`
`,i.jsx(e.p,{children:"Now, you are all set up to use the support button that you can find on the top right of this page. When you click it, a popup will open that allows you to send ETH to the smart contract. The amount of ETH is set to 0.002 ETH (rougly 50 cents). Once you confirm the transation, the smart contract will be called and the amount of ETH will be sent to the smart contract. The smart contract will then keep track of the number of likes for this specific URL and the number of supporters will be incremented. Thanks for your support!"}),`
`,i.jsx(e.p,{children:"Now that you know how to use the button, I will explain how I set everything up."}),`
`,i.jsx(e.h2,{children:"Setting up the smart contract"}),`
`,i.jsx(e.p,{children:"In a first step, I had to decide how my smart contract should look like and then also set everything up to deploy it."}),`
`,i.jsx(e.h3,{children:"The smart contract"}),`
`,i.jsxs(e.p,{children:["I decided for a really simple approach based on ",i.jsx(e.a,{href:"https://soliditylang.org/",children:"solidity"}),". The ",i.jsx(e.code,{children:"Support"})," smart contract main hasly the ",i.jsx(e.code,{children:"donate"})," function, which takes a URL as input and allows users to send ETH as a form of appreciation. Once the donation is called, ETH is transferred to the contract owner and the count of ",i.jsx(e.code,{children:"urlLikes"})," is incremented."]}),`
`,i.jsxs(e.p,{children:["The contract also includes a ",i.jsx(e.code,{children:"getLikesForUrl"})," function, which allows anyone to check the number of likes for a specific URL. The contract is designed to be secure and efficient, utilizing OpenZeppelin's libraries for access control and reentrancy protection. One of the neat things of the blockchain is that you can the see fully deployed and verified code ",i.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x314b07fbd33a7343479e99e6682d5ee1da7f17c1#code#F1#L1",children:"here"}),"."]}),`
`,i.jsx(e.p,{children:"As I designed the contract, I actually wondered if I should use other approaches like NFTs or ERC20 tokens. But in the end there is no need for that at this stage and any of those increasing complexities may increase the risk of bugs and the gas fees."}),`
`,i.jsx(e.h3,{children:"Deploying and testing the smart contract"}),`
`,i.jsxs(e.p,{children:["As this was my first smart contract, I actually had to learn all the basics. It would seem that you have two major frameworks nowadays: ",i.jsx(e.a,{href:"https://book.getfoundry.sh/",children:"Foundry"})," and ",i.jsx(e.a,{href:"https://hardhat.org/",children:"Hardhat"}),". Hardhat seemed to fulfill all my requirements and well integrated into the usual javascript workflows. To get started, I really like the documentation for the ",i.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/compile-contracts",children:"Hardhat Runner"})," here. In summary, the steps are:"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Install hardhat and the dependencies"}),`
`,i.jsxs(e.li,{children:["Compile the contracts ",i.jsx(e.code,{children:"npx hardhat compile"}),"."]}),`
`,i.jsxs(e.li,{children:["Write the tests for the contracts. I used ",i.jsx(e.a,{href:"https://www.chaijs.com/",children:"chai"})," and ",i.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/advanced/using-viem",children:"viem"})," for this."]}),`
`]}),`
`,i.jsxs(e.p,{children:["Now we are ready to deploy and test the contract. In the test environment this is quite straightforward as described ",i.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/deploying",children:"here"}),". But as you would like to deploy the contract to a real network, you need to set up a few things as described ",i.jsx(e.a,{href:"https://hardhat.org/hardhat-runner/docs/guides/verifying",children:"here"}),". First, you need to create an account on ",i.jsx(e.a,{href:"https://www.alchemy.com/",children:"Alchemy"})," and get an API key. Then we can once again deploy the contract to the network of my choice, which was Optimism."]}),`
`,i.jsxs(e.p,{children:["Finally, we need to verify the contract on the blockchain. This is important as it allows others to see the code and verify that it is working as expected. Here again we need to set up a few things. First, you need to create an account on ",i.jsx(e.a,{href:"https://etherscan.io/",children:"Etherscan"})," and get an API key. Then, you need to set up the ",i.jsx(e.code,{children:"ETHERSCAN_API_KEY"})," environment variable with your API key."]}),`
`,i.jsx(e.h3,{children:"The Optimism chain"}),`
`,i.jsx(e.p,{children:"One of the crucial points for the support button was that it must not be too costly to use. On the Ethereum mainnet, I have frequently encountered gas fees of 20-50 USD. This would have been prohibitive for a simple like button."}),`
`,i.jsx(e.p,{children:'Every blockchain transaction requires computational resources that must be paid for with "gas fees." These fees represent the cost of having your transaction processed and validated by the network:'}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"On Ethereum's mainnet, high demand for block space drives fees to levels that make micro-transactions impractical"}),`
`,i.jsxs(e.li,{children:["When gas costs ",i.jsx(e.code,{className:"language-math math-inline",children:"20-50 per transaction, sending a "}),"0.50 support donation becomes economically absurd"]}),`
`,i.jsx(e.li,{children:"Layer 2 solutions like Optimism process transactions in batches and post the cryptographic proof to Ethereum, distributing that mainnet gas cost across many transactions."}),`
`]}),`
`,i.jsxs(e.p,{children:["Therefore, I decided to investigate layer-2 alternatives, which promise much lower fees. As I investigated the major alternatives, I came across ",i.jsx(e.a,{href:"https://www.base.org/",children:"Base"}),", ",i.jsx(e.a,{href:"https://arbitrum.io/",children:"Arbitrum"}),", ",i.jsx(e.a,{href:"https://www.optimism.io/",children:"Optimism"})," and ",i.jsx(e.a,{href:"https://linea.build/",children:"Linea"}),". All of them seemed fairly mature with slightly different focuses. Base is closely aligned with Coinbase, which makes it a bit less attractive for me. Linea seemed to be still quite new and not as widely adopted. Optimism on the other hand has some nice documententation, a strong community focus and a lot of projects already running on it. So I decided to go with Optimism."]}),`
`,i.jsxs(e.p,{children:["You can see all the details for the deployed contract and activity on ",i.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x314b07fbd33a7343479e99e6682d5ee1da7f17c1",children:"Optimism Etherscan"}),"."]}),`
`,i.jsx(e.h2,{children:"The frontend"}),`
`,i.jsxs(e.p,{children:["After I had the smart contract up and running, I needed to integrate it into the website. I decided to integrate it via ",i.jsx(e.a,{href:"https://wagmi.sh/",children:"wagmi"}),", which is a library that makes it easy to interact with Ethereum from a react app. It provides a simple API for connecting to wallets, sending transactions, and reading data from the blockchain. It is also built around ",i.jsx(e.a,{href:"https://viem.sh/",children:"viem"}),", which is a library for interacting with Ethereum in a type-safe way. This makes it easy to work with the blockchain and ensures that the code is safe and secure."]}),`
`,i.jsx(e.p,{children:"The integration itself, involved two parts:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"the connection to the wallet."}),`
`,i.jsx(e.li,{children:"the button itself."}),`
`]}),`
`,i.jsx(e.h3,{children:"The wallet connection"}),`
`,i.jsxs(e.p,{children:["To set up the wallet, I followed quite closely the ",i.jsx(e.a,{href:"https://wagmi.sh/react/getting-started",children:"wagmi documentation"}),". However, I am using ",i.jsx(e.code,{children:"vike"})," and there is no ",i.jsx(e.code,{children:"App.tsx"}),". So the integration is a bit different. I was able to activate ",i.jsx(e.code,{children:"tanstack-query"})," with the ",i.jsx(e.a,{href:"https://vike.dev/tanstack-query",children:"official plugin"}),". To wrap Wagmi itself, I hooked into the ",i.jsx(e.code,{children:"LayoutDefault.tsx"})," component, which worked out quite nicely. For the rest I could simply follow the very simple and straight forward guide ",i.jsx(e.a,{href:"https://wagmi.sh/react/guides/connect-wallet",children:"here"}),". I had a quick look into the different kits, but wanted to learn things for myself at this stage. If I ever decide to use one of the kits, I will likely try out ",i.jsx(e.a,{href:"https://appkit.dev/",children:"AppKit"})," first."]}),`
`,i.jsx(e.h3,{children:"The support button"}),`
`,i.jsxs(e.p,{children:["Now that the wallet was set up, I could directly integrate the support button. This was also surprisingly straight forward as I could simply follow the documentation on how to ",i.jsx(e.a,{href:"https://wagmi.sh/react/guides/write-to-contract",children:"write"})," and ",i.jsx(e.a,{href:"https://wagmi.sh/react/guides/read-from-contract",children:"read"})," small contracts. To get the number of supports, I simply call the ",i.jsx(e.code,{children:"getLikesForUrl"})," function of the smart contract. To support the content, I call the ",i.jsx(e.code,{children:"donate"})," function of the smart contract. That's it. As every developer in the world, I spent too much time one the styling of the button, but otherwise it was simply an enjoyable experience."]}),`
`,i.jsx(e.h2,{children:"My main learnings"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Fees on L2 chains are really low now. A transfer of 50 cents sometimes costs less than 1 cent in gas fees. So this problem is really pretty much solved for now and L2s are really usable."}),`
`,i.jsx(e.li,{children:"The development experience is really quite nice. Backend and frontend are nicely separated etc."}),`
`,i.jsx(e.li,{children:"The biggest question for me will be how the whole transfer to L2 chains will work out in the long term."}),`
`,i.jsx(e.li,{children:"I will continue to play with similiar applications as soon as I think about some kind of transfers."}),`
`]}),`
`,i.jsx(e.h2,{children:"A small look into the future"}),`
`,i.jsx(e.p,{children:"I learned a few things that I would likely change in the future. I have mainly two things in mind."}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:["First, I would like to make sure that the contract is ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/upgrades-plugins/writing-upgradeable",children:"upgradable"}),". While it would make the initial deployment process more complex, it would make the entire system much easier to maintain in the long run."]}),`
`,i.jsx(e.li,{children:"Second, I would most likely make it possible to select the adress of the recipient. This would also allow others to use the same contract and make the whole thing a bit more generic."}),`
`]}),`
`,i.jsx(e.p,{children:"So I hope that you enjoyed the post. Comments as usual below. And any support through the support button is highly appreciated."})]})}function q8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(lb,{...t})}):lb(t)}const cb=Object.freeze(Object.defineProperty({__proto__:null,default:q8,frontmatter:H8},Symbol.toStringTag,{value:"Module"})),$8={publishing_date:"2025-03-11",title:"Can I have interactive python pages ?",category:"quantum",secondaryCategory:"webdev",description:"I explore the future of interactive content with Python running directly in browsers. Tools like Pyodide and JupyterLite enable portable, installation-free data science."};function hb(t){const e={a:"a",code:"code",em:"em",li:"li",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["_The original post on mirror can be found ",i.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/iglgKZeAeHcUc_-Ya9cjQQ1vUNqhJTRUswredn-53e8?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"._"]}),`
`,i.jsxs(e.p,{children:["One of my main motivations to start this website was to consolidate different lectures, writings and other things that accumulated over the years in different places. The first project was to actually move my AMO lectures. This is now finished and can be found over ",i.jsx(e.a,{href:"https://www.fretchen.eu/amo",children:"here"}),". I started with this as it was a really simple test case without anything interactive components."]}),`
`,i.jsxs(e.p,{children:["However, I have a few more projects which are really based on ",i.jsx(e.a,{href:"https://jupyter.org/",children:"jupyter"})," notebooks. jupyter notebooks are just a fantastic tool to combine notes with simple visualizations and the ",i.jsx(e.a,{href:"https://jupyterbook.org",children:"jupyter book"}),' project is really a great way to publish them. The only "annoying" drawback has been for years that you have to somehow download the notebook and run it locally or go into some service like ',i.jsx(e.a,{href:"https://mybinder.org/",children:"binder"}),"."]}),`
`,i.jsxs(e.p,{children:["The rise of python in the browser actually promises to changes that at some point. What does this mean ? Projects like ",i.jsx(e.a,{href:"https://github.com/jupyterlite",children:"jupyterlite"})," allow you to run the full jupyter experience without any installation. And tools like ",i.jsx(e.a,{href:"https://pyodide.org/en/stable/",children:"pyodide"})," bring python directly into the brower. Just python programming without the cloud, or any installation. It all just runs in the browser. This would make the jupyter notebooks that I loved so extremely portable. And actually, there are now package that attempt to connect this directly to ",i.jsx(e.a,{href:"https://github.com/elilambnz/react-py",children:"react"}),". If this worked out I would have:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"A blog that is written in markdown."}),`
`,i.jsx(e.li,{children:"The possibility to add small python snippets directly into the blog."}),`
`,i.jsx(e.li,{children:"All of this part of a website without the need to install anything."}),`
`]}),`
`,i.jsxs(e.p,{children:["I gave all of this a try and ",i.jsx(e.code,{children:"react-py"})," looked particularly interesting. However, the ecosystem still seems fairly young and it was super painful to get even the simplest examples to run. I must admit that I gave up for the moment, when I understood that pyodide and hence ",i.jsx(e.code,{children:"react-py"})," does always require a ",i.jsx(e.a,{href:"https://pyodide.org/en/latest/usage/working-with-bundlers.html",children:"build for tests"}),". Having it in ",i.jsx(e.code,{children:"dev"})," would have been a minimum to make it an enjoyable experience."]}),`
`,i.jsxs(e.p,{children:["So for the moment I will most likely just transform the jupyter notebooks into react / plein markdown and then see how the ecosystem evolves. But kudos to the people behind ",i.jsx(e.em,{children:"python-in-the-browser"}),". This is a super exciting development for all kind of data science and will make the ecosystem much more decentralized and accessible. Any suggestions or additional information ? Then just leave them in the comments below."]})]})}function z8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(hb,{...t})}):hb(t)}const ub=Object.freeze(Object.defineProperty({__proto__:null,default:z8,frontmatter:$8},Symbol.toStringTag,{value:"Module"})),W8={publishing_date:"2024-12-02",title:"Hello World",tokenID:2,category:"others",description:"I welcome you to my personal blog exploring technology, blockchain, and creative coding. Expect insights on modern web development, decentralized systems, and innovative digital experiences."};function db(t){const e={p:"p",...t.components};return i.jsx(e.p,{children:"This is the first post. It shows that the whole thing is working out nicely."})}function U8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(db,{...t})}):db(t)}const mb=Object.freeze(Object.defineProperty({__proto__:null,default:U8,frontmatter:W8},Symbol.toStringTag,{value:"Module"})),V8={publishing_date:"2025-04-06",title:"Running an image generator",category:"ai",description:"I build my own AI image generator using open-source models and European hosting. See how to integrate Stable Diffusion into static websites with full privacy and cost control."};function fb(t){const e={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["Just as about every other person on the planet, I have been playing around with ",i.jsx(e.a,{href:"https://stability.ai/",children:"stable diffusion"})," and other image generators. But I personally do not care too much about the exact details, which model is best etc. I wanted to have my own personal system. I made some good progress on it and I felt that it could be time to share some of my findings."]}),`
`,i.jsx(e.h2,{children:"My goal"}),`
`,i.jsx(e.p,{children:"When I set up my system, I started with a few conditions:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"I want it to be accessible really easily my own website, which is static."}),`
`,i.jsx(e.li,{children:"I want to use open source models."}),`
`,i.jsx(e.li,{children:"The infrastructure to run the system should be hosted in Europe."}),`
`,i.jsx(e.li,{children:"At some point I must be able to limit access to the system or let people pay for it."}),`
`]}),`
`,i.jsx(e.h2,{children:"Using model for image generation"}),`
`,i.jsxs(e.p,{children:["To generate the images I need to have some back-end that is non-static and that I can easily call through some API. Several options exist, but for the moment I really like the system by ",i.jsx(e.a,{href:"https://cloud.ionos.de/managed/ai-model-hub",children:"Ionos"}),". It is a straight-forward API with several open source models for image generation like ",i.jsx(e.a,{href:"https://stability.ai/",children:"Stable Diffusion"})," or FLUX. The system is hosted in Europe, which I personally like these days and the costs are ok. You can get started within minutes on a local setup."]}),`
`,i.jsx(e.h2,{children:"Using the model in a static website"}),`
`,i.jsxs(e.p,{children:["However, to use the model you need to have some kind of API key. And on a static website there is no really nice way to store such keys. Therefore, I decided to go with a serverless setup. Here, I must admit that I was surprised how hard it was to find something that was not run by an American company. If you go with the American companies you have an almost infinite choice between Amazon, Vercel and so on. However, on the European side, I could only find ",i.jsx(e.a,{href:"https://www.scaleway.com/en/",children:"Scaleway"})," with their functions. This setup works quite nicely. Now I have a simple website that calls Scaleway, which then calls the Ionos API and returns the image. The whole thing is hosted in Europe."]}),`
`,i.jsx(e.h2,{children:"Decentral payments"}),`
`,i.jsx(e.p,{children:"The generation of each image has a cost of less than one euro. However, somehow I need to pass the cost to the user. I really do not want to go with weird advertisement things. So I could go with some traditional payment services. However, it would be substantially more fun to use some web3 payment. I am now quite sure that ChainLink functions are an interesting way to go. It is just a slightly steep learning curve and a fairly new technology. Let's see how it goes. I will keep you updated on the progress."})]})}function Y8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(fb,{...t})}):fb(t)}const pb=Object.freeze(Object.defineProperty({__proto__:null,default:Y8,frontmatter:V8},Symbol.toStringTag,{value:"Module"})),G8={publishing_date:"2025-01-18",title:"Are decentral websites a thing for me ?",category:"webdev",secondaryCategory:"blockchain",description:"I explore decentralized web hosting using ENS domains and IPFS storage. Discover how blockchain enables censorship-resistant websites without traditional hosting companies."};function gb(t){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",section:"section",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:['Over the last few years, I kept wondering what it might mean to host a "decentral" website very much like it is possible to decentralize certain financial services through smart contracts ',i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),". What would be needed ?"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"A decentral domain provider."}),`
`,i.jsx(e.li,{children:"A simple way to update the website."}),`
`,i.jsx(e.li,{children:"A decentralized storage system."}),`
`]}),`
`,i.jsx(e.p,{children:"As we will see the first and last part are fairly straight-forward. For the decentral storage I continue to have some doubts."}),`
`,i.jsx(e.h2,{children:"Get an ENS domain"}),`
`,i.jsxs(e.p,{children:["Normally, each website is hosted on some servers and you can access them through some domain. Currently, this website is hosted by github, which also delivers me directly the domain address. And behind Github is simply a big company which handles the domain registration for me. If I want to go decentral, I try to avoid this company and simply register the domain on a blockchain. This is already possible with ",i.jsx(e.a,{href:"https://ens.domains/",children:"ENS"}),". This is a great start as it gets us closer to have some fancy adress like ",i.jsx(e.code,{children:"fretchen.eth"}),". To get this I needed to set up a wallet, where ",i.jsx(e.a,{href:"https://metamask.io/",children:"Metamask"})," seems to be the absolute standard nowadays. Once I have the wallet, I need to convert normal currency into the currency of the Blockchain, which is here ",i.jsx(e.a,{href:"https://ethereum.org/en/",children:"ethereum"})," ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"."]}),`
`,i.jsxs(e.p,{children:["To buy the ethereum, I had to go through ",i.jsx(e.a,{href:"https://www.kraken.com",children:"Kraken"})," and then send myself the ETH into the Metamask wallet. With the ETH I could quite simply register the domain of my choice with ",i.jsx(e.a,{href:"https://ens.domains/",children:"ENS"}),". The purchase itself is fairly straight-forward and interestingly the domain is implemented as an NFT. This is the tech that is mostly used to allow people to claim ownership for weird pictures of bored apes. Here, it basically gets you exclusive access rights to the domain, which actually sounds quite smart. The other cool thing is that ",i.jsx(e.code,{children:"ens.domains"})," is a DAO. So there is no single authority controlling it, but a community of people. Another fairly cool feature."]}),`
`,i.jsx(e.h2,{children:"A simple way to update the website"}),`
`,i.jsxs(e.p,{children:["This is the part where it started to get slightly non-trivial. In the centralized world we have simple no-code systems like ",i.jsx(e.a,{href:"https://wordpress.org/",children:"wordpress"})," that run on a server. All of this is not really available on decentral systes. So we need some way to fall back into static website generation very much like I do here. But once, you can host a static website on ",i.jsx(e.a,{href:"https://pages.github.com/",children:"github pages"}),", it should also be theoretically ready to host it decentrally. Given that this is clearly solved (otherwise you would not read this), it was time to try to get this onto the block-chain."]}),`
`,i.jsx(e.h2,{children:"A decentralized storage system"}),`
`,i.jsxs(e.p,{children:['And this is now the part which was really quite annoying. At first, you think "Let me put it onto the blockchain". Well you quite quickly realize that this is totally cost-prohibitive and that you need some kind of alternative. The most famous and commonly used solution there is the ',i.jsx(e.a,{href:"https://ipfs.tech/",children:"IPFS"}),". As you put a file / folder into the IPFS it gets a CID and becomes discoverable for others. But in contrast to systems like ethereum it feels quite different:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Either you have to run your own IPFS node, which is quite a bit of work. I never was able to have relible notes with acceptable download speeds."}),`
`,i.jsxs(e.li,{children:["Or you use a service like ",i.jsx(e.a,{href:"https://pinata.cloud/",children:"Pinata"}),", which is a centralized service that pins your files for you. This is quite a bit of a bummer, as it is not really decentralized anymore. Further you mostly have to pay through dollars etc. So there is really no clear difference to the world of standard cloud storages there."]}),`
`]}),`
`,i.jsx(e.h2,{children:"Conclusion"}),`
`,i.jsx(e.p,{children:"And this is also the moment at which I wrote this blog post. I could now try to pay for the pinning service, put the CID onto eth.domains and claim some decentralized website. But what did I win ?"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The service is still quite centralized."}),`
`,i.jsx(e.li,{children:"I have really slow site accessbility."}),`
`]}),`
`,i.jsxs(e.p,{children:["So I am really not sure if I will go down this road any further at this stage. I keep wondering how the master himself handles the storage of ",i.jsx(e.a,{href:"https://vitalik.eth.limo/",children:"his blog"}),". But I guess I will have to keep on reading and keep waiting for helpful insights."]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,i.jsxs(e.p,{children:["The stuff done on ",i.jsx(e.a,{href:"https://app.uniswap.org/",children:"Uniswap"})," for example is quite impressive. ",i.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["From my understanding Ethereum is THE biggest blockchain, which allows you to run smart contracts and quite energy efficient. It feels a bit like the Linux of the blockchain world. ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function X8(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(gb,{...t})}):gb(t)}const xb=Object.freeze(Object.defineProperty({__proto__:null,default:X8,frontmatter:G8},Symbol.toStringTag,{value:"Module"}));var yb={name:"mermaid",version:"11.12.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},Qc={exports:{}},J8=Qc.exports,bb;function Q8(){return bb||(bb=1,function(t,e){(function(n,a){t.exports=a()})(J8,function(){var n=1e3,a=6e4,r=36e5,s="millisecond",o="second",l="minute",c="hour",h="day",u="week",d="month",m="quarter",f="year",p="date",g="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var N=["th","st","nd","rd"],R=C%100;return"["+C+(N[(R-20)%10]||N[R]||N[0])+"]"}},k=function(C,N,R){var $=String(C);return!$||$.length>=N?C:""+Array(N+1-$.length).join(R)+C},E={s:k,z:function(C){var N=-C.utcOffset(),R=Math.abs(N),$=Math.floor(R/60),U=R%60;return(N<=0?"+":"-")+k($,2,"0")+":"+k(U,2,"0")},m:function C(N,R){if(N.date()<R.date())return-C(R,N);var $=12*(R.year()-N.year())+(R.month()-N.month()),U=N.clone().add($,d),B=R-U<0,T=N.clone().add($+(B?-1:1),d);return+(-($+(R-U)/(B?U-T:T-U))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:d,y:f,w:u,d:h,D:p,h:c,m:l,s:o,ms:s,Q:m}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},v="en",S={};S[v]=w;var L="$isDayjsObject",O=function(C){return C instanceof q||!(!C||!C[L])},P=function C(N,R,$){var U;if(!N)return v;if(typeof N=="string"){var B=N.toLowerCase();S[B]&&(U=B),R&&(S[B]=R,U=B);var T=N.split("-");if(!U&&T.length>1)return C(T[0])}else{var Y=N.name;S[Y]=N,U=Y}return!$&&U&&(v=U),U||!$&&v},j=function(C,N){if(O(C))return C.clone();var R=typeof N=="object"?N:{};return R.date=C,R.args=arguments,new q(R)},A=E;A.l=P,A.i=O,A.w=function(C,N){return j(C,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var q=function(){function C(R){this.$L=P(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[L]=!0}var N=C.prototype;return N.parse=function(R){this.$d=function($){var U=$.date,B=$.utc;if(U===null)return new Date(NaN);if(A.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var T=U.match(x);if(T){var Y=T[2]-1||0,X=(T[7]||"0").substring(0,3);return B?new Date(Date.UTC(T[1],Y,T[3]||1,T[4]||0,T[5]||0,T[6]||0,X)):new Date(T[1],Y,T[3]||1,T[4]||0,T[5]||0,T[6]||0,X)}}return new Date(U)}(R),this.init()},N.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},N.$utils=function(){return A},N.isValid=function(){return this.$d.toString()!==g},N.isSame=function(R,$){var U=j(R);return this.startOf($)<=U&&U<=this.endOf($)},N.isAfter=function(R,$){return j(R)<this.startOf($)},N.isBefore=function(R,$){return this.endOf($)<j(R)},N.$g=function(R,$,U){return A.u(R)?this[$]:this.set(U,R)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(R,$){var U=this,B=!!A.u($)||$,T=A.p(R),Y=function(ue,Ee){var Ce=A.w(U.$u?Date.UTC(U.$y,Ee,ue):new Date(U.$y,Ee,ue),U);return B?Ce:Ce.endOf(h)},X=function(ue,Ee){return A.w(U.toDate()[ue].apply(U.toDate("s"),(B?[0,0,0,0]:[23,59,59,999]).slice(Ee)),U)},I=this.$W,H=this.$M,W=this.$D,K="set"+(this.$u?"UTC":"");switch(T){case f:return B?Y(1,0):Y(31,11);case d:return B?Y(1,H):Y(0,H+1);case u:var le=this.$locale().weekStart||0,he=(I<le?I+7:I)-le;return Y(B?W-he:W+(6-he),H);case h:case p:return X(K+"Hours",0);case c:return X(K+"Minutes",1);case l:return X(K+"Seconds",2);case o:return X(K+"Milliseconds",3);default:return this.clone()}},N.endOf=function(R){return this.startOf(R,!1)},N.$set=function(R,$){var U,B=A.p(R),T="set"+(this.$u?"UTC":""),Y=(U={},U[h]=T+"Date",U[p]=T+"Date",U[d]=T+"Month",U[f]=T+"FullYear",U[c]=T+"Hours",U[l]=T+"Minutes",U[o]=T+"Seconds",U[s]=T+"Milliseconds",U)[B],X=B===h?this.$D+($-this.$W):$;if(B===d||B===f){var I=this.clone().set(p,1);I.$d[Y](X),I.init(),this.$d=I.set(p,Math.min(this.$D,I.daysInMonth())).$d}else Y&&this.$d[Y](X);return this.init(),this},N.set=function(R,$){return this.clone().$set(R,$)},N.get=function(R){return this[A.p(R)]()},N.add=function(R,$){var U,B=this;R=Number(R);var T=A.p($),Y=function(H){var W=j(B);return A.w(W.date(W.date()+Math.round(H*R)),B)};if(T===d)return this.set(d,this.$M+R);if(T===f)return this.set(f,this.$y+R);if(T===h)return Y(1);if(T===u)return Y(7);var X=(U={},U[l]=a,U[c]=r,U[o]=n,U)[T]||1,I=this.$d.getTime()+R*X;return A.w(I,this)},N.subtract=function(R,$){return this.add(-1*R,$)},N.format=function(R){var $=this,U=this.$locale();if(!this.isValid())return U.invalidDate||g;var B=R||"YYYY-MM-DDTHH:mm:ssZ",T=A.z(this),Y=this.$H,X=this.$m,I=this.$M,H=U.weekdays,W=U.months,K=U.meridiem,le=function(Ee,Ce,tt,nt){return Ee&&(Ee[Ce]||Ee($,B))||tt[Ce].slice(0,nt)},he=function(Ee){return A.s(Y%12||12,Ee,"0")},ue=K||function(Ee,Ce,tt){var nt=Ee<12?"AM":"PM";return tt?nt.toLowerCase():nt};return B.replace(b,function(Ee,Ce){return Ce||function(tt){switch(tt){case"YY":return String($.$y).slice(-2);case"YYYY":return A.s($.$y,4,"0");case"M":return I+1;case"MM":return A.s(I+1,2,"0");case"MMM":return le(U.monthsShort,I,W,3);case"MMMM":return le(W,I);case"D":return $.$D;case"DD":return A.s($.$D,2,"0");case"d":return String($.$W);case"dd":return le(U.weekdaysMin,$.$W,H,2);case"ddd":return le(U.weekdaysShort,$.$W,H,3);case"dddd":return H[$.$W];case"H":return String(Y);case"HH":return A.s(Y,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return ue(Y,X,!0);case"A":return ue(Y,X,!1);case"m":return String(X);case"mm":return A.s(X,2,"0");case"s":return String($.$s);case"ss":return A.s($.$s,2,"0");case"SSS":return A.s($.$ms,3,"0");case"Z":return T}return null}(Ee)||T.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(R,$,U){var B,T=this,Y=A.p($),X=j(R),I=(X.utcOffset()-this.utcOffset())*a,H=this-X,W=function(){return A.m(T,X)};switch(Y){case f:B=W()/12;break;case d:B=W();break;case m:B=W()/3;break;case u:B=(H-I)/6048e5;break;case h:B=(H-I)/864e5;break;case c:B=H/r;break;case l:B=H/a;break;case o:B=H/n;break;default:B=H}return U?B:A.a(B)},N.daysInMonth=function(){return this.endOf(d).$D},N.$locale=function(){return S[this.$L]},N.locale=function(R,$){if(!R)return this.$L;var U=this.clone(),B=P(R,$,!0);return B&&(U.$L=B),U},N.clone=function(){return A.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},C}(),M=q.prototype;return j.prototype=M,[["$ms",s],["$s",o],["$m",l],["$H",c],["$W",h],["$M",d],["$y",f],["$D",p]].forEach(function(C){M[C[1]]=function(N){return this.$g(N,C[0],C[1])}}),j.extend=function(C,N){return C.$i||(C(N,q,j),C.$i=!0),j},j.locale=P,j.isDayjs=O,j.unix=function(C){return j(1e3*C)},j.en=S[v],j.Ls=S,j.p={},j})}(Qc)),Qc.exports}var K8=Q8();const Z8=xg(K8);var jE=Object.defineProperty,_=(t,e)=>jE(t,"name",{value:e,configurable:!0}),eH=(t,e)=>{for(var n in e)jE(t,n,{get:e[n],enumerable:!0})},Vi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},te={trace:_((...t)=>{},"trace"),debug:_((...t)=>{},"debug"),info:_((...t)=>{},"info"),warn:_((...t)=>{},"warn"),error:_((...t)=>{},"error"),fatal:_((...t)=>{},"fatal")},qg=_(function(t="fatal"){let e=Vi.fatal;typeof t=="string"?t.toLowerCase()in Vi&&(e=Vi[t]):typeof t=="number"&&(e=t),te.trace=()=>{},te.debug=()=>{},te.info=()=>{},te.warn=()=>{},te.error=()=>{},te.fatal=()=>{},e<=Vi.fatal&&(te.fatal=console.error?console.error.bind(console,Vn("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Vn("FATAL"))),e<=Vi.error&&(te.error=console.error?console.error.bind(console,Vn("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Vn("ERROR"))),e<=Vi.warn&&(te.warn=console.warn?console.warn.bind(console,Vn("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Vn("WARN"))),e<=Vi.info&&(te.info=console.info?console.info.bind(console,Vn("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Vn("INFO"))),e<=Vi.debug&&(te.debug=console.debug?console.debug.bind(console,Vn("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Vn("DEBUG"))),e<=Vi.trace&&(te.trace=console.debug?console.debug.bind(console,Vn("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Vn("TRACE")))},"setLogLevel"),Vn=_(t=>`%c${Z8().format("ss.SSS")} : ${t} : `,"format");const Kc={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},a)=>{if(!e)return n*2.55;t/=360,e/=100,n/=100;const r=n<.5?n*(1+e):n+e-n*e,s=2*n-r;switch(a){case"r":return Kc.hue2rgb(s,r,t+1/3)*255;case"g":return Kc.hue2rgb(s,r,t)*255;case"b":return Kc.hue2rgb(s,r,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:n},a)=>{t/=255,e/=255,n/=255;const r=Math.max(t,e,n),s=Math.min(t,e,n),o=(r+s)/2;if(a==="l")return o*100;if(r===s)return 0;const l=r-s,c=o>.5?l/(2-r-s):l/(r+s);if(a==="s")return c*100;switch(r){case t:return((e-n)/l+(e<n?6:0))*60;case e:return((n-t)/l+2)*60;case n:return((t-e)/l+4)*60;default:return-1}}},tH={clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},nH={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},Le={channel:Kc,lang:tH,unit:nH},va={};for(let t=0;t<=255;t++)va[t]=Le.unit.dec2hex(t);const Xt={ALL:0,RGB:1,HSL:2};class iH{constructor(){this.type=Xt.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=Xt.ALL}is(e){return this.type===e}}class aH{constructor(e,n){this.color=n,this.changed=!1,this.data=e,this.type=new iH}set(e,n){return this.color=n,this.changed=!1,this.data=e,this.type.type=Xt.ALL,this}_ensureHSL(){const e=this.data,{h:n,s:a,l:r}=e;n===void 0&&(e.h=Le.channel.rgb2hsl(e,"h")),a===void 0&&(e.s=Le.channel.rgb2hsl(e,"s")),r===void 0&&(e.l=Le.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r:n,g:a,b:r}=e;n===void 0&&(e.r=Le.channel.hsl2rgb(e,"r")),a===void 0&&(e.g=Le.channel.hsl2rgb(e,"g")),r===void 0&&(e.b=Le.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,n=e.r;return!this.type.is(Xt.HSL)&&n!==void 0?n:(this._ensureHSL(),Le.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,n=e.g;return!this.type.is(Xt.HSL)&&n!==void 0?n:(this._ensureHSL(),Le.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,n=e.b;return!this.type.is(Xt.HSL)&&n!==void 0?n:(this._ensureHSL(),Le.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,n=e.h;return!this.type.is(Xt.RGB)&&n!==void 0?n:(this._ensureRGB(),Le.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,n=e.s;return!this.type.is(Xt.RGB)&&n!==void 0?n:(this._ensureRGB(),Le.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,n=e.l;return!this.type.is(Xt.RGB)&&n!==void 0?n:(this._ensureRGB(),Le.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(Xt.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(Xt.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(Xt.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(Xt.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(Xt.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(Xt.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const Eu=new aH({r:0,g:0,b:0,a:0},"transparent"),rs={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(rs.re);if(!e)return;const n=e[1],a=parseInt(n,16),r=n.length,s=r%4===0,o=r>4,l=o?1:17,c=o?8:4,h=s?0:-1,u=o?255:15;return Eu.set({r:(a>>c*(h+3)&u)*l,g:(a>>c*(h+2)&u)*l,b:(a>>c*(h+1)&u)*l,a:s?(a&u)*l/255:1},t)},stringify:t=>{const{r:e,g:n,b:a,a:r}=t;return r<1?`#${va[Math.round(e)]}${va[Math.round(n)]}${va[Math.round(a)]}${va[Math.round(r*255)]}`:`#${va[Math.round(e)]}${va[Math.round(n)]}${va[Math.round(a)]}`}},lr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(lr.hueRe);if(e){const[,n,a]=e;switch(a){case"grad":return Le.channel.clamp.h(parseFloat(n)*.9);case"rad":return Le.channel.clamp.h(parseFloat(n)*180/Math.PI);case"turn":return Le.channel.clamp.h(parseFloat(n)*360)}}return Le.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const n=t.match(lr.re);if(!n)return;const[,a,r,s,o,l]=n;return Eu.set({h:lr._hue2deg(a),s:Le.channel.clamp.s(parseFloat(r)),l:Le.channel.clamp.l(parseFloat(s)),a:o?Le.channel.clamp.a(l?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:n,l:a,a:r}=t;return r<1?`hsla(${Le.lang.round(e)}, ${Le.lang.round(n)}%, ${Le.lang.round(a)}%, ${r})`:`hsl(${Le.lang.round(e)}, ${Le.lang.round(n)}%, ${Le.lang.round(a)}%)`}},hl={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=hl.colors[t];if(e)return rs.parse(e)},stringify:t=>{const e=rs.stringify(t);for(const n in hl.colors)if(hl.colors[n]===e)return n}},$o={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const n=t.match($o.re);if(!n)return;const[,a,r,s,o,l,c,h,u]=n;return Eu.set({r:Le.channel.clamp.r(r?parseFloat(a)*2.55:parseFloat(a)),g:Le.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:Le.channel.clamp.b(c?parseFloat(l)*2.55:parseFloat(l)),a:h?Le.channel.clamp.a(u?parseFloat(h)/100:parseFloat(h)):1},t)},stringify:t=>{const{r:e,g:n,b:a,a:r}=t;return r<1?`rgba(${Le.lang.round(e)}, ${Le.lang.round(n)}, ${Le.lang.round(a)}, ${Le.lang.round(r)})`:`rgb(${Le.lang.round(e)}, ${Le.lang.round(n)}, ${Le.lang.round(a)})`}},Pi={format:{keyword:hl,hex:rs,rgb:$o,rgba:$o,hsl:lr,hsla:lr},parse:t=>{if(typeof t!="string")return t;const e=rs.parse(t)||$o.parse(t)||lr.parse(t)||hl.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Xt.HSL)||t.data.r===void 0?lr.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?$o.stringify(t):rs.stringify(t)},TE=(t,e)=>{const n=Pi.parse(t);for(const a in e)n[a]=Le.channel.clamp[a](e[a]);return Pi.stringify(n)},ul=(t,e,n=0,a=1)=>{if(typeof t!="number")return TE(t,{a:e});const r=Eu.set({r:Le.channel.clamp.r(t),g:Le.channel.clamp.g(e),b:Le.channel.clamp.b(n),a:Le.channel.clamp.a(a)});return Pi.stringify(r)},rH=t=>{const{r:e,g:n,b:a}=Pi.parse(t),r=.2126*Le.channel.toLinear(e)+.7152*Le.channel.toLinear(n)+.0722*Le.channel.toLinear(a);return Le.lang.round(r)},sH=t=>rH(t)>=.5,Jl=t=>!sH(t),kE=(t,e,n)=>{const a=Pi.parse(t),r=a[e],s=Le.channel.clamp[e](r+n);return r!==s&&(a[e]=s),Pi.stringify(a)},ge=(t,e)=>kE(t,"l",e),ke=(t,e)=>kE(t,"l",-e),J=(t,e)=>{const n=Pi.parse(t),a={};for(const r in e)e[r]&&(a[r]=n[r]+e[r]);return TE(t,a)},oH=(t,e,n=50)=>{const{r:a,g:r,b:s,a:o}=Pi.parse(t),{r:l,g:c,b:h,a:u}=Pi.parse(e),d=n/100,m=d*2-1,f=o-u,g=((m*f===-1?m:(m+f)/(1+m*f))+1)/2,x=1-g,b=a*g+l*x,w=r*g+c*x,k=s*g+h*x,E=o*d+u*(1-d);return ul(b,w,k,E)},de=(t,e=100)=>{const n=Pi.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,oH(n,t,e)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:EE,setPrototypeOf:wb,isFrozen:lH,getPrototypeOf:cH,getOwnPropertyDescriptor:hH}=Object;let{freeze:pn,seal:Zn,create:SE}=Object,{apply:ip,construct:ap}=typeof Reflect<"u"&&Reflect;pn||(pn=function(e){return e});Zn||(Zn=function(e){return e});ip||(ip=function(e,n,a){return e.apply(n,a)});ap||(ap=function(e,n){return new e(...n)});const wc=gn(Array.prototype.forEach),uH=gn(Array.prototype.lastIndexOf),_b=gn(Array.prototype.pop),ho=gn(Array.prototype.push),dH=gn(Array.prototype.splice),Zc=gn(String.prototype.toLowerCase),zd=gn(String.prototype.toString),vb=gn(String.prototype.match),uo=gn(String.prototype.replace),mH=gn(String.prototype.indexOf),fH=gn(String.prototype.trim),mi=gn(Object.prototype.hasOwnProperty),hn=gn(RegExp.prototype.test),mo=pH(TypeError);function gn(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return ip(t,e,a)}}function pH(t){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return ap(t,n)}}function ze(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zc;wb&&wb(t,null);let a=e.length;for(;a--;){let r=e[a];if(typeof r=="string"){const s=n(r);s!==r&&(lH(e)||(e[a]=s),r=s)}t[r]=!0}return t}function gH(t){for(let e=0;e<t.length;e++)mi(t,e)||(t[e]=null);return t}function Zi(t){const e=SE(null);for(const[n,a]of EE(t))mi(t,n)&&(Array.isArray(a)?e[n]=gH(a):a&&typeof a=="object"&&a.constructor===Object?e[n]=Zi(a):e[n]=a);return e}function fo(t,e){for(;t!==null;){const a=hH(t,e);if(a){if(a.get)return gn(a.get);if(typeof a.value=="function")return gn(a.value)}t=cH(t)}function n(){return null}return n}const jb=pn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wd=pn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ud=pn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xH=pn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vd=pn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yH=pn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Tb=pn(["#text"]),kb=pn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Yd=pn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Eb=pn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_c=pn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bH=Zn(/\{\{[\w\W]*|[\w\W]*\}\}/gm),wH=Zn(/<%[\w\W]*|[\w\W]*%>/gm),_H=Zn(/\$\{[\w\W]*/gm),vH=Zn(/^data-[\-\w.\u00B7-\uFFFF]+$/),jH=Zn(/^aria-[\-\w]+$/),CE=Zn(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),TH=Zn(/^(?:\w+script|data):/i),kH=Zn(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),AE=Zn(/^html$/i),EH=Zn(/^[a-z][.\w]*(-[.\w]+)+$/i);var Sb=Object.freeze({__proto__:null,ARIA_ATTR:jH,ATTR_WHITESPACE:kH,CUSTOM_ELEMENT:EH,DATA_ATTR:vH,DOCTYPE_NAME:AE,ERB_EXPR:wH,IS_ALLOWED_URI:CE,IS_SCRIPT_OR_DATA:TH,MUSTACHE_EXPR:bH,TMPLIT_EXPR:_H});const po={element:1,text:3,progressingInstruction:7,comment:8,document:9},SH=function(){return typeof window>"u"?null:window},CH=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let a=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(a=n.getAttribute(r));const s="dompurify"+(a?"#"+a:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Cb=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function NE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SH();const e=je=>NE(je);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==po.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const a=n,r=a.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:h,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:m,trustedTypes:f}=t,p=c.prototype,g=fo(p,"cloneNode"),x=fo(p,"remove"),b=fo(p,"nextSibling"),w=fo(p,"childNodes"),k=fo(p,"parentNode");if(typeof o=="function"){const je=n.createElement("template");je.content&&je.content.ownerDocument&&(n=je.content.ownerDocument)}let E,v="";const{implementation:S,createNodeIterator:L,createDocumentFragment:O,getElementsByTagName:P}=n,{importNode:j}=a;let A=Cb();e.isSupported=typeof EE=="function"&&typeof k=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:M,TMPLIT_EXPR:C,DATA_ATTR:N,ARIA_ATTR:R,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:B}=Sb;let{IS_ALLOWED_URI:T}=Sb,Y=null;const X=ze({},[...jb,...Wd,...Ud,...Vd,...Tb]);let I=null;const H=ze({},[...kb,...Yd,...Eb,..._c]);let W=Object.seal(SE(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,le=null,he=!0,ue=!0,Ee=!1,Ce=!0,tt=!1,nt=!0,Dt=!1,st=!1,at=!1,xt=!1,vt=!1,ln=!1,ii=!0,ji=!1;const zr="user-content-";let xa=!0,Wa=!1,ya={},ee=null;const ce=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Oe=null;const Fe=ze({},["audio","video","img","source","image","track"]);let Xe=null;const yn=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wn="http://www.w3.org/1998/Math/MathML",bn="http://www.w3.org/2000/svg",cn="http://www.w3.org/1999/xhtml";let Un=cn,Bt=!1,Ti=null;const ai=ze({},[Wn,bn,cn],zd);let mc=ze({},["mi","mo","mn","ms","mtext"]),fc=ze({},["annotation-xml"]);const wO=ze({},["title","style","font","a","script"]);let to=null;const _O=["application/xhtml+xml","text/html"],vO="text/html";let Ot=null,Wr=null;const jO=n.createElement("form"),Cy=function(G){return G instanceof RegExp||G instanceof Function},wd=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wr&&Wr===G)){if((!G||typeof G!="object")&&(G={}),G=Zi(G),to=_O.indexOf(G.PARSER_MEDIA_TYPE)===-1?vO:G.PARSER_MEDIA_TYPE,Ot=to==="application/xhtml+xml"?zd:Zc,Y=mi(G,"ALLOWED_TAGS")?ze({},G.ALLOWED_TAGS,Ot):X,I=mi(G,"ALLOWED_ATTR")?ze({},G.ALLOWED_ATTR,Ot):H,Ti=mi(G,"ALLOWED_NAMESPACES")?ze({},G.ALLOWED_NAMESPACES,zd):ai,Xe=mi(G,"ADD_URI_SAFE_ATTR")?ze(Zi(yn),G.ADD_URI_SAFE_ATTR,Ot):yn,Oe=mi(G,"ADD_DATA_URI_TAGS")?ze(Zi(Fe),G.ADD_DATA_URI_TAGS,Ot):Fe,ee=mi(G,"FORBID_CONTENTS")?ze({},G.FORBID_CONTENTS,Ot):ce,K=mi(G,"FORBID_TAGS")?ze({},G.FORBID_TAGS,Ot):Zi({}),le=mi(G,"FORBID_ATTR")?ze({},G.FORBID_ATTR,Ot):Zi({}),ya=mi(G,"USE_PROFILES")?G.USE_PROFILES:!1,he=G.ALLOW_ARIA_ATTR!==!1,ue=G.ALLOW_DATA_ATTR!==!1,Ee=G.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=G.ALLOW_SELF_CLOSE_IN_ATTR!==!1,tt=G.SAFE_FOR_TEMPLATES||!1,nt=G.SAFE_FOR_XML!==!1,Dt=G.WHOLE_DOCUMENT||!1,xt=G.RETURN_DOM||!1,vt=G.RETURN_DOM_FRAGMENT||!1,ln=G.RETURN_TRUSTED_TYPE||!1,at=G.FORCE_BODY||!1,ii=G.SANITIZE_DOM!==!1,ji=G.SANITIZE_NAMED_PROPS||!1,xa=G.KEEP_CONTENT!==!1,Wa=G.IN_PLACE||!1,T=G.ALLOWED_URI_REGEXP||CE,Un=G.NAMESPACE||cn,mc=G.MATHML_TEXT_INTEGRATION_POINTS||mc,fc=G.HTML_INTEGRATION_POINTS||fc,W=G.CUSTOM_ELEMENT_HANDLING||{},G.CUSTOM_ELEMENT_HANDLING&&Cy(G.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=G.CUSTOM_ELEMENT_HANDLING.tagNameCheck),G.CUSTOM_ELEMENT_HANDLING&&Cy(G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),G.CUSTOM_ELEMENT_HANDLING&&typeof G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tt&&(ue=!1),vt&&(xt=!0),ya&&(Y=ze({},Tb),I=[],ya.html===!0&&(ze(Y,jb),ze(I,kb)),ya.svg===!0&&(ze(Y,Wd),ze(I,Yd),ze(I,_c)),ya.svgFilters===!0&&(ze(Y,Ud),ze(I,Yd),ze(I,_c)),ya.mathMl===!0&&(ze(Y,Vd),ze(I,Eb),ze(I,_c))),G.ADD_TAGS&&(Y===X&&(Y=Zi(Y)),ze(Y,G.ADD_TAGS,Ot)),G.ADD_ATTR&&(I===H&&(I=Zi(I)),ze(I,G.ADD_ATTR,Ot)),G.ADD_URI_SAFE_ATTR&&ze(Xe,G.ADD_URI_SAFE_ATTR,Ot),G.FORBID_CONTENTS&&(ee===ce&&(ee=Zi(ee)),ze(ee,G.FORBID_CONTENTS,Ot)),xa&&(Y["#text"]=!0),Dt&&ze(Y,["html","head","body"]),Y.table&&(ze(Y,["tbody"]),delete K.tbody),G.TRUSTED_TYPES_POLICY){if(typeof G.TRUSTED_TYPES_POLICY.createHTML!="function")throw mo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof G.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw mo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=G.TRUSTED_TYPES_POLICY,v=E.createHTML("")}else E===void 0&&(E=CH(f,r)),E!==null&&typeof v=="string"&&(v=E.createHTML(""));pn&&pn(G),Wr=G}},Ay=ze({},[...Wd,...Ud,...xH]),Ny=ze({},[...Vd,...yH]),TO=function(G){let se=k(G);(!se||!se.tagName)&&(se={namespaceURI:Un,tagName:"template"});const _e=Zc(G.tagName),mt=Zc(se.tagName);return Ti[G.namespaceURI]?G.namespaceURI===bn?se.namespaceURI===cn?_e==="svg":se.namespaceURI===Wn?_e==="svg"&&(mt==="annotation-xml"||mc[mt]):!!Ay[_e]:G.namespaceURI===Wn?se.namespaceURI===cn?_e==="math":se.namespaceURI===bn?_e==="math"&&fc[mt]:!!Ny[_e]:G.namespaceURI===cn?se.namespaceURI===bn&&!fc[mt]||se.namespaceURI===Wn&&!mc[mt]?!1:!Ny[_e]&&(wO[_e]||!Ay[_e]):!!(to==="application/xhtml+xml"&&Ti[G.namespaceURI]):!1},ki=function(G){ho(e.removed,{element:G});try{k(G).removeChild(G)}catch{x(G)}},Ur=function(G,se){try{ho(e.removed,{attribute:se.getAttributeNode(G),from:se})}catch{ho(e.removed,{attribute:null,from:se})}if(se.removeAttribute(G),G==="is")if(xt||vt)try{ki(se)}catch{}else try{se.setAttribute(G,"")}catch{}},Iy=function(G){let se=null,_e=null;if(at)G="<remove></remove>"+G;else{const Et=vb(G,/^[\r\n\t ]+/);_e=Et&&Et[0]}to==="application/xhtml+xml"&&Un===cn&&(G='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+G+"</body></html>");const mt=E?E.createHTML(G):G;if(Un===cn)try{se=new m().parseFromString(mt,to)}catch{}if(!se||!se.documentElement){se=S.createDocument(Un,"template",null);try{se.documentElement.innerHTML=Bt?v:mt}catch{}}const Yt=se.body||se.documentElement;return G&&_e&&Yt.insertBefore(n.createTextNode(_e),Yt.childNodes[0]||null),Un===cn?P.call(se,Dt?"html":"body")[0]:Dt?se.documentElement:Yt},Ly=function(G){return L.call(G.ownerDocument||G,G,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},_d=function(G){return G instanceof d&&(typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof u)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"||typeof G.hasChildNodes!="function")},Oy=function(G){return typeof l=="function"&&G instanceof l};function Wi(je,G,se){wc(je,_e=>{_e.call(e,G,se,Wr)})}const My=function(G){let se=null;if(Wi(A.beforeSanitizeElements,G,null),_d(G))return ki(G),!0;const _e=Ot(G.nodeName);if(Wi(A.uponSanitizeElement,G,{tagName:_e,allowedTags:Y}),nt&&G.hasChildNodes()&&!Oy(G.firstElementChild)&&hn(/<[/\w!]/g,G.innerHTML)&&hn(/<[/\w!]/g,G.textContent)||G.nodeType===po.progressingInstruction||nt&&G.nodeType===po.comment&&hn(/<[/\w]/g,G.data))return ki(G),!0;if(!Y[_e]||K[_e]){if(!K[_e]&&Py(_e)&&(W.tagNameCheck instanceof RegExp&&hn(W.tagNameCheck,_e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(_e)))return!1;if(xa&&!ee[_e]){const mt=k(G)||G.parentNode,Yt=w(G)||G.childNodes;if(Yt&&mt){const Et=Yt.length;for(let wn=Et-1;wn>=0;--wn){const Ui=g(Yt[wn],!0);Ui.__removalCount=(G.__removalCount||0)+1,mt.insertBefore(Ui,b(G))}}}return ki(G),!0}return G instanceof c&&!TO(G)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&hn(/<\/no(script|embed|frames)/i,G.innerHTML)?(ki(G),!0):(tt&&G.nodeType===po.text&&(se=G.textContent,wc([q,M,C],mt=>{se=uo(se,mt," ")}),G.textContent!==se&&(ho(e.removed,{element:G.cloneNode()}),G.textContent=se)),Wi(A.afterSanitizeElements,G,null),!1)},Ry=function(G,se,_e){if(ii&&(se==="id"||se==="name")&&(_e in n||_e in jO))return!1;if(!(ue&&!le[se]&&hn(N,se))){if(!(he&&hn(R,se))){if(!I[se]||le[se]){if(!(Py(G)&&(W.tagNameCheck instanceof RegExp&&hn(W.tagNameCheck,G)||W.tagNameCheck instanceof Function&&W.tagNameCheck(G))&&(W.attributeNameCheck instanceof RegExp&&hn(W.attributeNameCheck,se)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(se))||se==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&hn(W.tagNameCheck,_e)||W.tagNameCheck instanceof Function&&W.tagNameCheck(_e))))return!1}else if(!Xe[se]){if(!hn(T,uo(_e,U,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&G!=="script"&&mH(_e,"data:")===0&&Oe[G])){if(!(Ee&&!hn($,uo(_e,U,"")))){if(_e)return!1}}}}}}return!0},Py=function(G){return G!=="annotation-xml"&&vb(G,B)},Dy=function(G){Wi(A.beforeSanitizeAttributes,G,null);const{attributes:se}=G;if(!se||_d(G))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:I,forceKeepAttr:void 0};let mt=se.length;for(;mt--;){const Yt=se[mt],{name:Et,namespaceURI:wn,value:Ui}=Yt,no=Ot(Et),vd=Ui;let Gt=Et==="value"?vd:fH(vd);if(_e.attrName=no,_e.attrValue=Gt,_e.keepAttr=!0,_e.forceKeepAttr=void 0,Wi(A.uponSanitizeAttribute,G,_e),Gt=_e.attrValue,ji&&(no==="id"||no==="name")&&(Ur(Et,G),Gt=zr+Gt),nt&&hn(/((--!?|])>)|<\/(style|title)/i,Gt)){Ur(Et,G);continue}if(_e.forceKeepAttr)continue;if(!_e.keepAttr){Ur(Et,G);continue}if(!Ce&&hn(/\/>/i,Gt)){Ur(Et,G);continue}tt&&wc([q,M,C],Fy=>{Gt=uo(Gt,Fy," ")});const By=Ot(G.nodeName);if(!Ry(By,no,Gt)){Ur(Et,G);continue}if(E&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!wn)switch(f.getAttributeType(By,no)){case"TrustedHTML":{Gt=E.createHTML(Gt);break}case"TrustedScriptURL":{Gt=E.createScriptURL(Gt);break}}if(Gt!==vd)try{wn?G.setAttributeNS(wn,Et,Gt):G.setAttribute(Et,Gt),_d(G)?ki(G):_b(e.removed)}catch{Ur(Et,G)}}Wi(A.afterSanitizeAttributes,G,null)},kO=function je(G){let se=null;const _e=Ly(G);for(Wi(A.beforeSanitizeShadowDOM,G,null);se=_e.nextNode();)Wi(A.uponSanitizeShadowNode,se,null),My(se),Dy(se),se.content instanceof s&&je(se.content);Wi(A.afterSanitizeShadowDOM,G,null)};return e.sanitize=function(je){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,_e=null,mt=null,Yt=null;if(Bt=!je,Bt&&(je="<!-->"),typeof je!="string"&&!Oy(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw mo("dirty is not a string, aborting")}else throw mo("toString is not a function");if(!e.isSupported)return je;if(st||wd(G),e.removed=[],typeof je=="string"&&(Wa=!1),Wa){if(je.nodeName){const Ui=Ot(je.nodeName);if(!Y[Ui]||K[Ui])throw mo("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof l)se=Iy("<!---->"),_e=se.ownerDocument.importNode(je,!0),_e.nodeType===po.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?se=_e:se.appendChild(_e);else{if(!xt&&!tt&&!Dt&&je.indexOf("<")===-1)return E&&ln?E.createHTML(je):je;if(se=Iy(je),!se)return xt?null:ln?v:""}se&&at&&ki(se.firstChild);const Et=Ly(Wa?je:se);for(;mt=Et.nextNode();)My(mt),Dy(mt),mt.content instanceof s&&kO(mt.content);if(Wa)return je;if(xt){if(vt)for(Yt=O.call(se.ownerDocument);se.firstChild;)Yt.appendChild(se.firstChild);else Yt=se;return(I.shadowroot||I.shadowrootmode)&&(Yt=j.call(a,Yt,!0)),Yt}let wn=Dt?se.outerHTML:se.innerHTML;return Dt&&Y["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&hn(AE,se.ownerDocument.doctype.name)&&(wn="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+wn),tt&&wc([q,M,C],Ui=>{wn=uo(wn,Ui," ")}),E&&ln?E.createHTML(wn):wn},e.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wd(je),st=!0},e.clearConfig=function(){Wr=null,st=!1},e.isValidAttribute=function(je,G,se){Wr||wd({});const _e=Ot(je),mt=Ot(G);return Ry(_e,mt,se)},e.addHook=function(je,G){typeof G=="function"&&ho(A[je],G)},e.removeHook=function(je,G){if(G!==void 0){const se=uH(A[je],G);return se===-1?void 0:dH(A[je],se,1)[0]}return _b(A[je])},e.removeHooks=function(je){A[je]=[]},e.removeAllHooks=function(){A=Cb()},e}var _s=NE(),IE=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,dl=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,AH=/\s*%%.*\n/gm,hs,LE=(hs=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},_(hs,"UnknownDiagramError"),hs),vr={},$g=_(function(t,e){t=t.replace(IE,"").replace(dl,"").replace(AH,`
`);for(const[n,{detector:a}]of Object.entries(vr))if(a(t,e))return n;throw new LE(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),rp=_((...t)=>{for(const{id:e,detector:n,loader:a}of t)OE(e,n,a)},"registerLazyLoadedDiagrams"),OE=_((t,e,n)=>{vr[t]&&te.warn(`Detector with key ${t} already exists. Overwriting.`),vr[t]={detector:e,loader:n},te.debug(`Detector with key ${t} added${n?" with loader":""}`)},"addDetector"),NH=_(t=>vr[t].loader,"getDiagramLoader"),sp=_((t,e,{depth:n=2,clobber:a=!1}={})=>{const r={depth:n,clobber:a};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>sp(t,s,r)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||n<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=sp(t[s],e[s],{depth:n-1,clobber:a})):(a||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),At=sp,Su="#ffffff",Cu="#f2f2f2",dn=_((t,e)=>e?J(t,{s:-40,l:10}):J(t,{s:-40,l:-10}),"mkBorder"),us,IH=(us=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||J(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||J(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||dn(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||dn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||dn(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||dn(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||de(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||de(this.tertiaryColor),this.lineColor=this.lineColor||de(this.background),this.arrowheadColor=this.arrowheadColor||de(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ke(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ke(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||de(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ge(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ke(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ke(this.mainBkg,10)):(this.rowOdd=this.rowOdd||ge(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ge(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.darkMode)for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScale"+n]=ke(this["cScale"+n],75);else for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScale"+n]=ke(this["cScale"+n],25);for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScaleInv"+n]=this["cScaleInv"+n]||de(this["cScale"+n]);for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this.darkMode?this["cScalePeer"+n]=this["cScalePeer"+n]||ge(this["cScale"+n],10):this["cScalePeer"+n]=this["cScalePeer"+n]||ke(this["cScale"+n],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let n=0;n<this.THEME_COLOR_LIMIT;n++)this["cScaleLabel"+n]=this["cScaleLabel"+n]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let n=0;n<5;n++)this["surface"+n]=this["surface"+n]||J(this.mainBkg,{h:180,s:-15,l:e*(5+n*3)}),this["surfacePeer"+n]=this["surfacePeer"+n]||J(this.mainBkg,{h:180,s:-15,l:e*(8+n*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||J(this.primaryColor,{h:64}),this.fillType3=this.fillType3||J(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||J(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||J(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||J(this.primaryColor,{h:128}),this.fillType7=this.fillType7||J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||J(this.primaryColor,{l:-10}),this.pie5=this.pie5||J(this.secondaryColor,{l:-10}),this.pie6=this.pie6||J(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||J(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jl(this.quadrant1Fill)?ge(this.quadrant1Fill):ke(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ke(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)):(this.git0=ke(this.git0,25),this.git1=ke(this.git1,25),this.git2=ke(this.git2,25),this.git3=ke(this.git3,25),this.git4=ke(this.git4,25),this.git5=ke(this.git5,25),this.git6=ke(this.git6,25),this.git7=ke(this.git7,25)),this.gitInv0=this.gitInv0||de(this.git0),this.gitInv1=this.gitInv1||de(this.git1),this.gitInv2=this.gitInv2||de(this.git2),this.gitInv3=this.gitInv3||de(this.git3),this.gitInv4=this.gitInv4||de(this.git4),this.gitInv5=this.gitInv5||de(this.git5),this.gitInv6=this.gitInv6||de(this.git6),this.gitInv7=this.gitInv7||de(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Su,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cu}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(a=>{this[a]=e[a]}),this.updateColors(),n.forEach(a=>{this[a]=e[a]})}},_(us,"Theme"),us),LH=_(t=>{const e=new IH;return e.calculate(t),e},"getThemeVariables"),ds,OH=(ds=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ge(this.primaryColor,16),this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=de(this.background),this.secondaryBorderColor=dn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=dn(this.tertiaryColor,this.darkMode),this.primaryTextColor=de(this.primaryColor),this.secondaryTextColor=de(this.secondaryColor),this.tertiaryTextColor=de(this.tertiaryColor),this.lineColor=de(this.background),this.textColor=de(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ge(de("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=ul(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ke("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ke(this.sectionBkgColor,10),this.taskBorderColor=ul(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=ul(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ge(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ke(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=ge(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ge(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ge(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||de(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||J(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||J(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jl(this.quadrant1Fill)?ge(this.quadrant1Fill):ke(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ke(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ge(this.secondaryColor,20),this.git1=ge(this.pie2||this.secondaryColor,20),this.git2=ge(this.pie3||this.tertiaryColor,20),this.git3=ge(this.pie4||J(this.primaryColor,{h:-30}),20),this.git4=ge(this.pie5||J(this.primaryColor,{h:-60}),20),this.git5=ge(this.pie6||J(this.primaryColor,{h:-90}),10),this.git6=ge(this.pie7||J(this.primaryColor,{h:60}),10),this.git7=ge(this.pie8||J(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||de(this.git0),this.gitInv1=this.gitInv1||de(this.git1),this.gitInv2=this.gitInv2||de(this.git2),this.gitInv3=this.gitInv3||de(this.git3),this.gitInv4=this.gitInv4||de(this.git4),this.gitInv5=this.gitInv5||de(this.git5),this.gitInv6=this.gitInv6||de(this.git6),this.gitInv7=this.gitInv7||de(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||de(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||de(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ge(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ge(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(a=>{this[a]=e[a]}),this.updateColors(),n.forEach(a=>{this[a]=e[a]})}},_(ds,"Theme"),ds),MH=_(t=>{const e=new OH;return e.calculate(t),e},"getThemeVariables"),ms,RH=(ms=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=J(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=dn(this.primaryColor,this.darkMode),this.secondaryBorderColor=dn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=dn(this.tertiaryColor,this.darkMode),this.primaryTextColor=de(this.primaryColor),this.secondaryTextColor=de(this.secondaryColor),this.tertiaryTextColor=de(this.tertiaryColor),this.lineColor=de(this.background),this.textColor=de(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=ul(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ke(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ke(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ke(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ke(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||J(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||J(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||de(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||de(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ge(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ge(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||ge(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||J(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||J(this.primaryColor,{l:-10}),this.pie5=this.pie5||J(this.secondaryColor,{l:-30}),this.pie6=this.pie6||J(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||J(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jl(this.quadrant1Fill)?ge(this.quadrant1Fill):ke(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)):(this.git0=ke(this.git0,25),this.git1=ke(this.git1,25),this.git2=ke(this.git2,25),this.git3=ke(this.git3,25),this.git4=ke(this.git4,25),this.git5=ke(this.git5,25),this.git6=ke(this.git6,25),this.git7=ke(this.git7,25)),this.gitInv0=this.gitInv0||ke(de(this.git0),25),this.gitInv1=this.gitInv1||de(this.git1),this.gitInv2=this.gitInv2||de(this.git2),this.gitInv3=this.gitInv3||de(this.git3),this.gitInv4=this.gitInv4||de(this.git4),this.gitInv5=this.gitInv5||de(this.git5),this.gitInv6=this.gitInv6||de(this.git6),this.gitInv7=this.gitInv7||de(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||de(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||de(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Su,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cu}calculate(e){if(Object.keys(this).forEach(a=>{this[a]==="calculated"&&(this[a]=void 0)}),typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(a=>{this[a]=e[a]}),this.updateColors(),n.forEach(a=>{this[a]=e[a]})}},_(ms,"Theme"),ms),PH=_(t=>{const e=new RH;return e.calculate(t),e},"getThemeVariables"),fs,DH=(fs=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ge("#cde498",10),this.primaryBorderColor=dn(this.primaryColor,this.darkMode),this.secondaryBorderColor=dn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=dn(this.tertiaryColor,this.darkMode),this.primaryTextColor=de(this.primaryColor),this.secondaryTextColor=de(this.secondaryColor),this.tertiaryTextColor=de(this.primaryColor),this.lineColor=de(this.background),this.textColor=de(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=ke(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||J(this.primaryColor,{h:30}),this.cScale4=this.cScale4||J(this.primaryColor,{h:60}),this.cScale5=this.cScale5||J(this.primaryColor,{h:90}),this.cScale6=this.cScale6||J(this.primaryColor,{h:120}),this.cScale7=this.cScale7||J(this.primaryColor,{h:150}),this.cScale8=this.cScale8||J(this.primaryColor,{h:210}),this.cScale9=this.cScale9||J(this.primaryColor,{h:270}),this.cScale10=this.cScale10||J(this.primaryColor,{h:300}),this.cScale11=this.cScale11||J(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ke(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ke(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ke(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ke(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||J(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||J(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||ge(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||ge(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||J(this.primaryColor,{l:-30}),this.pie5=this.pie5||J(this.secondaryColor,{l:-30}),this.pie6=this.pie6||J(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||J(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||J(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||J(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||J(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||J(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||J(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jl(this.quadrant1Fill)?ge(this.quadrant1Fill):ke(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||J(this.primaryColor,{h:-30}),this.git4=this.git4||J(this.primaryColor,{h:-60}),this.git5=this.git5||J(this.primaryColor,{h:-90}),this.git6=this.git6||J(this.primaryColor,{h:60}),this.git7=this.git7||J(this.primaryColor,{h:120}),this.darkMode?(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)):(this.git0=ke(this.git0,25),this.git1=ke(this.git1,25),this.git2=ke(this.git2,25),this.git3=ke(this.git3,25),this.git4=ke(this.git4,25),this.git5=ke(this.git5,25),this.git6=ke(this.git6,25),this.git7=ke(this.git7,25)),this.gitInv0=this.gitInv0||de(this.git0),this.gitInv1=this.gitInv1||de(this.git1),this.gitInv2=this.gitInv2||de(this.git2),this.gitInv3=this.gitInv3||de(this.git3),this.gitInv4=this.gitInv4||de(this.git4),this.gitInv5=this.gitInv5||de(this.git5),this.gitInv6=this.gitInv6||de(this.git6),this.gitInv7=this.gitInv7||de(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||de(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||de(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Su,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cu}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(a=>{this[a]=e[a]}),this.updateColors(),n.forEach(a=>{this[a]=e[a]})}},_(fs,"Theme"),fs),BH=_(t=>{const e=new DH;return e.calculate(t),e},"getThemeVariables"),ps,FH=(ps=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ge(this.contrast,55),this.background="#ffffff",this.tertiaryColor=J(this.primaryColor,{h:-160}),this.primaryBorderColor=dn(this.primaryColor,this.darkMode),this.secondaryBorderColor=dn(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=dn(this.tertiaryColor,this.darkMode),this.primaryTextColor=de(this.primaryColor),this.secondaryTextColor=de(this.secondaryColor),this.tertiaryTextColor=de(this.tertiaryColor),this.lineColor=de(this.background),this.textColor=de(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||ge(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=ge(this.contrast,55),this.border2=this.contrast,this.actorBorder=ge(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||de(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||ge(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ke(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||J(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||J(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=ge(this.contrast,30),this.sectionBkgColor2=ge(this.contrast,30),this.taskBorderColor=ke(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ge(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ke(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=J(this.primaryColor,{h:64}),this.fillType3=J(this.secondaryColor,{h:64}),this.fillType4=J(this.primaryColor,{h:-64}),this.fillType5=J(this.secondaryColor,{h:-64}),this.fillType6=J(this.primaryColor,{h:128}),this.fillType7=J(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||J(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||J(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||J(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||J(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||J(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||J(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Jl(this.quadrant1Fill)?ge(this.quadrant1Fill):ke(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ke(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||J(this.primaryColor,{h:-30}),this.git4=this.pie5||J(this.primaryColor,{h:-60}),this.git5=this.pie6||J(this.primaryColor,{h:-90}),this.git6=this.pie7||J(this.primaryColor,{h:60}),this.git7=this.pie8||J(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||de(this.git0),this.gitInv1=this.gitInv1||de(this.git1),this.gitInv2=this.gitInv2||de(this.git2),this.gitInv3=this.gitInv3||de(this.git3),this.gitInv4=this.gitInv4||de(this.git4),this.gitInv5=this.gitInv5||de(this.git5),this.gitInv6=this.gitInv6||de(this.git6),this.gitInv7=this.gitInv7||de(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Su,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Cu}calculate(e){if(typeof e!="object"){this.updateColors();return}const n=Object.keys(e);n.forEach(a=>{this[a]=e[a]}),this.updateColors(),n.forEach(a=>{this[a]=e[a]})}},_(ps,"Theme"),ps),HH=_(t=>{const e=new FH;return e.calculate(t),e},"getThemeVariables"),ca={base:{getThemeVariables:LH},dark:{getThemeVariables:MH},default:{getThemeVariables:PH},forest:{getThemeVariables:BH},neutral:{getThemeVariables:HH}},Ei={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},ME={...Ei,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:ca.default.getThemeVariables(),sequence:{...Ei.sequence,messageFont:_(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:_(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:_(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ei.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ei.c4,useWidth:void 0,personFont:_(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ei.flowchart,inheritDir:!1},external_personFont:_(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:_(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:_(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:_(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:_(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:_(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:_(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:_(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:_(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:_(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:_(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:_(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:_(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:_(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:_(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:_(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:_(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:_(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:_(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:_(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:_(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ei.pie,useWidth:984},xyChart:{...Ei.xyChart,useWidth:void 0},requirement:{...Ei.requirement,useWidth:void 0},packet:{...Ei.packet},radar:{...Ei.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},RE=_((t,e="")=>Object.keys(t).reduce((n,a)=>Array.isArray(t[a])?n:typeof t[a]=="object"&&t[a]!==null?[...n,e+a,...RE(t[a],"")]:[...n,e+a],[]),"keyify"),qH=new Set(RE(ME,"")),PE=ME,_h=_(t=>{if(te.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>_h(e));return}for(const e of Object.keys(t)){if(te.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!qH.has(e)||t[e]==null){te.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){te.debug("sanitizing object",e),_h(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const a of n)e.includes(a)&&(te.debug("sanitizing css option",e),t[e]=$H(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];n?.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}te.debug("After sanitization",t)}},"sanitizeDirective"),$H=_(t=>{let e=0,n=0;for(const a of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";a==="{"?e++:a==="}"&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),vs=Object.freeze(PE),kn=At({},vs),vh,jr=[],ml=At({},vs),Au=_((t,e)=>{let n=At({},t),a={};for(const r of e)FE(r),a=At(a,r);if(n=At(n,a),a.theme&&a.theme in ca){const r=At({},vh),s=At(r.themeVariables||{},a.themeVariables);n.theme&&n.theme in ca&&(n.themeVariables=ca[n.theme].getThemeVariables(s))}return ml=n,HE(ml),ml},"updateCurrentConfig"),zH=_(t=>(kn=At({},vs),kn=At(kn,t),t.theme&&ca[t.theme]&&(kn.themeVariables=ca[t.theme].getThemeVariables(t.themeVariables)),Au(kn,jr),kn),"setSiteConfig"),WH=_(t=>{vh=At({},t)},"saveConfigFromInitialize"),UH=_(t=>(kn=At(kn,t),Au(kn,jr),kn),"updateSiteConfig"),DE=_(()=>At({},kn),"getSiteConfig"),BE=_(t=>(HE(t),At(ml,t),en()),"setConfig"),en=_(()=>At({},ml),"getConfig"),FE=_(t=>{t&&(["secure",...kn.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(te.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&FE(t[e])}))},"sanitize"),VH=_(t=>{_h(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),jr.push(t),Au(kn,jr)},"addDirective"),jh=_((t=kn)=>{jr=[],Au(t,jr)},"reset"),YH={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Ab={},GH=_(t=>{Ab[t]||(te.warn(YH[t]),Ab[t]=!0)},"issueWarning"),HE=_(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&GH("LAZY_LOAD_DEPRECATED")},"checkConfig"),Mce=_(()=>{let t={};vh&&(t=At(t,vh));for(const e of jr)t=At(t,e);return t},"getUserDefinedConfig"),Ql=/<br\s*\/?>/gi,XH=_(t=>t?zE(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),JH=(()=>{let t=!1;return()=>{t||(qE(),t=!0)}})();function qE(){const t="data-temp-href-target";_s.addHook("beforeSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),_s.addHook("afterSanitizeAttributes",e=>{e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}_(qE,"setupDompurifyHooks");var $E=_(t=>(JH(),_s.sanitize(t)),"removeScript"),Nb=_((t,e)=>{if(e.flowchart?.htmlLabels!==!1){const n=e.securityLevel;n==="antiscript"||n==="strict"?t=$E(t):n!=="loose"&&(t=zE(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=eq(t))}return t},"sanitizeMore"),ei=_((t,e)=>t&&(e.dompurifyConfig?t=_s.sanitize(Nb(t,e),e.dompurifyConfig).toString():t=_s.sanitize(Nb(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),QH=_((t,e)=>typeof t=="string"?ei(t,e):t.flat().map(n=>ei(n,e)),"sanitizeTextOrArray"),KH=_(t=>Ql.test(t),"hasBreaks"),ZH=_(t=>t.split(Ql),"splitBreaks"),eq=_(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),zE=_(t=>t.replace(Ql,"#br#"),"breakToPlaceholder"),tq=_(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),Lt=_(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),nq=_(function(...t){const e=t.filter(n=>!isNaN(n));return Math.max(...e)},"getMax"),iq=_(function(...t){const e=t.filter(n=>!isNaN(n));return Math.min(...e)},"getMin"),Ib=_(function(t){const e=t.split(/(,)/),n=[];for(let a=0;a<e.length;a++){let r=e[a];if(r===","&&a>0&&a+1<e.length){const s=e[a-1],o=e[a+1];aq(s,o)&&(r=s+","+o,a++,n.pop())}n.push(rq(r))}return n.join("")},"parseGenericTypes"),op=_((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),aq=_((t,e)=>{const n=op(t,"~"),a=op(e,"~");return n===1&&a===1},"shouldCombineSets"),rq=_(t=>{const e=op(t,"~");let n=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),n=!0);const a=[...t];let r=a.indexOf("~"),s=a.lastIndexOf("~");for(;r!==-1&&s!==-1&&r!==s;)a[r]="<",a[s]=">",r=a.indexOf("~"),s=a.lastIndexOf("~");return n&&a.unshift("~"),a.join("")},"processSet"),Lb=_(()=>window.MathMLElement!==void 0,"isMathMLSupported"),lp=/\$\$(.*)\$\$/g,js=_(t=>(t.match(lp)?.length??0)>0,"hasKatex"),Rce=_(async(t,e)=>{const n=document.createElement("div");n.innerHTML=await zg(t,e),n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",n);const r={width:n.clientWidth,height:n.clientHeight};return n.remove(),r},"calculateMathMLDimensions"),sq=_(async(t,e)=>{if(!js(t))return t;if(!(Lb()||e.legacyMathML||e.forceLegacyMathML))return t.replace(lp,"MathML is unsupported in this environment.");{const{default:n}=await oe(async()=>{const{default:r}=await import("./chunk-qrhCpa0F.js");return{default:r}},[]),a=e.forceLegacyMathML||!Lb()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(Ql).map(r=>js(r)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${r}</div>`:`<div>${r}</div>`).join("").replace(lp,(r,s)=>n.renderToString(s,{throwOnError:!0,displayMode:!0,output:a}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),zg=_(async(t,e)=>ei(await sq(t,e),e),"renderKatexSanitized"),zs={getRows:XH,sanitizeText:ei,sanitizeTextOrArray:QH,hasBreaks:KH,splitBreaks:ZH,lineBreakRegex:Ql,removeScript:$E,getUrl:tq,evaluate:Lt,getMax:nq,getMin:iq},oq=_(function(t,e){for(let n of e)t.attr(n[0],n[1])},"d3Attrs"),lq=_(function(t,e,n){let a=new Map;return n?(a.set("width","100%"),a.set("style",`max-width: ${e}px;`)):(a.set("height",t),a.set("width",e)),a},"calculateSvgSizeAttrs"),WE=_(function(t,e,n,a){const r=lq(e,n,a);oq(t,r)},"configureSvgSize"),cq=_(function(t,e,n,a){const r=e.node().getBBox(),s=r.width,o=r.height;te.info(`SVG bounds: ${s}x${o}`,r);let l=0,c=0;te.info(`Graph bounds: ${l}x${c}`,t),l=s+n*2,c=o+n*2,te.info(`Calculated bounds: ${l}x${c}`),WE(e,c,l,a);const h=`${r.x-n} ${r.y-n} ${r.width+2*n} ${r.height+2*n}`;e.attr("viewBox",h)},"setupGraphViewbox"),eh={},hq=_((t,e,n)=>{let a="";return t in eh&&eh[t]?a=eh[t](n):te.warn(`No theme found for ${t}`),` & {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
    fill: ${n.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${n.errorBkgColor};
  }
  & .error-text {
    fill: ${n.errorTextColor};
    stroke: ${n.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${n.lineColor};
    stroke: ${n.lineColor};
  }
  & .marker.cross {
    stroke: ${n.lineColor};
  }

  & svg {
    font-family: ${n.fontFamily};
    font-size: ${n.fontSize};
  }
   & p {
    margin: 0
   }

  ${a}

  ${e}
`},"getStyles"),uq=_((t,e)=>{e!==void 0&&(eh[t]=e)},"addStylesForDiagram"),dq=hq,UE={};eH(UE,{clear:()=>mq,getAccDescription:()=>xq,getAccTitle:()=>pq,getDiagramTitle:()=>bq,setAccDescription:()=>gq,setAccTitle:()=>fq,setDiagramTitle:()=>yq});var Wg="",Ug="",Vg="",Yg=_(t=>ei(t,en()),"sanitizeText"),mq=_(()=>{Wg="",Vg="",Ug=""},"clear"),fq=_(t=>{Wg=Yg(t).replace(/^\s+/g,"")},"setAccTitle"),pq=_(()=>Wg,"getAccTitle"),gq=_(t=>{Vg=Yg(t).replace(/\n\s+/g,`
`)},"setAccDescription"),xq=_(()=>Vg,"getAccDescription"),yq=_(t=>{Ug=Yg(t)},"setDiagramTitle"),bq=_(()=>Ug,"getDiagramTitle"),Ob=te,wq=qg,Ke=en,Pce=BE,Dce=vs,Gg=_(t=>ei(t,Ke()),"sanitizeText"),_q=cq,vq=_(()=>UE,"getCommonDb"),Th={},kh=_((t,e,n)=>{Th[t]&&Ob.warn(`Diagram with id ${t} already registered. Overwriting.`),Th[t]=e,n&&OE(t,n),uq(t,e.styles),e.injectUtils?.(Ob,wq,Ke,Gg,_q,vq(),()=>{})},"registerDiagram"),cp=_(t=>{if(t in Th)return Th[t];throw new jq(t)},"getDiagram"),gs,jq=(gs=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},_(gs,"DiagramNotFoundError"),gs),Tq={value:()=>{}};function VE(){for(var t=0,e=arguments.length,n={},a;t<e;++t){if(!(a=arguments[t]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new th(n)}function th(t){this._=t}function kq(t,e){return t.trim().split(/^|\s+/).map(function(n){var a="",r=n.indexOf(".");if(r>=0&&(a=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}th.prototype=VE.prototype={constructor:th,on:function(t,e){var n=this._,a=kq(t+"",n),r,s=-1,o=a.length;if(arguments.length<2){for(;++s<o;)if((r=(t=a[s]).type)&&(r=Eq(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=a[s]).type)n[r]=Mb(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Mb(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new th(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),a=0,r,s;a<r;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],a=0,r=s.length;a<r;++a)s[a].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],r=0,s=a.length;r<s;++r)a[r].value.apply(e,n)}};function Eq(t,e){for(var n=0,a=t.length,r;n<a;++n)if((r=t[n]).name===e)return r.value}function Mb(t,e,n){for(var a=0,r=t.length;a<r;++a)if(t[a].name===e){t[a]=Tq,t=t.slice(0,a).concat(t.slice(a+1));break}return n!=null&&t.push({name:e,value:n}),t}var hp="http://www.w3.org/1999/xhtml";const Rb={svg:"http://www.w3.org/2000/svg",xhtml:hp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nu(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Rb.hasOwnProperty(e)?{space:Rb[e],local:t}:t}function Sq(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hp&&e.documentElement.namespaceURI===hp?e.createElement(t):e.createElementNS(n,t)}}function Cq(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function YE(t){var e=Nu(t);return(e.local?Cq:Sq)(e)}function Aq(){}function Xg(t){return t==null?Aq:function(){return this.querySelector(t)}}function Nq(t){typeof t!="function"&&(t=Xg(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,l=a[r]=new Array(o),c,h,u=0;u<o;++u)(c=s[u])&&(h=t.call(c,c.__data__,u,s))&&("__data__"in c&&(h.__data__=c.__data__),l[u]=h);return new $n(a,this._parents)}function Iq(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Lq(){return[]}function GE(t){return t==null?Lq:function(){return this.querySelectorAll(t)}}function Oq(t){return function(){return Iq(t.apply(this,arguments))}}function Mq(t){typeof t=="function"?t=Oq(t):t=GE(t);for(var e=this._groups,n=e.length,a=[],r=[],s=0;s<n;++s)for(var o=e[s],l=o.length,c,h=0;h<l;++h)(c=o[h])&&(a.push(t.call(c,c.__data__,h,o)),r.push(c));return new $n(a,r)}function XE(t){return function(){return this.matches(t)}}function JE(t){return function(e){return e.matches(t)}}var Rq=Array.prototype.find;function Pq(t){return function(){return Rq.call(this.children,t)}}function Dq(){return this.firstElementChild}function Bq(t){return this.select(t==null?Dq:Pq(typeof t=="function"?t:JE(t)))}var Fq=Array.prototype.filter;function Hq(){return Array.from(this.children)}function qq(t){return function(){return Fq.call(this.children,t)}}function $q(t){return this.selectAll(t==null?Hq:qq(typeof t=="function"?t:JE(t)))}function zq(t){typeof t!="function"&&(t=XE(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,l=a[r]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&l.push(c);return new $n(a,this._parents)}function QE(t){return new Array(t.length)}function Wq(){return new $n(this._enter||this._groups.map(QE),this._parents)}function Eh(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Eh.prototype={constructor:Eh,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Uq(t){return function(){return t}}function Vq(t,e,n,a,r,s){for(var o=0,l,c=e.length,h=s.length;o<h;++o)(l=e[o])?(l.__data__=s[o],a[o]=l):n[o]=new Eh(t,s[o]);for(;o<c;++o)(l=e[o])&&(r[o]=l)}function Yq(t,e,n,a,r,s,o){var l,c,h=new Map,u=e.length,d=s.length,m=new Array(u),f;for(l=0;l<u;++l)(c=e[l])&&(m[l]=f=o.call(c,c.__data__,l,e)+"",h.has(f)?r[l]=c:h.set(f,c));for(l=0;l<d;++l)f=o.call(t,s[l],l,s)+"",(c=h.get(f))?(a[l]=c,c.__data__=s[l],h.delete(f)):n[l]=new Eh(t,s[l]);for(l=0;l<u;++l)(c=e[l])&&h.get(m[l])===c&&(r[l]=c)}function Gq(t){return t.__data__}function Xq(t,e){if(!arguments.length)return Array.from(this,Gq);var n=e?Yq:Vq,a=this._parents,r=this._groups;typeof t!="function"&&(t=Uq(t));for(var s=r.length,o=new Array(s),l=new Array(s),c=new Array(s),h=0;h<s;++h){var u=a[h],d=r[h],m=d.length,f=Jq(t.call(u,u&&u.__data__,h,a)),p=f.length,g=l[h]=new Array(p),x=o[h]=new Array(p),b=c[h]=new Array(m);n(u,d,g,x,b,f,e);for(var w=0,k=0,E,v;w<p;++w)if(E=g[w]){for(w>=k&&(k=w+1);!(v=x[k])&&++k<p;);E._next=v||null}}return o=new $n(o,a),o._enter=l,o._exit=c,o}function Jq(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qq(){return new $n(this._exit||this._groups.map(QE),this._parents)}function Kq(t,e,n){var a=this.enter(),r=this,s=this.exit();return typeof t=="function"?(a=t(a),a&&(a=a.selection())):a=a.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?s.remove():n(s),a&&r?a.merge(r).order():r}function Zq(t){for(var e=t.selection?t.selection():t,n=this._groups,a=e._groups,r=n.length,s=a.length,o=Math.min(r,s),l=new Array(r),c=0;c<o;++c)for(var h=n[c],u=a[c],d=h.length,m=l[c]=new Array(d),f,p=0;p<d;++p)(f=h[p]||u[p])&&(m[p]=f);for(;c<r;++c)l[c]=n[c];return new $n(l,this._parents)}function e9(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var a=t[e],r=a.length-1,s=a[r],o;--r>=0;)(o=a[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function t9(t){t||(t=n9);function e(d,m){return d&&m?t(d.__data__,m.__data__):!d-!m}for(var n=this._groups,a=n.length,r=new Array(a),s=0;s<a;++s){for(var o=n[s],l=o.length,c=r[s]=new Array(l),h,u=0;u<l;++u)(h=o[u])&&(c[u]=h);c.sort(e)}return new $n(r,this._parents).order()}function n9(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function i9(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function a9(){return Array.from(this)}function r9(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],r=0,s=a.length;r<s;++r){var o=a[r];if(o)return o}return null}function s9(){let t=0;for(const e of this)++t;return t}function o9(){return!this.node()}function l9(t){for(var e=this._groups,n=0,a=e.length;n<a;++n)for(var r=e[n],s=0,o=r.length,l;s<o;++s)(l=r[s])&&t.call(l,l.__data__,s,r);return this}function c9(t){return function(){this.removeAttribute(t)}}function h9(t){return function(){this.removeAttributeNS(t.space,t.local)}}function u9(t,e){return function(){this.setAttribute(t,e)}}function d9(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function m9(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function f9(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function p9(t,e){var n=Nu(t);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((e==null?n.local?h9:c9:typeof e=="function"?n.local?f9:m9:n.local?d9:u9)(n,e))}function KE(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function g9(t){return function(){this.style.removeProperty(t)}}function x9(t,e,n){return function(){this.style.setProperty(t,e,n)}}function y9(t,e,n){return function(){var a=e.apply(this,arguments);a==null?this.style.removeProperty(t):this.style.setProperty(t,a,n)}}function b9(t,e,n){return arguments.length>1?this.each((e==null?g9:typeof e=="function"?y9:x9)(t,e,n??"")):Ts(this.node(),t)}function Ts(t,e){return t.style.getPropertyValue(e)||KE(t).getComputedStyle(t,null).getPropertyValue(e)}function w9(t){return function(){delete this[t]}}function _9(t,e){return function(){this[t]=e}}function v9(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function j9(t,e){return arguments.length>1?this.each((e==null?w9:typeof e=="function"?v9:_9)(t,e)):this.node()[t]}function ZE(t){return t.trim().split(/^|\s+/)}function Jg(t){return t.classList||new eS(t)}function eS(t){this._node=t,this._names=ZE(t.getAttribute("class")||"")}eS.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function tS(t,e){for(var n=Jg(t),a=-1,r=e.length;++a<r;)n.add(e[a])}function nS(t,e){for(var n=Jg(t),a=-1,r=e.length;++a<r;)n.remove(e[a])}function T9(t){return function(){tS(this,t)}}function k9(t){return function(){nS(this,t)}}function E9(t,e){return function(){(e.apply(this,arguments)?tS:nS)(this,t)}}function S9(t,e){var n=ZE(t+"");if(arguments.length<2){for(var a=Jg(this.node()),r=-1,s=n.length;++r<s;)if(!a.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?E9:e?T9:k9)(n,e))}function C9(){this.textContent=""}function A9(t){return function(){this.textContent=t}}function N9(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function I9(t){return arguments.length?this.each(t==null?C9:(typeof t=="function"?N9:A9)(t)):this.node().textContent}function L9(){this.innerHTML=""}function O9(t){return function(){this.innerHTML=t}}function M9(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function R9(t){return arguments.length?this.each(t==null?L9:(typeof t=="function"?M9:O9)(t)):this.node().innerHTML}function P9(){this.nextSibling&&this.parentNode.appendChild(this)}function D9(){return this.each(P9)}function B9(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function F9(){return this.each(B9)}function H9(t){var e=typeof t=="function"?t:YE(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function q9(){return null}function $9(t,e){var n=typeof t=="function"?t:YE(t),a=e==null?q9:typeof e=="function"?e:Xg(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function z9(){var t=this.parentNode;t&&t.removeChild(this)}function W9(){return this.each(z9)}function U9(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function V9(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Y9(t){return this.select(t?V9:U9)}function G9(t){return arguments.length?this.property("__data__",t):this.node().__data__}function X9(t){return function(e){t.call(this,e,this.__data__)}}function J9(t){return t.trim().split(/^|\s+/).map(function(e){var n="",a=e.indexOf(".");return a>=0&&(n=e.slice(a+1),e=e.slice(0,a)),{type:e,name:n}})}function Q9(t){return function(){var e=this.__on;if(e){for(var n=0,a=-1,r=e.length,s;n<r;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++a]=s;++a?e.length=a:delete this.__on}}}function K9(t,e,n){return function(){var a=this.__on,r,s=X9(e);if(a){for(var o=0,l=a.length;o<l;++o)if((r=a[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=e;return}}this.addEventListener(t.type,s,n),r={type:t.type,name:t.name,value:e,listener:s,options:n},a?a.push(r):this.__on=[r]}}function Z9(t,e,n){var a=J9(t+""),r,s=a.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,h=l.length,u;c<h;++c)for(r=0,u=l[c];r<s;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value}return}for(l=e?K9:Q9,r=0;r<s;++r)this.each(l(a[r],e,n));return this}function iS(t,e,n){var a=KE(t),r=a.CustomEvent;typeof r=="function"?r=new r(e,n):(r=a.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function e$(t,e){return function(){return iS(this,t,e)}}function t$(t,e){return function(){return iS(this,t,e.apply(this,arguments))}}function n$(t,e){return this.each((typeof e=="function"?t$:e$)(t,e))}function*i$(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var a=t[e],r=0,s=a.length,o;r<s;++r)(o=a[r])&&(yield o)}var aS=[null];function $n(t,e){this._groups=t,this._parents=e}function Kl(){return new $n([[document.documentElement]],aS)}function a$(){return this}$n.prototype=Kl.prototype={constructor:$n,select:Nq,selectAll:Mq,selectChild:Bq,selectChildren:$q,filter:zq,data:Xq,enter:Wq,exit:Qq,join:Kq,merge:Zq,selection:a$,order:e9,sort:t9,call:i9,nodes:a9,node:r9,size:s9,empty:o9,each:l9,attr:p9,style:b9,property:j9,classed:S9,text:I9,html:R9,raise:D9,lower:F9,append:H9,insert:$9,remove:W9,clone:Y9,datum:G9,on:Z9,dispatch:n$,[Symbol.iterator]:i$};function Ye(t){return typeof t=="string"?new $n([[document.querySelector(t)]],[document.documentElement]):new $n([[t]],aS)}function Qg(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function rS(t,e){var n=Object.create(t.prototype);for(var a in e)n[a]=e[a];return n}function Zl(){}var kl=.7,Sh=1/kl,ss="\\s*([+-]?\\d+)\\s*",El="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r$=/^#([0-9a-f]{3,8})$/,s$=new RegExp(`^rgb\\(${ss},${ss},${ss}\\)$`),o$=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),l$=new RegExp(`^rgba\\(${ss},${ss},${ss},${El}\\)$`),c$=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${El}\\)$`),h$=new RegExp(`^hsl\\(${El},${Ri},${Ri}\\)$`),u$=new RegExp(`^hsla\\(${El},${Ri},${Ri},${El}\\)$`),Pb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qg(Zl,Sl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Db,formatHex:Db,formatHex8:d$,formatHsl:m$,formatRgb:Bb,toString:Bb});function Db(){return this.rgb().formatHex()}function d$(){return this.rgb().formatHex8()}function m$(){return sS(this).formatHsl()}function Bb(){return this.rgb().formatRgb()}function Sl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=r$.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fb(e):n===3?new Cn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=s$.exec(t))?new Cn(e[1],e[2],e[3],1):(e=o$.exec(t))?new Cn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=l$.exec(t))?vc(e[1],e[2],e[3],e[4]):(e=c$.exec(t))?vc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=h$.exec(t))?$b(e[1],e[2]/100,e[3]/100,1):(e=u$.exec(t))?$b(e[1],e[2]/100,e[3]/100,e[4]):Pb.hasOwnProperty(t)?Fb(Pb[t]):t==="transparent"?new Cn(NaN,NaN,NaN,0):null}function Fb(t){return new Cn(t>>16&255,t>>8&255,t&255,1)}function vc(t,e,n,a){return a<=0&&(t=e=n=NaN),new Cn(t,e,n,a)}function f$(t){return t instanceof Zl||(t=Sl(t)),t?(t=t.rgb(),new Cn(t.r,t.g,t.b,t.opacity)):new Cn}function up(t,e,n,a){return arguments.length===1?f$(t):new Cn(t,e,n,a??1)}function Cn(t,e,n,a){this.r=+t,this.g=+e,this.b=+n,this.opacity=+a}Qg(Cn,up,rS(Zl,{brighter(t){return t=t==null?Sh:Math.pow(Sh,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?kl:Math.pow(kl,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Cn(xr(this.r),xr(this.g),xr(this.b),Ch(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hb,formatHex:Hb,formatHex8:p$,formatRgb:qb,toString:qb}));function Hb(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}`}function p$(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}${cr((isNaN(this.opacity)?1:this.opacity)*255)}`}function qb(){const t=Ch(this.opacity);return`${t===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${t===1?")":`, ${t})`}`}function Ch(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function cr(t){return t=xr(t),(t<16?"0":"")+t.toString(16)}function $b(t,e,n,a){return a<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new fi(t,e,n,a)}function sS(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);if(t instanceof Zl||(t=Sl(t)),!t)return new fi;if(t instanceof fi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,a=t.b/255,r=Math.min(e,n,a),s=Math.max(e,n,a),o=NaN,l=s-r,c=(s+r)/2;return l?(e===s?o=(n-a)/l+(n<a)*6:n===s?o=(a-e)/l+2:o=(e-n)/l+4,l/=c<.5?s+r:2-s-r,o*=60):l=c>0&&c<1?0:o,new fi(o,l,c,t.opacity)}function g$(t,e,n,a){return arguments.length===1?sS(t):new fi(t,e,n,a??1)}function fi(t,e,n,a){this.h=+t,this.s=+e,this.l=+n,this.opacity=+a}Qg(fi,g$,rS(Zl,{brighter(t){return t=t==null?Sh:Math.pow(Sh,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?kl:Math.pow(kl,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*e,r=2*n-a;return new Cn(Gd(t>=240?t-240:t+120,r,a),Gd(t,r,a),Gd(t<120?t+240:t-120,r,a),this.opacity)},clamp(){return new fi(zb(this.h),jc(this.s),jc(this.l),Ch(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ch(this.opacity);return`${t===1?"hsl(":"hsla("}${zb(this.h)}, ${jc(this.s)*100}%, ${jc(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zb(t){return t=(t||0)%360,t<0?t+360:t}function jc(t){return Math.max(0,Math.min(1,t||0))}function Gd(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kg=t=>()=>t;function oS(t,e){return function(n){return t+n*e}}function x$(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(a){return Math.pow(t+a*e,n)}}function Bce(t,e){var n=e-t;return n?oS(t,n>180||n<-180?n-360*Math.round(n/360):n):Kg(isNaN(t)?e:t)}function y$(t){return(t=+t)==1?lS:function(e,n){return n-e?x$(e,n,t):Kg(isNaN(e)?n:e)}}function lS(t,e){var n=e-t;return n?oS(t,n):Kg(isNaN(t)?e:t)}const Wb=function t(e){var n=y$(e);function a(r,s){var o=n((r=up(r)).r,(s=up(s)).r),l=n(r.g,s.g),c=n(r.b,s.b),h=lS(r.opacity,s.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=h(u),r+""}}return a.gamma=t,a}(1);function ka(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var dp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xd=new RegExp(dp.source,"g");function b$(t){return function(){return t}}function w$(t){return function(e){return t(e)+""}}function _$(t,e){var n=dp.lastIndex=Xd.lastIndex=0,a,r,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(a=dp.exec(t))&&(r=Xd.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(a=a[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:ka(a,r)})),n=Xd.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?w$(c[0].x):b$(e):(e=c.length,function(h){for(var u=0,d;u<e;++u)l[(d=c[u]).i]=d.x(h);return l.join("")})}var Ub=180/Math.PI,mp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cS(t,e,n,a,r,s){var o,l,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*a)&&(n-=t*c,a-=e*c),(l=Math.sqrt(n*n+a*a))&&(n/=l,a/=l,c/=l),t*a<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*Ub,skewX:Math.atan(c)*Ub,scaleX:o,scaleY:l}}var Tc;function v$(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?mp:cS(e.a,e.b,e.c,e.d,e.e,e.f)}function j$(t){return t==null||(Tc||(Tc=document.createElementNS("http://www.w3.org/2000/svg","g")),Tc.setAttribute("transform",t),!(t=Tc.transform.baseVal.consolidate()))?mp:(t=t.matrix,cS(t.a,t.b,t.c,t.d,t.e,t.f))}function hS(t,e,n,a){function r(h){return h.length?h.pop()+" ":""}function s(h,u,d,m,f,p){if(h!==d||u!==m){var g=f.push("translate(",null,e,null,n);p.push({i:g-4,x:ka(h,d)},{i:g-2,x:ka(u,m)})}else(d||m)&&f.push("translate("+d+e+m+n)}function o(h,u,d,m){h!==u?(h-u>180?u+=360:u-h>180&&(h+=360),m.push({i:d.push(r(d)+"rotate(",null,a)-2,x:ka(h,u)})):u&&d.push(r(d)+"rotate("+u+a)}function l(h,u,d,m){h!==u?m.push({i:d.push(r(d)+"skewX(",null,a)-2,x:ka(h,u)}):u&&d.push(r(d)+"skewX("+u+a)}function c(h,u,d,m,f,p){if(h!==d||u!==m){var g=f.push(r(f)+"scale(",null,",",null,")");p.push({i:g-4,x:ka(h,d)},{i:g-2,x:ka(u,m)})}else(d!==1||m!==1)&&f.push(r(f)+"scale("+d+","+m+")")}return function(h,u){var d=[],m=[];return h=t(h),u=t(u),s(h.translateX,h.translateY,u.translateX,u.translateY,d,m),o(h.rotate,u.rotate,d,m),l(h.skewX,u.skewX,d,m),c(h.scaleX,h.scaleY,u.scaleX,u.scaleY,d,m),h=u=null,function(f){for(var p=-1,g=m.length,x;++p<g;)d[(x=m[p]).i]=x.x(f);return d.join("")}}}var T$=hS(v$,"px, ","px)","deg)"),k$=hS(j$,", ",")",")"),ks=0,zo=0,go=0,uS=1e3,Ah,Wo,Nh=0,Tr=0,Iu=0,Cl=typeof performance=="object"&&performance.now?performance:Date,dS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zg(){return Tr||(dS(E$),Tr=Cl.now()+Iu)}function E$(){Tr=0}function Ih(){this._call=this._time=this._next=null}Ih.prototype=mS.prototype={constructor:Ih,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zg():+n)+(e==null?0:+e),!this._next&&Wo!==this&&(Wo?Wo._next=this:Ah=this,Wo=this),this._call=t,this._time=n,fp()},stop:function(){this._call&&(this._call=null,this._time=1/0,fp())}};function mS(t,e,n){var a=new Ih;return a.restart(t,e,n),a}function S$(){Zg(),++ks;for(var t=Ah,e;t;)(e=Tr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ks}function Vb(){Tr=(Nh=Cl.now())+Iu,ks=zo=0;try{S$()}finally{ks=0,A$(),Tr=0}}function C$(){var t=Cl.now(),e=t-Nh;e>uS&&(Iu-=e,Nh=t)}function A$(){for(var t,e=Ah,n,a=1/0;e;)e._call?(a>e._time&&(a=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ah=n);Wo=t,fp(a)}function fp(t){if(!ks){zo&&(zo=clearTimeout(zo));var e=t-Tr;e>24?(t<1/0&&(zo=setTimeout(Vb,t-Cl.now()-Iu)),go&&(go=clearInterval(go))):(go||(Nh=Cl.now(),go=setInterval(C$,uS)),ks=1,dS(Vb))}}function Yb(t,e,n){var a=new Ih;return e=e==null?0:+e,a.restart(r=>{a.stop(),t(r+e)},e,n),a}var N$=VE("start","end","cancel","interrupt"),I$=[],fS=0,Gb=1,pp=2,nh=3,Xb=4,gp=5,ih=6;function Lu(t,e,n,a,r,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;L$(t,n,{name:e,index:a,group:r,on:N$,tween:I$,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fS})}function ex(t,e){var n=wi(t,e);if(n.state>fS)throw new Error("too late; already scheduled");return n}function Hi(t,e){var n=wi(t,e);if(n.state>nh)throw new Error("too late; already running");return n}function wi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function L$(t,e,n){var a=t.__transition,r;a[e]=n,n.timer=mS(s,0,n.time);function s(h){n.state=Gb,n.timer.restart(o,n.delay,n.time),n.delay<=h&&o(h-n.delay)}function o(h){var u,d,m,f;if(n.state!==Gb)return c();for(u in a)if(f=a[u],f.name===n.name){if(f.state===nh)return Yb(o);f.state===Xb?(f.state=ih,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete a[u]):+u<e&&(f.state=ih,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete a[u])}if(Yb(function(){n.state===nh&&(n.state=Xb,n.timer.restart(l,n.delay,n.time),l(h))}),n.state=pp,n.on.call("start",t,t.__data__,n.index,n.group),n.state===pp){for(n.state=nh,r=new Array(m=n.tween.length),u=0,d=-1;u<m;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=f);r.length=d+1}}function l(h){for(var u=h<n.duration?n.ease.call(null,h/n.duration):(n.timer.restart(c),n.state=gp,1),d=-1,m=r.length;++d<m;)r[d].call(t,u);n.state===gp&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=ih,n.timer.stop(),delete a[e];for(var h in a)return;delete t.__transition}}function O$(t,e){var n=t.__transition,a,r,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((a=n[o]).name!==e){s=!1;continue}r=a.state>pp&&a.state<gp,a.state=ih,a.timer.stop(),a.on.call(r?"interrupt":"cancel",t,t.__data__,a.index,a.group),delete n[o]}s&&delete t.__transition}}function M$(t){return this.each(function(){O$(this,t)})}function R$(t,e){var n,a;return function(){var r=Hi(this,t),s=r.tween;if(s!==n){a=n=s;for(var o=0,l=a.length;o<l;++o)if(a[o].name===e){a=a.slice(),a.splice(o,1);break}}r.tween=a}}function P$(t,e,n){var a,r;if(typeof n!="function")throw new Error;return function(){var s=Hi(this,t),o=s.tween;if(o!==a){r=(a=o).slice();for(var l={name:e,value:n},c=0,h=r.length;c<h;++c)if(r[c].name===e){r[c]=l;break}c===h&&r.push(l)}s.tween=r}}function D$(t,e){var n=this._id;if(t+="",arguments.length<2){for(var a=wi(this.node(),n).tween,r=0,s=a.length,o;r<s;++r)if((o=a[r]).name===t)return o.value;return null}return this.each((e==null?R$:P$)(n,t,e))}function tx(t,e,n){var a=t._id;return t.each(function(){var r=Hi(this,a);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return wi(r,a).value[e]}}function pS(t,e){var n;return(typeof e=="number"?ka:e instanceof Sl?Wb:(n=Sl(e))?(e=n,Wb):_$)(t,e)}function B$(t){return function(){this.removeAttribute(t)}}function F$(t){return function(){this.removeAttributeNS(t.space,t.local)}}function H$(t,e,n){var a,r=n+"",s;return function(){var o=this.getAttribute(t);return o===r?null:o===a?s:s=e(a=o,n)}}function q$(t,e,n){var a,r=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===a?s:s=e(a=o,n)}}function $$(t,e,n){var a,r,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=l+"",o===c?null:o===a&&c===r?s:(r=c,s=e(a=o,l)))}}function z$(t,e,n){var a,r,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=l+"",o===c?null:o===a&&c===r?s:(r=c,s=e(a=o,l)))}}function W$(t,e){var n=Nu(t),a=n==="transform"?k$:pS;return this.attrTween(t,typeof e=="function"?(n.local?z$:$$)(n,a,tx(this,"attr."+t,e)):e==null?(n.local?F$:B$)(n):(n.local?q$:H$)(n,a,e))}function U$(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function V$(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Y$(t,e){var n,a;function r(){var s=e.apply(this,arguments);return s!==a&&(n=(a=s)&&V$(t,s)),n}return r._value=e,r}function G$(t,e){var n,a;function r(){var s=e.apply(this,arguments);return s!==a&&(n=(a=s)&&U$(t,s)),n}return r._value=e,r}function X$(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var a=Nu(t);return this.tween(n,(a.local?Y$:G$)(a,e))}function J$(t,e){return function(){ex(this,t).delay=+e.apply(this,arguments)}}function Q$(t,e){return e=+e,function(){ex(this,t).delay=e}}function K$(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?J$:Q$)(e,t)):wi(this.node(),e).delay}function Z$(t,e){return function(){Hi(this,t).duration=+e.apply(this,arguments)}}function ez(t,e){return e=+e,function(){Hi(this,t).duration=e}}function tz(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Z$:ez)(e,t)):wi(this.node(),e).duration}function nz(t,e){if(typeof e!="function")throw new Error;return function(){Hi(this,t).ease=e}}function iz(t){var e=this._id;return arguments.length?this.each(nz(e,t)):wi(this.node(),e).ease}function az(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Hi(this,t).ease=n}}function rz(t){if(typeof t!="function")throw new Error;return this.each(az(this._id,t))}function sz(t){typeof t!="function"&&(t=XE(t));for(var e=this._groups,n=e.length,a=new Array(n),r=0;r<n;++r)for(var s=e[r],o=s.length,l=a[r]=[],c,h=0;h<o;++h)(c=s[h])&&t.call(c,c.__data__,h,s)&&l.push(c);return new ua(a,this._parents,this._name,this._id)}function oz(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,a=e.length,r=n.length,s=Math.min(a,r),o=new Array(a),l=0;l<s;++l)for(var c=e[l],h=n[l],u=c.length,d=o[l]=new Array(u),m,f=0;f<u;++f)(m=c[f]||h[f])&&(d[f]=m);for(;l<a;++l)o[l]=e[l];return new ua(o,this._parents,this._name,this._id)}function lz(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cz(t,e,n){var a,r,s=lz(e)?ex:Hi;return function(){var o=s(this,t),l=o.on;l!==a&&(r=(a=l).copy()).on(e,n),o.on=r}}function hz(t,e){var n=this._id;return arguments.length<2?wi(this.node(),n).on.on(t):this.each(cz(n,t,e))}function uz(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function dz(){return this.on("end.remove",uz(this._id))}function mz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xg(t));for(var a=this._groups,r=a.length,s=new Array(r),o=0;o<r;++o)for(var l=a[o],c=l.length,h=s[o]=new Array(c),u,d,m=0;m<c;++m)(u=l[m])&&(d=t.call(u,u.__data__,m,l))&&("__data__"in u&&(d.__data__=u.__data__),h[m]=d,Lu(h[m],e,n,m,h,wi(u,n)));return new ua(s,this._parents,e,n)}function fz(t){var e=this._name,n=this._id;typeof t!="function"&&(t=GE(t));for(var a=this._groups,r=a.length,s=[],o=[],l=0;l<r;++l)for(var c=a[l],h=c.length,u,d=0;d<h;++d)if(u=c[d]){for(var m=t.call(u,u.__data__,d,c),f,p=wi(u,n),g=0,x=m.length;g<x;++g)(f=m[g])&&Lu(f,e,n,g,m,p);s.push(m),o.push(u)}return new ua(s,o,e,n)}var pz=Kl.prototype.constructor;function gz(){return new pz(this._groups,this._parents)}function xz(t,e){var n,a,r;return function(){var s=Ts(this,t),o=(this.style.removeProperty(t),Ts(this,t));return s===o?null:s===n&&o===a?r:r=e(n=s,a=o)}}function gS(t){return function(){this.style.removeProperty(t)}}function yz(t,e,n){var a,r=n+"",s;return function(){var o=Ts(this,t);return o===r?null:o===a?s:s=e(a=o,n)}}function bz(t,e,n){var a,r,s;return function(){var o=Ts(this,t),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(t),Ts(this,t))),o===c?null:o===a&&c===r?s:(r=c,s=e(a=o,l))}}function wz(t,e){var n,a,r,s="style."+e,o="end."+s,l;return function(){var c=Hi(this,t),h=c.on,u=c.value[s]==null?l||(l=gS(e)):void 0;(h!==n||r!==u)&&(a=(n=h).copy()).on(o,r=u),c.on=a}}function _z(t,e,n){var a=(t+="")=="transform"?T$:pS;return e==null?this.styleTween(t,xz(t,a)).on("end.style."+t,gS(t)):typeof e=="function"?this.styleTween(t,bz(t,a,tx(this,"style."+t,e))).each(wz(this._id,t)):this.styleTween(t,yz(t,a,e),n).on("end.style."+t,null)}function vz(t,e,n){return function(a){this.style.setProperty(t,e.call(this,a),n)}}function jz(t,e,n){var a,r;function s(){var o=e.apply(this,arguments);return o!==r&&(a=(r=o)&&vz(t,o,n)),a}return s._value=e,s}function Tz(t,e,n){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(e==null)return this.tween(a,null);if(typeof e!="function")throw new Error;return this.tween(a,jz(t,e,n??""))}function kz(t){return function(){this.textContent=t}}function Ez(t){return function(){var e=t(this);this.textContent=e??""}}function Sz(t){return this.tween("text",typeof t=="function"?Ez(tx(this,"text",t)):kz(t==null?"":t+""))}function Cz(t){return function(e){this.textContent=t.call(this,e)}}function Az(t){var e,n;function a(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Cz(r)),e}return a._value=t,a}function Nz(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Az(t))}function Iz(){for(var t=this._name,e=this._id,n=xS(),a=this._groups,r=a.length,s=0;s<r;++s)for(var o=a[s],l=o.length,c,h=0;h<l;++h)if(c=o[h]){var u=wi(c,e);Lu(c,t,n,h,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ua(a,this._parents,t,n)}function Lz(){var t,e,n=this,a=n._id,r=n.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--r===0&&s()}};n.each(function(){var h=Hi(this,a),u=h.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),h.on=e}),r===0&&s()})}var Oz=0;function ua(t,e,n,a){this._groups=t,this._parents=e,this._name=n,this._id=a}function xS(){return++Oz}var Yi=Kl.prototype;ua.prototype={constructor:ua,select:mz,selectAll:fz,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:sz,merge:oz,selection:gz,transition:Iz,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:hz,attr:W$,attrTween:X$,style:_z,styleTween:Tz,text:Sz,textTween:Nz,remove:dz,tween:D$,delay:K$,duration:tz,ease:iz,easeVarying:rz,end:Lz,[Symbol.iterator]:Yi[Symbol.iterator]};function Mz(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Rz={time:null,delay:0,duration:250,ease:Mz};function Pz(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Dz(t){var e,n;t instanceof ua?(e=t._id,t=t._name):(e=xS(),(n=Rz).time=Zg(),t=t==null?null:t+"");for(var a=this._groups,r=a.length,s=0;s<r;++s)for(var o=a[s],l=o.length,c,h=0;h<l;++h)(c=o[h])&&Lu(c,t,e,h,o,n||Pz(c,e));return new ua(a,this._parents,t,e)}Kl.prototype.interrupt=M$;Kl.prototype.transition=Dz;const xp=Math.PI,yp=2*xp,nr=1e-6,Bz=yp-nr;function yS(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Fz(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return yS;const n=10**e;return function(a){this._+=a[0];for(let r=1,s=a.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+a[r]}}class Hz{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?yS:Fz(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,a,r){this._append`Q${+e},${+n},${this._x1=+a},${this._y1=+r}`}bezierCurveTo(e,n,a,r,s,o){this._append`C${+e},${+n},${+a},${+r},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,a,r,s){if(e=+e,n=+n,a=+a,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=a-e,h=r-n,u=o-e,d=l-n,m=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>nr)if(!(Math.abs(d*c-h*u)>nr)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let f=a-o,p=r-l,g=c*c+h*h,x=f*f+p*p,b=Math.sqrt(g),w=Math.sqrt(m),k=s*Math.tan((xp-Math.acos((g+m-x)/(2*b*w)))/2),E=k/w,v=k/b;Math.abs(E-1)>nr&&this._append`L${e+E*u},${n+E*d}`,this._append`A${s},${s},0,0,${+(d*f>u*p)},${this._x1=e+v*c},${this._y1=n+v*h}`}}arc(e,n,a,r,s,o){if(e=+e,n=+n,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(r),c=a*Math.sin(r),h=e+l,u=n+c,d=1^o,m=o?r-s:s-r;this._x1===null?this._append`M${h},${u}`:(Math.abs(this._x1-h)>nr||Math.abs(this._y1-u)>nr)&&this._append`L${h},${u}`,a&&(m<0&&(m=m%yp+yp),m>Bz?this._append`A${a},${a},0,1,${d},${e-l},${n-c}A${a},${a},0,1,${d},${this._x1=h},${this._y1=u}`:m>nr&&this._append`A${a},${a},0,${+(m>=xp)},${d},${this._x1=e+a*Math.cos(s)},${this._y1=n+a*Math.sin(s)}`)}rect(e,n,a,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${a=+a}v${+r}h${-a}Z`}toString(){return this._}}function Gr(t){return function(){return t}}const Fce=Math.abs,Hce=Math.atan2,qce=Math.cos,$ce=Math.max,zce=Math.min,Wce=Math.sin,Uce=Math.sqrt,Jb=1e-12,nx=Math.PI,Qb=nx/2,Vce=2*nx;function Yce(t){return t>1?0:t<-1?nx:Math.acos(t)}function Gce(t){return t>=1?Qb:t<=-1?-Qb:Math.asin(t)}function qz(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);e=a}return t},()=>new Hz(e)}function $z(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bS(t){this._context=t}bS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Lh(t){return new bS(t)}function zz(t){return t[0]}function Wz(t){return t[1]}function Uz(t,e){var n=Gr(!0),a=null,r=Lh,s=null,o=qz(l);t=typeof t=="function"?t:t===void 0?zz:Gr(t),e=typeof e=="function"?e:e===void 0?Wz:Gr(e);function l(c){var h,u=(c=$z(c)).length,d,m=!1,f;for(a==null&&(s=r(f=o())),h=0;h<=u;++h)!(h<u&&n(d=c[h],h,c))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+t(d,h,c),+e(d,h,c));if(f)return s=null,f+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Gr(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Gr(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Gr(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,a!=null&&(s=r(a)),l):r},l.context=function(c){return arguments.length?(c==null?a=s=null:s=r(a=c),l):a},l}class wS{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function _S(t){return new wS(t,!0)}function vS(t){return new wS(t,!1)}function Oa(){}function Oh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Ou(t){this._context=t}Ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ah(t){return new Ou(t)}function jS(t){this._context=t}jS.prototype={areaStart:Oa,areaEnd:Oa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Oh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vz(t){return new jS(t)}function TS(t){this._context=t}TS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:Oh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yz(t){return new TS(t)}function kS(t,e){this._basis=new Ou(t),this._beta=e}kS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var a=t[0],r=e[0],s=t[n]-a,o=e[n]-r,l=-1,c;++l<=n;)c=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(a+c*s),this._beta*e[l]+(1-this._beta)*(r+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Gz=function t(e){function n(a){return e===1?new Ou(a):new kS(a,e)}return n.beta=function(a){return t(+a)},n}(.85);function Mh(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ix(t,e){this._context=t,this._k=(1-e)/6}ix.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Mh(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Mh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ES=function t(e){function n(a){return new ix(a,e)}return n.tension=function(a){return t(+a)},n}(0);function ax(t,e){this._context=t,this._k=(1-e)/6}ax.prototype={areaStart:Oa,areaEnd:Oa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Mh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Xz=function t(e){function n(a){return new ax(a,e)}return n.tension=function(a){return t(+a)},n}(0);function rx(t,e){this._context=t,this._k=(1-e)/6}rx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mh(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Jz=function t(e){function n(a){return new rx(a,e)}return n.tension=function(a){return t(+a)},n}(0);function sx(t,e,n){var a=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Jb){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Jb){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*h+t._x1*t._l23_2a-e*t._l12_2a)/u,o=(o*h+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(a,r,s,o,t._x2,t._y2)}function SS(t,e){this._context=t,this._alpha=e}SS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:sx(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const CS=function t(e){function n(a){return e?new SS(a,e):new ix(a,0)}return n.alpha=function(a){return t(+a)},n}(.5);function AS(t,e){this._context=t,this._alpha=e}AS.prototype={areaStart:Oa,areaEnd:Oa,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:sx(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Qz=function t(e){function n(a){return e?new AS(a,e):new ax(a,0)}return n.alpha=function(a){return t(+a)},n}(.5);function NS(t,e){this._context=t,this._alpha=e}NS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+a*a,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:sx(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Kz=function t(e){function n(a){return e?new NS(a,e):new rx(a,0)}return n.alpha=function(a){return t(+a)},n}(.5);function IS(t){this._context=t}IS.prototype={areaStart:Oa,areaEnd:Oa,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Zz(t){return new IS(t)}function Kb(t){return t<0?-1:1}function Zb(t,e,n){var a=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(a||r<0&&-0),o=(n-t._y1)/(r||a<0&&-0),l=(s*r+o*a)/(a+r);return(Kb(s)+Kb(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function ew(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Jd(t,e,n){var a=t._x0,r=t._y0,s=t._x1,o=t._y1,l=(s-a)/3;t._context.bezierCurveTo(a+l,r+l*e,s-l,o-l*n,s,o)}function Rh(t){this._context=t}Rh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jd(this,this._t0,ew(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Jd(this,ew(this,n=Zb(this,t,e)),n);break;default:Jd(this,this._t0,n=Zb(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function LS(t){this._context=new OS(t)}(LS.prototype=Object.create(Rh.prototype)).point=function(t,e){Rh.prototype.point.call(this,e,t)};function OS(t){this._context=t}OS.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,a,r,s){this._context.bezierCurveTo(e,t,a,n,s,r)}};function MS(t){return new Rh(t)}function RS(t){return new LS(t)}function PS(t){this._context=t}PS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var a=tw(t),r=tw(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(a[0][s],r[0][s],a[1][s],r[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function tw(t){var e,n=t.length-1,a,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)a=r[e]/s[e-1],s[e]-=a,o[e]-=a*o[e-1];for(r[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function DS(t){return new PS(t)}function Mu(t,e){this._context=t,this._t=e}Mu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function BS(t){return new Mu(t,.5)}function FS(t){return new Mu(t,0)}function HS(t){return new Mu(t,1)}function Uo(t,e,n){this.k=t,this.x=e,this.y=n}Uo.prototype={constructor:Uo,scale:function(t){return t===1?this:new Uo(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Uo(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Uo.prototype;var e7=_(t=>{const{securityLevel:e}=Ke();let n=Ye("body");if(e==="sandbox"){const s=Ye(`#i${t}`).node()?.contentDocument??document;n=Ye(s.body)}return n.select(`#${t}`)},"selectSvgElement");function ox(t){return typeof t>"u"||t===null}_(ox,"isNothing");function qS(t){return typeof t=="object"&&t!==null}_(qS,"isObject");function $S(t){return Array.isArray(t)?t:ox(t)?[]:[t]}_($S,"toArray");function zS(t,e){var n,a,r,s;if(e)for(s=Object.keys(e),n=0,a=s.length;n<a;n+=1)r=s[n],t[r]=e[r];return t}_(zS,"extend");function WS(t,e){var n="",a;for(a=0;a<e;a+=1)n+=t;return n}_(WS,"repeat");function US(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}_(US,"isNegativeZero");var t7=ox,n7=qS,i7=$S,a7=WS,r7=US,s7=zS,Nt={isNothing:t7,isObject:n7,toArray:i7,repeat:a7,isNegativeZero:r7,extend:s7};function lx(t,e){var n="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),a+" "+n):a}_(lx,"formatError");function Es(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=lx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}_(Es,"YAMLException$1");Es.prototype=Object.create(Error.prototype);Es.prototype.constructor=Es;Es.prototype.toString=_(function(e){return this.name+": "+lx(this,e)},"toString");var En=Es;function rh(t,e,n,a,r){var s="",o="",l=Math.floor(r/2)-1;return a-e>l&&(s=" ... ",e=a-l+s.length),n-a>l&&(o=" ...",n=a+l-o.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+o,pos:a-e+s.length}}_(rh,"getLine");function sh(t,e){return Nt.repeat(" ",e-t.length)+t}_(sh,"padStart");function VS(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,a=[0],r=[],s,o=-1;s=n.exec(t.buffer);)r.push(s.index),a.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=a.length-2);o<0&&(o=a.length-1);var l="",c,h,u=Math.min(t.line+e.linesAfter,r.length).toString().length,d=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(o-c<0);c++)h=rh(t.buffer,a[o-c],r[o-c],t.position-(a[o]-a[o-c]),d),l=Nt.repeat(" ",e.indent)+sh((t.line-c+1).toString(),u)+" | "+h.str+`
`+l;for(h=rh(t.buffer,a[o],r[o],t.position,d),l+=Nt.repeat(" ",e.indent)+sh((t.line+1).toString(),u)+" | "+h.str+`
`,l+=Nt.repeat("-",e.indent+u+3+h.pos)+`^
`,c=1;c<=e.linesAfter&&!(o+c>=r.length);c++)h=rh(t.buffer,a[o+c],r[o+c],t.position-(a[o]-a[o+c]),d),l+=Nt.repeat(" ",e.indent)+sh((t.line+c+1).toString(),u)+" | "+h.str+`
`;return l.replace(/\n$/,"")}_(VS,"makeSnippet");var o7=VS,l7=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],c7=["scalar","sequence","mapping"];function YS(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(a){e[String(a)]=n})}),e}_(YS,"compileStyleAliases");function GS(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(l7.indexOf(n)===-1)throw new En('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=YS(e.styleAliases||null),c7.indexOf(this.kind)===-1)throw new En('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}_(GS,"Type$1");var tn=GS;function bp(t,e){var n=[];return t[e].forEach(function(a){var r=n.length;n.forEach(function(s,o){s.tag===a.tag&&s.kind===a.kind&&s.multi===a.multi&&(r=o)}),n[r]=a}),n}_(bp,"compileList");function XS(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function a(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(_(a,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(a);return t}_(XS,"compileMap");function Ph(t){return this.extend(t)}_(Ph,"Schema$1");Ph.prototype.extend=_(function(e){var n=[],a=[];if(e instanceof tn)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new En("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof tn))throw new En("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new En("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new En("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(s){if(!(s instanceof tn))throw new En("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(Ph.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(a),r.compiledImplicit=bp(r,"implicit"),r.compiledExplicit=bp(r,"explicit"),r.compiledTypeMap=XS(r.compiledImplicit,r.compiledExplicit),r},"extend");var h7=Ph,u7=new tn("tag:yaml.org,2002:str",{kind:"scalar",construct:_(function(t){return t!==null?t:""},"construct")}),d7=new tn("tag:yaml.org,2002:seq",{kind:"sequence",construct:_(function(t){return t!==null?t:[]},"construct")}),m7=new tn("tag:yaml.org,2002:map",{kind:"mapping",construct:_(function(t){return t!==null?t:{}},"construct")}),f7=new h7({explicit:[u7,d7,m7]});function JS(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}_(JS,"resolveYamlNull");function QS(){return null}_(QS,"constructYamlNull");function KS(t){return t===null}_(KS,"isNull");var p7=new tn("tag:yaml.org,2002:null",{kind:"scalar",resolve:JS,construct:QS,predicate:KS,represent:{canonical:_(function(){return"~"},"canonical"),lowercase:_(function(){return"null"},"lowercase"),uppercase:_(function(){return"NULL"},"uppercase"),camelcase:_(function(){return"Null"},"camelcase"),empty:_(function(){return""},"empty")},defaultStyle:"lowercase"});function ZS(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}_(ZS,"resolveYamlBoolean");function eC(t){return t==="true"||t==="True"||t==="TRUE"}_(eC,"constructYamlBoolean");function tC(t){return Object.prototype.toString.call(t)==="[object Boolean]"}_(tC,"isBoolean");var g7=new tn("tag:yaml.org,2002:bool",{kind:"scalar",resolve:ZS,construct:eC,predicate:tC,represent:{lowercase:_(function(t){return t?"true":"false"},"lowercase"),uppercase:_(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:_(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function nC(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}_(nC,"isHexCode");function iC(t){return 48<=t&&t<=55}_(iC,"isOctCode");function aC(t){return 48<=t&&t<=57}_(aC,"isDecCode");function rC(t){if(t===null)return!1;var e=t.length,n=0,a=!1,r;if(!e)return!1;if(r=t[n],(r==="-"||r==="+")&&(r=t[++n]),r==="0"){if(n+1===e)return!0;if(r=t[++n],r==="b"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;a=!0}return a&&r!=="_"}if(r==="x"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!nC(t.charCodeAt(n)))return!1;a=!0}return a&&r!=="_"}if(r==="o"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!iC(t.charCodeAt(n)))return!1;a=!0}return a&&r!=="_"}}if(r==="_")return!1;for(;n<e;n++)if(r=t[n],r!=="_"){if(!aC(t.charCodeAt(n)))return!1;a=!0}return!(!a||r==="_")}_(rC,"resolveYamlInteger");function sC(t){var e=t,n=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(n=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}_(sC,"constructYamlInteger");function oC(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Nt.isNegativeZero(t)}_(oC,"isInteger");var x7=new tn("tag:yaml.org,2002:int",{kind:"scalar",resolve:rC,construct:sC,predicate:oC,represent:{binary:_(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:_(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:_(function(t){return t.toString(10)},"decimal"),hexadecimal:_(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),y7=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function lC(t){return!(t===null||!y7.test(t)||t[t.length-1]==="_")}_(lC,"resolveYamlFloat");function cC(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}_(cC,"constructYamlFloat");var b7=/^[-+]?[0-9]+e/;function hC(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Nt.isNegativeZero(t))return"-0.0";return n=t.toString(10),b7.test(n)?n.replace("e",".e"):n}_(hC,"representYamlFloat");function uC(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Nt.isNegativeZero(t))}_(uC,"isFloat");var w7=new tn("tag:yaml.org,2002:float",{kind:"scalar",resolve:lC,construct:cC,predicate:uC,represent:hC,defaultStyle:"lowercase"}),dC=f7.extend({implicit:[p7,g7,x7,w7]}),_7=dC,mC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fC=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function pC(t){return t===null?!1:mC.exec(t)!==null||fC.exec(t)!==null}_(pC,"resolveYamlTimestamp");function gC(t){var e,n,a,r,s,o,l,c=0,h=null,u,d,m;if(e=mC.exec(t),e===null&&(e=fC.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],a=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(n,a,r));if(s=+e[4],o=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],d=+(e[11]||0),h=(u*60+d)*6e4,e[9]==="-"&&(h=-h)),m=new Date(Date.UTC(n,a,r,s,o,l,c)),h&&m.setTime(m.getTime()-h),m}_(gC,"constructYamlTimestamp");function xC(t){return t.toISOString()}_(xC,"representYamlTimestamp");var v7=new tn("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:pC,construct:gC,instanceOf:Date,represent:xC});function yC(t){return t==="<<"||t===null}_(yC,"resolveYamlMerge");var j7=new tn("tag:yaml.org,2002:merge",{kind:"scalar",resolve:yC}),cx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function bC(t){if(t===null)return!1;var e,n,a=0,r=t.length,s=cx;for(n=0;n<r;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}_(bC,"resolveYamlBinary");function wC(t){var e,n,a=t.replace(/[\r\n=]/g,""),r=a.length,s=cx,o=0,l=[];for(e=0;e<r;e++)e%4===0&&e&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(a.charAt(e));return n=r%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}_(wC,"constructYamlBinary");function _C(t){var e="",n=0,a,r,s=t.length,o=cx;for(a=0;a<s;a++)a%3===0&&a&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[a];return r=s%3,r===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):r===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):r===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}_(_C,"representYamlBinary");function vC(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}_(vC,"isBinary");var T7=new tn("tag:yaml.org,2002:binary",{kind:"scalar",resolve:bC,construct:wC,predicate:vC,represent:_C}),k7=Object.prototype.hasOwnProperty,E7=Object.prototype.toString;function jC(t){if(t===null)return!0;var e=[],n,a,r,s,o,l=t;for(n=0,a=l.length;n<a;n+=1){if(r=l[n],o=!1,E7.call(r)!=="[object Object]")return!1;for(s in r)if(k7.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}_(jC,"resolveYamlOmap");function TC(t){return t!==null?t:[]}_(TC,"constructYamlOmap");var S7=new tn("tag:yaml.org,2002:omap",{kind:"sequence",resolve:jC,construct:TC}),C7=Object.prototype.toString;function kC(t){if(t===null)return!0;var e,n,a,r,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(a=o[e],C7.call(a)!=="[object Object]"||(r=Object.keys(a),r.length!==1))return!1;s[e]=[r[0],a[r[0]]]}return!0}_(kC,"resolveYamlPairs");function EC(t){if(t===null)return[];var e,n,a,r,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)a=o[e],r=Object.keys(a),s[e]=[r[0],a[r[0]]];return s}_(EC,"constructYamlPairs");var A7=new tn("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:kC,construct:EC}),N7=Object.prototype.hasOwnProperty;function SC(t){if(t===null)return!0;var e,n=t;for(e in n)if(N7.call(n,e)&&n[e]!==null)return!1;return!0}_(SC,"resolveYamlSet");function CC(t){return t!==null?t:{}}_(CC,"constructYamlSet");var I7=new tn("tag:yaml.org,2002:set",{kind:"mapping",resolve:SC,construct:CC}),AC=_7.extend({implicit:[v7,j7],explicit:[T7,S7,A7,I7]}),Ma=Object.prototype.hasOwnProperty,Dh=1,NC=2,IC=3,Bh=4,Qd=1,L7=2,nw=3,O7=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,M7=/[\x85\u2028\u2029]/,R7=/[,\[\]\{\}]/,LC=/^(?:!|!!|![a-z\-]+!)$/i,OC=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wp(t){return Object.prototype.toString.call(t)}_(wp,"_class");function xi(t){return t===10||t===13}_(xi,"is_EOL");function Na(t){return t===9||t===32}_(Na,"is_WHITE_SPACE");function mn(t){return t===9||t===32||t===10||t===13}_(mn,"is_WS_OR_EOL");function hr(t){return t===44||t===91||t===93||t===123||t===125}_(hr,"is_FLOW_INDICATOR");function MC(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}_(MC,"fromHexCode");function RC(t){return t===120?2:t===117?4:t===85?8:0}_(RC,"escapedHexLen");function PC(t){return 48<=t&&t<=57?t-48:-1}_(PC,"fromDecimalCode");function _p(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}_(_p,"simpleEscapeSequence");function DC(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}_(DC,"charFromCodepoint");var BC=new Array(256),FC=new Array(256);for(Va=0;Va<256;Va++)BC[Va]=_p(Va)?1:0,FC[Va]=_p(Va);var Va;function HC(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||AC,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}_(HC,"State$1");function hx(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=o7(n),new En(e,n)}_(hx,"generateError");function ve(t,e){throw hx(t,e)}_(ve,"throwError");function Al(t,e){t.onWarning&&t.onWarning.call(null,hx(t,e))}_(Al,"throwWarning");var iw={YAML:_(function(e,n,a){var r,s,o;e.version!==null&&ve(e,"duplication of %YAML directive"),a.length!==1&&ve(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),r===null&&ve(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&ve(e,"unacceptable YAML version of the document"),e.version=a[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Al(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:_(function(e,n,a){var r,s;a.length!==2&&ve(e,"TAG directive accepts exactly two arguments"),r=a[0],s=a[1],LC.test(r)||ve(e,"ill-formed tag handle (first argument) of the TAG directive"),Ma.call(e.tagMap,r)&&ve(e,'there is a previously declared suffix for "'+r+'" tag handle'),OC.test(s)||ve(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ve(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s},"handleTagDirective")};function ha(t,e,n,a){var r,s,o,l;if(e<n){if(l=t.input.slice(e,n),a)for(r=0,s=l.length;r<s;r+=1)o=l.charCodeAt(r),o===9||32<=o&&o<=1114111||ve(t,"expected valid JSON character");else O7.test(l)&&ve(t,"the stream contains non-printable characters");t.result+=l}}_(ha,"captureSegment");function vp(t,e,n,a){var r,s,o,l;for(Nt.isObject(n)||ve(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,l=r.length;o<l;o+=1)s=r[o],Ma.call(e,s)||(e[s]=n[s],a[s]=!0)}_(vp,"mergeMappings");function ur(t,e,n,a,r,s,o,l,c){var h,u;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),h=0,u=r.length;h<u;h+=1)Array.isArray(r[h])&&ve(t,"nested arrays are not supported inside keys"),typeof r=="object"&&wp(r[h])==="[object Object]"&&(r[h]="[object Object]");if(typeof r=="object"&&wp(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(h=0,u=s.length;h<u;h+=1)vp(t,e,s[h],n);else vp(t,e,s,n);else!t.json&&!Ma.call(n,r)&&Ma.call(e,r)&&(t.line=o||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,ve(t,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete n[r];return e}_(ur,"storeMappingPair");function Ru(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ve(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}_(Ru,"readLineBreak");function _t(t,e,n){for(var a=0,r=t.input.charCodeAt(t.position);r!==0;){for(;Na(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(xi(r))for(Ru(t),r=t.input.charCodeAt(t.position),a++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return n!==-1&&a!==0&&t.lineIndent<n&&Al(t,"deficient indentation"),a}_(_t,"skipSeparationSpace");function ec(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||mn(n)))}_(ec,"testDocumentSeparator");function Pu(t,e){e===1?t.result+=" ":e>1&&(t.result+=Nt.repeat(`
`,e-1))}_(Pu,"writeFoldedLines");function qC(t,e,n){var a,r,s,o,l,c,h,u,d=t.kind,m=t.result,f;if(f=t.input.charCodeAt(t.position),mn(f)||hr(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(r=t.input.charCodeAt(t.position+1),mn(r)||n&&hr(r)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,l=!1;f!==0;){if(f===58){if(r=t.input.charCodeAt(t.position+1),mn(r)||n&&hr(r))break}else if(f===35){if(a=t.input.charCodeAt(t.position-1),mn(a))break}else{if(t.position===t.lineStart&&ec(t)||n&&hr(f))break;if(xi(f))if(c=t.line,h=t.lineStart,u=t.lineIndent,_t(t,!1,-1),t.lineIndent>=e){l=!0,f=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=c,t.lineStart=h,t.lineIndent=u;break}}l&&(ha(t,s,o,!1),Pu(t,t.line-c),s=o=t.position,l=!1),Na(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}return ha(t,s,o,!1),t.result?!0:(t.kind=d,t.result=m,!1)}_(qC,"readPlainScalar");function $C(t,e){var n,a,r;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,a=r=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(ha(t,a,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)a=t.position,t.position++,r=t.position;else return!0;else xi(n)?(ha(t,a,r,!0),Pu(t,_t(t,!1,e)),a=r=t.position):t.position===t.lineStart&&ec(t)?ve(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);ve(t,"unexpected end of the stream within a single quoted scalar")}_($C,"readSingleQuotedScalar");function zC(t,e){var n,a,r,s,o,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=a=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return ha(t,n,t.position,!0),t.position++,!0;if(l===92){if(ha(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),xi(l))_t(t,!1,e);else if(l<256&&BC[l])t.result+=FC[l],t.position++;else if((o=RC(l))>0){for(r=o,s=0;r>0;r--)l=t.input.charCodeAt(++t.position),(o=MC(l))>=0?s=(s<<4)+o:ve(t,"expected hexadecimal character");t.result+=DC(s),t.position++}else ve(t,"unknown escape sequence");n=a=t.position}else xi(l)?(ha(t,n,a,!0),Pu(t,_t(t,!1,e)),n=a=t.position):t.position===t.lineStart&&ec(t)?ve(t,"unexpected end of the document within a double quoted scalar"):(t.position++,a=t.position)}ve(t,"unexpected end of the stream within a double quoted scalar")}_(zC,"readDoubleQuotedScalar");function WC(t,e){var n=!0,a,r,s,o=t.tag,l,c=t.anchor,h,u,d,m,f,p=Object.create(null),g,x,b,w;if(w=t.input.charCodeAt(t.position),w===91)u=93,f=!1,l=[];else if(w===123)u=125,f=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),w=t.input.charCodeAt(++t.position);w!==0;){if(_t(t,!0,e),w=t.input.charCodeAt(t.position),w===u)return t.position++,t.tag=o,t.anchor=c,t.kind=f?"mapping":"sequence",t.result=l,!0;n?w===44&&ve(t,"expected the node content, but found ','"):ve(t,"missed comma between flow collection entries"),x=g=b=null,d=m=!1,w===63&&(h=t.input.charCodeAt(t.position+1),mn(h)&&(d=m=!0,t.position++,_t(t,!0,e))),a=t.line,r=t.lineStart,s=t.position,kr(t,e,Dh,!1,!0),x=t.tag,g=t.result,_t(t,!0,e),w=t.input.charCodeAt(t.position),(m||t.line===a)&&w===58&&(d=!0,w=t.input.charCodeAt(++t.position),_t(t,!0,e),kr(t,e,Dh,!1,!0),b=t.result),f?ur(t,l,p,x,g,b,a,r,s):d?l.push(ur(t,null,p,x,g,b,a,r,s)):l.push(g),_t(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(n=!0,w=t.input.charCodeAt(++t.position)):n=!1}ve(t,"unexpected end of the stream within a flow collection")}_(WC,"readFlowCollection");function UC(t,e){var n,a,r=Qd,s=!1,o=!1,l=e,c=0,h=!1,u,d;if(d=t.input.charCodeAt(t.position),d===124)a=!1;else if(d===62)a=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)Qd===r?r=d===43?nw:L7:ve(t,"repeat of a chomping mode identifier");else if((u=PC(d))>=0)u===0?ve(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ve(t,"repeat of an indentation width identifier"):(l=e+u-1,o=!0);else break;if(Na(d)){do d=t.input.charCodeAt(++t.position);while(Na(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!xi(d)&&d!==0)}for(;d!==0;){for(Ru(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!o||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>l&&(l=t.lineIndent),xi(d)){c++;continue}if(t.lineIndent<l){r===nw?t.result+=Nt.repeat(`
`,s?1+c:c):r===Qd&&s&&(t.result+=`
`);break}for(a?Na(d)?(h=!0,t.result+=Nt.repeat(`
`,s?1+c:c)):h?(h=!1,t.result+=Nt.repeat(`
`,c+1)):c===0?s&&(t.result+=" "):t.result+=Nt.repeat(`
`,c):t.result+=Nt.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,n=t.position;!xi(d)&&d!==0;)d=t.input.charCodeAt(++t.position);ha(t,n,t.position,!1)}return!0}_(UC,"readBlockScalar");function jp(t,e){var n,a=t.tag,r=t.anchor,s=[],o,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ve(t,"tab characters must not be used in indentation")),!(c!==45||(o=t.input.charCodeAt(t.position+1),!mn(o))));){if(l=!0,t.position++,_t(t,!0,-1)&&t.lineIndent<=e){s.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,kr(t,e,IC,!1,!0),s.push(t.result),_t(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)ve(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=a,t.anchor=r,t.kind="sequence",t.result=s,!0):!1}_(jp,"readBlockSequence");function VC(t,e,n){var a,r,s,o,l,c,h=t.tag,u=t.anchor,d={},m=Object.create(null),f=null,p=null,g=null,x=!1,b=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),w=t.input.charCodeAt(t.position);w!==0;){if(!x&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ve(t,"tab characters must not be used in indentation")),a=t.input.charCodeAt(t.position+1),s=t.line,(w===63||w===58)&&mn(a))w===63?(x&&(ur(t,d,m,f,p,null,o,l,c),f=p=g=null),b=!0,x=!0,r=!0):x?(x=!1,r=!0):ve(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=a;else{if(o=t.line,l=t.lineStart,c=t.position,!kr(t,n,NC,!1,!0))break;if(t.line===s){for(w=t.input.charCodeAt(t.position);Na(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),mn(w)||ve(t,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(ur(t,d,m,f,p,null,o,l,c),f=p=g=null),b=!0,x=!1,r=!1,f=t.tag,p=t.result;else if(b)ve(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=h,t.anchor=u,!0}else if(b)ve(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=h,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(x&&(o=t.line,l=t.lineStart,c=t.position),kr(t,e,Bh,!0,r)&&(x?p=t.result:g=t.result),x||(ur(t,d,m,f,p,g,o,l,c),f=p=g=null),_t(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&w!==0)ve(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return x&&ur(t,d,m,f,p,null,o,l,c),b&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=d),b}_(VC,"readBlockMapping");function YC(t){var e,n=!1,a=!1,r,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ve(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(a=!0,r="!!",o=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ve(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!mn(o);)o===33&&(a?ve(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),LC.test(r)||ve(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),R7.test(s)&&ve(t,"tag suffix cannot contain flow indicator characters")}s&&!OC.test(s)&&ve(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ve(t,"tag name is malformed: "+s)}return n?t.tag=s:Ma.call(t.tagMap,r)?t.tag=t.tagMap[r]+s:r==="!"?t.tag="!"+s:r==="!!"?t.tag="tag:yaml.org,2002:"+s:ve(t,'undeclared tag handle "'+r+'"'),!0}_(YC,"readTagProperty");function GC(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&ve(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!mn(n)&&!hr(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ve(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}_(GC,"readAnchorProperty");function XC(t){var e,n,a;if(a=t.input.charCodeAt(t.position),a!==42)return!1;for(a=t.input.charCodeAt(++t.position),e=t.position;a!==0&&!mn(a)&&!hr(a);)a=t.input.charCodeAt(++t.position);return t.position===e&&ve(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Ma.call(t.anchorMap,n)||ve(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],_t(t,!0,-1),!0}_(XC,"readAlias");function kr(t,e,n,a,r){var s,o,l,c=1,h=!1,u=!1,d,m,f,p,g,x;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=l=Bh===n||IC===n,a&&_t(t,!0,-1)&&(h=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;YC(t)||GC(t);)_t(t,!0,-1)?(h=!0,l=s,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=h||r),(c===1||Bh===n)&&(Dh===n||NC===n?g=e:g=e+1,x=t.position-t.lineStart,c===1?l&&(jp(t,x)||VC(t,x,g))||WC(t,g)?u=!0:(o&&UC(t,g)||$C(t,g)||zC(t,g)?u=!0:XC(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&ve(t,"alias node should not have any properties")):qC(t,g,Dh===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=l&&jp(t,x))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ve(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,m=t.implicitTypes.length;d<m;d+=1)if(p=t.implicitTypes[d],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ma.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,f=t.typeMap.multi[t.kind||"fallback"],d=0,m=f.length;d<m;d+=1)if(t.tag.slice(0,f[d].tag.length)===f[d].tag){p=f[d];break}p||ve(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&ve(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ve(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}_(kr,"composeNode");function JC(t){var e=t.position,n,a,r,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(_t(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!mn(o);)o=t.input.charCodeAt(++t.position);for(a=t.input.slice(n,t.position),r=[],a.length<1&&ve(t,"directive name must not be less than one character in length");o!==0;){for(;Na(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!xi(o));break}if(xi(o))break;for(n=t.position;o!==0&&!mn(o);)o=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}o!==0&&Ru(t),Ma.call(iw,a)?iw[a](t,a,r):Al(t,'unknown document directive "'+a+'"')}if(_t(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,_t(t,!0,-1)):s&&ve(t,"directives end mark is expected"),kr(t,t.lineIndent-1,Bh,!1,!0),_t(t,!0,-1),t.checkLineBreaks&&M7.test(t.input.slice(e,t.position))&&Al(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ec(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,_t(t,!0,-1));return}if(t.position<t.length-1)ve(t,"end of the stream or a document separator is expected");else return}_(JC,"readDocument");function ux(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new HC(t,e),a=t.indexOf("\0");for(a!==-1&&(n.position=a,ve(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)JC(n);return n.documents}_(ux,"loadDocuments");function P7(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var a=ux(t,n);if(typeof e!="function")return a;for(var r=0,s=a.length;r<s;r+=1)e(a[r])}_(P7,"loadAll$1");function QC(t,e){var n=ux(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new En("expected a single document in the stream, but found more")}}_(QC,"load$1");var D7=QC,B7={load:D7},KC=Object.prototype.toString,ZC=Object.prototype.hasOwnProperty,dx=65279,F7=9,Nl=10,H7=13,q7=32,$7=33,z7=34,Tp=35,W7=37,U7=38,V7=39,Y7=42,eA=44,G7=45,Fh=58,X7=61,J7=62,Q7=63,K7=64,tA=91,nA=93,Z7=96,iA=123,eW=124,aA=125,on={};on[0]="\\0";on[7]="\\a";on[8]="\\b";on[9]="\\t";on[10]="\\n";on[11]="\\v";on[12]="\\f";on[13]="\\r";on[27]="\\e";on[34]='\\"';on[92]="\\\\";on[133]="\\N";on[160]="\\_";on[8232]="\\L";on[8233]="\\P";var tW=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],nW=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function rA(t,e){var n,a,r,s,o,l,c;if(e===null)return{};for(n={},a=Object.keys(e),r=0,s=a.length;r<s;r+=1)o=a[r],l=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=t.compiledTypeMap.fallback[o],c&&ZC.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[o]=l;return n}_(rA,"compileStyleMap");function sA(t){var e,n,a;if(e=t.toString(16).toUpperCase(),t<=255)n="x",a=2;else if(t<=65535)n="u",a=4;else if(t<=4294967295)n="U",a=8;else throw new En("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Nt.repeat("0",a-e.length)+e}_(sA,"encodeHex");var iW=1,Il=2;function oA(t){this.schema=t.schema||AC,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Nt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=rA(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Il:iW,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}_(oA,"State");function kp(t,e){for(var n=Nt.repeat(" ",e),a=0,r=-1,s="",o,l=t.length;a<l;)r=t.indexOf(`
`,a),r===-1?(o=t.slice(a),a=l):(o=t.slice(a,r+1),a=r+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}_(kp,"indentString");function Hh(t,e){return`
`+Nt.repeat(" ",t.indent*e)}_(Hh,"generateNextLine");function lA(t,e){var n,a,r;for(n=0,a=t.implicitTypes.length;n<a;n+=1)if(r=t.implicitTypes[n],r.resolve(e))return!0;return!1}_(lA,"testImplicitResolving");function Ll(t){return t===q7||t===F7}_(Ll,"isWhitespace");function Ss(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==dx||65536<=t&&t<=1114111}_(Ss,"isPrintable");function Ep(t){return Ss(t)&&t!==dx&&t!==H7&&t!==Nl}_(Ep,"isNsCharOrWhitespace");function Sp(t,e,n){var a=Ep(t),r=a&&!Ll(t);return(n?a:a&&t!==eA&&t!==tA&&t!==nA&&t!==iA&&t!==aA)&&t!==Tp&&!(e===Fh&&!r)||Ep(e)&&!Ll(e)&&t===Tp||e===Fh&&r}_(Sp,"isPlainSafe");function cA(t){return Ss(t)&&t!==dx&&!Ll(t)&&t!==G7&&t!==Q7&&t!==Fh&&t!==eA&&t!==tA&&t!==nA&&t!==iA&&t!==aA&&t!==Tp&&t!==U7&&t!==Y7&&t!==$7&&t!==eW&&t!==X7&&t!==J7&&t!==V7&&t!==z7&&t!==W7&&t!==K7&&t!==Z7}_(cA,"isPlainSafeFirst");function hA(t){return!Ll(t)&&t!==Fh}_(hA,"isPlainSafeLast");function ns(t,e){var n=t.charCodeAt(e),a;return n>=55296&&n<=56319&&e+1<t.length&&(a=t.charCodeAt(e+1),a>=56320&&a<=57343)?(n-55296)*1024+a-56320+65536:n}_(ns,"codePointAt");function mx(t){var e=/^\n* /;return e.test(t)}_(mx,"needIndentIndicator");var uA=1,Cp=2,dA=3,mA=4,Zr=5;function fA(t,e,n,a,r,s,o,l){var c,h=0,u=null,d=!1,m=!1,f=a!==-1,p=-1,g=cA(ns(t,0))&&hA(ns(t,t.length-1));if(e||o)for(c=0;c<t.length;h>=65536?c+=2:c++){if(h=ns(t,c),!Ss(h))return Zr;g=g&&Sp(h,u,l),u=h}else{for(c=0;c<t.length;h>=65536?c+=2:c++){if(h=ns(t,c),h===Nl)d=!0,f&&(m=m||c-p-1>a&&t[p+1]!==" ",p=c);else if(!Ss(h))return Zr;g=g&&Sp(h,u,l),u=h}m=m||f&&c-p-1>a&&t[p+1]!==" "}return!d&&!m?g&&!o&&!r(t)?uA:s===Il?Zr:Cp:n>9&&mx(t)?Zr:o?s===Il?Zr:Cp:m?mA:dA}_(fA,"chooseScalarStyle");function pA(t,e,n,a,r){t.dump=function(){if(e.length===0)return t.quotingType===Il?'""':"''";if(!t.noCompatMode&&(tW.indexOf(e)!==-1||nW.test(e)))return t.quotingType===Il?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=a||t.flowLevel>-1&&n>=t.flowLevel;function c(h){return lA(t,h)}switch(_(c,"testAmbiguity"),fA(e,l,t.indent,o,c,t.quotingType,t.forceQuotes&&!a,r)){case uA:return e;case Cp:return"'"+e.replace(/'/g,"''")+"'";case dA:return"|"+Ap(e,t.indent)+Np(kp(e,s));case mA:return">"+Ap(e,t.indent)+Np(kp(gA(e,o),s));case Zr:return'"'+xA(e)+'"';default:throw new En("impossible error: invalid scalar style")}}()}_(pA,"writeScalar");function Ap(t,e){var n=mx(t)?String(e):"",a=t[t.length-1]===`
`,r=a&&(t[t.length-2]===`
`||t===`
`),s=r?"+":a?"":"-";return n+s+`
`}_(Ap,"blockHeader");function Np(t){return t[t.length-1]===`
`?t.slice(0,-1):t}_(Np,"dropEndingNewline");function gA(t,e){for(var n=/(\n+)([^\n]*)/g,a=function(){var h=t.indexOf(`
`);return h=h!==-1?h:t.length,n.lastIndex=h,Ip(t.slice(0,h),e)}(),r=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var l=o[1],c=o[2];s=c[0]===" ",a+=l+(!r&&!s&&c!==""?`
`:"")+Ip(c,e),r=s}return a}_(gA,"foldString");function Ip(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,a,r=0,s,o=0,l=0,c="";a=n.exec(t);)l=a.index,l-r>e&&(s=o>r?o:l,c+=`
`+t.slice(r,s),r=s+1),o=l;return c+=`
`,t.length-r>e&&o>r?c+=t.slice(r,o)+`
`+t.slice(o+1):c+=t.slice(r),c.slice(1)}_(Ip,"foldLine");function xA(t){for(var e="",n=0,a,r=0;r<t.length;n>=65536?r+=2:r++)n=ns(t,r),a=on[n],!a&&Ss(n)?(e+=t[r],n>=65536&&(e+=t[r+1])):e+=a||sA(n);return e}_(xA,"escapeString");function yA(t,e,n){var a="",r=t.tag,s,o,l;for(s=0,o=n.length;s<o;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(Di(t,e,l,!1,!1)||typeof l>"u"&&Di(t,e,null,!1,!1))&&(a!==""&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=r,t.dump="["+a+"]"}_(yA,"writeFlowSequence");function Lp(t,e,n,a){var r="",s=t.tag,o,l,c;for(o=0,l=n.length;o<l;o+=1)c=n[o],t.replacer&&(c=t.replacer.call(n,String(o),c)),(Di(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Di(t,e+1,null,!0,!0,!1,!0))&&((!a||r!=="")&&(r+=Hh(t,e)),t.dump&&Nl===t.dump.charCodeAt(0)?r+="-":r+="- ",r+=t.dump);t.tag=s,t.dump=r||"[]"}_(Lp,"writeBlockSequence");function bA(t,e,n){var a="",r=t.tag,s=Object.keys(n),o,l,c,h,u;for(o=0,l=s.length;o<l;o+=1)u="",a!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=s[o],h=n[c],t.replacer&&(h=t.replacer.call(n,c,h)),Di(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Di(t,e,h,!1,!1)&&(u+=t.dump,a+=u));t.tag=r,t.dump="{"+a+"}"}_(bA,"writeFlowMapping");function wA(t,e,n,a){var r="",s=t.tag,o=Object.keys(n),l,c,h,u,d,m;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new En("sortKeys must be a boolean or a function");for(l=0,c=o.length;l<c;l+=1)m="",(!a||r!=="")&&(m+=Hh(t,e)),h=o[l],u=n[h],t.replacer&&(u=t.replacer.call(n,h,u)),Di(t,e+1,h,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&Nl===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,d&&(m+=Hh(t,e)),Di(t,e+1,u,!0,d)&&(t.dump&&Nl===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,r+=m));t.tag=s,t.dump=r||"{}"}_(wA,"writeBlockMapping");function Op(t,e,n){var a,r,s,o,l,c;for(r=n?t.explicitTypes:t.implicitTypes,s=0,o=r.length;s<o;s+=1)if(l=r[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,KC.call(l.represent)==="[object Function]")a=l.represent(e,c);else if(ZC.call(l.represent,c))a=l.represent[c](e,c);else throw new En("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=a}return!0}return!1}_(Op,"detectType");function Di(t,e,n,a,r,s,o){t.tag=null,t.dump=n,Op(t,n,!1)||Op(t,n,!0);var l=KC.call(t.dump),c=a,h;a&&(a=t.flowLevel<0||t.flowLevel>e);var u=l==="[object Object]"||l==="[object Array]",d,m;if(u&&(d=t.duplicates.indexOf(n),m=d!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(r=!1),m&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(u&&m&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")a&&Object.keys(t.dump).length!==0?(wA(t,e,t.dump,r),m&&(t.dump="&ref_"+d+t.dump)):(bA(t,e,t.dump),m&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")a&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?Lp(t,e-1,t.dump,r):Lp(t,e,t.dump,r),m&&(t.dump="&ref_"+d+t.dump)):(yA(t,e,t.dump),m&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&pA(t,t.dump,e,s,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new En("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(h=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?h="!"+h:h.slice(0,18)==="tag:yaml.org,2002:"?h="!!"+h.slice(18):h="!<"+h+">",t.dump=h+" "+t.dump)}return!0}_(Di,"writeNode");function _A(t,e){var n=[],a=[],r,s;for(qh(t,n,a),r=0,s=a.length;r<s;r+=1)e.duplicates.push(n[a[r]]);e.usedDuplicates=new Array(s)}_(_A,"getDuplicateReferences");function qh(t,e,n){var a,r,s;if(t!==null&&typeof t=="object")if(r=e.indexOf(t),r!==-1)n.indexOf(r)===-1&&n.push(r);else if(e.push(t),Array.isArray(t))for(r=0,s=t.length;r<s;r+=1)qh(t[r],e,n);else for(a=Object.keys(t),r=0,s=a.length;r<s;r+=1)qh(t[a[r]],e,n)}_(qh,"inspectNode");function aW(t,e){e=e||{};var n=new oA(e);n.noRefs||_A(t,n);var a=t;return n.replacer&&(a=n.replacer.call({"":a},"",a)),Di(n,0,a,!0,!0)?n.dump+`
`:""}_(aW,"dump$1");function rW(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}_(rW,"renamed");var sW=dC,oW=B7.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Jt={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},aw={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function Vo(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=pt(t),e=pt(e);const[n,a]=[t.x,t.y],[r,s]=[e.x,e.y],o=r-n,l=s-a;return{angle:Math.atan(l/o),deltaX:o,deltaY:l}}_(Vo,"calculateDeltaAndAngle");var pt=_(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),lW=_(t=>({x:_(function(e,n,a){let r=0;const s=pt(a[0]).x<pt(a[a.length-1]).x?"left":"right";if(n===0&&Object.hasOwn(Jt,t.arrowTypeStart)){const{angle:f,deltaX:p}=Vo(a[0],a[1]);r=Jt[t.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(n===a.length-1&&Object.hasOwn(Jt,t.arrowTypeEnd)){const{angle:f,deltaX:p}=Vo(a[a.length-1],a[a.length-2]);r=Jt[t.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const o=Math.abs(pt(e).x-pt(a[a.length-1]).x),l=Math.abs(pt(e).y-pt(a[a.length-1]).y),c=Math.abs(pt(e).x-pt(a[0]).x),h=Math.abs(pt(e).y-pt(a[0]).y),u=Jt[t.arrowTypeStart],d=Jt[t.arrowTypeEnd],m=1;if(o<d&&o>0&&l<d){let f=d+m-o;f*=s==="right"?-1:1,r-=f}if(c<u&&c>0&&h<u){let f=u+m-c;f*=s==="right"?-1:1,r+=f}return pt(e).x+r},"x"),y:_(function(e,n,a){let r=0;const s=pt(a[0]).y<pt(a[a.length-1]).y?"down":"up";if(n===0&&Object.hasOwn(Jt,t.arrowTypeStart)){const{angle:f,deltaY:p}=Vo(a[0],a[1]);r=Jt[t.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(n===a.length-1&&Object.hasOwn(Jt,t.arrowTypeEnd)){const{angle:f,deltaY:p}=Vo(a[a.length-1],a[a.length-2]);r=Jt[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const o=Math.abs(pt(e).y-pt(a[a.length-1]).y),l=Math.abs(pt(e).x-pt(a[a.length-1]).x),c=Math.abs(pt(e).y-pt(a[0]).y),h=Math.abs(pt(e).x-pt(a[0]).x),u=Jt[t.arrowTypeStart],d=Jt[t.arrowTypeEnd],m=1;if(o<d&&o>0&&l<d){let f=d+m-o;f*=s==="up"?-1:1,r-=f}if(c<u&&c>0&&h<u){let f=u+m-c;f*=s==="up"?-1:1,r+=f}return pt(e).y+r},"y")}),"getLineFunctionsWithOffset"),fx=_(({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,n=t?.subGraphTitleMargin?.bottom??0,a=e+n;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:a}},"getSubGraphTitleMargins"),cW=_(t=>{const{handDrawnSeed:e}=Ke();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),Ws=_(t=>{const e=hW([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),hW=_(t=>{const e=new Map;return t.forEach(n=>{const[a,r]=n.split(":");e.set(a.trim(),r?.trim())}),e},"styles2Map"),vA=_(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),be=_(t=>{const{stylesArray:e}=Ws(t),n=[],a=[],r=[],s=[];return e.forEach(o=>{const l=o[0];vA(l)?n.push(o.join(":")+" !important"):(a.push(o.join(":")+" !important"),l.includes("stroke")&&r.push(o.join(":")+" !important"),l==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:r,backgroundStyles:s}},"styles2String"),ye=_((t,e)=>{const{themeVariables:n,handDrawnSeed:a}=Ke(),{nodeBorder:r,mainBkg:s}=n,{stylesMap:o}=Ws(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||r,seed:a,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:uW(o.get("stroke-dasharray"))},e)},"userNodeOverrides"),uW=_(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(e.length===1){const r=isNaN(e[0])?0:e[0];return[r,r]}const n=isNaN(e[0])?0:e[0],a=isNaN(e[1])?0:e[1];return[n,a]},"getStrokeDashArray"),xo={},St={},rw;function dW(){return rw||(rw=1,Object.defineProperty(St,"__esModule",{value:!0}),St.BLANK_URL=St.relativeFirstCharacters=St.whitespaceEscapeCharsRegex=St.urlSchemeRegex=St.ctrlCharactersRegex=St.htmlCtrlEntityRegex=St.htmlEntitiesRegex=St.invalidProtocolRegex=void 0,St.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,St.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,St.htmlCtrlEntityRegex=/&(newline|tab);/gi,St.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,St.urlSchemeRegex=/^.+(:|&colon;)/gim,St.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,St.relativeFirstCharacters=[".","/"],St.BLANK_URL="about:blank"),St}var sw;function mW(){if(sw)return xo;sw=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.sanitizeUrl=void 0;var t=dW();function e(o){return t.relativeFirstCharacters.indexOf(o[0])>-1}function n(o){var l=o.replace(t.ctrlCharactersRegex,"");return l.replace(t.htmlEntitiesRegex,function(c,h){return String.fromCharCode(h)})}function a(o){return URL.canParse(o)}function r(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return t.BLANK_URL;var l,c=r(o.trim());do c=n(c).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),c=r(c),l=c.match(t.ctrlCharactersRegex)||c.match(t.htmlEntitiesRegex)||c.match(t.htmlCtrlEntityRegex)||c.match(t.whitespaceEscapeCharsRegex);while(l&&l.length>0);var h=c;if(!h)return t.BLANK_URL;if(e(h))return h;var u=h.trimStart(),d=u.match(t.urlSchemeRegex);if(!d)return h;var m=d[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(m))return t.BLANK_URL;var f=u.replace(/\\/g,"/");if(m==="mailto:"||m.includes("://"))return f;if(m==="http:"||m==="https:"){if(!a(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return xo.sanitizeUrl=s,xo}var fW=mW(),jA=typeof global=="object"&&global&&global.Object===Object&&global,pW=typeof self=="object"&&self&&self.Object===Object&&self,qi=jA||pW||Function("return this")(),$h=qi.Symbol,TA=Object.prototype,gW=TA.hasOwnProperty,xW=TA.toString,yo=$h?$h.toStringTag:void 0;function yW(t){var e=gW.call(t,yo),n=t[yo];try{t[yo]=void 0;var a=!0}catch{}var r=xW.call(t);return a&&(e?t[yo]=n:delete t[yo]),r}var bW=Object.prototype,wW=bW.toString;function _W(t){return wW.call(t)}var vW="[object Null]",jW="[object Undefined]",ow=$h?$h.toStringTag:void 0;function Us(t){return t==null?t===void 0?jW:vW:ow&&ow in Object(t)?yW(t):_W(t)}function Rr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var TW="[object AsyncFunction]",kW="[object Function]",EW="[object GeneratorFunction]",SW="[object Proxy]";function px(t){if(!Rr(t))return!1;var e=Us(t);return e==kW||e==EW||e==TW||e==SW}var Kd=qi["__core-js_shared__"],lw=function(){var t=/[^.]+$/.exec(Kd&&Kd.keys&&Kd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function CW(t){return!!lw&&lw in t}var AW=Function.prototype,NW=AW.toString;function Pr(t){if(t!=null){try{return NW.call(t)}catch{}try{return t+""}catch{}}return""}var IW=/[\\^$.*+?()[\]{}|]/g,LW=/^\[object .+?Constructor\]$/,OW=Function.prototype,MW=Object.prototype,RW=OW.toString,PW=MW.hasOwnProperty,DW=RegExp("^"+RW.call(PW).replace(IW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BW(t){if(!Rr(t)||CW(t))return!1;var e=px(t)?DW:LW;return e.test(Pr(t))}function FW(t,e){return t?.[e]}function Dr(t,e){var n=FW(t,e);return BW(n)?n:void 0}var Ol=Dr(Object,"create");function HW(){this.__data__=Ol?Ol(null):{},this.size=0}function qW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var $W="__lodash_hash_undefined__",zW=Object.prototype,WW=zW.hasOwnProperty;function UW(t){var e=this.__data__;if(Ol){var n=e[t];return n===$W?void 0:n}return WW.call(e,t)?e[t]:void 0}var VW=Object.prototype,YW=VW.hasOwnProperty;function GW(t){var e=this.__data__;return Ol?e[t]!==void 0:YW.call(e,t)}var XW="__lodash_hash_undefined__";function JW(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ol&&e===void 0?XW:e,this}function Er(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Er.prototype.clear=HW;Er.prototype.delete=qW;Er.prototype.get=UW;Er.prototype.has=GW;Er.prototype.set=JW;function QW(){this.__data__=[],this.size=0}function Du(t,e){return t===e||t!==t&&e!==e}function Bu(t,e){for(var n=t.length;n--;)if(Du(t[n][0],e))return n;return-1}var KW=Array.prototype,ZW=KW.splice;function eU(t){var e=this.__data__,n=Bu(e,t);if(n<0)return!1;var a=e.length-1;return n==a?e.pop():ZW.call(e,n,1),--this.size,!0}function tU(t){var e=this.__data__,n=Bu(e,t);return n<0?void 0:e[n][1]}function nU(t){return Bu(this.__data__,t)>-1}function iU(t,e){var n=this.__data__,a=Bu(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}function ga(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}ga.prototype.clear=QW;ga.prototype.delete=eU;ga.prototype.get=tU;ga.prototype.has=nU;ga.prototype.set=iU;var Ml=Dr(qi,"Map");function aU(){this.size=0,this.__data__={hash:new Er,map:new(Ml||ga),string:new Er}}function rU(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Fu(t,e){var n=t.__data__;return rU(e)?n[typeof e=="string"?"string":"hash"]:n.map}function sU(t){var e=Fu(this,t).delete(t);return this.size-=e?1:0,e}function oU(t){return Fu(this,t).get(t)}function lU(t){return Fu(this,t).has(t)}function cU(t,e){var n=Fu(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}function Fa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var a=t[e];this.set(a[0],a[1])}}Fa.prototype.clear=aU;Fa.prototype.delete=sU;Fa.prototype.get=oU;Fa.prototype.has=lU;Fa.prototype.set=cU;var hU="Expected a function";function tc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(hU);var n=function(){var a=arguments,r=e?e.apply(this,a):a[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,a);return n.cache=s.set(r,o)||s,o};return n.cache=new(tc.Cache||Fa),n}tc.Cache=Fa;function uU(){this.__data__=new ga,this.size=0}function dU(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function mU(t){return this.__data__.get(t)}function fU(t){return this.__data__.has(t)}var pU=200;function gU(t,e){var n=this.__data__;if(n instanceof ga){var a=n.__data__;if(!Ml||a.length<pU-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new Fa(a)}return n.set(t,e),this.size=n.size,this}function Vs(t){var e=this.__data__=new ga(t);this.size=e.size}Vs.prototype.clear=uU;Vs.prototype.delete=dU;Vs.prototype.get=mU;Vs.prototype.has=fU;Vs.prototype.set=gU;var zh=function(){try{var t=Dr(Object,"defineProperty");return t({},"",{}),t}catch{}}();function gx(t,e,n){e=="__proto__"&&zh?zh(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Mp(t,e,n){(n!==void 0&&!Du(t[e],n)||n===void 0&&!(e in t))&&gx(t,e,n)}function xU(t){return function(e,n,a){for(var r=-1,s=Object(e),o=a(e),l=o.length;l--;){var c=o[++r];if(n(s[c],c,s)===!1)break}return e}}var yU=xU(),kA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cw=kA&&typeof module=="object"&&module&&!module.nodeType&&module,bU=cw&&cw.exports===kA,hw=bU?qi.Buffer:void 0,uw=hw?hw.allocUnsafe:void 0;function wU(t,e){if(e)return t.slice();var n=t.length,a=uw?uw(n):new t.constructor(n);return t.copy(a),a}var dw=qi.Uint8Array;function _U(t){var e=new t.constructor(t.byteLength);return new dw(e).set(new dw(t)),e}function vU(t,e){var n=e?_U(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function jU(t,e){var n=-1,a=t.length;for(e||(e=Array(a));++n<a;)e[n]=t[n];return e}var mw=Object.create,TU=function(){function t(){}return function(e){if(!Rr(e))return{};if(mw)return mw(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function EA(t,e){return function(n){return t(e(n))}}var SA=EA(Object.getPrototypeOf,Object),kU=Object.prototype;function Hu(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||kU;return t===n}function EU(t){return typeof t.constructor=="function"&&!Hu(t)?TU(SA(t)):{}}function nc(t){return t!=null&&typeof t=="object"}var SU="[object Arguments]";function fw(t){return nc(t)&&Us(t)==SU}var CA=Object.prototype,CU=CA.hasOwnProperty,AU=CA.propertyIsEnumerable,Wh=fw(function(){return arguments}())?fw:function(t){return nc(t)&&CU.call(t,"callee")&&!AU.call(t,"callee")},Uh=Array.isArray,NU=9007199254740991;function AA(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=NU}function qu(t){return t!=null&&AA(t.length)&&!px(t)}function IU(t){return nc(t)&&qu(t)}function LU(){return!1}var NA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,pw=NA&&typeof module=="object"&&module&&!module.nodeType&&module,OU=pw&&pw.exports===NA,gw=OU?qi.Buffer:void 0,MU=gw?gw.isBuffer:void 0,xx=MU||LU,RU="[object Object]",PU=Function.prototype,DU=Object.prototype,IA=PU.toString,BU=DU.hasOwnProperty,FU=IA.call(Object);function HU(t){if(!nc(t)||Us(t)!=RU)return!1;var e=SA(t);if(e===null)return!0;var n=BU.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&IA.call(n)==FU}var qU="[object Arguments]",$U="[object Array]",zU="[object Boolean]",WU="[object Date]",UU="[object Error]",VU="[object Function]",YU="[object Map]",GU="[object Number]",XU="[object Object]",JU="[object RegExp]",QU="[object Set]",KU="[object String]",ZU="[object WeakMap]",eV="[object ArrayBuffer]",tV="[object DataView]",nV="[object Float32Array]",iV="[object Float64Array]",aV="[object Int8Array]",rV="[object Int16Array]",sV="[object Int32Array]",oV="[object Uint8Array]",lV="[object Uint8ClampedArray]",cV="[object Uint16Array]",hV="[object Uint32Array]",dt={};dt[nV]=dt[iV]=dt[aV]=dt[rV]=dt[sV]=dt[oV]=dt[lV]=dt[cV]=dt[hV]=!0;dt[qU]=dt[$U]=dt[eV]=dt[zU]=dt[tV]=dt[WU]=dt[UU]=dt[VU]=dt[YU]=dt[GU]=dt[XU]=dt[JU]=dt[QU]=dt[KU]=dt[ZU]=!1;function uV(t){return nc(t)&&AA(t.length)&&!!dt[Us(t)]}function dV(t){return function(e){return t(e)}}var LA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fl=LA&&typeof module=="object"&&module&&!module.nodeType&&module,mV=fl&&fl.exports===LA,Zd=mV&&jA.process,xw=function(){try{var t=fl&&fl.require&&fl.require("util").types;return t||Zd&&Zd.binding&&Zd.binding("util")}catch{}}(),yw=xw&&xw.isTypedArray,yx=yw?dV(yw):uV;function Rp(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var fV=Object.prototype,pV=fV.hasOwnProperty;function gV(t,e,n){var a=t[e];(!(pV.call(t,e)&&Du(a,n))||n===void 0&&!(e in t))&&gx(t,e,n)}function xV(t,e,n,a){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],c=void 0;c===void 0&&(c=t[l]),r?gx(n,l,c):gV(n,l,c)}return n}function yV(t,e){for(var n=-1,a=Array(t);++n<t;)a[n]=e(n);return a}var bV=9007199254740991,wV=/^(?:0|[1-9]\d*)$/;function OA(t,e){var n=typeof t;return e=e??bV,!!e&&(n=="number"||n!="symbol"&&wV.test(t))&&t>-1&&t%1==0&&t<e}var _V=Object.prototype,vV=_V.hasOwnProperty;function jV(t,e){var n=Uh(t),a=!n&&Wh(t),r=!n&&!a&&xx(t),s=!n&&!a&&!r&&yx(t),o=n||a||r||s,l=o?yV(t.length,String):[],c=l.length;for(var h in t)(e||vV.call(t,h))&&!(o&&(h=="length"||r&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||OA(h,c)))&&l.push(h);return l}function TV(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var kV=Object.prototype,EV=kV.hasOwnProperty;function SV(t){if(!Rr(t))return TV(t);var e=Hu(t),n=[];for(var a in t)a=="constructor"&&(e||!EV.call(t,a))||n.push(a);return n}function MA(t){return qu(t)?jV(t,!0):SV(t)}function CV(t){return xV(t,MA(t))}function AV(t,e,n,a,r,s,o){var l=Rp(t,n),c=Rp(e,n),h=o.get(c);if(h){Mp(t,n,h);return}var u=s?s(l,c,n+"",t,e,o):void 0,d=u===void 0;if(d){var m=Uh(c),f=!m&&xx(c),p=!m&&!f&&yx(c);u=c,m||f||p?Uh(l)?u=l:IU(l)?u=jU(l):f?(d=!1,u=wU(c,!0)):p?(d=!1,u=vU(c,!0)):u=[]:HU(c)||Wh(c)?(u=l,Wh(l)?u=CV(l):(!Rr(l)||px(l))&&(u=EU(c))):d=!1}d&&(o.set(c,u),r(u,c,a,s,o),o.delete(c)),Mp(t,n,u)}function RA(t,e,n,a,r){t!==e&&yU(e,function(s,o){if(r||(r=new Vs),Rr(s))AV(t,e,o,n,RA,a,r);else{var l=a?a(Rp(t,o),s,o+"",t,e,r):void 0;l===void 0&&(l=s),Mp(t,o,l)}},MA)}function PA(t){return t}function NV(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var bw=Math.max;function IV(t,e,n){return e=bw(e===void 0?t.length-1:e,0),function(){for(var a=arguments,r=-1,s=bw(a.length-e,0),o=Array(s);++r<s;)o[r]=a[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=a[r];return l[e]=n(o),NV(t,this,l)}}function LV(t){return function(){return t}}var OV=zh?function(t,e){return zh(t,"toString",{configurable:!0,enumerable:!1,value:LV(e),writable:!0})}:PA,MV=800,RV=16,PV=Date.now;function DV(t){var e=0,n=0;return function(){var a=PV(),r=RV-(a-n);if(n=a,r>0){if(++e>=MV)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var BV=DV(OV);function FV(t,e){return BV(IV(t,e,PA),t+"")}function HV(t,e,n){if(!Rr(n))return!1;var a=typeof e;return(a=="number"?qu(n)&&OA(e,n.length):a=="string"&&e in n)?Du(n[e],t):!1}function qV(t){return FV(function(e,n){var a=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(r--,s):void 0,o&&HV(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++a<r;){var l=n[a];l&&t(e,l,a,s)}return e})}var $V=qV(function(t,e,n){RA(t,e,n)}),zV="​",WV={curveBasis:ah,curveBasisClosed:Vz,curveBasisOpen:Yz,curveBumpX:_S,curveBumpY:vS,curveBundle:Gz,curveCardinalClosed:Xz,curveCardinalOpen:Jz,curveCardinal:ES,curveCatmullRomClosed:Qz,curveCatmullRomOpen:Kz,curveCatmullRom:CS,curveLinear:Lh,curveLinearClosed:Zz,curveMonotoneX:MS,curveMonotoneY:RS,curveNatural:DS,curveStep:BS,curveStepAfter:HS,curveStepBefore:FS},UV=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,VV=_(function(t,e){const n=DA(t,/(?:init\b)|(?:initialize\b)/);let a={};if(Array.isArray(n)){const o=n.map(l=>l.args);_h(o),a=At(a,[...o])}else a=n.args;if(!a)return;let r=$g(t,e);const s="config";return a[s]!==void 0&&(r==="flowchart-v2"&&(r="flowchart"),a[r]=a[s],delete a[s]),a},"detectInit"),DA=_(function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${UV.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(n,"").replace(/'/gm,'"'),te.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let a;const r=[];for(;(a=dl.exec(t))!==null;)if(a.index===dl.lastIndex&&dl.lastIndex++,a&&!e||e&&a[1]?.match(e)||e&&a[2]?.match(e)){const s=a[1]?a[1]:a[2],o=a[3]?a[3].trim():a[4]?JSON.parse(a[4].trim()):null;r.push({type:s,args:o})}return r.length===0?{type:t,args:null}:r.length===1?r[0]:r}catch(n){return te.error(`ERROR: ${n.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),YV=_(function(t){return t.replace(dl,"")},"removeDirectives"),GV=_(function(t,e){for(const[n,a]of e.entries())if(a.match(t))return n;return-1},"isSubstringInArray");function bx(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return WV[n]??e}_(bx,"interpolateToCurve");function BA(t,e){const n=t.trim();if(n)return e.securityLevel!=="loose"?fW.sanitizeUrl(n):n}_(BA,"formatUrl");var XV=_((t,...e)=>{const n=t.split("."),a=n.length-1,r=n[a];let s=window;for(let o=0;o<a;o++)if(s=s[n[o]],!s){te.error(`Function name: ${t} not found in window`);return}s[r](...e)},"runFunc");function wx(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}_(wx,"distance");function FA(t){let e,n=0;t.forEach(r=>{n+=wx(r,e),e=r});const a=n/2;return _x(t,a)}_(FA,"traverseEdge");function HA(t){return t.length===1?t[0]:FA(t)}_(HA,"calcLabelPosition");var ww=_((t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},"roundNumber"),_x=_((t,e)=>{let n,a=e;for(const r of t){if(n){const s=wx(r,n);if(s===0)return n;if(s<a)a-=s;else{const o=a/s;if(o<=0)return n;if(o>=1)return{x:r.x,y:r.y};if(o>0&&o<1)return{x:ww((1-o)*n.x+o*r.x,5),y:ww((1-o)*n.y+o*r.y,5)}}}n=r}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),JV=_((t,e,n)=>{te.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const r=_x(e,25),s=t?10:5,o=Math.atan2(e[0].y-r.y,e[0].x-r.x),l={x:0,y:0};return l.x=Math.sin(o)*s+(e[0].x+r.x)/2,l.y=-Math.cos(o)*s+(e[0].y+r.y)/2,l},"calcCardinalityPosition");function qA(t,e,n){const a=structuredClone(n);te.info("our points",a),e!=="start_left"&&e!=="start_right"&&a.reverse();const r=25+t,s=_x(a,r),o=10+t*.5,l=Math.atan2(a[0].y-s.y,a[0].x-s.x),c={x:0,y:0};return e==="start_left"?(c.x=Math.sin(l+Math.PI)*o+(a[0].x+s.x)/2,c.y=-Math.cos(l+Math.PI)*o+(a[0].y+s.y)/2):e==="end_right"?(c.x=Math.sin(l-Math.PI)*o+(a[0].x+s.x)/2-5,c.y=-Math.cos(l-Math.PI)*o+(a[0].y+s.y)/2-5):e==="end_left"?(c.x=Math.sin(l)*o+(a[0].x+s.x)/2-5,c.y=-Math.cos(l)*o+(a[0].y+s.y)/2-5):(c.x=Math.sin(l)*o+(a[0].x+s.x)/2,c.y=-Math.cos(l)*o+(a[0].y+s.y)/2),c}_(qA,"calcTerminalLabelPosition");function $A(t){let e="",n="";for(const a of t)a!==void 0&&(a.startsWith("color:")||a.startsWith("text-align:")?n=n+a+";":e=e+a+";");return{style:e,labelStyle:n}}_($A,"getStylesFromArray");var _w=0,QV=_(()=>(_w++,"id-"+Math.random().toString(36).substr(2,12)+"-"+_w),"generateId");function zA(t){let e="";const n="0123456789abcdef",a=n.length;for(let r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*a));return e}_(zA,"makeRandomHex");var KV=_(t=>zA(t.length),"random"),ZV=_(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),eY=_(function(t,e){const n=e.text.replace(zs.lineBreakRegex," "),[,a]=$u(e.fontSize),r=t.append("text");r.attr("x",e.x),r.attr("y",e.y),r.style("text-anchor",e.anchor),r.style("font-family",e.fontFamily),r.style("font-size",a),r.style("font-weight",e.fontWeight),r.attr("fill",e.fill),e.class!==void 0&&r.attr("class",e.class);const s=r.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(n),r},"drawSimpleText"),tY=tc((t,e,n)=>{if(!t||(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),zs.lineBreakRegex.test(t)))return t;const a=t.split(" ").filter(Boolean),r=[];let s="";return a.forEach((o,l)=>{const c=da(`${o} `,n),h=da(s,n);if(c>e){const{hyphenatedStrings:m,remainingWord:f}=nY(o,e,"-",n);r.push(s,...m),s=f}else h+c>=e?(r.push(s),s=o):s=[s,o].filter(Boolean).join(" ");l+1===a.length&&r.push(s)}),r.filter(o=>o!=="").join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),nY=tc((t,e,n="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);const r=[...t],s=[];let o="";return r.forEach((l,c)=>{const h=`${o}${l}`;if(da(h,a)>=e){const d=c+1,m=r.length===d,f=`${h}${n}`;s.push(m?h:f),o=""}else o=h}),{hyphenatedStrings:s,remainingWord:o}},(t,e,n="-",a)=>`${t}${e}${n}${a.fontSize}${a.fontWeight}${a.fontFamily}`);function WA(t,e){return vx(t,e).height}_(WA,"calculateTextHeight");function da(t,e){return vx(t,e).width}_(da,"calculateTextWidth");var vx=tc((t,e)=>{const{fontSize:n=12,fontFamily:a="Arial",fontWeight:r=400}=e;if(!t)return{width:0,height:0};const[,s]=$u(n),o=["sans-serif",a],l=t.split(zs.lineBreakRegex),c=[],h=Ye("body");if(!h.remove)return{width:0,height:0,lineHeight:0};const u=h.append("svg");for(const m of o){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of l){const x=ZV();x.text=g||zV;const b=eY(u,x).style("font-size",s).style("font-weight",r).style("font-family",m),w=(b._groups||b)[0][0].getBBox();if(w.width===0&&w.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,w.width)),f=Math.round(w.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}c.push(p)}u.remove();const d=isNaN(c[1].height)||isNaN(c[1].width)||isNaN(c[1].lineHeight)||c[0].height>c[1].height&&c[0].width>c[1].width&&c[0].lineHeight>c[1].lineHeight?0:1;return c[d]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),xs,iY=(xs=class{constructor(e=!1,n){this.count=0,this.count=n?n.length:0,this.next=e?()=>this.count++:()=>Date.now()}},_(xs,"InitIDGenerator"),xs),kc,aY=_(function(t){return kc=kc||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),kc.innerHTML=t,unescape(kc.textContent)},"entityDecode");function jx(t){return"str"in t}_(jx,"isDetailedError");var rY=_((t,e,n,a)=>{if(!a)return;const r=t.node()?.getBBox();r&&t.append("text").text(a).attr("text-anchor","middle").attr("x",r.x+r.width/2).attr("y",-n).attr("class",e)},"insertTitle"),$u=_(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function Tx(t,e){return $V({},t,e)}_(Tx,"cleanAndMerge");var pi={assignWithDepth:At,wrapLabel:tY,calculateTextHeight:WA,calculateTextWidth:da,calculateTextDimensions:vx,cleanAndMerge:Tx,detectInit:VV,detectDirective:DA,isSubstringInArray:GV,interpolateToCurve:bx,calcLabelPosition:HA,calcCardinalityPosition:JV,calcTerminalLabelPosition:qA,formatUrl:BA,getStylesFromArray:$A,generateId:QV,random:KV,runFunc:XV,entityDecode:aY,insertTitle:rY,isLabelCoordinateInPath:UA,parseFontSize:$u,InitIDGenerator:iY},sY=_(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(n){return n.substring(0,n.length-1)}),e=e.replace(/#\w+;/g,function(n){const a=n.substring(1,n.length-1);return/^\+?\d+$/.test(a)?"ﬂ°°"+a+"¶ß":"ﬂ°"+a+"¶ß"}),e},"encodeEntities"),Br=_(function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),Xce=_((t,e,{counter:n=0,prefix:a,suffix:r},s)=>s||`${a?`${a}_`:""}${t}_${e}_${n}${r?`_${r}`:""}`,"getEdgeId");function nn(t){return t??null}_(nn,"handleUndefinedAttr");function UA(t,e){const n=Math.round(t.x),a=Math.round(t.y),r=e.replace(/(\d+\.\d+)/g,s=>Math.round(parseFloat(s)).toString());return r.includes(n.toString())||r.includes(a.toString())}_(UA,"isLabelCoordinateInPath");const oY=Object.freeze({left:0,top:0,width:16,height:16}),Vh=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),VA=Object.freeze({...oY,...Vh}),lY=Object.freeze({...VA,body:"",hidden:!1}),cY=Object.freeze({width:null,height:null}),hY=Object.freeze({...cY,...Vh}),uY=(t,e,n,a="")=>{const r=t.split(":");if(t.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;a=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const l=r.pop(),c=r.pop(),h={provider:r.length>0?r[0]:a,prefix:c,name:l};return em(h)?h:null}const s=r[0],o=s.split("-");if(o.length>1){const l={provider:a,prefix:o.shift(),name:o.join("-")};return em(l)?l:null}if(n&&a===""){const l={provider:a,prefix:"",name:s};return em(l,n)?l:null}return null},em=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function dY(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const a=((t.rotate||0)+(e.rotate||0))%4;return a&&(n.rotate=a),n}function vw(t,e){const n=dY(t,e);for(const a in lY)a in Vh?a in t&&!(a in n)&&(n[a]=Vh[a]):a in e?n[a]=e[a]:a in t&&(n[a]=t[a]);return n}function mY(t,e){const n=t.icons,a=t.aliases||Object.create(null),r=Object.create(null);function s(o){if(n[o])return r[o]=[];if(!(o in r)){r[o]=null;const l=a[o]&&a[o].parent,c=l&&s(l);c&&(r[o]=[l].concat(c))}return r[o]}return(e||Object.keys(n).concat(Object.keys(a))).forEach(s),r}function jw(t,e,n){const a=t.icons,r=t.aliases||Object.create(null);let s={};function o(l){s=vw(a[l]||r[l],s)}return o(e),n.forEach(o),vw(t,s)}function fY(t,e){if(t.icons[e])return jw(t,e,[]);const n=mY(t,[e])[e];return n?jw(t,e,n):null}const pY=/(-?[0-9.]*[0-9]+[0-9.]*)/g,gY=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Tw(t,e,n){if(e===1)return t;if(n=n||100,typeof t=="number")return Math.ceil(t*e*n)/n;if(typeof t!="string")return t;const a=t.split(pY);if(a===null||!a.length)return t;const r=[];let s=a.shift(),o=gY.test(s);for(;;){if(o){const l=parseFloat(s);isNaN(l)?r.push(s):r.push(Math.ceil(l*e*n)/n)}else r.push(s);if(s=a.shift(),s===void 0)return r.join("");o=!o}}function xY(t,e="defs"){let n="";const a=t.indexOf("<"+e);for(;a>=0;){const r=t.indexOf(">",a),s=t.indexOf("</"+e);if(r===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;n+=t.slice(r+1,s).trim(),t=t.slice(0,a).trim()+t.slice(o+1)}return{defs:n,content:t}}function yY(t,e){return t?"<defs>"+t+"</defs>"+e:e}function bY(t,e,n){const a=xY(t);return yY(a.defs,e+a.content+n)}const wY=t=>t==="unset"||t==="undefined"||t==="none";function _Y(t,e){const n={...VA,...t},a={...hY,...e},r={left:n.left,top:n.top,width:n.width,height:n.height};let s=n.body;[n,a].forEach(g=>{const x=[],b=g.hFlip,w=g.vFlip;let k=g.rotate;b?w?k+=2:(x.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),x.push("scale(-1 1)"),r.top=r.left=0):w&&(x.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),x.push("scale(1 -1)"),r.top=r.left=0);let E;switch(k<0&&(k-=Math.floor(k/4)*4),k=k%4,k){case 1:E=r.height/2+r.top,x.unshift("rotate(90 "+E.toString()+" "+E.toString()+")");break;case 2:x.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:E=r.width/2+r.left,x.unshift("rotate(-90 "+E.toString()+" "+E.toString()+")");break}k%2===1&&(r.left!==r.top&&(E=r.left,r.left=r.top,r.top=E),r.width!==r.height&&(E=r.width,r.width=r.height,r.height=E)),x.length&&(s=bY(s,'<g transform="'+x.join(" ")+'">',"</g>"))});const o=a.width,l=a.height,c=r.width,h=r.height;let u,d;o===null?(d=l===null?"1em":l==="auto"?h:l,u=Tw(d,c/h)):(u=o==="auto"?c:o,d=l===null?Tw(u,h/c):l==="auto"?h:l);const m={},f=(g,x)=>{wY(x)||(m[g]=x.toString())};f("width",u),f("height",d);const p=[r.left,r.top,c,h];return m.viewBox=p.join(" "),{attributes:m,viewBox:p,body:s}}const vY=/\sid="(\S+)"/g,jY="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let TY=0;function kY(t,e=jY){const n=[];let a;for(;a=vY.exec(t);)n.push(a[1]);if(!n.length)return t;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(s=>{const o=typeof e=="function"?e(s):e+(TY++).toString(),l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+o+r+"$3")}),t=t.replace(new RegExp(r,"g"),""),t}function EY(t,e){let n=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const a in e)n+=" "+a+'="'+e[a]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}var Ec={exports:{}},tm,kw;function SY(){if(kw)return tm;kw=1;var t=1e3,e=t*60,n=e*60,a=n*24,r=a*7,s=a*365.25;tm=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return o(u);if(m==="number"&&isFinite(u))return d.long?c(u):l(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(d){var m=parseFloat(d[1]),f=(d[2]||"ms").toLowerCase();switch(f){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*r;case"days":case"day":case"d":return m*a;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function l(u){var d=Math.abs(u);return d>=a?Math.round(u/a)+"d":d>=n?Math.round(u/n)+"h":d>=e?Math.round(u/e)+"m":d>=t?Math.round(u/t)+"s":u+"ms"}function c(u){var d=Math.abs(u);return d>=a?h(u,d,a,"day"):d>=n?h(u,d,n,"hour"):d>=e?h(u,d,e,"minute"):d>=t?h(u,d,t,"second"):u+" ms"}function h(u,d,m,f){var p=d>=m*1.5;return Math.round(u/m)+" "+f+(p?"s":"")}return tm}var nm,Ew;function CY(){if(Ew)return nm;Ew=1;function t(e){a.debug=a,a.default=a,a.coerce=h,a.disable=l,a.enable=s,a.enabled=c,a.humanize=SY(),a.destroy=u,Object.keys(e).forEach(d=>{a[d]=e[d]}),a.names=[],a.skips=[],a.formatters={};function n(d){let m=0;for(let f=0;f<d.length;f++)m=(m<<5)-m+d.charCodeAt(f),m|=0;return a.colors[Math.abs(m)%a.colors.length]}a.selectColor=n;function a(d){let m,f=null,p,g;function x(...b){if(!x.enabled)return;const w=x,k=Number(new Date),E=k-(m||k);w.diff=E,w.prev=m,w.curr=k,m=k,b[0]=a.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let v=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(L,O)=>{if(L==="%%")return"%";v++;const P=a.formatters[O];if(typeof P=="function"){const j=b[v];L=P.call(w,j),b.splice(v,1),v--}return L}),a.formatArgs.call(w,b),(w.log||a.log).apply(w,b)}return x.namespace=d,x.useColors=a.useColors(),x.color=a.selectColor(d),x.extend=r,x.destroy=a.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==a.namespaces&&(p=a.namespaces,g=a.enabled(d)),g),set:b=>{f=b}}),typeof a.init=="function"&&a.init(x),x}function r(d,m){const f=a(this.namespace+(typeof m>"u"?":":m)+d);return f.log=this.log,f}function s(d){a.save(d),a.namespaces=d,a.names=[],a.skips=[];const m=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const f of m)f[0]==="-"?a.skips.push(f.slice(1)):a.names.push(f)}function o(d,m){let f=0,p=0,g=-1,x=0;for(;f<d.length;)if(p<m.length&&(m[p]===d[f]||m[p]==="*"))m[p]==="*"?(g=p,x=f,p++):(f++,p++);else if(g!==-1)p=g+1,x++,f=x;else return!1;for(;p<m.length&&m[p]==="*";)p++;return p===m.length}function l(){const d=[...a.names,...a.skips.map(m=>"-"+m)].join(",");return a.enable(""),d}function c(d){for(const m of a.skips)if(o(d,m))return!1;for(const m of a.names)if(o(d,m))return!0;return!1}function h(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}return nm=t,nm}var AY={},Sw;function NY(){return Sw||(Sw=1,function(t,e){e.formatArgs=a,e.save=r,e.load=s,e.useColors=n,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;c.splice(1,0,h,"color: inherit");let u=0,d=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(u++,m==="%c"&&(d=u))}),c.splice(d,0,h)}e.log=console.debug||console.log||(()=>{});function r(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=AY.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=CY()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(Ec,Ec.exports)),Ec.exports}function kx(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Fr=kx();function YA(t){Fr=t}var pl={exec:()=>null};function et(t,e=""){let n=typeof t=="string"?t:t.source,a={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(fn.caret,"$1"),n=n.replace(r,o),a},getRegex:()=>new RegExp(n,e)};return a}var fn={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},IY=/^(?:[ \t]*(?:\n|$))+/,LY=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,OY=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ic=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,MY=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ex=/(?:[*+-]|\d{1,9}[.)])/,GA=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,XA=et(GA).replace(/bull/g,Ex).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),RY=et(GA).replace(/bull/g,Ex).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Sx=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,PY=/^[^\n]+/,Cx=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,DY=et(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Cx).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),BY=et(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ex).getRegex(),zu="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ax=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,FY=et("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ax).replace("tag",zu).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),JA=et(Sx).replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zu).getRegex(),HY=et(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",JA).getRegex(),Nx={blockquote:HY,code:LY,def:DY,fences:OY,heading:MY,hr:ic,html:FY,lheading:XA,list:BY,newline:IY,paragraph:JA,table:pl,text:PY},Cw=et("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zu).getRegex(),qY={...Nx,lheading:RY,table:Cw,paragraph:et(Sx).replace("hr",ic).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Cw).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zu).getRegex()},$Y={...Nx,html:et(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ax).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:et(Sx).replace("hr",ic).replace("heading",` *#{1,6} *[^
]`).replace("lheading",XA).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},zY=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,WY=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,QA=/^( {2,}|\\)\n(?!\s*$)/,UY=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wu=/[\p{P}\p{S}]/u,Ix=/[\s\p{P}\p{S}]/u,KA=/[^\s\p{P}\p{S}]/u,VY=et(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ix).getRegex(),ZA=/(?!~)[\p{P}\p{S}]/u,YY=/(?!~)[\s\p{P}\p{S}]/u,GY=/(?:[^\s\p{P}\p{S}]|~)/u,XY=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,eN=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,JY=et(eN,"u").replace(/punct/g,Wu).getRegex(),QY=et(eN,"u").replace(/punct/g,ZA).getRegex(),tN="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",KY=et(tN,"gu").replace(/notPunctSpace/g,KA).replace(/punctSpace/g,Ix).replace(/punct/g,Wu).getRegex(),ZY=et(tN,"gu").replace(/notPunctSpace/g,GY).replace(/punctSpace/g,YY).replace(/punct/g,ZA).getRegex(),eG=et("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,KA).replace(/punctSpace/g,Ix).replace(/punct/g,Wu).getRegex(),tG=et(/\\(punct)/,"gu").replace(/punct/g,Wu).getRegex(),nG=et(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),iG=et(Ax).replace("(?:-->|$)","-->").getRegex(),aG=et("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",iG).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yh=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,rG=et(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Yh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nN=et(/^!?\[(label)\]\[(ref)\]/).replace("label",Yh).replace("ref",Cx).getRegex(),iN=et(/^!?\[(ref)\](?:\[\])?/).replace("ref",Cx).getRegex(),sG=et("reflink|nolink(?!\\()","g").replace("reflink",nN).replace("nolink",iN).getRegex(),Lx={_backpedal:pl,anyPunctuation:tG,autolink:nG,blockSkip:XY,br:QA,code:WY,del:pl,emStrongLDelim:JY,emStrongRDelimAst:KY,emStrongRDelimUnd:eG,escape:zY,link:rG,nolink:iN,punctuation:VY,reflink:nN,reflinkSearch:sG,tag:aG,text:UY,url:pl},oG={...Lx,link:et(/^!?\[(label)\]\((.*?)\)/).replace("label",Yh).getRegex(),reflink:et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yh).getRegex()},Pp={...Lx,emStrongRDelimAst:ZY,emStrongLDelim:QY,url:et(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},lG={...Pp,br:et(QA).replace("{2,}","*").getRegex(),text:et(Pp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Sc={normal:Nx,gfm:qY,pedantic:$Y},bo={normal:Lx,gfm:Pp,breaks:lG,pedantic:oG},cG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Aw=t=>cG[t];function Ci(t,e){if(e){if(fn.escapeTest.test(t))return t.replace(fn.escapeReplace,Aw)}else if(fn.escapeTestNoEncode.test(t))return t.replace(fn.escapeReplaceNoEncode,Aw);return t}function Nw(t){try{t=encodeURI(t).replace(fn.percentDecode,"%")}catch{return null}return t}function Iw(t,e){let n=t.replace(fn.findPipe,(s,o,l)=>{let c=!1,h=o;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),a=n.split(fn.splitPipe),r=0;if(a[0].trim()||a.shift(),a.length>0&&!a.at(-1)?.trim()&&a.pop(),e)if(a.length>e)a.splice(e);else for(;a.length<e;)a.push("");for(;r<a.length;r++)a[r]=a[r].trim().replace(fn.slashPipe,"|");return a}function wo(t,e,n){let a=t.length;if(a===0)return"";let r=0;for(;r<a&&t.charAt(a-r-1)===e;)r++;return t.slice(0,a-r)}function hG(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let a=0;a<t.length;a++)if(t[a]==="\\")a++;else if(t[a]===e[0])n++;else if(t[a]===e[1]&&(n--,n<0))return a;return n>0?-2:-1}function Lw(t,e,n,a,r){let s=e.href,o=e.title||null,l=t[1].replace(r.other.outputLinkReplace,"$1");a.state.inLink=!0;let c={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:l,tokens:a.inlineTokens(l)};return a.state.inLink=!1,c}function uG(t,e,n){let a=t.match(n.other.indentCodeCompensation);if(a===null)return e;let r=a[1];return e.split(`
`).map(s=>{let o=s.match(n.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=r.length?s.slice(r.length):s}).join(`
`)}var Gh=class{options;rules;lexer;constructor(e){this.options=e||Fr}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let a=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?a:wo(a,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let a=n[0],r=uG(a,n[3]||"",this.rules);return{type:"code",raw:a,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let a=n[2].trim();if(this.rules.other.endingHash.test(a)){let r=wo(a,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(a=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:wo(n[0],`
`)}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let a=wo(n[0],`
`).split(`
`),r="",s="",o=[];for(;a.length>0;){let l=!1,c=[],h;for(h=0;h<a.length;h++)if(this.rules.other.blockquoteStart.test(a[h]))c.push(a[h]),l=!0;else if(!l)c.push(a[h]);else break;a=a.slice(h);let u=c.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${u}`:u,s=s?`${s}
${d}`:d;let m=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=m,a.length===0)break;let f=o.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let p=f,g=p.raw+`
`+a.join(`
`),x=this.blockquote(g);o[o.length-1]=x,r=r.substring(0,r.length-p.raw.length)+x.raw,s=s.substring(0,s.length-p.text.length)+x.text;break}else if(f?.type==="list"){let p=f,g=p.raw+`
`+a.join(`
`),x=this.list(g);o[o.length-1]=x,r=r.substring(0,r.length-f.raw.length)+x.raw,s=s.substring(0,s.length-p.raw.length)+x.raw,a=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:s}}}list(e){let n=this.rules.block.list.exec(e);if(n){let a=n[1].trim(),r=a.length>1,s={type:"list",raw:"",ordered:r,start:r?+a.slice(0,-1):"",loose:!1,items:[]};a=r?`\\d{1,9}\\${a.slice(-1)}`:`\\${a}`,this.options.pedantic&&(a=r?a:"[*+-]");let o=this.rules.other.listItemRegex(a),l=!1;for(;e;){let h=!1,u="",d="";if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let m=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,w=>" ".repeat(3*w.length)),f=e.split(`
`,1)[0],p=!m.trim(),g=0;if(this.options.pedantic?(g=2,d=m.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=m.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),h=!0),!h){let w=this.rules.other.nextBulletRegex(g),k=this.rules.other.hrRegex(g),E=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),S=this.rules.other.htmlBeginRegex(g);for(;e;){let L=e.split(`
`,1)[0],O;if(f=L,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),O=f):O=f.replace(this.rules.other.tabCharGlobal,"    "),E.test(f)||v.test(f)||S.test(f)||w.test(f)||k.test(f))break;if(O.search(this.rules.other.nonSpaceChar)>=g||!f.trim())d+=`
`+O.slice(g);else{if(p||m.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(m)||v.test(m)||k.test(m))break;d+=`
`+f}!p&&!f.trim()&&(p=!0),u+=L+`
`,e=e.substring(L.length+1),m=O.slice(g)}}s.loose||(l?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0));let x=null,b;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(b=x[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!x,checked:b,loose:!1,text:d,tokens:[]}),s.raw+=u}let c=s.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){let u=s.items[h].tokens.filter(m=>m.type==="space"),d=u.length>0&&u.some(m=>this.rules.other.anyLine.test(m.raw));s.loose=d}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(e){let n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){let n=this.rules.block.def.exec(e);if(n){let a=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:a,raw:n[0],href:r,title:s}}}table(e){let n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;let a=Iw(n[1]),r=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=n[3]?.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(a.length===r.length){for(let l of r)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<a.length;l++)o.header.push({text:a[l],tokens:this.lexer.inline(a[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(Iw(l,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let a=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:a,tokens:this.lexer.inline(a)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let a=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(a)){if(!this.rules.other.endAngleBracket.test(a))return;let o=wo(a.slice(0,-1),"\\");if((a.length-o.length)%2===0)return}else{let o=hG(n[2],"()");if(o===-2)return;if(o>-1){let l=(n[0].indexOf("!")===0?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(a)?r=r.slice(1):r=r.slice(1,-1)),Lw(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let a;if((a=this.rules.inline.reflink.exec(e))||(a=this.rules.inline.nolink.exec(e))){let r=(a[2]||a[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=n[r.toLowerCase()];if(!s){let o=a[0].charAt(0);return{type:"text",raw:o,text:o}}return Lw(a,s,a[0],this.lexer,this.rules)}}emStrong(e,n,a=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&a.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!a||this.rules.inline.punctuation.exec(a))){let s=[...r[0]].length-1,o,l,c=s,h=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,n=n.slice(-1*e.length+s);(r=u.exec(n))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(l=[...o].length,r[3]||r[4]){c+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){h+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+h);let d=[...r[0]][0].length,m=e.slice(0,s+r.index+d+l);if(Math.min(s,l)%2){let p=m.slice(1,-1);return{type:"em",raw:m,text:p,tokens:this.lexer.inlineTokens(p)}}let f=m.slice(2,-2);return{type:"strong",raw:m,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let a=n[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(a),s=this.rules.other.startingSpaceChar.test(a)&&this.rules.other.endingSpaceChar.test(a);return r&&s&&(a=a.substring(1,a.length-1)),{type:"codespan",raw:n[0],text:a}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){let n=this.rules.inline.autolink.exec(e);if(n){let a,r;return n[2]==="@"?(a=n[1],r="mailto:"+a):(a=n[1],r=a),{type:"link",raw:n[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let a,r;if(n[2]==="@")a=n[0],r="mailto:"+a;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(s!==n[0]);a=n[0],n[1]==="www."?r="http://"+n[0]:r=n[0]}return{type:"link",raw:n[0],text:a,href:r,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e){let n=this.rules.inline.text.exec(e);if(n){let a=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:a}}}},oa=class Dp{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Fr,this.options.tokenizer=this.options.tokenizer||new Gh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:fn,block:Sc.normal,inline:bo.normal};this.options.pedantic?(n.block=Sc.pedantic,n.inline=bo.pedantic):this.options.gfm&&(n.block=Sc.gfm,this.options.breaks?n.inline=bo.breaks:n.inline=bo.gfm),this.tokenizer.rules=n}static get rules(){return{block:Sc,inline:bo}}static lex(e,n){return new Dp(n).lex(e)}static lexInline(e,n){return new Dp(n).inlineTokens(e)}lex(e){e=e.replace(fn.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let a=this.inlineQueue[n];this.inlineTokens(a.src,a.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],a=!1){for(this.options.pedantic&&(e=e.replace(fn.tabCharGlobal,"    ").replace(fn.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(o=>(r=o.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let o=n.at(-1);r.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.at(-1).src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let o=n.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},n.push(r));continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){let o=n.at(-1);a&&o?.type==="paragraph"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(r),a=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let o=n.at(-1);o?.type==="text"?(o.raw+=(o.raw.endsWith(`
`)?"":`
`)+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(r);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let a=e,r=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)l.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,r.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);a=this.options.hooks?.emStrongMask?.call({lexer:this},a)??a;let s=!1,o="";for(;e;){s||(o=""),s=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);let h=n.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,a,o)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let c=e;if(this.options.extensions?.startInline){let h=1/0,u=e.slice(1),d;this.options.extensions.startInline.forEach(m=>{d=m.call({lexer:this},u),typeof d=="number"&&d>=0&&(h=Math.min(h,d))}),h<1/0&&h>=0&&(c=e.substring(0,h+1))}if(l=this.tokenizer.inlineText(c)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),s=!0;let h=n.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):n.push(l);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}},Xh=class{options;parser;constructor(e){this.options=e||Fr}space(e){return""}code({text:e,lang:n,escaped:a}){let r=(n||"").match(fn.notSpaceStart)?.[0],s=e.replace(fn.endingNewline,"")+`
`;return r?'<pre><code class="language-'+Ci(r)+'">'+(a?s:Ci(s,!0))+`</code></pre>
`:"<pre><code>"+(a?s:Ci(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){let n=e.ordered,a=e.start,r="";for(let l=0;l<e.items.length;l++){let c=e.items[l];r+=this.listitem(c)}let s=n?"ol":"ul",o=n&&a!==1?' start="'+a+'"':"";return"<"+s+o+`>
`+r+"</"+s+`>
`}listitem(e){let n="";if(e.task){let a=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=a+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=a+" "+Ci(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:a+" ",text:a+" ",escaped:!0}):n+=a+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",a="";for(let s=0;s<e.header.length;s++)a+=this.tablecell(e.header[s]);n+=this.tablerow({text:a});let r="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];a="";for(let l=0;l<o.length;l++)a+=this.tablecell(o[l]);r+=this.tablerow({text:a})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let n=this.parser.parseInline(e.tokens),a=e.header?"th":"td";return(e.align?`<${a} align="${e.align}">`:`<${a}>`)+n+`</${a}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ci(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:a}){let r=this.parser.parseInline(a),s=Nw(e);if(s===null)return r;e=s;let o='<a href="'+e+'"';return n&&(o+=' title="'+Ci(n)+'"'),o+=">"+r+"</a>",o}image({href:e,title:n,text:a,tokens:r}){r&&(a=this.parser.parseInline(r,this.parser.textRenderer));let s=Nw(e);if(s===null)return Ci(a);e=s;let o=`<img src="${e}" alt="${a}"`;return n&&(o+=` title="${Ci(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ci(e.text)}},Ox=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},la=class Bp{options;renderer;textRenderer;constructor(e){this.options=e||Fr,this.options.renderer=this.options.renderer||new Xh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ox}static parse(e,n){return new Bp(n).parse(e)}static parseInline(e,n){return new Bp(n).parseInline(e)}parse(e,n=!0){let a="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let l=s,c=this.options.extensions.renderers[l.type].call({parser:this},l);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(l.type)){a+=c||"";continue}}let o=s;switch(o.type){case"space":{a+=this.renderer.space(o);continue}case"hr":{a+=this.renderer.hr(o);continue}case"heading":{a+=this.renderer.heading(o);continue}case"code":{a+=this.renderer.code(o);continue}case"table":{a+=this.renderer.table(o);continue}case"blockquote":{a+=this.renderer.blockquote(o);continue}case"list":{a+=this.renderer.list(o);continue}case"html":{a+=this.renderer.html(o);continue}case"def":{a+=this.renderer.def(o);continue}case"paragraph":{a+=this.renderer.paragraph(o);continue}case"text":{let l=o,c=this.renderer.text(l);for(;r+1<e.length&&e[r+1].type==="text";)l=e[++r],c+=`
`+this.renderer.text(l);n?a+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):a+=c;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return a}parseInline(e,n=this.renderer){let a="";for(let r=0;r<e.length;r++){let s=e[r];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){a+=l||"";continue}}let o=s;switch(o.type){case"escape":{a+=n.text(o);break}case"html":{a+=n.html(o);break}case"link":{a+=n.link(o);break}case"image":{a+=n.image(o);break}case"strong":{a+=n.strong(o);break}case"em":{a+=n.em(o);break}case"codespan":{a+=n.codespan(o);break}case"br":{a+=n.br(o);break}case"del":{a+=n.del(o);break}case"text":{a+=n.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return a}},Yo=class{options;block;constructor(e){this.options=e||Fr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?oa.lex:oa.lexInline}provideParser(){return this.block?la.parse:la.parseInline}},dG=class{defaults=kx();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=la;Renderer=Xh;TextRenderer=Ox;Lexer=oa;Tokenizer=Gh;Hooks=Yo;constructor(...e){this.use(...e)}walkTokens(e,n){let a=[];for(let r of e)switch(a=a.concat(n.call(this,r)),r.type){case"table":{let s=r;for(let o of s.header)a=a.concat(this.walkTokens(o.tokens,n));for(let o of s.rows)for(let l of o)a=a.concat(this.walkTokens(l.tokens,n));break}case"list":{let s=r;a=a.concat(this.walkTokens(s.items,n));break}default:{let s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let l=s[o].flat(1/0);a=a.concat(this.walkTokens(l,n))}):s.tokens&&(a=a.concat(this.walkTokens(s.tokens,n)))}}return a}use(...e){let n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(a=>{let r={...a};if(r.async=this.defaults.async||r.async||!1,a.extensions&&(a.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=n.renderers[s.name];o?n.renderers[s.name]=function(...l){let c=s.renderer.apply(this,l);return c===!1&&(c=o.apply(this,l)),c}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),a.renderer){let s=this.defaults.renderer||new Xh(this.defaults);for(let o in a.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let l=o,c=a.renderer[l],h=s[l];s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d||""}}r.renderer=s}if(a.tokenizer){let s=this.defaults.tokenizer||new Gh(this.defaults);for(let o in a.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let l=o,c=a.tokenizer[l],h=s[l];s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}r.tokenizer=s}if(a.hooks){let s=this.defaults.hooks||new Yo;for(let o in a.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let l=o,c=a.hooks[l],h=s[l];Yo.passThroughHooks.has(o)?s[l]=u=>{if(this.defaults.async&&Yo.passThroughHooksRespectAsync.has(o))return Promise.resolve(c.call(s,u)).then(m=>h.call(s,m));let d=c.call(s,u);return h.call(s,d)}:s[l]=(...u)=>{let d=c.apply(s,u);return d===!1&&(d=h.apply(s,u)),d}}r.hooks=s}if(a.walkTokens){let s=this.defaults.walkTokens,o=a.walkTokens;r.walkTokens=function(l){let c=[];return c.push(o.call(this,l)),s&&(c=c.concat(s.call(this,l))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return oa.lex(e,n??this.defaults)}parser(e,n){return la.parse(e,n??this.defaults)}parseMarkdown(e){return(n,a)=>{let r={...a},s={...this.defaults,...r},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let l=s.hooks?s.hooks.provideLexer():e?oa.lex:oa.lexInline,c=s.hooks?s.hooks.provideParser():e?la.parse:la.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(h=>l(h,s)).then(h=>s.hooks?s.hooks.processAllTokens(h):h).then(h=>s.walkTokens?Promise.all(this.walkTokens(h,s.walkTokens)).then(()=>h):h).then(h=>c(h,s)).then(h=>s.hooks?s.hooks.postprocess(h):h).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let h=l(n,s);s.hooks&&(h=s.hooks.processAllTokens(h)),s.walkTokens&&this.walkTokens(h,s.walkTokens);let u=c(h,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(h){return o(h)}}}onError(e,n){return a=>{if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let r="<p>An error occurred:</p><pre>"+Ci(a.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(a);throw a}}},Sr=new dG;function Ze(t,e){return Sr.parse(t,e)}Ze.options=Ze.setOptions=function(t){return Sr.setOptions(t),Ze.defaults=Sr.defaults,YA(Ze.defaults),Ze};Ze.getDefaults=kx;Ze.defaults=Fr;Ze.use=function(...t){return Sr.use(...t),Ze.defaults=Sr.defaults,YA(Ze.defaults),Ze};Ze.walkTokens=function(t,e){return Sr.walkTokens(t,e)};Ze.parseInline=Sr.parseInline;Ze.Parser=la;Ze.parser=la.parse;Ze.Renderer=Xh;Ze.TextRenderer=Ox;Ze.Lexer=oa;Ze.lexer=oa.lex;Ze.Tokenizer=Gh;Ze.Hooks=Yo;Ze.parse=Ze;Ze.options;Ze.setOptions;Ze.use;Ze.walkTokens;Ze.parseInline;la.parse;oa.lex;function aN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var a=Array.from(typeof t=="string"?[t]:t);a[a.length-1]=a[a.length-1].replace(/\r?\n([\t ]*)$/,"");var r=a.reduce(function(l,c){var h=c.match(/\n([\t ]+|(?!\s).)/g);return h?l.concat(h.map(function(u){var d,m;return(m=(d=u.match(/[\t ]/g))===null||d===void 0?void 0:d.length)!==null&&m!==void 0?m:0})):l},[]);if(r.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,r)+"}","g");a=a.map(function(l){return l.replace(s,`
`)})}a[0]=a[0].replace(/^\r?\n/,"");var o=a[0];return e.forEach(function(l,c){var h=o.match(/(?:^|\n)( *)$/),u=h?h[1]:"",d=l;typeof l=="string"&&l.includes(`
`)&&(d=String(l).split(`
`).map(function(m,f){return f===0?m:""+u+m}).join(`
`)),o+=d+a[c+1]}),o}var mG={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Fp=new Map,rN=new Map,fG=_(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(te.debug("Registering icon pack:",e.name),"loader"in e)rN.set(e.name,e.loader);else if("icons"in e)Fp.set(e.name,e.icons);else throw te.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),sN=_(async(t,e)=>{const n=uY(t,!0,e!==void 0);if(!n)throw new Error(`Invalid icon name: ${t}`);const a=n.prefix||e;if(!a)throw new Error(`Icon name must contain a prefix: ${t}`);let r=Fp.get(a);if(!r){const o=rN.get(a);if(!o)throw new Error(`Icon set not found: ${n.prefix}`);try{r={...await o(),prefix:a},Fp.set(a,r)}catch(l){throw te.error(l),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=fY(r,n.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),pG=_(async t=>{try{return await sN(t),!0}catch{return!1}},"isIconAvailable"),ac=_(async(t,e,n)=>{let a;try{a=await sN(t,e?.fallbackPrefix)}catch(o){te.error(o),a=mG}const r=_Y(a,e),s=EY(kY(r.body),{...r.attributes,...n});return ei(s,en())},"getIconSVG");function oN(t,{markdownAutoWrap:e}){const a=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),r=aN(a);return e===!1?r.replace(/ /g,"&nbsp;"):r}_(oN,"preprocessMarkdown");function lN(t,e={}){const n=oN(t,e),a=Ze.lexer(n),r=[[]];let s=0;function o(l,c="normal"){l.type==="text"?l.text.split(`
`).forEach((u,d)=>{d!==0&&(s++,r.push([])),u.split(" ").forEach(m=>{m=m.replace(/&#39;/g,"'"),m&&r[s].push({content:m,type:c})})}):l.type==="strong"||l.type==="em"?l.tokens.forEach(h=>{o(h,l.type)}):l.type==="html"&&r[s].push({content:l.text,type:"normal"})}return _(o,"processNode"),a.forEach(l=>{l.type==="paragraph"?l.tokens?.forEach(c=>{o(c)}):l.type==="html"?r[s].push({content:l.text,type:"normal"}):r[s].push({content:l.raw,type:"normal"})}),r}_(lN,"markdownToLines");function cN(t,{markdownAutoWrap:e}={}){const n=Ze.lexer(t);function a(r){return r.type==="text"?e===!1?r.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):r.text.replace(/\n */g,"<br/>"):r.type==="strong"?`<strong>${r.tokens?.map(a).join("")}</strong>`:r.type==="em"?`<em>${r.tokens?.map(a).join("")}</em>`:r.type==="paragraph"?`<p>${r.tokens?.map(a).join("")}</p>`:r.type==="space"?"":r.type==="html"?`${r.text}`:r.type==="escape"?r.text:(te.warn(`Unsupported markdown: ${r.type}`),r.raw)}return _(a,"output"),n.map(a).join("")}_(cN,"markdownToHTML");function hN(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}_(hN,"splitTextToChars");function uN(t,e){const n=hN(e.content);return Mx(t,[],n,e.type)}_(uN,"splitWordToFitWidth");function Mx(t,e,n,a){if(n.length===0)return[{content:e.join(""),type:a},{content:"",type:a}];const[r,...s]=n,o=[...e,r];return t([{content:o.join(""),type:a}])?Mx(t,o,s,a):(e.length===0&&r&&(e.push(r),n.shift()),[{content:e.join(""),type:a},{content:n.join(""),type:a}])}_(Mx,"splitWordToFitWidthRecursion");function dN(t,e){if(t.some(({content:n})=>n.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Jh(t,e)}_(dN,"splitLineToFitWidth");function Jh(t,e,n=[],a=[]){if(t.length===0)return a.length>0&&n.push(a),n.length>0?n:[];let r="";t[0].content===" "&&(r=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...a];if(r!==""&&o.push({content:r,type:"normal"}),o.push(s),e(o))return Jh(t,e,n,o);if(a.length>0)n.push(a),t.unshift(s);else if(s.content){const[l,c]=uN(e,s);n.push([l]),c.content&&t.unshift(c)}return Jh(t,e,n)}_(Jh,"splitLineToFitWidthRecursion");function Hp(t,e){e&&t.attr("style",e)}_(Hp,"applyStyle");async function mN(t,e,n,a,r=!1,s=en()){const o=t.append("foreignObject");o.attr("width",`${10*n}px`),o.attr("height",`${10*n}px`);const l=o.append("xhtml:div"),c=js(e.label)?await zg(e.label.replace(zs.lineBreakRegex,`
`),s):ei(e.label,s),h=e.isNode?"nodeLabel":"edgeLabel",u=l.append("span");u.html(c),Hp(u,e.labelStyle),u.attr("class",`${h} ${a}`),Hp(l,e.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("line-height","1.5"),l.style("max-width",n+"px"),l.style("text-align","center"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),r&&l.attr("class","labelBkg");let d=l.node().getBoundingClientRect();return d.width===n&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",n+"px"),d=l.node().getBoundingClientRect()),o.node()}_(mN,"addHtmlSpan");function Uu(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}_(Uu,"createTspan");function fN(t,e,n){const a=t.append("text"),r=Uu(a,1,e);Vu(r,n);const s=r.node().getComputedTextLength();return a.remove(),s}_(fN,"computeWidthOfText");function gG(t,e,n){const a=t.append("text"),r=Uu(a,1,e);Vu(r,[{content:n,type:"normal"}]);const s=r.node()?.getBoundingClientRect();return s&&a.remove(),s}_(gG,"computeDimensionOfText");function pN(t,e,n,a=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),l=s.append("text").attr("y","-10.1");let c=0;for(const h of n){const u=_(m=>fN(s,1.1,m)<=t,"checkWidth"),d=u(h)?[h]:dN(h,u);for(const m of d){const f=Uu(l,c,1.1);Vu(f,m),c++}}if(a){const h=l.node().getBBox(),u=2;return o.attr("x",h.x-u).attr("y",h.y-u).attr("width",h.width+2*u).attr("height",h.height+2*u),s.node()}else return l.node()}_(pN,"createFormattedText");function Vu(t,e){t.text(""),e.forEach((n,a)=>{const r=t.append("tspan").attr("font-style",n.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",n.type==="strong"?"bold":"normal");a===0?r.text(n.content):r.text(" "+n.content)})}_(Vu,"updateTextContentAndStyles");async function gN(t,e={}){const n=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(r,s,o)=>(n.push((async()=>{const l=`${s}:${o}`;return await pG(l)?await ac(l,void 0,{class:"label-icon"}):`<i class='${ei(r,e).replace(":"," ")}'></i>`})()),r));const a=await Promise.all(n);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>a.shift()??"")}_(gN,"replaceIconSubstring");var Ha=_(async(t,e="",{style:n="",isTitle:a=!1,classes:r="",useHtmlLabels:s=!0,isNode:o=!0,width:l=200,addSvgBackground:c=!1}={},h)=>{if(te.debug("XYZ createText",e,n,a,r,s,o,"addSvgBackground: ",c),s){const u=cN(e,h),d=await gN(Br(u),h),m=e.replace(/\\\\/g,"\\"),f={isNode:o,label:js(e)?m:d,labelStyle:n.replace("fill:","color:")};return await mN(t,f,l,r,c,h)}else{const u=e.replace(/<br\s*\/?>/g,"<br/>"),d=lN(u.replace("<br>","<br/>"),h),m=pN(l,t,d,e?c:!1);if(o){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ye(m).attr("style",f)}else{const f=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");Ye(m).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");Ye(m).select("text").attr("style",p)}return m}},"createText");function im(t,e,n){if(t&&t.length){const[a,r]=e,s=Math.PI/180*n,o=Math.cos(s),l=Math.sin(s);for(const c of t){const[h,u]=c;c[0]=(h-a)*o-(u-r)*l+a,c[1]=(h-a)*l+(u-r)*o+r}}}function xG(t,e){return t[0]===e[0]&&t[1]===e[1]}function yG(t,e,n,a=1){const r=n,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,l=[0,0];if(r)for(const h of o)im(h,l,r);const c=function(h,u,d){const m=[];for(const w of h){const k=[...w];xG(k[0],k[k.length-1])||k.push([k[0][0],k[0][1]]),k.length>2&&m.push(k)}const f=[];u=Math.max(u,.1);const p=[];for(const w of m)for(let k=0;k<w.length-1;k++){const E=w[k],v=w[k+1];if(E[1]!==v[1]){const S=Math.min(E[1],v[1]);p.push({ymin:S,ymax:Math.max(E[1],v[1]),x:S===E[1]?E[0]:v[0],islope:(v[0]-E[0])/(v[1]-E[1])})}}if(p.sort((w,k)=>w.ymin<k.ymin?-1:w.ymin>k.ymin?1:w.x<k.x?-1:w.x>k.x?1:w.ymax===k.ymax?0:(w.ymax-k.ymax)/Math.abs(w.ymax-k.ymax)),!p.length)return f;let g=[],x=p[0].ymin,b=0;for(;g.length||p.length;){if(p.length){let w=-1;for(let k=0;k<p.length&&!(p[k].ymin>x);k++)w=k;p.splice(0,w+1).forEach(k=>{g.push({s:x,edge:k})})}if(g=g.filter(w=>!(w.edge.ymax<=x)),g.sort((w,k)=>w.edge.x===k.edge.x?0:(w.edge.x-k.edge.x)/Math.abs(w.edge.x-k.edge.x)),(d!==1||b%u==0)&&g.length>1)for(let w=0;w<g.length;w+=2){const k=w+1;if(k>=g.length)break;const E=g[w].edge,v=g[k].edge;f.push([[Math.round(E.x),x],[Math.round(v.x),x]])}x+=d,g.forEach(w=>{w.edge.x=w.edge.x+d*w.edge.islope}),b++}return f}(o,s,a);if(r){for(const h of o)im(h,l,-r);(function(h,u,d){const m=[];h.forEach(f=>m.push(...f)),im(m,u,d)})(c,l,-r)}return c}function rc(t,e){var n;const a=e.hachureAngle+90;let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.round(Math.max(r,.1));let s=1;return e.roughness>=1&&(((n=e.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(s=r),yG(t,r,a,s||1)}class Rx{constructor(e){this.helper=e}fillPolygons(e,n){return this._fillPolygons(e,n)}_fillPolygons(e,n){const a=rc(e,n);return{type:"fillSketch",ops:this.renderLines(a,n)}}renderLines(e,n){const a=[];for(const r of e)a.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],n));return a}}function Yu(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class bG extends Rx{fillPolygons(e,n){let a=n.hachureGap;a<0&&(a=4*n.strokeWidth),a=Math.max(a,.1);const r=rc(e,Object.assign({},n,{hachureGap:a})),s=Math.PI/180*n.hachureAngle,o=[],l=.5*a*Math.cos(s),c=.5*a*Math.sin(s);for(const[h,u]of r)Yu([h,u])&&o.push([[h[0]-l,h[1]+c],[...u]],[[h[0]+l,h[1]-c],[...u]]);return{type:"fillSketch",ops:this.renderLines(o,n)}}}class wG extends Rx{fillPolygons(e,n){const a=this._fillPolygons(e,n),r=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),s=this._fillPolygons(e,r);return a.ops=a.ops.concat(s.ops),a}}class _G{constructor(e){this.helper=e}fillPolygons(e,n){const a=rc(e,n=Object.assign({},n,{hachureAngle:0}));return this.dotsOnLines(a,n)}dotsOnLines(e,n){const a=[];let r=n.hachureGap;r<0&&(r=4*n.strokeWidth),r=Math.max(r,.1);let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const o=r/4;for(const l of e){const c=Yu(l),h=c/r,u=Math.ceil(h)-1,d=c-u*r,m=(l[0][0]+l[1][0])/2-r/4,f=Math.min(l[0][1],l[1][1]);for(let p=0;p<u;p++){const g=f+d+p*r,x=m-o+2*Math.random()*o,b=g-o+2*Math.random()*o,w=this.helper.ellipse(x,b,s,s,n);a.push(...w.ops)}}return{type:"fillSketch",ops:a}}}class vG{constructor(e){this.helper=e}fillPolygons(e,n){const a=rc(e,n);return{type:"fillSketch",ops:this.dashedLine(a,n)}}dashedLine(e,n){const a=n.dashOffset<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashOffset,r=n.dashGap<0?n.hachureGap<0?4*n.strokeWidth:n.hachureGap:n.dashGap,s=[];return e.forEach(o=>{const l=Yu(o),c=Math.floor(l/(a+r)),h=(l+r-c*(a+r))/2;let u=o[0],d=o[1];u[0]>d[0]&&(u=o[1],d=o[0]);const m=Math.atan((d[1]-u[1])/(d[0]-u[0]));for(let f=0;f<c;f++){const p=f*(a+r),g=p+a,x=[u[0]+p*Math.cos(m)+h*Math.cos(m),u[1]+p*Math.sin(m)+h*Math.sin(m)],b=[u[0]+g*Math.cos(m)+h*Math.cos(m),u[1]+g*Math.sin(m)+h*Math.sin(m)];s.push(...this.helper.doubleLineOps(x[0],x[1],b[0],b[1],n))}}),s}}class jG{constructor(e){this.helper=e}fillPolygons(e,n){const a=n.hachureGap<0?4*n.strokeWidth:n.hachureGap,r=n.zigzagOffset<0?a:n.zigzagOffset,s=rc(e,n=Object.assign({},n,{hachureGap:a+r}));return{type:"fillSketch",ops:this.zigzagLines(s,r,n)}}zigzagLines(e,n,a){const r=[];return e.forEach(s=>{const o=Yu(s),l=Math.round(o/(2*n));let c=s[0],h=s[1];c[0]>h[0]&&(c=s[1],h=s[0]);const u=Math.atan((h[1]-c[1])/(h[0]-c[0]));for(let d=0;d<l;d++){const m=2*d*n,f=2*(d+1)*n,p=Math.sqrt(2*Math.pow(n,2)),g=[c[0]+m*Math.cos(u),c[1]+m*Math.sin(u)],x=[c[0]+f*Math.cos(u),c[1]+f*Math.sin(u)],b=[g[0]+p*Math.cos(u+Math.PI/4),g[1]+p*Math.sin(u+Math.PI/4)];r.push(...this.helper.doubleLineOps(g[0],g[1],b[0],b[1],a),...this.helper.doubleLineOps(b[0],b[1],x[0],x[1],a))}}),r}}const vn={};class TG{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const kG=0,am=1,Ow=2,Cc={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function rm(t,e){return t.type===e}function Px(t){const e=[],n=function(o){const l=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))l[l.length]={type:kG,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];l[l.length]={type:am,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return l[l.length]={type:Ow,text:""},l}(t);let a="BOD",r=0,s=n[r];for(;!rm(s,Ow);){let o=0;const l=[];if(a==="BOD"){if(s.text!=="M"&&s.text!=="m")return Px("M0,0"+t);r++,o=Cc[s.text],a=s.text}else rm(s,am)?o=Cc[a]:(r++,o=Cc[s.text],a=s.text);if(!(r+o<n.length))throw new Error("Path data ended short");for(let c=r;c<r+o;c++){const h=n[c];if(!rm(h,am))throw new Error("Param not a number: "+a+","+h.text);l[l.length]=+h.text}if(typeof Cc[a]!="number")throw new Error("Bad segment: "+a);{const c={key:a,data:l};e.push(c),r+=o,s=n[r],a==="M"&&(a="L"),a==="m"&&(a="l")}}return e}function xN(t){let e=0,n=0,a=0,r=0;const s=[];for(const{key:o,data:l}of t)switch(o){case"M":s.push({key:"M",data:[...l]}),[e,n]=l,[a,r]=l;break;case"m":e+=l[0],n+=l[1],s.push({key:"M",data:[e,n]}),a=e,r=n;break;case"L":s.push({key:"L",data:[...l]}),[e,n]=l;break;case"l":e+=l[0],n+=l[1],s.push({key:"L",data:[e,n]});break;case"C":s.push({key:"C",data:[...l]}),e=l[4],n=l[5];break;case"c":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"C",data:c}),e=c[4],n=c[5];break}case"Q":s.push({key:"Q",data:[...l]}),e=l[2],n=l[3];break;case"q":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"Q",data:c}),e=c[2],n=c[3];break}case"A":s.push({key:"A",data:[...l]}),e=l[5],n=l[6];break;case"a":e+=l[5],n+=l[6],s.push({key:"A",data:[l[0],l[1],l[2],l[3],l[4],e,n]});break;case"H":s.push({key:"H",data:[...l]}),e=l[0];break;case"h":e+=l[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...l]}),n=l[0];break;case"v":n+=l[0],s.push({key:"V",data:[n]});break;case"S":s.push({key:"S",data:[...l]}),e=l[2],n=l[3];break;case"s":{const c=l.map((h,u)=>u%2?h+n:h+e);s.push({key:"S",data:c}),e=c[2],n=c[3];break}case"T":s.push({key:"T",data:[...l]}),e=l[0],n=l[1];break;case"t":e+=l[0],n+=l[1],s.push({key:"T",data:[e,n]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=a,n=r}return s}function yN(t){const e=[];let n="",a=0,r=0,s=0,o=0,l=0,c=0;for(const{key:h,data:u}of t){switch(h){case"M":e.push({key:"M",data:[...u]}),[a,r]=u,[s,o]=u;break;case"C":e.push({key:"C",data:[...u]}),a=u[4],r=u[5],l=u[2],c=u[3];break;case"L":e.push({key:"L",data:[...u]}),[a,r]=u;break;case"H":a=u[0],e.push({key:"L",data:[a,r]});break;case"V":r=u[0],e.push({key:"L",data:[a,r]});break;case"S":{let d=0,m=0;n==="C"||n==="S"?(d=a+(a-l),m=r+(r-c)):(d=a,m=r),e.push({key:"C",data:[d,m,...u]}),l=u[0],c=u[1],a=u[2],r=u[3];break}case"T":{const[d,m]=u;let f=0,p=0;n==="Q"||n==="T"?(f=a+(a-l),p=r+(r-c)):(f=a,p=r);const g=a+2*(f-a)/3,x=r+2*(p-r)/3,b=d+2*(f-d)/3,w=m+2*(p-m)/3;e.push({key:"C",data:[g,x,b,w,d,m]}),l=f,c=p,a=d,r=m;break}case"Q":{const[d,m,f,p]=u,g=a+2*(d-a)/3,x=r+2*(m-r)/3,b=f+2*(d-f)/3,w=p+2*(m-p)/3;e.push({key:"C",data:[g,x,b,w,f,p]}),l=d,c=m,a=f,r=p;break}case"A":{const d=Math.abs(u[0]),m=Math.abs(u[1]),f=u[2],p=u[3],g=u[4],x=u[5],b=u[6];d===0||m===0?(e.push({key:"C",data:[a,r,x,b,x,b]}),a=x,r=b):(a!==x||r!==b)&&(bN(a,r,x,b,d,m,f,p,g).forEach(function(w){e.push({key:"C",data:w})}),a=x,r=b);break}case"Z":e.push({key:"Z",data:[]}),a=s,r=o}n=h}return e}function _o(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function bN(t,e,n,a,r,s,o,l,c,h){const u=(d=o,Math.PI*d/180);var d;let m=[],f=0,p=0,g=0,x=0;if(h)[f,p,g,x]=h;else{[t,e]=_o(t,e,-u),[n,a]=_o(n,a,-u);const M=(t-n)/2,C=(e-a)/2;let N=M*M/(r*r)+C*C/(s*s);N>1&&(N=Math.sqrt(N),r*=N,s*=N);const R=r*r,$=s*s,U=R*$-R*C*C-$*M*M,B=R*C*C+$*M*M,T=(l===c?-1:1)*Math.sqrt(Math.abs(U/B));g=T*r*C/s+(t+n)/2,x=T*-s*M/r+(e+a)/2,f=Math.asin(parseFloat(((e-x)/s).toFixed(9))),p=Math.asin(parseFloat(((a-x)/s).toFixed(9))),t<g&&(f=Math.PI-f),n<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),c&&f>p&&(f-=2*Math.PI),!c&&p>f&&(p-=2*Math.PI)}let b=p-f;if(Math.abs(b)>120*Math.PI/180){const M=p,C=n,N=a;p=c&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,m=bN(n=g+r*Math.cos(p),a=x+s*Math.sin(p),C,N,r,s,o,0,c,[p,M,g,x])}b=p-f;const w=Math.cos(f),k=Math.sin(f),E=Math.cos(p),v=Math.sin(p),S=Math.tan(b/4),L=4/3*r*S,O=4/3*s*S,P=[t,e],j=[t+L*k,e-O*w],A=[n+L*v,a-O*E],q=[n,a];if(j[0]=2*P[0]-j[0],j[1]=2*P[1]-j[1],h)return[j,A,q].concat(m);{m=[j,A,q].concat(m);const M=[];for(let C=0;C<m.length;C+=3){const N=_o(m[C][0],m[C][1],u),R=_o(m[C+1][0],m[C+1][1],u),$=_o(m[C+2][0],m[C+2][1],u);M.push([N[0],N[1],R[0],R[1],$[0],$[1]])}return M}}const EG={randOffset:function(t,e){return Ie(t,e)},randOffsetWithRange:function(t,e,n){return Qh(t,e,n)},ellipse:function(t,e,n,a,r){const s=_N(n,a,r);return qp(t,e,r,s).opset},doubleLineOps:function(t,e,n,a,r){return Ra(t,e,n,a,r,!0)}};function wN(t,e,n,a,r){return{type:"path",ops:Ra(t,e,n,a,r)}}function oh(t,e,n){const a=(t||[]).length;if(a>2){const r=[];for(let s=0;s<a-1;s++)r.push(...Ra(t[s][0],t[s][1],t[s+1][0],t[s+1][1],n));return e&&r.push(...Ra(t[a-1][0],t[a-1][1],t[0][0],t[0][1],n)),{type:"path",ops:r}}return a===2?wN(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function SG(t,e,n,a,r){return function(s,o){return oh(s,!0,o)}([[t,e],[t+n,e],[t+n,e+a],[t,e+a]],r)}function Mw(t,e){if(t.length){const n=typeof t[0][0]=="number"?[t]:t,a=Ac(n[0],1*(1+.2*e.roughness),e),r=e.disableMultiStroke?[]:Ac(n[0],1.5*(1+.22*e.roughness),Dw(e));for(let s=1;s<n.length;s++){const o=n[s];if(o.length){const l=Ac(o,1*(1+.2*e.roughness),e),c=e.disableMultiStroke?[]:Ac(o,1.5*(1+.22*e.roughness),Dw(e));for(const h of l)h.op!=="move"&&a.push(h);for(const h of c)h.op!=="move"&&r.push(h)}}return{type:"path",ops:a.concat(r)}}return{type:"path",ops:[]}}function _N(t,e,n){const a=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),r=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*a)),s=2*Math.PI/r;let o=Math.abs(t/2),l=Math.abs(e/2);const c=1-n.curveFitting;return o+=Ie(o*c,n),l+=Ie(l*c,n),{increment:s,rx:o,ry:l}}function qp(t,e,n,a){const[r,s]=Bw(a.increment,t,e,a.rx,a.ry,1,a.increment*Qh(.1,Qh(.4,1,n),n),n);let o=Kh(r,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[l]=Bw(a.increment,t,e,a.rx,a.ry,1.5,0,n),c=Kh(l,null,n);o=o.concat(c)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function Rw(t,e,n,a,r,s,o,l,c){const h=t,u=e;let d=Math.abs(n/2),m=Math.abs(a/2);d+=Ie(.01*d,c),m+=Ie(.01*m,c);let f=r,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/c.curveStepCount,x=Math.min(g/2,(p-f)/2),b=Fw(x,h,u,d,m,f,p,1,c);if(!c.disableMultiStroke){const w=Fw(x,h,u,d,m,f,p,1.5,c);b.push(...w)}return o&&(l?b.push(...Ra(h,u,h+d*Math.cos(f),u+m*Math.sin(f),c),...Ra(h,u,h+d*Math.cos(p),u+m*Math.sin(p),c)):b.push({op:"lineTo",data:[h,u]},{op:"lineTo",data:[h+d*Math.cos(f),u+m*Math.sin(f)]})),{type:"path",ops:b}}function Pw(t,e){const n=yN(xN(Px(t))),a=[];let r=[0,0],s=[0,0];for(const{key:o,data:l}of n)switch(o){case"M":s=[l[0],l[1]],r=[l[0],l[1]];break;case"L":a.push(...Ra(s[0],s[1],l[0],l[1],e)),s=[l[0],l[1]];break;case"C":{const[c,h,u,d,m,f]=l;a.push(...CG(c,h,u,d,m,f,s,e)),s=[m,f];break}case"Z":a.push(...Ra(s[0],s[1],r[0],r[1],e)),s=[r[0],r[1]]}return{type:"path",ops:a}}function sm(t,e){const n=[];for(const a of t)if(a.length){const r=e.maxRandomnessOffset||0,s=a.length;if(s>2){n.push({op:"move",data:[a[0][0]+Ie(r,e),a[0][1]+Ie(r,e)]});for(let o=1;o<s;o++)n.push({op:"lineTo",data:[a[o][0]+Ie(r,e),a[o][1]+Ie(r,e)]})}}return{type:"fillPath",ops:n}}function Xr(t,e){return function(n,a){let r=n.fillStyle||"hachure";if(!vn[r])switch(r){case"zigzag":vn[r]||(vn[r]=new bG(a));break;case"cross-hatch":vn[r]||(vn[r]=new wG(a));break;case"dots":vn[r]||(vn[r]=new _G(a));break;case"dashed":vn[r]||(vn[r]=new vG(a));break;case"zigzag-line":vn[r]||(vn[r]=new jG(a));break;default:r="hachure",vn[r]||(vn[r]=new Rx(a))}return vn[r]}(e,EG).fillPolygons(t,e)}function Dw(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function vN(t){return t.randomizer||(t.randomizer=new TG(t.seed||0)),t.randomizer.next()}function Qh(t,e,n,a=1){return n.roughness*a*(vN(n)*(e-t)+t)}function Ie(t,e,n=1){return Qh(-t,t,e,n)}function Ra(t,e,n,a,r,s=!1){const o=s?r.disableMultiStrokeFill:r.disableMultiStroke,l=$p(t,e,n,a,r,!0,!1);if(o)return l;const c=$p(t,e,n,a,r,!0,!0);return l.concat(c)}function $p(t,e,n,a,r,s,o){const l=Math.pow(t-n,2)+Math.pow(e-a,2),c=Math.sqrt(l);let h=1;h=c<200?1:c>500?.4:-.0016668*c+1.233334;let u=r.maxRandomnessOffset||0;u*u*100>l&&(u=c/10);const d=u/2,m=.2+.2*vN(r);let f=r.bowing*r.maxRandomnessOffset*(a-e)/200,p=r.bowing*r.maxRandomnessOffset*(t-n)/200;f=Ie(f,r,h),p=Ie(p,r,h);const g=[],x=()=>Ie(d,r,h),b=()=>Ie(u,r,h),w=r.preserveVertices;return o?g.push({op:"move",data:[t+(w?0:x()),e+(w?0:x())]}):g.push({op:"move",data:[t+(w?0:Ie(u,r,h)),e+(w?0:Ie(u,r,h))]}),o?g.push({op:"bcurveTo",data:[f+t+(n-t)*m+x(),p+e+(a-e)*m+x(),f+t+2*(n-t)*m+x(),p+e+2*(a-e)*m+x(),n+(w?0:x()),a+(w?0:x())]}):g.push({op:"bcurveTo",data:[f+t+(n-t)*m+b(),p+e+(a-e)*m+b(),f+t+2*(n-t)*m+b(),p+e+2*(a-e)*m+b(),n+(w?0:b()),a+(w?0:b())]}),g}function Ac(t,e,n){if(!t.length)return[];const a=[];a.push([t[0][0]+Ie(e,n),t[0][1]+Ie(e,n)]),a.push([t[0][0]+Ie(e,n),t[0][1]+Ie(e,n)]);for(let r=1;r<t.length;r++)a.push([t[r][0]+Ie(e,n),t[r][1]+Ie(e,n)]),r===t.length-1&&a.push([t[r][0]+Ie(e,n),t[r][1]+Ie(e,n)]);return Kh(a,null,n)}function Kh(t,e,n){const a=t.length,r=[];if(a>3){const s=[],o=1-n.curveTightness;r.push({op:"move",data:[t[1][0],t[1][1]]});for(let l=1;l+2<a;l++){const c=t[l];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*t[l+1][0]-o*t[l-1][0])/6,c[1]+(o*t[l+1][1]-o*t[l-1][1])/6],s[2]=[t[l+1][0]+(o*t[l][0]-o*t[l+2][0])/6,t[l+1][1]+(o*t[l][1]-o*t[l+2][1])/6],s[3]=[t[l+1][0],t[l+1][1]],r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else a===3?(r.push({op:"move",data:[t[1][0],t[1][1]]}),r.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):a===2&&r.push(...$p(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return r}function Bw(t,e,n,a,r,s,o,l){const c=[],h=[];if(l.roughness===0){t/=4,h.push([e+a*Math.cos(-t),n+r*Math.sin(-t)]);for(let u=0;u<=2*Math.PI;u+=t){const d=[e+a*Math.cos(u),n+r*Math.sin(u)];c.push(d),h.push(d)}h.push([e+a*Math.cos(0),n+r*Math.sin(0)]),h.push([e+a*Math.cos(t),n+r*Math.sin(t)])}else{const u=Ie(.5,l)-Math.PI/2;h.push([Ie(s,l)+e+.9*a*Math.cos(u-t),Ie(s,l)+n+.9*r*Math.sin(u-t)]);const d=2*Math.PI+u-.01;for(let m=u;m<d;m+=t){const f=[Ie(s,l)+e+a*Math.cos(m),Ie(s,l)+n+r*Math.sin(m)];c.push(f),h.push(f)}h.push([Ie(s,l)+e+a*Math.cos(u+2*Math.PI+.5*o),Ie(s,l)+n+r*Math.sin(u+2*Math.PI+.5*o)]),h.push([Ie(s,l)+e+.98*a*Math.cos(u+o),Ie(s,l)+n+.98*r*Math.sin(u+o)]),h.push([Ie(s,l)+e+.9*a*Math.cos(u+.5*o),Ie(s,l)+n+.9*r*Math.sin(u+.5*o)])}return[h,c]}function Fw(t,e,n,a,r,s,o,l,c){const h=s+Ie(.1,c),u=[];u.push([Ie(l,c)+e+.9*a*Math.cos(h-t),Ie(l,c)+n+.9*r*Math.sin(h-t)]);for(let d=h;d<=o;d+=t)u.push([Ie(l,c)+e+a*Math.cos(d),Ie(l,c)+n+r*Math.sin(d)]);return u.push([e+a*Math.cos(o),n+r*Math.sin(o)]),u.push([e+a*Math.cos(o),n+r*Math.sin(o)]),Kh(u,null,c)}function CG(t,e,n,a,r,s,o,l){const c=[],h=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let u=[0,0];const d=l.disableMultiStroke?1:2,m=l.preserveVertices;for(let f=0;f<d;f++)f===0?c.push({op:"move",data:[o[0],o[1]]}):c.push({op:"move",data:[o[0]+(m?0:Ie(h[0],l)),o[1]+(m?0:Ie(h[0],l))]}),u=m?[r,s]:[r+Ie(h[f],l),s+Ie(h[f],l)],c.push({op:"bcurveTo",data:[t+Ie(h[f],l),e+Ie(h[f],l),n+Ie(h[f],l),a+Ie(h[f],l),u[0],u[1]]});return c}function vo(t){return[...t]}function Hw(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const a=[];if(n===3)a.push(vo(t[0]),vo(t[1]),vo(t[2]),vo(t[2]));else{const r=[];r.push(t[0],t[0]);for(let l=1;l<t.length;l++)r.push(t[l]),l===t.length-1&&r.push(t[l]);const s=[],o=1-e;a.push(vo(r[0]));for(let l=1;l+2<r.length;l++){const c=r[l];s[0]=[c[0],c[1]],s[1]=[c[0]+(o*r[l+1][0]-o*r[l-1][0])/6,c[1]+(o*r[l+1][1]-o*r[l-1][1])/6],s[2]=[r[l+1][0]+(o*r[l][0]-o*r[l+2][0])/6,r[l+1][1]+(o*r[l][1]-o*r[l+2][1])/6],s[3]=[r[l+1][0],r[l+1][1]],a.push(s[1],s[2],s[3])}}return a}function lh(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function AG(t,e,n){const a=lh(e,n);if(a===0)return lh(t,e);let r=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/a;return r=Math.max(0,Math.min(1,r)),lh(t,ir(e,n,r))}function ir(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function zp(t,e,n,a){const r=a||[];if(function(l,c){const h=l[c+0],u=l[c+1],d=l[c+2],m=l[c+3];let f=3*u[0]-2*h[0]-m[0];f*=f;let p=3*u[1]-2*h[1]-m[1];p*=p;let g=3*d[0]-2*m[0]-h[0];g*=g;let x=3*d[1]-2*m[1]-h[1];return x*=x,f<g&&(f=g),p<x&&(p=x),f+p}(t,e)<n){const l=t[e+0];r.length?(s=r[r.length-1],o=l,Math.sqrt(lh(s,o))>1&&r.push(l)):r.push(l),r.push(t[e+3])}else{const c=t[e+0],h=t[e+1],u=t[e+2],d=t[e+3],m=ir(c,h,.5),f=ir(h,u,.5),p=ir(u,d,.5),g=ir(m,f,.5),x=ir(f,p,.5),b=ir(g,x,.5);zp([c,m,g,b],0,n,r),zp([b,x,p,d],0,n,r)}var s,o;return r}function NG(t,e){return Zh(t,0,t.length,e)}function Zh(t,e,n,a,r){const s=r||[],o=t[e],l=t[n-1];let c=0,h=1;for(let u=e+1;u<n-1;++u){const d=AG(t[u],o,l);d>c&&(c=d,h=u)}return Math.sqrt(c)>a?(Zh(t,e,h+1,a,s),Zh(t,h,n,a,s)):(s.length||s.push(o),s.push(l)),s}function om(t,e=.15,n){const a=[],r=(t.length-1)/3;for(let s=0;s<r;s++)zp(t,3*s,e,a);return n&&n>0?Zh(a,0,a.length,n):a}const Mn="none";class eu{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,n,a){return{shape:e,sets:n||[],options:a||this.defaultOptions}}line(e,n,a,r,s){const o=this._o(s);return this._d("line",[wN(e,n,a,r,o)],o)}rectangle(e,n,a,r,s){const o=this._o(s),l=[],c=SG(e,n,a,r,o);if(o.fill){const h=[[e,n],[e+a,n],[e+a,n+r],[e,n+r]];o.fillStyle==="solid"?l.push(sm([h],o)):l.push(Xr([h],o))}return o.stroke!==Mn&&l.push(c),this._d("rectangle",l,o)}ellipse(e,n,a,r,s){const o=this._o(s),l=[],c=_N(a,r,o),h=qp(e,n,o,c);if(o.fill)if(o.fillStyle==="solid"){const u=qp(e,n,o,c).opset;u.type="fillPath",l.push(u)}else l.push(Xr([h.estimatedPoints],o));return o.stroke!==Mn&&l.push(h.opset),this._d("ellipse",l,o)}circle(e,n,a,r){const s=this.ellipse(e,n,a,a,r);return s.shape="circle",s}linearPath(e,n){const a=this._o(n);return this._d("linearPath",[oh(e,!1,a)],a)}arc(e,n,a,r,s,o,l=!1,c){const h=this._o(c),u=[],d=Rw(e,n,a,r,s,o,l,!0,h);if(l&&h.fill)if(h.fillStyle==="solid"){const m=Object.assign({},h);m.disableMultiStroke=!0;const f=Rw(e,n,a,r,s,o,!0,!1,m);f.type="fillPath",u.push(f)}else u.push(function(m,f,p,g,x,b,w){const k=m,E=f;let v=Math.abs(p/2),S=Math.abs(g/2);v+=Ie(.01*v,w),S+=Ie(.01*S,w);let L=x,O=b;for(;L<0;)L+=2*Math.PI,O+=2*Math.PI;O-L>2*Math.PI&&(L=0,O=2*Math.PI);const P=(O-L)/w.curveStepCount,j=[];for(let A=L;A<=O;A+=P)j.push([k+v*Math.cos(A),E+S*Math.sin(A)]);return j.push([k+v*Math.cos(O),E+S*Math.sin(O)]),j.push([k,E]),Xr([j],w)}(e,n,a,r,s,o,h));return h.stroke!==Mn&&u.push(d),this._d("arc",u,h)}curve(e,n){const a=this._o(n),r=[],s=Mw(e,a);if(a.fill&&a.fill!==Mn)if(a.fillStyle==="solid"){const o=Mw(e,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],l=e;if(l.length){const c=typeof l[0][0]=="number"?[l]:l;for(const h of c)h.length<3?o.push(...h):h.length===3?o.push(...om(Hw([h[0],h[0],h[1],h[2]]),10,(1+a.roughness)/2)):o.push(...om(Hw(h),10,(1+a.roughness)/2))}o.length&&r.push(Xr([o],a))}return a.stroke!==Mn&&r.push(s),this._d("curve",r,a)}polygon(e,n){const a=this._o(n),r=[],s=oh(e,!0,a);return a.fill&&(a.fillStyle==="solid"?r.push(sm([e],a)):r.push(Xr([e],a))),a.stroke!==Mn&&r.push(s),this._d("polygon",r,a)}path(e,n){const a=this._o(n),r=[];if(!e)return this._d("path",r,a);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=a.fill&&a.fill!=="transparent"&&a.fill!==Mn,o=a.stroke!==Mn,l=!!(a.simplification&&a.simplification<1),c=function(u,d,m){const f=yN(xN(Px(u))),p=[];let g=[],x=[0,0],b=[];const w=()=>{b.length>=4&&g.push(...om(b,d)),b=[]},k=()=>{w(),g.length&&(p.push(g),g=[])};for(const{key:v,data:S}of f)switch(v){case"M":k(),x=[S[0],S[1]],g.push(x);break;case"L":w(),g.push([S[0],S[1]]);break;case"C":if(!b.length){const L=g.length?g[g.length-1]:x;b.push([L[0],L[1]])}b.push([S[0],S[1]]),b.push([S[2],S[3]]),b.push([S[4],S[5]]);break;case"Z":w(),g.push([x[0],x[1]])}if(k(),!m)return p;const E=[];for(const v of p){const S=NG(v,m);S.length&&E.push(S)}return E}(e,1,l?4-4*(a.simplification||1):(1+a.roughness)/2),h=Pw(e,a);if(s)if(a.fillStyle==="solid")if(c.length===1){const u=Pw(e,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else r.push(sm(c,a));else r.push(Xr(c,a));return o&&(l?c.forEach(u=>{r.push(oh(u,!1,a))}):r.push(h)),this._d("path",r,a)}opsToPath(e,n){let a="";for(const r of e.ops){const s=typeof n=="number"&&n>=0?r.data.map(o=>+o.toFixed(n)):r.data;switch(r.op){case"move":a+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":a+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":a+=`L${s[0]} ${s[1]} `}}return a.trim()}toPaths(e){const n=e.sets||[],a=e.options||this.defaultOptions,r=[];for(const s of n){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:Mn};break;case"fillPath":o={d:this.opsToPath(s),stroke:Mn,strokeWidth:0,fill:a.fill||Mn};break;case"fillSketch":o=this.fillSketch(s,a)}o&&r.push(o)}return r}fillSketch(e,n){let a=n.fillWeight;return a<0&&(a=n.strokeWidth/2),{d:this.opsToPath(e),stroke:n.fill||Mn,strokeWidth:a,fill:Mn}}_mergedShape(e){return e.filter((n,a)=>a===0||n.op!=="move")}}class IG{constructor(e,n){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new eu(n)}draw(e){const n=e.sets||[],a=e.options||this.getDefaultOptions(),r=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of n)switch(o.type){case"path":r.save(),r.strokeStyle=a.stroke==="none"?"transparent":a.stroke,r.lineWidth=a.strokeWidth,a.strokeLineDash&&r.setLineDash(a.strokeLineDash),a.strokeLineDashOffset&&(r.lineDashOffset=a.strokeLineDashOffset),this._drawToContext(r,o,s),r.restore();break;case"fillPath":{r.save(),r.fillStyle=a.fill||"";const l=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,o,s,l),r.restore();break}case"fillSketch":this.fillSketch(r,o,a)}}fillSketch(e,n,a){let r=a.fillWeight;r<0&&(r=a.strokeWidth/2),e.save(),a.fillLineDash&&e.setLineDash(a.fillLineDash),a.fillLineDashOffset&&(e.lineDashOffset=a.fillLineDashOffset),e.strokeStyle=a.fill||"",e.lineWidth=r,this._drawToContext(e,n,a.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,n,a,r="nonzero"){e.beginPath();for(const s of n.ops){const o=typeof a=="number"&&a>=0?s.data.map(l=>+l.toFixed(a)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}n.type==="fillPath"?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,n,a,r,s){const o=this.gen.line(e,n,a,r,s);return this.draw(o),o}rectangle(e,n,a,r,s){const o=this.gen.rectangle(e,n,a,r,s);return this.draw(o),o}ellipse(e,n,a,r,s){const o=this.gen.ellipse(e,n,a,r,s);return this.draw(o),o}circle(e,n,a,r){const s=this.gen.circle(e,n,a,r);return this.draw(s),s}linearPath(e,n){const a=this.gen.linearPath(e,n);return this.draw(a),a}polygon(e,n){const a=this.gen.polygon(e,n);return this.draw(a),a}arc(e,n,a,r,s,o,l=!1,c){const h=this.gen.arc(e,n,a,r,s,o,l,c);return this.draw(h),h}curve(e,n){const a=this.gen.curve(e,n);return this.draw(a),a}path(e,n){const a=this.gen.path(e,n);return this.draw(a),a}}const Nc="http://www.w3.org/2000/svg";class LG{constructor(e,n){this.svg=e,this.gen=new eu(n)}draw(e){const n=e.sets||[],a=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,s=r.createElementNS(Nc,"g"),o=e.options.fixedDecimalPlaceDigits;for(const l of n){let c=null;switch(l.type){case"path":c=r.createElementNS(Nc,"path"),c.setAttribute("d",this.opsToPath(l,o)),c.setAttribute("stroke",a.stroke),c.setAttribute("stroke-width",a.strokeWidth+""),c.setAttribute("fill","none"),a.strokeLineDash&&c.setAttribute("stroke-dasharray",a.strokeLineDash.join(" ").trim()),a.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset",`${a.strokeLineDashOffset}`);break;case"fillPath":c=r.createElementNS(Nc,"path"),c.setAttribute("d",this.opsToPath(l,o)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",a.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||c.setAttribute("fill-rule","evenodd");break;case"fillSketch":c=this.fillSketch(r,l,a)}c&&s.appendChild(c)}return s}fillSketch(e,n,a){let r=a.fillWeight;r<0&&(r=a.strokeWidth/2);const s=e.createElementNS(Nc,"path");return s.setAttribute("d",this.opsToPath(n,a.fixedDecimalPlaceDigits)),s.setAttribute("stroke",a.fill||""),s.setAttribute("stroke-width",r+""),s.setAttribute("fill","none"),a.fillLineDash&&s.setAttribute("stroke-dasharray",a.fillLineDash.join(" ").trim()),a.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${a.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,n){return this.gen.opsToPath(e,n)}line(e,n,a,r,s){const o=this.gen.line(e,n,a,r,s);return this.draw(o)}rectangle(e,n,a,r,s){const o=this.gen.rectangle(e,n,a,r,s);return this.draw(o)}ellipse(e,n,a,r,s){const o=this.gen.ellipse(e,n,a,r,s);return this.draw(o)}circle(e,n,a,r){const s=this.gen.circle(e,n,a,r);return this.draw(s)}linearPath(e,n){const a=this.gen.linearPath(e,n);return this.draw(a)}polygon(e,n){const a=this.gen.polygon(e,n);return this.draw(a)}arc(e,n,a,r,s,o,l=!1,c){const h=this.gen.arc(e,n,a,r,s,o,l,c);return this.draw(h)}curve(e,n){const a=this.gen.curve(e,n);return this.draw(a)}path(e,n){const a=this.gen.path(e,n);return this.draw(a)}}var xe={canvas:(t,e)=>new IG(t,e),svg:(t,e)=>new LG(t,e),generator:t=>new eu(t),newSeed:()=>eu.newSeed()},Ne=_(async(t,e,n)=>{let a;const r=e.useHtmlLabels||Lt(Ke()?.htmlLabels);n?a=n:a="node default";const s=t.insert("g").attr("class",a).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",nn(e.labelStyle));let l;e.label===void 0?l="":l=typeof e.label=="string"?e.label:e.label[0];const c=await Ha(o,ei(Br(l),Ke()),{useHtmlLabels:r,width:e.width||Ke().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let h=c.getBBox();const u=(e?.padding??0)/2;if(r){const d=c.children[0],m=Ye(c),f=d.getElementsByTagName("img");if(f){const p=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(x=>{function b(){if(g.style.display="flex",g.style.flexDirection="column",p){const w=Ke().fontSize?Ke().fontSize:window.getComputedStyle(document.body).fontSize,k=5,[E=PE.fontSize]=$u(w),v=E*k+"px";g.style.minWidth=v,g.style.maxWidth=v}else g.style.width="100%";x(g)}_(b,"setupImage"),setTimeout(()=>{g.complete&&b()}),g.addEventListener("error",b),g.addEventListener("load",b)})))}h=d.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}return r?o.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):o.attr("transform","translate(0, "+-h.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:h,halfPadding:u,label:o}},"labelHelper"),lm=_(async(t,e,n)=>{const a=n.useHtmlLabels||Lt(Ke()?.flowchart?.htmlLabels),r=t.insert("g").attr("class","label").attr("style",n.labelStyle||""),s=await Ha(r,ei(Br(e),Ke()),{useHtmlLabels:a,width:n.width||Ke()?.flowchart?.wrappingWidth,style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let o=s.getBBox();const l=n.padding/2;if(Lt(Ke()?.flowchart?.htmlLabels)){const c=s.children[0],h=Ye(s);o=c.getBoundingClientRect(),h.attr("width",o.width),h.attr("height",o.height)}return a?r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):r.attr("transform","translate(0, "+-o.height/2+")"),n.centerLabel&&r.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),r.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:l,label:r}},"insertLabel"),we=_((t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height},"updateNodeBounds"),Se=_((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function Ve(t){const e=t.map((n,a)=>`${a===0?"M":"L"}${n.x},${n.y}`);return e.push("Z"),e.join(" ")}_(Ve,"createPathFromPoints");function Pa(t,e,n,a,r,s){const o=[],c=n-t,h=a-e,u=c/s,d=2*Math.PI/u,m=e+h/2;for(let f=0;f<=50;f++){const p=f/50,g=t+p*c,x=m+r*Math.sin(d*(g-t));o.push({x:g,y:x})}return o}_(Pa,"generateFullSineWavePoints");function Rl(t,e,n,a,r,s){const o=[],l=r*Math.PI/180,u=(s*Math.PI/180-l)/(a-1);for(let d=0;d<a;d++){const m=l+d*u,f=t+n*Math.cos(m),p=e+n*Math.sin(m);o.push({x:-f,y:-p})}return o}_(Rl,"generateCirclePoints");var OG=_((t,e)=>{var n=t.x,a=t.y,r=e.x-n,s=e.y-a,o=t.width/2,l=t.height/2,c,h;return Math.abs(s)*o>Math.abs(r)*l?(s<0&&(l=-l),c=s===0?0:l*r/s,h=l):(r<0&&(o=-o),c=o,h=r===0?0:o*s/r),{x:n+c,y:a+h}},"intersectRect"),Ys=OG;function jN(t,e){e&&t.attr("style",e)}_(jN,"applyStyle");async function TN(t){const e=Ye(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),a=Ke();let r=t.label;t.label&&js(t.label)&&(r=await zg(t.label.replace(zs.lineBreakRegex,`
`),a));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>";return n.html(ei(o,a)),jN(n,t.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}_(TN,"addHtmlLabel");var MG=_(async(t,e,n,a)=>{let r=t||"";if(typeof r=="object"&&(r=r[0]),Lt(Ke().flowchart.htmlLabels)){r=r.replace(/\\n|\n/g,"<br />"),te.info("vertexText"+r);const s={isNode:a,label:Br(r).replace(/fa[blrs]?:fa-[\w-]+/g,l=>`<i class='${l.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await TN(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof r=="string"?o=r.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(r)?o=r:o=[];for(const l of o){const c=document.createElementNS("http://www.w3.org/2000/svg","tspan");c.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),c.setAttribute("dy","1em"),c.setAttribute("x","0"),n?c.setAttribute("class","title-row"):c.setAttribute("class","row"),c.textContent=l.trim(),s.appendChild(c)}return s}},"createLabel"),dr=MG,qa=_((t,e,n,a,r)=>["M",t+r,e,"H",t+n-r,"A",r,r,0,0,1,t+n,e+r,"V",e+a-r,"A",r,r,0,0,1,t+n-r,e+a,"H",t+r,"A",r,r,0,0,1,t,e+a-r,"V",e+r,"A",r,r,0,0,1,t+r,e,"Z"].join(" "),"createRoundedRectPathD"),kN=_(async(t,e)=>{te.info("Creating subgraph rect for ",e.id,e);const n=Ke(),{themeVariables:a,handDrawnSeed:r}=n,{clusterBkg:s,clusterBorder:o}=a,{labelStyles:l,nodeStyles:c,borderStyles:h,backgroundStyles:u}=be(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),m=Lt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await Ha(f,e.label,{style:e.labelStyle,useHtmlLabels:m,isNode:!0});let g=p.getBBox();if(Lt(n.flowchart.htmlLabels)){const L=p.children[0],O=Ye(p);g=L.getBoundingClientRect(),O.attr("width",g.width),O.attr("height",g.height)}const x=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height,w=e.x-x/2,k=e.y-b/2;te.trace("Data ",e,JSON.stringify(e));let E;if(e.look==="handDrawn"){const L=xe.svg(d),O=ye(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:r}),P=L.path(qa(w,k,x,b,0),O);E=d.insert(()=>(te.debug("Rough node insert CXC",P),P),":first-child"),E.select("path:nth-child(2)").attr("style",h.join(";")),E.select("path").attr("style",u.join(";").replace("fill","stroke"))}else E=d.insert("rect",":first-child"),E.attr("style",c).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",k).attr("width",x).attr("height",b);const{subGraphTitleTopMargin:v}=fx(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),l){const L=f.select("span");L&&L.attr("style",l)}const S=E.node().getBBox();return e.offsetX=0,e.width=S.width,e.height=S.height,e.offsetY=g.height-e.padding/2,e.intersect=function(L){return Ys(e,L)},{cluster:d,labelBBox:g}},"rect"),RG=_((t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),a=n.insert("rect",":first-child"),r=0*e.padding,s=r/2;a.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+r).attr("height",e.height+r).attr("fill","none");const o=a.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(l){return Ys(e,l)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),PG=_(async(t,e)=>{const n=Ke(),{themeVariables:a,handDrawnSeed:r}=n,{altBackground:s,compositeBackground:o,compositeTitleBackground:l,nodeBorder:c}=a,h=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=h.insert("g",":first-child"),d=h.insert("g").attr("class","cluster-label");let m=h.append("rect");const f=d.node().appendChild(await dr(e.label,e.labelStyle,void 0,!0));let p=f.getBBox();if(Lt(n.flowchart.htmlLabels)){const P=f.children[0],j=Ye(f);p=P.getBoundingClientRect(),j.attr("width",p.width),j.attr("height",p.height)}const g=0*e.padding,x=g/2,b=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+g;e.width<=p.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height+g,k=e.height+g-p.height-6,E=e.x-b/2,v=e.y-w/2;e.width=b;const S=e.y-e.height/2-x+p.height+2;let L;if(e.look==="handDrawn"){const P=e.cssClasses.includes("statediagram-cluster-alt"),j=xe.svg(h),A=e.rx||e.ry?j.path(qa(E,v,b,w,10),{roughness:.7,fill:l,fillStyle:"solid",stroke:c,seed:r}):j.rectangle(E,v,b,w,{seed:r});L=h.insert(()=>A,":first-child");const q=j.rectangle(E,S,b,k,{fill:P?s:o,fillStyle:P?"hachure":"solid",stroke:c,seed:r});L=h.insert(()=>A,":first-child"),m=h.insert(()=>q)}else L=u.insert("rect",":first-child"),L.attr("class","outer").attr("x",E).attr("y",v).attr("width",b).attr("height",w).attr("data-look",e.look),m.attr("class","inner").attr("x",E).attr("y",S).attr("width",b).attr("height",k);d.attr("transform",`translate(${e.x-p.width/2}, ${v+1-(Lt(n.flowchart.htmlLabels)?0:3)})`);const O=L.node().getBBox();return e.height=O.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(P){return Ys(e,P)},{cluster:h,labelBBox:p}},"roundedWithTitle"),DG=_(async(t,e)=>{te.info("Creating subgraph rect for ",e.id,e);const n=Ke(),{themeVariables:a,handDrawnSeed:r}=n,{clusterBkg:s,clusterBorder:o}=a,{labelStyles:l,nodeStyles:c,borderStyles:h,backgroundStyles:u}=be(e),d=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),m=Lt(n.flowchart.htmlLabels),f=d.insert("g").attr("class","cluster-label "),p=await Ha(f,e.label,{style:e.labelStyle,useHtmlLabels:m,isNode:!0,width:e.width});let g=p.getBBox();if(Lt(n.flowchart.htmlLabels)){const L=p.children[0],O=Ye(p);g=L.getBoundingClientRect(),O.attr("width",g.width),O.attr("height",g.height)}const x=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const b=e.height,w=e.x-x/2,k=e.y-b/2;te.trace("Data ",e,JSON.stringify(e));let E;if(e.look==="handDrawn"){const L=xe.svg(d),O=ye(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:r}),P=L.path(qa(w,k,x,b,e.rx),O);E=d.insert(()=>(te.debug("Rough node insert CXC",P),P),":first-child"),E.select("path:nth-child(2)").attr("style",h.join(";")),E.select("path").attr("style",u.join(";").replace("fill","stroke"))}else E=d.insert("rect",":first-child"),E.attr("style",c).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",k).attr("width",x).attr("height",b);const{subGraphTitleTopMargin:v}=fx(n);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),l){const L=f.select("span");L&&L.attr("style",l)}const S=E.node().getBBox();return e.offsetX=0,e.width=S.width,e.height=S.height,e.offsetY=g.height-e.padding/2,e.intersect=function(L){return Ys(e,L)},{cluster:d,labelBBox:g}},"kanbanSection"),BG=_((t,e)=>{const n=Ke(),{themeVariables:a,handDrawnSeed:r}=n,{nodeBorder:s}=a,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),l=o.insert("g",":first-child"),c=0*e.padding,h=e.width+c;e.diff=-e.padding;const u=e.height+c,d=e.x-h/2,m=e.y-u/2;e.width=h;let f;if(e.look==="handDrawn"){const x=xe.svg(o).rectangle(d,m,h,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:r});f=o.insert(()=>x,":first-child")}else f=l.insert("rect",":first-child"),f.attr("class","divider").attr("x",d).attr("y",m).attr("width",h).attr("height",u).attr("data-look",e.look);const p=f.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return Ys(e,g)},{cluster:o,labelBBox:{}}},"divider"),FG=kN,HG={rect:kN,squareRect:FG,roundedWithTitle:PG,noteGroup:RG,divider:BG,kanbanSection:DG},EN=new Map,qG=_(async(t,e)=>{const n=e.shape||"rect",a=await HG[n](t,e);return EN.set(e.id,a),a},"insertCluster"),the=_(()=>{EN=new Map},"clear");function SN(t,e){return t.intersect(e)}_(SN,"intersectNode");var $G=SN;function CN(t,e,n,a){var r=t.x,s=t.y,o=r-a.x,l=s-a.y,c=Math.sqrt(e*e*l*l+n*n*o*o),h=Math.abs(e*n*o/c);a.x<r&&(h=-h);var u=Math.abs(e*n*l/c);return a.y<s&&(u=-u),{x:r+h,y:s+u}}_(CN,"intersectEllipse");var AN=CN;function NN(t,e,n){return AN(t,e,e,n)}_(NN,"intersectCircle");var zG=NN;function IN(t,e,n,a){{const r=e.y-t.y,s=t.x-e.x,o=e.x*t.y-t.x*e.y,l=r*n.x+s*n.y+o,c=r*a.x+s*a.y+o,h=1e-6;if(l!==0&&c!==0&&Wp(l,c))return;const u=a.y-n.y,d=n.x-a.x,m=a.x*n.y-n.x*a.y,f=u*t.x+d*t.y+m,p=u*e.x+d*e.y+m;if(Math.abs(f)<h&&Math.abs(p)<h&&Wp(f,p))return;const g=r*d-u*s;if(g===0)return;const x=Math.abs(g/2);let b=s*m-d*o;const w=b<0?(b-x)/g:(b+x)/g;b=u*o-r*m;const k=b<0?(b-x)/g:(b+x)/g;return{x:w,y:k}}}_(IN,"intersectLine");function Wp(t,e){return t*e>0}_(Wp,"sameSign");var WG=IN;function LN(t,e,n){let a=t.x,r=t.y,s=[],o=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(u){o=Math.min(o,u.x),l=Math.min(l,u.y)}):(o=Math.min(o,e.x),l=Math.min(l,e.y));let c=a-t.width/2-o,h=r-t.height/2-l;for(let u=0;u<e.length;u++){let d=e[u],m=e[u<e.length-1?u+1:0],f=WG(t,n,{x:c+d.x,y:h+d.y},{x:c+m.x,y:h+m.y});f&&s.push(f)}return s.length?(s.length>1&&s.sort(function(u,d){let m=u.x-n.x,f=u.y-n.y,p=Math.sqrt(m*m+f*f),g=d.x-n.x,x=d.y-n.y,b=Math.sqrt(g*g+x*x);return p<b?-1:p===b?0:1}),s[0]):t}_(LN,"intersectPolygon");var UG=LN,fe={node:$G,circle:zG,ellipse:AN,polygon:UG,rect:Ys};function ON(t,e){const{labelStyles:n}=be(e);e.labelStyle=n;const a=Se(e);let r=a;a||(r="anchor");const s=t.insert("g").attr("class",r).attr("id",e.domId||e.id),o=1,{cssStyles:l}=e,c=xe.svg(s),h=ye(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=c.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.attr("class","anchor").attr("style",nn(l)),we(e,d),e.intersect=function(m){return te.info("Circle intersect",e,o,m),fe.circle(e,o,m)},s}_(ON,"anchor");function Up(t,e,n,a,r,s,o){const c=(t+n)/2,h=(e+a)/2,u=Math.atan2(a-e,n-t),d=(n-t)/2,m=(a-e)/2,f=d/r,p=m/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const x=Math.sqrt(1-g**2),b=c+x*s*Math.sin(u)*(o?-1:1),w=h-x*r*Math.cos(u)*(o?-1:1),k=Math.atan2((e-w)/s,(t-b)/r);let v=Math.atan2((a-w)/s,(n-b)/r)-k;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const S=[];for(let L=0;L<20;L++){const O=L/19,P=k+O*v,j=b+r*Math.cos(P),A=w+s*Math.sin(P);S.push({x:j,y:A})}return S}_(Up,"generateArcPoints");async function MN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.width+e.padding+20,l=s.height+e.padding,c=l/2,h=c/(2.5+l/50),{cssStyles:u}=e,d=[{x:o/2,y:-l/2},{x:-o/2,y:-l/2},...Up(-o/2,-l/2,-o/2,l/2,h,c,!1),{x:o/2,y:l/2},...Up(o/2,l/2,o/2,-l/2,h,c,!0)],m=xe.svg(r),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=Ve(d),g=m.path(p,f),x=r.insert(()=>g,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",u),a&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",a),x.attr("transform",`translate(${h/2}, 0)`),we(e,x),e.intersect=function(b){return fe.polygon(e,d,b)},r}_(MN,"bowTieRect");function $a(t,e,n,a){return t.insert("polygon",":first-child").attr("points",a.map(function(r){return r.x+","+r.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}_($a,"insertPolygonShape");async function RN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.height+e.padding,l=12,c=s.width+e.padding+l,h=0,u=c,d=-o,m=0,f=[{x:h+l,y:d},{x:u,y:d},{x:u,y:m},{x:h,y:m},{x:h,y:d+l},{x:h+l,y:d}];let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const x=xe.svg(r),b=ye(e,{}),w=Ve(f),k=x.path(w,b);p=r.insert(()=>k,":first-child").attr("transform",`translate(${-c/2}, ${o/2})`),g&&p.attr("style",g)}else p=$a(r,c,o,f);return a&&p.attr("style",a),we(e,p),e.intersect=function(x){return fe.polygon(e,f,x)},r}_(RN,"card");function PN(t,e){const{nodeStyles:n}=be(e);e.label="";const a=t.insert("g").attr("class",Se(e)).attr("id",e.domId??e.id),{cssStyles:r}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],l=xe.svg(a),c=ye(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=Ve(o),u=l.path(h,c),d=a.insert(()=>u,":first-child");return r&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",r),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(m){return fe.polygon(e,o,m)},a}_(PN,"choice");async function Dx(t,e,n){const{labelStyles:a,nodeStyles:r}=be(e);e.labelStyle=a;const{shapeSvg:s,bbox:o,halfPadding:l}=await Ne(t,e,Se(e)),c=n?.padding??l,h=o.width/2+c;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const m=xe.svg(s),f=ye(e,{}),p=m.circle(0,0,h*2,f);u=s.insert(()=>p,":first-child"),u.attr("class","basic label-container").attr("style",nn(d))}else u=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",r).attr("r",h).attr("cx",0).attr("cy",0);return we(e,u),e.calcIntersect=function(m,f){const p=m.width/2;return fe.circle(m,p,f)},e.intersect=function(m){return te.info("Circle intersect",e,h,m),fe.circle(e,h,m)},s}_(Dx,"circle");function DN(t){const e=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),a=t*2,r={x:a/2*e,y:a/2*n},s={x:-(a/2)*e,y:a/2*n},o={x:-(a/2)*e,y:-(a/2)*n},l={x:a/2*e,y:-(a/2)*n};return`M ${s.x},${s.y} L ${l.x},${l.y}
                   M ${r.x},${r.y} L ${o.x},${o.y}`}_(DN,"createLine");function BN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n,e.label="";const r=t.insert("g").attr("class",Se(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:o}=e,l=xe.svg(r),c=ye(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=l.circle(0,0,s*2,c),u=DN(s),d=l.path(u,c),m=r.insert(()=>h,":first-child");return m.insert(()=>d),o&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",o),a&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",a),we(e,m),e.intersect=function(f){return te.info("crossedCircle intersect",e,{radius:s,point:f}),fe.circle(e,s,f)},r}_(BN,"crossedCircle");function ea(t,e,n,a=100,r=0,s=180){const o=[],l=r*Math.PI/180,u=(s*Math.PI/180-l)/(a-1);for(let d=0;d<a;d++){const m=l+d*u,f=t+n*Math.cos(m),p=e+n*Math.sin(m);o.push({x:-f,y:-p})}return o}_(ea,"generateCirclePoints");async function FN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...ea(l/2,-c/2,h,30,-90,0),{x:-l/2-h,y:h},...ea(l/2+h*2,-h,h,20,-180,-270),...ea(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-c/2},...ea(l/2,c/2,h,20,0,90)],m=[{x:l/2,y:-c/2-h},{x:-l/2,y:-c/2-h},...ea(l/2,-c/2,h,20,-90,0),{x:-l/2-h,y:-h},...ea(l/2+l*.1,-h,h,20,-180,-270),...ea(l/2+l*.1,h,h,20,-90,-180),{x:-l/2-h,y:c/2},...ea(l/2,c/2,h,20,0,90),{x:-l/2,y:c/2+h},{x:l/2,y:c/2+h}],f=xe.svg(r),p=ye(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=Ve(d).replace("Z",""),b=f.path(x,p),w=Ve(m),k=f.path(w,{...p}),E=r.insert("g",":first-child");return E.insert(()=>k,":first-child").attr("stroke-opacity",0),E.insert(()=>b,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),a&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",a),E.attr("transform",`translate(${h}, 0)`),o.attr("transform",`translate(${-l/2+h-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),we(e,E),e.intersect=function(v){return fe.polygon(e,m,v)},r}_(FN,"curlyBraceLeft");function ta(t,e,n,a=100,r=0,s=180){const o=[],l=r*Math.PI/180,u=(s*Math.PI/180-l)/(a-1);for(let d=0;d<a;d++){const m=l+d*u,f=t+n*Math.cos(m),p=e+n*Math.sin(m);o.push({x:f,y:p})}return o}_(ta,"generateCirclePoints");async function HN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...ta(l/2,-c/2,h,20,-90,0),{x:l/2+h,y:-h},...ta(l/2+h*2,-h,h,20,-180,-270),...ta(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:c/2},...ta(l/2,c/2,h,20,0,90)],m=[{x:-l/2,y:-c/2-h},{x:l/2,y:-c/2-h},...ta(l/2,-c/2,h,20,-90,0),{x:l/2+h,y:-h},...ta(l/2+h*2,-h,h,20,-180,-270),...ta(l/2+h*2,h,h,20,-90,-180),{x:l/2+h,y:c/2},...ta(l/2,c/2,h,20,0,90),{x:l/2,y:c/2+h},{x:-l/2,y:c/2+h}],f=xe.svg(r),p=ye(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=Ve(d).replace("Z",""),b=f.path(x,p),w=Ve(m),k=f.path(w,{...p}),E=r.insert("g",":first-child");return E.insert(()=>k,":first-child").attr("stroke-opacity",0),E.insert(()=>b,":first-child"),E.attr("class","text"),u&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",u),a&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",a),E.attr("transform",`translate(${-h}, 0)`),o.attr("transform",`translate(${-l/2+(e.padding??0)/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),we(e,E),e.intersect=function(v){return fe.polygon(e,m,v)},r}_(HN,"curlyBraceRight");function zt(t,e,n,a=100,r=0,s=180){const o=[],l=r*Math.PI/180,u=(s*Math.PI/180-l)/(a-1);for(let d=0;d<a;d++){const m=l+d*u,f=t+n*Math.cos(m),p=e+n*Math.sin(m);o.push({x:-f,y:-p})}return o}_(zt,"generateCirclePoints");async function qN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=s.width+(e.padding??0),c=s.height+(e.padding??0),h=Math.max(5,c*.1),{cssStyles:u}=e,d=[...zt(l/2,-c/2,h,30,-90,0),{x:-l/2-h,y:h},...zt(l/2+h*2,-h,h,20,-180,-270),...zt(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:-c/2},...zt(l/2,c/2,h,20,0,90)],m=[...zt(-l/2+h+h/2,-c/2,h,20,-90,-180),{x:l/2-h/2,y:h},...zt(-l/2-h/2,-h,h,20,0,90),...zt(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...zt(-l/2+h+h/2,c/2,h,30,-180,-270)],f=[{x:l/2,y:-c/2-h},{x:-l/2,y:-c/2-h},...zt(l/2,-c/2,h,20,-90,0),{x:-l/2-h,y:-h},...zt(l/2+h*2,-h,h,20,-180,-270),...zt(l/2+h*2,h,h,20,-90,-180),{x:-l/2-h,y:c/2},...zt(l/2,c/2,h,20,0,90),{x:-l/2,y:c/2+h},{x:l/2-h-h/2,y:c/2+h},...zt(-l/2+h+h/2,-c/2,h,20,-90,-180),{x:l/2-h/2,y:h},...zt(-l/2-h/2,-h,h,20,0,90),...zt(-l/2-h/2,h,h,20,-90,0),{x:l/2-h/2,y:-h},...zt(-l/2+h+h/2,c/2,h,30,-180,-270)],p=xe.svg(r),g=ye(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=Ve(d).replace("Z",""),w=p.path(b,g),E=Ve(m).replace("Z",""),v=p.path(E,g),S=Ve(f),L=p.path(S,{...g}),O=r.insert("g",":first-child");return O.insert(()=>L,":first-child").attr("stroke-opacity",0),O.insert(()=>w,":first-child"),O.insert(()=>v,":first-child"),O.attr("class","text"),u&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",u),a&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",a),O.attr("transform",`translate(${h-h/4}, 0)`),o.attr("transform",`translate(${-l/2+(e.padding??0)/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)/2-(s.y-(s.top??0))})`),we(e,O),e.intersect=function(P){return fe.polygon(e,f,P)},r}_(qN,"curlyBraces");async function $N(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=80,l=20,c=Math.max(o,(s.width+(e.padding??0)*2)*1.25,e?.width??0),h=Math.max(l,s.height+(e.padding??0)*2,e?.height??0),u=h/2,{cssStyles:d}=e,m=xe.svg(r),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=c,g=h,x=p-u,b=g/4,w=[{x,y:0},{x:b,y:0},{x:0,y:g/2},{x:b,y:g},{x,y:g},...Rl(-x,-g/2,u,50,270,90)],k=Ve(w),E=m.path(k,f),v=r.insert(()=>E,":first-child");return v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",d),a&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",a),v.attr("transform",`translate(${-c/2}, ${-h/2})`),we(e,v),e.intersect=function(S){return fe.polygon(e,w,S)},r}_($N,"curvedTrapezoid");var VG=_((t,e,n,a,r,s)=>[`M${t},${e+s}`,`a${r},${s} 0,0,0 ${n},0`,`a${r},${s} 0,0,0 ${-n},0`,`l0,${a}`,`a${r},${s} 0,0,0 ${n},0`,`l0,${-a}`].join(" "),"createCylinderPathD"),YG=_((t,e,n,a,r,s)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${r},${s} 0,0,0 ${-n},0`,`l0,${a}`,`a${r},${s} 0,0,0 ${n},0`,`l0,${-a}`].join(" "),"createOuterCylinderPathD"),GG=_((t,e,n,a,r,s)=>[`M${t-n/2},${-a/2}`,`a${r},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function zN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+e.padding,e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+e.padding,e.height??0);let d;const{cssStyles:m}=e;if(e.look==="handDrawn"){const f=xe.svg(r),p=YG(0,0,l,u,c,h),g=GG(0,h,l,u,c,h),x=f.path(p,ye(e,{})),b=f.path(g,ye(e,{fill:"none"}));d=r.insert(()=>b,":first-child"),d=r.insert(()=>x,":first-child"),d.attr("class","basic label-container"),m&&d.attr("style",m)}else{const f=VG(0,0,l,u,c,h);d=r.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",nn(m)).attr("style",a)}return d.attr("label-offset-y",h),d.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),we(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(f){const p=fe.rect(e,f),g=p.x-(e.x??0);if(c!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-h)){let x=h*h*(1-g*g/(c*c));x>0&&(x=Math.sqrt(x)),x=h-x,f.y-(e.y??0)>0&&(x=-x),p.y+=x}return p},r}_(zN,"cylinder");async function WN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=s.width+e.padding,c=s.height+e.padding,h=c*.2,u=-l/2,d=-c/2-h/2,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d+h},{x:-u,y:d+h},{x:-u,y:-d},{x:u,y:-d},{x:u,y:d},{x:-u,y:d},{x:-u,y:d+h}],x=f.polygon(g.map(w=>[w.x,w.y]),p),b=r.insert(()=>x,":first-child");return b.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",m),a&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",a),o.attr("transform",`translate(${u+(e.padding??0)/2-(s.x-(s.left??0))}, ${d+h+(e.padding??0)/2-(s.y-(s.top??0))})`),we(e,b),e.intersect=function(w){return fe.rect(e,w)},r}_(WN,"dividedRectangle");async function UN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,halfPadding:o}=await Ne(t,e,Se(e)),c=s.width/2+o+5,h=s.width/2+o;let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const m=xe.svg(r),f=ye(e,{roughness:.2,strokeWidth:2.5}),p=ye(e,{roughness:.2,strokeWidth:1.5}),g=m.circle(0,0,c*2,f),x=m.circle(0,0,h*2,p);u=r.insert("g",":first-child"),u.attr("class",nn(e.cssClasses)).attr("style",nn(d)),u.node()?.appendChild(g),u.node()?.appendChild(x)}else{u=r.insert("g",":first-child");const m=u.insert("circle",":first-child"),f=u.insert("circle");u.attr("class","basic label-container").attr("style",a),m.attr("class","outer-circle").attr("style",a).attr("r",c).attr("cx",0).attr("cy",0),f.attr("class","inner-circle").attr("style",a).attr("r",h).attr("cx",0).attr("cy",0)}return we(e,u),e.intersect=function(m){return te.info("DoubleCircle intersect",e,c,m),fe.circle(e,c,m)},r}_(UN,"doublecircle");function VN(t,e,{config:{themeVariables:n}}){const{labelStyles:a,nodeStyles:r}=be(e);e.label="",e.labelStyle=a;const s=t.insert("g").attr("class",Se(e)).attr("id",e.domId??e.id),o=7,{cssStyles:l}=e,c=xe.svg(s),{nodeBorder:h}=n,u=ye(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const d=c.circle(0,0,o*2,u),m=s.insert(()=>d,":first-child");return m.selectAll("path").attr("style",`fill: ${h} !important;`),l&&l.length>0&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",l),r&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",r),we(e,m),e.intersect=function(f){return te.info("filledCircle intersect",e,{radius:o,point:f}),fe.circle(e,o,f)},s}_(VN,"filledCircle");async function YN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:-c},{x:h,y:-c},{x:h/2,y:0}],{cssStyles:d}=e,m=xe.svg(r),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=Ve(u),g=m.path(p,f),x=r.insert(()=>g,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),a&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),e.width=l,e.height=c,we(e,x),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-c/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(b){return te.info("Triangle intersect",e,u,b),fe.polygon(e,u,b)},r}_(YN,"flippedTriangle");function GN(t,e,{dir:n,config:{state:a,themeVariables:r}}){const{nodeStyles:s}=be(e);e.label="";const o=t.insert("g").attr("class",Se(e)).attr("id",e.domId??e.id),{cssStyles:l}=e;let c=Math.max(70,e?.width??0),h=Math.max(10,e?.height??0);n==="LR"&&(c=Math.max(10,e?.width??0),h=Math.max(70,e?.height??0));const u=-1*c/2,d=-1*h/2,m=xe.svg(o),f=ye(e,{stroke:r.lineColor,fill:r.lineColor});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=m.rectangle(u,d,c,h,f),g=o.insert(()=>p,":first-child");l&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",l),s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),we(e,g);const x=a?.padding??0;return e.width&&e.height&&(e.width+=x/2||0,e.height+=x/2||0),e.intersect=function(b){return fe.rect(e,b)},o}_(GN,"forkJoin");async function XN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const r=80,s=50,{shapeSvg:o,bbox:l}=await Ne(t,e,Se(e)),c=Math.max(r,l.width+(e.padding??0)*2,e?.width??0),h=Math.max(s,l.height+(e.padding??0)*2,e?.height??0),u=h/2,{cssStyles:d}=e,m=xe.svg(o),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-c/2,y:-h/2},{x:c/2-u,y:-h/2},...Rl(-c/2+u,0,u,50,90,270),{x:c/2-u,y:h/2},{x:-c/2,y:h/2}],g=Ve(p),x=m.path(g,f),b=o.insert(()=>x,":first-child");return b.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",d),a&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",a),we(e,b),e.intersect=function(w){return te.info("Pill intersect",e,{radius:u,point:w}),fe.polygon(e,p,w)},o}_(XN,"halfRoundedRectangle");async function JN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.height+(e.padding??0),l=s.width+(e.padding??0)*2.5,{cssStyles:c}=e,h=xe.svg(r),u=ye(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");let d=l/2;const m=d/6;d=d+m;const f=o/2,p=f/2,g=d-p,x=[{x:-g,y:-f},{x:0,y:-f},{x:g,y:-f},{x:d,y:0},{x:g,y:f},{x:0,y:f},{x:-g,y:f},{x:-d,y:0}],b=Ve(x),w=h.path(b,u),k=r.insert(()=>w,":first-child");return k.attr("class","basic label-container"),c&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",c),a&&e.look!=="handDrawn"&&k.selectChildren("path").attr("style",a),e.width=l,e.height=o,we(e,k),e.intersect=function(E){return fe.polygon(e,x,E)},r}_(JN,"hexagon");async function QN(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.label="",e.labelStyle=n;const{shapeSvg:r}=await Ne(t,e,Se(e)),s=Math.max(30,e?.width??0),o=Math.max(30,e?.height??0),{cssStyles:l}=e,c=xe.svg(r),h=ye(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const u=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],d=Ve(u),m=c.path(d,h),f=r.insert(()=>m,":first-child");return f.attr("class","basic label-container"),l&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",l),a&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),f.attr("transform",`translate(${-s/2}, ${-o/2})`),we(e,f),e.intersect=function(p){return te.info("Pill intersect",e,{points:u}),fe.polygon(e,u,p)},r}_(QN,"hourglass");async function KN(t,e,{config:{themeVariables:n,flowchart:a}}){const{labelStyles:r}=be(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=a?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),m=e.pos==="t",f=l,p=l,{nodeBorder:g}=n,{stylesMap:x}=Ws(e),b=-p/2,w=-f/2,k=e.label?8:0,E=xe.svg(h),v=ye(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const S=E.rectangle(b,w,p,f,v),L=Math.max(p,u.width),O=f+u.height+k,P=E.rectangle(-L/2,-O/2,L,O,{...v,fill:"transparent",stroke:"none"}),j=h.insert(()=>S,":first-child"),A=h.insert(()=>P);if(e.icon){const q=h.append("g");q.html(`<g>${await ac(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const M=q.node().getBBox(),C=M.width,N=M.height,R=M.x,$=M.y;q.attr("transform",`translate(${-C/2-R},${m?u.height/2+k/2-N/2-$:-u.height/2-k/2-N/2-$})`),q.attr("style",`color: ${x.get("stroke")??g};`)}return d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${m?-O/2:O/2-u.height})`),j.attr("transform",`translate(0,${m?u.height/2+k/2:-u.height/2-k/2})`),we(e,A),e.intersect=function(q){if(te.info("iconSquare intersect",e,q),!e.label)return fe.rect(e,q);const M=e.x??0,C=e.y??0,N=e.height??0;let R=[];return m?R=[{x:M-u.width/2,y:C-N/2},{x:M+u.width/2,y:C-N/2},{x:M+u.width/2,y:C-N/2+u.height+k},{x:M+p/2,y:C-N/2+u.height+k},{x:M+p/2,y:C+N/2},{x:M-p/2,y:C+N/2},{x:M-p/2,y:C-N/2+u.height+k},{x:M-u.width/2,y:C-N/2+u.height+k}]:R=[{x:M-p/2,y:C-N/2},{x:M+p/2,y:C-N/2},{x:M+p/2,y:C-N/2+f},{x:M+u.width/2,y:C-N/2+f},{x:M+u.width/2/2,y:C+N/2},{x:M-u.width/2,y:C+N/2},{x:M-u.width/2,y:C-N/2+f},{x:M-p/2,y:C-N/2+f}],fe.polygon(e,R,q)},h}_(KN,"icon");async function ZN(t,e,{config:{themeVariables:n,flowchart:a}}){const{labelStyles:r}=be(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=a?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,label:d}=await Ne(t,e,"icon-shape default"),m=20,f=e.label?8:0,p=e.pos==="t",{nodeBorder:g,mainBkg:x}=n,{stylesMap:b}=Ws(e),w=xe.svg(h),k=ye(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const E=b.get("fill");k.stroke=E??x;const v=h.append("g");e.icon&&v.html(`<g>${await ac(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const S=v.node().getBBox(),L=S.width,O=S.height,P=S.x,j=S.y,A=Math.max(L,O)*Math.SQRT2+m*2,q=w.circle(0,0,A,k),M=Math.max(A,u.width),C=A+u.height+f,N=w.rectangle(-M/2,-C/2,M,C,{...k,fill:"transparent",stroke:"none"}),R=h.insert(()=>q,":first-child"),$=h.insert(()=>N);return v.attr("transform",`translate(${-L/2-P},${p?u.height/2+f/2-O/2-j:-u.height/2-f/2-O/2-j})`),v.attr("style",`color: ${b.get("stroke")??g};`),d.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${p?-C/2:C/2-u.height})`),R.attr("transform",`translate(0,${p?u.height/2+f/2:-u.height/2-f/2})`),we(e,$),e.intersect=function(U){return te.info("iconSquare intersect",e,U),fe.rect(e,U)},h}_(ZN,"iconCircle");async function eI(t,e,{config:{themeVariables:n,flowchart:a}}){const{labelStyles:r}=be(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=a?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,halfPadding:d,label:m}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=l+d*2,g=l+d*2,{nodeBorder:x,mainBkg:b}=n,{stylesMap:w}=Ws(e),k=-g/2,E=-p/2,v=e.label?8:0,S=xe.svg(h),L=ye(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const O=w.get("fill");L.stroke=O??b;const P=S.path(qa(k,E,g,p,5),L),j=Math.max(g,u.width),A=p+u.height+v,q=S.rectangle(-j/2,-A/2,j,A,{...L,fill:"transparent",stroke:"none"}),M=h.insert(()=>P,":first-child").attr("class","icon-shape2"),C=h.insert(()=>q);if(e.icon){const N=h.append("g");N.html(`<g>${await ac(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const R=N.node().getBBox(),$=R.width,U=R.height,B=R.x,T=R.y;N.attr("transform",`translate(${-$/2-B},${f?u.height/2+v/2-U/2-T:-u.height/2-v/2-U/2-T})`),N.attr("style",`color: ${w.get("stroke")??x};`)}return m.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-A/2:A/2-u.height})`),M.attr("transform",`translate(0,${f?u.height/2+v/2:-u.height/2-v/2})`),we(e,C),e.intersect=function(N){if(te.info("iconSquare intersect",e,N),!e.label)return fe.rect(e,N);const R=e.x??0,$=e.y??0,U=e.height??0;let B=[];return f?B=[{x:R-u.width/2,y:$-U/2},{x:R+u.width/2,y:$-U/2},{x:R+u.width/2,y:$-U/2+u.height+v},{x:R+g/2,y:$-U/2+u.height+v},{x:R+g/2,y:$+U/2},{x:R-g/2,y:$+U/2},{x:R-g/2,y:$-U/2+u.height+v},{x:R-u.width/2,y:$-U/2+u.height+v}]:B=[{x:R-g/2,y:$-U/2},{x:R+g/2,y:$-U/2},{x:R+g/2,y:$-U/2+p},{x:R+u.width/2,y:$-U/2+p},{x:R+u.width/2/2,y:$+U/2},{x:R-u.width/2,y:$+U/2},{x:R-u.width/2,y:$-U/2+p},{x:R-g/2,y:$-U/2+p}],fe.polygon(e,B,N)},h}_(eI,"iconRounded");async function tI(t,e,{config:{themeVariables:n,flowchart:a}}){const{labelStyles:r}=be(e);e.labelStyle=r;const s=e.assetHeight??48,o=e.assetWidth??48,l=Math.max(s,o),c=a?.wrappingWidth;e.width=Math.max(l,c??0);const{shapeSvg:h,bbox:u,halfPadding:d,label:m}=await Ne(t,e,"icon-shape default"),f=e.pos==="t",p=l+d*2,g=l+d*2,{nodeBorder:x,mainBkg:b}=n,{stylesMap:w}=Ws(e),k=-g/2,E=-p/2,v=e.label?8:0,S=xe.svg(h),L=ye(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const O=w.get("fill");L.stroke=O??b;const P=S.path(qa(k,E,g,p,.1),L),j=Math.max(g,u.width),A=p+u.height+v,q=S.rectangle(-j/2,-A/2,j,A,{...L,fill:"transparent",stroke:"none"}),M=h.insert(()=>P,":first-child"),C=h.insert(()=>q);if(e.icon){const N=h.append("g");N.html(`<g>${await ac(e.icon,{height:l,width:l,fallbackPrefix:""})}</g>`);const R=N.node().getBBox(),$=R.width,U=R.height,B=R.x,T=R.y;N.attr("transform",`translate(${-$/2-B},${f?u.height/2+v/2-U/2-T:-u.height/2-v/2-U/2-T})`),N.attr("style",`color: ${w.get("stroke")??x};`)}return m.attr("transform",`translate(${-u.width/2-(u.x-(u.left??0))},${f?-A/2:A/2-u.height})`),M.attr("transform",`translate(0,${f?u.height/2+v/2:-u.height/2-v/2})`),we(e,C),e.intersect=function(N){if(te.info("iconSquare intersect",e,N),!e.label)return fe.rect(e,N);const R=e.x??0,$=e.y??0,U=e.height??0;let B=[];return f?B=[{x:R-u.width/2,y:$-U/2},{x:R+u.width/2,y:$-U/2},{x:R+u.width/2,y:$-U/2+u.height+v},{x:R+g/2,y:$-U/2+u.height+v},{x:R+g/2,y:$+U/2},{x:R-g/2,y:$+U/2},{x:R-g/2,y:$-U/2+u.height+v},{x:R-u.width/2,y:$-U/2+u.height+v}]:B=[{x:R-g/2,y:$-U/2},{x:R+g/2,y:$-U/2},{x:R+g/2,y:$-U/2+p},{x:R+u.width/2,y:$-U/2+p},{x:R+u.width/2/2,y:$+U/2},{x:R-u.width/2,y:$+U/2},{x:R-u.width/2,y:$-U/2+p},{x:R-g/2,y:$-U/2+p}],fe.polygon(e,B,N)},h}_(tI,"iconSquare");async function nI(t,e,{config:{flowchart:n}}){const a=new Image;a.src=e?.img??"",await a.decode();const r=Number(a.naturalWidth.toString().replace("px","")),s=Number(a.naturalHeight.toString().replace("px",""));e.imageAspectRatio=r/s;const{labelStyles:o}=be(e);e.labelStyle=o;const l=n?.wrappingWidth;e.defaultWidth=n?.wrappingWidth;const c=Math.max(e.label?l??0:0,e?.assetWidth??r),h=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:c,u=e.constraint==="on"?h/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(h,l??0);const{shapeSvg:d,bbox:m,label:f}=await Ne(t,e,"image-shape default"),p=e.pos==="t",g=-h/2,x=-u/2,b=e.label?8:0,w=xe.svg(d),k=ye(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const E=w.rectangle(g,x,h,u,k),v=Math.max(h,m.width),S=u+m.height+b,L=w.rectangle(-v/2,-S/2,v,S,{...k,fill:"none",stroke:"none"}),O=d.insert(()=>E,":first-child"),P=d.insert(()=>L);if(e.img){const j=d.append("image");j.attr("href",e.img),j.attr("width",h),j.attr("height",u),j.attr("preserveAspectRatio","none"),j.attr("transform",`translate(${-h/2},${p?S/2-u:-S/2})`)}return f.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${p?-u/2-m.height/2-b/2:u/2-m.height/2+b/2})`),O.attr("transform",`translate(0,${p?m.height/2+b/2:-m.height/2-b/2})`),we(e,P),e.intersect=function(j){if(te.info("iconSquare intersect",e,j),!e.label)return fe.rect(e,j);const A=e.x??0,q=e.y??0,M=e.height??0;let C=[];return p?C=[{x:A-m.width/2,y:q-M/2},{x:A+m.width/2,y:q-M/2},{x:A+m.width/2,y:q-M/2+m.height+b},{x:A+h/2,y:q-M/2+m.height+b},{x:A+h/2,y:q+M/2},{x:A-h/2,y:q+M/2},{x:A-h/2,y:q-M/2+m.height+b},{x:A-m.width/2,y:q-M/2+m.height+b}]:C=[{x:A-h/2,y:q-M/2},{x:A+h/2,y:q-M/2},{x:A+h/2,y:q-M/2+u},{x:A+m.width/2,y:q-M/2+u},{x:A+m.width/2/2,y:q+M/2},{x:A-m.width/2,y:q+M/2},{x:A-m.width/2,y:q-M/2+u},{x:A-h/2,y:q-M/2+u}],fe.polygon(e,C,j)},d}_(nI,"imageSquare");async function iI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=[{x:0,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:-3*l/6,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=xe.svg(r),m=ye(e,{}),f=Ve(c),p=d.path(f,m);h=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=$a(r,o,l,c);return a&&h.attr("style",a),e.width=o,e.height=l,we(e,h),e.intersect=function(d){return fe.polygon(e,c,d)},r}_(iI,"inv_trapezoid");async function Gu(t,e,n){const{labelStyles:a,nodeStyles:r}=be(e);e.labelStyle=a;const{shapeSvg:s,bbox:o}=await Ne(t,e,Se(e)),l=Math.max(o.width+n.labelPaddingX*2,e?.width||0),c=Math.max(o.height+n.labelPaddingY*2,e?.height||0),h=-l/2,u=-c/2;let d,{rx:m,ry:f}=e;const{cssStyles:p}=e;if(n?.rx&&n.ry&&(m=n.rx,f=n.ry),e.look==="handDrawn"){const g=xe.svg(s),x=ye(e,{}),b=m||f?g.path(qa(h,u,l,c,m||0),x):g.rectangle(h,u,l,c,x);d=s.insert(()=>b,":first-child"),d.attr("class","basic label-container").attr("style",nn(p))}else d=s.insert("rect",":first-child"),d.attr("class","basic label-container").attr("style",r).attr("rx",nn(m)).attr("ry",nn(f)).attr("x",h).attr("y",u).attr("width",l).attr("height",c);return we(e,d),e.calcIntersect=function(g,x){return fe.rect(g,x)},e.intersect=function(g){return fe.rect(e,g)},s}_(Gu,"drawRect");async function aI(t,e){const{shapeSvg:n,bbox:a,label:r}=await Ne(t,e,"label"),s=n.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),we(e,s),e.intersect=function(c){return fe.rect(e,c)},n}_(aI,"labelRect");async function rI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:-(3*l)/6,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=xe.svg(r),m=ye(e,{}),f=Ve(c),p=d.path(f,m);h=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=$a(r,o,l,c);return a&&h.attr("style",a),e.width=o,e.height=l,we(e,h),e.intersect=function(d){return fe.polygon(e,c,d)},r}_(rI,"lean_left");async function sI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:-3*l/6,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:0,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=xe.svg(r),m=ye(e,{}),f=Ve(c),p=d.path(f,m);h=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=$a(r,o,l,c);return a&&h.attr("style",a),e.width=o,e.height=l,we(e,h),e.intersect=function(d){return fe.polygon(e,c,d)},r}_(sI,"lean_right");function oI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.label="",e.labelStyle=n;const r=t.insert("g").attr("class",Se(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,e?.width??0),l=Math.max(35,e?.height??0),c=7,h=[{x:o,y:0},{x:0,y:l+c/2},{x:o-2*c,y:l+c/2},{x:0,y:2*l},{x:o,y:l-c/2},{x:2*c,y:l-c/2}],u=xe.svg(r),d=ye(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=Ve(h),f=u.path(m,d),p=r.insert(()=>f,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),a&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",a),p.attr("transform",`translate(-${o/2},${-l})`),we(e,p),e.intersect=function(g){return te.info("lightningBolt intersect",e,g),fe.polygon(e,h,g)},r}_(oI,"lightningBolt");var XG=_((t,e,n,a,r,s,o)=>[`M${t},${e+s}`,`a${r},${s} 0,0,0 ${n},0`,`a${r},${s} 0,0,0 ${-n},0`,`l0,${a}`,`a${r},${s} 0,0,0 ${n},0`,`l0,${-a}`,`M${t},${e+s+o}`,`a${r},${s} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),JG=_((t,e,n,a,r,s,o)=>[`M${t},${e+s}`,`M${t+n},${e+s}`,`a${r},${s} 0,0,0 ${-n},0`,`l0,${a}`,`a${r},${s} 0,0,0 ${n},0`,`l0,${-a}`,`M${t},${e+s+o}`,`a${r},${s} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),QG=_((t,e,n,a,r,s)=>[`M${t-n/2},${-a/2}`,`a${r},${s} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function lI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0),e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+(e.padding??0),e.height??0),d=u*.1;let m;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=xe.svg(r),g=JG(0,0,l,u,c,h,d),x=QG(0,h,l,u,c,h),b=ye(e,{}),w=p.path(g,b),k=p.path(x,b);r.insert(()=>k,":first-child").attr("class","line"),m=r.insert(()=>w,":first-child"),m.attr("class","basic label-container"),f&&m.attr("style",f)}else{const p=XG(0,0,l,u,c,h,d);m=r.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",nn(f)).attr("style",a)}return m.attr("label-offset-y",h),m.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),we(e,m),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+h-(s.y-(s.top??0))})`),e.intersect=function(p){const g=fe.rect(e,p),x=g.x-(e.x??0);if(c!=0&&(Math.abs(x)<(e.width??0)/2||Math.abs(x)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-h)){let b=h*h*(1-x*x/(c*c));b>0&&(b=Math.sqrt(b)),b=h-b,p.y-(e.y??0)>0&&(b=-b),g.y+=b}return g},r}_(lI,"linedCylinder");async function cI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=c+h,{cssStyles:d}=e,m=xe.svg(r),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2-l/2*.1,y:-u/2},{x:-l/2-l/2*.1,y:u/2},...Pa(-l/2-l/2*.1,u/2,l/2+l/2*.1,u/2,h,.8),{x:l/2+l/2*.1,y:-u/2},{x:-l/2-l/2*.1,y:-u/2},{x:-l/2,y:-u/2},{x:-l/2,y:u/2*1.1},{x:-l/2,y:-u/2}],g=m.polygon(p.map(b=>[b.x,b.y]),f),x=r.insert(()=>g,":first-child");return x.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",a),x.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)+l/2*.1/2-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h/2-(s.y-(s.top??0))})`),we(e,x),e.intersect=function(b){return fe.polygon(e,p,b)},r}_(cI,"linedWaveEdgedRect");async function hI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=5,u=-l/2,d=-c/2,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{}),g=[{x:u-h,y:d+h},{x:u-h,y:d+c+h},{x:u+l-h,y:d+c+h},{x:u+l-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d+c-h},{x:u+l+h,y:d+c-h},{x:u+l+h,y:d-h},{x:u+h,y:d-h},{x:u+h,y:d},{x:u,y:d},{x:u,y:d+h}],x=[{x:u,y:d+h},{x:u+l-h,y:d+h},{x:u+l-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d},{x:u,y:d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=Ve(g),w=f.path(b,p),k=Ve(x),E=f.path(k,{...p,fill:"none"}),v=r.insert(()=>E,":first-child");return v.insert(()=>w,":first-child"),v.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",m),a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),o.attr("transform",`translate(${-(s.width/2)-h-(s.x-(s.left??0))}, ${-(s.height/2)+h-(s.y-(s.top??0))})`),we(e,v),e.intersect=function(S){return fe.polygon(e,g,S)},r}_(hI,"multiRect");async function uI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=c+h,d=-l/2,m=-u/2,f=5,{cssStyles:p}=e,g=Pa(d-f,m+u+f,d+l-f,m+u+f,h,.8),x=g?.[g.length-1],b=[{x:d-f,y:m+f},{x:d-f,y:m+u+f},...g,{x:d+l-f,y:x.y-f},{x:d+l,y:x.y-f},{x:d+l,y:x.y-2*f},{x:d+l+f,y:x.y-2*f},{x:d+l+f,y:m-f},{x:d+f,y:m-f},{x:d+f,y:m},{x:d,y:m},{x:d,y:m+f}],w=[{x:d,y:m+f},{x:d+l-f,y:m+f},{x:d+l-f,y:x.y-f},{x:d+l,y:x.y-f},{x:d+l,y:m},{x:d,y:m}],k=xe.svg(r),E=ye(e,{});e.look!=="handDrawn"&&(E.roughness=0,E.fillStyle="solid");const v=Ve(b),S=k.path(v,E),L=Ve(w),O=k.path(L,E),P=r.insert(()=>S,":first-child");return P.insert(()=>O),P.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",p),a&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",a),P.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)+f-h/2-(s.y-(s.top??0))})`),we(e,P),e.intersect=function(j){return fe.polygon(e,b,j)},r}_(uI,"multiWaveEdgedRectangle");async function dI(t,e,{config:{themeVariables:n}}){const{labelStyles:a,nodeStyles:r}=be(e);e.labelStyle=a,e.useHtmlLabels||en().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:l,label:c}=await Ne(t,e,Se(e)),h=Math.max(l.width+(e.padding??0)*2,e?.width??0),u=Math.max(l.height+(e.padding??0)*2,e?.height??0),d=-h/2,m=-u/2,{cssStyles:f}=e,p=xe.svg(o),g=ye(e,{fill:n.noteBkgColor,stroke:n.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=p.rectangle(d,m,h,u,g),b=o.insert(()=>x,":first-child");return b.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",f),r&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",r),c.attr("transform",`translate(${-l.width/2-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),we(e,b),e.intersect=function(w){return fe.rect(e,w)},o}_(dI,"note");var KG=_((t,e,n)=>[`M${t+n/2},${e}`,`L${t+n},${e-n/2}`,`L${t+n/2},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function mI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.width+e.padding,l=s.height+e.padding,c=o+l,h=.5,u=[{x:c/2,y:0},{x:c,y:-c/2},{x:c/2,y:-c},{x:0,y:-c/2}];let d;const{cssStyles:m}=e;if(e.look==="handDrawn"){const f=xe.svg(r),p=ye(e,{}),g=KG(0,0,c),x=f.path(g,p);d=r.insert(()=>x,":first-child").attr("transform",`translate(${-c/2+h}, ${c/2})`),m&&d.attr("style",m)}else d=$a(r,c,c,u),d.attr("transform",`translate(${-c/2+h}, ${c/2})`);return a&&d.attr("style",a),we(e,d),e.calcIntersect=function(f,p){const g=f.width,x=[{x:g/2,y:0},{x:g,y:-g/2},{x:g/2,y:-g},{x:0,y:-g/2}],b=fe.polygon(f,x,p);return{x:b.x-.5,y:b.y-.5}},e.intersect=function(f){return this.calcIntersect(e,f)},r}_(mI,"question");async function fI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0),e?.width??0),c=Math.max(s.height+(e.padding??0),e?.height??0),h=-l/2,u=-c/2,d=u/2,m=[{x:h+d,y:u},{x:h,y:0},{x:h+d,y:-u},{x:-h,y:-u},{x:-h,y:u}],{cssStyles:f}=e,p=xe.svg(r),g=ye(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=Ve(m),b=p.path(x,g),w=r.insert(()=>b,":first-child");return w.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",f),a&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",a),w.attr("transform",`translate(${-d/2},0)`),o.attr("transform",`translate(${-d/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),we(e,w),e.intersect=function(k){return fe.polygon(e,m,k)},r}_(fI,"rect_left_inv_arrow");async function pI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;let r;e.cssClasses?r="node "+e.cssClasses:r="node default";const s=t.insert("g").attr("class",r).attr("id",e.domId||e.id),o=s.insert("g"),l=s.insert("g").attr("class","label").attr("style",a),c=e.description,h=e.label,u=l.node().appendChild(await dr(h,e.labelStyle,!0,!0));let d={width:0,height:0};if(Lt(Ke()?.flowchart?.htmlLabels)){const O=u.children[0],P=Ye(u);d=O.getBoundingClientRect(),P.attr("width",d.width),P.attr("height",d.height)}te.info("Text 2",c);const m=c||[],f=u.getBBox(),p=l.node().appendChild(await dr(m.join?m.join("<br/>"):m,e.labelStyle,!0,!0)),g=p.children[0],x=Ye(p);d=g.getBoundingClientRect(),x.attr("width",d.width),x.attr("height",d.height);const b=(e.padding||0)/2;Ye(p).attr("transform","translate( "+(d.width>f.width?0:(f.width-d.width)/2)+", "+(f.height+b+5)+")"),Ye(u).attr("transform","translate( "+(d.width<f.width?0:-(f.width-d.width)/2)+", 0)"),d=l.node().getBBox(),l.attr("transform","translate("+-d.width/2+", "+(-d.height/2-b+3)+")");const w=d.width+(e.padding||0),k=d.height+(e.padding||0),E=-d.width/2-b,v=-d.height/2-b;let S,L;if(e.look==="handDrawn"){const O=xe.svg(s),P=ye(e,{}),j=O.path(qa(E,v,w,k,e.rx||0),P),A=O.line(-d.width/2-b,-d.height/2-b+f.height+b,d.width/2+b,-d.height/2-b+f.height+b,P);L=s.insert(()=>(te.debug("Rough node insert CXC",j),A),":first-child"),S=s.insert(()=>(te.debug("Rough node insert CXC",j),j),":first-child")}else S=o.insert("rect",":first-child"),L=o.insert("line"),S.attr("class","outer title-state").attr("style",a).attr("x",-d.width/2-b).attr("y",-d.height/2-b).attr("width",d.width+(e.padding||0)).attr("height",d.height+(e.padding||0)),L.attr("class","divider").attr("x1",-d.width/2-b).attr("x2",d.width/2+b).attr("y1",-d.height/2-b+f.height+b).attr("y2",-d.height/2-b+f.height+b);return we(e,S),e.intersect=function(O){return fe.rect(e,O)},s}_(pI,"rectWithTitle");function Go(t,e,n,a,r,s,o){const c=(t+n)/2,h=(e+a)/2,u=Math.atan2(a-e,n-t),d=(n-t)/2,m=(a-e)/2,f=d/r,p=m/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const x=Math.sqrt(1-g**2),b=c+x*s*Math.sin(u)*(o?-1:1),w=h-x*r*Math.cos(u)*(o?-1:1),k=Math.atan2((e-w)/s,(t-b)/r);let v=Math.atan2((a-w)/s,(n-b)/r)-k;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const S=[];for(let L=0;L<20;L++){const O=L/19,P=k+O*v,j=b+r*Math.cos(P),A=w+s*Math.sin(P);S.push({x:j,y:A})}return S}_(Go,"generateArcPoints");async function gI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=e?.padding??0,l=e?.padding??0,c=(e?.width?e?.width:s.width)+o*2,h=(e?.height?e?.height:s.height)+l*2,u=e.radius||5,d=e.taper||5,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{});e.stroke&&(p.stroke=e.stroke),e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-c/2+d,y:-h/2},{x:c/2-d,y:-h/2},...Go(c/2-d,-h/2,c/2,-h/2+d,u,u,!0),{x:c/2,y:-h/2+d},{x:c/2,y:h/2-d},...Go(c/2,h/2-d,c/2-d,h/2,u,u,!0),{x:c/2-d,y:h/2},{x:-c/2+d,y:h/2},...Go(-c/2+d,h/2,-c/2,h/2-d,u,u,!0),{x:-c/2,y:h/2-d},{x:-c/2,y:-h/2+d},...Go(-c/2,-h/2+d,-c/2+d,-h/2,u,u,!0)],x=Ve(g),b=f.path(x,p),w=r.insert(()=>b,":first-child");return w.attr("class","basic label-container outer-path"),m&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",m),a&&e.look!=="handDrawn"&&w.selectChildren("path").attr("style",a),we(e,w),e.intersect=function(k){return fe.polygon(e,g,k)},r}_(gI,"roundedRect");async function xI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=e?.padding??0,c=Math.max(s.width+(e.padding??0)*2,e?.width??0),h=Math.max(s.height+(e.padding??0)*2,e?.height??0),u=-s.width/2-l,d=-s.height/2-l,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:u,y:d},{x:u+c+8,y:d},{x:u+c+8,y:d+h},{x:u-8,y:d+h},{x:u-8,y:d},{x:u,y:d},{x:u,y:d+h}],x=f.polygon(g.map(w=>[w.x,w.y]),p),b=r.insert(()=>x,":first-child");return b.attr("class","basic label-container").attr("style",nn(m)),a&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",a),m&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",a),o.attr("transform",`translate(${-c/2+4+(e.padding??0)-(s.x-(s.left??0))},${-h/2+(e.padding??0)-(s.y-(s.top??0))})`),we(e,b),e.intersect=function(w){return fe.rect(e,w)},r}_(xI,"shadedProcess");async function yI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=-l/2,u=-c/2,{cssStyles:d}=e,m=xe.svg(r),f=ye(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:h,y:u},{x:h,y:u+c},{x:h+l,y:u+c},{x:h+l,y:u-c/2}],g=Ve(p),x=m.path(g,f),b=r.insert(()=>x,":first-child");return b.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",d),a&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",a),b.attr("transform",`translate(0, ${c/4})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))}, ${-c/4+(e.padding??0)-(s.y-(s.top??0))})`),we(e,b),e.intersect=function(w){return fe.polygon(e,p,w)},r}_(yI,"slopedRect");async function bI(t,e){const n={rx:0,ry:0,labelPaddingX:e.labelPaddingX??(e?.padding||0)*2,labelPaddingY:(e?.padding||0)*1};return Gu(t,e,n)}_(bI,"squareRect");async function wI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.height+e.padding,l=s.width+o/4+e.padding,c=o/2,{cssStyles:h}=e,u=xe.svg(r),d=ye(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=[{x:-l/2+c,y:-o/2},{x:l/2-c,y:-o/2},...Rl(-l/2+c,0,c,50,90,270),{x:l/2-c,y:o/2},...Rl(l/2-c,0,c,50,270,450)],f=Ve(m),p=u.path(f,d),g=r.insert(()=>p,":first-child");return g.attr("class","basic label-container outer-path"),h&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",h),a&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",a),we(e,g),e.intersect=function(x){return fe.polygon(e,m,x)},r}_(wI,"stadium");async function _I(t,e){return Gu(t,e,{rx:5,ry:5})}_(_I,"state");function vI(t,e,{config:{themeVariables:n}}){const{labelStyles:a,nodeStyles:r}=be(e);e.labelStyle=a;const{cssStyles:s}=e,{lineColor:o,stateBorder:l,nodeBorder:c}=n,h=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),u=xe.svg(h),d=ye(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const m=u.circle(0,0,14,{...d,stroke:o,strokeWidth:2}),f=l??c,p=u.circle(0,0,5,{...d,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=h.insert(()=>m,":first-child");return g.insert(()=>p),s&&g.selectAll("path").attr("style",s),r&&g.selectAll("path").attr("style",r),we(e,g),e.intersect=function(x){return fe.circle(e,7,x)},h}_(vI,"stateEnd");function jI(t,e,{config:{themeVariables:n}}){const{lineColor:a}=n,r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const l=xe.svg(r).circle(0,0,14,cW(a));s=r.insert(()=>l),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=r.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return we(e,s),e.intersect=function(o){return fe.circle(e,7,o)},r}_(jI,"stateStart");async function TI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=(e?.padding||0)/2,l=s.width+e.padding,c=s.height+e.padding,h=-s.width/2-o,u=-s.height/2-o,d=[{x:0,y:0},{x:l,y:0},{x:l,y:-c},{x:0,y:-c},{x:0,y:0},{x:-8,y:0},{x:l+8,y:0},{x:l+8,y:-c},{x:-8,y:-c},{x:-8,y:0}];if(e.look==="handDrawn"){const m=xe.svg(r),f=ye(e,{}),p=m.rectangle(h-8,u,l+16,c,f),g=m.line(h,u,h,u+c,f),x=m.line(h+l,u,h+l,u+c,f);r.insert(()=>g,":first-child"),r.insert(()=>x,":first-child");const b=r.insert(()=>p,":first-child"),{cssStyles:w}=e;b.attr("class","basic label-container").attr("style",nn(w)),we(e,b)}else{const m=$a(r,l,c,d);a&&m.attr("style",a),we(e,m)}return e.intersect=function(m){return fe.polygon(e,d,m)},r}_(TI,"subroutine");async function kI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=-o/2,h=-l/2,u=.2*l,d=.2*l,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{}),g=[{x:c-u/2,y:h},{x:c+o+u/2,y:h},{x:c+o+u/2,y:h+l},{x:c-u/2,y:h+l}],x=[{x:c+o-u/2,y:h+l},{x:c+o+u/2,y:h+l},{x:c+o+u/2,y:h+l-d}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=Ve(g),w=f.path(b,p),k=Ve(x),E=f.path(k,{...p,fillStyle:"solid"}),v=r.insert(()=>E,":first-child");return v.insert(()=>w,":first-child"),v.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",m),a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),we(e,v),e.intersect=function(S){return fe.polygon(e,g,S)},r}_(kI,"taggedRect");async function EI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/4,u=.2*l,d=.2*c,m=c+h,{cssStyles:f}=e,p=xe.svg(r),g=ye(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=[{x:-l/2-l/2*.1,y:m/2},...Pa(-l/2-l/2*.1,m/2,l/2+l/2*.1,m/2,h,.8),{x:l/2+l/2*.1,y:-m/2},{x:-l/2-l/2*.1,y:-m/2}],b=-l/2+l/2*.1,w=-m/2-d*.4,k=[{x:b+l-u,y:(w+c)*1.4},{x:b+l,y:w+c-d},{x:b+l,y:(w+c)*.9},...Pa(b+l,(w+c)*1.3,b+l-u,(w+c)*1.5,-c*.03,.5)],E=Ve(x),v=p.path(E,g),S=Ve(k),L=p.path(S,{...g,fillStyle:"solid"}),O=r.insert(()=>L,":first-child");return O.insert(()=>v,":first-child"),O.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",f),a&&e.look!=="handDrawn"&&O.selectAll("path").attr("style",a),O.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h/2-(s.y-(s.top??0))})`),we(e,O),e.intersect=function(P){return fe.polygon(e,x,P)},r}_(EI,"taggedWaveEdgedRectangle");async function SI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=Math.max(s.width+e.padding,e?.width||0),l=Math.max(s.height+e.padding,e?.height||0),c=-o/2,h=-l/2,u=r.insert("rect",":first-child");return u.attr("class","text").attr("style",a).attr("rx",0).attr("ry",0).attr("x",c).attr("y",h).attr("width",o).attr("height",l),we(e,u),e.intersect=function(d){return fe.rect(e,d)},r}_(SI,"text");var ZG=_((t,e,n,a,r,s)=>`M${t},${e}
    a${r},${s} 0,0,1 0,${-a}
    l${n},0
    a${r},${s} 0,0,1 0,${a}
    M${n},${-a}
    a${r},${s} 0,0,0 0,${a}
    l${-n},0`,"createCylinderPathD"),eX=_((t,e,n,a,r,s)=>[`M${t},${e}`,`M${t+n},${e}`,`a${r},${s} 0,0,0 0,${-a}`,`l${-n},0`,`a${r},${s} 0,0,0 0,${a}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),tX=_((t,e,n,a,r,s)=>[`M${t+n/2},${-a/2}`,`a${r},${s} 0,0,0 0,${a}`].join(" "),"createInnerCylinderPathD");async function CI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o,halfPadding:l}=await Ne(t,e,Se(e)),c=e.look==="neo"?l*2:l,h=s.height+c,u=h/2,d=u/(2.5+h/50),m=s.width+d+c,{cssStyles:f}=e;let p;if(e.look==="handDrawn"){const g=xe.svg(r),x=eX(0,0,m,h,d,u),b=tX(0,0,m,h,d,u),w=g.path(x,ye(e,{})),k=g.path(b,ye(e,{fill:"none"}));p=r.insert(()=>k,":first-child"),p=r.insert(()=>w,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=ZG(0,0,m,h,d,u);p=r.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",nn(f)).attr("style",a),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),a&&p.selectAll("path").attr("style",a)}return p.attr("label-offset-x",d),p.attr("transform",`translate(${-m/2}, ${h/2} )`),o.attr("transform",`translate(${-(s.width/2)-d-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),we(e,p),e.intersect=function(g){const x=fe.rect(e,g),b=x.y-(e.y??0);if(u!=0&&(Math.abs(b)<(e.height??0)/2||Math.abs(b)==(e.height??0)/2&&Math.abs(x.x-(e.x??0))>(e.width??0)/2-d)){let w=d*d*(1-b*b/(u*u));w!=0&&(w=Math.sqrt(Math.abs(w))),w=d-w,g.x-(e.x??0)>0&&(w=-w),x.x+=w}return x},r}_(CI,"tiltedCylinder");async function AI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=s.width+e.padding,l=s.height+e.padding,c=[{x:-3*l/6,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:0,y:-l}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=xe.svg(r),m=ye(e,{}),f=Ve(c),p=d.path(f,m);h=r.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),u&&h.attr("style",u)}else h=$a(r,o,l,c);return a&&h.attr("style",a),e.width=o,e.height=l,we(e,h),e.intersect=function(d){return fe.polygon(e,c,d)},r}_(AI,"trapezoid");async function NI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=60,l=20,c=Math.max(o,s.width+(e.padding??0)*2,e?.width??0),h=Math.max(l,s.height+(e.padding??0)*2,e?.height??0),{cssStyles:u}=e,d=xe.svg(r),m=ye(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const f=[{x:-c/2*.8,y:-h/2},{x:c/2*.8,y:-h/2},{x:c/2,y:-h/2*.6},{x:c/2,y:h/2},{x:-c/2,y:h/2},{x:-c/2,y:-h/2*.6}],p=Ve(f),g=d.path(p,m),x=r.insert(()=>g,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),a&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),we(e,x),e.intersect=function(b){return fe.polygon(e,f,b)},r}_(NI,"trapezoidalPentagon");async function II(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Lt(Ke().flowchart?.htmlLabels),c=s.width+(e.padding??0),h=c+s.height,u=c+s.height,d=[{x:0,y:0},{x:u,y:0},{x:u/2,y:-h}],{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=Ve(d),x=f.path(g,p),b=r.insert(()=>x,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return m&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",m),a&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",a),e.width=c,e.height=h,we(e,b),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${h/2-(s.height+(e.padding??0)/(l?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(w){return te.info("Triangle intersect",e,d,w),fe.polygon(e,d,w)},r}_(II,"triangle");async function LI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=c/8,u=c+h,{cssStyles:d}=e,f=70-l,p=f>0?f/2:0,g=xe.svg(r),x=ye(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const b=[{x:-l/2-p,y:u/2},...Pa(-l/2-p,u/2,l/2+p,u/2,h,.8),{x:l/2+p,y:-u/2},{x:-l/2-p,y:-u/2}],w=Ve(b),k=g.path(w,x),E=r.insert(()=>k,":first-child");return E.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&E.selectAll("path").attr("style",a),E.attr("transform",`translate(0,${-h/2})`),o.attr("transform",`translate(${-l/2+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-h-(s.y-(s.top??0))})`),we(e,E),e.intersect=function(v){return fe.polygon(e,b,v)},r}_(LI,"waveEdgedRectangle");async function OI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s}=await Ne(t,e,Se(e)),o=100,l=50,c=Math.max(s.width+(e.padding??0)*2,e?.width??0),h=Math.max(s.height+(e.padding??0)*2,e?.height??0),u=c/h;let d=c,m=h;d>m*u?m=d/u:d=m*u,d=Math.max(d,o),m=Math.max(m,l);const f=Math.min(m*.2,m/4),p=m+f*2,{cssStyles:g}=e,x=xe.svg(r),b=ye(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const w=[{x:-d/2,y:p/2},...Pa(-d/2,p/2,d/2,p/2,f,1),{x:d/2,y:-p/2},...Pa(d/2,-p/2,-d/2,-p/2,f,-1)],k=Ve(w),E=x.path(k,b),v=r.insert(()=>E,":first-child");return v.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",g),a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),we(e,v),e.intersect=function(S){return fe.polygon(e,w,S)},r}_(OI,"waveRectangle");async function MI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,label:o}=await Ne(t,e,Se(e)),l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=5,u=-l/2,d=-c/2,{cssStyles:m}=e,f=xe.svg(r),p=ye(e,{}),g=[{x:u-h,y:d-h},{x:u-h,y:d+c},{x:u+l,y:d+c},{x:u+l,y:d-h}],x=`M${u-h},${d-h} L${u+l},${d-h} L${u+l},${d+c} L${u-h},${d+c} L${u-h},${d-h}
                M${u-h},${d} L${u+l},${d}
                M${u},${d-h} L${u},${d+c}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=f.path(x,p),w=r.insert(()=>b,":first-child");return w.attr("transform",`translate(${h/2}, ${h/2})`),w.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",m),a&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",a),o.attr("transform",`translate(${-(s.width/2)+h/2-(s.x-(s.left??0))}, ${-(s.height/2)+h/2-(s.y-(s.top??0))})`),we(e,w),e.intersect=function(k){return fe.polygon(e,g,k)},r}_(MI,"windowPane");async function Bx(t,e){const n=e;if(n.alias&&(e.label=n.alias),e.look==="handDrawn"){const{themeVariables:X}=en(),{background:I}=X,H={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${I}`]};await Bx(t,H)}const a=en();e.useHtmlLabels=a.htmlLabels;let r=a.er?.diagramPadding??10,s=a.er?.entityPadding??6;const{cssStyles:o}=e,{labelStyles:l,nodeStyles:c}=be(e);if(n.attributes.length===0&&e.label){const X={rx:0,ry:0,labelPaddingX:r,labelPaddingY:r*1.5};da(e.label,a)+X.labelPaddingX*2<a.er.minEntityWidth&&(e.width=a.er.minEntityWidth);const I=await Gu(t,e,X);if(!Lt(a.htmlLabels)){const H=I.select("text"),W=H.node()?.getBBox();H.attr("transform",`translate(${-W.width/2}, 0)`)}return I}a.htmlLabels||(r*=1.25,s*=1.25);let h=Se(e);h||(h="node default");const u=t.insert("g").attr("class",h).attr("id",e.domId||e.id),d=await es(u,e.label??"",a,0,0,["name"],l);d.height+=s;let m=0;const f=[],p=[];let g=0,x=0,b=0,w=0,k=!0,E=!0;for(const X of n.attributes){const I=await es(u,X.type,a,0,m,["attribute-type"],l);g=Math.max(g,I.width+r);const H=await es(u,X.name,a,0,m,["attribute-name"],l);x=Math.max(x,H.width+r);const W=await es(u,X.keys.join(),a,0,m,["attribute-keys"],l);b=Math.max(b,W.width+r);const K=await es(u,X.comment,a,0,m,["attribute-comment"],l);w=Math.max(w,K.width+r);const le=Math.max(I.height,H.height,W.height,K.height)+s;p.push({yOffset:m,rowHeight:le}),m+=le}let v=4;b<=r&&(k=!1,b=0,v--),w<=r&&(E=!1,w=0,v--);const S=u.node().getBBox();if(d.width+r*2-(g+x+b+w)>0){const X=d.width+r*2-(g+x+b+w);g+=X/v,x+=X/v,b>0&&(b+=X/v),w>0&&(w+=X/v)}const L=g+x+b+w,O=xe.svg(u),P=ye(e,{});e.look!=="handDrawn"&&(P.roughness=0,P.fillStyle="solid");let j=0;p.length>0&&(j=p.reduce((X,I)=>X+(I?.rowHeight??0),0));const A=Math.max(S.width+r*2,e?.width||0,L),q=Math.max((j??0)+d.height,e?.height||0),M=-A/2,C=-q/2;u.selectAll("g:not(:first-child)").each((X,I,H)=>{const W=Ye(H[I]),K=W.attr("transform");let le=0,he=0;if(K){const Ee=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(K);Ee&&(le=parseFloat(Ee[1]),he=parseFloat(Ee[2]),W.attr("class").includes("attribute-name")?le+=g:W.attr("class").includes("attribute-keys")?le+=g+x:W.attr("class").includes("attribute-comment")&&(le+=g+x+b))}W.attr("transform",`translate(${M+r/2+le}, ${he+C+d.height+s/2})`)}),u.select(".name").attr("transform","translate("+-d.width/2+", "+(C+s/2)+")");const N=O.rectangle(M,C,A,q,P),R=u.insert(()=>N,":first-child").attr("style",o.join("")),{themeVariables:$}=en(),{rowEven:U,rowOdd:B,nodeBorder:T}=$;f.push(0);for(const[X,I]of p.entries()){const W=(X+1)%2===0&&I.yOffset!==0,K=O.rectangle(M,d.height+C+I?.yOffset,A,I?.rowHeight,{...P,fill:W?U:B,stroke:T});u.insert(()=>K,"g.label").attr("style",o.join("")).attr("class",`row-rect-${W?"even":"odd"}`)}let Y=O.line(M,d.height+C,A+M,d.height+C,P);u.insert(()=>Y).attr("class","divider"),Y=O.line(g+M,d.height+C,g+M,q+C,P),u.insert(()=>Y).attr("class","divider"),k&&(Y=O.line(g+x+M,d.height+C,g+x+M,q+C,P),u.insert(()=>Y).attr("class","divider")),E&&(Y=O.line(g+x+b+M,d.height+C,g+x+b+M,q+C,P),u.insert(()=>Y).attr("class","divider"));for(const X of f)Y=O.line(M,d.height+C+X,A+M,d.height+C+X,P),u.insert(()=>Y).attr("class","divider");if(we(e,R),c&&e.look!=="handDrawn"){const I=c.split(";")?.filter(H=>H.includes("stroke"))?.map(H=>`${H}`).join("; ");u.selectAll("path").attr("style",I??""),u.selectAll(".row-rect-even path").attr("style",c)}return e.intersect=function(X){return fe.rect(e,X)},u}_(Bx,"erBox");async function es(t,e,n,a=0,r=0,s=[],o=""){const l=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${a}, ${r})`).attr("style",o);e!==Ib(e)&&(e=Ib(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const c=l.node().appendChild(await Ha(l,e,{width:da(e,n)+100,style:o,useHtmlLabels:n.htmlLabels},n));if(e.includes("&lt;")||e.includes("&gt;")){let u=c.children[0];for(u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");u.childNodes[0];)u=u.childNodes[0],u.textContent=u.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let h=c.getBBox();if(Lt(n.htmlLabels)){const u=c.children[0];u.style.textAlign="start";const d=Ye(c);h=u.getBoundingClientRect(),d.attr("width",h.width),d.attr("height",h.height)}return h}_(es,"addText");async function RI(t,e,n,a,r=n.class.padding??12){const s=a?0:3,o=t.insert("g").attr("class",Se(e)).attr("id",e.domId||e.id);let l=null,c=null,h=null,u=null,d=0,m=0,f=0;if(l=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const w=e.annotations[0];await Xo(l,{text:`«${w}»`},0),d=l.node().getBBox().height}c=o.insert("g").attr("class","label-group text"),await Xo(c,e,0,["font-weight: bolder"]);const p=c.node().getBBox();m=p.height,h=o.insert("g").attr("class","members-group text");let g=0;for(const w of e.members){const k=await Xo(h,w,g,[w.parseClassifier()]);g+=k+s}f=h.node().getBBox().height,f<=0&&(f=r/2),u=o.insert("g").attr("class","methods-group text");let x=0;for(const w of e.methods){const k=await Xo(u,w,x,[w.parseClassifier()]);x+=k+s}let b=o.node().getBBox();if(l!==null){const w=l.node().getBBox();l.attr("transform",`translate(${-w.width/2})`)}return c.attr("transform",`translate(${-p.width/2}, ${d})`),b=o.node().getBBox(),h.attr("transform",`translate(0, ${d+m+r*2})`),b=o.node().getBBox(),u.attr("transform",`translate(0, ${d+m+(f?f+r*4:r*2)})`),b=o.node().getBBox(),{shapeSvg:o,bbox:b}}_(RI,"textHelper");async function Xo(t,e,n,a=[]){const r=t.insert("g").attr("class","label").attr("style",a.join("; ")),s=en();let o="useHtmlLabels"in e?e.useHtmlLabels:Lt(s.htmlLabels)??!0,l="";"text"in e?l=e.text:l=e.label,!o&&l.startsWith("\\")&&(l=l.substring(1)),js(l)&&(o=!0);const c=await Ha(r,Gg(Br(l)),{width:da(l,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let h,u=1;if(o){const d=c.children[0],m=Ye(c);u=d.innerHTML.split("<br>").length,d.innerHTML.includes("</math>")&&(u+=d.innerHTML.split("<mrow>").length-1);const f=d.getElementsByTagName("img");if(f){const p=l.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(x=>{function b(){if(g.style.display="flex",g.style.flexDirection="column",p){const w=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,E=parseInt(w,10)*5+"px";g.style.minWidth=E,g.style.maxWidth=E}else g.style.width="100%";x(g)}_(b,"setupImage"),setTimeout(()=>{g.complete&&b()}),g.addEventListener("error",b),g.addEventListener("load",b)})))}h=d.getBoundingClientRect(),m.attr("width",h.width),m.attr("height",h.height)}else{a.includes("font-weight: bolder")&&Ye(c).selectAll("tspan").attr("font-weight",""),u=c.children.length;const d=c.children[0];(c.textContent===""||c.textContent.includes("&gt"))&&(d.textContent=l[0]+l.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),l[1]===" "&&(d.textContent=d.textContent[0]+" "+d.textContent.substring(1))),d.textContent==="undefined"&&(d.textContent=""),h=c.getBBox()}return r.attr("transform","translate(0,"+(-h.height/(2*u)+n)+")"),h.height}_(Xo,"addText");async function PI(t,e){const n=Ke(),a=n.class.padding??12,r=a,s=e.useHtmlLabels??Lt(n.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:l,bbox:c}=await RI(t,e,n,s,r),{labelStyles:h,nodeStyles:u}=be(e);e.labelStyle=h,e.cssStyles=o.styles||"";const d=o.styles?.join(";")||u||"";e.cssStyles||(e.cssStyles=d.replaceAll("!important","").split(";"));const m=o.members.length===0&&o.methods.length===0&&!n.class?.hideEmptyMembersBox,f=xe.svg(l),p=ye(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=c.width;let x=c.height;o.members.length===0&&o.methods.length===0?x+=r:o.members.length>0&&o.methods.length===0&&(x+=r*2);const b=-g/2,w=-x/2,k=f.rectangle(b-a,w-a-(m?a:o.members.length===0&&o.methods.length===0?-a/2:0),g+2*a,x+2*a+(m?a*2:o.members.length===0&&o.methods.length===0?-a:0),p),E=l.insert(()=>k,":first-child");E.attr("class","basic label-container");const v=E.node().getBBox();l.selectAll(".text").each((P,j,A)=>{const q=Ye(A[j]),M=q.attr("transform");let C=0;if(M){const U=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(M);U&&(C=parseFloat(U[2]))}let N=C+w+a-(m?a:o.members.length===0&&o.methods.length===0?-a/2:0);s||(N-=4);let R=b;(q.attr("class").includes("label-group")||q.attr("class").includes("annotation-group"))&&(R=-q.node()?.getBBox().width/2||0,l.selectAll("text").each(function($,U,B){window.getComputedStyle(B[U]).textAnchor==="middle"&&(R=0)})),q.attr("transform",`translate(${R}, ${N})`)});const S=l.select(".annotation-group").node().getBBox().height-(m?a/2:0)||0,L=l.select(".label-group").node().getBBox().height-(m?a/2:0)||0,O=l.select(".members-group").node().getBBox().height-(m?a/2:0)||0;if(o.members.length>0||o.methods.length>0||m){const P=f.line(v.x,S+L+w+a,v.x+v.width,S+L+w+a,p);l.insert(()=>P).attr("class","divider").attr("style",d)}if(m||o.members.length>0||o.methods.length>0){const P=f.line(v.x,S+L+O+w+r*2+a,v.x+v.width,S+L+O+w+a+r*2,p);l.insert(()=>P).attr("class","divider").attr("style",d)}if(o.look!=="handDrawn"&&l.selectAll("path").attr("style",d),E.select(":nth-child(2)").attr("style",d),l.selectAll(".divider").select("path").attr("style",d),e.labelStyle?l.selectAll("span").attr("style",e.labelStyle):l.selectAll("span").attr("style",d),!s){const P=RegExp(/color\s*:\s*([^;]*)/),j=P.exec(d);if(j){const A=j[0].replace("color","fill");l.selectAll("tspan").attr("style",A)}else if(h){const A=P.exec(h);if(A){const q=A[0].replace("color","fill");l.selectAll("tspan").attr("style",q)}}}return we(e,E),e.intersect=function(P){return fe.rect(e,P)},l}_(PI,"classBox");async function DI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const r=e,s=e,o=20,l=20,c="verifyMethod"in e,h=Se(e),u=t.insert("g").attr("class",h).attr("id",e.domId??e.id);let d;c?d=await Ai(u,`&lt;&lt;${r.type}&gt;&gt;`,0,e.labelStyle):d=await Ai(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let m=d;const f=await Ai(u,r.name,m,e.labelStyle+"; font-weight: bold;");if(m+=f+l,c){const S=await Ai(u,`${r.requirementId?`ID: ${r.requirementId}`:""}`,m,e.labelStyle);m+=S;const L=await Ai(u,`${r.text?`Text: ${r.text}`:""}`,m,e.labelStyle);m+=L;const O=await Ai(u,`${r.risk?`Risk: ${r.risk}`:""}`,m,e.labelStyle);m+=O,await Ai(u,`${r.verifyMethod?`Verification: ${r.verifyMethod}`:""}`,m,e.labelStyle)}else{const S=await Ai(u,`${s.type?`Type: ${s.type}`:""}`,m,e.labelStyle);m+=S,await Ai(u,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,m,e.labelStyle)}const p=(u.node()?.getBBox().width??200)+o,g=(u.node()?.getBBox().height??200)+o,x=-p/2,b=-g/2,w=xe.svg(u),k=ye(e,{});e.look!=="handDrawn"&&(k.roughness=0,k.fillStyle="solid");const E=w.rectangle(x,b,p,g,k),v=u.insert(()=>E,":first-child");if(v.attr("class","basic label-container").attr("style",a),u.selectAll(".label").each((S,L,O)=>{const P=Ye(O[L]),j=P.attr("transform");let A=0,q=0;if(j){const R=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(j);R&&(A=parseFloat(R[1]),q=parseFloat(R[2]))}const M=q-g/2;let C=x+o/2;(L===0||L===1)&&(C=A),P.attr("transform",`translate(${C}, ${M+o})`)}),m>d+f+l){const S=w.line(x,b+d+f+l,x+p,b+d+f+l,k);u.insert(()=>S).attr("style",a)}return we(e,v),e.intersect=function(S){return fe.rect(e,S)},u}_(DI,"requirementBox");async function Ai(t,e,n,a=""){if(e==="")return 0;const r=t.insert("g").attr("class","label").attr("style",a),s=Ke(),o=s.htmlLabels??!0,l=await Ha(r,Gg(Br(e)),{width:da(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:a},s);let c;if(o){const h=l.children[0],u=Ye(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}else{const h=l.children[0];for(const u of h.children)u.textContent=u.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),a&&u.setAttribute("style",a);c=l.getBBox(),c.height+=6}return r.attr("transform",`translate(${-c.width/2},${-c.height/2+n})`),c.height}_(Ai,"addText");var nX=_(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function BI(t,e,{config:n}){const{labelStyles:a,nodeStyles:r}=be(e);e.labelStyle=a||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:l,bbox:c,label:h}=await Ne(t,e,Se(e)),u=e.padding||10;let d="",m;"ticket"in e&&e.ticket&&n?.kanban?.ticketBaseUrl&&(d=n?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),m=l.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",d).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,g;m?{label:p,bbox:g}=await lm(m,"ticket"in e&&e.ticket||"",f):{label:p,bbox:g}=await lm(l,"ticket"in e&&e.ticket||"",f);const{label:x,bbox:b}=await lm(l,"assigned"in e&&e.assigned||"",f);e.width=o;const w=10,k=e?.width||0,E=Math.max(g.height,b.height)/2,v=Math.max(c.height+w*2,e?.height||0)+E,S=-k/2,L=-v/2;h.attr("transform","translate("+(u-k/2)+", "+(-E-c.height/2)+")"),p.attr("transform","translate("+(u-k/2)+", "+(-E+c.height/2)+")"),x.attr("transform","translate("+(u+k/2-b.width-2*s)+", "+(-E+c.height/2)+")");let O;const{rx:P,ry:j}=e,{cssStyles:A}=e;if(e.look==="handDrawn"){const q=xe.svg(l),M=ye(e,{}),C=P||j?q.path(qa(S,L,k,v,P||0),M):q.rectangle(S,L,k,v,M);O=l.insert(()=>C,":first-child"),O.attr("class","basic label-container").attr("style",A||null)}else{O=l.insert("rect",":first-child"),O.attr("class","basic label-container __APA__").attr("style",r).attr("rx",P??5).attr("ry",j??5).attr("x",S).attr("y",L).attr("width",k).attr("height",v);const q="priority"in e&&e.priority;if(q){const M=l.append("line"),C=S+2,N=L+Math.floor((P??0)/2),R=L+v-Math.floor((P??0)/2);M.attr("x1",C).attr("y1",N).attr("x2",C).attr("y2",R).attr("stroke-width","4").attr("stroke",nX(q))}}return we(e,O),e.height=v,e.intersect=function(q){return fe.rect(e,q)},l}_(BI,"kanbanItem");async function FI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,halfPadding:o,label:l}=await Ne(t,e,Se(e)),c=s.width+10*o,h=s.height+8*o,u=.15*c,{cssStyles:d}=e,m=s.width+20,f=s.height+20,p=Math.max(c,m),g=Math.max(h,f);l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);let x;const b=`M0 0 
    a${u},${u} 1 0,0 ${p*.25},${-1*g*.1}
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},0
    a${u},${u} 1 0,0 ${p*.25},${g*.1}

    a${u},${u} 1 0,0 ${p*.15},${g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${g*.34}
    a${u},${u} 1 0,0 ${-1*p*.15},${g*.33}

    a${u},${u} 1 0,0 ${-1*p*.25},${g*.15}
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},0
    a${u},${u} 1 0,0 ${-1*p*.25},${-1*g*.15}

    a${u},${u} 1 0,0 ${-1*p*.1},${-1*g*.33}
    a${u*.8},${u*.8} 1 0,0 0,${-1*g*.34}
    a${u},${u} 1 0,0 ${p*.1},${-1*g*.33}
  H0 V0 Z`;if(e.look==="handDrawn"){const w=xe.svg(r),k=ye(e,{}),E=w.path(b,k);x=r.insert(()=>E,":first-child"),x.attr("class","basic label-container").attr("style",nn(d))}else x=r.insert("path",":first-child").attr("class","basic label-container").attr("style",a).attr("d",b);return x.attr("transform",`translate(${-p/2}, ${-g/2})`),we(e,x),e.calcIntersect=function(w,k){return fe.rect(w,k)},e.intersect=function(w){return te.info("Bang intersect",e,w),fe.rect(e,w)},r}_(FI,"bang");async function HI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,halfPadding:o,label:l}=await Ne(t,e,Se(e)),c=s.width+2*o,h=s.height+2*o,u=.15*c,d=.25*c,m=.35*c,f=.2*c,{cssStyles:p}=e;let g;const x=`M0 0 
    a${u},${u} 0 0,1 ${c*.25},${-1*c*.1}
    a${m},${m} 1 0,1 ${c*.4},${-1*c*.1}
    a${d},${d} 1 0,1 ${c*.35},${c*.2}

    a${u},${u} 1 0,1 ${c*.15},${h*.35}
    a${f},${f} 1 0,1 ${-1*c*.15},${h*.65}

    a${d},${u} 1 0,1 ${-1*c*.25},${c*.15}
    a${m},${m} 1 0,1 ${-1*c*.5},0
    a${u},${u} 1 0,1 ${-1*c*.25},${-1*c*.15}

    a${u},${u} 1 0,1 ${-1*c*.1},${-1*h*.35}
    a${f},${f} 1 0,1 ${c*.1},${-1*h*.65}
  H0 V0 Z`;if(e.look==="handDrawn"){const b=xe.svg(r),w=ye(e,{}),k=b.path(x,w);g=r.insert(()=>k,":first-child"),g.attr("class","basic label-container").attr("style",nn(p))}else g=r.insert("path",":first-child").attr("class","basic label-container").attr("style",a).attr("d",x);return l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),g.attr("transform",`translate(${-c/2}, ${-h/2})`),we(e,g),e.calcIntersect=function(b,w){return fe.rect(b,w)},e.intersect=function(b){return te.info("Cloud intersect",e,b),fe.rect(e,b)},r}_(HI,"cloud");async function qI(t,e){const{labelStyles:n,nodeStyles:a}=be(e);e.labelStyle=n;const{shapeSvg:r,bbox:s,halfPadding:o,label:l}=await Ne(t,e,Se(e)),c=s.width+8*o,h=s.height+2*o,u=5,d=`
    M${-c/2} ${h/2-u}
    v${-h+2*u}
    q0,-${u} ${u},-${u}
    h${c-2*u}
    q${u},0 ${u},${u}
    v${h-2*u}
    q0,${u} -${u},${u}
    h${-c+2*u}
    q-${u},0 -${u},-${u}
    Z
  `,m=r.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",a).attr("d",d);return r.append("line").attr("class","node-line-").attr("x1",-c/2).attr("y1",h/2).attr("x2",c/2).attr("y2",h/2),l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),r.append(()=>l.node()),we(e,m),e.calcIntersect=function(f,p){return fe.rect(f,p)},e.intersect=function(f){return fe.rect(e,f)},r}_(qI,"defaultMindmapNode");async function $I(t,e){const n={padding:e.padding??0};return Dx(t,e,n)}_($I,"mindmapCircle");var iX=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:bI},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:gI},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:wI},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:TI},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:zN},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:Dx},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:FI},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:HI},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:mI},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:JN},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:sI},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:rI},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:AI},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:iI},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:UN},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:SI},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:RN},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:xI},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:jI},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:vI},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:GN},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:QN},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:FN},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:HN},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:qN},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:oI},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:LI},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:XN},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:CI},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:lI},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:$N},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:WN},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:II},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:MI},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:VN},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:NI},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:YN},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:yI},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:uI},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:hI},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:MN},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:BN},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:EI},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:kI},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:OI},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:fI},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:cI}],aX=_(()=>{const e=[...Object.entries({state:_I,choice:PN,note:dI,rectWithTitle:pI,labelRect:aI,iconSquare:tI,iconCircle:ZN,icon:KN,iconRounded:eI,imageSquare:nI,anchor:ON,kanbanItem:BI,mindmapCircle:$I,defaultMindmapNode:qI,classBox:PI,erBox:Bx,requirementBox:DI}),...iX.flatMap(n=>[n.shortName,..."aliases"in n?n.aliases:[],..."internalAliases"in n?n.internalAliases:[]].map(r=>[r,n.handler]))];return Object.fromEntries(e)},"generateShapeMap"),zI=aX();function rX(t){return t in zI}_(rX,"isValidShape");var Xu=new Map;async function WI(t,e,n){let a,r;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?zI[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;n.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),a=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),r=await s(a,e,n)}else r=await s(t,e,n),a=r;return e.tooltip&&r.attr("title",e.tooltip),Xu.set(e.id,a),e.haveCallback&&a.attr("class",a.attr("class")+" clickable"),a}_(WI,"insertNode");var nhe=_((t,e)=>{Xu.set(e.id,t)},"setNodeElem"),ihe=_(()=>{Xu.clear()},"clear"),ahe=_(t=>{const e=Xu.get(t.id);te.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=8,a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-n)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode"),sX=_((t,e,n,a,r,s)=>{e.arrowTypeStart&&qw(t,"start",e.arrowTypeStart,n,a,r,s),e.arrowTypeEnd&&qw(t,"end",e.arrowTypeEnd,n,a,r,s)},"addEdgeMarkers"),oX={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},qw=_((t,e,n,a,r,s,o)=>{const l=oX[n];if(!l){te.warn(`Unknown arrow type: ${n}`);return}const c=l.type,u=`${r}_${s}-${c}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const d=o.replace(/[^\dA-Za-z]/g,"_"),m=`${u}_${d}`;if(!document.getElementById(m)){const f=document.getElementById(u);if(f){const p=f.cloneNode(!0);p.id=m,p.querySelectorAll("path, circle, line").forEach(x=>{x.setAttribute("stroke",o),l.fill&&x.setAttribute("fill",o)}),f.parentNode?.appendChild(p)}}t.attr(`marker-${e}`,`url(${a}#${m})`)}else t.attr(`marker-${e}`,`url(${a}#${u})`)},"addEdgeMarker"),tu=new Map,Wt=new Map,rhe=_(()=>{tu.clear(),Wt.clear()},"clear"),Ic=_(t=>t?t.reduce((n,a)=>n+";"+a,""):"","getLabelStyles"),lX=_(async(t,e)=>{let n=Lt(Ke().flowchart.htmlLabels);const{labelStyles:a}=be(e);e.labelStyle=a;const r=await Ha(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0,isNode:!1});te.info("abc82",e,e.labelType);const s=t.insert("g").attr("class","edgeLabel"),o=s.insert("g").attr("class","label").attr("data-id",e.id);o.node().appendChild(r);let l=r.getBBox();if(n){const h=r.children[0],u=Ye(r);l=h.getBoundingClientRect(),u.attr("width",l.width),u.attr("height",l.height)}o.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),tu.set(e.id,s),e.width=l.width,e.height=l.height;let c;if(e.startLabelLeft){const h=await dr(e.startLabelLeft,Ic(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const m=h.getBBox();d.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),Wt.get(e.id)||Wt.set(e.id,{}),Wt.get(e.id).startLeft=u,Jo(c,e.startLabelLeft)}if(e.startLabelRight){const h=await dr(e.startLabelRight,Ic(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=u.node().appendChild(h),d.node().appendChild(h);const m=h.getBBox();d.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),Wt.get(e.id)||Wt.set(e.id,{}),Wt.get(e.id).startRight=u,Jo(c,e.startLabelRight)}if(e.endLabelLeft){const h=await dr(e.endLabelLeft,Ic(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const m=h.getBBox();d.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),u.node().appendChild(h),Wt.get(e.id)||Wt.set(e.id,{}),Wt.get(e.id).endLeft=u,Jo(c,e.endLabelLeft)}if(e.endLabelRight){const h=await dr(e.endLabelRight,Ic(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");c=d.node().appendChild(h);const m=h.getBBox();d.attr("transform","translate("+-m.width/2+", "+-m.height/2+")"),u.node().appendChild(h),Wt.get(e.id)||Wt.set(e.id,{}),Wt.get(e.id).endRight=u,Jo(c,e.endLabelRight)}return r},"insertEdgeLabel");function Jo(t,e){Ke().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}_(Jo,"setTerminalWidth");var cX=_((t,e)=>{te.debug("Moving label abc88 ",t.id,t.label,tu.get(t.id),e);let n=e.updatedPath?e.updatedPath:e.originalPath;const a=Ke(),{subGraphTitleTotalMargin:r}=fx(a);if(t.label){const s=tu.get(t.id);let o=t.x,l=t.y;if(n){const c=pi.calcLabelPosition(n);te.debug("Moving label "+t.label+" from (",o,",",l,") to (",c.x,",",c.y,") abc88"),e.updatedPath&&(o=c.x,l=c.y)}s.attr("transform",`translate(${o}, ${l+r/2})`)}if(t.startLabelLeft){const s=Wt.get(t.id).startLeft;let o=t.x,l=t.y;if(n){const c=pi.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.startLabelRight){const s=Wt.get(t.id).startRight;let o=t.x,l=t.y;if(n){const c=pi.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.endLabelLeft){const s=Wt.get(t.id).endLeft;let o=t.x,l=t.y;if(n){const c=pi.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}if(t.endLabelRight){const s=Wt.get(t.id).endRight;let o=t.x,l=t.y;if(n){const c=pi.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);o=c.x,l=c.y}s.attr("transform",`translate(${o}, ${l})`)}},"positionEdgeLabel"),hX=_((t,e)=>{const n=t.x,a=t.y,r=Math.abs(e.x-n),s=Math.abs(e.y-a),o=t.width/2,l=t.height/2;return r>=o||s>=l},"outsideNode"),uX=_((t,e,n)=>{te.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(n)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const a=t.x,r=t.y,s=Math.abs(a-n.x),o=t.width/2;let l=n.x<e.x?o-s:o+s;const c=t.height/2,h=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(r-e.y)*o>Math.abs(a-e.x)*c){let d=n.y<e.y?e.y-c-r:r-c-e.y;l=u*d/h;const m={x:n.x<e.x?n.x+l:n.x-u+l,y:n.y<e.y?n.y+h-d:n.y-h+d};return l===0&&(m.x=e.x,m.y=e.y),u===0&&(m.x=e.x),h===0&&(m.y=e.y),te.debug(`abc89 top/bottom calc, Q ${h}, q ${d}, R ${u}, r ${l}`,m),m}else{n.x<e.x?l=e.x-o-a:l=a-o-e.x;let d=h*l/u,m=n.x<e.x?n.x+u-l:n.x-u+l,f=n.y<e.y?n.y+d:n.y-d;return te.debug(`sides calc abc89, Q ${h}, q ${d}, R ${u}, r ${l}`,{_x:m,_y:f}),l===0&&(m=e.x,f=e.y),u===0&&(m=e.x),h===0&&(f=e.y),{x:m,y:f}}},"intersection"),$w=_((t,e)=>{te.warn("abc88 cutPathAtIntersect",t,e);let n=[],a=t[0],r=!1;return t.forEach(s=>{if(te.info("abc88 checking point",s,e),!hX(e,s)&&!r){const o=uX(e,a,s);te.debug("abc88 inside",s,a,o),te.debug("abc88 intersection",o,e);let l=!1;n.forEach(c=>{l=l||c.x===o.x&&c.y===o.y}),n.some(c=>c.x===o.x&&c.y===o.y)?te.warn("abc88 no intersect",o,n):n.push(o),r=!0}else te.warn("abc88 outside",s,a),a=s,r||n.push(s)}),te.debug("returning points",n),n},"cutPathAtIntersect");function UI(t){const e=[],n=[];for(let a=1;a<t.length-1;a++){const r=t[a-1],s=t[a],o=t[a+1];(r.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-r.y)>5||r.y===s.y&&s.x===o.x&&Math.abs(s.x-r.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),n.push(a))}return{cornerPoints:e,cornerPointPositions:n}}_(UI,"extractCornerPoints");var zw=_(function(t,e,n){const a=e.x-t.x,r=e.y-t.y,s=Math.sqrt(a*a+r*r),o=n/s;return{x:e.x-o*a,y:e.y-o*r}},"findAdjacentPoint"),dX=_(function(t){const{cornerPointPositions:e}=UI(t),n=[];for(let a=0;a<t.length;a++)if(e.includes(a)){const r=t[a-1],s=t[a+1],o=t[a],l=zw(r,o,5),c=zw(s,o,5),h=c.x-l.x,u=c.y-l.y;n.push(l);const d=Math.sqrt(2)*2;let m={x:o.x,y:o.y};if(Math.abs(s.x-r.x)>10&&Math.abs(s.y-r.y)>=10){te.debug("Corner point fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));const f=5;o.x===l.x?m={x:h<0?l.x-f+d:l.x+f-d,y:u<0?l.y-d:l.y+d}:m={x:h<0?l.x-d:l.x+d,y:u<0?l.y-f+d:l.y+f-d}}else te.debug("Corner point skipping fixing",Math.abs(s.x-r.x),Math.abs(s.y-r.y));n.push(m,c)}else n.push(t[a]);return n},"fixCorners"),mX=_((t,e,n)=>{const a=t-e-n,r=2,s=2,o=r+s,l=Math.floor(a/o),c=Array(l).fill(`${r} ${s}`).join(" ");return`0 ${e} ${c} ${n}`},"generateDashArray"),fX=_(function(t,e,n,a,r,s,o,l=!1){const{handDrawnSeed:c}=Ke();let h=e.points,u=!1;const d=r;var m=s;const f=[];for(const C in e.cssCompiledStyles)vA(C)||f.push(e.cssCompiledStyles[C]);te.debug("UIO intersect check",e.points,m.x,d.x),m.intersect&&d.intersect&&!l&&(h=h.slice(1,e.points.length-1),h.unshift(d.intersect(h[0])),te.debug("Last point UIO",e.start,"-->",e.end,h[h.length-1],m,m.intersect(h[h.length-1])),h.push(m.intersect(h[h.length-1])));const p=btoa(JSON.stringify(h));e.toCluster&&(te.info("to cluster abc88",n.get(e.toCluster)),h=$w(e.points,n.get(e.toCluster).node),u=!0),e.fromCluster&&(te.debug("from cluster abc88",n.get(e.fromCluster),JSON.stringify(h,null,2)),h=$w(h.reverse(),n.get(e.fromCluster).node).reverse(),u=!0);let g=h.filter(C=>!Number.isNaN(C.y));g=dX(g);let x=ah;switch(x=Lh,e.curve){case"linear":x=Lh;break;case"basis":x=ah;break;case"cardinal":x=ES;break;case"bumpX":x=_S;break;case"bumpY":x=vS;break;case"catmullRom":x=CS;break;case"monotoneX":x=MS;break;case"monotoneY":x=RS;break;case"natural":x=DS;break;case"step":x=BS;break;case"stepAfter":x=HS;break;case"stepBefore":x=FS;break;default:x=ah}const{x:b,y:w}=lW(e),k=Uz().x(b).y(w).curve(x);let E;switch(e.thickness){case"normal":E="edge-thickness-normal";break;case"thick":E="edge-thickness-thick";break;case"invisible":E="edge-thickness-invisible";break;default:E="edge-thickness-normal"}switch(e.pattern){case"solid":E+=" edge-pattern-solid";break;case"dotted":E+=" edge-pattern-dotted";break;case"dashed":E+=" edge-pattern-dashed";break;default:E+=" edge-pattern-solid"}let v,S=e.curve==="rounded"?VI(YI(g,e),5):k(g);const L=Array.isArray(e.style)?e.style:[e.style];let O=L.find(C=>C?.startsWith("stroke:")),P=!1;if(e.look==="handDrawn"){const C=xe.svg(t);Object.assign([],g);const N=C.path(S,{roughness:.3,seed:c});E+=" transition",v=Ye(N).select("path").attr("id",e.id).attr("class"," "+E+(e.classes?" "+e.classes:"")).attr("style",L?L.reduce(($,U)=>$+";"+U,""):"");let R=v.attr("d");v.attr("d",R),t.node().appendChild(v.node())}else{const C=f.join(";"),N=L?L.reduce((X,I)=>X+I+";",""):"";let R="";e.animate&&(R=" edge-animation-fast"),e.animation&&(R=" edge-animation-"+e.animation);const $=(C?C+";"+N+";":N)+";"+(L?L.reduce((X,I)=>X+";"+I,""):"");v=t.append("path").attr("d",S).attr("id",e.id).attr("class"," "+E+(e.classes?" "+e.classes:"")+(R??"")).attr("style",$),O=$.match(/stroke:([^;]+)/)?.[1],P=e.animate===!0||!!e.animation||C.includes("animation");const U=v.node(),B=typeof U.getTotalLength=="function"?U.getTotalLength():0,T=aw[e.arrowTypeStart]||0,Y=aw[e.arrowTypeEnd]||0;if(e.look==="neo"&&!P){const I=`stroke-dasharray: ${e.pattern==="dotted"||e.pattern==="dashed"?mX(B,T,Y):`0 ${T} ${B-T-Y} ${Y}`}; stroke-dashoffset: 0;`;v.attr("style",I+v.attr("style"))}}v.attr("data-edge",!0),v.attr("data-et","edge"),v.attr("data-id",e.id),v.attr("data-points",p),e.showPoints&&g.forEach(C=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",C.x).attr("cy",C.y)});let j="";(Ke().flowchart.arrowMarkerAbsolute||Ke().state.arrowMarkerAbsolute)&&(j=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,j=j.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),te.info("arrowTypeStart",e.arrowTypeStart),te.info("arrowTypeEnd",e.arrowTypeEnd),sX(v,e,j,o,a,O);const A=Math.floor(h.length/2),q=h[A];pi.isLabelCoordinateInPath(q,v.attr("d"))||(u=!0);let M={};return u&&(M.updatedPath=h),M.originalPath=e.points,M},"insertEdge");function VI(t,e){if(t.length<2)return"";let n="";const a=t.length,r=1e-5;for(let s=0;s<a;s++){const o=t[s],l=t[s-1],c=t[s+1];if(s===0)n+=`M${o.x},${o.y}`;else if(s===a-1)n+=`L${o.x},${o.y}`;else{const h=o.x-l.x,u=o.y-l.y,d=c.x-o.x,m=c.y-o.y,f=Math.hypot(h,u),p=Math.hypot(d,m);if(f<r||p<r){n+=`L${o.x},${o.y}`;continue}const g=h/f,x=u/f,b=d/p,w=m/p,k=g*b+x*w,E=Math.max(-1,Math.min(1,k)),v=Math.acos(E);if(v<r||Math.abs(Math.PI-v)<r){n+=`L${o.x},${o.y}`;continue}const S=Math.min(e/Math.sin(v/2),f/2,p/2),L=o.x-g*S,O=o.y-x*S,P=o.x+b*S,j=o.y+w*S;n+=`L${L},${O}`,n+=`Q${o.x},${o.y} ${P},${j}`}}return n}_(VI,"generateRoundedPath");function Vp(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const n=e.x-t.x,a=e.y-t.y;return{angle:Math.atan2(a,n),deltaX:n,deltaY:a}}_(Vp,"calculateDeltaAndAngle");function YI(t,e){const n=t.map(r=>({...r}));if(t.length>=2&&Jt[e.arrowTypeStart]){const r=Jt[e.arrowTypeStart],s=t[0],o=t[1],{angle:l}=Vp(s,o),c=r*Math.cos(l),h=r*Math.sin(l);n[0].x=s.x+c,n[0].y=s.y+h}const a=t.length;if(a>=2&&Jt[e.arrowTypeEnd]){const r=Jt[e.arrowTypeEnd],s=t[a-1],o=t[a-2],{angle:l}=Vp(o,s),c=r*Math.cos(l),h=r*Math.sin(l);n[a-1].x=s.x-c,n[a-1].y=s.y-h}return n}_(YI,"applyMarkerOffsetsToPoints");var pX=_((t,e,n,a)=>{e.forEach(r=>{IX[r](t,n,a)})},"insertMarkers"),gX=_((t,e,n)=>{te.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),xX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),yX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),bX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),wX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),_X=_((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),vX=_((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),jX=_((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),TX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),kX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),EX=_((t,e,n)=>{const a=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),a.append("path").attr("d","M9,0 L9,18");const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),SX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),CX=_((t,e,n)=>{const a=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");a.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),a.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),AX=_((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),NX=_((t,e,n)=>{const a=t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");a.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),a.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),a.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),IX={extension:gX,composition:xX,aggregation:yX,dependency:bX,lollipop:wX,point:_X,circle:vX,cross:jX,barb:TX,only_one:kX,zero_or_one:EX,one_or_more:SX,zero_or_more:CX,requirement_arrow:AX,requirement_contains:NX},LX=pX,OX={common:zs,getConfig:en,insertCluster:qG,insertEdge:fX,insertEdgeLabel:lX,insertMarkers:LX,insertNode:WI,interpolateToCurve:bx,labelHelper:Ne,log:te,positionEdgeLabel:cX},Pl={},GI=_(t=>{for(const e of t)Pl[e.name]=e},"registerLayoutLoaders"),MX=_(()=>{GI([{name:"dagre",loader:_(async()=>await oe(()=>import("./chunk-4rU0r1QT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])),"loader")},{name:"cose-bilkent",loader:_(async()=>await oe(()=>import("./chunk-BlXQIrXd.js"),__vite__mapDeps([15,16,6,7,8,9,10,11,12,13,14])),"loader")}])},"registerDefaultLayoutLoaders");MX();var she=_(async(t,e)=>{if(!(t.layoutAlgorithm in Pl))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const n=Pl[t.layoutAlgorithm];return(await n.loader()).render(t,e,OX,{algorithm:n.algorithm})},"render"),ohe=_((t="",{fallback:e="dagre"}={})=>{if(t in Pl)return t;if(e in Pl)return te.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),XI="comm",JI="rule",QI="decl",RX="@import",PX="@namespace",DX="@keyframes",BX="@layer",KI=Math.abs,Fx=String.fromCharCode;function ZI(t){return t.trim()}function ch(t,e,n){return t.replace(e,n)}function FX(t,e,n){return t.indexOf(e,n)}function os(t,e){return t.charCodeAt(e)|0}function Cs(t,e,n){return t.slice(e,n)}function Oi(t){return t.length}function HX(t){return t.length}function Lc(t,e){return e.push(t),t}var Ju=1,As=1,e3=0,ti=0,kt=0,Gs="";function Hx(t,e,n,a,r,s,o,l){return{value:t,root:e,parent:n,type:a,props:r,children:s,line:Ju,column:As,length:o,return:"",siblings:l}}function qX(){return kt}function $X(){return kt=ti>0?os(Gs,--ti):0,As--,kt===10&&(As=1,Ju--),kt}function yi(){return kt=ti<e3?os(Gs,ti++):0,As++,kt===10&&(As=1,Ju++),kt}function Sa(){return os(Gs,ti)}function hh(){return ti}function Qu(t,e){return Cs(Gs,t,e)}function Dl(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zX(t){return Ju=As=1,e3=Oi(Gs=t),ti=0,[]}function WX(t){return Gs="",t}function cm(t){return ZI(Qu(ti-1,Yp(t===91?t+2:t===40?t+1:t)))}function UX(t){for(;(kt=Sa())&&kt<33;)yi();return Dl(t)>2||Dl(kt)>3?"":" "}function VX(t,e){for(;--e&&yi()&&!(kt<48||kt>102||kt>57&&kt<65||kt>70&&kt<97););return Qu(t,hh()+(e<6&&Sa()==32&&yi()==32))}function Yp(t){for(;yi();)switch(kt){case t:return ti;case 34:case 39:t!==34&&t!==39&&Yp(kt);break;case 40:t===41&&Yp(t);break;case 92:yi();break}return ti}function YX(t,e){for(;yi()&&t+kt!==57;)if(t+kt===84&&Sa()===47)break;return"/*"+Qu(e,ti-1)+"*"+Fx(t===47?t:yi())}function GX(t){for(;!Dl(Sa());)yi();return Qu(t,ti)}function XX(t){return WX(uh("",null,null,null,[""],t=zX(t),0,[0],t))}function uh(t,e,n,a,r,s,o,l,c){for(var h=0,u=0,d=o,m=0,f=0,p=0,g=1,x=1,b=1,w=0,k="",E=r,v=s,S=a,L=k;x;)switch(p=w,w=yi()){case 40:if(p!=108&&os(L,d-1)==58){FX(L+=ch(cm(w),"&","&\f"),"&\f",KI(h?l[h-1]:0))!=-1&&(b=-1);break}case 34:case 39:case 91:L+=cm(w);break;case 9:case 10:case 13:case 32:L+=UX(p);break;case 92:L+=VX(hh()-1,7);continue;case 47:switch(Sa()){case 42:case 47:Lc(JX(YX(yi(),hh()),e,n,c),c),(Dl(p||1)==5||Dl(Sa()||1)==5)&&Oi(L)&&Cs(L,-1,void 0)!==" "&&(L+=" ");break;default:L+="/"}break;case 123*g:l[h++]=Oi(L)*b;case 125*g:case 59:case 0:switch(w){case 0:case 125:x=0;case 59+u:b==-1&&(L=ch(L,/\f/g,"")),f>0&&(Oi(L)-d||g===0&&p===47)&&Lc(f>32?Uw(L+";",a,n,d-1,c):Uw(ch(L," ","")+";",a,n,d-2,c),c);break;case 59:L+=";";default:if(Lc(S=Ww(L,e,n,h,u,r,l,k,E=[],v=[],d,s),s),w===123)if(u===0)uh(L,e,S,S,E,s,d,l,v);else{switch(m){case 99:if(os(L,3)===110)break;case 108:if(os(L,2)===97)break;default:u=0;case 100:case 109:case 115:}u?uh(t,S,S,a&&Lc(Ww(t,S,S,0,0,r,l,k,r,E=[],d,v),v),r,v,d,l,a?E:v):uh(L,S,S,S,[""],v,0,l,v)}}h=u=f=0,g=b=1,k=L="",d=o;break;case 58:d=1+Oi(L),f=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&$X()==125)continue}switch(L+=Fx(w),w*g){case 38:b=u>0?1:(L+="\f",-1);break;case 44:l[h++]=(Oi(L)-1)*b,b=1;break;case 64:Sa()===45&&(L+=cm(yi())),m=Sa(),u=d=Oi(k=L+=GX(hh())),w++;break;case 45:p===45&&Oi(L)==2&&(g=0)}}return s}function Ww(t,e,n,a,r,s,o,l,c,h,u,d){for(var m=r-1,f=r===0?s:[""],p=HX(f),g=0,x=0,b=0;g<a;++g)for(var w=0,k=Cs(t,m+1,m=KI(x=o[g])),E=t;w<p;++w)(E=ZI(x>0?f[w]+" "+k:ch(k,/&\f/g,f[w])))&&(c[b++]=E);return Hx(t,e,n,r===0?JI:l,c,h,u,d)}function JX(t,e,n,a){return Hx(t,e,n,XI,Fx(qX()),Cs(t,2,-2),0,a)}function Uw(t,e,n,a,r){return Hx(t,e,n,QI,Cs(t,0,a),Cs(t,a+1,-1),a,r)}function Gp(t,e){for(var n="",a=0;a<t.length;a++)n+=e(t[a],a,t,e)||"";return n}function QX(t,e,n,a){switch(t.type){case BX:if(t.children.length)break;case RX:case PX:case QI:return t.return=t.return||t.value;case XI:return"";case DX:return t.return=t.value+"{"+Gp(t.children,a)+"}";case JI:if(!Oi(t.value=t.props.join(",")))return""}return Oi(n=Gp(t.children,a))?t.return=t.value+"{"+n+"}":""}var KX=EA(Object.keys,Object),ZX=Object.prototype,eJ=ZX.hasOwnProperty;function tJ(t){if(!Hu(t))return KX(t);var e=[];for(var n in Object(t))eJ.call(t,n)&&n!="constructor"&&e.push(n);return e}var Xp=Dr(qi,"DataView"),Jp=Dr(qi,"Promise"),Qp=Dr(qi,"Set"),Kp=Dr(qi,"WeakMap"),Vw="[object Map]",nJ="[object Object]",Yw="[object Promise]",Gw="[object Set]",Xw="[object WeakMap]",Jw="[object DataView]",iJ=Pr(Xp),aJ=Pr(Ml),rJ=Pr(Jp),sJ=Pr(Qp),oJ=Pr(Kp),ar=Us;(Xp&&ar(new Xp(new ArrayBuffer(1)))!=Jw||Ml&&ar(new Ml)!=Vw||Jp&&ar(Jp.resolve())!=Yw||Qp&&ar(new Qp)!=Gw||Kp&&ar(new Kp)!=Xw)&&(ar=function(t){var e=Us(t),n=e==nJ?t.constructor:void 0,a=n?Pr(n):"";if(a)switch(a){case iJ:return Jw;case aJ:return Vw;case rJ:return Yw;case sJ:return Gw;case oJ:return Xw}return e});var lJ="[object Map]",cJ="[object Set]",hJ=Object.prototype,uJ=hJ.hasOwnProperty;function Qw(t){if(t==null)return!0;if(qu(t)&&(Uh(t)||typeof t=="string"||typeof t.splice=="function"||xx(t)||yx(t)||Wh(t)))return!t.length;var e=ar(t);if(e==lJ||e==cJ)return!t.size;if(Hu(t))return!tJ(t).length;for(var n in t)if(uJ.call(t,n))return!1;return!0}var t3="c4",dJ=_(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),mJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CCsNgQU5.js");return{diagram:e}},__vite__mapDeps([17,18,6,7,8,9,10,11,12,13,14]));return{id:t3,diagram:t}},"loader"),fJ={id:t3,detector:dJ,loader:mJ},pJ=fJ,n3="flowchart",gJ=_((t,e)=>e?.flowchart?.defaultRenderer==="dagre-wrapper"||e?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(t),"detector"),xJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-AVsbg-Kq.js");return{diagram:e}},__vite__mapDeps([19,20,21,22,23,6,7,8,9,10,11,12,13,14]));return{id:n3,diagram:t}},"loader"),yJ={id:n3,detector:gJ,loader:xJ},bJ=yJ,i3="flowchart-v2",wJ=_((t,e)=>e?.flowchart?.defaultRenderer==="dagre-d3"?!1:(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&e?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)),"detector"),_J=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-AVsbg-Kq.js");return{diagram:e}},__vite__mapDeps([19,20,21,22,23,6,7,8,9,10,11,12,13,14]));return{id:i3,diagram:t}},"loader"),vJ={id:i3,detector:wJ,loader:_J},jJ=vJ,a3="er",TJ=_(t=>/^\s*erDiagram/.test(t),"detector"),kJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-B032gJ20.js");return{diagram:e}},__vite__mapDeps([24,21,22,23,6,7,8,9,10,11,12,13,14]));return{id:a3,diagram:t}},"loader"),EJ={id:a3,detector:TJ,loader:kJ},SJ=EJ,r3="gitGraph",CJ=_(t=>/^\s*gitGraph/.test(t),"detector"),AJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-tEmVEBwI.js");return{diagram:e}},__vite__mapDeps([25,26,27,28,7,2,4,5,6,8,9,10,11,12,13,14]));return{id:r3,diagram:t}},"loader"),NJ={id:r3,detector:CJ,loader:AJ},IJ=NJ,s3="gantt",LJ=_(t=>/^\s*gantt/.test(t),"detector"),OJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-Bm71PN7A.js");return{diagram:e}},__vite__mapDeps([29,6,7,8,9,30,31,32,10,11,12,13,14]));return{id:s3,diagram:t}},"loader"),MJ={id:s3,detector:LJ,loader:OJ},RJ=MJ,o3="info",PJ=_(t=>/^\s*info/.test(t),"detector"),DJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DeSIO2OJ.js");return{diagram:e}},__vite__mapDeps([33,28,7,2,4,5,6,8,9,10,11,12,13,14]));return{id:o3,diagram:t}},"loader"),BJ={id:o3,detector:PJ,loader:DJ},l3="pie",FJ=_(t=>/^\s*pie/.test(t),"detector"),HJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-BxeSLKAr.js");return{diagram:e}},__vite__mapDeps([34,26,28,7,2,4,5,35,36,31,6,8,9,10,11,12,13,14]));return{id:l3,diagram:t}},"loader"),qJ={id:l3,detector:FJ,loader:HJ},c3="quadrantChart",$J=_(t=>/^\s*quadrantChart/.test(t),"detector"),zJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DtIu2zzu.js");return{diagram:e}},__vite__mapDeps([37,30,31,32,6,7,8,9,10,11,12,13,14]));return{id:c3,diagram:t}},"loader"),WJ={id:c3,detector:$J,loader:zJ},UJ=WJ,h3="xychart",VJ=_(t=>/^\s*xychart(-beta)?/.test(t),"detector"),YJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-Wra8nRSA.js");return{diagram:e}},__vite__mapDeps([38,31,36,30,32,6,7,8,9,10,11,12,13,14]));return{id:h3,diagram:t}},"loader"),GJ={id:h3,detector:VJ,loader:YJ},XJ=GJ,u3="requirement",JJ=_(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),QJ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CFfuKSzf.js");return{diagram:e}},__vite__mapDeps([39,21,22,6,7,8,9,10,11,12,13,14]));return{id:u3,diagram:t}},"loader"),KJ={id:u3,detector:JJ,loader:QJ},ZJ=KJ,d3="sequence",eQ=_(t=>/^\s*sequenceDiagram/.test(t),"detector"),tQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CWNXsusu.js");return{diagram:e}},__vite__mapDeps([40,18,27,6,7,8,9,10,11,12,13,14]));return{id:d3,diagram:t}},"loader"),nQ={id:d3,detector:eQ,loader:tQ},iQ=nQ,m3="class",aQ=_((t,e)=>e?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t),"detector"),rQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DspqXAEt.js");return{diagram:e}},__vite__mapDeps([41,42,20,21,22,6,7,8,9,10,11,12,13,14]));return{id:m3,diagram:t}},"loader"),sQ={id:m3,detector:aQ,loader:rQ},oQ=sQ,f3="classDiagram",lQ=_((t,e)=>/^\s*classDiagram/.test(t)&&e?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t),"detector"),cQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CjBeYOj8.js");return{diagram:e}},__vite__mapDeps([43,42,20,21,22,6,7,8,9,10,11,12,13,14]));return{id:f3,diagram:t}},"loader"),hQ={id:f3,detector:lQ,loader:cQ},uQ=hQ,p3="state",dQ=_((t,e)=>e?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t),"detector"),mQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-cvjx2jc8.js");return{diagram:e}},__vite__mapDeps([44,45,21,22,1,2,3,4,6,7,8,9,10,11,12,13,14]));return{id:p3,diagram:t}},"loader"),fQ={id:p3,detector:dQ,loader:mQ},pQ=fQ,g3="stateDiagram",gQ=_((t,e)=>!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&e?.state?.defaultRenderer==="dagre-wrapper"),"detector"),xQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-GL3iJ2DX.js");return{diagram:e}},__vite__mapDeps([46,45,21,22,6,7,8,9,10,11,12,13,14]));return{id:g3,diagram:t}},"loader"),yQ={id:g3,detector:gQ,loader:xQ},bQ=yQ,x3="journey",wQ=_(t=>/^\s*journey/.test(t),"detector"),_Q=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DyhEjYZt.js");return{diagram:e}},__vite__mapDeps([47,18,20,35,6,7,8,9,10,11,12,13,14]));return{id:x3,diagram:t}},"loader"),vQ={id:x3,detector:wQ,loader:_Q},jQ=vQ,TQ=_((t,e,n)=>{te.debug(`rendering svg for syntax error
`);const a=e7(e),r=a.append("g");a.attr("viewBox","0 0 2412 512"),WE(a,100,512,!0),r.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),r.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),r.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),r.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),r.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),r.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),r.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),r.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw"),y3={draw:TQ},kQ=y3,EQ={db:{},renderer:y3,parser:{parse:_(()=>{},"parse")}},SQ=EQ,b3="flowchart-elk",CQ=_((t,e={})=>/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&e?.flowchart?.defaultRenderer==="elk"?(e.layout="elk",!0):!1,"detector"),AQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-AVsbg-Kq.js");return{diagram:e}},__vite__mapDeps([19,20,21,22,23,6,7,8,9,10,11,12,13,14]));return{id:b3,diagram:t}},"loader"),NQ={id:b3,detector:CQ,loader:AQ},IQ=NQ,w3="timeline",LQ=_(t=>/^\s*timeline/.test(t),"detector"),OQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DSsyDc_j.js");return{diagram:e}},__vite__mapDeps([48,35,6,7,8,9,10,11,12,13,14]));return{id:w3,diagram:t}},"loader"),MQ={id:w3,detector:LQ,loader:OQ},RQ=MQ,_3="mindmap",PQ=_(t=>/^\s*mindmap/.test(t),"detector"),DQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-D6Tt3MC8.js");return{diagram:e}},__vite__mapDeps([49,21,22,6,7,8,9,10,11,12,13,14]));return{id:_3,diagram:t}},"loader"),BQ={id:_3,detector:PQ,loader:DQ},FQ=BQ,v3="kanban",HQ=_(t=>/^\s*kanban/.test(t),"detector"),qQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-A-tfs8zk.js");return{diagram:e}},__vite__mapDeps([50,20,6,7,8,9,10,11,12,13,14]));return{id:v3,diagram:t}},"loader"),$Q={id:v3,detector:HQ,loader:qQ},zQ=$Q,j3="sankey",WQ=_(t=>/^\s*sankey(-beta)?/.test(t),"detector"),UQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CNdM3-zn.js");return{diagram:e}},__vite__mapDeps([51,36,31,6,7,8,9,10,11,12,13,14]));return{id:j3,diagram:t}},"loader"),VQ={id:j3,detector:WQ,loader:UQ},YQ=VQ,T3="packet",GQ=_(t=>/^\s*packet(-beta)?/.test(t),"detector"),XQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-Cg40SIdA.js");return{diagram:e}},__vite__mapDeps([52,26,28,7,2,4,5,6,8,9,10,11,12,13,14]));return{id:T3,diagram:t}},"loader"),JQ={id:T3,detector:GQ,loader:XQ},k3="radar",QQ=_(t=>/^\s*radar-beta/.test(t),"detector"),KQ=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DY96Auqz.js");return{diagram:e}},__vite__mapDeps([53,26,28,7,2,4,5,6,8,9,10,11,12,13,14]));return{id:k3,diagram:t}},"loader"),ZQ={id:k3,detector:QQ,loader:KQ},E3="block",eK=_(t=>/^\s*block(-beta)?/.test(t),"detector"),tK=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-10lgrGVy.js");return{diagram:e}},__vite__mapDeps([54,20,5,2,1,23,6,7,8,9,10,11,12,13,14]));return{id:E3,diagram:t}},"loader"),nK={id:E3,detector:eK,loader:tK},iK=nK,S3="architecture",aK=_(t=>/^\s*architecture/.test(t),"detector"),rK=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-CyRG3YuH.js");return{diagram:e}},__vite__mapDeps([55,26,28,7,2,4,5,16,6,8,9,10,11,12,13,14]));return{id:S3,diagram:t}},"loader"),sK={id:S3,detector:aK,loader:rK},oK=sK,C3="treemap",lK=_(t=>/^\s*treemap/.test(t),"detector"),cK=_(async()=>{const{diagram:t}=await oe(async()=>{const{diagram:e}=await import("./chunk-DYmAkUUv.js");return{diagram:e}},__vite__mapDeps([56,22,26,28,7,2,4,5,32,36,31,6,8,9,10,11,12,13,14]));return{id:C3,diagram:t}},"loader"),hK={id:C3,detector:lK,loader:cK},Kw=!1,Ku=_(()=>{Kw||(Kw=!0,kh("error",SQ,t=>t.toLowerCase().trim()==="error"),kh("---",{db:{clear:_(()=>{},"clear")},styles:{},renderer:{draw:_(()=>{},"draw")},parser:{parse:_(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:_(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),rp(IQ,FQ,oK),rp(pJ,zQ,uQ,oQ,SJ,RJ,BJ,qJ,ZJ,iQ,jJ,bJ,RQ,IJ,bQ,pQ,jQ,UJ,YQ,JQ,XJ,iK,ZQ,hK))},"addDiagrams"),uK=_(async()=>{te.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(vr).map(async([n,{detector:a,loader:r}])=>{if(r)try{cp(n)}catch{try{const{diagram:s,id:o}=await r();kh(o,s,a)}catch(s){throw te.error(`Failed to load external diagram with key ${n}. Removing from detectors.`),delete vr[n],s}}}))).filter(n=>n.status==="rejected");if(e.length>0){te.error(`Failed to load ${e.length} external diagrams`);for(const n of e)te.error(n);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),dK="graphics-document document";function A3(t,e){t.attr("role",dK),e!==""&&t.attr("aria-roledescription",e)}_(A3,"setA11yDiagramInfo");function N3(t,e,n,a){if(t.insert!==void 0){if(n){const r=`chart-desc-${a}`;t.attr("aria-describedby",r),t.insert("desc",":first-child").attr("id",r).text(n)}if(e){const r=`chart-title-${a}`;t.attr("aria-labelledby",r),t.insert("title",":first-child").attr("id",r).text(e)}}}_(N3,"addSVGa11yTitleDescription");var wr,Zp=(wr=class{constructor(e,n,a,r,s){this.type=e,this.text=n,this.db=a,this.parser=r,this.renderer=s}static async fromText(e,n={}){const a=en(),r=$g(e,a);e=sY(e)+`
`;try{cp(r)}catch{const h=NH(r);if(!h)throw new LE(`Diagram ${r} not found.`);const{id:u,diagram:d}=await h();kh(u,d)}const{db:s,parser:o,renderer:l,init:c}=cp(r);return o.parser&&(o.parser.yy=s),s.clear?.(),c?.(a),n.title&&s.setDiagramTitle?.(n.title),await o.parse(e),new wr(r,e,s,o,l)}async render(e,n){await this.renderer.draw(this.text,e,n,this)}getParser(){return this.parser}getType(){return this.type}},_(wr,"Diagram"),wr),Zw=[],mK=_(()=>{Zw.forEach(t=>{t()}),Zw=[]},"attachFunctions"),fK=_(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function I3(t){const e=t.match(IE);if(!e)return{text:t,metadata:{}};let n=oW(e[1],{schema:sW})??{};n=typeof n=="object"&&!Array.isArray(n)?n:{};const a={};return n.displayMode&&(a.displayMode=n.displayMode.toString()),n.title&&(a.title=n.title.toString()),n.config&&(a.config=n.config),{text:t.slice(e[0].length),metadata:a}}_(I3,"extractFrontMatter");var pK=_(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,n,a)=>"<"+n+a.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),gK=_(t=>{const{text:e,metadata:n}=I3(t),{displayMode:a,title:r,config:s={}}=n;return a&&(s.gantt||(s.gantt={}),s.gantt.displayMode=a),{title:r,config:s,text:e}},"processFrontmatter"),xK=_(t=>{const e=pi.detectInit(t)??{},n=pi.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some(({type:a})=>a==="wrap"):n?.type==="wrap"&&(e.wrap=!0),{text:YV(t),directive:e}},"processDirectives");function qx(t){const e=pK(t),n=gK(e),a=xK(n.text),r=Tx(n.config,a.directive);return t=fK(a.text),{code:t,title:n.title,config:r}}_(qx,"preprocessDiagram");function L3(t){const e=new TextEncoder().encode(t),n=Array.from(e,a=>String.fromCodePoint(a)).join("");return btoa(n)}_(L3,"toBase64");var yK=5e4,bK="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",wK="sandbox",_K="loose",vK="http://www.w3.org/2000/svg",jK="http://www.w3.org/1999/xlink",TK="http://www.w3.org/1999/xhtml",kK="100%",EK="100%",SK="border:0;margin:0;",CK="margin:0",AK="allow-top-navigation-by-user-activation allow-popups",NK='The "iframe" tag is not supported by your browser.',IK=["foreignobject"],LK=["dominant-baseline"];function $x(t){const e=qx(t);return jh(),VH(e.config??{}),e}_($x,"processAndSetConfigs");async function O3(t,e){Ku();try{const{code:n,config:a}=$x(t);return{diagramType:(await R3(n)).type,config:a}}catch(n){if(e?.suppressErrors)return!1;throw n}}_(O3,"parse");var e_=_((t,e,n=[])=>`
.${t} ${e} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),OK=_((t,e=new Map)=>{let n="";if(t.themeCSS!==void 0&&(n+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(n+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(n+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const o=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(l=>{Qw(l.styles)||o.forEach(c=>{n+=e_(l.id,c,l.styles)}),Qw(l.textStyles)||(n+=e_(l.id,"tspan",(l?.textStyles||[]).map(c=>c.replace("color","fill"))))})}return n},"createCssStyles"),MK=_((t,e,n,a)=>{const r=OK(t,n),s=dq(e,r,t.themeVariables);return Gp(XX(`${a}{${s}}`),QX)},"createUserStyles"),RK=_((t="",e,n)=>{let a=t;return!n&&!e&&(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=Br(a),a=a.replace(/<br>/g,"<br/>"),a},"cleanUpSvgCode"),PK=_((t="",e)=>{const n=e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":EK,a=L3(`<body style="${CK}">${t}</body>`);return`<iframe style="width:${kK};height:${n};${SK}" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="${AK}">
  ${NK}
</iframe>`},"putIntoIFrame"),t_=_((t,e,n,a,r)=>{const s=t.append("div");s.attr("id",n),a&&s.attr("style",a);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",vK);return r&&o.attr("xmlns:xlink",r),o.append("g"),t},"appendDivSvgG");function eg(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}_(eg,"sandboxedIframe");var DK=_((t,e,n,a)=>{t.getElementById(e)?.remove(),t.getElementById(n)?.remove(),t.getElementById(a)?.remove()},"removeExistingElements"),BK=_(async function(t,e,n){Ku();const a=$x(e);e=a.code;const r=en();te.debug(r),e.length>(r?.maxTextSize??yK)&&(e=bK);const s="#"+t,o="i"+t,l="#"+o,c="d"+t,h="#"+c,u=_(()=>{const M=Ye(m?l:h).node();M&&"remove"in M&&M.remove()},"removeTempElements");let d=Ye("body");const m=r.securityLevel===wK,f=r.securityLevel===_K,p=r.fontFamily;if(n!==void 0){if(n&&(n.innerHTML=""),m){const q=eg(Ye(n),o);d=Ye(q.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ye(n);t_(d,t,c,`font-family: ${p}`,jK)}else{if(DK(document,t,c,o),m){const q=eg(Ye("body"),o);d=Ye(q.nodes()[0].contentDocument.body),d.node().style.margin=0}else d=Ye("body");t_(d,t,c)}let g,x;try{g=await Zp.fromText(e,{title:a.title})}catch(q){if(r.suppressErrorRendering)throw u(),q;g=await Zp.fromText("error"),x=q}const b=d.select(h).node(),w=g.type,k=b.firstChild,E=k.firstChild,v=g.renderer.getClasses?.(e,g),S=MK(r,w,v,s),L=document.createElement("style");L.innerHTML=S,k.insertBefore(L,E);try{await g.renderer.draw(e,t,yb.version,g)}catch(q){throw r.suppressErrorRendering?u():kQ.draw(e,t,yb.version),q}const O=d.select(`${h} svg`),P=g.db.getAccTitle?.(),j=g.db.getAccDescription?.();P3(w,O,P,j),d.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",TK);let A=d.select(h).node().innerHTML;if(te.debug("config.arrowMarkerAbsolute",r.arrowMarkerAbsolute),A=RK(A,m,Lt(r.arrowMarkerAbsolute)),m){const q=d.select(h+" svg").node();A=PK(A,q)}else f||(A=_s.sanitize(A,{ADD_TAGS:IK,ADD_ATTR:LK,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(mK(),x)throw x;return u(),{diagramType:w,svg:A,bindFunctions:g.db.bindFunctions}},"render");function M3(t={}){const e=At({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),WH(e),e?.theme&&e.theme in ca?e.themeVariables=ca[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=ca.default.getThemeVariables(e.themeVariables));const n=typeof e=="object"?zH(e):DE();qg(n.logLevel),Ku()}_(M3,"initialize");var R3=_((t,e={})=>{const{code:n}=qx(t);return Zp.fromText(n,e)},"getDiagramFromText");function P3(t,e,n,a){A3(e,t),N3(e,n,a,e.attr("id"))}_(P3,"addA11yInfo");var Cr=Object.freeze({render:BK,parse:O3,getDiagramFromText:R3,initialize:M3,getConfig:en,setConfig:BE,getSiteConfig:DE,updateSiteConfig:UH,reset:_(()=>{jh()},"reset"),globalReset:_(()=>{jh(vs)},"globalReset"),defaultConfig:vs});qg(en().logLevel);jh(en());var FK=_((t,e,n)=>{te.warn(t),jx(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),D3=_(async function(t={querySelector:".mermaid"}){try{await HK(t)}catch(e){if(jx(e)&&te.error(e.str),ma.parseError&&ma.parseError(e),!t.suppressErrors)throw te.error("Use the suppressErrors option to suppress these errors"),e}},"run"),HK=_(async function({postRenderCallback:t,querySelector:e,nodes:n}={querySelector:".mermaid"}){const a=Cr.getConfig();te.debug(`${t?"":"No "}Callback function found`);let r;if(n)r=n;else if(e)r=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");te.debug(`Found ${r.length} diagrams`),a?.startOnLoad!==void 0&&(te.debug("Start On Load: "+a?.startOnLoad),Cr.updateSiteConfig({startOnLoad:a?.startOnLoad}));const s=new pi.InitIDGenerator(a.deterministicIds,a.deterministicIDSeed);let o;const l=[];for(const c of Array.from(r)){if(te.info("Rendering diagram: "+c.id),c.getAttribute("data-processed"))continue;c.setAttribute("data-processed","true");const h=`mermaid-${s.next()}`;o=c.innerHTML,o=aN(pi.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=pi.detectInit(o);u&&te.debug("Detected early reinit: ",u);try{const{svg:d,bindFunctions:m}=await q3(h,o,c);c.innerHTML=d,t&&await t(h),m&&m(c)}catch(d){FK(d,l,ma.parseError)}}if(l.length>0)throw l[0]},"runThrowsErrors"),B3=_(function(t){Cr.initialize(t)},"initialize"),qK=_(async function(t,e,n){te.warn("mermaid.init is deprecated. Please use run instead."),t&&B3(t);const a={postRenderCallback:n,querySelector:".mermaid"};typeof e=="string"?a.querySelector=e:e&&(e instanceof HTMLElement?a.nodes=[e]:a.nodes=e),await D3(a)},"init"),$K=_(async(t,{lazyLoad:e=!0}={})=>{Ku(),rp(...t),e===!1&&await uK()},"registerExternalDiagrams"),F3=_(function(){if(ma.startOnLoad){const{startOnLoad:t}=Cr.getConfig();t&&ma.run().catch(e=>te.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",F3,!1);var zK=_(function(t){ma.parseError=t},"setParseErrorHandler"),nu=[],hm=!1,H3=_(async()=>{if(!hm){for(hm=!0;nu.length>0;){const t=nu.shift();if(t)try{await t()}catch(e){te.error("Error executing queue",e)}}hm=!1}},"executeQueue"),WK=_(async(t,e)=>new Promise((n,a)=>{const r=_(()=>new Promise((s,o)=>{Cr.parse(t,e).then(l=>{s(l),n(l)},l=>{te.error("Error parsing",l),ma.parseError?.(l),o(l),a(l)})}),"performCall");nu.push(r),H3().catch(a)}),"parse"),q3=_((t,e,n)=>new Promise((a,r)=>{const s=_(()=>new Promise((o,l)=>{Cr.render(t,e,n).then(c=>{o(c),a(c)},c=>{te.error("Error parsing",c),ma.parseError?.(c),l(c),r(c)})}),"performCall");nu.push(s),H3().catch(r)}),"render"),UK=_(()=>Object.keys(vr).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),ma={startOnLoad:!0,mermaidAPI:Cr,parse:WK,render:q3,init:qK,run:D3,registerExternalDiagrams:$K,registerLayoutLoaders:GI,initialize:B3,parseError:void 0,contentLoaded:F3,setParseErrorHandler:zK,detectType:$g,registerIconPacks:fG,getRegisteredDiagramsMetadata:UK},n_=ma;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const tg=({definition:t,title:e,className:n,config:a={}})=>{const r=pe.useRef(null);return pe.useEffect(()=>{(async()=>{if(r.current)try{const o={startOnLoad:!1,theme:"default",securityLevel:"loose"};n_.initialize({...o,...a});const l=`mermaid-diagram-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,{svg:c}=await n_.render(l,t);r.current&&(r.current.innerHTML=c)}catch(o){console.error("Error rendering Mermaid diagram:",o),r.current&&(r.current.innerHTML="<div>Diagram konnte nicht gerendert werden.</div>")}})()},[t,a]),i.jsxs("div",{className:`${V({margin:"20px 0",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",textAlign:"center"})} ${n||""}`,children:[i.jsx("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"16px",color:"#374151"}),children:e}),i.jsx("div",{ref:r,className:V({"& svg":{maxWidth:"100%",height:"auto"}})})]})},VK=`sequenceDiagram
    Actor Alice as Alice
    participant Contract as Smart Contract
    participant AIService as AI Service
    participant BatchCoord as Batch Coordinator
    participant Settlement as Settlement Layer

    Note over Alice,Contract: Phase 1: Setup - Prepaid Deposit
    Alice->>Contract: Deposit ETH for AI usage
    Contract->>Contract: Update user balance

    Note over Alice,Settlement: Phase 2: Usage - Instant AI Interactions
    Alice->>AIService: Request: "Analyze sentiment"
    AIService->>Contract: Validate sufficient balance
    AIService->>AIService: Process with LLM API
    AIService-->>Alice: Instant AI response
    AIService->>BatchCoord: Queue request for batching

    Note over BatchCoord,Settlement: Phase 3: Settlement - Efficient Batch Processing
    BatchCoord->>BatchCoord: Build Merkle tree from queued requests
    BatchCoord->>Contract: Process batch settlement
    Contract->>Contract: Verify proofs and deduct costs
    Contract->>Settlement: Single efficient transaction
    Settlement-->>Alice: Settlement confirmation`,YK={title:"My AI Assistant That Takes ETH Instead of Subscriptions",publishing_date:"2025-08-28",tokenID:41,category:"blockchain",secondaryCategory:"ai",description:"I build an AI assistant that accepts Ethereum payments instead of subscriptions. Discover how Merkle batching enables efficient prepaid AI with instant responses."};function GK(){return i.jsxs("article",{children:[i.jsxs("section",{children:[i.jsx("p",{children:"While working on some DeFi projects, something felt strange: I kept paying Copilot with my credit card while having ETH sitting in my wallet. I could instantly swap tokens without an creepy KYC, but AI services still require an email verification and monthly subscriptions. So I started wondering - what would an AI that accepts crypto payments actually look like?"}),i.jsxs("p",{children:[i.jsx("strong",{children:"My initial answer is now live:"})," ",i.jsx("a",{href:"/assistent",className:V({fontWeight:"bold",color:"indigo.600",_hover:{color:"indigo.700"}}),children:"Feel free to try my AI assistant"})," ","- you connect your wallet, deposit ETH, and chat with an LLM. No subscriptions, no accounts, no data weird harvesting. And you just pay for exactly what you use."]}),i.jsx("p",{children:"In this post, I'll walk you through the technical implementation - from smart contract architecture to serverless functions - showing my approach to the crypto-native AI problem."}),i.jsxs("div",{className:V({bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",p:"md",my:"md"}),children:[i.jsx("h3",{className:V({margin:"0 0 {spacing.3} 0"}),children:"Working Proof-of-Concept"}),i.jsx("p",{className:V({margin:"0 0 {spacing.3} 0"}),children:"This is a functional implementation that demonstrates crypto-native AI payments in production. While fully operational, it's in active development with significant opportunities for optimization and community contributions."}),i.jsxs("p",{className:V({margin:"0"}),children:[i.jsx("strong",{children:"Your input shapes this project:"})," Cost optimizations, UX improvements, and feature requests directly influence the development roadmap."]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"Building on Previous Blockchain-AI Experience"}),i.jsxs("p",{children:["I previously built an ",i.jsx("a",{href:"/blog/9",children:"AI image generator with blockchain payments"}),', proving that crypto-native AI services can work. But LLMs present fundamentally different challenges: users expect multiple requests per session, instant responses, and variable costs per interaction. The traditional "one transaction per request" model becomes prohibitively expensive and cumbersome.']}),i.jsx("p",{children:"For my LLM assistant, I needed to solve three key problems: how to batch multiple requests efficiently, how to maintain instant response times, and how to keep transaction costs reasonable. The solution required rethinking the entire payment architecture around prepaid balances and batch settlement."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"LLM System Architecture"}),i.jsxs("p",{children:["After evaluating different approaches, Merkle tree batching emerged as the optimal solution - providing cryptographic proof of each interaction while enabling efficient batch processing. This approach balances the competing demands of user experience, cost efficiency, and technical simplicity. I explored this technique in detail in my ",i.jsx("a",{href:"/blog/15",children:"previous post on Merkle tree fundamentals"}),". While that post covered the mathematical foundations, here we'll focus on the practical implementation for real-time AI services."]}),i.jsx("p",{children:"The core architectural change is switching from immediate settlement to a prepaid model with batch processing. Users deposit funds upfront, enabling instant LLM responses while deferring blockchain costs until batch settlement. This creates a trustless system where:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"User deposits $50 → Guaranteed $50 available"}),i.jsx("li",{children:"LLM requests consume balance → No payment risk"}),i.jsx("li",{children:"Batch settlement → Efficient blockchain transactions"}),i.jsx("li",{children:"Refunds possible → User controls remaining balance"})]}),i.jsx("p",{children:"This prepaid model fundamentally changes the user experience compared to traditional per-transaction payments. The workflow below demonstrates how Alice interacts with the system, showing each phase where these benefits become tangible:"}),i.jsx(tg,{definition:VK,title:"Simplified User Journey: Prepaid AI with Batch Settlement",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),i.jsx("h3",{children:"System Data Flow"}),i.jsx("p",{children:"The diagram above illustrates the simplified system architecture with three distinct phases: Setup (deposit), Usage (instant AI interactions), and Settlement (efficient batch processing). Each phase optimizes for different goals - user experience, response speed, and cost efficiency."}),i.jsx("h3",{children:"Core Components"}),i.jsx("p",{children:"Our LLM system consists of three main components working together to enable instant responses with efficient blockchain settlement:"}),i.jsx("h4",{children:"Smart Contract - LLMv1.sol"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Purpose:"})," Manages user deposits, tracks balances, and processes Merkle tree batches for settlement. Built as an upgradeable contract using"," ",i.jsx("a",{href:"https://docs.openzeppelin.com/upgrades-plugins/1.x/proxies#uups",target:"_blank",rel:"noopener noreferrer",children:"OpenZeppelin's UUPS pattern"}),"."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Core Functions:"})," Accept ETH deposits, track user balances, verify Merkle proofs for batch settlement, and enable fund withdrawals."]}),i.jsx("h4",{children:"AI Service (sc_llm.js)"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Purpose:"})," Orchestrates the entire LLM request flow - from balance validation to LLM API calls and batch coordination."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Core Functions:"})," Validate user balances, process LLM requests instantly through OpenAI/Anthropic APIs, and coordinate Merkle tree batching when 4 requests accumulate."]}),i.jsx("h4",{children:"Frontend Interface"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Purpose:"})," Provides the user interface for wallet connection, balance management, and chat interaction."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Core Functions:"})," Wallet integration, ETH deposits, real-time chat with LLM, and request history tracking."]}),i.jsx("h3",{children:"Critical Implementation Details"}),i.jsx("p",{children:"The system's efficiency comes from three key design decisions that enable instant responses while maintaining cost efficiency:"}),i.jsx("h4",{children:"Merkle Tree Batching"}),i.jsxs("p",{children:["Using"," ",i.jsx("a",{href:"https://github.com/OpenZeppelin/merkle-tree",target:"_blank",rel:"noopener noreferrer",children:"OpenZeppelin's StandardMerkleTree"})," ","library, multiple AI requests get bundled into single blockchain transactions. This reduces per-request costs by approximately 60% compared to individual transactions while maintaining cryptographic proof of each interaction."]}),i.jsx("h4",{children:"Prepaid Balance Architecture"}),i.jsx("p",{children:"Users deposit ETH once and consume balance through LLM requests without repeated wallet confirmations. This eliminates transaction friction while maintaining full control - unused funds can be withdrawn anytime."}),i.jsx("h4",{children:"Automatic Settlement"}),i.jsxs("p",{children:["The system triggers batch settlement when 4 requests accumulate, balancing real-time settlement with transaction efficiency. Running on"," ",i.jsx("a",{href:"https://docs.optimism.io/get-started/superchain",target:"_blank",rel:"noopener noreferrer",children:"Optimism"}),", this threshold ensures users see balance updates quickly while keeping transaction costs under 1 cent - making micro-payments for AI services economically viable today."]}),i.jsx("h2",{children:"Help Shape This Project"}),i.jsx("p",{children:"As an early-stage implementation, your feedback directly influences development priorities and helps validate the crypto-native AI approach. This is exactly the kind of input that makes the Web3 innovation so attractive to me."}),i.jsxs("div",{className:V({bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"lg",p:"md",my:"md"}),children:[i.jsx("h3",{className:V({margin:"0 0 {spacing.3} 0"}),children:"Critical Feedback Areas"}),i.jsxs("div",{className:V({mb:"3"}),children:[i.jsx("strong",{children:"Economics:"}),i.jsx("span",{className:V({ml:"2"}),children:"What cost structure would make crypto-AI payments compelling vs. traditional subscriptions? How do L2 fees feel in practice?"})]}),i.jsxs("div",{className:V({mb:"3"}),children:[i.jsx("strong",{children:"User Experience:"}),i.jsx("span",{className:V({ml:"2"}),children:"Where does wallet integration feel clunky? What onboarding steps cause confusion? How intuitive is the prepaid balance model?"})]}),i.jsxs("div",{className:V({mb:"3"}),children:[i.jsx("strong",{children:"Technical Features:"}),i.jsx("span",{className:V({ml:"2"}),children:"What AI capabilities would justify blockchain overhead? How could batch settlement be optimized? Should the system support other LLM providers?"})]}),i.jsxs("p",{className:V({margin:"0"}),children:[i.jsx("strong",{children:"Share your thoughts:"})," Comments below or in"," ",i.jsx("a",{href:"https://github.com/fretchen/fretchen.github.io/issues",children:"GitHub issues"})," - help to build a better crypto-native AI infrastructure."]})]}),i.jsx("h2",{children:"What's Next"}),i.jsx("p",{children:"This implementation proves that blockchain-native AI services can deliver both user control and excellent performance. The next steps focus on expanding capabilities and improving accessibility:"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Multiple LLM Support:"})," Integration with Anthropic Claude, local models, and specialized AI services"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Enhanced Batching:"})," Dynamic batch sizes and cross-user optimization for even lower costs"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Account Abstraction Integration:"})," The"," ",i.jsx("a",{href:"https://eip7702.io/",target:"_blank",rel:"noopener noreferrer",children:"EIP-7702 upgrade"})," ","enables smart accounts with native batching capabilities, potentially making the current Merkle tree approach unnecessary while improving UX through gasless interactions"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Easier User Journey:"})," Improved UX to make the system more accessible and intuitive"]})]}),i.jsx("p",{children:"I believe these technologies might enable more user sovereignty over data surveillance. By combining blockchain payments with efficient batching techniques, we can build AI services that respect privacy, provide transparency, and align incentives between users and providers through the settlement layer."})]})]})}const i_=Object.freeze(Object.defineProperty({__proto__:null,default:GK,meta:YK},Symbol.toStringTag,{value:"Module"}));var um={},Ya={},Ga={},dm={},Xa={},si={},Ja={},jo={},a_;function $3(){if(a_)return jo;a_=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.StructError=void 0;class t extends TypeError{constructor(n,a){let r;const{message:s,explanation:o,...l}=n,{path:c}=n,h=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(o??h),o!=null&&(this.cause=h),Object.assign(this,l),this.name=this.constructor.name,this.failures=()=>r??(r=[n,...a()])}}return jo.StructError=t,jo}var Ft={},Ht={},r_;function Zu(){if(r_)return Ht;r_=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.run=Ht.toFailures=Ht.toFailure=Ht.shiftIterator=Ht.print=Ht.isPlainObject=Ht.isObject=void 0;function t(c){return e(c)&&typeof c[Symbol.iterator]=="function"}function e(c){return typeof c=="object"&&c!==null}Ht.isObject=e;function n(c){if(Object.prototype.toString.call(c)!=="[object Object]")return!1;const h=Object.getPrototypeOf(c);return h===null||h===Object.prototype}Ht.isPlainObject=n;function a(c){return typeof c=="symbol"?c.toString():typeof c=="string"?JSON.stringify(c):`${c}`}Ht.print=a;function r(c){const{done:h,value:u}=c.next();return h?void 0:u}Ht.shiftIterator=r;function s(c,h,u,d){if(c===!0)return;c===!1?c={}:typeof c=="string"&&(c={message:c});const{path:m,branch:f}=h,{type:p}=u,{refinement:g,message:x=`Expected a value of type \`${p}\`${g?` with refinement \`${g}\``:""}, but received: \`${a(d)}\``}=c;return{value:d,type:p,refinement:g,key:m[m.length-1],path:m,branch:f,...c,message:x}}Ht.toFailure=s;function*o(c,h,u,d){t(c)||(c=[c]);for(const m of c){const f=s(m,h,u,d);f&&(yield f)}}Ht.toFailures=o;function*l(c,h,u={}){const{path:d=[],branch:m=[c],coerce:f=!1,mask:p=!1}=u,g={path:d,branch:m};if(f&&(c=h.coercer(c,g),p&&h.type!=="type"&&e(h.schema)&&e(c)&&!Array.isArray(c)))for(const b in c)h.schema[b]===void 0&&delete c[b];let x="valid";for(const b of h.validator(c,g))b.explanation=u.message,x="not_valid",yield[b,void 0];for(let[b,w,k]of h.entries(c,g)){const E=l(w,k,{path:b===void 0?d:[...d,b],branch:b===void 0?m:[...m,w],coerce:f,mask:p,message:u.message});for(const v of E)v[0]?(x=v[0].refinement===null||v[0].refinement===void 0?"not_valid":"not_refined",yield[v[0],void 0]):f&&(w=v[1],b===void 0?c=w:c instanceof Map?c.set(b,w):c instanceof Set?c.add(w):e(c)&&(w!==void 0||b in c)&&(c[b]=w))}if(x!=="not_valid")for(const b of h.refiner(c,g))b.explanation=u.message,x="not_refined",yield[b,void 0];x==="valid"&&(yield[void 0,c])}return Ht.run=l,Ht}var s_;function sc(){if(s_)return Ft;s_=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.validate=Ft.is=Ft.mask=Ft.create=Ft.assert=Ft.ExactOptionalStruct=Ft.Struct=void 0;const t=$3(),e=Zu();class n{constructor(d){const{type:m,schema:f,validator:p,refiner:g,coercer:x=w=>w,entries:b=function*(){}}=d;this.type=m,this.schema=f,this.entries=b,this.coercer=x,p?this.validator=(w,k)=>{const E=p(w,k);return(0,e.toFailures)(E,k,this,w)}:this.validator=()=>[],g?this.refiner=(w,k)=>{const E=g(w,k);return(0,e.toFailures)(E,k,this,w)}:this.refiner=()=>[]}assert(d,m){return s(d,this,m)}create(d,m){return o(d,this,m)}is(d){return c(d,this)}mask(d,m){return l(d,this,m)}validate(d,m={}){return h(d,this,m)}}Ft.Struct=n;const a="EXACT_OPTIONAL";class r extends n{constructor(d){super({...d,type:`exact optional ${d.type}`}),this.brand=a}static isExactOptional(d){return(0,e.isObject)(d)&&"brand"in d&&d.brand===a}}Ft.ExactOptionalStruct=r;function s(u,d,m){const f=h(u,d,{message:m});if(f[0])throw f[0]}Ft.assert=s;function o(u,d,m){const f=h(u,d,{coerce:!0,message:m});if(f[0])throw f[0];return f[1]}Ft.create=o;function l(u,d,m){const f=h(u,d,{coerce:!0,mask:!0,message:m});if(f[0])throw f[0];return f[1]}Ft.mask=l;function c(u,d){return!h(u,d)[0]}Ft.is=c;function h(u,d,m={}){const f=(0,e.run)(u,d,m),p=(0,e.shiftIterator)(f);return p[0]?[new t.StructError(p[0],function*(){for(const b of f)b[0]&&(yield b[0])}),void 0]:[void 0,p[1]]}return Ft.validate=h,Ft}var Gi={},Te={},Ct={},o_;function z3(){if(o_)return Ct;o_=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.pick=Ct.partial=Ct.omit=Ct.lazy=Ct.dynamic=Ct.deprecated=Ct.define=Ct.assign=void 0;const t=sc(),e=zx();function n(...u){const d=u[0]?.type==="type",m=u.map(({schema:p})=>p),f=Object.assign({},...m);return d?(0,e.type)(f):(0,e.object)(f)}Ct.assign=n;function a(u,d){return new t.Struct({type:u,schema:null,validator:d})}Ct.define=a;function r(u,d){return new t.Struct({...u,refiner:(m,f)=>m===void 0||u.refiner(m,f),validator(m,f){return m===void 0?!0:(d(m,f),u.validator(m,f))}})}Ct.deprecated=r;function s(u){return new t.Struct({type:"dynamic",schema:null,*entries(d,m){yield*u(d,m).entries(d,m)},validator(d,m){return u(d,m).validator(d,m)},coercer(d,m){return u(d,m).coercer(d,m)},refiner(d,m){return u(d,m).refiner(d,m)}})}Ct.dynamic=s;function o(u){let d;return new t.Struct({type:"lazy",schema:null,*entries(m,f){d??(d=u()),yield*d.entries(m,f)},validator(m,f){return d??(d=u()),d.validator(m,f)},coercer(m,f){return d??(d=u()),d.coercer(m,f)},refiner(m,f){return d??(d=u()),d.refiner(m,f)}})}Ct.lazy=o;function l(u,d){const{schema:m}=u,f={...m};for(const p of d)delete f[p];switch(u.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}Ct.omit=l;function c(u){const d=u instanceof t.Struct,m=d?{...u.schema}:{...u};for(const f in m)m[f]=(0,e.optional)(m[f]);return d&&u.type==="type"?(0,e.type)(m):(0,e.object)(m)}Ct.partial=c;function h(u,d){const{schema:m}=u,f={};for(const p of d)f[p]=m[p];switch(u.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}return Ct.pick=h,Ct}var l_;function zx(){if(l_)return Te;l_=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.unknown=Te.union=Te.type=Te.tuple=Te.string=Te.set=Te.regexp=Te.record=Te.exactOptional=Te.optional=Te.object=Te.number=Te.nullable=Te.never=Te.map=Te.literal=Te.intersection=Te.integer=Te.instance=Te.func=Te.enums=Te.date=Te.boolean=Te.bigint=Te.array=Te.any=void 0;const t=sc(),e=Zu(),n=z3();function a(){return(0,n.define)("any",()=>!0)}Te.any=a;function r(M){return new t.Struct({type:"array",schema:M,*entries(C){if(M&&Array.isArray(C))for(const[N,R]of C.entries())yield[N,R,M]},coercer(C){return Array.isArray(C)?C.slice():C},validator(C){return Array.isArray(C)||`Expected an array value, but received: ${(0,e.print)(C)}`}})}Te.array=r;function s(){return(0,n.define)("bigint",M=>typeof M=="bigint")}Te.bigint=s;function o(){return(0,n.define)("boolean",M=>typeof M=="boolean")}Te.boolean=o;function l(){return(0,n.define)("date",M=>M instanceof Date&&!isNaN(M.getTime())||`Expected a valid \`Date\` object, but received: ${(0,e.print)(M)}`)}Te.date=l;function c(M){const C={},N=M.map(R=>(0,e.print)(R)).join();for(const R of M)C[R]=R;return new t.Struct({type:"enums",schema:C,validator(R){return M.includes(R)||`Expected one of \`${N}\`, but received: ${(0,e.print)(R)}`}})}Te.enums=c;function h(){return(0,n.define)("func",M=>typeof M=="function"||`Expected a function, but received: ${(0,e.print)(M)}`)}Te.func=h;function u(M){return(0,n.define)("instance",C=>C instanceof M||`Expected a \`${M.name}\` instance, but received: ${(0,e.print)(C)}`)}Te.instance=u;function d(){return(0,n.define)("integer",M=>typeof M=="number"&&!isNaN(M)&&Number.isInteger(M)||`Expected an integer, but received: ${(0,e.print)(M)}`)}Te.integer=d;function m(M){return new t.Struct({type:"intersection",schema:null,*entries(C,N){for(const{entries:R}of M)yield*R(C,N)},*validator(C,N){for(const{validator:R}of M)yield*R(C,N)},*refiner(C,N){for(const{refiner:R}of M)yield*R(C,N)}})}Te.intersection=m;function f(M){const C=(0,e.print)(M),N=typeof M;return new t.Struct({type:"literal",schema:N==="string"||N==="number"||N==="boolean"?M:null,validator(R){return R===M||`Expected the literal \`${C}\`, but received: ${(0,e.print)(R)}`}})}Te.literal=f;function p(M,C){return new t.Struct({type:"map",schema:null,*entries(N){if(M&&C&&N instanceof Map)for(const[R,$]of N.entries())yield[R,R,M],yield[R,$,C]},coercer(N){return N instanceof Map?new Map(N):N},validator(N){return N instanceof Map||`Expected a \`Map\` object, but received: ${(0,e.print)(N)}`}})}Te.map=p;function g(){return(0,n.define)("never",()=>!1)}Te.never=g;function x(M){return new t.Struct({...M,validator:(C,N)=>C===null||M.validator(C,N),refiner:(C,N)=>C===null||M.refiner(C,N)})}Te.nullable=x;function b(){return(0,n.define)("number",M=>typeof M=="number"&&!isNaN(M)||`Expected a number, but received: ${(0,e.print)(M)}`)}Te.number=b;function w(M){const C=M?Object.keys(M):[],N=g();return new t.Struct({type:"object",schema:M??null,*entries(R){if(M&&(0,e.isObject)(R)){const $=new Set(Object.keys(R));for(const U of C){$.delete(U);const B=M[U];t.ExactOptionalStruct.isExactOptional(B)&&!Object.prototype.hasOwnProperty.call(R,U)||(yield[U,R[U],M[U]])}for(const U of $)yield[U,R[U],N]}},validator(R){return(0,e.isObject)(R)||`Expected an object, but received: ${(0,e.print)(R)}`},coercer(R){return(0,e.isObject)(R)?{...R}:R}})}Te.object=w;function k(M){return new t.Struct({...M,validator:(C,N)=>C===void 0||M.validator(C,N),refiner:(C,N)=>C===void 0||M.refiner(C,N)})}Te.optional=k;function E(M){return new t.ExactOptionalStruct(M)}Te.exactOptional=E;function v(M,C){return new t.Struct({type:"record",schema:null,*entries(N){if((0,e.isObject)(N))for(const R in N){const $=N[R];yield[R,R,M],yield[R,$,C]}},validator(N){return(0,e.isObject)(N)||`Expected an object, but received: ${(0,e.print)(N)}`}})}Te.record=v;function S(){return(0,n.define)("regexp",M=>M instanceof RegExp)}Te.regexp=S;function L(M){return new t.Struct({type:"set",schema:null,*entries(C){if(M&&C instanceof Set)for(const N of C)yield[N,N,M]},coercer(C){return C instanceof Set?new Set(C):C},validator(C){return C instanceof Set||`Expected a \`Set\` object, but received: ${(0,e.print)(C)}`}})}Te.set=L;function O(){return(0,n.define)("string",M=>typeof M=="string"||`Expected a string, but received: ${(0,e.print)(M)}`)}Te.string=O;function P(M){const C=g();return new t.Struct({type:"tuple",schema:null,*entries(N){if(Array.isArray(N)){const R=Math.max(M.length,N.length);for(let $=0;$<R;$++)yield[$,N[$],M[$]||C]}},validator(N){return Array.isArray(N)||`Expected an array, but received: ${(0,e.print)(N)}`}})}Te.tuple=P;function j(M){const C=Object.keys(M);return new t.Struct({type:"type",schema:M,*entries(N){if((0,e.isObject)(N))for(const R of C)yield[R,N[R],M[R]]},validator(N){return(0,e.isObject)(N)||`Expected an object, but received: ${(0,e.print)(N)}`},coercer(N){return(0,e.isObject)(N)?{...N}:N}})}Te.type=j;function A(M){const C=M.map(N=>N.type).join(" | ");return new t.Struct({type:"union",schema:null,coercer(N){for(const R of M){const[$,U]=R.validate(N,{coerce:!0});if(!$)return U}return N},validator(N,R){const $=[];for(const U of M){const[...B]=(0,e.run)(N,U,R),[T]=B;if(!T?.[0])return[];for(const[Y]of B)Y&&$.push(Y)}return[`Expected the value to satisfy a union of \`${C}\`, but received: ${(0,e.print)(N)}`,...$]}})}Te.union=A;function q(){return(0,n.define)("unknown",()=>!0)}return Te.unknown=q,Te}var c_;function XK(){if(c_)return Gi;c_=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.trimmed=Gi.defaulted=Gi.coerce=void 0;const t=sc(),e=Zu(),n=zx();function a(o,l,c){return new t.Struct({...o,coercer:(h,u)=>(0,t.is)(h,l)?o.coercer(c(h,u),u):o.coercer(h,u)})}Gi.coerce=a;function r(o,l,c={}){return a(o,(0,n.unknown)(),h=>{const u=typeof l=="function"?l():l;if(h===void 0)return u;if(!c.strict&&(0,e.isPlainObject)(h)&&(0,e.isPlainObject)(u)){const d={...h};let m=!1;for(const f in u)d[f]===void 0&&(d[f]=u[f],m=!0);if(m)return d}return h})}Gi.defaulted=r;function s(o){return a(o,(0,n.string)(),l=>l.trim())}return Gi.trimmed=s,Gi}var qt={},h_;function JK(){if(h_)return qt;h_=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.refine=qt.size=qt.pattern=qt.nonempty=qt.min=qt.max=qt.empty=void 0;const t=sc(),e=Zu();function n(u){return h(u,"empty",d=>{const m=a(d);return m===0||`Expected an empty ${u.type} but received one with a size of \`${m}\``})}qt.empty=n;function a(u){return u instanceof Map||u instanceof Set?u.size:u.length}function r(u,d,m={}){const{exclusive:f}=m;return h(u,"max",p=>f?p<d:p<=d||`Expected a ${u.type} less than ${f?"":"or equal to "}${d} but received \`${p}\``)}qt.max=r;function s(u,d,m={}){const{exclusive:f}=m;return h(u,"min",p=>f?p>d:p>=d||`Expected a ${u.type} greater than ${f?"":"or equal to "}${d} but received \`${p}\``)}qt.min=s;function o(u){return h(u,"nonempty",d=>a(d)>0||`Expected a nonempty ${u.type} but received an empty one`)}qt.nonempty=o;function l(u,d){return h(u,"pattern",m=>d.test(m)||`Expected a ${u.type} matching \`/${d.source}/\` but received "${m}"`)}qt.pattern=l;function c(u,d,m=d){const f=`Expected a ${u.type}`,p=d===m?`of \`${d}\``:`between \`${d}\` and \`${m}\``;return h(u,"size",g=>{if(typeof g=="number"||g instanceof Date)return d<=g&&g<=m||`${f} ${p} but received \`${g}\``;if(g instanceof Map||g instanceof Set){const{size:b}=g;return d<=b&&b<=m||`${f} with a size ${p} but received one with a size of \`${b}\``}const{length:x}=g;return d<=x&&x<=m||`${f} with a length ${p} but received one with a length of \`${x}\``})}qt.size=c;function h(u,d,m){return new t.Struct({...u,*refiner(f,p){yield*u.refiner(f,p);const g=m(f,p),x=(0,e.toFailures)(g,p,u,f);for(const b of x)yield{...b,refinement:d}}})}return qt.refine=h,qt}var u_;function $i(){return u_||(u_=1,function(t){var e=Ja&&Ja.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Ja&&Ja.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n($3(),t),n(sc(),t),n(XK(),t),n(JK(),t),n(zx(),t),n(z3(),t)}(Ja)),Ja}var Rn={};class Wx extends Error{constructor(e,{cause:n}={}){super(e),this.name=Wx.name,n&&(this.cause=n),this.message=e}}const QK=Object.freeze(Object.defineProperty({__proto__:null,ErrorWithCause:Wx},Symbol.toStringTag,{value:"Module"})),KK=TT(QK),ZK=(t,e)=>{if(!t||!e||!(t instanceof Error)||!(e.prototype instanceof Error)&&e!==Error)return;const n=new Set;let a=t;for(;a&&!n.has(a);){if(n.add(a),a instanceof e)return a;a=ed(a)}},ed=t=>{if(!(!t||typeof t!="object"||!("cause"in t)))if(typeof t.cause=="function"){const e=t.cause();return e instanceof Error?e:void 0}else return t.cause instanceof Error?t.cause:void 0},W3=(t,e)=>{if(!(t instanceof Error))return"";const n=t.stack||"";if(e.has(t))return n+`
causes have become circular...`;const a=ed(t);return a?(e.add(t),n+`
caused by: `+W3(a,e)):n},eZ=t=>W3(t,new Set),U3=(t,e,n)=>{if(!(t instanceof Error))return"";const a=n?"":t.message||"";if(e.has(t))return a+": ...";const r=ed(t);if(r){e.add(t);const s="cause"in t&&typeof t.cause=="function";return a+(s?"":": ")+U3(r,e,s)}else return a},tZ=t=>U3(t,new Set),nZ=Object.freeze(Object.defineProperty({__proto__:null,findCauseByReference:ZK,getErrorCause:ed,messageWithCauses:tZ,stackWithCauses:eZ},Symbol.toStringTag,{value:"Module"})),iZ=TT(nZ);var mm,d_;function aZ(){if(d_)return mm;d_=1;const{ErrorWithCause:t}=KK,{findCauseByReference:e,getErrorCause:n,messageWithCauses:a,stackWithCauses:r}=iZ;return mm={ErrorWithCause:t,findCauseByReference:e,getErrorCause:n,stackWithCauses:r,messageWithCauses:a},mm}var fm={},m_;function Ux(){return m_||(m_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.getKnownPropertyNames=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(u){return Array.isArray(u)&&u.length>0}t.isNonEmptyArray=e;function n(u){return u==null}t.isNullOrUndefined=n;function a(u){return!!u&&typeof u=="object"&&!Array.isArray(u)}t.isObject=a;const r=(u,d)=>Object.hasOwnProperty.call(u,d);t.hasProperty=r;function s(u){return Object.getOwnPropertyNames(u)}t.getKnownPropertyNames=s,function(u){u[u.Null=4]="Null",u[u.Comma=1]="Comma",u[u.Wrapper=1]="Wrapper",u[u.True=4]="True",u[u.False=5]="False",u[u.Quote=1]="Quote",u[u.Colon=1]="Colon",u[u.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function o(u){if(typeof u!="object"||u===null)return!1;try{let d=u;for(;Object.getPrototypeOf(d)!==null;)d=Object.getPrototypeOf(d);return Object.getPrototypeOf(u)===d}catch{return!1}}t.isPlainObject=o;function l(u){return u.charCodeAt(0)<=127}t.isASCII=l;function c(u){return u.split("").reduce((m,f)=>l(f)?m+1:m+2,0)+(u.match(t.ESCAPE_CHARACTERS_REGEXP)??[]).length}t.calculateStringSize=c;function h(u){return u.toString().length}t.calculateNumberSize=h}(fm)),fm}var f_;function V3(){if(f_)return Rn;f_=1,Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.wrapError=Rn.getErrorMessage=Rn.isErrorWithStack=Rn.isErrorWithMessage=Rn.isErrorWithCode=void 0;const t=aZ(),e=Ux();function n(c){return c instanceof Error||(0,e.isObject)(c)&&c.constructor.name==="Error"}function a(c){return typeof c=="object"&&c!==null&&"code"in c}Rn.isErrorWithCode=a;function r(c){return typeof c=="object"&&c!==null&&"message"in c}Rn.isErrorWithMessage=r;function s(c){return typeof c=="object"&&c!==null&&"stack"in c}Rn.isErrorWithStack=s;function o(c){return r(c)&&typeof c.message=="string"?c.message:(0,e.isNullOrUndefined)(c)?"":String(c)}Rn.getErrorMessage=o;function l(c,h){if(n(c)){let u;return Error.length===2?u=new Error(h,{cause:c}):u=new t.ErrorWithCause(h,{cause:c}),a(c)&&(u.code=c.code),u}return h.length>0?new Error(`${String(c)}: ${h}`):new Error(String(c))}return Rn.wrapError=l,Rn}var p_;function za(){if(p_)return si;p_=1,Object.defineProperty(si,"__esModule",{value:!0}),si.assertExhaustive=si.assertStruct=si.assert=si.AssertionError=void 0;const t=$i(),e=V3();function n(h){return typeof h?.prototype?.constructor?.name=="string"}function a(h){return(0,e.getErrorMessage)(h).replace(/\.$/u,"")}function r(h,u){return n(h)?new h({message:u}):h({message:u})}class s extends Error{constructor(u){super(u.message),this.code="ERR_ASSERTION"}}si.AssertionError=s;function o(h,u="Assertion failed.",d=s){if(!h)throw u instanceof Error?u:r(d,u)}si.assert=o;function l(h,u,d="Assertion failed",m=s){try{(0,t.assert)(h,u)}catch(f){throw r(m,`${d}: ${a(f)}.`)}}si.assertStruct=l;function c(h){throw new Error("Invalid branch reached. Should be detected during compilation.")}return si.assertExhaustive=c,si}var To={},g_;function Y3(){if(g_)return To;g_=1,Object.defineProperty(To,"__esModule",{value:!0}),To.base64=void 0;const t=$i(),e=za(),n=(a,r={})=>{const s=r.paddingRequired??!1,o=r.characterSet??"base64";let l;o==="base64"?l=String.raw`[A-Za-z0-9+\/]`:((0,e.assert)(o==="base64url"),l=String.raw`[-_A-Za-z0-9]`);let c;return s?c=new RegExp(`^(?:${l}{4})*(?:${l}{3}=|${l}{2}==)?$`,"u"):c=new RegExp(`^(?:${l}{4})*(?:${l}{2,3}|${l}{3}=|${l}{2}==)?$`,"u"),(0,t.pattern)(a,c)};return To.base64=n,To}var We={},pm={},x_;function rZ(){return x_||(x_=1,function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;function e(H){return H instanceof Uint8Array||ArrayBuffer.isView(H)&&H.constructor.name==="Uint8Array"}function n(H,...W){if(!e(H))throw new Error("Uint8Array expected");if(W.length>0&&!W.includes(H.length))throw new Error("Uint8Array expected of length "+W+", got length="+H.length)}function a(H,W){return Array.isArray(W)?W.length===0?!0:H?W.every(K=>typeof K=="string"):W.every(K=>Number.isSafeInteger(K)):!1}function r(H){if(typeof H!="function")throw new Error("function expected");return!0}function s(H,W){if(typeof W!="string")throw new Error(`${H}: string expected`);return!0}function o(H){if(!Number.isSafeInteger(H))throw new Error(`invalid integer: ${H}`)}function l(H){if(!Array.isArray(H))throw new Error("array expected")}function c(H,W){if(!a(!0,W))throw new Error(`${H}: array of strings expected`)}function h(H,W){if(!a(!1,W))throw new Error(`${H}: array of numbers expected`)}function u(...H){const W=ue=>ue,K=(ue,Ee)=>Ce=>ue(Ee(Ce)),le=H.map(ue=>ue.encode).reduceRight(K,W),he=H.map(ue=>ue.decode).reduce(K,W);return{encode:le,decode:he}}function d(H){const W=typeof H=="string"?H.split(""):H,K=W.length;c("alphabet",W);const le=new Map(W.map((he,ue)=>[he,ue]));return{encode:he=>(l(he),he.map(ue=>{if(!Number.isSafeInteger(ue)||ue<0||ue>=K)throw new Error(`alphabet.encode: digit index outside alphabet "${ue}". Allowed: ${H}`);return W[ue]})),decode:he=>(l(he),he.map(ue=>{s("alphabet.decode",ue);const Ee=le.get(ue);if(Ee===void 0)throw new Error(`Unknown letter: "${ue}". Allowed: ${H}`);return Ee}))}}function m(H=""){return s("join",H),{encode:W=>(c("join.decode",W),W.join(H)),decode:W=>(s("join.decode",W),W.split(H))}}function f(H,W="="){return o(H),s("padding",W),{encode(K){for(c("padding.encode",K);K.length*H%8;)K.push(W);return K},decode(K){c("padding.decode",K);let le=K.length;if(le*H%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;le>0&&K[le-1]===W;le--)if((le-1)*H%8===0)throw new Error("padding: invalid, string has too much padding");return K.slice(0,le)}}}function p(H){return r(H),{encode:W=>W,decode:W=>H(W)}}function g(H,W,K){if(W<2)throw new Error(`convertRadix: invalid from=${W}, base cannot be less than 2`);if(K<2)throw new Error(`convertRadix: invalid to=${K}, base cannot be less than 2`);if(l(H),!H.length)return[];let le=0;const he=[],ue=Array.from(H,Ce=>{if(o(Ce),Ce<0||Ce>=W)throw new Error(`invalid integer: ${Ce}`);return Ce}),Ee=ue.length;for(;;){let Ce=0,tt=!0;for(let nt=le;nt<Ee;nt++){const Dt=ue[nt],st=W*Ce,at=st+Dt;if(!Number.isSafeInteger(at)||st/W!==Ce||at-Dt!==st)throw new Error("convertRadix: carry overflow");const xt=at/K;Ce=at%K;const vt=Math.floor(xt);if(ue[nt]=vt,!Number.isSafeInteger(vt)||vt*K+Ce!==at)throw new Error("convertRadix: carry overflow");if(tt)vt?tt=!1:le=nt;else continue}if(he.push(Ce),tt)break}for(let Ce=0;Ce<H.length-1&&H[Ce]===0;Ce++)he.push(0);return he.reverse()}const x=(H,W)=>W===0?H:x(W,H%W),b=(H,W)=>H+(W-x(H,W)),w=(()=>{let H=[];for(let W=0;W<40;W++)H.push(2**W);return H})();function k(H,W,K,le){if(l(H),W<=0||W>32)throw new Error(`convertRadix2: wrong from=${W}`);if(K<=0||K>32)throw new Error(`convertRadix2: wrong to=${K}`);if(b(W,K)>32)throw new Error(`convertRadix2: carry overflow from=${W} to=${K} carryBits=${b(W,K)}`);let he=0,ue=0;const Ee=w[W],Ce=w[K]-1,tt=[];for(const nt of H){if(o(nt),nt>=Ee)throw new Error(`convertRadix2: invalid data word=${nt} from=${W}`);if(he=he<<W|nt,ue+W>32)throw new Error(`convertRadix2: carry overflow pos=${ue} from=${W}`);for(ue+=W;ue>=K;ue-=K)tt.push((he>>ue-K&Ce)>>>0);const Dt=w[ue];if(Dt===void 0)throw new Error("invalid carry");he&=Dt-1}if(he=he<<K-ue&Ce,!le&&ue>=W)throw new Error("Excess padding");if(!le&&he>0)throw new Error(`Non-zero padding: ${he}`);return le&&ue>0&&tt.push(he>>>0),tt}function E(H){o(H);const W=2**8;return{encode:K=>{if(!e(K))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(K),W,H)},decode:K=>(h("radix.decode",K),Uint8Array.from(g(K,H,W)))}}function v(H,W=!1){if(o(H),H<=0||H>32)throw new Error("radix2: bits should be in (0..32]");if(b(8,H)>32||b(H,8)>32)throw new Error("radix2: carry overflow");return{encode:K=>{if(!e(K))throw new Error("radix2.encode input should be Uint8Array");return k(Array.from(K),8,H,!W)},decode:K=>(h("radix2.decode",K),Uint8Array.from(k(K,H,8,W)))}}function S(H){return r(H),function(...W){try{return H.apply(null,W)}catch{}}}function L(H,W){return o(H),r(W),{encode(K){if(!e(K))throw new Error("checksum.encode: input should be Uint8Array");const le=W(K).slice(0,H),he=new Uint8Array(K.length+H);return he.set(K),he.set(le,K.length),he},decode(K){if(!e(K))throw new Error("checksum.decode: input should be Uint8Array");const le=K.slice(0,-H),he=K.slice(-H),ue=W(le).slice(0,H);for(let Ee=0;Ee<H;Ee++)if(ue[Ee]!==he[Ee])throw new Error("Invalid checksum");return le}}}t.utils={alphabet:d,chain:u,checksum:L,convertRadix:g,convertRadix2:k,radix:E,radix2:v,join:m,padding:f},t.base16=u(v(4),d("0123456789ABCDEF"),m("")),t.base32=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),m("")),t.base32nopad=u(v(5),d("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),m("")),t.base32hex=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),m("")),t.base32hexnopad=u(v(5),d("0123456789ABCDEFGHIJKLMNOPQRSTUV"),m("")),t.base32crockford=u(v(5),d("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),m(""),p(H=>H.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const O=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",P=(H,W)=>{s("base64",H);const K=W?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,le=W?"base64url":"base64";if(H.length>0&&!K.test(H))throw new Error("invalid base64");return Uint8Array.fromBase64(H,{alphabet:le,lastChunkHandling:"strict"})};t.base64=O?{encode(H){return n(H),H.toBase64()},decode(H){return P(H,!1)}}:u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),m("")),t.base64nopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),m("")),t.base64url=O?{encode(H){return n(H),H.toBase64({alphabet:"base64url"})},decode(H){return P(H,!0)}}:u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),m("")),t.base64urlnopad=u(v(6),d("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),m(""));const j=H=>u(E(58),d(H),m(""));t.base58=j("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=j("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=j("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const A=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(H){let W="";for(let K=0;K<H.length;K+=8){const le=H.subarray(K,K+8);W+=t.base58.encode(le).padStart(A[le.length],"1")}return W},decode(H){let W=[];for(let K=0;K<H.length;K+=11){const le=H.slice(K,K+11),he=A.indexOf(le.length),ue=t.base58.decode(le);for(let Ee=0;Ee<ue.length-he;Ee++)if(ue[Ee]!==0)throw new Error("base58xmr: wrong padding");W=W.concat(Array.from(ue.slice(ue.length-he)))}return Uint8Array.from(W)}};const q=H=>u(L(4,W=>H(H(W))),t.base58);t.createBase58check=q,t.base58check=t.createBase58check;const M=u(d("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),m("")),C=[996825010,642813549,513874426,1027748829,705979059];function N(H){const W=H>>25;let K=(H&33554431)<<5;for(let le=0;le<C.length;le++)(W>>le&1)===1&&(K^=C[le]);return K}function R(H,W,K=1){const le=H.length;let he=1;for(let ue=0;ue<le;ue++){const Ee=H.charCodeAt(ue);if(Ee<33||Ee>126)throw new Error(`Invalid prefix (${H})`);he=N(he)^Ee>>5}he=N(he);for(let ue=0;ue<le;ue++)he=N(he)^H.charCodeAt(ue)&31;for(let ue of W)he=N(he)^ue;for(let ue=0;ue<6;ue++)he=N(he);return he^=K,M.encode(k([he%w[30]],30,5,!1))}function $(H){const W=H==="bech32"?1:734539939,K=v(5),le=K.decode,he=K.encode,ue=S(le);function Ee(st,at,xt=90){s("bech32.encode prefix",st),e(at)&&(at=Array.from(at)),h("bech32.encode",at);const vt=st.length;if(vt===0)throw new TypeError(`Invalid prefix length ${vt}`);const ln=vt+7+at.length;if(xt!==!1&&ln>xt)throw new TypeError(`Length ${ln} exceeds limit ${xt}`);const ii=st.toLowerCase(),ji=R(ii,at,W);return`${ii}1${M.encode(at)}${ji}`}function Ce(st,at=90){s("bech32.decode input",st);const xt=st.length;if(xt<8||at!==!1&&xt>at)throw new TypeError(`invalid string length: ${xt} (${st}). Expected (8..${at})`);const vt=st.toLowerCase();if(st!==vt&&st!==st.toUpperCase())throw new Error("String must be lowercase or uppercase");const ln=vt.lastIndexOf("1");if(ln===0||ln===-1)throw new Error('Letter "1" must be present between prefix and data only');const ii=vt.slice(0,ln),ji=vt.slice(ln+1);if(ji.length<6)throw new Error("Data must be at least 6 characters long");const zr=M.decode(ji).slice(0,-6),xa=R(ii,zr,W);if(!ji.endsWith(xa))throw new Error(`Invalid checksum in ${st}: expected "${xa}"`);return{prefix:ii,words:zr}}const tt=S(Ce);function nt(st){const{prefix:at,words:xt}=Ce(st,!1);return{prefix:at,words:xt,bytes:le(xt)}}function Dt(st,at){return Ee(st,he(at))}return{encode:Ee,decode:Ce,encodeFromBytes:Dt,decodeToBytes:nt,decodeUnsafe:tt,fromWords:le,fromWordsUnsafe:ue,toWords:he}}t.bech32=$("bech32"),t.bech32m=$("bech32m"),t.utf8={encode:H=>new TextDecoder().decode(H),decode:H=>new TextEncoder().encode(H)};const U=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",B={encode(H){return n(H),H.toHex()},decode(H){return s("hex",H),Uint8Array.fromHex(H)}};t.hex=U?B:u(v(4),d("0123456789abcdef"),m(""),p(H=>{if(typeof H!="string"||H.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof H} with length ${H.length}`);return H.toLowerCase()}));const T={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},Y="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",X=(H,W)=>{if(typeof H!="string"||!T.hasOwnProperty(H))throw new TypeError(Y);if(!e(W))throw new TypeError("bytesToString() expects Uint8Array");return T[H].encode(W)};t.bytesToString=X,t.str=t.bytesToString;const I=(H,W)=>{if(!T.hasOwnProperty(H))throw new TypeError(Y);if(typeof W!="string")throw new TypeError("stringToBytes() expects string");return T[H].decode(W)};t.stringToBytes=I,t.bytes=t.stringToBytes}(pm)),pm}var gm={},lt={},Me={},y_;function sZ(){if(y_)return Me;y_=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.toBig=Me.shrSL=Me.shrSH=Me.rotrSL=Me.rotrSH=Me.rotrBL=Me.rotrBH=Me.rotr32L=Me.rotr32H=Me.rotlSL=Me.rotlSH=Me.rotlBL=Me.rotlBH=Me.add5L=Me.add5H=Me.add4L=Me.add4H=Me.add3L=Me.add3H=void 0,Me.add=b,Me.fromBig=n,Me.split=a;const t=BigInt(2**32-1),e=BigInt(32);function n(P,j=!1){return j?{h:Number(P&t),l:Number(P>>e&t)}:{h:Number(P>>e&t)|0,l:Number(P&t)|0}}function a(P,j=!1){const A=P.length;let q=new Uint32Array(A),M=new Uint32Array(A);for(let C=0;C<A;C++){const{h:N,l:R}=n(P[C],j);[q[C],M[C]]=[N,R]}return[q,M]}const r=(P,j)=>BigInt(P>>>0)<<e|BigInt(j>>>0);Me.toBig=r;const s=(P,j,A)=>P>>>A;Me.shrSH=s;const o=(P,j,A)=>P<<32-A|j>>>A;Me.shrSL=o;const l=(P,j,A)=>P>>>A|j<<32-A;Me.rotrSH=l;const c=(P,j,A)=>P<<32-A|j>>>A;Me.rotrSL=c;const h=(P,j,A)=>P<<64-A|j>>>A-32;Me.rotrBH=h;const u=(P,j,A)=>P>>>A-32|j<<64-A;Me.rotrBL=u;const d=(P,j)=>j;Me.rotr32H=d;const m=(P,j)=>P;Me.rotr32L=m;const f=(P,j,A)=>P<<A|j>>>32-A;Me.rotlSH=f;const p=(P,j,A)=>j<<A|P>>>32-A;Me.rotlSL=p;const g=(P,j,A)=>j<<A-32|P>>>64-A;Me.rotlBH=g;const x=(P,j,A)=>P<<A-32|j>>>64-A;Me.rotlBL=x;function b(P,j,A,q){const M=(j>>>0)+(q>>>0);return{h:P+A+(M/2**32|0)|0,l:M|0}}const w=(P,j,A)=>(P>>>0)+(j>>>0)+(A>>>0);Me.add3L=w;const k=(P,j,A,q)=>j+A+q+(P/2**32|0)|0;Me.add3H=k;const E=(P,j,A,q)=>(P>>>0)+(j>>>0)+(A>>>0)+(q>>>0);Me.add4L=E;const v=(P,j,A,q,M)=>j+A+q+M+(P/2**32|0)|0;Me.add4H=v;const S=(P,j,A,q,M)=>(P>>>0)+(j>>>0)+(A>>>0)+(q>>>0)+(M>>>0);Me.add5L=S;const L=(P,j,A,q,M,C)=>j+A+q+M+C+(P/2**32|0)|0;Me.add5H=L;const O={fromBig:n,split:a,toBig:r,shrSH:s,shrSL:o,rotrSH:l,rotrSL:c,rotrBH:h,rotrBL:u,rotr32H:d,rotr32L:m,rotlSH:f,rotlSL:p,rotlBH:g,rotlBL:x,add:b,add3L:w,add3H:k,add4L:E,add4H:v,add5H:L,add5L:S};return Me.default=O,Me}var xm={},ko={},b_;function oZ(){return b_||(b_=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.crypto=void 0,ko.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),ko}var w_;function iu(){return w_||(w_=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=a,t.abytes=r,t.ahash=s,t.aexists=o,t.aoutput=l,t.u8=c,t.u32=h,t.clean=u,t.createView=d,t.rotr=m,t.rotl=f,t.byteSwap=p,t.byteSwap32=g,t.bytesToHex=w,t.hexToBytes=v,t.asyncLoop=L,t.utf8ToBytes=O,t.bytesToUtf8=P,t.toBytes=j,t.kdfInputToBytes=A,t.concatBytes=q,t.checkOpts=M,t.createHasher=N,t.createOptHasher=R,t.createXOFer=$,t.randomBytes=U;const e=oZ();function n(B){return B instanceof Uint8Array||ArrayBuffer.isView(B)&&B.constructor.name==="Uint8Array"}function a(B){if(!Number.isSafeInteger(B)||B<0)throw new Error("positive integer expected, got "+B)}function r(B,...T){if(!n(B))throw new Error("Uint8Array expected");if(T.length>0&&!T.includes(B.length))throw new Error("Uint8Array expected of length "+T+", got length="+B.length)}function s(B){if(typeof B!="function"||typeof B.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");a(B.outputLen),a(B.blockLen)}function o(B,T=!0){if(B.destroyed)throw new Error("Hash instance has been destroyed");if(T&&B.finished)throw new Error("Hash#digest() has already been called")}function l(B,T){r(B);const Y=T.outputLen;if(B.length<Y)throw new Error("digestInto() expects output buffer of length at least "+Y)}function c(B){return new Uint8Array(B.buffer,B.byteOffset,B.byteLength)}function h(B){return new Uint32Array(B.buffer,B.byteOffset,Math.floor(B.byteLength/4))}function u(...B){for(let T=0;T<B.length;T++)B[T].fill(0)}function d(B){return new DataView(B.buffer,B.byteOffset,B.byteLength)}function m(B,T){return B<<32-T|B>>>T}function f(B,T){return B<<T|B>>>32-T>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(B){return B<<24&4278190080|B<<8&16711680|B>>>8&65280|B>>>24&255}t.swap8IfBE=t.isLE?B=>B:B=>p(B),t.byteSwapIfBE=t.swap8IfBE;function g(B){for(let T=0;T<B.length;T++)B[T]=p(B[T]);return B}t.swap32IfBE=t.isLE?B=>B:g;const x=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",b=Array.from({length:256},(B,T)=>T.toString(16).padStart(2,"0"));function w(B){if(r(B),x)return B.toHex();let T="";for(let Y=0;Y<B.length;Y++)T+=b[B[Y]];return T}const k={_0:48,_9:57,A:65,F:70,a:97,f:102};function E(B){if(B>=k._0&&B<=k._9)return B-k._0;if(B>=k.A&&B<=k.F)return B-(k.A-10);if(B>=k.a&&B<=k.f)return B-(k.a-10)}function v(B){if(typeof B!="string")throw new Error("hex string expected, got "+typeof B);if(x)return Uint8Array.fromHex(B);const T=B.length,Y=T/2;if(T%2)throw new Error("hex string expected, got unpadded hex of length "+T);const X=new Uint8Array(Y);for(let I=0,H=0;I<Y;I++,H+=2){const W=E(B.charCodeAt(H)),K=E(B.charCodeAt(H+1));if(W===void 0||K===void 0){const le=B[H]+B[H+1];throw new Error('hex string expected, got non-hex character "'+le+'" at index '+H)}X[I]=W*16+K}return X}const S=async()=>{};t.nextTick=S;async function L(B,T,Y){let X=Date.now();for(let I=0;I<B;I++){Y(I);const H=Date.now()-X;H>=0&&H<T||(await(0,t.nextTick)(),X+=H)}}function O(B){if(typeof B!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(B))}function P(B){return new TextDecoder().decode(B)}function j(B){return typeof B=="string"&&(B=O(B)),r(B),B}function A(B){return typeof B=="string"&&(B=O(B)),r(B),B}function q(...B){let T=0;for(let X=0;X<B.length;X++){const I=B[X];r(I),T+=I.length}const Y=new Uint8Array(T);for(let X=0,I=0;X<B.length;X++){const H=B[X];Y.set(H,I),I+=H.length}return Y}function M(B,T){if(T!==void 0&&{}.toString.call(T)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(B,T)}class C{}t.Hash=C;function N(B){const T=X=>B().update(j(X)).digest(),Y=B();return T.outputLen=Y.outputLen,T.blockLen=Y.blockLen,T.create=()=>B(),T}function R(B){const T=(X,I)=>B(I).update(j(X)).digest(),Y=B({});return T.outputLen=Y.outputLen,T.blockLen=Y.blockLen,T.create=X=>B(X),T}function $(B){const T=(X,I)=>B(I).update(j(X)).digest(),Y=B({});return T.outputLen=Y.outputLen,T.blockLen=Y.blockLen,T.create=X=>B(X),T}t.wrapConstructor=N,t.wrapConstructorWithOpts=R,t.wrapXOFConstructorWithOpts=$;function U(B=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(B));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(B));throw new Error("crypto.getRandomValues must be defined")}}(xm)),xm}var __;function G3(){if(__)return lt;__=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.shake256=lt.shake128=lt.keccak_512=lt.keccak_384=lt.keccak_256=lt.keccak_224=lt.sha3_512=lt.sha3_384=lt.sha3_256=lt.sha3_224=lt.Keccak=void 0,lt.keccakP=x;const t=sZ(),e=iu(),n=BigInt(0),a=BigInt(1),r=BigInt(2),s=BigInt(7),o=BigInt(256),l=BigInt(113),c=[],h=[],u=[];for(let E=0,v=a,S=1,L=0;E<24;E++){[S,L]=[L,(2*S+3*L)%5],c.push(2*(5*L+S)),h.push((E+1)*(E+2)/2%64);let O=n;for(let P=0;P<7;P++)v=(v<<a^(v>>s)*l)%o,v&r&&(O^=a<<(a<<BigInt(P))-a);u.push(O)}const d=(0,t.split)(u,!0),m=d[0],f=d[1],p=(E,v,S)=>S>32?(0,t.rotlBH)(E,v,S):(0,t.rotlSH)(E,v,S),g=(E,v,S)=>S>32?(0,t.rotlBL)(E,v,S):(0,t.rotlSL)(E,v,S);function x(E,v=24){const S=new Uint32Array(10);for(let L=24-v;L<24;L++){for(let j=0;j<10;j++)S[j]=E[j]^E[j+10]^E[j+20]^E[j+30]^E[j+40];for(let j=0;j<10;j+=2){const A=(j+8)%10,q=(j+2)%10,M=S[q],C=S[q+1],N=p(M,C,1)^S[A],R=g(M,C,1)^S[A+1];for(let $=0;$<50;$+=10)E[j+$]^=N,E[j+$+1]^=R}let O=E[2],P=E[3];for(let j=0;j<24;j++){const A=h[j],q=p(O,P,A),M=g(O,P,A),C=c[j];O=E[C],P=E[C+1],E[C]=q,E[C+1]=M}for(let j=0;j<50;j+=10){for(let A=0;A<10;A++)S[A]=E[j+A];for(let A=0;A<10;A++)E[j+A]^=~S[(A+2)%10]&S[(A+4)%10]}E[0]^=m[L],E[1]^=f[L]}(0,e.clean)(S)}class b extends e.Hash{constructor(v,S,L,O=!1,P=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=v,this.suffix=S,this.outputLen=L,this.enableXOF=O,this.rounds=P,(0,e.anumber)(L),!(0<v&&v<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),x(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(v){(0,e.aexists)(this),v=(0,e.toBytes)(v),(0,e.abytes)(v);const{blockLen:S,state:L}=this,O=v.length;for(let P=0;P<O;){const j=Math.min(S-this.pos,O-P);for(let A=0;A<j;A++)L[this.pos++]^=v[P++];this.pos===S&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:v,suffix:S,pos:L,blockLen:O}=this;v[L]^=S,(S&128)!==0&&L===O-1&&this.keccak(),v[O-1]^=128,this.keccak()}writeInto(v){(0,e.aexists)(this,!1),(0,e.abytes)(v),this.finish();const S=this.state,{blockLen:L}=this;for(let O=0,P=v.length;O<P;){this.posOut>=L&&this.keccak();const j=Math.min(L-this.posOut,P-O);v.set(S.subarray(this.posOut,this.posOut+j),O),this.posOut+=j,O+=j}return v}xofInto(v){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(v)}xof(v){return(0,e.anumber)(v),this.xofInto(new Uint8Array(v))}digestInto(v){if((0,e.aoutput)(v,this),this.finished)throw new Error("digest() was already called");return this.writeInto(v),this.destroy(),v}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(v){const{blockLen:S,suffix:L,outputLen:O,rounds:P,enableXOF:j}=this;return v||(v=new b(S,L,O,j,P)),v.state32.set(this.state32),v.pos=this.pos,v.posOut=this.posOut,v.finished=this.finished,v.rounds=P,v.suffix=L,v.outputLen=O,v.enableXOF=j,v.destroyed=this.destroyed,v}}lt.Keccak=b;const w=(E,v,S)=>(0,e.createHasher)(()=>new b(v,E,S));lt.sha3_224=w(6,144,224/8),lt.sha3_256=w(6,136,256/8),lt.sha3_384=w(6,104,384/8),lt.sha3_512=w(6,72,512/8),lt.keccak_224=w(1,144,224/8),lt.keccak_256=w(1,136,256/8),lt.keccak_384=w(1,104,384/8),lt.keccak_512=w(1,72,512/8);const k=(E,v,S)=>(0,e.createXOFer)((L={})=>new b(v,E,L.dkLen===void 0?S:L.dkLen,!0));return lt.shake128=k(31,168,128/8),lt.shake256=k(31,136,256/8),lt}var v_;function td(){return v_||(v_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.isValidChecksumAddress=t.getChecksumAddress=t.isValidHexAddress=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.HexChecksumAddressStruct=t.HexAddressStruct=t.StrictHexStruct=t.HexStruct=void 0;const e=$i(),n=G3(),a=za(),r=Vx();t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu),t.HexAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]{40}$/u),t.HexChecksumAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-fA-F]{40}$/u);function s(p){return(0,e.is)(p,t.HexStruct)}t.isHexString=s;function o(p){return(0,e.is)(p,t.StrictHexStruct)}t.isStrictHexString=o;function l(p){(0,a.assert)(s(p),"Value must be a hexadecimal string.")}t.assertIsHexString=l;function c(p){(0,a.assert)(o(p),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=c;function h(p){return(0,e.is)(p,t.HexAddressStruct)||d(p)}t.isValidHexAddress=h;function u(p){(0,a.assert)((0,e.is)(p,t.HexChecksumAddressStruct),"Invalid hex address.");const g=f(p.toLowerCase()),x=f((0,r.bytesToHex)((0,n.keccak_256)(g)));return`0x${g.split("").map((b,w)=>{const k=x[w];return(0,a.assert)((0,e.is)(k,(0,e.string)()),"Hash shorter than address."),parseInt(k,16)>7?b.toUpperCase():b}).join("")}`}t.getChecksumAddress=u;function d(p){return(0,e.is)(p,t.HexChecksumAddressStruct)?u(p)===p:!1}t.isValidChecksumAddress=d;function m(p){return p.startsWith("0x")?p:p.startsWith("0X")?`0x${p.substring(2)}`:`0x${p}`}t.add0x=m;function f(p){return p.startsWith("0x")||p.startsWith("0X")?p.substring(2):p}t.remove0x=f}(gm)),gm}var j_;function Vx(){if(j_)return We;j_=1,Object.defineProperty(We,"__esModule",{value:!0}),We.createDataView=We.concatBytes=We.valueToBytes=We.base64ToBytes=We.stringToBytes=We.numberToBytes=We.signedBigIntToBytes=We.bigIntToBytes=We.hexToBytes=We.bytesToBase64=We.bytesToString=We.bytesToNumber=We.bytesToSignedBigInt=We.bytesToBigInt=We.bytesToHex=We.assertIsBytes=We.isBytes=void 0;const t=rZ(),e=za(),n=td(),a=48,r=58,s=87;function o(){const j=[];return()=>{if(j.length===0)for(let A=0;A<256;A++)j.push(A.toString(16).padStart(2,"0"));return j}}const l=o();function c(j){return j instanceof Uint8Array}We.isBytes=c;function h(j){(0,e.assert)(c(j),"Value must be a Uint8Array.")}We.assertIsBytes=h;function u(j){if(h(j),j.length===0)return"0x";const A=l(),q=new Array(j.length);for(let M=0;M<j.length;M++)q[M]=A[j[M]];return(0,n.add0x)(q.join(""))}We.bytesToHex=u;function d(j){h(j);const A=u(j);return BigInt(A)}We.bytesToBigInt=d;function m(j){h(j);let A=BigInt(0);for(const q of j)A=(A<<BigInt(8))+BigInt(q);return BigInt.asIntN(j.length*8,A)}We.bytesToSignedBigInt=m;function f(j){h(j);const A=d(j);return(0,e.assert)(A<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(A)}We.bytesToNumber=f;function p(j){return h(j),new TextDecoder().decode(j)}We.bytesToString=p;function g(j){return h(j),t.base64.encode(j)}We.bytesToBase64=g;function x(j){if(j?.toLowerCase?.()==="0x")return new Uint8Array;(0,n.assertIsHexString)(j);const A=(0,n.remove0x)(j).toLowerCase(),q=A.length%2===0?A:`0${A}`,M=new Uint8Array(q.length/2);for(let C=0;C<M.length;C++){const N=q.charCodeAt(C*2),R=q.charCodeAt(C*2+1),$=N-(N<r?a:s),U=R-(R<r?a:s);M[C]=$*16+U}return M}We.hexToBytes=x;function b(j){(0,e.assert)(typeof j=="bigint","Value must be a bigint."),(0,e.assert)(j>=BigInt(0),"Value must be a non-negative bigint.");const A=j.toString(16);return x(A)}We.bigIntToBytes=b;function w(j,A){(0,e.assert)(A>0);const q=j>>BigInt(31);return!((~j&q)+(j&~q)>>BigInt(A*8+-1))}function k(j,A){(0,e.assert)(typeof j=="bigint","Value must be a bigint."),(0,e.assert)(typeof A=="number","Byte length must be a number."),(0,e.assert)(A>0,"Byte length must be greater than 0."),(0,e.assert)(w(j,A),"Byte length is too small to represent the given value.");let q=j;const M=new Uint8Array(A);for(let C=0;C<M.length;C++)M[C]=Number(BigInt.asUintN(8,q)),q>>=BigInt(8);return M.reverse()}We.signedBigIntToBytes=k;function E(j){(0,e.assert)(typeof j=="number","Value must be a number."),(0,e.assert)(j>=0,"Value must be a non-negative number."),(0,e.assert)(Number.isSafeInteger(j),"Value is not a safe integer. Use `bigIntToBytes` instead.");const A=j.toString(16);return x(A)}We.numberToBytes=E;function v(j){return(0,e.assert)(typeof j=="string","Value must be a string."),new TextEncoder().encode(j)}We.stringToBytes=v;function S(j){return(0,e.assert)(typeof j=="string","Value must be a string."),t.base64.decode(j)}We.base64ToBytes=S;function L(j){if(typeof j=="bigint")return b(j);if(typeof j=="number")return E(j);if(typeof j=="string")return j.startsWith("0x")?x(j):v(j);if(c(j))return j;throw new TypeError(`Unsupported value type: "${typeof j}".`)}We.valueToBytes=L;function O(j){const A=new Array(j.length);let q=0;for(let C=0;C<j.length;C++){const N=L(j[C]);A[C]=N,q+=N.length}const M=new Uint8Array(q);for(let C=0,N=0;C<A.length;C++)M.set(A[C],N),N+=A[C].length;return M}We.concatBytes=O;function P(j){if(typeof Buffer<"u"&&j instanceof Buffer){const A=j.buffer.slice(j.byteOffset,j.byteOffset+j.byteLength);return new DataView(A)}return new DataView(j.buffer,j.byteOffset,j.byteLength)}return We.createDataView=P,We}var ym={},T_;function lZ(){return T_||(T_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toCaipChainId=t.parseCaipAccountId=t.parseCaipChainId=t.isCaipAssetId=t.isCaipAssetType=t.isCaipAccountAddress=t.isCaipAccountId=t.isCaipReference=t.isCaipNamespace=t.isCaipChainId=t.KnownCaipNamespace=t.CaipAssetIdStruct=t.CaipAssetTypeStruct=t.CaipAccountAddressStruct=t.CaipAccountIdStruct=t.CaipReferenceStruct=t.CaipNamespaceStruct=t.CaipChainIdStruct=t.CAIP_ASSET_ID_REGEX=t.CAIP_ASSET_TYPE_REGEX=t.CAIP_ACCOUNT_ADDRESS_REGEX=t.CAIP_ACCOUNT_ID_REGEX=t.CAIP_REFERENCE_REGEX=t.CAIP_NAMESPACE_REGEX=t.CAIP_CHAIN_ID_REGEX=void 0;const e=$i();t.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,t.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,t.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,t.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,t.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,t.CaipChainIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_CHAIN_ID_REGEX),t.CaipNamespaceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_NAMESPACE_REGEX),t.CaipReferenceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_REFERENCE_REGEX),t.CaipAccountIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ID_REGEX),t.CaipAccountAddressStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ADDRESS_REGEX),t.CaipAssetTypeStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_TYPE_REGEX),t.CaipAssetIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_ID_REGEX),function(m){m.Bip122="bip122",m.Eip155="eip155",m.Wallet="wallet"}(t.KnownCaipNamespace||(t.KnownCaipNamespace={}));function n(m){return(0,e.is)(m,t.CaipChainIdStruct)}t.isCaipChainId=n;function a(m){return(0,e.is)(m,t.CaipNamespaceStruct)}t.isCaipNamespace=a;function r(m){return(0,e.is)(m,t.CaipReferenceStruct)}t.isCaipReference=r;function s(m){return(0,e.is)(m,t.CaipAccountIdStruct)}t.isCaipAccountId=s;function o(m){return(0,e.is)(m,t.CaipAccountAddressStruct)}t.isCaipAccountAddress=o;function l(m){return(0,e.is)(m,t.CaipAssetTypeStruct)}t.isCaipAssetType=l;function c(m){return(0,e.is)(m,t.CaipAssetIdStruct)}t.isCaipAssetId=c;function h(m){const f=t.CAIP_CHAIN_ID_REGEX.exec(m);if(!f?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:f.groups.namespace,reference:f.groups.reference}}t.parseCaipChainId=h;function u(m){const f=t.CAIP_ACCOUNT_ID_REGEX.exec(m);if(!f?.groups)throw new Error("Invalid CAIP account ID.");return{address:f.groups.accountAddress,chainId:f.groups.chainId,chain:{namespace:f.groups.namespace,reference:f.groups.reference}}}t.parseCaipAccountId=u;function d(m,f){if(!a(m))throw new Error(`Invalid "namespace", must match: ${t.CAIP_NAMESPACE_REGEX.toString()}`);if(!r(f))throw new Error(`Invalid "reference", must match: ${t.CAIP_REFERENCE_REGEX.toString()}`);return`${m}:${f}`}t.toCaipChainId=d}(ym)),ym}var Eo={},k_;function cZ(){if(k_)return Eo;k_=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.ChecksumStruct=void 0;const t=$i(),e=Y3();return Eo.ChecksumStruct=(0,t.size)((0,e.base64)((0,t.string)(),{paddingRequired:!0}),44,44),Eo}var oi={},E_;function hZ(){if(E_)return oi;E_=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.createHex=oi.createBytes=oi.createBigInt=oi.createNumber=void 0;const t=$i(),e=za(),n=Vx(),a=td(),r=(0,t.union)([(0,t.number)(),(0,t.bigint)(),(0,t.string)(),a.StrictHexStruct]),s=(0,t.coerce)((0,t.number)(),r,Number),o=(0,t.coerce)((0,t.bigint)(),r,BigInt);(0,t.union)([a.StrictHexStruct,(0,t.instance)(Uint8Array)]);const l=(0,t.coerce)((0,t.instance)(Uint8Array),(0,t.union)([a.StrictHexStruct]),n.hexToBytes),c=(0,t.coerce)(a.StrictHexStruct,(0,t.instance)(Uint8Array),n.bytesToHex);function h(f){try{const p=(0,t.create)(f,s);return(0,e.assert)(Number.isFinite(p),`Expected a number-like value, got "${f}".`),p}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${f}".`):p}}oi.createNumber=h;function u(f){try{return(0,t.create)(f,o)}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${String(p.value)}".`):p}}oi.createBigInt=u;function d(f){if(typeof f=="string"&&f.toLowerCase()==="0x")return new Uint8Array;try{return(0,t.create)(f,l)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}oi.createBytes=d;function m(f){if(f instanceof Uint8Array&&f.length===0||typeof f=="string"&&f.toLowerCase()==="0x")return"0x";try{return(0,t.create)(f,c)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}return oi.createHex=m,oi}var li={},S_;function uZ(){if(S_)return li;S_=1;var t=li&&li.__classPrivateFieldGet||function(o,l,c,h){if(c==="a"&&!h)throw new TypeError("Private accessor was defined without a getter");if(typeof l=="function"?o!==l||!h:!l.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return c==="m"?h:c==="a"?h.call(o):h?h.value:l.get(o)},e=li&&li.__classPrivateFieldSet||function(o,l,c,h,u){if(h==="m")throw new TypeError("Private method is not writable");if(h==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof l=="function"?o!==l||!u:!l.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return h==="a"?u.call(o,c):u?u.value=c:l.set(o,c),c},n,a;Object.defineProperty(li,"__esModule",{value:!0}),li.FrozenSet=li.FrozenMap=void 0;class r{get size(){return t(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return t(this,n,"f")[Symbol.iterator]()}constructor(l){n.set(this,void 0),e(this,n,new Map(l),"f"),Object.freeze(this)}entries(){return t(this,n,"f").entries()}forEach(l,c){return t(this,n,"f").forEach((h,u,d)=>l.call(c,h,u,this))}get(l){return t(this,n,"f").get(l)}has(l){return t(this,n,"f").has(l)}keys(){return t(this,n,"f").keys()}values(){return t(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([l,c])=>`${String(l)} => ${String(c)}`).join(", ")} `:""}}`}}li.FrozenMap=r;class s{get size(){return t(this,a,"f").size}[(a=new WeakMap,Symbol.iterator)](){return t(this,a,"f")[Symbol.iterator]()}constructor(l){a.set(this,void 0),e(this,a,new Set(l),"f"),Object.freeze(this)}entries(){return t(this,a,"f").entries()}forEach(l,c){return t(this,a,"f").forEach((h,u,d)=>l.call(c,h,u,this))}has(l){return t(this,a,"f").has(l)}keys(){return t(this,a,"f").keys()}values(){return t(this,a,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(l=>String(l)).join(", ")} `:""}}`}}return li.FrozenSet=s,Object.freeze(r),Object.freeze(r.prototype),Object.freeze(s),Object.freeze(s.prototype),li}var bm={},C_;function dZ(){return C_||(C_=1,Object.defineProperty(bm,"__esModule",{value:!0})),bm}var wm={},A_;function mZ(){return A_||(A_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.getSafeJson=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=t.exactOptional=t.object=void 0;const e=$i(),n=za(),a=Ux(),r=j=>(0,e.object)(j);t.object=r;function s({path:j,branch:A}){const q=j[j.length-1];return(0,a.hasProperty)(A[A.length-2],q)}function o(j){return new e.Struct({...j,type:`optional ${j.type}`,validator:(A,q)=>!s(q)||j.validator(A,q),refiner:(A,q)=>!s(q)||j.refiner(A,q)})}t.exactOptional=o;const l=()=>(0,e.define)("finite number",j=>(0,e.is)(j,(0,e.number)())&&Number.isFinite(j));t.UnsafeJsonStruct=(0,e.union)([(0,e.literal)(null),(0,e.boolean)(),l(),(0,e.string)(),(0,e.array)((0,e.lazy)(()=>t.UnsafeJsonStruct)),(0,e.record)((0,e.string)(),(0,e.lazy)(()=>t.UnsafeJsonStruct))]),t.JsonStruct=(0,e.coerce)(t.UnsafeJsonStruct,(0,e.any)(),j=>((0,n.assertStruct)(j,t.UnsafeJsonStruct),JSON.parse(JSON.stringify(j,(A,q)=>{if(!(A==="__proto__"||A==="constructor"))return q}))));function c(j){try{return h(j),!0}catch{return!1}}t.isValidJson=c;function h(j){return(0,e.create)(j,t.JsonStruct)}t.getSafeJson=h;function u(j){(0,n.assertStruct)(j,t.JsonStruct,"Invalid JSON value");const A=JSON.stringify(j);return new TextEncoder().encode(A).byteLength}t.getJsonSize=u,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,t.object)({code:(0,e.integer)(),message:(0,e.string)(),data:o(t.JsonStruct),stack:o((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)]),t.JsonRpcRequestStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)}),t.JsonRpcNotificationStruct=(0,t.object)({jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)});function d(j){return(0,e.is)(j,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=d;function m(j,A){(0,n.assertStruct)(j,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",A)}t.assertIsJsonRpcNotification=m;function f(j){return(0,e.is)(j,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=f;function p(j,A){(0,n.assertStruct)(j,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",A)}t.assertIsJsonRpcRequest=p,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function g(j){return(0,e.is)(j,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=g;function x(j,A){(0,n.assertStruct)(j,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",A)}t.assertIsPendingJsonRpcResponse=x;function b(j){return(0,e.is)(j,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=b;function w(j,A){(0,n.assertStruct)(j,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",A)}t.assertIsJsonRpcResponse=w;function k(j){return(0,e.is)(j,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=k;function E(j,A){(0,n.assertStruct)(j,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",A)}t.assertIsJsonRpcSuccess=E;function v(j){return(0,e.is)(j,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=v;function S(j,A){(0,n.assertStruct)(j,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",A)}t.assertIsJsonRpcFailure=S;function L(j){return(0,e.is)(j,t.JsonRpcErrorStruct)}t.isJsonRpcError=L;function O(j,A){(0,n.assertStruct)(j,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",A)}t.assertIsJsonRpcError=O;function P(j){const{permitEmptyString:A,permitFractions:q,permitNull:M}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...j};return N=>!!(typeof N=="number"&&(q||Number.isInteger(N))||typeof N=="string"&&(A||N.length>0)||M&&N===null)}t.getJsonRpcIdValidator=P}(wm)),wm}var _m={},N_;function fZ(){return N_||(N_=1,Object.defineProperty(_m,"__esModule",{value:!0})),_m}var Xi={},I_;function pZ(){if(I_)return Xi;I_=1;var t=Xi&&Xi.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.createModuleLogger=Xi.createProjectLogger=void 0;const n=(0,t(NY()).default)("metamask");function a(s){return n.extend(s)}Xi.createProjectLogger=a;function r(s,o){return s.extend(o)}return Xi.createModuleLogger=r,Xi}var ci={},L_;function gZ(){if(L_)return ci;L_=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.hexToBigInt=ci.hexToNumber=ci.bigIntToHex=ci.numberToHex=void 0;const t=za(),e=td(),n=o=>((0,t.assert)(typeof o=="number","Value must be a number."),(0,t.assert)(o>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(o),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,e.add0x)(o.toString(16)));ci.numberToHex=n;const a=o=>((0,t.assert)(typeof o=="bigint","Value must be a bigint."),(0,t.assert)(o>=0,"Value must be a non-negative bigint."),(0,e.add0x)(o.toString(16)));ci.bigIntToHex=a;const r=o=>{(0,e.assertIsHexString)(o);const l=parseInt(o,16);return(0,t.assert)(Number.isSafeInteger(l),"Value is not a safe integer. Use `hexToBigInt` instead."),l};ci.hexToNumber=r;const s=o=>((0,e.assertIsHexString)(o),BigInt((0,e.add0x)(o)));return ci.hexToBigInt=s,ci}var vm={},O_;function xZ(){return O_||(O_=1,Object.defineProperty(vm,"__esModule",{value:!0})),vm}var So={},M_;function yZ(){if(M_)return So;M_=1,Object.defineProperty(So,"__esModule",{value:!0}),So.createDeferredPromise=void 0;function t({suppressUnhandledRejection:e=!1}={}){let n,a;const r=new Promise((s,o)=>{n=s,a=o});return e&&r.catch(s=>{}),{promise:r,resolve:n,reject:a}}return So.createDeferredPromise=t,So}var jm={},R_;function bZ(){return R_||(R_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,n=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function a(s,o){return n(s,"count"),s*o}t.inMilliseconds=a;function r(s){return n(s,"timestamp"),Date.now()-s}t.timeSince=r}(jm)),jm}var Tm={},P_;function wZ(){return P_||(P_=1,Object.defineProperty(Tm,"__esModule",{value:!0})),Tm}var km={},Oc={exports:{}},Em,D_;function nd(){if(D_)return Em;D_=1;const t="2.0.0",e=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,r=e-6;return Em={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Em}var Sm={},Cm,B_;function id(){return B_||(B_=1,Cm=typeof process=="object"&&Sm&&Sm.NODE_DEBUG&&/\bsemver\b/i.test(Sm.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),Cm}var F_;function oc(){return F_||(F_=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:r}=nd(),s=id();e=t.exports={};const o=e.re=[],l=e.safeRe=[],c=e.src=[],h=e.safeSrc=[],u=e.t={};let d=0;const m="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[m,a]],p=x=>{for(const[b,w]of f)x=x.split(`${b}*`).join(`${b}{0,${w}}`).split(`${b}+`).join(`${b}{1,${w}}`);return x},g=(x,b,w)=>{const k=p(b),E=d++;s(x,E,b),u[x]=E,c[E]=b,h[E]=k,o[E]=new RegExp(b,w?"g":void 0),l[E]=new RegExp(k,w?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${m}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Oc,Oc.exports)),Oc.exports}var Am,H_;function Yx(){if(H_)return Am;H_=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return Am=a=>a?typeof a!="object"?t:a:e,Am}var Nm,q_;function X3(){if(q_)return Nm;q_=1;const t=/^[0-9]+$/,e=(a,r)=>{const s=t.test(a),o=t.test(r);return s&&o&&(a=+a,r=+r),a===r?0:s&&!o?-1:o&&!s?1:a<r?-1:1};return Nm={compareIdentifiers:e,rcompareIdentifiers:(a,r)=>e(r,a)},Nm}var Im,$_;function xn(){if($_)return Im;$_=1;const t=id(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:n}=nd(),{safeRe:a,t:r}=oc(),s=Yx(),{compareIdentifiers:o}=X3();class l{constructor(h,u){if(u=s(u),h instanceof l){if(h.loose===!!u.loose&&h.includePrerelease===!!u.includePrerelease)return h;h=h.version}else if(typeof h!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof h}".`);if(h.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",h,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const d=h.trim().match(u.loose?a[r.LOOSE]:a[r.FULL]);if(!d)throw new TypeError(`Invalid Version: ${h}`);if(this.raw=h,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(m=>{if(/^[0-9]+$/.test(m)){const f=+m;if(f>=0&&f<n)return f}return m}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(h){if(t("SemVer.compare",this.version,this.options,h),!(h instanceof l)){if(typeof h=="string"&&h===this.version)return 0;h=new l(h,this.options)}return h.version===this.version?0:this.compareMain(h)||this.comparePre(h)}compareMain(h){return h instanceof l||(h=new l(h,this.options)),o(this.major,h.major)||o(this.minor,h.minor)||o(this.patch,h.patch)}comparePre(h){if(h instanceof l||(h=new l(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;let u=0;do{const d=this.prerelease[u],m=h.prerelease[u];if(t("prerelease compare",u,d,m),d===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(d===void 0)return-1;if(d===m)continue;return o(d,m)}while(++u)}compareBuild(h){h instanceof l||(h=new l(h,this.options));let u=0;do{const d=this.build[u],m=h.build[u];if(t("build compare",u,d,m),d===void 0&&m===void 0)return 0;if(m===void 0)return 1;if(d===void 0)return-1;if(d===m)continue;return o(d,m)}while(++u)}inc(h,u,d){if(h.startsWith("pre")){if(!u&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const m=`-${u}`.match(this.options.loose?a[r.PRERELEASELOOSE]:a[r.PRERELEASE]);if(!m||m[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,d),this.inc("pre",u,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,d),this.inc("pre",u,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const m=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[m];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(u===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(m)}}if(u){let f=[u,m];d===!1&&(f=[u]),o(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${h}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Im=l,Im}var Lm,z_;function Xs(){if(z_)return Lm;z_=1;const t=xn();return Lm=(n,a,r=!1)=>{if(n instanceof t)return n;try{return new t(n,a)}catch(s){if(!r)return null;throw s}},Lm}var Om,W_;function _Z(){if(W_)return Om;W_=1;const t=Xs();return Om=(n,a)=>{const r=t(n,a);return r?r.version:null},Om}var Mm,U_;function vZ(){if(U_)return Mm;U_=1;const t=Xs();return Mm=(n,a)=>{const r=t(n.trim().replace(/^[=v]+/,""),a);return r?r.version:null},Mm}var Rm,V_;function jZ(){if(V_)return Rm;V_=1;const t=xn();return Rm=(n,a,r,s,o)=>{typeof r=="string"&&(o=s,s=r,r=void 0);try{return new t(n instanceof t?n.version:n,r).inc(a,s,o).version}catch{return null}},Rm}var Pm,Y_;function TZ(){if(Y_)return Pm;Y_=1;const t=Xs();return Pm=(n,a)=>{const r=t(n,null,!0),s=t(a,null,!0),o=r.compare(s);if(o===0)return null;const l=o>0,c=l?r:s,h=l?s:r,u=!!c.prerelease.length;if(!!h.prerelease.length&&!u){if(!h.patch&&!h.minor)return"major";if(h.compareMain(c)===0)return h.minor&&!h.patch?"minor":"patch"}const m=u?"pre":"";return r.major!==s.major?m+"major":r.minor!==s.minor?m+"minor":r.patch!==s.patch?m+"patch":"prerelease"},Pm}var Dm,G_;function kZ(){if(G_)return Dm;G_=1;const t=xn();return Dm=(n,a)=>new t(n,a).major,Dm}var Bm,X_;function EZ(){if(X_)return Bm;X_=1;const t=xn();return Bm=(n,a)=>new t(n,a).minor,Bm}var Fm,J_;function SZ(){if(J_)return Fm;J_=1;const t=xn();return Fm=(n,a)=>new t(n,a).patch,Fm}var Hm,Q_;function CZ(){if(Q_)return Hm;Q_=1;const t=Xs();return Hm=(n,a)=>{const r=t(n,a);return r&&r.prerelease.length?r.prerelease:null},Hm}var qm,K_;function _i(){if(K_)return qm;K_=1;const t=xn();return qm=(n,a,r)=>new t(n,r).compare(new t(a,r)),qm}var $m,Z_;function AZ(){if(Z_)return $m;Z_=1;const t=_i();return $m=(n,a,r)=>t(a,n,r),$m}var zm,e1;function NZ(){if(e1)return zm;e1=1;const t=_i();return zm=(n,a)=>t(n,a,!0),zm}var Wm,t1;function Gx(){if(t1)return Wm;t1=1;const t=xn();return Wm=(n,a,r)=>{const s=new t(n,r),o=new t(a,r);return s.compare(o)||s.compareBuild(o)},Wm}var Um,n1;function IZ(){if(n1)return Um;n1=1;const t=Gx();return Um=(n,a)=>n.sort((r,s)=>t(r,s,a)),Um}var Vm,i1;function LZ(){if(i1)return Vm;i1=1;const t=Gx();return Vm=(n,a)=>n.sort((r,s)=>t(s,r,a)),Vm}var Ym,a1;function ad(){if(a1)return Ym;a1=1;const t=_i();return Ym=(n,a,r)=>t(n,a,r)>0,Ym}var Gm,r1;function Xx(){if(r1)return Gm;r1=1;const t=_i();return Gm=(n,a,r)=>t(n,a,r)<0,Gm}var Xm,s1;function J3(){if(s1)return Xm;s1=1;const t=_i();return Xm=(n,a,r)=>t(n,a,r)===0,Xm}var Jm,o1;function Q3(){if(o1)return Jm;o1=1;const t=_i();return Jm=(n,a,r)=>t(n,a,r)!==0,Jm}var Qm,l1;function Jx(){if(l1)return Qm;l1=1;const t=_i();return Qm=(n,a,r)=>t(n,a,r)>=0,Qm}var Km,c1;function Qx(){if(c1)return Km;c1=1;const t=_i();return Km=(n,a,r)=>t(n,a,r)<=0,Km}var Zm,h1;function K3(){if(h1)return Zm;h1=1;const t=J3(),e=Q3(),n=ad(),a=Jx(),r=Xx(),s=Qx();return Zm=(l,c,h,u)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof h=="object"&&(h=h.version),l===h;case"!==":return typeof l=="object"&&(l=l.version),typeof h=="object"&&(h=h.version),l!==h;case"":case"=":case"==":return t(l,h,u);case"!=":return e(l,h,u);case">":return n(l,h,u);case">=":return a(l,h,u);case"<":return r(l,h,u);case"<=":return s(l,h,u);default:throw new TypeError(`Invalid operator: ${c}`)}},Zm}var ef,u1;function OZ(){if(u1)return ef;u1=1;const t=xn(),e=Xs(),{safeRe:n,t:a}=oc();return ef=(s,o)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let l=null;if(!o.rtl)l=s.match(o.includePrerelease?n[a.COERCEFULL]:n[a.COERCE]);else{const f=o.includePrerelease?n[a.COERCERTLFULL]:n[a.COERCERTL];let p;for(;(p=f.exec(s))&&(!l||l.index+l[0].length!==s.length);)(!l||p.index+p[0].length!==l.index+l[0].length)&&(l=p),f.lastIndex=p.index+p[1].length+p[2].length;f.lastIndex=-1}if(l===null)return null;const c=l[2],h=l[3]||"0",u=l[4]||"0",d=o.includePrerelease&&l[5]?`-${l[5]}`:"",m=o.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${c}.${h}.${u}${d}${m}`,o)},ef}var tf,d1;function MZ(){if(d1)return tf;d1=1;class t{constructor(){this.max=1e3,this.map=new Map}get(n){const a=this.map.get(n);if(a!==void 0)return this.map.delete(n),this.map.set(n,a),a}delete(n){return this.map.delete(n)}set(n,a){if(!this.delete(n)&&a!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,a)}return this}}return tf=t,tf}var nf,m1;function vi(){if(m1)return nf;m1=1;const t=/\s+/g;class e{constructor(N,R){if(R=r(R),N instanceof e)return N.loose===!!R.loose&&N.includePrerelease===!!R.includePrerelease?N:new e(N.raw,R);if(N instanceof s)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=N.trim().replace(t," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(U=>!g(U[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&x(U[0])){this.set=[U];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const R=this.set[N];for(let $=0;$<R.length;$++)$>0&&(this.formatted+=" "),this.formatted+=R[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const $=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+N,U=a.get($);if(U)return U;const B=this.options.loose,T=B?c[h.HYPHENRANGELOOSE]:c[h.HYPHENRANGE];N=N.replace(T,q(this.options.includePrerelease)),o("hyphen replace",N),N=N.replace(c[h.COMPARATORTRIM],u),o("comparator trim",N),N=N.replace(c[h.TILDETRIM],d),o("tilde trim",N),N=N.replace(c[h.CARETTRIM],m),o("caret trim",N);let Y=N.split(" ").map(W=>w(W,this.options)).join(" ").split(/\s+/).map(W=>A(W,this.options));B&&(Y=Y.filter(W=>(o("loose invalid filter",W,this.options),!!W.match(c[h.COMPARATORLOOSE])))),o("range list",Y);const X=new Map,I=Y.map(W=>new s(W,this.options));for(const W of I){if(g(W))return[W];X.set(W.value,W)}X.size>1&&X.has("")&&X.delete("");const H=[...X.values()];return a.set($,H),H}intersects(N,R){if(!(N instanceof e))throw new TypeError("a Range is required");return this.set.some($=>b($,R)&&N.set.some(U=>b(U,R)&&$.every(B=>U.every(T=>B.intersects(T,R)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new l(N,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(M(this.set[R],N,this.options))return!0;return!1}}nf=e;const n=MZ(),a=new n,r=Yx(),s=rd(),o=id(),l=xn(),{safeRe:c,t:h,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:m}=oc(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=nd(),g=C=>C.value==="<0.0.0-0",x=C=>C.value==="",b=(C,N)=>{let R=!0;const $=C.slice();let U=$.pop();for(;R&&$.length;)R=$.every(B=>U.intersects(B,N)),U=$.pop();return R},w=(C,N)=>(o("comp",C,N),C=S(C,N),o("caret",C),C=E(C,N),o("tildes",C),C=O(C,N),o("xrange",C),C=j(C,N),o("stars",C),C),k=C=>!C||C.toLowerCase()==="x"||C==="*",E=(C,N)=>C.trim().split(/\s+/).map(R=>v(R,N)).join(" "),v=(C,N)=>{const R=N.loose?c[h.TILDELOOSE]:c[h.TILDE];return C.replace(R,($,U,B,T,Y)=>{o("tilde",C,$,U,B,T,Y);let X;return k(U)?X="":k(B)?X=`>=${U}.0.0 <${+U+1}.0.0-0`:k(T)?X=`>=${U}.${B}.0 <${U}.${+B+1}.0-0`:Y?(o("replaceTilde pr",Y),X=`>=${U}.${B}.${T}-${Y} <${U}.${+B+1}.0-0`):X=`>=${U}.${B}.${T} <${U}.${+B+1}.0-0`,o("tilde return",X),X})},S=(C,N)=>C.trim().split(/\s+/).map(R=>L(R,N)).join(" "),L=(C,N)=>{o("caret",C,N);const R=N.loose?c[h.CARETLOOSE]:c[h.CARET],$=N.includePrerelease?"-0":"";return C.replace(R,(U,B,T,Y,X)=>{o("caret",C,U,B,T,Y,X);let I;return k(B)?I="":k(T)?I=`>=${B}.0.0${$} <${+B+1}.0.0-0`:k(Y)?B==="0"?I=`>=${B}.${T}.0${$} <${B}.${+T+1}.0-0`:I=`>=${B}.${T}.0${$} <${+B+1}.0.0-0`:X?(o("replaceCaret pr",X),B==="0"?T==="0"?I=`>=${B}.${T}.${Y}-${X} <${B}.${T}.${+Y+1}-0`:I=`>=${B}.${T}.${Y}-${X} <${B}.${+T+1}.0-0`:I=`>=${B}.${T}.${Y}-${X} <${+B+1}.0.0-0`):(o("no pr"),B==="0"?T==="0"?I=`>=${B}.${T}.${Y}${$} <${B}.${T}.${+Y+1}-0`:I=`>=${B}.${T}.${Y}${$} <${B}.${+T+1}.0-0`:I=`>=${B}.${T}.${Y} <${+B+1}.0.0-0`),o("caret return",I),I})},O=(C,N)=>(o("replaceXRanges",C,N),C.split(/\s+/).map(R=>P(R,N)).join(" ")),P=(C,N)=>{C=C.trim();const R=N.loose?c[h.XRANGELOOSE]:c[h.XRANGE];return C.replace(R,($,U,B,T,Y,X)=>{o("xRange",C,$,U,B,T,Y,X);const I=k(B),H=I||k(T),W=H||k(Y),K=W;return U==="="&&K&&(U=""),X=N.includePrerelease?"-0":"",I?U===">"||U==="<"?$="<0.0.0-0":$="*":U&&K?(H&&(T=0),Y=0,U===">"?(U=">=",H?(B=+B+1,T=0,Y=0):(T=+T+1,Y=0)):U==="<="&&(U="<",H?B=+B+1:T=+T+1),U==="<"&&(X="-0"),$=`${U+B}.${T}.${Y}${X}`):H?$=`>=${B}.0.0${X} <${+B+1}.0.0-0`:W&&($=`>=${B}.${T}.0${X} <${B}.${+T+1}.0-0`),o("xRange return",$),$})},j=(C,N)=>(o("replaceStars",C,N),C.trim().replace(c[h.STAR],"")),A=(C,N)=>(o("replaceGTE0",C,N),C.trim().replace(c[N.includePrerelease?h.GTE0PRE:h.GTE0],"")),q=C=>(N,R,$,U,B,T,Y,X,I,H,W,K)=>(k($)?R="":k(U)?R=`>=${$}.0.0${C?"-0":""}`:k(B)?R=`>=${$}.${U}.0${C?"-0":""}`:T?R=`>=${R}`:R=`>=${R}${C?"-0":""}`,k(I)?X="":k(H)?X=`<${+I+1}.0.0-0`:k(W)?X=`<${I}.${+H+1}.0-0`:K?X=`<=${I}.${H}.${W}-${K}`:C?X=`<${I}.${H}.${+W+1}-0`:X=`<=${X}`,`${R} ${X}`.trim()),M=(C,N,R)=>{for(let $=0;$<C.length;$++)if(!C[$].test(N))return!1;if(N.prerelease.length&&!R.includePrerelease){for(let $=0;$<C.length;$++)if(o(C[$].semver),C[$].semver!==s.ANY&&C[$].semver.prerelease.length>0){const U=C[$].semver;if(U.major===N.major&&U.minor===N.minor&&U.patch===N.patch)return!0}return!1}return!0};return nf}var af,f1;function rd(){if(f1)return af;f1=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,d){if(d=n(d),u instanceof e){if(u.loose===!!d.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,d),this.options=d,this.loose=!!d.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const d=this.options.loose?a[r.COMPARATORLOOSE]:a[r.COMPARATOR],m=u.match(d);if(!m)throw new TypeError(`Invalid comparator: ${u}`);this.operator=m[1]!==void 0?m[1]:"",this.operator==="="&&(this.operator=""),m[2]?this.semver=new l(m[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new l(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,d){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,d).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,d).test(u.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,d)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,d)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}af=e;const n=Yx(),{safeRe:a,t:r}=oc(),s=K3(),o=id(),l=xn(),c=vi();return af}var rf,p1;function sd(){if(p1)return rf;p1=1;const t=vi();return rf=(n,a,r)=>{try{a=new t(a,r)}catch{return!1}return a.test(n)},rf}var sf,g1;function RZ(){if(g1)return sf;g1=1;const t=vi();return sf=(n,a)=>new t(n,a).set.map(r=>r.map(s=>s.value).join(" ").trim().split(" ")),sf}var of,x1;function PZ(){if(x1)return of;x1=1;const t=xn(),e=vi();return of=(a,r,s)=>{let o=null,l=null,c=null;try{c=new e(r,s)}catch{return null}return a.forEach(h=>{c.test(h)&&(!o||l.compare(h)===-1)&&(o=h,l=new t(o,s))}),o},of}var lf,y1;function DZ(){if(y1)return lf;y1=1;const t=xn(),e=vi();return lf=(a,r,s)=>{let o=null,l=null,c=null;try{c=new e(r,s)}catch{return null}return a.forEach(h=>{c.test(h)&&(!o||l.compare(h)===1)&&(o=h,l=new t(o,s))}),o},lf}var cf,b1;function BZ(){if(b1)return cf;b1=1;const t=xn(),e=vi(),n=ad();return cf=(r,s)=>{r=new e(r,s);let o=new t("0.0.0");if(r.test(o)||(o=new t("0.0.0-0"),r.test(o)))return o;o=null;for(let l=0;l<r.set.length;++l){const c=r.set[l];let h=null;c.forEach(u=>{const d=new t(u.semver.version);switch(u.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!h||n(d,h))&&(h=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${u.operator}`)}}),h&&(!o||n(o,h))&&(o=h)}return o&&r.test(o)?o:null},cf}var hf,w1;function FZ(){if(w1)return hf;w1=1;const t=vi();return hf=(n,a)=>{try{return new t(n,a).range||"*"}catch{return null}},hf}var uf,_1;function Kx(){if(_1)return uf;_1=1;const t=xn(),e=rd(),{ANY:n}=e,a=vi(),r=sd(),s=ad(),o=Xx(),l=Qx(),c=Jx();return uf=(u,d,m,f)=>{u=new t(u,f),d=new a(d,f);let p,g,x,b,w;switch(m){case">":p=s,g=l,x=o,b=">",w=">=";break;case"<":p=o,g=c,x=s,b="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(r(u,d,f))return!1;for(let k=0;k<d.set.length;++k){const E=d.set[k];let v=null,S=null;if(E.forEach(L=>{L.semver===n&&(L=new e(">=0.0.0")),v=v||L,S=S||L,p(L.semver,v.semver,f)?v=L:x(L.semver,S.semver,f)&&(S=L)}),v.operator===b||v.operator===w||(!S.operator||S.operator===b)&&g(u,S.semver))return!1;if(S.operator===w&&x(u,S.semver))return!1}return!0},uf}var df,v1;function HZ(){if(v1)return df;v1=1;const t=Kx();return df=(n,a,r)=>t(n,a,">",r),df}var mf,j1;function qZ(){if(j1)return mf;j1=1;const t=Kx();return mf=(n,a,r)=>t(n,a,"<",r),mf}var ff,T1;function $Z(){if(T1)return ff;T1=1;const t=vi();return ff=(n,a,r)=>(n=new t(n,r),a=new t(a,r),n.intersects(a,r)),ff}var pf,k1;function zZ(){if(k1)return pf;k1=1;const t=sd(),e=_i();return pf=(n,a,r)=>{const s=[];let o=null,l=null;const c=n.sort((m,f)=>e(m,f,r));for(const m of c)t(m,a,r)?(l=m,o||(o=m)):(l&&s.push([o,l]),l=null,o=null);o&&s.push([o,null]);const h=[];for(const[m,f]of s)m===f?h.push(m):!f&&m===c[0]?h.push("*"):f?m===c[0]?h.push(`<=${f}`):h.push(`${m} - ${f}`):h.push(`>=${m}`);const u=h.join(" || "),d=typeof a.raw=="string"?a.raw:String(a);return u.length<d.length?u:a},pf}var gf,E1;function WZ(){if(E1)return gf;E1=1;const t=vi(),e=rd(),{ANY:n}=e,a=sd(),r=_i(),s=(d,m,f={})=>{if(d===m)return!0;d=new t(d,f),m=new t(m,f);let p=!1;e:for(const g of d.set){for(const x of m.set){const b=c(g,x,f);if(p=p||b!==null,b)continue e}if(p)return!1}return!0},o=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],c=(d,m,f)=>{if(d===m)return!0;if(d.length===1&&d[0].semver===n){if(m.length===1&&m[0].semver===n)return!0;f.includePrerelease?d=o:d=l}if(m.length===1&&m[0].semver===n){if(f.includePrerelease)return!0;m=l}const p=new Set;let g,x;for(const O of d)O.operator===">"||O.operator===">="?g=h(g,O,f):O.operator==="<"||O.operator==="<="?x=u(x,O,f):p.add(O.semver);if(p.size>1)return null;let b;if(g&&x){if(b=r(g.semver,x.semver,f),b>0)return null;if(b===0&&(g.operator!==">="||x.operator!=="<="))return null}for(const O of p){if(g&&!a(O,String(g),f)||x&&!a(O,String(x),f))return null;for(const P of m)if(!a(O,String(P),f))return!1;return!0}let w,k,E,v,S=x&&!f.includePrerelease&&x.semver.prerelease.length?x.semver:!1,L=g&&!f.includePrerelease&&g.semver.prerelease.length?g.semver:!1;S&&S.prerelease.length===1&&x.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const O of m){if(v=v||O.operator===">"||O.operator===">=",E=E||O.operator==="<"||O.operator==="<=",g){if(L&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===L.major&&O.semver.minor===L.minor&&O.semver.patch===L.patch&&(L=!1),O.operator===">"||O.operator===">="){if(w=h(g,O,f),w===O&&w!==g)return!1}else if(g.operator===">="&&!a(g.semver,String(O),f))return!1}if(x){if(S&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===S.major&&O.semver.minor===S.minor&&O.semver.patch===S.patch&&(S=!1),O.operator==="<"||O.operator==="<="){if(k=u(x,O,f),k===O&&k!==x)return!1}else if(x.operator==="<="&&!a(x.semver,String(O),f))return!1}if(!O.operator&&(x||g)&&b!==0)return!1}return!(g&&E&&!x&&b!==0||x&&v&&!g&&b!==0||L||S)},h=(d,m,f)=>{if(!d)return m;const p=r(d.semver,m.semver,f);return p>0?d:p<0||m.operator===">"&&d.operator===">="?m:d},u=(d,m,f)=>{if(!d)return m;const p=r(d.semver,m.semver,f);return p<0?d:p>0||m.operator==="<"&&d.operator==="<="?m:d};return gf=s,gf}var xf,S1;function UZ(){if(S1)return xf;S1=1;const t=oc(),e=nd(),n=xn(),a=X3(),r=Xs(),s=_Z(),o=vZ(),l=jZ(),c=TZ(),h=kZ(),u=EZ(),d=SZ(),m=CZ(),f=_i(),p=AZ(),g=NZ(),x=Gx(),b=IZ(),w=LZ(),k=ad(),E=Xx(),v=J3(),S=Q3(),L=Jx(),O=Qx(),P=K3(),j=OZ(),A=rd(),q=vi(),M=sd(),C=RZ(),N=PZ(),R=DZ(),$=BZ(),U=FZ(),B=Kx(),T=HZ(),Y=qZ(),X=$Z(),I=zZ(),H=WZ();return xf={parse:r,valid:s,clean:o,inc:l,diff:c,major:h,minor:u,patch:d,prerelease:m,compare:f,rcompare:p,compareLoose:g,compareBuild:x,sort:b,rsort:w,gt:k,lt:E,eq:v,neq:S,gte:L,lte:O,cmp:P,coerce:j,Comparator:A,Range:q,satisfies:M,toComparators:C,maxSatisfying:N,minSatisfying:R,minVersion:$,validRange:U,outside:B,gtr:T,ltr:Y,intersects:X,simplifyRange:I,subset:H,SemVer:n,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers},xf}var C1;function VZ(){return C1||(C1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=$i(),n=UZ(),a=za();t.VersionStruct=(0,e.refine)((0,e.string)(),"Version",d=>(0,n.valid)(d)===null?`Expected SemVer version, got "${d}"`:!0),t.VersionRangeStruct=(0,e.refine)((0,e.string)(),"Version range",d=>(0,n.validRange)(d)===null?`Expected SemVer range, got "${d}"`:!0);function r(d){return(0,e.is)(d,t.VersionStruct)}t.isValidSemVerVersion=r;function s(d){return(0,e.is)(d,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(d){(0,a.assertStruct)(d,t.VersionStruct)}t.assertIsSemVerVersion=o;function l(d){(0,a.assertStruct)(d,t.VersionRangeStruct)}t.assertIsSemVerRange=l;function c(d,m){return(0,n.gt)(d,m)}t.gtVersion=c;function h(d,m){return(0,n.gtr)(d,m)}t.gtRange=h;function u(d,m){return(0,n.satisfies)(d,m,{includePrerelease:!0})}t.satisfiesVersionRange=u}(km)),km}var A1;function Ln(){return A1||(A1=1,function(t){var e=Xa&&Xa.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Xa&&Xa.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(za(),t),n(Y3(),t),n(Vx(),t),n(lZ(),t),n(cZ(),t),n(hZ(),t),n(uZ(),t),n(dZ(),t),n(V3(),t),n(td(),t),n(mZ(),t),n(fZ(),t),n(pZ(),t),n(Ux(),t),n(gZ(),t),n(xZ(),t),n(yZ(),t),n(bZ(),t),n(wZ(),t),n(VZ(),t)}(Xa)),Xa}var yf={},N1;function zi(){return N1||(N1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.getErrorStack=t.getErrorMessage=void 0;const e=Ln(),n=s=>typeof s=="string"?s:s instanceof Error||(0,e.isObject)(s)&&(0,e.hasProperty)(s,"message")&&typeof s.message=="string"?s.message:"Unknown error.";t.getErrorMessage=n;const a=s=>{if(s instanceof Error)return s.stack};t.getErrorStack=a;class r extends Error{constructor(o,l){super(o),this.name="ParserError";const c=(0,t.getErrorStack)(l);c&&(this.stack=c)}}t.ParserError=r}(yf)),yf}var bf={},Co={},I1;function YZ(){if(I1)return Co;I1=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.iterate=void 0;const t=Ln(),e=function*(n,a=32){for(let r=0;r<n.length;r+=a){const s=l=>{(0,t.assert)(l>=0,"Cannot skip a negative number of bytes."),(0,t.assert)(l%a===0,"Length must be a multiple of the size."),r+=l},o=n.subarray(r);yield{skip:s,value:o}}return{skip:()=>{},value:new Uint8Array}};return Co.iterate=e,Co}var Qa={},wf={},Ka={},Ji={},L1;function GZ(){if(L1)return Ji;L1=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.padEnd=Ji.padStart=Ji.set=void 0;const t=Ln(),e=32,n=(s,o,l)=>(0,t.concatBytes)([s.subarray(0,l),o,s.subarray(l+o.length)]);Ji.set=n;const a=(s,o=e)=>{const l=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([l,s])};Ji.padStart=a;const r=(s,o=e)=>{const l=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([s,l])};return Ji.padEnd=r,Ji}var O1;function Js(){return O1||(O1=1,function(t){var e=Ka&&Ka.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Ka&&Ka.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(GZ(),t)}(Ka)),Ka}var M1;function XZ(){return M1||(M1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.address=t.getAddress=void 0;const e=Ln(),n=zi(),a=Js(),r=s=>{const o=(0,e.createBytes)(s);return(0,e.assert)(o.length<=20,new n.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${o.length} bytes.`)),(0,a.padStart)(o,20)};t.getAddress=r,t.address={isDynamic:!1,isType:s=>s==="address",getByteLength(){return 32},encode({buffer:s,value:o,packed:l}){const c=(0,t.getAddress)(o);if(l)return(0,e.concatBytes)([s,c]);const h=(0,a.padStart)(c);return(0,e.concatBytes)([s,h])},decode({value:s}){return(0,e.add0x)((0,e.bytesToHex)(s.slice(12,32)))}}}(wf)),wf}var _f={},vf={},R1;function Zx(){return R1||(R1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fixedBytes=t.getByteLength=void 0;const e=Ln(),n=zi(),a=Js(),r=/^bytes([0-9]{1,2})$/u,s=o=>{const l=o.match(r)?.[1];(0,e.assert)(l,`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`);const c=Number(l);return(0,e.assert)(c>0&&c<=32,new n.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`)),c};t.getByteLength=s,t.fixedBytes={isDynamic:!1,isType(o){return r.test(o)},getByteLength(){return 32},encode({type:o,buffer:l,value:c,packed:h}){const u=(0,t.getByteLength)(o),d=(0,e.createBytes)(c);return(0,e.assert)(d.length<=u,new n.ParserError(`Expected a value of length ${u}, but received a value of length ${d.length}.`)),h?(0,e.concatBytes)([l,(0,a.padEnd)(d,u)]):(0,e.concatBytes)([l,(0,a.padEnd)(d)])},decode({type:o,value:l}){const c=(0,t.getByteLength)(o);return l.slice(0,c)}}}(vf)),vf}var jf={},P1;function Z3(){return P1||(P1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tuple=t.getTupleElements=void 0;const e=Ln(),n=zi(),a=ey(),r=/^\((.+)\)$/u,s=l=>r.test(l),o=l=>{(0,e.assert)(l.startsWith("(")&&l.endsWith(")"),new n.ParserError(`Invalid tuple type. Expected tuple type, but received "${l}".`));const c=[];let h="",u=0;for(let d=1;d<l.length-1;d++){const m=l[d];m===","&&u===0?(c.push(h.trim()),h=""):(h+=m,m==="("?u+=1:m===")"&&(u-=1))}return h.trim()&&c.push(h.trim()),c};t.getTupleElements=o,t.tuple={isDynamic(l){return(0,t.getTupleElements)(l).some(h=>{const u=(0,a.getParser)(h);return(0,a.isDynamicParser)(u,h)})},isType(l){return s(l)},getByteLength(l){return(0,a.isDynamicParser)(this,l)?32:(0,t.getTupleElements)(l).reduce((h,u)=>h+(0,a.getParser)(u).getByteLength(u),0)},encode({type:l,buffer:c,value:h,packed:u,tight:d}){const m=(0,t.getTupleElements)(l);return(0,a.pack)({types:m,values:h,byteArray:c,packed:u,tight:d})},decode({type:l,value:c,skip:h}){const u=(0,t.getTupleElements)(l),d=this.getByteLength(l)-32;return h(d),(0,a.unpack)(u,c)}}}(jf)),jf}var D1;function JZ(){return D1||(D1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.array=t.getTupleType=t.getArrayType=t.isArrayType=void 0;const e=Ln(),n=zi(),a=ey(),r=Js(),s=Zx(),o=Z3(),l=/^(?<type>.*)\[(?<length>\d*?)\]$/u,c=d=>l.test(d);t.isArrayType=c;const h=d=>{const m=d.match(l);return(0,e.assert)(m?.groups?.type,new n.ParserError(`Invalid array type. Expected an array type, but received "${d}".`)),[m.groups.type,m.groups.length?parseInt(m.groups.length,10):void 0]};t.getArrayType=h;const u=(d,m)=>`(${new Array(m).fill(d).join(",")})`;t.getTupleType=u,t.array={isDynamic(d){const[m,f]=(0,t.getArrayType)(d);return f===void 0||(0,a.isDynamicParser)((0,a.getParser)(m),m)},isType(d){return(0,t.isArrayType)(d)},getByteLength(d){(0,e.assert)((0,t.isArrayType)(d),new n.ParserError(`Expected an array type, but received "${d}".`));const[m,f]=(0,t.getArrayType)(d);return!(0,a.isDynamicParser)(this,d)&&f!==void 0?o.tuple.getByteLength((0,t.getTupleType)(m,f)):32},encode({type:d,buffer:m,value:f,packed:p,tight:g}){const[x,b]=(0,t.getArrayType)(d);if((0,e.assert)(!p||!(0,t.isArrayType)(x),new n.ParserError("Cannot pack nested arrays.")),p&&(0,a.isDynamicParser)((0,a.getParser)(x),x))return(0,a.pack)({types:new Array(f.length).fill(x),values:f,byteArray:m,packed:p,arrayPacked:!0,tight:g});if(b)return(0,e.assert)(b===f.length,new n.ParserError(`Array length does not match type length. Expected a length of ${b}, but received ${f.length}.`)),o.tuple.encode({type:(0,t.getTupleType)(x,b),buffer:m,value:f,packed:s.fixedBytes.isType(x)&&g,tight:g});if(p)return(0,a.pack)({types:new Array(f.length).fill(x),values:f,byteArray:m,packed:s.fixedBytes.isType(x)&&g,arrayPacked:!0,tight:g});const w=(0,r.padStart)((0,e.numberToBytes)(f.length));return(0,a.pack)({types:new Array(f.length).fill(x),values:f,byteArray:(0,e.concatBytes)([m,w]),packed:p,tight:g})},decode({type:d,value:m,...f}){const[p,g]=(0,t.getArrayType)(d);if(g){const b=o.tuple.decode({type:(0,t.getTupleType)(p,g),value:m,...f});return(0,e.assert)(b.length===g,new n.ParserError(`Array length does not match type length. Expected a length of ${g}, but received ${b.length}.`)),b}const x=(0,e.bytesToNumber)(m.subarray(0,32));return(0,a.unpack)(new Array(x).fill(p),m.subarray(32))}}}(_f)),_f}var Tf={},kf={},B1;function eL(){return B1||(B1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.number=t.getBigInt=t.assertNumberLength=t.getLength=t.isSigned=void 0;const e=Ln(),n=zi(),a=Js(),r=/^u?int(?<length>[0-9]*)?$/u,s=h=>!h.startsWith("u");t.isSigned=s;const o=h=>{if(h==="int"||h==="uint")return 256;const u=h.match(r);(0,e.assert)(u?.groups?.length,new n.ParserError(`Invalid number type. Expected a number type, but received "${h}".`));const d=parseInt(u.groups.length,10);return(0,e.assert)(d>=8&&d<=256,new n.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${h}".`)),(0,e.assert)(d%8===0,new n.ParserError(`Invalid number length. Expected a multiple of 8, but received "${h}".`)),d};t.getLength=o;const l=(h,u)=>{const d=(0,t.getLength)(u),m=BigInt(2)**BigInt(d-((0,t.isSigned)(u)?1:0))-BigInt(1);if((0,t.isSigned)(u)){(0,e.assert)(h>=-(m+BigInt(1))&&h<=m,new n.ParserError(`Number "${h}" is out of range for type "${u}".`));return}(0,e.assert)(h<=m,new n.ParserError(`Number "${h}" is out of range for type "${u}".`))};t.assertNumberLength=l;const c=h=>{try{return(0,e.createBigInt)(h)}catch{throw new n.ParserError(`Invalid number. Expected a valid number value, but received "${h}".`)}};t.getBigInt=c,t.number={isDynamic:!1,isType(h){return r.test(h)},getByteLength(){return 32},encode({type:h,buffer:u,value:d,packed:m}){const f=(0,t.getBigInt)(d);if((0,t.assertNumberLength)(f,h),(0,t.isSigned)(h)){if(m){const p=(0,t.getLength)(h)/8;return(0,e.concatBytes)([u,(0,e.signedBigIntToBytes)(f,p)])}return(0,e.concatBytes)([u,(0,a.padStart)((0,e.signedBigIntToBytes)(f,32))])}if(m){const p=(0,t.getLength)(h)/8;return(0,e.concatBytes)([u,(0,a.padStart)((0,e.bigIntToBytes)(f),p)])}return(0,e.concatBytes)([u,(0,a.padStart)((0,e.bigIntToBytes)(f))])},decode({type:h,value:u}){const d=u.subarray(0,32);if((0,t.isSigned)(h)){const f=(0,e.bytesToSignedBigInt)(d);return(0,t.assertNumberLength)(f,h),f}const m=(0,e.bytesToBigInt)(d);return(0,t.assertNumberLength)(m,h),m}}}(kf)),kf}var F1;function QZ(){return F1||(F1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bool=t.getBooleanValue=void 0;const e=$i(),n=Ln(),a=zi(),r=eL(),s=(0,e.coerce)((0,e.boolean)(),(0,e.union)([(0,e.literal)("true"),(0,e.literal)("false")]),l=>l==="true"),o=l=>{try{return(0,e.create)(l,s)?BigInt(1):BigInt(0)}catch{throw new a.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${l}".`)}};t.getBooleanValue=o,t.bool={isDynamic:!1,isType:l=>l==="bool",getByteLength(){return 32},encode({buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getBooleanValue)(c);return h?(0,n.concatBytes)([l,(0,n.bigIntToBytes)(d)]):r.number.encode({type:"uint256",buffer:l,value:d,packed:h,tight:u})},decode(l){return r.number.decode({...l,type:"uint256"})===BigInt(1)}}}(Tf)),Tf}var Ao={},H1;function tL(){if(H1)return Ao;H1=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.bytes=void 0;const t=Ln(),e=Js();return Ao.bytes={isDynamic:!0,isType:n=>n==="bytes",getByteLength(){return 32},encode({buffer:n,value:a,packed:r}){const s=(0,t.createBytes)(a);if(r)return(0,t.concatBytes)([n,s]);const o=Math.ceil(s.byteLength/32)*32;return(0,t.concatBytes)([n,(0,e.padStart)((0,t.numberToBytes)(s.byteLength)),(0,e.padEnd)(s,o)])},decode({value:n}){const a=n.subarray(0,32),r=(0,t.bytesToNumber)(a);return n.slice(32,32+r)}},Ao}var Ef={},q1;function KZ(){return q1||(q1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.getFunction=void 0;const e=$i(),n=Ln(),a=zi(),r=Zx(),s=(0,e.coerce)((0,e.object)({address:n.StrictHexStruct,selector:n.StrictHexStruct}),(0,e.union)([n.StrictHexStruct,(0,e.instance)(Uint8Array)]),l=>{const c=(0,n.createBytes)(l);return(0,n.assert)(c.length===24,new a.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${c.length} bytes.`)),{address:(0,n.bytesToHex)(c.subarray(0,20)),selector:(0,n.bytesToHex)(c.subarray(20,24))}}),o=l=>{const c=(0,e.create)(l,s);return(0,n.concatBytes)([(0,n.hexToBytes)(c.address),(0,n.hexToBytes)(c.selector)])};t.getFunction=o,t.fn={isDynamic:!1,isType:l=>l==="function",getByteLength(){return 32},encode({buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getFunction)(c);return r.fixedBytes.encode({type:"bytes24",buffer:l,value:d,packed:h,tight:u})},decode({value:l}){return{address:(0,n.bytesToHex)(l.slice(0,20)),selector:(0,n.bytesToHex)(l.slice(20,24))}}}}(Ef)),Ef}var Sf={},$1;function ZZ(){return $1||($1=1,Object.defineProperty(Sf,"__esModule",{value:!0})),Sf}var No={},z1;function eee(){if(z1)return No;z1=1,Object.defineProperty(No,"__esModule",{value:!0}),No.string=void 0;const t=Ln(),e=tL();return No.string={isDynamic:!0,isType:n=>n==="string",getByteLength(){return 32},encode({buffer:n,value:a,packed:r,tight:s}){return e.bytes.encode({type:"bytes",buffer:n,value:(0,t.stringToBytes)(a),packed:r,tight:s})},decode(n){return(0,t.bytesToString)(e.bytes.decode(n))}},No}var W1;function tee(){return W1||(W1=1,function(t){var e=Qa&&Qa.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Qa&&Qa.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(XZ(),t),n(JZ(),t),n(QZ(),t),n(tL(),t),n(Zx(),t),n(KZ(),t),n(eL(),t),n(ZZ(),t),n(eee(),t),n(Z3(),t)}(Qa)),Qa}var U1;function ey(){return U1||(U1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.isDynamicParser=t.getParser=void 0;const e=Ln(),n=zi(),a=YZ(),r=tee(),s=Js(),o=u=>{const d={address:r.address,array:r.array,bool:r.bool,bytes:r.bytes,fixedBytes:r.fixedBytes,function:r.fn,number:r.number,string:r.string,tuple:r.tuple},m=d[u];if(m)return m;const f=Object.values(d).find(p=>p.isType(u));if(f)return f;throw new n.ParserError(`The type "${u}" is not supported.`)};t.getParser=o;const l=(u,d)=>{const{isDynamic:m}=u;return typeof m=="function"?m(d):m};t.isDynamicParser=l;const c=({types:u,values:d,packed:m=!1,tight:f=!1,arrayPacked:p=!1,byteArray:g=new Uint8Array})=>{(0,e.assert)(u.length===d.length,new n.ParserError(`The number of types (${u.length}) does not match the number of values (${d.length}).`));const{staticBuffer:x,dynamicBuffer:b,pointers:w}=u.reduce(({staticBuffer:v,dynamicBuffer:S,pointers:L},O,P)=>{const j=(0,t.getParser)(O),A=d[P];if(m||p||!(0,t.isDynamicParser)(j,O))return{staticBuffer:j.encode({buffer:v,value:A,type:O,packed:m,tight:f}),dynamicBuffer:S,pointers:L};const q=(0,e.concatBytes)([v,new Uint8Array(32)]),M=j.encode({buffer:S,value:A,type:O,packed:m,tight:f});return{staticBuffer:q,dynamicBuffer:M,pointers:[...L,{position:v.length,pointer:S.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,e.assert)(!m&&!p||b.length===0,new n.ParserError("Invalid pack state."));const k=x.length,E=w.reduce((v,{pointer:S,position:L})=>{const O=(0,s.padStart)((0,e.numberToBytes)(k+S));return(0,s.set)(v,O,L)},x);return(0,e.concatBytes)([g,E,b])};t.pack=c;const h=(u,d)=>{const m=(0,a.iterate)(d);return u.map(f=>{const{value:{value:p,skip:g},done:x}=m.next();(0,e.assert)(!x,new n.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${f}".`));const b=(0,t.getParser)(f);if((0,t.isDynamicParser)(b,f)){const k=(0,e.bytesToNumber)(p.subarray(0,32)),E=d.subarray(k);return b.decode({type:f,value:E,skip:g})}return b.decode({type:f,value:p,skip:g})})};t.unpack=h}(bf)),bf}var V1;function nee(){return V1||(V1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSingle=t.decode=t.encodePacked=t.encodeSingle=t.encode=void 0;const e=Ln(),n=zi(),a=ey(),r=(h,u,d,m)=>{try{return(0,a.pack)({types:h,values:u,packed:d,tight:m})}catch(f){throw f instanceof n.ParserError?new n.ParserError(`Unable to encode value: ${f.message}`,f):new n.ParserError(`An unexpected error occurred: ${(0,n.getErrorMessage)(f)}`,f)}};t.encode=r;const s=(h,u)=>(0,t.encode)([h],[u]);t.encodeSingle=s;const o=(h,u,d)=>(0,t.encode)(h,u,!0,d);t.encodePacked=o;const l=(h,u)=>{const d=(0,e.createBytes)(u);try{return(0,a.unpack)(h,d)}catch(m){throw m instanceof n.ParserError?new n.ParserError(`Unable to decode value: ${m.message}`,m):new n.ParserError(`An unexpected error occurred: ${(0,n.getErrorMessage)(m)}`,m)}};t.decode=l;const c=(h,u)=>{const d=(0,t.decode)([h],u);return(0,e.assert)(d.length===1,new n.ParserError("Decoded value array has unexpected length.")),d[0]};t.decodeSingle=c}(dm)),dm}var Za={},Cf={},Y1;function iee(){return Y1||(Y1=1,Object.defineProperty(Cf,"__esModule",{value:!0})),Cf}var G1;function aee(){return G1||(G1=1,function(t){var e=Za&&Za.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Za&&Za.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(iee(),t)}(Za)),Za}var X1;function nL(){return X1||(X1=1,function(t){var e=Ga&&Ga.__createBinding||(Object.create?function(a,r,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(r,s);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[s]}}),Object.defineProperty(a,o,l)}:function(a,r,s,o){o===void 0&&(o=s),a[o]=r[s]}),n=Ga&&Ga.__exportStar||function(a,r){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&e(r,a,s)};Object.defineProperty(t,"__esModule",{value:!0}),n(nee(),t),n(zi(),t),n(aee(),t)}(Ga)),Ga}var hi={},Af={},Je={},J1;function ree(){if(J1)return Je;J1=1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(Je,"__esModule",{value:!0}),Je.notImplemented=Je.bitMask=void 0,Je.isBytes=n,Je.abytes=a,Je.abool=r,Je.numberToHexUnpadded=s,Je.hexToNumber=o,Je.bytesToHex=h,Je.hexToBytes=m,Je.bytesToNumberBE=f,Je.bytesToNumberLE=p,Je.numberToBytesBE=g,Je.numberToBytesLE=x,Je.numberToVarBytesBE=b,Je.ensureBytes=w,Je.concatBytes=k,Je.equalBytes=E,Je.utf8ToBytes=v,Je.inRange=L,Je.aInRange=O,Je.bitLen=P,Je.bitGet=j,Je.bitSet=A,Je.createHmacDrbg=N,Je.validateObject=$,Je.memoized=B;const t=BigInt(0),e=BigInt(1);function n(T){return T instanceof Uint8Array||ArrayBuffer.isView(T)&&T.constructor.name==="Uint8Array"}function a(T){if(!n(T))throw new Error("Uint8Array expected")}function r(T,Y){if(typeof Y!="boolean")throw new Error(T+" boolean expected, got "+Y)}function s(T){const Y=T.toString(16);return Y.length&1?"0"+Y:Y}function o(T){if(typeof T!="string")throw new Error("hex string expected, got "+typeof T);return T===""?t:BigInt("0x"+T)}const l=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",c=Array.from({length:256},(T,Y)=>Y.toString(16).padStart(2,"0"));function h(T){if(a(T),l)return T.toHex();let Y="";for(let X=0;X<T.length;X++)Y+=c[T[X]];return Y}const u={_0:48,_9:57,A:65,F:70,a:97,f:102};function d(T){if(T>=u._0&&T<=u._9)return T-u._0;if(T>=u.A&&T<=u.F)return T-(u.A-10);if(T>=u.a&&T<=u.f)return T-(u.a-10)}function m(T){if(typeof T!="string")throw new Error("hex string expected, got "+typeof T);if(l)return Uint8Array.fromHex(T);const Y=T.length,X=Y/2;if(Y%2)throw new Error("hex string expected, got unpadded hex of length "+Y);const I=new Uint8Array(X);for(let H=0,W=0;H<X;H++,W+=2){const K=d(T.charCodeAt(W)),le=d(T.charCodeAt(W+1));if(K===void 0||le===void 0){const he=T[W]+T[W+1];throw new Error('hex string expected, got non-hex character "'+he+'" at index '+W)}I[H]=K*16+le}return I}function f(T){return o(h(T))}function p(T){return a(T),o(h(Uint8Array.from(T).reverse()))}function g(T,Y){return m(T.toString(16).padStart(Y*2,"0"))}function x(T,Y){return g(T,Y).reverse()}function b(T){return m(s(T))}function w(T,Y,X){let I;if(typeof Y=="string")try{I=m(Y)}catch(W){throw new Error(T+" must be hex string or Uint8Array, cause: "+W)}else if(n(Y))I=Uint8Array.from(Y);else throw new Error(T+" must be hex string or Uint8Array");const H=I.length;if(typeof X=="number"&&H!==X)throw new Error(T+" of length "+X+" expected, got "+H);return I}function k(...T){let Y=0;for(let I=0;I<T.length;I++){const H=T[I];a(H),Y+=H.length}const X=new Uint8Array(Y);for(let I=0,H=0;I<T.length;I++){const W=T[I];X.set(W,H),H+=W.length}return X}function E(T,Y){if(T.length!==Y.length)return!1;let X=0;for(let I=0;I<T.length;I++)X|=T[I]^Y[I];return X===0}function v(T){if(typeof T!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(T))}const S=T=>typeof T=="bigint"&&t<=T;function L(T,Y,X){return S(T)&&S(Y)&&S(X)&&Y<=T&&T<X}function O(T,Y,X,I){if(!L(Y,X,I))throw new Error("expected valid "+T+": "+X+" <= n < "+I+", got "+Y)}function P(T){let Y;for(Y=0;T>t;T>>=e,Y+=1);return Y}function j(T,Y){return T>>BigInt(Y)&e}function A(T,Y,X){return T|(X?e:t)<<BigInt(Y)}const q=T=>(e<<BigInt(T))-e;Je.bitMask=q;const M=T=>new Uint8Array(T),C=T=>Uint8Array.from(T);function N(T,Y,X){if(typeof T!="number"||T<2)throw new Error("hashLen must be a number");if(typeof Y!="number"||Y<2)throw new Error("qByteLen must be a number");if(typeof X!="function")throw new Error("hmacFn must be a function");let I=M(T),H=M(T),W=0;const K=()=>{I.fill(1),H.fill(0),W=0},le=(...Ce)=>X(H,I,...Ce),he=(Ce=M(0))=>{H=le(C([0]),Ce),I=le(),Ce.length!==0&&(H=le(C([1]),Ce),I=le())},ue=()=>{if(W++>=1e3)throw new Error("drbg: tried 1000 values");let Ce=0;const tt=[];for(;Ce<Y;){I=le();const nt=I.slice();tt.push(nt),Ce+=I.length}return k(...tt)};return(Ce,tt)=>{K(),he(Ce);let nt;for(;!(nt=tt(ue()));)he();return K(),nt}}const R={bigint:T=>typeof T=="bigint",function:T=>typeof T=="function",boolean:T=>typeof T=="boolean",string:T=>typeof T=="string",stringOrUint8Array:T=>typeof T=="string"||n(T),isSafeInteger:T=>Number.isSafeInteger(T),array:T=>Array.isArray(T),field:(T,Y)=>Y.Fp.isValid(T),hash:T=>typeof T=="function"&&Number.isSafeInteger(T.outputLen)};function $(T,Y,X={}){const I=(H,W,K)=>{const le=R[W];if(typeof le!="function")throw new Error("invalid validator function");const he=T[H];if(!(K&&he===void 0)&&!le(he,T))throw new Error("param "+String(H)+" is invalid. Expected "+W+", got "+he)};for(const[H,W]of Object.entries(Y))I(H,W,!1);for(const[H,W]of Object.entries(X))I(H,W,!0);return T}const U=()=>{throw new Error("not implemented")};Je.notImplemented=U;function B(T){const Y=new WeakMap;return(X,...I)=>{const H=Y.get(X);if(H!==void 0)return H;const W=T(X,...I);return Y.set(X,W),W}}return Je}var ui={},Q1;function see(){if(Q1)return ui;Q1=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.aoutput=ui.anumber=ui.aexists=ui.abytes=void 0;const t=iu();return ui.abytes=t.abytes,ui.aexists=t.aexists,ui.anumber=t.anumber,ui.aoutput=t.aoutput,ui}var K1;function iL(){return K1||(K1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.assertBytes=t.assertBool=t.utf8ToBytes=t.toHex=t.createView=t.concatBytes=t.bytesToHex=void 0,t.bytesToUtf8=s,t.hexToBytes=o,t.equalsBytes=l,t.wrapHash=c;const e=ree();Object.defineProperty(t,"assertBool",{enumerable:!0,get:function(){return e.abool}});const n=see();Object.defineProperty(t,"assertBytes",{enumerable:!0,get:function(){return n.abytes}});const a=iu();var r=iu();Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return r.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return r.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return r.createView}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return r.bytesToHex}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return r.utf8ToBytes}});function s(h){if(!(h instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof h}`);return new TextDecoder().decode(h)}function o(h){const u=h.startsWith("0x")?h.substring(2):h;return(0,a.hexToBytes)(u)}function l(h,u){if(h.length!==u.length)return!1;for(let d=0;d<h.length;d++)if(h[d]!==u[d])return!1;return!0}function c(h){return u=>((0,n.abytes)(u),h(u))}}(Af)),Af}var Z1;function lc(){if(Z1)return hi;Z1=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.compare=hi.concat=hi.toHex=hi.toBytes=void 0;const t=iL();function e(s){return s instanceof Uint8Array?s:typeof s=="string"?(0,t.hexToBytes)(s):new Uint8Array(s)}hi.toBytes=e;function n(s){return typeof s=="string"?((0,t.hexToBytes)(s),s.replace(/^(0x)?/,"0x")):s instanceof Uint8Array?"0x"+(0,t.bytesToHex)(s):"0x"+(0,t.bytesToHex)(new Uint8Array(s))}hi.toHex=n;function a(s){return(0,t.concatBytes)(...s.map(e))}hi.concat=a;function r(s,o){const l=BigInt(n(s))-BigInt(n(o));return l>0?1:l<0?-1:0}return hi.compare=r,hi}var $t={},Qi={},di={},e2;function oee(){if(e2)return di;e2=1,Object.defineProperty(di,"__esModule",{value:!0}),di.keccak512=di.keccak384=di.keccak256=di.keccak224=void 0;const t=G3(),e=iL();return di.keccak224=(0,e.wrapHash)(t.keccak_224),di.keccak256=(()=>{const n=(0,e.wrapHash)(t.keccak_256);return n.create=t.keccak_256.create,n})(),di.keccak384=(0,e.wrapHash)(t.keccak_384),di.keccak512=(0,e.wrapHash)(t.keccak_512),di}var t2;function aL(){if(t2)return Qi;t2=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.standardNodeHash=Qi.standardLeafHash=Qi.keccak256=void 0;const t=nL(),e=oee(),n=lc();function a(o){return(0,n.toHex)((0,e.keccak256)((0,n.toBytes)(o)))}Qi.keccak256=a;function r(o,l){return a(a((0,t.encode)(o,l)))}Qi.standardLeafHash=r;function s(o,l){return a((0,n.concat)([o,l].sort(n.compare)))}return Qi.standardNodeHash=s,Qi}var Pn={},n2;function od(){if(n2)return Pn;n2=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.invariant=Pn.validateArgument=Pn.InvalidArgumentError=Pn.InvariantError=Pn.throwError=void 0;function t(s){throw new Error(s)}Pn.throwError=t;class e extends Error{constructor(o){super(o),this.name="InvariantError"}}Pn.InvariantError=e;class n extends Error{constructor(o){super(o),this.name="InvalidArgumentError"}}Pn.InvalidArgumentError=n;function a(s,o){if(!s)throw new n(o)}Pn.validateArgument=a;function r(s,o){if(!s)throw new e(o)}return Pn.invariant=r,Pn}var i2;function ty(){if(i2)return $t;i2=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.renderMerkleTree=$t.isValidMerkleTree=$t.processMultiProof=$t.getMultiProof=$t.processProof=$t.getProof=$t.makeMerkleTree=void 0;const t=lc(),e=aL(),n=od(),a=E=>2*E+1,r=E=>2*E+2,s=E=>E>0?Math.floor((E-1)/2):(0,n.throwError)("Root has no parent"),o=E=>E>0?E-(-1)**(E%2):(0,n.throwError)("Root has no siblings"),l=(E,v)=>v>=0&&v<E.length,c=(E,v)=>l(E,a(v)),h=(E,v)=>l(E,v)&&!c(E,v),u=E=>(0,t.toBytes)(E).length===32,d=(E,v)=>void(h(E,v)||(0,n.throwError)("Index is not a leaf")),m=E=>void(u(E)||(0,n.throwError)("Merkle tree nodes must be Uint8Array of length 32"));function f(E,v=e.standardNodeHash){E.forEach(m),(0,n.validateArgument)(E.length!==0,"Expected non-zero number of leaves");const S=new Array(2*E.length-1);for(const[L,O]of E.entries())S[S.length-1-L]=(0,t.toHex)(O);for(let L=S.length-1-E.length;L>=0;L--)S[L]=v(S[a(L)],S[r(L)]);return S}$t.makeMerkleTree=f;function p(E,v){d(E,v);const S=[];for(;v>0;)S.push((0,t.toHex)(E[o(v)])),v=s(v);return S}$t.getProof=p;function g(E,v,S=e.standardNodeHash){return m(E),v.forEach(m),(0,t.toHex)(v.reduce(S,E))}$t.processProof=g;function x(E,v){v.forEach(P=>d(E,P)),v.sort((P,j)=>j-P),(0,n.validateArgument)(v.slice(1).every((P,j)=>P!==v[j]),"Cannot prove duplicated index");const S=Array.from(v),L=[],O=[];for(;S.length>0&&S[0]>0;){const P=S.shift(),j=o(P),A=s(P);j===S[0]?(O.push(!0),S.shift()):(O.push(!1),L.push((0,t.toHex)(E[j]))),S.push(A)}return v.length===0&&L.push((0,t.toHex)(E[0])),{leaves:v.map(P=>(0,t.toHex)(E[P])),proof:L,proofFlags:O}}$t.getMultiProof=x;function b(E,v=e.standardNodeHash){E.leaves.forEach(m),E.proof.forEach(m),(0,n.validateArgument)(E.proof.length>=E.proofFlags.filter(O=>!O).length,"Invalid multiproof format"),(0,n.validateArgument)(E.leaves.length+E.proof.length===E.proofFlags.length+1,"Provided leaves and multiproof are not compatible");const S=Array.from(E.leaves),L=Array.from(E.proof);for(const O of E.proofFlags){const P=S.shift(),j=O?S.shift():L.shift();(0,n.invariant)(P!==void 0&&j!==void 0),S.push(v(P,j))}return(0,n.invariant)(S.length+L.length===1),(0,t.toHex)(S.pop()??L.shift())}$t.processMultiProof=b;function w(E,v=e.standardNodeHash){for(const[S,L]of E.entries()){if(!u(L))return!1;const O=a(S),P=r(S);if(P>=E.length){if(O<E.length)return!1}else if((0,t.compare)(L,v(E[O],E[P])))return!1}return E.length>0}$t.isValidMerkleTree=w;function k(E){(0,n.validateArgument)(E.length!==0,"Expected non-zero number of nodes");const v=[[0,[]]],S=[];for(;v.length>0;){const[L,O]=v.pop();S.push(O.slice(0,-1).map(P=>["   ","│  "][P]).join("")+O.slice(-1).map(P=>["└─ ","├─ "][P]).join("")+L+") "+(0,t.toHex)(E[L])),r(L)<E.length&&(v.push([r(L),O.concat(0)]),v.push([a(L),O.concat(1)]))}return S.join(`
`)}return $t.renderMerkleTree=k,$t}var Io={},Lo={},a2;function lee(){return a2||(a2=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.defaultOptions=void 0,Lo.defaultOptions={sortLeaves:!0}),Lo}var r2;function rL(){if(r2)return Io;r2=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.MerkleTreeImpl=void 0;const t=lc(),e=ty(),n=lee(),a=od();class r{constructor(o,l,c,h){this.tree=o,this.values=l,this.leafHash=c,this.nodeHash=h,(0,a.validateArgument)(l.every(({value:u})=>typeof u!="number"),"Leaf values cannot be numbers"),this.hashLookup=Object.fromEntries(l.map(({treeIndex:u},d)=>[o[u],d]))}static prepare(o,l={},c,h){const u=l.sortLeaves??n.defaultOptions.sortLeaves,d=o.map((p,g)=>({value:p,valueIndex:g,hash:c(p)}));u&&d.sort((p,g)=>(0,t.compare)(p.hash,g.hash));const m=(0,e.makeMerkleTree)(d.map(p=>p.hash),h),f=o.map(p=>({value:p,treeIndex:0}));for(const[p,{valueIndex:g}]of d.entries())f[g].treeIndex=m.length-p-1;return[m,f]}get root(){return this.tree[0]}get length(){return this.values.length}at(o){return this.values.at(o)?.value}render(){return(0,e.renderMerkleTree)(this.tree)}*entries(){for(const[o,{value:l}]of this.values.entries())yield[o,l]}validate(){this.values.forEach((o,l)=>this._validateValueAt(l)),(0,a.invariant)((0,e.isValidMerkleTree)(this.tree,this.nodeHash),"Merkle tree is invalid")}leafLookup(o){const l=this.hashLookup[this.leafHash(o)];return(0,a.validateArgument)(typeof l<"u","Leaf is not in tree"),l}getProof(o){const l=typeof o=="number"?o:this.leafLookup(o);this._validateValueAt(l);const{treeIndex:c}=this.values[l],h=(0,e.getProof)(this.tree,c);return(0,a.invariant)(this._verify(this.tree[c],h),"Unable to prove value"),h}getMultiProof(o){const l=o.map(u=>typeof u=="number"?u:this.leafLookup(u));for(const u of l)this._validateValueAt(u);const c=l.map(u=>this.values[u].treeIndex),h=(0,e.getMultiProof)(this.tree,c);return(0,a.invariant)(this._verifyMultiProof(h),"Unable to prove values"),{leaves:h.leaves.map(u=>this.values[this.hashLookup[u]].value),proof:h.proof,proofFlags:h.proofFlags}}verify(o,l){return this._verify(this._leafHash(o),l)}verifyMultiProof(o){return this._verifyMultiProof({leaves:o.leaves.map(l=>this._leafHash(l)),proof:o.proof,proofFlags:o.proofFlags})}_validateValueAt(o){const l=this.values[o];(0,a.validateArgument)(l!==void 0,"Index out of bounds"),(0,a.invariant)(this.tree[l.treeIndex]===this.leafHash(l.value),"Merkle tree does not contain the expected value")}_leafHash(o){if(typeof o=="number"){const l=this.values[o];(0,a.validateArgument)(l!==void 0,"Index out of bounds"),o=l.value}return this.leafHash(o)}_verify(o,l){return this.root===(0,e.processProof)(o,l,this.nodeHash)}_verifyMultiProof(o){return this.root===(0,e.processMultiProof)(o,this.nodeHash)}}return Io.MerkleTreeImpl=r,Io}var s2;function cee(){if(s2)return Ya;s2=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.SimpleMerkleTree=Ya.formatLeaf=void 0;const t=nL(),e=lc(),n=ty(),a=rL(),r=od();function s(l){return(0,e.toHex)((0,t.encode)(["bytes32"],[l]))}Ya.formatLeaf=s;class o extends a.MerkleTreeImpl{static of(c,h={}){const[u,d]=a.MerkleTreeImpl.prepare(c,h,s,h.nodeHash);return new o(u,d,s,h.nodeHash)}static load(c,h){(0,r.validateArgument)(c.format==="simple-v1",`Unknown format '${c.format}'`),(0,r.validateArgument)(h==null!=(c.hash=="custom"),h?"Data does not expect a custom node hashing function":"Data expects a custom node hashing function");const u=new o(c.tree,c.values,s,h);return u.validate(),u}static verify(c,h,u,d){return(0,e.toHex)(c)===(0,n.processProof)(s(h),u,d)}static verifyMultiProof(c,h,u){return(0,e.toHex)(c)===(0,n.processMultiProof)(h,u)}dump(){return{format:"simple-v1",tree:this.tree,values:this.values.map(({value:c,treeIndex:h})=>({value:(0,e.toHex)(c),treeIndex:h})),...this.nodeHash?{hash:"custom"}:{}}}}return Ya.SimpleMerkleTree=o,Ya}var Oo={},o2;function hee(){if(o2)return Oo;o2=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.StandardMerkleTree=void 0;const t=lc(),e=ty(),n=rL(),a=aL(),r=od();class s extends n.MerkleTreeImpl{constructor(l,c,h){super(l,c,u=>(0,a.standardLeafHash)(h,u)),this.tree=l,this.values=c,this.leafEncoding=h}static of(l,c,h={}){const[u,d]=n.MerkleTreeImpl.prepare(l,h,m=>(0,a.standardLeafHash)(c,m));return new s(u,d,c)}static load(l){(0,r.validateArgument)(l.format==="standard-v1",`Unknown format '${l.format}'`),(0,r.validateArgument)(l.leafEncoding!==void 0,"Expected leaf encoding");const c=new s(l.tree,l.values,l.leafEncoding);return c.validate(),c}static verify(l,c,h,u){return(0,t.toHex)(l)===(0,e.processProof)((0,a.standardLeafHash)(c,h),u)}static verifyMultiProof(l,c,h){return(0,t.toHex)(l)===(0,e.processMultiProof)({leaves:h.leaves.map(u=>(0,a.standardLeafHash)(c,u)),proof:h.proof,proofFlags:h.proofFlags})}dump(){return{format:"standard-v1",leafEncoding:this.leafEncoding,tree:this.tree,values:this.values}}}return Oo.StandardMerkleTree=s,Oo}var l2;function uee(){return l2||(l2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardMerkleTree=t.SimpleMerkleTree=void 0;var e=cee();Object.defineProperty(t,"SimpleMerkleTree",{enumerable:!0,get:function(){return e.SimpleMerkleTree}});var n=hee();Object.defineProperty(t,"StandardMerkleTree",{enumerable:!0,get:function(){return n.StandardMerkleTree}})}(um)),um}var Ns=uee();const dee=`graph TD
    R1["R₁<br/>(Request 1)"] --> H1["H₁ = hash(R₁)"]
    R2["R₂<br/>(Request 2)"] --> H2["H₂ = hash(R₂)"]
    R3["R₃<br/>(Request 3)"] --> H3["H₃ = hash(R₃)"]
    R4["R₄<br/>(Request 4)"] --> H4["H₄ = hash(R₄)"]
    
    H1 --> H12["H₁₂ = hash(H₁ + H₂)"]
    H2 --> H12
    H3 --> H34["H₃₄ = hash(H₃ + H₄)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H₁₂ + H₃₄)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    
    class R1,R2,R3,R4 requestNode
    class H1,H2,H3,H4,H12,H34 hashNode
    class ROOT rootNode`,mee=`graph TD
    R1["R₁<br/>(Request 1)"] --> H1["H₁ = hash(R₁)"]
    R2["R₂<br/>(Request 2)"] --> H2["H₂ = hash(R₂)"]
    R3["R₃<br/>(Request 3)"] --> H3["H₃ = hash(R₃)"]
    R4["R₄<br/>(Request 4)"] --> H4["H₄ = hash(R₄)"]
    
    H1 --> H12["H₁₂ = hash(H₁ + H₂)"]
    H2 --> H12
    H3 --> H34["H₃₄ = hash(H₃ + H₄)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H₁₂ + H₃₄)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    classDef proofPath fill:#fef3c7,stroke:#f59e0b,stroke-width:3px
    classDef proofNode fill:#ecfdf5,stroke:#10b981,stroke-width:2px
    
    class R1,R2,R4 requestNode
    class H1,H2 hashNode
    class ROOT rootNode
    class R3 proofPath
    class H3,H34 proofPath
    class H4,H12 proofNode`,fee={title:" Merkle Trees for LLM Batching - The fundamentals",publishing_date:"2025-07-29",tokenID:38,category:"blockchain",secondaryCategory:"ai",description:"I explore the fundamentals of Merkle trees for efficient LLM batching. Learn cryptographic proofs, batch verification, and AI service settlement optimization."},Mc=["0xUser1Address...","0xUser2Address...","0xUser3Address...","0xUser4Address...","0xUser5Address..."],c2=["Analyze the sentiment of this customer review: 'The product is amazing!'","Translate this text to German: 'Hello, how are you today?'","Write a short Python function to calculate fibonacci numbers","Explain quantum computing in simple terms","Generate a creative story about a time-traveling cat","Summarize the benefits of renewable energy","Create a marketing strategy for a new mobile app","Debug this JavaScript code: console.log(hello world)"],mr={merkleRoot:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",requests:[{id:1,owner:"0xUser1Address...",prompt:"Analyze the sentiment of this customer review: 'The product is amazing!'",leafData:{id:1,timestamp:"2024-01-15T10:30:00.000Z",tokenCount:150,wallet:"0xUser1Address..."},leafHash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"},{id:2,owner:"0xUser2Address...",prompt:"Translate this text to German: 'Hello, how are you today?'",leafData:{id:2,timestamp:"2024-01-15T10:32:00.000Z",tokenCount:120,wallet:"0xUser2Address..."},leafHash:"0x2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c"},{id:3,owner:"0xUser3Address...",prompt:"Write a short Python function to calculate fibonacci numbers",leafData:{id:3,timestamp:"2024-01-15T10:35:00.000Z",tokenCount:180,wallet:"0xUser3Address..."},leafHash:"0x3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d"}]},pee=async t=>{const e=mr.requests[t],n=mr.requests.map(l=>[l.leafData.id,l.leafData.timestamp,l.leafData.tokenCount,l.leafData.wallet]),a=["uint256","string","uint256","string"],r=Ns.StandardMerkleTree.of(n,a),s=r.getProof(t),o=r.root;return{leafIndex:t,leafData:e.leafData,leafHash:e.leafHash,proof:s.map((l,c)=>({data:l,position:c%2===0?"left":"right"})),root:o}},gee=async t=>{try{const n=mr.requests.map(d=>[d.leafData.id,d.leafData.timestamp,d.leafData.tokenCount,d.leafData.wallet]),a=["uint256","string","uint256","string"],r=Ns.StandardMerkleTree.of(n,a),s=[t.leafData.id,t.leafData.timestamp,t.leafData.tokenCount,t.leafData.wallet],o=t.proof.map(d=>d.data),l=Ns.StandardMerkleTree.verify(r.root,a,s,o);let c=!1,h=-1;for(const[d,m]of r.entries())if(JSON.stringify(m)===JSON.stringify(s)){c=!0,h=d;break}const u=["✅ Used OpenZeppelin StandardMerkleTree.verify()",`📋 Leaf Data: [${s.join(", ")}]`,`🌳 Tree Root: ${r.root.substring(0,16)}...`,`🔍 Proof Root: ${t.root.substring(0,16)}...`,`📍 Leaf Index: ${h} (expected: ${t.leafIndex})`,`🎯 Root Match: ${r.root===t.root}`,`🔍 Leaf Exists: ${c}`,`${l?"✅ Verification: VALID":"❌ Verification: INVALID"}`];return{isValid:l&&c&&r.root===t.root,message:l&&c?"Proof is valid! Alice's payment is confirmed.":"Proof is invalid! This payment cannot be verified.",steps:u}}catch(e){return console.error("Proof validation failed:",e),{isValid:!1,message:"Error validating proof: "+e.message,steps:[]}}},xee=()=>{const[t,e]=pe.useState(0),[n,a]=pe.useState(null),[r,s]=pe.useState(""),[o,l]=pe.useState(null),[c,h]=pe.useState("generate"),u=async()=>{try{const f=await pee(t);a(f)}catch(f){console.error("Error generating proof:",f)}},d=async()=>{try{const f=JSON.parse(r),p=await gee(f);l(p)}catch(f){console.error("Proof validation failed:",f),l({isValid:!1,message:"Invalid JSON format",steps:[]})}},m=async f=>{try{await navigator.clipboard.writeText(f)}catch(p){console.error("Failed to copy to clipboard:",p)}};return i.jsxs("div",{className:V({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[i.jsx("h3",{className:V({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:"🔍 Interactive Proof Demo: Alice's Story"}),i.jsxs("div",{className:V({marginBottom:"20px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #d1d5db"}),children:[i.jsxs("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:["Sample Batch (Merkle Root: ",mr.merkleRoot.substring(0,20),"...)"]}),i.jsx("div",{className:V({display:"grid",gap:"8px"}),children:mr.requests.map((f,p)=>i.jsxs("div",{className:V({padding:"8px 12px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"13px"}),children:[i.jsx("strong",{children:f.owner})," (R",i.jsx("sub",{children:p+1}),"): ",f.prompt," - ",f.leafData.tokenCount," tokens"]},f.id))})]}),i.jsx("div",{className:V({marginBottom:"16px",borderBottom:"1px solid #e5e7eb"}),children:i.jsxs("div",{className:V({display:"flex",gap:"0"}),children:[i.jsx("button",{onClick:()=>h("generate"),className:V({padding:"8px 16px",backgroundColor:c==="generate"?"#f9fafb":"transparent",color:c==="generate"?"#374151":"#6b7280",border:c==="generate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:c==="generate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:c==="generate"?"medium":"normal"}),children:"Generate Proof"}),i.jsx("button",{onClick:()=>h("validate"),className:V({padding:"8px 16px",backgroundColor:c==="validate"?"#f9fafb":"transparent",color:c==="validate"?"#374151":"#6b7280",border:c==="validate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:c==="validate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:c==="validate"?"medium":"normal"}),children:"Validate Proof"})]})}),c==="generate"&&i.jsxs("div",{children:[i.jsxs("div",{className:V({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[i.jsx("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 1: Select User to Generate Proof"}),i.jsx("select",{value:t,onChange:f=>e(Number(f.target.value)),className:V({width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",marginBottom:"12px"}),children:mr.requests.map((f,p)=>i.jsxs("option",{value:p,children:[f.owner," - ",f.prompt]},f.id))}),i.jsx("button",{onClick:u,className:V({padding:"8px 16px",backgroundColor:"#374151",color:"white",border:"1px solid #374151",borderRadius:"4px",cursor:"pointer",fontSize:"14px","&:hover":{backgroundColor:"#4b5563",borderColor:"#4b5563"}}),children:"Generate Merkle Proof"})]}),n&&i.jsxs("div",{className:V({padding:"16px",backgroundColor:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[i.jsxs("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"12px",color:"#374151"}),children:["Generated Proof for ",mr.requests[t].owner]}),i.jsxs("div",{className:V({marginBottom:"12px"}),children:[i.jsx("strong",{children:"Proof Path:"}),i.jsx("div",{className:V({fontSize:"12px",fontFamily:"monospace",marginTop:"4px"}),children:n.proof.map((f,p)=>i.jsxs("div",{children:["Level ",p+1,": ",f.data.substring(0,20),"... (",f.position,")"]},p))})]}),i.jsxs("div",{className:V({marginBottom:"12px"}),children:[i.jsx("strong",{children:"Complete Proof JSON:"}),i.jsxs("div",{className:V({position:"relative"}),children:[i.jsx("pre",{className:V({fontSize:"11px",fontFamily:"monospace",backgroundColor:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid #d1d5db",overflow:"auto",maxHeight:"200px",marginTop:"4px"}),children:JSON.stringify(n,null,2)}),i.jsx("button",{onClick:()=>m(JSON.stringify(n,null,2)),className:V({position:"absolute",top:"8px",right:"8px",padding:"4px 8px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),children:"Copy"})]})]})]})]}),c==="validate"&&i.jsxs("div",{children:[i.jsxs("div",{className:V({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[i.jsx("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 2: Validate a Proof"}),i.jsx("label",{className:V({display:"block",fontSize:"14px",marginBottom:"8px"}),children:"Paste Proof JSON:"}),i.jsx("textarea",{value:r,onChange:f=>s(f.target.value),placeholder:"Paste the complete proof JSON here...",className:V({width:"100%",height:"120px",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace",marginBottom:"12px",resize:"vertical"})}),i.jsx("button",{onClick:d,disabled:!r.trim(),className:V({padding:"8px 16px",backgroundColor:r.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:r.trim()?"pointer":"not-allowed",fontSize:"14px","&:hover":r.trim()?{backgroundColor:"#4b5563"}:{}}),children:"Validate Proof"})]}),o&&i.jsxs("div",{className:V({padding:"16px",backgroundColor:o.isValid?"#f9fafb":"#fef2f2",borderRadius:"4px",border:`1px solid ${o.isValid?"#d1d5db":"#fecaca"}`}),children:[i.jsx("h4",{className:V({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Validation Result"}),i.jsx("div",{className:V({fontSize:"14px",fontWeight:"medium",marginBottom:"12px",color:o.isValid?"#166534":"#dc2626"}),children:o.message}),o.steps.length>0&&i.jsxs("div",{children:[i.jsx("strong",{children:"Verification Steps:"}),i.jsx("div",{className:V({marginTop:"8px"}),children:o.steps.map((f,p)=>i.jsx("div",{className:V({fontSize:"12px",fontFamily:"monospace",backgroundColor:"#fff",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb",marginBottom:"4px"}),children:f},p))})]})]})]})]})},yee=async t=>{if(t.length===0)return"";const e=t.map(r=>[r.leafData.id,r.leafData.timestamp,r.leafData.tokenCount,r.leafData.wallet]),n=["uint256","string","uint256","string"];return Ns.StandardMerkleTree.of(e,n).root},bee=async t=>{if(t.length===0)return"";const e=t.map(s=>[s.leafData.id,s.leafData.timestamp,s.leafData.tokenCount,s.leafData.wallet]),n=["uint256","string","uint256","string"],a=Ns.StandardMerkleTree.of(e,n);let r=`Merkle Tree (OpenZeppelin StandardMerkleTree):
`;r+=`Root: ${a.root.substring(0,16)}...
`,r+=`
Tree Structure:
`;for(const[s,o]of a.entries()){const l=a.leafHash(o);r+=`Leaf ${s+1}: ${l.substring(0,16)}... (${o[0]}, ${o[3]})
`}return r},h2=4,wee=()=>{const[t,e]=pe.useState([]),[n,a]=pe.useState(""),[r,s]=pe.useState(""),[o,l]=pe.useState(!1),[c,h]=pe.useState(1),[u,d]=pe.useState(""),[m,f]=pe.useState(Mc[0]),p=async(w,k)=>{const E={id:c,timestamp:new Date().toISOString(),tokenCount:Math.floor(Math.random()*200)+100,wallet:w},v=[E.id,E.timestamp,E.tokenCount,E.wallet],S=["uint256","string","uint256","string"],O=Ns.StandardMerkleTree.of([v],S).leafHash(v),P=["The sentiment of this review is positive, indicating customer satisfaction.","Hallo, wie geht es dir heute?","Here's a Python function: def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)","Quantum computing uses quantum mechanical phenomena like superposition and entanglement to process information.","Once upon a time, a curious cat named Whiskers discovered a mysterious clock that could bend time...","Renewable energy reduces carbon emissions, creates jobs, and provides sustainable power solutions.","Focus on user experience, social media marketing, and influencer partnerships for app growth.","Fixed code: console.log('hello world'); // Missing quotes around string"],j=P[Math.floor(Math.random()*P.length)],A={id:c,prompt:k,model:"gpt-4-turbo",recipient:w,estimatedTokens:E.tokenCount,response:j,leafData:E,leafHash:O};return e(q=>[...q,A]),h(q=>q+1),d(""),A};pe.useEffect(()=>{(async()=>{if(t.length>=h2&&!o){const k=await yee(t),E=await bee(t);a(k),s(E),l(!0)}})()},[t,o]);const g=async()=>{u.trim()&&await p(m,u)},x=async()=>{const w=c2[Math.floor(Math.random()*c2.length)],k=Mc[Math.floor(Math.random()*Mc.length)];f(k),await p(k,w)},b=()=>{e([]),a(""),s(""),l(!1),h(1),d("")};return i.jsxs("div",{className:V({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[i.jsx("h3",{className:V({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:"🧪 Interactive LLM Batch Processing Demo"}),i.jsx("div",{className:V({marginBottom:"20px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"}),children:i.jsxs("p",{className:V({fontSize:"14px",color:"#1e40af",marginBottom:"8px"}),children:[i.jsx("strong",{children:"How it works:"})," Send LLM requests and get immediate responses. After ",h2," ","requests, a Merkle tree is automatically created for cost-efficient blockchain settlement."]})}),i.jsxs("div",{className:V({marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[i.jsx("h4",{className:V({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem"}),children:"Send LLM Request"}),i.jsxs("div",{className:V({marginBottom:"0.75rem"}),children:[i.jsx("label",{className:V({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Wallet Address:"}),i.jsx("select",{value:m,onChange:w=>f(w.target.value),className:V({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.85rem"}),children:Mc.map(w=>i.jsx("option",{value:w,children:w},w))})]}),i.jsxs("div",{className:V({marginBottom:"0.75rem"}),children:[i.jsx("label",{className:V({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Prompt:"}),i.jsx("input",{type:"text",value:u,onChange:w=>d(w.target.value),placeholder:"Enter your LLM prompt...",className:V({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),onKeyPress:w=>w.key==="Enter"&&g()})]}),i.jsxs("div",{className:V({display:"flex",gap:"0.5rem",fontSize:"0.85rem"}),children:[i.jsx("button",{onClick:g,disabled:!u.trim(),className:V({padding:"0.5rem 1rem",backgroundColor:u.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:u.trim()?"pointer":"not-allowed",transition:"background-color 0.2s","&:hover":{backgroundColor:u.trim()?"#4b5563":"#9ca3af"}}),children:"Send Request"}),i.jsx("button",{onClick:x,className:V({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#4b5563"}}),children:"Send Random Request"}),i.jsx("button",{onClick:b,className:V({padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#dc2626"}}),children:"Reset Demo"})]})]}),o&&i.jsxs("div",{className:V({padding:"0.75rem",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"4px",marginBottom:"1rem"}),children:[i.jsx("strong",{children:"🌳 Merkle Root:"})," ",i.jsx("code",{className:V({fontSize:"0.8rem"}),children:n}),i.jsx("div",{className:V({fontSize:"0.8rem",color:"#166534",marginTop:"0.25rem"}),children:"All requests can now be processed with a single blockchain transaction!"}),r&&i.jsxs("div",{className:V({marginTop:"0.75rem"}),children:[i.jsx("strong",{children:"Tree Structure:"}),i.jsx("pre",{className:V({fontSize:"0.7rem",fontFamily:"monospace",backgroundColor:"#fff",padding:"0.5rem",borderRadius:"4px",border:"1px solid #bbf7d0",marginTop:"0.25rem",lineHeight:"1.4",overflow:"auto"}),children:r})]})]}),i.jsx("div",{className:V({maxHeight:"400px",overflowY:"auto"}),children:t.length===0?i.jsx("div",{className:V({padding:"1.5rem",textAlign:"center",color:"#6b7280",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:"No requests yet. Send your first LLM request above! 🚀"}):t.map((w,k)=>i.jsxs("div",{className:V({padding:"1rem",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"4px",marginBottom:"0.75rem"}),children:[i.jsxs("div",{className:V({marginBottom:"0.5rem"}),children:[i.jsx("div",{className:V({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Prompt (not part of Merkle-Leafs):"}),i.jsx("div",{className:V({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",marginBottom:"0.3rem",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.prompt}),i.jsx("div",{className:V({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Response (not part of Merkle-Leafs):"}),i.jsx("div",{className:V({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.response})]}),w.leafData&&i.jsxs("div",{className:V({marginBottom:"0.5rem"}),children:[i.jsxs("div",{className:V({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Data R",i.jsx("sub",{children:k+1})," (used for hash):"]}),i.jsx("pre",{className:V({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.45rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",overflow:"auto",lineHeight:"1.3"}),children:JSON.stringify(w.leafData,null,2)})]}),w.leafHash&&i.jsxs("div",{children:[i.jsxs("div",{className:V({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Hash H",i.jsx("sub",{children:k+1}),":"]}),i.jsx("code",{className:V({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#f3f4f6",padding:"0.22rem 0.5rem",borderRadius:"3px",border:"1px solid #e5e7eb",wordBreak:"break-all",display:"block"}),children:w.leafHash})]})]},w.id))})]})};function _ee(){return i.jsxs("article",{children:[i.jsx("section",{children:i.jsx("p",{children:i.jsx("strong",{children:"Update on 2025-08-26: I substantially overhauled this blog post to improve clarity and focus on the Merkle tree topic."})})}),i.jsx("section",{children:i.jsx("p",{children:"The integration of Large Language Models (LLMs) into my website is an exciting possibility. But one problem remains: How can I reduce the blockchain transaction costs when users need multiple LLM API calls in an application? In this blog post, I will explore how it might become possible with Merkle trees."})}),i.jsxs("section",{children:[i.jsx("h2",{children:"From My Image Generator to LLM Batching"}),i.jsxs("p",{children:["I've already built an AI image generator that works on the blockchain - you can try it on my"," ",i.jsx("a",{href:"/imagegen",children:"image generation page"}),". Users pay with their wallet, and my"," ",i.jsx("a",{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:"GenImNFT contract"})," ","handles the payment and delivery automatically. It works great for single images."]}),i.jsx("p",{children:"But when I started thinking about LLM text generation, I run into trouble. If someone wants to analyze 10 documents or generate multiple pieces of content, they'd need 10 separate blockchain transactions. These are substantial gas fees, plus the hassle of confirming each transaction in their wallet."}),i.jsxs("p",{children:["An interesting solution lies in a mathematical concept called ",i.jsx("strong",{children:"Merkle trees"})," - think of it like a business expense report system. When you travel for business, you don't submit a separate expense report for every coffee or taxi ride. Instead, you collect all your receipts and submit them together in one report. The accounting department can still verify each individual expense, but you only go through the submission process once."]}),i.jsx("p",{children:"Merkle trees work similarly on the blockchain: you can bundle multiple LLM requests together and submit them as one transaction, while still maintaining cryptographic proof that each individual request is valid and accounted for."}),i.jsx("p",{children:"To see this in action, try the interactive demo below. Send a few LLM requests and watch how each one would normally require its own blockchain transaction. Once you reach 4 requests, you'll see how the Merkle tree automatically bundles everything into a single transaction:"}),i.jsx(wee,{})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"How Merkle Trees Make This Magic Possible"}),i.jsx("p",{children:"In our expense report analogy, the accounting department needs to verify individual receipts. But how do they do this efficiently? Here's where Merkle Trees provide the mathematical solution."}),i.jsx("p",{children:"The mapping is straightforward:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"individual receipts become Merkle leaves (each LLM request gets its own cryptographic fingerprint)"}),i.jsx("li",{children:"summary pages become internal nodes (groups of receipts get combined into summary fingerprints)"}),i.jsx("li",{children:"the master receipt becomes the Merkle root (one final fingerprint represents the entire batch)"}),i.jsx("li",{children:"proof of purchase becomes a Merkle proof (you can prove any receipt belongs without showing others)"})]}),i.jsxs("p",{children:['But what exactly is a "cryptographic fingerprint"? When we say each LLM request gets processed through a hash function, we mean it goes through a special mathematical algorithm called'," ",i.jsx("a",{href:"https://en.wikipedia.org/wiki/SHA-3",children:"Keccak256"})," (the same one Ethereum uses). For example, if you input ",i.jsx("code",{children:'{id: 1, timestamp: "2024-01-15T10:30:00Z", tokens: 150, wallet: "0xUser1..."}'}),", you get output like ",i.jsx("code",{children:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"}),"."]}),i.jsx("p",{children:"This process has four key properties that make it perfect for our use case:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"it's deterministic (same input always produces the same hash)"}),i.jsx("li",{children:"collision resistant (nearly impossible for two different inputs to produce the same hash)"}),i.jsx("li",{children:"fixed length (always 64 characters regardless of input size)"}),i.jsx("li",{children:"irreversible (you cannot recreate the original data from the hash alone)"})]}),i.jsx("h3",{children:"Building up the Merkle Tree"}),i.jsx("p",{children:"A Merkle tree is then built up step by step. Let's say we have 4 LLM requests from our batching example. We now build the tree in three steps:"}),i.jsxs("ol",{children:[i.jsx("li",{children:"First, each request gets its own hash (H₁, H₂, H₃, H₄). "}),i.jsx("li",{children:"Then we pair them up - combine H₁+H₂ into H₁₂, and H₃+H₄ into H₃₄."}),i.jsx("li",{children:"Finally, we create the root by combining H₁₂+H₃₄ into the final ROOT hash. This ROOT hash is like the master receipt number that represents all 4 requests."})]}),i.jsx("p",{children:"Here's what this tree-building process looks like visually:"}),i.jsx(tg,{definition:dee,title:"Merkle Tree Mathematical Foundation"}),i.jsx("p",{children:"As you can see in the diagram above, the ROOT hash represents all 4 requests in a single value. This means instead of needing 4 separate blockchain transactions (one for each request), we need just 1 transaction to register the entire batch. The ROOT hash enables us to register thousands of LLM requests with just one blockchain transaction while maintaining cryptographic proof of each individual request."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"Proving Individual Transactions with Merkle Proofs"}),i.jsx("p",{children:"Now that we've seen how to batch LLM requests into a Merkle tree, there is actually another cool feature possible. The user can verify the validity of the tree with fairly reduced information."}),i.jsxs("p",{children:["A Merkle proof is a cryptographic proof that allows the user, we name her Alice, to demonstrate that her transaction is included in the Merkle tree without revealing any other transactions. To prove that Alice's transaction R",i.jsx("sub",{children:"3"}),' is in the tree, she provides a "proof path" - the minimum set of hash values needed to reconstruct the path from her leaf to the root:']}),i.jsxs("figure",{children:[i.jsx(tg,{definition:mee,title:"🔍 Merkle Proof Path for Request 3 (R₃)"}),i.jsxs("figcaption",{children:["Visualization of the Merkle proof for R",i.jsx("sub",{children:"3"}),": Alice needs to provide the request and proof siblings that are highlighted in green. The hashes that are highlighted in orange can be calculated from the information. Finally, she can verify if the calculated root is the same as the root she was provided. If they are the same, her request is stored in the merkle tree."]})]}),i.jsx("p",{children:"This elegant mathematical verification proves Alice's transaction is authentic without revealing any other transaction details. In the little demonstrator below, you can test in a simple example how the proof can be generated and validated."}),i.jsx(xee,{})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"From Problem to Solution"}),i.jsx("p",{children:"This brings us to the end of this blog post. We started this journey with a significant cost problem: someone wanting to send 10 LLM requests would face significant gas fees alone, plus the hassle of confirming 10 separate transactions in their wallet. For any practical LLM application on the blockchain, this creates an immediate barrier to adoption."}),i.jsx("p",{children:"We saw how Merkle trees provide an elegant mathematical solution that transforms this experience entirely. Those same 10 LLM requests can now be bundled into a single blockchain transaction, reducing gas costs by 90% and eliminating the multi-transaction friction. Users get immediate LLM responses while cryptographic proofs ensure every request is verifiable and secure."}),i.jsx("p",{children:"This isn't just theory - it's the foundation for my new LLM assistant. In the next post, I'll show you how I built such a system with smart contracts, batching services, and the corresponding frontend integration. Stay tuned!"})]})]})}const u2=Object.freeze(Object.defineProperty({__proto__:null,default:_ee,meta:fee},Symbol.toStringTag,{value:"Module"})),vee={publishing_date:"2025-03-09",title:"Is mirror.xyz a thing ?",category:"webdev",secondaryCategory:"blockchain",description:"I discover Mirror.xyz - a decentralized publishing platform combining Medium-like writing with Ethereum monetization. ENS domains and crypto wallets enable seamless creator support."};function d2(t){const e={a:"a",em:"em",p:"p",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:i.jsxs(e.em,{children:["The original post on mirror can be found ",i.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/2rSj34fa8cyhADVEI0p_fVO25d-hCQ6AqC38QGBsik4?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"."]})}),`
`,i.jsxs(e.p,{children:["Over the last few weeks I kept investigating different ways to my website and to publish content. For the moment I am really happy with the tradtional web2 setup where we I host the static website and voila. However, I recently stumbled across ",i.jsx(e.a,{href:"https://mirror.xyz/",children:"mirror.xyz"})," and I am intruiged. It feels very much like other publishing platforms like ",i.jsx(e.a,{href:"https://medium.com/",children:"medium"}),". You write a post (like this one) and publish it. With the right ens name and metamask wallet the whole login experience is really smooth. Now the neat thing comes in with the financials. It does not really cost you anything to publish your post which is already a nice break from the usual web3 world where even breathing costs you money. But the neat thing is that people can support you as a creator by mint and liking your post. All of this is deeply integrated into the euthereum eco system and the low fees are enabled by the ",i.jsx(e.a,{href:"https://www.optimism.io/",children:"optimism chain"}),"."]}),`
`,i.jsx(e.p,{children:"This all inspires new approaches to publishing in a very decentralized way. You publish, people can verify how you are and payment is also included. This takes a lot of the creepiness of advertisement based platforms away. So I think that I will start to cross post these posts to mirror and see how it goes."}),`
`,i.jsxs(e.p,{children:["The original post on mirror can be found ",i.jsx(e.a,{href:"https://mirror.xyz/fretchen.eth/2rSj34fa8cyhADVEI0p_fVO25d-hCQ6AqC38QGBsik4?referrerAddress=0x073f26F0C3FC100e7b075C3DC3cDE0A777497D20",children:"here"}),"."]})]})}function jee(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(d2,{...t})}):d2(t)}const m2=Object.freeze(Object.defineProperty({__proto__:null,default:jee,frontmatter:vee},Symbol.toStringTag,{value:"Module"})),Tee={publishing_date:"2025-01-06",title:"Moving old lectures",category:"quantum",secondaryCategory:"webdev",description:"I migrate academic lectures from LaTeX to modern web formats. Discover solutions for handling equations, references, and static site generation in JavaScript environments."};function f2(t){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"In my time in academia, I gave a few lectures on various topics. They are saved as latex, markdown, jupyter notebook, whatever you want. But to get started, I decided to move over a number of lectures on AMO that I gave for several years."}),`
`,i.jsx(e.p,{children:"I had them all saved on a website called Authorea and could export them directly as latex. So what could be easier than just importing them right ?"}),`
`,i.jsx(e.h2,{children:"Challenge 1: Loading the markdown"}),`
`,i.jsxs(e.p,{children:["It was really quite straight forward to convert the files through pandoc with the command ",i.jsx(e.code,{children:"pandoc MY__INPUT_FILE.tex -s -o MY_FILE.md"}),". However, once you have markdown I have to import it into the website. And it is really at this stage where my little python world crumbles. You have the habit that files are yours and any access from any script is identical. However, within the world of javascript, I suddenly had to think about strange things like clients / servers / build times etc. In the end, I chose a solution similiar to the one described by ",i.jsx(e.a,{href:"https://vike.dev/markdown",children:"vike"})," with a little script that converts the markdown into a json file. This json file is then loaded into the website without the need of any ",i.jsx(e.code,{children:"fs"}),"."]}),`
`,i.jsx(e.h2,{children:"Challenge 2: Equations and references"}),`
`,i.jsx(e.p,{children:"The first challenge, already existed for the blogs in general. But now I also had to handle equations and references. To render them you need a surprising amount of extensions to remark including:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.a,{href:"https://www.npmjs.com/package/rehype-katex",children:"rehype-katex"})," for compiling the equations."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.a,{href:"https://github.com/remarkjs/remark-gfm",children:"remark-gfm"})," for references in footnotes"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.a,{href:"https://www.npmjs.com/package/remark-math",children:"remark-math"})," for compiling equations."]}),`
`]}),`
`,i.jsx(e.p,{children:"Despite all of those packages I needed to write a processing script that removed equation labels, equation alignements and also keep the spacing right. All in all it is nicer to use latex for long documents ..."}),`
`,i.jsx(e.h2,{children:"Challenge 3: Images"}),`
`,i.jsxs(e.p,{children:["Now I was already quite proud about the result, but then I realized that the images were not loading. Remember how I was loading markdown into a ",i.jsx(e.code,{children:"json"})," ? Well this messed up the references to images in production. So I had to copy the images into public folder. Further, I had to find a way to keep the images at an appropiate size. This worked nicely with the ",i.jsx(e.code,{children:"img"})," link, but to have this you must allow for ",i.jsx(e.a,{href:"https://www.npmjs.com/package/rehype-raw",children:"rehype-raw"}),". But then it was all good."]}),`
`,i.jsx(e.h2,{children:"Conclusion"}),`
`,i.jsxs(e.p,{children:["Building up this kind of content management is really only for the curious. Otherwise, projects like docusaurus or astro are much more suited. But now I have a cute little system puzzled together and can extend it at will. All of this with a very limited amount of complexity. FWIW, the code can be ",i.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io",children:"found here"}),"."]})]})}function kee(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(f2,{...t})}):f2(t)}const p2=Object.freeze(Object.defineProperty({__proto__:null,default:kee,frontmatter:Tee},Symbol.toStringTag,{value:"Module"})),Eee={publishing_date:"2025-05-20",title:"Generating AI images, paying anonymously and little",category:"blockchain",description:"I implement anonymous micro-payments for AI image generation using Ethereum Layer-2. See how to connect blockchain payments with serverless AI for sustainable, privacy-focused services."};function g2(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["As I wrote already in one of my ",i.jsx(e.a,{href:"6",children:"previous posts"}),", I have set up a small image generator on my website. The whole thing is hosted in Europe and I am using open source models. The system is running on a serverless setup, which is also hosted in Europe. The costs are low and I am happy with the setup. But to make it sustainable, I need to charge the users for the images at least as much as I get charged."]}),`
`,i.jsxs(e.p,{children:['I do not want to go with advertisement or anything like that. To test the waters, I have recently set up a support button to "support" the website. This experiment proofed that it Layer-2 solutions on ethereum are nowadays super cheap and up for task. Feel free to have a look into my note over ',i.jsx(e.a,{href:"7",children:"here"}),"."]}),`
`,i.jsx(e.p,{children:"In the last few week I was able to tie the two ingredients (the AI system and the blockchain) together and I will describe the setup here."}),`
`,i.jsx(e.h2,{children:"The challenge"}),`
`,i.jsxs(e.p,{children:["Nowadays it costs roughly 5 to 6 cents to generate an image with services like ",i.jsx(e.a,{href:"https://cloud.ionos.de/managed/ai-model-hub",children:"Ionos"})," or ",i.jsx(e.a,{href:"https://deepinfra.com/",children:"deepinfra"}),". Therefore, I wondered if it was possible to implement a payment system with similiar cost but with anonymous web3 payment systems instead of Stripe etc. This meant mostly that I had to solve two major challenges:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Challenge 1:"})," How could I connect the ethereum payment systems to the serverless systems."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Challenge 2:"})," How could I minimize the fees and remain competitive ?"]}),`
`]}),`
`,i.jsx(e.h2,{children:"Connect payments to the AI serverless system"}),`
`,i.jsx(e.p,{children:'This part actually required quite a bit of try and error. At first I thought that I could simply tell the external serverless system to "listen" to an ethereum event on the contract. However, this would have required a constant listener and would have been too expensive.'}),`
`,i.jsxs(e.p,{children:["In the second step, I though about oracle systems like ",i.jsx(e.a,{href:"https://chain.link/",children:"Chainlink"}),". However, this came with a few shortcomings:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"With chainlink you have to pay 3 cents per request. This is substantial overhead."}),`
`,i.jsxs(e.li,{children:["The only chainlink service that was really appropiate would have been ",i.jsx(e.a,{href:"https://chain.link/functions",children:"chainlink functions"}),". However, this one needs that external API to answer within 9 seconds, which is not possible with the current AI setup, which takes up to 30 seconds to generate the images."]}),`
`]}),`
`,i.jsx(e.p,{children:"I therefore decided to set up the contract on my own."}),`
`,i.jsx(e.h3,{children:"The Smart NFT contract: Bridging Blockchain and AI"}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x9859431b682e861b19e87Db14a04944BC747AB6d#code",children:i.jsx(e.code,{children:"GenImNFT"})})," contract is the heart of my solution. It functions as an automated intermediary between users who want AI-generated images and the system that creates these images. Here are its key features:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"NFT Creation:"}),' Users can purchase (or "mint") an NFT for a small fee (currently about 10 cents in ETH). This NFT initially contains a placeholder image.']}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Intelligent Image Updates:"})," Once a user has paid, the contract stores the empty NFT and signals that an image can be added. When a new image is updated by a separate wallet, the contract updates the NFT with the new image link and records that this update has occurred. No further changes to the image are possible by external wallets afterwards."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Automatic Payment:"})," The contract automatically pays the wallet that provided the image once the image has been updated. This happens directly within the blockchain, without requiring separate payment processing."]}),`
`]}),`
`]}),`
`,i.jsx(e.h3,{children:"Using the contract"}),`
`,i.jsxs(e.p,{children:["I could then use the contract for the ",i.jsx(e.a,{href:"../imagegen",children:"image generation"}),` in a fairly straight-forward fashion which handles both the creation of the NFT and the image generation. When a user enters a prompt and clicks "Mint & Generate," the component first calls the contract's safeMint function, sending along the required payment (around 10 cents in ETH). This transaction creates a new NFT with a temporary placeholder image.`]}),`
`,i.jsx(e.p,{children:"After a successful mint, the component extracts the newly created token ID from the transaction receipt. This token ID uniquely identifies the NFT that needs to be updated. The component then sends this token ID along with the user's prompt to a serverless API function that handles the AI image generation. This process is similar to the previous setup, but now the serverless function has been extended to update the NFT with the generated image using a dedicated wallet."}),`
`,i.jsx(e.p,{children:"The payment system works in two steps: first, the user pays the contract when minting the NFT; then, when the image is generated and the NFT is updated, the contract automatically releases payment to the wallet that submitted the image. This ensures that users only pay for successfully generated images, and image providers are compensated only after delivering the image."}),`
`,i.jsx(e.h2,{children:"The total costs"}),`
`,i.jsxs(e.p,{children:["All in all, the costs for the serverless system and the transactions is almost negligible. On this part, I built up directly on the very positive experience I had with the ",i.jsx(e.a,{href:"7",children:"support button"})," that works on the ",i.jsx(e.a,{href:"https://www.optimism.io/",children:"optimism"})," chain."]}),`
`,i.jsx(e.p,{children:"If I wanted to optimize the system, it would most likely be possible to offer the service for 1 cents above the price charged by the image generation services. However, for the moment I have set up a buffer against the rather hefty fluctuations of ethereum such that I can currently offer the service for roughly 10 cents an image."}),`
`,i.jsx(e.h2,{children:"Some nice side effects of the system"}),`
`,i.jsxs(e.p,{children:["As I set up the system, I discovered the perks of the whole NFT setup. I actually decided to follow the ERC-721 standard to safe all the important imformation concerning the image. The prompt is part of the description. The model and the time of minting are simply attributes. This allowed me to directly list some of the images on ",i.jsx(e.a,{href:"https://opensea.io/",children:"opensea"})," and opens the possibility to trade some of the cooler images."]}),`
`,i.jsx(e.h2,{children:"Conclusion"}),`
`,i.jsx(e.p,{children:"Taken together, I am super happy with the setup:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Anyone can generate AI images for a small fee such that it is sustainable."}),`
`,i.jsx(e.li,{children:"The costs are fully under control and the system is fully automated."}),`
`,i.jsx(e.li,{children:"The system is fully anonymous and does not require any personal data (which I never wanted to collect anyways). Say goodby annoying GDPR banners."}),`
`,i.jsx(e.li,{children:"The system is fully decentralized and can be used by anyone that cares."}),`
`]}),`
`,i.jsxs(e.p,{children:["So, if you want to generate some images, feel free to check out the ",i.jsx(e.a,{href:"../imagegen",children:"image generation page"})," and mint your first NFT. I am looking forward to see what you can come up with and what are your comments."]})]})}function See(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(g2,{...t})}):g2(t)}const x2=Object.freeze(Object.defineProperty({__proto__:null,default:See,frontmatter:Eee},Symbol.toStringTag,{value:"Module"})),Cee={publishing_date:"2025-06-03",title:"A gallery of AI images",tags:["blog","ai","blockchain"],tokenID:24,category:"blockchain",secondaryCategory:"ai",description:"I build an NFT gallery for AI-generated images using ERC-721 Enumerable contracts. Learn how to upgrade smart contracts and create integrated user experiences for collectibles."};function y2(t){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In one of my ",i.jsx(e.a,{href:"9",children:"previous posts"}),", I described how I set up a system to generate AI images and set up the payment system with ethereum. I liked the set-up, but it was very minimalistic and only focused on the generation process. However, with NFTs, you can do so much more and I started to work through the process. In a first step, I set up a gallery of the images that associated with the connected wallet. And in this post, I will describe how I set up the gallery and what I learned in the process."]}),`
`,i.jsx(e.h2,{children:"Modernizing the contract"}),`
`,i.jsxs(e.p,{children:["The images were previouslycreated with a standard ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/erc721",children:"ERC-721"})," contract, which allows you to own Non-fungible tokens. But this ran into trouble once I tried to collect all the NFTs that were created by a single wallet. The details of the problems are rather technical and it took me some time to understand the issue, but luckily I was not the only one that ran into this problem. The solution was to use the ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/api/token/erc721#ERC721Enumerable",children:"ERC-721 Enumerable"})," extension. This extension allows you to enumerate all the tokens owned by a specific address, which is exactly what I needed for the gallery."]}),`
`,i.jsxs(e.p,{children:['Now, I thought that this would be just a simple upgrade to the previous contract. However, the internal data structure is substantially different from the "normal" ERC-721 contract. Therefore, I simply created a new contract, wrote some tests and deployed it. The new contract is called ',i.jsx(e.a,{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:i.jsx(e.code,{children:"GenImNFTv2"})})," and it is a replacement for the previous contract. It has all the features of the previous contract, but it also allows you to enumerate all the tokens owned by a specific address."]}),`
`,i.jsx(e.h2,{children:"Adding a gallery"}),`
`,i.jsxs(e.p,{children:["Once, it was possible to enumerate the tokens, I could set up the gallery. At first, the gallery was simply another react component that queried the contract for all the tokens owned by a specific address. You could see the created NFTs and click on them to see the details. However, this was not very user friendly as the upper component with image preview and generation was still the main focus of the page. So the gallery and the generation felt really disconnected. So, I actually reworked the whole work flow within the ",i.jsx(e.a,{href:"../imagegen",children:"imagegen"})," component. It now only has a fairly small input and then contains the gallery below. This nicely integrates older pictures with new ideas and has all the functionality that I need. For the pictures in the gallery, I can zoom, download, share and delete them. This makes for me personally for a really nice user experience, just as I wanted it."]}),`
`,i.jsx(e.h2,{children:"A possible evolution"}),`
`,i.jsx(e.p,{children:"The component now fulfills a lot of my personal needs. If I wanted to extend it further, this would most likely mean that I want to make it more social with features like:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"User profiles to browse other people's AI art galleries"}),`
`,i.jsx(e.li,{children:"Simple social features like favorites or comments"}),`
`,i.jsx(e.li,{children:"Better discovery and search functionality"}),`
`]}),`
`,i.jsx(e.p,{children:"However, this would mean a clear shift in focus. From a project that exclusively serves my personal needs to a project that attempts to create a community around the protocol. And this is a big step. I am not sure if I want to take this step. The step is even bigger as I would most likely not enjoy it to take it on my own. I would need to work together with others that share the same passion for the project. And to govern the hypothetical community, I would need to set up some kind of DAO (Decentralized Autonomous Organization). The logic here is simple. If I introduce social features for users, I also want to introduce some kind of social features, i.e. governance, for the gallery. I do not want to be the sole owner of the gallery and decide what goes in and what does not. I want others to have a say in the future of the gallery. So the current most likely evolution of the gallery is:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["Try to learn how to set up a ",i.jsx(e.a,{href:"https://docs.openzeppelin.com/contracts/5.x/governance",children:"DAO"}),"."]}),`
`,i.jsx(e.li,{children:"See if some kind of transaction fees for the DAO are in order. If the DAO supports the gallery, it should also be able to pay for the costs of the gallery, right ?"}),`
`,i.jsx(e.li,{children:"Add minimal social features like seeing the NFTs of other users that like it."}),`
`,i.jsxs(e.li,{children:["See if I can add some kind of social features like comments or likes just like I did with the ",i.jsx(e.a,{href:"7",children:"support button"}),"."]}),`
`]}),`
`,i.jsx(e.p,{children:"But this is all in the future. For the moment, I am happy with the gallery and the way it works. I hope you like it too and I am looking forward to your comments and suggestions."})]})}function Aee(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(y2,{...t})}):y2(t)}const b2=Object.freeze(Object.defineProperty({__proto__:null,default:Aee,frontmatter:Cee},Symbol.toStringTag,{value:"Module"})),sa=({children:t,remarkPlugins:e=[],components:n})=>{const a=Hn.useRef(null);return Hn.useEffect(()=>{a.current&&oe(()=>import("./chunk-DLEb2sg5.js"),__vite__mapDeps([57,58])).then(r=>{const s=r.default;a.current&&s(a.current,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1,strict:!1,trust:!0})}).catch(r=>{console.error("Failed to load KaTeX auto-render:",r)})},[t]),i.jsx("div",{ref:a,children:i.jsx(ok,{remarkPlugins:e,components:n,children:t})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function cc(t){return t+.5|0}const Ca=(t,e,n)=>Math.max(Math.min(t,n),e);function Qo(t){return Ca(cc(t*2.55),0,255)}function Ia(t){return Ca(cc(t*255),0,255)}function aa(t){return Ca(cc(t/2.55)/100,0,1)}function w2(t){return Ca(cc(t*100),0,100)}const Yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ng=[..."0123456789ABCDEF"],Nee=t=>ng[t&15],Iee=t=>ng[(t&240)>>4]+ng[t&15],Rc=t=>(t&240)>>4===(t&15),Lee=t=>Rc(t.r)&&Rc(t.g)&&Rc(t.b)&&Rc(t.a);function Oee(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Yn[t[1]]*17,g:255&Yn[t[2]]*17,b:255&Yn[t[3]]*17,a:e===5?Yn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Yn[t[1]]<<4|Yn[t[2]],g:Yn[t[3]]<<4|Yn[t[4]],b:Yn[t[5]]<<4|Yn[t[6]],a:e===9?Yn[t[7]]<<4|Yn[t[8]]:255})),n}const Mee=(t,e)=>t<255?e(t):"";function Ree(t){var e=Lee(t)?Nee:Iee;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Mee(t.a,e):void 0}const Pee=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sL(t,e,n){const a=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-a*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Dee(t,e,n){const a=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[a(5),a(3),a(1)]}function Bee(t,e,n){const a=sL(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)a[r]*=1-e-n,a[r]+=e;return a}function Fee(t,e,n,a,r){return t===r?(e-n)/a+(e<n?6:0):e===r?(n-t)/a+2:(t-e)/a+4}function ny(t){const n=t.r/255,a=t.g/255,r=t.b/255,s=Math.max(n,a,r),o=Math.min(n,a,r),l=(s+o)/2;let c,h,u;return s!==o&&(u=s-o,h=l>.5?u/(2-s-o):u/(s+o),c=Fee(n,a,r,u,s),c=c*60+.5),[c|0,h||0,l]}function iy(t,e,n,a){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,a)).map(Ia)}function ay(t,e,n){return iy(sL,t,e,n)}function Hee(t,e,n){return iy(Bee,t,e,n)}function qee(t,e,n){return iy(Dee,t,e,n)}function oL(t){return(t%360+360)%360}function $ee(t){const e=Pee.exec(t);let n=255,a;if(!e)return;e[5]!==a&&(n=e[6]?Qo(+e[5]):Ia(+e[5]));const r=oL(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?a=Hee(r,s,o):e[1]==="hsv"?a=qee(r,s,o):a=ay(r,s,o),{r:a[0],g:a[1],b:a[2],a:n}}function zee(t,e){var n=ny(t);n[0]=oL(n[0]+e),n=ay(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Wee(t){if(!t)return;const e=ny(t),n=e[0],a=w2(e[1]),r=w2(e[2]);return t.a<255?`hsla(${n}, ${a}%, ${r}%, ${aa(t.a)})`:`hsl(${n}, ${a}%, ${r}%)`}const _2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},v2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Uee(){const t={},e=Object.keys(v2),n=Object.keys(_2);let a,r,s,o,l;for(a=0;a<e.length;a++){for(o=l=e[a],r=0;r<n.length;r++)s=n[r],l=l.replace(s,_2[s]);s=parseInt(v2[o],16),t[l]=[s>>16&255,s>>8&255,s&255]}return t}let Pc;function Vee(t){Pc||(Pc=Uee(),Pc.transparent=[0,0,0,0]);const e=Pc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Yee=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Gee(t){const e=Yee.exec(t);let n=255,a,r,s;if(e){if(e[7]!==a){const o=+e[7];n=e[8]?Qo(o):Ca(o*255,0,255)}return a=+e[1],r=+e[3],s=+e[5],a=255&(e[2]?Qo(a):Ca(a,0,255)),r=255&(e[4]?Qo(r):Ca(r,0,255)),s=255&(e[6]?Qo(s):Ca(s,0,255)),{r:a,g:r,b:s,a:n}}}function Xee(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${aa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Nf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Jr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Jee(t,e,n){const a=Jr(aa(t.r)),r=Jr(aa(t.g)),s=Jr(aa(t.b));return{r:Ia(Nf(a+n*(Jr(aa(e.r))-a))),g:Ia(Nf(r+n*(Jr(aa(e.g))-r))),b:Ia(Nf(s+n*(Jr(aa(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Dc(t,e,n){if(t){let a=ny(t);a[e]=Math.max(0,Math.min(a[e]+a[e]*n,e===0?360:1)),a=ay(a),t.r=a[0],t.g=a[1],t.b=a[2]}}function lL(t,e){return t&&Object.assign(e||{},t)}function j2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ia(t[3]))):(e=lL(t,{r:0,g:0,b:0,a:1}),e.a=Ia(e.a)),e}function Qee(t){return t.charAt(0)==="r"?Gee(t):$ee(t)}class Bl{constructor(e){if(e instanceof Bl)return e;const n=typeof e;let a;n==="object"?a=j2(e):n==="string"&&(a=Oee(e)||Vee(e)||Qee(e)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var e=lL(this._rgb);return e&&(e.a=aa(e.a)),e}set rgb(e){this._rgb=j2(e)}rgbString(){return this._valid?Xee(this._rgb):void 0}hexString(){return this._valid?Ree(this._rgb):void 0}hslString(){return this._valid?Wee(this._rgb):void 0}mix(e,n){if(e){const a=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,l=2*o-1,c=a.a-r.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;s=1-h,a.r=255&h*a.r+s*r.r+.5,a.g=255&h*a.g+s*r.g+.5,a.b=255&h*a.b+s*r.b+.5,a.a=o*a.a+(1-o)*r.a,this.rgb=a}return this}interpolate(e,n){return e&&(this._rgb=Jee(this._rgb,e._rgb,n)),this}clone(){return new Bl(this.rgb)}alpha(e){return this._rgb.a=Ia(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=cc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dc(this._rgb,2,e),this}darken(e){return Dc(this._rgb,2,-e),this}saturate(e){return Dc(this._rgb,1,e),this}desaturate(e){return Dc(this._rgb,1,-e),this}rotate(e){return zee(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ki(){}const Kee=(()=>{let t=0;return()=>t++})();function ut(t){return t==null}function gt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $e(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Nn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Si(t,e){return Nn(t)?t:e}function De(t,e){return typeof t>"u"?e:t}const Zee=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,cL=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function it(t,e,n,a){let r,s,o;if(gt(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if($e(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function au(t,e){let n,a,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,a=t.length;n<a;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function ru(t){if(gt(t))return t.map(ru);if($e(t)){const e=Object.create(null),n=Object.keys(t),a=n.length;let r=0;for(;r<a;++r)e[n[r]]=ru(t[n[r]]);return e}return t}function hL(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ete(t,e,n,a){if(!hL(t))return;const r=e[t],s=n[t];$e(r)&&$e(s)?Fl(r,s,a):e[t]=ru(s)}function Fl(t,e,n){const a=gt(e)?e:[e],r=a.length;if(!$e(t))return t;n=n||{};const s=n.merger||ete;let o;for(let l=0;l<r;++l){if(o=a[l],!$e(o))continue;const c=Object.keys(o);for(let h=0,u=c.length;h<u;++h)s(c[h],t,o,n)}return t}function gl(t,e){return Fl(t,e,{merger:tte})}function tte(t,e,n){if(!hL(t))return;const a=e[t],r=n[t];$e(a)&&$e(r)?gl(a,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ru(r))}const T2={"":t=>t,x:t=>t.x,y:t=>t.y};function nte(t){const e=t.split("."),n=[];let a="";for(const r of e)a+=r,a.endsWith("\\")?a=a.slice(0,-1)+".":(n.push(a),a="");return n}function ite(t){const e=nte(t);return n=>{for(const a of e){if(a==="")break;n=n&&n[a]}return n}}function Hl(t,e){return(T2[e]||(T2[e]=ite(e)))(t)}function ry(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zn=t=>typeof t<"u",An=t=>typeof t=="function",k2=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ate(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,Ut=2*Qe,rte=Ut+Qe,su=Number.POSITIVE_INFINITY,sy=Qe/180,Vt=Qe/2,Gn=Qe/4,ou=Qe*2/3,uL=Math.log10,Is=Math.sign;function xl(t,e,n){return Math.abs(t-e)<n}function E2(t){const e=Math.round(t);t=xl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(uL(t))),a=t/n;return(a<=1?1:a<=2?2:a<=5?5:10)*n}function ste(t){const e=[],n=Math.sqrt(t);let a;for(a=1;a<n;a++)t%a===0&&(e.push(a),e.push(t/a));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function ote(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ar(t){return!ote(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function lte(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function cte(t,e,n){let a,r,s;for(a=0,r=t.length;a<r;a++)s=t[a][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Pt(t){return t*(Qe/180)}function dL(t){return t*(180/Qe)}function S2(t){if(!Nn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function ig(t,e){const n=e.x-t.x,a=e.y-t.y,r=Math.sqrt(n*n+a*a);let s=Math.atan2(a,n);return s<-.5*Qe&&(s+=Ut),{angle:s,distance:r}}function Ls(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hte(t,e){return(t-e+rte)%Ut-Qe}function ja(t){return(t%Ut+Ut)%Ut}function lu(t,e,n,a){const r=ja(t),s=ja(e),o=ja(n),l=ja(s-r),c=ja(o-r),h=ja(r-s),u=ja(r-o);return r===s||r===o||a&&s===o||l>c&&h<u}function Qn(t,e,n){return Math.max(e,Math.min(n,t))}function ute(t){return Qn(t,-32768,32767)}function Ko(t,e,n,a=1e-6){return t>=Math.min(e,n)-a&&t<=Math.max(e,n)+a}function oy(t,e,n){n=n||(o=>t[o]<e);let a=t.length-1,r=0,s;for(;a-r>1;)s=r+a>>1,n(s)?r=s:a=s;return{lo:r,hi:a}}const fr=(t,e,n,a)=>oy(t,n,a?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),dte=(t,e,n)=>oy(t,n,a=>t[a][e]>=n);function mte(t,e,n){let a=0,r=t.length;for(;a<r&&t[a]<e;)a++;for(;r>a&&t[r-1]>n;)r--;return a>0||r<t.length?t.slice(a,r):t}const mL=["push","pop","shift","splice","unshift"];function fte(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mL.forEach(n=>{const a="_onData"+ry(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(l=>{typeof l[a]=="function"&&l[a](...s)}),o}})})}function C2(t,e){const n=t._chartjs;if(!n)return;const a=n.listeners,r=a.indexOf(e);r!==-1&&a.splice(r,1),!(a.length>0)&&(mL.forEach(s=>{delete t[s]}),delete t._chartjs)}function pte(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const fL=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function pL(t,e){let n=[],a=!1;return function(...r){n=r,a||(a=!0,fL.call(window,()=>{a=!1,t.apply(e,n)}))}}function gte(t,e){let n;return function(...a){return e?(clearTimeout(n),n=setTimeout(t,e,a)):t.apply(this,a),e}}const ly=t=>t==="start"?"left":t==="end"?"right":"center",Qt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,xte=(t,e,n,a)=>t===(a?"left":"right")?n:t==="center"?(e+n)/2:e;function yte(t,e,n){const a=e.length;let r=0,s=a;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:m,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(fr(c,u,d).lo,n?a:fr(e,u,o.getPixelForValue(d)).lo),h){const g=c.slice(0,r+1).reverse().findIndex(x=>!ut(x[l.axis]));r-=Math.max(0,g)}r=Qn(r,0,a-1)}if(p){let g=Math.max(fr(c,o.axis,m,!0).hi+1,n?0:fr(e,u,o.getPixelForValue(m),!0).hi+1);if(h){const x=c.slice(g-1).findIndex(b=>!ut(b[l.axis]));g+=Math.max(0,x)}s=Qn(g,r,a)-r}else s=a-r}return{start:r,count:s}}function bte(t){const{xScale:e,yScale:n,_scaleRanges:a}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!a)return t._scaleRanges=r,!0;const s=a.xmin!==e.min||a.xmax!==e.max||a.ymin!==n.min||a.ymax!==n.max;return Object.assign(a,r),s}const Bc=t=>t===0||t===1,A2=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ut/n)),N2=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ut/n)+1,yl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Vt)+1,easeOutSine:t=>Math.sin(t*Vt),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Bc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Bc(t)?t:A2(t,.075,.3),easeOutElastic:t=>Bc(t)?t:N2(t,.075,.3),easeInOutElastic(t){return Bc(t)?t:t<.5?.5*A2(t*2,.1125,.45):.5+.5*N2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-yl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?yl.easeInBounce(t*2)*.5:yl.easeOutBounce(t*2-1)*.5+.5};function cy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function I2(t){return cy(t)?t:new Bl(t)}function If(t){return cy(t)?t:new Bl(t).saturate(.5).darken(.1).hexString()}const wte=["x","y","borderWidth","radius","tension"],_te=["color","borderColor","backgroundColor"];function vte(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_te},numbers:{type:"number",properties:wte}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function jte(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const L2=new Map;function Tte(t,e){e=e||{};const n=t+JSON.stringify(e);let a=L2.get(n);return a||(a=new Intl.NumberFormat(t,e),L2.set(n,a)),a}function hy(t,e,n){return Tte(e,n).format(t)}const kte={values(t){return gt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const a=this.chart.options.locale;let r,s=t;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),s=Ete(t,n)}const o=uL(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),hy(t,a,c)}};function Ete(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var gL={formatters:kte};function Ste(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gL.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nr=Object.create(null),ag=Object.create(null);function bl(t,e){if(!e)return t;const n=e.split(".");for(let a=0,r=n.length;a<r;++a){const s=n[a];t=t[s]||(t[s]=Object.create(null))}return t}function Lf(t,e,n){return typeof e=="string"?Fl(bl(t,e),n):Fl(bl(t,""),e)}class Cte{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,r)=>If(r.backgroundColor),this.hoverBorderColor=(a,r)=>If(r.borderColor),this.hoverColor=(a,r)=>If(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Lf(this,e,n)}get(e){return bl(this,e)}describe(e,n){return Lf(ag,e,n)}override(e,n){return Lf(Nr,e,n)}route(e,n,a,r){const s=bl(this,e),o=bl(this,a),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],h=o[r];return $e(c)?Object.assign({},h,c):De(c,h)},set(c){this[l]=c}}})}apply(e){e.forEach(n=>n(this))}}var bt=new Cte({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vte,jte,Ste]);function Ate(t){return!t||ut(t.size)||ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function O2(t,e,n,a,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>a&&(a=s),a}function er(t,e,n){const a=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*a)/a+r}function M2(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function rg(t,e,n,a){xL(t,e,n,a,null)}function xL(t,e,n,a,r){let s,o,l,c,h,u,d,m;const f=e.pointStyle,p=e.rotation,g=e.radius;let x=(p||0)*sy;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,a),t.rotate(x),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,a,r/2,g,0,0,Ut):t.arc(n,a,g,0,Ut),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(x)*u,a-Math.cos(x)*g),x+=ou,t.lineTo(n+Math.sin(x)*u,a-Math.cos(x)*g),x+=ou,t.lineTo(n+Math.sin(x)*u,a-Math.cos(x)*g),t.closePath();break;case"rectRounded":h=g*.516,c=g-h,o=Math.cos(x+Gn)*c,d=Math.cos(x+Gn)*(r?r/2-h:c),l=Math.sin(x+Gn)*c,m=Math.sin(x+Gn)*(r?r/2-h:c),t.arc(n-d,a-l,h,x-Qe,x-Vt),t.arc(n+m,a-o,h,x-Vt,x),t.arc(n+d,a+l,h,x,x+Vt),t.arc(n-m,a+o,h,x+Vt,x+Qe),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=r?r/2:c,t.rect(n-u,a-c,2*u,2*c);break}x+=Gn;case"rectRot":d=Math.cos(x)*(r?r/2:g),o=Math.cos(x)*g,l=Math.sin(x)*g,m=Math.sin(x)*(r?r/2:g),t.moveTo(n-d,a-l),t.lineTo(n+m,a-o),t.lineTo(n+d,a+l),t.lineTo(n-m,a+o),t.closePath();break;case"crossRot":x+=Gn;case"cross":d=Math.cos(x)*(r?r/2:g),o=Math.cos(x)*g,l=Math.sin(x)*g,m=Math.sin(x)*(r?r/2:g),t.moveTo(n-d,a-l),t.lineTo(n+d,a+l),t.moveTo(n+m,a-o),t.lineTo(n-m,a+o);break;case"star":d=Math.cos(x)*(r?r/2:g),o=Math.cos(x)*g,l=Math.sin(x)*g,m=Math.sin(x)*(r?r/2:g),t.moveTo(n-d,a-l),t.lineTo(n+d,a+l),t.moveTo(n+m,a-o),t.lineTo(n-m,a+o),x+=Gn,d=Math.cos(x)*(r?r/2:g),o=Math.cos(x)*g,l=Math.sin(x)*g,m=Math.sin(x)*(r?r/2:g),t.moveTo(n-d,a-l),t.lineTo(n+d,a+l),t.moveTo(n+m,a-o),t.lineTo(n-m,a+o);break;case"line":o=r?r/2:Math.cos(x)*g,l=Math.sin(x)*g,t.moveTo(n-o,a-l),t.lineTo(n+o,a+l);break;case"dash":t.moveTo(n,a),t.lineTo(n+Math.cos(x)*(r?r/2:g),a+Math.sin(x)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ql(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ld(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function cd(t){t.restore()}function Nte(t,e,n,a,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!a?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Ite(t,e,n,a){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(a?e.cp1x:e.cp2x,a?e.cp1y:e.cp2y,a?n.cp2x:n.cp1x,a?n.cp2y:n.cp1y,n.x,n.y)}function Lte(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ote(t,e,n,a,r){if(r.strikethrough||r.underline){const s=t.measureText(a),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,c=n-s.actualBoundingBoxAscent,h=n+s.actualBoundingBoxDescent,u=r.strikethrough?(c+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function Mte(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function $l(t,e,n,a,r,s={}){const o=gt(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let c,h;for(t.save(),t.font=r.string,Lte(t,s),c=0;c<o.length;++c)h=o[c],s.backdrop&&Mte(t,s.backdrop),l&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),ut(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,n,a,s.maxWidth)),t.fillText(h,n,a,s.maxWidth),Ote(t,n,a,h,s),a+=Number(r.lineHeight);t.restore()}function cu(t,e){const{x:n,y:a,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,a+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(n,a+s-o.bottomLeft),t.arc(n+o.bottomLeft,a+s-o.bottomLeft,o.bottomLeft,Qe,Vt,!0),t.lineTo(n+r-o.bottomRight,a+s),t.arc(n+r-o.bottomRight,a+s-o.bottomRight,o.bottomRight,Vt,0,!0),t.lineTo(n+r,a+o.topRight),t.arc(n+r-o.topRight,a+o.topRight,o.topRight,0,-Vt,!0),t.lineTo(n+o.topLeft,a)}const Rte=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Pte=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Dte(t,e){const n=(""+t).match(Rte);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Bte=t=>+t||0;function yL(t,e){const n={},a=$e(e),r=a?Object.keys(e):e,s=$e(t)?a?o=>De(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Bte(s(o));return n}function Fte(t){return yL(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ls(t){return yL(t,["topLeft","topRight","bottomLeft","bottomRight"])}function an(t){const e=Fte(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function It(t,e){t=t||{},e=e||bt.font;let n=De(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let a=De(t.style,e.style);a&&!(""+a).match(Pte)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const r={family:De(t.family,e.family),lineHeight:Dte(De(t.lineHeight,e.lineHeight),n),size:n,style:a,weight:De(t.weight,e.weight),string:""};return r.string=Ate(r),r}function Fc(t,e,n,a){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Hte(t,e,n){const{min:a,max:r}=t,s=cL(e,(r-a)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(a,-Math.abs(s)),max:o(r,s)}}function Hr(t,e){return Object.assign(Object.create(t),e)}function uy(t,e=[""],n,a,r=()=>t[0]){const s=n||t;typeof a>"u"&&(a=vL("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:a,_getTarget:r,override:l=>uy([l,...t],e,s,a)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return wL(l,c,()=>Gte(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return P2(l).includes(c)},ownKeys(l){return P2(l)},set(l,c,h){const u=l._storage||(l._storage=r());return l[c]=u[c]=h,delete l._keys,!0}})}function Os(t,e,n,a){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:bL(t,a),setContext:s=>Os(t,s,n,a),override:s=>Os(t.override(s),e,n,a)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,l){return wL(s,o,()=>$te(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,l){return t[o]=l,delete s[o],!0}})}function bL(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:a=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:a,isScriptable:An(n)?n:()=>n,isIndexable:An(a)?a:()=>a}}const qte=(t,e)=>t?t+ry(e):e,dy=(t,e)=>$e(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function wL(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const a=n();return t[e]=a,a}function $te(t,e,n){const{_proxy:a,_context:r,_subProxy:s,_descriptors:o}=t;let l=a[e];return An(l)&&o.isScriptable(e)&&(l=zte(e,l,t,n)),gt(l)&&l.length&&(l=Wte(e,l,t,o.isIndexable)),dy(e,l)&&(l=Os(l,r,s&&s[e],o)),l}function zte(t,e,n,a){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(s,o||a);return l.delete(t),dy(t,c)&&(c=my(r._scopes,r,t,c)),c}function Wte(t,e,n,a){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=n;if(typeof s.index<"u"&&a(t))return e[s.index%e.length];if($e(e[0])){const c=e,h=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const d=my(h,r,t,u);e.push(Os(d,s,o&&o[t],l))}}return e}function _L(t,e,n){return An(t)?t(e,n):t}const Ute=(t,e)=>t===!0?e:typeof t=="string"?Hl(e,t):void 0;function Vte(t,e,n,a,r){for(const s of e){const o=Ute(n,s);if(o){t.add(o);const l=_L(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==a)return l}else if(o===!1&&typeof a<"u"&&n!==a)return null}return!1}function my(t,e,n,a){const r=e._rootScopes,s=_L(e._fallback,n,a),o=[...t,...r],l=new Set;l.add(a);let c=R2(l,o,n,s||n,a);return c===null||typeof s<"u"&&s!==n&&(c=R2(l,o,s,c,a),c===null)?!1:uy(Array.from(l),[""],r,s,()=>Yte(e,n,a))}function R2(t,e,n,a,r){for(;n;)n=Vte(t,e,n,a,r);return n}function Yte(t,e,n){const a=t._getTarget();e in a||(a[e]={});const r=a[e];return gt(r)&&$e(n)?n:r||{}}function Gte(t,e,n,a){let r;for(const s of e)if(r=vL(qte(s,t),n),typeof r<"u")return dy(t,r)?my(n,a,t,r):r}function vL(t,e){for(const n of e){if(!n)continue;const a=n[t];if(typeof a<"u")return a}}function P2(t){let e=t._keys;return e||(e=t._keys=Xte(t._scopes)),e}function Xte(t){const e=new Set;for(const n of t)for(const a of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(a);return Array.from(e)}const Jte=Number.EPSILON||1e-14,Ms=(t,e)=>e<t.length&&!t[e].skip&&t[e],jL=t=>t==="x"?"y":"x";function Qte(t,e,n,a){const r=t.skip?e:t,s=e,o=n.skip?e:n,l=Ls(s,r),c=Ls(o,s);let h=l/(l+c),u=c/(l+c);h=isNaN(h)?0:h,u=isNaN(u)?0:u;const d=a*h,m=a*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+m*(o.x-r.x),y:s.y+m*(o.y-r.y)}}}function Kte(t,e,n){const a=t.length;let r,s,o,l,c,h=Ms(t,0);for(let u=0;u<a-1;++u)if(c=h,h=Ms(t,u+1),!(!c||!h)){if(xl(e[u],0,Jte)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function Zte(t,e,n="x"){const a=jL(n),r=t.length;let s,o,l,c=Ms(t,0);for(let h=0;h<r;++h){if(o=l,l=c,c=Ms(t,h+1),!l)continue;const u=l[n],d=l[a];o&&(s=(u-o[n])/3,l[`cp1${n}`]=u-s,l[`cp1${a}`]=d-s*e[h]),c&&(s=(c[n]-u)/3,l[`cp2${n}`]=u+s,l[`cp2${a}`]=d+s*e[h])}}function ene(t,e="x"){const n=jL(e),a=t.length,r=Array(a).fill(0),s=Array(a);let o,l,c,h=Ms(t,0);for(o=0;o<a;++o)if(l=c,c=h,h=Ms(t,o+1),!!c){if(h){const u=h[e]-c[e];r[o]=u!==0?(h[n]-c[n])/u:0}s[o]=l?h?Is(r[o-1])!==Is(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Kte(t,r,s),Zte(t,s,e)}function Hc(t,e,n){return Math.max(Math.min(t,n),e)}function tne(t,e){let n,a,r,s,o,l=ql(t[0],e);for(n=0,a=t.length;n<a;++n)o=s,s=l,l=n<a-1&&ql(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=Hc(r.cp1x,e.left,e.right),r.cp1y=Hc(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Hc(r.cp2x,e.left,e.right),r.cp2y=Hc(r.cp2y,e.top,e.bottom)))}function nne(t,e,n,a,r){let s,o,l,c;if(e.spanGaps&&(t=t.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")ene(t,r);else{let h=a?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)l=t[s],c=Qte(h,l,t[Math.min(s+1,o-(a?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}e.capBezierPoints&&tne(t,n)}function fy(){return typeof window<"u"&&typeof document<"u"}function py(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hu(t,e,n){let a;return typeof t=="string"?(a=parseInt(t,10),t.indexOf("%")!==-1&&(a=a/100*e.parentNode[n])):a=t,a}const hd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ine(t,e){return hd(t).getPropertyValue(e)}const ane=["top","right","bottom","left"];function yr(t,e,n){const a={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=ane[r];a[s]=parseFloat(t[e+"-"+s+n])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}const rne=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function sne(t,e){const n=t.touches,a=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=a;let o=!1,l,c;if(rne(r,s,t.target))l=r,c=s;else{const h=e.getBoundingClientRect();l=a.clientX-h.left,c=a.clientY-h.top,o=!0}return{x:l,y:c,box:o}}function rr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:a}=e,r=hd(n),s=r.boxSizing==="border-box",o=yr(r,"padding"),l=yr(r,"border","width"),{x:c,y:h,box:u}=sne(t,n),d=o.left+(u&&l.left),m=o.top+(u&&l.top);let{width:f,height:p}=e;return s&&(f-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-d)/f*n.width/a),y:Math.round((h-m)/p*n.height/a)}}function one(t,e,n){let a,r;if(e===void 0||n===void 0){const s=t&&py(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),l=hd(s),c=yr(l,"border","width"),h=yr(l,"padding");e=o.width-h.width-c.width,n=o.height-h.height-c.height,a=hu(l.maxWidth,s,"clientWidth"),r=hu(l.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:a||su,maxHeight:r||su}}const Aa=t=>Math.round(t*10)/10;function lne(t,e,n,a){const r=hd(t),s=yr(r,"margin"),o=hu(r.maxWidth,t,"clientWidth")||su,l=hu(r.maxHeight,t,"clientHeight")||su,c=one(t,e,n);let{width:h,height:u}=c;if(r.boxSizing==="content-box"){const m=yr(r,"border","width"),f=yr(r,"padding");h-=f.width+m.width,u-=f.height+m.height}return h=Math.max(0,h-s.width),u=Math.max(0,a?h/a:u-s.height),h=Aa(Math.min(h,o,c.maxWidth)),u=Aa(Math.min(u,l,c.maxHeight)),h&&!u&&(u=Aa(h/2)),(e!==void 0||n!==void 0)&&a&&c.height&&u>c.height&&(u=c.height,h=Aa(Math.floor(u*a))),{width:h,height:u}}function D2(t,e,n){const a=e||1,r=Aa(t.height*a),s=Aa(t.width*a);t.height=Aa(t.height),t.width=Aa(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==a||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=a,o.height=r,o.width=s,t.ctx.setTransform(a,0,0,a,0,0),!0):!1}const cne=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};fy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function B2(t,e){const n=ine(t,e),a=n&&n.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function sr(t,e,n,a){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function hne(t,e,n,a){return{x:t.x+n*(e.x-t.x),y:a==="middle"?n<.5?t.y:e.y:a==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function une(t,e,n,a){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=sr(t,r,n),l=sr(r,s,n),c=sr(s,e,n),h=sr(o,l,n),u=sr(l,c,n);return sr(h,u,n)}const dne=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,a){return n-a},leftForLtr(n,a){return n-a}}},mne=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function cs(t,e,n){return t?dne(e,n):mne()}function TL(t,e){let n,a;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,a=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=a)}function kL(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function EL(t){return t==="angle"?{between:lu,compare:hte,normalize:ja}:{between:Ko,compare:(e,n)=>e-n,normalize:e=>e}}function F2({start:t,end:e,count:n,loop:a,style:r}){return{start:t%n,end:e%n,loop:a&&(e-t+1)%n===0,style:r}}function fne(t,e,n){const{property:a,start:r,end:s}=n,{between:o,normalize:l}=EL(a),c=e.length;let{start:h,end:u,loop:d}=t,m,f;if(d){for(h+=c,u+=c,m=0,f=c;m<f&&o(l(e[h%c][a]),r,s);++m)h--,u--;h%=c,u%=c}return u<h&&(u+=c),{start:h,end:u,loop:d,style:t.style}}function pne(t,e,n){if(!n)return[t];const{property:a,start:r,end:s}=n,o=e.length,{compare:l,between:c,normalize:h}=EL(a),{start:u,end:d,loop:m,style:f}=fne(t,e,n),p=[];let g=!1,x=null,b,w,k;const E=()=>c(r,k,b)&&l(r,k)!==0,v=()=>l(s,b)===0||c(s,k,b),S=()=>g||E(),L=()=>!g||v();for(let O=u,P=u;O<=d;++O)w=e[O%o],!w.skip&&(b=h(w[a]),b!==k&&(g=c(b,r,s),x===null&&S()&&(x=l(b,r)===0?O:P),x!==null&&L()&&(p.push(F2({start:x,end:O,loop:m,count:o,style:f})),x=null),P=O,k=b));return x!==null&&p.push(F2({start:x,end:d,loop:m,count:o,style:f})),p}function gne(t,e){const n=[],a=t.segments;for(let r=0;r<a.length;r++){const s=pne(a[r],t.points,e);s.length&&n.push(...s)}return n}function xne(t,e,n,a){let r=0,s=e-1;if(n&&!a)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function yne(t,e,n,a){const r=t.length,s=[];let o=e,l=t[e],c;for(c=e+1;c<=n;++c){const h=t[c%r];h.skip||h.stop?l.skip||(a=!1,s.push({start:e%r,end:(c-1)%r,loop:a}),e=o=h.stop?c:null):(o=c,l.skip&&(e=c)),l=h}return o!==null&&s.push({start:e%r,end:o%r,loop:a}),s}function bne(t,e){const n=t.points,a=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:l}=xne(n,r,s,a);if(a===!0)return H2(t,[{start:o,end:l,loop:s}],n,e);const c=l<o?l+r:l,h=!!t._fullLoop&&o===0&&l===r-1;return H2(t,yne(n,o,c,h),n,e)}function H2(t,e,n,a){return!a||!a.setContext||!n?e:wne(t,e,n,a)}function wne(t,e,n,a){const r=t._chart.getContext(),s=q2(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=n.length,h=[];let u=s,d=e[0].start,m=d;function f(p,g,x,b){const w=l?-1:1;if(p!==g){for(p+=c;n[p%c].skip;)p-=w;for(;n[g%c].skip;)g+=w;p%c!==g%c&&(h.push({start:p%c,end:g%c,loop:x,style:b}),u=b,d=g%c)}}for(const p of e){d=l?d:p.start;let g=n[d%c],x;for(m=d+1;m<=p.end;m++){const b=n[m%c];x=q2(a.setContext(Hr(r,{type:"segment",p0:g,p1:b,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),_ne(x,u)&&f(d,m-1,p.loop,u),g=b,u=x}d<m-1&&f(d,m-1,p.loop,u)}return h}function q2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function _ne(t,e){if(!e)return!1;const n=[],a=function(r,s){return cy(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,a)!==JSON.stringify(e,a)}function qc(t,e,n){return t.options.clip?t[n]:e[n]}function vne(t,e){const{xScale:n,yScale:a}=t;return n&&a?{left:qc(n,e,"left"),right:qc(n,e,"right"),top:qc(a,e,"top"),bottom:qc(a,e,"bottom")}:e}function jne(t,e){const n=e._clip;if(n.disabled)return!1;const a=vne(e,t.chartArea);return{left:n.left===!1?0:a.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:a.right+(n.right===!0?0:n.right),top:n.top===!1?0:a.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:a.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Tne{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,a,r){const s=n.listeners[r],o=n.duration;s.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(a-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fL.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((a,r)=>{if(!a.running||!a.items.length)return;const s=a.items;let o=s.length-1,l=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>a.duration&&(a.duration=c._total),c.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,a,e,"progress")),s.length||(a.running=!1,this._notify(r,a,e,"complete"),a.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let a=n.get(e);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,a)),a}listen(e,n,a){this._getAnims(e).listeners[n].push(a)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((a,r)=>Math.max(a,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const a=n.items;let r=a.length-1;for(;r>=0;--r)a[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var na=new Tne;const $2="transparent",kne={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const a=I2(t||$2),r=a.valid&&I2(e||$2);return r&&r.valid?r.mix(a,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ene{constructor(e,n,a,r){const s=n[a];r=Fc([e.to,r,s,e.from]);const o=Fc([e.from,s,r]);this._active=!0,this._fn=e.fn||kne[e.type||typeof o],this._easing=yl[e.easing]||yl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=a,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,a){if(this._active){this._notify(!1);const r=this._target[this._prop],s=a-this._start,o=this._duration-s;this._start=a,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Fc([e.to,n,r,e.from]),this._from=Fc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,a=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let c;if(this._active=s!==l&&(o||n<a),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=s;return}c=n/a%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,a)=>{e.push({res:n,rej:a})})}_notify(e){const n=e?"res":"rej",a=this._promises||[];for(let r=0;r<a.length;r++)a[r][n]()}}class gy{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!$e(e))return;const n=Object.keys(bt.animation),a=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!$e(s))return;const o={};for(const l of n)o[l]=s[l];(gt(s.properties)&&s.properties||[r]).forEach(l=>{(l===r||!a.has(l))&&a.set(l,o)})})}_animateOptions(e,n){const a=n.options,r=Cne(e,a);if(!r)return[];const s=this._createAnimations(r,a);return a.$shared&&Sne(e.options.$animations,a).then(()=>{e.options=a},()=>{}),s}_createAnimations(e,n){const a=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[h];let d=s[h];const m=a.get(h);if(d)if(m&&d.active()){d.update(m,u,l);continue}else d.cancel();if(!m||!m.duration){e[h]=u;continue}s[h]=d=new Ene(m,e,h,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const a=this._createAnimations(e,n);if(a.length)return na.add(this._chart,a),!0}}function Sne(t,e){const n=[],a=Object.keys(e);for(let r=0;r<a.length;r++){const s=t[a[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Cne(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function z2(t,e){const n=t&&t.options||{},a=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:a?s:r,end:a?r:s}}function Ane(t,e,n){if(n===!1)return!1;const a=z2(t,n),r=z2(e,n);return{top:r.end,right:a.end,bottom:r.start,left:a.start}}function Nne(t){let e,n,a,r;return $e(t)?(e=t.top,n=t.right,a=t.bottom,r=t.left):e=n=a=r=t,{top:e,right:n,bottom:a,left:r,disabled:t===!1}}function SL(t,e){const n=[],a=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=a.length;r<s;++r)n.push(a[r].index);return n}function W2(t,e,n,a={}){const r=t.keys,s=a.mode==="single";let o,l,c,h;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===n){if(u=!0,a.all)continue;break}h=t.values[c],Nn(h)&&(s||e===0||Is(e)===Is(h))&&(e+=h)}return!u&&!a.all?0:e}function Ine(t,e){const{iScale:n,vScale:a}=e,r=n.axis==="x"?"x":"y",s=a.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,h,u;for(c=0,h=o.length;c<h;++c)u=o[c],l[c]={[r]:u,[s]:t[u]};return l}function Of(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Lne(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function One(t){const{min:e,max:n,minDefined:a,maxDefined:r}=t.getUserBounds();return{min:a?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Mne(t,e,n){const a=t[e]||(t[e]={});return a[n]||(a[n]={})}function U2(t,e,n,a){for(const r of e.getMatchingVisibleMetas(a).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function V2(t,e){const{chart:n,_cachedMeta:a}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:l}=a,c=s.axis,h=o.axis,u=Lne(s,o,a),d=e.length;let m;for(let f=0;f<d;++f){const p=e[f],{[c]:g,[h]:x}=p,b=p._stacks||(p._stacks={});m=b[h]=Mne(r,u,g),m[l]=x,m._top=U2(m,o,!0,a.type),m._bottom=U2(m,o,!1,a.type);const w=m._visualValues||(m._visualValues={});w[l]=x}}function Mf(t,e){const n=t.scales;return Object.keys(n).filter(a=>n[a].axis===e).shift()}function Rne(t,e){return Hr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Pne(t,e,n){return Hr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Mo(t,e){const n=t.controller.index,a=t.vScale&&t.vScale.axis;if(a){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[a]===void 0||s[a][n]===void 0)return;delete s[a][n],s[a]._visualValues!==void 0&&s[a]._visualValues[n]!==void 0&&delete s[a]._visualValues[n]}}}const Rf=t=>t==="reset"||t==="none",Y2=(t,e)=>e?t:Object.assign({},t),Dne=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:SL(n,!0),values:null};class xy{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Of(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Mo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,a=this.getDataset(),r=(d,m,f,p)=>d==="x"?m:d==="r"?p:f,s=n.xAxisID=De(a.xAxisID,Mf(e,"x")),o=n.yAxisID=De(a.yAxisID,Mf(e,"y")),l=n.rAxisID=De(a.rAxisID,Mf(e,"r")),c=n.indexAxis,h=n.iAxisID=r(c,s,o,l),u=n.vAxisID=r(c,o,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&C2(this._data,this),e._stacked&&Mo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),a=this._data;if($e(n)){const r=this._cachedMeta;this._data=Ine(n,r)}else if(a!==n){if(a){C2(a,this);const r=this._cachedMeta;Mo(r),r._parsed=[]}n&&Object.isExtensible(n)&&fte(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,a=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Of(n.vScale,n),n.stack!==a.stack&&(r=!0,Mo(n),n.stack=a.stack),this._resyncElements(e),(r||s!==n._stacked)&&(V2(this,n._parsed),n._stacked=Of(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),a=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:a,_data:r}=this,{iScale:s,_stacked:o}=a,l=s.axis;let c=e===0&&n===r.length?!0:a._sorted,h=e>0&&a._parsed[e-1],u,d,m;if(this._parsing===!1)a._parsed=r,a._sorted=!0,m=r;else{gt(r[e])?m=this.parseArrayData(a,r,e,n):$e(r[e])?m=this.parseObjectData(a,r,e,n):m=this.parsePrimitiveData(a,r,e,n);const f=()=>d[l]===null||h&&d[l]<h[l];for(u=0;u<n;++u)a._parsed[u+e]=d=m[u],c&&(f()&&(c=!1),h=d);a._sorted=c}o&&V2(this,m)}parsePrimitiveData(e,n,a,r){const{iScale:s,vScale:o}=e,l=s.axis,c=o.axis,h=s.getLabels(),u=s===o,d=new Array(r);let m,f,p;for(m=0,f=r;m<f;++m)p=m+a,d[m]={[l]:u||s.parse(h[p],p),[c]:o.parse(n[p],p)};return d}parseArrayData(e,n,a,r){const{xScale:s,yScale:o}=e,l=new Array(r);let c,h,u,d;for(c=0,h=r;c<h;++c)u=c+a,d=n[u],l[c]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return l}parseObjectData(e,n,a,r){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(r);let u,d,m,f;for(u=0,d=r;u<d;++u)m=u+a,f=n[m],h[u]={x:s.parse(Hl(f,l),m),y:o.parse(Hl(f,c),m)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,a){const r=this.chart,s=this._cachedMeta,o=n[e.axis],l={keys:SL(r,!0),values:n._stacks[e.axis]._visualValues};return W2(l,o,s.index,{mode:a})}updateRangeFromParsed(e,n,a,r){const s=a[n.axis];let o=s===null?NaN:s;const l=r&&a._stacks[n.axis];r&&l&&(r.values=l,o=W2(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const a=this._cachedMeta,r=a._parsed,s=a._sorted&&e===a.iScale,o=r.length,l=this._getOtherScale(e),c=Dne(n,a,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=One(l);let m,f;function p(){f=r[m];const g=f[l.axis];return!Nn(f[e.axis])||u>g||d<g}for(m=0;m<o&&!(!p()&&(this.updateRangeFromParsed(h,e,f,c),s));++m);if(s){for(m=o-1;m>=0;--m)if(!p()){this.updateRangeFromParsed(h,e,f,c);break}}return h}getAllParsedValues(e){const n=this._cachedMeta._parsed,a=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Nn(o)&&a.push(o);return a}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,a=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:a?""+a.getLabelForValue(s[a.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Nne(De(this.options.clip,Ane(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,a=this._cachedMeta,r=a.data||[],s=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop;let u;for(a.dataset&&a.dataset.draw(e,s,l,c),u=l;u<l+c;++u){const d=r[u];d.hidden||(d.active&&h?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const a=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(e||0,a)}getContext(e,n,a){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Pne(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Rne(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=a,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",a){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,l=s[o],c=this.enableOptionSharing&&zn(a);if(l)return Y2(l,c);const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],m=h.getOptionScopes(this.getDataset(),u),f=Object.keys(bt.elements[e]),p=()=>this.getContext(a,r,n),g=h.resolveNamedOptions(m,f,p,d);return g.$shared&&(g.$shared=c,s[o]=Object.freeze(Y2(g,c))),g}_resolveAnimations(e,n,a){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,l=s[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),d);c=u.createResolver(m,this.getContext(e,a,n))}const h=new gy(r,c&&c.animations);return c&&c._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Rf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const a=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(a),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,a),{sharedOptions:s,includeOptions:o}}updateElement(e,n,a,r){Rf(r)?Object.assign(e,a):this._resolveAnimations(n,r).update(e,a)}updateSharedOptions(e,n,a){e&&!Rf(n)&&this._resolveAnimations(void 0,n).update(e,a)}_setStyle(e,n,a,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,a,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,a){this._setStyle(e,a,"active",!1)}setHoverStyle(e,n,a){this._setStyle(e,a,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,a=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const r=a.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,a=!0){const r=this._cachedMeta,s=r.data,o=e+n;let l;const c=h=>{for(h.length+=n,l=h.length-1;l>=o;l--)h[l]=h[l-n]};for(c(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,n),a&&this.updateElements(s,e,n,"reset")}updateElements(e,n,a,r){}_removeElements(e,n){const a=this._cachedMeta;if(this._parsing){const r=a._parsed.splice(e,n);a._stacked&&Mo(a,r)}a.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,a,r]=e;this[n](a,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const a=arguments.length-2;a&&this._sync(["_insertElements",e,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Bne(t,e,n){let a=1,r=1,s=0,o=0;if(e<Ut){const l=t,c=l+e,h=Math.cos(l),u=Math.sin(l),d=Math.cos(c),m=Math.sin(c),f=(k,E,v)=>lu(k,l,c,!0)?1:Math.max(E,E*n,v,v*n),p=(k,E,v)=>lu(k,l,c,!0)?-1:Math.min(E,E*n,v,v*n),g=f(0,h,d),x=f(Vt,u,m),b=p(Qe,h,d),w=p(Qe+Vt,u,m);a=(g-b)/2,r=(x-w)/2,s=-(g+b)/2,o=-(x+w)/2}return{ratioX:a,ratioY:r,offsetX:s,offsetY:o}}class Fne extends xy{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:a,textAlign:r,color:s,useBorderRadius:o,borderRadius:l}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,h)=>{const d=e.getDatasetMeta(0).controller.getStyle(h);return{text:c,fillStyle:d.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(h),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:r,pointStyle:a,borderRadius:o&&(l||d.borderRadius),index:h}}):[]}},onClick(e,n,a){a.chart.toggleDataVisibility(n.index),a.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const a=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=a;else{let s=c=>+a[c];if($e(a[e])){const{key:c="value"}=this._parsing;s=h=>+Hl(a[h],c)}let o,l;for(o=e,l=e+n;o<l;++o)r._parsed[o]=s(o)}}_getRotation(){return Pt(this.options.rotation-90)}_getCircumference(){return Pt(this.options.circumference)}_getRotationExtents(){let e=Ut,n=-Ut;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){const r=this.chart.getDatasetMeta(a).controller,s=r._getRotation(),o=r._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:a}=n,r=this._cachedMeta,s=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(a.width,a.height)-o)/2,0),c=Math.min(Zee(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:p,offsetY:g}=Bne(d,u,c),x=(a.width-o)/m,b=(a.height-o)/f,w=Math.max(Math.min(x,b)/2,0),k=cL(this.options.radius,w),E=Math.max(k*c,0),v=(k-E)/this._getVisibleDatasetWeightTotal();this.offsetX=p*k,this.offsetY=g*k,r.total=this.calculateTotal(),this.outerRadius=k-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*h,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const a=this.options,r=this._cachedMeta,s=this._getCircumference();return n&&a.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*s/Ut)}updateElements(e,n,a,r){const s=r==="reset",o=this.chart,l=o.chartArea,h=o.options.animation,u=(l.left+l.right)/2,d=(l.top+l.bottom)/2,m=s&&h.animateScale,f=m?0:this.innerRadius,p=m?0:this.outerRadius,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(n,r);let b=this._getRotation(),w;for(w=0;w<n;++w)b+=this._circumference(w,s);for(w=n;w<n+a;++w){const k=this._circumference(w,s),E=e[w],v={x:u+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+k,circumference:k,outerRadius:p,innerRadius:f};x&&(v.options=g||this.resolveDataElementOptions(w,E.active?"active":r)),b+=k,this.updateElement(E,w,v,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let a=0,r;for(r=0;r<n.length;r++){const s=e._parsed[r];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(a+=Math.abs(s))}return a}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ut*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,a=this.chart,r=a.data.labels||[],s=hy(n._parsed[e],a.options.locale);return{label:r[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const a=this.chart;let r,s,o,l,c;if(!e){for(r=0,s=a.data.datasets.length;r<s;++r)if(a.isDatasetVisible(r)){o=a.getDatasetMeta(r),e=o.data,l=o.controller;break}}if(!e)return 0;for(r=0,s=e.length;r<s;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let a=0,r=e.length;a<r;++a){const s=this.resolveDataElementOptions(a);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(n+=this._getRingWeight(a));return n}_getRingWeight(e){return Math.max(De(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Hne extends xy{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:a,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=yte(n,r,o);this._drawStart=l,this._drawCount=c,bte(n)&&(l=0,c=r.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!s._decimated,a.points=r;const h=this.resolveDatasetElementOptions(e);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:h},e),this.updateElements(r,l,c,e)}updateElements(e,n,a,r){const s=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,r),m=o.axis,f=l.axis,{spanGaps:p,segment:g}=this.options,x=Ar(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||r==="none",w=n+a,k=e.length;let E=n>0&&this.getParsed(n-1);for(let v=0;v<k;++v){const S=e[v],L=b?S:{};if(v<n||v>=w){L.skip=!0;continue}const O=this.getParsed(v),P=ut(O[f]),j=L[m]=o.getPixelForValue(O[m],v),A=L[f]=s||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,O,c):O[f],v);L.skip=isNaN(j)||isNaN(A)||P,L.stop=v>0&&Math.abs(O[m]-E[m])>x,g&&(L.parsed=O,L.raw=h.data[v]),d&&(L.options=u||this.resolveDataElementOptions(v,S.active?"active":r)),b||this.updateElement(S,v,L,r),E=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,a=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return a;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(a,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function tr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yy{static override(e){Object.assign(yy.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return tr()}parse(){return tr()}format(){return tr()}add(){return tr()}diff(){return tr()}startOf(){return tr()}endOf(){return tr()}}var qne={_date:yy};function $ne(t,e,n,a){const{controller:r,data:s,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const h=l._reversePixels?dte:fr;if(a){if(r._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const m=h(s,e,n-d),f=h(s,e,n+d);return{lo:m.lo,hi:f.hi}}}}else{const u=h(s,e,n);if(c){const{vScale:d}=r._cachedMeta,{_parsed:m}=t,f=m.slice(0,u.lo+1).reverse().findIndex(g=>!ut(g[d.axis]));u.lo-=Math.max(0,f);const p=m.slice(u.hi).findIndex(g=>!ut(g[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function ud(t,e,n,a,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,c=s.length;l<c;++l){const{index:h,data:u}=s[l],{lo:d,hi:m}=$ne(s[l],e,o,r);for(let f=d;f<=m;++f){const p=u[f];p.skip||a(p,h,f)}}}function zne(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(a,r){const s=e?Math.abs(a.x-r.x):0,o=n?Math.abs(a.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Pf(t,e,n,a,r){const s=[];return!r&&!t.isPointInArea(e)||ud(t,n,e,function(l,c,h){!r&&!ql(l,t.chartArea,0)||l.inRange(e.x,e.y,a)&&s.push({element:l,datasetIndex:c,index:h})},!0),s}function Wne(t,e,n,a){let r=[];function s(o,l,c){const{startAngle:h,endAngle:u}=o.getProps(["startAngle","endAngle"],a),{angle:d}=ig(o,{x:e.x,y:e.y});lu(d,h,u)&&r.push({element:o,datasetIndex:l,index:c})}return ud(t,n,e,s),r}function Une(t,e,n,a,r,s){let o=[];const l=zne(n);let c=Number.POSITIVE_INFINITY;function h(u,d,m){const f=u.inRange(e.x,e.y,r);if(a&&!f)return;const p=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(p))&&!f)return;const x=l(e,p);x<c?(o=[{element:u,datasetIndex:d,index:m}],c=x):x===c&&o.push({element:u,datasetIndex:d,index:m})}return ud(t,n,e,h),o}function Df(t,e,n,a,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!a?Wne(t,e,n,r):Une(t,e,n,a,r,s)}function G2(t,e,n,a,r){const s=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return ud(t,n,e,(c,h,u)=>{c[o]&&c[o](e[n],r)&&(s.push({element:c,datasetIndex:h,index:u}),l=l||c.inRange(e.x,e.y,r))}),a&&!l?[]:s}var Vne={modes:{index(t,e,n,a){const r=rr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Pf(t,r,s,a,o):Df(t,r,s,!1,a,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const u=l[0].index,d=h.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:h.index,index:u})}),c):[]},dataset(t,e,n,a){const r=rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Pf(t,r,s,a,o):Df(t,r,s,!1,a,o);if(l.length>0){const c=l[0].datasetIndex,h=t.getDatasetMeta(c).data;l=[];for(let u=0;u<h.length;++u)l.push({element:h[u],datasetIndex:c,index:u})}return l},point(t,e,n,a){const r=rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Pf(t,r,s,a,o)},nearest(t,e,n,a){const r=rr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Df(t,r,s,n.intersect,a,o)},x(t,e,n,a){const r=rr(e,t);return G2(t,r,"x",n.intersect,a)},y(t,e,n,a){const r=rr(e,t);return G2(t,r,"y",n.intersect,a)}}};const CL=["left","top","right","bottom"];function Ro(t,e){return t.filter(n=>n.pos===e)}function X2(t,e){return t.filter(n=>CL.indexOf(n.pos)===-1&&n.box.axis===e)}function Po(t,e){return t.sort((n,a)=>{const r=e?a:n,s=e?n:a;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Yne(t){const e=[];let n,a,r,s,o,l;for(n=0,a=(t||[]).length;n<a;++n)r=t[n],{position:s,options:{stack:o,stackWeight:l=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return e}function Gne(t){const e={};for(const n of t){const{stack:a,pos:r,stackWeight:s}=n;if(!a||!CL.includes(r))continue;const o=e[a]||(e[a]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Xne(t,e){const n=Gne(t),{vBoxMaxWidth:a,hBoxMaxHeight:r}=e;let s,o,l;for(s=0,o=t.length;s<o;++s){l=t[s];const{fullSize:c}=l.box,h=n[l.stack],u=h&&l.stackWeight/h.weight;l.horizontal?(l.width=u?u*a:c&&e.availableWidth,l.height=r):(l.width=a,l.height=u?u*r:c&&e.availableHeight)}return n}function Jne(t){const e=Yne(t),n=Po(e.filter(h=>h.box.fullSize),!0),a=Po(Ro(e,"left"),!0),r=Po(Ro(e,"right")),s=Po(Ro(e,"top"),!0),o=Po(Ro(e,"bottom")),l=X2(e,"x"),c=X2(e,"y");return{fullSize:n,leftAndTop:a.concat(s),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Ro(e,"chartArea"),vertical:a.concat(r).concat(c),horizontal:s.concat(o).concat(l)}}function J2(t,e,n,a){return Math.max(t[n],e[n])+Math.max(t[a],e[a])}function AL(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Qne(t,e,n,a){const{pos:r,box:s}=n,o=t.maxPadding;if(!$e(r)){n.size&&(t[r]-=n.size);const d=a[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&AL(o,s.getPadding());const l=Math.max(0,e.outerWidth-J2(o,t,"left","right")),c=Math.max(0,e.outerHeight-J2(o,t,"top","bottom")),h=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,n.horizontal?{same:h,other:u}:{same:u,other:h}}function Kne(t){const e=t.maxPadding;function n(a){const r=Math.max(e[a]-t[a],0);return t[a]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Zne(t,e){const n=e.maxPadding;function a(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return a(t?["left","right"]:["top","bottom"])}function Zo(t,e,n,a){const r=[];let s,o,l,c,h,u;for(s=0,o=t.length,h=0;s<o;++s){l=t[s],c=l.box,c.update(l.width||e.w,l.height||e.h,Zne(l.horizontal,e));const{same:d,other:m}=Qne(e,n,l,a);h|=d&&r.length,u=u||m,c.fullSize||r.push(l)}return h&&Zo(r,e,n,a)||u}function $c(t,e,n,a,r){t.top=n,t.left=e,t.right=e+a,t.bottom=n+r,t.width=a,t.height=r}function Q2(t,e,n,a){const r=n.padding;let{x:s,y:o}=e;for(const l of t){const c=l.box,h=a[l.stack]||{placed:0,weight:1},u=l.stackWeight/h.weight||1;if(l.horizontal){const d=e.w*u,m=h.size||c.height;zn(h.start)&&(o=h.start),c.fullSize?$c(c,r.left,o,n.outerWidth-r.right-r.left,m):$c(c,e.left+h.placed,o,d,m),h.start=o,h.placed+=d,o=c.bottom}else{const d=e.h*u,m=h.size||c.width;zn(h.start)&&(s=h.start),c.fullSize?$c(c,s,r.top,m,n.outerHeight-r.bottom-r.top):$c(c,s,e.top+h.placed,m,d),h.start=s,h.placed+=d,s=c.right}}e.x=s,e.y=o}var Kn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,a){if(!t)return;const r=an(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),l=Jne(t.boxes),c=l.vertical,h=l.horizontal;it(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=c.reduce((g,x)=>x.box.options&&x.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},r);AL(m,an(a));const f=Object.assign({maxPadding:m,w:s,h:o,x:r.left,y:r.top},r),p=Xne(c.concat(h),d);Zo(l.fullSize,f,d,p),Zo(c,f,d,p),Zo(h,f,d,p)&&Zo(c,f,d,p),Kne(f),Q2(l.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,Q2(l.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},it(l.chartArea,g=>{const x=g.box;Object.assign(x,t.chartArea),x.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class NL{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,a){}removeEventListener(e,n,a){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,a,r){return n=Math.max(0,n||e.width),a=a||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):a)}}isAttached(e){return!0}updateConfig(e){}}class eie extends NL{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dh="$chartjs",tie={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},K2=t=>t===null||t==="";function nie(t,e){const n=t.style,a=t.getAttribute("height"),r=t.getAttribute("width");if(t[dh]={initial:{height:a,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",K2(r)){const s=B2(t,"width");s!==void 0&&(t.width=s)}if(K2(a))if(t.style.height==="")t.height=t.width/(e||2);else{const s=B2(t,"height");s!==void 0&&(t.height=s)}return t}const IL=cne?{passive:!0}:!1;function iie(t,e,n){t&&t.addEventListener(e,n,IL)}function aie(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,IL)}function rie(t,e){const n=tie[t.type]||t.type,{x:a,y:r}=rr(t,e);return{type:n,chart:e,native:t,x:a!==void 0?a:null,y:r!==void 0?r:null}}function uu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function sie(t,e,n){const a=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||uu(l.addedNodes,a),o=o&&!uu(l.removedNodes,a);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function oie(t,e,n){const a=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||uu(l.removedNodes,a),o=o&&!uu(l.addedNodes,a);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const zl=new Map;let Z2=0;function LL(){const t=window.devicePixelRatio;t!==Z2&&(Z2=t,zl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function lie(t,e){zl.size||window.addEventListener("resize",LL),zl.set(t,e)}function cie(t){zl.delete(t),zl.size||window.removeEventListener("resize",LL)}function hie(t,e,n){const a=t.canvas,r=a&&py(a);if(!r)return;const s=pL((l,c)=>{const h=r.clientWidth;n(l,c),h<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,u=c.contentRect.height;h===0&&u===0||s(h,u)});return o.observe(r),lie(t,s),o}function Bf(t,e,n){n&&n.disconnect(),e==="resize"&&cie(t)}function uie(t,e,n){const a=t.canvas,r=pL(s=>{t.ctx!==null&&n(rie(s,t))},t);return iie(a,e,r),r}class die extends NL{acquireContext(e,n){const a=e&&e.getContext&&e.getContext("2d");return a&&a.canvas===e?(nie(e,n),a):null}releaseContext(e){const n=e.canvas;if(!n[dh])return!1;const a=n[dh].initial;["height","width"].forEach(s=>{const o=a[s];ut(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=a.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[dh],!0}addEventListener(e,n,a){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:sie,detach:oie,resize:hie}[n]||uie;r[n]=o(e,n,a)}removeEventListener(e,n){const a=e.$proxies||(e.$proxies={}),r=a[n];if(!r)return;({attach:Bf,detach:Bf,resize:Bf}[n]||aie)(e,n,r),a[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,a,r){return lne(e,n,a,r)}isAttached(e){const n=e&&py(e);return!!(n&&n.isConnected)}}function mie(t){return!fy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?eie:die}class On{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:a}=this.getProps(["x","y"],e);return{x:n,y:a}}hasValue(){return Ar(this.x)&&Ar(this.y)}getProps(e,n){const a=this.$animations;if(!n||!a)return this;const r={};return e.forEach(s=>{r[s]=a[s]&&a[s].active()?a[s]._to:this[s]}),r}}function fie(t,e){const n=t.options.ticks,a=pie(t),r=Math.min(n.maxTicksLimit||a,a),s=n.major.enabled?xie(e):[],o=s.length,l=s[0],c=s[o-1],h=[];if(o>r)return yie(e,h,s,o/r),h;const u=gie(s,e,r);if(o>0){let d,m;const f=o>1?Math.round((c-l)/(o-1)):null;for(zc(e,h,u,ut(f)?0:l-f,l),d=0,m=o-1;d<m;d++)zc(e,h,u,s[d],s[d+1]);return zc(e,h,u,c,ut(f)?e.length:c+f),h}return zc(e,h,u),h}function pie(t){const e=t.options.offset,n=t._tickSize(),a=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(a,r))}function gie(t,e,n){const a=bie(t),r=e.length/n;if(!a)return Math.max(r,1);const s=ste(a);for(let o=0,l=s.length-1;o<l;o++){const c=s[o];if(c>r)return c}return Math.max(r,1)}function xie(t){const e=[];let n,a;for(n=0,a=t.length;n<a;n++)t[n].major&&e.push(n);return e}function yie(t,e,n,a){let r=0,s=n[0],o;for(a=Math.ceil(a),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*a])}function zc(t,e,n,a,r){const s=De(a,0),o=Math.min(De(r,t.length),t.length);let l=0,c,h,u;for(n=Math.ceil(n),r&&(c=r-a,n=c/Math.floor(c/n)),u=s;u<0;)l++,u=Math.round(s+l*n);for(h=Math.max(s,0);h<o;h++)h===u&&(e.push(t[h]),l++,u=Math.round(s+l*n))}function bie(t){const e=t.length;let n,a;if(e<2)return!1;for(a=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==a)return!1;return a}const wie=t=>t==="left"?"right":t==="right"?"left":t,ev=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,tv=(t,e)=>Math.min(e||t,t);function nv(t,e){const n=[],a=t.length/e,r=t.length;let s=0;for(;s<r;s+=a)n.push(t[Math.floor(s)]);return n}function _ie(t,e,n){const a=t.ticks.length,r=Math.min(e,a-1),s=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),h;if(!(n&&(a===1?h=Math.max(c-s,o-c):e===0?h=(t.getPixelForTick(1)-c)/2:h=(c-t.getPixelForTick(r-1))/2,c+=r<e?h:-h,c<s-l||c>o+l)))return c}function vie(t,e){it(t,n=>{const a=n.gc,r=a.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[a[s]];a.splice(0,r)}})}function Do(t){return t.drawTicks?t.tickLength:0}function iv(t,e){if(!t.display)return 0;const n=It(t.font,e),a=an(t.padding);return(gt(t.text)?t.text.length:1)*n.lineHeight+a.height}function jie(t,e){return Hr(t,{scale:e,type:"scale"})}function Tie(t,e,n){return Hr(t,{tick:n,index:e,type:"tick"})}function kie(t,e,n){let a=ly(t);return(n&&e!=="right"||!n&&e==="right")&&(a=wie(a)),a}function Eie(t,e,n,a){const{top:r,left:s,bottom:o,right:l,chart:c}=t,{chartArea:h,scales:u}=c;let d=0,m,f,p;const g=o-r,x=l-s;if(t.isHorizontal()){if(f=Qt(a,s,l),$e(n)){const b=Object.keys(n)[0],w=n[b];p=u[b].getPixelForValue(w)+g-e}else n==="center"?p=(h.bottom+h.top)/2+g-e:p=ev(t,n,e);m=l-s}else{if($e(n)){const b=Object.keys(n)[0],w=n[b];f=u[b].getPixelForValue(w)-x+e}else n==="center"?f=(h.left+h.right)/2-x+e:f=ev(t,n,e);p=Qt(a,o,r),d=n==="left"?-Vt:Vt}return{titleX:f,titleY:p,maxWidth:m,rotation:d}}class Qs extends On{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:a,_suggestedMax:r}=this;return e=Si(e,Number.POSITIVE_INFINITY),n=Si(n,Number.NEGATIVE_INFINITY),a=Si(a,Number.POSITIVE_INFINITY),r=Si(r,Number.NEGATIVE_INFINITY),{min:Si(e,a),max:Si(n,r),minDefined:Nn(e),maxDefined:Nn(n)}}getMinMax(e){let{min:n,max:a,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:a};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)o=l[c].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(a=Math.max(a,o.max));return n=s&&n>a?a:n,a=r&&n>a?n:a,{min:Si(n,Si(a,n)),max:Si(a,Si(n,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rt(this.options.beforeUpdate,[this])}update(e,n,a){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Hte(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?nv(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fie(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,a;this.isHorizontal()?(n=this.left,a=this.right):(n=this.top,a=this.bottom,e=!e),this._startPixel=n,this._endPixel=a,this._reversePixels=e,this._length=a-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rt(this.options.afterUpdate,[this])}beforeSetDimensions(){rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let a,r,s;for(a=0,r=e.length;a<r;a++)s=e[a],s.label=rt(n.callback,[s.value,a,e],this)}afterTickToLabelConversion(){rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,a=tv(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,l,c,h;if(!this._isVisible()||!n.display||r>=s||a<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),d=u.widest.width,m=u.highest.height,f=Qn(this.chart.width-d,0,this.maxWidth);l=e.offset?this.maxWidth/a:f/(a-1),d+6>l&&(l=f/(a-(e.offset?.5:1)),c=this.maxHeight-Do(e.grid)-n.padding-iv(e.title,this.chart.options.font),h=Math.sqrt(d*d+m*m),o=dL(Math.min(Math.asin(Qn((u.highest.height+6)/l,-1,1)),Math.asin(Qn(c/h,-1,1))-Math.asin(Qn(m/h,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){rt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:a,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=iv(r,n.options.font);if(l?(e.width=this.maxWidth,e.height=Do(s)+c):(e.height=this.maxHeight,e.width=Do(s)+c),a.display&&this.ticks.length){const{first:h,last:u,widest:d,highest:m}=this._getLabelSizes(),f=a.padding*2,p=Pt(this.labelRotation),g=Math.cos(p),x=Math.sin(p);if(l){const b=a.mirror?0:x*d.width+g*m.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=a.mirror?0:g*d.width+x*m.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(h,u,x,g)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,a,r){const{ticks:{align:s,padding:o},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,f=0;c?h?(m=r*e.width,f=a*n.height):(m=a*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,f=n.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,a;for(n=0,a=e.length;n<a;n++)ut(e[n].label)&&(e.splice(n,1),a--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let a=this.ticks;n<a.length&&(a=nv(a,n)),this._labelSizes=e=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,a){const{ctx:r,_longestTextCache:s}=this,o=[],l=[],c=Math.floor(n/tv(n,a));let h=0,u=0,d,m,f,p,g,x,b,w,k,E,v;for(d=0;d<n;d+=c){if(p=e[d].label,g=this._resolveTickFontOptions(d),r.font=x=g.string,b=s[x]=s[x]||{data:{},gc:[]},w=g.lineHeight,k=E=0,!ut(p)&&!gt(p))k=O2(r,b.data,b.gc,k,p),E=w;else if(gt(p))for(m=0,f=p.length;m<f;++m)v=p[m],!ut(v)&&!gt(v)&&(k=O2(r,b.data,b.gc,k,v),E+=w);o.push(k),l.push(E),h=Math.max(k,h),u=Math.max(E,u)}vie(s,n);const S=o.indexOf(h),L=l.indexOf(u),O=P=>({width:o[P]||0,height:l[P]||0});return{first:O(0),last:O(n-1),widest:O(S),highest:O(L),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return ute(this._alignToPixels?er(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const a=n[e];return a.$context||(a.$context=Tie(this.getContext(),e,a))}return this.$context||(this.$context=jie(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Pt(this.labelRotation),a=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*a>l*r?l/a:c/r:c*r<l*a?c/a:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,a=this.chart,r=this.options,{grid:s,position:o,border:l}=r,c=s.offset,h=this.isHorizontal(),d=this.ticks.length+(c?1:0),m=Do(s),f=[],p=l.setContext(this.getContext()),g=p.display?p.width:0,x=g/2,b=function(R){return er(a,R,g)};let w,k,E,v,S,L,O,P,j,A,q,M;if(o==="top")w=b(this.bottom),L=this.bottom-m,P=w-x,A=b(e.top)+x,M=e.bottom;else if(o==="bottom")w=b(this.top),A=e.top,M=b(e.bottom)-x,L=w+x,P=this.top+m;else if(o==="left")w=b(this.right),S=this.right-m,O=w-x,j=b(e.left)+x,q=e.right;else if(o==="right")w=b(this.left),j=e.left,q=b(e.right)-x,S=w+x,O=this.left+m;else if(n==="x"){if(o==="center")w=b((e.top+e.bottom)/2+.5);else if($e(o)){const R=Object.keys(o)[0],$=o[R];w=b(this.chart.scales[R].getPixelForValue($))}A=e.top,M=e.bottom,L=w+x,P=L+m}else if(n==="y"){if(o==="center")w=b((e.left+e.right)/2);else if($e(o)){const R=Object.keys(o)[0],$=o[R];w=b(this.chart.scales[R].getPixelForValue($))}S=w-x,O=S-m,j=e.left,q=e.right}const C=De(r.ticks.maxTicksLimit,d),N=Math.max(1,Math.ceil(d/C));for(k=0;k<d;k+=N){const R=this.getContext(k),$=s.setContext(R),U=l.setContext(R),B=$.lineWidth,T=$.color,Y=U.dash||[],X=U.dashOffset,I=$.tickWidth,H=$.tickColor,W=$.tickBorderDash||[],K=$.tickBorderDashOffset;E=_ie(this,k,c),E!==void 0&&(v=er(a,E,B),h?S=O=j=q=v:L=P=A=M=v,f.push({tx1:S,ty1:L,tx2:O,ty2:P,x1:j,y1:A,x2:q,y2:M,width:B,color:T,borderDash:Y,borderDashOffset:X,tickWidth:I,tickColor:H,tickBorderDash:W,tickBorderDashOffset:K}))}return this._ticksLength=d,this._borderValue=w,f}_computeLabelItems(e){const n=this.axis,a=this.options,{position:r,ticks:s}=a,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:u,mirror:d}=s,m=Do(a.grid),f=m+u,p=d?-u:f,g=-Pt(this.labelRotation),x=[];let b,w,k,E,v,S,L,O,P,j,A,q,M="middle";if(r==="top")S=this.bottom-p,L=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+p,L=this._getXAxisLabelAlignment();else if(r==="left"){const N=this._getYAxisLabelAlignment(m);L=N.textAlign,v=N.x}else if(r==="right"){const N=this._getYAxisLabelAlignment(m);L=N.textAlign,v=N.x}else if(n==="x"){if(r==="center")S=(e.top+e.bottom)/2+f;else if($e(r)){const N=Object.keys(r)[0],R=r[N];S=this.chart.scales[N].getPixelForValue(R)+f}L=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")v=(e.left+e.right)/2-f;else if($e(r)){const N=Object.keys(r)[0],R=r[N];v=this.chart.scales[N].getPixelForValue(R)}L=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const C=this._getLabelSizes();for(b=0,w=l.length;b<w;++b){k=l[b],E=k.label;const N=s.setContext(this.getContext(b));O=this.getPixelForTick(b)+s.labelOffset,P=this._resolveTickFontOptions(b),j=P.lineHeight,A=gt(E)?E.length:1;const R=A/2,$=N.color,U=N.textStrokeColor,B=N.textStrokeWidth;let T=L;o?(v=O,L==="inner"&&(b===w-1?T=this.options.reverse?"left":"right":b===0?T=this.options.reverse?"right":"left":T="center"),r==="top"?h==="near"||g!==0?q=-A*j+j/2:h==="center"?q=-C.highest.height/2-R*j+j:q=-C.highest.height+j/2:h==="near"||g!==0?q=j/2:h==="center"?q=C.highest.height/2-R*j:q=C.highest.height-A*j,d&&(q*=-1),g!==0&&!N.showLabelBackdrop&&(v+=j/2*Math.sin(g))):(S=O,q=(1-A)*j/2);let Y;if(N.showLabelBackdrop){const X=an(N.backdropPadding),I=C.heights[b],H=C.widths[b];let W=q-X.top,K=0-X.left;switch(M){case"middle":W-=I/2;break;case"bottom":W-=I;break}switch(L){case"center":K-=H/2;break;case"right":K-=H;break;case"inner":b===w-1?K-=H:b>0&&(K-=H/2);break}Y={left:K,top:W,width:H+X.width,height:I+X.height,color:N.backdropColor}}x.push({label:E,font:P,textOffset:q,options:{rotation:g,color:$,strokeColor:U,strokeWidth:B,textAlign:T,textBaseline:M,translation:[v,S],backdrop:Y}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Pt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:a,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,c=o.widest.width;let h,u;return n==="left"?r?(u=this.right+s,a==="near"?h="left":a==="center"?(h="center",u+=c/2):(h="right",u+=c)):(u=this.right-l,a==="near"?h="right":a==="center"?(h="center",u-=c/2):(h="left",u=this.left)):n==="right"?r?(u=this.left+s,a==="near"?h="right":a==="center"?(h="center",u-=c/2):(h="left",u-=c)):(u=this.left+l,a==="near"?h="left":a==="center"?(h="center",u+=c/2):(h="right",u=this.right)):h="right",{textAlign:h,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:a,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(a,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,a=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(c,h,u)=>{!u.width||!u.color||(a.save(),a.lineWidth=u.width,a.strokeStyle=u.color,a.setLineDash(u.borderDash||[]),a.lineDashOffset=u.borderDashOffset,a.beginPath(),a.moveTo(c.x,c.y),a.lineTo(h.x,h.y),a.stroke(),a.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const c=r[s];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:a,grid:r}}=this,s=a.setContext(this.getContext()),o=a.display?s.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,u,d,m;this.isHorizontal()?(h=er(e,this.left,o)-o/2,u=er(e,this.right,l)+l/2,d=m=c):(d=er(e,this.top,o)-o/2,m=er(e,this.bottom,l)+l/2,h=u=c),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(h,d),n.lineTo(u,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const a=this.ctx,r=this._computeLabelArea();r&&ld(a,r);const s=this.getLabelItems(e);for(const o of s){const l=o.options,c=o.font,h=o.label,u=o.textOffset;$l(a,h,0,u,c,l)}r&&cd(a)}drawTitle(){const{ctx:e,options:{position:n,title:a,reverse:r}}=this;if(!a.display)return;const s=It(a.font),o=an(a.padding),l=a.align;let c=s.lineHeight/2;n==="bottom"||n==="center"||$e(n)?(c+=o.bottom,gt(a.text)&&(c+=s.lineHeight*(a.text.length-1))):c+=o.top;const{titleX:h,titleY:u,maxWidth:d,rotation:m}=Eie(this,c,n,l);$l(e,a.text,0,0,s,{color:a.color,maxWidth:d,rotation:m,textAlign:kie(l,n,r),textBaseline:"middle",translation:[h,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,a=De(e.grid&&e.grid.z,-1),r=De(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Qs.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:a,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const l=n[s];l[a]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return It(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Wc{constructor(e,n,a){this.type=e,this.scope=n,this.override=a,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let a;Aie(n)&&(a=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Sie(e,o,a),this.override&&bt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,a=e.id,r=this.scope;a in n&&delete n[a],r&&a in bt[r]&&(delete bt[r][a],this.override&&delete Nr[a])}}function Sie(t,e,n){const a=Fl(Object.create(null),[n?bt.get(n):{},bt.get(e),t.defaults]);bt.set(e,a),t.defaultRoutes&&Cie(e,t.defaultRoutes),t.descriptors&&bt.describe(e,t.descriptors)}function Cie(t,e){Object.keys(e).forEach(n=>{const a=n.split("."),r=a.pop(),s=[t].concat(a).join("."),o=e[n].split("."),l=o.pop(),c=o.join(".");bt.route(s,r,c,l)})}function Aie(t){return"id"in t&&"defaults"in t}class Nie{constructor(){this.controllers=new Wc(xy,"datasets",!0),this.elements=new Wc(On,"elements"),this.plugins=new Wc(Object,"plugins"),this.scales=new Wc(Qs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,a){[...n].forEach(r=>{const s=a||this._getRegistryForType(r);a||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):it(r,o=>{const l=a||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,a){const r=ry(e);rt(a["before"+r],[],a),n[e](a),rt(a["after"+r],[],a)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const a=this._typedRegistries[n];if(a.isForType(e))return a}return this.plugins}_get(e,n,a){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+a+".");return r}}var Li=new Nie;class Iie{constructor(){this._init=void 0}notify(e,n,a,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,a);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,a,r){r=r||{};for(const s of e){const o=s.plugin,l=o[a],c=[n,r,s.options];if(rt(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const a=e&&e.config,r=De(a.options&&a.options.plugins,{}),s=Lie(a);return r===!1&&!n?[]:Mie(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],a=this._cache,r=(s,o)=>s.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,a),e,"stop"),this._notify(r(a,n),e,"start")}}function Lie(t){const e={},n=[],a=Object.keys(Li.plugins.items);for(let s=0;s<a.length;s++)n.push(Li.getPlugin(a[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Oie(t,e){return!e&&t===!1?null:t===!0?{}:t}function Mie(t,{plugins:e,localIds:n},a,r){const s=[],o=t.getContext();for(const l of e){const c=l.id,h=Oie(a[c],r);h!==null&&s.push({plugin:l,options:Rie(t.config,{plugin:l,local:n[c]},h,o)})}return s}function Rie(t,{plugin:e,local:n},a,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(a,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sg(t,e){const n=bt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Pie(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Die(t,e){return t===e?"_index_":"_value_"}function av(t){if(t==="x"||t==="y"||t==="r")return t}function Bie(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function og(t,...e){if(av(t))return t;for(const n of e){const a=n.axis||Bie(n.position)||t.length>1&&av(t[0].toLowerCase());if(a)return a}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rv(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Fie(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(a=>a.xAxisID===t||a.yAxisID===t);if(n.length)return rv(t,"x",n[0])||rv(t,"y",n[0])}return{}}function Hie(t,e){const n=Nr[t.type]||{scales:{}},a=e.scales||{},r=sg(t.type,e),s=Object.create(null);return Object.keys(a).forEach(o=>{const l=a[o];if(!$e(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=og(o,l,Fie(o,t),bt.scales[l.type]),h=Die(c,r),u=n.scales||{};s[o]=gl(Object.create(null),[{axis:c},l,u[c],u[h]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||sg(l,e),u=(Nr[l]||{}).scales||{};Object.keys(u).forEach(d=>{const m=Pie(d,c),f=o[m+"AxisID"]||m;s[f]=s[f]||Object.create(null),gl(s[f],[{axis:m},a[f],u[d]])})}),Object.keys(s).forEach(o=>{const l=s[o];gl(l,[bt.scales[l.type],bt.scale])}),s}function OL(t){const e=t.options||(t.options={});e.plugins=De(e.plugins,{}),e.scales=Hie(t,e)}function ML(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qie(t){return t=t||{},t.data=ML(t.data),OL(t),t}const sv=new Map,RL=new Set;function Uc(t,e){let n=sv.get(t);return n||(n=e(),sv.set(t,n),RL.add(n)),n}const Bo=(t,e,n)=>{const a=Hl(e,n);a!==void 0&&t.add(a)};class $ie{constructor(e){this._config=qie(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ML(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OL(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Uc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Uc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Uc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,a=this.type;return Uc(`${a}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const a=this._scopeCache;let r=a.get(e);return(!r||n)&&(r=new Map,a.set(e,r)),r}getOptionScopes(e,n,a){const{options:r,type:s}=this,o=this._cachedScopes(e,a),l=o.get(n);if(l)return l;const c=new Set;n.forEach(u=>{e&&(c.add(e),u.forEach(d=>Bo(c,e,d))),u.forEach(d=>Bo(c,r,d)),u.forEach(d=>Bo(c,Nr[s]||{},d)),u.forEach(d=>Bo(c,bt,d)),u.forEach(d=>Bo(c,ag,d))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),RL.has(n)&&o.set(n,h),h}chartOptionScopes(){const{options:e,type:n}=this;return[e,Nr[n]||{},bt.datasets[n]||{},{type:n},bt,ag]}resolveNamedOptions(e,n,a,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=ov(this._resolverCache,e,r);let c=o;if(Wie(o,n)){s.$shared=!1,a=An(a)?a():a;const h=this.createResolver(e,a,l);c=Os(o,a,h)}for(const h of n)s[h]=c[h];return s}createResolver(e,n,a=[""],r){const{resolver:s}=ov(this._resolverCache,e,a);return $e(n)?Os(s,n,void 0,r):s}}function ov(t,e,n){let a=t.get(e);a||(a=new Map,t.set(e,a));const r=n.join();let s=a.get(r);return s||(s={resolver:uy(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},a.set(r,s)),s}const zie=t=>$e(t)&&Object.getOwnPropertyNames(t).some(e=>An(t[e]));function Wie(t,e){const{isScriptable:n,isIndexable:a}=bL(t);for(const r of e){const s=n(r),o=a(r),l=(o||s)&&t[r];if(s&&(An(l)||zie(l))||o&&gt(l))return!0}return!1}var Uie="4.5.1";const Vie=["top","bottom","left","right","chartArea"];function lv(t,e){return t==="top"||t==="bottom"||Vie.indexOf(t)===-1&&e==="x"}function cv(t,e){return function(n,a){return n[t]===a[t]?n[e]-a[e]:n[t]-a[t]}}function hv(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),rt(n&&n.onComplete,[t],e)}function Yie(t){const e=t.chart,n=e.options.animation;rt(n&&n.onProgress,[t],e)}function PL(t){return fy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const mh={},uv=t=>{const e=PL(t);return Object.values(mh).filter(n=>n.canvas===e).pop()};function Gie(t,e,n){const a=Object.keys(t);for(const r of a){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function Xie(t,e,n,a){return!n||t.type==="mouseout"?null:a?e:t}let br=class{static defaults=bt;static instances=mh;static overrides=Nr;static registry=Li;static version=Uie;static getChart=uv;static register(...e){Li.add(...e),dv()}static unregister(...e){Li.remove(...e),dv()}constructor(e,n){const a=this.config=new $ie(n),r=PL(e),s=uv(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||mie(r)),this.platform.updateConfig(a);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=Kee(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Iie,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gte(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],mh[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}na.listen(this,"complete",hv),na.listen(this,"progress",Yie),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:a,height:r,_aspectRatio:s}=this;return ut(e)?n&&s?s:r?a/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Li}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():D2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return M2(this.canvas,this.ctx),this}stop(){return na.stop(this),this}resize(e,n){na.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const a=this.options,r=this.canvas,s=a.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),l=a.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,D2(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),rt(a.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};it(n,(a,r)=>{a.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,a=this.scales,r=Object.keys(a).reduce((o,l)=>(o[l]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const l=n[o],c=og(o,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),it(s,o=>{const l=o.options,c=l.id,h=og(c,l),u=De(l.type,o.dtype);(l.position===void 0||lv(l.position,h)!==lv(o.dposition))&&(l.position=o.dposition),r[c]=!0;let d=null;if(c in a&&a[c].type===u)d=a[c];else{const m=Li.getScale(u);d=new m({id:c,type:u,ctx:this.ctx,chart:this}),a[d.id]=d}d.init(l,e)}),it(r,(o,l)=>{o||delete a[l]}),it(a,o=>{Kn.configure(this,o,o.options),Kn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,a=e.length;if(e.sort((r,s)=>r.index-s.index),a>n){for(let r=n;r<a;++r)this._destroyDatasetMeta(r);e.splice(n,a-n)}this._sortedMetasets=e.slice(0).sort(cv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((a,r)=>{n.filter(s=>s===a._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let a,r;for(this._removeUnreferencedMetasets(),a=0,r=n.length;a<r;a++){const s=n[a];let o=this.getDatasetMeta(a);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(a),o=this.getDatasetMeta(a)),o.type=l,o.indexAxis=s.indexAxis||sg(l,this.options),o.order=s.order||0,o.index=a,o.label=""+s.label,o.visible=this.isDatasetVisible(a),o.controller)o.controller.updateIndex(a),o.controller.linkScales();else{const c=Li.getController(l),{datasetElementType:h,dataElementType:u}=bt.datasets[l];Object.assign(c,{dataElementType:Li.getElement(u),datasetElementType:h&&Li.getElement(h)}),o.controller=new c(this,a),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){it(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const a=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,u=this.data.datasets.length;h<u;h++){const{controller:d}=this.getDatasetMeta(h),m=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(m),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=a.layout.autoPadding?o:0,this._updateLayout(o),r||it(s,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(cv("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){it(this.scales,e=>{Kn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),a=new Set(e.events);(!k2(n,a)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:a,start:r,count:s}of n){const o=a==="_removeElements"?-s:s;Gie(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,a=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=a(0);for(let s=1;s<n;s++)if(!k2(r,a(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Kn.update(this,this.width,this.height,e);const n=this.chartArea,a=n.width<=0||n.height<=0;this._layers=[],it(this.boxes,r=>{a&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,a=this.data.datasets.length;n<a;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,a=this.data.datasets.length;n<a;++n)this._updateDataset(n,An(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const a=this.getDatasetMeta(e),r={meta:a,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(a.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(na.has(this)?this.attached&&!na.running(this)&&na.start(this):(this.draw(),hv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:a,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,a=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&a.push(o)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,a={meta:e,index:e.index,cancelable:!0},r=jne(this,e);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(r&&ld(n,r),e.controller.draw(),r&&cd(n),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return ql(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,a,r){const s=Vne.modes[n];return typeof s=="function"?s(this,e,a,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],a=this._metasets;let r=a.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},a.push(r)),r}getContext(){return this.$context||(this.$context=Hr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const a=this.getDatasetMeta(e);return typeof a.hidden=="boolean"?!a.hidden:!n.hidden}setDatasetVisibility(e,n){const a=this.getDatasetMeta(e);a.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,a){const r=a?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);zn(n)?(s.data[n].hidden=!a,this.update()):(this.setDatasetVisibility(e,a),o.update(s,{visible:a}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),na.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),M2(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete mh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,a=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};it(this.options.events,s=>a(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,a=(c,h)=>{n.addEventListener(this,c,h),e[c]=h},r=(c,h)=>{e[c]&&(n.removeEventListener(this,c,h),delete e[c])},s=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),a("resize",s),a("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),a("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){it(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},it(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,a){const r=a?"set":"remove";let s,o,l,c;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],a=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!au(a,n)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,n))}notifyPlugins(e,n,a){return this._plugins.notify(this,e,n,a)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,a){const r=this.options.hover,s=(c,h)=>c.filter(u=>!h.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),l=a?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,n){const a={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",a,r)===!1)return;const s=this._handleEvent(e,n,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,r),(s||a.changed)&&this.render(),this}_handleEvent(e,n,a){const{_active:r=[],options:s}=this,o=n,l=this._getActiveElements(e,r,a,o),c=ate(e),h=Xie(e,this._lastEvent,a,c);a&&(this._lastEvent=null,rt(s.onHover,[e,l,this],this),c&&rt(s.onClick,[e,l,this],this));const u=!au(l,r);return(u||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=h,u}_getActiveElements(e,n,a,r){if(e.type==="mouseout")return[];if(!a)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}};function dv(){return it(br.instances,t=>t._plugins.invalidate())}function DL(t,e,n=e){t.lineCap=De(n.borderCapStyle,e.borderCapStyle),t.setLineDash(De(n.borderDash,e.borderDash)),t.lineDashOffset=De(n.borderDashOffset,e.borderDashOffset),t.lineJoin=De(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=De(n.borderWidth,e.borderWidth),t.strokeStyle=De(n.borderColor,e.borderColor)}function Jie(t,e,n){t.lineTo(n.x,n.y)}function Qie(t){return t.stepped?Nte:t.tension||t.cubicInterpolationMode==="monotone"?Ite:Jie}function BL(t,e,n={}){const a=t.length,{start:r=0,end:s=a-1}=n,{start:o,end:l}=e,c=Math.max(r,o),h=Math.min(s,l),u=r<o&&s<o||r>l&&s>l;return{count:a,start:c,loop:e.loop,ilen:h<c&&!u?a+h-c:h-c}}function Kie(t,e,n,a){const{points:r,options:s}=e,{count:o,start:l,loop:c,ilen:h}=BL(r,n,a),u=Qie(s);let{move:d=!0,reverse:m}=a||{},f,p,g;for(f=0;f<=h;++f)p=r[(l+(m?h-f:f))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,g,p,m,s.stepped),g=p);return c&&(p=r[(l+(m?h:0))%o],u(t,g,p,m,s.stepped)),!!c}function Zie(t,e,n,a){const r=e.points,{count:s,start:o,ilen:l}=BL(r,n,a),{move:c=!0,reverse:h}=a||{};let u=0,d=0,m,f,p,g,x,b;const w=E=>(o+(h?l-E:E))%s,k=()=>{g!==x&&(t.lineTo(u,x),t.lineTo(u,g),t.lineTo(u,b))};for(c&&(f=r[w(0)],t.moveTo(f.x,f.y)),m=0;m<=l;++m){if(f=r[w(m)],f.skip)continue;const E=f.x,v=f.y,S=E|0;S===p?(v<g?g=v:v>x&&(x=v),u=(d*u+E)/++d):(k(),t.lineTo(E,v),p=S,d=0,g=x=v),b=v}k()}function lg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Zie:Kie}function eae(t){return t.stepped?hne:t.tension||t.cubicInterpolationMode==="monotone"?une:sr}function tae(t,e,n,a){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,a)&&r.closePath()),DL(t,e.options),t.stroke(r)}function nae(t,e,n,a){const{segments:r,options:s}=e,o=lg(e);for(const l of r)DL(t,s,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+a-1})&&t.closePath(),t.stroke()}const iae=typeof Path2D=="function";function aae(t,e,n,a){iae&&!e.options.segment?tae(t,e,n,a):nae(t,e,n,a)}class rae extends On{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){const r=a.spanGaps?this._loop:this._fullLoop;nne(this._points,a,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bne(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,a=e.length;return a&&n[e[a-1].end]}interpolate(e,n){const a=this.options,r=e[n],s=this.points,o=gne(this,{property:n,start:r,end:r});if(!o.length)return;const l=[],c=eae(a);let h,u;for(h=0,u=o.length;h<u;++h){const{start:d,end:m}=o[h],f=s[d],p=s[m];if(f===p){l.push(f);continue}const g=Math.abs((r-f[n])/(p[n]-f[n])),x=c(f,p,g,a.stepped);x[n]=e[n],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,n,a){return lg(this)(e,this,n,a)}path(e,n,a){const r=this.segments,s=lg(this);let o=this._loop;n=n||0,a=a||this.points.length-n;for(const l of r)o&=s(e,this,l,{start:n,end:n+a-1});return!!o}draw(e,n,a,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),aae(e,this,a,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function mv(t,e,n,a){const r=t.options,{[n]:s}=t.getProps([n],a);return Math.abs(e-s)<r.radius+r.hitRadius}class sae extends On{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,a){const r=this.options,{x:s,y:o}=this.getProps(["x","y"],a);return Math.pow(e-s,2)+Math.pow(n-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return mv(this,e,"x",n)}inYRange(e,n){return mv(this,e,"y",n)}getCenterPoint(e){const{x:n,y:a}=this.getProps(["x","y"],e);return{x:n,y:a}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const a=n&&e.borderWidth||0;return(n+a)*2}draw(e,n){const a=this.options;this.skip||a.radius<.1||!ql(this,n,this.size(a)/2)||(e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.fillStyle=a.backgroundColor,rg(e,a,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const fv=(t,e)=>{let{boxHeight:n=e,boxWidth:a=e}=t;return t.usePointStyle&&(n=Math.min(n,e),a=t.pointStyleWidth||Math.min(a,e)),{boxWidth:a,boxHeight:n,itemHeight:Math.max(e,n)}},oae=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pv extends On{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,a){this.maxWidth=e,this.maxHeight=n,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=rt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(a=>e.filter(a,this.chart.data))),e.sort&&(n=n.sort((a,r)=>e.sort(a,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const a=e.labels,r=It(a.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=fv(a,s);let h,u;n.font=r.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(o,s,l,c)+10):(u=this.maxHeight,h=this._fitCols(o,r,l,c)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,a,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],u=r+l;let d=e;s.textAlign="left",s.textBaseline="middle";let m=-1,f=-u;return this.legendItems.forEach((p,g)=>{const x=a+n/2+s.measureText(p.text).width;(g===0||h[h.length-1]+x+2*l>o)&&(d+=u,h[h.length-(g>0?0:1)]=0,f+=u,m++),c[g]={left:0,top:f,row:m,width:x,height:r},h[h.length-1]+=x+l}),d}_fitCols(e,n,a,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],u=o-e;let d=l,m=0,f=0,p=0,g=0;return this.legendItems.forEach((x,b)=>{const{itemWidth:w,itemHeight:k}=lae(a,n,s,x,r);b>0&&f+k+2*l>u&&(d+=m+l,h.push({width:m,height:f}),p+=m+l,g++,m=f=0),c[b]={left:p,top:f,col:g,width:w,height:k},m=Math.max(m,w),f+=k+l}),d+=m,h.push({width:m,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:a,labels:{padding:r},rtl:s}}=this,o=cs(s,this.left,this.width);if(this.isHorizontal()){let l=0,c=Qt(a,this.left+r,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,c=Qt(a,this.left+r,this.right-this.lineWidths[l])),h.top+=this.top+e+r,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+r}else{let l=0,c=Qt(a,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,c=Qt(a,this.top+e+r,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ld(e,this),this._draw(),cd(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:a,ctx:r}=this,{align:s,labels:o}=e,l=bt.color,c=cs(e.rtl,this.left,this.width),h=It(o.font),{padding:u}=o,d=h.size,m=d/2;let f;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:p,boxHeight:g,itemHeight:x}=fv(o,d),b=function(S,L,O){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();const P=De(O.lineWidth,1);if(r.fillStyle=De(O.fillStyle,l),r.lineCap=De(O.lineCap,"butt"),r.lineDashOffset=De(O.lineDashOffset,0),r.lineJoin=De(O.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=De(O.strokeStyle,l),r.setLineDash(De(O.lineDash,[])),o.usePointStyle){const j={radius:g*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:P},A=c.xPlus(S,p/2),q=L+m;xL(r,j,A,q,o.pointStyleWidth&&p)}else{const j=L+Math.max((d-g)/2,0),A=c.leftForLtr(S,p),q=ls(O.borderRadius);r.beginPath(),Object.values(q).some(M=>M!==0)?cu(r,{x:A,y:j,w:p,h:g,radius:q}):r.rect(A,j,p,g),r.fill(),P!==0&&r.stroke()}r.restore()},w=function(S,L,O){$l(r,O.text,S,L+x/2,h,{strikethrough:O.hidden,textAlign:c.textAlign(O.textAlign)})},k=this.isHorizontal(),E=this._computeTitleHeight();k?f={x:Qt(s,this.left+u,this.right-a[0]),y:this.top+u+E,line:0}:f={x:this.left+u,y:Qt(s,this.top+E+u,this.bottom-n[0].height),line:0},TL(this.ctx,e.textDirection);const v=x+u;this.legendItems.forEach((S,L)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;const O=r.measureText(S.text).width,P=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),j=p+m+O;let A=f.x,q=f.y;c.setWidth(this.width),k?L>0&&A+j+u>this.right&&(q=f.y+=v,f.line++,A=f.x=Qt(s,this.left+u,this.right-a[f.line])):L>0&&q+v>this.bottom&&(A=f.x=A+n[f.line].width+u,f.line++,q=f.y=Qt(s,this.top+E+u,this.bottom-n[f.line].height));const M=c.x(A);if(b(M,q,S),A=xte(P,A+p+m,k?A+j:this.right,e.rtl),w(c.x(A),q,S),k)f.x+=j+u;else if(typeof S.text!="string"){const C=h.lineHeight;f.y+=FL(S,C)+u}else f.y+=v}),kL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,a=It(n.font),r=an(n.padding);if(!n.display)return;const s=cs(e.rtl,this.left,this.width),o=this.ctx,l=n.position,c=a.size/2,h=r.top+c;let u,d=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+h,d=Qt(e.align,d,this.right-m);else{const p=this.columnSizes.reduce((g,x)=>Math.max(g,x.height),0);u=h+Qt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=Qt(l,d,d+m);o.textAlign=s.textAlign(ly(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=a.string,$l(o,n.text,f,u,a)}_computeTitleHeight(){const e=this.options.title,n=It(e.font),a=an(e.padding);return e.display?n.lineHeight+a.height:0}_getLegendItemAt(e,n){let a,r,s;if(Ko(e,this.left,this.right)&&Ko(n,this.top,this.bottom)){for(s=this.legendHitBoxes,a=0;a<s.length;++a)if(r=s[a],Ko(e,r.left,r.left+r.width)&&Ko(n,r.top,r.top+r.height))return this.legendItems[a]}return null}handleEvent(e){const n=this.options;if(!uae(e.type,n))return;const a=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=oae(r,a);r&&!s&&rt(n.onLeave,[e,r,this],this),this._hoveredItem=a,a&&!s&&rt(n.onHover,[e,a,this],this)}else a&&rt(n.onClick,[e,a,this],this)}}function lae(t,e,n,a,r){const s=cae(a,t,e,n),o=hae(r,a,e.lineHeight);return{itemWidth:s,itemHeight:o}}function cae(t,e,n,a){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+a.measureText(r).width}function hae(t,e,n){let a=t;return typeof e.text!="string"&&(a=FL(e,n)),a}function FL(t,e){const n=t.text?t.text.length:0;return e*n}function uae(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var dae={id:"legend",_element:pv,start(t,e,n){const a=t.legend=new pv({ctx:t.ctx,options:n,chart:t});Kn.configure(t,a,n),Kn.addBox(t,a)},stop(t){Kn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const a=t.legend;Kn.configure(t,a,n),a.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const a=e.datasetIndex,r=n.chart;r.isDatasetVisible(a)?(r.hide(a),e.hidden=!0):(r.show(a),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:a,textAlign:r,color:s,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(n?0:void 0),u=an(h.borderWidth);return{text:e[c.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:h.borderColor,pointStyle:a||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class HL extends On{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const a=this.options;if(this.left=0,this.top=0,!a.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=gt(a.text)?a.text.length:1;this._padding=an(a.padding);const s=r*It(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:a,bottom:r,right:s,options:o}=this,l=o.align;let c=0,h,u,d;return this.isHorizontal()?(u=Qt(l,a,s),d=n+e,h=s-a):(o.position==="left"?(u=a+e,d=Qt(l,r,n),c=Qe*-.5):(u=s-e,d=Qt(l,n,r),c=Qe*.5),h=r-n),{titleX:u,titleY:d,maxWidth:h,rotation:c}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const a=It(n.font),s=a.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(s);$l(e,n.text,0,0,a,{color:n.color,maxWidth:c,rotation:h,textAlign:ly(n.align),textBaseline:"middle",translation:[o,l]})}}function mae(t,e){const n=new HL({ctx:t.ctx,options:e,chart:t});Kn.configure(t,n,e),Kn.addBox(t,n),t.titleBlock=n}var fae={id:"title",_element:HL,start(t,e,n){mae(t,n)},stop(t){const e=t.titleBlock;Kn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const a=t.titleBlock;Kn.configure(t,a,n),a.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const el={average(t){if(!t.length)return!1;let e,n,a=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();a.add(c.x),r+=c.y,++s}}return s===0||a.size===0?!1:{x:[...a].reduce((l,c)=>l+c)/a.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,a=e.y,r=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=t.length;s<o;++s){const c=t[s].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),u=Ls(e,h);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,a=c.y}return{x:n,y:a}}};function Ni(t,e){return e&&(gt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ia(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function pae(t,e){const{element:n,datasetIndex:a,index:r}=e,s=t.getDatasetMeta(a).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[a].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:a,element:n}}function gv(t,e){const n=t.chart.ctx,{body:a,footer:r,title:s}=t,{boxWidth:o,boxHeight:l}=e,c=It(e.bodyFont),h=It(e.titleFont),u=It(e.footerFont),d=s.length,m=r.length,f=a.length,p=an(e.padding);let g=p.height,x=0,b=a.reduce((E,v)=>E+v.before.length+v.lines.length+v.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const E=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;g+=f*E+(b-f)*c.lineHeight+(b-1)*e.bodySpacing}m&&(g+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let w=0;const k=function(E){x=Math.max(x,n.measureText(E).width+w)};return n.save(),n.font=h.string,it(t.title,k),n.font=c.string,it(t.beforeBody.concat(t.afterBody),k),w=e.displayColors?o+2+e.boxPadding:0,it(a,E=>{it(E.before,k),it(E.lines,k),it(E.after,k)}),w=0,n.font=u.string,it(t.footer,k),n.restore(),x+=p.width,{width:x,height:g}}function gae(t,e){const{y:n,height:a}=e;return n<a/2?"top":n>t.height-a/2?"bottom":"center"}function xae(t,e,n,a){const{x:r,width:s}=a,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function yae(t,e,n,a){const{x:r,width:s}=n,{width:o,chartArea:{left:l,right:c}}=t;let h="center";return a==="center"?h=r<=(l+c)/2?"left":"right":r<=s/2?h="left":r>=o-s/2&&(h="right"),xae(h,t,e,n)&&(h="center"),h}function xv(t,e,n){const a=n.yAlign||e.yAlign||gae(t,n);return{xAlign:n.xAlign||e.xAlign||yae(t,e,n,a),yAlign:a}}function bae(t,e){let{x:n,width:a}=t;return e==="right"?n-=a:e==="center"&&(n-=a/2),n}function wae(t,e,n){let{y:a,height:r}=t;return e==="top"?a+=n:e==="bottom"?a-=r+n:a-=r/2,a}function yv(t,e,n,a){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:l,yAlign:c}=n,h=r+s,{topLeft:u,topRight:d,bottomLeft:m,bottomRight:f}=ls(o);let p=bae(e,l);const g=wae(e,c,h);return c==="center"?l==="left"?p+=h:l==="right"&&(p-=h):l==="left"?p-=Math.max(u,m)+r:l==="right"&&(p+=Math.max(d,f)+r),{x:Qn(p,0,a.width-e.width),y:Qn(g,0,a.height-e.height)}}function Vc(t,e,n){const a=an(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-a.right:t.x+a.left}function bv(t){return Ni([],ia(t))}function _ae(t,e,n){return Hr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function wv(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const qL={beforeTitle:Ki,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,a=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(a>0&&e.dataIndex<a)return n[e.dataIndex]}return""},afterTitle:Ki,beforeBody:Ki,beforeLabel:Ki,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ut(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ki,afterBody:Ki,beforeFooter:Ki,footer:Ki,afterFooter:Ki};function jn(t,e,n,a){const r=t[e].call(n,a);return typeof r>"u"?qL[e].call(n,a):r}class _v extends On{static positioners=el;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,a=this.options.setContext(this.getContext()),r=a.enabled&&n.options.animation&&a.animations,s=new gy(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_ae(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:a}=n,r=jn(a,"beforeTitle",this,e),s=jn(a,"title",this,e),o=jn(a,"afterTitle",this,e);let l=[];return l=Ni(l,ia(r)),l=Ni(l,ia(s)),l=Ni(l,ia(o)),l}getBeforeBody(e,n){return bv(jn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:a}=n,r=[];return it(e,s=>{const o={before:[],lines:[],after:[]},l=wv(a,s);Ni(o.before,ia(jn(l,"beforeLabel",this,s))),Ni(o.lines,jn(l,"label",this,s)),Ni(o.after,ia(jn(l,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return bv(jn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:a}=n,r=jn(a,"beforeFooter",this,e),s=jn(a,"footer",this,e),o=jn(a,"afterFooter",this,e);let l=[];return l=Ni(l,ia(r)),l=Ni(l,ia(s)),l=Ni(l,ia(o)),l}_createItems(e){const n=this._active,a=this.chart.data,r=[],s=[],o=[];let l=[],c,h;for(c=0,h=n.length;c<h;++c)l.push(pae(this.chart,n[c]));return e.filter&&(l=l.filter((u,d,m)=>e.filter(u,d,m,a))),e.itemSort&&(l=l.sort((u,d)=>e.itemSort(u,d,a))),it(l,u=>{const d=wv(e.callbacks,u);r.push(jn(d,"labelColor",this,u)),s.push(jn(d,"labelPointStyle",this,u)),o.push(jn(d,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const a=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const l=el[a.position].call(this,r,this._eventPosition);o=this._createItems(a),this.title=this.getTitle(o,a),this.beforeBody=this.getBeforeBody(o,a),this.body=this.getBody(o,a),this.afterBody=this.getAfterBody(o,a),this.footer=this.getFooter(o,a);const c=this._size=gv(this,a),h=Object.assign({},l,c),u=xv(this.chart,a,h),d=yv(a,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,a,r){const s=this.getCaretPosition(e,a,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,a){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:l}=a,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:d}=ls(l),{x:m,y:f}=e,{width:p,height:g}=n;let x,b,w,k,E,v;return s==="center"?(E=f+g/2,r==="left"?(x=m,b=x-o,k=E+o,v=E-o):(x=m+p,b=x+o,k=E-o,v=E+o),w=x):(r==="left"?b=m+Math.max(c,u)+o:r==="right"?b=m+p-Math.max(h,d)-o:b=this.caretX,s==="top"?(k=f,E=k-o,x=b-o,w=b+o):(k=f+g,E=k+o,x=b+o,w=b-o),v=k),{x1:x,x2:b,x3:w,y1:k,y2:E,y3:v}}drawTitle(e,n,a){const r=this.title,s=r.length;let o,l,c;if(s){const h=cs(a.rtl,this.x,this.width);for(e.x=Vc(this,a.titleAlign,a),n.textAlign=h.textAlign(a.titleAlign),n.textBaseline="middle",o=It(a.titleFont),l=a.titleSpacing,n.fillStyle=a.titleColor,n.font=o.string,c=0;c<s;++c)n.fillText(r[c],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===s&&(e.y+=a.titleMarginBottom-l)}}_drawColorBox(e,n,a,r,s){const o=this.labelColors[a],l=this.labelPointStyles[a],{boxHeight:c,boxWidth:h}=s,u=It(s.bodyFont),d=Vc(this,"left",s),m=r.x(d),f=c<u.lineHeight?(u.lineHeight-c)/2:0,p=n.y+f;if(s.usePointStyle){const g={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=r.leftForLtr(m,h)+h/2,b=p+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,rg(e,g,x,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,rg(e,g,x,b)}else{e.lineWidth=$e(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const g=r.leftForLtr(m,h),x=r.leftForLtr(r.xPlus(m,1),h-2),b=ls(o.borderRadius);Object.values(b).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,cu(e,{x:g,y:p,w:h,h:c,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),cu(e,{x,y:p+1,w:h-2,h:c-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(g,p,h,c),e.strokeRect(g,p,h,c),e.fillStyle=o.backgroundColor,e.fillRect(x,p+1,h-2,c-2))}e.fillStyle=this.labelTextColors[a]}drawBody(e,n,a){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=a,d=It(a.bodyFont);let m=d.lineHeight,f=0;const p=cs(a.rtl,this.x,this.width),g=function(O){n.fillText(O,p.x(e.x+f),e.y+m/2),e.y+=m+s},x=p.textAlign(o);let b,w,k,E,v,S,L;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Vc(this,x,a),n.fillStyle=a.bodyColor,it(this.beforeBody,g),f=l&&x!=="right"?o==="center"?h/2+u:h+2+u:0,E=0,S=r.length;E<S;++E){for(b=r[E],w=this.labelTextColors[E],n.fillStyle=w,it(b.before,g),k=b.lines,l&&k.length&&(this._drawColorBox(n,e,E,p,a),m=Math.max(d.lineHeight,c)),v=0,L=k.length;v<L;++v)g(k[v]),m=d.lineHeight;it(b.after,g)}f=0,m=d.lineHeight,it(this.afterBody,g),e.y-=s}drawFooter(e,n,a){const r=this.footer,s=r.length;let o,l;if(s){const c=cs(a.rtl,this.x,this.width);for(e.x=Vc(this,a.footerAlign,a),e.y+=a.footerMarginTop,n.textAlign=c.textAlign(a.footerAlign),n.textBaseline="middle",o=It(a.footerFont),n.fillStyle=a.footerColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a.footerSpacing}}drawBackground(e,n,a,r){const{xAlign:s,yAlign:o}=this,{x:l,y:c}=e,{width:h,height:u}=a,{topLeft:d,topRight:m,bottomLeft:f,bottomRight:p}=ls(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+d,c),o==="top"&&this.drawCaret(e,n,a,r),n.lineTo(l+h-m,c),n.quadraticCurveTo(l+h,c,l+h,c+m),o==="center"&&s==="right"&&this.drawCaret(e,n,a,r),n.lineTo(l+h,c+u-p),n.quadraticCurveTo(l+h,c+u,l+h-p,c+u),o==="bottom"&&this.drawCaret(e,n,a,r),n.lineTo(l+f,c+u),n.quadraticCurveTo(l,c+u,l,c+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,a,r),n.lineTo(l,c+d),n.quadraticCurveTo(l,c,l+d,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,a=this.$animations,r=a&&a.x,s=a&&a.y;if(r||s){const o=el[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=gv(this,e),c=Object.assign({},o,this._size),h=xv(n,e,c),u=yv(e,c,h,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const o=an(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=a,this.drawBackground(s,e,r,n),TL(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),kL(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const a=this._active,r=e.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),s=!au(a,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,a=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,a),l=this._positionChanged(o,e),c=n||!au(o,s)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,a,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,a);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:a,caretY:r,options:s}=this,o=el[s.position].call(this,e,n);return o!==!1&&(a!==o.x||r!==o.y)}}var vae={id:"tooltip",_element:_v,positioners:el,afterInit(t,e,n){n&&(t.tooltip=new _v({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const jae=(t,e,n,a)=>(typeof e=="string"?(n=t.push(e)-1,a.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Tae(t,e,n,a){const r=t.indexOf(e);if(r===-1)return jae(t,e,n,a);const s=t.lastIndexOf(e);return r!==s?n:r}const kae=(t,e)=>t===null?null:Qn(Math.round(t),0,e);function vv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Eae extends Qs{static id="category";static defaults={ticks:{callback:vv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const a=this.getLabels();for(const{index:r,label:s}of n)a[r]===s&&a.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ut(e))return null;const a=this.getLabels();return n=isFinite(n)&&a[n]===e?n:Tae(a,e,De(n,e),this._addedLabels),kae(n,a.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:a,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(a=0),n||(r=this.getLabels().length-1)),this.min=a,this.max=r}buildTicks(){const e=this.min,n=this.max,a=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return vv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Sae(t,e){const n=[],{bounds:r,step:s,min:o,max:l,precision:c,count:h,maxTicks:u,maxDigits:d,includeBounds:m}=t,f=s||1,p=u-1,{min:g,max:x}=e,b=!ut(o),w=!ut(l),k=!ut(h),E=(x-g)/(d+1);let v=E2((x-g)/p/f)*f,S,L,O,P;if(v<1e-14&&!b&&!w)return[{value:g},{value:x}];P=Math.ceil(x/v)-Math.floor(g/v),P>p&&(v=E2(P*v/p/f)*f),ut(c)||(S=Math.pow(10,c),v=Math.ceil(v*S)/S),r==="ticks"?(L=Math.floor(g/v)*v,O=Math.ceil(x/v)*v):(L=g,O=x),b&&w&&s&&lte((l-o)/s,v/1e3)?(P=Math.round(Math.min((l-o)/v,u)),v=(l-o)/P,L=o,O=l):k?(L=b?o:L,O=w?l:O,P=h-1,v=(O-L)/P):(P=(O-L)/v,xl(P,Math.round(P),v/1e3)?P=Math.round(P):P=Math.ceil(P));const j=Math.max(S2(v),S2(L));S=Math.pow(10,ut(c)?j:c),L=Math.round(L*S)/S,O=Math.round(O*S)/S;let A=0;for(b&&(m&&L!==o?(n.push({value:o}),L<o&&A++,xl(Math.round((L+A*v)*S)/S,o,jv(o,E,t))&&A++):L<o&&A++);A<P;++A){const q=Math.round((L+A*v)*S)/S;if(w&&q>l)break;n.push({value:q})}return w&&m&&O!==l?n.length&&xl(n[n.length-1].value,l,jv(l,E,t))?n[n.length-1].value=l:n.push({value:l}):(!w||O===l)&&n.push({value:O}),n}function jv(t,e,{horizontal:n,minRotation:a}){const r=Pt(a),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Cae extends Qs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ut(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:a}=this.getUserBounds();let{min:r,max:s}=this;const o=c=>r=n?r:c,l=c=>s=a?s:c;if(e){const c=Is(r),h=Is(s);c<0&&h<0?l(0):c>0&&h>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);l(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:a}=e,r;return a?(r=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let a=this.getTickLimit();a=Math.max(2,a);const r={maxTicks:a,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Sae(r,s);return e.bounds==="ticks"&&cte(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,a=this.max;if(super.configure(),this.options.offset&&e.length){const r=(a-n)/Math.max(e.length-1,1)/2;n-=r,a+=r}this._startValue=n,this._endValue=a,this._valueRange=a-n}getLabelForValue(e){return hy(e,this.chart.options.locale,this.options.ticks.format)}}class Aae extends Cae{static id="linear";static defaults={ticks:{callback:gL.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Nn(e)?e:0,this.max=Nn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,a=Pt(this.options.ticks.minRotation),r=(e?Math.sin(a):Math.cos(a))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const dd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Sn=Object.keys(dd);function Tv(t,e){return t-e}function kv(t,e){if(ut(e))return null;const n=t._adapter,{parser:a,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof a=="function"&&(o=a(o)),Nn(o)||(o=typeof a=="string"?n.parse(o,a):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Ar(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Ev(t,e,n,a){const r=Sn.length;for(let s=Sn.indexOf(t);s<r-1;++s){const o=dd[Sn[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=a)return Sn[s]}return Sn[r-1]}function Nae(t,e,n,a,r){for(let s=Sn.length-1;s>=Sn.indexOf(n);s--){const o=Sn[s];if(dd[o].common&&t._adapter.diff(r,a,o)>=e-1)return o}return Sn[n?Sn.indexOf(n):0]}function Iae(t){for(let e=Sn.indexOf(t)+1,n=Sn.length;e<n;++e)if(dd[Sn[e]].common)return Sn[e]}function Sv(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:a,hi:r}=oy(n,e),s=n[a]>=e?n[a]:n[r];t[s]=!0}}function Lae(t,e,n,a){const r=t._adapter,s=+r.startOf(e[0].value,a),o=e[e.length-1].value;let l,c;for(l=s;l<=o;l=+r.add(l,1,a))c=n[l],c>=0&&(e[c].major=!0);return e}function Cv(t,e,n){const a=[],r={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],r[l]=o,a.push({value:l,major:!1});return s===0||!n?a:Lae(t,a,r,n)}class Av extends Qs{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const a=e.time||(e.time={}),r=this._adapter=new qne._date(e.adapters.date);r.init(n),gl(a.displayFormats,r.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:kv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,a=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Nn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),a),s=Nn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),a)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],a=e[e.length-1]),{min:n,max:a}}buildTicks(){const e=this.options,n=e.time,a=e.ticks,r=a.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,l=mte(r,s,o);return this._unit=n.unit||(a.autoSkip?Ev(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Nae(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:Iae(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Cv(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,a=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?a=s:a=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Qn(n,0,o),a=Qn(a,0,o),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,n=this.min,a=this.max,r=this.options,s=r.time,o=s.unit||Ev(s.minUnit,n,a,this._getLabelCapacity(n)),l=De(r.ticks.stepSize,1),c=o==="week"?s.isoWeekday:!1,h=Ar(c)||c===!0,u={};let d=n,m,f;if(h&&(d=+e.startOf(d,"isoWeek",c)),d=+e.startOf(d,h?"day":o),e.diff(a,n,o)>1e5*l)throw new Error(n+" and "+a+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(m=d,f=0;m<a;m=+e.add(m,l,o),f++)Sv(u,m,p);return(m===a||r.bounds==="ticks"||f===1)&&Sv(u,m,p),Object.keys(u).sort(Tv).map(g=>+g)}getLabelForValue(e){const n=this._adapter,a=this.options.time;return a.tooltipFormat?n.format(e,a.tooltipFormat):n.format(e,a.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,a,r){const s=this.options,o=s.ticks.callback;if(o)return rt(o,[e,n,a],this);const l=s.time.displayFormats,c=this._unit,h=this._majorUnit,u=c&&l[c],d=h&&l[h],m=a[n],f=h&&d&&m&&m.major;return this._adapter.format(e,r||(f?d:u))}generateTickLabels(e){let n,a,r;for(n=0,a=e.length;n<a;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,a=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+a)*n.factor)}getValueForPixel(e){const n=this._offsets,a=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+a*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,a=this.ctx.measureText(e).width,r=Pt(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:a*s+l*o,h:a*o+l*s}}_getLabelCapacity(e){const n=this.options.time,a=n.displayFormats,r=a[n.unit]||a.millisecond,s=this._tickFormatFunction(e,0,Cv(this,[e],this._majorUnit),r),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,a;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,a=r.length;n<a;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,a;if(e.length)return e;const r=this.getLabels();for(n=0,a=r.length;n<a;++n)e.push(kv(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pte(e.sort(Tv))}}function Yc(t,e,n){let a=0,r=t.length-1,s,o,l,c;n?(e>=t[a].pos&&e<=t[r].pos&&({lo:a,hi:r}=fr(t,"pos",e)),{pos:s,time:l}=t[a],{pos:o,time:c}=t[r]):(e>=t[a].time&&e<=t[r].time&&({lo:a,hi:r}=fr(t,"time",e)),{time:s,pos:l}=t[a],{time:o,pos:c}=t[r]);const h=o-s;return h?l+(c-l)*(e-s)/h:l}class che extends Av{static id="timeseries";static defaults=Av.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Yc(n,this.min),this._tableRange=Yc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:a}=this,r=[],s=[];let o,l,c,h,u;for(o=0,l=e.length;o<l;++o)h=e[o],h>=n&&h<=a&&r.push(h);if(r.length<2)return[{time:n,pos:0},{time:a,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],h=r[o],Math.round((u+c)/2)!==h&&s.push({time:h,pos:o/(l-1)});return s}_generate(){const e=this.min,n=this.max;let a=super.getDataTimestamps();return(!a.includes(e)||!a.length)&&a.splice(0,0,e),(!a.includes(n)||a.length===1)&&a.push(n),a.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),a=this.getLabelTimestamps();return n.length&&a.length?e=this.normalize(n.concat(a)):e=n.length?n:a,e=this._cache.all=e,e}getDecimalForValue(e){return(Yc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,a=this.getDecimalForPixel(e)/n.factor-n.end;return Yc(this._table,a*this._tableRange+this._minPos,!0)}}const $L="label";function Nv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Oae(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function zL(t,e){t.labels=e}function WL(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$L;const a=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||a.includes(s)?{...r}:(a.push(s),Object.assign(s,r),s)})}function Mae(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$L;const n={labels:[],datasets:[]};return zL(n,t.labels),WL(n,t.datasets,e),n}function Rae(t,e){const{height:n=150,width:a=300,redraw:r=!1,datasetIdKey:s,type:o,data:l,options:c,plugins:h=[],fallbackContent:u,updateMode:d,...m}=t,f=pe.useRef(null),p=pe.useRef(null),g=()=>{f.current&&(p.current=new br(f.current,{type:o,data:Mae(l,s),options:c&&{...c},plugins:h}),Nv(e,p.current))},x=()=>{Nv(e,null),p.current&&(p.current.destroy(),p.current=null)};return pe.useEffect(()=>{!r&&p.current&&c&&Oae(p.current,c)},[r,c]),pe.useEffect(()=>{!r&&p.current&&zL(p.current.config.data,l.labels)},[r,l.labels]),pe.useEffect(()=>{!r&&p.current&&l.datasets&&WL(p.current.config.data,l.datasets,s)},[r,l.datasets]),pe.useEffect(()=>{p.current&&(r?(x(),setTimeout(g)):p.current.update(d))},[r,c,l.labels,l.datasets,d]),pe.useEffect(()=>{p.current&&(x(),setTimeout(g))},[o]),pe.useEffect(()=>(g(),()=>x()),[]),Hn.createElement("canvas",{ref:f,role:"img",height:n,width:a,...m},u)}const Pae=pe.forwardRef(Rae);function Dae(t,e){return br.register(e),pe.forwardRef((n,a)=>Hn.createElement(Pae,{...n,ref:a,type:t}))}const UL=Dae("line",Hne);/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Iv={modes:{point(t,e){return fh(t,e,{intersect:!0})},nearest(t,e,n){return Hae(t,e,n)},x(t,e,n){return fh(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return fh(t,e,{intersect:n.intersect,axis:"y"})}}};function by(t,e,n){return(Iv.modes[n.mode]||Iv.modes.nearest)(t,e,n)}function Bae(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function Fae(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function fh(t,e,n){return t.filter(a=>n.intersect?a.inRange(e.x,e.y):Bae(a,e,n.axis))}function Hae(t,e,n){let a=Number.POSITIVE_INFINITY;return fh(t,e,n).reduce((r,s)=>{const o=s.getCenterPoint(),l=Fae(e,o,n.axis),c=Ls(e,l);return c<a?(r=[s],a=c):c===a&&r.push(s),r},[]).sort((r,s)=>r._index-s._index).slice(0,1)}function qr(t,e,n){const a=Math.cos(n),r=Math.sin(n),s=e.x,o=e.y;return{x:s+a*(t.x-s)-r*(t.y-o),y:o+r*(t.x-s)+a*(t.y-o)}}const qae=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,pr=.001,md=(t,e,n)=>Math.min(n,Math.max(e,t)),VL=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function $ae(t,e,n){for(const a of Object.keys(t))t[a]=md(t[a],e,n);return t}function zae(t,e,n,a){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+a,2)}function YL(t,{x:e,y:n,x2:a,y2:r},s,{borderWidth:o,hitTolerance:l}){const c=(o+l)/2,h=t.x>=e-c-pr&&t.x<=a+c+pr,u=t.y>=n-c-pr&&t.y<=r+c+pr;return s==="x"?h:(s==="y"||h)&&u}function GL(t,{rect:e,center:n},a,{rotation:r,borderWidth:s,hitTolerance:o}){const l=qr(t,n,Pt(-r));return YL(l,e,a,{borderWidth:s,hitTolerance:o})}function $r(t,e){const{centerX:n,centerY:a}=t.getProps(["centerX","centerY"],e);return{x:n,y:a}}function Wae(t,e,n,a=!0){const r=n.split(".");let s=0;for(const o of e.split(".")){const l=r[s++];if(parseInt(o,10)<parseInt(l,10))break;if(qae(l,o)){if(a)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const XL=t=>typeof t=="string"&&t.endsWith("%"),JL=t=>parseFloat(t)/100,QL=t=>md(JL(t),0,1),Fo=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),Uae={box:t=>Fo(t.centerX,t.centerY),doughnutLabel:t=>Fo(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>Fo(t.centerX,t.centerY),line:t=>Fo(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>Fo(t.centerX,t.centerY)};function wy(t,e){return e==="start"?0:e==="end"?t:XL(e)?QL(e)*t:t/2}function Da(t,e,n=!0){return typeof e=="number"?e:XL(e)?(n?QL(e):JL(e))*t:t}function Vae(t,e){const{x:n,width:a}=t,r=e.textAlign;return r==="center"?n+a/2:r==="end"||r==="right"?n+a:n}function KL(t,e,{borderWidth:n,position:a,xAdjust:r,yAdjust:s},o){const l=$e(o),c=e.width+(l?o.width:0)+n,h=e.height+(l?o.height:0)+n,u=_y(a),d=Lv(t.x,c,r,u.x),m=Lv(t.y,h,s,u.y);return{x:d,y:m,x2:d+c,y2:m+h,width:c,height:h,centerX:d+c/2,centerY:m+h/2}}function _y(t,e="center"){return $e(t)?{x:De(t.x,e),y:De(t.y,e)}:(t=De(t,e),{x:t,y:t})}const ZL=(t,e)=>t&&t.autoFit&&e<1;function eO(t,e){const n=t.font,a=gt(n)?n:[n];return ZL(t,e)?a.map(function(r){const s=It(r);return s.size=Math.floor(r.size*e),s.lineHeight=r.lineHeight,It(s)}):a.map(r=>It(r))}function tO(t){return t&&(zn(t.xValue)||zn(t.yValue))}function Lv(t,e,n=0,a){return t-wy(e,a)+n}function Ks(t,e,n){const a=n.init;if(a){if(a===!0)return iO(e,n)}else return;return Yae(t,e,n)}function nO(t,e,n){let a=!1;return e.forEach(r=>{An(t[r])?(a=!0,n[r]=t[r]):zn(n[r])&&delete n[r]}),a}function iO(t,e){const n=e.type||"line";return Uae[n](t)}function Yae(t,e,n){const a=rt(n.init,[{chart:t,properties:e,options:n}]);if(a===!0)return iO(e,n);if($e(a))return a}const Ff=new Map,Gae=t=>isNaN(t)||t<=0,Xae=t=>t.reduce(function(e,n){return e+=n.string,e},"");function fd(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function pd(t,{x:e,y:n},a){a&&(t.translate(e,n),t.rotate(Pt(a)),t.translate(-e,-n))}function fa(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Zs(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function gd(t,e){const n=e.content;if(fd(n))return{width:Da(n.width,e.width),height:Da(n.height,e.height)};const a=eO(e),r=e.textStrokeWidth,s=gt(n)?n:[n],o=s.join()+Xae(a)+r+(t._measureText?"-spriting":"");return Ff.has(o)||Ff.set(o,Zae(t,s,a,r)),Ff.get(o)}function aO(t,e,n){const{x:a,y:r,width:s,height:o}=e;t.save(),Zs(t,n);const l=fa(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),cu(t,{x:a,y:r,w:s,h:o,radius:$ae(ls(n.borderRadius),0,Math.min(s,o)/2)}),t.closePath(),t.fill(),l&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function rO(t,e,n,a){const r=n.content;if(fd(r)){t.save(),t.globalAlpha=nre(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const s=gt(r)?r:[r],o=eO(n,a),l=n.color,c=gt(l)?l:[l],h=Vae(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Jae(t,n)&&ere(t,{x:h,y:u},s,o),tre(t,{x:h,y:u},s,{fonts:o,colors:c}),t.restore()}function Jae(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Qae(t,e,n,a){const{radius:r,options:s}=e,o=s.pointStyle,l=s.rotation;let c=(l||0)*sy;if(fd(o)){t.save(),t.translate(n,a),t.rotate(c),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}Gae(r)||Kae(t,{x:n,y:a,radius:r,rotation:l,style:o,rad:c})}function Kae(t,{x:e,y:n,radius:a,rotation:r,style:s,rad:o}){let l,c,h,u;switch(t.beginPath(),s){default:t.arc(e,n,a,0,Ut),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*a,n-Math.cos(o)*a),o+=ou,t.lineTo(e+Math.sin(o)*a,n-Math.cos(o)*a),o+=ou,t.lineTo(e+Math.sin(o)*a,n-Math.cos(o)*a),t.closePath();break;case"rectRounded":u=a*.516,h=a-u,l=Math.cos(o+Gn)*h,c=Math.sin(o+Gn)*h,t.arc(e-l,n-c,u,o-Qe,o-Vt),t.arc(e+c,n-l,u,o-Vt,o),t.arc(e+l,n+c,u,o,o+Vt),t.arc(e-c,n+l,u,o+Vt,o+Qe),t.closePath();break;case"rect":if(!r){h=Math.SQRT1_2*a,t.rect(e-h,n-h,2*h,2*h);break}o+=Gn;case"rectRot":l=Math.cos(o)*a,c=Math.sin(o)*a,t.moveTo(e-l,n-c),t.lineTo(e+c,n-l),t.lineTo(e+l,n+c),t.lineTo(e-c,n+l),t.closePath();break;case"crossRot":o+=Gn;case"cross":l=Math.cos(o)*a,c=Math.sin(o)*a,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l);break;case"star":l=Math.cos(o)*a,c=Math.sin(o)*a,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l),o+=Gn,l=Math.cos(o)*a,c=Math.sin(o)*a,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c),t.moveTo(e+c,n-l),t.lineTo(e-c,n+l);break;case"line":l=Math.cos(o)*a,c=Math.sin(o)*a,t.moveTo(e-l,n-c),t.lineTo(e+l,n+c);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*a,n+Math.sin(o)*a);break}t.fill()}function Zae(t,e,n,a){t.save();const r=e.length;let s=0,o=a;for(let l=0;l<r;l++){const c=n[Math.min(l,n.length-1)];t.font=c.string;const h=e[l];s=Math.max(s,t.measureText(h).width+a),o+=c.lineHeight}return t.restore(),{width:s,height:o}}function ere(t,{x:e,y:n},a,r){t.beginPath();let s=0;a.forEach(function(o,l){const c=r[Math.min(l,r.length-1)],h=c.lineHeight;t.font=c.string,t.strokeText(o,e,n+h/2+s),s+=h}),t.stroke()}function tre(t,{x:e,y:n},a,{fonts:r,colors:s}){let o=0;a.forEach(function(l,c){const h=s[Math.min(c,s.length-1)],u=r[Math.min(c,r.length-1)],d=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=h,t.fillText(l,e,n+d/2+o),o+=d,t.fill()})}function nre(t,e){const n=Ar(t)?t:e;return Ar(n)?md(n,0,1):1}const sO=["left","bottom","top","right"];function ire(t,e){const{pointX:n,pointY:a,options:r}=e,s=r.callout,o=s&&s.display&&lre(e,s);if(!o||hre(e,s,o))return;if(t.save(),t.beginPath(),!fa(t,s))return t.restore();const{separatorStart:c,separatorEnd:h}=are(e,o),{sideStart:u,sideEnd:d}=sre(e,o,c);(s.margin>0||r.borderWidth===0)&&(t.moveTo(c.x,c.y),t.lineTo(h.x,h.y)),t.moveTo(u.x,u.y),t.lineTo(d.x,d.y);const m=qr({x:n,y:a},e.getCenterPoint(),Pt(-e.rotation));t.lineTo(m.x,m.y),t.stroke(),t.restore()}function are(t,e){const{x:n,y:a,x2:r,y2:s}=t,o=rre(t,e);let l,c;return e==="left"||e==="right"?(l={x:n+o,y:a},c={x:l.x,y:s}):(l={x:n,y:a+o},c={x:r,y:l.y}),{separatorStart:l,separatorEnd:c}}function rre(t,e){const{width:n,height:a,options:r}=t,s=r.callout.margin+r.borderWidth/2;return e==="right"?n+s:e==="bottom"?a+s:-s}function sre(t,e,n){const{y:a,width:r,height:s,options:o}=t,l=o.callout.start,c=ore(e,o.callout);let h,u;return e==="left"||e==="right"?(h={x:n.x,y:a+Da(s,l)},u={x:h.x+c,y:h.y}):(h={x:n.x+Da(r,l),y:n.y},u={x:h.x,y:h.y+c}),{sideStart:h,sideEnd:u}}function ore(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function lre(t,e){const n=e.position;return sO.includes(n)?n:cre(t,e)}function cre(t,e){const{x:n,y:a,x2:r,y2:s,width:o,height:l,pointX:c,pointY:h,centerX:u,centerY:d,rotation:m}=t,f={x:u,y:d},p=e.start,g=Da(o,p),x=Da(l,p),b=[n,n+g,n+g,r],w=[a+x,s,a,s],k=[];for(let E=0;E<4;E++){const v=qr({x:b[E],y:w[E]},f,Pt(m));k.push({position:sO[E],distance:Ls(v,{x:c,y:h})})}return k.sort((E,v)=>E.distance-v.distance)[0].position}function hre(t,e,n){const{pointX:a,pointY:r}=t,s=e.margin;let o=a,l=r;return n==="left"?o+=s:n==="right"?o-=s:n==="top"?l+=s:n==="bottom"&&(l-=s),t.inRange(o,l)}const Ov={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Rs(t,e,n){return e=typeof e=="number"?e:t.parse(e),Nn(e)?t.getPixelForValue(e):n}function Ir(t,e,n){const a=e[n];if(a||n==="scaleID")return a;const r=n.charAt(0),s=Object.values(t).filter(o=>o.axis&&o.axis===r);return s.length?s[0].id:r}function oO(t,e){if(t){const n=t.options.reverse,a=Rs(t,e.min,n?e.end:e.start),r=Rs(t,e.max,n?e.start:e.end);return{start:a,end:r}}}function lO(t,e){const{chartArea:n,scales:a}=t,r=a[Ir(a,e,"xScaleID")],s=a[Ir(a,e,"yScaleID")];let o=n.width/2,l=n.height/2;return r&&(o=Rs(r,e.xValue,r.left+r.width/2)),s&&(l=Rs(s,e.yValue,s.top+s.height/2)),{x:o,y:l}}function vy(t,e){const n=t.scales,a=n[Ir(n,e,"xScaleID")],r=n[Ir(n,e,"yScaleID")];if(!a&&!r)return{};let{left:s,right:o}=a||t.chartArea,{top:l,bottom:c}=r||t.chartArea;const h=Mv(a,{min:e.xMin,max:e.xMax,start:s,end:o});s=h.start,o=h.end;const u=Mv(r,{min:e.yMin,max:e.yMax,start:c,end:l});return l=u.start,c=u.end,{x:s,y:l,x2:o,y2:c,width:o-s,height:c-l,centerX:s+(o-s)/2,centerY:l+(c-l)/2}}function cO(t,e){if(!tO(e)){const n=vy(t,e);let a=e.radius;(!a||isNaN(a))&&(a=Math.min(n.width,n.height)/2,e.radius=a);const r=a*2,s=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:s-a,y:o-a,x2:s+a,y2:o+a,centerX:s,centerY:o,width:r,height:r,radius:a}}return dre(t,e)}function ure(t,e){const{scales:n,chartArea:a}=t,r=n[e.scaleID],s={x:a.left,y:a.top,x2:a.right,y2:a.bottom};return r?mre(r,s,e):fre(n,s,e),s}function hO(t,e){const n=vy(t,e);return n.initProperties=Ks(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:xre(t,n,e),initProperties:n.initProperties}],n}function dre(t,e){const n=lO(t,e),a=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:a,height:a}}function Mv(t,e){const n=oO(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function mre(t,e,n){const a=Rs(t,n.value,NaN),r=Rs(t,n.endValue,a);t.isHorizontal()?(e.x=a,e.x2=r):(e.y=a,e.y2=r)}function fre(t,e,n){for(const a of Object.keys(Ov)){const r=t[Ir(t,n,a)];if(r){const{min:s,max:o,start:l,end:c,startProp:h,endProp:u}=Ov[a],d=oO(r,{min:n[s],max:n[o],start:r[l],end:r[c]});e[h]=d.start,e[u]=d.end}}}function pre({properties:t,options:e},n,a,r){const{x:s,x2:o,width:l}=t;return uO({start:s,end:o,borderWidth:e.borderWidth},{position:a.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function gre({properties:t,options:e},n,a,r){const{y:s,y2:o,height:l}=t;return uO({start:s,end:o,borderWidth:e.borderWidth},{position:a.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function uO(t,e){const{start:n,end:a,borderWidth:r}=t,{position:s,padding:{start:o,end:l},adjust:c}=e,h=a-r-n-o-l-e.size;return n+r/2+c+wy(h,s)}function xre(t,e,n){const a=n.label;a.backgroundColor="transparent",a.callout.display=!1;const r=_y(a.position),s=an(a.padding),o=gd(t.ctx,a),l=pre({properties:e,options:n},o,r,s),c=gre({properties:e,options:n},o,r,s),h=o.width+s.width,u=o.height+s.height;return{x:l,y:c,x2:l+h,y2:c+u,width:h,height:u,centerX:l+h/2,centerY:c+u/2,rotation:a.rotation}}const cg=["enter","leave"],jy=cg.concat("click");function yre(t,e,n){e.listened=nO(n,jy,e.listeners),e.moveListened=!1,cg.forEach(a=>{An(n[a])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(a=>{!e.listened&&An(a.click)&&(e.listened=!0),e.moveListened||cg.forEach(r=>{An(a[r])&&(e.listened=!0,e.moveListened=!0)})})}function bre(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return wre(t,e,n);case"click":return _re(t,e,n)}}function wre(t,e,n){if(!t.moveListened)return;let a;e.type==="mousemove"?a=by(t.visibleElements,e,n.interaction):a=[];const r=t.hovered;t.hovered=a;const s={state:t,event:e};let o=Rv(s,"leave",r,a);return Rv(s,"enter",a,r)||o}function Rv({state:t,event:e},n,a,r){let s;for(const o of a)r.indexOf(o)<0&&(s=dO(o.options[n]||t.listeners[n],o,e)||s);return s}function _re(t,e,n){const a=t.listeners,r=by(t.visibleElements,e,n.interaction);let s;for(const o of r)s=dO(o.options.click||a.click,o,e)||s;return s}function dO(t,e,n){return rt(t,[e.$context,n])===!0}const du=["afterDraw","beforeDraw"];function vre(t,e,n){const a=e.visibleElements;e.hooked=nO(n,du,e.hooks),e.hooked||a.forEach(r=>{e.hooked||du.forEach(s=>{An(r.options[s])&&(e.hooked=!0)})})}function Pv(t,e,n){if(t.hooked){const a=e.options[n]||t.hooks[n];return rt(a,[e.$context])}}function jre(t,e,n){const a=Cre(t.scales,e,n);let r=Dv(e,a,"min","suggestedMin");r=Dv(e,a,"max","suggestedMax")||r,r&&An(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function Tre(t,e){for(const n of t)Ere(n,e)}function Dv(t,e,n,a){if(Nn(e[n])&&!kre(t.options,n,a)){const r=t[n]!==e[n];return t[n]=e[n],r}}function kre(t,e,n){return zn(t[e])||zn(t[n])}function Ere(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const a=Ir(e,t,n);a&&!e[a]&&Sre(t,n)&&console.warn(`No scale found with id '${a}' for annotation '${t.id}'`)}}function Sre(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const a of["Min","Max","Value"])if(zn(t[n+a]))return!0;return!1}function Cre(t,e,n){const a=e.axis,r=e.id,s=a+"ScaleID",o={min:De(e.min,Number.NEGATIVE_INFINITY),max:De(e.max,Number.POSITIVE_INFINITY)};for(const l of n)l.scaleID===r?Bv(l,e,["value","endValue"],o):Ir(t,l,s)===r&&Bv(l,e,[a+"Min",a+"Max",a+"Value"],o);return o}function Bv(t,e,n,a){for(const r of n){const s=t[r];if(zn(s)){const o=e.parse(s);a.min=Math.min(a.min,o),a.max=Math.max(a.max,o)}}}class eo extends On{inRange(e,n,a,r){const{x:s,y:o}=qr({x:e,y:n},this.getCenterPoint(r),Pt(-this.options.rotation));return YL({x:s,y:o},this.getProps(["x","y","x2","y2"],r),a,this.options)}getCenterPoint(e){return $r(this,e)}draw(e){e.save(),pd(e,this.getCenterPoint(),this.options.rotation),aO(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return hO(e,n)}}eo.id="boxAnnotation";eo.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};eo.defaultRoutes={borderColor:"color",backgroundColor:"color"};eo.descriptors={label:{_fallback:!0}};class xd extends On{inRange(e,n,a,r){return GL({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},a,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return $r(this,e)}draw(e){const n=this.options;!n.display||!n.content||(Mre(e,this),e.save(),pd(e,this.getCenterPoint(),this.rotation),rO(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const a=Are(e,n);if(!a)return{};const{controllerMeta:r,point:s,radius:o}=Ire(e,n,a);let l=gd(e.ctx,n);const c=Lre(l,o);ZL(n,c)&&(l={width:l.width*c,height:l.height*c});const{position:h,xAdjust:u,yAdjust:d}=n,m=KL(s,l,{borderWidth:0,position:h,xAdjust:u,yAdjust:d});return{initProperties:Ks(e,m,n),...m,...r,rotation:n.rotation,_fitRatio:c}}}xd.id="doughnutLabelAnnotation";xd.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};xd.defaultRoutes={};function Are(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,a){const r=a.controller;return r instanceof Fne&&Nre(t,e,a.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?a:n},void 0)}function Nre(t,e,n){if(!e.autoHide)return!0;for(let a=0;a<n.length;a++)if(!n[a].hidden&&t.getDataVisibility(a))return!0}function Ire({chartArea:t},e,n){const{left:a,top:r,right:s,bottom:o}=t,{innerRadius:l,offsetX:c,offsetY:h}=n.controller,u=(a+s)/2+c,d=(r+o)/2+h,m={left:Math.max(u-l,a),right:Math.min(u+l,s),top:Math.max(d-l,r),bottom:Math.min(d+l,o)},f={x:(m.left+m.right)/2,y:(m.top+m.bottom)/2},p=e.spacing+e.borderWidth/2,g=l-p,x=f.y>d,b=x?r+p:o-p,w=Ore(b,u,d,g);return{controllerMeta:{_centerX:u,_centerY:d,_radius:g,_counterclockwise:x,...w},point:f,radius:Math.min(l,Math.min(m.right-m.left,m.bottom-m.top)/2)}}function Lre({width:t,height:e},n){const a=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/a}function Ore(t,e,n,a){const r=Math.pow(n-t,2),s=Math.pow(a,2),o=e*-2,l=Math.pow(e,2)+r-s,c=Math.pow(o,2)-4*l;if(c<=0)return{_startAngle:0,_endAngle:Ut};const h=(-o-Math.sqrt(c))/2,u=(-o+Math.sqrt(c))/2;return{_startAngle:ig({x:e,y:n},{x:h,y:t}).angle,_endAngle:ig({x:e,y:n},{x:u,y:t}).angle}}function Mre(t,e){const{_centerX:n,_centerY:a,_radius:r,_startAngle:s,_endAngle:o,_counterclockwise:l,options:c}=e;t.save();const h=fa(t,c);t.fillStyle=c.backgroundColor,t.beginPath(),t.arc(n,a,r,s,o,l),t.closePath(),t.fill(),h&&t.stroke(),t.restore()}class hc extends On{inRange(e,n,a,r){return GL({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},a,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return $r(this,e)}draw(e){const n=this.options,a=!zn(this._visible)||this._visible;!n.display||!n.content||!a||(e.save(),pd(e,this.getCenterPoint(),this.rotation),ire(e,this),aO(e,this,n),rO(e,Rre(this),n),e.restore())}resolveElementProperties(e,n){let a;if(tO(n))a=lO(e,n);else{const{centerX:l,centerY:c}=vy(e,n);a={x:l,y:c}}const r=an(n.padding),s=gd(e.ctx,n),o=KL(a,s,n,r);return{initProperties:Ks(e,o,n),pointX:a.x,pointY:a.y,...o,rotation:n.rotation}}}hc.id="labelAnnotation";hc.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};hc.defaultRoutes={borderColor:"color"};function Rre({x:t,y:e,width:n,height:a,options:r}){const s=r.borderWidth/2,o=an(r.padding);return{x:t+o.left+s,y:e+o.top+s,width:n-o.left-o.right-r.borderWidth,height:a-o.top-o.bottom-r.borderWidth}}const Ty=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),hg=(t,e,n)=>Ty(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Fv=(t,e,n)=>Ty(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,tl=t=>t*t,Pre=(t,e,{x:n,y:a,x2:r,y2:s},o)=>o==="y"?{start:Math.min(a,s),end:Math.max(a,s),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},Hv=(t,e,n,a)=>(1-a)*(1-a)*t+2*(1-a)*a*e+a*a*n,ug=(t,e,n,a)=>({x:Hv(t.x,e.x,n.x,a),y:Hv(t.y,e.y,n.y,a)}),qv=(t,e,n,a)=>2*(1-a)*(e-t)+2*a*(n-e),$v=(t,e,n,a)=>-Math.atan2(qv(t.x,e.x,n.x,a),qv(t.y,e.y,n.y,a))+.5*Qe;class uc extends On{inRange(e,n,a,r){const s=(this.options.borderWidth+this.options.hitTolerance)/2;if(a!=="x"&&a!=="y"){const o={mouseX:e,mouseY:n},{path:l,ctx:c}=this;if(l){fa(c,this.options),c.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,d=e*u.currentDevicePixelRatio,m=n*u.currentDevicePixelRatio,f=c.isPointInStroke(l,d,m)||dg(this,o,r);return c.restore(),f}const h=tl(s);return Hre(this,o,h,r)||dg(this,o,r)}return Dre(this,{mouseX:e,mouseY:n},a,{hitSize:s,useFinalPosition:r})}getCenterPoint(e){return $r(this,e)}draw(e){const{x:n,y:a,x2:r,y2:s,cp:o,options:l}=this;if(e.save(),!fa(e,l))return e.restore();Zs(e,l);const c=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-a,2));if(l.curve&&o)return Gre(e,this,o,c),e.restore();const{startOpts:h,endOpts:u,startAdjust:d,endAdjust:m}=mO(this),f=Math.atan2(s-a,r-n);e.translate(n,a),e.rotate(f),e.beginPath(),e.moveTo(0+d,0),e.lineTo(c-m,0),e.shadowColor=l.borderShadowColor,e.stroke(),mg(e,0,d,h),mg(e,c,-m,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const a=ure(e,n),{x:r,y:s,x2:o,y2:l}=a,c=Bre(a,e.chartArea),h=c?Fre({x:r,y:s},{x:o,y:l},e.chartArea):{x:r,y:s,x2:o,y2:l,width:Math.abs(o-r),height:Math.abs(l-s)};if(h.centerX=(o+r)/2,h.centerY=(l+s)/2,h.initProperties=Ks(e,h,n),n.curve){const d={x:h.x,y:h.y},m={x:h.x2,y:h.y2};h.cp=Yre(h,n,Ls(d,m))}const u=qre(e,h,n.label);return u._visible=c,h.elements=[{type:"label",optionScope:"label",properties:u,initProperties:h.initProperties}],h}}uc.id="lineAnnotation";const zv={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};uc.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},zv),fill:!1,length:12,start:Object.assign({},zv),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},hc.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};uc.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};uc.defaultRoutes={borderColor:"color"};function Dre(t,{mouseX:e,mouseY:n},a,{hitSize:r,useFinalPosition:s}){const o=Pre(e,n,t.getProps(["x","y","x2","y2"],s),a);return VL(o,r)||dg(t,{mouseX:e,mouseY:n},s,a)}function Bre({x:t,y:e,x2:n,y2:a},{top:r,right:s,bottom:o,left:l}){return!(t<l&&n<l||t>s&&n>s||e<r&&a<r||e>o&&a>o)}function Wv({x:t,y:e},n,{top:a,right:r,bottom:s,left:o}){return t<o&&(e=Fv(o,{x:t,y:e},n),t=o),t>r&&(e=Fv(r,{x:t,y:e},n),t=r),e<a&&(t=hg(a,{x:t,y:e},n),e=a),e>s&&(t=hg(s,{x:t,y:e},n),e=s),{x:t,y:e}}function Fre(t,e,n){const{x:a,y:r}=Wv(t,e,n),{x:s,y:o}=Wv(e,t,n);return{x:a,y:r,x2:s,y2:o,width:Math.abs(s-a),height:Math.abs(o-r)}}function Hre(t,{mouseX:e,mouseY:n},a=pr,r){const{x:s,y:o,x2:l,y2:c}=t.getProps(["x","y","x2","y2"],r),h=l-s,u=c-o,d=tl(h)+tl(u),m=d===0?-1:((e-s)*h+(n-o)*u)/d;let f,p;return m<0?(f=s,p=o):m>1?(f=l,p=c):(f=s+m*h,p=o+m*u),tl(e-f)+tl(n-p)<=a}function dg(t,{mouseX:e,mouseY:n},a,r){const s=t.label;return s.options.display&&s.inRange(e,n,r,a)}function qre(t,e,n){const a=n.borderWidth,r=an(n.padding),s=gd(t.ctx,n),o=s.width+r.width+a,l=s.height+r.height+a;return zre(e,n,{width:o,height:l,padding:r},t.chartArea)}function $re(t){const{x:e,y:n,x2:a,y2:r}=t,s=Math.atan2(r-n,a-e);return s>Qe/2?s-Qe:s<Qe/-2?s+Qe:s}function zre(t,e,n,a){const{width:r,height:s,padding:o}=n,{xAdjust:l,yAdjust:c}=e,h={x:t.x,y:t.y},u={x:t.x2,y:t.y2},d=e.rotation==="auto"?$re(t):Pt(e.rotation),m=Wre(r,s,d),f=Ure(t,e,{labelSize:m,padding:o},a),p=t.cp?ug(h,t.cp,u,f):Ty(h,u,f),g={size:m.w,min:a.left,max:a.right,padding:o.left},x={size:m.h,min:a.top,max:a.bottom,padding:o.top},b=Vv(p.x,g)+l,w=Vv(p.y,x)+c;return{x:b-r/2,y:w-s/2,x2:b+r/2,y2:w+s/2,centerX:b,centerY:w,pointX:p.x,pointY:p.y,width:r,height:s,rotation:dL(d)}}function Wre(t,e,n){const a=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*a)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*a)}}function Ure(t,e,n,a){let r;const s=Vre(t,a);return e.position==="start"?r=Uv({w:t.x2-t.x,h:t.y2-t.y},n,e,s):e.position==="end"?r=1-Uv({w:t.x-t.x2,h:t.y-t.y2},n,e,s):r=wy(1,e.position),r}function Uv(t,e,n,a){const{labelSize:r,padding:s}=e,o=t.w*a.dx,l=t.h*a.dy,c=o>0&&(r.w/2+s.left-a.x)/o,h=l>0&&(r.h/2+s.top-a.y)/l;return md(Math.max(c,h),0,.25)}function Vre(t,e){const{x:n,x2:a,y:r,y2:s}=t,o=Math.min(r,s)-e.top,l=Math.min(n,a)-e.left,c=e.bottom-Math.max(r,s),h=e.right-Math.max(n,a);return{x:Math.min(l,h),y:Math.min(o,c),dx:l<=h?1:-1,dy:o<=c?1:-1}}function Vv(t,e){const{size:n,min:a,max:r,padding:s}=e,o=n/2;return n>r-a?(r+a)/2:(a>=t-s-o&&(t=a+s+o),r<=t+s+o&&(t=r-s-o),t)}function mO(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,a=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:a,startAdjust:Yv(t,n),endAdjust:Yv(t,a)}}function Yv(t,e){if(!e||!e.display)return 0;const{length:n,width:a}=e,r=t.options.borderWidth/2,s={x:n,y:a+r};return Math.abs(hg(0,s,{x:0,y:r}))}function mg(t,e,n,a){if(!a||!a.display)return;const{length:r,width:s,fill:o,backgroundColor:l,borderColor:c}=a,h=Math.abs(e-r)+n;t.beginPath(),Zs(t,a),fa(t,a),t.moveTo(h,-s),t.lineTo(e+n,0),t.lineTo(h,s),o===!0?(t.fillStyle=l||c,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=a.borderShadowColor,t.stroke()}function Yre(t,e,n){const{x:a,y:r,x2:s,y2:o,centerX:l,centerY:c}=t,h=Math.atan2(o-r,s-a),u=_y(e.controlPoint,0),d={x:l+Da(n,u.x,!1),y:c+Da(n,u.y,!1)};return qr(d,{x:l,y:c},h)}function Gv(t,{x:e,y:n},{angle:a,adjust:r},s){!s||!s.display||(t.save(),t.translate(e,n),t.rotate(a),mg(t,0,-r,s),t.restore())}function Gre(t,e,n,a){const{x:r,y:s,x2:o,y2:l,options:c}=e,{startOpts:h,endOpts:u,startAdjust:d,endAdjust:m}=mO(e),f={x:r,y:s},p={x:o,y:l},g=$v(f,n,p,0),x=$v(f,n,p,1)-Qe,b=ug(f,n,p,d/a),w=ug(f,n,p,1-m/a),k=new Path2D;t.beginPath(),k.moveTo(b.x,b.y),k.quadraticCurveTo(n.x,n.y,w.x,w.y),t.shadowColor=c.borderShadowColor,t.stroke(k),e.path=k,e.ctx=t,Gv(t,b,{angle:g,adjust:d},h),Gv(t,w,{angle:x,adjust:m},u)}class dc extends On{inRange(e,n,a,r){const s=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(a!=="x"&&a!=="y")return Xre({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),s,o);const{x:l,y:c,x2:h,y2:u}=this.getProps(["x","y","x2","y2"],r),d=a==="y"?{start:c,end:u}:{start:l,end:h},m=qr({x:e,y:n},this.getCenterPoint(r),Pt(-s));return m[a]>=d.start-o-pr&&m[a]<=d.end+o+pr}getCenterPoint(e){return $r(this,e)}draw(e){const{width:n,height:a,centerX:r,centerY:s,options:o}=this;e.save(),pd(e,this.getCenterPoint(),o.rotation),Zs(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const l=fa(e,o);e.ellipse(r,s,a/2,n/2,Qe/2,0,2*Qe),e.fill(),l&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return hO(e,n)}}dc.id="ellipseAnnotation";dc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},eo.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};dc.defaultRoutes={borderColor:"color",backgroundColor:"color"};dc.descriptors={label:{_fallback:!0}};function Xre(t,e,n,a){const{width:r,height:s,centerX:o,centerY:l}=e,c=r/2,h=s/2;if(c<=0||h<=0)return!1;const u=Pt(n||0),d=Math.cos(u),m=Math.sin(u),f=Math.pow(d*(t.x-o)+m*(t.y-l),2),p=Math.pow(m*(t.x-o)-d*(t.y-l),2);return f/Math.pow(c+a,2)+p/Math.pow(h+a,2)<=1.0001}class yd extends On{inRange(e,n,a,r){const{x:s,y:o,x2:l,y2:c,width:h}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return a!=="x"&&a!=="y"?zae({x:e,y:n},this.getCenterPoint(r),h/2,u):VL(a==="y"?{start:o,end:c,value:n}:{start:s,end:l,value:e},u)}getCenterPoint(e){return $r(this,e)}draw(e){const n=this.options,a=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Zs(e,n);const r=fa(e,n);Qae(e,this,this.centerX,this.centerY),r&&!fd(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=a}resolveElementProperties(e,n){const a=cO(e,n);return a.initProperties=Ks(e,a,n),a}}yd.id="pointAnnotation";yd.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};yd.defaultRoutes={borderColor:"color",backgroundColor:"color"};class bd extends On{inRange(e,n,a,r){if(a!=="x"&&a!=="y")return this.options.radius>=.1&&this.elements.length>1&&Qre(this.elements,e,n,r);const s=qr({x:e,y:n},this.getCenterPoint(r),Pt(-this.options.rotation)),o=this.elements.map(h=>a==="y"?h.bY:h.bX),l=Math.min(...o),c=Math.max(...o);return s[a]>=l&&s[a]<=c}getCenterPoint(e){return $r(this,e)}draw(e){const{elements:n,options:a}=this;e.save(),e.beginPath(),e.fillStyle=a.backgroundColor,Zs(e,a);const r=fa(e,a);let s=!0;for(const o of n)s?(e.moveTo(o.x,o.y),s=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const a=cO(e,n),{sides:r,rotation:s}=n,o=[],l=2*Qe/r;let c=s*sy;for(let h=0;h<r;h++,c+=l){const u=Jre(a,n,c);u.initProperties=Ks(e,a,n),o.push(u)}return a.elements=o,a}}bd.id="polygonAnnotation";bd.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};bd.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Jre({centerX:t,centerY:e},{radius:n,borderWidth:a,hitTolerance:r},s){const o=(a+r)/2,l=Math.sin(s),c=Math.cos(s),h={x:t+l*n,y:e-c*n};return{type:"point",optionScope:"point",properties:{x:h.x,y:h.y,centerX:h.x,centerY:h.y,bX:t+l*(n+o),bY:e-c*(n+o)}}}function Qre(t,e,n,a){let r=!1,s=t[t.length-1].getProps(["bX","bY"],a);for(const o of t){const l=o.getProps(["bX","bY"],a);l.bY>n!=s.bY>n&&e<(s.bX-l.bX)*(n-l.bY)/(s.bY-l.bY)+l.bX&&(r=!r),s=l}return r}const La={box:eo,doughnutLabel:xd,ellipse:dc,label:hc,line:uc,point:yd,polygon:bd};Object.keys(La).forEach(t=>{bt.describe(`elements.${La[t].id}`,{_fallback:"plugins.annotation.common"})});const Kre={update:Object.assign},Zre=jy.concat(du),Xv=(t,e)=>$e(e)?pg(t,e):t,fg=t=>t==="color"||t==="font";function ky(t="line"){return La[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function ese(t,e,n,a){const r=nse(t,n.animations,a),s=e.annotations,o=rse(e.elements,s);for(let l=0;l<s.length;l++){const c=s[l],h=fO(o,l,c.type),u=c.setContext(ase(t,h,o,c)),d=h.resolveElementProperties(t,u);d.skip=tse(d),"elements"in d&&(ise(h,d.elements,u,r),delete d.elements),zn(h.x)||Object.assign(h,d),Object.assign(h,d.initProperties),d.options=pO(u),r.update(h,d)}}function tse(t){return isNaN(t.x)||isNaN(t.y)}function nse(t,e,n){return n==="reset"||n==="none"||n==="resize"?Kre:new gy(t,e)}function ise(t,e,n,a){const r=t.elements||(t.elements=[]);r.length=e.length;for(let s=0;s<e.length;s++){const o=e[s],l=o.properties,c=fO(r,s,o.type,o.initProperties),h=n[o.optionScope].override(o);l.options=pO(h),a.update(c,l)}}function fO(t,e,n,a){const r=La[ky(n)];let s=t[e];return(!s||!(s instanceof r))&&(s=t[e]=new r,Object.assign(s,a)),s}function pO(t){const e=La[ky(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,pg(t,e.defaults),pg(t,e.defaultRoutes));for(const a of Zre)n[a]=t[a];return n}function pg(t,e){const n={};for(const a of Object.keys(e)){const r=e[a],s=t[a];fg(a)&&gt(s)?n[a]=s.map(o=>Xv(o,r)):n[a]=Xv(s,r)}return n}function ase(t,e,n,a){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:a.id,type:"annotation"}))}function rse(t,e){const n=e.length,a=t.length;if(a<n){const r=n-a;t.splice(a,0,...new Array(r))}else a>n&&t.splice(n,a-n);return t}var sse="3.1.0";const Ta=new Map,Jv=t=>t.type!=="doughnutLabel",ose=jy.concat(du);var lse={id:"annotation",version:sse,beforeRegister(){Wae("chart.js","4.0",br.version)},afterRegister(){br.register(La)},afterUnregister(){br.unregister(La)},beforeInit(t){Ta.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const a=Ta.get(t),r=a.annotations=[];let s=n.annotations;$e(s)?Object.keys(s).forEach(o=>{const l=s[o];$e(l)&&(l.id=o,r.push(l))}):gt(s)&&r.push(...s),Tre(r.filter(Jv),t.scales)},afterDataLimits(t,e){const n=Ta.get(t);jre(t,e.scale,n.annotations.filter(Jv).filter(a=>a.display&&a.adjustScaleRange))},afterUpdate(t,e,n){const a=Ta.get(t);yre(t,a,n),ese(t,a,n,e.mode),a.visibleElements=a.elements.filter(r=>!r.skip&&r.options.display),vre(t,a,n)},beforeDatasetsDraw(t,e,n){Ho(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){Ho(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){Ho(t,e.index,n.clip)},beforeDraw(t,e,n){Ho(t,"beforeDraw",n.clip)},afterDraw(t,e,n){Ho(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const a=Ta.get(t);bre(a,e.event,n)&&(e.changed=!0)},afterDestroy(t){Ta.delete(t)},getAnnotations(t){const e=Ta.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return by(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!ose.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${La[ky(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:fg,_fallback:!0},_indexable:fg}},additionalOptionScopes:[""]};function Ho(t,e,n){const{ctx:a,chartArea:r}=t,s=Ta.get(t);n&&ld(a,r);const o=cse(s.visibleElements,e).sort((l,c)=>l.element.options.z-c.element.options.z);for(const l of o)hse(a,r,s,l);n&&cd(a)}function cse(t,e){const n=[];for(const a of t)if(a.options.drawTime===e&&n.push({element:a,main:!0}),a.elements&&a.elements.length)for(const r of a.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function hse(t,e,n,a){const r=a.element;a.main?(Pv(n,r,"beforeDraw"),r.draw(t,e),Pv(n,r,"afterDraw")):r.draw(t,e)}br.register(Eae,Aae,sae,rae,fae,vae,dae,lse);const use=()=>{const[t,e]=pe.useState(.5),n=3,a=0,[r,s]=pe.useState(5),[o,l]=pe.useState(15),c=n*(1-t)+o*t,h=a*(1-t)+r*t,u=Array.from({length:101},(g,x)=>x/100),d=u.map(g=>n*(1-g)+o*g),m=u.map(g=>a*(1-g)+r*g),f={labels:u.map(g=>(g*100).toFixed(0)+"%"),datasets:[{label:"Cooperate with Jesse",data:d,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1},{label:"Defect against Jesse",data:m,borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.1}]},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{size:12}}},title:{display:!1},annotation:{annotations:{line1:{type:"line",xMin:t*100,xMax:t*100,borderColor:"rgba(0, 0, 0, 0.5)",borderWidth:2,borderDash:[5,5],label:{display:!1}}}}},scales:{x:{title:{display:!0,text:"How likely Jesse is to defect (%)",font:{size:11}},ticks:{maxTicksLimit:6,font:{size:10}}},y:{title:{display:!0,text:"Walter's expected prison sentence (years)",font:{size:11}},ticks:{font:{size:10}}}}};return i.jsxs("div",{className:V({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[i.jsx("h4",{className:V({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"When should Walter cooperate vs. defect against Jesse?"}),i.jsxs("p",{className:V({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1rem"}),children:["We know that if ",i.jsx("strong",{children:"both cooperate, each gets 3 years"}),", and if"," ",i.jsx("strong",{children:"Walter defects while Jesse cooperates, Walter goes free (0 years)"}),". But what about the other scenarios? Adjust the sliders below to see when cooperation becomes Walter’s best choice."]}),i.jsxs("div",{className:V({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.8rem"}),children:[i.jsxs("div",{children:[i.jsxs("label",{children:[i.jsx("strong",{children:"If both defect:"})," ",r," years each"]}),i.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:r,onChange:g=>s(parseFloat(g.target.value)),className:V({width:"100%"})})]}),i.jsxs("div",{children:[i.jsxs("label",{children:[i.jsx("strong",{children:"If Jesse defects against Walter:"})," ",o," years for Walter"]}),i.jsx("input",{type:"range",min:"1",max:"20",step:"0.5",value:o,onChange:g=>l(parseFloat(g.target.value)),className:V({width:"100%"})})]})]}),i.jsxs("div",{className:V({marginBottom:"1rem"}),children:[i.jsxs("label",{className:V({display:"block",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem",textAlign:"center"}),children:["How likely is Jesse to defect: ",i.jsxs("strong",{children:[(t*100).toFixed(0),"%"]})]}),i.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:t,onChange:g=>e(parseFloat(g.target.value)),className:V({width:"100%",height:"4px",backgroundColor:"#e5e7eb",borderRadius:"2px",outline:"none",cursor:"pointer"})})]}),i.jsx("div",{className:V({height:"250px",marginBottom:"1rem"}),children:i.jsx(UL,{data:f,options:p})}),i.jsxs("div",{className:V({backgroundColor:h<c?"#fef2f2":"#f0f9ff",border:h<c?"2px solid #dc2626":"2px solid #0066cc",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[i.jsxs("div",{className:V({textAlign:"center",fontSize:"1rem",fontWeight:"bold",color:h<c?"#dc2626":"#0066cc",marginBottom:"0.5rem"}),children:["🎯 Walter's Rational Choice: ",h<c?"Defect":"Cooperate"]}),i.jsxs("div",{className:V({fontSize:"0.85rem",color:"#374151",textAlign:"center"}),children:["Expected outcome: ",i.jsxs("strong",{children:[Math.min(c,h).toFixed(1)," years in prison"]})]})]})]})};function gO(t,e){return t==="C"&&e==="C"?[3,3]:t==="C"&&e==="D"?[15,0]:t==="D"&&e==="C"?[0,15]:[5,5]}function xO(t,e,n){const a=["D","C"],r=[],s=[],o=[],l=[],c=[],h=[];let u=0,d=0;for(let m=0;m<t;m++){let f,p;switch(e){case"random":f=a[Math.floor(Math.random()*2)];break;case"defect":f="D";break;case"cooperate":f="C";break;case"tit-for-tat":f=m===0?"C":s[m-1];break}switch(n){case"random":p=a[Math.floor(Math.random()*2)];break;case"defect":p="D";break;case"cooperate":p="C";break;case"tit-for-tat":p=m===0?"C":r[m-1];break}const[g,x]=gO(f,p);r.push(f),s.push(p),o.push(g),l.push(x),u+=g,d+=x,c.push(u),h.push(d)}return{payoffs1:o,payoffs2:l,totalPayoffs1:c,totalPayoffs2:h}}const dse=()=>{const[t,e]=pe.useState(null),[n,a]=pe.useState(null),[r,s]=pe.useState(null),o=h=>{e(h);const u=Math.random()<.5?"C":"D";a(u);const[d,m]=gO(h,u);s({walterSentence:d,jesseSentence:m})},l=()=>{e(null),a(null),s(null)},c=(h,u)=>h==="D"&&u==="D"?"We both blame each other - 5 years each!":h==="D"&&u==="C"?"I betray Jesse - I walk free!":h==="C"&&u==="D"?"Jesse betrays me - I get 15 years!":"We both cooperate - 3 years each, best mutual outcome!";return i.jsxs("div",{className:V({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[i.jsx("h4",{className:V({fontSize:"1rem",fontWeight:"medium",textAlign:"center",marginBottom:"1rem",color:"#374151"}),children:"Interactive Scenario: What do you do?"}),i.jsx("p",{className:V({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Jesse's decision will be simulated randomly after you choose."}),t?i.jsxs("div",{children:[i.jsxs("div",{className:V({textAlign:"center",marginBottom:"1rem"}),children:[i.jsxs("p",{className:V({fontSize:"0.9rem",color:"#374151",marginBottom:"0.5rem"}),children:[i.jsx("strong",{children:"My choice:"})," ",t==="D"?"Blame Jesse":"Cooperate"]}),i.jsxs("p",{className:V({fontSize:"0.9rem",color:"#6b7280",marginBottom:"0.5rem"}),children:[i.jsx("strong",{children:"Jesse's choice (simulated):"})," ",n==="D"?"Blame me":"Cooperate"]})]}),r&&i.jsxs("div",{className:V({padding:"0.75rem",borderRadius:"4px",border:"1px solid #d1d5db",backgroundColor:"#f9fafb",marginTop:"1rem"}),children:[i.jsx("p",{className:V({textAlign:"center",fontSize:"0.85rem",color:"#374151",marginBottom:"0.5rem"}),children:c(t,n)}),i.jsxs("div",{className:V({display:"flex",justifyContent:"center",gap:"2rem",fontSize:"0.8rem",color:"#6b7280"}),children:[i.jsxs("div",{children:[i.jsx("strong",{children:"My sentence:"})," ",r.walterSentence===0?"Free":`${r.walterSentence} years`]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Jesse's sentence:"})," ",r.jesseSentence===0?"Free":`${r.jesseSentence} years`]})]})]}),i.jsx("div",{className:V({textAlign:"center",marginTop:"1rem"}),children:i.jsx("button",{onClick:l,className:V({padding:"0.375rem 0.75rem",backgroundColor:"#f3f4f6",color:"#374151",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"0.8rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#e5e7eb"}}),children:"Try again"})})]}):i.jsxs("div",{className:V({display:"flex",justifyContent:"center",gap:"1rem"}),children:[i.jsx("button",{onClick:()=>o("D"),className:V({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#1f2937"}}),children:"Blame Jesse"}),i.jsx("button",{onClick:()=>o("C"),className:V({padding:"0.5rem 1rem",backgroundColor:"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",cursor:"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:"#0052a3"}}),children:"Cooperate"})]}),i.jsx("div",{className:V({marginTop:"1rem",fontSize:"0.7rem",color:"#9ca3af",textAlign:"center"}),children:i.jsx("p",{children:"Sentences: 0 years = immunity • 3 years = mutual cooperation • 5 years = mutual betrayal • 15 years = betrayed while cooperating"})})]})},mse=()=>{const[t,e]=pe.useState("tit-for-tat"),n=50,[a,r]=pe.useState(!1),[s,o]=pe.useState(null),l={random:"Unpredictable - chaotic storylines with random decisions based on emotions and circumstances",cooperate:"Always Cooperate - stick with your partner no matter what (Season 1 Jesse approach)",defect:"Always selfish - prioritize yourself and betray when convenient (Season 5 Walter approach)","tit-for-tat":"Tit-for-Tat - realistic relationship, start cooperating then match whatever Jesse did last time"},c={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},h=()=>{r(!0);const m=["random","cooperate","defect","tit-for-tat"],f=m[Math.floor(Math.random()*m.length)],p=xO(n,t,f);o({...p,jesseStrategy:f}),r(!1)},d=(()=>{if(!s)return null;const m=s.totalPayoffs1[s.totalPayoffs1.length-1],f=s.totalPayoffs2[s.totalPayoffs2.length-1],p=m/n,g=f/n;let x=!1,b="";const w=p-g,k=w<-3,E=w>3;E?(x=!0,b=`Jesse consistently got better deals while you suffered. Average difference: ${w.toFixed(1)} years worse for you.`):k?(x=!0,b=`You consistently got better deals while Jesse suffered. Average difference: ${Math.abs(w).toFixed(1)} years worse for Jesse.`):t==="cooperate"&&g<4&&p>8&&(x=!0,b="You cooperated but Jesse took advantage of your cooperation repeatedly.");let v="",S="";return k?(v="Exploitative partnership - you're taking advantage of Jesse's cooperation.",S="#dc2626"):E?(v="You're being exploited - Jesse is getting better deals while you suffer.",S="#dc2626"):p<4&&g<4?(v="Excellent partnership! You're both doing well.",S="#10b981"):p<6&&g<6?(v="Decent cooperation with some conflicts.",S="#f59e0b"):p<10?(v="Troubled relationship with frequent betrayals.",S="#f97316"):(v="Toxic partnership - this relationship is falling apart.",S="#ef4444"),{verdict:v,color:S,walterAvg:p,jesseAvg:g,exploited:x,exploitationMessage:b}})();return i.jsxs("div",{className:V({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[i.jsx("h4",{className:V({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:"🎭 Walter's Strategy Simulator: How Will Your Partnership Play Out?"}),i.jsx("p",{className:V({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Choose your approach as Walter. Jesse's strategy will be randomly selected to simulate the uncertainty of working with a partner. Each simulation runs for 50 episodes (two seasons)."}),i.jsx("div",{className:V({marginBottom:"1rem"}),children:i.jsxs("div",{children:[i.jsx("label",{className:V({display:"block",fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.5rem",color:"#374151",textAlign:"center"}),children:"Walter's Strategy (You):"}),i.jsx("div",{className:V({display:"flex",justifyContent:"center"}),children:i.jsxs("select",{value:t,onChange:m=>e(m.target.value),className:V({width:"60%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),children:[i.jsx("option",{value:"tit-for-tat",children:"Tit-for-Tat"}),i.jsx("option",{value:"cooperate",children:"Always Cooperate"}),i.jsx("option",{value:"defect",children:"Always selfish"}),i.jsx("option",{value:"random",children:"Unpredictable"})]})}),i.jsx("p",{className:V({fontSize:"0.75rem",color:"#6b7280",marginTop:"0.5rem",lineHeight:"1.3",textAlign:"center"}),children:l[t]})]})}),i.jsx("div",{className:V({textAlign:"center",marginBottom:"1rem"}),children:i.jsx("button",{onClick:h,disabled:a,className:V({padding:"0.75rem 1.5rem",backgroundColor:a?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:a?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:a?"#9ca3af":"#0052a3"}}),children:a?"🎬 Filming the season...":"🎬 Start the Season"})}),s&&d&&i.jsxs("div",{className:V({marginTop:"1rem"}),children:[i.jsxs("div",{className:V({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"}),children:[i.jsxs("div",{className:V({textAlign:"center",marginBottom:"1rem"}),children:[i.jsx("h5",{className:V({fontSize:"1rem",fontWeight:"bold",color:"#374151",marginBottom:"0.5rem"}),children:"🎪 Season Finale: Walter vs Jesse"}),i.jsxs("div",{className:V({display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"0.5rem",alignItems:"center",margin:"1rem 0"}),children:[i.jsxs("div",{className:V({textAlign:"center",padding:"0.75rem",backgroundColor:"#dbeafe",borderRadius:"6px"}),children:[i.jsx("div",{className:V({fontSize:"0.85rem",fontWeight:"bold",color:"#1d4ed8"}),children:"Walter (You)"}),i.jsx("div",{className:V({fontSize:"0.75rem",color:"#3730a3",marginTop:"0.25rem"}),children:l[t].split(" - ")[0]})]}),i.jsx("div",{className:V({fontSize:"1.5rem",textAlign:"center"}),children:"⚡"}),i.jsxs("div",{className:V({textAlign:"center",padding:"0.75rem",backgroundColor:"#faf5ff",borderRadius:"6px",border:"2px solid #a855f7"}),children:[i.jsx("div",{className:V({fontSize:"0.85rem",fontWeight:"bold",color:"#7c3aed"}),children:"Jesse"}),i.jsx("div",{className:V({fontSize:"0.75rem",color:"#6b21a8",marginTop:"0.25rem"}),children:c[s.jesseStrategy].split(" - ")[0]})]})]})]}),i.jsxs("div",{className:V({display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem",fontSize:"0.85rem"}),children:[i.jsxs("div",{className:V({textAlign:"center"}),children:[i.jsxs("div",{className:V({color:"#2563eb",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.walterAvg.toFixed(1)," years"]}),i.jsx("div",{className:V({color:"#6b7280",fontSize:"0.75rem"}),children:"Walter's Average Sentence"}),i.jsxs("div",{className:V({color:"#2563eb",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",s.totalPayoffs1[s.totalPayoffs1.length-1]," years"]})]}),i.jsxs("div",{className:V({textAlign:"center"}),children:[i.jsxs("div",{className:V({color:"#7c3aed",fontWeight:"bold",fontSize:"1.2rem"}),children:[d.jesseAvg.toFixed(1)," years"]}),i.jsx("div",{className:V({color:"#6b7280",fontSize:"0.75rem"}),children:"Jesse's Average Sentence"}),i.jsxs("div",{className:V({color:"#7c3aed",fontSize:"0.7rem",marginTop:"0.25rem"}),children:["Total: ",s.totalPayoffs2[s.totalPayoffs2.length-1]," years"]})]})]}),i.jsx("div",{className:V({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${d.color}`,marginBottom:"1rem"}),children:i.jsx("div",{className:V({color:d.color,fontWeight:"bold",fontSize:"0.9rem"}),children:d.verdict})})]}),i.jsxs("div",{className:V({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[i.jsx("h6",{className:V({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:"📈 Cumulative Prison Sentences Over Time"}),i.jsx("div",{style:{position:"relative",height:"200px",width:"100%"},children:i.jsx(UL,{data:{labels:Array.from({length:n},(m,f)=>`Episode ${f+1}`),datasets:[{label:"Walter (You)",data:s.totalPayoffs1,borderColor:"#2563eb",backgroundColor:"rgba(37, 99, 235, 0.1)",borderWidth:2,fill:!1},{label:"Jesse",data:s.totalPayoffs2,borderColor:"#7c3aed",backgroundColor:"rgba(124, 58, 237, 0.1)",borderWidth:2,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{boxWidth:12,font:{size:11}}}},scales:{x:{display:!1},y:{beginAtZero:!0,title:{display:!0,text:"Total Prison Years",font:{size:10}},ticks:{font:{size:10}}}},elements:{point:{radius:0}}}})}),i.jsx("p",{className:V({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.5rem"}),children:"Lower is better - shows how prison sentences accumulate as the partnership progresses"})]}),i.jsx("div",{className:V({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:"💡 Try different strategies to see how they affect your partnership with Jesse"})]})]})},fse=()=>{const[t,e]=pe.useState(null),[n,a]=pe.useState(!1),r=["random","cooperate","defect","tit-for-tat"],s={random:"Unpredictable",cooperate:"Always Cooperate",defect:"Always selfish","tit-for-tat":"Tit-for-Tat"},o={random:"Unpredictable Jesse - makes chaotic, emotion-driven decisions",cooperate:"Always Cooperate - always tries to stick with you (Season 1 Jesse)",defect:"Always selfish Jesse - prioritizes himself, always looks for an advantage","tit-for-tat":"Tit-for-Tat Jesse - mirrors your behavior from previous interactions"},l=()=>{a(!0),setTimeout(()=>{const d={};r.forEach(m=>{d[m]={},r.forEach(f=>{const p=Array.from({length:50},()=>{const{totalPayoffs1:b,totalPayoffs2:w}=xO(100,m,f);return{score1:b[b.length-1],score2:w[w.length-1]}}),g=p.reduce((b,w)=>b+w.score1,0)/p.length,x=p.reduce((b,w)=>b+w.score2,0)/p.length;d[m][f]={avgScore1:g.toFixed(1),avgScore2:x.toFixed(1)}})}),e(d),a(!1)},2e3)},c=d=>{if(!t)return null;let m="tit-for-tat",f=parseFloat(t["tit-for-tat"][d].avgScore1);return r.forEach(p=>{const g=parseFloat(t[p][d].avgScore1);g<f&&(f=g,m=p)}),{strategy:m,score:f}},h=d=>d<4?"#10b981":d<6?"#f59e0b":d<10?"#f97316":"#ef4444",u=d=>d<4?"Excellent outcome":d<6?"Decent cooperation":d<10?"Troubled relationship":"Toxic partnership";return i.jsxs("div",{className:V({margin:"2rem 0",padding:"1.5rem",backgroundColor:"rgba(59, 130, 246, 0.05)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.2)"}),children:[i.jsx("h4",{className:V({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem",textAlign:"center",color:"#374151"}),children:"🧪 Walter's Strategy Guide: How to Handle Different Types of Jesse"}),i.jsx("p",{className:V({textAlign:"center",color:"#6b7280",fontSize:"0.9rem",marginBottom:"1.5rem"}),children:"Analyzes how different Walter strategies perform against each type of Jesse over a full season (100 episodes, 50 simulations per matchup). Find the optimal approach for each Jesse personality."}),i.jsx("div",{className:V({textAlign:"center",marginBottom:"1.5rem"}),children:i.jsx("button",{onClick:l,disabled:n,className:V({padding:"0.75rem 1.5rem",backgroundColor:n?"#9ca3af":"#0066cc",color:"white",borderRadius:"4px",border:"none",fontSize:"0.9rem",fontWeight:"medium",cursor:n?"not-allowed":"pointer",transition:"background-color 0.2s",_hover:{backgroundColor:n?"#9ca3af":"#0052a3"}}),children:n?"🔬 Analyzing character dynamics...":"🎭 Analyze Breaking Bad Strategies"})}),t&&i.jsxs("div",{children:[i.jsx("div",{className:V({display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"1rem",marginBottom:"2rem"}),children:r.map(d=>{const m=c(d),f=m?h(m.score):"#6b7280",p=m?u(m.score):"";return i.jsxs("div",{className:V({backgroundColor:"#f8fafc",border:"2px solid #e2e8f0",borderRadius:"8px",padding:"1rem"}),children:[i.jsxs("div",{className:V({textAlign:"center",marginBottom:"0.75rem"}),children:[i.jsxs("h6",{className:V({fontSize:"0.9rem",fontWeight:"bold",color:"#374151",marginBottom:"0.25rem"}),children:["If Jesse is: ",s[d]]}),i.jsx("p",{className:V({fontSize:"0.7rem",color:"#6b7280",lineHeight:"1.3"}),children:o[d]})]}),m&&i.jsxs("div",{className:V({textAlign:"center",padding:"0.75rem",borderRadius:"6px",backgroundColor:"white",border:`2px solid ${f}`}),children:[i.jsxs("div",{className:V({color:f,fontWeight:"bold",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:["🎯 Walter should be: ",s[m.strategy]]}),i.jsxs("div",{className:V({fontSize:"0.7rem",color:"#6b7280",marginBottom:"0.25rem"}),children:["Average: ",m.score," years prison"]}),i.jsx("div",{className:V({fontSize:"0.7rem",color:f,fontWeight:"medium"}),children:p})]})]},d)})}),i.jsxs("div",{className:V({backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1rem"}),children:[i.jsx("h6",{className:V({fontSize:"0.85rem",fontWeight:"medium",marginBottom:"0.75rem",textAlign:"center",color:"#374151"}),children:"📊 Detailed Results: Walter's Average Prison Sentence"}),i.jsx("div",{className:V({overflowX:"auto"}),children:i.jsxs("table",{className:V({width:"100%",borderCollapse:"collapse",fontSize:"0.8rem"}),children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:V({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"left"}),children:"Walter's Strategy ↓ / Jesse's Strategy →"}),r.map(d=>i.jsx("th",{className:V({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",textAlign:"center"}),children:s[d]},d))]})}),i.jsx("tbody",{children:r.map(d=>i.jsxs("tr",{children:[i.jsx("td",{className:V({border:"1px solid #d1d5db",padding:"0.5rem",backgroundColor:"#f9fafb",fontWeight:"medium"}),children:s[d]}),r.map(m=>{const f=parseFloat(t[d][m].avgScore1),p=c(m)?.strategy===d;return i.jsxs("td",{className:V({border:"1px solid #d1d5db",padding:"0.5rem",textAlign:"center",backgroundColor:p?"#f0f9ff":"white",fontWeight:p?"bold":"normal",color:p?"#0066cc":"#374151"}),children:[f.toFixed(1)," years",p&&i.jsx("div",{className:V({fontSize:"0.6rem",color:"#0066cc"}),children:"✓ Best"})]},m)})]},d))})]})}),i.jsx("p",{className:V({fontSize:"0.7rem",color:"#6b7280",textAlign:"center",marginTop:"0.75rem"}),children:"Lower numbers = better outcomes for Walter. Blue cells show the optimal Walter strategy for each Jesse type."})]}),i.jsx("div",{className:V({fontSize:"0.75rem",color:"#9ca3af",textAlign:"center"}),children:"💡 Understanding your partner's behavior is key to choosing the right strategy in repeated games"})]})]})},pse=()=>i.jsxs("article",{className:"prose prose-lg max-w-none",children:[i.jsx("p",{children:"Why did the 2024 Nobel Prize in Economics go to researchers who study why some countries prosper with strong institutions while others don’t? When I looked into the question, the answer turned out to be connected to a famous social game called the Prisoner’s Dilemma."}),i.jsxs("p",{children:["I had encountered the Prisoner’s Dilemma before as a single-game thought experiment, but the"," ",i.jsx("a",{href:"https://www.nobelprize.org/prizes/economic-sciences/2024/press-release/",children:"Nobel Prize work"}),` focuses on repeated interactions. When the same dilemma plays out over and over, questions like "Why should I pay taxes anyway?" or "Why should my country cut emissions if others won't?" become surprisingly complex strategic problems.`]}),i.jsx("p",{children:"To explore the dilemma, I wanted to work through its basic mechanics using a scenario that makes the challenges clear. This is why I chose to embed the discussion into the context of Breaking Bad, which felt like a perfect example."}),i.jsx("h2",{children:"Setting the scene with Breaking Bad"}),i.jsxs("p",{children:["The characters are: ",i.jsx("strong",{children:"Walter White"})," (high school chemistry teacher turned meth cook),"," ",i.jsx("strong",{children:"Jesse Pinkman"})," (Walter’s former student and business partner), and"," ",i.jsx("strong",{children:"Hank Schrader"})," (DEA agent)."]}),i.jsx("p",{children:"We can now consider these three characters in a standard scenario for prisoners: Walter White and Jesse Pinkman have been arrested by the DEA and are being interrogated separately. Agent Hank Schrader offers each the same deal: testify against your partner to get immunity, or stay silent and face whatever charges can be proven."}),i.jsx("p",{children:"This setup—two people who must choose between cooperation and defection without being able to communicate—provides a clean framework for analyzing why mutually beneficial cooperation often breaks down."}),i.jsx("h3",{children:"The Breaking Bad scenario"}),i.jsxs("p",{children:["This is the ",i.jsx("strong",{children:"perfect"})," Prisoner’s Dilemma scenario. Walter and Jesse each have exactly two choices:"]}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Cooperate (C)"}),': Stay loyal to your partner - "I don’t know this person, we’ve never met."']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Defect (D)"}),': Blame your partner - "He forced me into this, he’s the real criminal."']})]}),i.jsx("p",{children:"The sentences depend on what both choose:"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Both cooperate (C, C)"}),": Each gets 3 years. The DEA has some evidence but not enough for major charges without testimony."]}),i.jsxs("li",{children:[i.jsx("strong",{children:"One blames the other (D, C)"}),': The betrayer walks free with immunity, the cooperator gets 15 years for "being the mastermind."']}),i.jsxs("li",{children:[i.jsx("strong",{children:"Both blame each other (D, D)"}),": Each gets 5 years. Their contradictory stories help neither case."]})]}),i.jsx("h3",{children:"The Dilemma Unfolds"}),i.jsx("p",{children:"Now try putting yourself in Walter’s position. You’re sitting across from DEA Agent Hank Schrader, knowing Jesse is in the next room facing the exact same choice. What goes through your mind?"}),i.jsx(dse,{}),i.jsx("p",{children:'The interactive game above reveals something unsettling: there’s a strong pull toward betrayal. You might find yourself thinking, "If I blame Jesse, I could walk free. What do I owe him anyway?" This gut reaction points to the heart of the dilemma.'}),i.jsx("h3",{children:"Two Ways to Think About It"}),i.jsxs("p",{children:[i.jsx("strong",{children:"The Team Perspective:"}),' If Walter and Jesse could step back and ask "What’s best for us together?", the answer is clear. Both cooperating (3 years each) beats both betraying (5 years each). Total time served: 6 years versus 10 years. They’re partners against the DEA, not enemies.']}),i.jsxs("p",{children:[i.jsx("strong",{children:"The Individual Perspective:"}),' But here’s where Walter’s mind would really go: "What’s best for ',i.jsx("em",{children:"me"}),'?" And that’s where the mathematics becomes crucial—and troubling.']}),i.jsx("h3",{children:"Walter’s Cold Calculation"}),i.jsx("p",{children:'Walter is, at heart, a high school chemistry teacher who thinks systematically. He’d probably work through the logic like this: "Let me figure out what Jesse might do, then decide accordingly."'}),i.jsx(sa,{children:`

Suppose Walter estimates there's a probability *p* that Jesse will betray him. That means there's a probability *(1-p)* that Jesse cooperates.

**Walter's expected sentence if he cooperates:**
- If Jesse cooperates (probability 1-p): 3 years
- If Jesse betrays (probability p): 15 years  
- Expected sentence: 3(1-p) + 15p = 3 + 12p years

**Walter's expected sentence if he betrays Jesse:**
- If Jesse cooperates (probability 1-p): 0 years (Walter goes free)
- If Jesse betrays (probability p): 5 years
- Expected sentence: 0(1-p) + 5p = 5p years

For Walter to prefer cooperating, we'd need: 3 + 12p < 5p

Solving this: 3 < 5p - 12p = -7p

This gives us: p < -3/7

Since probabilities can't be negative, this condition is impossible to satisfy. **Walter should always betray Jesse, regardless of what he thinks Jesse will do.**

This is the mathematical heart of the Prisoner's Dilemma: individual rationality leads both players to a worse outcome than cooperation would provide. The outcome where both players 
betray is what game theorists call a ["Nash equilibrium"](https://en.wikipedia.org/wiki/Nash_equilibrium) - a stable situation where neither player can improve their payoff by unilaterally changing their strategy. Even though both would prefer mutual cooperation, neither wants to be the "sucker" who cooperates while the other defects.

### When Cooperation Becomes Rational

Walter's calculation revealed a stark conclusion: betrayal dominates in his specific situation. But this raises a deeper question: are there *any* circumstances where cooperation becomes the rational choice in a prisoner's dilemma?

Let's step back from Walter's specific numbers and examine how this logic applies to any prisoner's dilemma. Game theorists use a standard notation to describe these situations:

- **T** = Temptation payoff (what you get for defecting when your partner cooperates)
- **R** = Reward for mutual cooperation (what both get when both cooperate)  
- **P** = Punishment for mutual defection (what both get when both defect)
- **S** = Sucker's payoff (what you get for cooperating when your partner defects)

In Walter's case: T = 0 years (immunity), R = 3 years, P = 5 years, S = 15 years.

For any situation to be a true prisoner's dilemma, we need T < R < P and S is the worst outcome. Using this general framework, let's rewrite Walter's expected value calculation:

**Expected sentence when cooperating:**

$$E[\\text{Cooperate}] = R(1-p) + Sp = R + (S-R)p$$

**Expected sentence when defecting:**  
$$E[\\text{Defect}] = T(1-p) + Pp = T + (P-T)p$$

For cooperation to be rational, we'd need: 

$$
E[\\text{Cooperate}] < E[\\text{Defect}]
$$

This gives us the condition (where we assume T=0 for simplicity):

$$
\\begin{align*}
R + (S-R)p &< Pp \\\\
R &< (R+P-S)p \\\\
p &> \\frac{R}{R+P-S}
\\end{align*}
$$

We can directly see that this equation only makes sense if S < R+P, as we would be dealing with negative probabilities otherwise. This replicates the situation
we encountered previously and hence confirms our earlier conclusion that Walter should betray Jesse.

But notice what happens if we change the payoffs. We know that $p<1$, which directly implies that cooperation becomes a viable option for $S < P$. The condition above
tells us exactly when cooperation becomes rational, and the interactive plot below lets you explore how different scenarios affect this critical threshold. 
Try adjusting the payoff values to see how they change the probability at which cooperation becomes individually rational.

`}),i.jsx(use,{}),i.jsx(sa,{children:`

As you can see from experimenting with the plot, the condition for rational cooperation depends critically on the relationship between the payoffs. When the punishment for mutual defection becomes severe enough relative to being betrayed, cooperation can emerge as the individually rational choice.

**Real-World Applications:**

The mathematical analysis reveals something surprising: Walter should only cooperate if the punishment for mutual defection (P) exceeds the punishment for being betrayed while cooperating (S). In our scenario, mutual defection gives 5 years each, while being the "sucker" gives 15 years—so defection dominates.

But imagine if Walter and Jesse were part of a larger criminal organization. If both betray each other, they don't just get 5 years in prison—they 
also face execution by the organization for breaking the code of silence. Suddenly, mutual defection might carry a sentence equivalent to 20+ years (or death), while being betrayed only gets you the original 15 years.

This explains why organized crime groups, military units, and tight-knit communities develop strong codes of loyalty: they artificially raise the cost of mutual defection to make cooperation individually rational.

### The Single Game Conclusion

In our DEA interrogation room, Walter's rational analysis points to one conclusion: betray Jesse. 
The general mathematical framework confirms this isn't unique to Walter's situation—it's a fundamental feature of prisoner's dilemmas where the sucker's payoff is worse than mutual defection.

But Walter and Jesse don't just interact once—they're partners in a long-running operation. What happens when the same dilemma repeats over multiple "episodes"? This is where the mathematics becomes more hopeful, and where we can explore whether reputation, trust, and reciprocity can overcome the pull of individual rationality.

`}),i.jsx(sa,{children:`
## When Breaking Bad Becomes a Series: Repeated Interactions

Walter's rational analysis came to a depressing conclusion: in a single encounter, defection dominates. But this raises an important question: if everyone follows this logic, how does cooperation ever emerge in the real world?

### The Power of Repetition

The key insight is that repetition fundamentally changes the game. When Walter and Jesse know they'll face similar situations again, each decision carries weight beyond the immediate outcome. Future interactions create new incentives that can make cooperation rational even when it wouldn't be in a single encounter.

Consider Walter's strategic calculus now: "If I betray Jesse today, he'll remember that when we face our next crisis together. But if I stay loyal, maybe he'll reciprocate, and we'll both benefit in the long run." This forward-looking reasoning can make cooperation rational even when defection would be better in isolation.

The mathematical foundation is surprisingly simple: if both players value future payoffs enough (not discounting them too heavily), cooperative strategies can become Nash equilibria in repeated games. The exact threshold depends on the payoffs, but the principle holds broadly.

### Four Strategic Approaches

In repeated prisoner's dilemmas, players typically adopt consistent behavioral rules rather than making isolated decisions. Let's examine four fundamental strategies that capture different approaches to the cooperation-defection dilemma:

**1. Always Cooperate** (Season 1 Jesse approach)
- *Rule*: Stay loyal to your partner regardless of their past behavior
- *Logic*: Trust and loyalty should be unconditional
- *Risk*: Vulnerable to exploitation by defectors

**2. Always Defect** (Season 5 Walter approach)  
- *Rule*: Always prioritize self-interest, minimize your own sentence
- *Logic*: Others can't be trusted, so protect yourself first
- *Advantage*: Cannot be exploited, guarantees reasonable outcomes

**3. Tit-for-Tat** (Reciprocal relationship)
- *Rule*: Start by cooperating, then match whatever your partner did in the previous interaction
- *Logic*: Reward cooperation with cooperation, punish defection with defection
- *Balance*: Enables mutual benefit while deterring exploitation

**4. Random** (Unpredictable behavior)
- *Rule*: Make decisions based on emotions, circumstances, or chance
- *Logic*: Unpredictability might confuse opponents
- *Problem*: Cannot build trust or sustain beneficial patterns

### Interactive Strategy Exploration

These strategies aren't just theoretical—they reflect real behavioral patterns we see in ongoing relationships. Let's explore how they perform when Walter and Jesse face repeated crises:
      `}),i.jsx(mse,{}),i.jsx(sa,{children:`


The simulation reveals key insights about repeated interactions:

- **Always cooperating** works well with trustworthy partners but becomes costly against defectors
- **Always defecting** provides security but forecloses opportunities for mutual benefit  
- **Tit-for-tat** balances cooperation and protection: starts nice, retaliates against betrayal, and forgives when partners return to cooperation
- **Random strategies** perform poorly because they can't build the consistent patterns needed for trust

💡 **Key Insight**: There's no universally "best" strategy—success depends on what your opponent does.

### Systematic Strategy Comparison

To move beyond individual simulations, let's examine how these strategies perform when they face each other systematically. This approach mirrors the famous research by political scientist [Robert Axelrod](https://axelrod.readthedocs.io/en/fix-documentation/reference/description.html), who ran computer tournaments in the 1970s to identify the most successful strategies in repeated prisoner's dilemmas.

Axelrod's key finding was that "nice" strategies (those that never defect first) often outperformed "nasty" strategies, but only when the population included enough other cooperative players. The winning strategy in his tournament was tit-for-tat—exactly the reciprocal approach we've been examining.

Let's run our own tournament to see how the Breaking Bad strategies fare against each other:
      `}),i.jsx(fse,{}),i.jsx(sa,{children:`

### Interpreting the Tournament Results

The tournament results reveal a crucial insight about repeated interactions: **the dominance of defection in single games doesn't necessarily carry over to repeated games**. Here's what the data typically shows:

**When Strategies Face Each Other:**
- **Tit-for-Tat vs. Always Cooperate**: Mutual cooperation emerges, both players benefit
- **Always Defect vs. Always Cooperate**: Defection exploits cooperation, creating large payoff differences  
- **Tit-for-Tat vs. Always Defect**: Initial cooperation is punished, leading to mutual defection
- **Random vs. Any Strategy**: Unpredictability prevents stable cooperation patterns

**Key Findings from Game Theory Research:**
1. **Nice strategies** (never defect first) can outperform nasty ones when there are enough cooperative players
2. **Retaliatory strategies** (punish defection) prevent exploitation better than unconditional cooperation
3. **Forgiving strategies** (return to cooperation after punishment) enable recovery from conflicts
4. **Clear strategies** (predictable rules) build trust better than complex or random approaches

This connects directly to Robert Axelrod's famous finding: tit-for-tat succeeded because it was nice, retaliatory, forgiving, and clear. It could cooperate with other cooperative strategies while defending against exploitative ones.

## Conclusion: What Walter and Jesse Taught Us

Walter and Jesse's predicament in that DEA interrogation room captures something profound about human cooperation. In a single interaction, both would be better off if they could trust each other to stay loyal (3 years each vs. 5 years each), yet individual rationality pushes them toward mutual betrayal (5 years each).

But as we've seen, repetition changes everything. When the same players expect to face similar situations again, strategies like tit-for-tat can sustain cooperation by making betrayal costly in the long run. The prospect of future interactions makes present cooperation rational.

However, our analysis also reveals why cooperation remains fragile. Always-defect strategies are surprisingly robust—they can't be exploited, even if they forgo mutual benefits. This explains why selfish behavior persists even in repeated interactions, and why building cooperative institutions requires careful design.

**This Walter-Jesse dynamic isn't unique to criminal partnerships**—similar patterns appear throughout society whenever individual incentives conflict with group welfare:

- **Team Projects**: Each member faces the repeated choice between contributing effort or free-riding on others' work. Successful teams develop tit-for-tat norms: contribute when others do, withdraw effort when others slack.

- **Neighborhood Maintenance**: Each homeowner decides whether to maintain their property, knowing it affects everyone's property values. Communities with strong reciprocal norms (contribute to neighborhood appearance and receive social approval) maintain higher standards.

- **Climate Action**: Nations face repeated decisions about emissions, with each country's choices affecting all others. Successful climate agreements attempt to create tit-for-tat dynamics through monitoring and graduated sanctions.

- **International Trade**: Countries must repeatedly decide whether to honor agreements or pursue short-term advantages. Trade relationships prosper when nations adopt reciprocal strategies—cooperation for cooperation, retaliation for cheating.

The mathematical insight is that **cooperation can emerge from purely self-interested behavior when interactions repeat and players value future outcomes**. We don't need to change human nature—we need to create institutional structures that make cooperation rational for self-interested individuals.

This brings us full circle to the Nobel Prize research that started our exploration. When institutions create repeated-game dynamics with clear rules, predictable enforcement, and expectations of ongoing interaction, even selfish individuals find cooperation profitable. When institutions fail to create these conditions, societies can become trapped in cycles of mistrust and mutual defection—exactly what we see in countries with weak governance and extractive institutions.
      `})]}),gse={title:"The Prisoner's Dilemma",publishing_date:"2025-06-25",tokenID:30,category:"others",description:"I explore the Prisoner's Dilemma through interactive game theory simulations. Discover strategic decision-making, Nash equilibrium, and how cooperation emerges in competition."},Qv=Object.freeze(Object.defineProperty({__proto__:null,default:pse,meta:gse},Symbol.toStringTag,{value:"Module"})),xse={publishing_date:"2025-10-16",title:"Quantum Smart Contracts II - What can we learn from NFTs for quantum computing with smart contracts ?",category:"quantum",secondaryCategory:"blockchain",description:"Can blockchain solve quantum computing's access problem? I tested the architecture with AI NFTs—here's what worked, what didn't, and what's still unsolved.",tokenID:130};function Kv(t){const e={a:"a",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In a ",i.jsx(e.a,{href:"/blog/17",children:"recent blog post"}),", I laid out some basic ideas on how smart contracts could be used to democratize access to quantum computing resources. However, this previous post only laid out the basic ideas and did not go into too many details on the implementation. In this post, I will follow up on this topic and detail what I learned up to here, especially what works and what does not work for the moment. In the next post, I will then try to connect it all and lay out a realistic implementation plan of smart contracts in the context of quantum computing."]}),`
`,i.jsx(e.h2,{children:"On the similarities between NFT generation and quantum computing"}),`
`,i.jsx(e.p,{children:"In this first section, I want to discuss why I decided that NFT generation is a good training ground for the more complex problem of smart contracts for quantum computing. The quantum computing workflow can be summarized as follows:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Write some instructions, i.e. some json."}),`
`,i.jsx(e.li,{children:"Send the instructions to some super fancy machine you do not understand, i.e. a quantum computer."}),`
`,i.jsx(e.li,{children:"Get back the result that you do not want to share with anyone but that you also do not understand in a lot of cases."}),`
`]}),`
`,i.jsx(e.p,{children:"This workflow is actually not too far away from the workflow of generating NFTs with the help of AI models. The NFT generation workflow can be summarized as follows:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Write some instructions, i.e. some text prompt into some json."}),`
`,i.jsx(e.li,{children:"Send the instructions to some super fancy machine you do not understand, i.e. an AI model."}),`
`,i.jsx(e.li,{children:"Get back the result that you also do not understand in a lot of cases."}),`
`]}),`
`,i.jsx(e.p,{children:`So you might see that the workflows are quite similar in that they send instructions
to some remote machine, you need to pay for the service, and you get back a result
that you do not understand, i.e. that is hard (impossible?) to verify.`}),`
`,i.jsx(e.p,{children:"Given this similarity isn't just theoretical—I've been testing it in practice over the last 10 months:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"January:"})," Built AI image generator (",i.jsx(e.a,{href:"/blog/6",children:"blog 6"}),")"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"April:"})," Added crypto payments + NFT minting (",i.jsx(e.a,{href:"/blog/9",children:"blog 9"}),")"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"October:"})," Realized this architecture could democratize quantum computing (",i.jsx(e.a,{href:"/blog/17",children:"blog 17"}),")"]}),`
`]}),`
`,i.jsx(e.p,{children:"This post connects the dots: What did I learn from AI that applies to quantum computing?"}),`
`,i.jsx(e.h2,{children:"Learning 1: NFTs are great for this use case"}),`
`,i.jsxs(e.p,{children:[`NFTs are an excellent way to implement this kind of ideas. What does this mean for generative AI and quantum computing? Let me illustrate with
a concrete example from my AI image work (`,i.jsx(e.a,{href:"/blog/9",children:"blog 9"}),")."]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Example scenario - AI image generation:"})}),`
`,i.jsx(e.p,{children:'When Alice generates an AI image with the prompt "quantum computer in a forest":'}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"She pays 10¢ and receives an NFT with a unique identifier"}),`
`,i.jsx(e.li,{children:"The NFT contains: prompt, timestamp, model version, image URL link"}),`
`,i.jsx(e.li,{children:"Alice can prove she owns this specific generation (unlike with Midjourney)"}),`
`,i.jsx(e.li,{children:"She can sell/transfer the NFT on OpenSea"}),`
`,i.jsx(e.li,{children:"All metadata is permanent and verifiable on-chain"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Translated to quantum computing:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Bob submits a quantum circuit and pays via smart contract"}),`
`,i.jsx(e.li,{children:"He gets an NFT with unique identifier and reference to the encrypted results"}),`
`,i.jsx(e.li,{children:"The NFT proves Bob ran this computation at this time"}),`
`,i.jsx(e.li,{children:"No centralized database needed, no account registration"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Why NFTs work well:"})}),`
`,i.jsx(e.p,{children:`NFTs provide clear ownership for the instructions. They are standardized (ERC-721),
easy to implement, and super flexible based on JSON files. The tech stack behind them
is well-developed. You can store them on S3 or IPFS and encrypt them if needed. All
of this makes them an ideal fit for both AI and quantum computing results.`}),`
`,i.jsx(e.h2,{children:"Learning 2: Blockchain payments are remarkably cheap by now"}),`
`,i.jsxs(e.p,{children:["When I started to work on this topic, I was a bit worried about the costs of using the blockchain with transactions on ETH itself that could easily cost several dollars. However, after working through some of the details, I realized that the costs are remarkably low by now if you use layer 2 solutions like ",i.jsx(e.a,{href:"https://www.optimism.io",children:"Optimism"}),'. The costs were so low that I could implement small support buttons of the style "buy me a coffee" on my website or generate images. Together with ',i.jsx(e.a,{href:"/blog/16/",children:"some merkle tree techniques"}),", I could even push it further to make it viable for calls that cost less than a cent."]}),`
`,i.jsx(e.p,{children:"As of October 2025, here's what a typical image generation costs:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"AI computation:"})," 5-7¢ depending on provider (BFL: 6¢, Ionos: 7¢, DeepInfra: 5¢)"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Blockchain transaction:"})," ~1¢ (Optimism, Base) vs $2+ (Ethereum mainnet)"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Service margin:"})," 0-3¢"]}),`
`]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Total:"}),` ~10¢ per image with <1¢ in blockchain costs. For quantum computing, the
same Layer-2 infrastructure means payment costs are essentially a solved problem.`]}),`
`,i.jsx(e.h2,{children:"Learning 3: Connections to normal APIs require custom oracles"}),`
`,i.jsx(e.p,{children:'I think that one of the strangest thing with the block chain is the connection to traditional APIs. It became clear to me that it is really straight forward to make transactions there, this is what it meant for. However, the blockchain lacks concepts of time or "calling somewhere else". So you use "oracles" to make this work. Think of oracles as the translator between two worlds:'}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Blockchain:"})," Can handle payments and store data, but can't call external APIs or wait for responses"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Traditional APIs:"})," Can run AI models or quantum computers, but don't understand blockchain"]}),`
`]}),`
`,i.jsx(e.p,{children:"An oracle is a server that:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:'Watches the blockchain for events (e.g., "user just paid for an image")'}),`
`,i.jsx(e.li,{children:"Calls the external API (e.g., Stable Diffusion takes 30 seconds)"}),`
`,i.jsx(e.li,{children:"Brings the result back to update the blockchain (e.g., stores image URL in NFT)"}),`
`]}),`
`,i.jsxs(e.p,{children:["Initially (as mentioned in ",i.jsx(e.a,{href:"/blog/6",children:"blog post 6"}),"), I thought ",i.jsx(e.a,{href:"https://docs.chain.link/chainlink-functions",children:"Chainlink Functions"})," looked promising. However, after testing, I discovered two dealbreakers:"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"The 3¢/request overhead is substantial when AI generation itself costs only 7¢"}),`
`,i.jsx(e.li,{children:"Chainlink Functions require APIs to respond within 9 seconds, but AI image generation takes 30+ seconds"}),`
`]}),`
`,i.jsx(e.p,{children:"This led me to implement a custom oracle instead. While blockchain transactions are trustless, my oracle is centralized—I control it. Users must trust that I'll execute requests honestly. This is a pragmatic solution for now, but it's the weakest link in the system. It actually raises a deeper question: how do we verify that the oracles are doing the work honestly?"}),`
`,i.jsx(e.h2,{children:"Learning 4: Make random systems fully trustless is hard"}),`
`,i.jsx(e.p,{children:"Achieving true trustlessness is the toughest challenge I encountered."}),`
`,i.jsx(e.p,{children:"Ideally, democratizing quantum computing means:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"For users:"})," Anyone can access the service (just needs a wallet)"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"For providers:"})," Anyone can offer quantum computing resources (just runs an oracle)"]}),`
`]}),`
`,i.jsx(e.p,{children:"But here's the problem: You need to have some way to verify that the results are correct. But in quantum and in generative AI the results are probabilistic. So how do you verify that the provider is not just tricking you? I genuinely do not know the answer and think that this could be a fun research problem."}),`
`,i.jsx(e.p,{children:'However, for the moment, I could not find a better solution than whitelisting "reliable" oracles that provide the service. This is clearly the centralization bottleneck, as new providers have to be whitelisted and I have no automated algorithm to detect cheating yet.'}),`
`,i.jsx(e.h2,{children:"Conclusion and outlook"}),`
`,i.jsx(e.p,{children:"This brings me to the end of this learning journey. Taken everything together, I do not see anything that would prevent the implementation of a system which enables smart contract-based quantum computing."}),`
`,i.jsx(e.p,{children:`Here's where I stand — comparing traditional cloud, my working AI prototype, and the
quantum computing goal:`}),`
`,i.jsxs(e.table,{children:[i.jsx(e.thead,{children:i.jsxs(e.tr,{children:[i.jsx(e.th,{children:"Aspect"}),i.jsx(e.th,{children:"Todays centralized cloud"}),i.jsx(e.th,{children:"Proven with AI NFTs"}),i.jsx(e.th,{children:"Future Quantum Goal"})]})}),i.jsxs(e.tbody,{children:[i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"Payment"})}),i.jsx(e.td,{children:"Accounts, subscriptions"}),i.jsx(e.td,{children:"Smart contract (10¢)"}),i.jsx(e.td,{children:"Smart contract (competitive)"})]}),i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"Ownership"})}),i.jsx(e.td,{children:"Provider database"}),i.jsx(e.td,{children:"NFT on blockchain"}),i.jsx(e.td,{children:"NFT on blockchain"})]}),i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"Privacy"})}),i.jsx(e.td,{children:"Trust required"}),i.jsx(e.td,{children:"Open"}),i.jsx(e.td,{children:"Encrypted on IPFS 🔮"})]}),i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"User Access"})}),i.jsx(e.td,{children:"Registration needed"}),i.jsx(e.td,{children:"Permissionless"}),i.jsx(e.td,{children:"Permissionless"})]}),i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"Verification"})}),i.jsx(e.td,{children:"Trust provider"}),i.jsx(e.td,{children:"Trust oracle ⚠️"}),i.jsx(e.td,{children:"Decentralized oracles"})]}),i.jsxs(e.tr,{children:[i.jsx(e.td,{children:i.jsx(e.strong,{children:"Provider choice"})}),i.jsx(e.td,{children:"Few vendors"}),i.jsx(e.td,{children:"Single (prototype) ⚠️"}),i.jsx(e.td,{children:"Open marketplace"})]})]})]}),`
`,i.jsx(e.p,{children:"My key takeaways are:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["✅ ",i.jsx(e.strong,{children:"Payment, ownership, privacy are solved"})," - my AI implementation proves it works on Layer-2 for <1¢ transaction costs"]}),`
`,i.jsxs(e.li,{children:["⚠️ ",i.jsx(e.strong,{children:"Verification remains the challenge"})," - both AI and quantum results are hard to verify trustlessly; for now, whitelisting and economic staking are the pragmatic approaches"]}),`
`,i.jsxs(e.li,{children:["🔮 ",i.jsx(e.strong,{children:"Path forward"})," - transition from centralized oracle (my server) to decentralized oracle network (multiple quantum providers)"]}),`
`]}),`
`,i.jsx(e.h3,{children:"Where I would be grateful for input"}),`
`,i.jsx(e.p,{children:"If you have experiences, ideas or suggestions—especially on trustless verification or oracle networks—feel free to write down ideas here, exchange and get active. The more people that care, the more real this becomes. Most urgently, I need feedback on the following topics:"}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"From quantum computing providers/researchers:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Would you run an oracle to offer your quantum computer via smart contracts?"}),`
`,i.jsx(e.li,{children:"What verification methods could prove computation correctness?"}),`
`,i.jsx(e.li,{children:"How important is privacy (encrypted results) for your use cases?"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"From blockchain developers:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Do you know oracle solutions besides Chainlink for 30+ second operations?"}),`
`,i.jsx(e.li,{children:"Any ideas on trustless verification of AI/quantum results?"}),`
`,i.jsx(e.li,{children:'What are your experiences with similar "blockchain meets external API" projects?'}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"From potential users:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Would you pay via crypto to access quantum computing anonymously?"}),`
`,i.jsx(e.li,{children:"Is NFT-based result storage valuable, or just gimmicky?"}),`
`,i.jsx(e.li,{children:"What would make you choose this over AWS Braket?"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"How to contribute:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Comment on this post"}),`
`,i.jsxs(e.li,{children:["Open GitHub issues at ",i.jsx(e.a,{href:"https://github.com/fretchen/fretchen.github.io",children:"this repo"})]}),`
`]}),`
`,i.jsx(e.p,{children:"So in the next blog post, I will lay out the technical details of how the smart contract architecture could be implemented for quantum computing."})]})}function yse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Kv,{...t})}):Kv(t)}const Zv=Object.freeze(Object.defineProperty({__proto__:null,default:yse,frontmatter:xse},Symbol.toStringTag,{value:"Module"})),bse={publishing_date:"2025-10-24",title:"Making My Site Discoverable - SEO, Webmentions, and a Traffic Spike",category:"webdev",secondaryCategory:"ai",tokenID:131,description:"I overhauled my site's SEO with Schema.org markup and replaced Giscus comments with Webmentions. The timing coincided with a surprising 200% traffic increase. Here's what I learned about making content discoverable."};function ej(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["After a few months of content creation, I had to do something painful, yet necessary: improve the discoverability of this website. The main motivation was addressing a fundamental problem: despite all the educational content on ",i.jsx(e.a,{href:"/quantum",children:"quantum physics"})," and blog posts about ",i.jsx(e.a,{href:"/blog/16/",children:"AI"})," and blockchain, the site did not really gain any traction. So, I had to do something about it. And as I started to look into the topic, I realized that my site was largely invisible to search engines and lacked meaningful engagement mechanisms."]}),`
`,i.jsx(e.p,{children:"Interestingly it would seem that these changes really changed something, as they coincided with a notable increase in visitor count from 103 in September to more than 300 by the time of writing this post - a threefold increase. Certainly, a good sign of success for a modest content site as I will explain again later."}),`
`,i.jsx(e.h2,{children:"The Initial Problem"}),`
`,i.jsx(e.p,{children:"Before I started, the site had three major problems:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Absence of structured data"})," - Search engines received no semantic information about content types"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"GitHub-centric comment system"})," - Giscus required GitHub authentication, something that proved to be a major hurdle for general audiences"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Isolated discussion model"})," - Comments existed solely within GitHub's ecosystem, preventing federation with broader social platforms"]}),`
`]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.a,{href:"https://search.google.com/test/rich-results",children:"Search Console data"})," confirmed these issues as none of the content was properly indexed: quantum physics lectures were not categorized as educational content, and blog posts displayed no rich snippets in search results. The content existed but remained effectively invisible to discovery mechanisms."]}),`
`,i.jsx(e.h2,{children:"Implementation Step 1: Metadata Foundation - Descriptions and Categories"}),`
`,i.jsx(e.p,{children:"In the first phase, I focused on establishing a metadata foundation that would support all subsequent SEO improvements. This required manual cleaning rather than automated solutions."}),`
`,i.jsx(e.h3,{children:"Manual Description Generation"}),`
`,i.jsxs(e.p,{children:["Each of the ",i.jsx(e.a,{href:"/blog/",children:"18 blog posts"})," required a custom ",i.jsx(e.code,{children:"description"})," field in its frontmatter metadata. Take this example from the ",i.jsx(e.a,{href:"/blog/0",children:"hello world blog post"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-yaml",children:`---
publishing_date: 2024-12-02
title: Hello World
tokenID: 2
category: "others"
description: "I welcome you to my personal blog exploring technology, blockchain, and creative coding. Expect insights on modern web development, decentralized systems, and innovative digital experiences."
---
`})}),`
`,i.jsx(e.p,{children:"These descriptions serve multiple purposes across the site architecture:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Search engine result pages"})," - The preview text displayed beneath page titles"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Social media previews"})," - ",i.jsx(e.a,{href:"https://ogp.me/",children:"Open Graph"})," description metadata for link sharing"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Schema.org structured data"})," - Feeds into BlogPosting markup"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Site navigation"})," - Displayed on blog index pages for content scanning"]}),`
`]}),`
`,i.jsx(e.p,{children:"The manual approach was necessary because automated content extraction (first paragraph or random excerpts) produces inconsistent and often non-representative summaries. Controlling the description ensures the intended message reaches potential visitors."}),`
`,i.jsx(e.h3,{children:"Categorization"}),`
`,i.jsx(e.p,{children:"I organized content into five categories to facilitate both user navigation and search engine understanding:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"blockchain"}),": Smart Contracts, NFTs, Decentralization, Ethereum"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"ai"}),": Image Generation, LLMs, AI Applications, Neural Networks"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"quantum"}),": Quantum Physics, AMO, Quantum Machine Learning, Hardware"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"webdev"}),": React, Vike, TypeScript, Static Site Generators, Tools"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"others"}),": Game Theory, Governance, Economics, Political Systems"]}),`
`]}),`
`,i.jsx(e.p,{children:"Each post specifies a primary category with optional secondary classification. This structure provides:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Filtering capabilities on the blog index"}),`
`,i.jsx(e.li,{children:"Signals to search engines about content specialization"}),`
`,i.jsx(e.li,{children:"Improved content organization and navigation"}),`
`,i.jsx(e.li,{children:"Visual categorization via colored labels"}),`
`]}),`
`,i.jsx(e.p,{children:"This helps search algorithms and users as they both reward consistent, focused coverage of specific topics."}),`
`,i.jsx(e.h2,{children:"Implementation Step 2: Schema.org Structured Data"}),`
`,i.jsxs(e.p,{children:["With metadata foundations established, the next phase involved implementing Schema.org structured data markup. ",i.jsx(e.a,{href:"https://schema.org/",children:"Schema.org"})," provides a standardized vocabulary that enables search engines to parse semantic meaning from web content rather than relying on heuristic analysis."]}),`
`,i.jsx(e.p,{children:"The implementation utilized TypeScript utility functions to generate JSON-LD structured data:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-typescript",children:`// utils/schemaOrg.ts
export function generateBlogPostingSchema(blog: BlogPost, url: string) {
  return {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    headline: blog.title,
    description: blog.description || "",
    datePublished: blog.publishing_date,
    author: {
      "@type": "Person",
      name: "fretchen",
      url: "https://www.fretchen.eu",
    },
    publisher: {
      "@type": "Person",
      name: "fretchen",
      url: "https://www.fretchen.eu",
    },
    mainEntityOfPage: {
      "@type": "WebPage",
      "@id": url,
    },
  };
}
`})}),`
`,i.jsx(e.p,{children:"I created utility functions for different schema types:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"BlogPosting"})," - Individual blog posts (incorporating the manually-written ",i.jsx(e.code,{children:"description"})," field)"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"CollectionPage"})," - Blog index listing with hierarchical structure"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"BreadcrumbList"})," - Navigation hierarchy for site architecture"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"WebSite"})," - Homepage identity and metadata"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Person"})," - Author attribution and identity"]}),`
`]}),`
`,i.jsxs(e.p,{children:["Quantum physics lectures received analogous treatment with appropriate educational content markup. This enables search queries for specific topics (e.g., ",i.jsx(e.a,{href:"/quantum/amo/2/",children:'"Rabi oscillations lecture"'})," or ",i.jsx(e.a,{href:"/quantum/amo/4/",children:'"quantum harmonic oscillator"'}),") to surface these pages with proper semantic context."]}),`
`,i.jsx(e.h3,{children:"Complementary SEO Components"}),`
`,i.jsx(e.p,{children:"Beyond Schema.org, several additional components complete the SEO implementation:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Open Graph tags"})," - Controls social media preview rendering when links are shared"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Canonical URLs"})," - Prevents duplicate content penalties by declaring preferred URLs"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Dynamic title generation"})," - Implemented via Vike's ",i.jsx(e.code,{children:"+title.ts"})," file-based routing convention"]}),`
`]}),`
`,i.jsxs(e.p,{children:['The architecture follows a "write once, use everywhere" principle: the ',i.jsx(e.code,{children:"description"})," field propagates to Schema.org markup, meta description tags, and Open Graph metadata automatically."]}),`
`,i.jsx(e.h2,{children:"Implementation Step 3: Webmention Integration"}),`
`,i.jsxs(e.p,{children:["The third major change involved replacing the GitHub-based comment system (Giscus) with ",i.jsx(e.a,{href:"https://www.w3.org/TR/webmention/",children:"Webmention"})," — a federated protocol for aggregating social interactions across decentralized platforms."]}),`
`,i.jsx(e.h3,{children:"The Webmention Protocol"}),`
`,i.jsxs(e.p,{children:["Webmentions operate on a fundamentally different model than centralized comment systems as nicely explained in ",i.jsx(e.a,{href:"https://janmonschke.com/adding-webmentions-to-your-static-blog/",children:"this blogpost"}),". The workflow functions as follows:"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"A user shares a blog post URL on Bluesky, Mastodon, or Twitter"}),`
`,i.jsx(e.li,{children:"Webmention.io detects the link mention via protocol-level monitoring"}),`
`,i.jsx(e.li,{children:"The mention appears on the original post within 5-10 minutes"}),`
`,i.jsx(e.li,{children:"Bidirectional engagement occurs on the user's preferred platform"}),`
`]}),`
`,i.jsx(e.p,{children:"This approach eliminates several friction points inherent to traditional comment systems:"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Authentication barrier removal"}),": Users interact via platforms they already use, avoiding account creation"]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Platform federation"}),": Works natively with decentralized protocols (ActivityPub for Mastodon, AT Protocol for Bluesky)"]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Organic engagement"}),": Comments exist where users naturally discuss content rather than requiring migration to a dedicated comment section"]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Aggregation across platforms"}),": A single post can display reactions from multiple social networks simultaneously"]}),`
`,i.jsx(e.p,{children:`The metadata line at each post's header now displays aggregated reaction counts (e.g., "💬 8 reactions") spanning all federated platforms. This provides engagement metrics while maintaining the decentralized interaction model.`}),`
`,i.jsx(e.h2,{children:"Implementation Step 4: Build System Optimization"}),`
`,i.jsx(e.p,{children:"Concurrent with SEO improvements, the build system underwent significant refactoring to address performance bottlenecks and reduce technical debt."}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Removed components:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["Server-side LaTeX rendering via ",i.jsx(e.code,{children:"rehype-katex"})]}),`
`,i.jsxs(e.li,{children:["Static JSON generation scripts (",i.jsx(e.code,{children:"preBuild.ts"}),", ",i.jsx(e.code,{children:"getBlogs.ts"}),")"]}),`
`,i.jsxs(e.li,{children:["Markdown cleanup utilities (",i.jsx(e.code,{children:"cleanMd.ts"}),")"]}),`
`,i.jsx(e.li,{children:"12 obsolete dependencies"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Results:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Build time reduction: 20s → 8.5s (57.5% improvement)"}),`
`,i.jsx(e.li,{children:"Hot module reloading functionality restored"}),`
`,i.jsx(e.li,{children:"Codebase simplification: ~500 lines removed"}),`
`]}),`
`,i.jsxs(e.p,{children:["The LaTeX rendering change proved particularly consequential. Quantum physics lectures contain hundreds of mathematical equations, and server-side KaTeX compilation was adding 20+ seconds to each build cycle. Migrating to client-side rendering via ",i.jsx(e.code,{children:"remark-math"})," resolved this performance bottleneck while maintaining equation rendering quality."]}),`
`,i.jsx(e.h3,{children:"Framework-Specific Implementation Details"}),`
`,i.jsx(e.p,{children:"The Vike framework's file-based routing conventions facilitated clean SEO implementation through convention-based files:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{children:"+Head.tsx"})," - Custom head content containing Schema.org JSON-LD"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{children:"+description.ts"})," - Meta description export per route"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{children:"+title.ts"})," - Dynamic title generation per route"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{children:"+data.ts"})," - Server-side data fetching logic"]}),`
`]}),`
`,i.jsx(e.p,{children:"This pattern maintains separation of concerns, keeping SEO-related code isolated per route rather than scattered across component hierarchies."}),`
`,i.jsx(e.h2,{children:"Traffic Analysis and Correlation"}),`
`,i.jsx(e.p,{children:"The implementation timeline coincided with a measurable traffic increase:"}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Metrics:"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Visitor count: 103 (September) → over 300 (by end of October)"}),`
`,i.jsx(e.li,{children:"Percentage increase: +200%"}),`
`,i.jsx(e.li,{children:"Build time: 20s → 8.5s"}),`
`,i.jsx(e.li,{children:"Code reduction: ~500 lines"}),`
`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Implementation timeline:"})}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"October 4-7: Descriptions, categories, and Schema.org markup deployed"}),`
`,i.jsx(e.li,{children:"October 18: Webmention integration replaced Giscus"}),`
`,i.jsx(e.li,{children:"October 21: Build system optimization and client-side LaTeX migration"}),`
`,i.jsx(e.li,{children:"Traffic increase observed throughout October"}),`
`]}),`
`,i.jsxs(e.p,{children:["While these are certainly encouraging correlations, I also published a number of new ",i.jsx(e.a,{href:"/blog/18/",children:"blog posts"})," on quantum physics and blockchain, which may have contributed to the traffic increase. So I will have to see how things evolve over the next months."]}),`
`,i.jsx(e.h2,{children:"Key Findings and Recommendations"}),`
`,i.jsx(e.p,{children:"I would summarize my main findings in the following way:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Manual metadata investment yields compound returns"}),": Writing custom descriptions for each post required significant manual effort, but this metadata propagates across multiple systems (search results, social previews, structured data). The initial time investment creates ongoing value."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Categorical organization signals knowledge"}),": Systematic content categorization demonstrates subject-matter expertise to search algorithms. For sites covering multiple disciplines (quantum physics, blockchain, web development), clear categorization helps establish authority within each vertical."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Schema.org implementation complexity remains manageable"}),": Despite appearing technically involved, Schema.org markup requires approximately 100 lines of TypeScript utility functions. The return on this modest investment appears substantial, though quantifying exact impact remains challenging."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Federated engagement models reduce friction"}),": Webmention integration demonstrates that decentralized engagement can provide better user experience than centralized systems. Removing authentication barriers and meeting users on their preferred platforms appears to increase actual engagement."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Build system optimization enables sustainable development"}),": The 57.5% build time reduction (20s → 8.5s) restored hot module reloading functionality, making iterative development feasible. For content sites with hundreds of mathematical equations, client-side rendering may be preferable to server-side compilation."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Attribution requires longer observation periods"}),": The correlation between SEO improvements and traffic increases is suggestive but not conclusive. Multiple months of data collection with traffic source analysis will be necessary for meaningful causal assessment."]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"Future Work"}),`
`,i.jsx(e.p,{children:"The implementation provides a foundation for ongoing optimization:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Content expansion with maintained SEO standards"}),`
`,i.jsx(e.li,{children:"Internal linking strategy development"}),`
`,i.jsx(e.li,{children:"Sitemap.xml generation for crawler optimization"}),`
`,i.jsx(e.li,{children:"Continued Search Console monitoring for performance tracking"}),`
`]}),`
`,i.jsx(e.p,{children:"The webmention integration demonstrates that federated, decentralized engagement systems can function effectively while reducing barriers to participation. This aligns with the broader philosophy of building on open protocols rather than proprietary platforms."}),`
`,i.jsx(e.p,{children:"For others implementing similar systems: manual metadata investment (descriptions, categories) appears to be a prerequisite for effective structured data implementation. Schema.org markup amplifies existing content quality but cannot compensate for absent foundational metadata."})]})}function wse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(ej,{...t})}):ej(t)}const tj=Object.freeze(Object.defineProperty({__proto__:null,default:wse,frontmatter:bse},Symbol.toStringTag,{value:"Module"})),_se={publishing_date:"2025-10-02",title:"Quantum Smart Contracts I - Can we decentralize access to quantum computing with smart contracts ?",category:"quantum",secondaryCategory:"blockchain",description:"I explore how smart contracts can democratize access to quantum computing resources, enabling privacy-preserving decentralized payments and encrypted NFT results.",tokenID:123};function nj(t){const e={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"In this blog post, I want to dive into some ideas that have been going through my mind for a while now. I kept wondering, if it is possible to democratize access to quantum computing resources with the help of decentralized technologies, i.e. the blockchain. This question actually motivated a substantial amount of my work on the blockchain in the last few months and I will try to lay out my thoughts and learnings here."}),`
`,i.jsx(e.p,{children:"I think that this blog post will be the first one of roughly three posts. In this first one, I will lay out the context and the motivation. In the second one, I will try to connect the ideas to the learning that I have had so far with this website. In the third and last one, I will try to lay out some of the technical details of how the implementation could look like."}),`
`,i.jsx(e.p,{children:"But now let's get started on this topic."}),`
`,i.jsx(e.h2,{children:"The bold vision"}),`
`,i.jsx(e.p,{children:"Quantum computing is an upcoming computing technology with the potential to reshape the software and hardware industry. And due to the complexity of building the machines it is a cloud first technology at this stage. Within this context, it would be great to unlock this power to as many stakeholders as possible with decentralized technologies."}),`
`,i.jsx(e.h2,{children:"The point of this document"}),`
`,i.jsx(e.p,{children:"It is fun to work on tough problems. But it is only really fun once you get to share and think about them together with other collaborators and try to see how to solve it together. So these blog posts aremeant as a first piece that allows everyone that cares to shape some basic concepts and ideas and get this beyond the currently fuzzy ideas (maybe kill it, maybe make it a working reality)."}),`
`,i.jsxs(e.p,{children:["Accidentally ",i.jsx(e.a,{href:"https://www.wearedevelopers.com/magazine/how-to-create-dao-guide",children:"this blog post"})," also recommends to start out with a clear intent document etc before you get into more technical details."]}),`
`,i.jsx(e.h2,{children:"The problem that should be solved"}),`
`,i.jsxs(e.p,{children:["I already described the problem a bit ",i.jsx(e.a,{href:"https://alqor-ug.github.io/sqooler/v0.9/idea_payment/",children:"on this repo"}),", but for the sake of completeness I will try to summarize it again here. If people try to use quantum computers nowadays it goes a bit like this:"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Write some instructions, i.e. some json."}),`
`,i.jsx(e.li,{children:"Send the instructions to some super fancy machine you do not really understand, i.e. a quantum computer."}),`
`,i.jsx(e.li,{children:"Get back the result that you really do not want to share with anyone but that you also do not really understand in a lot of cases."}),`
`]}),`
`,i.jsxs(e.p,{children:["Quite frankly, almost no one cares on which machine the calculations are done. And how you can and should pay for the results is a bit of an open question but for the moment people go through good old web2 approaches like amazon ",i.jsx(e.a,{href:"https://aws.amazon.com/de/braket/",children:"braket"})," etc."]}),`
`,i.jsx(e.p,{children:"Taken together it might not take too much fantasy to think that it could be quite awesome to find a privacy conserving, decentral payment solution to this problem."}),`
`,i.jsx(e.h2,{children:"The fuzzy “smart contracts for quantum computing” idea"}),`
`,i.jsx(e.p,{children:"Beware, the following ideas are based on an embarrassingly poor understanding of blockchain technologies but they are too tempting to not be scribbled down. The main questions that I have been asking myself are:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Wouldn’t it be cool if the payment could be based on smart contracts ?"}),`
`,i.jsx(e.li,{children:"Wouldn’t it be possible to just send the instructions out to some “reliable” node and get back the result ?"}),`
`,i.jsx(e.li,{children:"Could the result be an encrypted NFT or something like that ?"}),`
`]}),`
`,i.jsx(e.p,{children:"Taken together it would seem that smart contracts could provide a really needed technological solution to a problem that is decentral and involves payments. So how to solve it ? I worked through some of the technicalities in a web2 world and did not see any real roadblocks for the moment. However, transitioning towards the block-chain is a very different beast. If you look through the website you will see that a lot of the blockchain + ai work actually implements solutions that are not too far away from this idea. This is what I will talk about in the next blog post."}),`
`,i.jsx(e.p,{children:"If you have experiences, ideas or suggestions, feel free to write down ideas here, exchange and get active. The more people that care are, the more real gets the idea of a functioning smart contract for quantum computing."})]})}function vse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(nj,{...t})}):nj(t)}const ij=Object.freeze(Object.defineProperty({__proto__:null,default:vse,frontmatter:_se},Symbol.toStringTag,{value:"Module"})),Zt=["Chief Kai","Chief Tala","Chief Sina"],Be={g0:.03,g1:.001,y0:.01,c0:.125,c_islands:[.125,.25,.75,1],s_init:100,nplayers:4},Qr={base_quota:.2,efficiency_bonus:.1,cooperation_bonus:.05},Ey=(t,e)=>Math.pow(Be.y0*t/e,2)/Be.nplayers,wl=t=>Math.pow(Be.g0/Be.y0*(1-Be.g1*t),2)/Be.nplayers,jse=()=>{const t=Math.floor(wl(Be.s_init)),e=Math.floor(Ey(Be.s_init,Be.c0));return{low_fishing:t,intensive_fishing:e}},yt=jse(),mu=(t,e)=>Be.y0*t*Math.sqrt(e),Sy=t=>Be.g0*(t-Be.g1*t*t),Tse=(t,e,n,a,r)=>{const o={aggressive:2.5,moderate:1,conservative:.4};let l,c=0;r!==void 0&&(c=(n-r)/r),n<.85*a||c<-.08?t===0?l="moderate":l="conservative":n>.98*a&&c>-.02?l="aggressive":l="moderate";const h=o[l];return{adjustedSustainableBoats:e*h,strategy:l,conservationFactor:h}},aj=(t,e,n,a=.1,r=.25)=>{let s;t<=1?s="efficiency":t>=2?s="hybrid":s="equal";const o=[];if(s==="equal")for(let l=0;l<e;l++)o.push(1/e);else if(s==="efficiency"){let l=0;for(let c=0;c<e;c++){const h=e-c-1,u=r+h*a*1.5;o.push(u),l+=u}for(let c=0;c<o.length;c++)o[c]=o[c]/l}else{let l=0;for(let c=0;c<e;c++){const h=e-c-1;let u=r+h*a*.7;c===t&&(u+=n),o.push(u),l+=u}for(let c=0;c<o.length;c++)o[c]=o[c]/l}return{quotaWeights:o,method:s}},rj=t=>{const e={progressive:.2,moderate:.15,conservative:.1};let n;return t>=2?n="progressive":t===0?n="conservative":n="moderate",{redistributionRate:e[n],policy:n}},kse=({scenario:t,setScenario:e,history:n})=>{const a={random:{name:"🏝️ Mixed Islands",description:`Some chiefs sustainable (~${yt.low_fishing} boats), others competitive (~${yt.intensive_fishing} boats)`},sustainable:{name:"🌊 Harmony Islands",description:`Chiefs here value long-term thinking (~${yt.low_fishing} boats each)`},aggressive:{name:"⚔️ Competition Islands",description:`Every chief fights for maximum catch (~${yt.intensive_fishing} boats each)`}},r=n.some(s=>s.moanaBoats!==null);return i.jsxs("div",{className:V({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[i.jsx("div",{className:V({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🌏 Neighboring Islands Culture"}),i.jsx("div",{className:V({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(a).map(([s,o])=>{const l=t===s,c=r;return i.jsxs("button",{onClick:()=>{c||e(s)},disabled:c,className:V({padding:"12px 16px",border:l?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:"8px",background:c?"#f3f4f6":l?"#eff6ff":"#fff",cursor:c?"not-allowed":"pointer",textAlign:"left",maxWidth:"200px",fontSize:"14px",opacity:c?.6:1,position:"relative"}),title:c?"Scenario locked during active game":"",children:[c&&l&&i.jsx("div",{className:V({position:"absolute",top:"4px",right:"6px",fontSize:"12px",color:"#6b7280"}),children:"🔒"}),i.jsx("div",{className:V({fontWeight:"600",marginBottom:"4px",color:c?"#9ca3af":"#111827"}),children:o.name}),i.jsx("div",{className:V({color:c?"#9ca3af":"#64748b",fontSize:"12px",lineHeight:"1.3"}),children:o.description})]},s)})}),i.jsxs("div",{className:V({marginTop:"16px"}),children:[i.jsxs("div",{className:V({fontSize:"14px",color:"#64748b",marginBottom:"8px",fontWeight:"500"}),children:["Active Scenario: ",a[t].name]}),r?i.jsx("div",{className:V({fontSize:"13px",color:"#9ca3af",fontStyle:"italic"}),children:'Scenario is locked during the game. Use "Play again" to change scenarios.'}):i.jsxs("div",{className:V({fontSize:"14px",color:"#64748b"}),children:["As Moana, you can choose to send ",yt.low_fishing,","," ",Math.floor((yt.low_fishing+yt.intensive_fishing)/2),", or"," ",yt.intensive_fishing," boats. What's your strategy?"]})]})]})},Ese=({round:t,gameOver:e,history:n,onBoatChoice:a})=>{const r=n[t-1],s=r.moanaBoats!==null;return i.jsxs("div",{className:V({display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginBottom:"16px"}),children:[i.jsx("div",{className:V({display:"flex",gap:"8px",marginBottom:"8px"}),children:[1,2,3].map(o=>i.jsx("div",{className:V({width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:"600",background:o<t?"#10b981":o===t?"#3b82f6":"#e5e7eb",color:o<t||o===t?"#fff":"#9ca3af"}),children:o<t?"✓":o},o))}),i.jsxs("div",{className:V({fontSize:"16px",textAlign:"center",marginBottom:"8px"}),children:[i.jsxs("div",{className:V({fontWeight:"600",marginBottom:"4px"}),children:["Round ",t," of 3 • Fish Stock: ",t===1?Be.s_init:n[t-2].fishAfter," 🐟"]}),i.jsx("div",{className:V({color:"#64748b",fontSize:"14px"}),children:"How many boats should Moana send out today?"})]}),!e&&!s&&i.jsxs("div",{className:V({display:"flex",gap:"12px",flexWrap:"wrap",justifyContent:"center"}),children:[i.jsxs("button",{onClick:()=>a(yt.low_fishing),className:V({padding:"10px 16px",border:"1px solid #10b981",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["🌊 ",yt.low_fishing," Boats (Sustainable)"]}),i.jsxs("button",{onClick:()=>a(Math.floor((yt.low_fishing+yt.intensive_fishing)/2)),className:V({padding:"10px 16px",border:"1px solid #f59e0b",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["⚖️ ",Math.floor((yt.low_fishing+yt.intensive_fishing)/2)," Boats (Moderate)"]}),i.jsxs("button",{onClick:()=>a(yt.intensive_fishing),className:V({padding:"10px 16px",border:"1px solid #ef4444",borderRadius:"6px",background:"#fff",color:"#222",cursor:"pointer",fontWeight:"500",fontSize:"14px"}),children:["⚡ ",yt.intensive_fishing," Boats (Intensive)"]})]}),!e&&s&&i.jsxs("div",{className:V({fontSize:"14px",color:"#64748b",textAlign:"center",marginTop:"4px"}),children:[i.jsxs("div",{className:V({marginBottom:"4px"}),children:[i.jsx("strong",{children:"Moana:"})," ",r.moanaBoats," boats → ",r.moanaFish," fish"]}),i.jsxs("div",{className:V({marginBottom:"4px"}),children:[i.jsx("strong",{children:"Other Chiefs:"})," ",r.otherBoats?.map((o,l)=>`${Zt[l]}: ${o} boats (${r.otherFish?.[l]} fish)`).join(", ")]}),i.jsxs("div",{className:V({marginBottom:"4px"}),children:[i.jsx("strong",{children:"Total:"})," ",r.totalBoats," boats caught ",r.totalCatch," fish"]}),r.regeneration&&r.regeneration>0&&i.jsxs("div",{className:V({color:"#10b981"}),children:["🌱 Ocean regenerated: +",r.regeneration," fish"]})]})]})},Sse=({history:t})=>{const e=t.reduce((r,s)=>r+(s.moanaFish??0),0),n=Zt.map((r,s)=>t.reduce((o,l)=>o+(l.otherFish&&l.otherFish[s]!==void 0?l.otherFish[s]:0),0));function a(r,s){if(r===null||s===null)return i.jsx("span",{children:"-"});const o=r<=yt.low_fishing+1,l=r>=yt.intensive_fishing-2;return i.jsxs("span",{style:{background:o?"#d1fae5":l?"#fef2f2":"#fef9c3",color:o?"#047857":l?"#dc2626":"#b45309",borderRadius:4,padding:"2px 6px",fontWeight:500,display:"inline-block",minWidth:40},title:`${r} boats → ${s} fish`,children:[r,"🛥️ → ",s,"🐟"]})}return i.jsx("div",{className:V({margin:"18px 0"}),children:i.jsx("div",{className:V({display:"flex",justifyContent:"center"}),children:i.jsxs("table",{className:V({borderCollapse:"collapse",fontSize:"14px",minWidth:"480px"}),children:[i.jsx("thead",{children:i.jsxs("tr",{className:V({background:"#bae6fd"}),children:[i.jsx("th",{className:V({padding:"6px 8px"}),children:"Round"}),i.jsx("th",{className:V({padding:"6px 8px"}),children:"Moana"}),Zt.map(r=>i.jsx("th",{className:V({padding:"6px 8px",fontSize:"12px"}),children:r.replace("Chief ","")},r)),i.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),i.jsxs("tbody",{children:[t.map((r,s)=>i.jsxs("tr",{style:{background:s%2===0?"#f8fafc":"#fff"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:r.round}),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:a(r.moanaBoats,r.moanaFish)}),Zt.map((o,l)=>i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:r.otherBoats&&r.otherFish&&r.otherBoats[l]!==void 0&&r.otherFish[l]!==void 0?a(r.otherBoats[l],r.otherFish[l]):"-"},l)),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:r.fishAfter!==null?`${r.fishAfter}🐟`:"-"})]},s)),i.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:"Total"}),i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[e,"🐟"]}),n.map((r,s)=>i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[r,"🐟"]},s)),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",color:"#64748b"},children:"–"})]})]})]})})})},Cse=({scenario:t,fishStock:e,moanaTotal:n,onReset:a})=>{const r={random:{name:"🏝️ Mixed Islands",color:"#f59e0b"},sustainable:{name:"🌊 Harmony Islands",color:"#10b981"},aggressive:{name:"⚔️ Competition Islands",color:"#ef4444"}},o=e>=80?{text:"Excellent! The ocean thrives.",color:"#10b981"}:e>=60?{text:"Good sustainability achieved.",color:"#f59e0b"}:e>=40?{text:"The ocean is stressed but surviving.",color:"#f59e0b"}:{text:"Critical! The ocean ecosystem is collapsing.",color:"#ef4444"};return i.jsxs("div",{style:{textAlign:"center",margin:"18px 0"},children:[i.jsx("div",{style:{fontSize:17,fontWeight:600,marginBottom:12},children:"Game Complete!"}),i.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[i.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[i.jsx("strong",{children:"Scenario:"})," ",i.jsx("span",{style:{color:r[t].color},children:r[t].name})]}),i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🐟 ",i.jsx("strong",{children:e})," fish remaining in the ocean"]}),i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🌺 ",i.jsx("strong",{children:n})," fish caught by Moana"]}),i.jsx("div",{style:{fontSize:14,color:o.color,fontWeight:500,marginTop:8},children:o.text})]}),i.jsx("button",{onClick:a,style:{padding:"12px 24px",border:"none",borderRadius:8,background:"#0891b2",color:"#fff",fontWeight:600,fontSize:15,cursor:"pointer"},children:"🔄 Try Different Scenario"})]})},Ase=({scenario:t,setScenario:e})=>{const n={democratic:{name:"🤝 Democratic Fishing Council",description:"Rotating leadership, graduated quotas, wealth redistribution based on Ostrom's principles"},hierarchical:{name:"👑 Moana-Led Governance",description:"Fixed leadership by Moana, efficiency focus, minimal redistribution"}};return i.jsxs("div",{className:V({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[i.jsx("div",{className:V({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🏛️ Community Governance System"}),i.jsx("div",{className:V({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(n).map(([a,r])=>{const s=t===a;return i.jsxs("button",{onClick:()=>{e(a)},style:{padding:"12px 16px",border:s?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:8,background:s?"#eff6ff":"#fff",cursor:"pointer",textAlign:"left",maxWidth:220,fontSize:14,position:"relative"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:4,color:"#111827"},children:r.name}),i.jsx("div",{style:{color:"#64748b",fontSize:12,lineHeight:"1.3"},children:r.description})]},a)})})]})},Nse=({scenario:t,setScenario:e})=>{const n={sustainable:{name:"🌍 Equal Responsibility Policy",description:"All islands fish at the same sustainable level regardless of their individual costs"},aggressive:{name:"💰 Market-Driven Approach",description:"Each island fishes at their cost-optimal level (islands with lower costs fish more)"}};return i.jsxs("div",{className:V({marginBottom:"20px",textAlign:"center",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"16px",background:"#fafafa"}),children:[i.jsx("div",{className:V({fontSize:"16px",fontWeight:"600",marginBottom:"8px"}),children:"🌏 Fishing Management System"}),i.jsx("div",{className:V({display:"flex",gap:"12px",justifyContent:"center",flexWrap:"wrap"}),children:Object.entries(n).map(([a,r])=>{const s=t===a;return i.jsxs("button",{onClick:()=>{e(a)},style:{padding:"12px 16px",border:s?"2px solid #3b82f6":"1px solid #d1d5db",borderRadius:8,background:s?"#eff6ff":"#fff",cursor:"pointer",textAlign:"left",maxWidth:200,fontSize:14,position:"relative"},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:4,color:"#111827"},children:r.name}),i.jsx("div",{style:{color:"#64748b",fontSize:12,lineHeight:"1.3"},children:r.description})]},a)})})]})},Ise=({history:t})=>{const e=t.reduce((o,l)=>o+(l.moanaFish??0),0),n=Zt.map((o,l)=>t.reduce((c,h)=>c+(h.otherFish&&h.otherFish[l]!==void 0?h.otherFish[l]:0),0)),a=t.reduce((o,l)=>o+(l.moanaCost??0),0),r=Zt.map((o,l)=>t.reduce((c,h)=>c+(h.otherCosts&&h.otherCosts[l]!==void 0?h.otherCosts[l]:0),0));function s(o,l,c,h){return o===null||l===null||c===null||h===null?i.jsx("span",{children:"-"}):i.jsxs("span",{title:`${Math.round(o)} fish • $${l.toFixed(2)} total cost • $${c.toFixed(2)} per fish`,children:[Math.round(o),"🐟",i.jsx("br",{}),"$",l.toFixed(2)]})}return i.jsx("div",{style:{margin:"18px 0"},children:i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsxs("table",{style:{borderCollapse:"collapse",fontSize:14,minWidth:480},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#bae6fd"},children:[i.jsx("th",{style:{padding:"6px 8px"},children:"Round"}),i.jsxs("th",{style:{padding:"6px 8px"},children:["Moana",i.jsx("br",{}),"($",Be.c_islands[0],"/boat)"]}),Zt.map((o,l)=>i.jsxs("th",{style:{padding:"6px 8px",fontSize:12},children:[o.replace("Chief ",""),i.jsx("br",{}),"($",Be.c_islands[l+1],"/boat)"]},o)),i.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),i.jsxs("tbody",{children:[t.map((o,l)=>i.jsxs("tr",{style:{background:l%2===0?"#f8fafc":"#fff"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:o.round}),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:s(o.moanaFish,o.moanaCost,o.moanaCostPerFish,o.avgCostPerFish)}),Zt.map((c,h)=>i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:o.otherFish&&o.otherCosts&&o.otherCostPerFish&&o.otherFish[h]!==void 0&&o.otherCosts[h]!==void 0?s(o.otherFish[h],o.otherCosts[h],o.otherCostPerFish[h],o.avgCostPerFish):"-"},h)),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:o.fishAfter!==null?`${Math.round(o.fishAfter)}🐟`:"-"})]},l)),i.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},children:"Total"}),i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(e),"🐟",i.jsx("br",{}),"$",a.toFixed(2)]}),n.map((o,l)=>i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(o),"🐟",i.jsx("br",{}),"$",r[l].toFixed(2)]},l)),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",color:"#64748b"},children:"–"})]})]})]})})})},Lse=({history:t})=>{const e=t.reduce((c,h)=>c+(h.moanaFish??0),0),n=Zt.map((c,h)=>t.reduce((u,d)=>u+(d.otherFish&&d.otherFish[h]!==void 0?d.otherFish[h]:0),0)),a=t.reduce((c,h)=>c+h.redistributionAmount,0),r=t.reduce((c,h)=>c+(h.moanaCost??0),0),s=Zt.map((c,h)=>t.reduce((u,d)=>u+(d.otherCosts&&d.otherCosts[h]!==void 0?d.otherCosts[h]:0),0));function o(c,h,u,d){return c===null||h===null||u===null||d===null?i.jsx("span",{children:"-"}):i.jsxs("div",{style:{textAlign:"center"},children:[i.jsxs("div",{style:{fontSize:12},children:[c.toFixed(1),"🐟 → ",h.toFixed(1),"🐟"]}),i.jsxs("div",{style:{fontSize:10,color:"#64748b"},children:["$",d.toFixed(2)]})]})}function l(c,h,u,d){const m=["Moana","Kai","Tala","Sina"],f={conservative:"🛡️",moderate:"⚖️",aggressive:"⚔️"},p={equal:"🟰",hybrid:"🔄",efficiency:"📈"},g={conservative:"🔐",moderate:"🔄",progressive:"🔓"};return i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontWeight:600,fontSize:12,marginBottom:"2px"},children:m[c]}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2px",fontSize:"10px",marginBottom:"2px"},children:[i.jsx("span",{title:`Conservation Strategy: ${h}`,children:f[h]||"❓"}),i.jsx("span",{title:`Distribution Method: ${u||"unknown"}`,children:u&&p[u]||"❓"}),i.jsx("span",{title:`Redistribution Policy: ${d||"unknown"}`,children:d&&g[d]||"❓"})]})]})}return i.jsxs("div",{style:{margin:"18px 0"},children:[i.jsxs("div",{style:{marginBottom:"12px",padding:"8px 12px",backgroundColor:"#f8fafc",borderRadius:"6px",fontSize:"12px",border:"1px solid #e2e8f0"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"6px"},children:"Leadership Decision Icons Guide:"}),i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsx("strong",{children:"Conservation Strategy:"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🛡️ conservative (protect stocks)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"⚖️ moderate (balanced approach)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"⚔️ aggressive (maximize current catch)"})]}),i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsx("strong",{children:"Distribution Method:"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🟰 equal (same quotas for all)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🔄 hybrid (balanced allocation)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"📈 efficiency (quota based on capability)"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Redistribution Policy:"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🔐 conservative (minimal sharing)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🔄 moderate (balanced redistribution)"}),i.jsx("span",{style:{marginLeft:"8px"},children:"🔓 progressive (significant wealth sharing)"})]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsxs("table",{style:{borderCollapse:"collapse",fontSize:14,minWidth:600},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#bae6fd"},children:[i.jsx("th",{style:{padding:"6px 8px"},children:"Round"}),i.jsx("th",{style:{padding:"6px 8px"},children:"Leader"}),i.jsxs("th",{style:{padding:"6px 8px"},children:["Moana",i.jsx("br",{}),"Original → Final • Cost"]}),Zt.map(c=>i.jsxs("th",{style:{padding:"6px 8px",fontSize:12},children:[c.replace("Chief ",""),i.jsx("br",{}),"Original → Final • Cost"]},c)),i.jsx("th",{style:{padding:"6px 8px"},children:"Stock After"})]})}),i.jsxs("tbody",{children:[t.map((c,h)=>i.jsxs("tr",{style:{background:h%2===0?"#f8fafc":"#fff"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:400},children:c.round}),i.jsx("td",{style:{padding:"4px 8px"},children:l(c.leader,c.leaderStrategy,c.leaderDistributionMethod,c.leaderRedistributionPolicy)}),i.jsx("td",{style:{padding:"4px 8px"},children:o(c.moanaOriginalCatch,c.moanaFish,c.moanaNetTransfer,c.moanaCost)}),Zt.map((u,d)=>i.jsx("td",{style:{padding:"4px 8px"},children:c.otherFish&&c.otherOriginalCatch&&c.otherFish[d]!==void 0&&c.otherCosts?o(c.otherOriginalCatch[d],c.otherFish[d],c.otherFish[d]-c.otherOriginalCatch[d],c.otherCosts[d]):"-"},d)),i.jsx("td",{style:{padding:"4px 8px",textAlign:"center",fontWeight:500},children:c.fishAfter!==null?`${Math.round(c.fishAfter)}🐟`:"-"})]},h)),i.jsxs("tr",{style:{background:"#e0e7ef",fontWeight:600,borderTop:"2px solid #bae6fd"},children:[i.jsx("td",{style:{padding:"4px 8px",textAlign:"center"},colSpan:2,children:"Total"}),i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(e),"🐟",i.jsx("br",{}),i.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["$",r.toFixed(2)]})]}),n.map((c,h)=>i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center"},children:[Math.round(c),"🐟",i.jsx("br",{}),i.jsxs("span",{style:{fontSize:10,color:"#64748b"},children:["$",s[h].toFixed(2)]})]},h)),i.jsxs("td",{style:{padding:"4px 8px",textAlign:"center",fontSize:11},children:["Redistributed: ",a.toFixed(1),"🐟"]})]})]})]})})]})},Ose=({scenario:t,fishStock:e,history:n})=>{const a=n.reduce((u,d)=>u+d.redistributionAmount,0),r=[...new Set(n.flatMap(u=>u.activeOstromPrinciples))],s=n.reduce((u,d)=>u+(d.totalCatch??0),0),o=n.reduce((u,d)=>u+(d.moanaCost??0),0),l=Zt.map((u,d)=>n.reduce((m,f)=>m+(f.otherCosts&&f.otherCosts[d]!==void 0?f.otherCosts[d]:0),0)),c=o+l.reduce((u,d)=>u+d,0),h=s>0?c/s:0;return i.jsxs("div",{style:{textAlign:"center",margin:"18px 0"},children:[i.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🏛️ ",i.jsx("strong",{children:t==="democratic"?"Democratic Council":"Moana-Led Governance"})," Results"]}),i.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["🐟 ",i.jsx("strong",{children:Math.round(s)})," fish caught ","·"," 💰"," ",i.jsxs("strong",{children:["$",h.toFixed(2)]})," average cost per fish"]}),t==="democratic"&&i.jsx("div",{style:{fontSize:12,marginBottom:8,color:"#10b981",fontStyle:"italic"},children:"✨ Community Benefit: Lower costs through coordinated fishing"}),i.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["↔️ Fish Redistributed: ",i.jsxs("strong",{children:[a.toFixed(1),"🐟"]})]}),i.jsxs("div",{style:{fontSize:14,marginBottom:8},children:["🌊 ",i.jsx("strong",{children:Math.round(e)})," fish remaining in ocean"]})]}),i.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:8,padding:12,marginBottom:16,fontSize:13},children:[i.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"🎯 Active Ostrom Principles:"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"},children:r.map((u,d)=>i.jsx("span",{style:{background:"#dcfce7",color:"#166534",padding:"2px 8px",borderRadius:12,fontSize:11},children:u},d))})]})]})},Mse=({fishStock:t,history:e})=>{const n=e.reduce((s,o)=>s+(o.totalCatch??0),0),a=e.reduce((s,o)=>s+(o.totalCost??0),0),r=n>0?a/n:0;return i.jsx("div",{style:{textAlign:"center",margin:"18px 0"},children:i.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #c7d2fe",borderRadius:8,padding:16,marginBottom:16},children:[i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🐟 ",i.jsx("strong",{children:Math.round(n)})," fish caught • 💰 ",i.jsxs("strong",{children:["$",a.toFixed(2)]})," ","total cost"]}),i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["📊 Average cost: ",i.jsxs("strong",{children:["$",r.toFixed(2)]})," per fish"]}),i.jsxs("div",{style:{fontSize:15,marginBottom:8},children:["🌊 ",i.jsx("strong",{children:Math.round(t)})," fish remaining in the ocean"]})]})})},Rse=()=>{const[t,e]=pe.useState(1),[n,a]=pe.useState(Be.s_init),[r,s]=pe.useState(0),[o,l]=pe.useState("random"),[c,h]=pe.useState([{round:1,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:2,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:3,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null}]),[u,d]=pe.useState(!1);function m(p){if(u||c[t-1].moanaBoats!==null)return;let g;switch(o){case"sustainable":g=Zt.map(()=>Math.floor(Math.random()*2)+Math.max(1,yt.low_fishing-1));break;case"aggressive":g=Zt.map(()=>Math.floor(Math.random()*4)+Math.max(8,yt.intensive_fishing-2));break;case"random":default:g=Zt.map(()=>Math.random()<.5?Math.max(1,yt.low_fishing+Math.floor(Math.random()*3)):Math.max(8,yt.intensive_fishing-Math.floor(Math.random()*4)));break}const x=p+g.reduce((O,P)=>O+P,0),b=t===1?Be.s_init:c[t-2].fishAfter??Be.s_init,w=Sy(b),k=mu(b,x),E=Math.round(p/x*k),v=g.map(O=>Math.round(O/x*k)),S=b-k+w,L=c.map((O,P)=>P===t-1?{round:t,moanaBoats:p,moanaFish:E,otherBoats:g,otherFish:v,totalBoats:x,totalCatch:Math.round(k),fishAfter:Math.round(S),regeneration:Math.round(w)}:O);h(L),s(r+E),a(Math.round(S)),t===3?d(!0):e(t+1)}function f(){e(1),a(Be.s_init),s(0),h([{round:1,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:2,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null},{round:3,moanaBoats:null,moanaFish:null,otherBoats:null,otherFish:null,totalBoats:null,totalCatch:null,fishAfter:null,regeneration:null}]),d(!1),l("random")}return i.jsxs("div",{className:V({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[i.jsx(kse,{scenario:o,setScenario:l,history:c}),i.jsx(Ese,{round:t,gameOver:u,history:c,onBoatChoice:m}),i.jsx(Sse,{history:c}),u&&i.jsx(Cse,{scenario:o,fishStock:n,moanaTotal:r,onReset:f})]})},Pse=()=>{const[t,e]=pe.useState("sustainable"),[n,a]=pe.useState([]),[r,s]=pe.useState(Be.s_init);return pe.useEffect(()=>{let l=Be.s_init;const c=[];for(let h=1;h<=3;h++){let u;switch(t){case"sustainable":u=[0,1,2,3].map(()=>wl(l));break;case"aggressive":default:u=[0,1,2,3].map(q=>Ey(l,Be.c_islands[q]));break}const d=u[0],m=u.slice(1),f=u.reduce((q,M)=>q+M,0),p=Sy(l),g=mu(l,f),x=u.map(q=>q/f*g),b=x[0],w=x.slice(1),k=u.map((q,M)=>q*Be.c_islands[M]),E=k[0],v=k.slice(1),S=k.map((q,M)=>x[M]>0?q/x[M]:0),L=S[0],O=S.slice(1),P=k.reduce((q,M)=>q+M,0),j=g>0?P/g:0,A=l-g+p;c.push({round:h,moanaBoats:d,moanaFish:b,moanaCost:E,moanaCostPerFish:L,otherBoats:m,otherFish:w,otherCosts:v,otherCostPerFish:O,totalBoats:f,totalCatch:g,totalCost:P,avgCostPerFish:j,fishAfter:A,regeneration:p}),l=Math.max(0,A)}setTimeout(()=>{a(c),s(l)},0)},[t]),i.jsxs("div",{className:V({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[i.jsx(Nse,{scenario:t,setScenario:e}),i.jsx(Ise,{history:n}),i.jsx(Mse,{fishStock:r,history:n})]})},Dse=()=>{const[t,e]=pe.useState("democratic"),[n,a]=pe.useState([]),[r,s]=pe.useState(Be.s_init),o=(l,c)=>{const h=[];return c==="democratic"?(h.push("1. Clearly defined boundaries"),h.push("2. Collective choice arrangements"),h.push("3. Community monitoring"),h.push("4. Graduated sanctions"),h.push("5. Conflict resolution mechanisms"),h.push("7. Nested enterprises"),l!==0&&h.push("6. Recognition of rights to organize")):(h.push("1. Clearly defined boundaries"),h.push("8. Congruence with local conditions"),l===0&&h.push("3. Monitoring by authorities")),h};return pe.useEffect(()=>{const l=(m,f,p)=>{const x=rj(f).redistributionRate,b=mu(p,wl(p))/Be.nplayers,w=new Array(Be.nplayers).fill(0),k=new Array(Be.nplayers).fill(0),E=[...m];for(let O=0;O<Be.nplayers;O++)if(m[O]>b){const P=m[O]-b;w[O]=P*x,E[O]-=w[O]}else w[O]=0;for(let O=0;O<Be.nplayers;O++)E[O]<b?k[O]=b-E[O]:k[O]=0;const v=w.reduce((O,P)=>O+P,0),S=k.reduce((O,P)=>O+P,0),L=new Array(Be.nplayers).fill(0);if(S>0){for(let O=0;O<Be.nplayers;O++)if(k[O]>0){const P=k[O]/S,j=v*P;E[O]+=j,L[O]=j}}return{finalCatches:E,redistributionAmount:v,netTransfers:L.map((O,P)=>O-w[P])}};let h=Be.s_init;const u=[];let d;for(let m=1;m<=5;m++){const f=t==="democratic"?(m-1)%Be.nplayers:0,p=wl(h)*Be.nplayers,g=Tse(f,p,h,Be.s_init,d),x=g.adjustedSustainableBoats,b=g.strategy;let w;t==="hierarchical"?w=[0,1,2,3].map(()=>wl(h)):w=aj(f,Be.nplayers,Qr.cooperation_bonus,Qr.efficiency_bonus,Qr.base_quota).quotaWeights.map((I,H)=>{const W=Ey(h,Be.c_islands[H]);return W>x*I?x*I:W});const k=w[0],E=w.slice(1),v=w.reduce((X,I)=>X+I,0),S=Sy(h),L=mu(h,v),O=w.map(X=>X/v*L),P=O[0],j=O.slice(1);let A,q,M,C,N="equal",R="conservative";if(t==="democratic"){N=aj(f,Be.nplayers,Qr.cooperation_bonus,Qr.efficiency_bonus,Qr.base_quota).method;const I=l(O,f,h);R=rj(f).policy,A=I.finalCatches[0],q=I.finalCatches.slice(1),M=I.netTransfers[0],C=I.redistributionAmount}else A=P,q=j,M=0,C=0;const $=o(f,t),U=w.map((X,I)=>X*Be.c_islands[I]),B=U[0],T=U.slice(1),Y=h-L+S;u.push({round:m,moanaBoats:k,moanaFish:A,otherBoats:E,otherFish:q,totalBoats:v,totalCatch:L,fishAfter:Y,regeneration:S,leader:f,leaderStrategy:b,leaderDistributionMethod:N,leaderRedistributionPolicy:R,redistributionAmount:C,moanaNetTransfer:M,activeOstromPrinciples:$,moanaOriginalCatch:P,otherOriginalCatch:j,moanaCost:B,otherCosts:T}),h=Math.max(0,Y),d=h}setTimeout(()=>{a(u),s(h)},0)},[t]),i.jsxs("div",{className:V({border:"1px solid #bae6fd",borderRadius:"8px",padding:"18px",margin:"18px 0",background:"#f8fafc"}),children:[i.jsx(Ase,{scenario:t,setScenario:e}),i.jsx(Lse,{history:n}),i.jsx(Ose,{scenario:t,fishStock:r,history:n})]})},Bse=()=>i.jsxs("article",{children:[i.jsx(sa,{children:`

Every day, we make seemingly rational decisions that, collectively, destroy the very resources we depend on. From not buying electric cars because they might be inconvenient to depleting groundwater aquifers, we face a paradox that has puzzled scientists for a long time.

This raises a fundamental question: **How should we govern common pool resources?**

In unrestrained scenarios, these resources deplete and collapse. This led to the widespread belief that only the state or the market can effectively govern common resources. However, Elinor Ostrom demonstrated that communities can self-organize to govern common resources successfully. This earned her the economics [Nobel Prize in 2009](https://www.nobelprize.org/prizes/economic-sciences/2009/ostrom/facts/) as the first woman to receive the award in that category. She explored this through carefully designed social experiments and real-world case studies, which I will examine here through interactive simulations.

Throughout the blog post, we look into the topic through the lens of Moana's journey. we'll explore three approaches to solving this dilemma:

💰 **The Market Solution:** Tradeable fishing quotas that reward efficiency - but what about equity?

🏛️ **The State Solution:** An Island Fishing Authority with centralized control - effective but costly?

🤝 **The Community Solution:** The chiefs create their own rules together - can self-governance work?

## From Theory to Reality: A Chief's Dilemma

But how do these abstract governance theories play out in practice? To understand this, let's step into the sandals of someone facing exactly these choices every single day.

Meet Moana - no longer the adventurous teenager from Disney's story, but now a seasoned chief responsible for her island's survival. Each morning, she faces a decision that will determine whether her people can eat well or go hungry: how many fishing boats should she send out to the shared waters that sustain 
not just her community, but three neighboring islands as well?

The neighboring islands' chiefs have called a meeting. The fish that have sustained these communities for generations are becoming scarcer. 
The great tuna schools that once appeared predictably now show up only occasionally. A decision must be made about how to manage their shared waters.

This isn't just a thought experiment. Fishing provides the perfect lens to examine common pool resource governance because it's visual, well-documented in research, 
and demonstrates the key tensions between individual incentives and collective welfare. This scenario captures the essential elements of any common pool resource dilemma - whether it's fisheries, groundwater, grazing lands, or even digital commons like open-source software.

### The fundamental dynamics of common pool resources

The situation Moana faces demonstrates the core elements present in all common pool resource scenarios:
            
- Multiple decision-makers (Moana and the three other chiefs) choose resource extraction levels
- Individual decisions aggregate to affect the shared resource (fish stock)
- Each participant's catch depends on both their effort and the total pressure on the resource
- Resource regeneration occurs, but extraction can exceed sustainable levels


To understand how these dynamics play out, let&rsquo;s experience Moana&rsquo;s dilemma firsthand. As she sits 
with the other three chiefs overlooking the shared fishing grounds, each faces identical incentives, but their
collective choices will determine everyone&rsquo;s fate:
            `}),i.jsx(Rse,{}),i.jsx(sa,{children:`
How did the simulation go? Most likely, you found it challenging to maintain fish stock stability.
It's difficult to resist the temptation to fish intensively, especially when other chiefs do the same.

The dilemma Moana faces illustrates the classic **Tragedy of the Commons**. This concept, popularized by [Garrett Hardin in 1968](https://math.uchicago.edu/~shmuel/Modeling/Hardin,%20Tragedy%20of%20the%20Commons.pdf), describes how rational individual choices can lead to irrational collective outcomes - depleting shared resources that everyone depends on.

But this raises the central question: **If individual rationality leads to collective irrationality, what governance mechanisms can solve this dilemma?**

## State solutions: The centralized authority approach

Back on her island, Moana stares at the empty nets from yesterday&rsquo;s failed cooperation. The other chiefs are equally frustrated. &ldquo;This can&rsquo;t continue,&rdquo; Chief Kai declares. &ldquo;We need rules - someone above all of us who sets limits and enforces them fairly.&rdquo;

Within days, they contact the Regional Maritime Authority. The solution feels natural: surrender their fishing decisions to an Island Fishing Authority with centralized control. For Moana, this means no more daily choices about boat deployments - that responsibility now belongs to others.

**The centralized approach:** An Island Council sets fishing limits, monitors compliance, and enforces penalties. However, the Authority quickly discovers that equal treatment isn't necessarily fair treatment - the islands have vastly different fishing costs:

- **Moana's Island**: $0.125 per boat (modern harbor, efficient boats)
- **Kai's Island**: $0.25 per boat (decent infrastructure)  
- **Tala's Island**: $0.75 per boat (remote location, older equipment)
- **Sina's Island**: $1.00 per boat (very remote, harsh conditions)

This creates the central policy dilemma: equal quotas or economic efficiency? Try both approaches below:

      `}),i.jsx(Pse,{}),i.jsx(sa,{children:`

**What the Results Show:**

The cost differences create significant fairness challenges. In the "🌍 Equal Responsibility Policy", everyone fishes sustainably at the same level - but Sina's island pays 8 times more per fish than Moana's island! In the "💰 Market-Driven Approach", each island fishes at their economically optimal level - but this means efficient islands like Moana's catch much more fish.

Neither approach is perfect: equal fishing quotas seem fair in principle but create economic hardship for less efficient islands. Market-driven approaches seem economically efficient but can lead to inequality in outcomes. This is why real-world commons governance often needs more sophisticated solutions that balance both equity and efficiency concerns.


As you can see from the simulation, centralized regulation successfully prevents the tragedy of the commons. The fish stocks remain stable, and systematic management replaces chaotic individual decisions.

After months under this system, Moana observes both the benefits and costs: *"No more sleepless nights wondering about boat deployments - the Authority decides everything. The fish are recovering, but the bureaucracy is expensive and my crews have lost their drive to innovate when quotas are fixed."*

The simulation reveals the core tension: equal access ensures fairness but sacrifices efficiency, while efficiency-based allocation maximizes output but creates inequality.

### A market refinement: Individual Transferable Quotas (ITQs)

Recognizing the efficiency problems, the Authority proposes a refinement: **Individual Transferable Quotas (ITQs)**. The government still sets total sustainable fishing limits, but now chiefs can buy and sell their fishing rights to each other. 

This allows efficient fishers like Moana to expand while maintaining overall sustainability. However, as quota prices rise, wealthy chiefs can monopolize access, excluding traditional fishing families. As Moana reflects: *"This system rewards skill and saves fish, but I&rsquo;ve watched smaller islands get priced out entirely."*

This sets the stage for Ostrom's breakthrough insight: communities can govern themselves.

## Ostrom's Community Solution: Learning from Failure

After months of failed cooperation and bureaucratic frustration, Moana realizes something crucial: **"We keep trying solutions that worked elsewhere, but we never asked what makes solutions work at all."**

**The Missing Piece:** Elinor Ostrom asked the same question. Her research revealed that successful community resource management isn't about finding the "right" rules—it's about building the right **institutions** for making and adapting rules.

**From Tragedy to Success:** What transforms a failing commons into a thriving one? Through studying [thousands of cases worldwide](https://www.actu-environnement.com/media/pdf/ostrom_1990.pdf) Ostrom identified eight institutional design principles that separate successful commons from failures:

**Ostrom's Eight Design Principles:**

1. **Clearly defined boundaries** - Everyone knows who belongs to the fishing community and what waters they govern
2. **Collective choice arrangements** - The chiefs affected by fishing rules participate in making and changing them  
3. **Monitoring** - Community members keep watch over each other's compliance, not outside enforcers
4. **Graduated sanctions** - Violations start with warnings, escalate fairly—building trust, not resentment
5. **Conflict resolution mechanisms** - Chiefs have ways to resolve disputes locally and quickly
6. **Recognition of rights to organize** - External authorities (like the Regional Maritime Authority) respect their self-governance
7. **Nested enterprises** - Rules work at multiple levels—daily fishing decisions, seasonal planning, long-term stock management
8. **Congruence with local conditions** - Rules match the unique conditions of their specific waters and communities

**Moana's Leadership Challenge:** Real community leadership isn't about making one perfect decision—it's about balancing multiple competing concerns simultaneously. Watch how each rotating leader faces three interconnected choices that affect different aspects of community welfare:

1. **Resource Conservation Strategy**: How aggressive should we be in protecting fish stocks for future generations?
2. **Fair Distribution Method**: Should fishing quotas be allocated equally, based on efficiency, or through a balanced approach?
3. **Community Redistribution Policy**: How much should successful fishers share with struggling islands to maintain social cohesion?

Each decision activates different Ostrom principles and creates different community outcomes. Experience how these institutional elements play out in practice:

            `}),i.jsx(Dse,{}),i.jsx(sa,{children:`

**Understanding Multi-Dimensional Leadership:** The simulation demonstrates that effective community governance requires leaders to simultaneously balance:

- **Sustainability vs. Immediate Needs**: Conservation strategies determine long-term resource health
- **Equality vs. Efficiency**: Distribution methods affect fairness and economic optimization  
- **Individual Success vs. Community Cohesion**: Redistribution policies maintain social stability

**The Deeper Lesson:** Notice how the *process* of governance—who decides, how monitoring works, how conflicts are resolved—matters more than the specific fishing quotas chosen. Democratic rotation implements 6-7 of Ostrom's principles simultaneously, while hierarchical governance implements only 2-3.

**What makes community solutions different?** Unlike markets that rely on prices or states that impose rules, communities create governance systems where the people affected by decisions are the ones making them. Moana's council demonstrates this: the chiefs who depend on the fish are the same people setting fishing limits and monitoring compliance.

## Personal Reflections: Why This Matters

This exploration through Moana's world has been more revealing than I expected. It's forced me to recognize that a lot of meaningful work happens not in markets or under government regulation, but in community spaces - research collaborations, open-source projects, innovation networks where informal governance determines whether we succeed or fail.

The tragedy of the commons isn't just an abstract economic concept. It's the daily reality of every shared Slack channel that becomes chaotic, every open-source project that fragments, every research community that loses focus. But Ostrom's work suggests these failures aren't inevitable.

**It makes you wonder how to apply commons governance to knowledge work:**
- **Clearly defined boundaries:** Who belongs to this research community? What counts as contribution?
- **Collective choice:** Do the people doing the work have a voice in setting priorities?  
- **Monitoring:** How do we track contributions without destroying intrinsic motivation?
- **Graduated sanctions:** How do we handle free-riders without creating surveillance culture?

Writing this has convinced me that there is a lot to learn in the context of innovation management. It depends less on perfecting market mechanisms and more on learning to govern knowledge commons well. TBC.
            `})]}),Fse={title:"Tale of Four Islands: Solutions to the Tragedy of the Commons",publishing_date:"2025-07-21",tokenID:35,category:"others",description:"I explore solutions to the Tragedy of the Commons through interactive island simulations. See how governance models affect resource sustainability and community outcomes."},sj=Object.freeze(Object.defineProperty({__proto__:null,default:Bse,meta:Fse},Symbol.toStringTag,{value:"Module"})),Hse={publishing_date:"2025-05-14",title:"My short lived contact with the world of VCs in Germany",category:"others",secondaryCategory:"quantum",description:"I explore the challenges of transitioning from quantum research to startup entrepreneurship. Valuable lessons about VC funding, deep tech development, and German startup realities."};function oj(t){const e={a:"a",em:"em",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["For a number of years, I worked in academia on the topic of quantum hardware. You can find the traces of these activities sprinkled over this blog. But over time it became increasingly clear to me that I would like to venture outside of this well-trodden path. As this was the time when names like ",i.jsx(e.a,{href:"https://ionq.com/",children:"IonQ"}),", ",i.jsx(e.a,{href:"https://quantum.ibm.com/",children:"IBM"})," or ",i.jsx(e.a,{href:"https://www.pasqal.com/",children:"Pasqal"})," really were exciting developments, I obviously also investigated the possibility of a startup. If these (senior) peers could do it, why not me ?"]}),`
`,i.jsx(e.h2,{children:"The motivation"}),`
`,i.jsx(e.p,{children:"My research experience focused on hardware development, so it felt natural to look into this direction and I left the topic of software on the side. However, this comes with enormous drawbacks:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["Quantum hardware is ",i.jsx(e.em,{children:"notoriously"})," slow to develop. It takes you years to get something close to a working industrial prototype."]}),`
`,i.jsx(e.li,{children:"Quantum hardware is notoriously expensive, which means that you are very quickly forced to raise substantial amounts of capital for deep tech. 1M is basically the very minimum to even start thinking about something super basic."}),`
`,i.jsx(e.li,{children:"Without working prototypes, we couldn't make a convincing business case."}),`
`]}),`
`,i.jsx(e.p,{children:"Taken together these three conditions meant that the very first steps of the company would need 1 to 2M€ of funding in the seed / preseed phase. To get this amount of money we basically had two options:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Option A - Get public funding"}),": This comes attached with A LOT of strings, A LOT of administration and it is quite slow. It is nice to slowly expend out of your lab, but is not really adapted to get a startup of the ground."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Option B - Go to the VCs and pitch your case"}),": Sounds fast, business oriented and with a clear growth path."]}),`
`]}),`
`,i.jsx(e.p,{children:"So we had a deeper look into option B with the VCs."}),`
`,i.jsx(e.h2,{children:"The VCs"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"A new culture:"})," As we started, we needed a team of at least three people to start our fundraising campaign. Talking to VCs, we quickly realized that that they really do not care about the tech but only about the business case. But how do you explain the business case without a working prototype ? You basically have to make up the business case based on your current knowledge. And once you dream up those business cases, you have to show that they are scalable. FAST. So we had no working prototype for industrial standards, therefore no possibility to benchmark the business cases on sound numbers. Yet, we still had to present enormously ambitious business plans to the VCs."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"A world of (unfounded?) assumptions:"})," This world was completely different from the academic environment that I was used to. This made the beginning of the whole adventure super exciting. People are fast and responsive. They have a different perspective to your well known technical approach. They force you to think about the project in business ways that you never thought about before. On the other hand, this world is also based on enormous amounts of assumptions. hese assumptions were often impossible to verify for years. And these assumptions got stretched increasingly to make the ambitions of the VCs work. Further, these assumptions have substantial consequences. This was in deep contrast to the academic world, where failure does not threaten your job. When your academic experiments fail, you do another one and move on. If your business assumptions fail you have burned massive amounts of money and everyone lost their job."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Diverging expections:"})," Given these consequences, I personally would have liked to go the cautious route. Yet, within the process our predictions got increasingly detached from reality. At some point we had discussions with technical experts that told us that our time lines are at least by a factor of two (rather four) to optimistic. On the other hand, we had discussions with VCs that told us that our timelines were at least a factor of two (rather four) to slow to make the fundraising cycle work. Personally, this was hard to digest and eventually one of the reasons why I had to get out of this business quite quickly."]}),`
`,i.jsx(e.h2,{children:"Some realities on returns"}),`
`,i.jsx(e.p,{children:"You might think it's still worth it for the freedom and potential wealth, right ? Well, not so fast."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"VCs in Germany typically asked for at least 20-30% of the company to invest 1-2M €."}),`
`,i.jsx(e.li,{children:"They also expect you to keep the equity within the company."}),`
`,i.jsx(e.li,{children:"You have leaver clauses which bind you for years to the company."}),`
`,i.jsx(e.li,{children:"With each round the shares of the owners get quite substantially diluted."}),`
`]}),`
`,i.jsx(e.p,{children:"Then you can go through the different scenarios"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Scenario A: You go bust."})," This is what happens in something like 80% of the time. Over the years, you got your salary. It was sub industry and with enormous amounts of stress. To make the numbers simple let's say that you can assume that this scenario lost you roughly 100k (give or take) compared to your standard industry job."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Scenario B: You muddle through."})," This will happen approximately 15% of the time. In this scenario you do better than in scenario A and you do not go bust. You have a product. It works, but it is not quite as profiable as you would like. This is after you raised Seed (VC took 30%), Series A (VC took 30%) and now it becomes clear that a Series B will not fly. So you have to find some buyer that takes the IP of the company for 5M and move on. So in this scenario, you basically end with a 500k payday as one of the founders."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Scenario C: Payout by the big industrial player."})," This will happen between 1 and 5 % of the time. This is the dream scenario where everythings works out for you. You perform, you have raised Seed (VC took 30%), Series A (VC took 30%) and Series B (VC took 30%) and now you have pay day with a buyout of 50M. So in this scenario, you basically end with a 5M payday personally."]}),`
`,i.jsx(e.p,{children:"What is the expected value of the whole enterprise ? Taking the numbers above, we get to:"}),`
`,i.jsx(e.p,{children:"(80% × -100.000€) + (15% × 500.000€) + (5% × 5M€) = ~250.000€"}),`
`,i.jsx(e.p,{children:"So I end up with a rough expected return of 250k give or take. So it is certainly not a loss. But is this worth the stress and the uncertainty ? This is most likely the key question that everyone has to decide."}),`
`,i.jsx(e.h2,{children:"And the freedom in all of this ?"}),`
`,i.jsx(e.p,{children:"With the startup does not just come the premise of money, but also the freedom to do what you want. The little I saw, I have strong doubts about this. The VCs bring the money and this means that they also set the tone. Your business plan becomes focused on securing the next funding round, not what you think is best. And I would be slightly surprised if there was a relaxed approach to monitoring progress. Remember that they gave you 1M for an idea ? Now you better deliver. If you want to leave, remember those leaver clauses which bind you to the company for a number of years. So you are basically stuck in a company that you do not like anymore. Taken together I rarely had the feeling of freedom in this setup as the VCs are the ones that set the tone. Not the clients. Not the employees. Not the founders. The VCs. But I genuinely hope that I had simply had a bad impression on this part."}),`
`,i.jsx(e.h2,{children:"The end of the story"}),`
`,i.jsx(e.p,{children:"I felt a huge amount of releave when I left this scene. I was never able to shake the imposter syndrome and could not enjoy the ride. I felt the excitement but the negative feeling were substantially stronger. Nowadays, I evolved on towards a completely different career path, which I am grateful about."}),`
`,i.jsx(e.p,{children:"What saddens me most is how difficult it is to launch a deep tech startup in Germany. I still feel that the step from academic research and deep tech startups in Germany is so much bigger than it could be and a number of things could improve the situation quite drastically:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Better incubators connected to Universities. Many universities have little incentive to develop strong incubator programs. Hence they are rarely up the potential. This would lighten the knowledge gap of researchers as they have to discuss the wonderful world of business. I would be interested to hear about successful examples."}),`
`,i.jsx(e.li,{children:"Simplify the public funding process. It was really a nightmare to go through the public funding process. It genuinely felt like a bureaucracy that was only made to up to let some people feel important. Please, make it easier."}),`
`,i.jsx(e.li,{children:"Get us all VCs with deeper knowledge. I think that this speaks to itself."}),`
`]}),`
`,i.jsx(e.p,{children:"I hope that you enjoyed the post. If you have any comments or suggestions, please leave them in the comments below. I would be happy to hear from you. And as usual, do not forget to push the like button."})]})}function qse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(oj,{...t})}):oj(t)}const lj=Object.freeze(Object.defineProperty({__proto__:null,default:qse,frontmatter:Hse},Symbol.toStringTag,{value:"Module"})),$se={author:["Fred Jendrzejewski","Selim Jochim"],order:1,title:"Lecture 1 - Some cooking recipes for Quantum Mechanics"};function cj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this first lecture we will review the foundations of quantum
mechanics at the level of a cooking recipe. This will enable us to use
them later for the discussion of the atomic structure and interaction
between atoms and light.`}),`
`,i.jsx(e.p,{children:`This is the first lecture of the Advanced Atomic Physics course at
Heidelberg University, as tought in the wintersemester 2019/2020. It is
intended for master students, which have a basic understanding of
quantum mechanics and electromagnetism. In total, we will study multiple
topics of modern atomic, molecular and optical physics over a total of
24 lectures, where each lectures is approximately 90 minutes.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"We will start the series with some basics on quantum mechanics."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Then work our way into the harmonic oscillator and the hydrogen
atom.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`We will then leave the path of increasingly complex atoms for a
moment to have some fun with light-propagation, lasers and
discussion of the Bell inequalities.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`A discussion of more complex atoms gives us the acutual tools at
hand that are in the lab.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`This sets up a discussion of di-atomic molecules, which ends the
old-school AMO.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`We move on to quantized atom-light interaction, the Jaynes Cummings
model and strong-field lasers.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`We will finally finish with modern ways to implement quantum
simulators and quantum computers.`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`The topics of the lectures will be discussed in more details in the
associated tutorials.`}),`
`,i.jsx(e.h1,{children:"Introduction"}),`
`,i.jsx(e.p,{children:`In AMO physics we will encounter the consequences of quantum mechanics
all the time. So we will start out with a review of the basic
ingredients to facilitate the later discussion of the experiments.`}),`
`,i.jsxs(e.p,{children:[`Some good introductions on the traditional approach can be found in
`,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2002",id:"user-content-fnref-2002","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),", ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-ct1",id:"user-content-fnref-ct1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),", ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-ct2",id:"user-content-fnref-ct2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"4"})}),`. Previously, we mostly followed the discussion
of Ref. `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),". Nowadays, I also recommend the works by Scott Aaronson in ",i.jsx(e.a,{href:"https://scottaaronson.com/democritus/lec9.html",children:"this"})," and ",i.jsx(e.a,{href:"https://www.scottaaronson.com/barbados-2016.pdf",children:"this lecture"}),". There is also a good ",i.jsx(e.a,{href:"https://www.quantamagazine.org/quantum-theory-rebuilt-from-simple-physical-principles-20170830/#",children:`article by
Quanta-Magazine`}),`
on the whole effort to derive quantum mechanics from some simple
principles. This effort started with `,i.jsx(e.a,{href:"https://arxiv.org/abs/quant-ph/0101012v4",children:"this paper"}),`, which actually
makes for a nice read.`]}),`
`,i.jsx(e.p,{children:`Before we start with the detailled cooking recipe let us give you some
examples of quantum systems, which are of major importance throughout
the lecture:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Orbit in an atom, molecule etc"}),`. Most of you might have studied
this during the introduction into quantum mechanics.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Occupation number of a photon mode"}),`. Any person working on quantum
optics has to understand the quantum properties of photons.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.em,{children:"Position of an atom"}),` is of great importance for double slit
experiments, the quantum simulation of condensed matter systems with
atoms, or matterwave experiments.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"spin degree of freedom"}),` of an atom like in the historical
Stern-Gerlach experiment.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The classical coin-toss or bit, which connects us nicely to simple
classical probability theory or computing`}),`
`]}),`
`]}),`
`,i.jsx(e.h1,{children:"The possible outcomes (the Hilbert Space) for the Problem in Question"}),`
`,i.jsxs(e.p,{children:[`The first step is to identify the right Hilbert space for your problem.
For a classical problem, we would simply list all the different possible
outcomes in a list `,i.jsx(e.code,{className:"language-math math-inline",children:"(p_1, \\cdots, p_N)"})," of ",i.jsx(e.em,{children:"real"}),` numbers. As one of the
outcomes has to happen, we obtain the normalization condition:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\sum_i p_i = 1"})}),`
`,i.jsxs(e.p,{children:[`In quantum mechanics, we follow a similar approach of first identifying
the possible outcomes. But instead of describing the outcomes with real
numbers, we now associate a complex number `,i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha_i"}),` to each outcome
`,i.jsx(e.code,{className:"language-math math-inline",children:"(\\alpha_1, \\cdots, \\alpha_N)"}),", with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha_i \\in \\mathbb{C}"}),`. Given
that they should also describe some probability they have to be
normalized to one, but now we have the condition:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sum_i |\\alpha_i|^2 = 1"})}),`
`,i.jsxs(e.p,{children:["Aaronson claims that this is just measuring probabilities in in ",i.jsx(e.code,{className:"language-math math-inline",children:"L_2"}),`
norm. I would highly recommend his discussions on his blog for a more
instructive derivation[@quantum]. Next we will not use the traditional
lists, but the bra-ket notation, by writing:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\sum_i \\alpha_i \\left|i\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`And given that these are complex vectors, we will measure their overlap
through a Hermitian scalar product`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle\\psi_1 \\psi_2\\rangle=(\\langle{\\psi_2}| \\psi_1\\rangle)^*."})}),`
`,i.jsx(e.h2,{children:"The coin toss"}),`
`,i.jsxs(e.p,{children:[`The situation becomes particularly nice to follow for the two level
system or the coin toss. In classical systems, we will get heads up
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\uparrow"})," with a certain probability p. So the inverse ",i.jsx(e.code,{className:"language-math math-inline",children:"\\downarrow"}),`
arrives with likelyhood `,i.jsx(e.code,{className:"language-math math-inline",children:"1-p"}),`. We would then classical list the
probabilities with `,i.jsx(e.code,{className:"language-math math-inline",children:"(p,1-p)"}),`. In the quantum world we achieve such a
coin for example in spin 1/2 systems or qubits in general. We will then
describe the system through the state:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\alpha_\\uparrow \\left|\\uparrow\\right\\rangle + \\alpha_\\downarrow \\left|\\downarrow\\right\\rangle  \\qquad \\text{with} \\; \\langle\\psi | \\psi\\rangle = 1."})}),`
`,i.jsx(e.p,{children:`The next problem is how to act on the system in the classical world or
in the quantum world.`}),`
`,i.jsx(e.h2,{children:"Quantum rules"}),`
`,i.jsxs(e.p,{children:[`Having set up the space on which we want to act we have to follow the
rules of quantum mechanics. The informal way of describing is actually
nicely described by Chris Monroe `,i.jsx(e.a,{href:"https://youtu.be/CC7nlBM2cSM",children:`in this
video`}),`. We might summarize them as
follows:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Quantum objects can be in several states at the same time."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Rule number one only works when you are not looking."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`The more methematical fashion is two say that there two ways of
manipulating quantum states:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Unitary transformations ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{U}"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Measurements."}),`
`]}),`
`]}),`
`,i.jsx(e.h1,{children:"Unitary transformations"}),`
`,i.jsxs(e.p,{children:[`As states change and evolve, we know that the total probability should
be conserved. So we transform the state by some operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{U}"}),`,
which just maps the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle\\xrightarrow[]{U}\\left|\\psi'\\right\\rangle"}),`.
This should not change the norm, and we obtain the condition:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left\\langle\\psi\\right|\\hat{U}^\\dag\\hat{U} \\left|\\psi\\right\\rangle = 1\\\\
\\hat{U}^\\dag\\hat{U}  = \\mathbb{1}`})}),`
`,i.jsx(e.p,{children:`That's the very definition of unitary operators and
unitary matrices. Going back to the case of a coin toss, we see that we
can then transform our qubit through the unitary operator:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{U}=\\frac{1}{\\sqrt{2}}\\left(\\begin{array}{cc}
1 & -1\\\\
1 & 1
\\end{array}\\right)`})}),`
`,i.jsxs(e.p,{children:["Applying it on the previously defined states ",i.jsx(e.code,{className:"language-math math-inline",children:"\\uparrow"}),`
and `,i.jsx(e.code,{className:"language-math math-inline",children:"\\downarrow"}),", we get the superposition state:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{U}\\left|\\uparrow\\right\\rangle = \\frac{\\left|\\uparrow\\right\\rangle-\\left|\\downarrow\\right\\rangle}{\\sqrt{2}}\\\\
\\hat{U}\\left|\\downarrow\\right\\rangle = \\frac{\\left|\\uparrow\\right\\rangle+\\left|\\downarrow\\right\\rangle}{\\sqrt{2}}`})}),`
`,i.jsx(e.p,{children:`As we use the unitary matrices we also see why we might
one to use complex numbers. Imagine that we would like to do something
that is roughly the square root of the unitary, which often just means
that the system should evolve for half the time as we will see later. If
we then have negative nummbers, they will immediately become imaginary.`}),`
`,i.jsx(e.p,{children:`Such superposition would not be possible in the classical case, as
non-negative values are forbidden there. Actually, operations on
classical propability distributions are only possible if every entry of
the matrix is non-negative (probabilities are never negative right ?)
and each column adds up to one (we cannot loose something in a
transformation). Such matrices are called .`}),`
`,i.jsx(e.h1,{children:"Observables and Measurements"}),`
`,i.jsxs(e.p,{children:[`As much fun as it might be to manipulate a quantum state, we also have
to measure it and how it connects to the properties of the system at
hand. Any given physical quantity `,i.jsx(e.code,{className:"language-math math-inline",children:"A"}),` is associated with a Hermitian
operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A} = \\hat{A}^\\dag"}),` acting in the Hilbert space of the
system, which we defined previously. Please, be utterly aware that those
Hermitian operators have absolutely no need to be unitary. However, any
unitary operator might be written as `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{U}= e^{i\\hat{A}}"}),"."]}),`
`,i.jsxs(e.p,{children:["In a ",i.jsx(e.em,{children:"measurement"}),` , the possible outcomes are then the eigenvalues
`,i.jsx(e.code,{className:"language-math math-inline",children:"a_\\alpha"})," of the operator ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{A}\\left|\\alpha\\right\\rangle=a_{\\alpha}\\left|\\alpha\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:[`The system will collapse to the corresponding
eigenvector and the probability of finding the system in state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\alpha\\right\\rangle"})," is"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P(\\left|\\alpha\\right\\rangle)=||\\hat{P}_{\\left|\\alpha\\right\\rangle} \\left|\\psi\\right\\rangle||^2 = \\left\\langle\\psi\\right| \\hat{P}^{\\dag}_{\\left|\\alpha\\right\\rangle} \\hat{P}_{\\left|\\alpha\\right\\rangle} \\left|\\psi\\right\\rangle,"})}),`
`,i.jsxs(e.p,{children:[`where
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{P}_{\\left|\\alpha\\right\\rangle}= \\left|\\alpha\\right\\rangle \\left\\langle\\alpha\\right|"}),"."]}),`
`,i.jsx(e.p,{children:`As for our previous examples, how would you measure them typically, i.e.
what would be the operator ?`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`In atoms the operators will be angular moment, radius, vibrations
etc.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`For the occupation number we have nowadays number counting
photodectors.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The position of an atom might be detected through high-resolution
CCD cameras.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For the ",i.jsx(e.em,{children:"measurement of the spin"}),`, we typically correlate the
internal degree of freedom to the spatial degree of freedom. This is
done by applying a magnetic field gradient acting on the magnetic
moment `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{\\mu}}"}),` , which in turn is associated with the spin
via `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{\\mu}} = g \\mu_B \\hat{\\vec{s}}/\\hbar"}),", where ",i.jsx(e.code,{className:"language-math math-inline",children:"g"}),` is
the Landé `,i.jsx(e.code,{className:"language-math math-inline",children:"g"}),"-factor and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu_B"}),` is the Bohr magneton . The energy
of the system is `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H} = -\\hat{\\vec{\\mu}} \\cdot \\vec{B}"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.h1,{children:"Time Evolution"}),`
`,i.jsxs(e.p,{children:[`Being able to access the operator values and intialize the wavefunction
in some way, we also want to have a prediction on its time-evolution.
For most cases of this lecture we can simply describe the system by the
non-relativistic `,i.jsx(e.strong,{children:"Schrödinger Equation."})," It reads"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"i\\hbar\\partial_t\\left|\\psi(t)\\right\\rangle=\\hat{H}(t)\\left|\\psi(t)\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:["In general, the Hamilton operator ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}"}),` is
time-dependent. For a time-independent Hamilton operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}"}),`, we
can find eigenstates `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\phi_n\\right\\rangle"}),` with
corresponding eigenenergies `,i.jsx(e.code,{className:"language-math math-inline",children:"E_n"})," :"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}\\left|\\phi_n\\right\\rangle=E_n\\left|\\phi_n\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:["The eigenstates ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\phi_n\\right\\rangle"}),`
in turn have a simple time evolution:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\left|\\phi_n(t)\\right\\rangle=\\left|\\phi_n(0)\\right\\rangle\\cdot \\exp{-i E_nt/\\hbar}."})}),`
`,i.jsx(e.p,{children:"If we know the initial state of a system"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(0)\\right\\rangle=\\sum_n \\alpha_n\\left|\\phi_n\\right\\rangle,"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha_n=\\langle\\phi_n | \\psi(0)\\rangle"}),`, we will
know the full dimension time evolution`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(t)\\right\\rangle=\\sum_n\\alpha_n\\left|\\phi_n\\right\\rangle\\exp{-i E_n t/\\hbar}. \\;\\, \\text{(Schrödinger picture)}"})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."}),` Sometimes it is beneficial to work in the
Heisenberg picture, which works with static ket vectors
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle^{(H)}"}),` and incorporates the time
evolution in the operators. `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"5"})}),` In certain cases one would have to have
access to relativistic dynamics, which are then described by the `,i.jsx(e.strong,{children:`Dirac
equation`}),`. However, we will only touch on this topic very briefly, as
it directly leads us into the intruiging problems of `,i.jsx(e.strong,{children:`quantum
electrodynamics`}),"."]}),`
`,i.jsx(e.h2,{children:"The Heisenberg picture"}),`
`,i.jsx(e.p,{children:`As mentionned in the first lecture it can benefitial to work in the
Heisenberg picture instead of the Schrödinger picture. This approach is
widely used in the field of many-body physics, as it underlies the
formalism of the second quantization. To make the connection with the
Schrödinger picture we should remember that we have the formal solution
of`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(t)\\right\\rangle = \\mathrm{e}^{-i\\hat{H}t}\\left|\\psi(0)\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`So, if we would like to look into the expectation value
of some operator, we have:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle\\hat{A}(t)\\rangle = \\left\\langle\\psi(0)\\right|\\mathrm{e}^{i\\hat{H}t}\\hat{A}_S\\mathrm{e}^{-i\\hat{H}t}\\left|\\psi(0)\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`This motivates the following definition of the operator
in the Heisenberg picture:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{A}_H=\\mathrm{e}^{i{\\hat{H} t}/{\\hbar}} \\hat{A}_S \\mathrm{e}^{-i{\\hat{H} t}/{\\hbar}}"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\exp{-i{\\hat{H} t}/{\\hbar}}"}),` is a time evolution
operator (N.B.: `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_S = \\hat{H}_H"}),`). The time evolution of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}_H"})," is:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{d}{dt} \\hat{A}_H = \\frac{i}{\\hbar}\\hat{H}\\mathrm{e}^{i{\\hat{H}t}/{\\hbar}}\\hat{A}_S \\mathrm{e}^{-i{\\hat{H} t}/{\\hbar}}\\\\
-\\frac{i}{\\hbar} \\mathrm{e}^{i{\\hat{H} t}/{\\hbar}}\\hat{A}_S \\mathrm{e}^{-i{\\hat{H}t}/{\\hbar}}\\hat{H}+\\partial_t \\hat{A}_H\\\\
= \\frac{i}{\\hbar}\\left[\\hat{H},\\hat{A}_H\\right] + \\mathrm{e}^{i{\\hat{H}t}/{\\hbar}}\\partial_t\\hat{A}_S\\mathrm{e}^{-i{\\hat{H}t}/{\\hbar}}`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."}),` In the Heisenberg picture the state vectors
are time-independent:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\left|\\psi\\right\\rangle_H \\equiv \\left|\\psi(t=0)\\right\\rangle=\\exp{i{\\hat{H}}t/{\\hbar}} \\left|\\psi(t)\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`Therefore, the results of measurements are the same in
both pictures:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\left\\langle\\psi(t)\\right|\\hat{A}\\left|\\psi(t)\\right\\rangle = \\left\\langle\\psi\\right|_H \\hat{A}_H \\left|\\psi\\right\\rangle_H."})}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-2002",children:[`
`,i.jsxs(e.p,{children:["Dalibard Basdevant. Quantum Mechanics. Springer-Verlag, 2002 ",i.jsx(e.a,{href:"#user-content-fnref-2002","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-2006",children:[`
`,i.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. The Quantum Mechanics Solver. Springer-Verlag, 2006. ",i.jsx(e.a,{href:"#user-content-fnref-2006","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})," ",i.jsxs(e.a,{href:"#user-content-fnref-2006-2","data-footnote-backref":"","aria-label":"Back to reference 2-2",className:"data-footnote-backref",children:["↩",i.jsx(e.sup,{children:"2"})]})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-ct1",children:[`
`,i.jsxs(e.p,{children:["Quantum Mechanics, Volume 1. ",i.jsx(e.a,{href:"#user-content-fnref-ct1","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-ct2",children:[`
`,i.jsxs(e.p,{children:["Quantum Mechanics, Volume 2. ",i.jsx(e.a,{href:"#user-content-fnref-ct2","data-footnote-backref":"","aria-label":"Back to reference 4",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`We will follow this route in the discussion of the two-level
system and the Bloch sphere. `,i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 5",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function zse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(cj,{...t})}):cj(t)}const hj=Object.freeze(Object.defineProperty({__proto__:null,default:zse,frontmatter:$se},Symbol.toStringTag,{value:"Module"})),Wse="/assets/static/lecture10_pic1.Cedo5095.png";function me({href:t,caption:e,id:n,width:a="100%",alt:r,className:s,title:o}){return i.jsxs("figure",{id:n,className:s,style:{margin:"1.5em 0"},children:[o&&i.jsx("h3",{style:{marginTop:0,marginBottom:"0.5em"},children:o}),i.jsx("img",{src:t,alt:r||e,width:a,style:{maxWidth:a,height:"auto",display:"block",margin:"0 auto"}}),i.jsx("figcaption",{style:{marginTop:"0.75em",fontStyle:"italic",textAlign:"center"},children:e})]})}const Use={author:["Fred Jendrzejewski"],order:10,title:"Lecture 10 - Propagation of light in dielectric media"};function uj(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will study the propagation of light through a
dielectric medium like atomic gases. We will see that it is
characterized by the susceptibility and discuss the case of two-level
atoms. This sets the stage for the laser.`}),`
`,i.jsx(e.p,{children:`Until now we focused on the properties of atoms and how can control them
through external fields. In this lecture, we will focus much more on the
properties of the light passing through a medium.`}),`
`,i.jsx(e.h2,{children:"Introduction"}),`
`,i.jsxs(e.p,{children:[`We would like to study the propagation of a electric field through an
ensemble of atoms as visualized in Fig.
`,i.jsx(e.a,{href:"#fig-dielectric",children:"1"}),`. We assume a
mono-chromatic plane wave to come in, such that we can write down the
electric field as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{E}_{in}= E_0 \\vec{\\epsilon}e^{i kz -i\\omega_L t}"})}),`
`,i.jsx(e.p,{children:"This incoming field will polarize the gas of dipoles."}),`
`,i.jsx(me,{id:"fig-dielectric",href:Wse,caption:"Propagation of a light field through a dielectric medium"}),`
`,i.jsx(e.p,{children:"For the propagation we will do the following assumptions:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The atoms are independent."}),`
`,i.jsx(e.li,{children:"We can describe them as small dipoles."}),`
`,i.jsx(e.li,{children:"We can describe the light in the semi-classical approximation."}),`
`]}),`
`,i.jsx(e.p,{children:`We have already employed this picture in in the slightly abstract
formulation in Lecture 4, where we studied the evolution of the atoms in
electric fields and in Lecture 6
concerning the transition rules in hydrogen. This allows us to calculate
the expectation value of the dipole operator through:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle \\vec{D}\\rangle = \\left\\langle\\psi\\right|\\vec{D}\\left|\\psi\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"As already discussed in Lecture 6 we can then write it down as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle \\vec{D}\\rangle = E_0 \\vec{\\alpha}"})}),`
`,i.jsxs(e.p,{children:["We call ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"})," the ",i.jsx(e.strong,{children:"polarizability"}),`. For a large gas
with a constant density of dipoles `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),`, we obtain a macroscopic
polarization of:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{P} = n \\langle \\vec{D}\\rangle\\\\
= n \\vec{\\alpha} E_0`})}),`
`,i.jsx(e.p,{children:`This leads us then to identify the susceptibility of the
dielectric medium:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\vec{P} = \\epsilon_0 \\chi \\vec{E}\\\\
\\chi = \\frac{n \\alpha}{\\epsilon_0}`})}),`
`,i.jsx(e.p,{children:"To notes to this relation:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:`The linear relationship between polarization and electric field is
only valid for weak electric fields. For stronger fields, higher
order terms become important. They are the fundamental ingredient of
non-linear optics. In general, we can write:`}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    P_i = \\epsilon_0 \\sum_{j}\\chi_{ij}^{1}E_j+\\epsilon_0 \\sum_{jk}\\chi_{ijk}^{2}E_jE_k + ...



`})}),`
`,i.jsxs(e.ol,{start:"2",children:[`
`,i.jsxs(e.li,{children:["Given that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\chi"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"}),` are proportional to
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\langle D \\rangle"}),`, they can be complex. We will see that real and
imaginary part have very different interpretations.`]}),`
`]}),`
`,i.jsx(e.h2,{children:"Propagation of light"}),`
`,i.jsx(e.p,{children:`At this stage we would like to understand the propagation of an electric
field through such a polarized medium. The general Maxwell equation
actually reads:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\nabla^2 \\vec{E}-\\frac{1}{c^2}\\frac{\\partial^2 \\vec{E}}{\\partial t^2}= \\frac{1}{\\epsilon_0 c^2}\\frac{\\partial^2 \\vec{P}}{\\partial t^2}`})}),`
`,i.jsxs(e.p,{children:[`This equation can be massively simplified by only
looking at a slowly-evolving envelope `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathcal{E}(r,t)"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathcal{P}(r,t)"}),", which are defined through:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{E} = \\mathcal{E} e^{ikz-i \\omega_L t}\\\\
\\vec{P} = \\mathcal{P} e^{ikz-i \\omega_L t}\\\\`})}),`
`,i.jsxs(e.p,{children:["As shown in more detail in ",i.jsx(e.a,{href:"http://lukin.physics.harvard.edu/wp-uploads/Papers/285b_notes_2005-1.Lily.pdf",children:"Chapter 4 of Lukin"}),", the Maxwell equation reduces then to:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{\\partial}{\\partial z}\\mathcal{E}+\\frac{1}{c}\\frac{\\partial}{\\partial t}\\mathcal{E} = \\frac{ik}{2\\epsilon_0}\\mathcal{P}"})}),`
`,i.jsx(e.p,{children:`This equation becomes especially transparent, if we investigate it for
very long times, such that we can perform a Fourier transformation and
obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{\\partial}{\\partial z}\\mathcal{E}= i\\frac{\\omega}{c}\\mathcal{E} +\\frac{ik}{2\\epsilon_0}\\mathcal{P}"})}),`
`,i.jsx(e.p,{children:"Finally, we can use the definition of the susceptibility to write:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{\\partial}{\\partial z}\\mathcal{E}= i\\left(\\frac{\\omega}{c} +\\frac{k}{2} \\chi(\\omega)\\right) \\mathcal{E}\\\\
\\mathcal{E}(\\omega, z) =E_0 e^{i\\left(\\frac{\\omega}{c} +\\frac{k}{2}\\chi(\\omega)\\right)z}`})}),`
`,i.jsx(e.h3,{children:"Absorption and refraction"}),`
`,i.jsxs(e.p,{children:[`The meaning of the susceptibility becomes especially clear for a
continuous wave, where `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega\\rightarrow 0"})," and we obtain:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\mathcal{E}(\\omega\\rightarrow 0, z) =E_0 e^{i\\frac{k\\chi(0)}{2} z}"})}),`
`,i.jsx(e.p,{children:"We can then see that:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The imaginary part of the susceptibility leads to absorption on a
scale `,i.jsx(e.code,{className:"language-math math-inline",children:"l^{-1} = \\frac{k}{2}\\text{Im}(\\chi(0))"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The real part describes a phase shift. The evolution of the electric
field can be seen as propagating with a wavevector
`,i.jsx(e.code,{className:"language-math math-inline",children:"k \\rightarrow k +\\frac{k}{2}\\text{Re}(\\chi(0))"}),`, so the dielectric
medium has a refractive index `,i.jsx(e.code,{className:"language-math math-inline",children:"n = 1 + \\frac{\\text{Re}(\\chi(0))}{2}"})]}),`
`]}),`
`]}),`
`,i.jsx(e.h3,{children:"Dispersion"}),`
`,i.jsx(e.p,{children:`If the electric field has a certain frequency distribution, we might
have to perform the proper integral to obtain the time evolution, i.e.:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\mathcal{E}(t, z) =\\int d\\omega e^{-i\\omega t}\\mathcal{E}(\\omega,0) e^{i\\left(\\frac{\\omega}{c} +\\frac{k}{2}\\chi(\\omega)\\right)z}"})}),`
`,i.jsx(e.p,{children:"To solve the problem we can develop the susceptibility:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\chi(\\omega) = \\chi(0)+\\frac{d\\chi}{d\\omega}\\omega"})}),`
`,i.jsx(e.p,{children:"And we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\mathcal{E}(t, z) =e^{izk\\chi(0)/2}
\\mathcal{E}(t-z/v_g, 0)\\\\
v_g = \\frac{c}{1+\\frac{\\omega_L}{2}\\frac{d\\chi}{d\\omega}}`})}),`
`,i.jsx(e.p,{children:`So the group velocity is controlled by the derivative of the
susceptibility !`}),`
`,i.jsx(e.h2,{children:"Two level system"}),`
`,i.jsxs(e.p,{children:[`After this rather general discussion, we will now employ it to
understand the action of two-level systems on the travelling beam. So we
will now focus on the influence of the atoms on the field in comparision
with the previous discussions. Further, we will have to take into
account the finite lifetime of the excited states in a phenomenological
manner. For a two level system with excited state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"}),` and groundstate
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),`, we can directly write down the
wavefunction as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\gamma_g\\left|g\\right\\rangle+ \\gamma_e\\left|e\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"In this basis, the dipole element reads:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\langle D\\rangle = \\left\\langle e\\right|D\\left|g\\right\\rangle \\gamma_e^*\\gamma_g\\\\
= d \\sigma_{eg}`})}),`
`,i.jsx(e.p,{children:"In the second line we introduced the notations:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"d = \\left\\langle e\\right|D\\left|g\\right\\rangle"})}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The product ",i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma_e^*\\gamma_g"}),` can identified with the
off-diagonal component of the density operator
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma=\\left|\\psi\\right\\rangle\\left\\langle\\psi\\right|"}),`.
We will often call it `,i.jsx(e.strong,{children:"coherence"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`The Hamiltonian of this model reads then in the rotating
wave-approximation:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H} = 0\\left|g\\right\\rangle\\left\\langle g\\right|+\\hbar\\delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\hbar\\Omega\\left[\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|\\right]\\\\
\\Omega = d E/\\hbar`})}),`
`,i.jsx(e.p,{children:`This is exactly the model that we discussed in the
lectures 3 and 4 [@Jendrzejewskib; @Jendrzejewskia]. We then found that
the time evolution might be described via:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i\\dot{\\gamma}_g(t) = \\Omega \\gamma_e\\\\
i\\dot{\\gamma}_e(t) = \\delta \\gamma_e +\\Omega \\gamma_g\\\\`})}),`
`,i.jsx(e.p,{children:`We can combine them to the components of the density
operator, which then read:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sigma_{ij} = c_{i}^*c_j"})}),`
`,i.jsx(e.p,{children:`From these coefficients, we can now obtain the evolution
of the populations:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{N}_g = \\dot{\\sigma}_{gg} = \\dot{\\gamma}_{g}^*\\gamma_g+ \\gamma_{g}^*\\dot{\\gamma}_g\\\\
= i\\Omega(\\sigma_{eg}-\\sigma_{ge})\\\\
\\dot{N}_e = -\\dot{N}_g`})}),`
`,i.jsx(e.p,{children:`So the total number of atoms stays automatically
conserved. As for the coherences we obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{\\sigma}_{eg} = \\dot{\\gamma}_{e}^*\\gamma_g+ \\gamma_{e}^*\\dot{\\gamma}_g\\\\
= i\\delta \\sigma_{eg}+i (N_g-N_e)\\Omega\\\\
\\dot{\\sigma}_{ge}= -i\\delta \\sigma_{ge}-i (N_g-N_e)\\Omega`})}),`
`,i.jsx(e.p,{children:`This density operator approach allows us to introduce spontaneous decay
in a very straight-forward fashion:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The time evolution of the excited state gets an additional term
`,i.jsx(e.code,{className:"language-math math-inline",children:"-\\Gamma N_e"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Atoms coming from the excited state relax to the ground state, so we
add a term `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Gamma N_e"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The coherence decays also through a term ",i.jsx(e.code,{className:"language-math math-inline",children:"-\\Gamma_2 \\sigma_{ge}"}),`. We
will use here for simplicity the limit of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Gamma_2 = \\Gamma/2"})]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"So the full equations read now:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{N}_g = i\\Omega(\\sigma_{eg}-\\sigma_{ge})+\\Gamma N_e\\\\
\\dot{\\sigma}_{ge}= -i\\delta \\sigma_{ge}-i (N_g-N_e)\\Omega-\\Gamma_2\\sigma_{ge}`})}),`
`,i.jsxs(e.p,{children:[`At this stage we can find the steady-state solutions by setting
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\dot{N}_g = \\dot{\\sigma}_{ge} = 0"}),". This leads too:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
N_e = \\frac{1}{2}\\frac{\\Omega^2 \\frac{\\Gamma_2}{\\Gamma}}{(\\omega_0-\\omega_L)^2+\\Gamma_2^2+\\Omega^2\\frac{\\Gamma_2}{\\Gamma}}`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma_2-i(\\omega_L-\\omega_0)}{\\Gamma_2^2+(\\omega_0-\\omega_L)^2+\\Omega^2\\Gamma_2/\\Gamma}`})}),`
`,i.jsx(e.p,{children:`In the next lecture we will employ those results to
study the laser.`})]})}function Vse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(uj,{...t})}):uj(t)}const dj=Object.freeze(Object.defineProperty({__proto__:null,default:Vse,frontmatter:Use},Symbol.toStringTag,{value:"Module"})),Yse="/assets/static/lecture11_pic1.C-I6sWTX.png",Gse="/assets/static/lecture11_pic2.BLkYA1nX.png",Xse="/assets/static/lecture11_pic3.D47qJQkA.png",Jse="/assets/static/lecture11_pic4.V9rwAUkn.png",Qse={author:["Fred Jendrzejewski"],order:11,title:"Lecture 11 - Laser fundamentals"};function mj(t){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"We will study some basic properties of the laser."}),`
`,i.jsxs(e.p,{children:[`In the last lecture we studied the interaction of atoms
and light. Most importantly, we saw that electric field can be dephased
and absorped through the interaction with atomic gases. In this lecture,
we will see how this interaction can be employed to induce lasing and
then study some basic properties of the laser. In the laser would most
importantly find a situation in which the light coming out of the
dielectric medium is amplified as shown in Fig.
`,i.jsx(e.a,{href:"#fig-laser",children:"1"}),"."]}),`
`,i.jsx(me,{id:"fig-laser",href:Yse,caption:"The Laser set-up"}),`
`,i.jsxs(e.p,{children:[`The crucial idea of the system is that it is possible to find a
configuration for the medium in which it has a certain gain for the
propagation of the electric field. So if the light comes into the gain
medium with amplitude `,i.jsx(e.code,{className:"language-math math-inline",children:"I_A"})," it exits with amplitude ",i.jsx(e.code,{className:"language-math math-inline",children:"G^{(0)}I_A"}),`. The
output mirror and losses lower the intensity such that the intensity. We
can describe losses by the aborption rate `,i.jsx(e.code,{className:"language-math math-inline",children:"A"}),`. The transmission of the
semi-transparent mirror is quantified by the transmission coefficient
`,i.jsx(e.code,{className:"language-math math-inline",children:"T"}),`. Putting it all together, the intensity just before reentering the
medium reads then `,i.jsx(e.code,{className:"language-math math-inline",children:"G^{(0)}I_A(1-T)(1-A)"}),`. Amplification will happen if
this intensity is higher than the initial one:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"G^{(0)}>\\frac{1}{(1-T)(1-A)}"})}),`
`,i.jsx(e.p,{children:`We will see that such a configuration is not trivial at all on the
two-level system. Then we will discuss the appropiate configuration for
lasing and a few properties of the laser.`}),`
`,i.jsx(e.h2,{children:"The two level system"}),`
`,i.jsx(e.p,{children:`In the last lecture, we saw that the two-level system might be described
by the following rate equations:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{N}_g = i\\Omega(\\sigma_{eg}-\\sigma_{ge})+\\Gamma N_e\\\\
\\dot{\\sigma}_{ge}= -i\\delta \\sigma_{ge}-i (N_g-N_e)\\Omega-\\frac{\\Gamma}{2}\\sigma_{ge}`})}),`
`,i.jsx(e.p,{children:"The definitions were:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"})," is the strength of the Rabi coupling."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\delta"})," the detuning."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\Gamma"})," is the lifetime of the excited state."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"N_g"})," the groundstate population."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["And ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_{g,e}"}),` is the coherence
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_{g,e} = \\gamma_g^* \\gamma_e"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\Gamma_2"}),` is the lifetime of the coherence. For the moment we will
work in the limit `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Gamma_2 = \\frac{\\Gamma}{2}"}),`. Let we will relax
this point a bit.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`At this stage we can find the steady-state solutions by setting
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\dot{N}_g = \\dot{\\sigma}_{ge} = 0"}),". This leads too:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
N_e = \\frac{1}{2}\\frac{\\Omega^2}{2\\delta^2+\\Gamma^2/2+\\Omega^2}`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma-i2\\delta}{2\\delta^2+\\Gamma^2/2+\\Omega^2}`})}),`
`,i.jsx(e.p,{children:`We will now discuss these results in the two important regimes of very
weak and very strong coupling. The first one is important for probe
experiments, while the second one is typically the one, where we would
like to operate a laser.`}),`
`,i.jsx(e.h3,{children:"Linear response"}),`
`,i.jsxs(e.p,{children:["For very small coupling strength we can neglect the ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),` dependence
in the coherence and we obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sigma_{ge} = \\frac{\\Omega}{2}\\frac{\\delta+i\\Gamma/2}{\\Gamma^2/4+\\delta^2}"})}),`
`,i.jsxs(e.p,{children:["We can now plug this into the dipole element ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`D = d \\sigma_{eg}\\\\
D = \\frac{d^2}{2}\\frac{\\delta-i\\Gamma/2}{\\Gamma^2/4+\\delta^2}E`})}),`
`,i.jsxs(e.p,{children:[`In the second line, we used the relationship
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = dE"}),` from lecture 4 [@Jendrzejewskia]. We can then directly
read of the polarizability and hence the susceptibility, which was
defined through `,i.jsx(e.code,{className:"language-math math-inline",children:"D = \\alpha E"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\alpha =\\frac{d^2}{2}\\frac{\\delta-i\\Gamma/2}{\\Gamma^2/4+\\delta^2}"})}),`
`,i.jsxs(e.p,{children:["On resonance ",i.jsx(e.code,{className:"language-math math-inline",children:"\\delta=0"})," we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\alpha(0) =-i\\frac{d^2}{\\Gamma}\\\\
\\chi(0) = -i\\frac{n}{\\epsilon_0}\\frac{d^2}{\\Gamma}`})}),`
`,i.jsx(e.p,{children:"We obtain now rather directly that:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Absorption is maximal on resonance."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"There is no dephasing on resonance."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`For large detunings the absorption can be increasingly neglected and
the media becomes refractive as it only keeps an optical index.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`We can then also look for maximum dephasing and find the it happens
close to the resonance. A summary can be found in Fig.
`,i.jsx(e.a,{href:"#fig-susc",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-susc",href:Gse,caption:"Susceptibility of the two level system"}),`
`,i.jsx(e.h3,{children:"Saturation"}),`
`,i.jsx(e.p,{children:`The population and coherence in the two-level system will saturate as a
substantial amount of atoms is excited. To simplify the discussion let
us rewrite the eq. the populations and coherence of the two-level system on resonance:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`N_e = \\frac{1}{2}\\frac{\\Omega^2}{\\Gamma^2/2+\\Omega^2}\\\\
\\sigma_{ge} = i\\frac{\\Omega}{2}\\frac{\\Gamma}{\\Gamma^2/2+\\Omega^2}`})}),`
`,i.jsxs(e.p,{children:["We can see that the excited fraction is limited to ",i.jsx(e.code,{className:"language-math math-inline",children:"1/2"}),`
of the atoms. So at some point the system cannot react anymore to the
additional coupling strength. This is also the reason for the decay of
the coherence at very large `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`, which is basically telling us that
the medium becomes transparent. This kind of observations motivates for
practical purposes to introduce the saturation intensity
`,i.jsx(e.code,{className:"language-math math-inline",children:"I_{sat} \\propto \\frac{\\Gamma^2}{2}"}),`, which allows us to rewrite the
previous to equations as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"N_e = \\frac{1}{2}\\frac{I/I_{sat}}{1+I/I_{sat}}"})}),`
`,i.jsx(e.p,{children:`Finally, this kind of expressions allows us also nicely to see the
direct connection between the dipole element and the number of excited
atoms:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sigma_{ge} = i\\frac{N_e}{\\Omega}"})}),`
`,i.jsx(e.p,{children:`So we never obtain a situation, where the two-level
system amplifies light. Let us look into this situation once again from
a technical point of view to see if we can obtain situations of
amplificiation.`}),`
`,i.jsx(e.h2,{children:"Rate equations"}),`
`,i.jsx(e.p,{children:`To understand laser it is best to formulate the interaction of atoms and
light in terms of rate equations for the populations, assuming that the
coherences follow adiabatically. While strict derivations can become
very tedious, they can be written down in a phenomenological way rather
easily. So we will convince us here in some limiting cases of the
usefulness.`}),`
`,i.jsx(e.p,{children:`We now would like to use the previous discussions to set up the
necessary formalism for laser amplification, which is based on the idea
of rate equations. While these equations are of phenomenological nature,
we can convince ourselves of their soundness in a first step.`}),`
`,i.jsx(e.h3,{children:"The two-level system"}),`
`,i.jsx(e.p,{children:`In the last lecture we saw that we can write down the following Bloch
equations for the two-level system on resonance:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{N}_g = -i\\Omega(\\sigma_{eg}-\\sigma_{ge})+\\Gamma N_e\\\\
\\dot{\\sigma}_{ge}= i (N_g-N_e)\\Omega-\\Gamma_2\\sigma_{ge}`})}),`
`,i.jsxs(e.p,{children:[`In a substantial amount of situations the coherences
reach the steady state much faster than the population. This can be due
to technical noise, collisions or other effects. In this case we can
assume `,i.jsx(e.code,{className:"language-math math-inline",children:"\\dot{\\sigma}_{ge}=0"})," and the solve for the populations:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\sigma_{ge}= i \\frac{\\Omega}{\\Gamma_2} (N_g-N_e)\\\\
\\sigma_{eg}-\\sigma_{ge} = -2i \\frac{\\Omega}{\\Gamma_2} (N_g-N_e)`})}),`
`,i.jsxs(e.p,{children:[`We can see in this limit that the inversion of the sign
of the dipole element would come with `,i.jsx(e.code,{className:"language-math math-inline",children:"N_g < N_e"})," ",i.jsx(e.strong,{children:`in the
steady-state`}),`. We saw previously that we cannot achieve this limit in
the two-level system.`]}),`
`,i.jsx(e.p,{children:`Having eliminated adiabatically the coherences, we end up with the
following time evolution of the population:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\dot{N}_g = 2\\frac{\\Omega^2}{\\Gamma_2}(N_e-N_g)+\\Gamma N_e\\\\"})}),`
`,i.jsx(e.p,{children:"We can now identify the three terms as:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Stimulated emission."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Stimulated absorption."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Spontaneous emission."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`We will then focus on the rate equation for the populations and attempt
to find situations, where `,i.jsx(e.code,{className:"language-math math-inline",children:"N_g < N_e"}),"."]}),`
`,i.jsx(e.h3,{children:"Optional: Rate equations for light"}),`
`,i.jsxs(e.p,{children:[`To see, when light amplification will happen, we now need to connect the
rate equations to evolution of light within the medium. One heuristic
approach is guided by the Beer-Lambert law (Ch. 4.2.3 of `,i.jsx(e.a,{href:"https://doi.org/10.1007%2F978-3-642-54322-7",children:"Hertel 2015"}),`
).`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{dI}{dz}=- N_g\\sigma I"})}),`
`,i.jsx(e.p,{children:`We would like to translate this now more precisely into
a change of photon numbers through the relation:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"I = c \\hbar\\omega N_{ph}"})}),`
`,i.jsxs(e.p,{children:[`This allows us to rewrite for a propagation wave with
`,i.jsx(e.code,{className:"language-math math-inline",children:"z = ct"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"- \\frac{N_g\\sigma I}{\\hbar \\omega} = \\frac{d}{dt}N_{ph} = \\frac{dN_g}{dt} = -\\frac{dN_e}{dt}"})}),`
`,i.jsx(e.p,{children:"This allows us to define an absorption rate:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`R_{ab} =  \\frac{\\sigma I}{\\hbar \\omega}\\\\
= \\frac{1}{N_g}\\frac{dN_g}{dt}`})}),`
`,i.jsxs(e.p,{children:["This process is just the description of ",i.jsx(e.strong,{children:`stimulated
absorption`}),`. Nothing was special about the discussion of the absorption
and we can actually also have exactly the inverse situation, where we
assume that all the atoms start out in the excited state and then lead
to an increased intensity:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{dI}{dz}= N_e\\sigma I"})}),`
`,i.jsx(e.p,{children:`Both processes are now computing and we obtain in
general:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{dI}{dz}= (N_e-N_g)\\sigma I"})}),`
`,i.jsx(e.p,{children:`So if we have most atoms in the excited state and neglect the atoms in
the ground state we can actually have light amplification. This is idea
is underlying the laser. However, we have already seen for the two-level
system that this situation is not easily achieved and we will now
discuss it a bit further.`}),`
`,i.jsx(e.h2,{children:"Lasing condition in a four-level system"}),`
`,i.jsx(e.p,{children:`To obtain in the medium, it is necessary to have an excited state
population which is higher than the population of the ground state. This
is not possible in the two-level system and in practice realized mostly
in four-level systems.`}),`
`,i.jsx(me,{id:"fig-4level",href:Xse,caption:"The 4 level system"}),`
`,i.jsx(e.p,{children:"The idea of such a system is the following:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["A strong pumping beam excites atoms into the state ",i.jsx(e.code,{className:"language-math math-inline",children:"e"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["From ",i.jsx(e.code,{className:"language-math math-inline",children:"e"}),` they decay rapidely into the state b. This is the upper
state for the lasing transition `,i.jsx(e.code,{className:"language-math math-inline",children:"b\\rightarrow a"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["We obtain lasing on the transition ",i.jsx(e.code,{className:"language-math math-inline",children:"b\\rightarrow a"}),`, which has a
decay rate of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\tau_B"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The lower state ",i.jsx(e.code,{className:"language-math math-inline",children:"a"}),` is easily depopulated through the fast
relaxation `,i.jsx(e.code,{className:"language-math math-inline",children:"a\\rightarrow g"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`We can now write down the rate equations for a weak laser, such that we
can only keep terms in first order:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\dot{N}_e = w(N_g-N_e)-N_e/\\tau_e\\\\
\\dot{N}_b = \\frac{N_e}{\\tau_e}-N_b/\\tau_b\\\\
\\dot{N}_a = \\frac{N_b}{\\tau_b}-N_a/\\tau_a\\\\
\\dot{N}_g = \\frac{N_a}{\\tau_a}-w(N_g-N_e)`})}),`
`,i.jsxs(e.p,{children:[`We can now find steady state solutions assuming that
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\tau_e, \\tau_a \\ll \\tau_b"}),". Further we assume that the pumping to ",i.jsx(e.code,{className:"language-math math-inline",children:"e"}),`
is not too strong, i.e. `,i.jsx(e.code,{className:"language-math math-inline",children:"w \\tau_e\\ll1"}),". We then obtain:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`N_e \\simeq w\\tau_e N_g\\\\
N_b \\simeq w\\tau_b N_g\\\\
N_a \\simeq w\\tau_a N_g`})}),`
`,i.jsx(e.p,{children:"We then obtain the state populations:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{N_b-N_a}{N_g + N_e + N_a + N_b}\\simeq \\frac{w\\tau_b}{1+w\\tau_b}"})}),`
`,i.jsx(e.p,{children:`Lasing is then obtained above the pumping threshold at which the gain
overcomes the losses.`}),`
`,i.jsx(e.h2,{children:"Steady-state operation of the laser"}),`
`,i.jsx(e.p,{children:`Assuming that the lasing condition is fullfilled, we can now investigate
its steady-state behavior. Quite importantly, we have to have an
electric field, which remains exactly constant after each round
trip.This implies to conditions:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The gain has to cancel the losses:"}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    G = \\frac{1}{(1-T)(1-A)}



`})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["The phase after the round trip has to be a multiple of ",i.jsx(e.code,{className:"language-math math-inline",children:"2\\pi"})]}),`
`]}),`
`,i.jsxs(e.p,{children:["For a cavity of length ",i.jsx(e.code,{className:"language-math math-inline",children:"L"}),", the wavelength ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda_p"}),` has to be an
integer fraction:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`L_{cav} = p\\lambda_p\\text{ with }p \\in  \\mathbb{N}\\\\
\\omega_p/2\\pi =p \\frac{c}{L}`})}),`
`,i.jsxs(e.p,{children:[`So the lasing will not happen at one single frequency,
but actually for any wavelength fulfilling this condition. The laser has
multiple `,i.jsx(e.strong,{children:"longitudinal modes"}),`. Some tricks allow to suppress this
multi-mode behavior, such that we obtain a very pure light source.`]}),`
`,i.jsx(me,{id:"fig-freq-laser",href:Jse,caption:"Frequency distribution of the steady-state laser"}),`
`,i.jsx(e.h2,{children:"Mode-locked operation"}),`
`,i.jsx(e.p,{children:`We have seen in the last section that a laser might act in the multimode
regime. So let us write down for simplicity the total field, where we
assume that the relative phase between modes in uncorrelated and that
the amplitude is the same for all of them. We then have:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E(t) = \\sum_{k=0}^{N-1}E_0 \\cos(\\omega_k t +\\phi_k)"})}),`
`,i.jsx(e.p,{children:"The frequency of each mode:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\omega_k = \\omega_0 + k \\Delta\\text{ with }\\Delta/2\\pi = \\frac{c}{L_{cav}}"})}),`
`,i.jsx(e.p,{children:"Summing the electric fields leads to an intensity:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"I(t)= \\frac{NE_0^2}{2}+E_0^2\\sum_{j_k}\\cos\\left[(\\omega_j-\\omega_k)t+\\phi_j-\\phi_k\\right]"})}),`
`,i.jsxs(e.p,{children:[`For uncorrelated fields this intensity is on average
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\overline{I} = \\frac{NE_0^2}{2}"}),` with temporal fluctuations in the
order of the amplitude itself `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),` For correlated fields the equations
simplify a lot and we obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`I = \\frac{1}{2}\\left|\\sum_{k=0}^{N-1}E_0e^{-i\\omega_k t}\\right|^2\\\\
 = \\frac{E_0^2}{2}\\left|\\sum_{k=0}^{N-1}e^{i k\\Delta  t}\\right|^2\\\\
 = \\frac{E_0^2}{2}\\left|\\frac{\\sin(\\frac{N\\Delta t}{2})}{\\sin(\\frac{\\Delta t}{2})}\\right|^2`})}),`
`,i.jsx(e.p,{children:"The maximum intensity in this coherent sum is now"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"I_{max} = N\\overline{I}"})}),`
`,i.jsx(e.p,{children:"We can then reach petawatt (!!) peak powers."}),`
`,i.jsx(e.p,{children:"In the next lecture, we will study how the laser is actually used for the study of entanglement"}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["The sign change appears as we are now working with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_{eg}"}),`
instead of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_{ge}"})," ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,i.jsxs(e.p,{children:["We obtain actually a speckle pattern in time here. ",i.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Kse(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(mj,{...t})}):mj(t)}const fj=Object.freeze(Object.defineProperty({__proto__:null,default:Kse,frontmatter:Qse},Symbol.toStringTag,{value:"Module"})),Zse="/assets/static/lecture12_pic1.CPWPeAgN.png",eoe="/assets/static/lecture12_pic2.DJGP6iuN.png",toe="/assets/static/lecture12_pic3.CvV7F9xO.png",noe="/assets/static/lecture12_pic4.D5vp2IUA.png",pj="/assets/static/lecture12_pic5.BIdt-gG3.png",ioe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:12,title:"Lecture 12- Entanglement"};function gj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We will discuss the creation of entangled photons and how they can be
used for the test of Bell's inequalities.`}),`
`,i.jsx(e.p,{children:`We have previously discussed how complicated gain media allow for the
amplification light. Here we will discuss how it is
used to create entangled photons and then dive into the fundamental test
of the Bell inequalities.`}),`
`,i.jsx(e.h1,{children:"Parametric down-conversion"}),`
`,i.jsx(me,{id:"fig-downcon",href:Zse,caption:"The process of spontaneous parametric down-conversion (SPDC) and photon detection setup"}),`
`,i.jsxs(e.p,{children:["Fig. ",i.jsx(e.a,{href:"#fig-downcon",children:"1"}),` shows the
schematic setup of an experiment where pairs of entangled photons are
created by a two-photon source. Two polarizers can be used to probe the
polarization of the photons.`]}),`
`,i.jsx(e.h2,{children:"Three-wave mixing"}),`
`,i.jsx(e.p,{children:`The crystal in the medium is a non-linear crystal, which means that we
can write the polarization is not just linear, but higher order terms
will play a role. We will consider for starters that there are actually
two pump waves in the same direction, which allows us to write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{NL}(z) = 2\\epsilon_0 \\chi^{(2)}\\mathcal{E}_1(z)\\mathcal{E}_2(z)e^{i(k_1+k_2)z}"})}),`
`,i.jsx(e.p,{children:`This non-linear polarizability leads to the following
equations of motion [@grynberg]:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{d\\mathcal{E}_3}{dz}e^{ik_3 z} = \\frac{i\\omega_3}{2\\epsilon_0n_3c}P_{NL}(z) \\\\
 \\frac{d\\mathcal{E}_3}{dz}= \\frac{i\\omega_3}{n_3c}\\chi^{(2)}\\mathcal{E}_1(z)\\mathcal{E}_2(z)e^{i(k_1+k_2-k_3)z} \\\\,`})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_3 = \\omega_1 + \\omega_2"}),`. We can now
additionally assume that:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The effect of the medium does not change the strong pump to much."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The amplified field is zero initially."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The oscillating phase factor ",i.jsx(e.code,{className:"language-math math-inline",children:"(k_1+k_2-k_3)z"}),` can be ignored, i.e.
where we have:`]}),`
`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    \\vec{k}_3 = \\vec{k}_1 + \\vec{k}_2



`})}),`
`,i.jsx(e.p,{children:"We can then simplify to:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\frac{d\\mathcal{E}_3}{dz}=\\frac{i\\omega_3 \\chi^{(2)}}{n_3c}\\mathcal{E}_1\\mathcal{E}_2"})}),`
`,i.jsx(e.p,{children:`So the amplitude of the mixed field increases in a
linear fashion in the non-linear medium. However, the typical amplitude
for production is below 1% for commonly used crystals.`}),`
`,i.jsx(e.h1,{children:"Polarization entangled photons"}),`
`,i.jsx(e.p,{children:`We will try to observe correlations between the photons. Two optical
fibers are collecting the pairs of photons and transmit them to the
single photon detectors. Finite collection and detection efficiency
causes only one of the two photons to be detected in most cases.
Therefore, a coincidence circuit registers events in which two photons
arrive within 30 ns. As the rate of detected individual photons is about
50 kHz, we assume that photons arriving during such a small time window
were created in the same event.`}),`
`,i.jsx(e.h2,{children:"Polarization analysis"}),`
`,i.jsxs(e.p,{children:[`To study the quantum nature of the correlations, we will employ
polarizers and later dive into Bell's inequalities as well as
entanglement in general. The interested reader will have a great time
reading through the complement 5.C of `,i.jsx(e.a,{href:"https://www.cambridge.org/core/books/introduction-to-quantum-optics/F45DCE785DC8226D4156EC15CAD5FA9A",children:"Grynberg"}),"."]}),`
`,i.jsxs(e.p,{children:[`The first emitted photon is analyzed by a rotatable polarizers
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}(\\theta)"}),", which has two detection paths ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pm1"}),`. The other
polarizer will be called `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{B}(\\theta)"}),` the only difference is that
he only acts on photon 2. Basically, we are following the `,i.jsx(e.em,{children:"Alice"}),` and
`,i.jsx(e.em,{children:"Bob"})," notation here."]}),`
`,i.jsxs(e.p,{children:[`We can express it then in our basis states of vertical polarization
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|V\\right\\rangle"}),` and horizontal polarization
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|H\\right\\rangle"}),". The polarizer aligned with ",i.jsx(e.code,{className:"language-math math-inline",children:"H"}),` has
eigenvalues:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{A} \\left|H\\right\\rangle= +\\left|H\\right\\rangle\\\\
\\hat{A} \\left|V\\right\\rangle= -\\left|V\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`To analyse the polarization of each photon in detail we can also rotate
the polarizer by an angle of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\theta"}),`. In this case the transmitted
eigenstates are:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\theta\\right\\rangle_{+} = \\cos(\\theta)\\left|H\\right\\rangle +\\sin(\\theta)\\left|V\\right\\rangle\\\\
\\left|\\theta\\right\\rangle_{-} = -\\sin(\\theta)\\left|H\\right\\rangle +\\cos(\\theta)\\left|V\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`Taking as input states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|H\\right\\rangle"}),", we simply find Malus law:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`P_+(\\theta) = \\cos(\\theta)^2\\\\
P_-(\\theta) = \\sin(\\theta)^2\\\\`})}),`
`,i.jsx(e.p,{children:`In the rotated basis we can express the polarization
operator as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{A}(\\theta) = \\left(\\begin{array}{cc}
\\cos(2\\theta)& \\sin(2\\theta)\\\\
\\sin(2\\theta)& -\\cos(2\\theta)
\\end{array}\\right)`})}),`
`,i.jsxs(e.p,{children:[`We can now employ the two polarizers to investigate the
two emitted photons as shown in Fig. `,i.jsx(e.a,{href:"#fig-polar-anal",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-polar-anal",href:eoe,caption:"Polarization analysis of correlated photons"}),`
`,i.jsxs(e.p,{children:[`The possible outcome of our experiments are the four states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\{HH, HV, VH, VV\\}"}),` and hence we could decompose our full wavefunction
as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = c_0 \\left|HH\\right\\rangle+ c_1 \\left|HV\\right\\rangle + c_2 \\left|VH\\right\\rangle + c_3\\left|VV\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`Using the two polarizers we can now start to investigate
the prefactors of the full wavefunction. Let us first look into the
results of a polarizer that is not rotated. We find:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\psi\\right|\\hat{A}\\left|\\psi\\right\\rangle=|c_0|^2 + |c_1|^2 - |c_2|^2-|c_3|^2"})}),`
`,i.jsx(e.p,{children:"For Bobs polarizer in the same position we would find:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\psi\\right|\\hat{B}\\left|\\psi\\right\\rangle=|c_0|^2+ |c_2|^2 - |c_1|^2 -|c_3|^2"})}),`
`,i.jsx(e.h2,{children:"An equivalent 2 qubit circuit"}),`
`,i.jsx(e.p,{children:`The optics setup handles two independent photons, with two outcomes
each. So we can also see the presented setup as a two qubit system. A
circuit diagram would mostly look the following way.`}),`
`,i.jsx(me,{id:"fig-two-qubit",href:toe,caption:"Realizing the two-photon experiment within a quantum circuit"}),`
`,i.jsxs(e.p,{children:[`The two photons originate from an unknown source, which is here modelled
by photons propagating through some unitary matrix `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{U}"}),`. The
measurement is performed in the last step, projecting the qubit on its
up or down state. The rotation around the x axis `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{R}_x"}),` transforms
a qubit state into a superposition. In strong analogy to the
polarization`]}),`
`,i.jsx(e.h2,{children:"A naive guess"}),`
`,i.jsx(e.p,{children:`We know that we have two photons in the system. Both can have some
polarization and clearly they are propagation in different directions.
So it does not seems to much of a stretch to guess that the total
wavefunction is the product of two superposition states:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\left|\\psi\\right\\rangle_{p} = (c_{H,1}\\left|H\\right\\rangle +c_{V,1} \\left|V\\right\\rangle)\\otimes(c_{H,2}\\left|H\\right\\rangle+c_{V,2}\\left|V\\right\\rangle) \\\\
= (c_{H,1}c_{H,2}\\left|HH\\right\\rangle + c_{V,1}c_{V,2}\\left|VV\\right\\rangle + c_{V,1}c_{H,2}\\left|VH\\right\\rangle + c_{H,1}c_{V,2}\\left|HV\\right\\rangle)`})}),`
`,i.jsx(e.h2,{children:"The experimental observation of entanglement"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`We find a lot of counts if both polarizers are set vertical or
horizontal. So the state has a `,i.jsx(e.code,{className:"language-math math-inline",children:"VV"})," and a ",i.jsx(e.code,{className:"language-math math-inline",children:"HH"}),` component, which
tells us that `,i.jsx(e.code,{className:"language-math math-inline",children:"c_0"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"c_{3}"}),` are non-zero. The equal rate of
measuring further tells us that they are roughly similiar in
amplitude, so we can write for simplicity `,i.jsx(e.code,{className:"language-math math-inline",children:"|c_0| = |c_3|"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`We find zero correlation if the polarizers are opposite. So the
mixed terms are zero `,i.jsx(e.code,{className:"language-math math-inline",children:"c_1 = c_2 = 0"})]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"In summary we can expect the Bell state can to be written as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_B\\right\\rangle = \\frac{\\left|HH\\right\\rangle +\\left|VV\\right\\rangle}{\\sqrt{2}}"})}),`
`,i.jsx(e.p,{children:"This is quite clearly incompatible with our naive guess, which means that we have an entangled state."}),`
`,i.jsx(e.h1,{children:"Optional: Quantifying entanglement"}),`
`,i.jsx(e.p,{children:`We will study the properties of the entangled states later in more
detail. However, we will take a short moment to cite two ways of
quanitfying the entanglement through the density operator:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{\\rho} = \\sum_i \\eta_i \\left|i\\right\\rangle \\left\\langle i\\right|"})}),`
`,i.jsx(e.p,{children:`The reduced density operator, which shows mixed states if there is
entanglement:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{\\rho}_1 = \\mathrm{tr}_{2}(\\hat{\\rho})"})}),`
`,i.jsxs(e.p,{children:["In this case, ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\rho}"}),` is the density operator
of a pure state and `,i.jsx(e.code,{className:"language-math math-inline",children:"\\textrm{tr}_2"}),` is the trace over the Hilbert
space of particle 2.`]}),`
`,i.jsx(e.p,{children:`The von Neumann entropy, which measures the remaining uncertainty
within a quantum state:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    S=-\\mathrm{tr}(\\hat{\\rho}\\ln\\hat{\\rho})\\\\
     = - \\sum_i \\eta_i \\ln \\eta_i = \\sum_i \\eta_i \\ln \\frac{1}{\\eta_i}`})}),`
`,i.jsx(e.p,{children:"For the Bell states of we find then:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{\\rho_B}_1 = \\frac{1}{2} \\left( \\left|H\\right\\rangle\\left\\langle H\\right| + \\left|V\\right\\rangle\\left\\langle V\\right| \\right)"})}),`
`,i.jsxs(e.p,{children:["Its corresponding entropy is ",i.jsx(e.code,{className:"language-math math-inline",children:"S=\\ln 2"}),`, the entropy of a
pure state is `,i.jsx(e.code,{className:"language-math math-inline",children:"S=0"}),"."]}),`
`,i.jsx(e.h1,{children:"Back to the correlation between distant photons"}),`
`,i.jsx(e.p,{children:`In the last sections we performed measurements on joined detection
probabilities between two independent polarizers. Quite importantly we
saw that:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Each photon is in a superposition of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|H\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|V\\right\\rangle"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Both photons are always detected in the same polarization state."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["From Fig. ",i.jsx(e.a,{href:"#fig-polar-anal",children:"2"}),` it
seems as if 1 was a bit closer to the source than 2 `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),`. So 1 is
detected a bit earlier and projected onto one of the two states.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Yet, 2 seems to instantaneously on which polarization 1 was
projected and choses the same one.`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`For our set-up the distances are small, but the same observations and
arguments hold also for very large distances between the detectors.
Einstein, Podolski and Rosen understood this long distance correlation
and decided that something was funky about quantum mechanics
[@Einstein_1935].`}),`
`,i.jsxs(e.p,{children:[`Therefore, the idea of an additional hidden shared parameter can be
introduced to explain the correlations between distant objects. We will
simply assume that the two photons have well-defined polarization with
angle `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),` from the starting point, yet this polarization varies
randomly from pair to pair between 0 and `,i.jsx(e.code,{className:"language-math math-inline",children:"2\\pi"}),`. Hence we have uniform
probability distribution `,i.jsx(e.code,{className:"language-math math-inline",children:"\\rho(\\lambda) = \\frac{1}{2\\pi}"}),`. The
measurement of the polarizers can then simply be modelled through`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"A_{hv}(\\lambda, \\theta) =\\text{sign}\\left(\\cos2 (\\theta-\\lambda)\\right)"})}),`
`,i.jsxs(e.p,{children:[`This model reproduces nicely all the tests that we ran
previously. Namely, maximum detection for HH and VV as well as zero
correlation for `,i.jsx(e.code,{className:"language-math math-inline",children:"HV"}),`. They can be nicely compared through the
correlation coefficient `,i.jsx(e.code,{className:"language-math math-inline",children:"E(\\theta_1,\\theta_2)"}),`. The particularly
perturbing case is that this simple model for hidden parameters works
even perfectly well in the case of `,i.jsx(e.code,{className:"language-math math-inline",children:"45^\\circ"}),` angles. So is there any
measurable difference between our observations and the hidden variable
models ?`]}),`
`,i.jsx(me,{id:"fig-corr",href:noe,caption:"Correlation coefficient"}),`
`,i.jsx(e.h1,{children:"Bell's theorem"}),`
`,i.jsxs(e.p,{children:[`Bell posed the previous discussion on a more general and quite simple
footing `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physicsphysiquefizika.1.195",children:"Bell 1964"})," and later extended by ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.23.880",children:"Clauser, Horner, Shimony, Holt"}),`. For the hidden parameter we need just a standard
density distribution with:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\rho(\\lambda)\\geq 0\\\\
\\int d\\lambda \\rho(\\lambda) = 1`})}),`
`,i.jsxs(e.p,{children:[`We additionally should describe the polarizer by some function that
takes the value `,i.jsx(e.code,{className:"language-math math-inline",children:"\\pm 1"}),` depending on the angle of the polarizer and the
hidden variable:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|A(\\lambda, \\theta_1) |= |A(\\lambda, \\theta_2) | =1"})}),`
`,i.jsxs(e.p,{children:["In the experiment we now have two polarizers ",i.jsx(e.code,{className:"language-math math-inline",children:"A"}),` for
Alice and `,i.jsx(e.code,{className:"language-math math-inline",children:"B"}),` for Bob, which we will allow to be in some position
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\theta"})," as visualized in Fig. ",i.jsx(e.a,{href:"#fig-bell",children:"5"}),"."]}),`
`,i.jsx(me,{id:"fig-bell",href:pj,caption:"A Bell experiment"}),`
`,i.jsx(e.p,{children:"We will now calculate the the expectation value for joint detection:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E(\\theta_1, \\theta_2)=\\overline{A(\\theta_1)B(\\theta_2)}-\\overline{A(\\theta_1)}~\\overline{B(\\theta_2)}"})}),`
`,i.jsx(e.p,{children:`We can simplify further for equal probability of having
H or V polarization, which leads too:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E(\\theta_1, \\theta_2)=\\overline{A(\\theta_1)B(\\theta_2)}\\\\
 =\\int d\\lambda  A(\\lambda, \\theta_1)B(\\lambda, \\theta_2)`})}),`
`,i.jsx(e.p,{children:`Bells inequalities are then studying the correlations
between photons in four different configuations:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`s(\\lambda, \\theta_1, \\theta_1', \\theta_2, \\theta_2')= A(\\lambda, \\theta_1)B(\\lambda, \\theta_2)-A(\\lambda, \\theta_1)B(\\lambda, \\theta_2') +A(\\lambda, \\theta_1')B(\\lambda, \\theta_2)+A(\\lambda, \\theta_1')B(\\lambda, \\theta_2')\\\\
= A(\\lambda, \\theta_1)(B(\\lambda, \\theta_2)-B(\\lambda, \\theta_2'))+A(\\lambda, \\theta_1')(B(\\lambda, \\theta_2)+B(\\lambda, \\theta_2'))\\\\
= \\pm 2`})}),`
`,i.jsx(e.p,{children:`We actually have no access to the hidden parameter, so
we are looking for its average value:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`S = \\int d\\lambda \\rho(\\lambda) s(\\lambda, \\theta_1, \\theta_1', \\theta_2, \\theta_2')\\\\
-2\\leq S\\leq 2`})}),`
`,i.jsx(e.p,{children:`And this value can now be measured experimentally as we
can identify:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"S = E(\\theta_1, \\theta_2)-E(\\theta_1, \\theta_2')+E(\\theta_1', \\theta_2)+E(\\theta_1', \\theta_2')"})}),`
`,i.jsx(e.p,{children:`This is known as the Bell--Clauser--Horn--Shimony--Holt
(CHSH) inequalities.`}),`
`,i.jsx(e.h2,{children:"The inconsistency between hidden parameters and quantum mechanics"}),`
`,i.jsx(e.p,{children:`We can now go again through the predictions of quantum mechanics and
test if there is a region of interest in which we should observe a
violation of the CHSH inequalities. Actually there is an important
configuration at which we should break them rather violantly namely for:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`|\\theta_1-\\theta_2| =\\frac{\\pi}{8}(22.5^\\circ)\\\\
|\\theta_1'-\\theta_2| =\\frac{\\pi}{8}(22.5^\\circ)\\\\
|\\theta_1'-\\theta_2'| =\\frac{\\pi}{8}(22.5^\\circ)\\\\
|\\theta_1-\\theta_2'| =\\frac{3\\pi}{8}(67.5^\\circ)\\\\`})}),`
`,i.jsxs(e.p,{children:["Here, we expect to have ",i.jsx(e.code,{className:"language-math math-inline",children:"S= 2\\sqrt{2}"}),`. So to test Bells
inequalities we have to measure the joint probabilities in rather
unusual angles. This also explains why quantum mechanics and local
hidden variables seem so similiar in this kind of experiments, the
biggest differences are hard to see accidentally.`]}),`
`,i.jsx(e.h2,{children:"The experimental test"}),`
`,i.jsx(e.p,{children:"We can now study the correlations for the following configuration."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\theta_1 = 0 \\text{ and }\\theta_1' = \\frac{\\pi}{4}\\\\
\\theta_2 = \\frac{\\pi}{8} \\text{ and }\\theta_2' = \\frac{3\\pi}{8}\\\\`})}),`
`,i.jsx(me,{id:"fig-measure",href:pj,caption:"Correlation measurements"}),`
`,i.jsxs(e.p,{children:[`In the figure above we present correlation measurement between the two photons measured with the
setup shown in the second figure. One of the rotatable polarizers stays at an angle
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma \\in \\{ 0^\\circ, 45^\\circ, 90^\\circ, 135^\\circ \\}"}),` while the
other polarizer is rotated counter-clockwise in small steps between
`,i.jsx(e.code,{className:"language-math math-inline",children:"0^{\\circ}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"360^{\\circ}"}),`. Experimentally we observe quite frequently values above 2. However,
please be aware that there are a lot of loopholes in our test. The most
obvious ones are:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Position of the polarizers is not random."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The detectors are not well separated."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`Other loopholes exist, but all realistically known loopholes have been
closed over the course of the last three decades with examples from `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.115.250401",children:"Gustina et al."}),", ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.115.250402",children:"Shalm et al."})," and ",i.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature15759",children:"Hensen et al."}),"."]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`The exact order does not matter, but they are most certainly not
at exactly the same distance from the source `,i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function aoe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(gj,{...t})}):gj(t)}const xj=Object.freeze(Object.defineProperty({__proto__:null,default:aoe,frontmatter:ioe},Symbol.toStringTag,{value:"Module"})),roe="/assets/static/lecture13_pic1.DoiP_ijC.png",soe="/assets/static/lecture13_pic2.UWhdBRNo.png",ooe="/assets/static/lecture13_pic3.BFua-xd5.png",loe="/assets/static/lecture13_pic4.CeXzndSu.png",coe="/assets/static/lecture13_pic5.mOjb_wfM.png",hoe="/assets/static/lecture13_pic6.D2ikgDNf.png",uoe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:13,title:"Lecture 13 - Atoms with many electrons"};function yj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`After our discussion of extremely simple atoms like hydrogen and helium,
we will now discuss the most important properties of more complex atoms.
We will see, how we can categorize them and discuss some of the general
properties`}),`
`,i.jsx(e.p,{children:`We started the discussion of atoms in lecture 3 by an extremely simple
and powerful model, the two-level system . We then moved
on to discuss how it can emerge within the hydrogen atom and the Helium
atom. For both of these we dived again into simplified schemes.
Especially for Hydrogen, we saw in lecture 7 the exploding complexity of
the models as we tried to describe it. If we now want
to leave these rather academic problems and turn to the other widely
used atoms, molecules etc, we have towards effective models for two
reasons:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Analytical solutions do not exist."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Full numerical solutions become extremely and expansive."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`A particularly instructive discussion of the ineffeciency of brute force
numerical methods was given by Kenneth Wilson, the father of the
renormalization group, in Sec 3 of `,i.jsx(e.a,{href:"http://dx.doi.org/10.1016/0001-8708(75)90149-8",children:"Wilson 1975"}),"."]}),`
`,i.jsx(me,{id:"fig-toy",href:roe,caption:"A toy model, exemplifying the problem of direct numerical analysis"}),`
`,i.jsxs(e.p,{children:["The main idea is plotted in Fig. ",i.jsx(e.a,{href:"#fig-toy",children:"1"}),` and its description in the words of Kenny Wilson can
be found in Fig. `,i.jsx(e.a,{href:"#fig-ineff",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-ineff",href:soe,caption:"On the inefficiency of brute force numerics"}),`
`,i.jsx(e.p,{children:`We will come back to different experimental approaches to solve problems
for which we cannot devise effective theories at a later stage, when we
discuss quantum simulation and quantum computation with atomic systems.
But first we will try to gain a good understanding of atoms with many
electrons.`}),`
`,i.jsx(e.h1,{children:"Atoms with Many Electrons"}),`
`,i.jsx(e.p,{children:`As already discussed before, the N electron system cannot be solved in
its full complexity, so we have to walk through the different levels of
physical effects to understand what is going on. We will start out with
the simplest model, which consists of`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"N electrons without spin"}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Bound to the point-like nucleus of charge ",i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),`, which is supposed to
be not moving.`]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"In natural units, the Hamiltonian can be written as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\sum_i^N \\left(-\\frac{1}{2} \\vec{\\nabla}^2_{r_i} - \\frac{Z}{r_i} \\right) + \\sum_{i<j} \\frac{1}{r_{ij}}."})}),`
`,i.jsxs(e.p,{children:[`The system is visualized in Fig.
`,i.jsx(e.a,{href:"#fig-three-ele",children:"3"}),"."]}),`
`,i.jsx(me,{id:"fig-three-ele",href:ooe,caption:"Charge distribution of three electrons bound to the nucleus"}),`
`,i.jsx(e.p,{children:"As before the Hamiltonian has two contributions:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The well understood binding of each electron to the nucleus, which
allows us to make the connection with the hydrogen orbitals.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The interaction between the electrons, which couples all the
orbitals.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["How can we deal with the ",i.jsx(e.code,{className:"language-math math-inline",children:"1/r_{ij}"}),` terms? If many electrons are
contained in the system we cannot ignore the influence of the
electron-electron interaction on the system, which was already a
questionable approximation in the Helium atom.`]}),`
`,i.jsx(e.h1,{children:"Central Field Approximation"}),`
`,i.jsxs(e.p,{children:[`But we can bring back the system to the well-known problems with
spherical symmetry by splitting the interaction into two parts. One will
be assumed to have spherical symmetry and will be written as
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\sum_i S(r_i)"}),` and the rest will be treated as a perturbation. So we
obtain the Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H} = \\hat{H}_s + \\hat{H}_1\\\\
\\hat{H}_s = \\sum_i^N \\left(-\\frac{1}{2} \\vec{\\nabla}^2_{r_i} + V_\\textrm{cf}(r_i) \\right)\\\\
V_\\textrm{cf} (r_i) = - \\frac{Z}{r_i} + S(r_i),`})}),`
`,i.jsx(e.p,{children:`The perturbation is then difference between the
spherically symmetric part of the interaction and the true
electron-electron interaction:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_1 = \\sum_{i<j} \\frac{1}{r_{ij}} - \\sum_i S(r_i)"})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"S(r_i)"}),` describes now the screening of the nucleus due
to the other electrons. This function interpolates between (see
`,i.jsx(e.a,{href:"#fig-screening",children:"4"}),"):"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"V_\\textrm{cf} (\\vec{r}_i) = \\left\\{ \\begin{array}{ccc} -\\frac{Z}{r_i} &\\text{for}& r\\to 0 \\\\ \\\\ -\\frac{Z-N+1}{r_i} & \\text{for} & r\\to\\infty  \\end{array} \\right."})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`For very small distances the electron mainly sees the strong
attraction of the nucleus.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`For very large distances the other electrons mostly screen the
charge of the nucleus and electron feels the `,i.jsx(e.code,{className:"language-math math-inline",children:"1/r"}),` potential of the
hydrogen atom.`]}),`
`]}),`
`]}),`
`,i.jsx(me,{id:"fig-screening",href:loe,caption:"The screening as a function of distance"}),`
`,i.jsxs(e.p,{children:[`We can now focus on the study of the part with spherical symmetry
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_s"}),`. Given its symmetry, we can once again use the conservation
of orbital angular momentum (see Lecture 5). As a
result, the wave function can be a product state of single-particle wave
functions:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_\\textrm{cf} (\\vec{r}_1 , \\cdots , \\vec{r}_\\textrm{n} ) = \\psi_1 (\\vec{r}_1) \\cdot \\psi_2(\\vec{r}_2) \\cdot \\cdots \\psi_\\textrm{n}(\\vec{r}_\\textrm{n}),"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_i(\\vec{r}_i)"}),` are solutions of the
Schrödinger equation:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left( - \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}_i} + V_\\textrm{cf} (r_i) \\right) \\psi_i (\\vec{r}_i) = E_i \\psi_i(\\vec{r}_i)."})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_i"}),` can be split up into a radial and an angular
part:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_i = \\psi(nlm)_i = Y_{lm} (\\theta, \\varphi) \\cdot R_{nl} (r)."})}),`
`,i.jsxs(e.p,{children:["For the radial part we get ",i.jsx(e.code,{className:"language-math math-inline",children:"u(r) = r\\cdot R(r)"}),`. Thus,
`,i.jsx(e.code,{className:"language-math math-inline",children:"u(r)"})," solves the radial Schrödinger equation:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left( - \\frac{1}{2} \\frac{d^2}{dr^2} + V_\\textrm{cf}(r) + \\frac{l(l+1)}{2r^2}\\right) u_{nl} = E_{nl} u_{nl} (r)."})}),`
`,i.jsxs(e.p,{children:["The major difference to the ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{H}"}),` atom is that
the degeneracy of the `,i.jsx(e.code,{className:"language-math math-inline",children:"l"})," levels is lifted because of ",i.jsx(e.code,{className:"language-math math-inline",children:"V_\\textrm{cf}"}),"."]}),`
`,i.jsx(e.h2,{children:"On the determination of the effective potential"}),`
`,i.jsxs(e.p,{children:[`We will not discuss here the different techniques to derive the central
field in detail as this is quickly diving into the different numerical
techniques of many-body systems. A first discussion of the different
approaches can be found in chapter 10 of `,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_10",children:"Hertel 2015"}),`. The different
levels of sophistication are:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"Thomas-Fermi"})," model, which assumes that the ",i.jsx(e.code,{className:"language-math math-inline",children:"N"}),` electrons
behave like a Fermi gas inside the `,i.jsx(e.code,{className:"language-math math-inline",children:"Z/r"})," potential."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The Hartree method, in which the effective potential is iteratively
recalculated based on the obtained solutions to the radial
Schrödinger equation.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The Hartree Fock method, in which we also take into account the
proper symmetrization of the wavefunctions.`}),`
`]}),`
`]}),`
`,i.jsx(e.h1,{children:"Filling up the shells"}),`
`,i.jsx(e.p,{children:`If we can ignore the spin for the determination of the energy levels, we
have the following quantum numbers:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"n"}),", which is electron shell."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"l"}),", which is the orbital angular momentum with ",i.jsx(e.code,{className:"language-math math-inline",children:"l<n"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"s"}),", which is the spin of the electron and it can be ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pm 1/2"})]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["As the electrons are fermions we can fill up each of the ",i.jsx(e.code,{className:"language-math math-inline",children:"nl"}),` states
with two of them. We then write down the configuration of the electron
by writing down the numbers of electrons per `,i.jsx(e.code,{className:"language-math math-inline",children:"nl"}),` configuration. So we
get the periodic table shown in Fig. `,i.jsx(e.a,{href:"#fig-measure",children:"Periodic table"}),". We will typically use the following notation:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["A ",i.jsx(e.em,{children:"configuration"}),` is the distribution of the electrons over the
different orbits.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Electrons with the same ",i.jsx(e.code,{className:"language-math math-inline",children:"n"})," are part of the same ",i.jsx(e.em,{children:"shell"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Electrons with the same ",i.jsx(e.code,{className:"language-math math-inline",children:"n"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"l"}),` are part of the same
`,i.jsx(e.em,{children:"sub-shell"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The inner shells are typically filled and form the ",i.jsx(e.em,{children:"core"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The outermost shell is typically named the ",i.jsx(e.em,{children:"valence"})," shell."]}),`
`]}),`
`]}),`
`,i.jsx(me,{id:"fig-measure",href:coe,caption:"Periodic table"}),`
`,i.jsx(e.h1,{children:"Alkali Atoms"}),`
`,i.jsx(e.p,{children:`Alkali atoms are the simplest to understand and widely used in the field
of laser cooling. The electron configurations are`}),`
`,i.jsx(e.h4,{children:"Examples."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Li}"}),": 1s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2s"]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Na}"}),`:
1s`,i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3s"]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{K}"}),`:
1s`,i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 3p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"}),` 4s,
so we fill up the 4s orbitals before the 3d orbitals.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Rb}"}),`:
1s`,i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 3p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3d",i.jsx(e.code,{className:"language-math math-inline",children:"^{10}"})," 4s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 4p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"}),` 5s,
so we fill up the 5s orbitals before the 4d and 4f orbitals.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Cs}"}),`:
1s`,i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 2p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 3p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 3d",i.jsx(e.code,{className:"language-math math-inline",children:"^{10}"})," 4s",i.jsx(e.code,{className:"language-math math-inline",children:"^2"})," 4p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," 4d",i.jsx(e.code,{className:"language-math math-inline",children:"^{10}"})," 5s",i.jsx(e.code,{className:"language-math math-inline",children:"^{2}"})," 5p",i.jsx(e.code,{className:"language-math math-inline",children:"^6"}),` 6s,
so we fill up the 6s orbitals before the 4f, 5d and 5f orbitals.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`This structure can be nicely understood by the idea of screening as
introduced in the central field approximation. Consider for example the
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Na}"}),` for which one electron has to be on the third shell.
Within the hydrogen atom the 3s, 3p and 3d are degenerate, however the
screening will lift this degeneracy.`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Electrons in the s-shell spend a lot of time close to the nucleus
and fill a strong binding potential, i.e. they have a low energy.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`On the other extreme the electrons in the d-shell have large angular
momentum, which hinders them from getting close to the core. The 10
electrons can therefore efficiently screen the nucleus from the
electron. The energy of the d shell is therefore quite close to the
energy of the hydrogen atom.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["For ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{K}"})," the same principle applies."]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The 4s orbital is strongly shifted down to the strong nuclear
potential.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The 3d orbital is well screened by the other electrons, such that it
is of higher energy than the 4s orbit.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["We can describe this effect empirically through the ",i.jsx(e.em,{children:"quantum defect"}),`. We
simply write down the energy levels as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_{nl} \\cong -  R_{y,\\infty} \\cdot \\left( \\frac{1}{n-\\delta_l} \\right)^2,"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\delta_l"}),` is the quantum defect for a certain
value of `,i.jsx(e.code,{className:"language-math math-inline",children:"l"}),`. Some examples are summarized in Fig.
`,i.jsx(e.a,{href:"#fig-quantum-defect",children:"6"}),"."]}),`
`,i.jsx(me,{id:"fig-quantum-defect",href:hoe,caption:"The quantum defect for different alkali atoms"}),`
`,i.jsx(e.p,{children:`The effect of the quantum defect is actually so substantial that it
introduces optical transitions between the different subshells of Alkali
atoms.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For Li there is a ",i.jsx(e.code,{className:"language-math math-inline",children:"2s\\rightarrow 2p"})," transition at 671 nm."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For Na there is a ",i.jsx(e.code,{className:"language-math math-inline",children:"3s\\rightarrow 3p"})," transition at 589 nm."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For K there is a ",i.jsx(e.code,{className:"language-math math-inline",children:"4s\\rightarrow 4p"})," transition at 767 nm and 770nm."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For Rb there is a ",i.jsx(e.code,{className:"language-math math-inline",children:"5s\\rightarrow 5p"}),` transition at 780 nm and at
795nm.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["For Cs there is a ",i.jsx(e.code,{className:"language-math math-inline",children:"6s\\rightarrow 6p"}),` transition at 852 nm and at
894nm.`]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`What is the origin of these doublets ? The scaling of the splitting with
the nucleus indicates relativistic origins and the splitting is indeed
due to spin-orbit coupling, which we will discuss in the next lecture.`})]})}function doe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(yj,{...t})}):yj(t)}const bj=Object.freeze(Object.defineProperty({__proto__:null,default:doe,frontmatter:uoe},Symbol.toStringTag,{value:"Module"})),moe="/assets/static/lecture14_pic1.Bw7J0lHU.png",foe="/assets/static/lecture14_pic2.CpiKC-DB.png",poe="/assets/static/lecture14_pic3.CVi-beBw.png",goe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:14,title:"Lecture 14 - The spin in atoms with many electrons"};function wj(t){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In the last lecture we have seen that we can typically
treat complex atomic systems within the central field approximation.`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\underbrace{\\sum_i^N \\left( \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}_i} + V_\\textrm{cf} (r_i) \\right)}_{\\hat{H}_0} + \\underbrace{\\sum^N_{j>i} \\left( \\frac{1}{r_{ij}} - S(r_i) \\right)}_{\\hat{H}_1}"})}),`
`,i.jsxs(e.p,{children:[`So we we can can treat atoms through the shell structure known from the
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{H}"})," atom, but the screening lifts the ",i.jsx(e.code,{className:"language-math math-inline",children:"l"}),` degeneracy. For a
single outer electron, we have even seen how this screening can be
described by the quantum defect.`]}),`
`,i.jsx(e.p,{children:`We would now like to go beyond this simple picture and discuss the
following questions:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["How should the residual term ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_1"})," be taken into account?"]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"How do we properly take into account the Pauli principle ?"}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"How can we treat the fine-splitting ?"}),`
`]}),`
`]}),`
`,i.jsx(e.h1,{children:"On the residual coupling"}),`
`,i.jsxs(e.p,{children:[`If we ignore the residual coupling, we obtain a spherically symmetric
problem, which implies that the angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{l}_i"}),` of each
electron is conserved. This conservation will be broken by
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_{1}"}),`. However, these forces are internal, which implies that
the total angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{L} = \\sum_i \\vec{l}_i"}),` is conserved. So
we should label the states in the complex Hamiltonian by `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{L}"}),"."]}),`
`,i.jsx(e.p,{children:`The total angular momentum will then set the symmetry of the spatial
wavefunction. As already discussed in some detail for the He atom, this
has wide-reaching consquence on the spin degree of freedom through
exchange interaction.`}),`
`,i.jsx(e.h1,{children:"The Pauli principle and spin"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`According to the Pauli principle, each single-particle state can be
occupied only by one electron. After distributing all electrons over
different single-particle eigenstates ("orbitals"), the resulting
state needs to be fully antisymmetrized (Slater determinant).`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`There is a simplification for atoms with many electrons: The angular
momenta and spins of a complete subshell with
`,i.jsx(e.code,{className:"language-math math-inline",children:"n,\\,l,\\,\\{m_{-l},\\cdots,m_l\\}"}),` add to zero and can be ignored in
the further considerations ("shell structure"). Note that this is
often broken in molecular binding!`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Alkali atoms are the simplest atoms with shell structure: All but
one `,i.jsx(e.em,{children:"valence"})," electron add to ",i.jsx(e.code,{className:"language-math math-inline",children:"L=0,S=0"}),`. The ground state thus has
`,i.jsx(e.code,{className:"language-math math-inline",children:"L=0,S=1/2"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`For more complex atoms, the valence electrons couple to a total
orbital angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"L"}),` with a given symmetry according to
particle exchange.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`Let us have a look at two examples for light atoms, starting with
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{He}"}),":"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"1s^2 \\rightarrow L=0,S=0"}),". The corresponding term is ",i.jsx(e.code,{className:"language-math math-inline",children:"^1S"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"1s2s \\rightarrow L=0, \\{S=0,S=1\\}"}),`. The corresponding terms are
`,i.jsx(e.code,{className:"language-math math-inline",children:"^1S"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"^3S"}),". ."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["The electronic configuration of ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Si}"})," is:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\underbrace{1s^2 2s^2 2p^6 3s^2}_{L=0,\\,S=0} 3p^2"})}),`
`,i.jsxs(e.p,{children:["Per valence electron we have ",i.jsx(e.code,{className:"language-math math-inline",children:"l=1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"s=1/2"}),`. So we
get `,i.jsx(e.code,{className:"language-math math-inline",children:"L=0,1,2"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"S=0,1"}),". Here ",i.jsx(e.code,{className:"language-math math-inline",children:"S=1"})," means symmetry and ",i.jsx(e.code,{className:"language-math math-inline",children:"S=0"}),`
antisymmetry with respect to particle exchange. In principle we can form
the following terms:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"^1 S, ^3 S, ^1 P, ^3 P,^1 D,^3 D"})}),`
`,i.jsxs(e.p,{children:[`Which of these terms can be fully antisymmetrized? Here,
only the terms `,i.jsx(e.code,{className:"language-math math-inline",children:"^1S"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"^3P"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"^1D"}),` fulfill Pauli's principle. In
general the exchange interaction (seen in the discussion of He), will
then lower the energy of the states with high spins.`]}),`
`,i.jsxs(e.h2,{children:["Optional: Symmetry of the ",i.jsx(e.code,{className:"language-math math-inline",children:"L"})," states"]}),`
`,i.jsxs(e.p,{children:["We can construct the following ",i.jsx(e.code,{className:"language-math math-inline",children:"L"}),"-states for them:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|L=2,M_L=2\\right\\rangle = \\left|\\overbrace{1^{l_1},\\overbrace{1}^{m_{l_1}};\\overbrace{1}^{l_2},\\overbrace{1}^{m_{l_2}}}\\right\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|L=1,M_L=0\\right\\rangle = \\frac{1}{\\sqrt{2}} ( \\left|\\overbrace{1^{m_{l_1}},\\overbrace{-1}^{m_{l_2}}}\\right\\rangle - \\left|-1,1 )\\right\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|L=0,M_L=0\\right\\rangle = \\frac{1}{\\sqrt{3}}(\\left|\\overbrace{1^{m_{l_1}},\\overbrace{-1}^{m_{l_2}}}\\right\\rangle - \\left|0,0\\right\\rangle + \\left|-1,1\\right\\rangle )"})}),`
`,i.jsx(e.p,{children:`The first and third states are symmetric and the second state is antisymmetric with respect to particle
exchange.`}),`
`,i.jsx(e.h1,{children:"Fine splitting"}),`
`,i.jsx(e.p,{children:`We have already seen in the discussion of the hydrogen atom that
relativistic effects should be taken into account to fully understand
the level spectrum of different atoms. To take into account the spin, we
can decompose the Hamiltonian as follows:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\underbrace{\\sum_i^N \\left( \\frac{1}{2} \\vec{\\nabla}^2_{\\vec{r}_i} + V_\\textrm{cf} (r_i) \\right)}_{\\hat{H}_0} + \\underbrace{\\sum^N_{j>i} \\left( \\frac{1}{r_{ij}} - S(r_i) \\right)}_{\\hat{H}_1} + \\underbrace{\\sum_i^N c_i(\\vec{r}_i) \\hat{\\vec{L}}_i \\cdot \\hat{\\vec{S}}_i}_{\\hat{H}_2}`})}),`
`,i.jsxs(e.p,{children:["The term ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"}),` is from the central field and the
independent particle model. The Hamiltonian `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_1"}),` results from the
residual electrostatic interaction and the Hamiltonian `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_2"}),` comes
from the spin-orbit coupling of individual electrons.`]}),`
`,i.jsxs(e.p,{children:[`The question is now which term dominates. Since
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_2 \\propto (Z\\alpha)^2"}),", we can ignore it if ",i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),` is small. This
is the case for light atoms.`]}),`
`,i.jsxs(e.p,{children:["For our example this means that ",i.jsx(e.code,{className:"language-math math-inline",children:"^3P"}),` is the lowest energy state.
However, the triplet state has a multiplicity. Which are these states?
There has to be an additional degree of freedom. The total electronic
angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{J}} = \\hat{\\vec{L}} + \\hat{\\vec{S}}"}),` of the
atom is a conserved quantity. The basis`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|L,S,M_\\textrm{l},M_\\textrm{s}\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["is therefore not the right basis, since ",i.jsx(e.code,{className:"language-math math-inline",children:"M_\\textrm{l}"}),`
and `,i.jsx(e.code,{className:"language-math math-inline",children:"M_\\textrm{s}"})," are not conserved because of ",i.jsx(e.code,{className:"language-math math-inline",children:"LS"}),` coupling. The
correct basis is`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|L,S,J,M_\\textrm{j}\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:["Which ",i.jsx(e.code,{className:"language-math math-inline",children:"J"}),` corresponds to the ground state? If the
outermost shell is more than half filled, the maximum `,i.jsx(e.code,{className:"language-math math-inline",children:"J"}),` value is the
ground state, otherwise, the ground state has the minimum `,i.jsx(e.code,{className:"language-math math-inline",children:"J"}),` value. In
our example, `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Si}"}),": ",i.jsx(e.code,{className:"language-math math-inline",children:"^3P_0"})," is the ground state!"]}),`
`,i.jsxs(e.p,{children:[`So far, we have been concerned with the "Russell-Saunders" coupling,
also known as `,i.jsx(e.code,{className:"language-math math-inline",children:"LS"})," coupling. However, for atoms with large ",i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),`, the term
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_2"}),` in the Hamiltonian might become large, since it is
proportional to `,i.jsx(e.code,{className:"language-math math-inline",children:"(Z \\alpha)^2"}),". We can ignore ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_1"})," instead."]}),`
`,i.jsxs(e.p,{children:["According to ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_2"}),` the individual electron orbital angular
momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"l"})," pairs with the spin ",i.jsx(e.code,{className:"language-math math-inline",children:"s"}),` of the same electron to form the
total electron angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"j"}),`. This will lead us to the concept of
`,i.jsx(e.code,{className:"language-math math-inline",children:"jj"})," coupling. Let us consider carbon first (see ",i.jsx(e.a,{href:"#fig-ineff",children:"Figure 1"}),`). The ground state
reads:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\mathrm{C}: 1s^22s^22p^2."})}),`
`,i.jsx(e.p,{children:"Let us consider one excited state:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"1s^22s^22p3s."})}),`
`,i.jsx(me,{id:"fig-ineff",href:moe,caption:"The splitting of levels in the first excited P and triplet P terms of the carbon sequence"}),`
`,i.jsxs(e.p,{children:['In the figure above "The splitting of levels in the first excited ',i.jsx(e.code,{className:"language-math math-inline",children:"^1"})," P and ",i.jsx(e.code,{className:"language-math math-inline",children:"^3"}),`P terms of
the carbon sequence. As `,i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),` increases, the two electrons change their
character from being in an `,i.jsx(e.code,{className:"language-math math-inline",children:"LS"})," coupled state to a ",i.jsx(e.code,{className:"language-math math-inline",children:"jj"}),` coupled state."
It is taken from `,i.jsx("a",{href:"http://www.pearson.com.au/products/A-C-Bransden-Joachain/Physics-of-Atoms-and-Molecules/9780582356924?R=9780582356924",children:"Bransden"}),"."]}),`
`,i.jsxs(e.p,{children:["According to ",i.jsx(e.code,{className:"language-math math-inline",children:"LS"}),` coupling the total angular momentum of the two valence
electrons is `,i.jsx(e.code,{className:"language-math math-inline",children:"L=1"})," and the total spin can be ",i.jsx(e.code,{className:"language-math math-inline",children:"S=0,1"}),`. Thus, we should
expect a singlet and a triplet. For heavy atoms we can observe two
doublets instead of a singlet and a triplet. Because of the very strong
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}_i \\cdot \\hat{\\vec{S}}_i"})," coupling, ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{S}}"}),` are no longer conserved quantities. On the contrary,
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{J}}"}),` still is a conserved quantity. In very heavy atoms,
`,i.jsx(e.code,{className:"language-math math-inline",children:"l_i"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"s_i"})," couple to ",i.jsx(e.code,{className:"language-math math-inline",children:"j_i"})," for each electron ",i.jsx(e.code,{className:"language-math math-inline",children:"i"}),`. In our example we
get`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"l_1=0, s_1=\\frac{1}{2} \\qquad \\text{and} \\qquad l_2=1, s_2=\\frac{1}{2}"})}),`
`,i.jsxs(e.p,{children:["for electron ",i.jsx(e.code,{className:"language-math math-inline",children:"1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"2"})," and thus"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"j_1=\\frac{1}{2} \\qquad \\text{and}\\qquad j_2=\\frac{1}{2},\\frac{3}{2}."})}),`
`,i.jsxs(e.p,{children:["The individual ",i.jsx(e.code,{className:"language-math math-inline",children:"j_i"}),` couple to a total orbital angular
momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"J"})," in the following manner:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"J= \\left\\{ \\begin{array}{ccc}0,1 & \\text{for} & (j_1,j_2)=\\left(\\frac{1}{2},\\frac{1}{2}\\right)\\\\ && \\\\ 1,2 & \\text{for} &(j_1,j_2) = \\left(\\frac{1}{2}, \\frac{3}{2}\\right) \\end{array} \\right."})}),`
`,i.jsx(e.h1,{children:"Hyperfine splitting"}),`
`,i.jsx(e.p,{children:"Until now we have investigated the structure of the atom depending on:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The orbital angular momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{L}"}),", which defines the shells."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The total electronic angular momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{J} = \\vec{L} + \\vec{S}"}),`,
which defines the fine structure because of the spin-orbit coupling.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["Further the nucleus has a spin angular momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{I}"}),`, which leads
to a magnetic moment:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{\\mu}_I= g_I \\mu_N \\vec{I}"})}),`
`,i.jsx(e.p,{children:"We have introduced the new constants:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"g_I"}),`, which is always in the order of one, but it changes due to
the changing structure of the different nuclei.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"nuclear magneton"}),`
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mu_N = \\frac{e\\hbar}{2m_p}= \\frac{m_e}{m_p}\\mu_B"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`From the values of the prefactors, we can immediatly deduce that the
hyperfine structure will be roughly three orders of magnitude smaller
than the fine structure. As with the spin-orbit coupling this nuclear
spin will experience the magnetic field produced by the motion of the
electrons `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{B}_{el}"})," and we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H_{hfs} = -\\vec{\\mu}_I \\cdot \\vec{B}_{el}\\\\
= A_{hfs}\\vec{I}\\vec{J}`})}),`
`,i.jsxs(e.p,{children:["This couples ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{I}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{J}"}),` and the full
structure is given by total angular momentum:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{F} = \\vec{J} + \\vec{I}"})}),`
`,i.jsx(e.h2,{children:"Hydrogen"}),`
`,i.jsxs(e.p,{children:[`In hydrogen the ground state has no angular momentum and the spin is
simply `,i.jsx(e.code,{className:"language-math math-inline",children:"S=1/2"}),". The nucleus has the same, such that we have ",i.jsx(e.code,{className:"language-math math-inline",children:"I=1/2"}),` and
the groundstate splits into the `,i.jsx(e.code,{className:"language-math math-inline",children:"F=0"})," and the ",i.jsx(e.code,{className:"language-math math-inline",children:"F=1"}),` doublet. They are
separated by an energy difference of `,i.jsx(e.code,{className:"language-math math-inline",children:"1.42"}),`GHz. This corresponds to a
transition wavelength of 21 cm, which is widely used in astronomy.`]}),`
`,i.jsx(e.h2,{children:"Cesium clocks"}),`
`,i.jsxs(e.p,{children:[`The definition of time is based the hyperfine levels of Cs. Cs has just
one stable isotope Cs-133 with nuclear spin `,i.jsx(e.code,{className:"language-math math-inline",children:"I=7/2"}),`. The ground state
electron is in the the 6s state in the `,i.jsx(e.code,{className:"language-math math-inline",children:"^2 S_{1/2}"}),` state. So the
groundstate splits into the `,i.jsx(e.code,{className:"language-math math-inline",children:"F=3"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"F=4"}),` manifold. They are separated
by 9.4GHz and the clicking between these transitions is our definition
of time. The second is actually `,i.jsx(e.a,{href:"https://www.physics.nist.gov/cuu/Units/current.html",children:"defined as"}),":"]}),`
`,i.jsxs(e.blockquote,{children:[`
`,i.jsx(e.p,{children:`The second is the duration of 9 192 631 770 periods of the radiation
corresponding to the transition between the two hyperfine levels of
the ground state of the cesium 133 atom.`}),`
`]}),`
`,i.jsx(e.p,{children:`All the other units have similiar definitions, except the embarrising
kilogram. It is defined as:`}),`
`,i.jsxs(e.blockquote,{children:[`
`,i.jsx(e.p,{children:`The kilogram is the unit of mass; it is equal to the mass of the
international prototype of the kilogram.`}),`
`]}),`
`,i.jsxs(e.p,{children:["This will change soon as the member states of ",i.jsx(e.em,{children:`Bureau International des
Poids et des Mesures`}),` decided to base the SI system on the measurement
of fundamental constants instead of some prototypes. So, now the
fundamental constants will have no errorbars left, as shown in Fig.
`,i.jsx(e.a,{href:"#fig-si-units",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-si-units",href:foe,caption:"Fundamental constants for the revised international system of units"}),`
`,i.jsx(e.h2,{children:"Bosonic and fermionic isotopes"}),`
`,i.jsxs(e.p,{children:[`A particularly interesting problem is the influence of the nuclear spin
on how the atoms talk to each other. For example we have two different
stable isotope of Li, namely Li `,i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," and Li",i.jsx(e.code,{className:"language-math math-inline",children:"^7"}),`, which only differ by one
neutron in the nucleus. All the wavelengths for controlling the atoms
are extremely similiar, however the hyperfine structure is different.
For Li`,i.jsx(e.code,{className:"language-math math-inline",children:"^6"})," we have a nuclear spin of ",i.jsx(e.code,{className:"language-math math-inline",children:"I=1"})," and for Li",i.jsx(e.code,{className:"language-math math-inline",children:"^7"})," ",i.jsx(e.code,{className:"language-math math-inline",children:"I=3/2"}),`. The
resulting total angular momentum`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"F=1/2"})," in the ground state of Li",i.jsx(e.code,{className:"language-math math-inline",children:"^6"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"F=1"})," in the ground state of Li",i.jsx(e.code,{className:"language-math math-inline",children:"^7"})]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`So one is of them is an integer spin boson and the other one is a spin
half fermion. One can nicely see these differences as one tries to put
them onto each other for cold temperatures and tight traps as visualized
in the Figure below and reproduced from `,i.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.1059318",children:"Truscott 2001"}),"."]}),`
`,i.jsx(me,{id:"fig-fermi",href:poe,caption:"Fermionic lithium atoms colliding"})]})}function xoe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(wj,{...t})}):wj(t)}const _j=Object.freeze(Object.defineProperty({__proto__:null,default:xoe,frontmatter:goe},Symbol.toStringTag,{value:"Module"})),yoe="/assets/static/lecture15_pic1.B8vYRwYc.png",boe="/assets/static/lecture15_pic2.DTc86Kr0.png",woe="/assets/static/lecture15_pic3.C9lZlEqs.svg",_oe="/assets/static/lecture15_pic4.CvQrmW7o.svg",voe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:15,title:"Lecture 15 - Diatomic molecules"};function vj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will start to put atoms together to build simple
molecules. We will first use the Born-Oppenheimer approximation, to
eliminate slow processes from the study of the fast electron dynamics.
Then, we will study simple mechanisms of binding atoms.`}),`
`,i.jsx(e.h1,{children:"Introduction"}),`
`,i.jsx(e.p,{children:`Molecules add a new layer of complexity to the system. In atoms, we had
different combinations of nuclei and electrons, leading to different
kinds of atoms. In this lecture, we will use atoms as basic building
block of more complex structures, the molecules. While this complexity
makes it necessary to introduce new approximations, it also allows us to
study new processes in nature.`}),`
`,i.jsxs(e.p,{children:[`So we will start out with the simplest of all molecules, barely a
molecule, the `,i.jsx(e.code,{className:"language-math math-inline",children:"H_2^+"}),` ion. We start out with a discussion of the
Born-Oppenheimer approximation. Detailled discussions can be found in
`,i.jsx(e.a,{href:"https://books.google.de/books?id=9KEPAQAAMAAJ",children:"Chapter 8 of Atkins"}),", ",i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Chapter 9 of Demtröder"}),` and
`,i.jsx(e.a,{href:"https://books.google.de/books?id=i5IPWXDQlcIC",children:"Chapter 10 of Bransden"}),"."]}),`
`,i.jsx(e.h1,{children:"Molecular hydrogen ion"}),`
`,i.jsxs(e.p,{children:[`In molecular hydrogen we have only three ingredients. A single electron,
which is bound to two nuclei as shown in Fig.
`,i.jsx(e.a,{href:"#fig-hydrogen-ion",children:"1"}),"."]}),`
`,i.jsx(me,{id:"fig-hydrogen-ion",href:yoe,caption:"The molecular hydrogen ion"}),`
`,i.jsx(e.p,{children:"The full Hamiltonian of the system at study would read:"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H} = - \\frac{1}{2}\\nabla_\\mathbf{r}^2 - \\frac{1}{2M}\\left(\\nabla_{\\mathbf{R}_\\mathrm{A}}^2 +\\nabla_{\\mathbf{R}_\\mathrm{B}}^2\\right) + V(\\mathbf{r}, \\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B})"}),`
We will further introduce the short-hand notations:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{T}_e = - \\frac{1}{2}\\nabla_\\mathbf{r}^2 \\\\
\\hat{T}_n = - \\frac{1}{2M}\\left(\\nabla_{\\mathbf{R}_\\mathrm{A}}^2 +\\nabla_{\\mathbf{R}_\\mathrm{B}}^2\\right)`})}),`
`,i.jsx(e.p,{children:`In a stark difference to atoms, we now have two charged nuclei. The
relative distance between them and between the electron will be of major
importance. Most importantly, we should answer the question, why this
configuration should be stable at all given that the two protons repel
each other. To handle the problem, we will once again separate out
energy scales.`}),`
`,i.jsx(e.h2,{children:"The Born-Oppenheimer approximation"}),`
`,i.jsxs(e.p,{children:["The idea of the ",i.jsx(e.strong,{children:"Born-Oppenheimer approximation"}),` is to separate the
fast electronic motion from the slow motion of the heavy nuclueus
(`,i.jsx(e.code,{className:"language-math math-inline",children:"M=1836"}),"). So we will"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Solve the electronic motion with the nuclear coordinates fixed."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Solve the nuclear motion, assuming that the electron wavefunction
adapts instantaneously.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`So the ansatz is:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Psi(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B}, \\mathbf{r}) = \\psi_e(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B}, \\mathbf{r})\\cdot \\psi_n(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B})"})]}),`
`,i.jsxs(e.p,{children:[`We will plug this into the Schrödinger equation to obtain:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_n\\hat{T}_e\\psi_e +\\psi_e\\hat{T}_n\\psi_n + V(\\mathbf{r}, \\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B})\\psi_e \\psi_n + W = E \\psi_e\\psi_n"})]}),`
`,i.jsxs(e.p,{children:["This transformation introduced the ",i.jsx(e.em,{children:"non-adiabatic"}),` effects:
`,i.jsx(e.code,{className:"language-math math-inline",children:"W = -\\frac{1}{2M}\\sum_{i=A,B} \\left[(\\nabla_{\\mathbf{R}_i}\\psi_e)\\cdot(\\nabla_{\\mathbf{R}_i}\\psi_n)+\\psi_n \\nabla_{\\mathbf{R}_i}^2 \\psi_e\\right]"})]}),`
`,i.jsxs(e.p,{children:[`In the following we will neglect these effects. And obtain:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_e \\hat{T}_n\\psi_n + \\left(\\hat{T}_e\\psi_e+V\\psi_e\\right)\\psi_n = E \\psi_e\\psi_n"}),`
So we will first solve the `,i.jsx(e.em,{children:"electronic motion"}),`:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left(\\hat{T}_e+\\hat{V}\\right)\\psi_e = E_e(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B}) \\psi_e"}),`
To be explicit we obtain for the ionic hydrogen:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
H_e = -\\frac{1}{2} \\nabla_\\mathbf{r}^2-\\frac{1}{r_A}-\\frac{1}{r_B}+\\frac{1}{R}`})}),`
`,i.jsxs(e.p,{children:[`At this stage we can just focus on the electronic part to understand the
structure of simple diatomic molecules, while assuming that `,i.jsx(e.code,{className:"language-math math-inline",children:"R"}),` is an
independent parameter. Most importantly, we will focus at usual on
symmetries, which will tell us more about the allowed states in the
system.`]}),`
`,i.jsxs(e.p,{children:[`In the second step we will solve the nuclear motion:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{T}_n\\psi_n + E_e \\psi_n = E \\psi_n"})]}),`
`,i.jsx(e.p,{children:`This nuclear motion will be at the origin of rotational and vibrational
levels, which will be discussed in on of the next lectures.`}),`
`,i.jsx(e.h1,{children:"Symmetries of the electronic wavefunction"}),`
`,i.jsx(e.p,{children:`This discussion follows along similiar lines as for the hydrogen atom
and the helium atom. We basically can categorize the different states by
their properties. This will help us later enormously to understand
allowed transition etc.`}),`
`,i.jsx(e.h2,{children:"Angular momentum"}),`
`,i.jsx(e.p,{children:`For any (diatomic) molecule we break the spherical symmetry that we
relied on for the atomic systems. This means that angular momentum is
not a conserved quantity anymore.`}),`
`,i.jsx(e.p,{children:`However, the full Hamiltonian is invariant under the rotation around the
axis of the diatomic molecule. One can verify that this implies that:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`[H_e, L_z] = 0\\\\
\\Rightarrow L_z \\psi_e = \\pm \\Lambda \\psi_e (a.u.)`})}),`
`,i.jsxs(e.p,{children:[`The reason is that
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{L}_z =\\frac{1}{i}\\partial_\\varphi"}),` depends solely on the angle
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\varphi"})," and not on ",i.jsx(e.code,{className:"language-math math-inline",children:"R"}),`. Here the quantum number can have the integer
values `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Lambda= 0, 1, 2 , \\cdots"}),`. We also note them
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Sigma, \\Pi, \\Delta, \\Phi"})," or ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma, \\pi, \\delta, \\phi"}),` for single
electrons.`]}),`
`,i.jsx(e.h2,{children:"Parity"}),`
`,i.jsxs(e.p,{children:["We further have symmetry under parity operation for ",i.jsx(e.em,{children:`homo-nuclear,
diatomic`})," molecules ",i.jsx(e.code,{className:"language-math math-inline",children:"A_2"}),`. This means that we have once more:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{P}\\psi_e(\\mathbf{r}) = \\pm\\psi_e(\\mathbf{r})"}),` In the same way as
in the lecture on the Helium atom we distinguish the states by `,i.jsx(e.em,{children:"gerade"}),`
and `,i.jsx(e.em,{children:"ungerade"}),`. So we then end up with something like
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Lambda_{u,g}^\\pm"}),"."]}),`
`,i.jsx(e.h2,{children:"Spin"}),`
`,i.jsxs(e.p,{children:[`If the system does not have explicit spin-orbit coupling, the total spin
`,i.jsx(e.code,{className:"language-math math-inline",children:"S"}),` of the system will be conserved. So the full notation for electronic
states is typically: `,i.jsx(e.code,{className:"language-math math-inline",children:"^{2S+1}\\Lambda^{\\pm}_{g,u}"}),` Most of the time the
ground state of the system is `,i.jsx(e.code,{className:"language-math math-inline",children:"^{1}\\Sigma^{+}_{g}"}),"."]}),`
`,i.jsx(e.h1,{children:"Stability of the ground state molecule"}),`
`,i.jsxs(e.p,{children:[`We have now studied the symmetries that the system should have, but
until now we did not discuss the most important question: Is this
molecule stable ? Within the Born-Oppenheimer approximation, we can
actually solve the ionic hydrogen molecule analytically (see `,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:`Chapter 9 of
Demtröder`}),"). The resulting ",i.jsx(e.strong,{children:"molecular potential curves"}),` are
shown in Fig. `,i.jsx(e.a,{href:"#fig-potentials",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-potentials",href:boe,caption:"Molecular potential curves for the molecular hydrogen ion"}),`
`,i.jsx(e.h2,{children:"Linear combination of atomic orbitals"}),`
`,i.jsxs(e.p,{children:[`The analytical solutions are rather bulky and not particularly
instructive. One powerful idea, and very good approximation, is to
decompose the molecule wavefunction over the atomic orbitals of its
components. Going back to Fig. `,i.jsx(e.a,{href:"#fig-hydrogen-ion",children:"1"}),` we could make the simple Ansatz:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_e(\\mathbf{r})= c_1 \\psi_{1s}(\\mathbf{r}_\\mathrm{A})+c_2 \\psi_{1s}(\\mathbf{r}_\\mathrm{B})"})]}),`
`,i.jsx(e.p,{children:`Note, that we made a very simple Ansatz at this stage and we could
decompose the system over a much larger set of excited states. But for
pedagogical reason we will stick to the simple model at this stage.
Going through the symmetry requirements, we find that we can write the
full wavefunction as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_{g,u}(\\mathbf{r})= \\frac{1}{\\sqrt{2\\pm2S}}\\left(\\psi_{1s}(\\mathbf{r}_\\mathrm{A})\\pm \\psi_{1s}(\\mathbf{r}_\\mathrm{B})\\right)"})}),`
`,i.jsxs(e.p,{children:["The contribution ",i.jsx(e.code,{className:"language-math math-inline",children:"S"}),` describes the overlap of the two atomic orbitals
`,i.jsx(e.code,{className:"language-math math-inline",children:"S =  \\int d\\mathbf{r}\\psi_{1s}^*(\\mathbf{r}_\\mathrm{A})\\psi_{1s}(\\mathbf{r}_\\mathrm{B})"}),`
We can then evaluate the energy of the two states through the
variational principle:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_{g,u} = \\left\\langle\\psi_{g,u}\\right|\\hat{H}_e\\left|\\psi_{g,u}\\right\\rangle\\\\
 = \\frac{1}{2\\pm2S}\\left(\\left\\langle\\psi_A\\right|\\pm \\left\\langle\\psi_B\\right|\\right)\\hat{H}_e\\left(\\left|\\psi_A\\right\\rangle\\pm \\left|\\psi_B\\right\\rangle\\right)\\\\
 = \\frac{E_{AA}\\pm E_{AB}}{1\\pm S}\\\\`})}),`
`,i.jsxs(e.p,{children:["The resulting energy surfaces are shown in Fig. ",i.jsx(e.a,{href:"#fig-lcao",children:"3"}),`. In the most
simplistic interpretation the gerade state does not have a node in the
middle and it is therefore of smaller kinetic energy.`]}),`
`,i.jsx(me,{id:"fig-lcao",href:woe,caption:"The energy surface of the LCAO for the hydrogen molecule ion"}),`
`,i.jsx(e.h1,{children:"The neutral hydrogen molecule"}),`
`,i.jsx(e.p,{children:`In the previous section we have seen how we can treat the coupling of
the nuclei through the exchange of a single shared electron. However, we
should now move on to the case of two neutral particles binding
together. What is here the relevant mechanism ?`}),`
`,i.jsx(me,{id:"fig-hydrogen",href:_oe,caption:"The hydrogen molecule"}),`
`,i.jsx(e.p,{children:`In the following we will only consider the electronic part, which adds
up too:`}),`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H} = -\\frac{1}{2}\\left(\\nabla_{\\mathbf{r}_1}^2+\\nabla_{\\mathbf{r}_2}^2\\right)-\\frac{1}{r_{A1}}-\\frac{1}{r_{A2}}-\\frac{1}{r_{B1}}-\\frac{1}{r_{B2}}+\\frac{1}{r_{12}}+\\frac{1}{R}"})}),`
`,i.jsx(e.p,{children:"We can now rewrite this Hamiltonian in the more instructive form"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = H_{0,1}+H_{0,2}+\\frac{1}{r_{12}}+\\frac{1}{R}\\\\
H_{0,i} = -\\frac{1}{2}\\nabla_{\\mathbf{r}_i}^2-\\frac{1}{r_{A,i}}-\\frac{1}{r_{B,i}}

`})}),`
`,i.jsx(e.p,{children:`We have can now use the results of the hydrogen ion to understand this
system.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"We have for each electron the solution of hydrogen molecule ion."}),`
`,i.jsxs(e.li,{children:[`In the next step, we have to put the two electrons properly within
this orbit with `,i.jsx(e.code,{className:"language-math math-inline",children:"S=0"})," and ",i.jsx(e.em,{children:"ignoring"})," the ",i.jsx(e.code,{className:"language-math math-inline",children:"e^-"})," - ",i.jsx(e.code,{className:"language-math math-inline",children:"e^-"})," interaction."]}),`
`]}),`
`,i.jsx(e.p,{children:"So we can make the Ansatz:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\psi(\\mathbf{r}_1, \\mathbf{r}_2) = \\psi_{g}(\\mathbf{r}_1)\\cdot\\psi_{g}(\\mathbf{r}_2)\\\\
= \\frac{1}{2 + 2S}\\left(\\psi_{1s}(\\mathbf{r}_{A1})+\\psi_{1s}(\\mathbf{r}_{B1})\\right)\\left(\\psi_{1s}(\\mathbf{r}_{A2})+\\psi_{1s}(\\mathbf{r}_{B2})\\right)\\\\
= \\frac{1}{2 + 2S}\\left(\\psi_{1s}(\\mathbf{r}_{A1})\\psi_{1s}(\\mathbf{r}_{B2})+\\psi_{1s}(\\mathbf{r}_{B1})\\psi_{1s}(\\mathbf{r}_{A2}) +\\psi_{1s}(\\mathbf{r}_{A1})\\psi_{1s}(\\mathbf{r}_{A2})+\\psi_{1s}(\\mathbf{r}_{B1})\\psi_{1s}(\\mathbf{r}_{B2}) \\right)`})}),`
`,i.jsxs(e.p,{children:["The first two terms describe ",i.jsx(e.strong,{children:"kovalent binding"}),`. They
describe situations where each electron is associated with one core. The
last two terms describe `,i.jsx(e.strong,{children:"ionic binding"}),` as one associated both
electrons with a single atom and then looks one the attraction of
another ionic core. This is quite similiar to the interaction in the
`,i.jsx(e.code,{className:"language-math math-inline",children:"H_2^+"})," molecule."]}),`
`,i.jsxs(e.p,{children:[`Within this approach, one actually finds a binding energy of
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_b = {-2.64}\\text{eV}"})," at an equilibrium distance of ",i.jsx(e.code,{className:"language-math math-inline",children:"R_e = 1.4 a_0"}),`.
The experimentally measured values differs quite substantially as we
have `,i.jsx(e.code,{className:"language-math math-inline",children:"E_b = {-4.7}\\text{eV}"}),`. A substantial approximation was here that we
neglected the interaction between the electrons, which should repel.`]}),`
`,i.jsx(e.h2,{children:"The Heitler-London method"}),`
`,i.jsx(e.p,{children:`As the two electrons should repel each other, we can assume that the
ionic binding is strongly suppressed. So the wavefunction is now assumed
to be:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\psi_{HL} = \\frac{1}{\\sqrt{2 + 2S^2}}\\left(\\psi_{1s}(\\mathbf{r}_{A1})\\psi_{1s}(\\mathbf{r}_{B2})+\\psi_{1s}(\\mathbf{r}_{B1})\\psi_{1s}(\\mathbf{r}_{A2})\\right)`})}),`
`,i.jsxs(e.p,{children:[`Again, the wavefunction cannot be factorized and the two
electrons are entangled because of the interactions. Recognize the
common theme with the Helium atom. Calculation of the binding energy
within this approximation leads to `,i.jsx(e.code,{className:"language-math math-inline",children:"E_b = {-3.14}\\text{eV}"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"R_e=1.6a_0"}),"."]}),`
`,i.jsx(e.p,{children:`In the next lecture we will discuss how we can move on
from these extremely simple diatomic molecules to the assembly of richer
systems.`})]})}function joe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(vj,{...t})}):vj(t)}const jj=Object.freeze(Object.defineProperty({__proto__:null,default:joe,frontmatter:voe},Symbol.toStringTag,{value:"Module"})),Toe="/assets/static/lecture16_pic1.rA-XJF8w.png",koe="/assets/static/lecture16_pic2.BxHoP_Bt.svg",Eoe="/assets/static/lecture16_pic3.C5xui9iF.svg",Soe="/assets/static/lecture16_pic4.Cq4ZUNFw.png",Coe="/assets/static/lecture16_pic5.B5sQ_YMF.png",Aoe="/assets/static/lecture16_pic6.BwCEqmpL.png",Noe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:16,title:"Lecture 16 - Molecular Orbitals of Diatomic Molecules"};function Tj(t){const e={a:"a",code:"code",del:"del",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will discuss a systematic approach to build up
molecules from more complex atoms.`}),`
`,i.jsx(e.p,{children:`In the last lecture we discussed the existing orbits within
the linear combination of orbitals. We will now try to systematically
fill up the orbitals with electrons in order of their energy.`}),`
`,i.jsx(e.h1,{children:"Molecular bindings"}),`
`,i.jsxs(e.p,{children:[`A good overview over the different mechanism for molecular binding is
given in Fig. `,i.jsx(e.a,{href:"#fig-hydrogen-overview",children:"1"}),`. In
the last lecture we have seen two different binding processes of
molecular bonding:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Ionic binding, which was important in the ",i.jsx(e.code,{className:"language-math math-inline",children:"H_2^+"})," molecule."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Kovalent binding, which dominated the ",i.jsx(e.code,{className:"language-math math-inline",children:"H_2"})," molecule."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Both are important for small distances. For large distance the van der
Waals interaction can create weakly bound molecules.`}),`
`,i.jsx(me,{id:"fig-hydrogen-overview",href:Toe,caption:"Different binding mechanisms in diatomic molecules"}),`
`,i.jsx(e.h1,{children:"Van-der Vaals interaction"}),`
`,i.jsx(e.p,{children:`The question is then how can these systems interact ? They do not share
electrons and they are neutral, so they do not have a permanent electric
dipole moment. The magnetic dipole interaction is extremely weak anyway.`}),`
`,i.jsxs(e.p,{children:[`The key is induced dipole moment of the atom in in an electric field,
seen in lecture 6. Each of the atoms can have a dipole
moment `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{D}_i = q \\mathbf{r}_i"}),`. As each atom is neutral, they
interact through their dipole-dipole interaction:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{W}_{dd} =\\frac{1}{4\\pi \\epsilon_0}\\frac{e^2}{R^3}\\left(\\mathbf{r}_A\\cdot \\mathbf{r}_B-3(\\mathbf{r}_A\\cdot \\mathbf{n})(\\mathbf{r}_B\\cdot \\mathbf{n})\\right)`})}),`
`,i.jsxs(e.p,{children:[`We now have to perform the amplitude of this energy
quantum mechanically. In a first step, we express `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{W}_{dd}"}),` in
terms of the operators `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{X}_{A,B}, \\hat{Y}_{A,B}, \\hat{Z}_{A,B}"}),`.
The orientation of the atom is sketched in the inset in Fig.
`,i.jsx(e.a,{href:"#fig-two-atoms",children:"2"}),"."]}),`
`,i.jsx(me,{id:"fig-two-atoms",href:koe,caption:"Configuration of two dipoles"}),`
`,i.jsx(e.p,{children:"We can write then:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{W}_{dd} =\\frac{1}{4\\pi \\epsilon_0}\\frac{e^2}{R^3}\\left(\\hat{X}_A \\hat{X}_B + \\hat{Y}_A\\hat{Y}_B - 2 \\hat{Z}_A \\hat{Z}_B\\right)"})}),`
`,i.jsx(e.p,{children:`We are only interested in their interaction at very large distances,
such that we can treat the interaction perturbatively (see lecture 7). To first order, we have to evaluate:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_1 = \\left\\langle\\phi_{n,0,0^A, \\phi_{n,0,0}^B}\\right| \\hat{W}_{dd}
\\left|\\phi_{n,0,0^A, \\phi_{n,0,0}^B}\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`It only contains terms of the kind
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\phi_{n,0,0^i}\\right| \\hat{X}_i \\left|\\phi_{n,0,0^i}\\right\\rangle"}),`.
As the dipole moment is zero, the first order correction in the energy
is zero too. The idea is then that the mean electric field created by
the atom might be zero. However, quantum mechanics allows for
fluctuations of the type `,i.jsx(e.code,{className:"language-math math-inline",children:"\\langle |e\\mathbf{r}|^2\\rangle"}),`. They are
taken into account through second order perturbation theory. We obtain
directly:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_2 = \\sum_{\\phi,\\phi'} \\frac{|\\left\\langle\\psi_{\\phi^A,\\psi_{\\phi'}^B}\\right|\\hat{W}_{dd}\\left|\\psi_{0^A,\\psi_{0}^B}\\right\\rangle|^2}{(E_{0}^A+E_0^B -E_\\phi^A -E_{\\phi'}^B)}"})}),`
`,i.jsxs(e.p,{children:["And we can also pull out the ",i.jsx(e.code,{className:"language-math math-inline",children:"R^3"}),` dependence of each
`,i.jsx(e.code,{className:"language-math math-inline",children:"W"}),", to obtain a general expression for the ",i.jsx(e.strong,{children:`van-der-Waals
interaction`}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_2 = - \\frac{C_6}{R^6}"})}),`
`,i.jsxs(e.p,{children:[`To get an estimate for the typical scale of the binding we can have a
look into the prefactor `,i.jsx(e.code,{className:"language-math math-inline",children:"C_6"}),`. We will do this here for highly excited
states of hydrogen as it is relevant to the other alkalis too:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Each ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{X}"}),` will be be proportional to the typical extension of
its orbit, such that we have `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{X} \\sim n^2 a_0"}),` within the
electronic shells.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["As for the energy difference, we know that the energy of high ",i.jsx(e.code,{className:"language-math math-inline",children:"n"}),`
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_n \\approx \\frac{ R_{y,\\infty}}{n^2}"}),` (the screening makes all
alkalis look very similiar for high energies). The energy difference
is therefore in the order of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\delta E_n \\approx \\frac{ R_{y,\\infty}}{n^3}"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"Putting it all together, we obtain"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"C_6 \\approx \\frac{e^4 a_0^4 n^8}{R_{y,\\infty}/n^3} \\approx \\frac{e^4 a_0^4}{R_{y,\\infty} (4\\pi\\epsilon_0)^2} n^{11}"})}),`
`,i.jsxs(e.p,{children:["This prediction has been directly tested as shown in Fig. ",i.jsx(e.a,{href:"#fig-beguin",children:"3"}),"."]}),`
`,i.jsx(me,{id:"fig-beguin",href:Eoe,caption:"Direct measurement of the van-der-Waals force"}),`
`,i.jsx(e.h1,{children:"Molecular orbit theory"}),`
`,i.jsx(e.p,{children:`We would like to put together more complex molecules step-by-step. Let's
take a step back to the hydrogen molecule to formulate the problem.`}),`
`,i.jsx(e.h2,{children:"The hydrogen molecule"}),`
`,i.jsxs(e.p,{children:["Let us have a brief look at H",i.jsx(e.del,{children:"2"}),` again and consider only contributions
from `,i.jsx(e.code,{className:"language-math math-inline",children:"1s"}),` atomic orbitals. We saw that we can distribute the two
electrons within the gerade and ungerade orbital of the hydrogen ion. So
our basic orbitals will be:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sigma_g \\propto \\left( \\psi_{1s} (\\vec{r}_\\textrm{a}) + \\psi_{1s} (\\vec{r}_\\textrm{b}) \\right)"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sigma_u \\propto \\left( \\psi_{1s} (\\vec{r}_\\textrm{a}) - \\psi_{1s} (\\vec{r}_\\textrm{b}) \\right)."})}),`
`,i.jsx(e.p,{children:`Lower case letters stand for the individual electrons
while upper case letters characterize the whole system. We will now
attempt to fill up the two orbitals with the two electrons:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Both electrons in a gerade orbital ",i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_g^{2}"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Both electrons in an ungerade orbital ",i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_u^{2}"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`One electron in a gerade orbtial and one electron in an ungerade
orbital: `,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_g^{1}1\\sigma_u^{1}"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`In a second step, we need to respect the Pauli principle for the two
electrons, which states that the full wavefunction should be
anti-symmetric under exchange of particles. We had a detailled
discussion of the topic on helium. So for the first
configuration `,i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_g^{2}"})," we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_1 \\propto \\sigma_g(1) \\cdot \\sigma_g(2) \\qquad (S=0, ^1\\Sigma_g)"})}),`
`,i.jsxs(e.p,{children:[`The spin has to be in a singlet here as the wavefunction
itself is symmetric. Further, the parity of the full wavefunction is
gerade as `,i.jsx(e.code,{className:"language-math math-inline",children:"g \\times g = g"}),". So ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_1"})," is in a ",i.jsx(e.code,{className:"language-math math-inline",children:"^1\\Sigma_g"}),`
configuration.`]}),`
`,i.jsxs(e.p,{children:["As one atom is in ",i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_g^{1}"}),` and the other one is in
`,i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_u^{1}"}),", the parity of the full wavefunction is ",i.jsx(e.code,{className:"language-math math-inline",children:"g\\times u = u"}),`.
Additionally, we can choose which atom to position in which orbital and
then also the symmetry of the superposition. The symmetric superposition
is:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_{2} \\propto \\left (\\sigma_g(1) \\cdot \\sigma_u(2) + \\sigma_u(1) \\cdot \\sigma_u(2)\\right) \\quad \\qquad (S=0, ^1\\Sigma_u)"})}),`
`,i.jsxs(e.p,{children:[`As the orbital superposition is symmetric, we once again
have work in a spin singlet to achieve the overall anti-symmetry of the
two-electron wavefunction. So `,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_2"})," is in a ",i.jsx(e.code,{className:"language-math math-inline",children:"^1\\Sigma_u"}),`
configuration.`]}),`
`,i.jsx(e.p,{children:`We can also choose anti-symmetric superposition of the two
distinguishable orbitals:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_3 \\propto \\left( \\sigma_g(1)\\cdot \\sigma_u(2)-\\sigma_u(1) \\cdot \\sigma_g(2) \\right) \\qquad (S=1, ^3\\Sigma_u)"})}),`
`,i.jsxs(e.p,{children:[`As the orbital superposition is anti-symmetric, we have
work in a spin triplet to achieve the overall anti-symmetry of the
two-electron wavefunction. So `,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_3"})," is in a ",i.jsx(e.code,{className:"language-math math-inline",children:"^3\\Sigma_u"}),`
configuration.`]}),`
`,i.jsxs(e.p,{children:["And finally we have for ",i.jsx(e.code,{className:"language-math math-inline",children:"1\\sigma_u^{2}"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_4 \\propto \\sigma_u(1)\\cdot \\sigma_u(2) \\qquad (S=0, ^1\\Sigma_g)"})}),`
`,i.jsxs(e.p,{children:[`The spin has to be in a singlet here as the wavefunction
itself is symmetric. Further, the parity of the full wavefunction is
gerade as `,i.jsx(e.code,{className:"language-math math-inline",children:"u \\times u = g"}),". So ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_4"})," is in a ",i.jsx(e.code,{className:"language-math math-inline",children:"^1\\Sigma_g"}),`
configuration.`]}),`
`,i.jsxs(e.p,{children:[`At short distance the energy ordering is
`,i.jsx(e.code,{className:"language-math math-inline",children:"E(\\psi_1) < E(\\psi_2) \\sim E(\\psi_3) < E(\\psi_4)"}),"."]}),`
`,i.jsx(me,{id:"fig-orbital-repulsion",href:Soe,caption:"Molecular orbital energy levels with repulsion"}),`
`,i.jsxs(e.p,{children:[`In the figure above the faded lines indicate how the energy
of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_4"}),` would naively. If the system is diagonalized in
a more flexible basis, that allows for superpositions, the orbits repel.
Taken from `,i.jsx(e.a,{href:"https://global.oup.com/academic/product/molecular-quantum-mechanics-9780199541423",children:"here"}),"."]}),`
`,i.jsxs(e.p,{children:[`However for larger distances the gerade or ungerade character of each
wave function becomes of less importance and the two configurations
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_4"}),` become of similiar energy. They are further both
`,i.jsx(e.code,{className:"language-math math-inline",children:"^1\\Sigma_g"}),` states. Therefore also all linear combinations of the two
states have the valid symmetries and and more flexibel trial solution
would be of the form:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"c_1 \\psi_1 + c_4 \\psi_4"})}),`
`,i.jsx(e.p,{children:`The full solution then shows clear level repulsion
between the two uncoupled channels. This concept is called
"configuration interaction".`}),`
`,i.jsx(e.h2,{children:"Conditions for (anti-)binding of particular orbitals."}),`
`,i.jsxs(e.p,{children:[`The conditions for the creating of (anti-)binding orbitals is viusalized
in Fig `,i.jsx(e.a,{href:"#fig-binding",children:"5"}),"."]}),`
`,i.jsx(e.p,{children:`In a first step, there has to be sufficient wave function overlap, such
that there can be constructive and destructive interference. This
implies that the orbit has to be large enough to 'see' the other atom,
but not to diffuse. This typically implies that only the valence shell
has to be considered.`}),`
`,i.jsxs(e.p,{children:[`Only orbits of the same symmetry group can form a bond. The main
symmetry property here is the total `,i.jsx(e.code,{className:"language-math math-inline",children:"L_z"}),` with respect to the axis of
the molecule. We have `,i.jsx(e.a,{href:"https://global.oup.com/academic/product/molecular-quantum-mechanics-9780199541423",children:"table 4.5 of Demtröder_2010"}),":"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"s"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"p_z"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"d_{z^2}"})," have ",i.jsx(e.code,{className:"language-math math-inline",children:"L_z = 0"})," (",i.jsx(e.code,{className:"language-math math-inline",children:"\\Sigma"}),")."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"p_x"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"p_y"})," as well as ",i.jsx(e.code,{className:"language-math math-inline",children:"d_{yz}"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"d_{zx}"})," have ",i.jsx(e.code,{className:"language-math math-inline",children:"|L_z| = 1"}),"(",i.jsx(e.code,{className:"language-math math-inline",children:"\\Pi"}),")"]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Having a sufficient overlap is obviously not enough, the two orbits also
have to have the same a similiar energy, which is easily fulfilled in a
homonuclear molecule. But if we now have two different molecules the
orbital energy of (A) might be different from the orbital energy of (B).
The larger the difference, the smaller is the shift.`}),`
`,i.jsx(me,{id:"fig-binding",href:Coe,caption:"Molecular orbitals of homonuclear and heteronuclear molecules"}),`
`,i.jsx(e.h1,{children:"Homo-nuclear shell structure"}),`
`,i.jsxs(e.p,{children:[`We can finally put all this together to build up the shell structure of
homo-cuclear diatomic molecules as shown in Fig.
`,i.jsx(e.a,{href:"#fig-homo",children:"6"}),"."]}),`
`,i.jsx(me,{id:"fig-homo",href:Aoe,caption:"The shell structure of homonuclear diatomic molecules"}),`
`,i.jsxs(e.p,{children:[`The name of the molecule indicates the highest occupied molecular orbit
(`,i.jsx(e.em,{children:"HOMO"}),`). The next empty shell is then called the lowest occupied
molecular orbit (`,i.jsx(e.em,{children:"LUMO"}),")."]})]})}function Ioe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Tj,{...t})}):Tj(t)}const kj=Object.freeze(Object.defineProperty({__proto__:null,default:Ioe,frontmatter:Noe},Symbol.toStringTag,{value:"Module"})),Loe="/assets/static/lecture17_pic1.zm6pKFs6.png",Ooe="/assets/static/lecture17_pic2.Cy_zFZA5.png",Moe="/assets/static/lecture17_pic3.6mRwjOj7.png",Roe="/assets/static/lecture17_pic4.C-uzrx4a.png",Poe="/assets/static/lecture17_pic5.YARo3gf0.png",Doe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:17,title:"Lecture 17 - Rotation and Vibration of Molecules"};function Ej(t){const e={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We will study the existance of vibrational and rotational levels in
molecules. It allows us investigate the transitions of molecules and
introduce the Franck-Condon principle. Finally, we will study how such
intruiging molecules are used for the study of the permanent electric
dipole moment of the electron.`}),`
`,i.jsx(e.p,{children:`We studied during the last two lectures the properties the electronic
structure. For atoms the next step was the analysis of the transition
rules to understand the spectrum. However, for molecules the electronic
transition directly couple to the vibrational and rotational motion of
the nuclei, which will have to study first.`}),`
`,i.jsx(e.h1,{children:"A short reminder on nuclear motion"}),`
`,i.jsxs(e.p,{children:["We discussed diatomic molecules, with ",i.jsx(e.code,{className:"language-math math-inline",children:"N"}),` electrons bound to the nuclei. The full Hamiltonian of the molecule could be written in
the following fashion:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H} = \\hat{T}_e + \\hat{T}_N + V(\\hat{\\mathbf{R}_\\mathrm{A}}, \\hat{\\mathbf{R}_\\mathrm{B}},\\hat{\\mathbf{r}}_1,\\cdots, \\hat{\\mathbf{r}}_N)"}),`
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{T}_e"})," describes the kinetic energy of the electrons, ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{T}_N"}),`
the kinetic energy of the nuclei and `,i.jsx(e.code,{className:"language-math math-inline",children:"V"}),` the coupling between them. The
we decomposed the full wavefunction over a nuclear part and an
electronic part:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Psi(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B}, \\mathbf{r}_1,\\cdots, \\mathbf{r}_N) = \\psi_e(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B}, \\mathbf{r}_1,\\cdots, \\mathbf{r}_N)\\cdot \\psi_n(\\mathbf{R}_\\mathrm{A}, \\mathbf{R}_\\mathrm{B})"}),`
This allowed us to decouple nicely the two motions and study the
properties of the electronic potentials first. In the Born-Oppenheimer
approximation we obtained:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{T}_N \\psi_N + E_e (\\vec{R}_\\textrm{a}, \\vec{R}_\\textrm{b}) \\psi_N = E \\psi_N"})}),`
`,i.jsx(e.p,{children:"with"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{T}_N = - \\frac{1}{2 M_\\textrm{a}} \\Delta_{\\vec{R}_\\textrm{a}} - \\frac{1}{2 M_\\textrm{b}} \\Delta_{\\vec{R}_\\textrm{b}},"})}),`
`,i.jsxs(e.p,{children:["the total energy ",i.jsx(e.code,{className:"language-math math-inline",children:"E"}),` and the masses of the individual
atoms `,i.jsx(e.code,{className:"language-math math-inline",children:"M_\\textrm{a}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"M_\\textrm{b}"}),`. For the electronic energy
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_e"}),", only ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{R} = \\vec{R}_\\textrm{a} - \\vec{R}_\\textrm{b}"}),` matters.
We then calculated the molecular potential curves `,i.jsx(e.code,{className:"language-math math-inline",children:"E_e(R)"}),`, which differ
for each electronic configuration, discussed in the last lecture and sketched once more in Fig.
`,i.jsx(e.a,{href:"#fig-potential",children:"1"}),"."]}),`
`,i.jsx(me,{id:"fig-potential",href:Loe,caption:"The molecular potential curves obtained from the Born-Oppenheimer Approximation"}),`
`,i.jsx(e.p,{children:"In the center of mass frame we can tranform and get:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left( - \\frac{1}{2M} \\Delta_{\\vec{R}} + E_e (\\vec{R}) \\right) \\psi_\\textrm{n} (\\vec{R}) = E \\psi_\\textrm{n} (\\vec{R}),"})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{R}"})," is spherically symmetric, and"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"M = \\frac{M_\\textrm{a} \\cdot M_\\textrm{b}}{M_\\textrm{a} + M_\\textrm{b}}"})}),`
`,i.jsx(e.p,{children:`is the reduced mass. This means that we can separate the
angular and radial motion to obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_\\textrm{n} (R,\\theta,\\varphi) = \\frac{1}{R} S(R) \\cdot Y_l^m (\\theta,\\varphi)"})}),`
`,i.jsx(e.p,{children:`They describe the rotational and vibrational levels of
the nucleus.`}),`
`,i.jsx(e.h1,{children:"Rotations"}),`
`,i.jsx(e.p,{children:`If we assume a "rigid" molecule where the distance between the atoms is
fixed, the rotational energy is simply given by:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_\\text{rot} (R) = \\frac{J\\cdot (J+1)}{2M R^2}\\, (\\text{a.u.})"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"M"}),` is the reduced mass of the nuclei in atomic
units and `,i.jsx(e.code,{className:"language-math math-inline",children:"J"})," is the angular momentum quantum number. The factor ",i.jsx(e.code,{className:"language-math math-inline",children:"MR^2"}),`
represents the moment of inertia. For more complex atoms the
relationship is not quite as simple and the rotational energy is
typically described by the moment of interia `,i.jsx(e.code,{className:"language-math math-inline",children:"I_{ij}"}),`. The Hamiltonian
for this rotation reads then:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_{rot} =\\frac{J_x^2}{2I_{xx}}+\\frac{J_y^2}{2I_{yy}}+\\frac{J_z^2}{2I_{zz}}"})}),`
`,i.jsxs(e.p,{children:["The molecule ",i.jsx(e.code,{className:"language-math math-inline",children:"H_2"}),` has then a rotational frequency
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega/2\\pi =3\\cdot 10^{12}\\cdot J(J+1) \\text{Hz}"}),"."]}),`
`,i.jsx(e.h1,{children:"Vibrations"}),`
`,i.jsx(e.p,{children:`As already known from the hydrogen atom we can use the angular solutions
to discuss the radial solutions. We have to solve now:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left( \\frac{1}{2M} \\frac{d^2}{dR^2} + E_e (R) + \\frac{1}{2M} \\frac{J(J+1)}{R^2} \\right) S(r) = E_\\text{vib} S(R)"})}),`
`,i.jsxs(e.p,{children:["If the extension from the minimum (see ",i.jsx(e.a,{href:"#fig-internuclear",children:"2"}),`) is small, we can approximate it by a harmonic
potential. We can then find a vibrational energy
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_\\text{vib} = \\omega_0 (\\nu+\\frac{1}{2})\\, \\nu=0,1,\\cdots"}),` The
harmonic expansion around the minimum reads:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_e \\approx E_0 + \\frac{1}{2} M \\omega_0^2 (R-R_0 )^2"})}),`
`,i.jsxs(e.p,{children:["For the example of H",i.jsx(e.del,{children:"2"}),", we get ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega/2\\pi \\sim 10^{14}"})," Hz."]}),`
`,i.jsx(me,{id:"fig-internuclear",href:Ooe,caption:"Internuclear potential with vibrational levels"}),`
`,i.jsxs(e.p,{children:[`A better approximation of the vibrational level structure than the
simple harmonic oscillator is the `,i.jsx(e.strong,{children:"Morse potential"}),"."]}),`
`,i.jsx(e.h2,{children:"The Morse potential"}),`
`,i.jsx(e.p,{children:"In this case we approximate the molecular potential curves by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_e(R) \\approx V_\\text{morse}(R)\\\\
V_\\text{morse}(R) =hcD_e(1-e^{-ax})^2\\text{ with }a =\\sqrt{\\frac{k}{2hcD_e}}\\\\
x = R-R_0`})}),`
`,i.jsx(e.p,{children:`Its particular usefulness stems from the fact that it is
still analyitically solvable and we obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_{vib}=(\\nu+\\frac{1}{2})\\hbar \\omega-(\\nu+\\frac{1}{2})^2 \\hbar \\omega x_e\\\\
\\omega x_e = \\frac{a^2\\hbar}{2M}`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"x_e"})," is then called the anharmonicity parameter."]}),`
`,i.jsx(e.h1,{children:"Molecular transitions"}),`
`,i.jsx(e.p,{children:`We are now ready to discuss the different transitions that might appear
in the spectrum. And we will work our way through the different levels
of energy as we will see that they are all coupled.`}),`
`,i.jsx(e.h2,{children:"Rotational transitions"}),`
`,i.jsxs(e.p,{children:[`We will start out with the transitions of the lowest frequency, the
rotational transitions. So, we would like to know if it is possible to
transition from a state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\epsilon, J, M_J\\right\\rangle"}),` to another state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\epsilon, J', M_J'\\right\\rangle"}),", where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\epsilon"}),`
describes the electronic and vibrational degree of freedom. This means
that we have to calculate as usual the the electric dipole moment:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\epsilon, J', M_J'\\right| \\vec{D}\\left|\\epsilon, J, M_J\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`Within the Born-Oppenheimer approximation electronic and
rotational degree of freedom decouple and we can write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\epsilon, J', M_J'\\right| \\vec{D}\\left|\\epsilon, J, M_J\\right\\rangle = \\left\\langle J', M_J'\\right| \\left\\langle\\epsilon\\right|\\vec{D}\\left|\\epsilon\\right\\rangle\\left| J, M_J\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[`This electric dipole transitions were forbidden in atoms
as they do not have a permanent electric dipole moment. However,
hetero-nuclear atoms can have such a permanent electric dipole moment,
they are called polar molecules. Examples are alkali-alkali molecules
like NaK, NaCs, KRb whose permenanent electric dipole moment can be up
`,i.jsx(e.code,{className:"language-math math-inline",children:"3 ea_0"}),". It follows that:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:i.jsx(e.strong,{children:"Pure rotational transitions exist in polar molecules."})}),`
`]}),`
`,i.jsxs(e.p,{children:["The transition rules are di-atomic molecules: ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta J = \\pm 1"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta M_J= 0, \\pm1"}),`. For more complex molecules these transition rules
can vary quite substantially as the rotational degree of freedom might
have to be described by an additional quantum number.`]}),`
`,i.jsx(e.h2,{children:"Vibrational transitions"}),`
`,i.jsx(e.p,{children:`In the next step, we would like to understand the transitions between
different vibrational levels. Hence, we are investigating the electric
dipole moment`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\epsilon, \\nu'\\right| \\vec{D}\\left|\\epsilon, \\nu\\right\\rangle= \\left\\langle\\nu'\\right| \\vec{D}_\\epsilon\\left|\\nu\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[`The evaluation is now not quite as simple as for the
rotational degree of freedom as both `,i.jsx(e.code,{className:"language-math math-inline",children:"\\nu"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\epsilon"}),` will influence
the length of the molecule, they both directly depend on `,i.jsx(e.code,{className:"language-math math-inline",children:"R"}),`. We can
develop the electric dipole moment as a function of distance from the
equilibrium and write then:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left\\langle\\nu'\\right| \\vec{D}_\\epsilon\\left|\\nu\\right\\rangle= \\left\\langle\\nu'\\right| \\left(\\vec{D}_\\epsilon(0)+ \\frac{d\\vec{D}_\\epsilon}{dx}x+\\cdots\\right)\\left|\\nu\\right\\rangle\\\\
= \\frac{d\\vec{D}_\\epsilon}{dx}\\left\\langle\\nu'\\right|x\\left|\\nu\\right\\rangle+\\cdots`})}),`
`,i.jsx(e.p,{children:`So vibrational transistions will only happen in
molecules for which the permanent electric dipole changes as a function
of distance. Once again they are non-existant in homo-nuclear molecules.`}),`
`,i.jsx(e.h1,{children:"Vibronic transitions"}),`
`,i.jsxs(e.p,{children:[`At this stage, we are ready to discuss electronic transitions. If we are
performing an electronic transition this also implies a change on the
molecular potential curve as indicated in Fig.
`,i.jsx(e.a,{href:"#fig-franck-condon",children:"3"}),`. Imagine now the
transition of the ground state molecular branch (called the X branch) to
a higher electronic shell (called A, B, C, ...). Such a transition will
happen at constant internuclear radius as they are much faster than the
nuclei motion. This implies that an electronic transition will typically
excite the molecule into a high vibrational branch. The dipole moment is
then proportional too:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\epsilon', \\nu'\\right| \\vec{D}\\left|\\epsilon, \\nu\\right\\rangle\\approx \\vec{D}_{\\epsilon, \\epsilon'} \\left\\langle\\nu'\\right| \\left|\\nu\\right\\rangle"})}),`
`,i.jsx(me,{id:"fig-franck-condon",href:Moe,caption:"The Franck-Condon principle for a simple toy model"}),`
`,i.jsxs(e.p,{children:[`The factor
`,i.jsx(e.code,{className:"language-math math-inline",children:"S(\\nu, \\nu')=|\\left\\langle\\nu\\right|\\left|\\nu'\\right\\rangle|^2"}),`
is then called the Franck-Condon factor and it describes the strength of
the transitions.`]}),`
`,i.jsx(e.p,{children:`It is exactly this coupling of different hierarchies that makes the
molecular spectra so rich and also extremely tough to control.`}),`
`,i.jsx(e.h1,{children:"Can we get into the groundstate ?"}),`
`,i.jsxs(e.p,{children:[`Given all the complexities of molecules it seems non-trivial to find a
scheme that gets them into the ground state. For atoms laser cooling has
proven very efficient as we will discuss later. However, it mainly
adresses the cooling of external degrees of freedom. In molecules a
significant amount of energy its in the rotational and vibrational
levels. In this connection, a beautiful solution has been demonstrated
in `,i.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.1163861",children:"Ni 2008"}),"."]}),`
`,i.jsxs(e.p,{children:["The scheme is visualized in Fig. ",i.jsx(e.a,{href:"#fig-ni2008",children:"4"}),"."]}),`
`,i.jsx(me,{id:"fig-ni2008",href:Roe,caption:"Production of groundstate molecules of K + Rb"}),`
`,i.jsxs(e.p,{children:[`In a first step the atoms are cooled and then associated to a highly
excited molecule in the a^3^`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Sigma"}),` state. From there the atom has to
be transferred down in to the ground state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),`. A direct thransfer is not possible
as the Franck-Condon factors do not allow for it. Another path is to go
through an intermediate level (here the 2`,i.jsx(e.code,{className:"language-math math-inline",children:"^3 \\Sigma"}),` level), which has
overlap with both of them. However, this level has typically overlap
with plenty of other levels and a finite lifetime. How can we then
optimize the transfer ? The idea is to use the concept of dark states in
the triplet of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\{i, e, g\\}"}),"."]}),`
`,i.jsx(e.h2,{children:"The dark states in three level systems"}),`
`,i.jsx(e.p,{children:`We can visualize the idea of the dark state transfer through the
following Hamiltonian:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}= \\Omega_1\\left(\\left|i\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle i\\right|\\right)+\\Omega_2\\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)"})}),`
`,i.jsx(e.p,{children:"We can rewrite it as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}= (\\Omega_1\\left|i\\right\\rangle+\\Omega_2\\left|g\\right\\rangle)\\left\\langle e\\right|+\\left|e\\right\\rangle(\\Omega_1\\left\\langle i\\right|+\\Omega_2\\left\\langle g\\right|)\\\\
\\propto\\left|B\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle B\\right|\\\\
\\left|B\\right\\rangle= \\frac{\\Omega_1\\left|i\\right\\rangle+\\Omega_2\\left|g\\right\\rangle}{\\sqrt{\\Omega_1^2+\\Omega_2^2}}`})}),`
`,i.jsxs(e.p,{children:[`So in the three level scheme the excited state is always
could to the so-called bright state, which is a coherent superposition
of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|i\\right\\rangle"}),`. The orthogonal state is the dark
state:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|D\\right\\rangle= \\frac{\\Omega_1\\left|g\\right\\rangle-\\Omega_2\\left|i\\right\\rangle}{\\sqrt{\\Omega_1^2+\\Omega_2^2}}\\\\
\\langle B| D\\rangle = 0`})}),`
`,i.jsx(e.p,{children:`Now we can also discuss the transfer sequence non as
STIRAP (stimulated Raman adiabatic passage).`}),`
`,i.jsx(e.h2,{children:"STIRAP"}),`
`,i.jsx(e.p,{children:`STIRAP transfers the loosely bound molecules coherently into the
groundstate without ever passing through the lossy excited level. It has
the following steps:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The dressing laser ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_2"}),` is ramped on. The initial
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|i\\right\\rangle"})," is now the dark state."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The coupling laser ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_1"}),` is ramped on, while the laser
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_2"}),` is ramped down. This transfers the
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|i\\right\\rangle"}),` adiabatically into the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),`, which is the dark state for
fully switched of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_2"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`The molecules are now in the groundstate with a transfer efficiency of
roughly `,i.jsx(e.code,{className:"language-math math-inline",children:"50\\%"}),"."]}),`
`,i.jsx(e.h1,{children:"Measurement of the electron electric dipole moment"}),`
`,i.jsxs(e.p,{children:[`Despite their complexity, molecules can be an enormously powerful tool
for precision measurements as you might find in `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.90.025008",children:"this"})," or ",i.jsx(e.a,{href:"https://arxiv.org/abs/1710.02504",children:"this review"}),`. The test of
the existance of a permanent electric dipole moment (electron edm) of
the electron is one of these tests.`]}),`
`,i.jsxs(e.p,{children:[`What does does the existance of electron edm actually mean ? We have
already discussed quite heavily the existance of a permanent edm for
polar molecules. The amplitude of their dipole moment is in the order of
a few `,i.jsx(e.code,{className:"language-math math-inline",children:"ea_0"}),`, which is also the natural unit for the induced edm of
atoms. One could now also imagine that the electron itself has an edm,
which is aligned with its spin `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{D}_e = d_e \\vec{s}_e"}),`. The standard
model actually predicts such a permanent electron edm, but only of the
amplitude `,i.jsx(e.code,{className:"language-math math-inline",children:"d_e \\approx 10^{-30}ea_0"}),`, which is fantastically small .
However, the search continues as most extensions of the standard model
actually predict substantially higher values as summarized in Fig.
`,i.jsx(e.a,{href:"#fig-dipole",children:"5"}),`. As we can see the
most precise measurments are actually performed in very heavy di-atomic
molecules.`]}),`
`,i.jsxs(e.p,{children:[`In these molecules the electron 'feels' enormous effective electric
fields, which can reach the `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.119.153001",children:"several GV/cm regime"}),"."]}),`
`,i.jsx(me,{id:"fig-dipole",href:Poe,caption:"Search for the permanent electric dipole moment"}),`
`,i.jsx(e.p,{children:`The search for the dipole moment is then testing the dependence of the
electron energy:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_\\pm  = \\pm(\\mu B_0 + d_e E)"})}),`
`,i.jsxs(e.p,{children:[`This energy difference can be read out through Ramsey
spectroscopy. Switching the electric field allows then to switch the
frequency difference by `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\delta \\omega = 4d_e E"}),`. Only an upper
limit is known up to now `,i.jsx(e.code,{className:"language-math math-inline",children:"|d_e|< 8.7 e cm"}),"."]})]})}function Boe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Ej,{...t})}):Ej(t)}const Sj=Object.freeze(Object.defineProperty({__proto__:null,default:Boe,frontmatter:Doe},Symbol.toStringTag,{value:"Module"})),Foe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:18,title:"Lecture 18 - Quantization of the Electromagnetic field"};function Cj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We are looking into the quantization of the electromagnetic field. How
to find the conjugate momenta and how we can identify the photon as a
quantized particle.`}),`
`,i.jsx(e.p,{children:`Until now we exclusively treated the atom, molecule etc in a
quantum-mechanical way. The electromagnetic field was always treated
classically. We will attempt to change that for various reasons:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Spontaneous emission and the Lamb shift can only be understood
within quantum electrodynamics.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Several experiments control the electromagnetic field at the single
photon level, so we have to understand how this works.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"It frankly very unsatifying to only quantize half the problem."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`So before we start the endevour let us start out with the some reminders
on the properties of radiation in classical electromagnetism.`}),`
`,i.jsx(e.h1,{children:"Maxwell's Equations and Vector Potential"}),`
`,i.jsx(e.p,{children:"Electrodynamics is described by Maxwell's equations:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{\\nabla} \\cdot \\vec{B} = 0\\\\
\\vec{\\nabla} \\times \\vec{E} + \\frac{\\partial \\vec{B}}{\\partial t}=0\\\\
\\vec{\\nabla} \\cdot \\vec{E} = \\frac{1}{\\epsilon_0}\\rho(\\vec{r},t) \\\\
\\vec{\\nabla} \\times \\vec{B} = \\frac{1}{c^2} \\frac{\\partial \\vec{E}}{\\partial t}+\\frac{1}{\\epsilon_0 c^2}\\vec{j}`})}),`
`,i.jsx(e.p,{children:`These equations are the equations of motion for the
electromagnetic field. The first two are the homogeneous Maxwell
equations and we can directly solve them by setting:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{B} = \\vec{\\nabla}\\times\\vec{A}\\\\
\\vec{E}= -\\frac{\\partial}{\\partial t}A-\\nabla \\phi`})}),`
`,i.jsxs(e.p,{children:["Quite importantly, the choice of the potential ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{A}"}),`
has an inherent gauge freedom as we can basically perform the `,i.jsx(e.em,{children:`local
gauge transformation`}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{A} \\rightarrow \\vec{A} + \\vec{\\nabla} f (\\vec{r},t)\\\\
\\phi \\rightarrow \\phi - \\frac{\\partial f}{\\partial t}`})}),`
`,i.jsx(e.p,{children:`So we can transform the electromagnetic field and the
magnetic field, but the equations of motion remain the same. It is this
local gauge freedom, which also allows us to have charge conservation.
But it is also this gauge freedom, which will make the quantization
rather technically involved.`}),`
`,i.jsx(e.h2,{children:"Free radiation"}),`
`,i.jsx(e.p,{children:`To simplify the problem, we will actually, only work on free
electromagnetic radiation, which simplifies the remaining Maxwell
equations too:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{\\nabla} \\cdot \\vec{E} = 0 \\\\
\\vec{\\nabla} \\times \\vec{B} = \\frac{1}{c^2} \\frac{\\partial\\vec{E}}{\\partial t}`})}),`
`,i.jsxs(e.p,{children:["They become very simple to within the ",i.jsx(e.strong,{children:"Coulomb gauge"}),`,
were we fix:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\nabla \\cdot \\vec{A} = 0`})}),`
`,i.jsx(e.p,{children:"For the electric field we have:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{\\nabla} \\cdot \\left(-\\frac{\\partial}{\\partial t}A-\\nabla \\phi\\right) = 0 \\\\
-\\Delta \\phi = 0`})}),`
`,i.jsxs(e.p,{children:["This is solved through the boring solution ",i.jsx(e.code,{className:"language-math math-inline",children:"\\phi = 0"}),`.
For the magnetic field we obtain`,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{\\nabla} \\times (\\nabla \\times \\vec{A}) = -\\frac{1}{c^2} \\frac{\\partial^2\\vec{A}}{\\partial t^2}\\\\
\\nabla^2 \\vec{A}  -\\frac{1}{c^2} \\frac{\\partial^2\\vec{A}}{\\partial t^2}=0`})}),`
`,i.jsx(e.h2,{children:"Solution in terms of plane waves"}),`
`,i.jsx(e.p,{children:"We can directly solve the problem, by using the Fourier representation:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{A}(\\vec{r}, t)= \\frac{1}{(2\\pi)^{3/2}}\\int d^3\\vec{k}\\vec{A}(\\vec{k},t)e^{i\\vec{k}\\vec{r}}"})}),`
`,i.jsx(e.p,{children:"We then find that the solutions fulfill the requirement:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left(\\vec{k}^2 +\\frac{1}{c^2} \\frac{\\partial^2}{\\partial t^2}\\right)\\vec{A}(\\vec{k},t)=0"})}),`
`,i.jsxs(e.p,{children:[`So the free radiation describes a travelling wave in the direction
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{k}"}),`. The coulomb gauge further tells us that the vector potential only
has components, which are orthogonal to `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{k}"})," as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{k}\\cdot\\vec{A} = 0\\\\
\\vec{A}(\\vec{k}) = \\vec{e}_1 A_1(\\vec{k}) + \\vec{e}_2 A_2(\\vec{k})`})}),`
`,i.jsx(e.p,{children:`Given that these equations of motion for the vector potential look a lot
like the ones of a harmonic oscillator, let us go through the
quantization of the harmonic oscillator first.`}),`
`,i.jsx(e.h1,{children:"Quantization procedure for the harmonic oscillator"}),`
`,i.jsx(e.p,{children:`To the the problem, we first have to go back the cooking recipe for the
quantization of a classical problem. In a first step, we have to obtain
the relevant Lagrangian. Knowing what is it, is a rather interesting
artform of theoretical physics, but for most cases you might just take
it as a given thing. We have:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"L_{HO} = \\frac{1}{2}m\\dot{x}^2-\\frac{m\\omega^2}{2}x^2"})}),`
`,i.jsx(e.p,{children:"We can now identify the conjugate momentum as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`p = \\frac{\\partial L}{\\partial \\dot{x}}\\\\
 = m\\dot{x}`})}),`
`,i.jsx(e.p,{children:"At this stage we can calculate the Hamiltonian:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H = \\dot{x}p - L\\\\
H_{HO} = \\frac{p^2}{2m}+\\frac{m\\omega^2}{2}x^2`})}),`
`,i.jsx(e.p,{children:`At this stage we can identify the classical equations of
motion through:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{dx}{dt}= \\frac{\\partial H}{\\partial p}\\\\
\\frac{dp}{dt}= -\\frac{\\partial H}{\\partial x}`})}),`
`,i.jsx(e.p,{children:`It results just in the usual Newtons law. To get now the
quantum formulation, we can quantize the system by imposing the
commutation relationship on position and its conjugate momentum:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"~[\\hat{x}, \\hat{p}] = i\\hbar"})}),`
`,i.jsx(e.p,{children:"We then had the final Hamiltonian:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\frac{\\hat{p}^2}{2m}+\\frac{m\\omega^2}{2}\\hat{x}^2"})}),`
`,i.jsx(e.p,{children:`However, we know from the previous lecture that it is
much nicer to work in the basis of raising and lowering operators:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a} = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}x+i\\frac{p}{\\sqrt{m\\omega}}\\right)\\\\
\\hat{a}^\\dag = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}x-i\\frac{p}{\\sqrt{m\\omega}}\\right)\\\\
~[\\hat{a}, \\hat{a}^\\dag] =1`})}),`
`,i.jsx(e.p,{children:"for which we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} =\\hbar\\omega\\left(\\hat{a}^\\dag \\hat{a}+\\frac{1}{2}\\right)"})}),`
`,i.jsx(e.h1,{children:"The lagrangien for the electromagnetism"}),`
`,i.jsxs(e.p,{children:[`At this stage we would like to roll out the formalism for
electromagnetism, following the discussion of `,i.jsx(e.a,{href:"https://laboutique.edpsciences.fr/produit/1061/9782759823369/mecanique-quantique-tome-3",children:`Cohen-Tannoudji Vol 3
(appendix of 18)`}),`. It adds sequentially the following new
problems, which we will tackle as we get to them:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The Lagrangien has plenty degrees of freedom."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The dynamical variables are complex."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"We start out with the Lagrangien:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`L = \\int d^3r \\mathcal{L}(\\vec{r},t)\\\\
\\mathcal{L}(\\vec{r},t)= \\frac{\\epsilon_0}{2}\\left(\\vec{E}^2-c^2\\vec{B}^2\\right)`})}),`
`,i.jsx(e.p,{children:`As it depends explicitly on the electric and magnetic
field it is manifestly gauge invariant. However, the current version
does not allow us to to identify the conjugate variables. We will use
the vector potential to introduce them:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\mathcal{L}(\\vec{r},t)= \\frac{\\epsilon_0}{2}\\left(\\dot{\\vec{A}}^2(\\vec{r},t)-c^2\\left(\\nabla \\times \\vec{A}\\right)^2\\right)"})}),`
`,i.jsx(e.p,{children:`Now we obtained the time derivative, which we can employ
to identify the conjugate momentum, but it also gave us the unwanted rot
term. We get rid of them transforming into Fourier space: We can then
write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\int d\\vec{r} \\vec{E}(\\vec{r},t)\\vec{E}(\\vec{r},t)= \\int d\\vec{k} \\dot{\\vec{A}}(\\vec{k},t)\\dot{\\vec{A}}^*(\\vec{k},t)\\\\
\\int d\\vec{r} \\vec{B}(\\vec{r},t)\\vec{B}(\\vec{r},t)= \\int d\\vec{k}k^2 \\vec{A}(\\vec{k},t)\\vec{A}^*(\\vec{k},t)\\\\`})}),`
`,i.jsx(e.p,{children:"We can then write the Lagrangien as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`L = \\int d^3k \\mathcal{L}(\\vec{k},t)\\\\
\\mathcal{L}(\\vec{k},t) = \\epsilon_0\\left( \\dot{\\vec{A}}(\\vec{k},t)\\dot{\\vec{A}}^*(\\vec{k},t)-c^2k^2 \\vec{A}(\\vec{k},t)\\vec{A}^*(\\vec{k},t)\\right)`})}),`
`,i.jsxs(e.p,{children:["As for the integral over ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{k}"}),`, we will only
integrate over the positive contributions. This avoids summing over
identical terms at `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{k}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"-\\vec{k}"}),`. Finally, we can also use
the polarization to obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\mathcal{L}(\\vec{k},t)= \\epsilon_0\\sum_i \\left( \\dot{A}_i(\\vec{k},t)\\dot{A}_i^*(\\vec{k},t)-c^2k^2 A_i(\\vec{k},t)A_i^*(\\vec{k},t)\\right)"})}),`
`,i.jsx(e.h2,{children:"The conjugate moment and hamiltonian"}),`
`,i.jsxs(e.p,{children:[`We have discussed in the section on the quantization of the harmonic oscillator how to find the conjugate momentum for classical
variables. Here, we have complex variables. But, we can deduce the
conjugate momentum through as decomposition `,i.jsx(e.code,{className:"language-math math-inline",children:"X = x_1 + i x_2"}),`. We
actually obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P = \\frac{\\partial L}{\\partial \\dot{X}^*}"})}),`
`,i.jsxs(e.p,{children:["Here, it implies that the conjugate momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Pi_i(\\vec{k})"})," is"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\Pi_i(\\vec{k}) = \\frac{\\partial\\mathcal{L}(\\vec{k},t)}{\\partial \\dot{A}^*_i(\\vec{k},t)}\\\\
= \\epsilon_0 \\dot{A}_i(\\vec{k},t)\\\\
= -\\epsilon_0 E_i(\\vec{k},t)`})}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:`So the conjugate momentum to the vector potential is
the electric field.`})}),`
`,i.jsx(e.p,{children:`We can now calculate the Hamiltonian before we quantize the system. We
obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H = \\sum_i \\int d\\vec{k}\\left(\\dot{A}_i(\\vec{k},t)\\Pi_i(\\vec{k},t)+\\dot{A}^*_i(\\vec{k},t)\\Pi^*_i(\\vec{k},t)\\right)-L"})}),`
`,i.jsx(e.p,{children:"We finally obtain the Hamiltonian of free radiation:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\\\
\\mathcal{H}(\\vec{k}) = \\sum_i  \\left(\\frac{1}{\\epsilon_0}\\Pi_i^*(\\vec{k},t)\\Pi_i(\\vec{k},t)+\\epsilon_0c^2k^2 A^*_i(\\vec{k},t)A_i(\\vec{k},t)\\right)`})}),`
`,i.jsx(e.h2,{children:"The quantized Hamiltonian"}),`
`,i.jsx(e.p,{children:`We are now ready to quantize the system, we simply have to be careful
about the quantization of the complex operators. Going through the
components, we obtain:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"A_i^*\\rightarrow \\hat{A}_i^\\dag"})}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"A_i\\rightarrow \\hat{A}_i"})}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"[\\hat{A}_i(\\vec{k}),\\hat{\\Pi}^\\dag_j(\\vec{k}')]= i\\hbar \\delta_{ij}\\delta(\\vec{k}-\\vec{k}')"})}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"Hence, the fully quantized Hamiltonian is:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\\\
\\hat{\\mathcal{H}}(\\vec{k}) = \\sum_i  \\left(\\frac{1}{\\epsilon_0}\\hat{\\Pi}_i^\\dag(\\vec{k})\\hat{\\Pi}_i(\\vec{k})+\\epsilon_0c^2k^2 \\hat{A}^\\dag_i(\\vec{k})\\hat{A}_i(\\vec{k})\\right)\\\\
 = \\epsilon_0 \\sum_i  \\left(\\hat{E}_i^\\dag(\\vec{k})\\hat{E}_i(\\vec{k})+c^2k^2 \\hat{A}^\\dag_i(\\vec{k})\\hat{A}_i(\\vec{k})\\right)`})}),`
`,i.jsx(e.h1,{children:"The normal modes"}),`
`,i.jsxs(e.p,{children:[`The hamiltonian above looks roughly like a harmonic oscillator, but not
really yet as there are some funny conjugates trailing. This can get
solved through the definition of the appropiate raising and lowering
operators, named `,i.jsx(e.strong,{children:"normal modes"}),". They are defined through:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a}_i(\\vec{k}) = \\sqrt{\\frac{\\epsilon_0 \\omega}{2\\hbar }}\\left(\\hat{A}_i(\\vec{k})+\\frac{i}{\\epsilon_0\\omega}\\hat{\\Pi}_i\\right)\\\\
\\hat{a}^\\dag_i(\\vec{k}) = \\sqrt{\\frac{\\epsilon_0 \\omega}{2\\hbar }}\\left(\\hat{A}^\\dag_i(\\vec{k})-\\frac{i}{\\epsilon_0\\omega}\\hat{\\Pi}_i^\\dag \\right)`})}),`
`,i.jsx(e.p,{children:`With the underlying commutation relationships of the
conjugate operators we obtain the usual raising and lowering operators:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"~[\\hat{a}_i(\\vec{k}), \\hat{a}^\\dag_j(\\vec{k}')] =\\delta_{ij}\\delta(\\vec{k}-\\vec{k}')"})}),`
`,i.jsx(e.p,{children:`Multiplying it out brings the Hamiltonian in normal
form:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H = \\int d\\vec{k} \\mathcal{H}(\\vec{k})\\\\
\\hat{\\mathcal{H}}(\\vec{k}) = \\sum_i  \\frac{\\hbar\\omega_k}{2}\\left(\\hat{a}_i(\\vec{k})\\hat{a}_i^\\dag(\\vec{k})+\\hat{a}_i^\\dag(\\vec{k})\\hat{a}_i(\\vec{k})\\right)\\\\
= \\sum_i \\hbar\\omega_k\\left(\\hat{a}^\\dag_i(\\vec{k})\\hat{a}_i(\\vec{k})+\\frac{1}{2}\\right)`})}),`
`,i.jsx(e.h2,{children:"Quadratures"}),`
`,i.jsx(e.p,{children:`It is common to push the terminology of the harmonic oscillator even
further, by the definition of the quadratures:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a}_i(\\vec{k}) = \\frac{1}{\\sqrt{\\hbar2}}\\left(\\hat{Q}_i(\\vec{k})+\\hat{P}_i(\\vec{k})\\right)\\\\
\\hat{a}^\\dag_i(\\vec{k}) =\\frac{1}{\\sqrt{\\hbar2}}\\left(\\hat{Q}_i(\\vec{k})-\\hat{P}_i(\\vec{k})\\right)`})}),`
`,i.jsx(e.h2,{children:"The field operators"}),`
`,i.jsx(e.p,{children:`We can also express the actual field operators in terms of the normal
modes:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{E}(\\vec{r})= i \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)\\\\
\\hat{B}(\\vec{r})= \\frac{i}{c} \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)(\\vec{k}\\times\\vec{e}_i)\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)\\\\
\\hat{A}(\\vec{r})=  \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar}{2\\epsilon_0\\omega}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}+\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)`})}),`
`,i.jsx(e.p,{children:`In the following lectures we will typically focus on the electric field
as it couples to the electron charge through the electric dipole moment:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_I = \\vec{D}\\cdot\\vec{E}"})}),`
`,i.jsx(e.p,{children:"This will be the content of the next lecture."}),`
`,i.jsx(e.h1,{children:"The notion of the photon"}),`
`,i.jsxs(e.p,{children:[`We can now get back to the interpretation of the eigenstates of the
raising and lowering operators as a photon. We have seen previously in
lecture 6 that the operator
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{n}_i(\\vec{k}) = \\hat{a}_i^\\dag (\\vec{k}) \\hat{a}_i(\\vec{k})"}),` is
counting the occupation number in the Fock basis:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{n}_i(\\vec{k}) \\left|n_i\\right\\rangle= n_i\\left|n_i\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"n_i"}),` are then non-negative integers. We can further create a
well-defined photon number state through the raising operators from the
vacuum:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|n\\right\\rangle = \\frac{(a^\\dag)^n}{\\sqrt{n!}}\\left|0\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[`Given all the numbers the single photon energy is
corresponding to intensities in the order pico to femto
Watts(`,i.jsx(e.code,{className:"language-math math-inline",children:"\\sim 10^{-12}"})," -- ",i.jsx(e.code,{className:"language-math math-inline",children:"10^{-15}"}),"W)."]}),`
`,i.jsxs(e.p,{children:[`A rather nice discussion concerning the details of a proper quantization
of the interacting field theory of quantum electromagnetism is given in
the `,i.jsx(e.a,{href:"http://users.physik.fu-berlin.de/~kleinert/b6/psfiles/Chapter-11-qed.pdf",children:"book by Kleinert"}),"."]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`Remember
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{\\nabla} \\times (\\nabla \\times \\vec{A}) =\\nabla(\\nabla \\vec{A})-\\nabla^2 \\vec{A}"})," ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Hoe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Cj,{...t})}):Cj(t)}const Aj=Object.freeze(Object.defineProperty({__proto__:null,default:Hoe,frontmatter:Foe},Symbol.toStringTag,{value:"Module"})),qoe="/assets/static/lecture19_pic1.DWTQplS1.png",$oe="/assets/static/lecture19_pic2.DM5gYrrV.png",zoe="/assets/static/lecture19_pic3.BFHPtpax.png",Woe="/assets/static/lecture19_pic4.DmMohLP1.png",Uoe="/assets/static/lecture19_pic5.Bpdgi1AI.png",Voe="/assets/static/lecture19_pic6.2azzGp9_.png",Yoe={author:["Fred Jendrzejewski","Selim Jochim","Matthias Weidemüller"],order:19,title:"Lecture 19 - Atom-Light Interactions and Dressed States"};function Nj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We have seen that we can understand matter with increasing complexity
from the simple two-level system up to molecules. We further studied,
how they can be control by classical electromagnetic fields to a very
high accuracy.`}),`
`,i.jsxs(e.p,{children:[`In the last lecture we also studied how we can understand the
electromagnetic field as an ensemble of quantum mechanical photon modes.
So in today's lecture we will focus on the interaction between atoms and
light, which is in a particularly clean set-up, namely cavity quantum
electrodynamics. The fundamental ingredients are sketched in Fig.
`,i.jsx(e.a,{href:"#fig-rydberg",children:"1"}),"."]}),`
`,i.jsx(me,{id:"fig-rydberg",href:qoe,caption:"Rydberg atoms interacting with photons in a cavity"}),`
`,i.jsx(e.p,{children:"They are:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The electric field confined in a high finesse cavity. It will
bescribed by `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\textrm{f}"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["An atom transversing the cavity, described by ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\textrm{a}"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The interaction between the atomic charge and the electric field of
the cavity described by `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\textrm{af}"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"The Hamiltonian reads:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H}_0 = \\hat{H}_\\textrm{a} + \\hat{H}_\\textrm{f} + \\hat{H}_\\textrm{af}`})}),`
`,i.jsx(e.h1,{children:"The qubit system"}),`
`,i.jsx(e.p,{children:`The first ingredient of the Hamiltonian is the qubit system. Several
widely studied system that we will come back to exist. The most widely
studied are:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The internal qubit states of ions."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The transmon qubit in superconducting systems."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["Another approach are well isolated states in atoms, namely ",i.jsx(e.strong,{children:"Rydberg"}),`
states.`]}),`
`,i.jsx(e.h2,{children:"Rydberg atoms"}),`
`,i.jsxs(e.p,{children:[`The Rydberg states are highly excited states of Alkali atoms, which have
only one electron on the outer shell. As such they are similiar to the
hydrogen atom and hence they can be well described within atomic
physics. In the hydrogen atom the energy states are described by the
principle quantum number `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_n = -E_I \\frac{1}{n^2} \\text{ with }E_I = 13.6 eV"})}),`
`,i.jsxs(e.p,{children:[`The typically employed Rydberg states are then in the
order of `,i.jsx(e.code,{className:"language-math math-inline",children:"n\\approx 50"}),`, such that the energy difference between two
neighboring states is in the order of a few 50 GHz. Focusing only on two
of those states we can write the Hamiltonian as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\textrm{a} = \\frac{\\hbar\\omega_0}{2} \\left(\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right| \\right)"})}),`
`,i.jsx(e.p,{children:`Through the remainder of the lecture we will frequently
switch notations between the spin language and the two-level system:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\sigma}_z = \\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|\\\\
\\hat{\\sigma}_+ = \\left|e\\right\\rangle\\left\\langle g\\right|\\\\
\\hat{\\sigma}_- = \\left|g\\right\\rangle\\left\\langle e\\right|`})}),`
`,i.jsx(e.p,{children:"Using these highly excited states has several advantages:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The energy spacing of a few GHz falls into the regime of microwaves,
which are extremely precisely controlled.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Given the high quantum number, the electron is typically far away
from the nucleus and the induced dipole moments can be rather
large.As a such a strong coupling between light-field and qubit
seems achievable.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The lifetime of the Rydberg states is in the order of a few
microseconds, which can be long compared to most other time scales
within the experiments.`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"The next step is to couple qubit to a suitable cavity."}),`
`,i.jsx(e.h1,{children:"The cavity field"}),`
`,i.jsx(e.p,{children:`The atom has be coupled to a suitable electric field. The electric field
reads in general:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{E}(\\vec{r})= i \\int \\frac{d\\vec{k}}{(2\\pi)^{3/2}}\\sum_i \\left(\\frac{\\hbar\\omega}{2\\epsilon_0}\\right)\\vec{e}_i\\left(\\hat{a}_i(\\vec{k})e^{i\\vec{k}\\vec{r}}-\\hat{a}^\\dag_i(\\vec{k})e^{-i\\vec{k}\\vec{r}}\\right)"})}),`
`,i.jsx(e.p,{children:`We can simplify it a lot by working in a suitable
cavity. The most important properties of the cavity are the:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The resonant frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_L"}),` of the light trapped in the
cavity.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The quality factor ",i.jsx(e.code,{className:"language-math math-inline",children:"Q"}),`, which describes the number of round trips
the photon makes within the cavity.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`The cavities employed for cavity electrodynamics in Paris are made of
superconducting material and feature quality factors of up to `,i.jsx(e.code,{className:"language-math math-inline",children:"10^{10}"}),`.
For such high quality factors the electric field can be well reduced to
a single relevant mode `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{E} \\sim (\\hat{a} + \\hat{a}^\\dag)"})}),`
`,i.jsxs(e.p,{children:[`The full Hamiltonian of the electromagnetic field reads
then `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\textrm{f} = \\hbar\\omega_L \\hat{a}^\\dag \\hat{a}"})}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{a}"}),` is the raising operator for the
electro-magnetic field. We typcially describe the electric field in the
Fock basis of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n\\right\\rangle"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{n} \\left|n\\right\\rangle = n \\left|n\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`While is the natural choice for the given Hamiltonian,
this is obviously not the natural basis of the raising and lowering
operators:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a} \\left|n\\right\\rangle = \\sqrt{n} \\left|n-1\\right\\rangle\\\\
\\hat{a}^\\dag \\left|n\\right\\rangle = \\sqrt{n+1} \\left|n+1\\right\\rangle`})}),`
`,i.jsx(e.p,{children:"From those we can construct any Fock state as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|n\\right\\rangle = \\frac{\\left(\\hat{a}^\\dag\\right)^n}{n!}\\left|0\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[`But experimentally we rarely manipulate the Hamiltonian
directly, we much rather control the electric field, which is
proportional to the raising and lowering operators. As such, photon
states are widely described in the basis of `,i.jsx(e.strong,{children:"coherent"})," states:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{a}\\left|\\alpha\\right\\rangle= \\alpha\\left|\\alpha\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`So the eigenvalues are complex numbers corresponding to
the complex electric field amplitudes we know from classical optics. To
make a connection to the Fock space we can then use the above
definitions to write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\alpha\\right\\rangle =e^{-|\\alpha|^2/2}\\sum_n \\frac{\\alpha^n}{\\sqrt{n!}}\\left|n\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[`A very useful visualization of the coherent states
happens in phase space `,i.jsx(e.code,{className:"language-math math-inline",children:"X = \\frac{a+a^\\dag}{2}"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"P = i\\frac{a-a^\\dag}{2}"}),`. They are Gaussian wave packages displaced by
an amplitude `,i.jsx(e.code,{className:"language-math math-inline",children:"|\\alpha|"})," and rotating at speed ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_L"}),"."]}),`
`,i.jsx(e.h1,{children:"The atom-field interaction"}),`
`,i.jsx(e.p,{children:`Finally, we have to describe interaction between the atoms and the
field. Interactions between the atoms and the light field are governed
by the electric dipole interaction between the atom and the light`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\textrm{af}= -\\hat{\\vec{D}} \\cdot \\hat{\\vec{E}}"})}),`
`,i.jsx(e.p,{children:`We can expand the dipole operator over the two levels of
the atom:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\vec{D}} = \\vec{d}\\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)\\\\
\\hat{\\vec{D}} = \\vec{d}\\left(\\hat{\\sigma}_- + \\hat{\\sigma}_+\\right)`})}),`
`,i.jsx(e.p,{children:"We can now write:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\textrm{af}= \\frac{\\hbar \\Omega_0}{2} \\left(\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|\\right)\\left(\\hat{a}+\\hat{a}^\\dag\\right)"})}),`
`,i.jsx(e.p,{children:`Multiplying out the different the two brackets leads to two processes of
the type:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\sigma}_- \\hat{a}^\\dag"}),`, which describes the emission of a
photon by deexcitation of the atom.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\sigma}_+ \\hat{a}"}),`, which describes the absorption of a photon
by excitation of the atom.`]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`The other two processes are strongly off-resonant and we can typically
ignore them. This approximation consists in the rotating wave
approximation, discussed in lecture 4. The coupling
hamiltonian reads then:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\textrm{af}= \\frac{\\hbar \\Omega_0}{2} \\left(\\hat{\\sigma}_- a^\\dag +\\hat{\\sigma}_+ a\\right)"})}),`
`,i.jsx(e.p,{children:`We can put the full Hamiltonian together to obtain the Jaynes-Cummings
model:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_{JC}=\\hbar\\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right| +\\hbar\\omega_L \\hat{a}^\\dag \\hat{a} +\\frac{\\hbar \\Omega_0}{2} \\left(\\hat{\\sigma}_- a^\\dag +\\hat{\\sigma}_+ a\\right)"})}),`
`,i.jsx(e.h1,{children:"Dressed Atom Picture"}),`
`,i.jsx(e.p,{children:`We can now analyze the Hamiltonian step-by-step in the dressed atom
picture.`}),`
`,i.jsx(e.h2,{children:"Optional: Bare States"}),`
`,i.jsxs(e.p,{children:[`Let us first look at the unperturbed ("bare") states, ignoring
`,i.jsx(e.code,{className:"language-math math-inline",children:"H_\\textrm{af}"}),` and depict the ground and excited state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"}),` of the atom on an energy scale, as
shown in below.`]}),`
`,i.jsx(me,{id:"fig-rydberg",href:$oe,caption:"The ground and excited state $\\left|g\\right\\rangle$ and $\\left|e\\right\\rangle$ of the atom on an energy scale. Here, the energy of the ground state is $E_g = 0$. The energy difference between the two states is $\\hbar\\omega_0$. A photon of the surrounding light field has an energy $\\hbar\\omega_L$."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\hat{H}_\\textrm{a} + \\hat{H}_\\textrm{f} = \\hbar \\omega_0 \\left|e\\right\\rangle \\left\\langle e\\right| + \\hbar \\omega_\\textrm{L} \\hat{a}^\\dag \\hat{a}"})}),`
`,i.jsx(e.p,{children:`The Hilbert space of this Hamiltonian contains both the state of the
atom and the state of the field. We can write them as product states of
the form`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|g/e, n\\right\\rangle = \\left|g/e\\right\\rangle \\otimes \\left|n\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`The left substate of the tensor product denotes the
state of the atom and the right substate is defined by the number of
photons in the external field. We then have:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}\\left|g/e, n\\right\\rangle = \\left(\\hbar\\omega_0 \\delta_{g/e,e}+\\hbar\\omega_L n\\right)\\left|g/e, n\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["We will assume that there is a very small detuning ",i.jsx(e.code,{className:"language-math math-inline",children:"\\delta_\\textrm{l}"}),`
between the atom and the light field:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\delta_\\textrm{l}| = |\\omega_\\textrm{L}- \\omega_0 | \\ll \\omega_0"})}),`
`,i.jsx(me,{id:"fig-bare-diagram",href:zoe,caption:"An energy diagram of the bare states. Note that the interaction between atom and light field has not yet been introduced!"}),`
`,i.jsxs(e.p,{children:[`We can draw another energy diagram (see
`,i.jsx(e.a,{href:"#fig-bare-diagram",children:"3"}),`), where the state
of the atom and the state of the light field are contained in one "bare"
state. It does `,i.jsx(e.em,{children:"not"}),` yet include the interaction between the atom and
the light field. From the diagram one can see that the states forming
the manifold`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\Sigma (n) = \\left\\{ \\left|g,n+1\\right\\rangle, \\left|e,n\\right\\rangle \\right\\}"})}),`
`,i.jsx(e.p,{children:"are almost degenerate."}),`
`,i.jsx(e.h2,{children:"Dressed States"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\textrm{af}"}),` couples now only the two states within each
manifold
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Sigma(n)= \\left\\{ \\left|g,n+1\\right\\rangle, \\left|e,n\\right\\rangle \\right\\}"}),`.
We thus obtain a two-state system (see lecture 3) for
which we can write:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left( \\begin{array}{c} c_1 \\\\ c_2 \\end{array} \\right) \\equiv c_1 \\left|g,n+1\\right\\rangle + c_2 \\left|e,n\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"The off-diagonal matric element reads:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"h_n = \\left\\langle e,n|\\hat{H_\\textrm{af}|g,n+1}\\right\\rangle = \\frac{\\hbar \\Omega_0}{2} \\sqrt{n+1}."})}),`
`,i.jsxs(e.p,{children:[`Note that the square of the matrix element is
proportional to `,i.jsx(e.code,{className:"language-math math-inline",children:"I \\propto (n+1) \\approx n"})," for large ",i.jsx(e.code,{className:"language-math math-inline",children:"n"}),`. The three
Hamiltonians can then be written in matrix notation and the
total Hamiltonian can be constructed:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H_\\textrm{a} = \\left( \\begin{array}{cc} 0 & 0 \\\\ 0 & \\hbar \\omega_0 \\end{array} \\right),\\\\
H_\\textrm{f} = \\left( \\begin{array}{cc} (n+1)\\hbar \\omega_\\textrm{l} & 0 \\\\ 0 & n \\hbar \\omega_\\textrm{l} \\end{array} \\right) =  \\left( \\begin{array}{cc} \\hbar \\omega_\\textrm{l} & 0 \\\\ 0 & 0 \\end{array} \\right) + n \\hbar \\omega_\\textrm{l} \\cdot \\mathbb{1},\\\\
H_\\textrm{af} = \\left( \\begin{array}{cc} 0 & h_n \\\\ h_n & 0 \\end{array} \\right), \\qquad \\text{where} \\qquad h_n = \\hbar \\frac{\\Omega_0}{2}\\sqrt{n+1},\\\\
\\hat{H} = \\left( \\begin{array}{cc} \\hbar \\omega_\\textrm{l} & h_n \\\\ h_n & \\hbar \\omega_0 \\end{array} \\right) + n \\hbar \\omega_\\textrm{l} \\cdot \\mathbb{1},`})}),`
`,i.jsxs(e.p,{children:[`The "dressed states" are obtained by diagonalizing
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}"})," within ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Sigma(n)"}),`, which es effectively once again a two
level system `,i.jsx(e.a,{href:"#fig-dressed-diagram",children:"4"}),` shows
an energy diagram including the bare and the dressed states. The energy
difference between the states `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1(n)\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|2(n)\\right\\rangle"})," is"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hbar \\Omega = \\hbar \\sqrt{\\delta_\\textrm{l}^2 + \\Omega_0^2}"})}),`
`,i.jsxs(e.p,{children:["with the effective Rabi frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),"."]}),`
`,i.jsx(me,{id:"fig-dressed-diagram",href:Woe,caption:"An energy diagram showing the bare and the dressed states."}),`
`,i.jsx(e.p,{children:`The corresponding eigenvectors are then a mixture of atom and light as
visualized in the figure below.`}),`
`,i.jsx(me,{id:"fig-dressed-energies",href:Uoe,caption:"Energies of the bare and dressed states as a function of the detuning."}),`
`,i.jsx(e.h1,{children:"Quantum Rabi oscillations"}),`
`,i.jsx(e.p,{children:`In the resonant case, the Jaynes-Cummings model simply describes a
two-level system that is coupled by a quantized Rabi coupling strength`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\Omega_n = \\Omega_0 \\sqrt{n+1}"})}),`
`,i.jsx(e.p,{children:`So even for an empty cavity the vacuum is predicted to
induce Rabi coupling, if it is switched on and off. If more than one
photon is in the cavity the oscillation is simply a superposition of
several coupling strength:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_e(t)=\\sum_n p_n\\frac{1+\\cos\\left[\\Omega_n t\\right]}{2}"})}),`
`,i.jsxs(e.p,{children:["This effect has been observed in Ref. ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.76.1800",children:"Brune 1996"}),` as
summarized in Fig. `,i.jsx(e.a,{href:"#fig-coherence",children:"6"}),"."]}),`
`,i.jsx(me,{id:"fig-coherence",href:Voe,caption:"Observation of quantum Rabi oscillations in [Brune 1996](http://dx.doi.org/10.1038/22275)."}),`
`,i.jsx(e.h1,{children:"Making Schrödingers kitten"}),`
`,i.jsxs(e.p,{children:[`In the previous section the cavity was tuned exactly on resonance with
the incoming Rydberg atoms, such that coherent oscillations where
possible. On the other hand it is possible to work in the regime, where
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\delta_L"}),` is much larger than the Rabi coupling. In this 'dispersive'
regime the atom does not change its internal state, but it only picks up
a phase `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Phi_0 =  \\frac{\\delta_L^2}{4\\Omega} T_R"}),`. The inverse of the
phase is then imprinted onto the electric field in the cavity. To create
a kitten state the experiment goes as follows:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The cavity is filled by a coherent state ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The Rydberg atom is prepare in a superposition state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\frac{\\left|e\\right\\rangle+\\left|g\\right\\rangle}{\\sqrt{2}}"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The atom now interacts with the cavity for the time ",i.jsx(e.code,{className:"language-math math-inline",children:"T_R"}),`. At the
end, the entangled state is created:`]}),`
`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\Psi\\right\\rangle_1= \\frac{e^{-i\\Phi_0}\\left|e, \\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|g,\\alpha e^{i\\Phi_0}\\right\\rangle}{\\sqrt{2}}"})}),`
`,i.jsxs(e.p,{children:[`This is the typical situation of Scrödingers cat.
Pushing to the extreme case `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Phi_0 = \\frac{\\pi}{2}"}),` we entangled the
atom with the state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\pm i\\alpha\\right\\rangle"}),`. As
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"}),` is a complex number we entangled a single atom with a large
'cat' state. As the atom is detected it projects the full Schrödinger
cat onto the dead or alive state. This projection can be avoided by
adding a second Ramsey pulse, which mixes once again the states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|e\\right\\rangle\\rightarrow\\frac{\\left|e\\right\\rangle+e^{i\\varphi}\\left|g\\right\\rangle}{\\sqrt{2}}\\\\
\\left|g\\right\\rangle\\rightarrow\\frac{\\left|g\\right\\rangle-e^{-i\\varphi}\\left|e\\right\\rangle}{\\sqrt{2}}`})}),`
`,i.jsx(e.p,{children:"The field now becomes:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\Psi_2\\right\\rangle = \\frac{1}{2}\\left|e\\right\\rangle\\otimes\\left[e^{-i\\Phi_0}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle-e^{-i\\varphi}\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]+\\frac{1}{2}\\left|g\\right\\rangle\\otimes\\left[e^{i(\\varphi-\\Phi_0)}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]"})}),`
`,i.jsx(e.p,{children:"The final read-out is then given by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_e = \\frac{1}{2}\\left(1- e^{-n(1-\\cos(2\\Phi_0))}\\cos(\\varphi-\\Phi_0-n\\sin(2\\Phi_0))\\right)"})}),`
`,i.jsx(e.p,{children:`So the presence of the cat leads to a phase shift and a
decrease in fringe contrast. This was observed in the experiments`}),`
`,i.jsx(e.h1,{children:"Making Schrödingers kitten"}),`
`,i.jsxs(e.p,{children:[`In the previous section the cavity was tuned exactly on resonance with
the incoming Rydberg atoms, such that coherent oscillations where
possible. On the other hand it is possible to work in the regime, where
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\delta_L"}),` is much larger than the Rabi coupling. In this 'dispersive'
regime the atom does not change its internal state, but it only picks up
a phase `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Phi_0 =  \\frac{\\delta_L^2}{4\\Omega} T_R"}),`. The inverse of the
phase is then imprinted onto the electric field in the cavity. To create
a kitten state the experiment goes as follows:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The cavity is filled by a coherent state ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The Rydberg atom is prepare in a superposition state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\frac{\\left|e\\right\\rangle+\\left|g\\right\\rangle}{\\sqrt{2}}"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The atom now interacts with the cavity for the time ",i.jsx(e.code,{className:"language-math math-inline",children:"T_R"}),`. At the
end, the entangled state is created:`]}),`
`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\Psi\\right\\rangle_1= \\frac{e^{-i\\Phi_0}\\left|e, \\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|g,\\alpha e^{i\\Phi_0}\\right\\rangle}{\\sqrt{2}}"})}),`
`,i.jsxs(e.p,{children:[`This is the typical situation of Scrödingers cat.
Pushing to the extreme case `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Phi_0 = \\frac{\\pi}{2}"}),` we entangled the
atom with the state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\pm i\\alpha\\right\\rangle"}),`. As
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha"}),` is a complex number we entangled a single atom with a large
'cat' state. As the atom is detected it projects the full Schrödinger
cat onto the dead or alive state. This projection can be avoided by
adding a second Ramsey pulse, which mixes once again the states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|e\\right\\rangle\\rightarrow\\frac{\\left|e\\right\\rangle+e^{i\\varphi}\\left|g\\right\\rangle}{\\sqrt{2}}\\\\
\\left|g\\right\\rangle\\rightarrow\\frac{\\left|g\\right\\rangle-e^{-i\\varphi}\\left|e\\right\\rangle}{\\sqrt{2}}`})}),`
`,i.jsx(e.p,{children:"The field now becomes:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\Psi_2\\right\\rangle = \\frac{1}{2}\\left|e\\right\\rangle\\otimes\\left[e^{-i\\Phi_0}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle-e^{-i\\varphi}\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]+\\frac{1}{2}\\left|g\\right\\rangle\\otimes\\left[e^{i(\\varphi-\\Phi_0)}\\left|\\alpha e^{-i\\Phi_0}\\right\\rangle+\\left|\\alpha e^{i\\Phi_0}\\right\\rangle\\right]"})}),`
`,i.jsx(e.p,{children:"The final read-out is then given by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_e = \\frac{1}{2}\\left(1- e^{-n(1-\\cos(2\\Phi_0))}\\cos(\\varphi-\\Phi_0-n\\sin(2\\Phi_0))\\right)"})}),`
`,i.jsx(e.p,{children:`So the presence of the cat leads to a phase shift and a
decrease in fringe contrast.`}),`
`,i.jsx(e.p,{children:`Nowadays the entangled states have become an interesting platform to
create increasingly large Schrödinger cats. A common example is here the
creation of a GHZ state:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\frac{\\left|0 \\cdots 0\\right\\rangle+ \\left|1\\cdots 1\\right\\rangle}{\\sqrt{2}}"})}),`
`,i.jsxs(e.p,{children:[`A interesting demonstration for up to 14 ions was performed in
`,i.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.106.130506",children:"Monz 2011"}),`. Importantly it also highlights the extremely fast decoherence of larger cat states. We will go into more detail on how to
create increasingly larger cats in the next lecture. However, I would
like to finish the lecture with the discussion of quantum non-demolition
measurements.`]}),`
`,i.jsxs(e.p,{children:["As of the time of writing cold atom systems systems ",i.jsx(e.a,{href:"https://arxiv.org/abs/1905.05721",children:"rOmran 2019"}),` cold
the record of the largest cat with 20 atoms.`]}),`
`,i.jsx(e.h1,{children:"Seeing a photon without destroying it"}),`
`,i.jsxs(e.p,{children:[`The tool of the Rabi oscillations has been extend to observe photons
without destroying them as detailed in great detail in the book by
`,i.jsx(e.a,{href:"https://academic.oup.com/book/7346",children:"Raymond and Haroche"}),`. The underlying principle is the
following:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The atom is supposed to be in the ground state and the cavity is
filled with one photon.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The interaction time is tuned such that the atom undergoes exactly
one Rabi oscillation.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The initial and final state are therefore exactly the same, but the
atom has picked up a phase `,i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"If the cavity was empty at the atom does not acquire a phase shift."}),`
`,i.jsxs(e.p,{children:[`Finally, the phase is read out through a Ramsey sequence between the
state `,i.jsx(e.code,{className:"language-math math-inline",children:"g"})," and some unaffected independent state ",i.jsx(e.code,{className:"language-math math-inline",children:"i"})," . This was implemented in Ref. ",i.jsx(e.a,{href:"http://dx.doi.org/10.1038/22275",children:"Nogues 1999"}),`. Based on this technique,
the team later observed quantum jumps `,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature05589",children:"Gleyzes 2007"}),` and even the
stabilization of a Fock state through quantum feedback `,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature10376",children:"Sayrin 2011"}),"."]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`We chose the phase of the electric field such that we can
eliminate the minus sign in the Hamiltonian `,i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,i.jsxs(e.p,{children:[`We ignore the energy of the quantum vacuum as it is not relevant
for the following discussions `,i.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Goe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Nj,{...t})}):Nj(t)}const Ij=Object.freeze(Object.defineProperty({__proto__:null,default:Goe,frontmatter:Yoe},Symbol.toStringTag,{value:"Module"})),Xoe={author:["Fred Jendrzejewski","Selim Jochim"],order:2,title:"Lecture 2 - A few more cooking recipes for quantum mechanics"};function Lj(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this second lecture we will finish the discussion of the basic
cooking recipes and discuss a few of the consequences like the
uncertainty relation, the existance of wave packages and the Ehrenfest
theorem.`}),`
`,i.jsxs(e.p,{children:[`In the first lecture we discussed briefly the basic
principles of quantum mechanics like operators, state vectors and the
Schrödinger equation. We will finish this discussion today and then
introduce the most important consequences. We will continue to closely
follow the discussion of the introductory chapter of Ref. `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2006",id:"user-content-fnref-2006","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})]}),`
`,i.jsx(e.h2,{children:"Composite systems"}),`
`,i.jsx(e.p,{children:`It is actually quite rare that we can label the system with a single
quantum number. Any atom will involve spin, position, angular momentum.
Other examples might just involve two spin which we observe. So the
question is then on how we label those systems. We then have two
questions to answer:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`How many labels do we need for a system to fully determine its
quantum state ?`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Once I know all the labels, how do I construct the full state out of
them ?`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`We will actually discuss the second question first as it sets the
notation for the first question.`}),`
`,i.jsx(e.h3,{children:"Entangled States"}),`
`,i.jsxs(e.p,{children:[`In AMO we typically would like to characterize is the state of an
electron in a hydrogen atom. We need to define its angular momentum
label `,i.jsx(e.code,{className:"language-math math-inline",children:"L"}),", which might be 0, 1, 2 and also its electron spin ",i.jsx(e.code,{className:"language-math math-inline",children:"S"}),`, which
might be `,i.jsx(e.code,{className:"language-math math-inline",children:"\\{\\uparrow, \\downarrow\\}"}),`. It state is then typically labelled
as something like`]}),`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"\\left|L=0, S=\\uparrow\\right\\rangle = \\left|0,\\uparrow\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"etc."}),`
`,i.jsxs(e.p,{children:[`Another, simple example is that of two spins, each one having two
possible states `,i.jsx(e.code,{className:"language-math math-inline",children:"\\{\\uparrow, \\downarrow\\}"}),`. This is a standard problem
in optical communication, where you send correlated photons with a
certain polarization to different people. We will typically call them
Alice and Bob `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"."]}),`
`,i.jsxs(e.p,{children:[`We now would like to understand than if we can disentangle the
information about the different labels. Naively, we can now associate
with Alice one set of outcomes and describe it by some state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi_{A}\\right\\rangle"}),` and the Bob has another set
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi_{B}\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi_A\\right\\rangle= a_{\\uparrow} \\left|\\uparrow_A\\right\\rangle+ a_{\\downarrow} \\left|\\downarrow_A\\right\\rangle\\\\
\\left|\\psi_B\\right\\rangle= b_{\\uparrow} \\left|\\uparrow_B\\right\\rangle+ b_{\\downarrow} \\left|\\downarrow_B\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`The full state will then be described by the possible outcomes
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\{\\uparrow_A\\uparrow_B,\\downarrow_A\\uparrow_B,\\uparrow_A\\downarrow_B, \\downarrow_A\\downarrow_B\\}"}),`.
We can then write:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi\\right\\rangle = \\alpha_{\\uparrow\\uparrow}(\\left|\\uparrow_A\\right\\rangle\\otimes\\left|\\uparrow_B\\right\\rangle)+\\alpha_{\\uparrow\\downarrow}(\\left|\\uparrow_A\\right\\rangle\\otimes\\left|\\downarrow_B\\right\\rangle)+\\alpha_{\\downarrow\\uparrow}(\\left|\\downarrow_A\\right\\rangle\\otimes\\left|\\uparrow_B\\right\\rangle)+\\alpha_{\\downarrow\\downarrow}(\\left|\\downarrow_A\\right\\rangle\\otimes\\left|\\downarrow_B\\right\\rangle)\\\\
= \\alpha_{\\uparrow\\uparrow}\\left|\\uparrow\\uparrow\\right\\rangle+\\alpha_{\\uparrow\\downarrow}\\left|\\uparrow\\downarrow\\right\\rangle+\\alpha_{\\downarrow\\uparrow}\\left|\\downarrow \\uparrow\\right\\rangle+\\alpha_{\\downarrow\\downarrow}\\left|\\downarrow\\downarrow\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`So we will typically just plug the labels into a single
ket and drop indices, to avoid rewriting the tensor symbol each time. We
say that a state is `,i.jsx(e.em,{children:"separable"}),`, if we can write it as a product of the
two individual states as above:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi\\right\\rangle = \\left|\\psi_A\\right\\rangle\\otimes\\left|\\psi_B\\right\\rangle\\\\
=a_{\\uparrow} b_\\uparrow \\left|\\uparrow\\uparrow\\right\\rangle+a_{\\downarrow} b_\\uparrow \\left|\\downarrow\\uparrow\\right\\rangle+a_{\\uparrow} b_\\downarrow \\left|\\uparrow\\downarrow\\right\\rangle+a_{\\downarrow} b_\\downarrow \\left|\\downarrow\\downarrow\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:["All other states are called ",i.jsx(e.em,{children:"entangled"}),`. The most famous entangled
states are the Bell states:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_\\textrm{Bell}\\right\\rangle=\\frac{\\left|\\uparrow\\uparrow\\right\\rangle+\\left|\\downarrow\\downarrow\\right\\rangle}{\\sqrt{2}}"})}),`
`,i.jsxs(e.p,{children:[`In general we will say that the quantum system is formed by two
subsystems `,i.jsx(e.code,{className:"language-math math-inline",children:"S_1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"S_2"}),`. If they are independent we can write each of
them as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi_1\\right\\rangle=\\sum_m^M a_m \\left|\\alpha_m\\right\\rangle,\\\\
\\left|\\psi_2\\right\\rangle=\\sum_n^N b_n \\left|\\beta_n\\right\\rangle.`})}),`
`,i.jsx(e.p,{children:"In general we will then write:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle=\\sum_m^M \\sum_n^N c_{mn}(\\left|\\alpha_m\\right\\rangle\\otimes \\left|\\beta_n\\right\\rangle)."})}),`
`,i.jsxs(e.p,{children:["So we can determine such a state by ",i.jsx(e.code,{className:"language-math math-inline",children:"M \\times N"}),` numbers
`,i.jsx(e.code,{className:"language-math math-inline",children:"c_{mn}"})," here. If the states are ",i.jsx(e.em,{children:"separable"}),`, we can write
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"}),` as a product of the individual
states:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle=\\left|\\psi_1\\right\\rangle\\otimes\\left|\\psi_2\\right\\rangle=\\left(\\sum_m^M a_m \\left|\\alpha_m\\right\\rangle\\right) \\otimes \\left(\\sum_n^N b_n \\left|\\beta_n\\right\\rangle\\right)"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle=\\sum_m^M \\sum_n^N a_m b_n \\left|\\alpha_m\\right\\rangle \\otimes \\left|\\beta_n\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`Separable states thus only describes a small subset of all possible
states.`}),`
`,i.jsx(e.h2,{children:"Statistical Mixtures and Density Operator"}),`
`,i.jsxs(e.p,{children:[`Having set up the formalism for writing down the full quantum state with
plenty of labels, we have to solve the next problem. As an
experimentalist, you will rarely measure all of them. This means that
you only perform a partial measurement and you have only partial
information of the system. The extreme case is the thermodynamic
ensemble, where we measure only temperature to describe `,i.jsx(e.code,{className:"language-math math-inline",children:"10^{23}"}),`
particles.`]}),`
`,i.jsx(e.p,{children:`A similiar problem arises for Alice and Bob. They typically measure the
state of the qubit in their lab without knowing what the other did. So
they need some way to describe the system locally. This is done through
the density operator approach.`}),`
`,i.jsx(e.p,{children:`In the density operator approach the state of the system is described by
a Hermitian density operator`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\hat{\\rho} = \\sum_{n=1}^N p_n \\left|\\phi_n\\right\\rangle\\left\\langle\\phi_n\\right|."})}),`
`,i.jsxs(e.p,{children:["Here, ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\phi_n\\right|"}),` are the
eigenstates of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\rho}"}),", and ",i.jsx(e.code,{className:"language-math math-inline",children:"p_n"}),` are the probabilities to find the
system in the respective states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\phi_n\\right\\rangle"}),`. The trace of the density
operator is the sum of all probabilities `,i.jsx(e.code,{className:"language-math math-inline",children:"p_n"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"  \\mathrm{tr}(\\hat{\\rho}) = \\sum p_n = 1."})}),`
`,i.jsxs(e.p,{children:["For a pure state ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"}),", we get ",i.jsx(e.code,{className:"language-math math-inline",children:"p_n=1"}),`
for only one value of `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),". For every other ",i.jsx(e.code,{className:"language-math math-inline",children:"n"}),`, the probabilities
vanish. We thus obtain a "pure" density operator
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\rho}_{\\text{pure}}"}),` which has the properties of a projection
operator:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{\\rho}_{\\text{pure}} = \\left|\\psi\\right\\rangle\\left\\langle\\psi\\right| \\qquad \\Longleftrightarrow \\qquad \\hat{\\rho}^2 = \\hat{\\rho}."})}),`
`,i.jsx(e.p,{children:"For the simple qubit we then have:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\rho}= \\left(\\alpha_\\uparrow\\left|\\uparrow\\right\\rangle+\\alpha_\\downarrow\\left|\\downarrow\\right\\rangle\\right)\\left(\\alpha_\\uparrow^*\\left\\langle\\uparrow\\right|+\\alpha_\\downarrow^*\\left\\langle\\downarrow\\right|\\right)\\\\
  = |\\alpha_\\uparrow|^2\\left|\\uparrow\\right\\rangle\\left\\langle\\uparrow\\right|+|\\alpha_\\downarrow|^2\\left|\\downarrow\\right\\rangle\\left\\langle\\downarrow\\right|+\\alpha_\\downarrow\\alpha_\\uparrow^*\\left|\\downarrow\\right\\rangle\\left\\langle\\uparrow\\right|+\\alpha_\\uparrow\\alpha_\\downarrow^*\\left|\\uparrow\\right\\rangle\\left\\langle\\downarrow\\right|`})}),`
`,i.jsx(e.p,{children:"Then it is even simpler to write in matrix form:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`  \\hat{\\rho}= \\left(\\begin{array}{cc}
  |\\alpha_\\uparrow|^2&\\alpha_\\uparrow\\alpha_\\downarrow^*\\\\
  \\alpha_\\downarrow\\alpha_\\uparrow^*&|\\alpha_\\downarrow|^2
  \\end{array}\\right)`})}),`
`,i.jsx(e.p,{children:"For a thermal state on the other hand we have:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{\\rho}_{\\text{thermal}} = \\sum_{n=1}^N \\frac{e^{-\\frac{E_n}{k_BT}}}{Z} \\left|\\phi_n\\right\\rangle\\left\\langle\\phi_n\\right|\\text{ with }Z = \\sum_{n=1}^N e^{-\\frac{E_n}{k_BT}}"})}),`
`,i.jsxs(e.p,{children:[`With this knowledge we can now determine the result of a
measurement of an observable `,i.jsx(e.code,{className:"language-math math-inline",children:"A"})," belonging to an operator ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}"}),`. For
the pure state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"})," we get:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle \\hat{A}\\rangle = \\left\\langle\\psi\\right| \\hat{A} \\left|\\psi\\right\\rangle."})}),`
`,i.jsx(e.p,{children:"For a mixed state we get:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle \\hat{A}\\rangle = \\mathrm{tr}(\\hat{\\rho}\\cdot \\hat{A}) = \\sum_n {p_n} \\left\\langle\\phi_n\\right| \\hat{A} \\left|\\phi_n\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`The time evolution of the density operator can be
expressed with the von Neumann equation:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"i\\hbar \\partial_{t}\\hat{\\rho}(t) = [\\hat{H}(t),\\hat{\\rho}(t)]."})}),`
`,i.jsx(e.h3,{children:"Back to partial measurements"}),`
`,i.jsx(e.p,{children:`We can now come back to the correlated photons sent to Alice and Bob,
sharing a Bell pair. They full density matrix is then especially simple:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`  \\hat{\\rho}= \\left(\\begin{array}{cccc}
  \\frac{1}{2}& 0& 0 &\\frac{1}{2}\\\\
  0 & 0 & 0& 0\\\\
  0&0&0&0\\\\
    \\frac{1}{2}&0&0&\\frac{1}{2}
  \\end{array}\\right)`})}),`
`,i.jsxs(e.p,{children:["Let us write the system as ",i.jsx(e.code,{className:"language-math math-inline",children:"S = S_A \\otimes S_B"}),`. If we are looking for
the density operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\rho}_i"}),` of each individual, we can simply
write:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\rho}_A=\\mathrm{tr}_{B}(\\hat{\\rho}),\\\\
\\hat{\\rho}_B=\\mathrm{tr}_{A}(\\hat{\\rho}),`})}),`
`,i.jsxs(e.p,{children:[`where
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\rho}=\\left|\\psi\\right\\rangle\\left\\langle\\psi\\right|"}),`
and `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{tr}_{j}(\\hat{\\rho})"}),` is the trace over the Hilbert space of
subsystem `,i.jsx(e.code,{className:"language-math math-inline",children:"j"}),"."]}),`
`,i.jsx(e.p,{children:`To reduce the density matrix of the Bell state it is actually helpful to
write out the definitions:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\mathrm{tr}_{B}(\\hat{\\rho}) = \\left\\langle\\uparrow_B\\right|\\hat{\\rho}\\left|\\uparrow_B\\right\\rangle+\\left\\langle\\downarrow_B\\right|\\hat{\\rho}\\left|\\downarrow_B\\right\\rangle\\\\
=\\frac{1}{2}\\left(\\left|\\uparrow_A\\right\\rangle\\left\\langle\\uparrow_A\\right|+\\left|\\downarrow_A\\right\\rangle\\left\\langle\\downarrow_A\\right|\\right)`})}),`
`,i.jsx(e.p,{children:"So we end up with the fully mixed state:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`  \\hat{\\rho}_{A,B} = \\left(\\begin{array}{cc}
  \\frac{1}{2}&0\\\\
  0&\\frac{1}{2}
  \\end{array}\\right)`})}),`
`,i.jsx(e.p,{children:`Alice and Bob are simply cossing a coin if they ignore
the outcome of the other member. But once they start comparing results
we will see that the quantum case can dramatically differ from the
classical case. This will be the content of lecture 12 [@entanglement].`}),`
`,i.jsx(e.h2,{children:"Important Consequences of the Principles"}),`
`,i.jsx(e.h3,{children:"Uncertainty Relation"}),`
`,i.jsx(e.p,{children:`The product of the variances o two noncommuting operators has a lower
limit:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\Delta \\hat{A} \\cdot \\Delta \\hat{B} \\geq \\frac{1}{2} \\left| \\left\\langle\\left[\\hat{A,\\hat{B}}\\right]\\right\\rangle \\right|,"})}),`
`,i.jsxs(e.p,{children:[`where the variance is defined as
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta \\hat{A} = \\sqrt{\\left\\langle\\hat{A^2}\\right\\rangle-\\left\\langle\\hat{A}^2\\right\\rangle}"}),"."]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Examples."})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left[ \\hat{x}, \\hat{p} \\right] = i \\hbar \\\\
\\left[ \\hat{J}_i , \\hat{J}_j \\right] = i \\hbar \\epsilon_{ijk} \\hat{J}_k`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."})," This is a statement about the ",i.jsx(e.em,{children:"state"}),` itself, and not the
measurement!`]}),`
`,i.jsx(e.h3,{children:"Ehrenfest Theorem"}),`
`,i.jsxs(e.p,{children:[`With the Ehrenfest theorem, one can determine the time evolution of the
expectation value of an operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\frac{d}{dt}\\left\\langle\\hat{A}\\right\\rangle=\\frac{1}{i\\hbar}\\left\\langle\\left[\\hat{A},\\hat{H}\\right]\\right\\rangle+\\left\\langle\\partial_t\\hat{A}(t)\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:["If ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{A}"}),` is time-independent and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left[\\hat{A},\\hat{H}\\right]=0"}),`, the expectation value
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\hat{A}\\right\\rangle"}),` is a constant of the
motion.`]}),`
`,i.jsx(e.h3,{children:"Complete Set of Commuting Observables"}),`
`,i.jsxs(e.p,{children:[`A set of commuting operators
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\{\\hat{A},\\hat{B},\\hat{C},\\cdots,\\hat{X}\\}"}),` is considered a complete
set if their common eigenbasis is unique. Thus, the measurement of all
quantities `,i.jsx(e.code,{className:"language-math math-inline",children:"\\{A,B,\\cdots,X\\}"}),` will determine the system uniquely. The
clean identification of such a Hilbert space can be quite challenging
and a nice way of its measurment even more. Coming back to our previous
examples:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Performing the full spectroscopy of the atom. Even for the hydrogen
atom we will see that the full answer can be rather involved...`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The occupation number is rather straight forward. However, we have
to be careful that we really collect a substantial amount of the
photons etc.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Are we able to measure the full position information ? What is the
resolution of the detector and the point-spread function ?`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Here it is again rather clean to put a very efficient detector at
the output of the two arms ...`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["What are the components of the spin that we can access ? The ",i.jsx(e.code,{className:"language-math math-inline",children:"z"}),`
component does not commute with the other components, so what should
we measure ?`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"https://www.authorea.com/326444/GsbfEypTdf4dvncV23L8_Q",children:`third
lecture`}),` of this
course will start to apply these discussions to the two-level system,
which is one of the simplest yet most powerful models of quantum
mechanics.`]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-2006",children:[`
`,i.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. The Quantum Mechanics Solver. Springer-Verlag, 2006. ",i.jsx(e.a,{href:"#user-content-fnref-2006","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["And if someone wants to listen the person is called Eve ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Joe(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Lj,{...t})}):Lj(t)}const Oj=Object.freeze(Object.defineProperty({__proto__:null,default:Joe,frontmatter:Xoe},Symbol.toStringTag,{value:"Module"})),Qoe="/assets/static/lecture20_pic1.1L5yMPFo.png",Mj="/assets/static/lecture20_pic2.DPZgBcDl.png",Koe="/assets/static/lecture20_pic3.BrFT3ZTD.png",Zoe="/assets/static/lecture20_pic5.ASl11oCu.png",ele="/assets/static/lecture20_pic6.t2T9-tRI.png",tle="/assets/static/lecture20_pic7.npQ11Wnw.png",nle="/assets/static/lecture20_pic8.Dy77nzOB.png",ile={author:["Fred Jendrzejewski"],order:20,title:"Lecture 20 - A few words on quantum computing with trapped ions"};function Rj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we are going to discuss the fundamental ingredients for
quantum computing with trapped ions. In a first step, we discuss
trapping and cooling, then single qubit operations and finally two-qubit
operations.`}),`
`,i.jsxs(e.p,{children:[`Quantum computation has become a branch of research at the interaction
of physics, engineering, mathematices and computer science by now. The
standard book on the topic is most likely the book by Nielsen and Chang
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1017/cbo9780511976667",children:"Nielsen 2009"}),`. However, an enormous amount of additional literature
exists, I will only reference here to `,i.jsx(e.a,{href:"https://arxiv.org/abs/1804.03719v1",children:"a nice introduction"}),` a
more complete list is left for future discussions.`]}),`
`,i.jsxs(e.p,{children:[`In this lecture we will discuss shortly the idea behind quantum
computing and the discuss its implementation on trapped ions. While a
large number of them exist, we decided to start with trapped ions for
several very subjective reasons `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]}),`
`,i.jsxs(e.p,{children:[`And before we can start the discussion we would highly recommend the
readers to take some time to go through the Nobel prize lecture of Dave
Wineland as it gives a detailled discussion of the field from his point
of view `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.85.1103",children:"Wineland 2013"}),"."]}),`
`,i.jsx(e.h1,{children:"What do we want from a QC ?"}),`
`,i.jsx(e.p,{children:`In a QC we would like to implement algorithms, which are based on well
defined operations. Influential examples of such algorithms are the
quantum Fourier transform and the Grover algorithm.`}),`
`,i.jsxs(e.p,{children:[`Given that computations are typically implemented through logical truth
tables, we typically base a quantum computer on qubits. We then call one
state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"}),` and on
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),`. Given that we would like to have
reproducable computations, we always assume that we start them out with
all qubits in the `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"})," state."]}),`
`,i.jsx(e.p,{children:`A computation consists then in applying a number of gates. The key is
here that any algorithm might be built up from an extremely limited
number of gates. Typically four are sufficient:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The three gates that rotate each individual qubit on the Bloch
sphere.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`A gate that entangles them properly. The standard example is here
the CNOT gate, which we will come back too.`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Such computations are then typically nicely visualized through circuit
diagrams as used them already for the study of Bell inequalities and
visualized below.`}),`
`,i.jsx(me,{id:"fig-circuit",href:Qoe,caption:"A simple circuit diagram. It show the initial state, an entanglement gate, a number of single qubit gates and the final readout."}),`
`,i.jsxs(e.p,{children:[`As atomic physics is only a minor part of the QC field, we typically
have to learn the new notations of the field again. As such single qubit
gates are typically not explained through the Pauli matrices but by
different symbols like `,i.jsx(e.code,{className:"language-math math-inline",children:"H"})," or ",i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),". We come back to this later."]}),`
`,i.jsx(e.h2,{children:"Some of the hopes for QCs"}),`
`,i.jsxs(e.p,{children:[`The major point to about a properly chosen set of gates is that it
allows us to implement ANY algorithm. So they allow us to implement a
`,i.jsx(e.em,{children:"universal"}),` quantum computer. The main question is then how powerful
such a QC would be. Could it solve problems as fast a a classical
computer or maybe even faster ? This question is at the hard of the
field of complexity classes, which studies which kind of problem can be
solved `,i.jsx(e.a,{href:"https://complexityzoo.uwaterloo.ca/Petting_Zoo",children:"how efficiently"}),"."]}),`
`,i.jsx(e.p,{children:`The most fundamental question is then if a problem can be solved in a
polynomial time (P hard) or not (NP-hard). Linear problems are P-hard
and the travelling salesman problem is NP-hard. For some problems a
quantum computer might then provide an answer in polynomial time, where
a classical computer would not... The factorization of prime numbers is
one of these problems as discussed in Shor algorithm.`}),`
`,i.jsxs(e.p,{children:[`And the google paper that was published in 2019 actually indicated for
the first time that a quantum computer achieved such a task
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/s41586-019-1666-5",children:"Arute 2019"}),"."]}),`
`,i.jsx(e.h2,{children:"Requirements for a QC"}),`
`,i.jsxs(e.p,{children:[`Given our excitement for a quantum computer, we might want a checklist
of what we want from a quantum computer hardware. DiVincenzo proposed
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1016/j.physrep.2008.09.003",children:"the following ingredients"}),":"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Qubits that can store information in a scalable system."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The ability to initialize the system in the right state."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"A universal set of gates."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Long coherence times, which are much longer than gate operation
times.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Good measurement capabilities"}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Trapped ions allow us to fulfill all these requirements as we will see
in this lecture and we will go through them step-by-step.`}),`
`,i.jsx(e.h1,{children:"Trapping and cooling"}),`
`,i.jsxs(e.p,{children:[`For computing experiments one typically works with singe-charged ions
like `,i.jsx(e.code,{className:"language-math math-inline",children:"^{40}Ca^+"}),`. Given their charge, they can be trapped in very clean
traps under vacuum. As such they are extremely well isolated from the
environment and high precision experiments can be performed. Finally,
they have only one remain electron in the outer shell. Therefore they
have a hydrogenlike atomic structure.`]}),`
`,i.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\text{div} \\vec{E} = 0"}),`. So, the experimentalists have to play some
tricks with oscillating fields. We will not derive in detail how a
resulting `,i.jsx(e.strong,{children:"Paul trap"})," works, but the ",i.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:`linked
video`}),` gives a very nice impression of the
idea behind it.`]}),`
`,i.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,i.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.531",children:"Wolfgang Paul"})," and ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.525",children:"Hans Dehmelt"}),`. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known as `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.541",children:"Ramsey spectroscopy"}),"."]}),`
`,i.jsx(me,{id:"fig-paul",href:Mj,caption:"The two phases of the oscillating electric field of a Paul trap. Taken from [wikipedia](https://en.wikipedia.org/wiki/Quadrupole_ion_trap)."}),`
`,i.jsx(me,{id:"fig-paul-exp",href:Koe,caption:"A linear ion (Paul) trap containing six calcium 40 ions. Taken from [here](https://quantumoptics.at/en/research/lintrap.html)."}),`
`,i.jsx(e.p,{children:`A Paul trap provides a harmonic oscillator confinement with trapping
frequencies in the order of hundreds of kHz. An ion trapped in such a
trap can the be described by the Hamiltonian:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H}_{t} = \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega_t^2}{2}\\hat{x}^2`})}),`
`,i.jsxs(e.p,{children:["The two variables ",i.jsx(e.code,{className:"language-math math-inline",children:"p"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"x"})," are non-commuting ",i.jsx(e.code,{className:"language-math math-inline",children:"[x, p] = i\\hbar"}),`, so
they cannot be measured at the same time. It can be nicely diagonalized
in terms of the ladder operators:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{x} = \\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}+\\hat{a}^\\dag\\right)\\\\
\\hat{p} = i\\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}^\\dag-\\hat{a}\\right)\\\\`})}),`
`,i.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\hbar \\omega_t \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dag a"})}),`
`,i.jsx(e.p,{children:`Having loaded the ions into the Paul trap we also need
to cool them down.`}),`
`,i.jsx(e.h1,{children:"Atom-light interaction"}),`
`,i.jsxs(e.p,{children:[`Given that the ions keep only on atom on the outer shell, they have a
hydrogenlike structure, which makes
them optically well controllable. To control the ions further we use
light of amplitude `,i.jsx(e.code,{className:"language-math math-inline",children:"E_0"})," and frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_L"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{E}(t) = \\vec{E}_0 \\cos(kx - \\omega_L t+\\varphi)\\\\
= \\frac{\\vec{E}_0}{2} \\left(e^{i[kx - \\omega_lt+\\varphi]}+e^{-i[kx-\\omega_lt+\\varphi]}\\right)`})}),`
`,i.jsxs(e.p,{children:[`We will describe the interal states of the ion for the
moment with the simple two state system of ground state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),` and excited state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"})," at an energy ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_0"}),`, which
is typically in the order of thousands of THz. It has the Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_{ion} = \\hbar \\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right|"})}),`
`,i.jsxs(e.p,{children:[`Putting this ion into propagating light will induce a
coupling between these two internal states. As previously , we will
describe the coupling in the semi-classical approximation through
`,i.jsx(e.code,{className:"language-math math-inline",children:"H_\\textrm{int} = -\\hat{\\vec{D}} \\cdot \\vec{E}"}),`. However, in this
context we will not ignore the propagating nature of the light field and
keep its position dependence. This is necessary as we would like to
understand how the light influences the movement of the atoms and not
only the internal states. Putting them together we obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_\\textrm{int} = \\frac{\\Omega}{2}\\left([\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|]e^{i(k \\hat{x} - \\omega_L t+\\varphi)} + h.c.\\right)"})}),`
`,i.jsxs(e.p,{children:[`The laser frequency is tuned closely to the frequency of
the internal state transition and we will be only interested in the
detuning `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = \\omega_0 - \\omega_L"}),`. Importantly, it couples the
position of the atom and the internal states.`]}),`
`,i.jsx(e.p,{children:`To simplify the problem, we can work in the rotating frame to describe
the external and internal degrees of freedom for the ion:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H}= \\hbar \\omega_t \\hat{a}^\\dag \\hat{a} + \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\left(k \\hat{x}+\\varphi\\right)} + h.c.\\right)`})}),`
`,i.jsx(e.p,{children:`We will now see how this system is used to cool the ions to the motional
groundstate, perform single qubit operations and then two-qubit
operations.`}),`
`,i.jsx(e.h1,{children:"Doppler cooling"}),`
`,i.jsxs(e.p,{children:[`This interaction of the atom with a photon is at the origin of the
all-important Laser cooling, which was pioneered for ions in the 1970s
(!!) by the Wineland group. For cooling transition we couple the ground
state to an excited state of finitie lifetime `,i.jsx(e.code,{className:"language-math math-inline",children:"\\tau= \\frac{1}{\\Gamma}"}),"."]}),`
`,i.jsx(me,{id:"fig-laser-cooling",href:Mj,caption:"The basic idea of laser cooling. The incoming light gives the ion a momentum kick $\\vec{k}_{in}$. The photon is reemitted in a random direction such that $<\\vec{k}_{out}>=0$."}),`
`,i.jsxs(e.p,{children:[`This laser cooling had a tremendous impact on the field of atomic
physics in general. Notably it gave rise to the field of cold atoms to
which we will get back in the next lecture. This importance was
recognized in the Nobel prizes of 1997 for `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.685",children:"Steve Chu"}),", ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.707",children:`Claude
Cohen-Tannoudji`})," and ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.70.721",children:"Bill Phillips"}),"."]}),`
`,i.jsx(e.h2,{children:"Working in the Lamb-Dicke regime"}),`
`,i.jsx(e.p,{children:`After this initial cooling stage the atoms have to be cooled to the
ground state in the trap. To treat the trapped particles we will express
the position operator in terms of the ladder operator, such that:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`k\\hat{x} = \\eta (\\hat{a}^\\dag+ \\hat{a})\\\\
\\eta = \\sqrt{\\frac{\\hbar^2 k^2/2m}{\\hbar \\omega_t}} =\\sqrt{\\frac{E_R}{\\hbar \\omega_t}}`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\eta"})," is called the ",i.jsx(e.em,{children:"Lamb-Dicke"}),` parameter. It compares
the change in motional energy due to the absorption of the photon
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_r = \\frac{(\\hbar k)^2}{2m}"}),` compared to the energy spacing
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_t"}),` in the trap. When it is small it suppresses the change
of the motional state of the atom due to the absorption of a photon.`]}),`
`,i.jsxs(e.p,{children:["For simplicity we will set in this section ",i.jsx(e.code,{className:"language-math math-inline",children:"\\varphi=0"}),` and develop the
exponent to obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_\\textrm{int} = \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|\\left(1 + i\\eta[\\hat{a}^\\dag+ \\hat{a}]\\right) + h.c.\\right)"})}),`
`,i.jsx(e.p,{children:`So it contains three couplings for different trap levels
and internal states:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"carrier"}),` transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"red"}),` sideband
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n-1\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega(n+1)"}),`. It leads to a reduction of the
trap level and it is resonant for `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = -\\omega_t"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"blue"}),` sideband
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n+1\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega n"}),`. It leads to an increase of the trap
level and it is resonant for `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = \\omega_t"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"The full energy diagram is summarized in the figure below."}),`
`,i.jsx(me,{id:"fig-paul-exp",href:Zoe,caption:"Level structure of an two-level system coupled to a laser field as discussed in the text."}),`
`,i.jsxs(e.p,{children:["This scheme is used to perform ",i.jsx(e.strong,{children:"Raman side-band cooling"}),`. The laser is
tuned on the transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n,g\\right\\rangle\\rightarrow \\left|n-1,e\\right\\rangle"}),`
such that each absorption involves a reduction in the trap level. This
set-up for cooling was first demonstrated in `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.75.4011",children:"1995 by the Wineland group"}),"."]}),`
`,i.jsx(e.p,{children:`It is at this stage that the ions are in the motional ground state and
we can focus our attention to the high control of the internal qubit
states of the ion for quantum computing.`}),`
`,i.jsx(e.h1,{children:"Single-qubit operations"}),`
`,i.jsxs(e.p,{children:[`The single qubit operations can now be identified with the transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e,n\\right\\rangle\\leftrightarrow \\left|g,n\\right\\rangle"}),`.
We can then simplify the atom-light interaction too:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}= \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\hbar\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\varphi} +\\left|g\\right\\rangle\\left\\langle e\\right|e^{-i\\varphi}\\right)"})}),`
`,i.jsx(e.p,{children:`We can translate this into the language of qubit
operations through the definitions:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\sigma_z = \\frac{\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|}{2}\\\\
\\sigma_x = \\frac{\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|}{2}\\\\
\\sigma_y = \\frac{i\\left|e\\right\\rangle\\left\\langle g\\right|-i\\left|g\\right\\rangle\\left\\langle e\\right|}{2}`})}),`
`,i.jsx(e.p,{children:"So we can now simply write the Hamiltonian as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}= \\hbar\\Delta \\sigma_z +\\Omega_x \\sigma_x +\\Omega_y \\sigma_y\\\\
\\Omega_x = \\Omega \\cos(\\varphi)\\\\
\\Omega_y = \\Omega \\sin(\\varphi)`})}),`
`,i.jsxs(e.p,{children:[`In the QC community people rarely talk about the Pauli matrices, but
much rather about a few specific gates. The most cited here is the
`,i.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0/1\\right\\rangle\\rightarrow \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}"}),`.
So it has no good classical analog. Further a double application brings
us back to the origin.`]}),`
`,i.jsxs(e.p,{children:["The other gate we named about was a Z gate, which is simply a ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),`
rotation around the z axis.`]}),`
`,i.jsx(e.h1,{children:"Two-qubit operations"}),`
`,i.jsxs(e.p,{children:[`To implement a quantum computer the system has to be completed by a
two-qubit operation. For ions a number of two-qubit gates exist as
discussed nicely in `,i.jsx(e.a,{href:"http://dx.doi.org/10.1016/j.physrep.2008.09.003",children:"Sec. 2.6 of Haffner 2008"}),":"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"Cirac-Zoller"})," gate was the ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.74.4091",children:"first proposed two-qubit gate"}),`
[@Cirac_1995] and it was also the first one realized `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.75.4714",children:`within the same
year`}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"Soerensen-Moelmer"})," gate was ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.82.1971",children:"proposed later"}),`,
but it is extremely important from a practical point of view as it
leads to very high entanglement fidelities.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Another realization, which we mention for completeness is the
geometric phase-gate, which is used `,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature01492",children:"in the NIST group"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`We will now discuss a bit the Soerensen-Moelmer gate, which is nicely
described `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physreva.62.022311",children:"here"}),`. In this set-up two ions sit in a
common trap. The cost of energy for exciting one of the ions will be
labelled `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_t"}),` as in the first section. So we assume that the
scheme starts in the state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|ggn\\right\\rangle"}),`, where
both atoms are in the internal ground-state `,i.jsx(e.code,{className:"language-math math-inline",children:"g"}),` and in some excited trap
level `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),"."]}),`
`,i.jsx(e.p,{children:`In the next step, these two ions experience two lasers, which are
coupling excited and the ground state of the ions:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["One laser has frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_1=\\omega_0-\\omega_t+\\delta"}),` and Rabi
coupling strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`. It is therefore only slightly detuned
from the transitions
`,i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n-1\\rangle |ge,n-1\\rangle"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The second laser has frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_2=\\omega_0+\\omega_t-\\delta"}),`
and Rabi coupling strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`. It is therefore only slightly
detuned from the transitions
`,i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n+1\\rangle |ge,n+1\\rangle"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"The resulting level diagram is depicted below."}),`
`,i.jsx(me,{href:ele,caption:"Level scheme of the Sorensen Moelmer gate as described in the text."}),`
`,i.jsxs(e.p,{children:[`The gate is then operated in the regime of small coupling strength
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega n \\ll \\delta"}),`. In this case coupling to the excited
motional states `,i.jsx(e.code,{className:"language-math math-inline",children:"n\\pm 1"}),` is suppressed by a factor of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\frac{\\eta \\Omega n}{\\delta}"}),`. On the other hand we are exactly on
resonance for the two-photon transitions
`,i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n+1\\rangle\\rightarrow|ee,n\\rangle"}),` etc. So we
can do second-order pertubation theory to obtain the
effective Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_\\mathrm{SM} = \\frac{\\Omega_\\mathrm{SL}}{2}\\left(\\left|ggn\\right\\rangle\\left\\langle een\\right| + (\\left|een\\right\\rangle\\left\\langle ggn\\right|\\right)\\text{ with }\\Omega_{SL} = -\\frac{(\\Omega \\eta)^2}{2(\\eta - \\delta)}"})}),`
`,i.jsxs(e.p,{children:[`So starting out with the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|gg\\right\\rangle"}),` and applying the laser for
`,i.jsx(e.code,{className:"language-math math-inline",children:"t\\Omega =\\frac{\\pi}{2}"}),`, we obtain the entangled state that we are
looking for.`]}),`
`,i.jsxs(e.p,{children:[`The operation of the gate was first demonstrated in 2000 by the Wineland
group and allowed at the time for generating a Bell state `,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/35005011",children:`with a
fidelity of 83%`}),`. This limit has been increasingly pushed
of the years and now `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.117.060504",children:"reaches the 99.9% region"}),"."]}),`
`,i.jsx(e.p,{children:`Such a fidelity sounds very impressive on first sight and it is by now
the result of several decades of work. However, in a quantum computer we
would like to chain a large number of these gates behind each other.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 10 iterations the fidelity dropped to 99%."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 100 iterations the fidelity dropped to 90%."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 1000 iterations the fidelity dropped to 30%."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`So even with such an excellent fidelity it will barely be possible to
chain much more than 100 gates before the some extremely iffy things
start to happen.`}),`
`,i.jsx(me,{href:tle,caption:"From the iSWAP to the CNOT gate."}),`
`,i.jsx(e.p,{children:`So we have experimentally the choice of entanglement tool in the way
that is most adapted to our work.`}),`
`,i.jsx(e.h1,{children:"Practical considerations"}),`
`,i.jsxs(e.p,{children:["A commonly used ion is ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{Ca+} \\, (Z=20)"}),`. The level scheme of the calcium atom is shown below. The different
transitions are used for different purposes:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The broad transition at 397nm is used for cooling."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Coupling between the qubit states is performed through the 729nm
transition.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The 866nm and the 854nm are used for pumping the atoms into
appropiate substates.`}),`
`]}),`
`]}),`
`,i.jsx(me,{href:nle,caption:"The level scheme of the calcium atom. The arrows indicate transitions by absorption and emission of photons. A qubit can be realized by choosing the ground state and an excited state. Taken from [here](http://dx.doi.org/10.1088/1367-2630/15/12/123012)."}),`
`,i.jsxs(e.p,{children:[`Several solutions for scaling up the quantum computing architecture are
under way . `,i.jsx(e.em,{children:"Long ion chains"}),` in linear Paul traps with up to 40
ions are the current 'work-horse'. This is the 'simplest' existing
architecture. In such a geometry Shors algorithm was `,i.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.aad9480",children:`shown for the
number 15`}),` with five qubits and entanglement between up to
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.106.130506",children:"14 qubits was studied"}),`. However, it reaches its natural
limits for entangling distant ions due to cross-talk with other ions
during the operation. Therefore, different approaches are currently
tested to scale the architecture to larger `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevx.7.041061",children:"fault-tolerant geometries"}),"."]}),`
`,i.jsx(e.p,{children:`By no means we will be able to give a full picture of the booming field.
However, a few main players are:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`NIST, JQI and IonQ, which are all strongly connected through their
shared past with Dave Wineland.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Innsbruck,  Mainz and AQT which are connected through their shared
past and present with Rainer Blatt.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"ETH, Oxford, ..."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The AQTION and the MicroQC network, which are part of the European
flagship initiative.`}),`
`]}),`
`]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`Philipp Hauke worked a lot with them. Fred is an AMO person and
Ferdinand Schmidt-Kaler was kind enough to provide a lot of
background information on the experiments `,i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function ale(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Rj,{...t})}):Rj(t)}const Pj=Object.freeze(Object.defineProperty({__proto__:null,default:ale,frontmatter:ile},Symbol.toStringTag,{value:"Module"})),rle="/assets/static/lecture3_pic1.BjHHXQTL.png",sle="/assets/static/lecture3_pic2.B-X9gjjr.png",ole="/assets/static/lecture3_pic3.BRdU7fr8.png",lle="/assets/static/lecture3_pic4.TLFQv1eA.png",cle={author:["Fred Jendrzejewski","Selim Jochim"],order:3,title:"Lecture 3 - The two-level system"};function Dj(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We are going to discuss the two-level system, it's static properties
like level splitting at avoided crossings and dynamical properties like
Rabi oscillations.`}),`
`,i.jsxs(e.p,{children:[`After the previous discussions of some basic cooking recipes to quantum
mechanics in last weeks lectures, we will use them to understand the two-level system. A very detailled
discussion can be found in chapter 4 of Ref. `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-ct1",id:"user-content-fnref-ct1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),`. The importance of the
two-level system is at least three-fold:`]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`It is the simplest system of quantum mechanics as it spans a Hilbert
space of only two states.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`It is quite ubiquitous in nature and very widely used in atomic
physics.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The two-level system is another word for the qubit, which is the
fundamental building block of the exploding field of quantum
computing and quantum information science.`}),`
`]}),`
`]}),`
`,i.jsx(me,{id:"fig-two-level-examples",href:rle,alt:"Examples for two-state systems: a) Benzene, b) Ammonia, c) Molecular ion",caption:"Examples for two-state systems. a) Benzene: In the ground state, the electrons are delocalized. b) Ammonia: The nitrogen atom is either found above or below the hydrogen triangle. The state changes when the nitrogen atom tunnels. c) Molecular ion: The electron is either localized near proton 1 or 2."}),`
`,i.jsx(e.p,{children:`Some of the many examples for two-level systems that can be found in
nature:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Spin of the electron: Up vs. down state"}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Two-level atom with one electron (simplified): Excited vs. ground
state`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Structures of molecules, e.g., ",i.jsx(e.code,{className:"language-math math-inline",children:"NH_3"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Occupation of mesoscopic capacitors in nanodevices."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Current states in superconducting loops."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Nitrogen-vacancy centers in diamond."}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"Hamiltonian, Eigenstates and Matrix Notation"}),`
`,i.jsxs(e.p,{children:[`To start out, we will consider two eigenstates
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),`
of the Hamiltonian `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," with"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\hat{H}_0\\left|0\\right\\rangle=E_0\\left|0\\right\\rangle, \\qquad \\hat{H}_0\\left|1\\right\\rangle=E_1\\left|1\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`Quite typically we might think of it as a two-level atom
with states 1 and 2. The eigenstates can be expressed in matrix
notation:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\left|0\\right\\rangle=\\left( \\begin{array}{c} 1 \\\\ 0 \\end{array} \\right), \\qquad \\left|1\\right\\rangle=\\left( \\begin{array}{c} 0 \\\\ 1 \\end{array} \\right),"})}),`
`,i.jsxs(e.p,{children:["so that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," be written as a diagonal matrix"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{H}_0 = \\left(\\begin{array}{cc} E_0 & 0 \\\\ 0 & E_1 \\end{array}\\right)."})}),`
`,i.jsxs(e.p,{children:[`If we would only prepare eigenstates the system would be
rather boring. However, we typically have the ability to change the
Hamiltonian by switching on and off laser or microwave fields `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),`. We
can then write the Hamiltonian in its most general form as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} \\Delta  & \\Omega_x - i\\Omega_y\\\\ \\Omega_x +i\\Omega_y & -\\Delta \\end{array} \\right)`})}),`
`,i.jsx(e.p,{children:"Sometimes we will also chose the definition:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\Omega = |\\Omega| e^{i\\varphi}=\\Omega_x + i\\Omega_y"})}),`
`,i.jsx(e.p,{children:`It is particularly useful for the case in which the
coupling is created by a laser. Another useful way of thinking about the
two-level system is as a spin in a magnetic field. Let us remind us of
the definitions of the of the spin-1/2 matrices:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`s_x = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & 1\\\\
1 &  0
\\end{array}
\\right)~
s_y = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & -i\\\\
i &  0
\\end{array}
\\right)~s_z =\\frac{\\hbar}{2} \\left(\\begin{array}{cc}
1 & 0\\\\
0 &  -1
\\end{array}
\\right)`})}),`
`,i.jsx(e.p,{children:"We then obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\mathbf{B}\\cdot\\hat{\\mathbf{s}}\\text{ with }\\mathbf{B} = (\\Omega_x, \\Omega_y, \\Delta)`})}),`
`,i.jsx(e.p,{children:`You will go through this calculation in the excercise of
this week.`}),`
`,i.jsxs(e.h3,{children:["Case of no perturbation ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = 0"})]}),`
`,i.jsxs(e.p,{children:[`This is exactly the case of no applied laser fields that we discussed
previously. We simply removed the energy offset
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_m = \\frac{E_0+E_1}{2}"})," and pulled out the factor ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar"}),`, such that
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"})," measures a frequency. So we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_0 = E_m+ \\frac{\\hbar}{2}\\Delta\\\\
E_1 = E_m- \\frac{\\hbar}{2}\\Delta`})}),`
`,i.jsxs(e.p,{children:["We typically call ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"}),` the energy difference between
the levels or the `,i.jsx(e.strong,{children:"detuning"}),"."]}),`
`,i.jsxs(e.h3,{children:["Case of no detuning ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = 0"})]}),`
`,i.jsxs(e.p,{children:[`Let us suppose that the diagonal elements are exactly zero. And for
simplicity we will also keep `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_y =0"}),` as it simply complicates the
calculations without adding much to the discussion at this stage. The
Hamiltonian reads then:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} 0  & \\Omega\\\\ \\Omega &0 \\end{array} \\right)"})}),`
`,i.jsxs(e.p,{children:["Quite clearly the states ",i.jsx(e.code,{className:"language-math math-inline",children:"\\varphi_{1,2}"}),` are not the eigenstates of the
system anymore. How should the system be described now ? We can once
again diagonalize the system and write`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}\\left|\\varphi_{\\pm}\\right\\rangle = E_{\\pm}\\left|\\varphi_\\pm\\right\\rangle\\\\
E_{\\pm} = \\pm\\frac{\\hbar}{2}\\Omega\\\\
\\left|\\varphi_\\pm\\right\\rangle = \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}`})}),`
`,i.jsx(e.p,{children:`Two important consequences can be understood from this
result:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The coupling of the two states shifts their energy by ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`. This
is the idea of level repulsion.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The coupled states are a superposition of the initial states."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`This is also a motivation the formulation of the 'bare' system for
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = 0"})," and the 'dressed' states for the coupled system."]}),`
`,i.jsx(e.h3,{children:"General case"}),`
`,i.jsx(e.p,{children:`Quite importantly we can solve the system completely even in the general
case. By diagonalizing the Hamiltonian we obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" E_\\pm = \\pm \\frac{\\hbar}{2} \\sqrt{\\Delta^2+|\\Omega|^2}"})}),`
`,i.jsx(e.p,{children:"The energies can be nicely summarized as in Fig."}),`
`,i.jsx(me,{id:"fig-energy-levels",href:sle,width:"90%",alt:"Energy levels and eigenstates diagram for the two-level system",caption:"Energy levels and eigenstates of the two-level system showing the coupling Ω and detuning Δ."}),`
`,i.jsx(e.p,{children:"The Eigenstates then read:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_+\\right\\rangle=\\cos\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{-i{\\varphi}/{2}}\\left|0\\right\\rangle+\\sin\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{i{\\varphi}/{2}}\\left|1\\right\\rangle,"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_-\\right\\rangle=-\\sin\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{-i{\\varphi}/{2}}\\left|0\\right\\rangle+\\cos\\left(\\frac{\\theta}{2}\\right) \\mathrm{e}^{i{\\varphi}/{2}}\\left|1\\right\\rangle,"})}),`
`,i.jsx(e.p,{children:"where"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\tan(\\theta) = \\frac{|\\Omega|}{\\Delta}`})}),`
`,i.jsx(e.h2,{children:"The Bloch sphere"}),`
`,i.jsx(e.p,{children:`While we could just discuss the details of the above state in the
abstract, it is extremely helpful to visualize the problem on the Bloch
sphere. The idea of the Bloch sphere is that the we have a complex wave
function of well defined norm and two free parameters. So it seems quite
natural to look for a good representation of it. And this is the Bloch
sphere as drawn below`}),`
`,i.jsx(me,{id:"fig-bloch-sphere",href:ole,width:"90%",alt:"The Bloch sphere representation of quantum states",caption:"The Bloch sphere: A geometrical representation of quantum states in a two-level system, where any quantum state can be represented as a point on the unit sphere."}),`
`,i.jsx(e.p,{children:`We will see especially its usefulness especially as we discuss the
dynamics of the two-state system.`}),`
`,i.jsx(e.h2,{children:"Dynamical Aspects"}),`
`,i.jsxs(e.h3,{children:["Time Evolution of ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi(t)\\right\\rangle"})]}),`
`,i.jsxs(e.p,{children:[`After the static case we now want to investigate the dynamical
properties of the two-state system. We calculate the time evolution of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi(t)\\right\\rangle = c_0(t)\\left|0\\right\\rangle + c_1(t)\\left|1\\right\\rangle"}),`
with the Schrödinger equation and the perturbed Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i\\hbar \\frac{d}{dt}\\left|\\psi(t)\\right\\rangle=\\hat{H}\\left|\\psi(t)\\right\\rangle,\\\\
i \\frac{d}{dt}\\left(\\begin{array}{c} c_0(t) \\\\ c_1(t) \\end{array}\\right) = \\frac{1}{2}\\left( \\begin{array}{cc} \\Delta & \\Omega \\\\ \\Omega^* & -\\Delta \\end{array} \\right) \\left(\\begin{array}{c} c_0(t) \\\\ c_1(t) \\end{array} \\right).`})}),`
`,i.jsxs(e.p,{children:[`We have two coupled differential equations and we luckily already know
how to solve them as we have calculated the two eigenenergies in the
previous section. For the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi(t)\\right\\rangle"})," we get"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\left|\\psi(t)\\right\\rangle=\\lambda \\mathrm{e}^{-i{E_+}t/{\\hbar}} \\left|\\psi_+\\right\\rangle + \\mu \\mathrm{e}^{-i{E_-}t/{\\hbar}} \\left|\\psi_-\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["with the factors ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu"}),`, which are defined
by the initial state. The most common question is then what happens to
the system if we start out in the bare state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"}),` and then let it evolve under
coupling with a laser ? So what is the probability to find it in the
other state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_1(t)=\\left|\\left\\langle 1|\\psi(t)\\right\\rangle\\right|^2."})}),`
`,i.jsxs(e.p,{children:[`As a first step, we have to apply the initial condition
to and express
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\varphi\\right\\rangle"})," in terms of ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi_+"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi_-"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi(0)\\right\\rangle \\overset{!}{=} \\left|0\\right\\rangle\\\\
  = \\mathrm{e}^{i{\\varphi}/{2}} \\left[ \\cos\\left( \\frac{\\theta}{2}\\right) \\left|\\psi_+\\right\\rangle-\\sin\\left(\\frac{\\theta}{2}\\right)\\left|\\psi_-\\right\\rangle\\right]`})}),`
`,i.jsxs(e.p,{children:["By equating the coefficients we get for ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mu"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\lambda = \\mathrm{e}^{i{\\varphi}/{2}}\\cos\\left(\\frac{\\theta}{2}\\right), \\qquad  \\mu = -\\mathrm{e}^{i{\\varphi}/{2}}\\sin\\left(\\frac{\\theta}{2}\\right)."})}),`
`,i.jsx(e.p,{children:"One thus gets:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hspace{-2mm} P_1(t)=\\left|\\left\\langle 1|\\psi(t)\\right\\rangle\\right|^2 \\\\
= \\left|\\mathrm{e}^{i\\varphi} \\sin\\left(\\frac{\\theta}{2}\\right)\\cos\\left(\\frac{\\theta}{2}\\right)\\left[\\mathrm{e}^{-i{E_+}t/{\\hbar}} - \\mathrm{e}^{-i{E_-}t/{\\hbar}}\\right]\\right|^2\\\\
= \\sin^2(\\theta)\\sin^2\\left(\\frac{E_+-E_-}{2\\hbar}t\\right)`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"P_1(t)"})," can be expressed with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`
alone. The obtained relation is called Rabi's formula:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" P_1(t)=\\frac{1}{1+\\left(\\frac{\\Delta}{|\\Omega|}\\right)^2}\\sin^2\\left(\\sqrt{|\\Omega|^2+\\Delta^2}\\frac{t}{2}\\right)"})}),`
`,i.jsx(me,{id:"fig-rabi-oscillations",href:lle,width:"90%",alt:"Rabi oscillations and population dynamics",caption:"Rabi oscillations: The time evolution of the population in state 1 according to Rabi's formula, showing oscillatory behavior at the Rabi frequency √(|Ω|² + Δ²)."}),`
`,i.jsx(e.h3,{children:"Visualization of the dynamics in the spin picture"}),`
`,i.jsx(e.p,{children:`While the previous derivation might be the standard one, which certainly
leads to the right results it might not be the most intuitive way of
thinking about the dynamics. They become actually quite transparent in
the spin language and on the Bloch sphere. So let us go back to the
formulation of the Hamiltonian in terms of spins as at the beginning of the lecture.`}),`
`,i.jsxs(e.p,{children:["How would the question of the time evolution from ",i.jsx(e.code,{className:"language-math math-inline",children:"0"})," to ",i.jsx(e.code,{className:"language-math math-inline",children:"1"}),` and back go
now ? Basically, we would assume that the spin has been initialize into
one of the eigenstates of the `,i.jsx(e.code,{className:"language-math math-inline",children:"z"}),`-basis and now starts to rotate in some
magnetic field. How ? This can be nicely studied in the Heisenberg
picture, where operators have a time evolution. In the Heisenberg
picture we have:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{d}{dt} \\hat{s}_i = \\frac{i}{\\hbar}\\left[\\hat{H},\\hat{s}_i\\right]\\\\
\\frac{d}{dt} \\hat{s}_i = \\frac{i}{\\hbar}\\sum_j B_j \\left[\\hat{s}_j,\\hat{s}_i\\right]\\\\

`})}),`
`,i.jsx(e.p,{children:`So to understand we time evolution, we only need to
employ the commutator relationships between the spins:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= \\hbar is_z~~[ s_y, s_z] = \\hbar is_x~~[ s_z, s_x] = \\hbar is_y"})}),`
`,i.jsxs(e.p,{children:["For the specific case of ",i.jsx(e.code,{className:"language-math math-inline",children:"B_x=\\Omega"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"B_y = B_z = 0"}),`,
we have then:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\frac{d}{dt} \\hat{s}_x = 0\\\\
\\frac{d}{dt} \\hat{s}_y = -\\Omega \\hat{s}_z\\\\
\\frac{d}{dt} \\hat{s}_z = \\Omega \\hat{s}_y

`})}),`
`,i.jsxs(e.p,{children:[`So applying a field in x-direction leads to a rotation of the spin
around the `,i.jsx(e.code,{className:"language-math math-inline",children:"x"})," axis with velocity ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),`. We can now use this general
picture to understand the dynamics as rotations around an axis, which is
defined by the different components of the magnetic field.`]}),`
`,i.jsx(e.h2,{children:"A few words on the quantum information notation"}),`
`,i.jsxs(e.p,{children:[`The qubit is THE basic ingredient of quantum computers. A nice way to
play around with them is actually the `,i.jsx(e.a,{href:"https://quantum-computing.ibm.com/",children:`IBM Quantum
experience`}),`. However, you will
typically not find Pauli matrices etc within these systems. The typical
notation there is:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"R_x(\\phi)"})," is a rotation around the x-axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\phi"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Same holds for ",i.jsx(e.code,{className:"language-math math-inline",children:"R_y"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"R_z"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"X"})," denotes the rotation around the x axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),`. So it
transforms `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),` into
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"})," and vise versa."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"Z"})," denotes the rotation around the x axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),`. So it
transforms `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|+\\right\\rangle"}),` into
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|-\\right\\rangle"})," and vise versa."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`The most commonly used gate is actually one that we did not talk about
at all, it is the `,i.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),` into
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|-\\right\\rangle"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"}),` into
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|+\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}\\left|1\\right\\rangle = \\left|-\\right\\rangle  ~   \\hat{H}\\left|0\\right\\rangle = \\left|+\\right\\rangle\\\\
\\hat{H}\\left|-\\right\\rangle = \\left|1\\right\\rangle  ~   \\hat{H}\\left|+\\right\\rangle = \\left|0\\right\\rangle`})}),`
`,i.jsx(e.p,{children:"In the forth lecture we will see how it is that a time-dependent field can actually couple two atomic states, which are normally of very different energies."}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-ct1",children:[`
`,i.jsxs(e.p,{children:["Quantum Mechanics, Volume 1. Cohen-Tannoudji, Diu, Laloe. Wiley-VCH, 2006. ",i.jsx(e.a,{href:"#user-content-fnref-ct1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["See the discussions of the next lecture ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function hle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Dj,{...t})}):Dj(t)}const Bj=Object.freeze(Object.defineProperty({__proto__:null,default:hle,frontmatter:cle},Symbol.toStringTag,{value:"Module"})),ule="/assets/static/lecture4_pic1.DszrhizS.png",dle="/assets/static/lecture4_pic2.CVTS08Q5.png",mle="/assets/static/lecture4_pic3.DM5kykrW.png",fle={author:["Fred Jendrzejewski","Selim Jochim"],order:4,title:"Lecture 4 - Atoms in oscillating fields"};function Fj(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In the lecture, we will see how a time dependent coupling allows us to
engineer a new Hamiltonian. Most importantly, we will discuss the
resonant coupling of two levels and the decay of a single level to a
continuum.`}),`
`,i.jsx(e.p,{children:`In the last lecture, we discussed the properties of two
coupled levels. However, we did not elaborate at any stage how such a
system might emerge in a true atom. Two fundamental questions come to
mind:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`How is it that a laser allows to treat two atomic levels of very
different energies as if they were degenerate ?`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["An atom has many energy levels ",i.jsx(e.code,{className:"language-math math-inline",children:"E_n"}),` and most of them are not
degenerate. How can we reduce this complicated structure to a
two-level system?`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`The solution is to resonantly couple two of the atom's levels by
applying an external, oscillatory field, which is very nicely discussed
in chapter 12 of Ref. `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2002",id:"user-content-fnref-2002","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})})," ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-cohen_tannoudji_1998",id:"user-content-fnref-cohen_tannoudji_1998","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),`. We will discuss
important and fundamental properties of systems with a time-dependent
Hamiltonian.`]}),`
`,i.jsx(e.p,{children:`We will discuss a simple model for the atom in the oscillatory field. We
can write down the Hamiltonian:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\hat{H} = \\hat{H}_0 + \\hat{V}(t)."})}),`
`,i.jsxs(e.p,{children:["Here, ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," belongs to the atom and ",i.jsx(e.code,{className:"language-math math-inline",children:"V(t)"}),`
describes the time-dependent field and its interaction with the atom. We
assume that `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n\\right\\rangle"}),` is an eigenstate of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," and write:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_0\\left|n\\right\\rangle = E_n \\left|n\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:[`If the system is initially prepared in the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|i\\right\\rangle"}),", so that"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(t=0)\\right\\rangle = \\left|i\\right\\rangle,"})}),`
`,i.jsx(e.p,{children:"what is the probability"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_m(t) = \\left|\\left\\langle m|\\psi(t)\\right\\rangle\\right|^2"})}),`
`,i.jsxs(e.p,{children:[`to find the system in the state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|m\\right\\rangle"})," at the time ",i.jsx(e.code,{className:"language-math math-inline",children:"t"}),"?"]}),`
`,i.jsx(e.h2,{children:"Evolution Equation"}),`
`,i.jsxs(e.p,{children:["The system ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi(t)\\right\\rangle"}),` can be expressed as
follows:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(t)\\right\\rangle = \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\left|n\\right\\rangle,"})}),`
`,i.jsxs(e.p,{children:[`where the exponential is the time evolution for
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_1 =~0"}),`. We plug this equation in the Schrödinger equation and
get:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i\\hbar \\sum_n\\left(\\dot{\\gamma}_n(t)-i\\frac{E_n}{\\hbar}\\gamma_n(t)\\right)\\mathrm{e}^{-i{E_n}t/{\\hbar}}\\left|n\\right\\rangle = \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}}\\left(\\hat{H}_0 + \\hat{V}\\right) \\left|n\\right\\rangle\\\\
\\Longleftrightarrow i\\hbar\\sum_n \\dot{\\gamma}_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\left|n\\right\\rangle
 = \\sum_n \\gamma_n(t) \\mathrm{e}^{-i{E_n}t/{\\hbar}} \\hat{V} \\left|n\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:["If we multiply the equation with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle k\\right|"}),` we
obtain a set of coupled differential equations`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i\\hbar \\dot{\\gamma}_k \\mathrm{e}^{-i{E_k}t/{\\hbar}} = \\sum_n \\gamma_n \\mathrm{e}^{-{E_n}t/{\\hbar}}\\left\\langle k\\right|\\hat{V}\\left|n\\right\\rangle,\\\\
i\\hbar \\dot{\\gamma}_k = \\sum_n \\gamma_n \\mathrm{e}^{-i {(E_n-E_k)}t/{\\hbar}} \\left\\langle k\\right| \\hat{V}\\left|n\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`with initial conditions
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi(t=0)\\right\\rangle"}),`. They determine the full
time evolution.`]}),`
`,i.jsx(e.p,{children:`The solution of this set of equations depends on the details of the
system. However, there are a few important points:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`For short enough times, the dynamics are driving by the coupling
strength
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle k\\right|\\hat{V} \\left|n\\right\\rangle"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The right-hand sight will oscillate on time scales of ",i.jsx(e.code,{className:"language-math math-inline",children:"E_n-E_k"}),` and
typically average to zero for long times.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`If the coupling element is an oscillating field
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\propto e^{i\\omega_L t}"}),`, it might put certain times on resonance
and allow us to avoid the averaging effect. It is exactly this
effect, which allows us to isolate specific transitions to a very
high degree `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})})]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`We will now see how the two-state system emerges from these
approximations and then set-up the perturbative treatment step-by-step.`}),`
`,i.jsx(e.h2,{children:"Rotating wave approximation"}),`
`,i.jsxs(e.p,{children:[`We will now assume that the coupling term in indeed an oscillating field
with frequency `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_L"}),", so it reads:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{V} = \\hat{V}_0 \\cos(\\omega_Lt) = \\frac{\\hat{V}_0}{2} \\left(e^{i\\omega_lt}+e^{-i\\omega_lt}\\right)"})}),`
`,i.jsxs(e.p,{children:[`We will further assume the we would like use it to
isolate the transition `,i.jsx(e.code,{className:"language-math math-inline",children:"i\\rightarrow f"}),`, which is of frequency
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_0 = E_f - E_i"}),`. The relevant quantity is then the detuning
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\delta = \\omega_0 - \\omega_L"}),`. If it is much smaller than any other
energy difference `,i.jsx(e.code,{className:"language-math math-inline",children:"E_n-E_i"}),`, we directly reduce the system to the
following closed system:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i\\dot{\\gamma}_i = \\gamma_f \\mathrm{e}^{-i \\delta t} \\Omega\\\\
i\\dot{\\gamma}_f = \\gamma_i \\mathrm{e}^{i \\delta t}\\Omega^*`})}),`
`,i.jsxs(e.p,{children:[`Here we defined
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = \\left\\langle i\\right| \\frac{\\hat{V_0}}{2\\hbar}\\left|f\\right\\rangle"}),`.
And to make it really a time-of the same form as the two-level system
from the last lecture, we perform the transformation
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma_f = \\tilde{\\gamma}_f e^{i\\delta t}"}),`, which reduces the system
too:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`i \\dot{\\gamma}_i = \\Omega \\tilde{\\gamma}_f \\\\
i\\dot{\\tilde{\\gamma}}_f = \\delta \\tilde{\\gamma}_f + \\Omega^* \\gamma_i`})}),`
`,i.jsx(e.p,{children:`This has exactly the form of the two-level system that
we studied previously.`}),`
`,i.jsx(e.h3,{children:"Adiabatic elimination"}),`
`,i.jsxs(e.p,{children:[`We can now proceed to the quite important case of far detuning, where
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\delta \\gg \\Omega"}),`. In this case, the final state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|f\\right\\rangle"}),` gets barely populated and the time
evolution can be approximated to to be zero [@lukin].`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\dot{\\tilde{\\gamma}}_f = 0"})}),`
`,i.jsxs(e.p,{children:["We can use this equation to eliminate ",i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma"}),` from the
time evolution of the ground state. This approximation is known as
`,i.jsx(e.em,{children:"adiabatic elimination"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\tilde{\\gamma}_f = \\frac{\\Omega^*}{\\delta}\\gamma_i\\\\
\\Rightarrow i\\hbar \\dot{\\gamma}_i = \\frac{|\\Omega|^2}{\\delta} \\tilde{\\gamma}_i`})}),`
`,i.jsxs(e.p,{children:[`The last equation described the evolution of the initial
state with an energy `,i.jsx(e.code,{className:"language-math math-inline",children:"E_i = \\frac{|\\Omega|^2}{\\delta}"}),`. If the Rabi
coupling is created through an oscillating electric field, i.e. a laser,
this is know as the `,i.jsx(e.strong,{children:"light shift"})," or the ",i.jsx(e.strong,{children:"optical dipole potential"}),`.
It is this concept that underlies the optical tweezer for which Arthur
Ashkin got the `,i.jsx(e.a,{href:"https://www.nobelprize.org/uploads/2018/10/advanced-physicsprize2018.pdf",children:"nobel prize in the 2018"}),"."]}),`
`,i.jsx(e.h3,{children:"Example: Atomic clocks in optical tweezers"}),`
`,i.jsxs(e.p,{children:["A neat example that ties the previous concepts together is ",i.jsx(e.a,{href:"https://arxiv.org/abs/1908.05619v2",children:`the recent
paper`}),". The experimental setup is visualized in the figure below."]}),`
`,i.jsx(me,{id:"fig-atomic-clocks-tweezers",href:ule,caption:"Experimental setup for atomic clocks in optical tweezers"}),`
`,i.jsxs(e.p,{children:[`While nice examples these clocks are still far away from the best clocks
out there, which are based on `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.87.637",children:"optical lattice clocks and ions"}),"."]}),`
`,i.jsx(e.h2,{children:"Perturbative Solution"}),`
`,i.jsx(e.p,{children:`The more formal student might wonder at which points all these rather
hefty approximation are actually valid, which is obviously a very
substantial question. So, we will now try to isolate the most important
contributions to the complicated system through perturbation theory. For
that we will assume that we can write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{V}(t) =\\lambda \\hat{H}_1(t)"})}),`
`,i.jsxs(e.p,{children:[", where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),` is a small parameter. In other words
we assume that the initial system `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"}),` is only weakly perturbed.
Having identified the small parameter `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),`, we make the
`,i.jsx(e.em,{children:"perturbative ansatz"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\gamma_n(t) = \\gamma_n^{(0)} + \\lambda \\gamma_n^{(1)} + \\lambda^2 \\gamma_n^{(2)} + \\cdots"})}),`
`,i.jsxs(e.p,{children:[`and plug this ansatz in the evolution equations and sort
them by terms of equal power in `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),"."]}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"0"}),"th order reads"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" i\\hbar \\dot{\\gamma}_k^{(0)} = 0."})}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"0"}),`th order does not have a time evolution since we
prepared it in an eigenstate of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"}),`. Any evolution arises due
the coupling, which is at least of order `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),"."]}),`
`,i.jsxs(e.p,{children:["So, for the ",i.jsx(e.code,{className:"language-math math-inline",children:"1"}),"st order we get"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
i\\hbar \\dot{\\gamma}_k^{(1)} = \\sum_n \\gamma_n^{(0)} \\mathrm{e}^{-i(E_n-E_k)t/{\\hbar}}\\left\\langle k\\right|\\hat{H}_1\\left|n\\right\\rangle.`})}),`
`,i.jsx(e.h3,{children:"First Order Solution (Born Approximation)"}),`
`,i.jsxs(e.p,{children:["For the initial conditions ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi(t=0)=\\left|i\\right\\rangle"}),`
we get`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\gamma_k^{(0)}(t) = \\delta_{ik}."})}),`
`,i.jsxs(e.p,{children:["We plug this in the ",i.jsx(e.code,{className:"language-math math-inline",children:"1"}),`st order approximation and obtain the rate for the system to go
to the final state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|f\\right\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"i \\hbar\\dot{\\gamma}^{(1)} = \\mathrm{e}^{i(E_f-E_i)t/{\\hbar}} \\left\\langle f\\right|\\hat{H}_1 \\left|i\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["Integration with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma_f^{(1)}(t=0) = 0"})," yields"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\gamma_f^{(1)} = \\frac{1}{i\\hbar}\\int\\limits_0^t \\mathrm{e}^{i(E_f-E_i)t'/{\\hbar}} \\left\\langle f\\right| \\hat{H}_1(t')\\left|i\\right\\rangle \\mathop{}\\!\\mathrm{d}t',`})}),`
`,i.jsx(e.p,{children:`so that we obtain the probability for ending up in the
final state:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{i\\to f}(t) = \\lambda^2\\left| \\gamma_f^{(1)}(t)\\right|^2."})}),`
`,i.jsxs(e.p,{children:["Note that ",i.jsx(e.code,{className:"language-math math-inline",children:"P_{i\\to f}(t) \\ll 1"}),` is the condition for
this approximation to be valid!`]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:"Example 1: Constant Perturbation."})}),`
`,i.jsx(me,{id:"fig-constant-perturbation",href:dle,caption:"Sketch of a constant perturbation"}),`
`,i.jsxs(e.p,{children:[`We apply a constant perturbation in the time interval
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left[0,T\\right]"}),", as shown in above. If we use the expression for ",i.jsx(e.code,{className:"language-math math-inline",children:"\\gamma_f^{(1)}"})," and set ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_0 = E_f-E_i"}),", we get"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\gamma_f^{(1)}(t\\geq T) = \\frac{1}{i \\hbar} \\left\\langle f\\right|\\hat{H}_1\\left|i\\right\\rangle \\frac{\\mathrm{e}^{i\\omega_0 T}-1}{i\\omega_0},"})}),`
`,i.jsx(e.p,{children:"and therefore"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{i\\to f} = \\frac{1}{\\hbar^2}\\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2 \\underbrace{\\frac{\\sin^2\\left(\\omega_0\\frac{T}{2}\\right)}{\\left(\\frac{\\omega_0}{2}\\right)^2}}_{\\mathrm{y}(\\omega_0,T)}."})}),`
`,i.jsxs(e.p,{children:["A sketch of ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{y}(\\omega_0,T)"})," is shown below"]}),`
`,i.jsx(me,{id:"fig-y-function-sketch",href:mle,caption:"A sketch of y"}),`
`,i.jsxs(e.p,{children:[`We can push this calculation to the extreme case of
`,i.jsx(e.code,{className:"language-math math-inline",children:"T\\rightarrow \\infty"}),`. This results in a delta function, which is peaked
round `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_0 = 0"})," and we can write:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{i\\to f} =  T\\frac{2\\pi}{\\hbar^2}\\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2\\delta(\\omega_0)"})}),`
`,i.jsxs(e.p,{children:["This is the celebrated ",i.jsx(e.strong,{children:"Fermi's golden rule"}),"."]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Example 2: Sinusoidal Perturbation."})," For the perturbation"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_1(t) = \\left\\{ \\begin{array}{ccl} \\hat{H}_1\\mathrm{e}^{-i\\omega t} && \\text{for}\\; 0 < t < T \\\\ 0 &&\\text{otherwise}\\end{array} \\right."})}),`
`,i.jsx(e.p,{children:"we obtain the probability"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{i\\to f} (t \\geq T) = \\frac{1}{\\hbar^2} \\left|\\left\\langle f\\right|\\hat{V}\\left|i\\right\\rangle\\right|^2 \\mathrm{y}(\\omega_0 - \\omega, T)."})}),`
`,i.jsxs(e.p,{children:["At ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega = \\left|E_f - E_i\\right|/\\hbar"})," we are on resonance."]}),`
`,i.jsx(e.p,{children:"In the fifth lecture, we will start to dive into the hydrogen atom."}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-2002",children:[`
`,i.jsxs(e.p,{children:["Jean Dalibard Jean-Louis Basdevant. Quantum Mechanics. Springer-Verlag, 2002. ",i.jsx(e.a,{href:"#user-content-fnref-2002","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-cohen_tannoudji_1998",children:[`
`,i.jsxs(e.p,{children:["Claude Cohen-Tannoudji, Jacques Dupont-Roc, Gilbert Grynberg. Atom-Photon Interactions. Wiley-VCH Verlag GmbH, 1998. ",i.jsx(e.a,{href:"#user-content-fnref-cohen_tannoudji_1998","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:[`This is the idea behind atomic and optical clocks, which work
nowadays at `,i.jsx(e.code,{className:"language-math math-inline",children:"10^{-18}"}),". ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function ple(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Fj,{...t})}):Fj(t)}const Hj=Object.freeze(Object.defineProperty({__proto__:null,default:ple,frontmatter:fle},Symbol.toStringTag,{value:"Module"})),gle="/assets/static/lecture5_pic1.DJfcaMB1.png",xle={author:["Fred Jendrzejewski","Selim Jochim"],order:5,title:"Lecture 5 - The Hydrogen Atom"};function qj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will first discuss the diagonalization of the
harmonic oscillator and then discuss the main properties of the hydrogen
atom.`}),`
`,i.jsx(e.p,{children:`In the previous lectures we have seen how to treat eigenstates of the
two-level system and then how we can derive its effective emergence from
some complex level structure if we apply oscillating
fields.`}),`
`,i.jsx(e.p,{children:`Today, we will increase the complexity towards the harmonic oscillator
and the hydrogen atom.`}),`
`,i.jsx(e.h1,{children:"The harmonic oscillator"}),`
`,i.jsx(e.p,{children:`The harmonic oscillator is another great toy model to understand certain
properties of quantum mechanical systems. Most importantly, it is a
great introduction into the properties of bound systems and ladder
operators. The basic Hamiltonian comes along in a rather innocent
fashion, namely:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega^2}{2}\\hat{x}^2`})}),`
`,i.jsxs(e.p,{children:["The two variables ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{p}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{x}"}),` are
non-commuting `,i.jsx(e.code,{className:"language-math math-inline",children:"[\\hat{x}, \\hat{p}] = i\\hbar"}),`, so they cannot be measured
at the same time. We would now like to put the operator into a diagonal
form such that it reads something like:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\sum_n \\epsilon_n \\left|n\\right\\rangle\\left\\langle n\\right|`})}),`
`,i.jsxs(e.p,{children:["We will follow he quite closely ",i.jsx(e.a,{href:"https://ocw.mit.edu/courses/nuclear-engineering/22-51-quantum-theory-of-radiation-interactions-fall-2012/lecture-notes/MIT22_51F12_Ch9.pdf",children:"this discussion"}),"."]}),`
`,i.jsx(e.h2,{children:"The ladder operators"}),`
`,i.jsxs(e.p,{children:[`We would like to get the spectrum first. So make the equation look a bit
nicer we will define `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{p} = \\hat{P} \\sqrt{m\\omega}"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{x} = \\frac{\\hat{X}}{\\sqrt{m\\omega}}"})," such that we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H} = \\frac{\\omega}{2}\\left(\\hat{P}^2 + \\hat{X}^2\\right)`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),` The next step is then to define the ladder
operators:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a} = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\hat{X}+i\\hat{P}\\right)\\\\
\\hat{a}^\\dag = \\frac{1}{\\sqrt{2\\hbar}}\\left(\\hat{X}-i\\hat{P}\\right)\\\\`})}),`
`,i.jsx(e.p,{children:`At this stage we can just try to rewrite the Hamiltonian
in terms of the operators, such that:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a}^\\dag \\hat{a} = \\frac{1}{2\\hbar}(\\hat{X}-i\\hat{P})(\\hat{X}+i\\hat{P})\\\\
= \\frac{1}{2\\hbar}(\\hat{X}^2 +\\hat{P}^2 -\\hbar)\\\\
 \\frac{1}{2}(X^2 +\\hat{P}^2 ) = \\hbar \\left(\\hat{a}^\\dag \\hat{a}-\\frac{1}{2}\\right)`})}),`
`,i.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\hbar \\omega \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dag a"})}),`
`,i.jsxs(e.p,{children:[`At this stage we have diagonalized the Hamiltonian, what
remains to be understood is the the values that `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{a}^\\dag a"}),` can
take.`]}),`
`,i.jsx(e.h2,{children:"Action of the ladder operators in the Fock basis"}),`
`,i.jsx(e.p,{children:"We would like to understand the basis, which is defined by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{N} \\left|n\\right\\rangle = n \\left|n\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:["The non-commutation between ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{X}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{P}"}),` is
translated to the ladder operators as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= \\frac{1}{2\\hbar}[\\hat{X}+iP,\\hat{X}-i\\hat{P}] = 1\\\\
~[\\hat{N}, a] = -\\hat{a}\\\\
~[\\hat{N}, a^\\dag] = a^\\dag`})}),`
`,i.jsx(e.p,{children:"From these relationship we can show then that:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{a}\\left|n\\right\\rangle = \\sqrt{n}\\left|n-1\\right\\rangle\\\\
\\hat{a}^\\dag \\left|n\\right\\rangle = \\sqrt{n+1}\\left|n+1\\right\\rangle\\\\`})}),`
`,i.jsxs(e.p,{children:[`These relations are the motivation for the name ladder
operators as they connect the different eigenstates. And they are
raising/lowering the quantum number by one. Finally we have to find the
lower limit. And this is quite naturally 0 as
`,i.jsx(e.code,{className:"language-math math-inline",children:"n = \\left\\langle n\\right|\\hat{N}\\left|n\\right\\rangle = \\left\\langle\\psi_1\\right|\\left|\\psi_1\\right\\rangle\\geq 0"}),`.
So we can construct the full basis by just defining the action of the
lowering operator on the zero element
`,i.jsx(e.code,{className:"language-math math-inline",children:"a\\left|0\\right\\rangle = 0"}),` and the other operators are
then constructed as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|n\\right\\rangle = \\frac{(a^\\dag)^n}{\\sqrt{n!}}\\left|0\\right\\rangle"})}),`
`,i.jsx(e.h2,{children:"Spatial representation of the eigenstates"}),`
`,i.jsxs(e.p,{children:[`While we now have the spectrum it would be really nice to obtain the
spatial properties of the different states. For that we have to project
them onto the x basis. Let us start out with the ground state for which
we have `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{a}\\left|0\\right\\rangle= 0"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left\\langle x\\right|\\frac{1}{\\sqrt{2\\hbar}}\\left(\\sqrt{m\\omega}\\hat{x} +i \\frac{1}{\\sqrt{m\\omega}}\\hat{p}\\right)\\left|0\\right\\rangle= 0\\\\
\\left(\\sqrt{\\frac{m\\omega}{\\hbar}}x + \\sqrt{\\frac{\\hbar}{m\\omega}}\\partial_x\\right)\\psi_0(x)= 0\\\\
\\Rightarrow \\psi_0(x) \\propto e^{-\\frac{x^2}{2a_{HO}^2}}`})}),`
`,i.jsxs(e.p,{children:[`This also introduces the typical distance in the quantum
harmonic oscillator which is given by `,i.jsx(e.code,{className:"language-math math-inline",children:"a_{HO} =\\sqrt{\\hbar/m\\omega}"}),`.
The other states are solutions to the defining equations:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\psi_n(x) = \\frac{1}{\\sqrt{n!}2^n}\\left(\\sqrt{m\\omega}x - \\frac{1}{\\sqrt{m\\omega}}\\frac{d}{dx}\\right)^n \\psi_0(x)\\\\
\\psi_n(x) = \\frac{1}{\\sqrt{n!}2^n}H_n(x) \\psi_0(x)\\\\`})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"H_n(x)"})," are the Hermite polynoms."]}),`
`,i.jsx(e.h1,{children:"The hamiltonian of the hydrogen atom"}),`
`,i.jsxs(e.p,{children:["The hydrogen atom plays at central role in atomic physics as it is ",i.jsx(e.em,{children:"the"}),`
basic ingredient of atomic structures. It describes a single `,i.jsx(e.em,{children:"electron"}),`,
which is bound to the nucleus of a single `,i.jsx(e.em,{children:"proton"}),`. As such it is the
simplest of all atoms and can be described analytically within high
precision. This has motivated an enormous body of literature on the
problem, which derives all imaginable properties in nauseating detail.
Therefore, we will focus here on the main properties and only sketch the
derivations, while we will reference to the more technical details.`]}),`
`,i.jsx(me,{id:"fig-hydrogen-atom-sketch",href:gle,caption:"Sketch of the hydrogen atom with the relative coordinate and the coordinates of the proton and the electron"}),`
`,i.jsx(e.p,{children:"For the hydrogen atom as shown in above, we can write down the Hamiltonian"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}=\\frac{{{\\hat{\\vec{p}}}^2_\\text{p}}}{2m_\\text{p}} + \\frac{{\\hat{\\vec{p}}}^2_\\text{e}}{2m_\\text{e}} - \\frac{Ze^2}{4\\pi\\epsilon_0 r},"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"Ze"}),` is the nuclear charge. To solve the problem,
we have to find the right Hilbert space. We can not solve the problem of
the electron alone. If we do a separation of coordinates, i.e., we
separate the Hamiltonian into the the center of mass and the relative
motion, we get`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\underbrace{\\frac{{\\hat{\\vec{p}}}^2_{\\textrm{cm}}}{2M}}_{\\hat{H}_{\\textrm{cm}}} + \\underbrace{\\frac{{\\hat{\\vec{p}}}^2_\\text{r}}{2\\mu}- \\frac{Ze^2}{4\\pi\\epsilon_0r}}_{\\hat{H}_{\\text{atom}}}"})}),`
`,i.jsxs(e.p,{children:["with the reduced mass ",i.jsx(e.code,{className:"language-math math-inline",children:"1/\\mu=1/m_\\text{e}+1/m_\\text{p}"}),`.
If the state of the hydrogen atom `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"}),`
is an eigenstate of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}"}),", we can write"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}\\left|\\psi\\right\\rangle=\\left(\\hat{H}_\\textrm{cm}+\\hat{H}_{\\text{atom}} \\right)\\left|\\psi_\\textrm{cm}\\right\\rangle\\otimes \\left|\\psi_\\text{atom}\\right\\rangle \\\\
= \\left( E_{\\text{kin}} + E_\\text{atom} \\right) \\left|\\psi\\right\\rangle.`})}),`
`,i.jsxs(e.p,{children:[`Both states are eigenstates of the system. The state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"}),` can be split up as shown since
the two degrees of freedom are generally not entangled.`]}),`
`,i.jsx(e.p,{children:"The wave function of the system then reads:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\psi(\\vec{R},\\vec{r}) = \\left( \\left\\langle R\\right| \\otimes \\left\\langle r\\right|\\right)\\left( \\left|\\psi_\\textrm{cm}\\right\\rangle \\otimes \\left|\\psi_{\\text{atom}}\\right\\rangle\\right)\\\\
= \\psi(\\vec{R}) \\cdot \\psi (\\vec{r})`})}),`
`,i.jsxs(e.p,{children:[`Our goal is now to find the eigenfunctions and
eigenenergies of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\text{atom}"}),`. In order to further divide the
Hilbert space, we can use the symmetries.`]}),`
`,i.jsx(e.h1,{children:"Conservation of orbital angular momentum"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\text{atom}"}),` possesses spherical symmetry, which implies that
`,i.jsx(e.strong,{children:"orbital angular momentum"})," ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}"}),` is conserved. It is defined
as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{\\vec{L}}=\\hat{\\vec{r}} \\times \\hat{\\vec{p}}"})}),`
`,i.jsx(e.p,{children:"In other words, we have:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= 0"})}),`
`,i.jsxs(e.p,{children:[`Let us show first that the kinetic term commutes with
the angular momentum operator, We will employ the commutator
relationships for position and momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"[x_i, p_j]=i\\hbar"}),` and the
relationship `,i.jsx(e.code,{className:"language-math math-inline",children:"[A,BC] = [A,B]C+B[A,C]"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"[f(x), p_x] = [x,p_x]\\frac{\\partial f(x)}{\\partial x}"}),". So we obtain:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= [p_x^2,xp_y]-[p_y^2,yp_x] \\\\
 = [p_x^2,x]p_y-[p_y^2,y] p_x\\\\
 =i\\hbar 2 p_xp_y-2i\\hbar p_y p_x\\\\
 = 0`})}),`
`,i.jsxs(e.p,{children:["Analog calculations show that ",i.jsx(e.code,{className:"language-math math-inline",children:"L_y"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"L_z"}),` commute.
In a similiar fashion we can verify that the potential term commutes
with the different components of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= [\\frac{1}{r}, xp_y]-[\\frac{1}{r}, yp_x]\\\\
= x[\\frac{1}{r}, p_y]-y[\\frac{1}{r}, p_x]\\\\
= -x \\frac{yi\\hbar}{2r^{3/2}}+y\\frac{xi\\hbar}{2r^{3/2}}\\\\
=0`})}),`
`,i.jsxs(e.p,{children:[`We can therefore decompose the eigenfunctions of the
hydrogen atom over the eigenbasis of the angular momentum operator. A
detailled discussion of the properties of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{L}"}),` can be found in
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:"Appendix B of Hertel"}),`. To find the eigenbasis, we first need to
identify the commutation relationships between the components of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}"}),`. We can calculate them following commutation
relationships:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= [yp_z - zp_y, zp_x - xp_z]\\\\
=[yp_z, zp_x]-[yp_z,xp_z]- [zp_y, zp_x] + [zp_y,xp_z]\\\\
=[yp_z, zp_x] + [zp_y,xp_z]\\\\
=[yp_z, z]p_x +x[zp_y,p_z]\\\\
=-i\\hbar yp_x +i\\hbar xp_y\\\\
= i\\hbar L_z`})}),`
`,i.jsx(e.p,{children:`This relationship holds for all the other components too
and we have in general:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= i\\hbar \\epsilon_{ijk}L_k"})}),`
`,i.jsx(e.p,{children:`The orbital angular momentum is therefore part of the
large family of angular momentum operators, which also comprises spin
etc. In particular the different components are not independent, and
therefore we cannot form a basis out the three components. A suitable
choice is actually to use the following combinations:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\vec{L}}^2\\left|l,m_l\\right\\rangle = \\hbar^2 l (l+1)\\left|l,m_l\\right\\rangle\\\\
\\hat{L}_z\\left|l,m_l\\right\\rangle = \\hbar m_l \\left|l,m_l\\right\\rangle`})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"l"})," is a non-negative integer and it is called the ",i.jsx(e.strong,{children:`orbital angular
momentum quantum number`}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"m_l"})," takes values ",i.jsx(e.code,{className:"language-math math-inline",children:"-l, -l+1, ..., l-1, l"}),` and it is sometimes
called the `,i.jsx(e.strong,{children:"projection of the angular momentum"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"Eigenfunction of the angular momentum operators"}),`
`,i.jsx(e.p,{children:`Having identified the relevant operators it would be nice to obtain a
space representation of them. This works especially nicely in spherical
coordinates. There, we get`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{L}_z= - i \\hbar \\partial_{\\phi}\\\\
\\hat{\\vec{L}}^2 = - \\hbar^2 \\left[\\frac{1}{\\sin(\\theta)}\\partial_{\\theta} \\left( \\sin(\\theta) \\partial_\\theta\\right) + \\frac{1}{\\sin^2(\\theta)} \\partial_{\\phi\\phi} \\right].`})}),`
`,i.jsx(e.p,{children:"The corresponding wave functions are"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle\\theta, \\phi | l,m_l\\right\\rangle = Y_{lm}(\\theta,\\phi)."})}),`
`,i.jsxs(e.p,{children:["Where ",i.jsx(e.code,{className:"language-math math-inline",children:"Y_{lm}(\\theta, \\phi)"})," are the ",i.jsx(e.strong,{children:"spherical harmonics"}),"."]}),`
`,i.jsx(e.h1,{children:"The radial wave equation"}),`
`,i.jsx(e.p,{children:`Given that we now know that the angular momentum is conserved for the
hydrogen atom, we can actually rewrite the Hamltonian in terms of the angular momentum as
we find:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}_\\text{atom} = \\hat{H}_r + \\frac{\\hat{L}}{2\\mu r^2}+V(r) \\\\
\\hat{H}_r = -\\frac{\\hbar^2}{2\\mu}\\frac{1}{r^2}\\frac{\\partial}{\\partial r}\\left(r^2\\frac{\\partial}{\\partial r}\\right)`})}),`
`,i.jsxs(e.p,{children:[`We can now separate out the angular part and decompose
it over the eigenfunctions of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{L}}"}),`, such that we make the
ansatz `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi (r,\\theta,\\phi) = R(r) Y_{lm}(\\theta,\\phi)"})}),`
`,i.jsx(e.p,{children:`We can plug this separated ansatz in the Schrödinger equation. We
already solved the angular in the discussion of the angular momentum and
for the radial part we obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"-\\frac{\\hbar^2}{2\\mu}\\frac{1}{r}\\frac{d^2(rR(r))}{dr^2} - \\frac{Ze^2}{4\\pi\\epsilon_0 r} R(r) + \\frac{\\hbar^2}{2\\mu}\\frac{l(l+1)}{r^2}R(r) = ER(r)"})}),`
`,i.jsxs(e.p,{children:["Substituting ",i.jsx(e.code,{className:"language-math math-inline",children:"R(r)=u(r)/r"})," leads to"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"-\\frac{\\hbar^2}{2\\mu}\\frac{d^2}{dr^2}u(r) +\\underbrace{ \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0 r} + \\frac{\\hbar^2}{2\\mu} \\frac{l(l+1)}{r^2} \\right)}_{V_{\\text{eff}}} u(r) = E \\, u(r),"})}),`
`,i.jsxs(e.p,{children:[`which is known as the "radial wave equation". It is a
very general result for `,i.jsx(e.em,{children:"any"}),` central potential. It can also be used to
describe unbound states (`,i.jsx(e.code,{className:"language-math math-inline",children:"E>0"}),") that occur during scattering."]}),`
`,i.jsx(e.p,{children:`In the next lecture we will look into the energy scales of the hydrogen atom and then start
coupling different levels.`}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["The commutator between ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{X}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{P}"})," is still as for ",i.jsx(e.code,{className:"language-math math-inline",children:"x"}),`
and `,i.jsx(e.code,{className:"language-math math-inline",children:"p"}),". ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,i.jsxs(e.p,{children:[`Only if the system is in a well-defined angular momentum state, we
can write it down like this. `,i.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function yle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(qj,{...t})}):qj(t)}const $j=Object.freeze(Object.defineProperty({__proto__:null,default:yle,frontmatter:xle},Symbol.toStringTag,{value:"Module"})),ble="/assets/static/lecture6_pic1.n6Mir5lP.png",wle="/assets/static/lecture6_pic2.B5mt3pP3.png",_le="/assets/static/lecture6_pic3.D6FrER_i.png",vle="/assets/static/lecture6_pic4.D8eycG7l.png",jle="/assets/static/lecture6_pic5.9HdctN0W.png",Tle="/assets/static/lecture6_pic6.BFgZtziR.svg",kle="/assets/static/lecture6_pic7.BkRloi2M.svg",Ele={author:["Fred Jendrzejewski","Selim Jochim"],order:6,title:"Lecture 6 - The dipole approximation in the hydrogen atom"};function zj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We will continue with some properties of the hydrogen atom. First
compare it to the harmonic oscillator, then look into dipole transitions
and end with the coupling to static magnetic fields.`}),`
`,i.jsx(e.p,{children:`In the last lecture, we discussed the basic properties of the
hydrogen atom and found its eigenstates. We will now summarize the most
important properties and look into its orbitals. From that we will
understand the understand the interaction with electromagnetic waves and
introduce the selection rules for dipole transitions.`}),`
`,i.jsx(e.h1,{children:"The energies of Hydrogen and its wavefunctions"}),`
`,i.jsx(e.p,{children:`In the last lecture, we looked into hydrogen and saw that we could write
it's Hamiltonian as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}_\\text{atom} = \\hat{H}_r + \\frac{\\hat{L}}{2\\mu r^2}+V(r) \\\\
\\hat{H}_r = -\\frac{\\hbar^2}{2\\mu}\\frac{1}{r^2}\\frac{\\partial}{\\partial r}\\left(r^2\\frac{\\partial}{\\partial r}\\right)`})}),`
`,i.jsx(e.p,{children:`We could then separate out the angular part and
decompose it as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi (r,\\theta,\\phi) = \\frac{u(r)}{r} Y_{lm}(\\theta,\\phi)"})}),`
`,i.jsx(e.p,{children:"The radial wave equation reads then:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
-\\frac{\\hbar^2}{2\\mu}\\frac{d^2}{dr^2}u(r) +\\underbrace{ \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0 r} + \\frac{\\hbar^2}{2\\mu} \\frac{l(l+1)}{r^2} \\right)}_{V_{\\text{eff}}} u(r) = E \\, u(r),`})}),`
`,i.jsx(e.h2,{children:"Energy scales"}),`
`,i.jsx(e.p,{children:"We can now make the last equation dimensionless, by rewriting:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"r = \\rho \\tilde{a}_{0}"})}),`
`,i.jsx(e.p,{children:"So we rewrite:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"-\\frac{\\hbar^2}{2\\mu \\tilde{a}_{0}^2}\\frac{d^2}{d\\rho^2}u(r) + \\left( -\\frac{Ze^2}{4\\pi\\epsilon_0\\tilde{a}_{0}}\\frac{1}{\\rho} + \\frac{\\hbar^2}{2\\mu \\tilde{a}_{0}^2} \\frac{l(l+1)}{\\rho^2} \\right) u(r) = E \\, u(r),"})}),`
`,i.jsx(e.p,{children:"This allows us to measure energies in units of:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E = \\epsilon R_{y,\\textrm{m}}\\\\
R_{y,\\textrm{m}} = -\\frac{\\hbar^2}{2\\mu \\tilde{a}_{0}^2}`})}),`
`,i.jsx(e.p,{children:"The equation reads then:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d^2}{d\\rho^2}u(\\rho) + \\left( \\frac{\\mu Ze^2 \\tilde{a}_{0}}{\\hbar^2 4\\pi\\epsilon_0}\\frac{2}{\\rho} - \\frac{l(l+1)}{\\rho^2} \\right) u(\\rho) = \\epsilon u(\\rho),"})}),`
`,i.jsx(e.p,{children:"If we finally set"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\tilde{a}_{0}=\\frac{4\\pi\\epsilon_0 \\hbar^2}{\\mu Z e^2}"})}),`
`,i.jsx(e.p,{children:"We obtain the especially elegant formulation:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d^2}{d\\rho^2}u(\\rho) + \\left( \\frac{2}{\\rho} - \\frac{l(l+1)}{\\rho^2} \\right) u(\\rho) = \\epsilon u(\\rho),"})}),`
`,i.jsxs(e.p,{children:["We typically call ",i.jsx(e.code,{className:"language-math math-inline",children:"\\tilde{a}_{0}"})," the ",i.jsx(e.strong,{children:"Bohr radius"}),`
for an atom with reduced mass `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mu"}),` and with a nucleus with charge
number `,i.jsx(e.code,{className:"language-math math-inline",children:"Z"}),". ",i.jsx(e.code,{className:"language-math math-inline",children:"R_{y,\\textrm{m}}"})," is the ",i.jsx(e.strong,{children:"Rydberg energy"}),` of such an
atom.`]}),`
`,i.jsxs(e.p,{children:[`The universal constant is defined for the infinite mass limit
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mu \\approx m_e"})," and for ",i.jsx(e.code,{className:"language-math math-inline",children:"Z=1"}),`. As a length scale we introduce the Bohr
radius for infinite nuclear mass`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"a_0 = \\frac{4\\pi\\epsilon_0\\hbar^2}{m_e e^2} = 0.5\\text{angstrom} = 0.05 \\text{nm}."})}),`
`,i.jsx(e.p,{children:"The energy scale reads:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`R_{y,\\infty} = \\frac{m_e e^4}{32 \\pi^2 \\epsilon_0^2 \\hbar^2}\\\\
\\approx 2.179e-18\\textrm{J}\\\\
 \\approx e \\times 13.6\\textrm{eV}\\\\
\\approx h \\times 3289\\textrm{THz}`})}),`
`,i.jsx(e.p,{children:`So if we excite the hydrogen atom for time scales of a
few attoseconds, we will coherently create superposition states of all
existing levels. But which ones ? And at which frequency ?`}),`
`,i.jsx(e.h2,{children:"Solution of the radial wave equation"}),`
`,i.jsx(e.p,{children:"At this stage we can have a look into the energy landscape:"}),`
`,i.jsx(me,{id:"fig-hydrogen-energy-potential",href:ble,caption:"Energy potential of the hydrogen atom"}),`
`,i.jsx(e.p,{children:"The energies read then"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_n = -\\frac{R_{y,\\textrm{m}}}{n^2} \\qquad \\text{with} \\qquad  n=1,2,3,\\cdots"})}),`
`,i.jsxs(e.p,{children:["for ",i.jsx(e.code,{className:"language-math math-inline",children:"l=0"})," and"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_n = -\\frac{R_{y,\\textrm{m}}}{n^2} \\qquad \\text{with} \\qquad  n=2,3,4,\\cdots"})}),`
`,i.jsxs(e.p,{children:["for ",i.jsx(e.code,{className:"language-math math-inline",children:"l=1"}),`. Despite the different effective potentials, we get the
same eigenstates. This looks like an accidental degeneracy. Actually,
there is a hidden symmetry which comes from the so-called "Runge-Lenz"
vector. It only occurs in an attractive `,i.jsx(e.code,{className:"language-math math-inline",children:"1/r"}),`-potential . This
vector reads: `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{A} =\\mathbf{p}\\times\\mathbf{L}-\\mathbf{r}"})]}),`
`,i.jsx(e.p,{children:`Finally, we can also visualize the radial wavefunctions for the hydrogen
atom as shown below`}),`
`,i.jsx(me,{id:"fig-hydrogen-radial-wavefunctions",href:wle,caption:"Radial wavefunctions for the hydrogen atom"}),`
`,i.jsxs(e.p,{children:[`Associated with these radial wavefunctions, we also have the angular
profiles. Where `,i.jsx(e.code,{className:"language-math math-inline",children:"Y_{lm}(\\theta, \\phi)"})," are the ",i.jsx(e.strong,{children:"spherical harmonics"}),`
as shown below`]}),`
`,i.jsx(me,{id:"fig-spherical-harmonics",href:_le,caption:"Spherical harmonics"}),`
`,i.jsx(e.p,{children:`Their shape is especially important for understanding the possibility of
coupling different orbits through electromagnetic waves.`}),`
`,i.jsx(e.h1,{children:"The electric dipole approximation"}),`
`,i.jsxs(e.p,{children:["Below you see the interaction between an atom and an electromagnetic wave ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{E}"}),` with
wave vector `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{k}"}),". The states ",i.jsx(e.code,{className:"language-math math-inline",children:"\\text{|g>}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\text{|e>}"}),` stand
for the ground and excited state and `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar\\omega_0"}),` is the energy of
the resonant transition between the states.`]}),`
`,i.jsx(me,{id:"fig-atom-em-wave-interaction",href:vle,caption:"Interaction between an atom and an electromagnetic wave"}),`
`,i.jsxs(e.p,{children:[`We consider an atom which is located in a radiation field. By resonant
coupling with the frequency `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_0"}),`, it can go from the ground state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),` to the excited state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"}),"."]}),`
`,i.jsxs(e.p,{children:[`The potential energy of a charge distribution in a homogeneous
electromagnetic field `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{E}"})," is:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_\\text{pot} = \\sum_i q_i \\vec{r}_i\\cdot \\vec{E}."})}),`
`,i.jsx(e.p,{children:`If the upper limit of the sum is 2, we obtain the dipole
moment`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{D} = e \\vec{r}."})}),`
`,i.jsx(e.p,{children:`For the hydrogen atom, the distance corresponds to the
Bohr radius.`}),`
`,i.jsx(me,{id:"fig-dipole-potential",href:jle,caption:"Dipole potential visualization"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."}),` Apart from the monopole, the dipole potential is the lowest
order term of the multipole expansion of the scalar potential `,i.jsx(e.code,{className:"language-math math-inline",children:"\\phi"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\phi \\left( \\vec{r} \\right) = \\frac{1}{4\\pi\\epsilon_0}\\frac{\\vec{D}\\cdot\\vec{r}}{|\\vec{r}|^3}\\\\
\\vec{E}(\\vec{r})= \\vec{\\nabla}\\phi(\\vec{r}) = \\frac{ 3 \\left(\\vec{D}\\cdot \\vec{r}\\right) \\vec{r}/{|\\vec{r}|^2}- \\vec{D}}{4\\pi\\epsilon_0|\\vec{r}|^3}.`})}),`
`,i.jsxs(e.p,{children:[`For the dipole approximation we consider the size of the atom and
compare it to the wavelength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," of the electromagnetic field:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle|r|\\right\\rangle \\sim 1\\text{angstrom}\\ll \\lambda \\sim 10^3\\text{angstrom}"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:`Therefore, we assume that the field is homogeneous in space and omit
the spatial dependence:`}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    E(r,t) \\approx E(t)



`})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:`The correction term resulting from the semi-classical dipole
approximation then is`}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    \\hat{H}_1(t)=-e\\hat{\\vec{r}} \\cdot \\vec{E}(t) = -\\hat{\\vec{D}} \\cdot \\vec{E}(t)



`})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`Why can the magnetic field be ignored in this approximation? The
velocity of an electron is `,i.jsx(e.code,{className:"language-math math-inline",children:"\\sim \\alpha c"}),`. The hydrogen atom only
has small relativistic corrections. If we compare the modulus of the
magnetic and the electric field, we get:`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\left| \\vec{B} \\right| = \\frac{|\\vec{E}|}{c}"})}),`
`,i.jsx(e.p,{children:"The electric field contribution thus dominates. Now we choose"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{E} = E_0 \\vec{\\epsilon} \\cos \\left(\\omega t - \\vec{k} \\cdot \\vec{r}\\right)"})}),`
`,i.jsx(e.p,{children:"and do time-dependent perturbation theory:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi(t)\\right\\rangle = \\gamma_1(t) \\mathrm{e}^{-iE_1t/\\hbar} \\left|1\\right\\rangle + \\gamma_2(t) \\mathrm{e}^{-iE_2t/\\hbar} \\left|2\\right\\rangle\\\\
+\\sum_{n=3}^\\infty \\gamma_n \\mathrm{e}^{-iE_nt/\\hbar} \\left|n\\right\\rangle`})}),`
`,i.jsx(e.p,{children:"As initial condition we choose"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\gamma_i(0) = \\left\\{ \\begin{array}{ccc} 1 &\\text{for}&  i=1 \\\\ 0 &\\text{for}& i>1  \\end{array} \\right."})}),`
`,i.jsxs(e.p,{children:["We write ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_0 = (E_2-E_1)/\\hbar"}),` and get to first
order `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{D}}"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\gamma_2(t) = \\overbrace{\\frac{E_0}{2\\hbar} \\left\\langle 2|\\hat{\\vec{D}}\\cdot \\vec{\\epsilon}|1\\right\\rangle}^{\\text{Rabi frequency }\\Omega} \\underbrace{\\left(\\frac{\\mathrm{e}^{i(\\omega_0 + \\omega)t}-1}{\\omega_0 + \\omega} + \\frac{\\mathrm{e}^{i(\\omega_0 - \\omega)t}-1}{\\omega_0 - \\omega}\\right)}_{\\text{time evolution of the system}}"})}),`
`,i.jsx(e.p,{children:`The term before the round brackets is called dipole
matrix element:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\left\\langle 2|\\hat{\\vec{D}}\\cdot \\vec{\\epsilon}\\,|1\\right\\rangle =e \\int \\psi_2\\left(\\vec{r}\\right) \\cdot \\vec{r} \\cdot \\vec{\\epsilon} \\cdot \\psi_1\\left(\\vec{r}\\right) \\mathop{}\\!\\mathrm{d}\\vec{r}.`})}),`
`,i.jsx(me,{id:"fig-dipole-matrix-element",href:Tle,caption:"Dipole matrix element"}),`
`,i.jsx(e.h1,{children:"Selection rules"}),`
`,i.jsx(e.p,{children:`We can now look into the allowed transition in the atom as they are what
we will typically observe within experiments.`}),`
`,i.jsx(e.h2,{children:"Change of parity"}),`
`,i.jsx(e.p,{children:"The parity operator is defined as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{P}\\psi(\\vec{r}) = \\psi(-\\vec{r})"})}),`
`,i.jsx(e.p,{children:"For the eigenfunction we have:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{P} \\psi(\\vec{r}) = \\lambda \\psi(\\vec{r})\\\\
\\lambda = \\pm 1`})}),`
`,i.jsxs(e.p,{children:["The eigenvalues are called ",i.jsx(e.em,{children:"odd"})," and ",i.jsx(e.em,{children:"even"}),`. From the
definition of the dipole operator we can see that it is of odd parity.
What about the parity of the states that it is coupling ? If they have
both the same parity than the whole integral will disappear and no
dipole transition can appear.`]}),`
`,i.jsx(e.p,{children:`We can become more concrete for the given eigenfunctions as we have
within spherical coordinates:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"(r, \\theta, \\phi) \\rightarrow (r, \\pi -\\theta, \\phi+\\pi)"})}),`
`,i.jsx(e.p,{children:`For the orbitals of the hydrogen atom we then have
explicitly:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{P}\\psi_{nlm}(r, \\theta, \\phi) = R_{nl}(r)Y_{lm}(\\pi -\\theta, \\phi+\\pi)\\\\
= (-1)^l R_{nl}(r)Y_{lm}(, \\theta, \\phi)`})}),`
`,i.jsxs(e.p,{children:[`This gives us the first selection rule that the
`,i.jsx(e.strong,{children:"orbital angular momentum has to change for dipole transitions"}),`
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta  l = \\pm 1"}),"."]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"s"})," orbitals are only coupled to ",i.jsx(e.code,{className:"language-math math-inline",children:"p"}),` orbitals through dipole
transitions.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"p"})," orbitals are only coupled to ",i.jsx(e.code,{className:"language-math math-inline",children:"s"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"d"}),` orbitals through dipole
transitions.`]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"Coupling for linearly polarized light"}),`
`,i.jsxs(e.p,{children:[`Having established the need for parity change, we also need to
investigate the influence of the polarization of the light, which enters
the dipole operator through the vector `,i.jsx(e.code,{className:"language-math math-inline",children:"\\epsilon"}),`. In the simplest case
the light has linear polarization (`,i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"})," polarized) and we can write:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{E}(t) = \\vec{e}_zE_0 \\cos(\\omega t +\\varphi)"})}),`
`,i.jsx(e.p,{children:"This means that the dipole transition element is now given by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle 2\\right|\\vec{D}\\cdot\\vec{e}_z\\left|1\\right\\rangle = e \\int \\psi_2(\\vec{r}) z \\psi_1\\left(\\vec{r}\\right) \\mathop{}\\!\\mathrm{d}\\vec{r}"})}),`
`,i.jsxs(e.p,{children:[`We can now transform z into the spherical coordinates
`,i.jsx(e.code,{className:"language-math math-inline",children:"z= r \\cos(\\theta) = r\\sqrt{\\frac{4\\pi}{3}}Y_{10}(\\theta, \\phi)"}),`. We can
further separate out the angular part of the integral to obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle 2\\right|\\vec{D}\\cdot\\vec{e}_z\\left|1\\right\\rangle \\propto e \\int \\sin(\\theta) d\\theta d\\varphi Y_{l',m'}(\\theta, \\varphi) Y_{10}(\\theta, \\phi) Y_{l,m}(\\theta, \\varphi)"})}),`
`,i.jsxs(e.p,{children:["This element is only non-zero if ",i.jsx(e.code,{className:"language-math math-inline",children:"m = m'"})," (see ",i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:`appendix
C of Hertel 2015`})," for all the gorious details)."]}),`
`,i.jsx(me,{id:"fig-dipole-selection-rules",href:kle,caption:"Dipole selection rules for different polarizations of light"}),`
`,i.jsx(e.h2,{children:"Circularly polarized light"}),`
`,i.jsx(e.p,{children:`Light has not just linear polarization, but it might also have some
circular polarization. In this case we can write:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{E}(t) = \\frac{E_0}{\\sqrt{2}} \\left(\\cos(\\omega t +\\varphi)\\vec{e}_x + \\sin(\\omega t +\\varphi)\\vec{e}_y\\right)\\\\
\\vec{E}(t) = \\text{Re}\\left(\\vec{e}_+ E_0 e^{-i\\omega t +\\phi}\\right)\\\\
\\vec{e}_\\pm = \\frac{\\vec{e}_x\\pm i\\vec{e}_y}{\\sqrt{2}}`})}),`
`,i.jsxs(e.p,{children:["So light with polarization ",i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{\\epsilon} = \\vec{e}_+"}),`
is called right-hand circular (`,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma^+"}),`) and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{\\epsilon} = \\vec{e}_-"})," is called left-hand circular (",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma^-"}),`).
Let us now evaluate the transition elements here. The dipole operator
element boils now down to the evaluation of the integral:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle l',m',n'\\right|x+iy\\left|l,m,n\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`As previously we can express the coupling term in
spherical coordinates:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{x+iy}{\\sqrt{2}} = -r \\sqrt{\\frac{4\\pi}{3}}Y_{11}(\\theta, \\varphi)"})}),`
`,i.jsxs(e.p,{children:[`Evaluation of the integrals lead now to the rule the
projection of the quantum number has to change `,i.jsx(e.code,{className:"language-math math-inline",children:"m' = m+1"}),`. In a similiar
fashion we find for left-hand circular light the selection rule
`,i.jsx(e.code,{className:"language-math math-inline",children:"m' = m - 1"}),"."]}),`
`,i.jsx(e.p,{children:`In the next lecture, we will investigate the influence of
perturbative effects and see how the fine structure arises.`})]})}function Sle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(zj,{...t})}):zj(t)}const Wj=Object.freeze(Object.defineProperty({__proto__:null,default:Sle,frontmatter:Ele},Symbol.toStringTag,{value:"Module"})),Cle="/assets/static/lecture7_pic1.CZiAUyTW.png",Ale="/assets/static/lecture7_pic2.Gr-HSnUJ.png",Nle={author:["Fred Jendrzejewski","Selim Jochim"],order:7,title:"Lecture 7 - Beyond the 'boring' hydrogen atom"};function Uj(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will use the hydrogen atom to study static
perturbations in form of external magnetic fields and relativistic
effects, leading to the fine structure splitting.`}),`
`,i.jsx(e.p,{children:`We spend quite some time on the properties of the hydrogen atom in the
previous lectures [@Jendrzejewski; @atom]. However, we completely
neglected any effects of quantum-electrodynamics and relativistic
physics. In this lecture we will study, why this is a good approximation
for the hydrogen atom and then investigate in a perturbative fashion the
terms. Most importantly, we will introduce that coupling between the
orbital angular momentum and the spin of the electron, which leads to
the fine splitting.`}),`
`,i.jsx(e.h2,{children:"Perturbation theory"}),`
`,i.jsx(e.p,{children:`Up to now have studied the hydrogen atom to find its eigensystem and
then studied how it evolves under the presence of oscillating electric
fields. This allowed us to understand in more detail the idea of
eigenstates and then of time-dependent perturbation theory. However, one
of the most important concepts that can be introduced very nicely on the
hydrogen atom is stationnary perturbation theory in form of external
magnetic fields or relativistic corrections. We will remind you of
perturbation theory here and then apply it to some simple cases.`}),`
`,i.jsx(e.p,{children:"We can now simply write down the problem as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left(\\hat{H}_0+\\lambda \\hat{W}\\right)\\left|\\psi_m\\right\\rangle = E_m\\left|\\psi_m\\right\\rangle"})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," is a very small parameter and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"}),` is
describing the hydrogen atom system. We will note the eigenvalues and
eigenstates of this system as:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H}_0\\left|\\varphi_n\\right\\rangle = \\epsilon_n \\left|\\varphi_n\\right\\rangle`})}),`
`,i.jsxs(e.p,{children:[`While, we do not know the exact solution of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi_m\\right\\rangle"})," and the energy ",i.jsx(e.code,{className:"language-math math-inline",children:"E_m"}),`, we decide
to decompose them in the following expansion of the small parameter
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|\\psi_m\\right\\rangle = \\left|\\psi_m^{(0)}\\right\\rangle + \\lambda\\left|\\psi_m^{(1)}\\right\\rangle+\\lambda^2\\left|\\psi_m^{(2)}\\right\\rangle+O(\\lambda^3)\\\\
E_m = E_m^{(0)} +\\lambda E_m^{(1)} + \\lambda^2 E_m^{(2)}+O(\\lambda^3)\\,`})}),`
`,i.jsxs(e.p,{children:["To zeroth order in ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," we obtain:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_0\\left|\\psi_m^{(0)}\\right\\rangle = E_m^{(0)}\\left|\\psi_m^{(0)}\\right\\rangle"})}),`
`,i.jsx(e.p,{children:`So it is just the unperturbed system and we can
identify:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_m^{(0)}\\right\\rangle = \\left|\\varphi_m\\right\\rangle~~E_m^{(0)} = \\epsilon_m"})}),`
`,i.jsx(e.p,{children:"For the first order we have to solve"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
(\\hat{H}_0-E_m^{(0)}) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(0)}\\right\\rangle= 0\\\\
(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\varphi_m\\right\\rangle= 0`})}),`
`,i.jsxs(e.p,{children:[`We can multiply the whole equation by
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\varphi_m\\right|"}),` from the right. As
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\varphi_m\\right|\\hat{H}_0= \\epsilon_m\\left\\langle\\varphi_m\\right|"}),`,
the first term cancels out. Hence, we obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\boxed{E_m^{(1)} = \\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle}`})}),`
`,i.jsx(e.p,{children:`We now also need to obtain the correction to the
eigenstate. For that, we put the solution for the energy into the Ansatz to obain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(1)}\\right\\rangle + (\\hat{W}\\left|\\varphi_m\\right\\rangle-\\left|\\varphi_m\\right\\rangle\\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle)= 0"})}),`
`,i.jsxs(e.p,{children:[`We can now multiply the whole equation by
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\varphi_i\\right|"})," from the right and obtain:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"(\\epsilon_i-\\epsilon_m)\\left\\langle\\varphi_i\\right|\\left|\\psi_m^{(1)}\\right\\rangle+\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle = 0"})}),`
`,i.jsxs(e.p,{children:[`By rewriting the above equation, this directly gives us
the decompositon of the `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi_m^{(1)}\\right\\rangle"}),`
onto the original eigenstates and have:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\boxed{\\left|\\psi_m^{(1)}\\right\\rangle = \\sum_{i\\neq m} \\frac{\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle}{(\\epsilon_m-\\epsilon_i)}\\left|\\varphi_i\\right\\rangle}`})}),`
`,i.jsxs(e.p,{children:[`And we end the calculation with second order pertubation
in `,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`(\\hat{H}_0-E_m^{(0)}) \\left|\\psi_m^{(2)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(1)}\\right\\rangle-E_m^{(2)} \\left|\\psi_m^{(0)}\\right\\rangle= 0\\\\
(\\hat{H}_0-\\epsilon_m) \\left|\\psi_m^{(2)}\\right\\rangle + (\\hat{W}-E_m^{(1)})\\left|\\psi_m^{(1)}\\right\\rangle-E_m^{(2)} \\left|\\varphi_m\\right\\rangle= 0\\\\`})}),`
`,i.jsxs(e.p,{children:[`We can multiply once again whole equation by
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle\\varphi_m\\right|"}),` from the right, which
directly drops the first term. The term
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_m^{(1)}\\left\\langle\\varphi_m\\right|\\left|\\psi_m^{(1)}\\right\\rangle"}),`
drops out as the first order perturbation does not contain a projection
onto the initial state. So we can write:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_m^{(2)}= \\left\\langle\\varphi_m\\right|\\hat{W}\\left|\\psi_m^{(1)}\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"Plugging in our solution, we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\boxed{E_m^{(2)} = \\sum_{i\\neq m} \\frac{|\\left\\langle\\varphi_i\\right|\\hat{W}\\left|\\varphi_m\\right\\rangle|^2}{(\\epsilon_m-\\epsilon_i)}}"})}),`
`,i.jsx(e.h2,{children:"Static external magnetic fields"}),`
`,i.jsx(e.p,{children:`A first beautiful application of perturbation theory is the study of
static magnetic fields (see Ch 1.9 and Ch. 2.7.1 of [@Hertel_2015] for
more details). The motion of the electron around the nucleus implies a
magnetic current`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"I = \\frac{e}{t} = \\frac{ev}{2\\pi r}"})}),`
`,i.jsxs(e.p,{children:["and this implies a magnetic moment ",i.jsx(e.code,{className:"language-math math-inline",children:"M = I A"}),`, with the
enclosed surface `,i.jsx(e.code,{className:"language-math math-inline",children:"A=\\pi r^2"}),". It may be rewritten as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\vec{M}_L = -\\frac{e}{2m_e}\\vec{L} =-\\frac{\\mu_B}{\\hbar} \\vec{L} \\\\
\\mu_B = \\frac{\\hbar e}{2m_e}`})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu_B"})," is the ",i.jsx(e.strong,{children:"Bohr magneton"}),`. Its potential
energy in a magnetic field `,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{B} = B_0 \\vec{e}_z"})," is then:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`V_B = -\\vec{M}_L\\cdot \\vec{B}\\\\
= \\frac{\\mu_B}{\\hbar} L_z B_0`})}),`
`,i.jsx(e.p,{children:"Its contribution is directly evaluated from the expression on first oder pertubation theory to be:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_{Zeeman} = \\mu_B m B_0"})}),`
`,i.jsx(e.p,{children:`This is the Zeeman splitting of the different magnetic
substates. It is visualized below`}),`
`,i.jsx(me,{id:"fig-zeeman-effect-hydrogen",href:Cle,caption:"The Zeeman effect in the hydrogen atom"}),`
`,i.jsx(e.h2,{children:"Trapping with electric or magnetic fields"}),`
`,i.jsx(e.p,{children:`We have now investigated the structure of the hydrogen atom and seen how
its energy gets shifted in external magnetic fields. We can combine this
understanding to study conservative traps for atoms and ions. Neutral
atoms experience the external field:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_{mag}(x,y) = \\mu_B m B_0(x,y)"})}),`
`,i.jsx(e.p,{children:`For ions on the other hand we have fully charged
particles. So they simply experience the external electric field
directly:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_{el}(x,y) = -q E(x,y)"})}),`
`,i.jsx(e.p,{children:`Trapping atoms and ions has to be done under very good vacuum such that
they are well isolate from the enviromnent and high precision
experiments can be performed.`}),`
`,i.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\text{div} \\vec{E} = 0"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\text{div} \\vec{B} = 0"}),`. So, the
experimentalists have to play some tricks with oscillating fields. We
will not derive in detail how a resulting `,i.jsx(e.strong,{children:"Paul trap"}),` works, but the
`,i.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:"linked video"}),` gives a very nice
impression of the idea behind it. A sketch is presented in Fig.`]}),`
`,i.jsx(me,{id:"fig-paul-trap-schematic",href:Ale,caption:"Paul trap schematic and linear ion trap with calcium ions"}),`
`,i.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,i.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.531",children:"Wolfgang Paul"})," and",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.525",children:"Hans Dehmelt"}),`. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/revmodphys.62.541",children:"as Ramsey spectroscopy"}),"."]}),`
`,i.jsxs(e.p,{children:[`For atoms we can play similiar games with magnetic traps. Again we have
to solve the problem of the zero magnetic fields. Widely used
configurations are the Ioffe-Pritchard trap, where quadrupole fields are
superposed `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.51.1336",children:"with a bias field"}),", or ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.74.3352",children:"TOP-traps"}),"."]}),`
`,i.jsx(e.p,{children:`Ion traps are now the basis of ionic quantum computers and
magnetic traps paved the way for quantum simulators with cold atoms as will see later on.`}),`
`,i.jsx(e.h3,{children:"What we missed from the Dirac equation"}),`
`,i.jsx(e.p,{children:`Until now we have completely neglected relativistic effects, i.e. we
should have really solved the Dirac equation instead of the Schrödinger
equation. However, this is is major task, which we will not undertake
here. But what were the main approximations ?`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"We neglected the existance of the electron spin."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"We did not take into account the relativistic effects."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`So, how does relativity affect the hydrogen spectrum? In a first step,
we should actually introduce the magnetic moment of the spin:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{M}_S = -g_e \\mu_B \\frac{\\vec{S}}{\\hbar}"})}),`
`,i.jsxs(e.p,{children:["The spin of the electron is ",i.jsx(e.code,{className:"language-math math-inline",children:"1/2"}),`, making it a fermion
and the `,i.jsx(e.em,{children:"g factor of the electron"})," reads"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"g_e \\approx 2.0023"})}),`
`,i.jsxs(e.p,{children:[`Further discussions of the g-factor might be found in
`,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7",children:"Chapter 6.6 of Hertel"}),"."]}),`
`,i.jsx(e.h4,{children:"Amplitude of the relativistic effects"}),`
`,i.jsx(e.p,{children:`We saw in the previous lectures, that the
energy levels of hydrogenlike atoms are given by:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
E_n = \\frac{Z^2 R_{y,\\infty}}{n^2}\\\\
R_{y,\\infty} = \\frac{m_e e^4}{32 \\pi^2 \\epsilon_0^2 \\hbar^2}`})}),`
`,i.jsx(e.p,{children:`We can now use the fine-structure constant, which
measures the coupling strength of the electric charges to the
electromagnetic field:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\alpha = \\frac{e^2}{4\\pi\\epsilon_0\\hbar c}\\\\
= \\frac{1}{137.035999139(31)}`})}),`
`,i.jsx(e.p,{children:"We can now rewrite the energies of the hydrogen atom as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_n = \\frac{1}{2} \\underbrace{m_e c^2}_{\\text{rest mass energy}} Z^2 \\alpha^2 \\frac{1}{n^2}"})}),`
`,i.jsxs(e.p,{children:["Here, ",i.jsx(e.code,{className:"language-math math-inline",children:"m_e c^2\\approx 511\\textrm{k eV}"}),` is the rest
mass energy of the electron. `,i.jsx(e.code,{className:"language-math math-inline",children:"E_n \\approx 10\\text{eV}"}),` on the other hand
is the energy of the bound state and therefore in the order of the
kinetic energy of the electron. As long as it is much smaller than the
rest-mass of the electron, we can neglect the relativistic effects. A
few observations:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Relativistic effects are most pronounced for deeply bound states of
small quantum number `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Relativistic effects effects will become important once
`,i.jsx(e.code,{className:"language-math math-inline",children:"(Z\\alpha)\\approx 1"}),`, so they will play a major role in heavy
nuclei.`]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`For the hydrogen atom we can thus treat the relativistic effects in a
perturbative approach.But the most important consequence of the
relativistic terms is actually the existance of the electron spin.`}),`
`,i.jsx(e.h3,{children:"The relativistic mass and Darwin term"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:`"Relativistic mass": The relativistic relation between energy and
momentum reads:`}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    E_\\text{rel} = \\sqrt{(mc^2)^2+(\\vec{p}c)^2}\\\\
    \\approx mc^2 + \\frac{p^2}{2m}- \\frac{\\vec{p}^{\\,4}}{8m^3c^2} + \\cdots`})}),`
`,i.jsx(e.p,{children:`The first two terms of the expansion are the
nonrelativistic limit and the third term is the first correction.
Therefore, the corresponding Hamiltonian is:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{H}_\\text{rm} = - \\frac{\\hat{\\vec{p}}^{\\,4}}{8m^3c^2}."})}),`
`,i.jsxs(e.ol,{start:"2",children:[`
`,i.jsxs(e.li,{children:["Darwin term: If ",i.jsx(e.code,{className:"language-math math-inline",children:"r=0"}),", the potential ",i.jsx(e.code,{className:"language-math math-inline",children:"V(r)"})," diverges to ",i.jsx(e.code,{className:"language-math math-inline",children:"-\\infty"}),`.
We get:`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{H}_\\text{Darwin} = \\frac{\\pi \\hbar^2}{2m^2c^2}\\left( \\frac{Ze^2}{4\\pi\\epsilon_0}\\right) \\delta(\\hat{\\vec{r}})"})}),`
`,i.jsxs(e.p,{children:[`If we perform a first correction to the energy of the eigenstates
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left\\langle n,l,m\\right\\rangle"})," by calculating"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle n,l,m|\\hat{H'|n,l,m}\\right\\rangle,"})}),`
`,i.jsxs(e.p,{children:[`we find that it works perfectly for case (1) and (2)
which is due to degeneracy. `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\text{rm}"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\text{Darwin}"}),` commute with all observables forming the
complete set of commuting observables (CSCO) for `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_0,\\hat{\\vec{L}}^2, \\hat{L}_z,"})}),`
`,i.jsxs(e.p,{children:["with states described by ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n,l,m\\right\\rangle"}),"."]})]})}function Ile(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Uj,{...t})}):Uj(t)}const Vj=Object.freeze(Object.defineProperty({__proto__:null,default:Ile,frontmatter:Nle},Symbol.toStringTag,{value:"Module"})),Lle="/assets/static/lecture8_pic1.DVp3UuuI.png",Ole="/assets/static/lecture8_pic2.Biv4mitX.svg",Mle={author:["Fred Jendrzejewski","Selim Jochim"],order:8,title:"Lecture 8 - The Helium atom"};function Yj(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this lecture we will discuss some basic properties of the Helium
atom. We will introduce first some useful notations for the specific
Hamiltonian at hand. Then we will focus on the important consequences
played by the electron-electron interaction on the spin structure and
the level scheme of the system. Finally, we will introduce the
variational method for the estimation of the ground state energy.`}),`
`,i.jsx(e.p,{children:`In todays lecture, we will see how the electron spin couples to the
orbital angular momentum and how this creates spin-orbit coupling. We
will then start out with the discussion of the Helium atom.`}),`
`,i.jsx(e.h2,{children:"Spin-orbit coupling"}),`
`,i.jsxs(e.p,{children:[`The third term, which arises from the Dirac equation is the spin-orbit
coupling. We will give here a common hand-waving explanation in a
similiar spirit to the discussion of the magnetic moment `,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:`for given
angular momentum`}),`. Please, be aware that it misses a
factor of 2. The electron has a spin 1/2 and hence a magnetic moment
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{M}_S = -g_e \\mu_B \\frac{\\vec{S}}{\\hbar}"}),`. This magnetic moment
experiences a magnetic field, simply due to the motion of the electron
charge itself. Assuming a circular motion of the electron, we obtain the
magnetic field amplitude:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`B = \\frac{\\mu_0 i}{2r}\\\\
B = \\frac{\\mu_0 ev}{4\\pi r^2}\\\\
B = \\frac{\\mu_0 e}{4\\pi m_e r^3}L\\\\`})}),`
`,i.jsxs(e.p,{children:[`Through the coupling with the spin and introducing a
fudge factor of 2 `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),", we obtain the Hamiltonian:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\hat{H}_{LS} = \\frac{g_e}{4\\pi \\epsilon_0}\\frac{e^2}{2m_e^2c^2 r^3}  \\hat{\\vec{L}}\\cdot \\hat{\\vec{S}}`})}),`
`,i.jsxs(e.p,{children:["How does it act on a state ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|\\psi\\right\\rangle"}),`? For
the example`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle"})}),`
`,i.jsx(e.p,{children:"we get:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{L}_z \\cdot \\hat{S}_z \\left( \\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle \\right)
= \\hbar^2 m_l \\cdot m_s (\\left|m_l\\right\\rangle \\otimes \\left|m_s\\right\\rangle)`})}),`
`,i.jsx(e.p,{children:"The states"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|n,l,m_l\\right\\rangle \\otimes \\left|s,m_s\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`span the complete Hilbert space. Any state of the atom can be
represented by:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi\\right\\rangle = \\sum_{\\{n,l,m_l,m_s\\}} c_{n,l,m_l,m_s} \\left|n,l,m_l,m_s\\right\\rangle."})}),`
`,i.jsx(e.p,{children:`As usual we can massively simplify the problem by using
the appropiate conserved quantities.`}),`
`,i.jsx(e.h3,{children:"Conservation of total angular momentum"}),`
`,i.jsxs(e.p,{children:[`We can look into it a bit further into the details and see that the
Hamiltonian `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_\\textrm{LS}"})," does not commute with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{L}_z"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= [L_z, L_x S_x + L_y S_y + L_z S_z]\\\\
[L_z, \\vec{L}\\cdot \\vec{S}] = [L_z, L_x ]S_x + [L_z,  L_y  ]S_y\\\\
[L_z, \\vec{L}\\cdot \\vec{S}] = i\\hbar L_y S_x -i\\hbar L_x S_y\\neq 0`})}),`
`,i.jsxs(e.p,{children:["This suggests that ",i.jsx(e.code,{className:"language-math math-inline",children:"L_z"}),` is not a good quantum number
anymore. We have to include the spin degree of freedom into the
description. Let us repeat the same procedure for the spin projection:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`= [S_z, L_x S_x + L_y S_y + L_z S_z]\\\\
[S_z, \\vec{L}\\cdot \\vec{S}] = L_x [S_z,  S_x] + L_y [S_z,  S_y]\\\\
[S_z, \\vec{L}\\cdot \\vec{S}] = i\\hbar L_x S_y -i\\hbar L_y S_x\\neq 0`})}),`
`,i.jsxs(e.p,{children:[`This implies that the spin projection is not a conserved
quantity either. However, the sum of spin and orbital angular momentum
will commute `,i.jsx(e.code,{className:"language-math math-inline",children:"[L_z + S_z, \\vec{L}\\vec{S}] =0"}),` according to the above
calculations. Similiar calculations hold for the other components,
indicating that the `,i.jsx(e.em,{children:"total angular momentum"})," is conserved ",i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\vec{J} = \\vec{L} + \\vec{S}"})}),`
`,i.jsxs(e.p,{children:["We can now rewrite ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_{LS}"}),` in terms of the conserved quantities through the following following
little trick:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\vec{J}}^2 = \\left( \\hat{\\vec{L}} + \\hat{\\vec{S}} \\right) ^2 = \\hat{\\vec{L}}^2 + 2 \\hat{\\vec{L}} \\cdot \\hat{\\vec{S}} + \\hat{\\vec{S}}^2\\\\
\\hat{\\vec{L}} \\cdot \\hat{\\vec{S}} = \\frac{1}{2} \\left( \\hat{\\vec{J}}^2 - \\hat{\\vec{L}}^2 - \\hat{\\vec{S}}^2 \\right)`})}),`
`,i.jsxs(e.p,{children:["This directly implies that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{J}^2"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{L}^2"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{S}^2"}),` are
new conserved quantities of the system. If we call `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"}),` the
Hamiltonian of the hydrogen atom, we previously used the complete set of
commuting observables `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-3",id:"user-content-fnref-3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"3"})}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\{ \\hat{H}_0, \\hat{\\vec{L}}^2, \\hat{L}_z,\\hat{\\vec{S}}^2, \\hat{S}_z \\right\\}"})}),`
`,i.jsx(e.p,{children:"We now use the complete set of commuting observables:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\{ \\hat{H}_0 + \\hat{H}_{LS}, \\hat{\\vec{L}}^2,\\hat{\\vec{S}}^2, \\hat{\\vec{J}}^2, \\hat{J}_z \\right\\}."})}),`
`,i.jsxs(e.p,{children:[`The corresponding basis states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n,l,j,m_j\\right\\rangle"})," are given by:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|n,l,j,m_j\\right\\rangle = \\sum_{m_l,m_s} \\left|n, l, m_l, m_s\\right\\rangle \\underbrace{\\left\\langle n, l, m_l, m_s | n, l, j, m_j\\right\\rangle}_{\\text{Clebsch-Gordan coefficients}}"})}),`
`,i.jsxs(e.p,{children:["Here, the Clebsch-Gordan coefficients (cf. ",i.jsx(e.a,{href:"http://dx.doi.org/10.1088/1674-1137/38/9/090001",children:"Olive 2014 p. 557"})," or the ",i.jsx(e.a,{href:"http://pdg.lbl.gov/2002/clebrpp.pdf",children:"PDG"}),`)
describe the coupling of angular momentum states.`]}),`
`,i.jsx(e.p,{children:i.jsxs(e.strong,{children:["Example: ",i.jsx(e.code,{className:"language-math math-inline",children:"l=1"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"s=1/2"}),"."]})}),`
`,i.jsxs(e.p,{children:[`With the Clebsch-Gordan coefficients, the following example
states---given by `,i.jsx(e.code,{className:"language-math math-inline",children:"Jj"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"m_j"}),`---can be expressed by linear
combinations of states defined by `,i.jsx(e.code,{className:"language-math math-inline",children:"m_l"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"m_s"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left|j=\\frac{3}{2}, m_j = \\frac{3}{2}\\right\\rangle = \\left|m_l=1, m_s = +\\frac{1}{2}\\right\\rangle\\\\
\\left|j=\\frac{3}{2}, m_j = \\frac{1}{2}\\right\\rangle = \\sqrt{\\frac{1}{3}} \\left|m_l=1, m_s = -\\frac{1}{2}\\right\\rangle +\\sqrt{\\frac{2}{3}} \\left|m_l = 0, m_s = +\\frac{1}{2}\\right\\rangle`})}),`
`,i.jsx(e.h3,{children:"Summary of the relativistic shifts"}),`
`,i.jsx(e.p,{children:`We can now proceed to a summary of the relativistic effects in the
hydrogen atom as presented in Fig.`}),`
`,i.jsx(me,{id:"fig-hydrogen-fine-structure",href:Lle,caption:"Fine structure of the Hydrogen atom"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`The states should be characterized by angular momentum anymore, but
by the total angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"J"}),` and the orbital angular momentum.
We introduce the notation:`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    nl_{j}"})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["All shifts are on the order of ",i.jsx(e.code,{className:"language-math math-inline",children:"\\alpha^2"})," and hence pertubative."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Some levels remain degenerate in relativistic theory, most
importantly the `,i.jsx(e.code,{className:"language-math math-inline",children:"2s_{1/2}"})," and the ",i.jsx(e.code,{className:"language-math math-inline",children:"2p_{1/2}"})," state."]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"The Lamb shift"}),`
`,i.jsxs(e.p,{children:[`The previous discussions studied the effects of the Dirac equation onto
our understanding of the Hydrogen atom. Most importantly, we saw that we
can test those predictions quite well through the shifts in the level
scheme. It is possible to push this analysis even further. One
particularly important candidate here are the degenerate levels
`,i.jsx(e.code,{className:"language-math math-inline",children:"2s_{1/2}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"2p_{1/2}"}),`. Being able to see any splitting here, will be
proof physics beyond the Dirac equation. And it is a relative
measurement, for which it therefore not necessary to have insane
absolute precisions. It is exactly this measurement that `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrev.72.241",children:`Lamb and
Retherford undertook in 1947`}),`. They observed actually a
splitting of roughly `,i.jsx(e.code,{className:"language-math math-inline",children:"1"}),`GHz, which they drove through direct
rf-transitions. The observed shift was immediately `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrev.72.339",children:"explained by Bethe"}),` through the idea of QED a concept that we will come back
to later in this lecture in a much simpler context of cavity QED.`]}),`
`,i.jsxs(e.p,{children:[`We would simply like to add here that the long story of the hydrogen
atom and the Lamb shift is far from over as open questions remained
until September 2019. Basically, a group of people measured the radius
in some 'heavy' muonic hydrogen very `,i.jsx(e.a,{href:"http://dx.doi.org/10.1038/nature09250",children:"precisely in 2010"}),`.
They could only explain them by changing the size of the proton radius,
which was previously assumed to be well measured. It was only this year
the another team reperformed a similiar measurement on electronic
hydrogen (the normal one), `,i.jsx(e.a,{href:"http://dx.doi.org/10.1126/science.aau7807",children:"obtaining consistent results"}),`. A nice summary of the "proton radius puzzle" can be
found `,i.jsx(e.a,{href:"https://www.quantamagazine.org/physicists-finally-nail-the-protons-size-and-hope-dies-20190911/",children:"here"}),"."]}),`
`,i.jsx(e.h2,{children:"The helium problem"}),`
`,i.jsxs(e.p,{children:[`In this lecture we will discuss the Helium atom and what makes it so
interesting in the laboratory. We will most importantly see that you
cannot solve the problem exactly. This makes it a great historical
example where a simple system was used to test state-of-the-art
theories. An extensive discussion can be found in Chapter 7 of Bransden `,i.jsx(e.sup,{children:i.jsx(e.a,{href:"#user-content-fn-bransden",id:"user-content-fnref-bransden","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"4"})})," or ",i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-10298-1",children:"Chapter 6 of Demtröder 20210"}),". Even nowadays, the system continues to be a nice test-bed of many-body theories, see for example the paper by ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevx.7.041035",children:"Combescot in 2017"})," or by ",i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.123.203401",children:"Ott in 2019"}),".."]}),`
`,i.jsx(e.p,{children:`The Helium atom describes a two electron system as shown in the figure
below.`}),`
`,i.jsx(me,{id:"fig-helium-atom-schematic",href:Ole,caption:"The helium atom with two electrons coupled to the nucleus"}),`
`,i.jsxs(e.p,{children:[`In the reference frame of center-of-mass we obtain the following
Hamiltonian:
`,i.jsx(e.code,{className:"language-math math-inline",children:"H = -\\frac{\\hbar^2}{2\\mu}\\nabla_{r_1}^2 -\\frac{\\hbar^2}{2\\mu}\\nabla_{r_2}^2-\\frac{\\hbar^2}{M}\\nabla_{r_1}\\cdot\\nabla_{r_2}+\\frac{e^2}{4\\pi \\epsilon_0}\\left(-\\frac{Z}{r_1}-\\frac{Z}{r_2}+\\frac{1}{r_{12}}\\right)"})]}),`
`,i.jsxs(e.p,{children:[`The term in the middle is the mass polarization term. We further
introduced the reduced mass `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mu = \\frac{m_eM}{m_e + M}"}),` For the very
large mass differences `,i.jsx(e.code,{className:"language-math math-inline",children:"M= 7300 m_e \\gg m_e"}),`, we can do two
simplifications:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Omit the term on the mass polarization."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Set the reduced mass to the mass of the electron."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`So we obtain the simplified Hamiltonian
`,i.jsx(e.code,{className:"language-math math-inline",children:"H = -\\frac{\\hbar^2}{2m_e}\\nabla_{r_1}^2 -\\frac{\\hbar^2}{2m_e}\\nabla_{r_2}^2+\\frac{e^2}{4\\pi \\epsilon_0}\\left(-\\frac{Z}{r_1}-\\frac{Z}{r_2}+\\frac{1}{r_{12}}\\right)"})]}),`
`,i.jsx(e.h2,{children:"Natural units"}),`
`,i.jsxs(e.p,{children:["For simplicity it is actually nice to work in the so-called ",i.jsx(e.strong,{children:`natural
units`}),`, where we measure all energies and distance on typical scales.
We will start out by measuring all distances in units of `,i.jsx(e.code,{className:"language-math math-inline",children:"a_0"}),`, which is
defined as:
`,i.jsx(e.code,{className:"language-math math-inline",children:"a_0 = \\frac{4\\pi \\epsilon_0 \\hbar^2}{me^2} = 0.5\\text{angstrom}"}),` So
we can introduce the replacement: `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{r} = \\mathbf{\\tilde{r}}a_0"}),`
So the Hamiltonian reads:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H = -\\frac{\\hbar^2}{2m_ea_0^2}\\nabla_{\\tilde{r}_1}^2 -\\frac{\\hbar^2}{2m_ea_0^2}\\nabla_{\\tilde{r}_2}^2+\\frac{e^2}{4\\pi \\epsilon_0 a_0}\\left(-\\frac{Z}{\\tilde{r}_1}-\\frac{Z}{\\tilde{r}_2}+\\frac{1}{\\tilde{r}_{12}}\\right)\\\\
H = -\\frac{e^4 m}{2(4\\pi\\epsilon_0)^2 \\hbar^2}\\nabla_{\\tilde{r}_1}^2 -\\frac{e^4 m}{2(4\\pi\\epsilon_0)^2 \\hbar^2}\\nabla_{\\tilde{r}_2}^2+\\frac{e^4 m}{(4\\pi \\epsilon_0)^2\\hbar^2}\\left(-\\frac{Z}{\\tilde{r}_1}-\\frac{Z}{\\tilde{r}_2}+\\frac{1}{\\tilde{r}_{12}}\\right)`})}),`
`,i.jsxs(e.p,{children:[`And finally we can measure all energies in units of
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_0 = \\frac{e^4 m}{(4\\pi\\epsilon_0)^2\\hbar^2} = 1\\text{hartree} = 27.2\\text{eV}"}),`
So the Hamiltonian reads in these natural units:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\tilde{H} = -\\frac{1}{2}\\nabla_{\\tilde{r}_1}^2 -\\frac{1}{2}\\nabla_{\\tilde{r}_2}^2+\\left(-\\frac{Z}{\\tilde{r}_1}-\\frac{Z}{\\tilde{r}_2}+\\frac{1}{\\tilde{r}_{12}}\\right)"})}),`
`,i.jsx(e.p,{children:"Another, more common, way of introducing this is to define:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`m = \\hbar = e = 4\\pi \\epsilon_0 \\equiv 1\\\\
\\alpha = \\frac{e^2}{(4\\pi \\epsilon_0) \\hbar c}= \\frac{1}{137}\\\\
\\Rightarrow c = \\frac{1}{\\alpha}`})}),`
`,i.jsxs(e.p,{children:[`Within these units we have for the hydrogen atom:
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_n = \\frac{Z^2}{2}\\frac{1}{n^2}E_0"})]}),`
`,i.jsx(e.p,{children:i.jsx(e.strong,{children:`For the remainder of this lecture we will assume that we are working
in natural units and just omit the tildas.`})}),`
`,i.jsx(e.h2,{children:"Electron-electron interaction"}),`
`,i.jsxs(e.p,{children:[`Now we can decompose the Hamiltonian in the following fashion:
`,i.jsx(e.code,{className:"language-math math-inline",children:"H = H_1 + H_2 + H_{12}"}),` So without the coupling term between the
electrons we would just have once again two hydrogen atoms. The whole
crux is now that the term `,i.jsx(e.code,{className:"language-math math-inline",children:"H_{12}"}),` is actually coupling or
`,i.jsx(e.strong,{children:"entangling"})," the two electrons."]}),`
`,i.jsx(e.h2,{children:"Symmetries"}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"exchange"})," operator is defined as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{12}\\psi(r_1,r_2) = \\psi(r_2, r_1)"})}),`
`,i.jsxs(e.p,{children:[`We directly see for the Hamiltonian of Helium in the reduced units that the exchange operator commutes with
the Hamiltonian, `,i.jsx(e.code,{className:"language-math math-inline",children:"[H,P_{12}] = 0"}),`. This implies directly that the parity
is a conserved quantity of the system and that we have a set of
Eigenstates associated with the parity.`]}),`
`,i.jsx(e.p,{children:"We can now apply the operator twice:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{12}^2\\psi(r_1,r_2) = \\lambda^2 \\psi(r_1, r_2) = \\psi(r_1, r_2)"})}),`
`,i.jsxs(e.p,{children:[`So we can see that there are two sets of eigenvalues with
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda = \\pm 1"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_{12}\\psi_\\pm = \\pm \\psi_\\pm"})}),`
`,i.jsx(e.p,{children:"We will call:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_+"})," are para-states"]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_-"})," are ortho-states"]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`This symmetry is a really strong one and it was only recently that
direct transitions between `,i.jsx(e.a,{href:"http://dx.doi.org/10.1103/physrevlett.119.173401",children:"ortho and para-states were observed"}),`. Interestingly, we did not need to look into the spin
and the Pauli principle for this discussion at all. This will happen in
the next step.`]}),`
`,i.jsx(e.h2,{children:"Spin and Pauli principle"}),`
`,i.jsx(e.p,{children:`We have seen that the Hamiltonian does not contain the spin degree of
freedom. So we can decompose the total wave function as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\overline{\\psi} = \\psi(\\mathbf{r}_1, \\mathbf{r}_2) \\cdot \\chi(1,2)"})}),`
`,i.jsx(e.h3,{children:"Spin degree of freedom"}),`
`,i.jsxs(e.p,{children:["Given that the electron is ",i.jsx(e.code,{className:"language-math math-inline",children:"s=\\frac{1}{2}"}),`, we can decompose each
wavefunction as:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\chi = \\alpha |\\uparrow\\rangle + \\beta |\\downarrow\\rangle"}),` So if the
two spins were `,i.jsx(e.em,{children:"not"}),` correlated, we could just write the spin
wavefunction as: `,i.jsx(e.code,{className:"language-math math-inline",children:"\\chi(1,2) = \\chi_\\mathrm{1}\\cdot\\chi_\\mathrm{2}"}),`
However, the electron-electron interaction entangles the atoms. An
example would be the singlet state:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\chi(1,2) = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow \\downarrow\\rangle - |\\downarrow\\uparrow \\rangle\\right)"})]}),`
`,i.jsxs(e.p,{children:[`To construct the full wave function we need to take into account the
`,i.jsx(e.em,{children:"Pauli"})," principle, which telles us for Fermions that the ",i.jsx(e.em,{children:"full"}),`
wavefunction should anti-sysmmetrc under exchange of particles:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\overline{\\psi}(q_1, q_2, \\cdots, q_i,\\cdots,  q_j, \\cdots) =
-\\overline{\\psi}(q_1, q_2, \\cdots, q_j,\\cdots,  q_i, \\cdots)`})}),`
`,i.jsx(e.p,{children:`This tells us that each quantum state can be only occupied by a single
electron at maximum.`}),`
`,i.jsx(e.p,{children:`Now we can come back to the full wavefunction using the results of the
previous section. We have:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\overline{\\psi}(1,2) = \\psi_{\\pm}(r_1,r_2)\\chi_\\mp(1,2)"})}),`
`,i.jsxs(e.p,{children:[`with
`,i.jsx(e.code,{className:"language-math math-inline",children:"P_{12}\\chi_\\pm = \\pm \\chi_\\pm"}),`. Now can once again look for good
solutions to this problem. It is basically the total spin
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{S} = \\mathbf{S}_1 + \\mathbf{S}_2"}),", or better ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{S}^2"}),`.
This commutes with both the Hamiltonian and the parity operator, so it
is a conserved quantity. Sorting out the solutions we have`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`
\\chi*- = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow\\downarrow\\rangle - |\\downarrow\\uparrow\\rangle\\right)\\\\
\\chi*{+,1} = |\\uparrow\\uparrow\\rangle \\\\
\\chi*{+,1} = \\frac{1}{\\sqrt{2}}\\left(|\\uparrow\\downarrow\\rangle + |\\downarrow\\uparrow\\rangle\\right) \\\\
\\chi*{+,-1} = |\\downarrow\\downarrow\\rangle \\\\

`})}),`
`,i.jsxs(e.p,{children:["So ",i.jsx(e.code,{className:"language-math math-inline",children:"\\chi_+"})," is associated with spin 1 and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\chi_-"}),` is
associated with spin 0.`]}),`
`,i.jsxs(e.section,{"data-footnotes":!0,className:"footnotes",children:[i.jsx(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{id:"user-content-fn-1",children:[`
`,i.jsxs(e.p,{children:["It's proper derivation is left to quantum field theory lectures ",i.jsx(e.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-2",children:[`
`,i.jsxs(e.p,{children:["It should be as there is no external torque acting on the atom ",i.jsx(e.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-3",children:[`
`,i.jsxs(e.p,{children:["see lecture 2 for a few words on the definition of such a set ",i.jsx(e.a,{href:"#user-content-fnref-3","data-footnote-backref":"","aria-label":"Back to reference 3",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`,i.jsxs(e.li,{id:"user-content-fn-bransden",children:[`
`,i.jsxs(e.p,{children:["Brian Harold Bransden, Charles Jean Joachain. Physics of atoms and molecules. Pearson Education India, 2003. ",i.jsx(e.a,{href:"#user-content-fnref-bransden","data-footnote-backref":"","aria-label":"Back to reference 4",className:"data-footnote-backref",children:"↩"})]}),`
`]}),`
`]}),`
`]})]})}function Rle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Yj,{...t})}):Yj(t)}const Gj=Object.freeze(Object.defineProperty({__proto__:null,default:Rle,frontmatter:Mle},Symbol.toStringTag,{value:"Module"})),Ple="/assets/static/lecture9_pic1.CU3VnCAx.png",Dle="/assets/static/lecture9_pic2.BRgVvEDX.png",Ble="/assets/static/lecture9_pic3.CvEL7OqJ.png",Fle="/assets/static/lecture9_pic4.js83fllq.png",Hle={author:["Fred Jendrzejewski","Selim Jochim"],order:9,title:"Lecture 9 - More on the Helium atom"};function Xj(t){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`We will finish our discussion of the Helium atom. Most importantly, we
will dive into the strong separation between singlet and triplet states.`}),`
`,i.jsx(e.p,{children:`In the last lecture, we saw some important properties
of the He atom:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`Total angular momentum, spin and the electronic quantum number are
labelling the states.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The exchange symmetry introduces the important distinction between
ortho and para-states.`}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Today, we will see how this exchange symmetry enters the level scheme
and how it is linked to the spin.`}),`
`,i.jsx(e.h1,{children:"Level scheme"}),`
`,i.jsxs(e.p,{children:[`We can now continue through the level scheme of Helium and try to
understand our observations. No radiative transitions between `,i.jsx(e.code,{className:"language-math math-inline",children:"S=0"}),` and
`,i.jsx(e.code,{className:"language-math math-inline",children:"S=1"}),`, which means that we will basically have two independent schemes.
They are characterized by:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["electronic excitations, which are the main quantum numbers ",i.jsx(e.code,{className:"language-math math-inline",children:"N"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["orbital angular momentum, with quantum number ",i.jsx(e.code,{className:"language-math math-inline",children:"L"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["total spin with quantum number ",i.jsx(e.code,{className:"language-math math-inline",children:"S"})]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["total angular momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"J"}),`, but the spin-orbit coupling in Helium is
actually extremly small.`]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["We will then use the term notation: ",i.jsx(e.code,{className:"language-math math-inline",children:"N ^{2S+1}L_J"}),` the superscript is
giving the multiplicity or the number of different `,i.jsx(e.code,{className:"language-math math-inline",children:"J"})," levels."]}),`
`,i.jsx(e.p,{children:`Having the level structure, we are now able to calculate the energies of
the different states. We will start out with the ground state and then
work our way through the excited states.`}),`
`,i.jsx(e.h1,{children:"Independent particle model"}),`
`,i.jsxs(e.p,{children:[`We will now go back to the influence of the interaction on the
eigenenergies of the system. Going back to the Helium atoms, we will
treat the single particle Hamiltonians as unperturbed system and
`,i.jsx(e.code,{className:"language-math math-inline",children:"H_{12}"})," as the perturbation:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`H_0 = -\\frac{1}{2}\\nabla_{r_1}^2 -\\frac{Z}{r_1} -\\frac{1}{2}\\nabla_{r_2}^2 -\\frac{Z}{r_2}\\\\
H_1 =\\frac{1}{r_{12}}`})}),`
`,i.jsxs(e.p,{children:["We now know the solutions to ",i.jsx(e.code,{className:"language-math math-inline",children:"H_0"}),`, because the
factorize:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\left(\\hat{H}_1 + \\hat{H}_2\\right)|\\psi_1\\rangle\\otimes|\\psi_2\\rangle =
\\left(E_1 + E_2\\right)|\\psi_1\\rangle\\otimes|\\psi_2\\rangle`})}),`
`,i.jsx(e.h2,{children:"Groundstate energy - perturbative approach"}),`
`,i.jsxs(e.p,{children:[`At this stage we can try to calculate the groundstate energy. We can
derive that the unperturbed energy reads: `,i.jsx(e.code,{className:"language-math math-inline",children:"E_0^{(0)}= Z^2\\text{hartree}"}),`
The electron interaction leads within first order perturbation theory to
an energy shift of:
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_0^{(1)}= \\langle\\psi_0|\\frac{1}{r_{12}}|\\psi_0\\rangle = \\frac{5}{8}Z"}),`
We can see that the first order energy shift is actually not that small,
so we might start to question perturbation theory.`]}),`
`,i.jsx(e.h2,{children:"Groundstate energy - variational approach"}),`
`,i.jsxs(e.p,{children:[`In the variational approach, we will try to find the minimal energy of
the ground state. Namely we will minimize:
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_{var} = \\frac{\\langle\\psi|\\hat{H}|\\psi\\rangle}{\\langle\\psi|\\psi\\rangle}"}),`
We can actually proof that this works nicely within a few lines. For
that we will expand our trial function `,i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi\\rangle"}),` into the (unknown)
eigenstates of `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}"}),": ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi\\rangle = \\sum_n c_n |\\psi_n\\rangle"}),`
For the energies this implies:
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}|\\psi_n\\rangle = E_n|\\psi_n\\rangle"})," So we end up with:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\langle \\psi|H|\\psi\\rangle - E_0 = \\sum_n E_n c_n^*c_n - E_0 \\sum_n c_n^*c_n\\\\
= \\sum_n (E_n-E_0)|c_n|^2 \\geq 0`})}),`
`,i.jsx(e.p,{children:`So the variational principle always gives an upper bound
on the ground state energy. The question is how good is this bound in
each individual case.`}),`
`,i.jsxs(e.p,{children:[`To apply the variational approach, we will introduce a variational
parameter. This parameter is typically guessed from physical intuition.
Here it will be the charge, which will be replaced by an `,i.jsx(e.em,{children:`screened
charge`})," ",i.jsx(e.code,{className:"language-math math-inline",children:"Z_{eff}"}),"."]}),`
`,i.jsx(e.p,{children:`As variational wavefunction, we will employ the groundstate of the
hydrogen atom, which reads:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi_{var}(r_1, r_2) = e^{-Z_{eff}(r_1+r_2)}"})}),`
`,i.jsxs(e.p,{children:[`We find then that the total energy is:
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_{var}^0 = Z_{eff}^2 -2ZZ_{eff}+\\frac{5}{8}Z_{eff}"}),` It becomes
minimal at`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"Z_{eff} = Z- \\frac{5}{16}"})}),`
`,i.jsx(e.p,{children:`So at this stage, we might compare the different levels
of approximation to the experimental result:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The experimental observation is ",i.jsx(e.code,{className:"language-math math-inline",children:"E_{exp}^0=-2.90372"})," hartree"]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The independent particle model predicts ",i.jsx(e.code,{className:"language-math math-inline",children:"E^0 = -4"})," hartree."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["First order pertubation theory predicts ",i.jsx(e.code,{className:"language-math math-inline",children:"E^0 = -2,709"})," hartree."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The variational principle predicts ",i.jsx(e.code,{className:"language-math math-inline",children:"E^0 = -2.84"})," hartree."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["The best theories achieve an accuracy of ",i.jsx(e.code,{className:"language-math math-inline",children:"10^{-7}"}),", see ",i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_7",children:`Hertel 2015,
Chapter 7.2.5`}),"."]}),`
`,i.jsx(e.h1,{children:"Exchange Interaction"}),`
`,i.jsxs(e.p,{children:["Up to now we focused on the ground state properties of the ",i.jsx(e.code,{className:"language-math math-inline",children:`1^
1S`}),` state. In the next step we will try to understand the influence of
the interaction term on the excited states (c.f. `,i.jsx(e.a,{href:"http://dx.doi.org/10.1007/978-3-642-54322-7_7",children:`Hertel 2015,
Chapter 7`}),"). To attack this problem we will approach it pertubatively."]}),`
`,i.jsxs(e.p,{children:[`We saw that we could factorize the full wavefunction into external and
internal degrees of freedom. Further, we have the singlet `,i.jsx(e.code,{className:"language-math math-inline",children:"\\chi_S"}),`
(anti-symmetric) and triplet states `,i.jsx(e.code,{className:"language-math math-inline",children:"\\chi_T"}),` (symmetric) for the spin.
This can now be combined too:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\overline{\\psi}_S(1,2) = \\psi_{+}(r_1, r_2)\\chi_S(1,2)\\\\
\\overline{\\psi}_T(1,2) = \\psi_{-}(r_1, r_2)\\chi_T(1,2)\\\\`})}),`
`,i.jsxs(e.p,{children:["In a next step, we can construct ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi_{\\pm}"}),` from the eigenstates of
the unperturbed Hamiltonian. We define the states
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|q_1\\right\\rangle \\equiv \\left|n_1,l_1,m_1\\right\\rangle"}),`
and
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|q_2\\right\\rangle \\equiv \\left|n_2,l_2,m_2\\right\\rangle"}),`.
The properly symmetrized states are:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi_\\pm\\right\\rangle = \\frac{1}{\\sqrt{2}}\\left( \\left|q_1\\right\\rangle_1 \\otimes \\left|q_2\\right\\rangle_2 \\pm \\left|q_2\\right\\rangle_1 \\otimes \\left|q_1\\right\\rangle_2 \\right)"})}),`
`,i.jsx(e.p,{children:`Now we can perform an estimate of the energy shift on
these states.`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\Delta E_{S,T} = \\left\\langle\\overline{\\psi_{S,T} }\\right|\\frac{1}{\\hat{r}_{12}} \\left|\\overline{\\psi_{S,T}}\\right\\rangle\\\\
= \\left\\langle\\psi_{+,- }\\right|\\frac{1}{\\hat{r}_{12}} \\left|\\psi_{+,- }\\right\\rangle`})}),`
`,i.jsx(e.p,{children:"We then get"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\Delta E_{S,T} = \\frac{1}{2} \\left(\\left\\langle q_1 q_2 \\right| \\pm \\left\\langle q_2 q_1\\right|\\right) \\left| \\frac{1}{\\hat{r}_{12}} \\right| \\left( \\left|q_1 q_2\\right\\rangle \\pm \\left|q_2 q_1\\right\\rangle \\right)\\\\
= \\left\\langle q_1 q_2\\right| \\frac{1}{\\hat{r}_{12}}\\left|q_1 q_2\\right\\rangle \\pm \\left\\langle q_1 q_2\\right| \\frac{1}{\\hat{r}_{12}} \\left|q_2 q_1\\right\\rangle`})}),`
`,i.jsx(e.p,{children:"So we summarize:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\Delta E_S = J_{nl} + K_{nl}\\\\
\\Delta E_T = J_{nl} - K_{nl}`})}),`
`,i.jsxs(e.p,{children:["The first term is called ",i.jsx(e.em,{children:"direct"}),` (Coulomb) term and the second term is
known as `,i.jsx(e.em,{children:"exchange"})," term. If we integrate the direct term, we get:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`J_{nl} = \\int \\int \\psi_{q_1}^*\\left(\\vec{r}_1\\right) \\psi_{q_2}^* \\left(\\vec{r}_2\\right) \\frac{1}{r_{12}} \\psi_{q_1} \\left(\\vec{r}_1\\right) \\psi_{q_2} \\left(\\vec{r}_2\\right) \\mathop{}\\!\\mathrm{d}\\vec{r}_1 \\mathop{}\\!\\mathrm{d}\\vec{r}_2 \\\\
= \\int \\int \\left| \\psi_{q_1} \\left(\\vec{r}_1\\right) \\right|^2 \\left| \\psi_{q_2}\\left(\\vec{r}_2\\right) \\right|^2 \\frac{1}{r_{12}} \\mathop{}\\!\\mathrm{d}\\vec{r}_1 \\mathop{}\\!\\mathrm{d}\\vec{r}_2.`})}),`
`,i.jsx(e.p,{children:"This is Coulomb repulsion."}),`
`,i.jsx(e.h2,{children:"Exchange term"}),`
`,i.jsx(e.p,{children:"The integration of the exchange term yields:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"K = \\left\\langle q_1 q_2\\right| \\frac{1}{r_{12}} \\left|q_2 q_1\\right\\rangle = \\int \\psi_{q_1}^* \\left(\\vec{r}_1\\right) \\psi_{q_2}^* \\left( \\vec{r}_2 \\right) \\frac{1}{r_{12}} \\psi_{q_2}\\left(\\vec{r}_1\\right) \\psi_{q_1} \\left( \\vec{r}_2 \\right) \\mathop{}\\!\\mathrm{d}\\vec{r}_1 \\mathop{}\\!\\mathrm{d}\\vec{r}_2"})}),`
`,i.jsx(e.p,{children:`To understand it a bit better, we can rewrite it in a
more transparent way in terms of the spin operator, which measures the
difference between the singlet and the triplet state. Especially suited
is:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 = \\frac{1}{2} \\left(\\hat{\\vec{S}}^2 - \\hat{\\vec{S}}_1^2 - \\hat{\\vec{S}}_2^2 \\right)\\\\
\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 \\chi_T = \\frac{1}{4} \\chi_T\\\\
\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2 \\chi_S = -\\frac{3}{4} \\chi_S`})}),`
`,i.jsx(e.p,{children:`This allows us to rewrite the splitting in terms of an
effective Hamiltonian`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_\\text{eff} = J_{nl} + \\frac{1}{2}\\left(1+ 4\\hat{\\vec{S}}_1 \\cdot \\hat{\\vec{S}}_2\\right) K_{nl}"})}),`
`,i.jsx(e.h1,{children:"Obtained energy shifts."}),`
`,i.jsx(e.p,{children:"As an example, we have a look at the energy shifts (see figure below) for two electrons in the states defined by:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`q_1: n_1=1,l_1 = 0\\\\
q_2:_2=2,l_2= 0,1`})}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"2^3S"})," level for example corresponds to the state"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{1}{\\sqrt{2}} \\left( \\left|1s2s\\right\\rangle - \\left|2s1s\\right\\rangle \\right) \\otimes \\left|\\uparrow \\uparrow\\right\\rangle"})}),`
`,i.jsx(me,{id:"fig-helium-energy-splitting",href:Ple,caption:"Helium atom singlet-triplet splitting"}),`
`,i.jsxs(e.p,{children:[`This splitting is in the order of 0.25eV and hence much larger than the
typical spin-orbit coupling. This explains, why the coupling to the
total angular momentum `,i.jsx(e.code,{className:"language-math math-inline",children:"J"})," remains largely ignored for helium."]}),`
`,i.jsx(e.h1,{children:"Summary: Structure of the He Atom"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"In the independent particle model, a state is determined by:"}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`    \\left|n_1 l_1 m_1\\right\\rangle \\otimes \\left|n_2 l_2 m_2 \\right\\rangle



`})}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Only one electron can be electronically excited to a stable state.
An excellent discussion of the auto-ionization can be found in `,i.jsx(e.a,{href:"http://dx.doi.org/10.1017/cbo9780511778261",children:`Sec.
1.3 of Grynberg 2009`}),". Thus, ",i.jsx(e.code,{className:"language-math math-inline",children:"N"})," is the quantum number of the electronic excitation."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`Ignoring the spin degree of freedom, the eigenstates have a discrete
symmetry with respect to particle exchange. The `,i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{He}"}),`
eigenstates are therefore either in a `,i.jsx(e.em,{children:"triplet"})," or in a ",i.jsx(e.em,{children:"singlet"}),`
state. Here, we are talking about the symmetry with respect to the
exchange of two particles. No inversion of space is done here! Why
can we not assume a finite mass of the nucleui in order to describe
two electrons by hydrogenic wave functions? The nucleus' motion
would introduce an additional coupling term between the electrons`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The quantum number ",i.jsx(e.code,{className:"language-math math-inline",children:"L"}),` stands for the total orbital angular
momentum.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`There is another conserved quantity we have not discussed yet: The
total angular momentum`}),`
`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{\\vec{J}} = \\hat{\\vec{L}} + \\hat{\\vec{S}}."})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."})," For ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathrm{^4He}"}),", there is no nuclear spin, meaning that there is no hyperfine structure."]}),`
`,i.jsx(e.p,{children:"Let us now have a look at the level scheme of the helium atom as depicted below."}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."})," The general notation used in the figure below is"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"N^{2S+1}L_J,"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"2S+1"})," denotes the multiplicity of the spin."]}),`
`,i.jsx(me,{id:"fig-helium-level-scheme",href:Dle,caption:"Level scheme of singlet and triplet states of the helium atom"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The fact that we can write the state down with a well-defined ",i.jsx(e.code,{className:"language-math math-inline",children:"S"}),`
and `,i.jsx(e.code,{className:"language-math math-inline",children:"L"})," is called ",i.jsx(e.code,{className:"language-math math-inline",children:"LS"})," or Russell-Saunders coupling. All ",i.jsx(e.code,{className:"language-math math-inline",children:"s_i"}),`
couple to `,i.jsx(e.code,{className:"language-math math-inline",children:"S = \\sum_i s_i"})," and all ",i.jsx(e.code,{className:"language-math math-inline",children:"l_j"})," couple to ",i.jsx(e.code,{className:"language-math math-inline",children:"L=\\sum_j l_j"}),`.
There is no coupling between the spin and the spatial degree of
freedom!`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`We have introduced an effective spin interaction, but we have
ignored the "real" interactions between the spins! What does it
mean? How should we introduce it if we wanted to? How can we find
out whether what we did is justifiable?`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The dipole interaction between two spins is"}),`
`]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\sim\\frac{\\mu_0(g \\mu_B/2)^2}{4\\pi \\hbar d^3} = \\frac{\\alpha^2}{4} \\;(\\text{a.u.})"})}),`
`,i.jsxs(e.p,{children:["where ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu_0 = 4\\pi \\alpha^2"}),", ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu_B=1/2"}),`,
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar=1"}),", and ",i.jsx(e.code,{className:"language-math math-inline",children:"d\\approx~a_0~=~1"}),`. Compared to the energy difference
between `,i.jsx(e.code,{className:"language-math math-inline",children:"2^1S"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"2^3S"}),", which is ",i.jsx(e.code,{className:"language-math math-inline",children:">\\alpha^2"}),` and on the order
of eV, it is a very small effect.`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:`Also, we have ignored the spin-orbit interaction of each electron
between its own spin and its orbital angular momentum. From the
hydrogen atom we know that the energy for the spin-orbit interaction`}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    E_\\textrm{ls} \\propto (Z\\alpha)^2"})}),`
`,i.jsx(e.p,{children:"is very strongly suppressed compared to the exchange interaction and the Coulomb repulsion."}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"Note."})," This will be different for heavy atoms, where ",i.jsx(e.code,{className:"language-math math-inline",children:"Z"})," is large."]}),`
`,i.jsx(e.h1,{children:"Dipole Selection Rules in Helium"}),`
`,i.jsx(me,{id:"fig-helium-emission-lines",href:Ble,caption:"Helium emission lines in gas discharge"}),`
`,i.jsx(me,{id:"fig-helium-transitions",href:Fle,caption:"Possible transitions within the singlet and triplet system of helium"}),`
`,i.jsxs(e.p,{children:[`The rules for transitions to occur are determined by the dipole matrix
element containing the initial state `,i.jsx(e.code,{className:"language-math math-inline",children:"i"})," and the final state ",i.jsx(e.code,{className:"language-math math-inline",children:"f"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle i|\\hat{\\vec{r}|f}\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:["Due to the ",i.jsx(e.code,{className:"language-math math-inline",children:"LS"})," coupling scheme, we get:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left|\\psi(\\vec{r_1, \\vec{r}_2)}\\right\\rangle \\otimes \\left|\\chi (1,2)\\right\\rangle."})}),`
`,i.jsxs(e.p,{children:[`There is no entanglement between the degrees of freedom
and no mixed symmetry between spin and spatial degree of freedom! If we
plug this into the matrix element and multiply it out, we get, because the
operator `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\vec{r}}"})," does not act on the spin degree of freedom:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\left\\langle i|\\hat{\\vec{r}\\,|f}\\right\\rangle = \\left\\langle\\chi(1,2) | \\chi'(1,2)\\right\\rangle \\cdot \\left\\langle\\psi(\\vec{r_1, \\vec{r}_2)|\\hat{\\vec{r}} \\,| \\psi'(\\vec{r}_1, \\vec{r}_2)}\\right\\rangle"})}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The first factor has to be zero if the total spin is not the same.
Then the relative alignment is not the same. Thus, there are no
dipole transitions between singlet and triplet atoms!`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`From the second factor we infer that transitions can only occur
between states of opposite parity, e.g., `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta l = \\pm 1"}),`,
together with angular momentum conservation.`]}),`
`]}),`
`]})]})}function qle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Xj,{...t})}):Xj(t)}const Jj=Object.freeze(Object.defineProperty({__proto__:null,default:qle,frontmatter:Hle},Symbol.toStringTag,{value:"Module"})),$le="/assets/static/bell_inequalities_7_1.CJm9t2Jx.png",zle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPEAAACuCAYAAADnE+srAAAAOXRFWHRTb2Z0d2FyZQBNYXRwbG90bGliIHZlcnNpb24zLjYuMiwgaHR0cHM6Ly9tYXRwbG90bGliLm9yZy8o6BhiAAAACXBIWXMAAA9hAAAPYQGoP6dpAAANdElEQVR4nO3df0yUeWLH8fcMroICyoDpuIIiCpbfbGTZxXqmGLxbolg3rak9626ybvaPxmhSz9k/mtQ1aWrZmiY1Jlf9o9mkf1DatZu60Ow1V67RZV2KR7nzhF2UE48BxtsRlB+COjL9Y6ory6AMzq/vw+eVGMPM8zzfr5E3zzPP88xg8/v9fkTEWPZYT0BEXowiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMZwiFjGcIhYxnCIWMdyiWE9AZvL74cGjWM8iNIsTwGaL9SwWJkUchx48gvcbYj2L0NT9MSzRd1NM6HBaxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCWj9jr9eJyudiwYQOJiYlkZWVx+PBhxsfHOXDgADabjdOnT8d6mhJhvkfQ81v4ZR90DcDweKxnFD6WfvNYR0cHNTU1eDweli1bRkFBAQMDA5w6dYqenh6GhoYAKCsri+1EI8Td+d+c++sqtvzJ37Jpx4+CLvP3f2oju2wHf/CjxijPLjruTkBLN1y6DqOT3z5uAwpWw/c2wu+uitn0wsKyEXu9Xmpra/F4PBw5coRjx46RkpICwIcffsj777/PokWLsNlslJSUxHi2EgnuITj7MxiZnPmcH7jaH/izLR9qXzH3Qw0sezh96NAh3G43Bw8e5OTJk08CBnC5XJSWluLz+cjOziY1NTWGM5VI+GYUftwcPODvau6Cz65Efk6RYsmIu7q6aGhoICMjgxMnTgRdZtOmTQCUlpZOe/zGjRvs2rWLlJQU0tLSeOutt7h9+3bE5yzh1dgB4/fnvvx/XoHbYxGbTkRZ8nC6vr6eqakp9u3bR3JyctBlkpKSgOkRj46OUlVVhcPhoL6+nomJCVwuFzt37qSlpQW73cyfeb4H95gY9cZ6GlFz9x5c6QttHT/wxbXAYbVpLBlxc3MzAFVVVbMu43a7gekRnz17lv7+fi5cuMCaNWsAyMzMZPPmzZw/f57du3dHbtIR9OW5Y3x57lispxE1P++FKX/o67X9WhHHjZs3bwKwdu3aoM/7fD5aWlqA6RE3NjayZcuWJwEDVFZWkpOTw6effjrviMvLy/F4PHNePuGlJN78q2vzGiuYoqr3yH1tT9DnPvmb7WEZIy83l0cPJ8KyrRdVWnuc3C0HQl5vZBKy1mTjn/JFYFbP5nQ6uXz58rzWtWTE4+OBi4ATE8G/qRoaGvB6vaSkpLBu3bonj3d2drJnz8xv9sLCQjo7O+c9H4/HQ39//5yXX7Rk6bzHCmaFM5c1RdVh3eZ3DQwO4Lt/L6JjzNX6sdF5r9vf78Y/ZdbnBVsyYqfTyfDwMO3t7VRWVk57bnBwkKNHjwJQUlKC7anrCsPDw6xYsWLG9hwOB19//fULzScUCS8lzXusWHl51ctxsye2+0bmtd7EiIeXV4X2fxUuoX6PPM2SEVdXV9PV1UVdXR3bt28nLy8PgLa2Nvbv34/XGzjJE62bPEI9TLrvM+9zp7uvXYubz52+OwHHPwn9dfGuSidn/v9ciUnMPN36HC6Xi/T0dPr6+igsLKS4uJjc3FwqKirIyclh27ZtwMzLS2lpady5c2fG9oaGhnA4HNGYuoTB8iQoyQptHZsNKjdEZj6RZsmIMzMzuXjxIjt27CAxMZHe3l4cDgdnzpyhqamJ7u5uYGbE+fn5QV/7dnZ2kp+fH5W5S3jUvgLJiXNf/o1icAS/Ghn3LBkxBIJsbGxkdHSU0dFRWltbee+99xgfH6e3txe73U5RUdG0dXbu3Mnnn3/+5PITQGtrKz09PdTW1kb7nyAvID0Z/mxbYK/8PNsL4ftFz18uXtn8fv88rqiZq7W1lddff52NGzfy1VdfTXtuZGSE4uJiMjIyOH78OJOTk7hcLlauXMmlS5eidrOHia+J4/V3MY1OBm7i+OJa4LXy00qy4Ht5kBubc1lhY9k98WyuXAncJPvdQ2mA1NRUmpubWbVqFXv37uXdd99l8+bNNDY2Gnu31kKXkgg/KIa/3A2Hvw9LF3/7+DtbzQ8YLHp2+lmeFTHA+vXraWy05tvyFrIEO6xbCS8lBL62G/qOpWAW3O7leRGLmGbB7Ykf31ctYhULbk8sYjWKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwC+7eaRMsTgi8P9ckixNiPYOFSxHHIZstPt9gL/FJh9MihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKGU8QihlPEIoZTxCKG00eUi6WNTEDfUODP7TG49yDw+MQD+LIHshzgXA4JBu/ObH6/3x/rSYiE08NH8IvfwOfd0Ot9/vJLF8Nr6+H3ciEjJfLzCzdFLJbh98PlG/Dv7TB2f37beGUt/GE5JCeGd26RpIjFEu5OwL+0wtX+F99W8hL4owooW/Pi24oGRSzG89yFH/9XIORw+kExvFEc+AV38UwntsRovx2B0z+Fscnwb/snVwJ/15SEf9vhZPA5OVno7j+Esz+LTMCP/eRK4HV2PNOeWIz1aQd4x0Jb58/fgNSkwKWnv/tsbuv822XIdcLypJCnGBULYk/s9XpxuVxs2LCBxMREsrKyOHz4MOPj4xw4cACbzcbp06djPU0JwfVbgUtIoUpNghVLA3/P1b0H8K//E/pY0WL5PXFHRwc1NTV4PB6WLVtGQUEBAwMDnDp1ip6eHoaGhgAoKyuL7UQlJI9fr0bLr9zgHoJMR3THnQtL74m9Xi+1tbV4PB6OHDnC4OAg7e3teDwe6urqaGpqoq2tDZvNRklJnJ+9kCdu3YVrt6I/bsu16I85F5aO+NChQ7jdbg4ePMjJkydJSfn2dhyXy0VpaSk+n4/s7GxSU1NjOFMJxRfXYzPuz2/A5MPYjP0slo24q6uLhoYGMjIyOHHiRNBlNm3aBEBpaemTxx5HX1FRwZIlS7DF+0XCBeh6DPbCAA8ewW9ux2bsZ7FsxPX19UxNTbFv3z6Sk5ODLpOUFDi78XTE169f59y5czidTl599dWozFXm7uEjGLwTu/HdQ7EbezaWjbi5uRmAqqqqWZdxu93A9Ii3bt3K4OAg58+fp7q6OrKTlJAN3oGpGN5j2BeHEVv27PTNmzcBWLt2bdDnfT4fLS0twPSI7fbw/1wrLy/H4/GEfbsLkXNjFVve+aegzz2+BvwsqYnf/v3Bm7MvN9t15M9+eoG/2PvDOc527pxOJ5cvX57XupaNeHx8HICJieA31DY0NOD1eklJSWHdunURnYvH46G/Pwx35guLf+furM89vgY8F3b73Jd92kOfP+7+Ly0bsdPpZHh4mPb2diorK6c9Nzg4yNGjRwEoKSmJ+Mkrp9MZ0e0vJGnLZ3/D78gc3gCRmhgIeGoKRp5xu+Zs21qU4Gf16tXPHyhEL/I9YtmIq6ur6erqoq6uju3bt5OXlwdAW1sb+/fvx+sNvFs8Gjd5zPcwSWa6dRdONAZ/bi63UX7wZmAPPDIJH3wS+vi7a36ffz7uDn3FCLLsiS2Xy0V6ejp9fX0UFhZSXFxMbm4uFRUV5OTksG3bNmD662GJfytTYUkMdz1ZumMrejIzM7l48SI7duwgMTGR3t5eHA4HZ86coampie7uwI23itgsdhusTovd+FnpsRt7NpY9nAbIz8+nsXHmsdfY2Bi9vb3Y7XaKiopiMDN5EUWZ8Otvoj/u8qTY/gCZjaUjns3Vq1fx+/3k5eWxdOnMU5Qff/wxAJ2dndO+zs7Opry8PHoTlaAqcuA/fgG+qeiOW5kbn5+KuSAjvnIl8BaY2Q6l9+zZE/Trt99+m48++iiic5PnS06EsrXRfbO+3QaV66M3XigUcRD62LH4V1MCv+yDB77ojLetAJbP47pyNMThwUHkPS9iiX/pybDrleiM5Vwe+MC8eLUg98SP76sWs23Ohc5+6ByY+zqPb+KYy40hAC8lwA8rYVFC6POLFn1krRjtvg/+oRluROBsdYIdDmyFgvDfoBVWiliMd/8h/ONF+HowfNtcsgje2QobV4Vvm5GiiMUSpqbgQjc0dQTec/wi8pyw9zVwBH8betxRxGIp34zA+f+FX/UHfjdTKNKToboQXl8f/7/14WmKWCxpeBwuXQ9chro1MnvQy5ZAzsrASbKNqwLXg02jiMXy7vugfyjwQfO+R4ETVkmLITMN0paZtdcNRhGLGG5B3uwhYiWKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHCKWMRwiljEcIpYxHD/B4nXoRy3dQ/QAAAAAElFTkSuQmCC",Wle="/assets/static/bell_inequalities_15_1.DqtO5hTA.png",Ule={author:["Fred Jendrzejewski"],order:3,title:"Tutorial on the nobel prize 2022 - How to win Bell's game"};function Qj(t){const e={a:"a",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"The nobel prize of physics for the year 2022 was awarded to three physicists for the test of Bell inequalities. As this work is foundational to any kind of modern quantum technology, we decided to provide you here with a description of the experiments in terms of a game. While the game is slightly odd it shows you nicely how quantum mechanics allow you to break the casino and what the experiments demonstrated specifically."}),`
`,i.jsxs(e.p,{children:["To make the discussion very direct and hands-on we will implement it in some simple ",i.jsx(e.code,{children:"qiskit"})," circuits such that you can test them directly on your own."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`import random

from qiskit.circuit import QuantumCircuit
from qiskit import Aer

import numpy as np
import matplotlib.pyplot as plt
from tqdm import trange
`})}),`
`,i.jsx(e.h2,{children:"The casino version of Bell's (CHSH) game"}),`
`,i.jsx(e.p,{children:"A casino invented a new and exciting game, where Alice and Bob can try to win some nice objects at a huge discount together. To participate in the game they have to pay 300 € as a team, but they have a good chance to come out of the game with objects that are worth 400€. Here are the rules of the game:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Alice and Bob have to go into isolated cabins, where they get to see one out of two nice Apple watches (one being black and one being white). Quite importantly, they do not know which car was given to the other contestant."}),`
`,i.jsx(e.li,{children:'Now Alice and Bob have to tell the Referee what they would like to do. They have two options. They can either say that they would like to "sell" the watch or "keep" it.'}),`
`]}),`
`,i.jsx(e.p,{children:"After they told the referee, their answers are compared. They can win in the following fashion:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:'If Alice and Bob both saw a white watch, they win of one wanted to "sell" and the other one wanted to "keep" the car.'}),`
`,i.jsx(e.li,{children:'In any other case, they win if both answered the same way ("keep" or "sell")'}),`
`]}),`
`,i.jsx(e.p,{children:"Let us simply translate these rules into python code."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def bell_game(color_a: str, color_b: str, choice_a: str, choice_b: str) -> str:
    """
    The bell casino game translated into python

    Args:
      color_a: the color that Alice sees (either \`black\` or \`white\`)
      color_b: the color that Alice sees (either \`black\` or \`white\`)
      choice_a: the choice the Alice makes (\`keep\` or \`sell\`)
      choice_b: the choice the Bob makes (\`keep\` or \`sell\`)

    Returns:
      A sring that says if Alice and Bob "won" or "lost"
    """
    # the one case where Alice and Bob have to have different results
    if color_a == "white" and color_b == "white":
        if choice_a == "keep" and choice_b == "sell":
            return "won"
        if choice_a == "sell" and choice_b == "keep":
            return "won"
    else:
        if choice_a == choice_b:
            return "won"
    return "lost"
`})}),`
`,i.jsx(e.h2,{children:"The best classical strategy"}),`
`,i.jsx(e.p,{children:'It turns out that the best way to win for Alice and Bob is to cooperate and decide before if they would like to "keep" or "sell" the watch. Then they will get their wish in 75% of the cases and only lose if both see a white watch. We can even simulate this casino session in simple python code'}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`n_games = 10000
wins = np.zeros(n_games)

# Alice and Bob decided to cooperate and always say "sell"
choice_alice = "sell"
choice_bob = "sell"

for ii in range(n_games):

    # get the colors
    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        wins[ii] = 1

print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        wins.sum(), n_games, wins.sum() / n_games * 100
    )
)
`})}),`
`,i.jsx(e.p,{children:"Alice and Bob won 7489.0 games out of 10000. Hence a win rate of 74.89 %"}),`
`,i.jsx(e.p,{children:"We can see this makes the game fair as Bob and Alice have an expectation value of exactly 300€, so the casino and the players will have just an enjoyable time if we look at the wins and losses over the games."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`profit = wins * 400 - np.ones(n_games) * 300
accu_profit = profit.cumsum()

f, ax = plt.subplots()
ax.plot(accu_profit)
ax.set_ylabel("profit in €")
ax.set_xlabel("number of games")
ax.axhline(0, color="k")
`})}),`
`,i.jsx(me,{id:"fig-classical-profit",href:$le,caption:"Accumulated profit over 10,000 games using classical strategy"}),`
`,i.jsx(e.h2,{children:"Breaking the casino with quantum technologies"}),`
`,i.jsx(e.p,{children:"Quite interestingly Alice and Bob could win more often if they have access to quantum technologies. So we just assume that Alice and Bob are really good techies and had access to a quantum computer, which allows them to entangle two qubits. Let us first plot up the kind of instructions that Alice and Bob have to give the quantum computer to obtain the entangled pair."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")

qc = QuantumCircuit(2)
qc.h(0)
qc.cx(0, 1)
qc.draw("mpl")
`})}),`
`,i.jsx(me,{id:"fig-quantum-circuit",href:zle,caption:"Quantum circuit to create an entangled Bell state"}),`
`,i.jsx(e.p,{children:"As a result of the circuit they have created a pair of entangled qubits. Imagine now that Alice and Bob can each one take one of the qubits into their cabin to play the quantum game. Given that Alice and Bob have to carry the qubit they have to have it in a box with two buttons."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["The first button says ",i.jsx(e.code,{children:"measurement"})," such that they can read out the recommendation of their qubit."]}),`
`,i.jsx(e.li,{children:"The second button allows them change their personal qubit a bit once they saw if they have a white or black watch in front of them."}),`
`,i.jsx(e.li,{children:"The key thing is that the box is not sending out any signal to the other player. So they are following perfectly the rules of the casino."}),`
`]}),`
`,i.jsx(e.h2,{children:"A naive quantum strategy"}),`
`,i.jsxs(e.p,{children:["A naive way of using the qubit is to simply push the ",i.jsx(e.code,{children:"measurement"}),' and nothing else.If the qubit results in a zero, they will tell the casino that they would like to "keep" the watch. If it is qubit result is a one, they decide to "sell" the watch.']}),`
`,i.jsxs(e.p,{children:["We can just implement this once as a ",i.jsx(e.code,{children:"qiskit"})," circuit and look at the result."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`n_games = 10000

naive_q_wins = np.zeros(n_games)
for ii in trange(n_games):

    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    # time to prepare the Bell pair
    qc = QuantumCircuit(2)
    qc.h(0)
    qc.cx(0, 1)

    # both measure
    qc.measure_all()

    # now run the circuit
    job = sim.run(qc, shots=1)
    outcome = job.result().get_counts()

    # a horribly intransparent way to get the value of the outcome
    keys = [*outcome][0]
    choice_alice = "sell" if keys[0] == "0" else "keep"
    choice_bob = "sell" if keys[1] == "0" else "keep"

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        naive_q_wins[ii] = 1

print("")
print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        naive_q_wins.sum(), n_games, naive_q_wins.sum() / n_games * 100
    )
)
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-shell",children:`    100%|███████████████████████████████████| 10000/10000 [00:03<00:00, 2953.99it/s]


    Alice and Bob won 7500.0 games out of 10000. Hence a win rate of 75.00 %
`})}),`
`,i.jsx(e.p,{children:"As you can see above the players right now will always make the same choice. This is just a very geeky variation of the classical strategy that we implemented above."}),`
`,i.jsx(e.h2,{children:"The winning quantum strategy"}),`
`,i.jsx(e.p,{children:"But being really good in quantum tech, Alice and Bob now also have the second button at hand to have a more sophisticated strategy, which allows them to take into account the color of the watches that they see in front of them."}),`
`,i.jsx(e.p,{children:"So what is the physics Bob and Alice developped the following strategy:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["If Alice sees a ",i.jsx(e.em,{children:"black"})," watch she simply measures her qubit."]}),`
`,i.jsxs(e.li,{children:["If Alice sees a ",i.jsx(e.em,{children:"white"})," watch she changes her personal qubit a bit by pushing the button on her qubit bag. In physics terms, it applies a hardamard gate on her qubit. Then she measures her qubit."]}),`
`]}),`
`,i.jsx(e.p,{children:"Bob does the following:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["If he sees a ",i.jsx(e.em,{children:"white"})," watch he switches the button to ",i.jsx(e.code,{children:"white"}),". This performs ",i.jsx(e.code,{className:"language-math math-inline",children:"R_y"})," a rotation of qubit by ",i.jsx(e.code,{className:"language-math math-inline",children:"\\frac{\\pi}{8}"}),"."]}),`
`,i.jsxs(e.li,{children:["If he sees a ",i.jsx(e.em,{children:"black"})," watch he switches the button to ",i.jsx(e.code,{children:"black"}),". This performs ",i.jsx(e.code,{className:"language-math math-inline",children:"R_y"})," a rotation of qubit by ",i.jsx(e.code,{className:"language-math math-inline",children:"-\\frac{\\pi}{8}"}),"."]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`n_games = 10000

fancy_q_wins = np.zeros(n_games)
for ii in trange(n_games):

    # get the numbers that tell us if Alice and Bob obtained
    # a white or a black watch
    color_alice = random.choice(["black", "white"])
    color_bob = random.choice(["black", "white"])

    # time to prepare the Bell pair
    qc = QuantumCircuit(2)
    qc.h(0)
    qc.cx(0, 1)

    # Alice acts her qubit
    if color_alice == "white":
        qc.h(0)

    # Bob acts on his qubit
    if color_bob == "white":
        qc.ry(np.pi / 8, 1)
    else:
        qc.ry(-np.pi / 8, 1)

    # both measure
    qc.measure_all()

    # now run the circuit
    job = sim.run(qc, shots=1)
    outcome = job.result().get_counts()
    result = "lost"

    # a horribly intransparent way to get the value of the outcome
    keys = [*outcome][0]
    choice_alice = "sell" if keys[0] == "0" else "keep"
    choice_bob = "sell" if keys[1] == "0" else "keep"

    result = bell_game(color_alice, color_bob, choice_alice, choice_bob)
    if result == "won":
        fancy_q_wins[ii] = 1

print("")
print(
    "Alice and Bob won {} games out of {}. Hence a win rate of {:.2f} %".format(
        fancy_q_wins.sum(), n_games, fancy_q_wins.sum() / n_games * 100
    )
)
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-shell",children:`    100%|███████████████████████████████████| 10000/10000 [00:03<00:00, 2636.13it/s]


    Alice and Bob won 8318.0 games out of 10000. Hence a win rate of 83.18 %
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`fancy_profit = fancy_q_wins * 400 - np.ones(n_games) * 300
fancy_accu_profit = fancy_profit.cumsum()

f, ax = plt.subplots()
ax.plot(accu_profit, label="classical tech", lw=3, alpha=0.5)
ax.plot(fancy_accu_profit, label="quantum tech", lw=3)
ax.axhline(0, color="k")
ax.set_ylabel("profit in €")
ax.set_xlabel("number of games")
ax.legend()
ax.set_xlim(0, n_games)
`})}),`
`,i.jsx(e.p,{children:"(0.0, 10000.0)"}),`
`,i.jsx(me,{id:"fig-quantum-advantage",href:Wle,caption:"Comparison of accumulated profit: classical strategy vs quantum strategy showing quantum advantage"}),`
`,i.jsxs(e.p,{children:["This graph nicely summarizes that Alice and Bob have found a clear ",i.jsx(e.strong,{children:"quantum advantage"})," in the game. They could break the casino if the casino let's them play long enough. It is fairly crucial to underline that Alice and Bob did not cheat in any way. They were simply able to do ",i.jsx(e.strong,{children:"more"})," with quantum technologies than it would be possible with any classical approach."]}),`
`,i.jsx(e.h2,{children:"The link to the Nobel prize"}),`
`,i.jsx(e.p,{children:"This quantum advantage was formulated in a clean fashion in Bell's inequalities in the 1970s. The three Nobel prize winners (John Clauser, Alain Aspect, Anton Zeilinger) tested experimentally that it is indeed possible for Alice and Bob to break the casino without any cheating."}),`
`,i.jsxs(e.p,{children:["Of course, the experimentalists did not take qubits into a casino. The experiments performed the game in highly controlled lab experiments. The qubits were implemented through flying photons and the decisions on the colors of the watches were high quality random number generators. Even as the experiments became more and more sophisticated they continued to show that the entangled qubits allowed for quantum advantage. And this work was so foundational to modern quantum technologies that it obtained this years ",i.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/2022/press-release/",children:"Nobel prize"}),". Modern quantum computing systems and sophisticated algorithms essentially attempts to reproduce this clear advantage in increasingly complex situations like ",i.jsx(e.a,{href:"https://alqor.io/tutorials/introduction-to-generative-modelling-with-quantum-hardware",children:"unsupervised machine learning"}),"."]})]})}function Vle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Qj,{...t})}):Qj(t)}const Kj=Object.freeze(Object.defineProperty({__proto__:null,default:Vle,frontmatter:Ule},Symbol.toStringTag,{value:"Module"})),Yle={author:["Fred Jendrzejewski"],order:1,title:"Tutorial 1 - Basic concepts of quantum technologies"};function Zj(t){const e={h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"In today's world, the word “quantum” evokes similar dreams, hopes and reactions like the words “blockchain” or “artificial intelligence”. Enthusiasts focus exclusively on the disruptive potential while the greater public sees it mostly as a big hype which is impossible to understand for normal people. This hipster role is rather new to the quantum sector which has largely evolved under the radar to the greater public for the last one hundred years. In this tutorial series, we will summarize some basic concepts of quantum physics and then  discuss the four pillars of quantum technologies:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum metrology"}),", where we use quantum physics for precise measurements."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum cryptography"}),", where we improve security through quantum physics."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum simulation"}),", where we solve specific problems that are hard for normal computers with quantum systems."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum computing"}),", where we build a new computational framework with quantum mechanics."]}),`
`]}),`
`,i.jsx(e.h2,{children:"The esoteric beginnings of quantum physics in the 1920s"}),`
`,i.jsx(e.p,{children:`Theoretical physicists like Planck, Einstein, Schrödinger or Heisenberg (before he was reborn as a drug kingpin in a TV series) founded quantum physics in the 1920s. They tried to explain rather esoteric physical effects like black body radiation or the photoelectric effect. This work proved to have major implications to our understanding of physics and became integral to the description of our world.
The mathematical framework behind quantum mechanics is sufficiently advanced to go well beyond high school physics, so we will skip it here. But if you have the feeling that you would like to have a deeper understanding, here are some ways of doing this:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"We wrote a university lecture on the cooking recipes for quantum mechanics with plenty of references. It is a one hour summary that might get you started if you are familiar with most of the maths."}),`
`,i.jsx(e.li,{children:"If you would like to get a marvelous introduction into some basic principles of quantum mechanics we recommend the absolutely outstanding Feynman lectures. "}),`
`,i.jsx(e.li,{children:"The books by Cohen Tannoudji give an extensive and clean introduction into quantum mechanics with discussions of numerous problems."}),`
`]}),`
`,i.jsx(e.h2,{children:"Two rules, no math"}),`
`,i.jsx(e.p,{children:"In this tutorial series, we discuss quantum mechanics based on two rules with no math. This beautiful description was given by Chris Monroe in a short youtube video that we highly recommend before you continue."}),`
`,i.jsxs(e.p,{children:["We will just call the rules from the video ",i.jsx(e.strong,{children:"quantum rules one and two"})," throughout the tutorial series."]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum rule 1"}),": Quantum objects can be in several states at the same time. "]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Quantum rule 2"}),": Rule number one only works when you are not looking."]}),`
`]}),`
`,i.jsx(e.p,{children:"We will see these two rules in action in every single quantum technology, but here we will visualize them directly by the famous Schrödinger cat."}),`
`,i.jsx(e.h2,{children:"Schrödingers cat"}),`
`,i.jsx(e.p,{children:"Erwin Schrödinger, one of the founders of quantum mechanics, illustrated the rules of quantum mechanics through the following thought experiment."}),`
`,i.jsx(e.p,{children:"It is a thought experiment of a cat that is trapped in a box together with a closed bottle of toxic gas. A very thin filament that might snap at any time keeps a hammer above the bottle from falling. And when the hammer hits the bottle the unfortunate cat dies of poisoning. The final ingredient is that we cannot see or hear anything of what is happening within the box without opening it. So if we look at this problem through the rules of quantum mechanics two options are imaginable:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["Option A: The filament holds, the bottle remains intact and the ",i.jsx(e.strong,{children:"cat stays alive"}),"."]}),`
`,i.jsxs(e.li,{children:["Option B: The filament snaps, the bottle breaks and the ",i.jsx(e.strong,{children:"cat is dead"}),"."]}),`
`]}),`
`,i.jsxs(e.p,{children:[i.jsx(e.strong,{children:"If we can apply the rules of quantum mechanics"})," we know from quantum rule 1 the cat will therefore be in both states at the same time, it is dead and alive as long as the box is closed. We will often use the terms ",i.jsx(e.strong,{children:"superposition"})," to describe a situation where a system is in multiple states at the same time. But as soon as we open the box, we will only see it as being dead or alive according to quantum rule 2."]}),`
`,i.jsx(e.p,{children:"The art of quantum technologies is then to build up systems that follow these rules in a very controlled manner. Physicists developed increasingly refined approaches over the last one hundred years. The technologies have lead to different quantum hardware platforms based on atoms, electrons or even light. We have a whole series of tutorials on quantum hardware if you would like to know more about it. Over the years, physicists have learned to master these systems to an increasingly high degree. And it has now even been possible to realize Schrödinger's thought experiment. See for example here for a realization with atoms."}),`
`,i.jsx(e.h2,{children:"The two quantum rules in the different quantum technologies"}),`
`,i.jsx(e.p,{children:"To end this tutorial, we now discuss how we use the two rules as essential ingredients in all quantum technology stacks. We leave the much more detailed discussion to the next parts of the series."}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:["In ",i.jsx(e.strong,{children:"quantum metrology"})," we put the measurement system into a superposition in the first step (quantum rule 1). We can think of it like a coin that is tossed and rotates at a speed that might depend on gravity. We then measure the result after some time and as for any coin, we will always get heads or tails. "]}),`
`,i.jsxs(e.li,{children:["In ",i.jsx(e.strong,{children:"quantum cryptography"})," we put a pair of photons into a superposition. Then, we send them to the partners that would like to communicate. If someone tries to listen to the discussion he will measure the system and destroy the superposition. Smart protocols use this to secure the communication."]}),`
`,i.jsxs(e.li,{children:["In ",i.jsx(e.strong,{children:"quantum simulation"})," physicists design a system to solve a very specific problem efficiently by testing multiple solutions in parallel. The measurement in the end allows the observers the solution to the problem."]}),`
`,i.jsxs(e.li,{children:["In ",i.jsx(e.strong,{children:"quantum computing"})," we put we computational units into superpositions. Then, smartly designed algorithms can solve certain problems more efficiently than classical computers. The final measurement is then telling the user the result of the computation."]}),`
`]}),`
`,i.jsx(e.h2,{children:"Summary"}),`
`,i.jsx(e.p,{children:"In this tutorial we discussed basic concepts of quantum technologies. We saw that the key challenge is to implement systems that follow the two quantum rules. The designer chooses then the technologies that solve the problem at hand in the most efficient way. We will focus on quantum metrology in our next tutorial before we move on to the other pillars."})]})}function Gle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(Zj,{...t})}):Zj(t)}const eT=Object.freeze(Object.defineProperty({__proto__:null,default:Gle,frontmatter:Yle},Symbol.toStringTag,{value:"Module"})),Xle="/assets/static/AtomWithOrbits.CyrgxHCa.png",Jle="/assets/static/AtomWithOrbitsUnderMagneticField.Cz2FU6BU.png",Qle={author:["Fred Jendrzejewski"],order:2,title:"Tutorial 2 - Quantum metrology"};function tT(t){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"Welcome back to our second lesson on quantum technologies. In this lesson, we will discuss how quantum systems are used for precise measurements in a variety of situations. We saw in the last lesson, that quantum physics was initially developed to explain some observations in the laboratory. However, in the 1960s and 1970s more and more lasers became accessible as a new tool for experimental physicists. They allowed brave pioneers to cool and trap individual particles. This work was purely curiosity-driven and was launched in a tiny number of university and government laboratories. It suddenly allowed people like Dave Wineland, Bill Phillipps or Claude Cohen-Tannoudji a previously unimaginable degree of control over atoms and ions. This kind of work had such an important impact on physics that it was recognized with several nobel prizes and is now used to define our measurement units like the second, the meter etc."}),`
`,i.jsx(e.p,{children:"We will go through three specific examples and see how quantum technologies are used there."}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"The measurement of time is nowadays done with atomic clocks and so precise that clocks can be used for the measurement of height."}),`
`,i.jsx(e.li,{children:"The measurement of magnetic fields is getting more and more precise thanks to quantum technologies. We are now even able to measure the magnetic fields that are created by brain activity."}),`
`,i.jsx(e.li,{children:"Measurement of forces are essential for navigation of planes and large ships. Quantum technologies are an essential tool to improve these measurement to a stage where satellites are not needed anymore."}),`
`]}),`
`,i.jsx(e.h2,{children:"Measuring time with atomic clocks"}),`
`,i.jsx(e.p,{children:"Precise time keeping is essential to mondern industry. Financial services are highly timed, navigation depends on the precise timing of the GPS satellites and we are all following the same time of the network time protocol. And nowadays time is kept with increasingly precise atomic clocks, which are one of the earliest quantum technologies we have. A few reasons which atomic clocks are such marvelous time keepers are:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"No need to get the american, chinese or european atom as they are all equal. Once we agreed with other how we measure time with atoms we all have exactly the tools at hand."}),`
`,i.jsxs(e.li,{children:["Atomic clocks a extremely precise. Commercially available rubidium clocks (for a few thousand euros) are precise to within 10^",-11,". Modern research has push this to 10^",-21," as described in this paper."]}),`
`]}),`
`,i.jsx(e.h2,{children:"How do atomic clocks roughly ?"}),`
`,i.jsx(e.p,{children:"You might have heard that atoms consist of a nucleus which is positively charged and a bunch of negatively charged electrons circling around this nucleus. And as for satellites that orbit around earth, their speed is different in different orbits. So, electrons that are closer to the core, in a lower orbit, take less time to circle around the core than electrons that that further away, in a higher orbit. And it was one of the first discoveries by quantum mechanics that only a number of very specific orbits with sharply defined frequencies are allowed."}),`
`,i.jsx(me,{id:"fig-atomic-orbits",href:Xle,caption:"Atomic structure showing electron orbits around the nucleus"}),`
`,i.jsx(e.p,{children:"And then then electrons can then jump from one orbit to another if you shine in microwave radiation at the corresponding frequency. Yes, it is the same kind of radiation that heats up your food in the microwave oven. Except that here the radiation does not heat the atom it just makes the electron jump to another orbit. And this highly controlled transition of the electron between two orbits is what atomic clocks are building upon. Actually, we have now defined the second based on this idea. The definition reads:"}),`
`,i.jsxs(e.blockquote,{children:[`
`,i.jsxs(e.p,{children:["The second, symbol ",i.jsx(e.code,{className:"language-math math-inline",children:"s"}),", is the SI unit of time. It is defined by taking the fixed numerical value of the caesium frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta \\nu_\\text{Cs}"}),", the unperturbed ground-state hyperfine transition frequency of the caesium-133 atom, to be 9 192 631 770 when expressed in the > unit Hz, which is equal to ",i.jsx(e.code,{className:"language-math math-inline",children:"s^{-1}"}),"."]}),`
`,i.jsxs(e.p,{children:["From the website of the ",i.jsx(e.a,{href:"https://www.bipm.org/en/si-base-units/second",children:"bureau international des poids et des measures"}),"."]}),`
`]}),`
`,i.jsxs(e.p,{children:["If you have some time, we also recommend you to have a look into the ",i.jsx(e.a,{href:"https://youtu.be/8WWQrD_TzaY",children:"talk by Nobel prize Bill Philipps"}),", where he gives a highly entertaining introduction."]}),`
`,i.jsxs(e.p,{children:["A more scientific discussion can be found in this ",i.jsx(e.a,{href:"https://arxiv.org/abs/1407.3493",children:"detailled review"})," paper."]}),`
`,i.jsx(e.h2,{children:"Measuring magnetic fields"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/History_of_the_compass",children:"Compasses"})," have been used for navigation of 2000 years now. This makes the measurement of magnetic field is one of the long standing tools of navigation that we have. And the precise measurement of magnetic fields remains a major industrial challenge, where the most precise magnetometers are nowadays based on quantum technologies. Most of them of a similar approach as they measure the influence of the magnetic field on electrons. The existence of the magnetic field slightly changes how the electrons would like to move. So looking back to the electrons in an atom, it means that the frequency of each orbit is shifted slightly. And as all the orbits are slightly different, each of them experiences a slightly different energy shift."]}),`
`,i.jsx(me,{id:"fig-magnetic-field-effect",href:Jle,caption:"Effect of magnetic field on atomic electron orbits"}),`
`,i.jsxs(e.p,{children:["We can measure this energy shifts very precisely. And hence we can use very precise frequency measurements for very precise magnetometry. They are nowadays pushing the frontiers of nanotechnology, brain studies and space science as you might read in ",i.jsx(e.a,{href:"https://arxiv.org/pdf/1905.00618.pdf",children:"this review"}),". The described principle is not limited to atoms. Similiar approaches are used in magnetometers which are based on diamonds, commercialized by companies like ",i.jsx(e.a,{href:"https://wainvam-e.com/",children:"Wainvam-e"}),", or superconducting loops, commercialized by companies like ",i.jsx(e.a,{href:"https://qd-europe.com/de/en/products/magnetism/magnetometers/",children:"QuantumDesign"}),". The magnetic field always slightly shifts around a frequency and we measure this shift precisely."]}),`
`,i.jsx(e.h2,{children:"Measuring forces"}),`
`,i.jsx(e.p,{children:"This kind of precision measurements is also available for the measurement of forces. Whenever, you change your speed or direction, this means that a force is applied onto you. So if you are able to precisely measure the forces that you experience at a certain moment in time, you always know where you are compared to your starting point. Suppose that you would like to take a ship that travels the Atlantic. Then you could theoretically do the whole travel only based on your force measurements. Unfortunately, these measurements have to be extremely precise and we currently have to rely on satellite navigation (which relies on atomic clocks)."}),`
`,i.jsxs(e.p,{children:["However, some well established companies like ",i.jsx(e.a,{href:"https://www.ixblue.com/quantum-gravimeter/",children:"iXBlue"})," in France or ",i.jsx(e.a,{href:"https://aosense.com/",children:"AOSense"})," in the US can offer ultraprecise sensors to their customers. These sensors are based on the ",i.jsx(e.a,{href:"https://www.ixblue.com/first-3-axis-quantum-inertial-sensor/",children:"movement of ultracold atoms"}),". The sensing power is so high that it provides new possibilities for navigation of vessels that might have no access to satellite navigation, i.e. submarines. In other words, it makes for an interesting technology for the military which is one of the bigger investors and clients into quantum sensors. However, the hefty price tag and the close connection to military applications explain why this sector still remains fairly unknown to the public despite its clearly established use-cases and growing importance to various important industries."]}),`
`,i.jsx(e.h2,{children:"Summary"}),`
`,i.jsx(e.p,{children:"In this lesson, we have discussed three very distinct examples of quantum metrology. We also discussed how this enables new industrial measurements already today. However, given the fairly high price of those tools, they are often only understood by a group of experts."})]})}function Kle(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(tT,{...t})}):tT(t)}const nT=Object.freeze(Object.defineProperty({__proto__:null,default:Kle,frontmatter:Qle},Symbol.toStringTag,{value:"Module"})),Zle={author:["Fred Jendrzejewski"],order:1,title:"Tutorial 1 - The qubit or the two level system"};function iT(t){const e={code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"In this first tutorial we are going to discuss the two-level system as it is the simplest unit of quantum computing systems. We discuss on a physics level with Hamiltonians etc its static properties like level splitting and avoided crossings. Then we discuss dynamical processes like Rabi oscillations and their connection to the notation of quantum computation."}),`
`,i.jsx(e.p,{children:"This lays the basis for the discussion of quantum computation hardware in the next tutorials. Namely:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"superconducting qubits"}),`
`,i.jsx(e.li,{children:"trapped ions"}),`
`,i.jsx(e.li,{children:"neutral atoms"}),`
`]}),`
`,i.jsx(e.h2,{children:"Hamiltonian, Eigenstates and Matrix Notation"}),`
`,i.jsxs(e.p,{children:["To start out, we will consider two eigenstates ",i.jsx(e.code,{className:"language-math math-inline",children:"|0\\rangle,~|1\\rangle "})," of the Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," with"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" \\hat{H}_0|0\\rangle=E_0|0\\rangle, \\qquad \\hat{H}_0|1\\rangle=E_1|1\\rangle."})}),`
`,i.jsx(e.p,{children:"Quite typically we might think of it as a two-level atom with states 0 and 1. The eigenstates can be expressed in matrix notation:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" |0\\rangle=\\left( \\begin{array}{c} 1 \\\\ 0 \\end{array} \\right), \\qquad |1\\rangle=\\left( \\begin{array}{c} 0 \\\\ 1 \\end{array} \\right),"})}),`
`,i.jsxs(e.p,{children:["so that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_0"})," be written as a diagonal matrix"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"    \\hat{H}_0 = \\left(\\begin{array}{cc} E_0 & 0 \\\\ 0 & E_1 \\end{array}\\right)."})}),`
`,i.jsx(e.p,{children:"If we would only prepare eigenstates the system would be rather boring. However, we typically have the ability to change the Hamiltonian by switching on and off laser or microwave fields. We can then write the Hamiltonian in its most general form as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} \\Delta  & \\Omega_x - i\\Omega_y\\\\ \\Omega_x +i\\Omega_y & -\\Delta \\end{array} \\right)"})}),`
`,i.jsx(e.p,{children:"Sometimes we will also chose the definition:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\Omega = |\\Omega| e^{i\\varphi}=\\Omega_x + i\\Omega_y"})}),`
`,i.jsx(e.p,{children:"It is particularly useful for the case in which the coupling is created by a laser. Another useful way of thinking about the two-level system is as a spin in a magnetic field. Let us remind us of the definitions of the of the spin-1/2 matrices:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`s_x = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & 1\\\\
1 &  0
\\end{array}
\\right)~
s_y = \\frac{\\hbar}{2}\\left(\\begin{array}{cc}
0 & -i\\\\
i &  0
\\end{array}
\\right)~s_z =\\frac{\\hbar}{2} \\left(\\begin{array}{cc}
1 & 0\\\\
0 &  -1
\\end{array}
\\right)`})}),`
`,i.jsx(e.p,{children:"We then obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`%\\label{Eq:HamSpin}
\\hat{H} = \\mathbf{B}\\cdot\\hat{\\mathbf{s}}\\text{ with }\\mathbf{B} = (\\Omega_x, \\Omega_y, \\Delta)`})}),`
`,i.jsx(e.p,{children:"You will go through this calculation in the excercise of this week."}),`
`,i.jsxs(e.h2,{children:["Case of no perturbation ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = 0"})]}),`
`,i.jsxs(e.p,{children:["This is exactly the case of no applied laser fields that we discussed previously. We simply removed the energy offset ",i.jsx(e.code,{className:"language-math math-inline",children:"E_m = \\frac{E_0+E_1}{2}"})," and pulled out the factor ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar"}),", such that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"})," measures a frequency. So we have:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`E_0 = E_m+ \\frac{\\hbar}{2}\\Delta\\\\
E_1 = E_m- \\frac{\\hbar}{2}\\Delta`})}),`
`,i.jsxs(e.p,{children:["We typically call ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"})," the energy difference between the levels or the ",i.jsx(e.em,{children:"detuning"}),"."]}),`
`,i.jsxs(e.h2,{children:["Case of no detuning ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = 0"})]}),`
`,i.jsxs(e.p,{children:["Let us suppose that the diagonal elements are exactly zero. And for simplicity we will also keep ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega_y =0"})," as it simply complicates the calculations without adding much to the discussion at this stage. The Hamiltonian reads then:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H} = \\frac{\\hbar}{2}\\left( \\begin{array}{cc} 0  & \\Omega\\\\ \\Omega &0 \\end{array} \\right)"})}),`
`,i.jsxs(e.p,{children:["Quite clearly the states ",i.jsx(e.code,{className:"language-math math-inline",children:"\\varphi_{1,2}"})," are not the eigenstates of the system anymore. How should the system be described now ? We can once again diagonalize the system and write"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\hat{H}|\\varphi_{\\pm}\\rangle = E_{\\pm}|\\varphi_{\\pm}\\rangle\\\\
E_{\\pm} = \\pm\\frac{\\hbar}{2}\\Omega\\\\
|\\varphi_{\\pm}\\rangle = \\frac{|0\\rangle\\pm|1\\rangle}{\\sqrt{2}}`})}),`
`,i.jsx(e.p,{children:"Two important consequences can be understood from this result:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["The coupling of the two states shifts their energy by ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),". This is the idea of level repulsion."]}),`
`,i.jsx(e.li,{children:"The coupled states are a superposition of the initial states."}),`
`]}),`
`,i.jsxs(e.p,{children:["This is also a motivation the formulation of the 'bare' system for ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega = 0"})," and the 'dressed' states for the coupled system."]}),`
`,i.jsx(e.h2,{children:"General case"}),`
`,i.jsx(e.p,{children:"Quite importantly we can solve the system completely even in the general case. By diagonalizing the Hamiltonian we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" E_\\pm = \\pm \\frac{\\hbar}{2} \\sqrt{\\Delta^2+|\\Omega|^2}"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`import matplotlib.pyplot as plt
import numpy as np

deltaMax = 5
delta = np.linspace(-deltaMax, deltaMax, 100)
omega = 1

Eplus = np.sqrt(delta**2+omega**2)/2
Eminus = -np.sqrt(delta**2+omega**2)/2

f, ax = plt.subplots()
ax.plot(delta, Eplus, label="$E_+$")
ax.plot(delta, Eminus, label="$E_+$")
ax.legend()
ax.set_xlabel("detuning $\\Delta$")
ax.set_ylabel("energy $E$");
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_101_3_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"The Eigenstates then read:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_+\\rangle =\\cos\\left(\\frac{\\theta}{2}\\right) e^{-i{\\varphi}/{2}}|0\\rangle+\\sin\\left(\\frac{\\theta}{2}\\right) e^{i{\\varphi}/{2}}|1\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_-\\rangle =-\\sin\\left(\\frac{\\theta}{2}\\right)e^{-i{\\varphi}/{2}}|0\\rangle+\\cos\\left(\\frac{\\theta}{2}\\right) e^{i{\\varphi}/{2}}|1\\rangle"})}),`
`,i.jsx(e.p,{children:"where"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\tan(\\theta) = \\frac{|\\Omega|}{\\Delta}"})}),`
`,i.jsx(e.h2,{children:"Dynamical Aspects"}),`
`,i.jsxs(e.p,{children:["After the static case we now want to investigate the dynamical properties of the two-state system. We calculate the time evolution of ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi(t)\\rangle = c_0(t)|0\\rangle + c_1(t)|1\\rangle"})," with the Schrödinger equation and the perturbed Hamiltonian :"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"i\\hbar \\frac{d}{dt}|\\psi(t)\\rangle=\\hat{H}|\\psi(t)\\rangle,"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"i \\frac{d}{dt}\\left(\\begin{array}{c} c_0(t) \\\\ c_1(t) \\end{array}\\right) = \\frac{1}{2}\\left( \\begin{array}{cc} \\Delta & \\Omega \\\\ \\Omega^* & -\\Delta \\end{array} \\right) \\left(\\begin{array}{c} c_0(t) \\\\ c_1(t) \\end{array} \\right)."})}),`
`,i.jsxs(e.p,{children:["We have two coupled differential equations and we luckily already know how to solve them as we have calculated the two eigenenergies in the previous section. For the state ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi(t)\\rangle"})," we get"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" |\\psi(t)\\rangle=\\lambda e^{-i{E_+}t/{\\hbar}} |\\psi_+\\rangle + \\mu e^{-i{E_-}t/{\\hbar}} |\\psi_-\\rangle"})}),`
`,i.jsxs(e.p,{children:["with the factors ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu"}),", which are defined by the initial state. The most common question is then what happens to the system if we start out in the bare state ",i.jsx(e.code,{className:"language-math math-inline",children:"|0\\rangle"})," and then let it evolve under coupling with a laser ? So what is the probability to find it in the other state ",i.jsx(e.code,{className:"language-math math-inline",children:"|1\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"P_1(t)=\\left|\\langle 1|\\psi(t)\\rangle\\right|^2."})}),`
`,i.jsxs(e.p,{children:["As a first step, we have to apply the initial condition and express ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi(0)\\rangle"})," in terms of ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi_{\\pm}\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi(0)\\rangle \\overset{!}{=} |0\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"  =  e^{i{\\varphi}/{2}} \\left[ \\cos\\left( \\frac{\\theta}{2}\\right) |\\psi_{+}\\rangle-\\sin\\left(\\frac{\\theta}{2}\\right)|\\psi_{-}\\rangle\\right]"})}),`
`,i.jsxs(e.p,{children:["By equating the coefficients we get for ",i.jsx(e.code,{className:"language-math math-inline",children:"\\lambda"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mu"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\lambda = e^{i{\\varphi}/{2}}\\cos\\left(\\frac{\\theta}{2}\\right), \\qquad  \\mu = -e^{i{\\varphi}/{2}}\\sin\\left(\\frac{\\theta}{2}\\right)."})}),`
`,i.jsx(e.p,{children:"One thus gets:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" P_1(t)= \\left|e^{i\\varphi} \\sin\\left(\\frac{\\theta}{2}\\right)\\cos\\left(\\frac{\\theta}{2}\\right)\\left[e^{-i{E_+}t/{\\hbar}} - e^{-i{E_-}t/{\\hbar}}\\right]\\right|^2"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= \\sin^2(\\theta)\\sin^2\\left(\\frac{E_+-E_-}{2\\hbar}t\\right)"})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"P_1(t)"})," can be expressed with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"})," alone. The obtained relation is called Rabi's formula:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:" P_1(t)=\\frac{1}{1+\\left(\\frac{\\Delta}{|\\Omega|}\\right)^2}\\sin^2\\left(\\sqrt{|\\Omega|^2+\\Delta^2}\\frac{t}{2}\\right)"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def rabi_osc(time: float, omega: float, delta: float) -> float:
  """
  time evolution in the Rabi oscillation

  Args:
    time: time at which we measure
    omega: coupling strength
    delta: detuning

  Returns:
    float: probability to be in the excited state
  """
  return 1/(1+(delta/omega)**2)*np.sin(np.sqrt(omega**2+delta**2)*time/2)**2


omega = 2*np.pi*1
time = np.linspace(0,2, 100)



delta = 0

f, ax = plt.subplots()
ax.plot(time, rabi_osc(time, omega, 0), label = "$\\Delta = 0$")
ax.plot(time, rabi_osc(time, omega, omega), label = "$\\Delta = \\Omega$")
ax.plot(time, rabi_osc(time, omega, 10*omega), label = "$\\Delta = 10\\cdot\\Omega$")
ax.legend()
ax.set_xlabel("time $t$")
ax.set_ylabel("probability $P_1$")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, 'probability $P_1$')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_101_6_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"A few key words concerning Rabi oscillations are in order:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The probability to be in the excited state is indeed maximal if there is zero detuning."}),`
`,i.jsxs(e.li,{children:["The speed of the oscillations get higher with higher detuning. This fact is often overlooked at first sight but key in approximations like the ",i.jsx(e.em,{children:"rotating wave approximation"}),"."]}),`
`]}),`
`,i.jsx(e.h2,{children:"A few words on the quantum information notation"}),`
`,i.jsx(e.p,{children:"The qubit is THE basic ingredient of quantum computers. However, you will typically not find Pauli matrices and other common notations of two-state systems in the platforms. The typical notation there is:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"R_x(\\phi)"})," is a rotation around the x-axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\phi"}),"."]}),`
`,i.jsxs(e.li,{children:["Same holds for ",i.jsx(e.code,{className:"language-math math-inline",children:"R_y"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"R_z"}),"."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"X"})," denotes the rotation around the x axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),". So it transforms ",i.jsx(e.code,{className:"language-math math-inline",children:"|1\\rangle"})," into ",i.jsx(e.code,{className:"language-math math-inline",children:"|0\\rangle"})," and vise versa."]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"Z"})," denotes the rotation around the x axis for an angle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),". So it transforms ",i.jsx(e.code,{className:"language-math math-inline",children:"|+\\rangle"})," into ",i.jsx(e.code,{className:"language-math math-inline",children:"|-\\rangle"})," and vise versa."]}),`
`]}),`
`,i.jsxs(e.p,{children:["The most commonly used gate is actually one that we did not talk about at all, it is the Hadamard gate, which transforms ",i.jsx(e.code,{className:"language-math math-inline",children:"|1\\rangle"})," into ",i.jsx(e.code,{className:"language-math math-inline",children:"|-\\rangle"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"|0\\rangle"})," into ",i.jsx(e.code,{className:"language-math math-inline",children:"|+\\rangle"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}|1\\rangle = |-\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}|0\\rangle = |+\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}|-\\rangle = |1\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}|+\\rangle = |0\\rangle"})}),`
`,i.jsx(e.p,{children:"In the next tutorial we will see how these concepts are implemented in real hardware."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python"})})]})}function ece(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(iT,{...t})}):iT(t)}const aT=Object.freeze(Object.defineProperty({__proto__:null,default:ece,frontmatter:Zle},Symbol.toStringTag,{value:"Module"})),tce={author:["Fred Jendrzejewski"],order:2,title:"Tutorial 2 - Continuous variables or the quantum harmonic oscillator"};function rT(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./0",children:"first tutorial"})," we saw a simple description of the qubit, which is quite often as far as hardware discussions go. Qubits are pretty awesome for the solution to a substantial amount of binary problems. However, the translation of continouous variables (CV) onto qubit is most of the time a rather sad moment. But to simply solve a problem with CV on a quantum system, there is no fundamental reason in going through a qubit representation."]}),`
`,i.jsx(e.p,{children:"We will examplify this at the widely discussed problem of the harmonic oscillator. This also lays the groundwork for the discussion of such hardware systems like photonic quantum systems, cold atoms or even the readout of qubit based hardware like trapped ions or superconducting devices."}),`
`,i.jsx(e.h2,{children:"The classical harmonic oscillator"}),`
`,i.jsxs(e.p,{children:["Within physics we love to describe the evolution of a system with differential equations up to second order. The absolute classic is a particle of mass ",i.jsx(e.code,{className:"language-math math-inline",children:"m"})," that is moving in a harmonic potential. We describe its position as ",i.jsx(e.code,{className:"language-math math-inline",children:"x"}),". Its equation of motion is then:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\ddot{x} +\\omega^2 x = 0"})}),`
`,i.jsx(e.p,{children:"The solutions are then just oscillatory solutions:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"x(t) = a \\cos(\\omega t)+ b \\sin(\\omega t)"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\dot{x}(t) = -a\\omega \\sin(\\omega t)+ b\\omega \\cos(\\omega t)"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\ddot{x}(t) = -\\omega^2 x(t)"})}),`
`,i.jsx(e.p,{children:"The two prefactors are are fully determined by:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["The initial speed of the particle ",i.jsx(e.code,{className:"language-math math-inline",children:"\\dot{x}(t=0) = v_0"}),", or its associated momentum ",i.jsx(e.code,{className:"language-math math-inline",children:"p = mv"}),"."]}),`
`,i.jsxs(e.li,{children:["The initial position of the particle ",i.jsx(e.code,{className:"language-math math-inline",children:"x(t=0) = x_0"}),"."]}),`
`]}),`
`,i.jsx(e.p,{children:"This results in:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"x(t=0) = a  = x_0"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\dot{x}(t=0) = b\\omega = v_0"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`import numpy as np
import matplotlib.pyplot as plt
from numpy import pi

`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`# steepness of the potential
m = 1;
omega = 2*np.pi*1;

# initial conditions
x0 = 0;
v0 = 1;

tlin = np.linspace(0,3,100);

xt = x0*np.cos(omega*tlin)+v0/omega*np.sin(omega*tlin);
vt = -x0*omega*np.sin(omega*tlin)+v0*np.cos(omega*tlin);

f, (ax1,ax2) = plt.subplots(2,1, sharex=True)
ax1.plot(tlin, xt)
ax2.plot(tlin, vt)
ax1.set_xlabel('time $t$')
ax1.set_ylabel('position $x$')
ax2.set_ylabel('velocity $v$')
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, 'velocity $v$')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_3_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We learn a few things from this example:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The position and momentum are independent variables of the problem."}),`
`,i.jsxs(e.li,{children:["If we cannot solve the equations of motion analytically or numerically, we have to resort to an ",i.jsx(e.em,{children:"'experiment'"})," that solves the differential equation for us. However, every ",i.jsx(e.em,{children:"'experiment'"})," will only solve one eom for one set of parameters for us."]}),`
`]}),`
`,i.jsx(e.h3,{children:"Random initial conditions"}),`
`,i.jsx(e.p,{children:"We have seen that the system might be solved analytically, however this might hit some problems for more complex problems. Then we have to investigate the solutions experimentally. For this work, we will prepare the system with some fidelity in some initial state. We assume:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["We have some precision ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta x"})," on the initial state preparation at ",i.jsx(e.code,{className:"language-math math-inline",children:"x_0"}),"."]}),`
`,i.jsxs(e.li,{children:["We have some precision ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta v"})," on the initial state preparation at ",i.jsx(e.code,{className:"language-math math-inline",children:"v_0"}),"."]}),`
`]}),`
`,i.jsxs(e.p,{children:["Let us just assume a gaussian for simplicity. To describe this initial state we can then use the probability distribution ",i.jsx(e.code,{className:"language-math math-inline",children:"P_0(x)"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"P_0(v)"}),". For a finite grid size it means that we describe the initial state by a vector whose a elements are positive real numbers between 0 and 1 with the normalization condition:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\sum p_i = 1"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`v0 = 1;dv = 0.1;
x0 = 0; dx = 0.1;

Px = np.random.normal(x0, dx, 500)
Pv = np.random.normal(v0, dv, 500)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.hist(Px, density=True)
ax2.hist(Pv, density=True)
ax1.set_xlabel('initial position $x$')
ax2.set_xlabel('initial velocity $v$')
f.tight_layout()
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_6_0.png",alt:"png"})}),`
`,i.jsxs(e.p,{children:["\\And depending on these initial conditions, we will obtain some final distributions ",i.jsx(e.code,{className:"language-math math-inline",children:"P(x_f)"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"P(v_f)"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`# initial conditions
v0 = 3;dv = 0.1;
x0 = 0; dx = 0.1;
Ntries = 100;

x0s = np.random.normal(x0, dx, Ntries);
v0s = np.random.normal(v0, dv, Ntries);


tlin = np.linspace(0,3,100);

xts = np.zeros((100, Ntries));
vts = np.zeros((100, Ntries));
for ii in np.arange(Ntries):
    xts[:,ii] = x0s[ii]*np.cos(omega*tlin)+v0s[ii]/omega*np.sin(omega*tlin);
    vts[:,ii] = -x0s[ii]*omega*np.sin(omega*tlin)+v0s[ii]*np.cos(omega*tlin);

f, (ax1,ax2) = plt.subplots(2,1, sharex=True)
ax1.plot(tlin, xts, 'bo', alpha = 0.1)
ax2.plot(tlin, vts, 'bo', alpha = 0.1)
ax1.set_xlabel('time $t$')
ax1.set_ylabel('position $x$')
ax2.set_ylabel('velocity $v$')
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, 'velocity $v$')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"qquantum_hardware_102_8_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"quite importantly we can only test one set of initial conditions for each trajectory. The particle cannot be at several positions at the same time. With quantum mechanics, we can now look into a system where this restriction gets lifted."}),`
`,i.jsx(e.h2,{children:"Quantum harmonic oscillator"}),`
`,i.jsx(e.h3,{children:"Finding the Hamiltonian"}),`
`,i.jsxs(e.p,{children:["To find the quantum mechanical analog to some classical equations of motion, we must re-express them in terms of a ",i.jsx(e.strong,{children:"Lagrangien"})," ",i.jsx(e.code,{className:"language-math math-inline",children:"L"}),". It is a functional, which depends on the position ",i.jsx(e.code,{className:"language-math math-inline",children:"x"})," and the independent velocity ",i.jsx(e.code,{className:"language-math math-inline",children:"\\dot{x}"}),". The equations of motion of the particle are then given as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d}{dt}\\left(\\frac{\\partial L}{\\partial \\dot{x}}\\right) = \\frac{\\partial L}{\\partial x}"})}),`
`,i.jsx(e.p,{children:"For the harmonic oscillator we have the Lagrangien:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"L_{h.o.} = \\frac{m\\dot{x}^2}{2}-\\frac{m\\omega^2}{2}x^2"})}),`
`,i.jsx(e.p,{children:"We can then identify from it several fundamental quantities:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["the kinetic energy of the particle ",i.jsx(e.code,{className:"language-math math-inline",children:"T = \\frac{m\\dot{x}^2}{2}"}),"."]}),`
`,i.jsxs(e.li,{children:["Its potential energy ",i.jsx(e.code,{className:"language-math math-inline",children:"V = \\frac{m\\omega^2}{2}x^2"}),"."]}),`
`,i.jsxs(e.li,{children:["Its total energy ",i.jsx(e.code,{className:"language-math math-inline",children:"E = T + V"})]}),`
`]}),`
`,i.jsxs(e.p,{children:["However, for the translation to quantum mechanics it is even more important that the Lagrangien allows us to define the ",i.jsx(e.em,{children:"conjugate momentum"})," to the position:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"p = \\frac{\\partial L}{\\partial \\dot{x}}"})}),`
`,i.jsx(e.p,{children:"We then obtain the classical Hamiltonian for the system, which is:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H = \\dot{x} p - L"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"H_{h.o.} = \\frac{p^2}{2m}+\\frac{m\\omega^2}{2}x^2"})}),`
`,i.jsx(e.p,{children:"We have now assembled all ingridients to 'quantize' the system."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"We know the Hamiltonian."}),`
`,i.jsx(e.li,{children:"We know its conjugate variables."}),`
`]}),`
`,i.jsx(e.p,{children:"The system is then described by the Hamiltonian:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{H}_{H.O.} = \\frac{\\hat{p}^2}{2m} + \\frac{m\\omega^2}{2}\\hat{x}^2"})}),`
`,i.jsx(e.p,{children:"and the commutation relationship:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"[\\hat{x}, \\hat{p}] = i\\hbar"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"[\\hat{x}, \\hat{p}] \\equiv \\hat{x} \\hat{p} - \\hat{p}\\hat{x}"})}),`
`,i.jsx(e.p,{children:"The fact that the commutators are not disappearing is telling us that for any quantum system we cannot observe its position and momentum to arbitrary position at the same time. A few notes before we continue:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["In the quantum mechanical system we can still have completely continouous observables ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{x}"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{p}"}),". Nothing has changed here."]}),`
`,i.jsx(e.li,{children:"As we will see we now have a quantized energy spectrum, which is a fundamental change to quantum mechanics."}),`
`,i.jsx(e.li,{children:"As we will also see, we can launch the system in a superposition of different initial conditions, which are then explored in a parallel fashion."}),`
`]}),`
`,i.jsx(e.h3,{children:"Time evolution"}),`
`,i.jsx(e.p,{children:"This set of equations allows us to obtain the equations of motion through the Heisenberg equation as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d \\hat{x}}{dt} = \\frac{i}{\\hbar}[\\hat{H}, \\hat{x}]"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d \\hat{p}}{dt} = \\frac{i}{\\hbar}[\\hat{H}, \\hat{p}]"})}),`
`,i.jsx(e.p,{children:"For the position the harmonic oscillator we obtain then:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d \\hat{x}}{dt} = \\frac{i}{\\hbar}[\\hat{H}_{H.O.}, \\hat{x}]"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= \\frac{i}{\\hbar}[\\frac{p^2}{2m}, \\hat{x}]"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= \\frac{\\hat{p}}{m}"})}),`
`,i.jsx(e.p,{children:"and for its momentum we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\frac{d \\hat{p}}{dt} = \\frac{i}{\\hbar}[\\hat{H}_{H.O.}, \\hat{p}]"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= \\frac{i}{\\hbar}[\\frac{m\\omega^2}{2} \\hat{x}^2, \\hat{p}]"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"= -m\\omega^2 \\hat{x}"})}),`
`,i.jsxs(e.p,{children:["So we are basically back at the set of differential equations, which looks similiar to what we had previously, except of th funny operator symbol on top of ",i.jsx(e.code,{className:"language-math math-inline",children:"x"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"p"}),". For all practical purposes you might see these operators as some massive matrices acting on some kind complex vectors ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi\\rangle"}),". A few comments here:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"To solve the problem you have to numerically solve the time evolution of the massive matrix and not only of one variable. One example of quantum paralellism."}),`
`,i.jsx(e.li,{children:"The state vectors contain the initial state as we will see in a moment."}),`
`,i.jsx(e.li,{children:"To solve the problem we typically decompose the matrices into the eigenstates and eigenvalues, which are then the energies."}),`
`,i.jsx(e.li,{children:"If you want to solve the problem analytically it is most common to work with the Schrödinger picture, but it looks a bit different on first sight and we will just leave it to the appendix for the moment."}),`
`]}),`
`,i.jsx(e.h3,{children:"Initial conditions"}),`
`,i.jsxs(e.p,{children:["In the quantum mechanical system we do not describe the initial conditions through its probability distributions anymore, but rather the wavefunction ",i.jsx(e.code,{className:"language-math math-inline",children:"|\\psi_0\\rangle"}),"."]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["Imagine that we are now observing the position of the particle. Each outcome is noted ",i.jsx(e.code,{className:"language-math math-inline",children:"|x_i \\rangle"}),". It is basically the points on the grid with a spacing set by the resolution of the detector or the size of my quantum computer etc. This discretization is just for a simpler discussion, you can also just replace the sums, by integrals if you would like."]}),`
`,i.jsxs(e.li,{children:["To each outcome we associate some complex number ",i.jsx(e.code,{className:"language-math math-inline",children:"\\psi(x_i)"})," to describe the initial condition."]}),`
`,i.jsxs(e.li,{children:["We obtain the probability distribution ",i.jsx(e.code,{className:"language-math math-inline",children:"P(x_i) = |\\psi(x_i)|^2"})]}),`
`]}),`
`,i.jsx(e.p,{children:"We then typically write the initial state as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_{init}\\rangle = \\int dx~\\psi(x) |x\\rangle\\langle x|"})}),`
`,i.jsx(e.p,{children:"Or if you prefer the discrete version:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_{init}\\rangle = \\sum_i \\alpha_i|x_i\\rangle"})}),`
`,i.jsx(e.p,{children:"So we can describe the initial state, by a vector whose entries are complex numbers and which fulfill the normalization conditions:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\int dx~ |\\psi(x)|^2 = 1"})}),`
`,i.jsxs(e.p,{children:["For conciseness it is always nice to just use a Gaussian with width ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_x"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`xlin = np.linspace(-10,10, 100);
sigmax = 1;
# initial shape
psiInit = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2);

# normalization
np.trapz(psiInit**2, xlin)

f, ax = plt.subplots()
ax.plot(xlin, psiInit)
ax.set_xlabel('position (x)')
ax.set_ylabel('$\\psi$')
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, '$\\\\psi$')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_15_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"But what about the momentum distribution ? In the same way as we were able to assign some values to the initial distribution of the position, we can associate some distribution for the distribution in momentum:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["We will note every possible outcome for position as ",i.jsx(e.code,{className:"language-math math-inline",children:"|k_j \\rangle"})]}),`
`,i.jsxs(e.li,{children:["We will associate its components with some complex value ",i.jsx(e.code,{className:"language-math math-inline",children:"\\beta_j"})]}),`
`]}),`
`,i.jsx(e.p,{children:"We then typically write the initial state as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_{init}\\rangle = \\int dk~\\psi(k) |k\\rangle\\langle k|"})}),`
`,i.jsx(e.p,{children:"Or if you prefer the discrete version:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"|\\psi_{init}\\rangle = \\sum_j \\beta_j|k_j\\rangle"})}),`
`,i.jsx(e.p,{children:"Once again the entries are complex numbers and fulfill the normalization condition:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\int dk~ |\\psi(k)|^2 = 1"})}),`
`,i.jsx(e.p,{children:"The two representations are not independent. They are connected through the Fourier transform:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\psi(k) = \\frac{1}{\\sqrt{2\\pi}}\\int dx \\psi(x) e^{-ikx}"})}),`
`,i.jsxs(e.p,{children:["For a Gaussian of width ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_x"})," in position space, this results in a gaussian of width ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_k = 1/2\\sigma_x"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`xlin = np.linspace(-10,10, 100);
klin = np.linspace(-10,10, 100);
sigmax = 1;
sigmak = 1/2/sigmax;
# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2);
psiInit_k = 1/(2*np.pi*sigmak**2)**(1/4)*np.exp(-klin**2/4/sigmak**2);

# normalization
np.trapz(psiInit_x**2, xlin)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.plot(xlin, psiInit_x)
ax1.set_xlabel('position $x$')
ax1.set_ylabel('$\\psi(x)$')
ax2.plot(klin, psiInit_k)
ax2.set_xlabel('momentum $k$')
ax2.set_ylabel('$\\psi(k)$')
f.tight_layout()
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_17_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"It is of fundamental importance to recognize that we can now choose initial conditions in which the particle is in several initial conditions at the same time. As an example it is perfectly valid to have a particle which is centered at zero, but is in a super position of opposite velocities."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`import scipy.fftpack as ft

Nx = 256;Nk = 100;
xlin = np.linspace(-10,10, Nx);

# size of the wavepackage
sigmax = 1;
#initial velocity
k0 = 4;

# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*1/np.sqrt(2)*(np.exp(1j*k0*xlin)+np.exp(-1j*k0*xlin));

# normalization
Nx = np.trapz(abs(psiInit_x)**2, xlin);
print(Nx)


# get its Fourier transform
dx = np.diff(xlin).mean()
k_fft = ft.fftfreq(xlin.size,d = dx)
k_fft = 2*np.pi*ft.fftshift(k_fft)
dk = np.diff(k_fft).mean()

psiInit_fft = np.fft.fftshift(np.fft.fft(psiInit_x));
# normalization
Nk = np.trapz(abs(psiInit_fft)**2, k_fft);
psiInit_fft = psiInit_fft/np.sqrt(Nk)

f, (ax1,ax2) = plt.subplots(2,1)
ax1.plot(xlin, abs(psiInit_x)**2)
ax1.set_xlabel('position $x$')
ax1.set_ylabel('$\\psi(x)$')
#ax2.plot(klin, psiInit_k)
ax2.plot(k_fft, abs(psiInit_fft)**2)
ax2.set_xlabel('momentum $k$')
ax2.set_ylabel('$\\psi(k)$')
f.tight_layout()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`1.0000000000000124
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_19_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Connection the dots"}),`
`,i.jsx(e.p,{children:`We have now seen how to define the initial conditions and how obtain the time evolution of momentum and position. To connect the two of them, we
have to look into expectation values, which are defined as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"x(t) = \\langle\\psi_0| \\hat{x}(t) |\\psi_0\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"p(t) = \\langle\\psi_0| \\hat{p}(t) |\\psi_0\\rangle"})}),`
`,i.jsx(e.p,{children:"This also allows us to obtain some typical classical equations of motion:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle\\psi_0|\\frac{d \\hat{x}}{dt} |\\psi_0\\rangle = \\frac{\\langle\\psi_0|\\hat{p}|\\psi_0\\rangle}{m}"})}),`
`,i.jsx(e.p,{children:"and for its momentum we obtain:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\langle\\psi_0|\\frac{d \\hat{p}}{dt} |\\psi_0\\rangle = -m\\omega^2 \\langle\\psi_0|\\hat{x}|\\psi_0\\rangle"})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from numpy import linalg as LA

Nx = 256;
xvec = np.linspace(-10,10, Nx);

omega = 1; m = 1; hbar = 1;

# kinetic energy
dx = np.diff(xvec).mean()

dia = -2*np.ones(Nx)
offdia = np.ones(Nx-1)
d2grid = np.mat(np.diag(dia,0) + np.diag(offdia,-1) + np.diag(offdia,1))/dx**2
d2grid[0,:]=0
d2grid[Nx-1,:]=0

Ekin = -hbar**2/(2*m)*d2grid
Ekin

# potential energy
x = np.mat(np.diag(xvec,0))
Vx = m*omega**2/2*xvec**2;
Epot = np.mat(np.diag(Vx,0))

H =  Ekin + Epot

# diagonalization
w, v = LA.eig(H)
# sort it such that things look nice later
sortinds = np.argsort(w)
EigVecs = v[:,sortinds]
EigVals = w[sortinds]

# size of the wavepackage
sigmax = 1;

#initial velocity
k0 = 4;

# initial shape
psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*1/np.sqrt(2)*(np.exp(1j*k0*xlin)+np.exp(-1j*k0*xlin));
#psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*np.exp(1j*k0*xlin);
#psiInit_x = 1/(2*np.pi*sigmax**2)**(1/4)*np.exp(-xlin**2/4/sigmax**2)*np.exp(-1j*k0*xlin);
psiInit_x = np.mat(psiInit_x).T
#transform to matrix
EigVals = np.mat(EigVals).T

# EigVecs contains the Eigenvectors as columns,
# conjugate transpose times Psi0 calculates the scalar product
# of every energy-eigenvector with Psi0 (yields the representation in the energy-eigenbasis)
Psi0Eig = EigVecs.H * psiInit_x

tmax = 30
NSteps = 300
dt = tmax/NSteps
meanx = np.zeros(NSteps)
xsq = np.zeros(NSteps)
ts = np.zeros(NSteps)
psi_t = 1j*np.zeros((Nx, NSteps))
n_t = np.zeros((Nx, NSteps))
t = 0
for k in range(0,NSteps):

    # Time evolution is just a phase evolution in the energy eigenbasis
    PsitEig = np.multiply( np.exp(-1j*EigVals/hbar*t),Psi0Eig )

    # Transform back to the grid representation (calculate the time-evolved
    # superposition of energy-eigenstates)
    Psit = EigVecs*PsitEig
    psi_t[:,k] = Psit.flatten();
    n_t[:,k] = np.array(np.abs(Psit.flatten()))**2;
    # calculate the mean position
    meanx[k] = np.real(Psit.H*x*Psit);
    xsq[k] = np.real(Psit.H*x**2*Psit);
    t = t+dt
    ts[k]=t

xstd = np.sqrt(xsq-meanx**2);

f, ax = plt.subplots()
ax.pcolormesh(ts, xvec, n_t);
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"quantum_hardware_102_21_0.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"So what is discrete or quanitized in the quantum harmonic oscillator ?"}),`
`,i.jsx(e.p,{children:"We have seen now that one fundamental difference between the classical and the quantum implementation of the harmonic oscillator is the possibility of superpositions in the initial state. This did not change that the observables are perfectly continuous variables. However the dramatic change happens in the accessible energy levels."}),`
`,i.jsx(e.h3,{children:"Energies for the classical harmonic oscillator"}),`
`,i.jsx(e.p,{children:"For the classical harmonic oscillator the energy is directly linked to the speed and the position of the particle and it is given as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_{h.o.} = \\frac{mv^2}{2}+\\frac{m\\omega^2}{2}x^2"})}),`
`,i.jsx(e.p,{children:"So it can take any value. For the quantum system this is dramatically different. The energies are quantized now and given by"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"E_n = \\hbar \\omega(n+1/2)\\mbox{ with }n\\in \\mathbb{N}"})}),`
`,i.jsx(e.p,{children:"So this thing is now discrete in the quantum version of the harmonic oscillator, not more and not less."}),`
`,i.jsx(e.h2,{children:"Summary"}),`
`,i.jsxs(e.p,{children:["In this tutorial we have seen the description of the quantum harmonic oscillator, how it connects to certain problems and how to solve this numerically. In the ",i.jsx(e.a,{href:"qhw3",children:"third tutorial"}),", we will see how it is used to trap and cool ions, which are one of the leading quantum computation platforms."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python"})})]})}function nce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(rT,{...t})}):rT(t)}const sT=Object.freeze(Object.defineProperty({__proto__:null,default:nce,frontmatter:tce},Symbol.toStringTag,{value:"Module"})),ice={author:["Fred Jendrzejewski"],order:3,title:"Tutorial 3 - A few words about quantum computing with trapped ions"};function oT(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:`In this tutorial, we are going to discuss the fundamental ingredients for
quantum computing with trapped ions.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["In a first step, we discuss trapping and cooling in a harmonic oscillator, which was introduced in the ",i.jsx(e.a,{href:"qhw2",children:"second tutorial"}),"."]}),`
`,i.jsxs(e.li,{children:["Then we can discuss the implementation and control of the single qubit as generally summarized in the ",i.jsx(e.a,{href:"qhw1",children:"first tutorial"})," operations."]}),`
`,i.jsx(e.li,{children:"Finally, we discuss how two ions are entangled through different two-qubit gates."}),`
`]}),`
`,i.jsxs(e.p,{children:[`Even if an enormous amount of additional literature
exists, I will only reference here to a `,i.jsx(e.a,{href:"https://arxiv.org/abs/1804.03719v1",children:"nice introduction"})," and a more complete list is left for future discussions."]}),`
`,i.jsx(e.h2,{children:"What do we want from a quantum computing hardware ?"}),`
`,i.jsx(e.p,{children:`In a QC we would like to implement algorithms, which are based on well
defined operations. Influential examples of such algorithms are the
quantum Fourier transform and the Grover algorithm.`}),`
`,i.jsxs(e.p,{children:[`Given that computations are often implemented through logical truth
tables, we typically base a quantum computer on qubits. We then call one
state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"}),` and on
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|1\\right\\rangle"}),`. Given that we would like to have
reproducable computations, we always assume that we start them out with
all qubits in the `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0\\right\\rangle"})," state."]}),`
`,i.jsx(e.p,{children:`A computation then consists then in applying a number of gates. The key is
here that any algorithm might be built up from an extremely limited
number of gates. Typically four are sufficient:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`The three gates that rotate each individual qubit on the Bloch
sphere.`}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:`A gate that entangles them properly. The standard example is here
the CNOT gate, which we will come back too.`}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`Such computations are then typically nicely visualized through circuit
diagrams often resulting from the interaction with programming framworks like `,i.jsx(e.code,{children:"pennylane"})," or ",i.jsx(e.code,{children:"qiskit"}),`. To make the programs flexible enough, we might want a checklist of what we want from a quantum computer hardware. DiVincenzo proposed
the `,i.jsx(e.a,{href:"https://www.sciencedirect.com/science/article/abs/pii/S0370157308003463?via%3Dihub",children:"following ingredients"}),":"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Qubits that can store information in a scalable system."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"The ability to initialize the system in the right state."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"A universal set of gates."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Long coherence times, which are much longer than gate operation times."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Good measurement capabilities"}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`Trapped ions allow us to fulfill all these requirements as we will see
in this lecture and we will go through them step-by-step.`}),`
`,i.jsx(e.h2,{children:"Trapping and cooling"}),`
`,i.jsxs(e.p,{children:[`For computing experiments one typically works with singe-charged ions
like `,i.jsx(e.code,{className:"language-math math-inline",children:"Ca^+"}),`. Given their charge, they can be trapped in very clean
traps under vacuum. As such they are extremely well isolated from the
environment and high precision experiments can be performed. Finally,
they have only one remain electron in the outer shell. Therefore they
have a hydrogenlike atomic structure.`]}),`
`,i.jsxs(e.p,{children:[`However, the trap construction is not trivial given Maxwells equation
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\text{div} \\vec{E} = 0"}),`. So, the experimentalists have to play some
tricks with oscillating fields. We will not derive in detail how a
resulting `,i.jsx(e.strong,{children:"Paul trap"})," works, but the ",i.jsx(e.a,{href:"https://youtu.be/Xb-zpM0UOzk",children:`linked
video`}),` gives a very nice impression of the
idea behind it.`]}),`
`,i.jsxs(e.p,{children:[`This work on trapping ions dates back to the middle of the last century
(!!!) and was recognized by the`,i.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1989/summary/",children:` Nobel prize in
1989`}),` for
Wolfgang Paul and Hans Dehmelt. They shared
the prize with Norman Ramsey, who developped extremely precise
spectroscopic methods, now known as Ramsey spectroscopy.`]}),`
`,i.jsx(e.p,{children:`A Paul trap provides a harmonic oscillator confinement with trapping
frequencies in the order of hundreds of kHz. An ion trapped in such a
trap can the be described by the Hamiltonian:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H}_{t} &= \\frac{\\hat{p}^2}{2m}+ \\frac{m\\omega_t^2}{2}\\hat{x}^2\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:["The two variables ",i.jsx(e.code,{className:"language-math math-inline",children:"p"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"x"})," are non-commuting ",i.jsx(e.code,{className:"language-math math-inline",children:"[x, p] = i\\hbar"}),`, so
they cannot be measured at the same time. It can be nicely diagonalized
in terms of the ladder operators:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{x} &= \\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}+\\hat{a}^\\dagger\\right)\\\\
\\hat{p} &= i\\sqrt{\\frac{\\hbar}{2m\\omega_t}}\\left(\\hat{a}^\\dagger-\\hat{a}\\right)\\\\\\end{aligned}`})}),`
`,i.jsx(e.p,{children:"So the Hamiltonian can now be written as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &= \\hbar \\omega_t \\left(\\hat{N} + \\frac{1}{2}\\right)\\text{ with } \\hat{N} = a^\\dagger a
\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`Having loaded the ions into the Paul trap we also need to cool them
down.`}),`
`,i.jsx(e.h2,{children:"Atom-light interaction"}),`
`,i.jsx(e.p,{children:`Given that the ions keep only on atom on the outer shell, they have a
hydrogenlike structure, which makes them well controllable with light.`}),`
`,i.jsxs(e.p,{children:["Experimentally, we will then use light of amplitude ",i.jsx(e.code,{className:"language-math math-inline",children:"E_0"})," and frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_L"}),":"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\vec{E}(t) &= \\vec{E}_0 \\cos(kx - \\omega_L t+\\varphi)\\\\
&= \\frac{\\vec{E}_0}{2} \\left(e^{i[kx - \\omega_lt+\\varphi]}+e^{-i[kx-\\omega_lt+\\varphi]}\\right) \\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`We will describe the interal states of the ion for the moment with the
simple two state system of ground state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g\\right\\rangle"}),` and excited state
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e\\right\\rangle"})," at an energy ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_0"}),`, which
is typically in the order of thousands of THz. It has the Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
H_{ion} = \\hbar \\omega_0 \\left|e\\right\\rangle\\left\\langle e\\right|\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`Putting this ion into propagating light will induce a coupling between
these two internal states. As previously , we will describe the coupling
in the semi-classical approximation through
`,i.jsx(e.code,{className:"language-math math-inline",children:"H_\\textrm{int} = -\\hat{\\vec{D}} \\cdot \\vec{E}"}),`. However, in this
context we will not ignore the propagating nature of the light field and
keep its position dependence. This is necessary as we would like to
understand how the light influences the movement of the atoms and not
only the internal states. Putting them together we obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
H_\\textrm{int} &= \\frac{\\Omega}{2}\\left([\\left|g\\right\\rangle\\left\\langle e\\right|+\\left|e\\right\\rangle\\left\\langle g\\right|]e^{i(k \\hat{x} - \\omega_L t+\\varphi)} + h.c.\\right)\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`The laser frequency is tuned closely to the frequency of the internal
state transition and we will be only interested in the detuning
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = \\omega_0 - \\omega_L"}),`. Importantly, it couples the position of
the atom and the internal states.`]}),`
`,i.jsx(e.p,{children:`To simplify the problem, we can work in the rotating frame to describe
the external and internal degrees of freedom for the ion:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H}= \\hbar \\omega_t \\hat{a}^\\dagger \\hat{a} + \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\left(k \\hat{x}+\\varphi\\right)} + h.c.\\right)\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`We will now see how this system is used to cool the ions to the motional
groundstate, perform single qubit operations and then two-qubit
operations.`}),`
`,i.jsx(e.h2,{children:"Doppler cooling"}),`
`,i.jsxs(e.p,{children:[`This interaction of the atom with a photon is at the origin of the
all-important Laser cooling, which was pioneered for ions in the 1970s
(!!) by the Wineland group. For cooling transition we couple the ground
state to an excited state of finitie lifetime `,i.jsx(e.code,{className:"language-math math-inline",children:"\\tau= \\frac{1}{\\Gamma}"}),"."]}),`
`,i.jsxs(e.p,{children:[`This laser cooling had a tremendous impact on the field of atomic
physics in general. This importance was
recognized in the `,i.jsx(e.a,{href:"https://www.nobelprize.org/prizes/physics/1997/summary/",children:"Nobel prizes of 1997"}),` for Steve Chu , Claude
Cohen-Tannoudji and Bill Phillips.`]}),`
`,i.jsx(e.h3,{children:"Working in the Lamb-Dicke regime"}),`
`,i.jsx(e.p,{children:`After this initial cooling stage the atoms have to be cooled to the
ground state in the trap. To treat the trapped particles we will express
the position operator in terms of the ladder operator, such that:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
k\\hat{x} &= \\eta (\\hat{a}^\\dagger+ \\hat{a})\\\\
\\eta &= \\sqrt{\\frac{\\hbar^2 k^2/2m}{\\hbar \\omega_t}} =\\sqrt{\\frac{E_R}{\\hbar \\omega_t}}\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"\\eta"})," is called the ",i.jsx(e.em,{children:"Lamb-Dicke"}),` parameter. It compares the change in
motional energy due to the absorption of the photon
`,i.jsx(e.code,{className:"language-math math-inline",children:"E_r = \\frac{(\\hbar k)^2}{2m}"}),` compared to the energy spacing
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\hbar \\omega_t"}),` in the trap. When it is small it suppresses the change
of the motional state of the atom due to the absorption of a photon.`]}),`
`,i.jsxs(e.p,{children:["For simplicity we will set in this section ",i.jsx(e.code,{className:"language-math math-inline",children:"\\varphi=0"}),` and develop the
exponent to obtain:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
H_\\textrm{int} &= \\frac{\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|\\left(1 + i\\eta[\\hat{a}^\\dagger+ \\hat{a}]\\right) + h.c.\\right)\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`So it contains three couplings for different trap levels and internal
states:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"carrier"}),` transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"red"}),` sideband
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n-1\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega(n+1)"}),`. It leads to a reduction of the
trap level and it is resonant for `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = -\\omega_t"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.em,{children:"blue"}),` sideband
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|g,n\\right\\rangle\\rightarrow \\left|e,n+1\\right\\rangle"}),`
with strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega n"}),`. It leads to an increase of the trap
level and it is resonant for `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Delta = \\omega_t"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:["This scheme is used to perform ",i.jsx(e.strong,{children:"Raman side-band cooling"}),`. The laser is
tuned on the transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|n,g\\right\\rangle\\rightarrow \\left|n-1,e\\right\\rangle"}),`
such that each absorption involves a reduction in the trap level. This
set-up for cooling was first demonstrated in 1995 by the Wineland group.`]}),`
`,i.jsx(e.p,{children:`It is at this stage that the ions are in the motional ground state and
we can focus our attention to the high control of the internal qubit
states of the ion for quantum computing.`}),`
`,i.jsx(e.h2,{children:"Single-qubit operations"}),`
`,i.jsxs(e.p,{children:[`The single qubit operations can now be identified with the transition
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|e,n\\right\\rangle\\leftrightarrow \\left|g,n\\right\\rangle"}),`.
We can then simplify the above equation too:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H}= \\hbar\\Delta \\left|e\\right\\rangle\\left\\langle e\\right| + \\frac{\\hbar\\Omega}{2}\\left(\\left|e\\right\\rangle\\left\\langle g\\right|e^{i\\varphi} +\\left|g\\right\\rangle\\left\\langle e\\right|e^{-i\\varphi}\\right)
\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`We can translate this into the language of qubit operations through the
definitions:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\sigma_z &= \\frac{\\left|e\\right\\rangle\\left\\langle e\\right|-\\left|g\\right\\rangle\\left\\langle g\\right|}{2}\\\\
\\sigma_x &= \\frac{\\left|e\\right\\rangle\\left\\langle g\\right|+\\left|g\\right\\rangle\\left\\langle e\\right|}{2}\\\\
\\sigma_y &= \\frac{i\\left|e\\right\\rangle\\left\\langle g\\right|-i\\left|g\\right\\rangle\\left\\langle e\\right|}{2}
\\end{aligned}`})}),`
`,i.jsx(e.p,{children:"So we can now simply write the Hamiltonian as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H}/\\hbar &= \\Delta \\sigma_z +\\Omega_x \\sigma_x +\\Omega_y \\sigma_y\\\\
\\Omega_x &= \\Omega \\cos(\\varphi)\\\\
\\Omega_y &= \\Omega \\sin(\\varphi)
\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`In the QC community people rarely talk about the Pauli matrices, but
much rather about a few specific gates. The most cited here is the
`,i.jsx(e.em,{children:"Hadamard"}),` gate, which transforms
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|0/1\\right\\rangle\\rightarrow \\frac{\\left|0\\right\\rangle\\pm\\left|1\\right\\rangle}{\\sqrt{2}}"}),`.
So it has no good classical analog. Further a double application brings
us back to the origin.`]}),`
`,i.jsxs(e.p,{children:["The other gate we named about was a Z gate, which is simply a ",i.jsx(e.code,{className:"language-math math-inline",children:"\\pi"}),`
rotation around the z axis.`]}),`
`,i.jsx(e.h2,{children:"Two-qubit operations"}),`
`,i.jsx(e.p,{children:`To implement a quantum computer the system has to be completed by a
two-qubit operation. For ions a number of two-qubit gates exist:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"Cirac-Zoller"})," gate was the ",i.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.74.4091",children:"first proposed"})," two-qubit gate and it was also the first one realized within the ",i.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.75.4714",children:"same year"})," ."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.a,{href:"https://journals.aps.org/prl/abstract/10.1103/PhysRevLett.82.1971",children:i.jsx(e.strong,{children:"Soerensen-Moelmer"})})," gate was proposed later, but it is extremely important from a practical point of view as it leads to very high entanglement fidelities."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["Another realization, which we mention for completeness is the ",i.jsx(e.a,{href:"https://www.nature.com/articles/nature01492",children:"geometric phase-gate"}),", which is used in the NIST group."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`We will now discuss a bit the Soerensen-Moelmer gate. In this set-up two ions sit in a common trap. The cost of energy for exciting one of the ions will be
labelled `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_t"}),` as in the first section. So we assume that the
scheme starts in the state `,i.jsx(e.code,{className:"language-math math-inline",children:"\\left|ggn\\right\\rangle"}),`, where
both atoms are in the internal ground-state `,i.jsx(e.code,{className:"language-math math-inline",children:"g"}),` and in some excited trap
level `,i.jsx(e.code,{className:"language-math math-inline",children:"n"}),"."]}),`
`,i.jsx(e.p,{children:`In the next step, these two ions experience two lasers, which are
coupling excited and the ground state of the ions:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["One laser has frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_1=\\omega_0-\\omega_t+\\delta"}),` and Rabi
coupling strength `,i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),". It is therefore only slightly detuned from the transitions ",i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n-1\\rangle |ge,n-1\\rangle"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The second laser has frequency ",i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_2=\\omega_0+\\omega_t-\\delta"})," and Rabi coupling strength ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Omega"}),". It is therefore only slightly detuned from the transitions ",i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n+1\\rangle |ge,n+1\\rangle"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`The gate is then operated in the regime of small coupling strength
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\eta \\Omega n \\ll \\delta"}),`. In this case coupling to the excited
motional states `,i.jsx(e.code,{className:"language-math math-inline",children:"n\\pm 1"}),` is suppressed by a factor of
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\frac{\\eta \\Omega n}{\\delta}"}),`. On the other hand we are exactly on
resonance for the two-photon transitions
`,i.jsx(e.code,{className:"language-math math-inline",children:"|ggn\\rangle\\rightarrow|eg,n+1\\rangle\\rightarrow|ee,n\\rangle"}),` etc. So we
can do second-order pertubation theory or
adiabatic elimination to obtain the
effective Hamiltonian:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
H_\\mathrm{SM} &= \\frac{\\Omega_\\mathrm{SL}}{2}\\left(\\left|ggn\\right\\rangle\\left\\langle een\\right| + (\\left|een\\right\\rangle\\left\\langle ggn\\right|\\right)\\text{ with }\\Omega_{SL} = -\\frac{(\\Omega \\eta)^2}{2(\\eta - \\delta)}\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:["So starting out with the state ",i.jsx(e.code,{className:"language-math math-inline",children:"\\left|gg\\right\\rangle"}),` and
applying the laser for `,i.jsx(e.code,{className:"language-math math-inline",children:"t\\Omega =\\frac{\\pi}{2}"}),`, we obtain the entangled
state that we are looking for.`]}),`
`,i.jsxs(e.p,{children:[`The operation of the gate was first demonstrated in 2000 by the Wineland
group and allowed at the time for generating a Bell state with a
`,i.jsx(e.a,{href:"https://www.nature.com/articles/35005011",children:"fidelity of 83%"}),". This limit has been increasingly pushed of the years and now reaches the 99.9% region."]}),`
`,i.jsx(e.p,{children:`Such a fidelity sounds very impressive on first sight and it is by now
the result of several decades of work. However, in a quantum computer we
would like to chain a large number of these gates behind each other.`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 10 iterations the fidelity dropped to 99%."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 100 iterations the fidelity dropped to 90%."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"After 1000 iterations the fidelity dropped to 30%."}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:`So even with such an excellent fidelity it will barely be possible to
chain much more than 100 gates before the some extremely iffy things
start to happen.`}),`
`,i.jsx(e.p,{children:`So we have experimentally the choice of entanglement tool in the way
that is most adapted to our work.`}),`
`,i.jsx(e.h2,{children:"Summary"}),`
`,i.jsx(e.p,{children:"Trapped ions have now become a major platform for quantum computation and in this tutorial, we have discussed the main ingriedients that underlie the computation. If you would like to use the devices, there are now emerging three major competitors within this technology stack:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.a,{href:"https://ionq.com/",children:"IonQ"})," is based in Maryland with Chris Monroe as one of the founders. It was one of the first pure quantum computation companies and is now publically traded at the NASDAQ."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.a,{href:"https://www.aqt.eu/",children:"AQT"})," is a european company that is closely connected to the research team in Innsbruck around some of the founding fathers of the field like Rainer Blatt or Peter Zoller."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.a,{href:"https://www.quantinuum.com/",children:"Quantinuum"})," has its traditions in the NIST Boulder region on the hardware side. Despite their slightly younger age as a company they have recently demonstrated very high fidelity processors and became one of the leading players."]}),`
`]}),`
`]}),`
`,i.jsx(e.p,{children:"In next weeks tutorial, we will move on to superconducting qubits and see how they are implementated."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python"})})]})}function ace(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(oT,{...t})}):oT(t)}const lT=Object.freeze(Object.defineProperty({__proto__:null,default:ace,frontmatter:ice},Symbol.toStringTag,{value:"Module"})),rce={author:["Fred Jendrzejewski"],order:4,title:"Tutorial 4 - A few words about quantum computing with superconducting qubits"};function cT(t){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["We have seen in the ",i.jsx(e.a,{href:"./2",children:"last tutorial"}),` the
possibilities of quantum computation with trapped ions. However, a second major platform are superconducting qubits. They the platform of choice of commercial giants like `,i.jsx(e.a,{href:"https://quantumai.google/",children:"google"}),", ",i.jsx(e.a,{href:"https://www.ibm.com/quantum",children:"IBM"})," or ",i.jsx(e.a,{href:"https://www.rigetti.com/",children:"Rigetti"}),`.
In this tutorial, we will identify the existence of qubits in superconducting circuits, the different gates and the read-out. We will finish by a comparison in the computing performance of trapped ions and
superconducting qubits.`]}),`
`,i.jsx(e.h2,{children:"The quantum LC-oscillator"}),`
`,i.jsx(e.p,{children:`As in the second tutorial, we have to find the appropiate harmonic oscillator, but this time in electric circuits. Then we can discuss
the need of the Josephson junction for the implementation of
superconducting qubits.`}),`
`,i.jsxs(e.p,{children:[`The fundamental ingredient for superconducting qubits are LC
oscillators, which are simply put a loop of wire which is not closed. To study
its quantum behavior we will closely follow the discussion in Sec. II of
`,i.jsx(e.a,{href:"https://arxiv.org/abs/1904.06560v2",children:`"A Quantum Engineer's Guide to Superconducting Qubits"`}),"."]}),`
`,i.jsx(e.p,{children:`In electrical engineering we first have to identify the conjugate
variables within the circuit. We will therefore follow the standard procedure of:`}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Identifying the equations of motion."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Identify the Lagrangien."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Identify the conjugate variables."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Write down the Hamiltonian."}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsx(e.p,{children:"Quantize the Hamiltonian."}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`While it might be overly complicated for simple LC circuits it provides
a powerful framework for more complex systems (see `,i.jsx(e.a,{href:"https://doi.org/10.1103/physrevlett.108.240502",children:"Nigg et al."}),`
)`]}),`
`,i.jsx(e.h3,{children:"Lagrangien formulation"}),`
`,i.jsxs(e.p,{children:["The wire is caracterized by an ",i.jsx(e.em,{children:"inductivity"}),`, which is counteracting the
change in current:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
V = L\\frac{dI}{dt}\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:["and a ",i.jsx(e.em,{children:"capacitance"}),`, which allows us
to measure the cost of putting charges on the ends of the wire:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
I = C\\frac{dV}{dt}\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`To put it under a partical form for
quantization we typically express them through the flux, which is
defined as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\Phi(t) = \\int_{-\\infty}^tV(t')dt'\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`The electromagnetic
energy stored within the loop of wire is in general given by:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
E(t) &= \\int_{-\\infty}^t V(t')I(t')dt'\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`We then obtain the
energies:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
E_{kin} = \\frac{1}{2}C\\dot{\\Phi}^2\\\\
E_{pot} = \\frac{1}{2L}\\Phi^2\\\\\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`This now leads to the
Lagrangien:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
L &= \\frac{1}{2}C\\dot{\\Phi}^2-\\frac{1}{2L}\\Phi^2\\end{aligned}`})}),`
`,i.jsx(e.h3,{children:"Quantization"}),`
`,i.jsx(e.p,{children:"We can now identify the conjugate momentum the flux as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\frac{\\partial L}{\\partial\\dot{\\Phi}} &= C \\dot{\\Phi}\\\\
&= Q\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`So the charge is the conjugate variable to the flux
in the loop. They will be therefore the two fundamental variables of
quantum theory, very much like position and momentum are for massive
particles.`}),`
`,i.jsx(e.p,{children:"We can now write down the Hamiltonian as:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
H &= Q\\dot{\\Phi}- L\\\\
&= \\frac{Q^2}{2C}+\\frac{\\Phi^2}{2L}\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`At this stage we can
quantize the system through the commutation relation:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
[\\hat{\\Phi},\\hat{Q}]&= i\\hbar\\\\
\\hat{H} &= \\frac{\\hat{Q}^2}{2C}+\\frac{\\hat{\\Phi}^2}{2L}\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`So it is once again a harmonic oscillator with resonance frequency
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_r = \\frac{1}{\\sqrt{LC}}"})," and 'mass' ",i.jsx(e.code,{className:"language-math math-inline",children:"C"}),". So the system reads:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &= \\hbar \\omega_r \\left(\\hat{a}^\\dagger a + \\frac{1}{2}\\right)\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`While this is now a quantum system, it is manifestly not a qubit as the
transitions are equidistant in energy with `,i.jsx(e.code,{className:"language-math math-inline",children:"\\omega_r"}),`. The typical order
of magnitude is here 3-6GHz.`]}),`
`,i.jsxs(e.p,{children:["To prepare for the introduction of superconducting elements, we typically rewrite the equations above in terms of dimensionless quantities. Namely the Cooper pair density ",i.jsx(e.code,{className:"language-math math-inline",children:"n = \\frac{Q}{2e}"})," and the reduced flux ",i.jsx(e.code,{className:"language-math math-inline",children:"\\phi= 2\\pi \\Phi/\\Phi_0"})," with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\Phi_0 = \\frac{h}{2e}"}),". These two quantities correspond directly to the density and the phase of the superconducting wavefunction that we will discuss in the next section. We then obtain the Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"\\begin{aligned} \\hat{H} = 4E_C n^2 + \\frac{1}{2}E_L \\varphi^2\\end{aligned}"})," So we quantify the influence of each lump element through their energy:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"E_C=\\frac{e^2}{2C}"})," is the energy required to add a cooper pair."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"E_L=\\frac{(\\Phi_0/2\\pi)^2}{L}"})," is the inductive energy"]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"The Josephson junction"}),`
`,i.jsxs(e.p,{children:[`To resolve the degeneracy we need to make the oscillator anharmonic.
This is done through `,i.jsx(e.em,{children:"Josephson junctions"}),`, which are the backbone of
superconducting electronics (very much like the transistor or the diode
are classical electronics). To understand them roughly, we will fall
back on the `,i.jsx(e.a,{href:"http://www.feynmanlectures.caltech.edu/III_21.html",children:`Feynman
picture`}),` of
Josephson dynamics.`]}),`
`,i.jsx(e.h3,{children:"A simplistic picture of superconductivity"}),`
`,i.jsxs(e.p,{children:[`We could spend several lectures to understand the physics of Josephson
junctions in all its gory details. A good overview might be found in the
following books `,i.jsx(e.a,{href:"https://www.crcpress.com/Superfluidity-and-Superconductivity/Tilley-Tilley/p/book/9780750300339",children:"(D.R. Tilley, 1990"}),"; ",i.jsx(e.a,{href:"https://books.google.de/books?id=VpUk3NfwDIkC",children:"Tinkham, 2004)"}),`. However, the basic idea is that the fermionic electrons form cooper
pairs at very low temperatures. These pairs are bosonic and can hence
condense into a macroscopic wavefunction: `,i.jsx(e.code,{className:"language-math math-inline",children:`\\begin{aligned}
\\psi(x,t) &= \\sqrt{n}e^{i\\varphi(x,t)}\\end{aligned}`}),` Now the system can
be understood through the following relations:`]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["the density is given by ",i.jsx(e.code,{className:"language-math math-inline",children:"n= |\\psi(x,t)|^2"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The velocity is set by the gradient of the phase
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\vec{v}= \\frac{\\hbar}{2m_e}\\nabla \\varphi"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The voltage is set by the time evolution of the phase
`,i.jsx(e.code,{className:"language-math math-inline",children:"V = \\frac{\\hbar}{2e} \\frac{\\partial \\varphi}{\\partial t}"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.h3,{children:"The Josephson relations"}),`
`,i.jsx(e.p,{children:`A Josephson junction describes now a system where two superconducting
regions are slightly separated by a normal metal such that only
tunneling is allowed between the two regions.`}),`
`,i.jsx(e.p,{children:"We can now write down the Schrödinger equation for this setup:"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
i\\hbar \\partial_t \\psi_L &= \\frac{eV}{2}\\psi_L+J \\psi_R\\\\
i\\hbar \\partial_t \\psi_R &= -\\frac{eV}{2}\\psi_R+J \\psi_L\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"V"})," is the voltage applied to the junction and ",i.jsx(e.code,{className:"language-math math-inline",children:"J"}),` is the tunneling
element. We now use the decomposition to write:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\dot{n}_L &= \\frac{2}{\\hbar}J\\sqrt{n_Rn_L}\\sin(\\delta )\\\\
\\dot{n}_R &= -\\frac{2}{\\hbar}J\\sqrt{n_Rn_L}\\sin(\\delta)\\\\
\\phi &=\\varphi_L-\\varphi_R\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`We can now use it to write
down the current-phase relationship:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
I &= I_c\\sin(\\phi)\\\\
I_c &= \\frac{2}{\\hbar}Jn\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`We can once again integrate the
equation of motion to obtain:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} = 4E_Cn^2-E_J \\cos(\\phi)\\\\
E_C = \\frac{e^2}{2(C+C_J)}\\\\
E_J = \\frac{I_C\\Phi_0}{2\\pi}\\end{aligned}`})}),`
`,i.jsx(e.h2,{children:"Single qubit control"}),`
`,i.jsx(e.p,{children:`Superconducting qubits can be controlled either through inductive or
capacitive coupling. Inductive coupling is widely used for flux-qubits
like the rf-squid. However, here we focus on the transmon qubit, which
is typically capacitavely coupled`}),`
`,i.jsx(e.p,{children:`Going through the quantization procedure we discussed above, we can write
the circuit Hamiltonian as:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &= \\frac{\\tilde{Q}^2}{2C_\\Sigma}+\\frac{\\Phi^2}{2L}+\\frac{C_d}{C_\\Sigma}V_d(t)\\tilde{Q}\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:[`The charge is defined for this system as
`,i.jsx(e.code,{className:"language-math math-inline",children:"\\tilde{Q} = C_\\Sigma\\dot{\\Phi} - C_d V_d(t)"}),`. In the limit of weak
coupling `,i.jsx(e.code,{className:"language-math math-inline",children:"C_d V_d \\ll C_\\Sigma \\dot{\\Phi}"}),`, we have can quantize the
system as before and only need to understand the influence of the last
term.`]}),`
`,i.jsx(e.p,{children:`The second part of the Hamiltonian resembles strong the electric dipole
coupling we discussed in the last lecture. It contains the displaced
charge, which is linearly coupled to an oscillating electric field. So
we can rewrite the charge once again in terms of raising an lower
operators and arrive at the coupled Hamiltonian:`}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &= \\frac{\\omega_t}{2}\\hat{\\sigma}_z+\\Omega V_d(t)\\hat{\\sigma}_y\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`All the other discussions are equivalent to our discussion on the ion
and any other single qubit system.`}),`
`,i.jsx(e.h2,{children:"Generating entanglement"}),`
`,i.jsx(e.p,{children:`Having identified the qubit, we can now also implement the entanglement
gate to build the universal quantum computer. Different options exist:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:[`The qubit island could be coupled through a mutual capacitance, such
that `,i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_{int}= C_g V_1 V_2"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The qubit island could be coupled through a mututal inductance, such that ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{H}_{int}= M_{12} I_1 I_2"}),"."]}),`
`]}),`
`]}),`
`,i.jsxs(e.p,{children:[`Typically the inductive coupling is chosen in a regime of very small
coupling `,i.jsx(e.code,{className:"language-math math-inline",children:"C_g \\ll C_1, C_2"}),", where the ",i.jsx(e.code,{className:"language-math math-inline",children:"C_i"}),` describe the transmon
qubits. The full Hamiltonian reads then:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &=\\hat{H}_{T,1}+\\hat{H}_{T,2}+4e^2\\frac{C_g}{C_1C_2}n_1n_2\\end{aligned}`})}),`
`,i.jsxs(e.p,{children:["we identified here ",i.jsx(e.code,{className:"language-math math-inline",children:"V_i = \\frac{2e}{C_i}n_i"}),`. We can now further rewrite
the occupation in terms of raising and lowering operators
`,i.jsx(e.code,{className:"language-math math-inline",children:"n\\propto i(a-a^\\dagger)"}),`, which is can be expressed as a Pauli matrix for
the buttom manifold. So we actually have the coupling:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
\\hat{H} &=\\hat{H}_{T,1}+\\hat{H}_{T,2}+g\\sigma_{y,1}\\sigma_{y,2}\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`While this basic operating principle of capacitive coupling is indeed
widely used, it is worth to read the fine-print as the different actual
implementation can to different 2-Qubit gates:`}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"iSWAP"})," gate is the implementation of the ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_y \\sigma_y"}),`
coupling.`]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"phase"})," gate, shows very high fidelities, but makes it necessary to tune the freuqency of the qubit. It implements a ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_z \\sigma_z"}),"-coupling on the spins. Fidelities of > 99% were demonstrated for this gate ",i.jsx(e.a,{href:"https://doi.org/10.1038/nature13171",children:"(Barends et al., 2014)"}),"."]}),`
`]}),`
`,i.jsxs(e.li,{children:[`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.strong,{children:"cross-resonance"}),` (CR) gate is only controlled through
microwaves. It implements the a `,i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_x \\sigma_z"}),`-coupling on the
spins. This is gate employed by IBM `,i.jsx(e.a,{href:"https://doi.org/10.1103/physrevlett.107.080502",children:"(Chow et al., 2011)"}),"."]}),`
`]}),`
`]}),`
`,i.jsx(e.h2,{children:"A CNOT gate constructed from the physical entangling gates"}),`
`,i.jsx(e.p,{children:`We would now like to discuss how we can use the capacitive coupling to
implement a CNOT gates. This discussion is closely related to the
possibility of using a Soerensen-Molmer gate, discussed in lecture 2, to
implement a CNOT gate.`}),`
`,i.jsxs(e.p,{children:["The ",i.jsx(e.code,{className:"language-math math-inline",children:"\\sigma_y \\sigma_y"}),` coupling for the right amount of leads to a
coupling matrix:`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:`\\begin{aligned}
iSWAP &= \\left(\\begin{array}{cccc}
1 & 0 & 0 & 0\\\\
0 & 0 &-i & 0\\\\
0 & -i & 0 & 0\\\\
0 & 0 & 0 & 1
\\end{array}\\right)\\end{aligned}`})}),`
`,i.jsx(e.p,{children:`The iSWAP can then be used to
represent the CNOT gate.`}),`
`,i.jsxs(e.p,{children:[`So we will focus shortly on the current limitations of qubit systems.
Please be aware that this is a rapidly evolving field, so most likely
the paragraph will be outdated within a few months. One good summary can
be found in `,i.jsx(e.a,{href:"https://doi.org/10.1073/pnas.1618020114",children:"(Linke et al., 2017)"})," and written by an ion trapping group."]}),`
`,i.jsx(e.h2,{children:"Summmary"}),`
`,i.jsx(e.p,{children:"In this tutorial, we discussed how the two level system is implemented in superconducting devices and how they are coupled. This should give you a basic feeling for this widely used hardware platform and its limitations."})]})}function sce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(cT,{...t})}):cT(t)}const hT=Object.freeze(Object.defineProperty({__proto__:null,default:sce,frontmatter:rce},Symbol.toStringTag,{value:"Module"})),oce={author:["Fred Jendrzejewski"],order:5,title:"Tutorial 5 - Quantum simulation with cold atoms"};function uT(t){const e={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the previous lessons we talked about ",i.jsx(e.a,{href:"qhw3",children:"trapped ions"})," and ",i.jsx(e.a,{href:"qhw4",children:"superconducting qubits"}),". They are the leading platforms for the creation of ",i.jsx(e.strong,{children:"universal quantum computers"}),", which hold the premise of exponential speed-up for a variety of NP-hard problems. However, this universality usually comes at the price of algorithmic overhead for a wide range of tasks which generally leads to worse overall fidelity. If we give up the constraint of a universal quantum computer, we can build specialized quantum hardware for the problems of interest. Such systems are called quantum simulators. Cold atoms have become a leading platform of such quantum simulators at a large scale. Already demonstrated applications involve an enormous variety of condensed-matter problems like e.g. the ",i.jsx(e.a,{href:"https://journals.aps.org/rmp/abstract/10.1103/RevModPhys.80.885",children:"Hubbard model"}),", topological systems, ",i.jsx(e.a,{href:"https://www.sciencedirect.com/science/article/abs/pii/S1049250X06540017?via%3Dihub",children:"superfluidity"})," and ",i.jsx(e.a,{href:"https://physicstoday.scitation.org/doi/10.1063/1.3206091",children:"disorder"}),". More recently, cold atoms started to find applications to ",i.jsx(e.a,{href:"https://arxiv.org/abs/2002.07413",children:"Ising models"})," and ",i.jsx(e.a,{href:"https://royalsocietypublishing.org/doi/full/10.1098/rsta.2021.0064",children:"high-energy physics"}),". "]}),`
`,i.jsx(e.h2,{children:"Summary for the cold atoms hardware "}),`
`,i.jsx(e.p,{children:"Ultracold atoms are gases that are well isolated from the environment and are cooled to near zero and in this regard quite close to trapped ion systems, which also heavily draw on the experimental techniques of atomic physics and optics. At such low temperatures, quantum effects are dominant in the behavior of the gas cloud. Thanks to their precise control and flexibility, they are now a well-established platform for the quantum simulation of complex quantum problems. "}),`
`,i.jsx(e.p,{children:"The high precision and versatility have made cold atoms one of the dominating quantum hardware platforms in the European academic research sector. To underline the fact, in Heidelberg alone there are four research groups working with cold atoms. Munich, Hamburg and Bonn have similar numbers. France has at least 20 research groups on cold atoms, 1 on trapped ions and a handful on superconducting qubits. Similar numbers hold for Italy."}),`
`,i.jsx(e.h2,{children:"Qubits based on Rydberg atoms"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Use case"}),": The same as trapped ions and superconducting qubits"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Companies"}),": Pasqal, Quera, Atom Computing, ColdQuanta, planqc"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Research Groups"}),": Paris, Harvard, Caltech, Munich, Heidelberg, … "]}),`
`]}),`
`,i.jsx(e.p,{children:"The situation, which is closest to superconducting qubit systems are Rydberg quantum simulators. In these systems the atoms are confined in optical tweezer and strongly interact when they are excited into Rydberg states , as such implementing interacting qubit systems. They share many of features, which are similar to ions and superconducting qubits. The Hamiltonian, which is implemented in these systems, is a complex Ising type model:"}),`
`,i.jsxs(e.p,{children:[i.jsx(e.code,{className:"language-math math-inline",children:"H=\\sum_i\\hat{\\sigma}_{x,i}+\\sum_iU_{ij}\\hat{n}_i\\hat{n}_j "}),", with ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{\\sigma}_{x,i}=| r⟩⟨g​|_i+| g⟩⟨r​|_i"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"\\hat{n}_i=|r⟩⟨r​|_i"}),"."]}),`
`,i.jsxs(e.p,{children:["They are currently, well established candidates for the quantum simulation of maximum-independent set problems, which already let to the foundation of the start-ups ",i.jsx(e.a,{href:"https://pasqal.io/",children:"Pasqal"}),", ",i.jsx(e.a,{href:"https://www.quera.com/",children:"Quera"}),", ",i.jsx(e.a,{href:"https://atom-computing.com/",children:"Atom Computing"}),", ",i.jsx(e.a,{href:"https://coldquanta.com/",children:"ColdQuanta"})," or ",i.jsx(e.a,{href:"https://www.planqc.eu/",children:"planqc"}),"."]}),`
`,i.jsx(e.h2,{children:"Itinerant particles built from cold atoms"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Use case"}),": Condensed matter, chemistry"]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Research Groups"}),": Munich, Heidelberg, Zurich, Harvard, … "]}),`
`,i.jsxs(e.li,{children:[i.jsx(e.strong,{children:"Representable as circuit"}),": Yes"]}),`
`]}),`
`,i.jsx(e.p,{children:"The most widely used configuration of cold atoms are moving atoms in some external optical potential. The atomic clouds are typically trapped by focused laser beams, which can be shaped in a flexible fashion. As such a wide variety of systems exists:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Traps with hundreds of thousands of atoms, which emulate superfluid behavior and Bose-Einstein condensation."}),`
`,i.jsx(e.li,{children:"Traps with hundreds of atoms for the study of continuous variables and large-scale entanglement."}),`
`,i.jsx(e.li,{children:"Optical lattices from the interference of laser beams are now widely used for the study of lattice models in condensed matter with system sizes well above the 100 sites and atoms."}),`
`]}),`
`,i.jsx(e.p,{children:"Additionally, the quantum statistics can be tuned widely:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Working with fermionic or bosonic isotopes the atoms can directly emulate fermionic or bosonic problems."}),`
`,i.jsx(e.li,{children:"If a large number of bosons are condensed into a single spatial mode they can form large collective spins, i.e. continuous variables, from their internal degrees of freedom."}),`
`,i.jsx(e.li,{children:"The connection between moving particles and spin degrees leads to a variety of exotic behaviors like topological band structures, if needed."}),`
`]}),`
`,i.jsx(e.p,{children:"The particles are interacting in various ways:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Most Alkali based system are described through a simple contact interaction."}),`
`,i.jsx(e.li,{children:"Alkaline-earth atoms and Rydberg systems have long range interactions."}),`
`]}),`
`,i.jsx(e.p,{children:"The readout of the system can be performed in various fashion:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Spatially resolved fluorescence imaging provides a destructive, state-sensitive readout. "}),`
`,i.jsx(e.li,{children:"Depending on the measurement protocol momentum or position can be measured."}),`
`,i.jsx(e.li,{children:"[Dispersive measurements allow for weak measurement protocols."}),`
`]}),`
`,i.jsx(e.p,{children:"If the external potential is an optical lattice they provide a synthetic realization of strongly correlated lattice models as visualized in Figure 2."}),`
`,i.jsx(e.p,{children:"Nowadays, the systems are used for the study of quantum dynamics with quench protocols very similar to quantum computation systems as visualized on the right-hand side of the figure. Those experiments realize the Hubbard model:"}),`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"H= -J\\sum_i(\\hat{c}_{i+1}^\\dagger \\hat{c}_i+h.c.) +\\frac{U}{2}\\sum_i \\hat{n}_i(\\hat{n}_i-1)"})}),`
`,i.jsx(e.p,{children:"As such they have been widely employed for the study of many-body problems, which come originally from condensed matter. In the early stages this was used to study ground state properties of complex systems like unitary fermions or strongly correlated lattice systems. Importantly, experiments have gone well into the regime of non-perturbative theories. They are therefore well-established benchmarks for sophisticated numerical techniques, which would be otherwise uncontrolled."}),`
`,i.jsxs(e.p,{children:["Currently, this kind of quench experiments have to be completely programmed at the hardware level. However, with ",i.jsx(e.a,{href:"https://qiskit-extensions.github.io/qiskit-cold-atom/tutorials/03_fermionic_tweezer_hardware.html",children:"qiskit-cold-atoms"})," it is now possible to emulate such problems and a hardware integration seems only like a question of time."]}),`
`,i.jsx(e.h2,{children:"Application to quantum chemistry"}),`
`,i.jsx(e.p,{children:"As IBM already demonstrated beautifully in previous experiments, molecular systems are made for the study of NISQ devices. However, the translation of the fermionic electrons on Qubits currently involves complex transformations like the Jordan-Wigner transformation. These can lead to substantial overhead and substantially increase the required circuit depth. Using fermionic atoms in microtraps, we directly emulate the chemistry problem onto the hardware."}),`
`,i.jsx(e.p,{children:"In these systems the molecule is translated into its orbital basis. Each orbit is then represented by the occupation of a fermion of an optical tweezer. These fermionic systems are described by a hopping term HJand a non-commuting interaction term HU. As such they become a potential resource for variational algorithms, which again would heavily benefit from an integration."}),`
`,i.jsx(e.p,{children:"These systems are also excellent candidates for the quantum simulation of chemistry problems as they naturally realize interacting fermions on different spatial orbits."}),`
`,i.jsx(e.p,{children:"Mixed integer problems in atomic mixtures"}),`
`,i.jsx(e.p,{children:"Use cases: High-energy physics. Power plant optimization"}),`
`,i.jsx(e.p,{children:"Research Groups: MIT, Heidelberg, Karlsruhe, Harvard, JILA "}),`
`,i.jsx(e.p,{children:"Atomic mixtures are an extension to cold atoms as the provide the ability to let two independent atomic species interact. As such they are an ideal platform to study complex problems, which are defined on complex computational sectors as we describe for lattice gauge theories. "}),`
`,i.jsx(e.p,{children:"In the fundamental laws of physics, gauge fields mediate the interaction between charged particles. An example is quantum electrodynamics—the theory of electrons interacting with the electromagnetic field—based on U(1) gauge symmetry. Solving such gauge theories is in general a hard problem for classical computational techniques. While quantum computers suggest a way forward, it is difficult to build large-scale digital quantum devices required for complex simulations. In cold atoms, we work on a fully scalable analog quantum simulator of a U(1) gauge theory in one spatial dimension. Some experiments demonstrated the experimental realization of the elementary building block as a key step towards a platform for large-scale quantum simulations of continuous gauge theories."}),`
`,i.jsxs(e.p,{children:["In the experiments one atomic species emulates the gauge fields described by the Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"H_g"})," and the other species the matter field with Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"H_m"}),", interacting through a coupling Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"H_{mg}"}),". In the typical experiments the gauge field is tuned through an x-rotation and then the system is left to evolve under the full Hamiltonian ",i.jsx(e.code,{className:"language-math math-inline",children:"H=H_g+H_m+H_{mg}"})," :"]}),`
`,i.jsx(e.p,{children:i.jsx(e.code,{className:"language-math math-inline",children:"H= \\chi \\sum_ i\\hat{L}_{z,i}^2+M\\sum_i (-1)^i\\hat{n}_i+J\\sum_i(\\hat{c}_{i+1}^\\dagger\\hat{L}_{+,i}\\hat{c}_i+h.c. )"})}),`
`,i.jsxs(e.p,{children:["These Hamiltonian are extremely demanding computationally as the gauge field is defined on the Hilbert space of a ",i.jsx(e.a,{href:"qhw2",children:"continuous variable"})," ",i.jsx(e.code,{className:"language-math math-inline",children:"L"})," and the matter field on the Hilbert space of itinerant fermions. As such it presents a physical example of a NP-hard mixed-integer problem."]}),`
`,i.jsxs(e.p,{children:["Again, this kind of experiments have to be completely programmed at the hardware level. Quite importantly, this translation currently requires a good knowledge of the hardware from all participants, even high-energy physicists. This makes the experiments currently extremely cumbersome to translate from atomic physics to high-energy physics and back. As such they are one of the interesting use cases that drove the development of ",i.jsx(e.a,{href:"https://github.com/Qiskit-Extensions/qiskit-cold-atom",children:"qiskit-cold-atoms"}),"."]}),`
`,i.jsx(e.h2,{children:"Machine learning and power plant optimization"}),`
`,i.jsxs(e.p,{children:["Machine learning algorithms heavily draw on similar problems like chemistry as they attempt to optimize energy functionals. However, in those problems some of the variables are typically ",i.jsx(e.a,{href:"qhw2",children:"continuous variables"})," and some ",i.jsx(e.a,{href:"qhw1",children:"binary"}),". These mixed-integer optimization problems are NP hard to solve on classical hardware. The continuous variables on the other hand make them extremely resource intensive for qubit-based systems. Cold atoms show a way forward to employ continuous variables and qubits directly into the system and employ a variational algorithm on them. Similar problems arise for power plant optimizations, when the power plant can give certain power outputs above a certain threshold. Both topics are under active investigation, but currently suffer from the lack of an intermediate programming layer between the users and the hardware developers."]}),`
`,i.jsx(e.h2,{children:"Summary"}),`
`,i.jsx(e.p,{children:"This is the last lesson of this course. You learned:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"That cold atoms have become one of the leading quantum simulation platforms."}),`
`,i.jsx(e.li,{children:"Rydberg atoms can implement qubit systems, which are similar to trapped ions of superconducting qubits."}),`
`,i.jsx(e.li,{children:"Cold atoms can easily tackle complex problems with itinerant particles."}),`
`]})]})}function lce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(uT,{...t})}):uT(t)}const dT=Object.freeze(Object.defineProperty({__proto__:null,default:lce,frontmatter:oce},Symbol.toStringTag,{value:"Module"})),cce={author:["Fred Jendrzejewski"],order:0,title:"QML 001 - A summary of classical supervised learning"};function mT(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"In this tutorial, we will discuss some basic ideas behind classical supervised learning before we jump into the quantum part."}),`
`,i.jsx(e.p,{children:"The notebook is structured as follows:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["We introduce the learning task of classifying data points ",i.jsx(e.code,{className:"language-math math-inline",children:"x_i"})," with labels ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i"})]}),`
`,i.jsx(e.li,{children:"We introduce simple classification through logistic regression with bias and weight."}),`
`,i.jsx(e.li,{children:"We provide simple training"}),`
`,i.jsx(e.li,{children:"We test the performance of the circuit."}),`
`]}),`
`,i.jsxs(e.p,{children:['We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature. So readers thank think "yet another tutorial on logistic regression", can most likely directly jump to the very ',i.jsx(e.a,{href:"qml101",children:"first tutorial"})," on quantum machine learning."]}),`
`,i.jsx(e.h2,{children:"A simple learning task"}),`
`,i.jsx(e.p,{children:"For simplicity we will start out with a simple problem, where each data set has only a single variable and extend it later to higher dimensional data sets."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0* (x <  1)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel(r"input value $x_i$");
ax.set_ylabel(r"label $y_i$");
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_3_0.png",alt:"png"})}),`
`,i.jsxs(e.p,{children:["The learning task is now to predict the label ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i"})," from the input value ",i.jsx(e.code,{className:"language-math math-inline",children:"x_i"}),". To get started we have to divide the data set into a training part and a test part:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["On the ",i.jsx(e.em,{children:"training set"})," we will optimize the algorithm to achieve the highest possible accuracy in predicting the label."]}),`
`,i.jsxs(e.li,{children:["On the ",i.jsx(e.em,{children:"test set"})," we will test the performance of the algorithm with data it has never seen."]}),`
`]}),`
`,i.jsx(e.p,{children:"The usual problem is here to find a good balance between a sufficient amount of training data, yet leaving enough test data to have a statistically significant test."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from sklearn.model_selection import train_test_split
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_6_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Logistice regression as a minimal algorithm"}),`
`,i.jsxs(e.p,{children:["It is now time to set up the algorithm for the training. We will use ",i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Logistic_regression",children:"logistic regression"}),", despite the fact that this horse has been ridden to death. It is has just all the right ingredients that are necessary to agree on basic concepts and notations. The logistic function itself is defined as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"p(x) = \\frac{1}{1+e^{-(W\\cdot x+b)}}"})}),`
`,i.jsx(e.p,{children:"It has a number of useful properties for us:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"It interpolates nicely between 0 and 1."}),`
`,i.jsxs(e.li,{children:["The value of the transition is set by the ",i.jsx(e.em,{children:"bias"})," ",i.jsx(e.code,{className:"language-math math-inline",children:"b"}),". For ",i.jsx(e.code,{className:"language-math math-inline",children:"x \\gg b"})," the exponential goes to zero and ",i.jsx(e.code,{className:"language-math math-inline",children:"p(x) \\rightarrow 1"}),", while it goes to 0 for the other side."]}),`
`,i.jsxs(e.li,{children:["The sharpness of the transition is set by the weight ",i.jsx(e.code,{className:"language-math math-inline",children:"W"}),", which tells us how much of an influence we should attach to the input value ",i.jsx(e.code,{className:"language-math math-inline",children:"x"}),"."]}),`
`]}),`
`,i.jsx(e.p,{children:"Below you can find a general example of such a logistic regression."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weight = 3
bias = 1

y_log = 1/(1+np.exp(-(weight*x+bias)))
f, ax = plt.subplots()
ax.plot(x, y_log, 'o')
ax.set_xlabel('x_i')
ax.set_ylabel('p(x)')
ax.set_title("logistic regression");
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_8_0.png",alt:"png"})}),`
`,i.jsxs(e.p,{children:["We can use this logistic regression for labelling, but simply deciding that the label is 0, if ",i.jsx(e.code,{className:"language-math math-inline",children:"p(x) <\\frac{1}{2}"})," and and 1 if ",i.jsx(e.code,{className:"language-math math-inline",children:"p(x) > \\frac{1}{2}"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_accuracy(weight: float, bias: float, xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the logistic regression for a given set of data.

    Args:
      weight: the training parameter for the weight
      bias: the training parameter for the bias
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        y_log = 1/(1+np.exp(-(weight*xinput+bias)))
        pred_label = 1.0*(y_log>1/2)
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,i.jsx(e.p,{children:"And now we can have a look at the labeling with some randomly guessed initial values."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weight = -0.8
bias = 0
accuracy, y_pred = get_accuracy(bias = bias, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has an accuracy of 0.85





<matplotlib.legend.Legend at 0x7f75c9992110>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_12_2.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"As we can see above there is quite a regime, where the model does to predict the labels very well. This can be improved by training the model parameters systematically."}),`
`,i.jsx(e.h2,{children:"Training the minimalistic algorithm"}),`
`,i.jsxs(e.p,{children:["To improve the performance of the circuit, we have to train it. This basically involves the minimization of some loss function as a function of the circuit parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"W"})," and ",i.jsx(e.code,{className:"language-math math-inline",children:"b"}),". In this example, we can simply calculate the accuracy of the circuit as a function of the bias and obtain its minimimum."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weight = -1

Nbias = 101
biases = np.linspace(-2, 2, Nbias)
accuracies = np.zeros(Nbias)

for ii, bias_val in enumerate(tqdm(biases)):
    accuracy, y_pred = get_accuracy(bias = bias_val, weight=weight, xvals=x_train, yvals=y_train)
    accuracies[ii] = accuracy
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`100%|██████████| 101/101 [00:00<00:00, 761.27it/s]
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`opt_bias = biases[accuracies.argmax()]

f, ax = plt.subplots()
ax.plot(biases, accuracies)
ax.axvline(opt_bias, color="C1", label="optimal bias")
ax.set_ylabel("accuracy")
ax.set_xlabel("biases")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`<matplotlib.legend.Legend at 0x7f75bd886f10>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_16_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We clearly identify a optimal value for the bias at which the accuracy is maximal. This allows to test the accuracy on the optimal value of the weights again to obtain."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(bias = opt_bias , weight= weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_18_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Testing the algorithm"}),`
`,i.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    bias = opt_bias, weight=weight, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend();
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has a test accuracy of 1.0
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_001_20_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Summary of classical supervised learning"}),`
`,i.jsx(e.p,{children:"In this tutorial, we studied some basic concepts like training and classification for an extremely simple case. We saw:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"the existence of a classification algorithm."}),`
`,i.jsx(e.li,{children:"How it relates input and output label."}),`
`,i.jsx(e.li,{children:"How it is trained."}),`
`,i.jsx(e.li,{children:"How it is tested on test data."}),`
`]}),`
`,i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"https://colab.research.google.com/drive/1XMkIBrU1lBLTT-oVufVTifHivss0HDI1?usp=sharing",children:"first tutorial on QML"}),", we will see how this translate in the simplest fashion to quantum algorithms."]})]})}function hce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(mT,{...t})}):mT(t)}const fT=Object.freeze(Object.defineProperty({__proto__:null,default:hce,frontmatter:cce},Symbol.toStringTag,{value:"Module"})),uce={author:["Fred Jendrzejewski"],order:1,title:"QML 101 - Some basic concepts"};function pT(t){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsx(e.p,{children:"This is the second part of our beginners guide to quantum machine learning. In the last part we introduced some basic notions of classical supervised learning, on which we will build up on. In this tutorial, we will discuss some basic ideas behind quantum machine learning. Hereby, we focus on classifiers, which are part of the big class of supervised (deep) learning algorithms."}),`
`,i.jsx(e.p,{children:"The notebook is structured as follows:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["We introduce the learning task of classifying data points ",i.jsx(e.code,{className:"language-math math-inline",children:"x_i"})," with labels ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i"})]}),`
`,i.jsx(e.li,{children:"We introduce the circuit structure and the cost function."}),`
`,i.jsx(e.li,{children:"We provide simple training"}),`
`,i.jsx(e.li,{children:"We test the performance of the circuit."}),`
`]}),`
`,i.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature."}),`
`,i.jsx(e.h2,{children:"A simple learning task"}),`
`,i.jsx(e.p,{children:"For simplicity we will start out with a simple problem, where each data set has only a single variable and extend it later to higher dimensional data sets."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`# only necessary on colab

!pip install qiskit
!pip install pylatexenc
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0 * (abs(x) > np.pi / 2)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, 'label')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_4_1.png",alt:"png"})}),`
`,i.jsxs(e.p,{children:["The task will then be to predict the label ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i"})," from the input value ",i.jsx(e.code,{className:"language-math math-inline",children:"x_i"}),". To get started we have to divide the data set into a training part and a test part:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["On the ",i.jsx(e.em,{children:"training set"})," we will optimize the algorithm to achieve the highest possible accuracy in predicting the label."]}),`
`,i.jsxs(e.li,{children:["On the ",i.jsx(e.em,{children:"test set"})," we will test the performance of the algorithm with data it has never seen."]}),`
`]}),`
`,i.jsx(e.p,{children:"The usual problem is here to find a good balance between a sufficient amount of training data, yet leaving enough test data to have a statistically significant test."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from sklearn.model_selection import train_test_split
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_7_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"A first algorithm"}),`
`,i.jsx(e.p,{children:"It is now time to set up the algorithm for the training. Given that there are only two labels, we can directly work with a single qubit. The algorithm is then of the following structure:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Prepare the initial state."}),`
`,i.jsxs(e.li,{children:["Apply a parametrized circuit with parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{w}"})," that depend on the input ",i.jsx(e.code,{className:"language-math math-inline",children:"U(\\mathbf{w}, x_i)"}),"."]}),`
`,i.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,i.jsxs(e.p,{children:["In the simplest of all cases, we might then just apply a single qubit rotation with the angle ",i.jsx(e.code,{className:"language-math math-inline",children:"w x_i"})]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer

sim = Aer.get_backend("aer_simulator")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`theta = Parameter(r"$\\theta$")

qc = QuantumCircuit(1)
qc.rx(theta, 0)
qc.measure_all()
qc.draw("mpl")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_10_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weight: float, xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      weight: the training parameter
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta: weight * xinput},
            inplace=False,
        )
        # run the job and obtain the counts
        job = sim.run(circuit, shots=1000)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < 500)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weight = 0.8

accuracy, y_pred = get_accuracy(qc, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has an accuracy of 0.9





<matplotlib.legend.Legend at 0x7ff478a0ef70>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_13_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Training"}),`
`,i.jsxs(e.p,{children:["To improve the performance of the circuit, we have to train it. This basically involves the minimization of some loss function as a function of the circuit parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{w}"}),". In this example we can simply calculate the accuracy of the circuit as a function of the weight and obtain its minimimum."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weights = np.linspace(0, 2, 50)
accuracies = np.zeros(50)

for ii, weight_val in enumerate(tqdm(weights)):
    accuracy, y_pred = get_accuracy(qc, weight=weight_val, xvals=x_train, yvals=y_train)
    accuracies[ii] = accuracy
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`100%|███████████████████████████████████████████| 50/50 [00:06<00:00,  8.14it/s]
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`opt_weight = weights[accuracies.argmax()]

f, ax = plt.subplots()
ax.plot(weights, accuracies)
ax.axvline(opt_weight, color="C1", label="optimal weight")
ax.set_ylabel("accuracy")
ax.set_xlabel("weights")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`<matplotlib.legend.Legend at 0x7ff4aca197f0>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_16_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to obtain."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weight=opt_weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_18_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Test"}),`
`,i.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weight=opt_weight, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7ff4acb05cd0>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_101_20_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Outlook for supervised learning"}),`
`,i.jsx(e.p,{children:"In this tutorial, we studied some basic concepts like training and classification for an extremely simple case."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["In the ",i.jsx(e.a,{href:"qml102",children:"next tutorial"}),", we will see how deeper circuits allow us to learn more complex dependencies between input and output."]}),`
`,i.jsx(e.li,{children:"The extension towards higher dimensional inputs allows us to look into more complext tasks like image processing."}),`
`]})]})}function dce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(pT,{...t})}):pT(t)}const gT=Object.freeze(Object.defineProperty({__proto__:null,default:dce,frontmatter:uce},Symbol.toStringTag,{value:"Module"})),mce={author:["Fred Jendrzejewski"],order:2,title:"QML 102 - Deeper Classifiers"};function xT(t){const e={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./1",children:"last tutorial"})," we saw the most basic ideas of quantum machine learning algorithms. They included:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"division in training and test data"}),`
`,i.jsx(e.li,{children:"simple training"}),`
`,i.jsx(e.li,{children:"accuracy tests."}),`
`]}),`
`,i.jsxs(e.p,{children:["However, all of this happened in an extremely simple case, which allowed us to work with simple algorithms. In this tutorial, we will discuss the possibility to learn more complicated structures with deeper circuits. As in the last tutorial, the task will be once again the classification of data points ",i.jsx(e.code,{className:"language-math math-inline",children:"x_i"})," with labels ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i"}),". However the structure will be more complicated, such that the previous circuits would fail. So in this tutorial we will learn:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"deeper reuploading circuits"}),`
`,i.jsx(e.li,{children:"training with optimizers."}),`
`,i.jsxs(e.li,{children:["All circuits will be implemented with ",i.jsx(e.code,{children:"qiskit"})," because of its wide ranging use."]}),`
`]}),`
`,i.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature and later tutorials."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`# only necessary on colab to have all the required packages installed

!pip install qiskit
!pip install pylatexenc
`})}),`
`,i.jsx(e.h2,{children:"The learning task"}),`
`,i.jsx(e.p,{children:"As previously, we will focus on a problem with one dimensional input data, which we associate with a label {0, 1}. However, the data set has a strucute, which will require deeper circuits."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
x = np.random.uniform(-np.pi, np.pi, 100)
y = 1.0 * (abs(x) > 1.4*np.pi/2)

f, ax = plt.subplots()
ax.plot(x, y, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0, 0.5, 'label')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_4_1.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    x, y, test_size=0.20, random_state=42
)


f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`Text(0.5, 1.0, 'test data')
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_6_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"A deeper algorithm"}),`
`,i.jsxs(e.p,{children:["To achieve training for this more complex data set we have to work with a ",i.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". It is similiar to our previous approach as it does the following."]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Prepare the initial state."}),`
`,i.jsxs(e.li,{children:["Apply a parametrized circuit with parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{w}"})," that depend on the input ",i.jsx(e.code,{className:"language-math math-inline",children:"U(\\mathbf{w}, x_i)"}),"."]}),`
`,i.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,i.jsxs(e.p,{children:["However, the circuit has now a structure, where input parameter is is applied again and again, interleaved with some processing layer. This allows for non-trivial classification tasks, which was analyzed in great detail ",i.jsx(e.a,{href:"https://journals.aps.org/pra/abstract/10.1103/PhysRevA.103.032430",children:"here"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`theta = Parameter(r"$\\theta$")
alpha1 = Parameter(r"$\\alpha_1$")
qc = QuantumCircuit(1)
qc.rx(theta, 0)
qc.rz(alpha1, 0)
qc.rx(theta, 0)
qc.measure_all()
qc.draw("mpl")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_9_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, alpha: float, weight: float,
    xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameter
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta: weight*xinput,
             alpha1: alpha,
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < Nshots/2)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`weight = 1
alpha = np.pi/4

accuracy, y_pred = get_accuracy(qc, alpha=alpha, weight=weight, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The circuit has an accuracy of {accuracy}")
f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has an accuracy of 0.275





<matplotlib.legend.Legend at 0x7f1f9a216a10>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_12_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Training"}),`
`,i.jsxs(e.p,{children:["We once again have to train the circuit. However, this time it does not have a single training variable, but four. We therefore have to fall back to ",i.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:i.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weight = params_flat[0]
        alpha = params_flat[1]
        accuracy, y_pred = get_accuracy(qc, alpha=alpha, weight=weight, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=2)
params_flat = params.flatten()

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`accuracy = 0.675
accuracy = 0.6
accuracy = 0.775
accuracy = 0.65
accuracy = 0.4
accuracy = 0.9
accuracy = 0.65
accuracy = 0.65
accuracy = 0.825
accuracy = 0.825
accuracy = 1.0
accuracy = 0.925
accuracy = 0.9625
accuracy = 1.0
accuracy = 0.9625
accuracy = 0.975
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
accuracy = 1.0
`})}),`
`,i.jsx(e.p,{children:"We can see that the accuracy is converging throughout the training quite nicely and it is now time to look into the optimal training parameters."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`opt_weight, opt_alpha = res.x
print(f"optimal weight = {opt_weight}")
print(f"optimal alpha = {opt_alpha}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`optimal weight = 0.5093757145525236
optimal alpha = 1.3032510317367447
`})}),`
`,i.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weight=opt_weight, alpha = opt_alpha, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()


print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit has an accuracy of 1.0
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_20_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Test"}),`
`,i.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weight=opt_weight, alpha = opt_alpha, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7f1f99613150>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_102_22_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Summary and outlook"}),`
`,i.jsx(e.p,{children:"In this tutorial, we have seen that the extension of the circuit to deeper structures allows us to learn training sets, which were previously impossible to evaluate. In the next tutorials, we will extend these circuits in two directions:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Work with larger dimensions of input parameters. This is what we would like to do quantum machine learning anyways and where the main innovation of the data reuploading circuits lies."}),`
`,i.jsx(e.li,{children:"Work on circuits with multiple qubits to classify different classes and introduce entanglement in a systematic fashion."}),`
`]})]})}function fce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(xT,{...t})}):xT(t)}const yT=Object.freeze(Object.defineProperty({__proto__:null,default:fce,frontmatter:mce},Symbol.toStringTag,{value:"Module"})),pce={author:["Fred Jendrzejewski"],order:3,title:"QML 103 - Teaching the circle"};function bT(t){const e={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./2",children:"last tutorial"})," we saw how deeper algorithms allow us to model more complex dependencies of single input variables and binary labels. However, it is now time to train the algorithms on problems with more than a single input variable it is common in image recognition etc."]}),`
`,i.jsx(e.p,{children:"In this tutorial, we will introduce slightly more complex data sets and see how we can handle the classification with data reuploading circuits. We will learn:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"that more input parameters require deeper circuits."}),`
`,i.jsx(e.li,{children:"the required dimension of the circuit is only set by the number of labels in the problem. So in this most basic ideas of quantum machine learning algorithms."}),`
`]}),`
`,i.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature and later tutorials."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`# only necessary on colab to have all the required packages installed

!pip install qiskit
!pip install pylatexenc
`})}),`
`,i.jsx(e.p,{children:"And we also install the other dependencies"}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,i.jsx(e.h2,{children:"Learning two-dimensional inputs"}),`
`,i.jsxs(e.p,{children:["We will now work with a problem with data that have two-dimensional input ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{x}_i = (x_{1,i}, x_{2,i})"})," and as previously a binary label ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i \\in \\{0, 1\\}"}),". A nice example of such a data-set is a circle in a plane as visualized below."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def circle(samples: int, center: List[float] = [0.0, 0.0], radius:float =np.sqrt(2 / np.pi)) -> Union[np.array, np.array]:
    """
    Produce the data set of a circle in a plane that spans from -1 to +1

    Args:
      sample: The number of samples we would like to generate
      center: where should be the center of the circle
      radius: What should be the radius of the sample
    Returns:
      The array of the xvalues and the array of the labels.
    """
    xvals, yvals = [], []

    for i in range(samples):
        x = 2 * (np.random.rand(2)) - 1
        y = 1
        if np.linalg.norm(x) < radius:
            y = 0
        xvals.append(x)
        yvals.append(y)
    return np.array(xvals), np.array(yvals)


def plot_data(x, y, fig=None, ax=None, title=None):

    if fig == None:
        fig, ax = plt.subplots(1, 1, figsize=(5, 5))
    reds = y == 0
    blues = y == 1
    ax.scatter(x[reds, 0], x[reds, 1], c="red", s=20, edgecolor="k")
    ax.scatter(x[blues, 0], x[blues, 1], c="blue", s=20, edgecolor="k")
    ax.set_xlabel("$x_1$")
    ax.set_ylabel("$x_2$")
    ax.set_title(title)


xdata, ydata = circle(200)
fig, ax = plt.subplots(1, 1, figsize=(4, 4))
plot_data(xdata, ydata, fig=fig, ax=ax)
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_5_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    xdata, ydata, test_size=0.20, random_state=42
)

f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_test, y_test, fig=f, ax=ax2, title="test data")

f.tight_layout()
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_7_0.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Working with multiple inputs"}),`
`,i.jsxs(e.p,{children:["To achieve training now, we have to upload all the input parameters into the circuit. We will once again follow the ",i.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". In summary, we will"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsx(e.li,{children:"Prepare the initial state."}),`
`,i.jsxs(e.li,{children:["Apply a parametrized circuit with parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{w}"})," that depend on the input ",i.jsx(e.code,{className:"language-math math-inline",children:"U(\\mathbf{w}, \\mathbf{x}_i)"}),"."]}),`
`,i.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,i.jsxs(e.p,{children:["The main difference is now that the upload ",i.jsx(e.code,{className:"language-math math-inline",children:"S(\\mathbf{x}_i)"})," will have multiple rotations. In our fairly simple case of two input parameters, we will then set it as:"]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-math math-display",children:"\\hat{S}(x_{1,i}, x_{2,i}) = \\hat{R}_z(w_2 \\cdot x_2) \\hat{R}_x(w_1 \\cdot x_1)"})}),`
`,i.jsxs(e.p,{children:["Let us just visualize it once in ",i.jsx(e.code,{children:"qiskit"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`theta1 = Parameter(r"$\\theta_1$")
theta2 = Parameter(r"$\\theta_2$")

alpha0 = Parameter(r"$\\alpha_0$")
alpha1 = Parameter(r"$\\alpha_1$")

beta0 = Parameter(r"$\\beta_0$")
beta1 = Parameter(r"$\\beta_1$")

gamma0 = Parameter(r"$\\gamma_0$")
gamma1 = Parameter(r"$\\gamma_1$")


#alpha1 = Parameter(r"$\\alpha_1$")
qc = QuantumCircuit(1)

# first upload
qc.rx(theta1, 0)
qc.rz(theta2, 0)

# first processing
qc.rx(alpha0, 0)
qc.rz(beta0, 0)
qc.rx(gamma0, 0)

# second upload
qc.rx(theta1, 0)
qc.rz(theta2, 0)

# second processing
qc.rx(alpha1, 0)
qc.rz(beta1, 0)
qc.rx(gamma1, 0)


qc.measure_all()
qc.draw("mpl")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_10_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weights: List[float] , alphas: List[float], betas: List[float], gammas: List[float],
    xvals: List[float], yvals: List[int]
) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameters for the z processing gate
      gammas: the training parameters for the x processing gate
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta1: weights[0]*xinput[0],
             theta2: weights[1]*xinput[1],
             alpha0: alphas[0],
             alpha1: alphas[1],
             beta0: betas[0],
             beta1: betas[1],
             gamma0: gammas[0],
             gamma1: gammas[1],
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()

        # obtain the predicted label on average
        if "0" in counts1:
            pred_label = 1 * (counts1["0"] < Nshots/2)
        else:
            pred_label = 1
        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(123)

weights = np.random.uniform(size=2)
alphas = np.random.uniform(size=2)
betas = np.random.uniform(size=2)
gammas = np.random.uniform(size=2)

accuracy, y_pred = get_accuracy(qc, alphas=alphas, betas = betas, weights=weights, gammas = gammas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The randomly initialized circuit has an accuracy of {accuracy}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The randomly initialized circuit has an accuracy of 0.3875
`})}),`
`,i.jsx(e.p,{children:"Now it is time to visualize the quality of the prediction with random parameters. We can clearly see that the overlap is ... random."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_15_0.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Training"}),`
`,i.jsxs(e.p,{children:["We once again have to train the circuit as discussed in the",i.jsx(e.a,{href:"qml102",children:" previous tutorial"})," with ",i.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:i.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weights = params_flat[:2]
        alphas = params_flat[2:4]
        betas = params_flat[4:6]
        gammas = params_flat[6:]
        accuracy, y_pred = get_accuracy(qc, alphas=alphas, betas = betas, weights=weights, gammas = gammas, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=8)
params_flat = params.flatten()

# initial parameters which are guessed
weights = np.array([1,1])
alphas = [0,0]
betas = [0,0]
gammas = [0,0]
params_flat = np.zeros(8)
#params_flat[:2] = 1

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`accuracy = 0.53125
accuracy = 0.70625
accuracy = 0.6875
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.70625
accuracy = 0.5875
accuracy = 0.5875
accuracy = 0.5
accuracy = 0.6
accuracy = 0.55625
accuracy = 0.70625
accuracy = 0.725
accuracy = 0.71875
accuracy = 0.71875
accuracy = 0.725
accuracy = 0.69375
accuracy = 0.725
accuracy = 0.73125
accuracy = 0.7125
accuracy = 0.73125
accuracy = 0.71875
accuracy = 0.71875
accuracy = 0.74375
accuracy = 0.73125
accuracy = 0.7375
accuracy = 0.71875
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.70625
accuracy = 0.74375
accuracy = 0.7125
accuracy = 0.74375
accuracy = 0.725
accuracy = 0.725
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.73125
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.7375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.74375
accuracy = 0.7375
`})}),`
`,i.jsx(e.p,{children:"We can see that the accuracy is converging to a value of roughly slightly more than 70% nd it is now time to look into the optimal training parameters."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`opt_weights = res.x[:2]
opt_alphas = res.x[2:4]
opt_betas = res.x[4:6]
opt_gammas = res.x[6:8]

print(f"optimal weights = {opt_weights}")
print(f"optimal alpha = {opt_alphas}")
print(f"optimal betas = {opt_betas}")
print(f"optimal gammas = {opt_gammas}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`optimal weights = [1.17532389 0.86949734]
optimal alpha = [ 0.40087815 -0.07970246]
optimal betas = [-0.03898444  1.24761263]
optimal gammas = [-0.31645471 -0.01597381]
`})}),`
`,i.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weights=opt_weights, alphas = opt_alphas, betas = opt_betas, gammas = opt_gammas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The trained circuit has an accuracy of {accuracy:.2}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit has an accuracy of 0.73
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_24_0.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Test"}),`
`,i.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weights=opt_weights,  alphas = opt_alphas, betas = opt_betas, gammas = opt_gammas, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")
f, (ax1, ax2) = plt.subplots(1, 2, figsize=(10, 5), sharex=True, sharey=True)

plot_data(x_train, y_train, fig=f, ax=ax1, title="training data")
plot_data(x_false, y_false, fig=f, ax=ax2, title="false label")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has a test accuracy of 0.78
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_103_26_1.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Summary and outlook"}),`
`,i.jsx(e.p,{children:"In this tutorial, we have seen that the data reuploading circuit can be extended to handle multiple input parameters. So have put everything together that we would like at this stage:"}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:["More input parameters can be handle through more gates in the layer ",i.jsx(e.code,{className:"language-math math-inline",children:"S(\\mathbf{x}_i)"})]}),`
`,i.jsx(e.li,{children:"More complex data structures can be embedded through deeper circuit structures."}),`
`]}),`
`,i.jsx(e.p,{children:"Improved circuits typically work with tuning of:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"Different optimizers."}),`
`,i.jsx(e.li,{children:"Cost functions that are easier to differentiate."}),`
`,i.jsx(e.li,{children:"Libraries that perform faster differentiation."}),`
`,i.jsx(e.li,{children:"More parameters for the circuits."}),`
`]}),`
`,i.jsx(e.p,{children:"Up to this point we have exclusively worked with circuits that work on a single qubit. While this allowed us to learn more fundamental concepts, it clearly ignores one important parameter that is commonly seen as a differentiator between classical and quantum systems, namely entanglement. So in the next and last tutorial of this series we will work with multiple qubits, entangle them and see how we can systematically study the role of entanglement in the circuit performance."})]})}function gce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(bT,{...t})}):bT(t)}const wT=Object.freeze(Object.defineProperty({__proto__:null,default:gce,frontmatter:pce},Symbol.toStringTag,{value:"Module"})),xce={author:["Fred Jendrzejewski"],order:4,title:"QML 104 - More is different ? Working with multiple qubits"};function _T(t){const e={a:"a",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...t.components};return i.jsxs(i.Fragment,{children:[i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./3",children:"previous tutorial"})," we saw how we might be able to handle more complex inputs through reuploading. However, we only discussed algorithms with single qubits until now and there is little chance that such algorithms have an impact beyond their pedagogical power."]}),`
`,i.jsx(e.p,{children:"In this tutorial, we will present one for to introduce multiple qubits and entangle them. We will learn:"}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"How multiple qubits can work with multiple labels."}),`
`,i.jsx(e.li,{children:"Entanglement might be used to control the performance of the circuit."}),`
`]}),`
`,i.jsx(e.p,{children:"We will always focus on simplicity throughout this tutorial and leave the more complex discussions to the extensive literature."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from typing import Union, List

import numpy as np
import matplotlib.pyplot as plt

from tqdm import tqdm

# for splitting the data set
from sklearn.model_selection import train_test_split

# for the quantum circuits
from qiskit.circuit import QuantumCircuit, Parameter
from qiskit import Aer
`})}),`
`,i.jsx(e.h2,{children:"A multi-label data set"}),`
`,i.jsxs(e.p,{children:["In the ",i.jsx(e.a,{href:"./1",children:"first tutorials"})," we saw how to label data that depend only on one input and had binary labels ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i \\in \\{0, 1\\}"}),". In the ",i.jsx(e.a,{href:"./3",children:"third tutorial"}),", we worked with a data set that had a two-dimensional input ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{x}_i = (x_{1,i}, x_{2,i})"})," and a binary label ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i \\in \\{0, 1\\}"}),". We will now build up on this work and use a data set that has:"]}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsxs(e.li,{children:["one dimensional input ",i.jsx(e.code,{className:"language-math math-inline",children:"x"}),"."]}),`
`,i.jsxs(e.li,{children:["Labels that go from ",i.jsx(e.code,{className:"language-math math-inline",children:"y_i \\in \\{0, 1, 2, 3\\}"}),". Extending our previous data set."]}),`
`]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(1)
xdata = np.random.uniform(0, 2, 100)
ydata = np.ceil(2*xdata)-1

f, ax = plt.subplots()
ax.plot(xdata, ydata, "o")
ax.set_xlabel("input value")
ax.set_ylabel("label");
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_4_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"Once again we split the data set and get into the training."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`x_train, x_test, y_train, y_test = train_test_split(
    xdata, ydata, test_size=0.20, random_state=42
)


f, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5), sharex=True, sharey=True)
ax1.plot(x_train, y_train, "o")
ax1.set_xlabel("input value")
ax1.set_ylabel(" given labels")
ax1.set_title("training data")

ax2.plot(x_test, y_test, "o")
ax2.set_xlabel("input value")
ax2.set_title("test data")

f.tight_layout()
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_6_0.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Handling multiple labels"}),`
`,i.jsxs(e.p,{children:["To achieve training now, we have to handle labels that go beyond binary. Quite interestingly there is a multitude of approaches on how to encode such labels, one of them was propose in the original paper ",i.jsx(e.a,{href:"https://quantum-journal.org/papers/q-2020-02-06-226/",children:"data-reuploading approach"}),". However, we will follow a more intuitive path in which we simply use the qubits as ",i.jsx(e.a,{href:"https://en.wikipedia.org/wiki/Binary_number",children:"binary encoding"})," of the labels. To represent the number ",i.jsx(e.code,{className:"language-math math-inline",children:"3"}),", we therefore need two qubits as the result ",i.jsx(e.code,{className:"language-math math-inline",children:"|11\\rangle"})," is then translated in ",i.jsx(e.code,{className:"language-math math-inline",children:"2^1+1^1 = 3"}),". In summary, we will"]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:["Prepare the initial state, where multiple qubits are initialized in ",i.jsx(e.code,{className:"language-math math-inline",children:"0"}),"."]}),`
`,i.jsxs(e.li,{children:["Apply a parametrized circuit with parameters ",i.jsx(e.code,{className:"language-math math-inline",children:"\\mathbf{w}"})," that depend on the input ",i.jsx(e.code,{className:"language-math math-inline",children:"U(\\mathbf{w},x_i)"}),"."]}),`
`,i.jsx(e.li,{children:"Read out the label from the measurement of the qubit."}),`
`]}),`
`,i.jsxs(e.p,{children:["The main difference is now that we have multiple qubits that we should handle in this approach and we have to choose how to properly parametrize the circuit. This falls into the large class of variational circuits, about which we might do a series of tutorials, if interest exists. A nice review on different choices can be found ",i.jsx(e.a,{href:"https://arxiv.org/abs/2008.08605",children:"in this paper"}),". Here, we will choose the following parametrization."]}),`
`,i.jsxs(e.ol,{children:[`
`,i.jsxs(e.li,{children:["We apply a rotation gate ",i.jsx(e.code,{className:"language-math math-inline",children:"R_x"})," on each qubit."]}),`
`,i.jsxs(e.li,{children:["We entangle the two qubit through a parametrized two qubit gate. A wide choice exists, but the ",i.jsx(e.code,{className:"language-math math-inline",children:"R_{zz}"})," gate is especially nice as it creates entanglement and does not commute with the ",i.jsx(e.code,{className:"language-math math-inline",children:"R_x"})," gates."]}),`
`,i.jsxs(e.li,{children:["We apply another rotation gate ",i.jsx(e.code,{className:"language-math math-inline",children:"R_x"})," on each qubit."]}),`
`]}),`
`,i.jsxs(e.p,{children:["Let us just visualize it once in ",i.jsx(e.code,{children:"qiskit"}),"."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`sim = Aer.get_backend("aer_simulator")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`theta1 = Parameter(r"$\\theta_1$")
theta2 = Parameter(r"$\\theta_2$")

alpha0 = Parameter(r"$\\alpha_0$")

qc = QuantumCircuit(2)

# first upload
qc.rx(theta1, 0)
qc.rx(theta2, 1)

# first processing
qc.rzz(alpha0, 0,1)

# second upload
qc.rx(theta1, 0)
qc.rx(theta2, 1)


qc.measure_all()
qc.draw("mpl")
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_9_0.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can now look at the performance of the code with some randomly initialized weight in predicting the appropiate label."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_accuracy(
    qc: QuantumCircuit, weights: List[float] , alphas: List[float], xvals: List[float], yvals: List[int]) -> Union[float, List[int]]:
    """
    Calculates the accuracy of the circuit for a given set of data.

    Args:
      qc: the quantum circuit
      alphas: the training parameters for the z processing gate
      gammas: the training parameters for the x processing gate
      weights: the weights for the inputs
      xvals: the input values
      yvals: the labels
    Returns:
      The accuracy and the predicted labels.
    """
    pred_labels = np.zeros(len(xvals))
    accurate_prediction = 0
    for ii, xinput, yinput in zip(range(len(xvals)), xvals, yvals.astype(int)):
        # set the circuit parameter
        circuit = qc.assign_parameters(
            {theta1: weights[0]*xinput,
             theta2: weights[1]*xinput,
             alpha0: alphas
             },
            inplace=False,
        )
        # run the job and obtain the counts
        Nshots = 4000
        job = sim.run(circuit, shots=Nshots)
        counts1 = job.result().get_counts()  # e.g. counts = {"00": 2000, "11": 2000}

        # obtain the predicted label on average
        av_label = 0
        for el in counts1:
          av_label += int(el,2)*counts1[el]/Nshots
        pred_label = round(av_label)

        pred_labels[ii] = pred_label
        if yinput == pred_label:
            accurate_prediction += 1
    return accurate_prediction / len(yvals), pred_labels
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`np.random.seed(123)

weights = np.random.uniform(size=2)
alphas = np.random.uniform()


accuracy, y_pred = get_accuracy(qc, alphas=alphas, weights=weights, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The randomly initialized circuit has an accuracy of {accuracy}")

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The randomly initialized circuit has an accuracy of 0.275





<matplotlib.legend.Legend at 0x7f016e522a50>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_12_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Training"}),`
`,i.jsxs(e.p,{children:["We once again have to train the circuit as discussed in the",i.jsx(e.a,{href:"./3",children:" previous tutorial"})," with ",i.jsx(e.a,{href:"https://docs.scipy.org/doc/scipy/reference/optimize.html",children:i.jsx(e.code,{children:"scipy.optimize"})})," package to optimize the target function."]}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`from scipy.optimize import minimize
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`def get_cost_for_circ(xvals, yvals, machine=sim):
    """
    Runs parametrized circuit

    Args:
        x: position of the dot
        y: its state label
        params: parameters of the circuit
    """

    def execute_circ(params_flat):
        weights = params_flat[:2]
        alphas = params_flat[2]
        accuracy, y_pred = get_accuracy(qc, alphas=alphas, weights=weights, xvals=xvals, yvals=yvals)
        print(f"accuracy = {accuracy}")
        return 1-accuracy

    return execute_circ
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`total_cost = get_cost_for_circ(x_train, y_train, sim)

# initial parameters which are randomly initialized
np.random.seed(123)
params = np.random.uniform(size=3)
params_flat = params.flatten()

# params, which are guessed close to what we know to be a good result
params_flat = [0.9,0.9,0.7]

# minimze with COBYLA optimize, which often performs quite well
res = minimize(total_cost, params_flat, method="COBYLA")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`accuracy = 0.975
accuracy = 0.6125
accuracy = 0.3125
accuracy = 0.375
accuracy = 0.2625
accuracy = 0.5375
accuracy = 0.8
accuracy = 0.8
accuracy = 0.75
accuracy = 0.9375
accuracy = 0.95
accuracy = 0.95
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9875
accuracy = 0.9625
accuracy = 0.95
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9875
accuracy = 0.9875
accuracy = 0.9625
accuracy = 0.95
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.975
accuracy = 0.9625
accuracy = 0.975
`})}),`
`,i.jsx(e.p,{children:"We can see that the accuracy is converging to a value of more than 95% and it is now time to look into the optimal training parameters."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`opt_weights = res.x[:2]
opt_alphas = res.x[2]

print(f"optimal weights = {opt_weights}")
print(f"optimal alpha = {opt_alphas}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`optimal weights = [0.9010178  0.90824815]
optimal alpha = 0.7131673355135238
`})}),`
`,i.jsx(e.p,{children:"We can now test the accuracy on the optimal value of the weights again to test the accuracy."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy, y_pred = get_accuracy(qc, weights=opt_weights, alphas = opt_alphas, xvals=x_train, yvals=y_train)

false_label = abs(y_pred - y_train) > 0

x_false = x_train[false_label]
y_false = y_pred[false_label]

print(f"The trained circuit has an accuracy of {accuracy:.2}")

f, ax = plt.subplots()
ax.plot(x_train, y_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit has an accuracy of 0.96





<matplotlib.legend.Legend at 0x7f016e5952d0>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_20_2.png",alt:"png"})}),`
`,i.jsx(e.p,{children:"We can see quite excellent training for this data set. One common question that always comes up for these kinds of circuits is also about the potential role of entanglement. The simplest thing would be to simply set the alpha parameter to zero."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`accuracy_wo_entanglement, _ = get_accuracy(qc, weights=opt_weights, alphas = 0, xvals=x_train, yvals=y_train)
print(f"The trained circuit without entanglement has an accuracy of {accuracy_wo_entanglement:.2}")
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The trained circuit without entanglement has an accuracy of 0.79
`})}),`
`,i.jsx(e.p,{children:"We can see that the correlation between the two qubits plays and substantial role in the prediction of the labels. The training of the circuit without any kind of entanglement is left to the reader. Or you just send us a comment if you would like to have a cleaner introduction on this issue."}),`
`,i.jsx(e.h2,{children:"Test"}),`
`,i.jsx(e.p,{children:"Having finished the training, we can test the circuit now on data points that it has never seen."}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{className:"language-python",children:`test_accuracy, y_test_pred = get_accuracy(
    qc, weights=opt_weights,  alphas = opt_alphas, xvals=x_test, yvals=y_test
)

false_label = abs(y_test_pred - y_test) > 0

x_false = x_test[false_label]
y_false = y_test_pred[false_label]

print(f"The circuit has a test accuracy of {test_accuracy:.2}")

f, ax = plt.subplots()
ax.plot(x_test, y_test_pred, "o", label="predicted label")
ax.plot(x_false, y_false, "ro", label="false label")
ax.legend()
`})}),`
`,i.jsx(e.pre,{children:i.jsx(e.code,{children:`The circuit has a test accuracy of 1.0





<matplotlib.legend.Legend at 0x7f016e403c50>
`})}),`
`,i.jsx(e.p,{children:i.jsx(e.img,{src:"./qml_104_25_2.png",alt:"png"})}),`
`,i.jsx(e.h2,{children:"Summary and outlook"}),`
`,i.jsx(e.p,{children:"In this last tutorial of this introductory series, we have seen that the data reuploading can be extended towards multiple labels."}),`
`,i.jsxs(e.ul,{children:[`
`,i.jsx(e.li,{children:"The crucial step was the extension to multiple qubits."}),`
`,i.jsx(e.li,{children:"To make the algorithm work efficiently we entangled the qudits with an entanglement gate and then trained the full circuit with the whole data set."}),`
`]}),`
`,i.jsx(e.p,{children:"Of course, we have not gone into complex data-sets like the MNIST or other problems in this series. This will be up to the more complex literature or more advanced courses. However, we hope that this series gave you a basic idea of some fairly common concepts that are used in the field nowadays."})]})}function yce(t={}){const{wrapper:e}=t.components||{};return e?i.jsx(e,{...t,children:i.jsx(_T,{...t})}):_T(t)}const vT=Object.freeze(Object.defineProperty({__proto__:null,default:yce,frontmatter:xce},Symbol.toStringTag,{value:"Module"})),gg={blog:{eager:Object.assign({"../blog/blog_stack.md":tb,"../blog/blog_updates.md":ib,"../blog/collect_imagegen.md":rb,"../blog/cosmopol_democracy.md":ob,"../blog/decentral_like.md":cb,"../blog/finishing_amo.md":ub,"../blog/hello_world.mdx":mb,"../blog/images.md":pb,"../blog/ipfs.md":xb,"../blog/merkle_ai_batching.tsx":i_,"../blog/merkle_ai_batching_fundamentals.tsx":u2,"../blog/mirror.md":m2,"../blog/moving_lectures.md":p2,"../blog/nft_blog.md":x2,"../blog/nft_gallery.md":b2,"../blog/prisoners_dilemma_interactive.tsx":Qv,"../blog/quantum_now.md":Zv,"../blog/seo_webmentions.md":tj,"../blog/smart_quantum.md":ij,"../blog/tragedy_of_commons_fishing.tsx":sj,"../blog/vc_lessons.md":lj}),lazy:Object.assign({"../blog/blog_stack.md":()=>oe(()=>Promise.resolve().then(()=>tb),void 0),"../blog/blog_updates.md":()=>oe(()=>Promise.resolve().then(()=>ib),void 0),"../blog/collect_imagegen.md":()=>oe(()=>Promise.resolve().then(()=>rb),void 0),"../blog/cosmopol_democracy.md":()=>oe(()=>Promise.resolve().then(()=>ob),void 0),"../blog/decentral_like.md":()=>oe(()=>Promise.resolve().then(()=>cb),void 0),"../blog/finishing_amo.md":()=>oe(()=>Promise.resolve().then(()=>ub),void 0),"../blog/hello_world.mdx":()=>oe(()=>Promise.resolve().then(()=>mb),void 0),"../blog/images.md":()=>oe(()=>Promise.resolve().then(()=>pb),void 0),"../blog/ipfs.md":()=>oe(()=>Promise.resolve().then(()=>xb),void 0),"../blog/merkle_ai_batching.tsx":()=>oe(()=>Promise.resolve().then(()=>i_),void 0),"../blog/merkle_ai_batching_fundamentals.tsx":()=>oe(()=>Promise.resolve().then(()=>u2),void 0),"../blog/mirror.md":()=>oe(()=>Promise.resolve().then(()=>m2),void 0),"../blog/moving_lectures.md":()=>oe(()=>Promise.resolve().then(()=>p2),void 0),"../blog/nft_blog.md":()=>oe(()=>Promise.resolve().then(()=>x2),void 0),"../blog/nft_gallery.md":()=>oe(()=>Promise.resolve().then(()=>b2),void 0),"../blog/prisoners_dilemma_interactive.tsx":()=>oe(()=>Promise.resolve().then(()=>Qv),void 0),"../blog/quantum_now.md":()=>oe(()=>Promise.resolve().then(()=>Zv),void 0),"../blog/seo_webmentions.md":()=>oe(()=>Promise.resolve().then(()=>tj),void 0),"../blog/smart_quantum.md":()=>oe(()=>Promise.resolve().then(()=>ij),void 0),"../blog/tragedy_of_commons_fishing.tsx":()=>oe(()=>Promise.resolve().then(()=>sj),void 0),"../blog/vc_lessons.md":()=>oe(()=>Promise.resolve().then(()=>lj),void 0)})},"quantum/amo":{eager:Object.assign({"../quantum/amo/lecture1.md":hj,"../quantum/amo/lecture10.mdx":dj,"../quantum/amo/lecture11.mdx":fj,"../quantum/amo/lecture12.mdx":xj,"../quantum/amo/lecture13.mdx":bj,"../quantum/amo/lecture14.mdx":_j,"../quantum/amo/lecture15.mdx":jj,"../quantum/amo/lecture16.mdx":kj,"../quantum/amo/lecture17.mdx":Sj,"../quantum/amo/lecture18.mdx":Aj,"../quantum/amo/lecture19.mdx":Ij,"../quantum/amo/lecture2.md":Oj,"../quantum/amo/lecture20.mdx":Pj,"../quantum/amo/lecture3.mdx":Bj,"../quantum/amo/lecture4.mdx":Hj,"../quantum/amo/lecture5.mdx":$j,"../quantum/amo/lecture6.mdx":Wj,"../quantum/amo/lecture7.mdx":Vj,"../quantum/amo/lecture8.mdx":Gj,"../quantum/amo/lecture9.mdx":Jj}),lazy:Object.assign({"../quantum/amo/lecture1.md":()=>oe(()=>Promise.resolve().then(()=>hj),void 0),"../quantum/amo/lecture10.mdx":()=>oe(()=>Promise.resolve().then(()=>dj),void 0),"../quantum/amo/lecture11.mdx":()=>oe(()=>Promise.resolve().then(()=>fj),void 0),"../quantum/amo/lecture12.mdx":()=>oe(()=>Promise.resolve().then(()=>xj),void 0),"../quantum/amo/lecture13.mdx":()=>oe(()=>Promise.resolve().then(()=>bj),void 0),"../quantum/amo/lecture14.mdx":()=>oe(()=>Promise.resolve().then(()=>_j),void 0),"../quantum/amo/lecture15.mdx":()=>oe(()=>Promise.resolve().then(()=>jj),void 0),"../quantum/amo/lecture16.mdx":()=>oe(()=>Promise.resolve().then(()=>kj),void 0),"../quantum/amo/lecture17.mdx":()=>oe(()=>Promise.resolve().then(()=>Sj),void 0),"../quantum/amo/lecture18.mdx":()=>oe(()=>Promise.resolve().then(()=>Aj),void 0),"../quantum/amo/lecture19.mdx":()=>oe(()=>Promise.resolve().then(()=>Ij),void 0),"../quantum/amo/lecture2.md":()=>oe(()=>Promise.resolve().then(()=>Oj),void 0),"../quantum/amo/lecture20.mdx":()=>oe(()=>Promise.resolve().then(()=>Pj),void 0),"../quantum/amo/lecture3.mdx":()=>oe(()=>Promise.resolve().then(()=>Bj),void 0),"../quantum/amo/lecture4.mdx":()=>oe(()=>Promise.resolve().then(()=>Hj),void 0),"../quantum/amo/lecture5.mdx":()=>oe(()=>Promise.resolve().then(()=>$j),void 0),"../quantum/amo/lecture6.mdx":()=>oe(()=>Promise.resolve().then(()=>Wj),void 0),"../quantum/amo/lecture7.mdx":()=>oe(()=>Promise.resolve().then(()=>Vj),void 0),"../quantum/amo/lecture8.mdx":()=>oe(()=>Promise.resolve().then(()=>Gj),void 0),"../quantum/amo/lecture9.mdx":()=>oe(()=>Promise.resolve().then(()=>Jj),void 0)})},"quantum/basics":{eager:Object.assign({"../quantum/basics/bell_inequalities.mdx":Kj,"../quantum/basics/qtech_intro.mdx":eT,"../quantum/basics/quantum_metrology.mdx":nT}),lazy:Object.assign({"../quantum/basics/bell_inequalities.mdx":()=>oe(()=>Promise.resolve().then(()=>Kj),void 0),"../quantum/basics/qtech_intro.mdx":()=>oe(()=>Promise.resolve().then(()=>eT),void 0),"../quantum/basics/quantum_metrology.mdx":()=>oe(()=>Promise.resolve().then(()=>nT),void 0)})},"quantum/hardware":{eager:Object.assign({"../quantum/hardware/quantum_hardware_101.md":aT,"../quantum/hardware/quantum_hardware_102.md":sT,"../quantum/hardware/quantum_hardware_103.md":lT,"../quantum/hardware/quantum_hardware_104.md":hT,"../quantum/hardware/quantum_hardware_105.md":dT}),lazy:Object.assign({"../quantum/hardware/quantum_hardware_101.md":()=>oe(()=>Promise.resolve().then(()=>aT),void 0),"../quantum/hardware/quantum_hardware_102.md":()=>oe(()=>Promise.resolve().then(()=>sT),void 0),"../quantum/hardware/quantum_hardware_103.md":()=>oe(()=>Promise.resolve().then(()=>lT),void 0),"../quantum/hardware/quantum_hardware_104.md":()=>oe(()=>Promise.resolve().then(()=>hT),void 0),"../quantum/hardware/quantum_hardware_105.md":()=>oe(()=>Promise.resolve().then(()=>dT),void 0)})},"quantum/qml":{eager:Object.assign({"../quantum/qml/qml_001.md":fT,"../quantum/qml/qml_101.md":gT,"../quantum/qml/qml_102.md":yT,"../quantum/qml/qml_103.md":wT,"../quantum/qml/qml_104.md":vT}),lazy:Object.assign({"../quantum/qml/qml_001.md":()=>oe(()=>Promise.resolve().then(()=>fT),void 0),"../quantum/qml/qml_101.md":()=>oe(()=>Promise.resolve().then(()=>gT),void 0),"../quantum/qml/qml_102.md":()=>oe(()=>Promise.resolve().then(()=>yT),void 0),"../quantum/qml/qml_103.md":()=>oe(()=>Promise.resolve().then(()=>wT),void 0),"../quantum/qml/qml_104.md":()=>oe(()=>Promise.resolve().then(()=>vT),void 0)})}},bce=async(t,e,n)=>{const a=gg[t];if(!a)throw new Error(`Unsupported directory: ${t}. Supported: ${Object.keys(gg).join(", ")}`);const r=n?a.eager:a.lazy,s=`../${t}/${e}`,o=r[s];if(!o){const l=Object.keys(r).join(", ");throw new Error(`Module not found: ${s}. Available modules: ${l}`)}return n?o:await o()},wce=t=>t in gg;function _ce(t,e){Hn.useEffect(()=>{if(!t.current||!e)return;const n=setTimeout(()=>{Promise.all([oe(()=>import("./chunk-qrhCpa0F.js"),[]),oe(()=>import("./chunk-DLEb2sg5.js"),__vite__mapDeps([57,58]))]).then(([a,r])=>{const s=a.default,o=r.default;if(!t.current)return;t.current.querySelectorAll("code.language-math").forEach(c=>{try{const h=c.textContent||"",u=c.classList.contains("math-display"),d=document.createElement("span");s.render(h,d,{displayMode:u,throwOnError:!1,strict:!1,trust:!0}),c.parentNode?.replaceChild(d,c)}catch(h){console.error("KaTeX error rendering math element:",h)}}),o(t.current,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1,strict:!1,trust:!0,ignoredTags:[],ignoredClasses:[]})}).catch(a=>{console.error("Failed to load KaTeX:",a)})},300);return()=>clearTimeout(n)},[t,e])}function yO(t="https://www.fretchen.eu"){const e=jT(),n=e.urlPathname.endsWith("/")?e.urlPathname.slice(0,-1):e.urlPathname;return{urlWithoutSlash:`${t}${n}`,urlWithSlash:`${t}${n}/`}}function vce(t){const e=new Set;return t.filter(n=>e.has(n["wm-id"])?!1:(e.add(n["wm-id"]),!0))}function jce(...t){const e=t.flatMap(n=>n.children||[]);return vce(e)}async function bO(t,e){try{const[n,a]=await Promise.all([fetch(`https://webmention.io/api/mentions.jf2?target=${t}`).then(s=>s.json()),fetch(`https://webmention.io/api/mentions.jf2?target=${e}`).then(s=>s.json())]),r=jce(n,a);return{mentions:r,count:r.length}}catch{return{mentions:[],count:0}}}function Tce(){const{urlWithoutSlash:t,urlWithSlash:e}=yO(),[n,a]=pe.useState(null),[r,s]=pe.useState(!0),[o,l]=pe.useState(!1);pe.useEffect(()=>{bO(t,e).then(({mentions:m})=>{a(m),s(!1)})},[t,e]);const c=async()=>{try{await navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3)}catch(m){console.error("Failed to copy:",m)}};if(r)return i.jsxs("div",{className:He.loadingState,children:[i.jsx("span",{children:"⏳"})," Loading reactions..."]});if(!n||n.length===0)return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:He.emptyState,children:[i.jsx("span",{className:He.emptyIcon,children:"💬"}),i.jsx("h3",{className:He.emptyTitle,children:"No reactions yet"}),i.jsx("p",{className:He.emptyText,children:"Be the first to share this post!"})]}),i.jsx("div",{className:He.cta,children:i.jsxs("p",{className:He.ctaText,children:["💬 ",i.jsx("strong",{children:"Share this post on social media!"})," ",i.jsx("button",{onClick:c,className:He.copyButtonInline,title:"Copy link to clipboard",children:o?"✓ Copied!":"📋 Copy Link"})," ","Post on"," ",i.jsx("a",{href:"https://bsky.app",target:"_blank",rel:"noopener noreferrer",className:He.ctaLink,children:"Bluesky"})," ","or"," ",i.jsx("a",{href:"https://mastodon.social",target:"_blank",rel:"noopener noreferrer",className:He.ctaLink,children:"Mastodon"})," ","and your reaction appears above within 5-10 minutes."]})})]});const h=n.filter(m=>["in-reply-to","mention-of"].includes(m["wm-property"])),u=n.filter(m=>m["wm-property"]==="like-of"),d=n.filter(m=>m["wm-property"]==="repost-of");return i.jsxs("div",{className:He.container,children:[i.jsx("h3",{className:He.sectionTitle,children:"Reactions from the Web"}),u.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:He.subsectionTitle,children:["❤️ ",u.length," ",u.length===1?"Like":"Likes"]}),i.jsx("div",{className:He.avatarGrid,children:u.map(m=>i.jsx("a",{href:m.author.url,title:m.author.name,target:"_blank",rel:"noopener noreferrer",className:He.avatarLink,children:m.author.photo?i.jsx("img",{src:m.author.photo,alt:m.author.name,className:He.avatar}):i.jsx("div",{className:He.avatar,title:m.author.name,children:"👤"})},m["wm-id"]))})]}),d.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:He.subsectionTitle,children:["🔁 ",d.length," ",d.length===1?"Repost":"Reposts"]}),i.jsx("div",{className:He.avatarGrid,children:d.map(m=>i.jsx("a",{href:m.author.url,title:m.author.name,target:"_blank",rel:"noopener noreferrer",className:He.avatarLink,children:m.author.photo?i.jsx("img",{src:m.author.photo,alt:m.author.name,className:He.avatar}):i.jsx("div",{className:He.avatar,title:m.author.name,children:"👤"})},m["wm-id"]))})]}),h.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:He.subsectionTitle,children:["💬 ",h.length," ",h.length===1?"Reply":"Replies"]}),i.jsx("ul",{className:He.replyList,children:h.map(m=>i.jsxs("li",{className:He.replyCard,children:[i.jsxs("div",{className:He.replyHeader,children:[m.author.photo?i.jsx("img",{src:m.author.photo,alt:m.author.name,className:He.replyAvatar}):i.jsx("div",{className:He.replyAvatar,title:m.author.name,children:"👤"}),i.jsxs("div",{className:He.replyAuthor,children:[i.jsx("a",{href:m.author.url,target:"_blank",rel:"noopener noreferrer",className:He.authorName,children:i.jsx("strong",{children:m.author.name})}),m.published&&i.jsx("span",{className:He.replyDate,children:new Date(m.published).toLocaleDateString()})]})]}),m.content?.text&&i.jsx("p",{className:He.replyContent,children:m.content.text}),i.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:He.replyLink,children:"View original →"})]},m["wm-id"]))})]}),i.jsx("div",{className:He.cta,children:i.jsxs("p",{className:He.ctaText,children:["💬 ",i.jsx("strong",{children:"Share this post on social media!"})," ",i.jsx("button",{onClick:c,className:He.copyButtonInline,title:"Copy link to clipboard",children:o?"✓ Copied!":"📋 Copy Link"})," ","Post on"," ",i.jsx("a",{href:"https://bsky.app",target:"_blank",rel:"noopener noreferrer",className:He.ctaLink,children:"Bluesky"})," ","or"," ",i.jsx("a",{href:"https://mastodon.social",target:"_blank",rel:"noopener noreferrer",className:He.ctaLink,children:"Mastodon"})," ","and your reaction appears above within 5-10 minutes."]})})]})}const kce=({componentPath:t,tokenID:e})=>{const[n,a]=Hn.useState(null),[r,s]=Hn.useState(null),[o,l]=Hn.useState(!0),c=Hn.useRef(null);return Hn.useEffect(()=>{(async()=>{try{const u=t.replace(/^\.\.\//,"").split("/"),d=u.slice(0,-1).join("/"),m=u[u.length-1];if(!wce(d))throw new Error(`Unsupported directory: ${d}. Supported directories: blog, quantum/amo, quantum/basics, quantum/hardware, quantum/qml`);const p=(await bce(d,m,!0)).default;if(!p)throw new Error(`No default export found in ${m}`);a(()=>p),l(!1)}catch(u){console.error("ReactPostRenderer: Error loading React component:",u),s(u instanceof Error?u.message:"Unknown error occurred"),l(!1)}})()},[t]),_ce(c,!!n),o?i.jsx("div",{className:Fn.contentContainer,children:i.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[i.jsx("p",{children:"🔄 Lade interaktive Komponente..."}),i.jsxs("p",{style:{fontSize:"0.9em",color:"#666"},children:["Pfad: ",i.jsx("code",{children:t})]})]})}):r||!n?i.jsx("div",{className:Fn.contentContainer,children:i.jsxs("div",{style:{border:"1px solid #dc3545",borderRadius:"4px",padding:"20px",backgroundColor:"#f8d7da",color:"#721c24",margin:"20px 0"},children:[i.jsx("h3",{children:"❌ Fehler beim Laden der React-Komponente"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Fehler:"})," ",r||"Komponente konnte nicht geladen werden"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Pfad:"})," ",i.jsx("code",{children:t})]}),i.jsxs("details",{style:{marginTop:"10px"},children:[i.jsx("summary",{children:"Mögliche Lösungen"}),i.jsxs("ul",{style:{marginTop:"10px"},children:[i.jsx("li",{children:"Überprüfen Sie, ob die TSX-Datei existiert"}),i.jsx("li",{children:"Stellen Sie sicher, dass die Komponente als default export verfügbar ist"}),i.jsx("li",{children:"Überprüfen Sie die Konsolenausgabe für weitere Details"})]})]})]})}):i.jsxs("div",{className:Fn.contentContainer,ref:c,children:[e&&i.jsx(vE,{tokenId:e}),i.jsx(Hn.Suspense,{fallback:i.jsx("div",{style:{padding:"20px",textAlign:"center"},children:i.jsx("p",{children:"⚡ Lade Komponente..."})}),children:i.jsx(n,{})})]})};function hhe({title:t,content:e,publishing_date:n,prevPost:a,nextPost:r,basePath:s="",tokenID:o,type:l="markdown",componentPath:c,description:h,category:u,secondaryCategory:d}){const{urlWithoutSlash:m,urlWithSlash:f}=yO(),[p,g]=Hn.useState(0),x=n?new Date(n).toISOString().split("T")[0]:null;return Hn.useEffect(()=>{bO(m,f).then(({count:b})=>{g(b)})},[m,f]),i.jsxs("article",{className:"h-entry",children:[i.jsx("h1",{className:`p-name ${LO.title}`,children:t}),n&&i.jsx("time",{className:"dt-published",dateTime:x||void 0,style:{display:"none"},children:n}),i.jsx("a",{rel:"author",className:"p-author h-card",href:"https://www.fretchen.eu/",style:{display:"none"},children:OO.name}),i.jsx("a",{className:"u-url",href:m,style:{display:"none"},children:m}),h&&i.jsx("div",{className:"p-summary",style:{display:"none"},children:h}),u&&i.jsx("a",{href:"",className:"p-category",style:{display:"none"},children:u}),d&&i.jsx("a",{href:"",className:"p-category",style:{display:"none"},children:d}),i.jsx("a",{className:"u-bridgy-fed",href:"https://fed.brid.gy/",hidden:!0,style:{display:"none"}}),i.jsx("a",{className:"u-bridgy-omit-link",href:"https://brid.gy/publish/mastodon",style:{display:"none"}}),i.jsx("a",{className:"u-bridgy-omit-link",href:"https://brid.gy/publish/bluesky",style:{display:"none"}}),i.jsx(N8,{publishingDate:n,showSupport:!0,reactionCount:p}),l==="react"&&c?i.jsx("div",{className:"e-content",children:i.jsx(kce,{componentPath:c,tokenID:o})}):i.jsxs("div",{className:`e-content ${Fn.contentContainer}`,children:[o&&i.jsx(vE,{tokenId:o}),i.jsx(ok,{remarkPlugins:[s5],rehypePlugins:[C8],children:e})]}),(a||r)&&i.jsxs("div",{className:Fn.navigation,children:[a?i.jsx("div",{className:`${Fn.navLink} ${Fn.navLinkPrev}`,children:i.jsxs(Hy,{href:`${s}/${a.id}`,children:[i.jsx("span",{className:Fn.navLabel,children:"Previous: "}),i.jsx("span",{className:Fn.navTitle,children:a.title})]})}):i.jsx("div",{}),r?i.jsx("div",{className:`${Fn.navLink} ${Fn.navLinkNext}`,children:i.jsxs(Hy,{href:`${s}/${r.id}`,children:[i.jsx("span",{className:Fn.navLabel,children:"Next: "}),i.jsx("span",{className:Fn.navTitle,children:r.title})]})}):i.jsx("div",{})]}),i.jsx(Tce,{})]})}export{Yce as $,Dce as A,ul as B,Pi as C,eH as D,_q as E,Tx as F,en as G,PE as H,KV as I,sW as J,e7 as K,yb as L,qz as M,Qb as N,Jb as O,Vce as P,qce as Q,Wce as R,zce as S,Fce as T,Le as U,Gr as V,nx as W,Uce as X,Hce as Y,Gce as Z,_,pq as a,vA as a$,$ce as a0,PH as a1,js as a2,Rce as a3,$u as a4,zV as a5,tq as a6,zg as a7,Ib as a8,Uz as a9,we as aA,nhe as aB,fX as aC,cX as aD,lX as aE,hhe as aF,gG as aG,$z as aH,Mce as aI,ac as aJ,fG as aK,mG as aL,Rr as aM,HV as aN,MA as aO,Du as aP,qu as aQ,Uh as aR,PA as aS,OA as aT,gV as aU,Kg as aV,ka as aW,Wb as aX,_$ as aY,Sl as aZ,be as a_,ah as aa,QV as ab,cq as ac,Jl as ad,ge as ae,ke as af,UE as ag,qG as ah,WI as ai,ahe as aj,lW as ak,Lt as al,Ha as am,fx as an,gN as ao,Br as ap,$A as aq,FV as ar,IU as as,LV as at,px as au,Qw as av,LX as aw,ihe as ax,rhe as ay,the as az,fq as b,Cn as b0,f$ as b1,Qg as b2,rS as b3,Zl as b4,lS as b5,Bce as b6,Z8 as b7,BV as b8,IV as b9,Qp as bA,qV as bB,Hu as bC,yU as ba,gx as bb,dV as bc,$V as bd,nc as be,Us as bf,$h as bg,jV as bh,tJ as bi,tc as bj,Wh as bk,xV as bl,SA as bm,_U as bn,vU as bo,ar as bp,xw as bq,jU as br,xx as bs,wU as bt,EU as bu,Vs as bv,Fa as bw,dw as bx,yx as by,AA as bz,Ke as c,Ye as d,WE as e,At as f,xq as g,da as h,ei as i,fW as j,zs as k,te as l,WA as m,Ql as n,Pce as o,ohe as p,yq as q,she as r,gq as s,bq as t,pi as u,oW as v,tY as w,rX as x,Xce as y,mq as z};
