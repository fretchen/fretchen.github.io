const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-Ckw_AuqY.js","assets/chunks/chunk-58jmP8y7.js","assets/chunks/chunk-CoDEDtIJ.js","assets/static/vike-react-9c9f96f4.BcWtY8Ol.css","assets/static/layouts_style-b34a8e57.D8B4iL9t.css","assets/static/layouts_panda-c5b34b81.BpEXzi4_.css","assets/chunks/chunk-D2TdDNNX.js","assets/chunks/chunk-CSXzjk7p.js","assets/static/katex-afcc0501.-PCUNDC-.css","assets/chunks/chunk-gPJOh8Ig.js","assets/chunks/chunk-DweWHFDI.js","assets/chunks/chunk-xl09oD7f.js","assets/chunks/chunk-CTeanfSk.js","assets/chunks/chunk-egulUmfo.js","assets/chunks/chunk-MnEjMpaU.js","assets/chunks/chunk-BgxK-UXt.js","assets/chunks/chunk-BsQwuvN8.js","assets/chunks/chunk-np6vnD_g.js","assets/chunks/chunk-C-BOUhiU.js","assets/chunks/chunk-BF-VU-H3.js","assets/chunks/chunk-CnPSddrD.js","assets/chunks/chunk-C4XUhMHh.js","assets/chunks/chunk-DNY87uzv.js","assets/chunks/chunk-CZGMVA1y.js","assets/chunks/chunk-C41Iw3mO.js","assets/chunks/chunk-BfT-eumw.js","assets/chunks/chunk-DblPQcLu.js","assets/chunks/chunk-A78yrUcv.js","assets/chunks/chunk-D7fgt1SR.js","assets/chunks/chunk-WSr-hGc-.js","assets/chunks/chunk-Gi6I4Gst.js","assets/chunks/chunk-C4B-KCzX.js","assets/chunks/chunk-DIkn7X0Z.js","assets/chunks/chunk-BD2UxagE.js","assets/chunks/chunk-B6s0VFib.js","assets/chunks/chunk-DO4YpjyP.js","assets/chunks/chunk-Bmd-gKdU.js","assets/chunks/chunk-CS7V44u1.js","assets/chunks/chunk-hGm-THw0.js","assets/chunks/chunk-B9ZXIhpJ.js","assets/chunks/chunk-ariG0TYK.js","assets/chunks/chunk-BZIn5N6c.js","assets/chunks/chunk-B8U0y_8r.js","assets/chunks/chunk-DIomcrgc.js","assets/chunks/chunk-DWkr9nsx.js","assets/chunks/chunk-9QIM-SLG.js","assets/chunks/chunk-BWN-WZxO.js","assets/chunks/chunk-D3mS8OQ5.js","assets/chunks/chunk-CMWvUt55.js","assets/chunks/chunk-BH-eccyW.js","assets/chunks/chunk-DAcgUg9u.js","assets/chunks/chunk-BNB-St6k.js","assets/chunks/chunk-BChX98Yz.js","assets/chunks/chunk-vc9W8DS4.js","assets/chunks/chunk-CGDIhlAn.js","assets/chunks/chunk-RncU6u28.js","assets/chunks/chunk-DBAQr8eY.js"])))=>i.map(i=>d[i]);
import{ak as Bg,X as y_,r as le,j as y,c as Y}from"./chunk-CoDEDtIJ.js";import{r as b_}from"./chunk-BgxK-UXt.js";import{_ as Et}from"./chunk-58jmP8y7.js";var Bt={},Gt={},Pu;function Rg(){if(Pu)return Gt;Pu=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.output=Gt.exists=Gt.hash=Gt.bytes=Gt.bool=Gt.number=Gt.isBytes=void 0;function t(l){if(!Number.isSafeInteger(l)||l<0)throw new Error(`positive integer expected, not ${l}`)}Gt.number=t;function e(l){if(typeof l!="boolean")throw new Error(`boolean expected, not ${l}`)}Gt.bool=e;function r(l){return l instanceof Uint8Array||l!=null&&typeof l=="object"&&l.constructor.name==="Uint8Array"}Gt.isBytes=r;function i(l,...c){if(!r(l))throw new Error("Uint8Array expected");if(c.length>0&&!c.includes(l.length))throw new Error(`Uint8Array expected of length ${c}, not of length=${l.length}`)}Gt.bytes=i;function n(l){if(typeof l!="function"||typeof l.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");t(l.outputLen),t(l.blockLen)}Gt.hash=n;function s(l,c=!0){if(l.destroyed)throw new Error("Hash instance has been destroyed");if(c&&l.finished)throw new Error("Hash#digest() has already been called")}Gt.exists=s;function o(l,c){i(l);const h=c.outputLen;if(l.length<h)throw new Error(`digestInto() expects output buffer of length at least ${h}`)}Gt.output=o;const a={number:t,bool:e,bytes:i,hash:n,exists:s,output:o};return Gt.default=a,Gt}var ft={},Fu;function x_(){if(Fu)return ft;Fu=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.add5L=ft.add5H=ft.add4H=ft.add4L=ft.add3H=ft.add3L=ft.add=ft.rotlBL=ft.rotlBH=ft.rotlSL=ft.rotlSH=ft.rotr32L=ft.rotr32H=ft.rotrBL=ft.rotrBH=ft.rotrSL=ft.rotrSH=ft.shrSL=ft.shrSH=ft.toBig=ft.split=ft.fromBig=void 0;const t=BigInt(2**32-1),e=BigInt(32);function r(R,_=!1){return _?{h:Number(R&t),l:Number(R>>e&t)}:{h:Number(R>>e&t)|0,l:Number(R&t)|0}}ft.fromBig=r;function i(R,_=!1){let S=new Uint32Array(R.length),$=new Uint32Array(R.length);for(let E=0;E<R.length;E++){const{h:k,l:T}=r(R[E],_);[S[E],$[E]]=[k,T]}return[S,$]}ft.split=i;const n=(R,_)=>BigInt(R>>>0)<<e|BigInt(_>>>0);ft.toBig=n;const s=(R,_,S)=>R>>>S;ft.shrSH=s;const o=(R,_,S)=>R<<32-S|_>>>S;ft.shrSL=o;const a=(R,_,S)=>R>>>S|_<<32-S;ft.rotrSH=a;const l=(R,_,S)=>R<<32-S|_>>>S;ft.rotrSL=l;const c=(R,_,S)=>R<<64-S|_>>>S-32;ft.rotrBH=c;const h=(R,_,S)=>R>>>S-32|_<<64-S;ft.rotrBL=h;const u=(R,_)=>_;ft.rotr32H=u;const d=(R,_)=>R;ft.rotr32L=d;const f=(R,_,S)=>R<<S|_>>>32-S;ft.rotlSH=f;const p=(R,_,S)=>_<<S|R>>>32-S;ft.rotlSL=p;const g=(R,_,S)=>_<<S-32|R>>>64-S;ft.rotlBH=g;const b=(R,_,S)=>R<<S-32|_>>>64-S;ft.rotlBL=b;function x(R,_,S,$){const E=(_>>>0)+($>>>0);return{h:R+S+(E/2**32|0)|0,l:E|0}}ft.add=x;const w=(R,_,S)=>(R>>>0)+(_>>>0)+(S>>>0);ft.add3L=w;const L=(R,_,S,$)=>_+S+$+(R/2**32|0)|0;ft.add3H=L;const C=(R,_,S,$)=>(R>>>0)+(_>>>0)+(S>>>0)+($>>>0);ft.add4L=C;const v=(R,_,S,$,E)=>_+S+$+E+(R/2**32|0)|0;ft.add4H=v;const A=(R,_,S,$,E)=>(R>>>0)+(_>>>0)+(S>>>0)+($>>>0)+(E>>>0);ft.add5L=A;const I=(R,_,S,$,E,k)=>_+S+$+E+k+(R/2**32|0)|0;ft.add5H=I;const P={fromBig:r,split:i,toBig:n,shrSH:s,shrSL:o,rotrSH:a,rotrSL:l,rotrBH:c,rotrBL:h,rotr32H:u,rotr32L:d,rotlSH:f,rotlSL:p,rotlBH:g,rotlBL:b,add:x,add3L:w,add3H:L,add4L:C,add4H:v,add5H:I,add5L:A};return ft.default=P,ft}var So={},ln={},Nu;function __(){return Nu||(Nu=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.crypto=void 0,ln.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),ln}var ju;function w_(){return ju||(ju=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.byteSwap32=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=t.isBytes=void 0;const e=__(),r=Rg();function i($){return $ instanceof Uint8Array||$!=null&&typeof $=="object"&&$.constructor.name==="Uint8Array"}t.isBytes=i;const n=$=>new Uint8Array($.buffer,$.byteOffset,$.byteLength);t.u8=n;const s=$=>new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4));t.u32=s;const o=$=>new DataView($.buffer,$.byteOffset,$.byteLength);t.createView=o;const a=($,E)=>$<<32-E|$>>>E;t.rotr=a;const l=($,E)=>$<<E|$>>>32-E>>>0;t.rotl=l,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const c=$=>$<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255;t.byteSwap=c,t.byteSwapIfBE=t.isLE?$=>$:$=>(0,t.byteSwap)($);function h($){for(let E=0;E<$.length;E++)$[E]=(0,t.byteSwap)($[E])}t.byteSwap32=h;const u=Array.from({length:256},($,E)=>E.toString(16).padStart(2,"0"));function d($){(0,r.bytes)($);let E="";for(let k=0;k<$.length;k++)E+=u[$[k]];return E}t.bytesToHex=d;const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p($){if($>=f._0&&$<=f._9)return $-f._0;if($>=f._A&&$<=f._F)return $-(f._A-10);if($>=f._a&&$<=f._f)return $-(f._a-10)}function g($){if(typeof $!="string")throw new Error("hex string expected, got "+typeof $);const E=$.length,k=E/2;if(E%2)throw new Error("padded hex string expected, got unpadded hex of length "+E);const T=new Uint8Array(k);for(let M=0,N=0;M<k;M++,N+=2){const D=p($.charCodeAt(N)),O=p($.charCodeAt(N+1));if(D===void 0||O===void 0){const B=$[N]+$[N+1];throw new Error('hex string expected, got non-hex character "'+B+'" at index '+N)}T[M]=D*16+O}return T}t.hexToBytes=g;const b=async()=>{};t.nextTick=b;async function x($,E,k){let T=Date.now();for(let M=0;M<$;M++){k(M);const N=Date.now()-T;N>=0&&N<E||(await(0,t.nextTick)(),T+=N)}}t.asyncLoop=x;function w($){if(typeof $!="string")throw new Error(`utf8ToBytes expected string, got ${typeof $}`);return new Uint8Array(new TextEncoder().encode($))}t.utf8ToBytes=w;function L($){return typeof $=="string"&&($=w($)),(0,r.bytes)($),$}t.toBytes=L;function C(...$){let E=0;for(let T=0;T<$.length;T++){const M=$[T];(0,r.bytes)(M),E+=M.length}const k=new Uint8Array(E);for(let T=0,M=0;T<$.length;T++){const N=$[T];k.set(N,M),M+=N.length}return k}t.concatBytes=C;class v{clone(){return this._cloneInto()}}t.Hash=v;const A={}.toString;function I($,E){if(E!==void 0&&A.call(E)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign($,E)}t.checkOpts=I;function P($){const E=T=>$().update(L(T)).digest(),k=$();return E.outputLen=k.outputLen,E.blockLen=k.blockLen,E.create=()=>$(),E}t.wrapConstructor=P;function R($){const E=(T,M)=>$(M).update(L(T)).digest(),k=$({});return E.outputLen=k.outputLen,E.blockLen=k.blockLen,E.create=T=>$(T),E}t.wrapConstructorWithOpts=R;function _($){const E=(T,M)=>$(M).update(L(T)).digest(),k=$({});return E.outputLen=k.outputLen,E.blockLen=k.blockLen,E.create=T=>$(T),E}t.wrapXOFConstructorWithOpts=_;function S($=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array($));throw new Error("crypto.getRandomValues must be defined")}t.randomBytes=S}(So)),So}var Du;function v_(){if(Du)return Bt;Du=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.shake256=Bt.shake128=Bt.keccak_512=Bt.keccak_384=Bt.keccak_256=Bt.keccak_224=Bt.sha3_512=Bt.sha3_384=Bt.sha3_256=Bt.sha3_224=Bt.Keccak=Bt.keccakP=void 0;const t=Rg(),e=x_(),r=w_(),i=[],n=[],s=[],o=BigInt(0),a=BigInt(1),l=BigInt(2),c=BigInt(7),h=BigInt(256),u=BigInt(113);for(let C=0,v=a,A=1,I=0;C<24;C++){[A,I]=[I,(2*A+3*I)%5],i.push(2*(5*I+A)),n.push((C+1)*(C+2)/2%64);let P=o;for(let R=0;R<7;R++)v=(v<<a^(v>>c)*u)%h,v&l&&(P^=a<<(a<<BigInt(R))-a);s.push(P)}const[d,f]=(0,e.split)(s,!0),p=(C,v,A)=>A>32?(0,e.rotlBH)(C,v,A):(0,e.rotlSH)(C,v,A),g=(C,v,A)=>A>32?(0,e.rotlBL)(C,v,A):(0,e.rotlSL)(C,v,A);function b(C,v=24){const A=new Uint32Array(10);for(let I=24-v;I<24;I++){for(let _=0;_<10;_++)A[_]=C[_]^C[_+10]^C[_+20]^C[_+30]^C[_+40];for(let _=0;_<10;_+=2){const S=(_+8)%10,$=(_+2)%10,E=A[$],k=A[$+1],T=p(E,k,1)^A[S],M=g(E,k,1)^A[S+1];for(let N=0;N<50;N+=10)C[_+N]^=T,C[_+N+1]^=M}let P=C[2],R=C[3];for(let _=0;_<24;_++){const S=n[_],$=p(P,R,S),E=g(P,R,S),k=i[_];P=C[k],R=C[k+1],C[k]=$,C[k+1]=E}for(let _=0;_<50;_+=10){for(let S=0;S<10;S++)A[S]=C[_+S];for(let S=0;S<10;S++)C[_+S]^=~A[(S+2)%10]&A[(S+4)%10]}C[0]^=d[I],C[1]^=f[I]}A.fill(0)}Bt.keccakP=b;class x extends r.Hash{constructor(v,A,I,P=!1,R=24){if(super(),this.blockLen=v,this.suffix=A,this.outputLen=I,this.enableXOF=P,this.rounds=R,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,t.number)(I),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,r.u32)(this.state)}keccak(){r.isLE||(0,r.byteSwap32)(this.state32),b(this.state32,this.rounds),r.isLE||(0,r.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(v){(0,t.exists)(this);const{blockLen:A,state:I}=this;v=(0,r.toBytes)(v);const P=v.length;for(let R=0;R<P;){const _=Math.min(A-this.pos,P-R);for(let S=0;S<_;S++)I[this.pos++]^=v[R++];this.pos===A&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:v,suffix:A,pos:I,blockLen:P}=this;v[I]^=A,(A&128)!==0&&I===P-1&&this.keccak(),v[P-1]^=128,this.keccak()}writeInto(v){(0,t.exists)(this,!1),(0,t.bytes)(v),this.finish();const A=this.state,{blockLen:I}=this;for(let P=0,R=v.length;P<R;){this.posOut>=I&&this.keccak();const _=Math.min(I-this.posOut,R-P);v.set(A.subarray(this.posOut,this.posOut+_),P),this.posOut+=_,P+=_}return v}xofInto(v){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(v)}xof(v){return(0,t.number)(v),this.xofInto(new Uint8Array(v))}digestInto(v){if((0,t.output)(v,this),this.finished)throw new Error("digest() was already called");return this.writeInto(v),this.destroy(),v}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(v){const{blockLen:A,suffix:I,outputLen:P,rounds:R,enableXOF:_}=this;return v||(v=new x(A,I,P,_,R)),v.state32.set(this.state32),v.pos=this.pos,v.posOut=this.posOut,v.finished=this.finished,v.rounds=R,v.suffix=I,v.outputLen=P,v.enableXOF=_,v.destroyed=this.destroyed,v}}Bt.Keccak=x;const w=(C,v,A)=>(0,r.wrapConstructor)(()=>new x(v,C,A));Bt.sha3_224=w(6,144,224/8),Bt.sha3_256=w(6,136,256/8),Bt.sha3_384=w(6,104,384/8),Bt.sha3_512=w(6,72,512/8),Bt.keccak_224=w(1,144,224/8),Bt.keccak_256=w(1,136,256/8),Bt.keccak_384=w(1,104,384/8),Bt.keccak_512=w(1,72,512/8);const L=(C,v,A)=>(0,r.wrapXOFConstructorWithOpts)((I={})=>new x(v,C,I.dkLen===void 0?A:I.dkLen,!0));return Bt.shake128=L(31,168,128/8),Bt.shake256=L(31,136,256/8),Bt}var ko={},Dr={},qr={},To={},Hr={},Me={},zr={},cn={},qu;function Mg(){if(qu)return cn;qu=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.StructError=void 0;class t extends TypeError{constructor(r,i){let n;const{message:s,explanation:o,...a}=r,{path:l}=r,c=l.length===0?s:`At path: ${l.join(".")} -- ${s}`;super(o??c),o!=null&&(this.cause=c),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[r,...i()])}}return cn.StructError=t,cn}var Yt={},Xt={},Hu;function Oa(){if(Hu)return Xt;Hu=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.run=Xt.toFailures=Xt.toFailure=Xt.shiftIterator=Xt.print=Xt.isPlainObject=Xt.isObject=void 0;function t(l){return e(l)&&typeof l[Symbol.iterator]=="function"}function e(l){return typeof l=="object"&&l!==null}Xt.isObject=e;function r(l){if(Object.prototype.toString.call(l)!=="[object Object]")return!1;const c=Object.getPrototypeOf(l);return c===null||c===Object.prototype}Xt.isPlainObject=r;function i(l){return typeof l=="symbol"?l.toString():typeof l=="string"?JSON.stringify(l):`${l}`}Xt.print=i;function n(l){const{done:c,value:h}=l.next();return c?void 0:h}Xt.shiftIterator=n;function s(l,c,h,u){if(l===!0)return;l===!1?l={}:typeof l=="string"&&(l={message:l});const{path:d,branch:f}=c,{type:p}=h,{refinement:g,message:b=`Expected a value of type \`${p}\`${g?` with refinement \`${g}\``:""}, but received: \`${i(u)}\``}=l;return{value:u,type:p,refinement:g,key:d[d.length-1],path:d,branch:f,...l,message:b}}Xt.toFailure=s;function*o(l,c,h,u){t(l)||(l=[l]);for(const d of l){const f=s(d,c,h,u);f&&(yield f)}}Xt.toFailures=o;function*a(l,c,h={}){const{path:u=[],branch:d=[l],coerce:f=!1,mask:p=!1}=h,g={path:u,branch:d};if(f&&(l=c.coercer(l,g),p&&c.type!=="type"&&e(c.schema)&&e(l)&&!Array.isArray(l)))for(const x in l)c.schema[x]===void 0&&delete l[x];let b="valid";for(const x of c.validator(l,g))x.explanation=h.message,b="not_valid",yield[x,void 0];for(let[x,w,L]of c.entries(l,g)){const C=a(w,L,{path:x===void 0?u:[...u,x],branch:x===void 0?d:[...d,w],coerce:f,mask:p,message:h.message});for(const v of C)v[0]?(b=v[0].refinement===null||v[0].refinement===void 0?"not_valid":"not_refined",yield[v[0],void 0]):f&&(w=v[1],x===void 0?l=w:l instanceof Map?l.set(x,w):l instanceof Set?l.add(w):e(l)&&(w!==void 0||x in l)&&(l[x]=w))}if(b!=="not_valid")for(const x of c.refiner(l,g))x.explanation=h.message,b="not_refined",yield[x,void 0];b==="valid"&&(yield[void 0,l])}return Xt.run=a,Xt}var zu;function ns(){if(zu)return Yt;zu=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.validate=Yt.is=Yt.mask=Yt.create=Yt.assert=Yt.ExactOptionalStruct=Yt.Struct=void 0;const t=Mg(),e=Oa();class r{constructor(u){const{type:d,schema:f,validator:p,refiner:g,coercer:b=w=>w,entries:x=function*(){}}=u;this.type=d,this.schema=f,this.entries=x,this.coercer=b,p?this.validator=(w,L)=>{const C=p(w,L);return(0,e.toFailures)(C,L,this,w)}:this.validator=()=>[],g?this.refiner=(w,L)=>{const C=g(w,L);return(0,e.toFailures)(C,L,this,w)}:this.refiner=()=>[]}assert(u,d){return s(u,this,d)}create(u,d){return o(u,this,d)}is(u){return l(u,this)}mask(u,d){return a(u,this,d)}validate(u,d={}){return c(u,this,d)}}Yt.Struct=r;const i="EXACT_OPTIONAL";class n extends r{constructor(u){super({...u,type:`exact optional ${u.type}`}),this.brand=i}static isExactOptional(u){return(0,e.isObject)(u)&&"brand"in u&&u.brand===i}}Yt.ExactOptionalStruct=n;function s(h,u,d){const f=c(h,u,{message:d});if(f[0])throw f[0]}Yt.assert=s;function o(h,u,d){const f=c(h,u,{coerce:!0,message:d});if(f[0])throw f[0];return f[1]}Yt.create=o;function a(h,u,d){const f=c(h,u,{coerce:!0,mask:!0,message:d});if(f[0])throw f[0];return f[1]}Yt.mask=a;function l(h,u){return!c(h,u)[0]}Yt.is=l;function c(h,u,d={}){const f=(0,e.run)(h,u,d),p=(0,e.shiftIterator)(f);return p[0]?[new t.StructError(p[0],function*(){for(const x of f)x[0]&&(yield x[0])}),void 0]:[void 0,p[1]]}return Yt.validate=c,Yt}var lr={},ct={},qt={},Wu;function $g(){if(Wu)return qt;Wu=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.pick=qt.partial=qt.omit=qt.lazy=qt.dynamic=qt.deprecated=qt.define=qt.assign=void 0;const t=ns(),e=ah();function r(...h){const u=h[0]?.type==="type",d=h.map(({schema:p})=>p),f=Object.assign({},...d);return u?(0,e.type)(f):(0,e.object)(f)}qt.assign=r;function i(h,u){return new t.Struct({type:h,schema:null,validator:u})}qt.define=i;function n(h,u){return new t.Struct({...h,refiner:(d,f)=>d===void 0||h.refiner(d,f),validator(d,f){return d===void 0?!0:(u(d,f),h.validator(d,f))}})}qt.deprecated=n;function s(h){return new t.Struct({type:"dynamic",schema:null,*entries(u,d){yield*h(u,d).entries(u,d)},validator(u,d){return h(u,d).validator(u,d)},coercer(u,d){return h(u,d).coercer(u,d)},refiner(u,d){return h(u,d).refiner(u,d)}})}qt.dynamic=s;function o(h){let u;return new t.Struct({type:"lazy",schema:null,*entries(d,f){u??(u=h()),yield*u.entries(d,f)},validator(d,f){return u??(u=h()),u.validator(d,f)},coercer(d,f){return u??(u=h()),u.coercer(d,f)},refiner(d,f){return u??(u=h()),u.refiner(d,f)}})}qt.lazy=o;function a(h,u){const{schema:d}=h,f={...d};for(const p of u)delete f[p];switch(h.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}qt.omit=a;function l(h){const u=h instanceof t.Struct,d=u?{...h.schema}:{...h};for(const f in d)d[f]=(0,e.optional)(d[f]);return u&&h.type==="type"?(0,e.type)(d):(0,e.object)(d)}qt.partial=l;function c(h,u){const{schema:d}=h,f={};for(const p of u)f[p]=d[p];switch(h.type){case"type":return(0,e.type)(f);default:return(0,e.object)(f)}}return qt.pick=c,qt}var Uu;function ah(){if(Uu)return ct;Uu=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.unknown=ct.union=ct.type=ct.tuple=ct.string=ct.set=ct.regexp=ct.record=ct.exactOptional=ct.optional=ct.object=ct.number=ct.nullable=ct.never=ct.map=ct.literal=ct.intersection=ct.integer=ct.instance=ct.func=ct.enums=ct.date=ct.boolean=ct.bigint=ct.array=ct.any=void 0;const t=ns(),e=Oa(),r=$g();function i(){return(0,r.define)("any",()=>!0)}ct.any=i;function n(E){return new t.Struct({type:"array",schema:E,*entries(k){if(E&&Array.isArray(k))for(const[T,M]of k.entries())yield[T,M,E]},coercer(k){return Array.isArray(k)?k.slice():k},validator(k){return Array.isArray(k)||`Expected an array value, but received: ${(0,e.print)(k)}`}})}ct.array=n;function s(){return(0,r.define)("bigint",E=>typeof E=="bigint")}ct.bigint=s;function o(){return(0,r.define)("boolean",E=>typeof E=="boolean")}ct.boolean=o;function a(){return(0,r.define)("date",E=>E instanceof Date&&!isNaN(E.getTime())||`Expected a valid \`Date\` object, but received: ${(0,e.print)(E)}`)}ct.date=a;function l(E){const k={},T=E.map(M=>(0,e.print)(M)).join();for(const M of E)k[M]=M;return new t.Struct({type:"enums",schema:k,validator(M){return E.includes(M)||`Expected one of \`${T}\`, but received: ${(0,e.print)(M)}`}})}ct.enums=l;function c(){return(0,r.define)("func",E=>typeof E=="function"||`Expected a function, but received: ${(0,e.print)(E)}`)}ct.func=c;function h(E){return(0,r.define)("instance",k=>k instanceof E||`Expected a \`${E.name}\` instance, but received: ${(0,e.print)(k)}`)}ct.instance=h;function u(){return(0,r.define)("integer",E=>typeof E=="number"&&!isNaN(E)&&Number.isInteger(E)||`Expected an integer, but received: ${(0,e.print)(E)}`)}ct.integer=u;function d(E){return new t.Struct({type:"intersection",schema:null,*entries(k,T){for(const{entries:M}of E)yield*M(k,T)},*validator(k,T){for(const{validator:M}of E)yield*M(k,T)},*refiner(k,T){for(const{refiner:M}of E)yield*M(k,T)}})}ct.intersection=d;function f(E){const k=(0,e.print)(E),T=typeof E;return new t.Struct({type:"literal",schema:T==="string"||T==="number"||T==="boolean"?E:null,validator(M){return M===E||`Expected the literal \`${k}\`, but received: ${(0,e.print)(M)}`}})}ct.literal=f;function p(E,k){return new t.Struct({type:"map",schema:null,*entries(T){if(E&&k&&T instanceof Map)for(const[M,N]of T.entries())yield[M,M,E],yield[M,N,k]},coercer(T){return T instanceof Map?new Map(T):T},validator(T){return T instanceof Map||`Expected a \`Map\` object, but received: ${(0,e.print)(T)}`}})}ct.map=p;function g(){return(0,r.define)("never",()=>!1)}ct.never=g;function b(E){return new t.Struct({...E,validator:(k,T)=>k===null||E.validator(k,T),refiner:(k,T)=>k===null||E.refiner(k,T)})}ct.nullable=b;function x(){return(0,r.define)("number",E=>typeof E=="number"&&!isNaN(E)||`Expected a number, but received: ${(0,e.print)(E)}`)}ct.number=x;function w(E){const k=E?Object.keys(E):[],T=g();return new t.Struct({type:"object",schema:E??null,*entries(M){if(E&&(0,e.isObject)(M)){const N=new Set(Object.keys(M));for(const D of k){N.delete(D);const O=E[D];t.ExactOptionalStruct.isExactOptional(O)&&!Object.prototype.hasOwnProperty.call(M,D)||(yield[D,M[D],E[D]])}for(const D of N)yield[D,M[D],T]}},validator(M){return(0,e.isObject)(M)||`Expected an object, but received: ${(0,e.print)(M)}`},coercer(M){return(0,e.isObject)(M)?{...M}:M}})}ct.object=w;function L(E){return new t.Struct({...E,validator:(k,T)=>k===void 0||E.validator(k,T),refiner:(k,T)=>k===void 0||E.refiner(k,T)})}ct.optional=L;function C(E){return new t.ExactOptionalStruct(E)}ct.exactOptional=C;function v(E,k){return new t.Struct({type:"record",schema:null,*entries(T){if((0,e.isObject)(T))for(const M in T){const N=T[M];yield[M,M,E],yield[M,N,k]}},validator(T){return(0,e.isObject)(T)||`Expected an object, but received: ${(0,e.print)(T)}`}})}ct.record=v;function A(){return(0,r.define)("regexp",E=>E instanceof RegExp)}ct.regexp=A;function I(E){return new t.Struct({type:"set",schema:null,*entries(k){if(E&&k instanceof Set)for(const T of k)yield[T,T,E]},coercer(k){return k instanceof Set?new Set(k):k},validator(k){return k instanceof Set||`Expected a \`Set\` object, but received: ${(0,e.print)(k)}`}})}ct.set=I;function P(){return(0,r.define)("string",E=>typeof E=="string"||`Expected a string, but received: ${(0,e.print)(E)}`)}ct.string=P;function R(E){const k=g();return new t.Struct({type:"tuple",schema:null,*entries(T){if(Array.isArray(T)){const M=Math.max(E.length,T.length);for(let N=0;N<M;N++)yield[N,T[N],E[N]||k]}},validator(T){return Array.isArray(T)||`Expected an array, but received: ${(0,e.print)(T)}`}})}ct.tuple=R;function _(E){const k=Object.keys(E);return new t.Struct({type:"type",schema:E,*entries(T){if((0,e.isObject)(T))for(const M of k)yield[M,T[M],E[M]]},validator(T){return(0,e.isObject)(T)||`Expected an object, but received: ${(0,e.print)(T)}`},coercer(T){return(0,e.isObject)(T)?{...T}:T}})}ct.type=_;function S(E){const k=E.map(T=>T.type).join(" | ");return new t.Struct({type:"union",schema:null,coercer(T){for(const M of E){const[N,D]=M.validate(T,{coerce:!0});if(!N)return D}return T},validator(T,M){const N=[];for(const D of E){const[...O]=(0,e.run)(T,D,M),[B]=O;if(!B?.[0])return[];for(const[H]of O)H&&N.push(H)}return[`Expected the value to satisfy a union of \`${k}\`, but received: ${(0,e.print)(T)}`,...N]}})}ct.union=S;function $(){return(0,r.define)("unknown",()=>!0)}return ct.unknown=$,ct}var Vu;function C_(){if(Vu)return lr;Vu=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.trimmed=lr.defaulted=lr.coerce=void 0;const t=ns(),e=Oa(),r=ah();function i(o,a,l){return new t.Struct({...o,coercer:(c,h)=>(0,t.is)(c,a)?o.coercer(l(c,h),h):o.coercer(c,h)})}lr.coerce=i;function n(o,a,l={}){return i(o,(0,r.unknown)(),c=>{const h=typeof a=="function"?a():a;if(c===void 0)return h;if(!l.strict&&(0,e.isPlainObject)(c)&&(0,e.isPlainObject)(h)){const u={...c};let d=!1;for(const f in h)u[f]===void 0&&(u[f]=h[f],d=!0);if(d)return u}return c})}lr.defaulted=n;function s(o){return i(o,(0,r.string)(),a=>a.trim())}return lr.trimmed=s,lr}var Jt={},Gu;function S_(){if(Gu)return Jt;Gu=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.refine=Jt.size=Jt.pattern=Jt.nonempty=Jt.min=Jt.max=Jt.empty=void 0;const t=ns(),e=Oa();function r(h){return c(h,"empty",u=>{const d=i(u);return d===0||`Expected an empty ${h.type} but received one with a size of \`${d}\``})}Jt.empty=r;function i(h){return h instanceof Map||h instanceof Set?h.size:h.length}function n(h,u,d={}){const{exclusive:f}=d;return c(h,"max",p=>f?p<u:p<=u||`Expected a ${h.type} less than ${f?"":"or equal to "}${u} but received \`${p}\``)}Jt.max=n;function s(h,u,d={}){const{exclusive:f}=d;return c(h,"min",p=>f?p>u:p>=u||`Expected a ${h.type} greater than ${f?"":"or equal to "}${u} but received \`${p}\``)}Jt.min=s;function o(h){return c(h,"nonempty",u=>i(u)>0||`Expected a nonempty ${h.type} but received an empty one`)}Jt.nonempty=o;function a(h,u){return c(h,"pattern",d=>u.test(d)||`Expected a ${h.type} matching \`/${u.source}/\` but received "${d}"`)}Jt.pattern=a;function l(h,u,d=u){const f=`Expected a ${h.type}`,p=u===d?`of \`${u}\``:`between \`${u}\` and \`${d}\``;return c(h,"size",g=>{if(typeof g=="number"||g instanceof Date)return u<=g&&g<=d||`${f} ${p} but received \`${g}\``;if(g instanceof Map||g instanceof Set){const{size:x}=g;return u<=x&&x<=d||`${f} with a size ${p} but received one with a size of \`${x}\``}const{length:b}=g;return u<=b&&b<=d||`${f} with a length ${p} but received one with a length of \`${b}\``})}Jt.size=l;function c(h,u,d){return new t.Struct({...h,*refiner(f,p){yield*h.refiner(f,p);const g=d(f,p),b=(0,e.toFailures)(g,p,h,f);for(const x of b)yield{...x,refinement:u}}})}return Jt.refine=c,Jt}var Yu;function er(){return Yu||(Yu=1,function(t){var e=zr&&zr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=zr&&zr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Mg(),t),r(ns(),t),r(C_(),t),r(S_(),t),r(ah(),t),r($g(),t)}(zr)),zr}var Ce={};class oh extends Error{constructor(e,{cause:r}={}){super(e),this.name=oh.name,r&&(this.cause=r),this.message=e}}const k_=Object.freeze(Object.defineProperty({__proto__:null,ErrorWithCause:oh},Symbol.toStringTag,{value:"Module"})),T_=Bg(k_),E_=(t,e)=>{if(!t||!e||!(t instanceof Error)||!(e.prototype instanceof Error)&&e!==Error)return;const r=new Set;let i=t;for(;i&&!r.has(i);){if(r.add(i),i instanceof e)return i;i=Pa(i)}},Pa=t=>{if(!(!t||typeof t!="object"||!("cause"in t)))if(typeof t.cause=="function"){const e=t.cause();return e instanceof Error?e:void 0}else return t.cause instanceof Error?t.cause:void 0},Ig=(t,e)=>{if(!(t instanceof Error))return"";const r=t.stack||"";if(e.has(t))return r+`
causes have become circular...`;const i=Pa(t);return i?(e.add(t),r+`
caused by: `+Ig(i,e)):r},A_=t=>Ig(t,new Set),Og=(t,e,r)=>{if(!(t instanceof Error))return"";const i=r?"":t.message||"";if(e.has(t))return i+": ...";const n=Pa(t);if(n){e.add(t);const s="cause"in t&&typeof t.cause=="function";return i+(s?"":": ")+Og(n,e,s)}else return i},L_=t=>Og(t,new Set),B_=Object.freeze(Object.defineProperty({__proto__:null,findCauseByReference:E_,getErrorCause:Pa,messageWithCauses:L_,stackWithCauses:A_},Symbol.toStringTag,{value:"Module"})),R_=Bg(B_);var Eo,Xu;function M_(){if(Xu)return Eo;Xu=1;const{ErrorWithCause:t}=T_,{findCauseByReference:e,getErrorCause:r,messageWithCauses:i,stackWithCauses:n}=R_;return Eo={ErrorWithCause:t,findCauseByReference:e,getErrorCause:r,stackWithCauses:n,messageWithCauses:i},Eo}var Ao={},Ju;function lh(){return Ju||(Ju=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.getKnownPropertyNames=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0;function e(h){return Array.isArray(h)&&h.length>0}t.isNonEmptyArray=e;function r(h){return h==null}t.isNullOrUndefined=r;function i(h){return!!h&&typeof h=="object"&&!Array.isArray(h)}t.isObject=i;const n=(h,u)=>Object.hasOwnProperty.call(h,u);t.hasProperty=n;function s(h){return Object.getOwnPropertyNames(h)}t.getKnownPropertyNames=s,function(h){h[h.Null=4]="Null",h[h.Comma=1]="Comma",h[h.Wrapper=1]="Wrapper",h[h.True=4]="True",h[h.False=5]="False",h[h.Quote=1]="Quote",h[h.Colon=1]="Colon",h[h.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function o(h){if(typeof h!="object"||h===null)return!1;try{let u=h;for(;Object.getPrototypeOf(u)!==null;)u=Object.getPrototypeOf(u);return Object.getPrototypeOf(h)===u}catch{return!1}}t.isPlainObject=o;function a(h){return h.charCodeAt(0)<=127}t.isASCII=a;function l(h){return h.split("").reduce((d,f)=>a(f)?d+1:d+2,0)+(h.match(t.ESCAPE_CHARACTERS_REGEXP)??[]).length}t.calculateStringSize=l;function c(h){return h.toString().length}t.calculateNumberSize=c}(Ao)),Ao}var Ku;function Pg(){if(Ku)return Ce;Ku=1,Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.wrapError=Ce.getErrorMessage=Ce.isErrorWithStack=Ce.isErrorWithMessage=Ce.isErrorWithCode=void 0;const t=M_(),e=lh();function r(l){return l instanceof Error||(0,e.isObject)(l)&&l.constructor.name==="Error"}function i(l){return typeof l=="object"&&l!==null&&"code"in l}Ce.isErrorWithCode=i;function n(l){return typeof l=="object"&&l!==null&&"message"in l}Ce.isErrorWithMessage=n;function s(l){return typeof l=="object"&&l!==null&&"stack"in l}Ce.isErrorWithStack=s;function o(l){return n(l)&&typeof l.message=="string"?l.message:(0,e.isNullOrUndefined)(l)?"":String(l)}Ce.getErrorMessage=o;function a(l,c){if(r(l)){let h;return Error.length===2?h=new Error(c,{cause:l}):h=new t.ErrorWithCause(c,{cause:l}),i(l)&&(h.code=l.code),h}return c.length>0?new Error(`${String(l)}: ${c}`):new Error(String(l))}return Ce.wrapError=a,Ce}var Zu;function Fr(){if(Zu)return Me;Zu=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.assertExhaustive=Me.assertStruct=Me.assert=Me.AssertionError=void 0;const t=er(),e=Pg();function r(c){return typeof c?.prototype?.constructor?.name=="string"}function i(c){return(0,e.getErrorMessage)(c).replace(/\.$/u,"")}function n(c,h){return r(c)?new c({message:h}):c({message:h})}class s extends Error{constructor(h){super(h.message),this.code="ERR_ASSERTION"}}Me.AssertionError=s;function o(c,h="Assertion failed.",u=s){if(!c)throw h instanceof Error?h:n(u,h)}Me.assert=o;function a(c,h,u="Assertion failed",d=s){try{(0,t.assert)(c,h)}catch(f){throw n(d,`${u}: ${i(f)}.`)}}Me.assertStruct=a;function l(c){throw new Error("Invalid branch reached. Should be detected during compilation.")}return Me.assertExhaustive=l,Me}var hn={},Qu;function Fg(){if(Qu)return hn;Qu=1,Object.defineProperty(hn,"__esModule",{value:!0}),hn.base64=void 0;const t=er(),e=Fr(),r=(i,n={})=>{const s=n.paddingRequired??!1,o=n.characterSet??"base64";let a;o==="base64"?a=String.raw`[A-Za-z0-9+\/]`:((0,e.assert)(o==="base64url"),a=String.raw`[-_A-Za-z0-9]`);let l;return s?l=new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):l=new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,t.pattern)(i,l)};return hn.base64=r,hn}var xt={},Lo={},td;function $_(){return td||(td=1,function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=void 0;function e(F){return F instanceof Uint8Array||ArrayBuffer.isView(F)&&F.constructor.name==="Uint8Array"}function r(F,...j){if(!e(F))throw new Error("Uint8Array expected");if(j.length>0&&!j.includes(F.length))throw new Error("Uint8Array expected of length "+j+", got length="+F.length)}function i(F,j){return Array.isArray(j)?j.length===0?!0:F?j.every(V=>typeof V=="string"):j.every(V=>Number.isSafeInteger(V)):!1}function n(F){if(typeof F!="function")throw new Error("function expected");return!0}function s(F,j){if(typeof j!="string")throw new Error(`${F}: string expected`);return!0}function o(F){if(!Number.isSafeInteger(F))throw new Error(`invalid integer: ${F}`)}function a(F){if(!Array.isArray(F))throw new Error("array expected")}function l(F,j){if(!i(!0,j))throw new Error(`${F}: array of strings expected`)}function c(F,j){if(!i(!1,j))throw new Error(`${F}: array of numbers expected`)}function h(...F){const j=Z=>Z,V=(Z,pt)=>gt=>Z(pt(gt)),K=F.map(Z=>Z.encode).reduceRight(V,j),Q=F.map(Z=>Z.decode).reduce(V,j);return{encode:K,decode:Q}}function u(F){const j=typeof F=="string"?F.split(""):F,V=j.length;l("alphabet",j);const K=new Map(j.map((Q,Z)=>[Q,Z]));return{encode:Q=>(a(Q),Q.map(Z=>{if(!Number.isSafeInteger(Z)||Z<0||Z>=V)throw new Error(`alphabet.encode: digit index outside alphabet "${Z}". Allowed: ${F}`);return j[Z]})),decode:Q=>(a(Q),Q.map(Z=>{s("alphabet.decode",Z);const pt=K.get(Z);if(pt===void 0)throw new Error(`Unknown letter: "${Z}". Allowed: ${F}`);return pt}))}}function d(F=""){return s("join",F),{encode:j=>(l("join.decode",j),j.join(F)),decode:j=>(s("join.decode",j),j.split(F))}}function f(F,j="="){return o(F),s("padding",j),{encode(V){for(l("padding.encode",V);V.length*F%8;)V.push(j);return V},decode(V){l("padding.decode",V);let K=V.length;if(K*F%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;K>0&&V[K-1]===j;K--)if((K-1)*F%8===0)throw new Error("padding: invalid, string has too much padding");return V.slice(0,K)}}}function p(F){return n(F),{encode:j=>j,decode:j=>F(j)}}function g(F,j,V){if(j<2)throw new Error(`convertRadix: invalid from=${j}, base cannot be less than 2`);if(V<2)throw new Error(`convertRadix: invalid to=${V}, base cannot be less than 2`);if(a(F),!F.length)return[];let K=0;const Q=[],Z=Array.from(F,gt=>{if(o(gt),gt<0||gt>=j)throw new Error(`invalid integer: ${gt}`);return gt}),pt=Z.length;for(;;){let gt=0,At=!0;for(let Lt=K;Lt<pt;Lt++){const ae=Z[Lt],It=j*gt,Mt=It+ae;if(!Number.isSafeInteger(Mt)||It/j!==gt||Mt-ae!==It)throw new Error("convertRadix: carry overflow");const jt=Mt/V;gt=Mt%V;const Ut=Math.floor(jt);if(Z[Lt]=Ut,!Number.isSafeInteger(Ut)||Ut*V+gt!==Mt)throw new Error("convertRadix: carry overflow");if(At)Ut?At=!1:K=Lt;else continue}if(Q.push(gt),At)break}for(let gt=0;gt<F.length-1&&F[gt]===0;gt++)Q.push(0);return Q.reverse()}const b=(F,j)=>j===0?F:b(j,F%j),x=(F,j)=>F+(j-b(F,j)),w=(()=>{let F=[];for(let j=0;j<40;j++)F.push(2**j);return F})();function L(F,j,V,K){if(a(F),j<=0||j>32)throw new Error(`convertRadix2: wrong from=${j}`);if(V<=0||V>32)throw new Error(`convertRadix2: wrong to=${V}`);if(x(j,V)>32)throw new Error(`convertRadix2: carry overflow from=${j} to=${V} carryBits=${x(j,V)}`);let Q=0,Z=0;const pt=w[j],gt=w[V]-1,At=[];for(const Lt of F){if(o(Lt),Lt>=pt)throw new Error(`convertRadix2: invalid data word=${Lt} from=${j}`);if(Q=Q<<j|Lt,Z+j>32)throw new Error(`convertRadix2: carry overflow pos=${Z} from=${j}`);for(Z+=j;Z>=V;Z-=V)At.push((Q>>Z-V&gt)>>>0);const ae=w[Z];if(ae===void 0)throw new Error("invalid carry");Q&=ae-1}if(Q=Q<<V-Z&gt,!K&&Z>=j)throw new Error("Excess padding");if(!K&&Q>0)throw new Error(`Non-zero padding: ${Q}`);return K&&Z>0&&At.push(Q>>>0),At}function C(F){o(F);const j=2**8;return{encode:V=>{if(!e(V))throw new Error("radix.encode input should be Uint8Array");return g(Array.from(V),j,F)},decode:V=>(c("radix.decode",V),Uint8Array.from(g(V,F,j)))}}function v(F,j=!1){if(o(F),F<=0||F>32)throw new Error("radix2: bits should be in (0..32]");if(x(8,F)>32||x(F,8)>32)throw new Error("radix2: carry overflow");return{encode:V=>{if(!e(V))throw new Error("radix2.encode input should be Uint8Array");return L(Array.from(V),8,F,!j)},decode:V=>(c("radix2.decode",V),Uint8Array.from(L(V,F,8,j)))}}function A(F){return n(F),function(...j){try{return F.apply(null,j)}catch{}}}function I(F,j){return o(F),n(j),{encode(V){if(!e(V))throw new Error("checksum.encode: input should be Uint8Array");const K=j(V).slice(0,F),Q=new Uint8Array(V.length+F);return Q.set(V),Q.set(K,V.length),Q},decode(V){if(!e(V))throw new Error("checksum.decode: input should be Uint8Array");const K=V.slice(0,-F),Q=V.slice(-F),Z=j(K).slice(0,F);for(let pt=0;pt<F;pt++)if(Z[pt]!==Q[pt])throw new Error("Invalid checksum");return K}}}t.utils={alphabet:u,chain:h,checksum:I,convertRadix:g,convertRadix2:L,radix:C,radix2:v,join:d,padding:f},t.base16=h(v(4),u("0123456789ABCDEF"),d("")),t.base32=h(v(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f(5),d("")),t.base32nopad=h(v(5),u("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),d("")),t.base32hex=h(v(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f(5),d("")),t.base32hexnopad=h(v(5),u("0123456789ABCDEFGHIJKLMNOPQRSTUV"),d("")),t.base32crockford=h(v(5),u("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),d(""),p(F=>F.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const P=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",R=(F,j)=>{s("base64",F);const V=j?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/,K=j?"base64url":"base64";if(F.length>0&&!V.test(F))throw new Error("invalid base64");return Uint8Array.fromBase64(F,{alphabet:K,lastChunkHandling:"strict"})};t.base64=P?{encode(F){return r(F),F.toBase64()},decode(F){return R(F,!1)}}:h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f(6),d("")),t.base64nopad=h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d("")),t.base64url=P?{encode(F){return r(F),F.toBase64({alphabet:"base64url"})},decode(F){return R(F,!0)}}:h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(6),d("")),t.base64urlnopad=h(v(6),u("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),d(""));const _=F=>h(C(58),u(F),d(""));t.base58=_("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=_("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=_("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const S=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(F){let j="";for(let V=0;V<F.length;V+=8){const K=F.subarray(V,V+8);j+=t.base58.encode(K).padStart(S[K.length],"1")}return j},decode(F){let j=[];for(let V=0;V<F.length;V+=11){const K=F.slice(V,V+11),Q=S.indexOf(K.length),Z=t.base58.decode(K);for(let pt=0;pt<Z.length-Q;pt++)if(Z[pt]!==0)throw new Error("base58xmr: wrong padding");j=j.concat(Array.from(Z.slice(Z.length-Q)))}return Uint8Array.from(j)}};const $=F=>h(I(4,j=>F(F(j))),t.base58);t.createBase58check=$,t.base58check=t.createBase58check;const E=h(u("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),d("")),k=[996825010,642813549,513874426,1027748829,705979059];function T(F){const j=F>>25;let V=(F&33554431)<<5;for(let K=0;K<k.length;K++)(j>>K&1)===1&&(V^=k[K]);return V}function M(F,j,V=1){const K=F.length;let Q=1;for(let Z=0;Z<K;Z++){const pt=F.charCodeAt(Z);if(pt<33||pt>126)throw new Error(`Invalid prefix (${F})`);Q=T(Q)^pt>>5}Q=T(Q);for(let Z=0;Z<K;Z++)Q=T(Q)^F.charCodeAt(Z)&31;for(let Z of j)Q=T(Q)^Z;for(let Z=0;Z<6;Z++)Q=T(Q);return Q^=V,E.encode(L([Q%w[30]],30,5,!1))}function N(F){const j=F==="bech32"?1:734539939,V=v(5),K=V.decode,Q=V.encode,Z=A(K);function pt(It,Mt,jt=90){s("bech32.encode prefix",It),e(Mt)&&(Mt=Array.from(Mt)),c("bech32.encode",Mt);const Ut=It.length;if(Ut===0)throw new TypeError(`Invalid prefix length ${Ut}`);const Ee=Ut+7+Mt.length;if(jt!==!1&&Ee>jt)throw new TypeError(`Length ${Ee} exceeds limit ${jt}`);const Er=It.toLowerCase(),Ar=M(Er,Mt,j);return`${Er}1${E.encode(Mt)}${Ar}`}function gt(It,Mt=90){s("bech32.decode input",It);const jt=It.length;if(jt<8||Mt!==!1&&jt>Mt)throw new TypeError(`invalid string length: ${jt} (${It}). Expected (8..${Mt})`);const Ut=It.toLowerCase();if(It!==Ut&&It!==It.toUpperCase())throw new Error("String must be lowercase or uppercase");const Ee=Ut.lastIndexOf("1");if(Ee===0||Ee===-1)throw new Error('Letter "1" must be present between prefix and data only');const Er=Ut.slice(0,Ee),Ar=Ut.slice(Ee+1);if(Ar.length<6)throw new Error("Data must be at least 6 characters long");const bs=E.decode(Ar).slice(0,-6),yi=M(Er,bs,j);if(!Ar.endsWith(yi))throw new Error(`Invalid checksum in ${It}: expected "${yi}"`);return{prefix:Er,words:bs}}const At=A(gt);function Lt(It){const{prefix:Mt,words:jt}=gt(It,!1);return{prefix:Mt,words:jt,bytes:K(jt)}}function ae(It,Mt){return pt(It,Q(Mt))}return{encode:pt,decode:gt,encodeFromBytes:ae,decodeToBytes:Lt,decodeUnsafe:At,fromWords:K,fromWordsUnsafe:Z,toWords:Q}}t.bech32=N("bech32"),t.bech32m=N("bech32m"),t.utf8={encode:F=>new TextDecoder().decode(F),decode:F=>new TextEncoder().encode(F)};const D=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",O={encode(F){return r(F),F.toHex()},decode(F){return s("hex",F),Uint8Array.fromHex(F)}};t.hex=D?O:h(v(4),u("0123456789abcdef"),d(""),p(F=>{if(typeof F!="string"||F.length%2!==0)throw new TypeError(`hex.decode: expected string, got ${typeof F} with length ${F.length}`);return F.toLowerCase()}));const B={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},H="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",W=(F,j)=>{if(typeof F!="string"||!B.hasOwnProperty(F))throw new TypeError(H);if(!e(j))throw new TypeError("bytesToString() expects Uint8Array");return B[F].encode(j)};t.bytesToString=W,t.str=t.bytesToString;const U=(F,j)=>{if(!B.hasOwnProperty(F))throw new TypeError(H);if(typeof j!="string")throw new TypeError("stringToBytes() expects string");return B[F].decode(j)};t.stringToBytes=U,t.bytes=t.stringToBytes}(Lo)),Lo}var Bo={},ed;function Fa(){return ed||(ed=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.isValidChecksumAddress=t.getChecksumAddress=t.isValidHexAddress=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.HexChecksumAddressStruct=t.HexAddressStruct=t.StrictHexStruct=t.HexStruct=void 0;const e=er(),r=v_(),i=Fr(),n=ch();t.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu),t.HexAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]{40}$/u),t.HexChecksumAddressStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-fA-F]{40}$/u);function s(p){return(0,e.is)(p,t.HexStruct)}t.isHexString=s;function o(p){return(0,e.is)(p,t.StrictHexStruct)}t.isStrictHexString=o;function a(p){(0,i.assert)(s(p),"Value must be a hexadecimal string.")}t.assertIsHexString=a;function l(p){(0,i.assert)(o(p),'Value must be a hexadecimal string, starting with "0x".')}t.assertIsStrictHexString=l;function c(p){return(0,e.is)(p,t.HexAddressStruct)||u(p)}t.isValidHexAddress=c;function h(p){(0,i.assert)((0,e.is)(p,t.HexChecksumAddressStruct),"Invalid hex address.");const g=f(p.toLowerCase()),b=f((0,n.bytesToHex)((0,r.keccak_256)(g)));return`0x${g.split("").map((x,w)=>{const L=b[w];return(0,i.assert)((0,e.is)(L,(0,e.string)()),"Hash shorter than address."),parseInt(L,16)>7?x.toUpperCase():x}).join("")}`}t.getChecksumAddress=h;function u(p){return(0,e.is)(p,t.HexChecksumAddressStruct)?h(p)===p:!1}t.isValidChecksumAddress=u;function d(p){return p.startsWith("0x")?p:p.startsWith("0X")?`0x${p.substring(2)}`:`0x${p}`}t.add0x=d;function f(p){return p.startsWith("0x")||p.startsWith("0X")?p.substring(2):p}t.remove0x=f}(Bo)),Bo}var rd;function ch(){if(rd)return xt;rd=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.createDataView=xt.concatBytes=xt.valueToBytes=xt.base64ToBytes=xt.stringToBytes=xt.numberToBytes=xt.signedBigIntToBytes=xt.bigIntToBytes=xt.hexToBytes=xt.bytesToBase64=xt.bytesToString=xt.bytesToNumber=xt.bytesToSignedBigInt=xt.bytesToBigInt=xt.bytesToHex=xt.assertIsBytes=xt.isBytes=void 0;const t=$_(),e=Fr(),r=Fa(),i=48,n=58,s=87;function o(){const _=[];return()=>{if(_.length===0)for(let S=0;S<256;S++)_.push(S.toString(16).padStart(2,"0"));return _}}const a=o();function l(_){return _ instanceof Uint8Array}xt.isBytes=l;function c(_){(0,e.assert)(l(_),"Value must be a Uint8Array.")}xt.assertIsBytes=c;function h(_){if(c(_),_.length===0)return"0x";const S=a(),$=new Array(_.length);for(let E=0;E<_.length;E++)$[E]=S[_[E]];return(0,r.add0x)($.join(""))}xt.bytesToHex=h;function u(_){c(_);const S=h(_);return BigInt(S)}xt.bytesToBigInt=u;function d(_){c(_);let S=BigInt(0);for(const $ of _)S=(S<<BigInt(8))+BigInt($);return BigInt.asIntN(_.length*8,S)}xt.bytesToSignedBigInt=d;function f(_){c(_);const S=u(_);return(0,e.assert)(S<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(S)}xt.bytesToNumber=f;function p(_){return c(_),new TextDecoder().decode(_)}xt.bytesToString=p;function g(_){return c(_),t.base64.encode(_)}xt.bytesToBase64=g;function b(_){if(_?.toLowerCase?.()==="0x")return new Uint8Array;(0,r.assertIsHexString)(_);const S=(0,r.remove0x)(_).toLowerCase(),$=S.length%2===0?S:`0${S}`,E=new Uint8Array($.length/2);for(let k=0;k<E.length;k++){const T=$.charCodeAt(k*2),M=$.charCodeAt(k*2+1),N=T-(T<n?i:s),D=M-(M<n?i:s);E[k]=N*16+D}return E}xt.hexToBytes=b;function x(_){(0,e.assert)(typeof _=="bigint","Value must be a bigint."),(0,e.assert)(_>=BigInt(0),"Value must be a non-negative bigint.");const S=_.toString(16);return b(S)}xt.bigIntToBytes=x;function w(_,S){(0,e.assert)(S>0);const $=_>>BigInt(31);return!((~_&$)+(_&~$)>>BigInt(S*8+-1))}function L(_,S){(0,e.assert)(typeof _=="bigint","Value must be a bigint."),(0,e.assert)(typeof S=="number","Byte length must be a number."),(0,e.assert)(S>0,"Byte length must be greater than 0."),(0,e.assert)(w(_,S),"Byte length is too small to represent the given value.");let $=_;const E=new Uint8Array(S);for(let k=0;k<E.length;k++)E[k]=Number(BigInt.asUintN(8,$)),$>>=BigInt(8);return E.reverse()}xt.signedBigIntToBytes=L;function C(_){(0,e.assert)(typeof _=="number","Value must be a number."),(0,e.assert)(_>=0,"Value must be a non-negative number."),(0,e.assert)(Number.isSafeInteger(_),"Value is not a safe integer. Use `bigIntToBytes` instead.");const S=_.toString(16);return b(S)}xt.numberToBytes=C;function v(_){return(0,e.assert)(typeof _=="string","Value must be a string."),new TextEncoder().encode(_)}xt.stringToBytes=v;function A(_){return(0,e.assert)(typeof _=="string","Value must be a string."),t.base64.decode(_)}xt.base64ToBytes=A;function I(_){if(typeof _=="bigint")return x(_);if(typeof _=="number")return C(_);if(typeof _=="string")return _.startsWith("0x")?b(_):v(_);if(l(_))return _;throw new TypeError(`Unsupported value type: "${typeof _}".`)}xt.valueToBytes=I;function P(_){const S=new Array(_.length);let $=0;for(let k=0;k<_.length;k++){const T=I(_[k]);S[k]=T,$+=T.length}const E=new Uint8Array($);for(let k=0,T=0;k<S.length;k++)E.set(S[k],T),T+=S[k].length;return E}xt.concatBytes=P;function R(_){if(typeof Buffer<"u"&&_ instanceof Buffer){const S=_.buffer.slice(_.byteOffset,_.byteOffset+_.byteLength);return new DataView(S)}return new DataView(_.buffer,_.byteOffset,_.byteLength)}return xt.createDataView=R,xt}var Ro={},id;function I_(){return id||(id=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.toCaipChainId=t.parseCaipAccountId=t.parseCaipChainId=t.isCaipAssetId=t.isCaipAssetType=t.isCaipAccountAddress=t.isCaipAccountId=t.isCaipReference=t.isCaipNamespace=t.isCaipChainId=t.KnownCaipNamespace=t.CaipAssetIdStruct=t.CaipAssetTypeStruct=t.CaipAccountAddressStruct=t.CaipAccountIdStruct=t.CaipReferenceStruct=t.CaipNamespaceStruct=t.CaipChainIdStruct=t.CAIP_ASSET_ID_REGEX=t.CAIP_ASSET_TYPE_REGEX=t.CAIP_ACCOUNT_ADDRESS_REGEX=t.CAIP_ACCOUNT_ID_REGEX=t.CAIP_REFERENCE_REGEX=t.CAIP_NAMESPACE_REGEX=t.CAIP_CHAIN_ID_REGEX=void 0;const e=er();t.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,t.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,t.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,t.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,t.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,t.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u,t.CaipChainIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_CHAIN_ID_REGEX),t.CaipNamespaceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_NAMESPACE_REGEX),t.CaipReferenceStruct=(0,e.pattern)((0,e.string)(),t.CAIP_REFERENCE_REGEX),t.CaipAccountIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ID_REGEX),t.CaipAccountAddressStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ACCOUNT_ADDRESS_REGEX),t.CaipAssetTypeStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_TYPE_REGEX),t.CaipAssetIdStruct=(0,e.pattern)((0,e.string)(),t.CAIP_ASSET_ID_REGEX),function(d){d.Bip122="bip122",d.Eip155="eip155",d.Wallet="wallet"}(t.KnownCaipNamespace||(t.KnownCaipNamespace={}));function r(d){return(0,e.is)(d,t.CaipChainIdStruct)}t.isCaipChainId=r;function i(d){return(0,e.is)(d,t.CaipNamespaceStruct)}t.isCaipNamespace=i;function n(d){return(0,e.is)(d,t.CaipReferenceStruct)}t.isCaipReference=n;function s(d){return(0,e.is)(d,t.CaipAccountIdStruct)}t.isCaipAccountId=s;function o(d){return(0,e.is)(d,t.CaipAccountAddressStruct)}t.isCaipAccountAddress=o;function a(d){return(0,e.is)(d,t.CaipAssetTypeStruct)}t.isCaipAssetType=a;function l(d){return(0,e.is)(d,t.CaipAssetIdStruct)}t.isCaipAssetId=l;function c(d){const f=t.CAIP_CHAIN_ID_REGEX.exec(d);if(!f?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:f.groups.namespace,reference:f.groups.reference}}t.parseCaipChainId=c;function h(d){const f=t.CAIP_ACCOUNT_ID_REGEX.exec(d);if(!f?.groups)throw new Error("Invalid CAIP account ID.");return{address:f.groups.accountAddress,chainId:f.groups.chainId,chain:{namespace:f.groups.namespace,reference:f.groups.reference}}}t.parseCaipAccountId=h;function u(d,f){if(!i(d))throw new Error(`Invalid "namespace", must match: ${t.CAIP_NAMESPACE_REGEX.toString()}`);if(!n(f))throw new Error(`Invalid "reference", must match: ${t.CAIP_REFERENCE_REGEX.toString()}`);return`${d}:${f}`}t.toCaipChainId=u}(Ro)),Ro}var un={},nd;function O_(){if(nd)return un;nd=1,Object.defineProperty(un,"__esModule",{value:!0}),un.ChecksumStruct=void 0;const t=er(),e=Fg();return un.ChecksumStruct=(0,t.size)((0,e.base64)((0,t.string)(),{paddingRequired:!0}),44,44),un}var $e={},sd;function P_(){if(sd)return $e;sd=1,Object.defineProperty($e,"__esModule",{value:!0}),$e.createHex=$e.createBytes=$e.createBigInt=$e.createNumber=void 0;const t=er(),e=Fr(),r=ch(),i=Fa(),n=(0,t.union)([(0,t.number)(),(0,t.bigint)(),(0,t.string)(),i.StrictHexStruct]),s=(0,t.coerce)((0,t.number)(),n,Number),o=(0,t.coerce)((0,t.bigint)(),n,BigInt);(0,t.union)([i.StrictHexStruct,(0,t.instance)(Uint8Array)]);const a=(0,t.coerce)((0,t.instance)(Uint8Array),(0,t.union)([i.StrictHexStruct]),r.hexToBytes),l=(0,t.coerce)(i.StrictHexStruct,(0,t.instance)(Uint8Array),r.bytesToHex);function c(f){try{const p=(0,t.create)(f,s);return(0,e.assert)(Number.isFinite(p),`Expected a number-like value, got "${f}".`),p}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${f}".`):p}}$e.createNumber=c;function h(f){try{return(0,t.create)(f,o)}catch(p){throw p instanceof t.StructError?new Error(`Expected a number-like value, got "${String(p.value)}".`):p}}$e.createBigInt=h;function u(f){if(typeof f=="string"&&f.toLowerCase()==="0x")return new Uint8Array;try{return(0,t.create)(f,a)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}$e.createBytes=u;function d(f){if(f instanceof Uint8Array&&f.length===0||typeof f=="string"&&f.toLowerCase()==="0x")return"0x";try{return(0,t.create)(f,l)}catch(p){throw p instanceof t.StructError?new Error(`Expected a bytes-like value, got "${String(p.value)}".`):p}}return $e.createHex=d,$e}var Ie={},ad;function F_(){if(ad)return Ie;ad=1;var t=Ie&&Ie.__classPrivateFieldGet||function(o,a,l,c){if(l==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof a=="function"?o!==a||!c:!a.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?c:l==="a"?c.call(o):c?c.value:a.get(o)},e=Ie&&Ie.__classPrivateFieldSet||function(o,a,l,c,h){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof a=="function"?o!==a||!h:!a.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?h.call(o,l):h?h.value=l:a.set(o,l),l},r,i;Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.FrozenSet=Ie.FrozenMap=void 0;class n{get size(){return t(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return t(this,r,"f")[Symbol.iterator]()}constructor(a){r.set(this,void 0),e(this,r,new Map(a),"f"),Object.freeze(this)}entries(){return t(this,r,"f").entries()}forEach(a,l){return t(this,r,"f").forEach((c,h,u)=>a.call(l,c,h,this))}get(a){return t(this,r,"f").get(a)}has(a){return t(this,r,"f").has(a)}keys(){return t(this,r,"f").keys()}values(){return t(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([a,l])=>`${String(a)} => ${String(l)}`).join(", ")} `:""}}`}}Ie.FrozenMap=n;class s{get size(){return t(this,i,"f").size}[(i=new WeakMap,Symbol.iterator)](){return t(this,i,"f")[Symbol.iterator]()}constructor(a){i.set(this,void 0),e(this,i,new Set(a),"f"),Object.freeze(this)}entries(){return t(this,i,"f").entries()}forEach(a,l){return t(this,i,"f").forEach((c,h,u)=>a.call(l,c,h,this))}has(a){return t(this,i,"f").has(a)}keys(){return t(this,i,"f").keys()}values(){return t(this,i,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(a=>String(a)).join(", ")} `:""}}`}}return Ie.FrozenSet=s,Object.freeze(n),Object.freeze(n.prototype),Object.freeze(s),Object.freeze(s.prototype),Ie}var Mo={},od;function N_(){return od||(od=1,Object.defineProperty(Mo,"__esModule",{value:!0})),Mo}var $o={},ld;function j_(){return ld||(ld=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.getSafeJson=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=t.exactOptional=t.object=void 0;const e=er(),r=Fr(),i=lh(),n=_=>(0,e.object)(_);t.object=n;function s({path:_,branch:S}){const $=_[_.length-1];return(0,i.hasProperty)(S[S.length-2],$)}function o(_){return new e.Struct({..._,type:`optional ${_.type}`,validator:(S,$)=>!s($)||_.validator(S,$),refiner:(S,$)=>!s($)||_.refiner(S,$)})}t.exactOptional=o;const a=()=>(0,e.define)("finite number",_=>(0,e.is)(_,(0,e.number)())&&Number.isFinite(_));t.UnsafeJsonStruct=(0,e.union)([(0,e.literal)(null),(0,e.boolean)(),a(),(0,e.string)(),(0,e.array)((0,e.lazy)(()=>t.UnsafeJsonStruct)),(0,e.record)((0,e.string)(),(0,e.lazy)(()=>t.UnsafeJsonStruct))]),t.JsonStruct=(0,e.coerce)(t.UnsafeJsonStruct,(0,e.any)(),_=>((0,r.assertStruct)(_,t.UnsafeJsonStruct),JSON.parse(JSON.stringify(_,(S,$)=>{if(!(S==="__proto__"||S==="constructor"))return $}))));function l(_){try{return c(_),!0}catch{return!1}}t.isValidJson=l;function c(_){return(0,e.create)(_,t.JsonStruct)}t.getSafeJson=c;function h(_){(0,r.assertStruct)(_,t.JsonStruct,"Invalid JSON value");const S=JSON.stringify(_);return new TextEncoder().encode(S).byteLength}t.getJsonSize=h,t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,e.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),t.JsonRpcErrorStruct=(0,t.object)({code:(0,e.integer)(),message:(0,e.string)(),data:o(t.JsonStruct),stack:o((0,e.string)())}),t.JsonRpcParamsStruct=(0,e.union)([(0,e.record)((0,e.string)(),t.JsonStruct),(0,e.array)(t.JsonStruct)]),t.JsonRpcRequestStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)}),t.JsonRpcNotificationStruct=(0,t.object)({jsonrpc:t.JsonRpcVersionStruct,method:(0,e.string)(),params:o(t.JsonRpcParamsStruct)});function u(_){return(0,e.is)(_,t.JsonRpcNotificationStruct)}t.isJsonRpcNotification=u;function d(_,S){(0,r.assertStruct)(_,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",S)}t.assertIsJsonRpcNotification=d;function f(_){return(0,e.is)(_,t.JsonRpcRequestStruct)}t.isJsonRpcRequest=f;function p(_,S){(0,r.assertStruct)(_,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",S)}t.assertIsJsonRpcRequest=p,t.PendingJsonRpcResponseStruct=(0,e.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,t.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,e.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]);function g(_){return(0,e.is)(_,t.PendingJsonRpcResponseStruct)}t.isPendingJsonRpcResponse=g;function b(_,S){(0,r.assertStruct)(_,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",S)}t.assertIsPendingJsonRpcResponse=b;function x(_){return(0,e.is)(_,t.JsonRpcResponseStruct)}t.isJsonRpcResponse=x;function w(_,S){(0,r.assertStruct)(_,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",S)}t.assertIsJsonRpcResponse=w;function L(_){return(0,e.is)(_,t.JsonRpcSuccessStruct)}t.isJsonRpcSuccess=L;function C(_,S){(0,r.assertStruct)(_,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",S)}t.assertIsJsonRpcSuccess=C;function v(_){return(0,e.is)(_,t.JsonRpcFailureStruct)}t.isJsonRpcFailure=v;function A(_,S){(0,r.assertStruct)(_,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",S)}t.assertIsJsonRpcFailure=A;function I(_){return(0,e.is)(_,t.JsonRpcErrorStruct)}t.isJsonRpcError=I;function P(_,S){(0,r.assertStruct)(_,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",S)}t.assertIsJsonRpcError=P;function R(_){const{permitEmptyString:S,permitFractions:$,permitNull:E}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,..._};return T=>!!(typeof T=="number"&&($||Number.isInteger(T))||typeof T=="string"&&(S||T.length>0)||E&&T===null)}t.getJsonRpcIdValidator=R}($o)),$o}var Io={},cd;function D_(){return cd||(cd=1,Object.defineProperty(Io,"__esModule",{value:!0})),Io}var cr={},hd;function q_(){if(hd)return cr;hd=1;var t=cr&&cr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(cr,"__esModule",{value:!0}),cr.createModuleLogger=cr.createProjectLogger=void 0;const r=(0,t(b_()).default)("metamask");function i(s){return r.extend(s)}cr.createProjectLogger=i;function n(s,o){return s.extend(o)}return cr.createModuleLogger=n,cr}var Oe={},ud;function H_(){if(ud)return Oe;ud=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.hexToBigInt=Oe.hexToNumber=Oe.bigIntToHex=Oe.numberToHex=void 0;const t=Fr(),e=Fa(),r=o=>((0,t.assert)(typeof o=="number","Value must be a number."),(0,t.assert)(o>=0,"Value must be a non-negative number."),(0,t.assert)(Number.isSafeInteger(o),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,e.add0x)(o.toString(16)));Oe.numberToHex=r;const i=o=>((0,t.assert)(typeof o=="bigint","Value must be a bigint."),(0,t.assert)(o>=0,"Value must be a non-negative bigint."),(0,e.add0x)(o.toString(16)));Oe.bigIntToHex=i;const n=o=>{(0,e.assertIsHexString)(o);const a=parseInt(o,16);return(0,t.assert)(Number.isSafeInteger(a),"Value is not a safe integer. Use `hexToBigInt` instead."),a};Oe.hexToNumber=n;const s=o=>((0,e.assertIsHexString)(o),BigInt((0,e.add0x)(o)));return Oe.hexToBigInt=s,Oe}var Oo={},dd;function z_(){return dd||(dd=1,Object.defineProperty(Oo,"__esModule",{value:!0})),Oo}var dn={},fd;function W_(){if(fd)return dn;fd=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.createDeferredPromise=void 0;function t({suppressUnhandledRejection:e=!1}={}){let r,i;const n=new Promise((s,o)=>{r=s,i=o});return e&&n.catch(s=>{}),{promise:n,resolve:r,reject:i}}return dn.createDeferredPromise=t,dn}var Po={},pd;function U_(){return pd||(pd=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,r=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function i(s,o){return r(s,"count"),s*o}t.inMilliseconds=i;function n(s){return r(s,"timestamp"),Date.now()-s}t.timeSince=n}(Po)),Po}var Fo={},gd;function V_(){return gd||(gd=1,Object.defineProperty(Fo,"__esModule",{value:!0})),Fo}var No={},Cs={exports:{}},jo,md;function Na(){if(md)return jo;md=1;const t="2.0.0",e=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,n=e-6;return jo={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:n,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},jo}var Do={},qo,yd;function ja(){return yd||(yd=1,qo=typeof process=="object"&&Do&&Do.NODE_DEBUG&&/\bsemver\b/i.test(Do.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),qo}var bd;function ss(){return bd||(bd=1,function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=Na(),s=ja();e=t.exports={};const o=e.re=[],a=e.safeRe=[],l=e.src=[],c=e.safeSrc=[],h=e.t={};let u=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",n],[d,i]],p=b=>{for(const[x,w]of f)b=b.split(`${x}*`).join(`${x}{0,${w}}`).split(`${x}+`).join(`${x}{1,${w}}`);return b},g=(b,x,w)=>{const L=p(x),C=u++;s(b,C,x),h[b]=C,l[C]=x,c[C]=L,o[C]=new RegExp(x,w?"g":void 0),a[C]=new RegExp(L,w?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NONNUMERICIDENTIFIER]}|${l[h.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),g("FULL",`^${l[h.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),g("LOOSE",`^${l[h.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),g("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${l[h.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",l[h.COERCEPLAIN]+`(?:${l[h.PRERELEASE]})?(?:${l[h.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",l[h.COERCE],!0),g("COERCERTLFULL",l[h.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",g("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",g("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Cs,Cs.exports)),Cs.exports}var Ho,xd;function hh(){if(xd)return Ho;xd=1;const t=Object.freeze({loose:!0}),e=Object.freeze({});return Ho=i=>i?typeof i!="object"?t:i:e,Ho}var zo,_d;function Ng(){if(_d)return zo;_d=1;const t=/^[0-9]+$/,e=(i,n)=>{const s=t.test(i),o=t.test(n);return s&&o&&(i=+i,n=+n),i===n?0:s&&!o?-1:o&&!s?1:i<n?-1:1};return zo={compareIdentifiers:e,rcompareIdentifiers:(i,n)=>e(n,i)},zo}var Wo,wd;function ge(){if(wd)return Wo;wd=1;const t=ja(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:r}=Na(),{safeRe:i,t:n}=ss(),s=hh(),{compareIdentifiers:o}=Ng();class a{constructor(c,h){if(h=s(h),c instanceof a){if(c.loose===!!h.loose&&c.includePrerelease===!!h.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>e)throw new TypeError(`version is longer than ${e} characters`);t("SemVer",c,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const u=c.trim().match(h.loose?i[n.LOOSE]:i[n.FULL]);if(!u)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(d=>{if(/^[0-9]+$/.test(d)){const f=+d;if(f>=0&&f<r)return f}return d}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(t("SemVer.compare",this.version,this.options,c),!(c instanceof a)){if(typeof c=="string"&&c===this.version)return 0;c=new a(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof a||(c=new a(c,this.options)),o(this.major,c.major)||o(this.minor,c.minor)||o(this.patch,c.patch)}comparePre(c){if(c instanceof a||(c=new a(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let h=0;do{const u=this.prerelease[h],d=c.prerelease[h];if(t("prerelease compare",h,u,d),u===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(u===void 0)return-1;if(u===d)continue;return o(u,d)}while(++h)}compareBuild(c){c instanceof a||(c=new a(c,this.options));let h=0;do{const u=this.build[h],d=c.build[h];if(t("build compare",h,u,d),u===void 0&&d===void 0)return 0;if(d===void 0)return 1;if(u===void 0)return-1;if(u===d)continue;return o(u,d)}while(++h)}inc(c,h,u){if(c.startsWith("pre")){if(!h&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const d=`-${h}`.match(this.options.loose?i[n.PRERELEASELOOSE]:i[n.PRERELEASE]);if(!d||d[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,u),this.inc("pre",h,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,u),this.inc("pre",h,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const d=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[d];else{let f=this.prerelease.length;for(;--f>=0;)typeof this.prerelease[f]=="number"&&(this.prerelease[f]++,f=-2);if(f===-1){if(h===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(d)}}if(h){let f=[h,d];u===!1&&(f=[h]),o(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=f):this.prerelease=f}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Wo=a,Wo}var Uo,vd;function Ji(){if(vd)return Uo;vd=1;const t=ge();return Uo=(r,i,n=!1)=>{if(r instanceof t)return r;try{return new t(r,i)}catch(s){if(!n)return null;throw s}},Uo}var Vo,Cd;function G_(){if(Cd)return Vo;Cd=1;const t=Ji();return Vo=(r,i)=>{const n=t(r,i);return n?n.version:null},Vo}var Go,Sd;function Y_(){if(Sd)return Go;Sd=1;const t=Ji();return Go=(r,i)=>{const n=t(r.trim().replace(/^[=v]+/,""),i);return n?n.version:null},Go}var Yo,kd;function X_(){if(kd)return Yo;kd=1;const t=ge();return Yo=(r,i,n,s,o)=>{typeof n=="string"&&(o=s,s=n,n=void 0);try{return new t(r instanceof t?r.version:r,n).inc(i,s,o).version}catch{return null}},Yo}var Xo,Td;function J_(){if(Td)return Xo;Td=1;const t=Ji();return Xo=(r,i)=>{const n=t(r,null,!0),s=t(i,null,!0),o=n.compare(s);if(o===0)return null;const a=o>0,l=a?n:s,c=a?s:n,h=!!l.prerelease.length;if(!!c.prerelease.length&&!h){if(!c.patch&&!c.minor)return"major";if(c.compareMain(l)===0)return c.minor&&!c.patch?"minor":"patch"}const d=h?"pre":"";return n.major!==s.major?d+"major":n.minor!==s.minor?d+"minor":n.patch!==s.patch?d+"patch":"prerelease"},Xo}var Jo,Ed;function K_(){if(Ed)return Jo;Ed=1;const t=ge();return Jo=(r,i)=>new t(r,i).major,Jo}var Ko,Ad;function Z_(){if(Ad)return Ko;Ad=1;const t=ge();return Ko=(r,i)=>new t(r,i).minor,Ko}var Zo,Ld;function Q_(){if(Ld)return Zo;Ld=1;const t=ge();return Zo=(r,i)=>new t(r,i).patch,Zo}var Qo,Bd;function tw(){if(Bd)return Qo;Bd=1;const t=Ji();return Qo=(r,i)=>{const n=t(r,i);return n&&n.prerelease.length?n.prerelease:null},Qo}var tl,Rd;function ze(){if(Rd)return tl;Rd=1;const t=ge();return tl=(r,i,n)=>new t(r,n).compare(new t(i,n)),tl}var el,Md;function ew(){if(Md)return el;Md=1;const t=ze();return el=(r,i,n)=>t(i,r,n),el}var rl,$d;function rw(){if($d)return rl;$d=1;const t=ze();return rl=(r,i)=>t(r,i,!0),rl}var il,Id;function uh(){if(Id)return il;Id=1;const t=ge();return il=(r,i,n)=>{const s=new t(r,n),o=new t(i,n);return s.compare(o)||s.compareBuild(o)},il}var nl,Od;function iw(){if(Od)return nl;Od=1;const t=uh();return nl=(r,i)=>r.sort((n,s)=>t(n,s,i)),nl}var sl,Pd;function nw(){if(Pd)return sl;Pd=1;const t=uh();return sl=(r,i)=>r.sort((n,s)=>t(s,n,i)),sl}var al,Fd;function Da(){if(Fd)return al;Fd=1;const t=ze();return al=(r,i,n)=>t(r,i,n)>0,al}var ol,Nd;function dh(){if(Nd)return ol;Nd=1;const t=ze();return ol=(r,i,n)=>t(r,i,n)<0,ol}var ll,jd;function jg(){if(jd)return ll;jd=1;const t=ze();return ll=(r,i,n)=>t(r,i,n)===0,ll}var cl,Dd;function Dg(){if(Dd)return cl;Dd=1;const t=ze();return cl=(r,i,n)=>t(r,i,n)!==0,cl}var hl,qd;function fh(){if(qd)return hl;qd=1;const t=ze();return hl=(r,i,n)=>t(r,i,n)>=0,hl}var ul,Hd;function ph(){if(Hd)return ul;Hd=1;const t=ze();return ul=(r,i,n)=>t(r,i,n)<=0,ul}var dl,zd;function qg(){if(zd)return dl;zd=1;const t=jg(),e=Dg(),r=Da(),i=fh(),n=dh(),s=ph();return dl=(a,l,c,h)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a===c;case"!==":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a!==c;case"":case"=":case"==":return t(a,c,h);case"!=":return e(a,c,h);case">":return r(a,c,h);case">=":return i(a,c,h);case"<":return n(a,c,h);case"<=":return s(a,c,h);default:throw new TypeError(`Invalid operator: ${l}`)}},dl}var fl,Wd;function sw(){if(Wd)return fl;Wd=1;const t=ge(),e=Ji(),{safeRe:r,t:i}=ss();return fl=(s,o)=>{if(s instanceof t)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?r[i.COERCEFULL]:r[i.COERCE]);else{const f=o.includePrerelease?r[i.COERCERTLFULL]:r[i.COERCERTL];let p;for(;(p=f.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||p.index+p[0].length!==a.index+a[0].length)&&(a=p),f.lastIndex=p.index+p[1].length+p[2].length;f.lastIndex=-1}if(a===null)return null;const l=a[2],c=a[3]||"0",h=a[4]||"0",u=o.includePrerelease&&a[5]?`-${a[5]}`:"",d=o.includePrerelease&&a[6]?`+${a[6]}`:"";return e(`${l}.${c}.${h}${u}${d}`,o)},fl}var pl,Ud;function aw(){if(Ud)return pl;Ud=1;class t{constructor(){this.max=1e3,this.map=new Map}get(r){const i=this.map.get(r);if(i!==void 0)return this.map.delete(r),this.map.set(r,i),i}delete(r){return this.map.delete(r)}set(r,i){if(!this.delete(r)&&i!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(r,i)}return this}}return pl=t,pl}var gl,Vd;function We(){if(Vd)return gl;Vd=1;const t=/\s+/g;class e{constructor(T,M){if(M=n(M),T instanceof e)return T.loose===!!M.loose&&T.includePrerelease===!!M.includePrerelease?T:new e(T.raw,M);if(T instanceof s)return this.raw=T.value,this.set=[[T]],this.formatted=void 0,this;if(this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease,this.raw=T.trim().replace(t," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(D=>!g(D[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const D of this.set)if(D.length===1&&b(D[0])){this.set=[D];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let T=0;T<this.set.length;T++){T>0&&(this.formatted+="||");const M=this.set[T];for(let N=0;N<M.length;N++)N>0&&(this.formatted+=" "),this.formatted+=M[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(T){const N=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+T,D=i.get(N);if(D)return D;const O=this.options.loose,B=O?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];T=T.replace(B,$(this.options.includePrerelease)),o("hyphen replace",T),T=T.replace(l[c.COMPARATORTRIM],h),o("comparator trim",T),T=T.replace(l[c.TILDETRIM],u),o("tilde trim",T),T=T.replace(l[c.CARETTRIM],d),o("caret trim",T);let H=T.split(" ").map(j=>w(j,this.options)).join(" ").split(/\s+/).map(j=>S(j,this.options));O&&(H=H.filter(j=>(o("loose invalid filter",j,this.options),!!j.match(l[c.COMPARATORLOOSE])))),o("range list",H);const W=new Map,U=H.map(j=>new s(j,this.options));for(const j of U){if(g(j))return[j];W.set(j.value,j)}W.size>1&&W.has("")&&W.delete("");const F=[...W.values()];return i.set(N,F),F}intersects(T,M){if(!(T instanceof e))throw new TypeError("a Range is required");return this.set.some(N=>x(N,M)&&T.set.some(D=>x(D,M)&&N.every(O=>D.every(B=>O.intersects(B,M)))))}test(T){if(!T)return!1;if(typeof T=="string")try{T=new a(T,this.options)}catch{return!1}for(let M=0;M<this.set.length;M++)if(E(this.set[M],T,this.options))return!0;return!1}}gl=e;const r=aw(),i=new r,n=hh(),s=qa(),o=ja(),a=ge(),{safeRe:l,t:c,comparatorTrimReplace:h,tildeTrimReplace:u,caretTrimReplace:d}=ss(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=Na(),g=k=>k.value==="<0.0.0-0",b=k=>k.value==="",x=(k,T)=>{let M=!0;const N=k.slice();let D=N.pop();for(;M&&N.length;)M=N.every(O=>D.intersects(O,T)),D=N.pop();return M},w=(k,T)=>(o("comp",k,T),k=A(k,T),o("caret",k),k=C(k,T),o("tildes",k),k=P(k,T),o("xrange",k),k=_(k,T),o("stars",k),k),L=k=>!k||k.toLowerCase()==="x"||k==="*",C=(k,T)=>k.trim().split(/\s+/).map(M=>v(M,T)).join(" "),v=(k,T)=>{const M=T.loose?l[c.TILDELOOSE]:l[c.TILDE];return k.replace(M,(N,D,O,B,H)=>{o("tilde",k,N,D,O,B,H);let W;return L(D)?W="":L(O)?W=`>=${D}.0.0 <${+D+1}.0.0-0`:L(B)?W=`>=${D}.${O}.0 <${D}.${+O+1}.0-0`:H?(o("replaceTilde pr",H),W=`>=${D}.${O}.${B}-${H} <${D}.${+O+1}.0-0`):W=`>=${D}.${O}.${B} <${D}.${+O+1}.0-0`,o("tilde return",W),W})},A=(k,T)=>k.trim().split(/\s+/).map(M=>I(M,T)).join(" "),I=(k,T)=>{o("caret",k,T);const M=T.loose?l[c.CARETLOOSE]:l[c.CARET],N=T.includePrerelease?"-0":"";return k.replace(M,(D,O,B,H,W)=>{o("caret",k,D,O,B,H,W);let U;return L(O)?U="":L(B)?U=`>=${O}.0.0${N} <${+O+1}.0.0-0`:L(H)?O==="0"?U=`>=${O}.${B}.0${N} <${O}.${+B+1}.0-0`:U=`>=${O}.${B}.0${N} <${+O+1}.0.0-0`:W?(o("replaceCaret pr",W),O==="0"?B==="0"?U=`>=${O}.${B}.${H}-${W} <${O}.${B}.${+H+1}-0`:U=`>=${O}.${B}.${H}-${W} <${O}.${+B+1}.0-0`:U=`>=${O}.${B}.${H}-${W} <${+O+1}.0.0-0`):(o("no pr"),O==="0"?B==="0"?U=`>=${O}.${B}.${H}${N} <${O}.${B}.${+H+1}-0`:U=`>=${O}.${B}.${H}${N} <${O}.${+B+1}.0-0`:U=`>=${O}.${B}.${H} <${+O+1}.0.0-0`),o("caret return",U),U})},P=(k,T)=>(o("replaceXRanges",k,T),k.split(/\s+/).map(M=>R(M,T)).join(" ")),R=(k,T)=>{k=k.trim();const M=T.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return k.replace(M,(N,D,O,B,H,W)=>{o("xRange",k,N,D,O,B,H,W);const U=L(O),F=U||L(B),j=F||L(H),V=j;return D==="="&&V&&(D=""),W=T.includePrerelease?"-0":"",U?D===">"||D==="<"?N="<0.0.0-0":N="*":D&&V?(F&&(B=0),H=0,D===">"?(D=">=",F?(O=+O+1,B=0,H=0):(B=+B+1,H=0)):D==="<="&&(D="<",F?O=+O+1:B=+B+1),D==="<"&&(W="-0"),N=`${D+O}.${B}.${H}${W}`):F?N=`>=${O}.0.0${W} <${+O+1}.0.0-0`:j&&(N=`>=${O}.${B}.0${W} <${O}.${+B+1}.0-0`),o("xRange return",N),N})},_=(k,T)=>(o("replaceStars",k,T),k.trim().replace(l[c.STAR],"")),S=(k,T)=>(o("replaceGTE0",k,T),k.trim().replace(l[T.includePrerelease?c.GTE0PRE:c.GTE0],"")),$=k=>(T,M,N,D,O,B,H,W,U,F,j,V)=>(L(N)?M="":L(D)?M=`>=${N}.0.0${k?"-0":""}`:L(O)?M=`>=${N}.${D}.0${k?"-0":""}`:B?M=`>=${M}`:M=`>=${M}${k?"-0":""}`,L(U)?W="":L(F)?W=`<${+U+1}.0.0-0`:L(j)?W=`<${U}.${+F+1}.0-0`:V?W=`<=${U}.${F}.${j}-${V}`:k?W=`<${U}.${F}.${+j+1}-0`:W=`<=${W}`,`${M} ${W}`.trim()),E=(k,T,M)=>{for(let N=0;N<k.length;N++)if(!k[N].test(T))return!1;if(T.prerelease.length&&!M.includePrerelease){for(let N=0;N<k.length;N++)if(o(k[N].semver),k[N].semver!==s.ANY&&k[N].semver.prerelease.length>0){const D=k[N].semver;if(D.major===T.major&&D.minor===T.minor&&D.patch===T.patch)return!0}return!1}return!0};return gl}var ml,Gd;function qa(){if(Gd)return ml;Gd=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(h,u){if(u=r(u),h instanceof e){if(h.loose===!!u.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),o("comparator",h,u),this.options=u,this.loose=!!u.loose,this.parse(h),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(h){const u=this.options.loose?i[n.COMPARATORLOOSE]:i[n.COMPARATOR],d=h.match(u);if(!d)throw new TypeError(`Invalid comparator: ${h}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=t}toString(){return this.value}test(h){if(o("Comparator.test",h,this.options.loose),this.semver===t||h===t)return!0;if(typeof h=="string")try{h=new a(h,this.options)}catch{return!1}return s(h,this.operator,this.semver,this.options)}intersects(h,u){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(h.value,u).test(this.value):h.operator===""?h.value===""?!0:new l(this.value,u).test(h.semver):(u=r(u),u.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||s(this.semver,"<",h.semver,u)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||s(this.semver,">",h.semver,u)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}ml=e;const r=hh(),{safeRe:i,t:n}=ss(),s=qg(),o=ja(),a=ge(),l=We();return ml}var yl,Yd;function Ha(){if(Yd)return yl;Yd=1;const t=We();return yl=(r,i,n)=>{try{i=new t(i,n)}catch{return!1}return i.test(r)},yl}var bl,Xd;function ow(){if(Xd)return bl;Xd=1;const t=We();return bl=(r,i)=>new t(r,i).set.map(n=>n.map(s=>s.value).join(" ").trim().split(" ")),bl}var xl,Jd;function lw(){if(Jd)return xl;Jd=1;const t=ge(),e=We();return xl=(i,n,s)=>{let o=null,a=null,l=null;try{l=new e(n,s)}catch{return null}return i.forEach(c=>{l.test(c)&&(!o||a.compare(c)===-1)&&(o=c,a=new t(o,s))}),o},xl}var _l,Kd;function cw(){if(Kd)return _l;Kd=1;const t=ge(),e=We();return _l=(i,n,s)=>{let o=null,a=null,l=null;try{l=new e(n,s)}catch{return null}return i.forEach(c=>{l.test(c)&&(!o||a.compare(c)===1)&&(o=c,a=new t(o,s))}),o},_l}var wl,Zd;function hw(){if(Zd)return wl;Zd=1;const t=ge(),e=We(),r=Da();return wl=(n,s)=>{n=new e(n,s);let o=new t("0.0.0");if(n.test(o)||(o=new t("0.0.0-0"),n.test(o)))return o;o=null;for(let a=0;a<n.set.length;++a){const l=n.set[a];let c=null;l.forEach(h=>{const u=new t(h.semver.version);switch(h.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!c||r(u,c))&&(c=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),c&&(!o||r(o,c))&&(o=c)}return o&&n.test(o)?o:null},wl}var vl,Qd;function uw(){if(Qd)return vl;Qd=1;const t=We();return vl=(r,i)=>{try{return new t(r,i).range||"*"}catch{return null}},vl}var Cl,tf;function gh(){if(tf)return Cl;tf=1;const t=ge(),e=qa(),{ANY:r}=e,i=We(),n=Ha(),s=Da(),o=dh(),a=ph(),l=fh();return Cl=(h,u,d,f)=>{h=new t(h,f),u=new i(u,f);let p,g,b,x,w;switch(d){case">":p=s,g=a,b=o,x=">",w=">=";break;case"<":p=o,g=l,b=s,x="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(n(h,u,f))return!1;for(let L=0;L<u.set.length;++L){const C=u.set[L];let v=null,A=null;if(C.forEach(I=>{I.semver===r&&(I=new e(">=0.0.0")),v=v||I,A=A||I,p(I.semver,v.semver,f)?v=I:b(I.semver,A.semver,f)&&(A=I)}),v.operator===x||v.operator===w||(!A.operator||A.operator===x)&&g(h,A.semver))return!1;if(A.operator===w&&b(h,A.semver))return!1}return!0},Cl}var Sl,ef;function dw(){if(ef)return Sl;ef=1;const t=gh();return Sl=(r,i,n)=>t(r,i,">",n),Sl}var kl,rf;function fw(){if(rf)return kl;rf=1;const t=gh();return kl=(r,i,n)=>t(r,i,"<",n),kl}var Tl,nf;function pw(){if(nf)return Tl;nf=1;const t=We();return Tl=(r,i,n)=>(r=new t(r,n),i=new t(i,n),r.intersects(i,n)),Tl}var El,sf;function gw(){if(sf)return El;sf=1;const t=Ha(),e=ze();return El=(r,i,n)=>{const s=[];let o=null,a=null;const l=r.sort((d,f)=>e(d,f,n));for(const d of l)t(d,i,n)?(a=d,o||(o=d)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const c=[];for(const[d,f]of s)d===f?c.push(d):!f&&d===l[0]?c.push("*"):f?d===l[0]?c.push(`<=${f}`):c.push(`${d} - ${f}`):c.push(`>=${d}`);const h=c.join(" || "),u=typeof i.raw=="string"?i.raw:String(i);return h.length<u.length?h:i},El}var Al,af;function mw(){if(af)return Al;af=1;const t=We(),e=qa(),{ANY:r}=e,i=Ha(),n=ze(),s=(u,d,f={})=>{if(u===d)return!0;u=new t(u,f),d=new t(d,f);let p=!1;t:for(const g of u.set){for(const b of d.set){const x=l(g,b,f);if(p=p||x!==null,x)continue t}if(p)return!1}return!0},o=[new e(">=0.0.0-0")],a=[new e(">=0.0.0")],l=(u,d,f)=>{if(u===d)return!0;if(u.length===1&&u[0].semver===r){if(d.length===1&&d[0].semver===r)return!0;f.includePrerelease?u=o:u=a}if(d.length===1&&d[0].semver===r){if(f.includePrerelease)return!0;d=a}const p=new Set;let g,b;for(const P of u)P.operator===">"||P.operator===">="?g=c(g,P,f):P.operator==="<"||P.operator==="<="?b=h(b,P,f):p.add(P.semver);if(p.size>1)return null;let x;if(g&&b){if(x=n(g.semver,b.semver,f),x>0)return null;if(x===0&&(g.operator!==">="||b.operator!=="<="))return null}for(const P of p){if(g&&!i(P,String(g),f)||b&&!i(P,String(b),f))return null;for(const R of d)if(!i(P,String(R),f))return!1;return!0}let w,L,C,v,A=b&&!f.includePrerelease&&b.semver.prerelease.length?b.semver:!1,I=g&&!f.includePrerelease&&g.semver.prerelease.length?g.semver:!1;A&&A.prerelease.length===1&&b.operator==="<"&&A.prerelease[0]===0&&(A=!1);for(const P of d){if(v=v||P.operator===">"||P.operator===">=",C=C||P.operator==="<"||P.operator==="<=",g){if(I&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===I.major&&P.semver.minor===I.minor&&P.semver.patch===I.patch&&(I=!1),P.operator===">"||P.operator===">="){if(w=c(g,P,f),w===P&&w!==g)return!1}else if(g.operator===">="&&!i(g.semver,String(P),f))return!1}if(b){if(A&&P.semver.prerelease&&P.semver.prerelease.length&&P.semver.major===A.major&&P.semver.minor===A.minor&&P.semver.patch===A.patch&&(A=!1),P.operator==="<"||P.operator==="<="){if(L=h(b,P,f),L===P&&L!==b)return!1}else if(b.operator==="<="&&!i(b.semver,String(P),f))return!1}if(!P.operator&&(b||g)&&x!==0)return!1}return!(g&&C&&!b&&x!==0||b&&v&&!g&&x!==0||I||A)},c=(u,d,f)=>{if(!u)return d;const p=n(u.semver,d.semver,f);return p>0?u:p<0||d.operator===">"&&u.operator===">="?d:u},h=(u,d,f)=>{if(!u)return d;const p=n(u.semver,d.semver,f);return p<0?u:p>0||d.operator==="<"&&u.operator==="<="?d:u};return Al=s,Al}var Ll,of;function yw(){if(of)return Ll;of=1;const t=ss(),e=Na(),r=ge(),i=Ng(),n=Ji(),s=G_(),o=Y_(),a=X_(),l=J_(),c=K_(),h=Z_(),u=Q_(),d=tw(),f=ze(),p=ew(),g=rw(),b=uh(),x=iw(),w=nw(),L=Da(),C=dh(),v=jg(),A=Dg(),I=fh(),P=ph(),R=qg(),_=sw(),S=qa(),$=We(),E=Ha(),k=ow(),T=lw(),M=cw(),N=hw(),D=uw(),O=gh(),B=dw(),H=fw(),W=pw(),U=gw(),F=mw();return Ll={parse:n,valid:s,clean:o,inc:a,diff:l,major:c,minor:h,patch:u,prerelease:d,compare:f,rcompare:p,compareLoose:g,compareBuild:b,sort:x,rsort:w,gt:L,lt:C,eq:v,neq:A,gte:I,lte:P,cmp:R,coerce:_,Comparator:S,Range:$,satisfies:E,toComparators:k,maxSatisfying:T,minSatisfying:M,minVersion:N,validRange:D,outside:O,gtr:B,ltr:H,intersects:W,simplifyRange:U,subset:F,SemVer:r,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},Ll}var lf;function bw(){return lf||(lf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const e=er(),r=yw(),i=Fr();t.VersionStruct=(0,e.refine)((0,e.string)(),"Version",u=>(0,r.valid)(u)===null?`Expected SemVer version, got "${u}"`:!0),t.VersionRangeStruct=(0,e.refine)((0,e.string)(),"Version range",u=>(0,r.validRange)(u)===null?`Expected SemVer range, got "${u}"`:!0);function n(u){return(0,e.is)(u,t.VersionStruct)}t.isValidSemVerVersion=n;function s(u){return(0,e.is)(u,t.VersionRangeStruct)}t.isValidSemVerRange=s;function o(u){(0,i.assertStruct)(u,t.VersionStruct)}t.assertIsSemVerVersion=o;function a(u){(0,i.assertStruct)(u,t.VersionRangeStruct)}t.assertIsSemVerRange=a;function l(u,d){return(0,r.gt)(u,d)}t.gtVersion=l;function c(u,d){return(0,r.gtr)(u,d)}t.gtRange=c;function h(u,d){return(0,r.satisfies)(u,d,{includePrerelease:!0})}t.satisfiesVersionRange=h}(No)),No}var cf;function ve(){return cf||(cf=1,function(t){var e=Hr&&Hr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Hr&&Hr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fr(),t),r(Fg(),t),r(ch(),t),r(I_(),t),r(O_(),t),r(P_(),t),r(F_(),t),r(N_(),t),r(Pg(),t),r(Fa(),t),r(j_(),t),r(D_(),t),r(q_(),t),r(lh(),t),r(H_(),t),r(z_(),t),r(W_(),t),r(U_(),t),r(V_(),t),r(bw(),t)}(Hr)),Hr}var Bl={},hf;function rr(){return hf||(hf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.getErrorStack=t.getErrorMessage=void 0;const e=ve(),r=s=>typeof s=="string"?s:s instanceof Error||(0,e.isObject)(s)&&(0,e.hasProperty)(s,"message")&&typeof s.message=="string"?s.message:"Unknown error.";t.getErrorMessage=r;const i=s=>{if(s instanceof Error)return s.stack};t.getErrorStack=i;class n extends Error{constructor(o,a){super(o),this.name="ParserError";const l=(0,t.getErrorStack)(a);l&&(this.stack=l)}}t.ParserError=n}(Bl)),Bl}var Rl={},fn={},uf;function xw(){if(uf)return fn;uf=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.iterate=void 0;const t=ve(),e=function*(r,i=32){for(let n=0;n<r.length;n+=i){const s=a=>{(0,t.assert)(a>=0,"Cannot skip a negative number of bytes."),(0,t.assert)(a%i===0,"Length must be a multiple of the size."),n+=a},o=r.subarray(n);yield{skip:s,value:o}}return{skip:()=>{},value:new Uint8Array}};return fn.iterate=e,fn}var Wr={},Ml={},Ur={},hr={},df;function _w(){if(df)return hr;df=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.padEnd=hr.padStart=hr.set=void 0;const t=ve(),e=32,r=(s,o,a)=>(0,t.concatBytes)([s.subarray(0,a),o,s.subarray(a+o.length)]);hr.set=r;const i=(s,o=e)=>{const a=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([a,s])};hr.padStart=i;const n=(s,o=e)=>{const a=new Uint8Array(Math.max(o-s.length,0)).fill(0);return(0,t.concatBytes)([s,a])};return hr.padEnd=n,hr}var ff;function Ki(){return ff||(ff=1,function(t){var e=Ur&&Ur.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Ur&&Ur.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(_w(),t)}(Ur)),Ur}var pf;function ww(){return pf||(pf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.address=t.getAddress=void 0;const e=ve(),r=rr(),i=Ki(),n=s=>{const o=(0,e.createBytes)(s);return(0,e.assert)(o.length<=20,new r.ParserError(`Invalid address value. Expected address to be 20 bytes long, but received ${o.length} bytes.`)),(0,i.padStart)(o,20)};t.getAddress=n,t.address={isDynamic:!1,isType:s=>s==="address",getByteLength(){return 32},encode({buffer:s,value:o,packed:a}){const l=(0,t.getAddress)(o);if(a)return(0,e.concatBytes)([s,l]);const c=(0,i.padStart)(l);return(0,e.concatBytes)([s,c])},decode({value:s}){return(0,e.add0x)((0,e.bytesToHex)(s.slice(12,32)))}}}(Ml)),Ml}var $l={},Il={},gf;function mh(){return gf||(gf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fixedBytes=t.getByteLength=void 0;const e=ve(),r=rr(),i=Ki(),n=/^bytes([0-9]{1,2})$/u,s=o=>{const a=o.match(n)?.[1];(0,e.assert)(a,`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`);const l=Number(a);return(0,e.assert)(l>0&&l<=32,new r.ParserError(`Invalid byte length. Expected a number between 1 and 32, but received "${o}".`)),l};t.getByteLength=s,t.fixedBytes={isDynamic:!1,isType(o){return n.test(o)},getByteLength(){return 32},encode({type:o,buffer:a,value:l,packed:c}){const h=(0,t.getByteLength)(o),u=(0,e.createBytes)(l);return(0,e.assert)(u.length<=h,new r.ParserError(`Expected a value of length ${h}, but received a value of length ${u.length}.`)),c?(0,e.concatBytes)([a,(0,i.padEnd)(u,h)]):(0,e.concatBytes)([a,(0,i.padEnd)(u)])},decode({type:o,value:a}){const l=(0,t.getByteLength)(o);return a.slice(0,l)}}}(Il)),Il}var Ol={},mf;function Hg(){return mf||(mf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tuple=t.getTupleElements=void 0;const e=ve(),r=rr(),i=yh(),n=/^\((.+)\)$/u,s=a=>n.test(a),o=a=>{(0,e.assert)(a.startsWith("(")&&a.endsWith(")"),new r.ParserError(`Invalid tuple type. Expected tuple type, but received "${a}".`));const l=[];let c="",h=0;for(let u=1;u<a.length-1;u++){const d=a[u];d===","&&h===0?(l.push(c.trim()),c=""):(c+=d,d==="("?h+=1:d===")"&&(h-=1))}return c.trim()&&l.push(c.trim()),l};t.getTupleElements=o,t.tuple={isDynamic(a){return(0,t.getTupleElements)(a).some(c=>{const h=(0,i.getParser)(c);return(0,i.isDynamicParser)(h,c)})},isType(a){return s(a)},getByteLength(a){return(0,i.isDynamicParser)(this,a)?32:(0,t.getTupleElements)(a).reduce((c,h)=>c+(0,i.getParser)(h).getByteLength(h),0)},encode({type:a,buffer:l,value:c,packed:h,tight:u}){const d=(0,t.getTupleElements)(a);return(0,i.pack)({types:d,values:c,byteArray:l,packed:h,tight:u})},decode({type:a,value:l,skip:c}){const h=(0,t.getTupleElements)(a),u=this.getByteLength(a)-32;return c(u),(0,i.unpack)(h,l)}}}(Ol)),Ol}var yf;function vw(){return yf||(yf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.array=t.getTupleType=t.getArrayType=t.isArrayType=void 0;const e=ve(),r=rr(),i=yh(),n=Ki(),s=mh(),o=Hg(),a=/^(?<type>.*)\[(?<length>\d*?)\]$/u,l=u=>a.test(u);t.isArrayType=l;const c=u=>{const d=u.match(a);return(0,e.assert)(d?.groups?.type,new r.ParserError(`Invalid array type. Expected an array type, but received "${u}".`)),[d.groups.type,d.groups.length?parseInt(d.groups.length,10):void 0]};t.getArrayType=c;const h=(u,d)=>`(${new Array(d).fill(u).join(",")})`;t.getTupleType=h,t.array={isDynamic(u){const[d,f]=(0,t.getArrayType)(u);return f===void 0||(0,i.isDynamicParser)((0,i.getParser)(d),d)},isType(u){return(0,t.isArrayType)(u)},getByteLength(u){(0,e.assert)((0,t.isArrayType)(u),new r.ParserError(`Expected an array type, but received "${u}".`));const[d,f]=(0,t.getArrayType)(u);return!(0,i.isDynamicParser)(this,u)&&f!==void 0?o.tuple.getByteLength((0,t.getTupleType)(d,f)):32},encode({type:u,buffer:d,value:f,packed:p,tight:g}){const[b,x]=(0,t.getArrayType)(u);if((0,e.assert)(!p||!(0,t.isArrayType)(b),new r.ParserError("Cannot pack nested arrays.")),p&&(0,i.isDynamicParser)((0,i.getParser)(b),b))return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:d,packed:p,arrayPacked:!0,tight:g});if(x)return(0,e.assert)(x===f.length,new r.ParserError(`Array length does not match type length. Expected a length of ${x}, but received ${f.length}.`)),o.tuple.encode({type:(0,t.getTupleType)(b,x),buffer:d,value:f,packed:s.fixedBytes.isType(b)&&g,tight:g});if(p)return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:d,packed:s.fixedBytes.isType(b)&&g,arrayPacked:!0,tight:g});const w=(0,n.padStart)((0,e.numberToBytes)(f.length));return(0,i.pack)({types:new Array(f.length).fill(b),values:f,byteArray:(0,e.concatBytes)([d,w]),packed:p,tight:g})},decode({type:u,value:d,...f}){const[p,g]=(0,t.getArrayType)(u);if(g){const x=o.tuple.decode({type:(0,t.getTupleType)(p,g),value:d,...f});return(0,e.assert)(x.length===g,new r.ParserError(`Array length does not match type length. Expected a length of ${g}, but received ${x.length}.`)),x}const b=(0,e.bytesToNumber)(d.subarray(0,32));return(0,i.unpack)(new Array(b).fill(p),d.subarray(32))}}}($l)),$l}var Pl={},Fl={},bf;function zg(){return bf||(bf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.number=t.getBigInt=t.assertNumberLength=t.getLength=t.isSigned=void 0;const e=ve(),r=rr(),i=Ki(),n=/^u?int(?<length>[0-9]*)?$/u,s=c=>!c.startsWith("u");t.isSigned=s;const o=c=>{if(c==="int"||c==="uint")return 256;const h=c.match(n);(0,e.assert)(h?.groups?.length,new r.ParserError(`Invalid number type. Expected a number type, but received "${c}".`));const u=parseInt(h.groups.length,10);return(0,e.assert)(u>=8&&u<=256,new r.ParserError(`Invalid number length. Expected a number between 8 and 256, but received "${c}".`)),(0,e.assert)(u%8===0,new r.ParserError(`Invalid number length. Expected a multiple of 8, but received "${c}".`)),u};t.getLength=o;const a=(c,h)=>{const u=(0,t.getLength)(h),d=BigInt(2)**BigInt(u-((0,t.isSigned)(h)?1:0))-BigInt(1);if((0,t.isSigned)(h)){(0,e.assert)(c>=-(d+BigInt(1))&&c<=d,new r.ParserError(`Number "${c}" is out of range for type "${h}".`));return}(0,e.assert)(c<=d,new r.ParserError(`Number "${c}" is out of range for type "${h}".`))};t.assertNumberLength=a;const l=c=>{try{return(0,e.createBigInt)(c)}catch{throw new r.ParserError(`Invalid number. Expected a valid number value, but received "${c}".`)}};t.getBigInt=l,t.number={isDynamic:!1,isType(c){return n.test(c)},getByteLength(){return 32},encode({type:c,buffer:h,value:u,packed:d}){const f=(0,t.getBigInt)(u);if((0,t.assertNumberLength)(f,c),(0,t.isSigned)(c)){if(d){const p=(0,t.getLength)(c)/8;return(0,e.concatBytes)([h,(0,e.signedBigIntToBytes)(f,p)])}return(0,e.concatBytes)([h,(0,i.padStart)((0,e.signedBigIntToBytes)(f,32))])}if(d){const p=(0,t.getLength)(c)/8;return(0,e.concatBytes)([h,(0,i.padStart)((0,e.bigIntToBytes)(f),p)])}return(0,e.concatBytes)([h,(0,i.padStart)((0,e.bigIntToBytes)(f))])},decode({type:c,value:h}){const u=h.subarray(0,32);if((0,t.isSigned)(c)){const f=(0,e.bytesToSignedBigInt)(u);return(0,t.assertNumberLength)(f,c),f}const d=(0,e.bytesToBigInt)(u);return(0,t.assertNumberLength)(d,c),d}}}(Fl)),Fl}var xf;function Cw(){return xf||(xf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.bool=t.getBooleanValue=void 0;const e=er(),r=ve(),i=rr(),n=zg(),s=(0,e.coerce)((0,e.boolean)(),(0,e.union)([(0,e.literal)("true"),(0,e.literal)("false")]),a=>a==="true"),o=a=>{try{return(0,e.create)(a,s)?BigInt(1):BigInt(0)}catch{throw new i.ParserError(`Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "${a}".`)}};t.getBooleanValue=o,t.bool={isDynamic:!1,isType:a=>a==="bool",getByteLength(){return 32},encode({buffer:a,value:l,packed:c,tight:h}){const u=(0,t.getBooleanValue)(l);return c?(0,r.concatBytes)([a,(0,r.bigIntToBytes)(u)]):n.number.encode({type:"uint256",buffer:a,value:u,packed:c,tight:h})},decode(a){return n.number.decode({...a,type:"uint256"})===BigInt(1)}}}(Pl)),Pl}var pn={},_f;function Wg(){if(_f)return pn;_f=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.bytes=void 0;const t=ve(),e=Ki();return pn.bytes={isDynamic:!0,isType:r=>r==="bytes",getByteLength(){return 32},encode({buffer:r,value:i,packed:n}){const s=(0,t.createBytes)(i);if(n)return(0,t.concatBytes)([r,s]);const o=Math.ceil(s.byteLength/32)*32;return(0,t.concatBytes)([r,(0,e.padStart)((0,t.numberToBytes)(s.byteLength)),(0,e.padEnd)(s,o)])},decode({value:r}){const i=r.subarray(0,32),n=(0,t.bytesToNumber)(i);return r.slice(32,32+n)}},pn}var Nl={},wf;function Sw(){return wf||(wf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.getFunction=void 0;const e=er(),r=ve(),i=rr(),n=mh(),s=(0,e.coerce)((0,e.object)({address:r.StrictHexStruct,selector:r.StrictHexStruct}),(0,e.union)([r.StrictHexStruct,(0,e.instance)(Uint8Array)]),a=>{const l=(0,r.createBytes)(a);return(0,r.assert)(l.length===24,new i.ParserError(`Invalid Solidity function. Expected function to be 24 bytes long, but received ${l.length} bytes.`)),{address:(0,r.bytesToHex)(l.subarray(0,20)),selector:(0,r.bytesToHex)(l.subarray(20,24))}}),o=a=>{const l=(0,e.create)(a,s);return(0,r.concatBytes)([(0,r.hexToBytes)(l.address),(0,r.hexToBytes)(l.selector)])};t.getFunction=o,t.fn={isDynamic:!1,isType:a=>a==="function",getByteLength(){return 32},encode({buffer:a,value:l,packed:c,tight:h}){const u=(0,t.getFunction)(l);return n.fixedBytes.encode({type:"bytes24",buffer:a,value:u,packed:c,tight:h})},decode({value:a}){return{address:(0,r.bytesToHex)(a.slice(0,20)),selector:(0,r.bytesToHex)(a.slice(20,24))}}}}(Nl)),Nl}var jl={},vf;function kw(){return vf||(vf=1,Object.defineProperty(jl,"__esModule",{value:!0})),jl}var gn={},Cf;function Tw(){if(Cf)return gn;Cf=1,Object.defineProperty(gn,"__esModule",{value:!0}),gn.string=void 0;const t=ve(),e=Wg();return gn.string={isDynamic:!0,isType:r=>r==="string",getByteLength(){return 32},encode({buffer:r,value:i,packed:n,tight:s}){return e.bytes.encode({type:"bytes",buffer:r,value:(0,t.stringToBytes)(i),packed:n,tight:s})},decode(r){return(0,t.bytesToString)(e.bytes.decode(r))}},gn}var Sf;function Ew(){return Sf||(Sf=1,function(t){var e=Wr&&Wr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Wr&&Wr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(ww(),t),r(vw(),t),r(Cw(),t),r(Wg(),t),r(mh(),t),r(Sw(),t),r(zg(),t),r(kw(),t),r(Tw(),t),r(Hg(),t)}(Wr)),Wr}var kf;function yh(){return kf||(kf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.isDynamicParser=t.getParser=void 0;const e=ve(),r=rr(),i=xw(),n=Ew(),s=Ki(),o=h=>{const u={address:n.address,array:n.array,bool:n.bool,bytes:n.bytes,fixedBytes:n.fixedBytes,function:n.fn,number:n.number,string:n.string,tuple:n.tuple},d=u[h];if(d)return d;const f=Object.values(u).find(p=>p.isType(h));if(f)return f;throw new r.ParserError(`The type "${h}" is not supported.`)};t.getParser=o;const a=(h,u)=>{const{isDynamic:d}=h;return typeof d=="function"?d(u):d};t.isDynamicParser=a;const l=({types:h,values:u,packed:d=!1,tight:f=!1,arrayPacked:p=!1,byteArray:g=new Uint8Array})=>{(0,e.assert)(h.length===u.length,new r.ParserError(`The number of types (${h.length}) does not match the number of values (${u.length}).`));const{staticBuffer:b,dynamicBuffer:x,pointers:w}=h.reduce(({staticBuffer:v,dynamicBuffer:A,pointers:I},P,R)=>{const _=(0,t.getParser)(P),S=u[R];if(d||p||!(0,t.isDynamicParser)(_,P))return{staticBuffer:_.encode({buffer:v,value:S,type:P,packed:d,tight:f}),dynamicBuffer:A,pointers:I};const $=(0,e.concatBytes)([v,new Uint8Array(32)]),E=_.encode({buffer:A,value:S,type:P,packed:d,tight:f});return{staticBuffer:$,dynamicBuffer:E,pointers:[...I,{position:v.length,pointer:A.length}]}},{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,e.assert)(!d&&!p||x.length===0,new r.ParserError("Invalid pack state."));const L=b.length,C=w.reduce((v,{pointer:A,position:I})=>{const P=(0,s.padStart)((0,e.numberToBytes)(L+A));return(0,s.set)(v,P,I)},b);return(0,e.concatBytes)([g,C,x])};t.pack=l;const c=(h,u)=>{const d=(0,i.iterate)(u);return h.map(f=>{const{value:{value:p,skip:g},done:b}=d.next();(0,e.assert)(!b,new r.ParserError(`The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "${f}".`));const x=(0,t.getParser)(f);if((0,t.isDynamicParser)(x,f)){const L=(0,e.bytesToNumber)(p.subarray(0,32)),C=u.subarray(L);return x.decode({type:f,value:C,skip:g})}return x.decode({type:f,value:p,skip:g})})};t.unpack=c}(Rl)),Rl}var Tf;function Aw(){return Tf||(Tf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSingle=t.decode=t.encodePacked=t.encodeSingle=t.encode=void 0;const e=ve(),r=rr(),i=yh(),n=(c,h,u,d)=>{try{return(0,i.pack)({types:c,values:h,packed:u,tight:d})}catch(f){throw f instanceof r.ParserError?new r.ParserError(`Unable to encode value: ${f.message}`,f):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(f)}`,f)}};t.encode=n;const s=(c,h)=>(0,t.encode)([c],[h]);t.encodeSingle=s;const o=(c,h,u)=>(0,t.encode)(c,h,!0,u);t.encodePacked=o;const a=(c,h)=>{const u=(0,e.createBytes)(h);try{return(0,i.unpack)(c,u)}catch(d){throw d instanceof r.ParserError?new r.ParserError(`Unable to decode value: ${d.message}`,d):new r.ParserError(`An unexpected error occurred: ${(0,r.getErrorMessage)(d)}`,d)}};t.decode=a;const l=(c,h)=>{const u=(0,t.decode)([c],h);return(0,e.assert)(u.length===1,new r.ParserError("Decoded value array has unexpected length.")),u[0]};t.decodeSingle=l}(To)),To}var Vr={},Dl={},Ef;function Lw(){return Ef||(Ef=1,Object.defineProperty(Dl,"__esModule",{value:!0})),Dl}var Af;function Bw(){return Af||(Af=1,function(t){var e=Vr&&Vr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=Vr&&Vr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Lw(),t)}(Vr)),Vr}var Lf;function Ug(){return Lf||(Lf=1,function(t){var e=qr&&qr.__createBinding||(Object.create?function(i,n,s,o){o===void 0&&(o=s);var a=Object.getOwnPropertyDescriptor(n,s);(!a||("get"in a?!n.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return n[s]}}),Object.defineProperty(i,o,a)}:function(i,n,s,o){o===void 0&&(o=s),i[o]=n[s]}),r=qr&&qr.__exportStar||function(i,n){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(n,s)&&e(n,i,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Aw(),t),r(rr(),t),r(Bw(),t)}(qr)),qr}var Pe={},ql={},Ct={},Bf;function Rw(){if(Bf)return Ct;Bf=1;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.notImplemented=Ct.bitMask=void 0,Ct.isBytes=r,Ct.abytes=i,Ct.abool=n,Ct.numberToHexUnpadded=s,Ct.hexToNumber=o,Ct.bytesToHex=c,Ct.hexToBytes=d,Ct.bytesToNumberBE=f,Ct.bytesToNumberLE=p,Ct.numberToBytesBE=g,Ct.numberToBytesLE=b,Ct.numberToVarBytesBE=x,Ct.ensureBytes=w,Ct.concatBytes=L,Ct.equalBytes=C,Ct.utf8ToBytes=v,Ct.inRange=I,Ct.aInRange=P,Ct.bitLen=R,Ct.bitGet=_,Ct.bitSet=S,Ct.createHmacDrbg=T,Ct.validateObject=N,Ct.memoized=O;const t=BigInt(0),e=BigInt(1);function r(B){return B instanceof Uint8Array||ArrayBuffer.isView(B)&&B.constructor.name==="Uint8Array"}function i(B){if(!r(B))throw new Error("Uint8Array expected")}function n(B,H){if(typeof H!="boolean")throw new Error(B+" boolean expected, got "+H)}function s(B){const H=B.toString(16);return H.length&1?"0"+H:H}function o(B){if(typeof B!="string")throw new Error("hex string expected, got "+typeof B);return B===""?t:BigInt("0x"+B)}const a=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",l=Array.from({length:256},(B,H)=>H.toString(16).padStart(2,"0"));function c(B){if(i(B),a)return B.toHex();let H="";for(let W=0;W<B.length;W++)H+=l[B[W]];return H}const h={_0:48,_9:57,A:65,F:70,a:97,f:102};function u(B){if(B>=h._0&&B<=h._9)return B-h._0;if(B>=h.A&&B<=h.F)return B-(h.A-10);if(B>=h.a&&B<=h.f)return B-(h.a-10)}function d(B){if(typeof B!="string")throw new Error("hex string expected, got "+typeof B);if(a)return Uint8Array.fromHex(B);const H=B.length,W=H/2;if(H%2)throw new Error("hex string expected, got unpadded hex of length "+H);const U=new Uint8Array(W);for(let F=0,j=0;F<W;F++,j+=2){const V=u(B.charCodeAt(j)),K=u(B.charCodeAt(j+1));if(V===void 0||K===void 0){const Q=B[j]+B[j+1];throw new Error('hex string expected, got non-hex character "'+Q+'" at index '+j)}U[F]=V*16+K}return U}function f(B){return o(c(B))}function p(B){return i(B),o(c(Uint8Array.from(B).reverse()))}function g(B,H){return d(B.toString(16).padStart(H*2,"0"))}function b(B,H){return g(B,H).reverse()}function x(B){return d(s(B))}function w(B,H,W){let U;if(typeof H=="string")try{U=d(H)}catch(j){throw new Error(B+" must be hex string or Uint8Array, cause: "+j)}else if(r(H))U=Uint8Array.from(H);else throw new Error(B+" must be hex string or Uint8Array");const F=U.length;if(typeof W=="number"&&F!==W)throw new Error(B+" of length "+W+" expected, got "+F);return U}function L(...B){let H=0;for(let U=0;U<B.length;U++){const F=B[U];i(F),H+=F.length}const W=new Uint8Array(H);for(let U=0,F=0;U<B.length;U++){const j=B[U];W.set(j,F),F+=j.length}return W}function C(B,H){if(B.length!==H.length)return!1;let W=0;for(let U=0;U<B.length;U++)W|=B[U]^H[U];return W===0}function v(B){if(typeof B!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(B))}const A=B=>typeof B=="bigint"&&t<=B;function I(B,H,W){return A(B)&&A(H)&&A(W)&&H<=B&&B<W}function P(B,H,W,U){if(!I(H,W,U))throw new Error("expected valid "+B+": "+W+" <= n < "+U+", got "+H)}function R(B){let H;for(H=0;B>t;B>>=e,H+=1);return H}function _(B,H){return B>>BigInt(H)&e}function S(B,H,W){return B|(W?e:t)<<BigInt(H)}const $=B=>(e<<BigInt(B))-e;Ct.bitMask=$;const E=B=>new Uint8Array(B),k=B=>Uint8Array.from(B);function T(B,H,W){if(typeof B!="number"||B<2)throw new Error("hashLen must be a number");if(typeof H!="number"||H<2)throw new Error("qByteLen must be a number");if(typeof W!="function")throw new Error("hmacFn must be a function");let U=E(B),F=E(B),j=0;const V=()=>{U.fill(1),F.fill(0),j=0},K=(...gt)=>W(F,U,...gt),Q=(gt=E(0))=>{F=K(k([0]),gt),U=K(),gt.length!==0&&(F=K(k([1]),gt),U=K())},Z=()=>{if(j++>=1e3)throw new Error("drbg: tried 1000 values");let gt=0;const At=[];for(;gt<H;){U=K();const Lt=U.slice();At.push(Lt),gt+=U.length}return L(...At)};return(gt,At)=>{V(),Q(gt);let Lt;for(;!(Lt=At(Z()));)Q();return V(),Lt}}const M={bigint:B=>typeof B=="bigint",function:B=>typeof B=="function",boolean:B=>typeof B=="boolean",string:B=>typeof B=="string",stringOrUint8Array:B=>typeof B=="string"||r(B),isSafeInteger:B=>Number.isSafeInteger(B),array:B=>Array.isArray(B),field:(B,H)=>H.Fp.isValid(B),hash:B=>typeof B=="function"&&Number.isSafeInteger(B.outputLen)};function N(B,H,W={}){const U=(F,j,V)=>{const K=M[j];if(typeof K!="function")throw new Error("invalid validator function");const Q=B[F];if(!(V&&Q===void 0)&&!K(Q,B))throw new Error("param "+String(F)+" is invalid. Expected "+j+", got "+Q)};for(const[F,j]of Object.entries(H))U(F,j,!1);for(const[F,j]of Object.entries(W))U(F,j,!0);return B}const D=()=>{throw new Error("not implemented")};Ct.notImplemented=D;function O(B){const H=new WeakMap;return(W,...U)=>{const F=H.get(W);if(F!==void 0)return F;const j=B(W,...U);return H.set(W,j),j}}return Ct}var Fe={},Hl={},mn={},Rf;function Mw(){return Rf||(Rf=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.crypto=void 0,mn.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),mn}var Mf;function Qs(){return Mf||(Mf=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=i,t.abytes=n,t.ahash=s,t.aexists=o,t.aoutput=a,t.u8=l,t.u32=c,t.clean=h,t.createView=u,t.rotr=d,t.rotl=f,t.byteSwap=p,t.byteSwap32=g,t.bytesToHex=w,t.hexToBytes=v,t.asyncLoop=I,t.utf8ToBytes=P,t.bytesToUtf8=R,t.toBytes=_,t.kdfInputToBytes=S,t.concatBytes=$,t.checkOpts=E,t.createHasher=T,t.createOptHasher=M,t.createXOFer=N,t.randomBytes=D;const e=Mw();function r(O){return O instanceof Uint8Array||ArrayBuffer.isView(O)&&O.constructor.name==="Uint8Array"}function i(O){if(!Number.isSafeInteger(O)||O<0)throw new Error("positive integer expected, got "+O)}function n(O,...B){if(!r(O))throw new Error("Uint8Array expected");if(B.length>0&&!B.includes(O.length))throw new Error("Uint8Array expected of length "+B+", got length="+O.length)}function s(O){if(typeof O!="function"||typeof O.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");i(O.outputLen),i(O.blockLen)}function o(O,B=!0){if(O.destroyed)throw new Error("Hash instance has been destroyed");if(B&&O.finished)throw new Error("Hash#digest() has already been called")}function a(O,B){n(O);const H=B.outputLen;if(O.length<H)throw new Error("digestInto() expects output buffer of length at least "+H)}function l(O){return new Uint8Array(O.buffer,O.byteOffset,O.byteLength)}function c(O){return new Uint32Array(O.buffer,O.byteOffset,Math.floor(O.byteLength/4))}function h(...O){for(let B=0;B<O.length;B++)O[B].fill(0)}function u(O){return new DataView(O.buffer,O.byteOffset,O.byteLength)}function d(O,B){return O<<32-B|O>>>B}function f(O,B){return O<<B|O>>>32-B>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function p(O){return O<<24&4278190080|O<<8&16711680|O>>>8&65280|O>>>24&255}t.swap8IfBE=t.isLE?O=>O:O=>p(O),t.byteSwapIfBE=t.swap8IfBE;function g(O){for(let B=0;B<O.length;B++)O[B]=p(O[B]);return O}t.swap32IfBE=t.isLE?O=>O:g;const b=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",x=Array.from({length:256},(O,B)=>B.toString(16).padStart(2,"0"));function w(O){if(n(O),b)return O.toHex();let B="";for(let H=0;H<O.length;H++)B+=x[O[H]];return B}const L={_0:48,_9:57,A:65,F:70,a:97,f:102};function C(O){if(O>=L._0&&O<=L._9)return O-L._0;if(O>=L.A&&O<=L.F)return O-(L.A-10);if(O>=L.a&&O<=L.f)return O-(L.a-10)}function v(O){if(typeof O!="string")throw new Error("hex string expected, got "+typeof O);if(b)return Uint8Array.fromHex(O);const B=O.length,H=B/2;if(B%2)throw new Error("hex string expected, got unpadded hex of length "+B);const W=new Uint8Array(H);for(let U=0,F=0;U<H;U++,F+=2){const j=C(O.charCodeAt(F)),V=C(O.charCodeAt(F+1));if(j===void 0||V===void 0){const K=O[F]+O[F+1];throw new Error('hex string expected, got non-hex character "'+K+'" at index '+F)}W[U]=j*16+V}return W}const A=async()=>{};t.nextTick=A;async function I(O,B,H){let W=Date.now();for(let U=0;U<O;U++){H(U);const F=Date.now()-W;F>=0&&F<B||(await(0,t.nextTick)(),W+=F)}}function P(O){if(typeof O!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(O))}function R(O){return new TextDecoder().decode(O)}function _(O){return typeof O=="string"&&(O=P(O)),n(O),O}function S(O){return typeof O=="string"&&(O=P(O)),n(O),O}function $(...O){let B=0;for(let W=0;W<O.length;W++){const U=O[W];n(U),B+=U.length}const H=new Uint8Array(B);for(let W=0,U=0;W<O.length;W++){const F=O[W];H.set(F,U),U+=F.length}return H}function E(O,B){if(B!==void 0&&{}.toString.call(B)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(O,B)}class k{}t.Hash=k;function T(O){const B=W=>O().update(_(W)).digest(),H=O();return B.outputLen=H.outputLen,B.blockLen=H.blockLen,B.create=()=>O(),B}function M(O){const B=(W,U)=>O(U).update(_(W)).digest(),H=O({});return B.outputLen=H.outputLen,B.blockLen=H.blockLen,B.create=W=>O(W),B}function N(O){const B=(W,U)=>O(U).update(_(W)).digest(),H=O({});return B.outputLen=H.outputLen,B.blockLen=H.blockLen,B.create=W=>O(W),B}t.wrapConstructor=T,t.wrapConstructorWithOpts=M,t.wrapXOFConstructorWithOpts=N;function D(O=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(O));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(O));throw new Error("crypto.getRandomValues must be defined")}}(Hl)),Hl}var $f;function $w(){if($f)return Fe;$f=1,Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.aoutput=Fe.anumber=Fe.aexists=Fe.abytes=void 0;const t=Qs();return Fe.abytes=t.abytes,Fe.aexists=t.aexists,Fe.anumber=t.anumber,Fe.aoutput=t.aoutput,Fe}var If;function Vg(){return If||(If=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.assertBytes=t.assertBool=t.utf8ToBytes=t.toHex=t.createView=t.concatBytes=t.bytesToHex=void 0,t.bytesToUtf8=s,t.hexToBytes=o,t.equalsBytes=a,t.wrapHash=l;const e=Rw();Object.defineProperty(t,"assertBool",{enumerable:!0,get:function(){return e.abool}});const r=$w();Object.defineProperty(t,"assertBytes",{enumerable:!0,get:function(){return r.abytes}});const i=Qs();var n=Qs();Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return n.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return n.createView}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return n.bytesToHex}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return n.utf8ToBytes}});function s(c){if(!(c instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof c}`);return new TextDecoder().decode(c)}function o(c){const h=c.startsWith("0x")?c.substring(2):c;return(0,i.hexToBytes)(h)}function a(c,h){if(c.length!==h.length)return!1;for(let u=0;u<c.length;u++)if(c[u]!==h[u])return!1;return!0}function l(c){return h=>((0,r.abytes)(h),c(h))}}(ql)),ql}var Of;function as(){if(Of)return Pe;Of=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.compare=Pe.concat=Pe.toHex=Pe.toBytes=void 0;const t=Vg();function e(s){return s instanceof Uint8Array?s:typeof s=="string"?(0,t.hexToBytes)(s):new Uint8Array(s)}Pe.toBytes=e;function r(s){return typeof s=="string"?((0,t.hexToBytes)(s),s.replace(/^(0x)?/,"0x")):s instanceof Uint8Array?"0x"+(0,t.bytesToHex)(s):"0x"+(0,t.bytesToHex)(new Uint8Array(s))}Pe.toHex=r;function i(s){return(0,t.concatBytes)(...s.map(e))}Pe.concat=i;function n(s,o){const a=BigInt(r(s))-BigInt(r(o));return a>0?1:a<0?-1:0}return Pe.compare=n,Pe}var Kt={},ur={},Ne={},Rt={},bt={},Pf;function Iw(){if(Pf)return bt;Pf=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.toBig=bt.shrSL=bt.shrSH=bt.rotrSL=bt.rotrSH=bt.rotrBL=bt.rotrBH=bt.rotr32L=bt.rotr32H=bt.rotlSL=bt.rotlSH=bt.rotlBL=bt.rotlBH=bt.add5L=bt.add5H=bt.add4L=bt.add4H=bt.add3L=bt.add3H=void 0,bt.add=x,bt.fromBig=r,bt.split=i;const t=BigInt(2**32-1),e=BigInt(32);function r(R,_=!1){return _?{h:Number(R&t),l:Number(R>>e&t)}:{h:Number(R>>e&t)|0,l:Number(R&t)|0}}function i(R,_=!1){const S=R.length;let $=new Uint32Array(S),E=new Uint32Array(S);for(let k=0;k<S;k++){const{h:T,l:M}=r(R[k],_);[$[k],E[k]]=[T,M]}return[$,E]}const n=(R,_)=>BigInt(R>>>0)<<e|BigInt(_>>>0);bt.toBig=n;const s=(R,_,S)=>R>>>S;bt.shrSH=s;const o=(R,_,S)=>R<<32-S|_>>>S;bt.shrSL=o;const a=(R,_,S)=>R>>>S|_<<32-S;bt.rotrSH=a;const l=(R,_,S)=>R<<32-S|_>>>S;bt.rotrSL=l;const c=(R,_,S)=>R<<64-S|_>>>S-32;bt.rotrBH=c;const h=(R,_,S)=>R>>>S-32|_<<64-S;bt.rotrBL=h;const u=(R,_)=>_;bt.rotr32H=u;const d=(R,_)=>R;bt.rotr32L=d;const f=(R,_,S)=>R<<S|_>>>32-S;bt.rotlSH=f;const p=(R,_,S)=>_<<S|R>>>32-S;bt.rotlSL=p;const g=(R,_,S)=>_<<S-32|R>>>64-S;bt.rotlBH=g;const b=(R,_,S)=>R<<S-32|_>>>64-S;bt.rotlBL=b;function x(R,_,S,$){const E=(_>>>0)+($>>>0);return{h:R+S+(E/2**32|0)|0,l:E|0}}const w=(R,_,S)=>(R>>>0)+(_>>>0)+(S>>>0);bt.add3L=w;const L=(R,_,S,$)=>_+S+$+(R/2**32|0)|0;bt.add3H=L;const C=(R,_,S,$)=>(R>>>0)+(_>>>0)+(S>>>0)+($>>>0);bt.add4L=C;const v=(R,_,S,$,E)=>_+S+$+E+(R/2**32|0)|0;bt.add4H=v;const A=(R,_,S,$,E)=>(R>>>0)+(_>>>0)+(S>>>0)+($>>>0)+(E>>>0);bt.add5L=A;const I=(R,_,S,$,E,k)=>_+S+$+E+k+(R/2**32|0)|0;bt.add5H=I;const P={fromBig:r,split:i,toBig:n,shrSH:s,shrSL:o,rotrSH:a,rotrSL:l,rotrBH:c,rotrBL:h,rotr32H:u,rotr32L:d,rotlSH:f,rotlSL:p,rotlBH:g,rotlBL:b,add:x,add3L:w,add3H:L,add4L:C,add4H:v,add5H:I,add5L:A};return bt.default=P,bt}var Ff;function Ow(){if(Ff)return Rt;Ff=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.shake256=Rt.shake128=Rt.keccak_512=Rt.keccak_384=Rt.keccak_256=Rt.keccak_224=Rt.sha3_512=Rt.sha3_384=Rt.sha3_256=Rt.sha3_224=Rt.Keccak=void 0,Rt.keccakP=b;const t=Iw(),e=Qs(),r=BigInt(0),i=BigInt(1),n=BigInt(2),s=BigInt(7),o=BigInt(256),a=BigInt(113),l=[],c=[],h=[];for(let C=0,v=i,A=1,I=0;C<24;C++){[A,I]=[I,(2*A+3*I)%5],l.push(2*(5*I+A)),c.push((C+1)*(C+2)/2%64);let P=r;for(let R=0;R<7;R++)v=(v<<i^(v>>s)*a)%o,v&n&&(P^=i<<(i<<BigInt(R))-i);h.push(P)}const u=(0,t.split)(h,!0),d=u[0],f=u[1],p=(C,v,A)=>A>32?(0,t.rotlBH)(C,v,A):(0,t.rotlSH)(C,v,A),g=(C,v,A)=>A>32?(0,t.rotlBL)(C,v,A):(0,t.rotlSL)(C,v,A);function b(C,v=24){const A=new Uint32Array(10);for(let I=24-v;I<24;I++){for(let _=0;_<10;_++)A[_]=C[_]^C[_+10]^C[_+20]^C[_+30]^C[_+40];for(let _=0;_<10;_+=2){const S=(_+8)%10,$=(_+2)%10,E=A[$],k=A[$+1],T=p(E,k,1)^A[S],M=g(E,k,1)^A[S+1];for(let N=0;N<50;N+=10)C[_+N]^=T,C[_+N+1]^=M}let P=C[2],R=C[3];for(let _=0;_<24;_++){const S=c[_],$=p(P,R,S),E=g(P,R,S),k=l[_];P=C[k],R=C[k+1],C[k]=$,C[k+1]=E}for(let _=0;_<50;_+=10){for(let S=0;S<10;S++)A[S]=C[_+S];for(let S=0;S<10;S++)C[_+S]^=~A[(S+2)%10]&A[(S+4)%10]}C[0]^=d[I],C[1]^=f[I]}(0,e.clean)(A)}class x extends e.Hash{constructor(v,A,I,P=!1,R=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=v,this.suffix=A,this.outputLen=I,this.enableXOF=P,this.rounds=R,(0,e.anumber)(I),!(0<v&&v<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,e.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,e.swap32IfBE)(this.state32),b(this.state32,this.rounds),(0,e.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(v){(0,e.aexists)(this),v=(0,e.toBytes)(v),(0,e.abytes)(v);const{blockLen:A,state:I}=this,P=v.length;for(let R=0;R<P;){const _=Math.min(A-this.pos,P-R);for(let S=0;S<_;S++)I[this.pos++]^=v[R++];this.pos===A&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:v,suffix:A,pos:I,blockLen:P}=this;v[I]^=A,(A&128)!==0&&I===P-1&&this.keccak(),v[P-1]^=128,this.keccak()}writeInto(v){(0,e.aexists)(this,!1),(0,e.abytes)(v),this.finish();const A=this.state,{blockLen:I}=this;for(let P=0,R=v.length;P<R;){this.posOut>=I&&this.keccak();const _=Math.min(I-this.posOut,R-P);v.set(A.subarray(this.posOut,this.posOut+_),P),this.posOut+=_,P+=_}return v}xofInto(v){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(v)}xof(v){return(0,e.anumber)(v),this.xofInto(new Uint8Array(v))}digestInto(v){if((0,e.aoutput)(v,this),this.finished)throw new Error("digest() was already called");return this.writeInto(v),this.destroy(),v}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,e.clean)(this.state)}_cloneInto(v){const{blockLen:A,suffix:I,outputLen:P,rounds:R,enableXOF:_}=this;return v||(v=new x(A,I,P,_,R)),v.state32.set(this.state32),v.pos=this.pos,v.posOut=this.posOut,v.finished=this.finished,v.rounds=R,v.suffix=I,v.outputLen=P,v.enableXOF=_,v.destroyed=this.destroyed,v}}Rt.Keccak=x;const w=(C,v,A)=>(0,e.createHasher)(()=>new x(v,C,A));Rt.sha3_224=w(6,144,224/8),Rt.sha3_256=w(6,136,256/8),Rt.sha3_384=w(6,104,384/8),Rt.sha3_512=w(6,72,512/8),Rt.keccak_224=w(1,144,224/8),Rt.keccak_256=w(1,136,256/8),Rt.keccak_384=w(1,104,384/8),Rt.keccak_512=w(1,72,512/8);const L=(C,v,A)=>(0,e.createXOFer)((I={})=>new x(v,C,I.dkLen===void 0?A:I.dkLen,!0));return Rt.shake128=L(31,168,128/8),Rt.shake256=L(31,136,256/8),Rt}var Nf;function Pw(){if(Nf)return Ne;Nf=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.keccak512=Ne.keccak384=Ne.keccak256=Ne.keccak224=void 0;const t=Ow(),e=Vg();return Ne.keccak224=(0,e.wrapHash)(t.keccak_224),Ne.keccak256=(()=>{const r=(0,e.wrapHash)(t.keccak_256);return r.create=t.keccak_256.create,r})(),Ne.keccak384=(0,e.wrapHash)(t.keccak_384),Ne.keccak512=(0,e.wrapHash)(t.keccak_512),Ne}var jf;function Gg(){if(jf)return ur;jf=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.standardNodeHash=ur.standardLeafHash=ur.keccak256=void 0;const t=Ug(),e=Pw(),r=as();function i(o){return(0,r.toHex)((0,e.keccak256)((0,r.toBytes)(o)))}ur.keccak256=i;function n(o,a){return i(i((0,t.encode)(o,a)))}ur.standardLeafHash=n;function s(o,a){return i((0,r.concat)([o,a].sort(r.compare)))}return ur.standardNodeHash=s,ur}var Se={},Df;function za(){if(Df)return Se;Df=1,Object.defineProperty(Se,"__esModule",{value:!0}),Se.invariant=Se.validateArgument=Se.InvalidArgumentError=Se.InvariantError=Se.throwError=void 0;function t(s){throw new Error(s)}Se.throwError=t;class e extends Error{constructor(o){super(o),this.name="InvariantError"}}Se.InvariantError=e;class r extends Error{constructor(o){super(o),this.name="InvalidArgumentError"}}Se.InvalidArgumentError=r;function i(s,o){if(!s)throw new r(o)}Se.validateArgument=i;function n(s,o){if(!s)throw new e(o)}return Se.invariant=n,Se}var qf;function bh(){if(qf)return Kt;qf=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.renderMerkleTree=Kt.isValidMerkleTree=Kt.processMultiProof=Kt.getMultiProof=Kt.processProof=Kt.getProof=Kt.makeMerkleTree=void 0;const t=as(),e=Gg(),r=za(),i=C=>2*C+1,n=C=>2*C+2,s=C=>C>0?Math.floor((C-1)/2):(0,r.throwError)("Root has no parent"),o=C=>C>0?C-(-1)**(C%2):(0,r.throwError)("Root has no siblings"),a=(C,v)=>v>=0&&v<C.length,l=(C,v)=>a(C,i(v)),c=(C,v)=>a(C,v)&&!l(C,v),h=C=>(0,t.toBytes)(C).length===32,u=(C,v)=>void(c(C,v)||(0,r.throwError)("Index is not a leaf")),d=C=>void(h(C)||(0,r.throwError)("Merkle tree nodes must be Uint8Array of length 32"));function f(C,v=e.standardNodeHash){C.forEach(d),(0,r.validateArgument)(C.length!==0,"Expected non-zero number of leaves");const A=new Array(2*C.length-1);for(const[I,P]of C.entries())A[A.length-1-I]=(0,t.toHex)(P);for(let I=A.length-1-C.length;I>=0;I--)A[I]=v(A[i(I)],A[n(I)]);return A}Kt.makeMerkleTree=f;function p(C,v){u(C,v);const A=[];for(;v>0;)A.push((0,t.toHex)(C[o(v)])),v=s(v);return A}Kt.getProof=p;function g(C,v,A=e.standardNodeHash){return d(C),v.forEach(d),(0,t.toHex)(v.reduce(A,C))}Kt.processProof=g;function b(C,v){v.forEach(R=>u(C,R)),v.sort((R,_)=>_-R),(0,r.validateArgument)(v.slice(1).every((R,_)=>R!==v[_]),"Cannot prove duplicated index");const A=Array.from(v),I=[],P=[];for(;A.length>0&&A[0]>0;){const R=A.shift(),_=o(R),S=s(R);_===A[0]?(P.push(!0),A.shift()):(P.push(!1),I.push((0,t.toHex)(C[_]))),A.push(S)}return v.length===0&&I.push((0,t.toHex)(C[0])),{leaves:v.map(R=>(0,t.toHex)(C[R])),proof:I,proofFlags:P}}Kt.getMultiProof=b;function x(C,v=e.standardNodeHash){C.leaves.forEach(d),C.proof.forEach(d),(0,r.validateArgument)(C.proof.length>=C.proofFlags.filter(P=>!P).length,"Invalid multiproof format"),(0,r.validateArgument)(C.leaves.length+C.proof.length===C.proofFlags.length+1,"Provided leaves and multiproof are not compatible");const A=Array.from(C.leaves),I=Array.from(C.proof);for(const P of C.proofFlags){const R=A.shift(),_=P?A.shift():I.shift();(0,r.invariant)(R!==void 0&&_!==void 0),A.push(v(R,_))}return(0,r.invariant)(A.length+I.length===1),(0,t.toHex)(A.pop()??I.shift())}Kt.processMultiProof=x;function w(C,v=e.standardNodeHash){for(const[A,I]of C.entries()){if(!h(I))return!1;const P=i(A),R=n(A);if(R>=C.length){if(P<C.length)return!1}else if((0,t.compare)(I,v(C[P],C[R])))return!1}return C.length>0}Kt.isValidMerkleTree=w;function L(C){(0,r.validateArgument)(C.length!==0,"Expected non-zero number of nodes");const v=[[0,[]]],A=[];for(;v.length>0;){const[I,P]=v.pop();A.push(P.slice(0,-1).map(R=>["   ","  "][R]).join("")+P.slice(-1).map(R=>[" "," "][R]).join("")+I+") "+(0,t.toHex)(C[I])),n(I)<C.length&&(v.push([n(I),P.concat(0)]),v.push([i(I),P.concat(1)]))}return A.join(`
`)}return Kt.renderMerkleTree=L,Kt}var yn={},bn={},Hf;function Fw(){return Hf||(Hf=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.defaultOptions=void 0,bn.defaultOptions={sortLeaves:!0}),bn}var zf;function Yg(){if(zf)return yn;zf=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.MerkleTreeImpl=void 0;const t=as(),e=bh(),r=Fw(),i=za();class n{constructor(o,a,l,c){this.tree=o,this.values=a,this.leafHash=l,this.nodeHash=c,(0,i.validateArgument)(a.every(({value:h})=>typeof h!="number"),"Leaf values cannot be numbers"),this.hashLookup=Object.fromEntries(a.map(({treeIndex:h},u)=>[o[h],u]))}static prepare(o,a={},l,c){const h=a.sortLeaves??r.defaultOptions.sortLeaves,u=o.map((p,g)=>({value:p,valueIndex:g,hash:l(p)}));h&&u.sort((p,g)=>(0,t.compare)(p.hash,g.hash));const d=(0,e.makeMerkleTree)(u.map(p=>p.hash),c),f=o.map(p=>({value:p,treeIndex:0}));for(const[p,{valueIndex:g}]of u.entries())f[g].treeIndex=d.length-p-1;return[d,f]}get root(){return this.tree[0]}get length(){return this.values.length}at(o){return this.values.at(o)?.value}render(){return(0,e.renderMerkleTree)(this.tree)}*entries(){for(const[o,{value:a}]of this.values.entries())yield[o,a]}validate(){this.values.forEach((o,a)=>this._validateValueAt(a)),(0,i.invariant)((0,e.isValidMerkleTree)(this.tree,this.nodeHash),"Merkle tree is invalid")}leafLookup(o){const a=this.hashLookup[this.leafHash(o)];return(0,i.validateArgument)(typeof a<"u","Leaf is not in tree"),a}getProof(o){const a=typeof o=="number"?o:this.leafLookup(o);this._validateValueAt(a);const{treeIndex:l}=this.values[a],c=(0,e.getProof)(this.tree,l);return(0,i.invariant)(this._verify(this.tree[l],c),"Unable to prove value"),c}getMultiProof(o){const a=o.map(h=>typeof h=="number"?h:this.leafLookup(h));for(const h of a)this._validateValueAt(h);const l=a.map(h=>this.values[h].treeIndex),c=(0,e.getMultiProof)(this.tree,l);return(0,i.invariant)(this._verifyMultiProof(c),"Unable to prove values"),{leaves:c.leaves.map(h=>this.values[this.hashLookup[h]].value),proof:c.proof,proofFlags:c.proofFlags}}verify(o,a){return this._verify(this._leafHash(o),a)}verifyMultiProof(o){return this._verifyMultiProof({leaves:o.leaves.map(a=>this._leafHash(a)),proof:o.proof,proofFlags:o.proofFlags})}_validateValueAt(o){const a=this.values[o];(0,i.validateArgument)(a!==void 0,"Index out of bounds"),(0,i.invariant)(this.tree[a.treeIndex]===this.leafHash(a.value),"Merkle tree does not contain the expected value")}_leafHash(o){if(typeof o=="number"){const a=this.values[o];(0,i.validateArgument)(a!==void 0,"Index out of bounds"),o=a.value}return this.leafHash(o)}_verify(o,a){return this.root===(0,e.processProof)(o,a,this.nodeHash)}_verifyMultiProof(o){return this.root===(0,e.processMultiProof)(o,this.nodeHash)}}return yn.MerkleTreeImpl=n,yn}var Wf;function Nw(){if(Wf)return Dr;Wf=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.SimpleMerkleTree=Dr.formatLeaf=void 0;const t=Ug(),e=as(),r=bh(),i=Yg(),n=za();function s(a){return(0,e.toHex)((0,t.encode)(["bytes32"],[a]))}Dr.formatLeaf=s;class o extends i.MerkleTreeImpl{static of(l,c={}){const[h,u]=i.MerkleTreeImpl.prepare(l,c,s,c.nodeHash);return new o(h,u,s,c.nodeHash)}static load(l,c){(0,n.validateArgument)(l.format==="simple-v1",`Unknown format '${l.format}'`),(0,n.validateArgument)(c==null!=(l.hash=="custom"),c?"Data does not expect a custom node hashing function":"Data expects a custom node hashing function");const h=new o(l.tree,l.values,s,c);return h.validate(),h}static verify(l,c,h,u){return(0,e.toHex)(l)===(0,r.processProof)(s(c),h,u)}static verifyMultiProof(l,c,h){return(0,e.toHex)(l)===(0,r.processMultiProof)(c,h)}dump(){return{format:"simple-v1",tree:this.tree,values:this.values.map(({value:l,treeIndex:c})=>({value:(0,e.toHex)(l),treeIndex:c})),...this.nodeHash?{hash:"custom"}:{}}}}return Dr.SimpleMerkleTree=o,Dr}var xn={},Uf;function jw(){if(Uf)return xn;Uf=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.StandardMerkleTree=void 0;const t=as(),e=bh(),r=Yg(),i=Gg(),n=za();class s extends r.MerkleTreeImpl{constructor(a,l,c){super(a,l,h=>(0,i.standardLeafHash)(c,h)),this.tree=a,this.values=l,this.leafEncoding=c}static of(a,l,c={}){const[h,u]=r.MerkleTreeImpl.prepare(a,c,d=>(0,i.standardLeafHash)(l,d));return new s(h,u,l)}static load(a){(0,n.validateArgument)(a.format==="standard-v1",`Unknown format '${a.format}'`),(0,n.validateArgument)(a.leafEncoding!==void 0,"Expected leaf encoding");const l=new s(a.tree,a.values,a.leafEncoding);return l.validate(),l}static verify(a,l,c,h){return(0,t.toHex)(a)===(0,e.processProof)((0,i.standardLeafHash)(l,c),h)}static verifyMultiProof(a,l,c){return(0,t.toHex)(a)===(0,e.processMultiProof)({leaves:c.leaves.map(h=>(0,i.standardLeafHash)(l,h)),proof:c.proof,proofFlags:c.proofFlags})}dump(){return{format:"standard-v1",leafEncoding:this.leafEncoding,tree:this.tree,values:this.values}}}return xn.StandardMerkleTree=s,xn}var Vf;function Dw(){return Vf||(Vf=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.StandardMerkleTree=t.SimpleMerkleTree=void 0;var e=Nw();Object.defineProperty(t,"SimpleMerkleTree",{enumerable:!0,get:function(){return e.SimpleMerkleTree}});var r=jw();Object.defineProperty(t,"StandardMerkleTree",{enumerable:!0,get:function(){return r.StandardMerkleTree}})}(ko)),ko}var ji=Dw(),Fs={exports:{}},qw=Fs.exports,Gf;function Hw(){return Gf||(Gf=1,function(t,e){(function(r,i){t.exports=i()})(qw,function(){var r=1e3,i=6e4,n=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",h="week",u="month",d="quarter",f="year",p="date",g="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,x=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,w={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(k){var T=["th","st","nd","rd"],M=k%100;return"["+k+(T[(M-20)%10]||T[M]||T[0])+"]"}},L=function(k,T,M){var N=String(k);return!N||N.length>=T?k:""+Array(T+1-N.length).join(M)+k},C={s:L,z:function(k){var T=-k.utcOffset(),M=Math.abs(T),N=Math.floor(M/60),D=M%60;return(T<=0?"+":"-")+L(N,2,"0")+":"+L(D,2,"0")},m:function k(T,M){if(T.date()<M.date())return-k(M,T);var N=12*(M.year()-T.year())+(M.month()-T.month()),D=T.clone().add(N,u),O=M-D<0,B=T.clone().add(N+(O?-1:1),u);return+(-(N+(M-D)/(O?D-B:B-D))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:u,y:f,w:h,d:c,D:p,h:l,m:a,s:o,ms:s,Q:d}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},v="en",A={};A[v]=w;var I="$isDayjsObject",P=function(k){return k instanceof $||!(!k||!k[I])},R=function k(T,M,N){var D;if(!T)return v;if(typeof T=="string"){var O=T.toLowerCase();A[O]&&(D=O),M&&(A[O]=M,D=O);var B=T.split("-");if(!D&&B.length>1)return k(B[0])}else{var H=T.name;A[H]=T,D=H}return!N&&D&&(v=D),D||!N&&v},_=function(k,T){if(P(k))return k.clone();var M=typeof T=="object"?T:{};return M.date=k,M.args=arguments,new $(M)},S=C;S.l=R,S.i=P,S.w=function(k,T){return _(k,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var $=function(){function k(M){this.$L=R(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[I]=!0}var T=k.prototype;return T.parse=function(M){this.$d=function(N){var D=N.date,O=N.utc;if(D===null)return new Date(NaN);if(S.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var B=D.match(b);if(B){var H=B[2]-1||0,W=(B[7]||"0").substring(0,3);return O?new Date(Date.UTC(B[1],H,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)):new Date(B[1],H,B[3]||1,B[4]||0,B[5]||0,B[6]||0,W)}}return new Date(D)}(M),this.init()},T.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},T.$utils=function(){return S},T.isValid=function(){return this.$d.toString()!==g},T.isSame=function(M,N){var D=_(M);return this.startOf(N)<=D&&D<=this.endOf(N)},T.isAfter=function(M,N){return _(M)<this.startOf(N)},T.isBefore=function(M,N){return this.endOf(N)<_(M)},T.$g=function(M,N,D){return S.u(M)?this[N]:this.set(D,M)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(M,N){var D=this,O=!!S.u(N)||N,B=S.p(M),H=function(Z,pt){var gt=S.w(D.$u?Date.UTC(D.$y,pt,Z):new Date(D.$y,pt,Z),D);return O?gt:gt.endOf(c)},W=function(Z,pt){return S.w(D.toDate()[Z].apply(D.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(pt)),D)},U=this.$W,F=this.$M,j=this.$D,V="set"+(this.$u?"UTC":"");switch(B){case f:return O?H(1,0):H(31,11);case u:return O?H(1,F):H(0,F+1);case h:var K=this.$locale().weekStart||0,Q=(U<K?U+7:U)-K;return H(O?j-Q:j+(6-Q),F);case c:case p:return W(V+"Hours",0);case l:return W(V+"Minutes",1);case a:return W(V+"Seconds",2);case o:return W(V+"Milliseconds",3);default:return this.clone()}},T.endOf=function(M){return this.startOf(M,!1)},T.$set=function(M,N){var D,O=S.p(M),B="set"+(this.$u?"UTC":""),H=(D={},D[c]=B+"Date",D[p]=B+"Date",D[u]=B+"Month",D[f]=B+"FullYear",D[l]=B+"Hours",D[a]=B+"Minutes",D[o]=B+"Seconds",D[s]=B+"Milliseconds",D)[O],W=O===c?this.$D+(N-this.$W):N;if(O===u||O===f){var U=this.clone().set(p,1);U.$d[H](W),U.init(),this.$d=U.set(p,Math.min(this.$D,U.daysInMonth())).$d}else H&&this.$d[H](W);return this.init(),this},T.set=function(M,N){return this.clone().$set(M,N)},T.get=function(M){return this[S.p(M)]()},T.add=function(M,N){var D,O=this;M=Number(M);var B=S.p(N),H=function(F){var j=_(O);return S.w(j.date(j.date()+Math.round(F*M)),O)};if(B===u)return this.set(u,this.$M+M);if(B===f)return this.set(f,this.$y+M);if(B===c)return H(1);if(B===h)return H(7);var W=(D={},D[a]=i,D[l]=n,D[o]=r,D)[B]||1,U=this.$d.getTime()+M*W;return S.w(U,this)},T.subtract=function(M,N){return this.add(-1*M,N)},T.format=function(M){var N=this,D=this.$locale();if(!this.isValid())return D.invalidDate||g;var O=M||"YYYY-MM-DDTHH:mm:ssZ",B=S.z(this),H=this.$H,W=this.$m,U=this.$M,F=D.weekdays,j=D.months,V=D.meridiem,K=function(pt,gt,At,Lt){return pt&&(pt[gt]||pt(N,O))||At[gt].slice(0,Lt)},Q=function(pt){return S.s(H%12||12,pt,"0")},Z=V||function(pt,gt,At){var Lt=pt<12?"AM":"PM";return At?Lt.toLowerCase():Lt};return O.replace(x,function(pt,gt){return gt||function(At){switch(At){case"YY":return String(N.$y).slice(-2);case"YYYY":return S.s(N.$y,4,"0");case"M":return U+1;case"MM":return S.s(U+1,2,"0");case"MMM":return K(D.monthsShort,U,j,3);case"MMMM":return K(j,U);case"D":return N.$D;case"DD":return S.s(N.$D,2,"0");case"d":return String(N.$W);case"dd":return K(D.weekdaysMin,N.$W,F,2);case"ddd":return K(D.weekdaysShort,N.$W,F,3);case"dddd":return F[N.$W];case"H":return String(H);case"HH":return S.s(H,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return Z(H,W,!0);case"A":return Z(H,W,!1);case"m":return String(W);case"mm":return S.s(W,2,"0");case"s":return String(N.$s);case"ss":return S.s(N.$s,2,"0");case"SSS":return S.s(N.$ms,3,"0");case"Z":return B}return null}(pt)||B.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(M,N,D){var O,B=this,H=S.p(N),W=_(M),U=(W.utcOffset()-this.utcOffset())*i,F=this-W,j=function(){return S.m(B,W)};switch(H){case f:O=j()/12;break;case u:O=j();break;case d:O=j()/3;break;case h:O=(F-U)/6048e5;break;case c:O=(F-U)/864e5;break;case l:O=F/n;break;case a:O=F/i;break;case o:O=F/r;break;default:O=F}return D?O:S.a(O)},T.daysInMonth=function(){return this.endOf(u).$D},T.$locale=function(){return A[this.$L]},T.locale=function(M,N){if(!M)return this.$L;var D=this.clone(),O=R(M,N,!0);return O&&(D.$L=O),D},T.clone=function(){return S.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},k}(),E=$.prototype;return _.prototype=E,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",u],["$y",f],["$D",p]].forEach(function(k){E[k[1]]=function(T){return this.$g(T,k[0],k[1])}}),_.extend=function(k,T){return k.$i||(k(T,$,_),k.$i=!0),_},_.locale=R,_.isDayjs=P,_.unix=function(k){return _(1e3*k)},_.en=A[v],_.Ls=A,_.p={},_})}(Fs)),Fs.exports}var zw=Hw();const Ww=y_(zw),Ns={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t),hsl2rgb:({h:t,s:e,l:r},i)=>{if(!e)return r*2.55;t/=360,e/=100,r/=100;const n=r<.5?r*(1+e):r+e-r*e,s=2*r-n;switch(i){case"r":return Ns.hue2rgb(s,n,t+1/3)*255;case"g":return Ns.hue2rgb(s,n,t)*255;case"b":return Ns.hue2rgb(s,n,t-1/3)*255}},rgb2hsl:({r:t,g:e,b:r},i)=>{t/=255,e/=255,r/=255;const n=Math.max(t,e,r),s=Math.min(t,e,r),o=(n+s)/2;if(i==="l")return o*100;if(n===s)return 0;const a=n-s,l=o>.5?a/(2-n-s):a/(n+s);if(i==="s")return l*100;switch(n){case t:return((e-r)/a+(e<r?6:0))*60;case e:return((r-t)/a+2)*60;case r:return((t-e)/a+4)*60;default:return-1}}},Uw={clamp:(t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t)),round:t=>Math.round(t*1e10)/1e10},Vw={dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}},mt={channel:Ns,lang:Uw,unit:Vw},Lr={};for(let t=0;t<=255;t++)Lr[t]=mt.unit.dec2hex(t);const ie={ALL:0,RGB:1,HSL:2};class Gw{constructor(){this.type=ie.ALL}get(){return this.type}set(e){if(this.type&&this.type!==e)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=e}reset(){this.type=ie.ALL}is(e){return this.type===e}}class Yw{constructor(e,r){this.color=r,this.changed=!1,this.data=e,this.type=new Gw}set(e,r){return this.color=r,this.changed=!1,this.data=e,this.type.type=ie.ALL,this}_ensureHSL(){const e=this.data,{h:r,s:i,l:n}=e;r===void 0&&(e.h=mt.channel.rgb2hsl(e,"h")),i===void 0&&(e.s=mt.channel.rgb2hsl(e,"s")),n===void 0&&(e.l=mt.channel.rgb2hsl(e,"l"))}_ensureRGB(){const e=this.data,{r,g:i,b:n}=e;r===void 0&&(e.r=mt.channel.hsl2rgb(e,"r")),i===void 0&&(e.g=mt.channel.hsl2rgb(e,"g")),n===void 0&&(e.b=mt.channel.hsl2rgb(e,"b"))}get r(){const e=this.data,r=e.r;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"r"))}get g(){const e=this.data,r=e.g;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"g"))}get b(){const e=this.data,r=e.b;return!this.type.is(ie.HSL)&&r!==void 0?r:(this._ensureHSL(),mt.channel.hsl2rgb(e,"b"))}get h(){const e=this.data,r=e.h;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"h"))}get s(){const e=this.data,r=e.s;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"s"))}get l(){const e=this.data,r=e.l;return!this.type.is(ie.RGB)&&r!==void 0?r:(this._ensureRGB(),mt.channel.rgb2hsl(e,"l"))}get a(){return this.data.a}set r(e){this.type.set(ie.RGB),this.changed=!0,this.data.r=e}set g(e){this.type.set(ie.RGB),this.changed=!0,this.data.g=e}set b(e){this.type.set(ie.RGB),this.changed=!0,this.data.b=e}set h(e){this.type.set(ie.HSL),this.changed=!0,this.data.h=e}set s(e){this.type.set(ie.HSL),this.changed=!0,this.data.s=e}set l(e){this.type.set(ie.HSL),this.changed=!0,this.data.l=e}set a(e){this.changed=!0,this.data.a=e}}const Wa=new Yw({r:0,g:0,b:0,a:0},"transparent"),Ai={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const e=t.match(Ai.re);if(!e)return;const r=e[1],i=parseInt(r,16),n=r.length,s=n%4===0,o=n>4,a=o?1:17,l=o?8:4,c=s?0:-1,h=o?255:15;return Wa.set({r:(i>>l*(c+3)&h)*a,g:(i>>l*(c+2)&h)*a,b:(i>>l*(c+1)&h)*a,a:s?(i&h)*a/255:1},t)},stringify:t=>{const{r:e,g:r,b:i,a:n}=t;return n<1?`#${Lr[Math.round(e)]}${Lr[Math.round(r)]}${Lr[Math.round(i)]}${Lr[Math.round(n*255)]}`:`#${Lr[Math.round(e)]}${Lr[Math.round(r)]}${Lr[Math.round(i)]}`}},Kr={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(Kr.hueRe);if(e){const[,r,i]=e;switch(i){case"grad":return mt.channel.clamp.h(parseFloat(r)*.9);case"rad":return mt.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return mt.channel.clamp.h(parseFloat(r)*360)}}return mt.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(e!==104&&e!==72)return;const r=t.match(Kr.re);if(!r)return;const[,i,n,s,o,a]=r;return Wa.set({h:Kr._hue2deg(i),s:mt.channel.clamp.s(parseFloat(n)),l:mt.channel.clamp.l(parseFloat(s)),a:o?mt.channel.clamp.a(a?parseFloat(o)/100:parseFloat(o)):1},t)},stringify:t=>{const{h:e,s:r,l:i,a:n}=t;return n<1?`hsla(${mt.lang.round(e)}, ${mt.lang.round(r)}%, ${mt.lang.round(i)}%, ${n})`:`hsl(${mt.lang.round(e)}, ${mt.lang.round(r)}%, ${mt.lang.round(i)}%)`}},Dn={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=Dn.colors[t];if(e)return Ai.parse(e)},stringify:t=>{const e=Ai.stringify(t);for(const r in Dn.colors)if(Dn.colors[r]===e)return r}},$n={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(e!==114&&e!==82)return;const r=t.match($n.re);if(!r)return;const[,i,n,s,o,a,l,c,h]=r;return Wa.set({r:mt.channel.clamp.r(n?parseFloat(i)*2.55:parseFloat(i)),g:mt.channel.clamp.g(o?parseFloat(s)*2.55:parseFloat(s)),b:mt.channel.clamp.b(l?parseFloat(a)*2.55:parseFloat(a)),a:c?mt.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{r:e,g:r,b:i,a:n}=t;return n<1?`rgba(${mt.lang.round(e)}, ${mt.lang.round(r)}, ${mt.lang.round(i)}, ${mt.lang.round(n)})`:`rgb(${mt.lang.round(e)}, ${mt.lang.round(r)}, ${mt.lang.round(i)})`}},Qe={format:{keyword:Dn,hex:Ai,rgb:$n,rgba:$n,hsl:Kr,hsla:Kr},parse:t=>{if(typeof t!="string")return t;const e=Ai.parse(t)||$n.parse(t)||Kr.parse(t)||Dn.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(ie.HSL)||t.data.r===void 0?Kr.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?$n.stringify(t):Ai.stringify(t)},Xg=(t,e)=>{const r=Qe.parse(t);for(const i in e)r[i]=mt.channel.clamp[i](e[i]);return Qe.stringify(r)},qn=(t,e,r=0,i=1)=>{if(typeof t!="number")return Xg(t,{a:e});const n=Wa.set({r:mt.channel.clamp.r(t),g:mt.channel.clamp.g(e),b:mt.channel.clamp.b(r),a:mt.channel.clamp.a(i)});return Qe.stringify(n)},Xw=t=>{const{r:e,g:r,b:i}=Qe.parse(t),n=.2126*mt.channel.toLinear(e)+.7152*mt.channel.toLinear(r)+.0722*mt.channel.toLinear(i);return mt.lang.round(n)},Jw=t=>Xw(t)>=.5,os=t=>!Jw(t),Jg=(t,e,r)=>{const i=Qe.parse(t),n=i[e],s=mt.channel.clamp[e](n+r);return n!==s&&(i[e]=s),Qe.stringify(i)},tt=(t,e)=>Jg(t,"l",e),ht=(t,e)=>Jg(t,"l",-e),z=(t,e)=>{const r=Qe.parse(t),i={};for(const n in e)e[n]&&(i[n]=r[n]+e[n]);return Xg(t,i)},Kw=(t,e,r=50)=>{const{r:i,g:n,b:s,a:o}=Qe.parse(t),{r:a,g:l,b:c,a:h}=Qe.parse(e),u=r/100,d=u*2-1,f=o-h,g=((d*f===-1?d:(d+f)/(1+d*f))+1)/2,b=1-g,x=i*g+a*b,w=n*g+l*b,L=s*g+c*b,C=o*u+h*(1-u);return qn(x,w,L,C)},J=(t,e=100)=>{const r=Qe.parse(t);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Kw(r,t,e)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Kg,setPrototypeOf:Yf,isFrozen:Zw,getPrototypeOf:Qw,getOwnPropertyDescriptor:t2}=Object;let{freeze:fe,seal:Be,create:Zg}=Object,{apply:cc,construct:hc}=typeof Reflect<"u"&&Reflect;fe||(fe=function(e){return e});Be||(Be=function(e){return e});cc||(cc=function(e,r,i){return e.apply(r,i)});hc||(hc=function(e,r){return new e(...r)});const Ss=pe(Array.prototype.forEach),e2=pe(Array.prototype.lastIndexOf),Xf=pe(Array.prototype.pop),_n=pe(Array.prototype.push),r2=pe(Array.prototype.splice),js=pe(String.prototype.toLowerCase),zl=pe(String.prototype.toString),Jf=pe(String.prototype.match),wn=pe(String.prototype.replace),i2=pe(String.prototype.indexOf),n2=pe(String.prototype.trim),je=pe(Object.prototype.hasOwnProperty),oe=pe(RegExp.prototype.test),vn=s2(TypeError);function pe(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return cc(t,e,i)}}function s2(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return hc(t,r)}}function _t(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:js;Yf&&Yf(t,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const s=r(n);s!==n&&(Zw(e)||(e[i]=s),n=s)}t[n]=!0}return t}function a2(t){for(let e=0;e<t.length;e++)je(t,e)||(t[e]=null);return t}function pr(t){const e=Zg(null);for(const[r,i]of Kg(t))je(t,r)&&(Array.isArray(i)?e[r]=a2(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=pr(i):e[r]=i);return e}function Cn(t,e){for(;t!==null;){const i=t2(t,e);if(i){if(i.get)return pe(i.get);if(typeof i.value=="function")return pe(i.value)}t=Qw(t)}function r(){return null}return r}const Kf=fe(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wl=fe(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ul=fe(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),o2=fe(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vl=fe(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),l2=fe(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Zf=fe(["#text"]),Qf=fe(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gl=fe(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),tp=fe(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ks=fe(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),c2=Be(/\{\{[\w\W]*|[\w\W]*\}\}/gm),h2=Be(/<%[\w\W]*|[\w\W]*%>/gm),u2=Be(/\$\{[\w\W]*/gm),d2=Be(/^data-[\-\w.\u00B7-\uFFFF]+$/),f2=Be(/^aria-[\-\w]+$/),Qg=Be(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),p2=Be(/^(?:\w+script|data):/i),g2=Be(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tm=Be(/^html$/i),m2=Be(/^[a-z][.\w]*(-[.\w]+)+$/i);var ep=Object.freeze({__proto__:null,ARIA_ATTR:f2,ATTR_WHITESPACE:g2,CUSTOM_ELEMENT:m2,DATA_ATTR:d2,DOCTYPE_NAME:tm,ERB_EXPR:h2,IS_ALLOWED_URI:Qg,IS_SCRIPT_OR_DATA:p2,MUSTACHE_EXPR:c2,TMPLIT_EXPR:u2});const Sn={element:1,text:3,progressingInstruction:7,comment:8,document:9},y2=function(){return typeof window>"u"?null:window},b2=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";r&&r.hasAttribute(n)&&(i=r.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},rp=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function em(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y2();const e=lt=>em(lt);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Sn.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,n=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:f}=t,p=l.prototype,g=Cn(p,"cloneNode"),b=Cn(p,"remove"),x=Cn(p,"nextSibling"),w=Cn(p,"childNodes"),L=Cn(p,"parentNode");if(typeof o=="function"){const lt=r.createElement("template");lt.content&&lt.content.ownerDocument&&(r=lt.content.ownerDocument)}let C,v="";const{implementation:A,createNodeIterator:I,createDocumentFragment:P,getElementsByTagName:R}=r,{importNode:_}=i;let S=rp();e.isSupported=typeof Kg=="function"&&typeof L=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$,ERB_EXPR:E,TMPLIT_EXPR:k,DATA_ATTR:T,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:N,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:O}=ep;let{IS_ALLOWED_URI:B}=ep,H=null;const W=_t({},[...Kf,...Wl,...Ul,...Vl,...Zf]);let U=null;const F=_t({},[...Qf,...Gl,...tp,...ks]);let j=Object.seal(Zg(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),V=null,K=null,Q=!0,Z=!0,pt=!1,gt=!0,At=!1,Lt=!0,ae=!1,It=!1,Mt=!1,jt=!1,Ut=!1,Ee=!1,Er=!0,Ar=!1;const bs="user-content-";let yi=!0,sn=!1,bi={},xi=null;const _u=_t({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wu=null;const vu=_t({},["audio","video","img","source","image","track"]);let bo=null;const Cu=_t({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xs="http://www.w3.org/1998/Math/MathML",_s="http://www.w3.org/2000/svg",sr="http://www.w3.org/1999/xhtml";let _i=sr,xo=!1,_o=null;const h_=_t({},[xs,_s,sr],zl);let ws=_t({},["mi","mo","mn","ms","mtext"]),vs=_t({},["annotation-xml"]);const u_=_t({},["title","style","font","a","script"]);let an=null;const d_=["application/xhtml+xml","text/html"],f_="text/html";let Vt=null,wi=null;const p_=r.createElement("form"),Su=function(q){return q instanceof RegExp||q instanceof Function},wo=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(wi&&wi===q)){if((!q||typeof q!="object")&&(q={}),q=pr(q),an=d_.indexOf(q.PARSER_MEDIA_TYPE)===-1?f_:q.PARSER_MEDIA_TYPE,Vt=an==="application/xhtml+xml"?zl:js,H=je(q,"ALLOWED_TAGS")?_t({},q.ALLOWED_TAGS,Vt):W,U=je(q,"ALLOWED_ATTR")?_t({},q.ALLOWED_ATTR,Vt):F,_o=je(q,"ALLOWED_NAMESPACES")?_t({},q.ALLOWED_NAMESPACES,zl):h_,bo=je(q,"ADD_URI_SAFE_ATTR")?_t(pr(Cu),q.ADD_URI_SAFE_ATTR,Vt):Cu,wu=je(q,"ADD_DATA_URI_TAGS")?_t(pr(vu),q.ADD_DATA_URI_TAGS,Vt):vu,xi=je(q,"FORBID_CONTENTS")?_t({},q.FORBID_CONTENTS,Vt):_u,V=je(q,"FORBID_TAGS")?_t({},q.FORBID_TAGS,Vt):pr({}),K=je(q,"FORBID_ATTR")?_t({},q.FORBID_ATTR,Vt):pr({}),bi=je(q,"USE_PROFILES")?q.USE_PROFILES:!1,Q=q.ALLOW_ARIA_ATTR!==!1,Z=q.ALLOW_DATA_ATTR!==!1,pt=q.ALLOW_UNKNOWN_PROTOCOLS||!1,gt=q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,At=q.SAFE_FOR_TEMPLATES||!1,Lt=q.SAFE_FOR_XML!==!1,ae=q.WHOLE_DOCUMENT||!1,jt=q.RETURN_DOM||!1,Ut=q.RETURN_DOM_FRAGMENT||!1,Ee=q.RETURN_TRUSTED_TYPE||!1,Mt=q.FORCE_BODY||!1,Er=q.SANITIZE_DOM!==!1,Ar=q.SANITIZE_NAMED_PROPS||!1,yi=q.KEEP_CONTENT!==!1,sn=q.IN_PLACE||!1,B=q.ALLOWED_URI_REGEXP||Qg,_i=q.NAMESPACE||sr,ws=q.MATHML_TEXT_INTEGRATION_POINTS||ws,vs=q.HTML_INTEGRATION_POINTS||vs,j=q.CUSTOM_ELEMENT_HANDLING||{},q.CUSTOM_ELEMENT_HANDLING&&Su(q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),q.CUSTOM_ELEMENT_HANDLING&&Su(q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),q.CUSTOM_ELEMENT_HANDLING&&typeof q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(j.allowCustomizedBuiltInElements=q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),At&&(Z=!1),Ut&&(jt=!0),bi&&(H=_t({},Zf),U=[],bi.html===!0&&(_t(H,Kf),_t(U,Qf)),bi.svg===!0&&(_t(H,Wl),_t(U,Gl),_t(U,ks)),bi.svgFilters===!0&&(_t(H,Ul),_t(U,Gl),_t(U,ks)),bi.mathMl===!0&&(_t(H,Vl),_t(U,tp),_t(U,ks))),q.ADD_TAGS&&(H===W&&(H=pr(H)),_t(H,q.ADD_TAGS,Vt)),q.ADD_ATTR&&(U===F&&(U=pr(U)),_t(U,q.ADD_ATTR,Vt)),q.ADD_URI_SAFE_ATTR&&_t(bo,q.ADD_URI_SAFE_ATTR,Vt),q.FORBID_CONTENTS&&(xi===_u&&(xi=pr(xi)),_t(xi,q.FORBID_CONTENTS,Vt)),yi&&(H["#text"]=!0),ae&&_t(H,["html","head","body"]),H.table&&(_t(H,["tbody"]),delete V.tbody),q.TRUSTED_TYPES_POLICY){if(typeof q.TRUSTED_TYPES_POLICY.createHTML!="function")throw vn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=q.TRUSTED_TYPES_POLICY,v=C.createHTML("")}else C===void 0&&(C=b2(f,n)),C!==null&&typeof v=="string"&&(v=C.createHTML(""));fe&&fe(q),wi=q}},ku=_t({},[...Wl,...Ul,...o2]),Tu=_t({},[...Vl,...l2]),g_=function(q){let X=L(q);(!X||!X.tagName)&&(X={namespaceURI:_i,tagName:"template"});const it=js(q.tagName),Ot=js(X.tagName);return _o[q.namespaceURI]?q.namespaceURI===_s?X.namespaceURI===sr?it==="svg":X.namespaceURI===xs?it==="svg"&&(Ot==="annotation-xml"||ws[Ot]):!!ku[it]:q.namespaceURI===xs?X.namespaceURI===sr?it==="math":X.namespaceURI===_s?it==="math"&&vs[Ot]:!!Tu[it]:q.namespaceURI===sr?X.namespaceURI===_s&&!vs[Ot]||X.namespaceURI===xs&&!ws[Ot]?!1:!Tu[it]&&(u_[it]||!ku[it]):!!(an==="application/xhtml+xml"&&_o[q.namespaceURI]):!1},Ve=function(q){_n(e.removed,{element:q});try{L(q).removeChild(q)}catch{b(q)}},vi=function(q,X){try{_n(e.removed,{attribute:X.getAttributeNode(q),from:X})}catch{_n(e.removed,{attribute:null,from:X})}if(X.removeAttribute(q),q==="is")if(jt||Ut)try{Ve(X)}catch{}else try{X.setAttribute(q,"")}catch{}},Eu=function(q){let X=null,it=null;if(Mt)q="<remove></remove>"+q;else{const Dt=Jf(q,/^[\r\n\t ]+/);it=Dt&&Dt[0]}an==="application/xhtml+xml"&&_i===sr&&(q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+q+"</body></html>");const Ot=C?C.createHTML(q):q;if(_i===sr)try{X=new d().parseFromString(Ot,an)}catch{}if(!X||!X.documentElement){X=A.createDocument(_i,"template",null);try{X.documentElement.innerHTML=xo?v:Ot}catch{}}const ee=X.body||X.documentElement;return q&&it&&ee.insertBefore(r.createTextNode(it),ee.childNodes[0]||null),_i===sr?R.call(X,ae?"html":"body")[0]:ae?X.documentElement:ee},Au=function(q){return I.call(q.ownerDocument||q,q,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},vo=function(q){return q instanceof u&&(typeof q.nodeName!="string"||typeof q.textContent!="string"||typeof q.removeChild!="function"||!(q.attributes instanceof h)||typeof q.removeAttribute!="function"||typeof q.setAttribute!="function"||typeof q.namespaceURI!="string"||typeof q.insertBefore!="function"||typeof q.hasChildNodes!="function")},Lu=function(q){return typeof a=="function"&&q instanceof a};function ar(lt,q,X){Ss(lt,it=>{it.call(e,q,X,wi)})}const Bu=function(q){let X=null;if(ar(S.beforeSanitizeElements,q,null),vo(q))return Ve(q),!0;const it=Vt(q.nodeName);if(ar(S.uponSanitizeElement,q,{tagName:it,allowedTags:H}),Lt&&q.hasChildNodes()&&!Lu(q.firstElementChild)&&oe(/<[/\w!]/g,q.innerHTML)&&oe(/<[/\w!]/g,q.textContent)||q.nodeType===Sn.progressingInstruction||Lt&&q.nodeType===Sn.comment&&oe(/<[/\w]/g,q.data))return Ve(q),!0;if(!H[it]||V[it]){if(!V[it]&&Mu(it)&&(j.tagNameCheck instanceof RegExp&&oe(j.tagNameCheck,it)||j.tagNameCheck instanceof Function&&j.tagNameCheck(it)))return!1;if(yi&&!xi[it]){const Ot=L(q)||q.parentNode,ee=w(q)||q.childNodes;if(ee&&Ot){const Dt=ee.length;for(let me=Dt-1;me>=0;--me){const or=g(ee[me],!0);or.__removalCount=(q.__removalCount||0)+1,Ot.insertBefore(or,x(q))}}}return Ve(q),!0}return q instanceof l&&!g_(q)||(it==="noscript"||it==="noembed"||it==="noframes")&&oe(/<\/no(script|embed|frames)/i,q.innerHTML)?(Ve(q),!0):(At&&q.nodeType===Sn.text&&(X=q.textContent,Ss([$,E,k],Ot=>{X=wn(X,Ot," ")}),q.textContent!==X&&(_n(e.removed,{element:q.cloneNode()}),q.textContent=X)),ar(S.afterSanitizeElements,q,null),!1)},Ru=function(q,X,it){if(Er&&(X==="id"||X==="name")&&(it in r||it in p_))return!1;if(!(Z&&!K[X]&&oe(T,X))){if(!(Q&&oe(M,X))){if(!U[X]||K[X]){if(!(Mu(q)&&(j.tagNameCheck instanceof RegExp&&oe(j.tagNameCheck,q)||j.tagNameCheck instanceof Function&&j.tagNameCheck(q))&&(j.attributeNameCheck instanceof RegExp&&oe(j.attributeNameCheck,X)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(X))||X==="is"&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&oe(j.tagNameCheck,it)||j.tagNameCheck instanceof Function&&j.tagNameCheck(it))))return!1}else if(!bo[X]){if(!oe(B,wn(it,D,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&q!=="script"&&i2(it,"data:")===0&&wu[q])){if(!(pt&&!oe(N,wn(it,D,"")))){if(it)return!1}}}}}}return!0},Mu=function(q){return q!=="annotation-xml"&&Jf(q,O)},$u=function(q){ar(S.beforeSanitizeAttributes,q,null);const{attributes:X}=q;if(!X||vo(q))return;const it={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let Ot=X.length;for(;Ot--;){const ee=X[Ot],{name:Dt,namespaceURI:me,value:or}=ee,on=Vt(Dt),Co=or;let re=Dt==="value"?Co:n2(Co);if(it.attrName=on,it.attrValue=re,it.keepAttr=!0,it.forceKeepAttr=void 0,ar(S.uponSanitizeAttribute,q,it),re=it.attrValue,Ar&&(on==="id"||on==="name")&&(vi(Dt,q),re=bs+re),Lt&&oe(/((--!?|])>)|<\/(style|title)/i,re)){vi(Dt,q);continue}if(it.forceKeepAttr)continue;if(!it.keepAttr){vi(Dt,q);continue}if(!gt&&oe(/\/>/i,re)){vi(Dt,q);continue}At&&Ss([$,E,k],Ou=>{re=wn(re,Ou," ")});const Iu=Vt(q.nodeName);if(!Ru(Iu,on,re)){vi(Dt,q);continue}if(C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!me)switch(f.getAttributeType(Iu,on)){case"TrustedHTML":{re=C.createHTML(re);break}case"TrustedScriptURL":{re=C.createScriptURL(re);break}}if(re!==Co)try{me?q.setAttributeNS(me,Dt,re):q.setAttribute(Dt,re),vo(q)?Ve(q):Xf(e.removed)}catch{vi(Dt,q)}}ar(S.afterSanitizeAttributes,q,null)},m_=function lt(q){let X=null;const it=Au(q);for(ar(S.beforeSanitizeShadowDOM,q,null);X=it.nextNode();)ar(S.uponSanitizeShadowNode,X,null),Bu(X),$u(X),X.content instanceof s&&lt(X.content);ar(S.afterSanitizeShadowDOM,q,null)};return e.sanitize=function(lt){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,it=null,Ot=null,ee=null;if(xo=!lt,xo&&(lt="<!-->"),typeof lt!="string"&&!Lu(lt))if(typeof lt.toString=="function"){if(lt=lt.toString(),typeof lt!="string")throw vn("dirty is not a string, aborting")}else throw vn("toString is not a function");if(!e.isSupported)return lt;if(It||wo(q),e.removed=[],typeof lt=="string"&&(sn=!1),sn){if(lt.nodeName){const or=Vt(lt.nodeName);if(!H[or]||V[or])throw vn("root node is forbidden and cannot be sanitized in-place")}}else if(lt instanceof a)X=Eu("<!---->"),it=X.ownerDocument.importNode(lt,!0),it.nodeType===Sn.element&&it.nodeName==="BODY"||it.nodeName==="HTML"?X=it:X.appendChild(it);else{if(!jt&&!At&&!ae&&lt.indexOf("<")===-1)return C&&Ee?C.createHTML(lt):lt;if(X=Eu(lt),!X)return jt?null:Ee?v:""}X&&Mt&&Ve(X.firstChild);const Dt=Au(sn?lt:X);for(;Ot=Dt.nextNode();)Bu(Ot),$u(Ot),Ot.content instanceof s&&m_(Ot.content);if(sn)return lt;if(jt){if(Ut)for(ee=P.call(X.ownerDocument);X.firstChild;)ee.appendChild(X.firstChild);else ee=X;return(U.shadowroot||U.shadowrootmode)&&(ee=_.call(i,ee,!0)),ee}let me=ae?X.outerHTML:X.innerHTML;return ae&&H["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&oe(tm,X.ownerDocument.doctype.name)&&(me="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+me),At&&Ss([$,E,k],or=>{me=wn(me,or," ")}),C&&Ee?C.createHTML(me):me},e.setConfig=function(){let lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wo(lt),It=!0},e.clearConfig=function(){wi=null,It=!1},e.isValidAttribute=function(lt,q,X){wi||wo({});const it=Vt(lt),Ot=Vt(q);return Ru(it,Ot,X)},e.addHook=function(lt,q){typeof q=="function"&&_n(S[lt],q)},e.removeHook=function(lt,q){if(q!==void 0){const X=e2(S[lt],q);return X===-1?void 0:r2(S[lt],X,1)[0]}return Xf(S[lt])},e.removeHooks=function(lt){S[lt]=[]},e.removeAllHooks=function(){S=rp()},e}var Di=em(),rm=Object.defineProperty,m=(t,e)=>rm(t,"name",{value:e,configurable:!0}),x2=(t,e)=>{for(var r in e)rm(t,r,{get:e[r],enumerable:!0})},dr={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},G={trace:m((...t)=>{},"trace"),debug:m((...t)=>{},"debug"),info:m((...t)=>{},"info"),warn:m((...t)=>{},"warn"),error:m((...t)=>{},"error"),fatal:m((...t)=>{},"fatal")},xh=m(function(t="fatal"){let e=dr.fatal;typeof t=="string"?t.toLowerCase()in dr&&(e=dr[t]):typeof t=="number"&&(e=t),G.trace=()=>{},G.debug=()=>{},G.info=()=>{},G.warn=()=>{},G.error=()=>{},G.fatal=()=>{},e<=dr.fatal&&(G.fatal=console.error?console.error.bind(console,Ae("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Ae("FATAL"))),e<=dr.error&&(G.error=console.error?console.error.bind(console,Ae("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Ae("ERROR"))),e<=dr.warn&&(G.warn=console.warn?console.warn.bind(console,Ae("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Ae("WARN"))),e<=dr.info&&(G.info=console.info?console.info.bind(console,Ae("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Ae("INFO"))),e<=dr.debug&&(G.debug=console.debug?console.debug.bind(console,Ae("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ae("DEBUG"))),e<=dr.trace&&(G.trace=console.debug?console.debug.bind(console,Ae("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ae("TRACE")))},"setLogLevel"),Ae=m(t=>`%c${Ww().format("ss.SSS")} : ${t} : `,"format"),im=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Hn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,_2=/\s*%%.*\n/gm,Ri,nm=(Ri=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},m(Ri,"UnknownDiagramError"),Ri),si={},_h=m(function(t,e){t=t.replace(im,"").replace(Hn,"").replace(_2,`
`);for(const[r,{detector:i}]of Object.entries(si))if(i(t,e))return r;throw new nm(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),uc=m((...t)=>{for(const{id:e,detector:r,loader:i}of t)sm(e,r,i)},"registerLazyLoadedDiagrams"),sm=m((t,e,r)=>{si[t]&&G.warn(`Detector with key ${t} already exists. Overwriting.`),si[t]={detector:e,loader:r},G.debug(`Detector with key ${t} added${r?" with loader":""}`)},"addDetector"),w2=m(t=>si[t].loader,"getDiagramLoader"),dc=m((t,e,{depth:r=2,clobber:i=!1}={})=>{const n={depth:r,clobber:i};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>dc(t,s,n)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=dc(t[s],e[s],{depth:r-1,clobber:i})):(i||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),te=dc,Ua="#ffffff",Va="#f2f2f2",ce=m((t,e)=>e?z(t,{s:-40,l:10}):z(t,{s:-40,l:-10}),"mkBorder"),Mi,v2=(Mi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||z(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||z(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ce(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ce(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ce(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ce(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||J(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||J(this.tertiaryColor),this.lineColor=this.lineColor||J(this.background),this.arrowheadColor=this.arrowheadColor||J(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ht(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||J(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||tt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||ht(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ht(this.mainBkg,10)):(this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.darkMode)for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=ht(this["cScale"+r],75);else for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScale"+r]=ht(this["cScale"+r],25);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleInv"+r]=this["cScaleInv"+r]||J(this["cScale"+r]);for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this.darkMode?this["cScalePeer"+r]=this["cScalePeer"+r]||tt(this["cScale"+r],10):this["cScalePeer"+r]=this["cScalePeer"+r]||ht(this["cScale"+r],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let r=0;r<this.THEME_COLOR_LIMIT;r++)this["cScaleLabel"+r]=this["cScaleLabel"+r]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let r=0;r<5;r++)this["surface"+r]=this["surface"+r]||z(this.mainBkg,{h:180,s:-15,l:e*(5+r*3)}),this["surfacePeer"+r]=this["surfacePeer"+r]||z(this.mainBkg,{h:180,s:-15,l:e*(8+r*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||z(this.primaryColor,{h:64}),this.fillType3=this.fillType3||z(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||z(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||z(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||z(this.primaryColor,{h:128}),this.fillType7=this.fillType7||z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-10}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||os(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ua,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Va}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Mi,"Theme"),Mi),C2=m(t=>{const e=new v2;return e.calculate(t),e},"getThemeVariables"),$i,S2=($i=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=tt(this.primaryColor,16),this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=J(this.background),this.secondaryBorderColor=ce(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ce(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=tt(J("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=qn(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ht("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ht(this.sectionBkgColor,10),this.taskBorderColor=qn(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=qn(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||ht(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=tt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=tt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=tt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScalePeer"+e]=this["cScalePeer"+e]||tt(this["cScale"+e],10);for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||z(this.mainBkg,{h:30,s:-30,l:-(-10+e*4)}),this["surfacePeer"+e]=this["surfacePeer"+e]||z(this.mainBkg,{h:30,s:-30,l:-(-7+e*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||os(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ht(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=tt(this.secondaryColor,20),this.git1=tt(this.pie2||this.secondaryColor,20),this.git2=tt(this.pie3||this.tertiaryColor,20),this.git3=tt(this.pie4||z(this.primaryColor,{h:-30}),20),this.git4=tt(this.pie5||z(this.primaryColor,{h:-60}),20),this.git5=tt(this.pie6||z(this.primaryColor,{h:-90}),10),this.git6=tt(this.pie7||z(this.primaryColor,{h:60}),10),this.git7=tt(this.pie8||z(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||tt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||tt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m($i,"Theme"),$i),k2=m(t=>{const e=new S2;return e.calculate(t),e},"getThemeVariables"),Ii,T2=(Ii=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=z(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=ce(this.primaryColor,this.darkMode),this.secondaryBorderColor=ce(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ce(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=qn(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||z(this["cScale"+e],{h:180});for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||z(this.mainBkg,{h:30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||z(this.mainBkg,{h:30,l:-(7+e*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||J(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||J(this.labelTextColor);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||z(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||z(this.primaryColor,{l:-10}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||z(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||os(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||ht(J(this.git0),25),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ua,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Va}calculate(e){if(Object.keys(this).forEach(i=>{this[i]==="calculated"&&(this[i]=void 0)}),typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Ii,"Theme"),Ii),E2=m(t=>{const e=new T2;return e.calculate(t),e},"getThemeVariables"),Oi,A2=(Oi=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=tt("#cde498",10),this.primaryBorderColor=ce(this.primaryColor,this.darkMode),this.secondaryBorderColor=ce(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ce(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.primaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=ht(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||z(this.primaryColor,{h:30}),this.cScale4=this.cScale4||z(this.primaryColor,{h:60}),this.cScale5=this.cScale5||z(this.primaryColor,{h:90}),this.cScale6=this.cScale6||z(this.primaryColor,{h:120}),this.cScale7=this.cScale7||z(this.primaryColor,{h:150}),this.cScale8=this.cScale8||z(this.primaryColor,{h:210}),this.cScale9=this.cScale9||z(this.primaryColor,{h:270}),this.cScale10=this.cScale10||z(this.primaryColor,{h:300}),this.cScale11=this.cScale11||z(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ht(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ht(this.tertiaryColor,40);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScale"+e]=ht(this["cScale"+e],10),this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],25);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||z(this["cScale"+e],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||z(this.mainBkg,{h:30,s:-30,l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||z(this.mainBkg,{h:30,s:-30,l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||tt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||z(this.primaryColor,{l:-30}),this.pie5=this.pie5||z(this.secondaryColor,{l:-30}),this.pie6=this.pie6||z(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||z(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||z(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||z(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||z(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||z(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||z(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||os(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||z(this.primaryColor,{h:-30}),this.git4=this.git4||z(this.primaryColor,{h:-60}),this.git5=this.git5||z(this.primaryColor,{h:-90}),this.git6=this.git6||z(this.primaryColor,{h:60}),this.git7=this.git7||z(this.primaryColor,{h:120}),this.darkMode?(this.git0=tt(this.git0,25),this.git1=tt(this.git1,25),this.git2=tt(this.git2,25),this.git3=tt(this.git3,25),this.git4=tt(this.git4,25),this.git5=tt(this.git5,25),this.git6=tt(this.git6,25),this.git7=tt(this.git7,25)):(this.git0=ht(this.git0,25),this.git1=ht(this.git1,25),this.git2=ht(this.git2,25),this.git3=ht(this.git3,25),this.git4=ht(this.git4,25),this.git5=ht(this.git5,25),this.git6=ht(this.git6,25),this.git7=ht(this.git7,25)),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||J(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||J(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ua,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Va}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Oi,"Theme"),Oi),L2=m(t=>{const e=new A2;return e.calculate(t),e},"getThemeVariables"),Pi,B2=(Pi=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=tt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=z(this.primaryColor,{h:-160}),this.primaryBorderColor=ce(this.primaryColor,this.darkMode),this.secondaryBorderColor=ce(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ce(this.tertiaryColor,this.darkMode),this.primaryTextColor=J(this.primaryColor),this.secondaryTextColor=J(this.secondaryColor),this.tertiaryTextColor=J(this.tertiaryColor),this.lineColor=J(this.background),this.textColor=J(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||tt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=tt(this.contrast,55),this.border2=this.contrast,this.actorBorder=tt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleInv"+e]=this["cScaleInv"+e]||J(this["cScale"+e]);for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this.darkMode?this["cScalePeer"+e]=this["cScalePeer"+e]||tt(this["cScale"+e],10):this["cScalePeer"+e]=this["cScalePeer"+e]||ht(this["cScale"+e],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["cScaleLabel"+e]=this["cScaleLabel"+e]||this.scaleLabelColor;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||z(this.mainBkg,{l:-(5+e*5)}),this["surfacePeer"+e]=this["surfacePeer"+e]||z(this.mainBkg,{l:-(8+e*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=tt(this.contrast,30),this.sectionBkgColor2=tt(this.contrast,30),this.taskBorderColor=ht(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=tt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ht(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=z(this.primaryColor,{h:64}),this.fillType3=z(this.secondaryColor,{h:64}),this.fillType4=z(this.primaryColor,{h:-64}),this.fillType5=z(this.secondaryColor,{h:-64}),this.fillType6=z(this.primaryColor,{h:128}),this.fillType7=z(this.secondaryColor,{h:128});for(let e=0;e<this.THEME_COLOR_LIMIT;e++)this["pie"+e]=this["cScale"+e];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||z(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||z(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||z(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||z(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||z(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||z(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||os(this.quadrant1Fill)?tt(this.quadrant1Fill):ht(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ht(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||z(this.primaryColor,{h:-30}),this.git4=this.pie5||z(this.primaryColor,{h:-60}),this.git5=this.pie6||z(this.primaryColor,{h:-90}),this.git6=this.pie7||z(this.primaryColor,{h:60}),this.git7=this.pie8||z(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||J(this.git0),this.gitInv1=this.gitInv1||J(this.git1),this.gitInv2=this.gitInv2||J(this.git2),this.gitInv3=this.gitInv3||J(this.git3),this.gitInv4=this.gitInv4||J(this.git4),this.gitInv5=this.gitInv5||J(this.git5),this.gitInv6=this.gitInv6||J(this.git6),this.gitInv7=this.gitInv7||J(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ua,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Va}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(i=>{this[i]=e[i]}),this.updateColors(),r.forEach(i=>{this[i]=e[i]})}},m(Pi,"Theme"),Pi),R2=m(t=>{const e=new B2;return e.calculate(t),e},"getThemeVariables"),xr={base:{getThemeVariables:C2},dark:{getThemeVariables:k2},default:{getThemeVariables:E2},forest:{getThemeVariables:L2},neutral:{getThemeVariables:R2}},Ge={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},am={...Ge,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:xr.default.getThemeVariables(),sequence:{...Ge.sequence,messageFont:m(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:m(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:m(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ge.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ge.c4,useWidth:void 0,personFont:m(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...Ge.flowchart,inheritDir:!1},external_personFont:m(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:m(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:m(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:m(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:m(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:m(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:m(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:m(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:m(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:m(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:m(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:m(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:m(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:m(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:m(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:m(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:m(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:m(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:m(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:m(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:m(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ge.pie,useWidth:984},xyChart:{...Ge.xyChart,useWidth:void 0},requirement:{...Ge.requirement,useWidth:void 0},packet:{...Ge.packet},radar:{...Ge.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},om=m((t,e="")=>Object.keys(t).reduce((r,i)=>Array.isArray(t[i])?r:typeof t[i]=="object"&&t[i]!==null?[...r,e+i,...om(t[i],"")]:[...r,e+i],[]),"keyify"),M2=new Set(om(am,"")),lm=am,ta=m(t=>{if(G.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>ta(e));return}for(const e of Object.keys(t)){if(G.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!M2.has(e)||t[e]==null){G.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){G.debug("sanitizing object",e),ta(t[e]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)e.includes(i)&&(G.debug("sanitizing css option",e),t[e]=$2(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const r=t.themeVariables[e];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}G.debug("After sanitization",t)}},"sanitizeDirective"),$2=m(t=>{let e=0,r=0;for(const i of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?e++:i==="}"&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),qi=Object.freeze(lm),be=te({},qi),cm,Hi=[],zn=te({},qi),Ga=m((t,e)=>{let r=te({},t),i={};for(const n of e)dm(n),i=te(i,n);if(r=te(r,i),i.theme&&i.theme in xr){const n=te({},cm),s=te(n.themeVariables||{},i.themeVariables);r.theme&&r.theme in xr&&(r.themeVariables=xr[r.theme].getThemeVariables(s))}return zn=r,fm(zn),zn},"updateCurrentConfig"),I2=m(t=>(be=te({},qi),be=te(be,t),t.theme&&xr[t.theme]&&(be.themeVariables=xr[t.theme].getThemeVariables(t.themeVariables)),Ga(be,Hi),be),"setSiteConfig"),O2=m(t=>{cm=te({},t)},"saveConfigFromInitialize"),P2=m(t=>(be=te(be,t),Ga(be,Hi),be),"updateSiteConfig"),hm=m(()=>te({},be),"getSiteConfig"),um=m(t=>(fm(t),te(zn,t),we()),"setConfig"),we=m(()=>te({},zn),"getConfig"),dm=m(t=>{t&&(["secure",...be.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(G.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&dm(t[e])}))},"sanitize"),F2=m(t=>{ta(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),Hi.push(t),Ga(be,Hi)},"addDirective"),ea=m((t=be)=>{Hi=[],Ga(t,Hi)},"reset"),N2={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ip={},j2=m(t=>{ip[t]||(G.warn(N2[t]),ip[t]=!0)},"issueWarning"),fm=m(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&j2("LAZY_LOAD_DEPRECATED")},"checkConfig"),ls=/<br\s*\/?>/gi,D2=m(t=>t?mm(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),q2=(()=>{let t=!1;return()=>{t||(pm(),t=!0)}})();function pm(){const t="data-temp-href-target";Di.addHook("beforeSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),Di.addHook("afterSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}m(pm,"setupDompurifyHooks");var gm=m(t=>(q2(),Di.sanitize(t)),"removeScript"),np=m((t,e)=>{if(e.flowchart?.htmlLabels!==!1){const r=e.securityLevel;r==="antiscript"||r==="strict"?t=gm(t):r!=="loose"&&(t=mm(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=U2(t))}return t},"sanitizeMore"),ai=m((t,e)=>t&&(e.dompurifyConfig?t=Di.sanitize(np(t,e),e.dompurifyConfig).toString():t=Di.sanitize(np(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),H2=m((t,e)=>typeof t=="string"?ai(t,e):t.flat().map(r=>ai(r,e)),"sanitizeTextOrArray"),z2=m(t=>ls.test(t),"hasBreaks"),W2=m(t=>t.split(ls),"splitBreaks"),U2=m(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),mm=m(t=>t.replace(ls,"#br#"),"breakToPlaceholder"),ym=m(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),Wt=m(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),V2=m(function(...t){const e=t.filter(r=>!isNaN(r));return Math.max(...e)},"getMax"),G2=m(function(...t){const e=t.filter(r=>!isNaN(r));return Math.min(...e)},"getMin"),sp=m(function(t){const e=t.split(/(,)/),r=[];for(let i=0;i<e.length;i++){let n=e[i];if(n===","&&i>0&&i+1<e.length){const s=e[i-1],o=e[i+1];Y2(s,o)&&(n=s+","+o,i++,r.pop())}r.push(X2(n))}return r.join("")},"parseGenericTypes"),fc=m((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),Y2=m((t,e)=>{const r=fc(t,"~"),i=fc(e,"~");return r===1&&i===1},"shouldCombineSets"),X2=m(t=>{const e=fc(t,"~");let r=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),r=!0);const i=[...t];let n=i.indexOf("~"),s=i.lastIndexOf("~");for(;n!==-1&&s!==-1&&n!==s;)i[n]="<",i[s]=">",n=i.indexOf("~"),s=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},"processSet"),ap=m(()=>window.MathMLElement!==void 0,"isMathMLSupported"),pc=/\$\$(.*)\$\$/g,zi=m(t=>(t.match(pc)?.length??0)>0,"hasKatex"),UO=m(async(t,e)=>{t=await wh(t,e);const r=document.createElement("div");r.innerHTML=t,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);const n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n},"calculateMathMLDimensions"),wh=m(async(t,e)=>{if(!zi(t))return t;if(!(ap()||e.legacyMathML||e.forceLegacyMathML))return t.replace(pc,"MathML is unsupported in this environment.");{const{default:r}=await Et(async()=>{const{default:n}=await import("./chunk-Ckw_AuqY.js").then(s=>s.k);return{default:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8])),i=e.forceLegacyMathML||!ap()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(ls).map(n=>zi(n)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${n}</div>`:`<div>${n}</div>`).join("").replace(pc,(n,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatex"),Zi={getRows:D2,sanitizeText:ai,sanitizeTextOrArray:H2,hasBreaks:z2,splitBreaks:W2,lineBreakRegex:ls,removeScript:gm,getUrl:ym,evaluate:Wt,getMax:V2,getMin:G2},J2=m(function(t,e){for(let r of e)t.attr(r[0],r[1])},"d3Attrs"),K2=m(function(t,e,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${e}px;`)):(i.set("height",t),i.set("width",e)),i},"calculateSvgSizeAttrs"),bm=m(function(t,e,r,i){const n=K2(e,r,i);J2(t,n)},"configureSvgSize"),Z2=m(function(t,e,r,i){const n=e.node().getBBox(),s=n.width,o=n.height;G.info(`SVG bounds: ${s}x${o}`,n);let a=0,l=0;G.info(`Graph bounds: ${a}x${l}`,t),a=s+r*2,l=o+r*2,G.info(`Calculated bounds: ${a}x${l}`),bm(e,l,a,i);const c=`${n.x-r} ${n.y-r} ${n.width+2*r} ${n.height+2*r}`;e.attr("viewBox",c)},"setupGraphViewbox"),Ds={},Q2=m((t,e,r)=>{let i="";return t in Ds&&Ds[t]?i=Ds[t](r):G.warn(`No theme found for ${t}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }
  @keyframes edge-animation-frame {
    from {
      stroke-dashoffset: 0;
    }
  }
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  & .edge-animation-slow {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 50s linear infinite;
    stroke-linecap: round;
  }
  & .edge-animation-fast {
    stroke-dasharray: 9,5 !important;
    stroke-dashoffset: 900;
    animation: dash 20s linear infinite;
    stroke-linecap: round;
  }
  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${i}

  ${e}
`},"getStyles"),tv=m((t,e)=>{e!==void 0&&(Ds[t]=e)},"addStylesForDiagram"),ev=Q2,xm={};x2(xm,{clear:()=>rv,getAccDescription:()=>av,getAccTitle:()=>nv,getDiagramTitle:()=>lv,setAccDescription:()=>sv,setAccTitle:()=>iv,setDiagramTitle:()=>ov});var vh="",Ch="",Sh="",kh=m(t=>ai(t,we()),"sanitizeText"),rv=m(()=>{vh="",Sh="",Ch=""},"clear"),iv=m(t=>{vh=kh(t).replace(/^\s+/g,"")},"setAccTitle"),nv=m(()=>vh,"getAccTitle"),sv=m(t=>{Sh=kh(t).replace(/\n\s+/g,`
`)},"setAccDescription"),av=m(()=>Sh,"getAccDescription"),ov=m(t=>{Ch=kh(t)},"setDiagramTitle"),lv=m(()=>Ch,"getDiagramTitle"),op=G,cv=xh,St=we,VO=um,GO=qi,Ya=m(t=>ai(t,St()),"sanitizeText"),hv=Z2,uv=m(()=>xm,"getCommonDb"),ra={},ia=m((t,e,r)=>{ra[t]&&op.warn(`Diagram with id ${t} already registered. Overwriting.`),ra[t]=e,r&&sm(t,r),tv(t,e.styles),e.injectUtils?.(op,cv,St,Ya,hv,uv(),()=>{})},"registerDiagram"),gc=m(t=>{if(t in ra)return ra[t];throw new dv(t)},"getDiagram"),Fi,dv=(Fi=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},m(Fi,"DiagramNotFoundError"),Fi);function Th(t){return typeof t>"u"||t===null}m(Th,"isNothing");function _m(t){return typeof t=="object"&&t!==null}m(_m,"isObject");function wm(t){return Array.isArray(t)?t:Th(t)?[]:[t]}m(wm,"toArray");function vm(t,e){var r,i,n,s;if(e)for(s=Object.keys(e),r=0,i=s.length;r<i;r+=1)n=s[r],t[n]=e[n];return t}m(vm,"extend");function Cm(t,e){var r="",i;for(i=0;i<e;i+=1)r+=t;return r}m(Cm,"repeat");function Sm(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}m(Sm,"isNegativeZero");var fv=Th,pv=_m,gv=wm,mv=Cm,yv=Sm,bv=vm,zt={isNothing:fv,isObject:pv,toArray:gv,repeat:mv,isNegativeZero:yv,extend:bv};function Eh(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),i+" "+r):i}m(Eh,"formatError");function Wi(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Eh(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}m(Wi,"YAMLException$1");Wi.prototype=Object.create(Error.prototype);Wi.prototype.constructor=Wi;Wi.prototype.toString=m(function(e){return this.name+": "+Eh(this,e)},"toString");var xe=Wi;function qs(t,e,r,i,n){var s="",o="",a=Math.floor(n/2)-1;return i-e>a&&(s=" ... ",e=i-a+s.length),r-i>a&&(o=" ...",r=i+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"")+o,pos:i-e+s.length}}m(qs,"getLine");function Hs(t,e){return zt.repeat(" ",e-t.length)+t}m(Hs,"padStart");function km(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],s,o=-1;s=r.exec(t.buffer);)n.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var a="",l,c,h=Math.min(t.line+e.linesAfter,n.length).toString().length,u=e.maxLength-(e.indent+h+3);for(l=1;l<=e.linesBefore&&!(o-l<0);l++)c=qs(t.buffer,i[o-l],n[o-l],t.position-(i[o]-i[o-l]),u),a=zt.repeat(" ",e.indent)+Hs((t.line-l+1).toString(),h)+" | "+c.str+`
`+a;for(c=qs(t.buffer,i[o],n[o],t.position,u),a+=zt.repeat(" ",e.indent)+Hs((t.line+1).toString(),h)+" | "+c.str+`
`,a+=zt.repeat("-",e.indent+h+3+c.pos)+`^
`,l=1;l<=e.linesAfter&&!(o+l>=n.length);l++)c=qs(t.buffer,i[o+l],n[o+l],t.position-(i[o]-i[o+l]),u),a+=zt.repeat(" ",e.indent)+Hs((t.line+l+1).toString(),h)+" | "+c.str+`
`;return a.replace(/\n$/,"")}m(km,"makeSnippet");var xv=km,_v=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],wv=["scalar","sequence","mapping"];function Tm(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(i){e[String(i)]=r})}),e}m(Tm,"compileStyleAliases");function Em(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(_v.indexOf(r)===-1)throw new xe('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Tm(e.styleAliases||null),wv.indexOf(this.kind)===-1)throw new xe('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}m(Em,"Type$1");var ne=Em;function mc(t,e){var r=[];return t[e].forEach(function(i){var n=r.length;r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=o)}),r[n]=i}),r}m(mc,"compileList");function Am(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function i(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(m(i,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(i);return t}m(Am,"compileMap");function na(t){return this.extend(t)}m(na,"Schema$1");na.prototype.extend=m(function(e){var r=[],i=[];if(e instanceof ne)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new xe("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof ne))throw new xe("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new xe("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new xe("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof ne))throw new xe("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(na.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=mc(n,"implicit"),n.compiledExplicit=mc(n,"explicit"),n.compiledTypeMap=Am(n.compiledImplicit,n.compiledExplicit),n},"extend");var vv=na,Cv=new ne("tag:yaml.org,2002:str",{kind:"scalar",construct:m(function(t){return t!==null?t:""},"construct")}),Sv=new ne("tag:yaml.org,2002:seq",{kind:"sequence",construct:m(function(t){return t!==null?t:[]},"construct")}),kv=new ne("tag:yaml.org,2002:map",{kind:"mapping",construct:m(function(t){return t!==null?t:{}},"construct")}),Tv=new vv({explicit:[Cv,Sv,kv]});function Lm(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}m(Lm,"resolveYamlNull");function Bm(){return null}m(Bm,"constructYamlNull");function Rm(t){return t===null}m(Rm,"isNull");var Ev=new ne("tag:yaml.org,2002:null",{kind:"scalar",resolve:Lm,construct:Bm,predicate:Rm,represent:{canonical:m(function(){return"~"},"canonical"),lowercase:m(function(){return"null"},"lowercase"),uppercase:m(function(){return"NULL"},"uppercase"),camelcase:m(function(){return"Null"},"camelcase"),empty:m(function(){return""},"empty")},defaultStyle:"lowercase"});function Mm(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}m(Mm,"resolveYamlBoolean");function $m(t){return t==="true"||t==="True"||t==="TRUE"}m($m,"constructYamlBoolean");function Im(t){return Object.prototype.toString.call(t)==="[object Boolean]"}m(Im,"isBoolean");var Av=new ne("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Mm,construct:$m,predicate:Im,represent:{lowercase:m(function(t){return t?"true":"false"},"lowercase"),uppercase:m(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:m(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Om(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}m(Om,"isHexCode");function Pm(t){return 48<=t&&t<=55}m(Pm,"isOctCode");function Fm(t){return 48<=t&&t<=57}m(Fm,"isDecCode");function Nm(t){if(t===null)return!1;var e=t.length,r=0,i=!1,n;if(!e)return!1;if(n=t[r],(n==="-"||n==="+")&&(n=t[++r]),n==="0"){if(r+1===e)return!0;if(n=t[++r],n==="b"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!Om(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<e;r++)if(n=t[r],n!=="_"){if(!Pm(t.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<e;r++)if(n=t[r],n!=="_"){if(!Fm(t.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}m(Nm,"resolveYamlInteger");function jm(t){var e=t,r=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}m(jm,"constructYamlInteger");function Dm(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!zt.isNegativeZero(t)}m(Dm,"isInteger");var Lv=new ne("tag:yaml.org,2002:int",{kind:"scalar",resolve:Nm,construct:jm,predicate:Dm,represent:{binary:m(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:m(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:m(function(t){return t.toString(10)},"decimal"),hexadecimal:m(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Bv=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qm(t){return!(t===null||!Bv.test(t)||t[t.length-1]==="_")}m(qm,"resolveYamlFloat");function Hm(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}m(Hm,"constructYamlFloat");var Rv=/^[-+]?[0-9]+e/;function zm(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(zt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Rv.test(r)?r.replace("e",".e"):r}m(zm,"representYamlFloat");function Wm(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||zt.isNegativeZero(t))}m(Wm,"isFloat");var Mv=new ne("tag:yaml.org,2002:float",{kind:"scalar",resolve:qm,construct:Hm,predicate:Wm,represent:zm,defaultStyle:"lowercase"}),Um=Tv.extend({implicit:[Ev,Av,Lv,Mv]}),$v=Um,Vm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Gm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ym(t){return t===null?!1:Vm.exec(t)!==null||Gm.exec(t)!==null}m(Ym,"resolveYamlTimestamp");function Xm(t){var e,r,i,n,s,o,a,l=0,c=null,h,u,d;if(e=Vm.exec(t),e===null&&(e=Gm.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(r,i,n));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(h=+e[10],u=+(e[11]||0),c=(h*60+u)*6e4,e[9]==="-"&&(c=-c)),d=new Date(Date.UTC(r,i,n,s,o,a,l)),c&&d.setTime(d.getTime()-c),d}m(Xm,"constructYamlTimestamp");function Jm(t){return t.toISOString()}m(Jm,"representYamlTimestamp");var Iv=new ne("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Ym,construct:Xm,instanceOf:Date,represent:Jm});function Km(t){return t==="<<"||t===null}m(Km,"resolveYamlMerge");var Ov=new ne("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Km}),Ah=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Zm(t){if(t===null)return!1;var e,r,i=0,n=t.length,s=Ah;for(r=0;r<n;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}m(Zm,"resolveYamlBinary");function Qm(t){var e,r,i=t.replace(/[\r\n=]/g,""),n=i.length,s=Ah,o=0,a=[];for(e=0;e<n;e++)e%4===0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return r=n%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}m(Qm,"constructYamlBinary");function t0(t){var e="",r=0,i,n,s=t.length,o=Ah;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[i];return n=s%3,n===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):n===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):n===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}m(t0,"representYamlBinary");function e0(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}m(e0,"isBinary");var Pv=new ne("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Zm,construct:Qm,predicate:e0,represent:t0}),Fv=Object.prototype.hasOwnProperty,Nv=Object.prototype.toString;function r0(t){if(t===null)return!0;var e=[],r,i,n,s,o,a=t;for(r=0,i=a.length;r<i;r+=1){if(n=a[r],o=!1,Nv.call(n)!=="[object Object]")return!1;for(s in n)if(Fv.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}m(r0,"resolveYamlOmap");function i0(t){return t!==null?t:[]}m(i0,"constructYamlOmap");var jv=new ne("tag:yaml.org,2002:omap",{kind:"sequence",resolve:r0,construct:i0}),Dv=Object.prototype.toString;function n0(t){if(t===null)return!0;var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(i=o[e],Dv.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}m(n0,"resolveYamlPairs");function s0(t){if(t===null)return[];var e,r,i,n,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)i=o[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}m(s0,"constructYamlPairs");var qv=new ne("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:n0,construct:s0}),Hv=Object.prototype.hasOwnProperty;function a0(t){if(t===null)return!0;var e,r=t;for(e in r)if(Hv.call(r,e)&&r[e]!==null)return!1;return!0}m(a0,"resolveYamlSet");function o0(t){return t!==null?t:{}}m(o0,"constructYamlSet");var zv=new ne("tag:yaml.org,2002:set",{kind:"mapping",resolve:a0,construct:o0}),l0=$v.extend({implicit:[Iv,Ov],explicit:[Pv,jv,qv,zv]}),$r=Object.prototype.hasOwnProperty,sa=1,c0=2,h0=3,aa=4,Yl=1,Wv=2,lp=3,Uv=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Vv=/[\x85\u2028\u2029]/,Gv=/[,\[\]\{\}]/,u0=/^(?:!|!!|![a-z\-]+!)$/i,d0=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function yc(t){return Object.prototype.toString.call(t)}m(yc,"_class");function qe(t){return t===10||t===13}m(qe,"is_EOL");function Mr(t){return t===9||t===32}m(Mr,"is_WHITE_SPACE");function he(t){return t===9||t===32||t===10||t===13}m(he,"is_WS_OR_EOL");function Zr(t){return t===44||t===91||t===93||t===123||t===125}m(Zr,"is_FLOW_INDICATOR");function f0(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}m(f0,"fromHexCode");function p0(t){return t===120?2:t===117?4:t===85?8:0}m(p0,"escapedHexLen");function g0(t){return 48<=t&&t<=57?t-48:-1}m(g0,"fromDecimalCode");function bc(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}m(bc,"simpleEscapeSequence");function m0(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}m(m0,"charFromCodepoint");var y0=new Array(256),b0=new Array(256);for(Gr=0;Gr<256;Gr++)y0[Gr]=bc(Gr)?1:0,b0[Gr]=bc(Gr);var Gr;function x0(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||l0,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}m(x0,"State$1");function Lh(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=xv(r),new xe(e,r)}m(Lh,"generateError");function ot(t,e){throw Lh(t,e)}m(ot,"throwError");function Vn(t,e){t.onWarning&&t.onWarning.call(null,Lh(t,e))}m(Vn,"throwWarning");var cp={YAML:m(function(e,r,i){var n,s,o;e.version!==null&&ot(e,"duplication of %YAML directive"),i.length!==1&&ot(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&ot(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&ot(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Vn(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:m(function(e,r,i){var n,s;i.length!==2&&ot(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],u0.test(n)||ot(e,"ill-formed tag handle (first argument) of the TAG directive"),$r.call(e.tagMap,n)&&ot(e,'there is a previously declared suffix for "'+n+'" tag handle'),d0.test(s)||ot(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ot(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function _r(t,e,r,i){var n,s,o,a;if(e<r){if(a=t.input.slice(e,r),i)for(n=0,s=a.length;n<s;n+=1)o=a.charCodeAt(n),o===9||32<=o&&o<=1114111||ot(t,"expected valid JSON character");else Uv.test(a)&&ot(t,"the stream contains non-printable characters");t.result+=a}}m(_r,"captureSegment");function xc(t,e,r,i){var n,s,o,a;for(zt.isObject(r)||ot(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),o=0,a=n.length;o<a;o+=1)s=n[o],$r.call(e,s)||(e[s]=r[s],i[s]=!0)}m(xc,"mergeMappings");function Qr(t,e,r,i,n,s,o,a,l){var c,h;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,h=n.length;c<h;c+=1)Array.isArray(n[c])&&ot(t,"nested arrays are not supported inside keys"),typeof n=="object"&&yc(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&yc(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,h=s.length;c<h;c+=1)xc(t,e,s[c],r);else xc(t,e,s,r);else!t.json&&!$r.call(r,n)&&$r.call(e,n)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=l||t.position,ot(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete r[n];return e}m(Qr,"storeMappingPair");function Xa(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ot(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}m(Xa,"readLineBreak");function Ft(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Mr(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(qe(n))for(Xa(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return r!==-1&&i!==0&&t.lineIndent<r&&Vn(t,"deficient indentation"),i}m(Ft,"skipSeparationSpace");function cs(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||he(r)))}m(cs,"testDocumentSeparator");function Ja(t,e){e===1?t.result+=" ":e>1&&(t.result+=zt.repeat(`
`,e-1))}m(Ja,"writeFoldedLines");function _0(t,e,r){var i,n,s,o,a,l,c,h,u=t.kind,d=t.result,f;if(f=t.input.charCodeAt(t.position),he(f)||Zr(f)||f===35||f===38||f===42||f===33||f===124||f===62||f===39||f===34||f===37||f===64||f===96||(f===63||f===45)&&(n=t.input.charCodeAt(t.position+1),he(n)||r&&Zr(n)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;f!==0;){if(f===58){if(n=t.input.charCodeAt(t.position+1),he(n)||r&&Zr(n))break}else if(f===35){if(i=t.input.charCodeAt(t.position-1),he(i))break}else{if(t.position===t.lineStart&&cs(t)||r&&Zr(f))break;if(qe(f))if(l=t.line,c=t.lineStart,h=t.lineIndent,Ft(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=l,t.lineStart=c,t.lineIndent=h;break}}a&&(_r(t,s,o,!1),Ja(t,t.line-l),s=o=t.position,a=!1),Mr(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}return _r(t,s,o,!1),t.result?!0:(t.kind=u,t.result=d,!1)}m(_0,"readPlainScalar");function w0(t,e){var r,i,n;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(_r(t,i,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)i=t.position,t.position++,n=t.position;else return!0;else qe(r)?(_r(t,i,n,!0),Ja(t,Ft(t,!1,e)),i=n=t.position):t.position===t.lineStart&&cs(t)?ot(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);ot(t,"unexpected end of the stream within a single quoted scalar")}m(w0,"readSingleQuotedScalar");function v0(t,e){var r,i,n,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return _r(t,r,t.position,!0),t.position++,!0;if(a===92){if(_r(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),qe(a))Ft(t,!1,e);else if(a<256&&y0[a])t.result+=b0[a],t.position++;else if((o=p0(a))>0){for(n=o,s=0;n>0;n--)a=t.input.charCodeAt(++t.position),(o=f0(a))>=0?s=(s<<4)+o:ot(t,"expected hexadecimal character");t.result+=m0(s),t.position++}else ot(t,"unknown escape sequence");r=i=t.position}else qe(a)?(_r(t,r,i,!0),Ja(t,Ft(t,!1,e)),r=i=t.position):t.position===t.lineStart&&cs(t)?ot(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}ot(t,"unexpected end of the stream within a double quoted scalar")}m(v0,"readDoubleQuotedScalar");function C0(t,e){var r=!0,i,n,s,o=t.tag,a,l=t.anchor,c,h,u,d,f,p=Object.create(null),g,b,x,w;if(w=t.input.charCodeAt(t.position),w===91)h=93,f=!1,a=[];else if(w===123)h=125,f=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),w=t.input.charCodeAt(++t.position);w!==0;){if(Ft(t,!0,e),w=t.input.charCodeAt(t.position),w===h)return t.position++,t.tag=o,t.anchor=l,t.kind=f?"mapping":"sequence",t.result=a,!0;r?w===44&&ot(t,"expected the node content, but found ','"):ot(t,"missed comma between flow collection entries"),b=g=x=null,u=d=!1,w===63&&(c=t.input.charCodeAt(t.position+1),he(c)&&(u=d=!0,t.position++,Ft(t,!0,e))),i=t.line,n=t.lineStart,s=t.position,oi(t,e,sa,!1,!0),b=t.tag,g=t.result,Ft(t,!0,e),w=t.input.charCodeAt(t.position),(d||t.line===i)&&w===58&&(u=!0,w=t.input.charCodeAt(++t.position),Ft(t,!0,e),oi(t,e,sa,!1,!0),x=t.result),f?Qr(t,a,p,b,g,x,i,n,s):u?a.push(Qr(t,null,p,b,g,x,i,n,s)):a.push(g),Ft(t,!0,e),w=t.input.charCodeAt(t.position),w===44?(r=!0,w=t.input.charCodeAt(++t.position)):r=!1}ot(t,"unexpected end of the stream within a flow collection")}m(C0,"readFlowCollection");function S0(t,e){var r,i,n=Yl,s=!1,o=!1,a=e,l=0,c=!1,h,u;if(u=t.input.charCodeAt(t.position),u===124)i=!1;else if(u===62)i=!0;else return!1;for(t.kind="scalar",t.result="";u!==0;)if(u=t.input.charCodeAt(++t.position),u===43||u===45)Yl===n?n=u===43?lp:Wv:ot(t,"repeat of a chomping mode identifier");else if((h=g0(u))>=0)h===0?ot(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ot(t,"repeat of an indentation width identifier"):(a=e+h-1,o=!0);else break;if(Mr(u)){do u=t.input.charCodeAt(++t.position);while(Mr(u));if(u===35)do u=t.input.charCodeAt(++t.position);while(!qe(u)&&u!==0)}for(;u!==0;){for(Xa(t),t.lineIndent=0,u=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&u===32;)t.lineIndent++,u=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),qe(u)){l++;continue}if(t.lineIndent<a){n===lp?t.result+=zt.repeat(`
`,s?1+l:l):n===Yl&&s&&(t.result+=`
`);break}for(i?Mr(u)?(c=!0,t.result+=zt.repeat(`
`,s?1+l:l)):c?(c=!1,t.result+=zt.repeat(`
`,l+1)):l===0?s&&(t.result+=" "):t.result+=zt.repeat(`
`,l):t.result+=zt.repeat(`
`,s?1+l:l),s=!0,o=!0,l=0,r=t.position;!qe(u)&&u!==0;)u=t.input.charCodeAt(++t.position);_r(t,r,t.position,!1)}return!0}m(S0,"readBlockScalar");function _c(t,e){var r,i=t.tag,n=t.anchor,s=[],o,a=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ot(t,"tab characters must not be used in indentation")),!(l!==45||(o=t.input.charCodeAt(t.position+1),!he(o))));){if(a=!0,t.position++,Ft(t,!0,-1)&&t.lineIndent<=e){s.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,oi(t,e,h0,!1,!0),s.push(t.result),Ft(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)ot(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=i,t.anchor=n,t.kind="sequence",t.result=s,!0):!1}m(_c,"readBlockSequence");function k0(t,e,r){var i,n,s,o,a,l,c=t.tag,h=t.anchor,u={},d=Object.create(null),f=null,p=null,g=null,b=!1,x=!1,w;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),w=t.input.charCodeAt(t.position);w!==0;){if(!b&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ot(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(w===63||w===58)&&he(i))w===63?(b&&(Qr(t,u,d,f,p,null,o,a,l),f=p=g=null),x=!0,b=!0,n=!0):b?(b=!1,n=!0):ot(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,w=i;else{if(o=t.line,a=t.lineStart,l=t.position,!oi(t,r,c0,!1,!0))break;if(t.line===s){for(w=t.input.charCodeAt(t.position);Mr(w);)w=t.input.charCodeAt(++t.position);if(w===58)w=t.input.charCodeAt(++t.position),he(w)||ot(t,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(Qr(t,u,d,f,p,null,o,a,l),f=p=g=null),x=!0,b=!1,n=!1,f=t.tag,p=t.result;else if(x)ot(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=h,!0}else if(x)ot(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=h,!0}if((t.line===s||t.lineIndent>e)&&(b&&(o=t.line,a=t.lineStart,l=t.position),oi(t,e,aa,!0,n)&&(b?p=t.result:g=t.result),b||(Qr(t,u,d,f,p,g,o,a,l),f=p=g=null),Ft(t,!0,-1),w=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&w!==0)ot(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return b&&Qr(t,u,d,f,p,null,o,a,l),x&&(t.tag=c,t.anchor=h,t.kind="mapping",t.result=u),x}m(k0,"readBlockMapping");function T0(t){var e,r=!1,i=!1,n,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ot(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(i=!0,n="!!",o=t.input.charCodeAt(++t.position)):n="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ot(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!he(o);)o===33&&(i?ot(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),u0.test(n)||ot(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),Gv.test(s)&&ot(t,"tag suffix cannot contain flow indicator characters")}s&&!d0.test(s)&&ot(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ot(t,"tag name is malformed: "+s)}return r?t.tag=s:$r.call(t.tagMap,n)?t.tag=t.tagMap[n]+s:n==="!"?t.tag="!"+s:n==="!!"?t.tag="tag:yaml.org,2002:"+s:ot(t,'undeclared tag handle "'+n+'"'),!0}m(T0,"readTagProperty");function E0(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ot(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!he(r)&&!Zr(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ot(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}m(E0,"readAnchorProperty");function A0(t){var e,r,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!he(i)&&!Zr(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&ot(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),$r.call(t.anchorMap,r)||ot(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ft(t,!0,-1),!0}m(A0,"readAlias");function oi(t,e,r,i,n){var s,o,a,l=1,c=!1,h=!1,u,d,f,p,g,b;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=aa===r||h0===r,i&&Ft(t,!0,-1)&&(c=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;T0(t)||E0(t);)Ft(t,!0,-1)?(c=!0,a=s,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):a=!1;if(a&&(a=c||n),(l===1||aa===r)&&(sa===r||c0===r?g=e:g=e+1,b=t.position-t.lineStart,l===1?a&&(_c(t,b)||k0(t,b,g))||C0(t,g)?h=!0:(o&&S0(t,g)||w0(t,g)||v0(t,g)?h=!0:A0(t)?(h=!0,(t.tag!==null||t.anchor!==null)&&ot(t,"alias node should not have any properties")):_0(t,g,sa===r)&&(h=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(h=a&&_c(t,b))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ot(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,d=t.implicitTypes.length;u<d;u+=1)if(p=t.implicitTypes[u],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if($r.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,f=t.typeMap.multi[t.kind||"fallback"],u=0,d=f.length;u<d;u+=1)if(t.tag.slice(0,f[u].tag.length)===f[u].tag){p=f[u];break}p||ot(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&ot(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ot(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||h}m(oi,"composeNode");function L0(t){var e=t.position,r,i,n,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Ft(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!he(o);)o=t.input.charCodeAt(++t.position);for(i=t.input.slice(r,t.position),n=[],i.length<1&&ot(t,"directive name must not be less than one character in length");o!==0;){for(;Mr(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!qe(o));break}if(qe(o))break;for(r=t.position;o!==0&&!he(o);)o=t.input.charCodeAt(++t.position);n.push(t.input.slice(r,t.position))}o!==0&&Xa(t),$r.call(cp,i)?cp[i](t,i,n):Vn(t,'unknown document directive "'+i+'"')}if(Ft(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ft(t,!0,-1)):s&&ot(t,"directives end mark is expected"),oi(t,t.lineIndent-1,aa,!1,!0),Ft(t,!0,-1),t.checkLineBreaks&&Vv.test(t.input.slice(e,t.position))&&Vn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cs(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ft(t,!0,-1));return}if(t.position<t.length-1)ot(t,"end of the stream or a document separator is expected");else return}m(L0,"readDocument");function Bh(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new x0(t,e),i=t.indexOf("\0");for(i!==-1&&(r.position=i,ot(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)L0(r);return r.documents}m(Bh,"loadDocuments");function Yv(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var i=Bh(t,r);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}m(Yv,"loadAll$1");function B0(t,e){var r=Bh(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new xe("expected a single document in the stream, but found more")}}m(B0,"load$1");var Xv=B0,Jv={load:Xv},R0=Object.prototype.toString,M0=Object.prototype.hasOwnProperty,Rh=65279,Kv=9,Gn=10,Zv=13,Qv=32,tC=33,eC=34,wc=35,rC=37,iC=38,nC=39,sC=42,$0=44,aC=45,oa=58,oC=61,lC=62,cC=63,hC=64,I0=91,O0=93,uC=96,P0=123,dC=124,F0=125,se={};se[0]="\\0";se[7]="\\a";se[8]="\\b";se[9]="\\t";se[10]="\\n";se[11]="\\v";se[12]="\\f";se[13]="\\r";se[27]="\\e";se[34]='\\"';se[92]="\\\\";se[133]="\\N";se[160]="\\_";se[8232]="\\L";se[8233]="\\P";var fC=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],pC=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function N0(t,e){var r,i,n,s,o,a,l;if(e===null)return{};for(r={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)o=i[n],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),l=t.compiledTypeMap.fallback[o],l&&M0.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[o]=a;return r}m(N0,"compileStyleMap");function j0(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else if(t<=4294967295)r="U",i=8;else throw new xe("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+zt.repeat("0",i-e.length)+e}m(j0,"encodeHex");var gC=1,Yn=2;function D0(t){this.schema=t.schema||l0,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=zt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=N0(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Yn:gC,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}m(D0,"State");function vc(t,e){for(var r=zt.repeat(" ",e),i=0,n=-1,s="",o,a=t.length;i<a;)n=t.indexOf(`
`,i),n===-1?(o=t.slice(i),i=a):(o=t.slice(i,n+1),i=n+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}m(vc,"indentString");function la(t,e){return`
`+zt.repeat(" ",t.indent*e)}m(la,"generateNextLine");function q0(t,e){var r,i,n;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(n=t.implicitTypes[r],n.resolve(e))return!0;return!1}m(q0,"testImplicitResolving");function Xn(t){return t===Qv||t===Kv}m(Xn,"isWhitespace");function Ui(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Rh||65536<=t&&t<=1114111}m(Ui,"isPrintable");function Cc(t){return Ui(t)&&t!==Rh&&t!==Zv&&t!==Gn}m(Cc,"isNsCharOrWhitespace");function Sc(t,e,r){var i=Cc(t),n=i&&!Xn(t);return(r?i:i&&t!==$0&&t!==I0&&t!==O0&&t!==P0&&t!==F0)&&t!==wc&&!(e===oa&&!n)||Cc(e)&&!Xn(e)&&t===wc||e===oa&&n}m(Sc,"isPlainSafe");function H0(t){return Ui(t)&&t!==Rh&&!Xn(t)&&t!==aC&&t!==cC&&t!==oa&&t!==$0&&t!==I0&&t!==O0&&t!==P0&&t!==F0&&t!==wc&&t!==iC&&t!==sC&&t!==tC&&t!==dC&&t!==oC&&t!==lC&&t!==nC&&t!==eC&&t!==rC&&t!==hC&&t!==uC}m(H0,"isPlainSafeFirst");function z0(t){return!Xn(t)&&t!==oa}m(z0,"isPlainSafeLast");function Ei(t,e){var r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}m(Ei,"codePointAt");function Mh(t){var e=/^\n* /;return e.test(t)}m(Mh,"needIndentIndicator");var W0=1,kc=2,U0=3,V0=4,ki=5;function G0(t,e,r,i,n,s,o,a){var l,c=0,h=null,u=!1,d=!1,f=i!==-1,p=-1,g=H0(Ei(t,0))&&z0(Ei(t,t.length-1));if(e||o)for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ei(t,l),!Ui(c))return ki;g=g&&Sc(c,h,a),h=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(c=Ei(t,l),c===Gn)u=!0,f&&(d=d||l-p-1>i&&t[p+1]!==" ",p=l);else if(!Ui(c))return ki;g=g&&Sc(c,h,a),h=c}d=d||f&&l-p-1>i&&t[p+1]!==" "}return!u&&!d?g&&!o&&!n(t)?W0:s===Yn?ki:kc:r>9&&Mh(t)?ki:o?s===Yn?ki:kc:d?V0:U0}m(G0,"chooseScalarStyle");function Y0(t,e,r,i,n){t.dump=function(){if(e.length===0)return t.quotingType===Yn?'""':"''";if(!t.noCompatMode&&(fC.indexOf(e)!==-1||pC.test(e)))return t.quotingType===Yn?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=i||t.flowLevel>-1&&r>=t.flowLevel;function l(c){return q0(t,c)}switch(m(l,"testAmbiguity"),G0(e,a,t.indent,o,l,t.quotingType,t.forceQuotes&&!i,n)){case W0:return e;case kc:return"'"+e.replace(/'/g,"''")+"'";case U0:return"|"+Tc(e,t.indent)+Ec(vc(e,s));case V0:return">"+Tc(e,t.indent)+Ec(vc(X0(e,o),s));case ki:return'"'+J0(e)+'"';default:throw new xe("impossible error: invalid scalar style")}}()}m(Y0,"writeScalar");function Tc(t,e){var r=Mh(t)?String(e):"",i=t[t.length-1]===`
`,n=i&&(t[t.length-2]===`
`||t===`
`),s=n?"+":i?"":"-";return r+s+`
`}m(Tc,"blockHeader");function Ec(t){return t[t.length-1]===`
`?t.slice(0,-1):t}m(Ec,"dropEndingNewline");function X0(t,e){for(var r=/(\n+)([^\n]*)/g,i=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,r.lastIndex=c,Ac(t.slice(0,c),e)}(),n=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],l=o[2];s=l[0]===" ",i+=a+(!n&&!s&&l!==""?`
`:"")+Ac(l,e),n=s}return i}m(X0,"foldString");function Ac(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,i,n=0,s,o=0,a=0,l="";i=r.exec(t);)a=i.index,a-n>e&&(s=o>n?o:a,l+=`
`+t.slice(n,s),n=s+1),o=a;return l+=`
`,t.length-n>e&&o>n?l+=t.slice(n,o)+`
`+t.slice(o+1):l+=t.slice(n),l.slice(1)}m(Ac,"foldLine");function J0(t){for(var e="",r=0,i,n=0;n<t.length;r>=65536?n+=2:n++)r=Ei(t,n),i=se[r],!i&&Ui(r)?(e+=t[n],r>=65536&&(e+=t[n+1])):e+=i||j0(r);return e}m(J0,"escapeString");function K0(t,e,r){var i="",n=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(tr(t,e,a,!1,!1)||typeof a>"u"&&tr(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=n,t.dump="["+i+"]"}m(K0,"writeFlowSequence");function Lc(t,e,r,i){var n="",s=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(tr(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&tr(t,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=la(t,e)),t.dump&&Gn===t.dump.charCodeAt(0)?n+="-":n+="- ",n+=t.dump);t.tag=s,t.dump=n||"[]"}m(Lc,"writeBlockSequence");function Z0(t,e,r){var i="",n=t.tag,s=Object.keys(r),o,a,l,c,h;for(o=0,a=s.length;o<a;o+=1)h="",i!==""&&(h+=", "),t.condenseFlow&&(h+='"'),l=s[o],c=r[l],t.replacer&&(c=t.replacer.call(r,l,c)),tr(t,e,l,!1,!1)&&(t.dump.length>1024&&(h+="? "),h+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),tr(t,e,c,!1,!1)&&(h+=t.dump,i+=h));t.tag=n,t.dump="{"+i+"}"}m(Z0,"writeFlowMapping");function Q0(t,e,r,i){var n="",s=t.tag,o=Object.keys(r),a,l,c,h,u,d;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new xe("sortKeys must be a boolean or a function");for(a=0,l=o.length;a<l;a+=1)d="",(!i||n!=="")&&(d+=la(t,e)),c=o[a],h=r[c],t.replacer&&(h=t.replacer.call(r,c,h)),tr(t,e+1,c,!0,!0,!0)&&(u=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,u&&(t.dump&&Gn===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,u&&(d+=la(t,e)),tr(t,e+1,h,!0,u)&&(t.dump&&Gn===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,n+=d));t.tag=s,t.dump=n||"{}"}m(Q0,"writeBlockMapping");function Bc(t,e,r){var i,n,s,o,a,l;for(n=r?t.explicitTypes:t.implicitTypes,s=0,o=n.length;s<o;s+=1)if(a=n[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(l=t.styleMap[a.tag]||a.defaultStyle,R0.call(a.represent)==="[object Function]")i=a.represent(e,l);else if(M0.call(a.represent,l))i=a.represent[l](e,l);else throw new xe("!<"+a.tag+'> tag resolver accepts not "'+l+'" style');t.dump=i}return!0}return!1}m(Bc,"detectType");function tr(t,e,r,i,n,s,o){t.tag=null,t.dump=r,Bc(t,r,!1)||Bc(t,r,!0);var a=R0.call(t.dump),l=i,c;i&&(i=t.flowLevel<0||t.flowLevel>e);var h=a==="[object Object]"||a==="[object Array]",u,d;if(h&&(u=t.duplicates.indexOf(r),d=u!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(n=!1),d&&t.usedDuplicates[u])t.dump="*ref_"+u;else{if(h&&d&&!t.usedDuplicates[u]&&(t.usedDuplicates[u]=!0),a==="[object Object]")i&&Object.keys(t.dump).length!==0?(Q0(t,e,t.dump,n),d&&(t.dump="&ref_"+u+t.dump)):(Z0(t,e,t.dump),d&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?Lc(t,e-1,t.dump,n):Lc(t,e,t.dump,n),d&&(t.dump="&ref_"+u+t.dump)):(K0(t,e,t.dump),d&&(t.dump="&ref_"+u+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Y0(t,t.dump,e,s,l);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new xe("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}m(tr,"writeNode");function ty(t,e){var r=[],i=[],n,s;for(ca(t,r,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(r[i[n]]);e.usedDuplicates=new Array(s)}m(ty,"getDuplicateReferences");function ca(t,e,r){var i,n,s;if(t!==null&&typeof t=="object")if(n=e.indexOf(t),n!==-1)r.indexOf(n)===-1&&r.push(n);else if(e.push(t),Array.isArray(t))for(n=0,s=t.length;n<s;n+=1)ca(t[n],e,r);else for(i=Object.keys(t),n=0,s=i.length;n<s;n+=1)ca(t[i[n]],e,r)}m(ca,"inspectNode");function mC(t,e){e=e||{};var r=new D0(e);r.noRefs||ty(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),tr(r,0,i,!0,!0)?r.dump+`
`:""}m(mC,"dump$1");function yC(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}m(yC,"renamed");var bC=Um,xC=Jv.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Le={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function In(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Pt(t),e=Pt(e);const[r,i]=[t.x,t.y],[n,s]=[e.x,e.y],o=n-r,a=s-i;return{angle:Math.atan(a/o),deltaX:o,deltaY:a}}m(In,"calculateDeltaAndAngle");var Pt=m(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),_C=m(t=>({x:m(function(e,r,i){let n=0;const s=Pt(i[0]).x<Pt(i[i.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Le,t.arrowTypeStart)){const{angle:f,deltaX:p}=In(i[0],i[1]);n=Le[t.arrowTypeStart]*Math.cos(f)*(p>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Le,t.arrowTypeEnd)){const{angle:f,deltaX:p}=In(i[i.length-1],i[i.length-2]);n=Le[t.arrowTypeEnd]*Math.cos(f)*(p>=0?1:-1)}const o=Math.abs(Pt(e).x-Pt(i[i.length-1]).x),a=Math.abs(Pt(e).y-Pt(i[i.length-1]).y),l=Math.abs(Pt(e).x-Pt(i[0]).x),c=Math.abs(Pt(e).y-Pt(i[0]).y),h=Le[t.arrowTypeStart],u=Le[t.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="right"?-1:1,n-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="right"?-1:1,n+=f}return Pt(e).x+n},"x"),y:m(function(e,r,i){let n=0;const s=Pt(i[0]).y<Pt(i[i.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Le,t.arrowTypeStart)){const{angle:f,deltaY:p}=In(i[0],i[1]);n=Le[t.arrowTypeStart]*Math.abs(Math.sin(f))*(p>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Le,t.arrowTypeEnd)){const{angle:f,deltaY:p}=In(i[i.length-1],i[i.length-2]);n=Le[t.arrowTypeEnd]*Math.abs(Math.sin(f))*(p>=0?1:-1)}const o=Math.abs(Pt(e).y-Pt(i[i.length-1]).y),a=Math.abs(Pt(e).x-Pt(i[i.length-1]).x),l=Math.abs(Pt(e).y-Pt(i[0]).y),c=Math.abs(Pt(e).x-Pt(i[0]).x),h=Le[t.arrowTypeStart],u=Le[t.arrowTypeEnd],d=1;if(o<u&&o>0&&a<u){let f=u+d-o;f*=s==="up"?-1:1,n-=f}if(l<h&&l>0&&c<h){let f=h+d-l;f*=s==="up"?-1:1,n+=f}return Pt(e).y+n},"y")}),"getLineFunctionsWithOffset"),$h=m(({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0,i=e+r;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:i}},"getSubGraphTitleMargins"),wC=m(t=>{const{handDrawnSeed:e}=St();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),Qi=m(t=>{const e=vC([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),vC=m(t=>{const e=new Map;return t.forEach(r=>{const[i,n]=r.split(":");e.set(i.trim(),n?.trim())}),e},"styles2Map"),ey=m(t=>t==="color"||t==="font-size"||t==="font-family"||t==="font-weight"||t==="font-style"||t==="text-decoration"||t==="text-align"||t==="text-transform"||t==="line-height"||t==="letter-spacing"||t==="word-spacing"||t==="text-shadow"||t==="text-overflow"||t==="white-space"||t==="word-wrap"||t==="word-break"||t==="overflow-wrap"||t==="hyphens","isLabelStyle"),at=m(t=>{const{stylesArray:e}=Qi(t),r=[],i=[],n=[],s=[];return e.forEach(o=>{const a=o[0];ey(a)?r.push(o.join(":")+" !important"):(i.push(o.join(":")+" !important"),a.includes("stroke")&&n.push(o.join(":")+" !important"),a==="fill"&&s.push(o.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:e,borderStyles:n,backgroundStyles:s}},"styles2String"),nt=m((t,e)=>{const{themeVariables:r,handDrawnSeed:i}=St(),{nodeBorder:n,mainBkg:s}=r,{stylesMap:o}=Qi(t);return Object.assign({roughness:.7,fill:o.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:o.get("stroke")||n,seed:i,strokeWidth:o.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),kn={},Ht={},hp;function CC(){return hp||(hp=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.BLANK_URL=Ht.relativeFirstCharacters=Ht.whitespaceEscapeCharsRegex=Ht.urlSchemeRegex=Ht.ctrlCharactersRegex=Ht.htmlCtrlEntityRegex=Ht.htmlEntitiesRegex=Ht.invalidProtocolRegex=void 0,Ht.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,Ht.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,Ht.htmlCtrlEntityRegex=/&(newline|tab);/gi,Ht.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Ht.urlSchemeRegex=/^.+(:|&colon;)/gim,Ht.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,Ht.relativeFirstCharacters=[".","/"],Ht.BLANK_URL="about:blank"),Ht}var up;function SC(){if(up)return kn;up=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.sanitizeUrl=void 0;var t=CC();function e(o){return t.relativeFirstCharacters.indexOf(o[0])>-1}function r(o){var a=o.replace(t.ctrlCharactersRegex,"");return a.replace(t.htmlEntitiesRegex,function(l,c){return String.fromCharCode(c)})}function i(o){return URL.canParse(o)}function n(o){try{return decodeURIComponent(o)}catch{return o}}function s(o){if(!o)return t.BLANK_URL;var a,l=n(o.trim());do l=r(l).replace(t.htmlCtrlEntityRegex,"").replace(t.ctrlCharactersRegex,"").replace(t.whitespaceEscapeCharsRegex,"").trim(),l=n(l),a=l.match(t.ctrlCharactersRegex)||l.match(t.htmlEntitiesRegex)||l.match(t.htmlCtrlEntityRegex)||l.match(t.whitespaceEscapeCharsRegex);while(a&&a.length>0);var c=l;if(!c)return t.BLANK_URL;if(e(c))return c;var h=c.trimStart(),u=h.match(t.urlSchemeRegex);if(!u)return c;var d=u[0].toLowerCase().trim();if(t.invalidProtocolRegex.test(d))return t.BLANK_URL;var f=h.replace(/\\/g,"/");if(d==="mailto:"||d.includes("://"))return f;if(d==="http:"||d==="https:"){if(!i(f))return t.BLANK_URL;var p=new URL(f);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return f}return kn.sanitizeUrl=s,kn}var kC=SC(),TC={value:()=>{}};function ry(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new zs(r)}function zs(t){this._=t}function EC(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}zs.prototype=ry.prototype={constructor:zs,on:function(t,e){var r=this._,i=EC(t+"",r),n,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((n=(t=i[s]).type)&&(n=AC(r[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=dp(r[n],t.name,e);else if(e==null)for(n in r)r[n]=dp(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new zs(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,s;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,n=s.length;i<n;++i)s[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,s=i.length;n<s;++n)i[n].value.apply(e,r)}};function AC(t,e){for(var r=0,i=t.length,n;r<i;++r)if((n=t[r]).name===e)return n.value}function dp(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=TC,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var Rc="http://www.w3.org/1999/xhtml";const fp={svg:"http://www.w3.org/2000/svg",xhtml:Rc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),fp.hasOwnProperty(e)?{space:fp[e],local:t}:t}function LC(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Rc&&e.documentElement.namespaceURI===Rc?e.createElement(t):e.createElementNS(r,t)}}function BC(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function iy(t){var e=Ka(t);return(e.local?BC:LC)(e)}function RC(){}function Ih(t){return t==null?RC:function(){return this.querySelector(t)}}function MC(t){typeof t!="function"&&(t=Ih(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=new Array(o),l,c,h=0;h<o;++h)(l=s[h])&&(c=t.call(l,l.__data__,h,s))&&("__data__"in l&&(c.__data__=l.__data__),a[h]=c);return new Te(i,this._parents)}function $C(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function IC(){return[]}function ny(t){return t==null?IC:function(){return this.querySelectorAll(t)}}function OC(t){return function(){return $C(t.apply(this,arguments))}}function PC(t){typeof t=="function"?t=OC(t):t=ny(t);for(var e=this._groups,r=e.length,i=[],n=[],s=0;s<r;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(i.push(t.call(l,l.__data__,c,o)),n.push(l));return new Te(i,n)}function sy(t){return function(){return this.matches(t)}}function ay(t){return function(e){return e.matches(t)}}var FC=Array.prototype.find;function NC(t){return function(){return FC.call(this.children,t)}}function jC(){return this.firstElementChild}function DC(t){return this.select(t==null?jC:NC(typeof t=="function"?t:ay(t)))}var qC=Array.prototype.filter;function HC(){return Array.from(this.children)}function zC(t){return function(){return qC.call(this.children,t)}}function WC(t){return this.selectAll(t==null?HC:zC(typeof t=="function"?t:ay(t)))}function UC(t){typeof t!="function"&&(t=sy(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new Te(i,this._parents)}function oy(t){return new Array(t.length)}function VC(){return new Te(this._enter||this._groups.map(oy),this._parents)}function ha(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ha.prototype={constructor:ha,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function GC(t){return function(){return t}}function YC(t,e,r,i,n,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):r[o]=new ha(t,s[o]);for(;o<l;++o)(a=e[o])&&(n[o]=a)}function XC(t,e,r,i,n,s,o){var a,l,c=new Map,h=e.length,u=s.length,d=new Array(h),f;for(a=0;a<h;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?n[a]=l:c.set(f,l));for(a=0;a<u;++a)f=o.call(t,s[a],a,s)+"",(l=c.get(f))?(i[a]=l,l.__data__=s[a],c.delete(f)):r[a]=new ha(t,s[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(d[a])===l&&(n[a]=l)}function JC(t){return t.__data__}function KC(t,e){if(!arguments.length)return Array.from(this,JC);var r=e?XC:YC,i=this._parents,n=this._groups;typeof t!="function"&&(t=GC(t));for(var s=n.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var h=i[c],u=n[c],d=u.length,f=ZC(t.call(h,h&&h.__data__,c,i)),p=f.length,g=a[c]=new Array(p),b=o[c]=new Array(p),x=l[c]=new Array(d);r(h,u,g,b,x,f,e);for(var w=0,L=0,C,v;w<p;++w)if(C=g[w]){for(w>=L&&(L=w+1);!(v=b[L])&&++L<p;);C._next=v||null}}return o=new Te(o,i),o._enter=a,o._exit=l,o}function ZC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function QC(){return new Te(this._exit||this._groups.map(oy),this._parents)}function tS(t,e,r){var i=this.enter(),n=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(n=e(n),n&&(n=n.selection())),r==null?s.remove():r(s),i&&n?i.merge(n).order():n}function eS(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,s=i.length,o=Math.min(n,s),a=new Array(n),l=0;l<o;++l)for(var c=r[l],h=i[l],u=c.length,d=a[l]=new Array(u),f,p=0;p<u;++p)(f=c[p]||h[p])&&(d[p]=f);for(;l<n;++l)a[l]=r[l];return new Te(a,this._parents)}function rS(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],n=i.length-1,s=i[n],o;--n>=0;)(o=i[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function iS(t){t||(t=nS);function e(u,d){return u&&d?t(u.__data__,d.__data__):!u-!d}for(var r=this._groups,i=r.length,n=new Array(i),s=0;s<i;++s){for(var o=r[s],a=o.length,l=n[s]=new Array(a),c,h=0;h<a;++h)(c=o[h])&&(l[h]=c);l.sort(e)}return new Te(n,this._parents).order()}function nS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sS(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function aS(){return Array.from(this)}function oS(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length;n<s;++n){var o=i[n];if(o)return o}return null}function lS(){let t=0;for(const e of this)++t;return t}function cS(){return!this.node()}function hS(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n=e[r],s=0,o=n.length,a;s<o;++s)(a=n[s])&&t.call(a,a.__data__,s,n);return this}function uS(t){return function(){this.removeAttribute(t)}}function dS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fS(t,e){return function(){this.setAttribute(t,e)}}function pS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function gS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function mS(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function yS(t,e){var r=Ka(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?dS:uS:typeof e=="function"?r.local?mS:gS:r.local?pS:fS)(r,e))}function ly(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function bS(t){return function(){this.style.removeProperty(t)}}function xS(t,e,r){return function(){this.style.setProperty(t,e,r)}}function _S(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function wS(t,e,r){return arguments.length>1?this.each((e==null?bS:typeof e=="function"?_S:xS)(t,e,r??"")):Vi(this.node(),t)}function Vi(t,e){return t.style.getPropertyValue(e)||ly(t).getComputedStyle(t,null).getPropertyValue(e)}function vS(t){return function(){delete this[t]}}function CS(t,e){return function(){this[t]=e}}function SS(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function kS(t,e){return arguments.length>1?this.each((e==null?vS:typeof e=="function"?SS:CS)(t,e)):this.node()[t]}function cy(t){return t.trim().split(/^|\s+/)}function Oh(t){return t.classList||new hy(t)}function hy(t){this._node=t,this._names=cy(t.getAttribute("class")||"")}hy.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function uy(t,e){for(var r=Oh(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function dy(t,e){for(var r=Oh(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function TS(t){return function(){uy(this,t)}}function ES(t){return function(){dy(this,t)}}function AS(t,e){return function(){(e.apply(this,arguments)?uy:dy)(this,t)}}function LS(t,e){var r=cy(t+"");if(arguments.length<2){for(var i=Oh(this.node()),n=-1,s=r.length;++n<s;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof e=="function"?AS:e?TS:ES)(r,e))}function BS(){this.textContent=""}function RS(t){return function(){this.textContent=t}}function MS(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function $S(t){return arguments.length?this.each(t==null?BS:(typeof t=="function"?MS:RS)(t)):this.node().textContent}function IS(){this.innerHTML=""}function OS(t){return function(){this.innerHTML=t}}function PS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function FS(t){return arguments.length?this.each(t==null?IS:(typeof t=="function"?PS:OS)(t)):this.node().innerHTML}function NS(){this.nextSibling&&this.parentNode.appendChild(this)}function jS(){return this.each(NS)}function DS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qS(){return this.each(DS)}function HS(t){var e=typeof t=="function"?t:iy(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function zS(){return null}function WS(t,e){var r=typeof t=="function"?t:iy(t),i=e==null?zS:typeof e=="function"?e:Ih(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function US(){var t=this.parentNode;t&&t.removeChild(this)}function VS(){return this.each(US)}function GS(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function YS(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function XS(t){return this.select(t?YS:GS)}function JS(t){return arguments.length?this.property("__data__",t):this.node().__data__}function KS(t){return function(e){t.call(this,e,this.__data__)}}function ZS(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function QS(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,n=e.length,s;r<n;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function tk(t,e,r){return function(){var i=this.__on,n,s=KS(e);if(i){for(var o=0,a=i.length;o<a;++o)if((n=i[o]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=e;return}}this.addEventListener(t.type,s,r),n={type:t.type,name:t.name,value:e,listener:s,options:r},i?i.push(n):this.__on=[n]}}function ek(t,e,r){var i=ZS(t+""),n,s=i.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,h;l<c;++l)for(n=0,h=a[l];n<s;++n)if((o=i[n]).type===h.type&&o.name===h.name)return h.value}return}for(a=e?tk:QS,n=0;n<s;++n)this.each(a(i[n],e,r));return this}function fy(t,e,r){var i=ly(t),n=i.CustomEvent;typeof n=="function"?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function rk(t,e){return function(){return fy(this,t,e)}}function ik(t,e){return function(){return fy(this,t,e.apply(this,arguments))}}function nk(t,e){return this.each((typeof e=="function"?ik:rk)(t,e))}function*sk(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,s=i.length,o;n<s;++n)(o=i[n])&&(yield o)}var py=[null];function Te(t,e){this._groups=t,this._parents=e}function hs(){return new Te([[document.documentElement]],py)}function ak(){return this}Te.prototype=hs.prototype={constructor:Te,select:MC,selectAll:PC,selectChild:DC,selectChildren:WC,filter:UC,data:KC,enter:VC,exit:QC,join:tS,merge:eS,selection:ak,order:rS,sort:iS,call:sS,nodes:aS,node:oS,size:lS,empty:cS,each:hS,attr:yS,style:wS,property:kS,classed:LS,text:$S,html:FS,raise:jS,lower:qS,append:HS,insert:WS,remove:VS,clone:XS,datum:JS,on:ek,dispatch:nk,[Symbol.iterator]:sk};function wt(t){return typeof t=="string"?new Te([[document.querySelector(t)]],[document.documentElement]):new Te([[t]],py)}function Ph(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function gy(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function us(){}var Jn=.7,ua=1/Jn,Li="\\s*([+-]?\\d+)\\s*",Kn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ok=/^#([0-9a-f]{3,8})$/,lk=new RegExp(`^rgb\\(${Li},${Li},${Li}\\)$`),ck=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),hk=new RegExp(`^rgba\\(${Li},${Li},${Li},${Kn}\\)$`),uk=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${Kn}\\)$`),dk=new RegExp(`^hsl\\(${Kn},${Ze},${Ze}\\)$`),fk=new RegExp(`^hsla\\(${Kn},${Ze},${Ze},${Kn}\\)$`),pp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ph(us,Zn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:gp,formatHex:gp,formatHex8:pk,formatHsl:gk,formatRgb:mp,toString:mp});function gp(){return this.rgb().formatHex()}function pk(){return this.rgb().formatHex8()}function gk(){return my(this).formatHsl()}function mp(){return this.rgb().formatRgb()}function Zn(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ok.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?yp(e):r===3?new _e(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Ts(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Ts(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=lk.exec(t))?new _e(e[1],e[2],e[3],1):(e=ck.exec(t))?new _e(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hk.exec(t))?Ts(e[1],e[2],e[3],e[4]):(e=uk.exec(t))?Ts(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dk.exec(t))?_p(e[1],e[2]/100,e[3]/100,1):(e=fk.exec(t))?_p(e[1],e[2]/100,e[3]/100,e[4]):pp.hasOwnProperty(t)?yp(pp[t]):t==="transparent"?new _e(NaN,NaN,NaN,0):null}function yp(t){return new _e(t>>16&255,t>>8&255,t&255,1)}function Ts(t,e,r,i){return i<=0&&(t=e=r=NaN),new _e(t,e,r,i)}function mk(t){return t instanceof us||(t=Zn(t)),t?(t=t.rgb(),new _e(t.r,t.g,t.b,t.opacity)):new _e}function Mc(t,e,r,i){return arguments.length===1?mk(t):new _e(t,e,r,i??1)}function _e(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}Ph(_e,Mc,gy(us,{brighter(t){return t=t==null?ua:Math.pow(ua,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jn:Math.pow(Jn,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new _e(ii(this.r),ii(this.g),ii(this.b),da(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bp,formatHex:bp,formatHex8:yk,formatRgb:xp,toString:xp}));function bp(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function yk(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function xp(){const t=da(this.opacity);return`${t===1?"rgb(":"rgba("}${ii(this.r)}, ${ii(this.g)}, ${ii(this.b)}${t===1?")":`, ${t})`}`}function da(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ii(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ti(t){return t=ii(t),(t<16?"0":"")+t.toString(16)}function _p(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new De(t,e,r,i)}function my(t){if(t instanceof De)return new De(t.h,t.s,t.l,t.opacity);if(t instanceof us||(t=Zn(t)),!t)return new De;if(t instanceof De)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),s=Math.max(e,r,i),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(r-i)/a+(r<i)*6:r===s?o=(i-e)/a+2:o=(e-r)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new De(o,a,l,t.opacity)}function bk(t,e,r,i){return arguments.length===1?my(t):new De(t,e,r,i??1)}function De(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}Ph(De,bk,gy(us,{brighter(t){return t=t==null?ua:Math.pow(ua,t),new De(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jn:Math.pow(Jn,t),new De(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new _e(Xl(t>=240?t-240:t+120,n,i),Xl(t,n,i),Xl(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new De(wp(this.h),Es(this.s),Es(this.l),da(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=da(this.opacity);return`${t===1?"hsl(":"hsla("}${wp(this.h)}, ${Es(this.s)*100}%, ${Es(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wp(t){return t=(t||0)%360,t<0?t+360:t}function Es(t){return Math.max(0,Math.min(1,t||0))}function Xl(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Fh=t=>()=>t;function yy(t,e){return function(r){return t+r*e}}function xk(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function YO(t,e){var r=e-t;return r?yy(t,r>180||r<-180?r-360*Math.round(r/360):r):Fh(isNaN(t)?e:t)}function _k(t){return(t=+t)==1?by:function(e,r){return r-e?xk(e,r,t):Fh(isNaN(e)?r:e)}}function by(t,e){var r=e-t;return r?yy(t,r):Fh(isNaN(t)?e:t)}const vp=function t(e){var r=_k(e);function i(n,s){var o=r((n=Mc(n)).r,(s=Mc(s)).r),a=r(n.g,s.g),l=r(n.b,s.b),c=by(n.opacity,s.opacity);return function(h){return n.r=o(h),n.g=a(h),n.b=l(h),n.opacity=c(h),n+""}}return i.gamma=t,i}(1);function Br(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var $c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jl=new RegExp($c.source,"g");function wk(t){return function(){return t}}function vk(t){return function(e){return t(e)+""}}function Ck(t,e){var r=$c.lastIndex=Jl.lastIndex=0,i,n,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=$c.exec(t))&&(n=Jl.exec(e));)(s=n.index)>r&&(s=e.slice(r,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:Br(i,n)})),r=Jl.lastIndex;return r<e.length&&(s=e.slice(r),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?vk(l[0].x):wk(e):(e=l.length,function(c){for(var h=0,u;h<e;++h)a[(u=l[h]).i]=u.x(c);return a.join("")})}var Cp=180/Math.PI,Ic={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xy(t,e,r,i,n,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*r+e*i)&&(r-=t*l,i-=e*l),(a=Math.sqrt(r*r+i*i))&&(r/=a,i/=a,l/=a),t*i<e*r&&(t=-t,e=-e,l=-l,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Cp,skewX:Math.atan(l)*Cp,scaleX:o,scaleY:a}}var As;function Sk(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ic:xy(e.a,e.b,e.c,e.d,e.e,e.f)}function kk(t){return t==null||(As||(As=document.createElementNS("http://www.w3.org/2000/svg","g")),As.setAttribute("transform",t),!(t=As.transform.baseVal.consolidate()))?Ic:(t=t.matrix,xy(t.a,t.b,t.c,t.d,t.e,t.f))}function _y(t,e,r,i){function n(c){return c.length?c.pop()+" ":""}function s(c,h,u,d,f,p){if(c!==u||h!==d){var g=f.push("translate(",null,e,null,r);p.push({i:g-4,x:Br(c,u)},{i:g-2,x:Br(h,d)})}else(u||d)&&f.push("translate("+u+e+d+r)}function o(c,h,u,d){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),d.push({i:u.push(n(u)+"rotate(",null,i)-2,x:Br(c,h)})):h&&u.push(n(u)+"rotate("+h+i)}function a(c,h,u,d){c!==h?d.push({i:u.push(n(u)+"skewX(",null,i)-2,x:Br(c,h)}):h&&u.push(n(u)+"skewX("+h+i)}function l(c,h,u,d,f,p){if(c!==u||h!==d){var g=f.push(n(f)+"scale(",null,",",null,")");p.push({i:g-4,x:Br(c,u)},{i:g-2,x:Br(h,d)})}else(u!==1||d!==1)&&f.push(n(f)+"scale("+u+","+d+")")}return function(c,h){var u=[],d=[];return c=t(c),h=t(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,d),o(c.rotate,h.rotate,u,d),a(c.skewX,h.skewX,u,d),l(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,d),c=h=null,function(f){for(var p=-1,g=d.length,b;++p<g;)u[(b=d[p]).i]=b.x(f);return u.join("")}}}var Tk=_y(Sk,"px, ","px)","deg)"),Ek=_y(kk,", ",")",")"),Gi=0,On=0,Tn=0,wy=1e3,fa,Pn,pa=0,li=0,Za=0,Qn=typeof performance=="object"&&performance.now?performance:Date,vy=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Nh(){return li||(vy(Ak),li=Qn.now()+Za)}function Ak(){li=0}function ga(){this._call=this._time=this._next=null}ga.prototype=Cy.prototype={constructor:ga,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?Nh():+r)+(e==null?0:+e),!this._next&&Pn!==this&&(Pn?Pn._next=this:fa=this,Pn=this),this._call=t,this._time=r,Oc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oc())}};function Cy(t,e,r){var i=new ga;return i.restart(t,e,r),i}function Lk(){Nh(),++Gi;for(var t=fa,e;t;)(e=li-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Gi}function Sp(){li=(pa=Qn.now())+Za,Gi=On=0;try{Lk()}finally{Gi=0,Rk(),li=0}}function Bk(){var t=Qn.now(),e=t-pa;e>wy&&(Za-=e,pa=t)}function Rk(){for(var t,e=fa,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:fa=r);Pn=t,Oc(i)}function Oc(t){if(!Gi){On&&(On=clearTimeout(On));var e=t-li;e>24?(t<1/0&&(On=setTimeout(Sp,t-Qn.now()-Za)),Tn&&(Tn=clearInterval(Tn))):(Tn||(pa=Qn.now(),Tn=setInterval(Bk,wy)),Gi=1,vy(Sp))}}function kp(t,e,r){var i=new ga;return e=e==null?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,r),i}var Mk=ry("start","end","cancel","interrupt"),$k=[],Sy=0,Tp=1,Pc=2,Ws=3,Ep=4,Fc=5,Us=6;function Qa(t,e,r,i,n,s){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;Ik(t,r,{name:e,index:i,group:n,on:Mk,tween:$k,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Sy})}function jh(t,e){var r=Ue(t,e);if(r.state>Sy)throw new Error("too late; already scheduled");return r}function ir(t,e){var r=Ue(t,e);if(r.state>Ws)throw new Error("too late; already running");return r}function Ue(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Ik(t,e,r){var i=t.__transition,n;i[e]=r,r.timer=Cy(s,0,r.time);function s(c){r.state=Tp,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var h,u,d,f;if(r.state!==Tp)return l();for(h in i)if(f=i[h],f.name===r.name){if(f.state===Ws)return kp(o);f.state===Ep?(f.state=Us,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[h]):+h<e&&(f.state=Us,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[h])}if(kp(function(){r.state===Ws&&(r.state=Ep,r.timer.restart(a,r.delay,r.time),a(c))}),r.state=Pc,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Pc){for(r.state=Ws,n=new Array(d=r.tween.length),h=0,u=-1;h<d;++h)(f=r.tween[h].value.call(t,t.__data__,r.index,r.group))&&(n[++u]=f);n.length=u+1}}function a(c){for(var h=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=Fc,1),u=-1,d=n.length;++u<d;)n[u].call(t,h);r.state===Fc&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=Us,r.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function Ok(t,e){var r=t.__transition,i,n,s=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){s=!1;continue}n=i.state>Pc&&i.state<Fc,i.state=Us,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]}s&&delete t.__transition}}function Pk(t){return this.each(function(){Ok(this,t)})}function Fk(t,e){var r,i;return function(){var n=ir(this,t),s=n.tween;if(s!==r){i=r=s;for(var o=0,a=i.length;o<a;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}n.tween=i}}function Nk(t,e,r){var i,n;if(typeof r!="function")throw new Error;return function(){var s=ir(this,t),o=s.tween;if(o!==i){n=(i=o).slice();for(var a={name:e,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=a;break}l===c&&n.push(a)}s.tween=n}}function jk(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=Ue(this.node(),r).tween,n=0,s=i.length,o;n<s;++n)if((o=i[n]).name===t)return o.value;return null}return this.each((e==null?Fk:Nk)(r,t,e))}function Dh(t,e,r){var i=t._id;return t.each(function(){var n=ir(this,i);(n.value||(n.value={}))[e]=r.apply(this,arguments)}),function(n){return Ue(n,i).value[e]}}function ky(t,e){var r;return(typeof e=="number"?Br:e instanceof Zn?vp:(r=Zn(e))?(e=r,vp):Ck)(t,e)}function Dk(t){return function(){this.removeAttribute(t)}}function qk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hk(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttribute(t);return o===n?null:o===i?s:s=e(i=o,r)}}function zk(t,e,r){var i,n=r+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?s:s=e(i=o,r)}}function Wk(t,e,r){var i,n,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=a+"",o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a)))}}function Uk(t,e,r){var i,n,s;return function(){var o,a=r(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=a+"",o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a)))}}function Vk(t,e){var r=Ka(t),i=r==="transform"?Ek:ky;return this.attrTween(t,typeof e=="function"?(r.local?Uk:Wk)(r,i,Dh(this,"attr."+t,e)):e==null?(r.local?qk:Dk)(r):(r.local?zk:Hk)(r,i,e))}function Gk(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Yk(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Xk(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Yk(t,s)),r}return n._value=e,n}function Jk(t,e){var r,i;function n(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Gk(t,s)),r}return n._value=e,n}function Kk(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Ka(t);return this.tween(r,(i.local?Xk:Jk)(i,e))}function Zk(t,e){return function(){jh(this,t).delay=+e.apply(this,arguments)}}function Qk(t,e){return e=+e,function(){jh(this,t).delay=e}}function tT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Zk:Qk)(e,t)):Ue(this.node(),e).delay}function eT(t,e){return function(){ir(this,t).duration=+e.apply(this,arguments)}}function rT(t,e){return e=+e,function(){ir(this,t).duration=e}}function iT(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eT:rT)(e,t)):Ue(this.node(),e).duration}function nT(t,e){if(typeof e!="function")throw new Error;return function(){ir(this,t).ease=e}}function sT(t){var e=this._id;return arguments.length?this.each(nT(e,t)):Ue(this.node(),e).ease}function aT(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;ir(this,t).ease=r}}function oT(t){if(typeof t!="function")throw new Error;return this.each(aT(this._id,t))}function lT(t){typeof t!="function"&&(t=sy(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var s=e[n],o=s.length,a=i[n]=[],l,c=0;c<o;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&a.push(l);return new wr(i,this._parents,this._name,this._id)}function cT(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,s=Math.min(i,n),o=new Array(i),a=0;a<s;++a)for(var l=e[a],c=r[a],h=l.length,u=o[a]=new Array(h),d,f=0;f<h;++f)(d=l[f]||c[f])&&(u[f]=d);for(;a<i;++a)o[a]=e[a];return new wr(o,this._parents,this._name,this._id)}function hT(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function uT(t,e,r){var i,n,s=hT(e)?jh:ir;return function(){var o=s(this,t),a=o.on;a!==i&&(n=(i=a).copy()).on(e,r),o.on=n}}function dT(t,e){var r=this._id;return arguments.length<2?Ue(this.node(),r).on.on(t):this.each(uT(r,t,e))}function fT(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function pT(){return this.on("end.remove",fT(this._id))}function gT(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ih(t));for(var i=this._groups,n=i.length,s=new Array(n),o=0;o<n;++o)for(var a=i[o],l=a.length,c=s[o]=new Array(l),h,u,d=0;d<l;++d)(h=a[d])&&(u=t.call(h,h.__data__,d,a))&&("__data__"in h&&(u.__data__=h.__data__),c[d]=u,Qa(c[d],e,r,d,c,Ue(h,r)));return new wr(s,this._parents,e,r)}function mT(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ny(t));for(var i=this._groups,n=i.length,s=[],o=[],a=0;a<n;++a)for(var l=i[a],c=l.length,h,u=0;u<c;++u)if(h=l[u]){for(var d=t.call(h,h.__data__,u,l),f,p=Ue(h,r),g=0,b=d.length;g<b;++g)(f=d[g])&&Qa(f,e,r,g,d,p);s.push(d),o.push(h)}return new wr(s,o,e,r)}var yT=hs.prototype.constructor;function bT(){return new yT(this._groups,this._parents)}function xT(t,e){var r,i,n;return function(){var s=Vi(this,t),o=(this.style.removeProperty(t),Vi(this,t));return s===o?null:s===r&&o===i?n:n=e(r=s,i=o)}}function Ty(t){return function(){this.style.removeProperty(t)}}function _T(t,e,r){var i,n=r+"",s;return function(){var o=Vi(this,t);return o===n?null:o===i?s:s=e(i=o,r)}}function wT(t,e,r){var i,n,s;return function(){var o=Vi(this,t),a=r(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Vi(this,t))),o===l?null:o===i&&l===n?s:(n=l,s=e(i=o,a))}}function vT(t,e){var r,i,n,s="style."+e,o="end."+s,a;return function(){var l=ir(this,t),c=l.on,h=l.value[s]==null?a||(a=Ty(e)):void 0;(c!==r||n!==h)&&(i=(r=c).copy()).on(o,n=h),l.on=i}}function CT(t,e,r){var i=(t+="")=="transform"?Tk:ky;return e==null?this.styleTween(t,xT(t,i)).on("end.style."+t,Ty(t)):typeof e=="function"?this.styleTween(t,wT(t,i,Dh(this,"style."+t,e))).each(vT(this._id,t)):this.styleTween(t,_T(t,i,e),r).on("end.style."+t,null)}function ST(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function kT(t,e,r){var i,n;function s(){var o=e.apply(this,arguments);return o!==n&&(i=(n=o)&&ST(t,o,r)),i}return s._value=e,s}function TT(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,kT(t,e,r??""))}function ET(t){return function(){this.textContent=t}}function AT(t){return function(){var e=t(this);this.textContent=e??""}}function LT(t){return this.tween("text",typeof t=="function"?AT(Dh(this,"text",t)):ET(t==null?"":t+""))}function BT(t){return function(e){this.textContent=t.call(this,e)}}function RT(t){var e,r;function i(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&BT(n)),e}return i._value=t,i}function MT(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,RT(t))}function $T(){for(var t=this._name,e=this._id,r=Ey(),i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var h=Ue(l,e);Qa(l,t,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new wr(i,this._parents,t,r)}function IT(){var t,e,r=this,i=r._id,n=r.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--n===0&&s()}};r.each(function(){var c=ir(this,i),h=c.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),n===0&&s()})}var OT=0;function wr(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function Ey(){return++OT}var fr=hs.prototype;wr.prototype={constructor:wr,select:gT,selectAll:mT,selectChild:fr.selectChild,selectChildren:fr.selectChildren,filter:lT,merge:cT,selection:bT,transition:$T,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:dT,attr:Vk,attrTween:Kk,style:CT,styleTween:TT,text:LT,textTween:MT,remove:pT,tween:jk,delay:tT,duration:iT,ease:sT,easeVarying:oT,end:IT,[Symbol.iterator]:fr[Symbol.iterator]};function PT(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var FT={time:null,delay:0,duration:250,ease:PT};function NT(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function jT(t){var e,r;t instanceof wr?(e=t._id,t=t._name):(e=Ey(),(r=FT).time=Nh(),t=t==null?null:t+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var o=i[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Qa(l,t,e,c,o,r||NT(l,e));return new wr(i,this._parents,t,e)}hs.prototype.interrupt=Pk;hs.prototype.transition=jT;const Nc=Math.PI,jc=2*Nc,Yr=1e-6,DT=jc-Yr;function Ay(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function qT(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ay;const r=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}class HT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ay:qT(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,i,n){this._append`Q${+e},${+r},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,r,i,n,s,o){this._append`C${+e},${+r},${+i},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,i,n,s){if(e=+e,r=+r,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=i-e,c=n-r,h=o-e,u=a-r,d=h*h+u*u;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>Yr)if(!(Math.abs(u*l-c*h)>Yr)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let f=i-o,p=n-a,g=l*l+c*c,b=f*f+p*p,x=Math.sqrt(g),w=Math.sqrt(d),L=s*Math.tan((Nc-Math.acos((g+d-b)/(2*x*w)))/2),C=L/w,v=L/x;Math.abs(C-1)>Yr&&this._append`L${e+C*h},${r+C*u}`,this._append`A${s},${s},0,0,${+(u*f>h*p)},${this._x1=e+v*l},${this._y1=r+v*c}`}}arc(e,r,i,n,s,o){if(e=+e,r=+r,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(n),l=i*Math.sin(n),c=e+a,h=r+l,u=1^o,d=o?n-s:s-n;this._x1===null?this._append`M${c},${h}`:(Math.abs(this._x1-c)>Yr||Math.abs(this._y1-h)>Yr)&&this._append`L${c},${h}`,i&&(d<0&&(d=d%jc+jc),d>DT?this._append`A${i},${i},0,1,${u},${e-a},${r-l}A${i},${i},0,1,${u},${this._x1=c},${this._y1=h}`:d>Yr&&this._append`A${i},${i},0,${+(d>=Nc)},${u},${this._x1=e+i*Math.cos(s)},${this._y1=r+i*Math.sin(s)}`)}rect(e,r,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function Ci(t){return function(){return t}}const XO=Math.abs,JO=Math.atan2,KO=Math.cos,ZO=Math.max,QO=Math.min,t3=Math.sin,e3=Math.sqrt,Ap=1e-12,qh=Math.PI,Lp=qh/2,r3=2*qh;function i3(t){return t>1?0:t<-1?qh:Math.acos(t)}function n3(t){return t>=1?Lp:t<=-1?-Lp:Math.asin(t)}function zT(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);e=i}return t},()=>new HT(e)}function WT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ly(t){this._context=t}Ly.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ma(t){return new Ly(t)}function UT(t){return t[0]}function VT(t){return t[1]}function GT(t,e){var r=Ci(!0),i=null,n=ma,s=null,o=zT(a);t=typeof t=="function"?t:t===void 0?UT:Ci(t),e=typeof e=="function"?e:e===void 0?VT:Ci(e);function a(l){var c,h=(l=WT(l)).length,u,d=!1,f;for(i==null&&(s=n(f=o())),c=0;c<=h;++c)!(c<h&&r(u=l[c],c,l))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+t(u,c,l),+e(u,c,l));if(f)return s=null,f+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Ci(+l),a):t},a.y=function(l){return arguments.length?(e=typeof l=="function"?l:Ci(+l),a):e},a.defined=function(l){return arguments.length?(r=typeof l=="function"?l:Ci(!!l),a):r},a.curve=function(l){return arguments.length?(n=l,i!=null&&(s=n(i)),a):n},a.context=function(l){return arguments.length?(l==null?i=s=null:s=n(i=l),a):i},a}class By{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Ry(t){return new By(t,!0)}function My(t){return new By(t,!1)}function Ir(){}function ya(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function to(t){this._context=t}to.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ya(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Vs(t){return new to(t)}function $y(t){this._context=t}$y.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function YT(t){return new $y(t)}function Iy(t){this._context=t}Iy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function XT(t){return new Iy(t)}function Oy(t,e){this._basis=new to(t),this._beta=e}Oy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var i=t[0],n=e[0],s=t[r]-i,o=e[r]-n,a=-1,l;++a<=r;)l=a/r,this._basis.point(this._beta*t[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(n+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const JT=function t(e){function r(i){return e===1?new to(i):new Oy(i,e)}return r.beta=function(i){return t(+i)},r}(.85);function ba(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function Hh(t,e){this._context=t,this._k=(1-e)/6}Hh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ba(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Py=function t(e){function r(i){return new Hh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function zh(t,e){this._context=t,this._k=(1-e)/6}zh.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const KT=function t(e){function r(i){return new zh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function Wh(t,e){this._context=t,this._k=(1-e)/6}Wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ZT=function t(e){function r(i){return new Wh(i,e)}return r.tension=function(i){return t(+i)},r}(0);function Uh(t,e,r){var i=t._x1,n=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Ap){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,n=(n*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Ap){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*c+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*c+t._y1*t._l23_2a-r*t._l12_2a)/h}t._context.bezierCurveTo(i,n,s,o,t._x2,t._y2)}function Fy(t,e){this._context=t,this._alpha=e}Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Uh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ny=function t(e){function r(i){return e?new Fy(i,e):new Hh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function jy(t,e){this._context=t,this._alpha=e}jy.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Uh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const QT=function t(e){function r(i){return e?new jy(i,e):new zh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function Dy(t,e){this._context=t,this._alpha=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Uh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const tE=function t(e){function r(i){return e?new Dy(i,e):new Wh(i,0)}return r.alpha=function(i){return t(+i)},r}(.5);function qy(t){this._context=t}qy.prototype={areaStart:Ir,areaEnd:Ir,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function eE(t){return new qy(t)}function Bp(t){return t<0?-1:1}function Rp(t,e,r){var i=t._x1-t._x0,n=e-t._x1,s=(t._y1-t._y0)/(i||n<0&&-0),o=(r-t._y1)/(n||i<0&&-0),a=(s*n+o*i)/(i+n);return(Bp(s)+Bp(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Mp(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Kl(t,e,r){var i=t._x0,n=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,n+a*e,s-a,o-a*r,s,o)}function xa(t){this._context=t}xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kl(this,this._t0,Mp(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Kl(this,Mp(this,r=Rp(this,t,e)),r);break;default:Kl(this,this._t0,r=Rp(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function Hy(t){this._context=new zy(t)}(Hy.prototype=Object.create(xa.prototype)).point=function(t,e){xa.prototype.point.call(this,e,t)};function zy(t){this._context=t}zy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,i,n,s){this._context.bezierCurveTo(e,t,i,r,s,n)}};function Wy(t){return new xa(t)}function Uy(t){return new Hy(t)}function Vy(t){this._context=t}Vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var i=$p(t),n=$p(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(i[0][s],n[0][s],i[1][s],n[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function $p(t){var e,r=t.length-1,i,n=new Array(r),s=new Array(r),o=new Array(r);for(n[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)n[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(n[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)i=n[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(n[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)n[e]=(o[e]-n[e+1])/s[e];for(s[r-1]=(t[r]+n[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-n[e+1];return[n,s]}function Gy(t){return new Vy(t)}function eo(t,e){this._context=t,this._t=e}eo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Yy(t){return new eo(t,.5)}function Xy(t){return new eo(t,0)}function Jy(t){return new eo(t,1)}function Fn(t,e,r){this.k=t,this.x=e,this.y=r}Fn.prototype={constructor:Fn,scale:function(t){return t===1?this:new Fn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Fn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Fn.prototype;var Ky=typeof global=="object"&&global&&global.Object===Object&&global,rE=typeof self=="object"&&self&&self.Object===Object&&self,nr=Ky||rE||Function("return this")(),_a=nr.Symbol,Zy=Object.prototype,iE=Zy.hasOwnProperty,nE=Zy.toString,En=_a?_a.toStringTag:void 0;function sE(t){var e=iE.call(t,En),r=t[En];try{t[En]=void 0;var i=!0}catch{}var n=nE.call(t);return i&&(e?t[En]=r:delete t[En]),n}var aE=Object.prototype,oE=aE.toString;function lE(t){return oE.call(t)}var cE="[object Null]",hE="[object Undefined]",Ip=_a?_a.toStringTag:void 0;function tn(t){return t==null?t===void 0?hE:cE:Ip&&Ip in Object(t)?sE(t):lE(t)}function di(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var uE="[object AsyncFunction]",dE="[object Function]",fE="[object GeneratorFunction]",pE="[object Proxy]";function Vh(t){if(!di(t))return!1;var e=tn(t);return e==dE||e==fE||e==uE||e==pE}var Zl=nr["__core-js_shared__"],Op=function(){var t=/[^.]+$/.exec(Zl&&Zl.keys&&Zl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function gE(t){return!!Op&&Op in t}var mE=Function.prototype,yE=mE.toString;function fi(t){if(t!=null){try{return yE.call(t)}catch{}try{return t+""}catch{}}return""}var bE=/[\\^$.*+?()[\]{}|]/g,xE=/^\[object .+?Constructor\]$/,_E=Function.prototype,wE=Object.prototype,vE=_E.toString,CE=wE.hasOwnProperty,SE=RegExp("^"+vE.call(CE).replace(bE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kE(t){if(!di(t)||gE(t))return!1;var e=Vh(t)?SE:xE;return e.test(fi(t))}function TE(t,e){return t?.[e]}function pi(t,e){var r=TE(t,e);return kE(r)?r:void 0}var ts=pi(Object,"create");function EE(){this.__data__=ts?ts(null):{},this.size=0}function AE(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var LE="__lodash_hash_undefined__",BE=Object.prototype,RE=BE.hasOwnProperty;function ME(t){var e=this.__data__;if(ts){var r=e[t];return r===LE?void 0:r}return RE.call(e,t)?e[t]:void 0}var $E=Object.prototype,IE=$E.hasOwnProperty;function OE(t){var e=this.__data__;return ts?e[t]!==void 0:IE.call(e,t)}var PE="__lodash_hash_undefined__";function FE(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ts&&e===void 0?PE:e,this}function ci(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ci.prototype.clear=EE;ci.prototype.delete=AE;ci.prototype.get=ME;ci.prototype.has=OE;ci.prototype.set=FE;function NE(){this.__data__=[],this.size=0}function ro(t,e){return t===e||t!==t&&e!==e}function io(t,e){for(var r=t.length;r--;)if(ro(t[r][0],e))return r;return-1}var jE=Array.prototype,DE=jE.splice;function qE(t){var e=this.__data__,r=io(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():DE.call(e,r,1),--this.size,!0}function HE(t){var e=this.__data__,r=io(e,t);return r<0?void 0:e[r][1]}function zE(t){return io(this.__data__,t)>-1}function WE(t,e){var r=this.__data__,i=io(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function Sr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Sr.prototype.clear=NE;Sr.prototype.delete=qE;Sr.prototype.get=HE;Sr.prototype.has=zE;Sr.prototype.set=WE;var es=pi(nr,"Map");function UE(){this.size=0,this.__data__={hash:new ci,map:new(es||Sr),string:new ci}}function VE(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function no(t,e){var r=t.__data__;return VE(e)?r[typeof e=="string"?"string":"hash"]:r.map}function GE(t){var e=no(this,t).delete(t);return this.size-=e?1:0,e}function YE(t){return no(this,t).get(t)}function XE(t){return no(this,t).has(t)}function JE(t,e){var r=no(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function Nr(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Nr.prototype.clear=UE;Nr.prototype.delete=GE;Nr.prototype.get=YE;Nr.prototype.has=XE;Nr.prototype.set=JE;var KE="Expected a function";function ds(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(KE);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var o=t.apply(this,i);return r.cache=s.set(n,o)||s,o};return r.cache=new(ds.Cache||Nr),r}ds.Cache=Nr;function ZE(){this.__data__=new Sr,this.size=0}function QE(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function tA(t){return this.__data__.get(t)}function eA(t){return this.__data__.has(t)}var rA=200;function iA(t,e){var r=this.__data__;if(r instanceof Sr){var i=r.__data__;if(!es||i.length<rA-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Nr(i)}return r.set(t,e),this.size=r.size,this}function en(t){var e=this.__data__=new Sr(t);this.size=e.size}en.prototype.clear=ZE;en.prototype.delete=QE;en.prototype.get=tA;en.prototype.has=eA;en.prototype.set=iA;var wa=function(){try{var t=pi(Object,"defineProperty");return t({},"",{}),t}catch{}}();function Gh(t,e,r){e=="__proto__"&&wa?wa(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function Dc(t,e,r){(r!==void 0&&!ro(t[e],r)||r===void 0&&!(e in t))&&Gh(t,e,r)}function nA(t){return function(e,r,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[++n];if(r(s[l],l,s)===!1)break}return e}}var sA=nA(),Qy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pp=Qy&&typeof module=="object"&&module&&!module.nodeType&&module,aA=Pp&&Pp.exports===Qy,Fp=aA?nr.Buffer:void 0,Np=Fp?Fp.allocUnsafe:void 0;function oA(t,e){if(e)return t.slice();var r=t.length,i=Np?Np(r):new t.constructor(r);return t.copy(i),i}var jp=nr.Uint8Array;function lA(t){var e=new t.constructor(t.byteLength);return new jp(e).set(new jp(t)),e}function cA(t,e){var r=e?lA(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function hA(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var Dp=Object.create,uA=function(){function t(){}return function(e){if(!di(e))return{};if(Dp)return Dp(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function tb(t,e){return function(r){return t(e(r))}}var eb=tb(Object.getPrototypeOf,Object),dA=Object.prototype;function so(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||dA;return t===r}function fA(t){return typeof t.constructor=="function"&&!so(t)?uA(eb(t)):{}}function fs(t){return t!=null&&typeof t=="object"}var pA="[object Arguments]";function qp(t){return fs(t)&&tn(t)==pA}var rb=Object.prototype,gA=rb.hasOwnProperty,mA=rb.propertyIsEnumerable,va=qp(function(){return arguments}())?qp:function(t){return fs(t)&&gA.call(t,"callee")&&!mA.call(t,"callee")},Ca=Array.isArray,yA=9007199254740991;function ib(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yA}function ao(t){return t!=null&&ib(t.length)&&!Vh(t)}function bA(t){return fs(t)&&ao(t)}function xA(){return!1}var nb=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hp=nb&&typeof module=="object"&&module&&!module.nodeType&&module,_A=Hp&&Hp.exports===nb,zp=_A?nr.Buffer:void 0,wA=zp?zp.isBuffer:void 0,Yh=wA||xA,vA="[object Object]",CA=Function.prototype,SA=Object.prototype,sb=CA.toString,kA=SA.hasOwnProperty,TA=sb.call(Object);function EA(t){if(!fs(t)||tn(t)!=vA)return!1;var e=eb(t);if(e===null)return!0;var r=kA.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&sb.call(r)==TA}var AA="[object Arguments]",LA="[object Array]",BA="[object Boolean]",RA="[object Date]",MA="[object Error]",$A="[object Function]",IA="[object Map]",OA="[object Number]",PA="[object Object]",FA="[object RegExp]",NA="[object Set]",jA="[object String]",DA="[object WeakMap]",qA="[object ArrayBuffer]",HA="[object DataView]",zA="[object Float32Array]",WA="[object Float64Array]",UA="[object Int8Array]",VA="[object Int16Array]",GA="[object Int32Array]",YA="[object Uint8Array]",XA="[object Uint8ClampedArray]",JA="[object Uint16Array]",KA="[object Uint32Array]",$t={};$t[zA]=$t[WA]=$t[UA]=$t[VA]=$t[GA]=$t[YA]=$t[XA]=$t[JA]=$t[KA]=!0;$t[AA]=$t[LA]=$t[qA]=$t[BA]=$t[HA]=$t[RA]=$t[MA]=$t[$A]=$t[IA]=$t[OA]=$t[PA]=$t[FA]=$t[NA]=$t[jA]=$t[DA]=!1;function ZA(t){return fs(t)&&ib(t.length)&&!!$t[tn(t)]}function QA(t){return function(e){return t(e)}}var ab=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wn=ab&&typeof module=="object"&&module&&!module.nodeType&&module,tL=Wn&&Wn.exports===ab,Ql=tL&&Ky.process,Wp=function(){try{var t=Wn&&Wn.require&&Wn.require("util").types;return t||Ql&&Ql.binding&&Ql.binding("util")}catch{}}(),Up=Wp&&Wp.isTypedArray,Xh=Up?QA(Up):ZA;function qc(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var eL=Object.prototype,rL=eL.hasOwnProperty;function iL(t,e,r){var i=t[e];(!(rL.call(t,e)&&ro(i,r))||r===void 0&&!(e in t))&&Gh(t,e,r)}function nL(t,e,r,i){var n=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),n?Gh(r,a,l):iL(r,a,l)}return r}function sL(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var aL=9007199254740991,oL=/^(?:0|[1-9]\d*)$/;function ob(t,e){var r=typeof t;return e=e??aL,!!e&&(r=="number"||r!="symbol"&&oL.test(t))&&t>-1&&t%1==0&&t<e}var lL=Object.prototype,cL=lL.hasOwnProperty;function hL(t,e){var r=Ca(t),i=!r&&va(t),n=!r&&!i&&Yh(t),s=!r&&!i&&!n&&Xh(t),o=r||i||n||s,a=o?sL(t.length,String):[],l=a.length;for(var c in t)(e||cL.call(t,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ob(c,l)))&&a.push(c);return a}function uL(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var dL=Object.prototype,fL=dL.hasOwnProperty;function pL(t){if(!di(t))return uL(t);var e=so(t),r=[];for(var i in t)i=="constructor"&&(e||!fL.call(t,i))||r.push(i);return r}function lb(t){return ao(t)?hL(t,!0):pL(t)}function gL(t){return nL(t,lb(t))}function mL(t,e,r,i,n,s,o){var a=qc(t,r),l=qc(e,r),c=o.get(l);if(c){Dc(t,r,c);return}var h=s?s(a,l,r+"",t,e,o):void 0,u=h===void 0;if(u){var d=Ca(l),f=!d&&Yh(l),p=!d&&!f&&Xh(l);h=l,d||f||p?Ca(a)?h=a:bA(a)?h=hA(a):f?(u=!1,h=oA(l,!0)):p?(u=!1,h=cA(l,!0)):h=[]:EA(l)||va(l)?(h=a,va(a)?h=gL(a):(!di(a)||Vh(a))&&(h=fA(l))):u=!1}u&&(o.set(l,h),n(h,l,i,s,o),o.delete(l)),Dc(t,r,h)}function cb(t,e,r,i,n){t!==e&&sA(e,function(s,o){if(n||(n=new en),di(s))mL(t,e,o,r,cb,i,n);else{var a=i?i(qc(t,o),s,o+"",t,e,n):void 0;a===void 0&&(a=s),Dc(t,o,a)}},lb)}function hb(t){return t}function yL(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Vp=Math.max;function bL(t,e,r){return e=Vp(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=Vp(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=r(o),yL(t,this,a)}}function xL(t){return function(){return t}}var _L=wa?function(t,e){return wa(t,"toString",{configurable:!0,enumerable:!1,value:xL(e),writable:!0})}:hb,wL=800,vL=16,CL=Date.now;function SL(t){var e=0,r=0;return function(){var i=CL(),n=vL-(i-r);if(r=i,n>0){if(++e>=wL)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var kL=SL(_L);function TL(t,e){return kL(bL(t,e,hb),t+"")}function EL(t,e,r){if(!di(r))return!1;var i=typeof e;return(i=="number"?ao(r)&&ob(e,r.length):i=="string"&&e in r)?ro(r[e],t):!1}function AL(t){return TL(function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(n--,s):void 0,o&&EL(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=r[i];a&&t(e,a,i,s)}return e})}var LL=AL(function(t,e,r){cb(t,e,r)}),BL="",RL={curveBasis:Vs,curveBasisClosed:YT,curveBasisOpen:XT,curveBumpX:Ry,curveBumpY:My,curveBundle:JT,curveCardinalClosed:KT,curveCardinalOpen:ZT,curveCardinal:Py,curveCatmullRomClosed:QT,curveCatmullRomOpen:tE,curveCatmullRom:Ny,curveLinear:ma,curveLinearClosed:eE,curveMonotoneX:Wy,curveMonotoneY:Uy,curveNatural:Gy,curveStep:Yy,curveStepAfter:Jy,curveStepBefore:Xy},ML=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,$L=m(function(t,e){const r=ub(t,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const o=r.map(a=>a.args);ta(o),i=te(i,[...o])}else i=r.args;if(!i)return;let n=_h(t,e);const s="config";return i[s]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),i[n]=i[s],delete i[s]),i},"detectInit"),ub=m(function(t,e=null){try{const r=new RegExp(`[%]{2}(?![{]${ML.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(r,"").replace(/'/gm,'"'),G.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let i;const n=[];for(;(i=Hn.exec(t))!==null;)if(i.index===Hn.lastIndex&&Hn.lastIndex++,i&&!e||e&&i[1]?.match(e)||e&&i[2]?.match(e)){const s=i[1]?i[1]:i[2],o=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;n.push({type:s,args:o})}return n.length===0?{type:t,args:null}:n.length===1?n[0]:n}catch(r){return G.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),IL=m(function(t){return t.replace(Hn,"")},"removeDirectives"),OL=m(function(t,e){for(const[r,i]of e.entries())if(i.match(t))return r;return-1},"isSubstringInArray");function Jh(t,e){if(!t)return e;const r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return RL[r]??e}m(Jh,"interpolateToCurve");function db(t,e){const r=t.trim();if(r)return e.securityLevel!=="loose"?kC.sanitizeUrl(r):r}m(db,"formatUrl");var PL=m((t,...e)=>{const r=t.split("."),i=r.length-1,n=r[i];let s=window;for(let o=0;o<i;o++)if(s=s[r[o]],!s){G.error(`Function name: ${t} not found in window`);return}s[n](...e)},"runFunc");function Kh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}m(Kh,"distance");function fb(t){let e,r=0;t.forEach(n=>{r+=Kh(n,e),e=n});const i=r/2;return Zh(t,i)}m(fb,"traverseEdge");function pb(t){return t.length===1?t[0]:fb(t)}m(pb,"calcLabelPosition");var Gp=m((t,e=2)=>{const r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),Zh=m((t,e)=>{let r,i=e;for(const n of t){if(r){const s=Kh(n,r);if(s===0)return r;if(s<i)i-=s;else{const o=i/s;if(o<=0)return r;if(o>=1)return{x:n.x,y:n.y};if(o>0&&o<1)return{x:Gp((1-o)*r.x+o*n.x,5),y:Gp((1-o)*r.y+o*n.y,5)}}}r=n}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),FL=m((t,e,r)=>{G.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());const n=Zh(e,25),s=t?10:5,o=Math.atan2(e[0].y-n.y,e[0].x-n.x),a={x:0,y:0};return a.x=Math.sin(o)*s+(e[0].x+n.x)/2,a.y=-Math.cos(o)*s+(e[0].y+n.y)/2,a},"calcCardinalityPosition");function gb(t,e,r){const i=structuredClone(r);G.info("our points",i),e!=="start_left"&&e!=="start_right"&&i.reverse();const n=25+t,s=Zh(i,n),o=10+t*.5,a=Math.atan2(i[0].y-s.y,i[0].x-s.x),l={x:0,y:0};return e==="start_left"?(l.x=Math.sin(a+Math.PI)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a+Math.PI)*o+(i[0].y+s.y)/2):e==="end_right"?(l.x=Math.sin(a-Math.PI)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a-Math.PI)*o+(i[0].y+s.y)/2-5):e==="end_left"?(l.x=Math.sin(a)*o+(i[0].x+s.x)/2-5,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2-5):(l.x=Math.sin(a)*o+(i[0].x+s.x)/2,l.y=-Math.cos(a)*o+(i[0].y+s.y)/2),l}m(gb,"calcTerminalLabelPosition");function mb(t){let e="",r="";for(const i of t)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":e=e+i+";");return{style:e,labelStyle:r}}m(mb,"getStylesFromArray");var Yp=0,NL=m(()=>(Yp++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Yp),"generateId");function yb(t){let e="";const r="0123456789abcdef",i=r.length;for(let n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*i));return e}m(yb,"makeRandomHex");var jL=m(t=>yb(t.length),"random"),DL=m(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),qL=m(function(t,e){const r=e.text.replace(Zi.lineBreakRegex," "),[,i]=oo(e.fontSize),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.style("text-anchor",e.anchor),n.style("font-family",e.fontFamily),n.style("font-size",i),n.style("font-weight",e.fontWeight),n.attr("fill",e.fill),e.class!==void 0&&n.attr("class",e.class);const s=n.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(r),n},"drawSimpleText"),HL=ds((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),Zi.lineBreakRegex.test(t)))return t;const i=t.split(" ").filter(Boolean),n=[];let s="";return i.forEach((o,a)=>{const l=vr(`${o} `,r),c=vr(s,r);if(l>e){const{hyphenatedStrings:d,remainingWord:f}=zL(o,e,"-",r);n.push(s,...d),s=f}else c+l>=e?(n.push(s),s=o):s=[s,o].filter(Boolean).join(" ");a+1===i.length&&n.push(s)}),n.filter(o=>o!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),zL=ds((t,e,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const n=[...t],s=[];let o="";return n.forEach((a,l)=>{const c=`${o}${a}`;if(vr(c,i)>=e){const u=l+1,d=n.length===u,f=`${c}${r}`;s.push(d?c:f),o=""}else o=c}),{hyphenatedStrings:s,remainingWord:o}},(t,e,r="-",i)=>`${t}${e}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function bb(t,e){return Qh(t,e).height}m(bb,"calculateTextHeight");function vr(t,e){return Qh(t,e).width}m(vr,"calculateTextWidth");var Qh=ds((t,e)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:n=400}=e;if(!t)return{width:0,height:0};const[,s]=oo(r),o=["sans-serif",i],a=t.split(Zi.lineBreakRegex),l=[],c=wt("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const h=c.append("svg");for(const d of o){let f=0;const p={width:0,height:0,lineHeight:0};for(const g of a){const b=DL();b.text=g||BL;const x=qL(h,b).style("font-size",s).style("font-weight",n).style("font-family",d),w=(x._groups||x)[0][0].getBBox();if(w.width===0&&w.height===0)throw new Error("svg element not in render tree");p.width=Math.round(Math.max(p.width,w.width)),f=Math.round(w.height),p.height+=f,p.lineHeight=Math.round(Math.max(p.lineHeight,f))}l.push(p)}h.remove();const u=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[u]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Ni,WL=(Ni=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},m(Ni,"InitIDGenerator"),Ni),Ls,UL=m(function(t){return Ls=Ls||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Ls.innerHTML=t,unescape(Ls.textContent)},"entityDecode");function tu(t){return"str"in t}m(tu,"isDetailedError");var VL=m((t,e,r,i)=>{if(!i)return;const n=t.node()?.getBBox();n&&t.append("text").text(i).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-r).attr("class",e)},"insertTitle"),oo=m(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function eu(t,e){return LL({},t,e)}m(eu,"cleanAndMerge");var Ke={assignWithDepth:te,wrapLabel:HL,calculateTextHeight:bb,calculateTextWidth:vr,calculateTextDimensions:Qh,cleanAndMerge:eu,detectInit:$L,detectDirective:ub,isSubstringInArray:OL,interpolateToCurve:Jh,calcLabelPosition:pb,calcCardinalityPosition:FL,calcTerminalLabelPosition:gb,formatUrl:db,getStylesFromArray:mb,generateId:NL,random:jL,runFunc:PL,entityDecode:UL,insertTitle:VL,parseFontSize:oo,InitIDGenerator:WL},GL=m(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),e},"encodeEntities"),gi=m(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),s3=m((t,e,{counter:r=0,prefix:i,suffix:n},s)=>s||`${i?`${i}_`:""}${t}_${e}_${r}${n?`_${n}`:""}`,"getEdgeId");function de(t){return t??null}m(de,"handleUndefinedAttr");const YL=Object.freeze({left:0,top:0,width:16,height:16}),Sa=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),xb=Object.freeze({...YL,...Sa}),XL=Object.freeze({...xb,body:"",hidden:!1}),JL=Object.freeze({width:null,height:null}),KL=Object.freeze({...JL,...Sa}),ZL=(t,e,r,i="")=>{const n=t.split(":");if(t.slice(0,1)==="@"){if(n.length<2||n.length>3)return null;i=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){const a=n.pop(),l=n.pop(),c={provider:n.length>0?n[0]:i,prefix:l,name:a};return tc(c)?c:null}const s=n[0],o=s.split("-");if(o.length>1){const a={provider:i,prefix:o.shift(),name:o.join("-")};return tc(a)?a:null}if(r&&i===""){const a={provider:i,prefix:"",name:s};return tc(a,r)?a:null}return null},tc=(t,e)=>t?!!((e&&t.prefix===""||t.prefix)&&t.name):!1;function QL(t,e){const r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);const i=((t.rotate||0)+(e.rotate||0))%4;return i&&(r.rotate=i),r}function Xp(t,e){const r=QL(t,e);for(const i in XL)i in Sa?i in t&&!(i in r)&&(r[i]=Sa[i]):i in e?r[i]=e[i]:i in t&&(r[i]=t[i]);return r}function tB(t,e){const r=t.icons,i=t.aliases||Object.create(null),n=Object.create(null);function s(o){if(r[o])return n[o]=[];if(!(o in n)){n[o]=null;const a=i[o]&&i[o].parent,l=a&&s(a);l&&(n[o]=[a].concat(l))}return n[o]}return(e||Object.keys(r).concat(Object.keys(i))).forEach(s),n}function Jp(t,e,r){const i=t.icons,n=t.aliases||Object.create(null);let s={};function o(a){s=Xp(i[a]||n[a],s)}return o(e),r.forEach(o),Xp(t,s)}function eB(t,e){if(t.icons[e])return Jp(t,e,[]);const r=tB(t,[e])[e];return r?Jp(t,e,r):null}const rB=/(-?[0-9.]*[0-9]+[0-9.]*)/g,iB=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Kp(t,e,r){if(e===1)return t;if(r=r||100,typeof t=="number")return Math.ceil(t*e*r)/r;if(typeof t!="string")return t;const i=t.split(rB);if(i===null||!i.length)return t;const n=[];let s=i.shift(),o=iB.test(s);for(;;){if(o){const a=parseFloat(s);isNaN(a)?n.push(s):n.push(Math.ceil(a*e*r)/r)}else n.push(s);if(s=i.shift(),s===void 0)return n.join("");o=!o}}function nB(t,e="defs"){let r="";const i=t.indexOf("<"+e);for(;i>=0;){const n=t.indexOf(">",i),s=t.indexOf("</"+e);if(n===-1||s===-1)break;const o=t.indexOf(">",s);if(o===-1)break;r+=t.slice(n+1,s).trim(),t=t.slice(0,i).trim()+t.slice(o+1)}return{defs:r,content:t}}function sB(t,e){return t?"<defs>"+t+"</defs>"+e:e}function aB(t,e,r){const i=nB(t);return sB(i.defs,e+i.content+r)}const oB=t=>t==="unset"||t==="undefined"||t==="none";function lB(t,e){const r={...xb,...t},i={...KL,...e},n={left:r.left,top:r.top,width:r.width,height:r.height};let s=r.body;[r,i].forEach(g=>{const b=[],x=g.hFlip,w=g.vFlip;let L=g.rotate;x?w?L+=2:(b.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),b.push("scale(-1 1)"),n.top=n.left=0):w&&(b.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),b.push("scale(1 -1)"),n.top=n.left=0);let C;switch(L<0&&(L-=Math.floor(L/4)*4),L=L%4,L){case 1:C=n.height/2+n.top,b.unshift("rotate(90 "+C.toString()+" "+C.toString()+")");break;case 2:b.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:C=n.width/2+n.left,b.unshift("rotate(-90 "+C.toString()+" "+C.toString()+")");break}L%2===1&&(n.left!==n.top&&(C=n.left,n.left=n.top,n.top=C),n.width!==n.height&&(C=n.width,n.width=n.height,n.height=C)),b.length&&(s=aB(s,'<g transform="'+b.join(" ")+'">',"</g>"))});const o=i.width,a=i.height,l=n.width,c=n.height;let h,u;o===null?(u=a===null?"1em":a==="auto"?c:a,h=Kp(u,l/c)):(h=o==="auto"?l:o,u=a===null?Kp(h,c/l):a==="auto"?c:a);const d={},f=(g,b)=>{oB(b)||(d[g]=b.toString())};f("width",h),f("height",u);const p=[n.left,n.top,l,c];return d.viewBox=p.join(" "),{attributes:d,viewBox:p,body:s}}const cB=/\sid="(\S+)"/g,hB="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let uB=0;function dB(t,e=hB){const r=[];let i;for(;i=cB.exec(t);)r.push(i[1]);if(!r.length)return t;const n="suffix"+(Math.random()*16777216|Date.now()).toString(16);return r.forEach(s=>{const o=typeof e=="function"?e(s):e+(uB++).toString(),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+o+n+"$3")}),t=t.replace(new RegExp(n,"g"),""),t}function fB(t,e){let r=t.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const i in e)r+=" "+i+'="'+e[i]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}function ru(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var mi=ru();function _b(t){mi=t}var Un={exec:()=>null};function Tt(t,e=""){let r=typeof t=="string"?t:t.source,i={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(ue.caret,"$1"),r=r.replace(n,o),i},getRegex:()=>new RegExp(r,e)};return i}var ue={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},pB=/^(?:[ \t]*(?:\n|$))+/,gB=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,mB=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ps=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yB=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,iu=/(?:[*+-]|\d{1,9}[.)])/,wb=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,vb=Tt(wb).replace(/bull/g,iu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),bB=Tt(wb).replace(/bull/g,iu).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),nu=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,xB=/^[^\n]+/,su=/(?!\s*\])(?:\\.|[^\[\]\\])+/,_B=Tt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",su).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),wB=Tt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,iu).getRegex(),lo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",au=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,vB=Tt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",au).replace("tag",lo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cb=Tt(nu).replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lo).getRegex(),CB=Tt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cb).getRegex(),ou={blockquote:CB,code:gB,def:_B,fences:mB,heading:yB,hr:ps,html:vB,lheading:vb,list:wB,newline:pB,paragraph:Cb,table:Un,text:xB},Zp=Tt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lo).getRegex(),SB={...ou,lheading:bB,table:Zp,paragraph:Tt(nu).replace("hr",ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Zp).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lo).getRegex()},kB={...ou,html:Tt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",au).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Un,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Tt(nu).replace("hr",ps).replace("heading",` *#{1,6} *[^
]`).replace("lheading",vb).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},TB=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,EB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Sb=/^( {2,}|\\)\n(?!\s*$)/,AB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,co=/[\p{P}\p{S}]/u,lu=/[\s\p{P}\p{S}]/u,kb=/[^\s\p{P}\p{S}]/u,LB=Tt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,lu).getRegex(),Tb=/(?!~)[\p{P}\p{S}]/u,BB=/(?!~)[\s\p{P}\p{S}]/u,RB=/(?:[^\s\p{P}\p{S}]|~)/u,MB=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Eb=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,$B=Tt(Eb,"u").replace(/punct/g,co).getRegex(),IB=Tt(Eb,"u").replace(/punct/g,Tb).getRegex(),Ab="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",OB=Tt(Ab,"gu").replace(/notPunctSpace/g,kb).replace(/punctSpace/g,lu).replace(/punct/g,co).getRegex(),PB=Tt(Ab,"gu").replace(/notPunctSpace/g,RB).replace(/punctSpace/g,BB).replace(/punct/g,Tb).getRegex(),FB=Tt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,kb).replace(/punctSpace/g,lu).replace(/punct/g,co).getRegex(),NB=Tt(/\\(punct)/,"gu").replace(/punct/g,co).getRegex(),jB=Tt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),DB=Tt(au).replace("(?:-->|$)","-->").getRegex(),qB=Tt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",DB).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ka=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,HB=Tt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ka).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Lb=Tt(/^!?\[(label)\]\[(ref)\]/).replace("label",ka).replace("ref",su).getRegex(),Bb=Tt(/^!?\[(ref)\](?:\[\])?/).replace("ref",su).getRegex(),zB=Tt("reflink|nolink(?!\\()","g").replace("reflink",Lb).replace("nolink",Bb).getRegex(),cu={_backpedal:Un,anyPunctuation:NB,autolink:jB,blockSkip:MB,br:Sb,code:EB,del:Un,emStrongLDelim:$B,emStrongRDelimAst:OB,emStrongRDelimUnd:FB,escape:TB,link:HB,nolink:Bb,punctuation:LB,reflink:Lb,reflinkSearch:zB,tag:qB,text:AB,url:Un},WB={...cu,link:Tt(/^!?\[(label)\]\((.*?)\)/).replace("label",ka).getRegex(),reflink:Tt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ka).getRegex()},Hc={...cu,emStrongRDelimAst:PB,emStrongLDelim:IB,url:Tt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},UB={...Hc,br:Tt(Sb).replace("{2,}","*").getRegex(),text:Tt(Hc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Bs={normal:ou,gfm:SB,pedantic:kB},An={normal:cu,gfm:Hc,breaks:UB,pedantic:WB},VB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qp=t=>VB[t];function Ye(t,e){if(e){if(ue.escapeTest.test(t))return t.replace(ue.escapeReplace,Qp)}else if(ue.escapeTestNoEncode.test(t))return t.replace(ue.escapeReplaceNoEncode,Qp);return t}function tg(t){try{t=encodeURI(t).replace(ue.percentDecode,"%")}catch{return null}return t}function eg(t,e){let r=t.replace(ue.findPipe,(s,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=r.split(ue.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(ue.slashPipe,"|");return i}function Ln(t,e,r){let i=t.length;if(i===0)return"";let n=0;for(;n<i&&t.charAt(i-n-1)===e;)n++;return t.slice(0,i-n)}function GB(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function rg(t,e,r,i,n){let s=e.href,o=e.title||null,a=t[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:t[0].charAt(0)==="!"?"image":"link",raw:r,href:s,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,l}function YB(t,e,r){let i=t.match(r.other.indentCodeCompensation);if(i===null)return e;let n=i[1];return e.split(`
`).map(s=>{let o=s.match(r.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=n.length?s.slice(n.length):s}).join(`
`)}var Ta=class{options;rules;lexer;constructor(e){this.options=e||mi}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let i=r[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Ln(i,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let i=r[0],n=YB(i,r[3]||"",this.rules);return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:n}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(this.rules.other.endingHash.test(i)){let n=Ln(i,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(i=n.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:Ln(r[0],`
`)}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let i=Ln(r[0],`
`).split(`
`),n="",s="",o=[];for(;i.length>0;){let a=!1,l=[],c;for(c=0;c<i.length;c++)if(this.rules.other.blockquoteStart.test(i[c]))l.push(i[c]),a=!0;else if(!a)l.push(i[c]);else break;i=i.slice(c);let h=l.join(`
`),u=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${h}`:h,s=s?`${s}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,i.length===0)break;let f=o.at(-1);if(f?.type==="code")break;if(f?.type==="blockquote"){let p=f,g=p.raw+`
`+i.join(`
`),b=this.blockquote(g);o[o.length-1]=b,n=n.substring(0,n.length-p.raw.length)+b.raw,s=s.substring(0,s.length-p.text.length)+b.text;break}else if(f?.type==="list"){let p=f,g=p.raw+`
`+i.join(`
`),b=this.list(g);o[o.length-1]=b,n=n.substring(0,n.length-f.raw.length)+b.raw,s=s.substring(0,s.length-p.raw.length)+b.raw,i=g.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:s}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i=r[1].trim(),n=i.length>1,s={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");let o=this.rules.other.listItemRegex(i),a=!1;for(;e;){let c=!1,h="",u="";if(!(r=o.exec(e))||this.rules.block.hr.test(e))break;h=r[0],e=e.substring(h.length);let d=r[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,w=>" ".repeat(3*w.length)),f=e.split(`
`,1)[0],p=!d.trim(),g=0;if(this.options.pedantic?(g=2,u=d.trimStart()):p?g=r[1].length+1:(g=r[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,u=d.slice(g),g+=r[1].length),p&&this.rules.other.blankLine.test(f)&&(h+=f+`
`,e=e.substring(f.length+1),c=!0),!c){let w=this.rules.other.nextBulletRegex(g),L=this.rules.other.hrRegex(g),C=this.rules.other.fencesBeginRegex(g),v=this.rules.other.headingBeginRegex(g),A=this.rules.other.htmlBeginRegex(g);for(;e;){let I=e.split(`
`,1)[0],P;if(f=I,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),P=f):P=f.replace(this.rules.other.tabCharGlobal,"    "),C.test(f)||v.test(f)||A.test(f)||w.test(f)||L.test(f))break;if(P.search(this.rules.other.nonSpaceChar)>=g||!f.trim())u+=`
`+P.slice(g);else{if(p||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||C.test(d)||v.test(d)||L.test(d))break;u+=`
`+f}!p&&!f.trim()&&(p=!0),h+=I+`
`,e=e.substring(I.length+1),d=P.slice(g)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0));let b=null,x;this.options.gfm&&(b=this.rules.other.listIsTask.exec(u),b&&(x=b[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:h,task:!!b,checked:x,loose:!1,text:u,tokens:[]}),s.raw+=h}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let c=0;c<s.items.length;c++)if(this.lexer.state.top=!1,s.items[c].tokens=this.lexer.blockTokens(s.items[c].text,[]),!s.loose){let h=s.items[c].tokens.filter(d=>d.type==="space"),u=h.length>0&&h.some(d=>this.rules.other.anyLine.test(d.raw));s.loose=u}if(s.loose)for(let c=0;c<s.items.length;c++)s.items[c].loose=!0;return s}}html(e){let r=this.rules.block.html.exec(e);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(e){let r=this.rules.block.def.exec(e);if(r){let i=r[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=r[2]?r[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:n,title:s}}}table(e){let r=this.rules.block.table.exec(e);if(!r||!this.rules.other.tableDelimiter.test(r[2]))return;let i=eg(r[1]),n=r[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=r[3]?.trim()?r[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===n.length){for(let a of n)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<i.length;a++)o.header.push({text:i[a],tokens:this.lexer.inline(i[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(eg(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:r[1]}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&this.rules.other.startATag.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let i=r[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=Ln(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=GB(r[2],"()");if(o===-2)return;if(o>-1){let a=(r[0].indexOf("!")===0?5:4)+r[1].length+o;r[2]=r[2].substring(0,o),r[0]=r[0].substring(0,a).trim(),r[3]=""}}let n=r[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(n);o&&(n=o[1],s=o[3])}else s=r[3]?r[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?n=n.slice(1):n=n.slice(1,-1)),rg(r,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer,this.rules)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let n=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=r[n.toLowerCase()];if(!s){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return rg(i,s,i[0],this.lexer,this.rules)}}emStrong(e,r,i=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!i||this.rules.inline.punctuation.exec(i))){let s=[...n[0]].length-1,o,a,l=s,c=0,h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(n=h.exec(r))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(a=[...o].length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&s%3&&!((s+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let u=[...n[0]][0].length,d=e.slice(0,s+n.index+u+a);if(Math.min(s,a)%2){let p=d.slice(1,-1);return{type:"em",raw:d,text:p,tokens:this.lexer.inlineTokens(p)}}let f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(i),s=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return n&&s&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:r[0],text:i}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e){let r=this.rules.inline.autolink.exec(e);if(r){let i,n;return r[2]==="@"?(i=r[1],n="mailto:"+i):(i=r[1],n=i),{type:"link",raw:r[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let r;if(r=this.rules.inline.url.exec(e)){let i,n;if(r[2]==="@")i=r[0],n="mailto:"+i;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])?.[0]??"";while(s!==r[0]);i=r[0],r[1]==="www."?n="http://"+r[0]:n=r[0]}return{type:"link",raw:r[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){let r=this.rules.inline.text.exec(e);if(r){let i=this.lexer.state.inRawBlock;return{type:"text",raw:r[0],text:r[0],escaped:i}}}},yr=class zc{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||mi,this.options.tokenizer=this.options.tokenizer||new Ta,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:ue,block:Bs.normal,inline:An.normal};this.options.pedantic?(r.block=Bs.pedantic,r.inline=An.pedantic):this.options.gfm&&(r.block=Bs.gfm,this.options.breaks?r.inline=An.breaks:r.inline=An.gfm),this.tokenizer.rules=r}static get rules(){return{block:Bs,inline:An}}static lex(e,r){return new zc(r).lex(e)}static lexInline(e,r){return new zc(r).inlineTokens(e)}lex(e){e=e.replace(ue.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[],i=!1){for(this.options.pedantic&&(e=e.replace(ue.tabCharGlobal,"    ").replace(ue.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let o=r.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){let o=r.at(-1);i&&o?.type==="paragraph"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n),i=s.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let o=r.at(-1);o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):r.push(n);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i=e,n=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)a.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,r))?(e=e.substring(a.raw.length),r.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let c=r.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(e,i,o)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),r.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,h=e.slice(1),u;this.options.extensions.startInline.forEach(d=>{u=d.call({lexer:this},h),typeof u=="number"&&u>=0&&(c=Math.min(c,u))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;let c=r.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):r.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return r}},Ea=class{options;parser;constructor(e){this.options=e||mi}space(e){return""}code({text:e,lang:r,escaped:i}){let n=(r||"").match(ue.notSpaceStart)?.[0],s=e.replace(ue.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Ye(n)+'">'+(i?s:Ye(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Ye(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:r}){return`<h${r}>${this.parser.parseInline(e)}</h${r}>
`}hr(e){return`<hr>
`}list(e){let r=e.ordered,i=e.start,n="";for(let a=0;a<e.items.length;a++){let l=e.items[a];n+=this.listitem(l)}let s=r?"ol":"ul",o=r&&i!==1?' start="'+i+'"':"";return"<"+s+o+`>
`+n+"</"+s+`>
`}listitem(e){let r="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Ye(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):r+=i+" "}return r+=this.parser.parse(e.tokens,!!e.loose),`<li>${r}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let r="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);r+=this.tablerow({text:i});let n="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];i="";for(let a=0;a<o.length;a++)i+=this.tablecell(o[a]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+r+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let r=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+r+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Ye(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:r,tokens:i}){let n=this.parser.parseInline(i),s=tg(e);if(s===null)return n;e=s;let o='<a href="'+e+'"';return r&&(o+=' title="'+Ye(r)+'"'),o+=">"+n+"</a>",o}image({href:e,title:r,text:i,tokens:n}){n&&(i=this.parser.parseInline(n,this.parser.textRenderer));let s=tg(e);if(s===null)return Ye(i);e=s;let o=`<img src="${e}" alt="${i}"`;return r&&(o+=` title="${Ye(r)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Ye(e.text)}},hu=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},br=class Wc{options;renderer;textRenderer;constructor(e){this.options=e||mi,this.options.renderer=this.options.renderer||new Ea,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new hu}static parse(e,r){return new Wc(r).parse(e)}static parseInline(e,r){return new Wc(r).parseInline(e)}parse(e,r=!0){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=l||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],l+=`
`+this.renderer.text(a);r?i+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):i+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,r=this.renderer){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}let o=s;switch(o.type){case"escape":{i+=r.text(o);break}case"html":{i+=r.html(o);break}case"link":{i+=r.link(o);break}case"image":{i+=r.image(o);break}case"strong":{i+=r.strong(o);break}case"em":{i+=r.em(o);break}case"codespan":{i+=r.codespan(o);break}case"br":{i+=r.br(o);break}case"del":{i+=r.del(o);break}case"text":{i+=r.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},Gs=class{options;block;constructor(e){this.options=e||mi}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?yr.lex:yr.lexInline}provideParser(){return this.block?br.parse:br.parseInline}},XB=class{defaults=ru();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=br;Renderer=Ea;TextRenderer=hu;Lexer=yr;Tokenizer=Ta;Hooks=Gs;constructor(...e){this.use(...e)}walkTokens(e,r){let i=[];for(let n of e)switch(i=i.concat(r.call(this,n)),n.type){case"table":{let s=n;for(let o of s.header)i=i.concat(this.walkTokens(o.tokens,r));for(let o of s.rows)for(let a of o)i=i.concat(this.walkTokens(a.tokens,r));break}case"list":{let s=n;i=i.concat(this.walkTokens(s.items,r));break}default:{let s=n;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,r))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,r)))}}return i}use(...e){let r=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{let n={...i};if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=r.renderers[s.name];o?r.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=r[s.level];o?o.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),n.extensions=r),i.renderer){let s=this.defaults.renderer||new Ea(this.defaults);for(let o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=i.renderer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u||""}}n.renderer=s}if(i.tokenizer){let s=this.defaults.tokenizer||new Ta(this.defaults);for(let o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=i.tokenizer[a],c=s[a];s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}n.tokenizer=s}if(i.hooks){let s=this.defaults.hooks||new Gs;for(let o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=i.hooks[a],c=s[a];Gs.passThroughHooks.has(o)?s[a]=h=>{if(this.defaults.async)return Promise.resolve(l.call(s,h)).then(d=>c.call(s,d));let u=l.call(s,h);return c.call(s,u)}:s[a]=(...h)=>{let u=l.apply(s,h);return u===!1&&(u=c.apply(s,h)),u}}n.hooks=s}if(i.walkTokens){let s=this.defaults.walkTokens,o=i.walkTokens;n.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,r){return yr.lex(e,r??this.defaults)}parser(e,r){return br.parse(e,r??this.defaults)}parseMarkdown(e){return(r,i)=>{let n={...i},s={...this.defaults,...n},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&n.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);let a=s.hooks?s.hooks.provideLexer():e?yr.lex:yr.lexInline,l=s.hooks?s.hooks.provideParser():e?br.parse:br.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(c=>a(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(o);try{s.hooks&&(r=s.hooks.preprocess(r));let c=a(r,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let h=l(c,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(c){return o(c)}}}onError(e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let n="<p>An error occurred:</p><pre>"+Ye(i.message+"",!0)+"</pre>";return r?Promise.resolve(n):n}if(r)return Promise.reject(i);throw i}}},hi=new XB;function kt(t,e){return hi.parse(t,e)}kt.options=kt.setOptions=function(t){return hi.setOptions(t),kt.defaults=hi.defaults,_b(kt.defaults),kt};kt.getDefaults=ru;kt.defaults=mi;kt.use=function(...t){return hi.use(...t),kt.defaults=hi.defaults,_b(kt.defaults),kt};kt.walkTokens=function(t,e){return hi.walkTokens(t,e)};kt.parseInline=hi.parseInline;kt.Parser=br;kt.parser=br.parse;kt.Renderer=Ea;kt.TextRenderer=hu;kt.Lexer=yr;kt.lexer=yr.lex;kt.Tokenizer=Ta;kt.Hooks=Gs;kt.parse=kt;kt.options;kt.setOptions;kt.use;kt.walkTokens;kt.parseInline;br.parse;yr.lex;function Rb(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Array.from(typeof t=="string"?[t]:t);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var n=i.reduce(function(a,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?a.concat(c.map(function(h){var u,d;return(d=(u=h.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&d!==void 0?d:0})):a},[]);if(n.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");i=i.map(function(a){return a.replace(s,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var o=i[0];return e.forEach(function(a,l){var c=o.match(/(?:^|\n)( *)$/),h=c?c[1]:"",u=a;typeof a=="string"&&a.includes(`
`)&&(u=String(a).split(`
`).map(function(d,f){return f===0?d:""+h+d}).join(`
`)),o+=u+i[l+1]}),o}var JB={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Uc=new Map,Mb=new Map,KB=m(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(G.debug("Registering icon pack:",e.name),"loader"in e)Mb.set(e.name,e.loader);else if("icons"in e)Uc.set(e.name,e.icons);else throw G.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),$b=m(async(t,e)=>{const r=ZL(t,!0,e!==void 0);if(!r)throw new Error(`Invalid icon name: ${t}`);const i=r.prefix||e;if(!i)throw new Error(`Icon name must contain a prefix: ${t}`);let n=Uc.get(i);if(!n){const o=Mb.get(i);if(!o)throw new Error(`Icon set not found: ${r.prefix}`);try{n={...await o(),prefix:i},Uc.set(i,n)}catch(a){throw G.error(a),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=eB(n,r.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),ZB=m(async t=>{try{return await $b(t),!0}catch{return!1}},"isIconAvailable"),gs=m(async(t,e,r)=>{let i;try{i=await $b(t,e?.fallbackPrefix)}catch(o){G.error(o),i=JB}const n=lB(i,e);return fB(dB(n.body),{...n.attributes,...r})},"getIconSVG");function Ib(t,{markdownAutoWrap:e}){const i=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),n=Rb(i);return e===!1?n.replace(/ /g,"&nbsp;"):n}m(Ib,"preprocessMarkdown");function Ob(t,e={}){const r=Ib(t,e),i=kt.lexer(r),n=[[]];let s=0;function o(a,l="normal"){a.type==="text"?a.text.split(`
`).forEach((h,u)=>{u!==0&&(s++,n.push([])),h.split(" ").forEach(d=>{d=d.replace(/&#39;/g,"'"),d&&n[s].push({content:d,type:l})})}):a.type==="strong"||a.type==="em"?a.tokens.forEach(c=>{o(c,a.type)}):a.type==="html"&&n[s].push({content:a.text,type:"normal"})}return m(o,"processNode"),i.forEach(a=>{a.type==="paragraph"?a.tokens?.forEach(l=>{o(l)}):a.type==="html"&&n[s].push({content:a.text,type:"normal"})}),n}m(Ob,"markdownToLines");function Pb(t,{markdownAutoWrap:e}={}){const r=kt.lexer(t);function i(n){return n.type==="text"?e===!1?n.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):n.text.replace(/\n */g,"<br/>"):n.type==="strong"?`<strong>${n.tokens?.map(i).join("")}</strong>`:n.type==="em"?`<em>${n.tokens?.map(i).join("")}</em>`:n.type==="paragraph"?`<p>${n.tokens?.map(i).join("")}</p>`:n.type==="space"?"":n.type==="html"?`${n.text}`:n.type==="escape"?n.text:`Unsupported markdown: ${n.type}`}return m(i,"output"),r.map(i).join("")}m(Pb,"markdownToHTML");function Fb(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}m(Fb,"splitTextToChars");function Nb(t,e){const r=Fb(e.content);return uu(t,[],r,e.type)}m(Nb,"splitWordToFitWidth");function uu(t,e,r,i){if(r.length===0)return[{content:e.join(""),type:i},{content:"",type:i}];const[n,...s]=r,o=[...e,n];return t([{content:o.join(""),type:i}])?uu(t,o,s,i):(e.length===0&&n&&(e.push(n),r.shift()),[{content:e.join(""),type:i},{content:r.join(""),type:i}])}m(uu,"splitWordToFitWidthRecursion");function jb(t,e){if(t.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return Aa(t,e)}m(jb,"splitLineToFitWidth");function Aa(t,e,r=[],i=[]){if(t.length===0)return i.length>0&&r.push(i),r.length>0?r:[];let n="";t[0].content===" "&&(n=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},o=[...i];if(n!==""&&o.push({content:n,type:"normal"}),o.push(s),e(o))return Aa(t,e,r,o);if(i.length>0)r.push(i),t.unshift(s);else if(s.content){const[a,l]=Nb(e,s);r.push([a]),l.content&&t.unshift(l)}return Aa(t,e,r)}m(Aa,"splitLineToFitWidthRecursion");function Vc(t,e){e&&t.attr("style",e)}m(Vc,"applyStyle");async function Db(t,e,r,i,n=!1){const s=t.append("foreignObject");s.attr("width",`${10*r}px`),s.attr("height",`${10*r}px`);const o=s.append("xhtml:div");let a=e.label;e.label&&zi(e.label)&&(a=await wh(e.label.replace(Zi.lineBreakRegex,`
`),St()));const l=e.isNode?"nodeLabel":"edgeLabel",c=o.append("span");c.html(a),Vc(c,e.labelStyle),c.attr("class",`${l} ${i}`),Vc(o,e.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&o.attr("class","labelBkg");let h=o.node().getBoundingClientRect();return h.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),h=o.node().getBoundingClientRect()),s.node()}m(Db,"addHtmlSpan");function ho(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}m(ho,"createTspan");function qb(t,e,r){const i=t.append("text"),n=ho(i,1,e);uo(n,r);const s=n.node().getComputedTextLength();return i.remove(),s}m(qb,"computeWidthOfText");function QB(t,e,r){const i=t.append("text"),n=ho(i,1,e);uo(n,[{content:r,type:"normal"}]);const s=n.node()?.getBoundingClientRect();return s&&i.remove(),s}m(QB,"computeDimensionOfText");function Hb(t,e,r,i=!1){const s=e.append("g"),o=s.insert("rect").attr("class","background").attr("style","stroke: none"),a=s.append("text").attr("y","-10.1");let l=0;for(const c of r){const h=m(d=>qb(s,1.1,d)<=t,"checkWidth"),u=h(c)?[c]:jb(c,h);for(const d of u){const f=ho(a,l,1.1);uo(f,d),l++}}if(i){const c=a.node().getBBox(),h=2;return o.attr("x",c.x-h).attr("y",c.y-h).attr("width",c.width+2*h).attr("height",c.height+2*h),s.node()}else return a.node()}m(Hb,"createFormattedText");function uo(t,e){t.text(""),e.forEach((r,i)=>{const n=t.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");i===0?n.text(r.content):n.text(" "+r.content)})}m(uo,"updateTextContentAndStyles");async function zb(t){const e=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(i,n,s)=>(e.push((async()=>{const o=`${n}:${s}`;return await ZB(o)?await gs(o,void 0,{class:"label-icon"}):`<i class='${Ya(i).replace(":"," ")}'></i>`})()),i));const r=await Promise.all(e);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}m(zb,"replaceIconSubstring");var jr=m(async(t,e="",{style:r="",isTitle:i=!1,classes:n="",useHtmlLabels:s=!0,isNode:o=!0,width:a=200,addSvgBackground:l=!1}={},c)=>{if(G.debug("XYZ createText",e,r,i,n,s,o,"addSvgBackground: ",l),s){const h=Pb(e,c),u=await zb(gi(h)),d=e.replace(/\\\\/g,"\\"),f={isNode:o,label:zi(e)?d:u,labelStyle:r.replace("fill:","color:")};return await Db(t,f,a,n,l)}else{const h=e.replace(/<br\s*\/?>/g,"<br/>"),u=Ob(h.replace("<br>","<br/>"),c),d=Hb(a,t,u,e?l:!1);if(o){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");wt(d).attr("style",f)}else{const f=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");wt(d).select("rect").attr("style",f.replace(/background:/g,"fill:"));const p=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");wt(d).select("text").attr("style",p)}return d}},"createText");function ec(t,e,r){if(t&&t.length){const[i,n]=e,s=Math.PI/180*r,o=Math.cos(s),a=Math.sin(s);for(const l of t){const[c,h]=l;l[0]=(c-i)*o-(h-n)*a+i,l[1]=(c-i)*a+(h-n)*o+n}}}function tR(t,e){return t[0]===e[0]&&t[1]===e[1]}function eR(t,e,r,i=1){const n=r,s=Math.max(e,.1),o=t[0]&&t[0][0]&&typeof t[0][0]=="number"?[t]:t,a=[0,0];if(n)for(const c of o)ec(c,a,n);const l=function(c,h,u){const d=[];for(const w of c){const L=[...w];tR(L[0],L[L.length-1])||L.push([L[0][0],L[0][1]]),L.length>2&&d.push(L)}const f=[];h=Math.max(h,.1);const p=[];for(const w of d)for(let L=0;L<w.length-1;L++){const C=w[L],v=w[L+1];if(C[1]!==v[1]){const A=Math.min(C[1],v[1]);p.push({ymin:A,ymax:Math.max(C[1],v[1]),x:A===C[1]?C[0]:v[0],islope:(v[0]-C[0])/(v[1]-C[1])})}}if(p.sort((w,L)=>w.ymin<L.ymin?-1:w.ymin>L.ymin?1:w.x<L.x?-1:w.x>L.x?1:w.ymax===L.ymax?0:(w.ymax-L.ymax)/Math.abs(w.ymax-L.ymax)),!p.length)return f;let g=[],b=p[0].ymin,x=0;for(;g.length||p.length;){if(p.length){let w=-1;for(let L=0;L<p.length&&!(p[L].ymin>b);L++)w=L;p.splice(0,w+1).forEach(L=>{g.push({s:b,edge:L})})}if(g=g.filter(w=>!(w.edge.ymax<=b)),g.sort((w,L)=>w.edge.x===L.edge.x?0:(w.edge.x-L.edge.x)/Math.abs(w.edge.x-L.edge.x)),(u!==1||x%h==0)&&g.length>1)for(let w=0;w<g.length;w+=2){const L=w+1;if(L>=g.length)break;const C=g[w].edge,v=g[L].edge;f.push([[Math.round(C.x),b],[Math.round(v.x),b]])}b+=u,g.forEach(w=>{w.edge.x=w.edge.x+u*w.edge.islope}),x++}return f}(o,s,i);if(n){for(const c of o)ec(c,a,-n);(function(c,h,u){const d=[];c.forEach(f=>d.push(...f)),ec(d,h,u)})(l,a,-n)}return l}function ms(t,e){var r;const i=e.hachureAngle+90;let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let s=1;return e.roughness>=1&&(((r=e.randomizer)===null||r===void 0?void 0:r.next())||Math.random())>.7&&(s=n),eR(t,n,i,s||1)}class du{constructor(e){this.helper=e}fillPolygons(e,r){return this._fillPolygons(e,r)}_fillPolygons(e,r){const i=ms(e,r);return{type:"fillSketch",ops:this.renderLines(i,r)}}renderLines(e,r){const i=[];for(const n of e)i.push(...this.helper.doubleLineOps(n[0][0],n[0][1],n[1][0],n[1][1],r));return i}}function fo(t){const e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}class rR extends du{fillPolygons(e,r){let i=r.hachureGap;i<0&&(i=4*r.strokeWidth),i=Math.max(i,.1);const n=ms(e,Object.assign({},r,{hachureGap:i})),s=Math.PI/180*r.hachureAngle,o=[],a=.5*i*Math.cos(s),l=.5*i*Math.sin(s);for(const[c,h]of n)fo([c,h])&&o.push([[c[0]-a,c[1]+l],[...h]],[[c[0]+a,c[1]-l],[...h]]);return{type:"fillSketch",ops:this.renderLines(o,r)}}}class iR extends du{fillPolygons(e,r){const i=this._fillPolygons(e,r),n=Object.assign({},r,{hachureAngle:r.hachureAngle+90}),s=this._fillPolygons(e,n);return i.ops=i.ops.concat(s.ops),i}}class nR{constructor(e){this.helper=e}fillPolygons(e,r){const i=ms(e,r=Object.assign({},r,{hachureAngle:0}));return this.dotsOnLines(i,r)}dotsOnLines(e,r){const i=[];let n=r.hachureGap;n<0&&(n=4*r.strokeWidth),n=Math.max(n,.1);let s=r.fillWeight;s<0&&(s=r.strokeWidth/2);const o=n/4;for(const a of e){const l=fo(a),c=l/n,h=Math.ceil(c)-1,u=l-h*n,d=(a[0][0]+a[1][0])/2-n/4,f=Math.min(a[0][1],a[1][1]);for(let p=0;p<h;p++){const g=f+u+p*n,b=d-o+2*Math.random()*o,x=g-o+2*Math.random()*o,w=this.helper.ellipse(b,x,s,s,r);i.push(...w.ops)}}return{type:"fillSketch",ops:i}}}class sR{constructor(e){this.helper=e}fillPolygons(e,r){const i=ms(e,r);return{type:"fillSketch",ops:this.dashedLine(i,r)}}dashedLine(e,r){const i=r.dashOffset<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashOffset,n=r.dashGap<0?r.hachureGap<0?4*r.strokeWidth:r.hachureGap:r.dashGap,s=[];return e.forEach(o=>{const a=fo(o),l=Math.floor(a/(i+n)),c=(a+n-l*(i+n))/2;let h=o[0],u=o[1];h[0]>u[0]&&(h=o[1],u=o[0]);const d=Math.atan((u[1]-h[1])/(u[0]-h[0]));for(let f=0;f<l;f++){const p=f*(i+n),g=p+i,b=[h[0]+p*Math.cos(d)+c*Math.cos(d),h[1]+p*Math.sin(d)+c*Math.sin(d)],x=[h[0]+g*Math.cos(d)+c*Math.cos(d),h[1]+g*Math.sin(d)+c*Math.sin(d)];s.push(...this.helper.doubleLineOps(b[0],b[1],x[0],x[1],r))}}),s}}class aR{constructor(e){this.helper=e}fillPolygons(e,r){const i=r.hachureGap<0?4*r.strokeWidth:r.hachureGap,n=r.zigzagOffset<0?i:r.zigzagOffset,s=ms(e,r=Object.assign({},r,{hachureGap:i+n}));return{type:"fillSketch",ops:this.zigzagLines(s,n,r)}}zigzagLines(e,r,i){const n=[];return e.forEach(s=>{const o=fo(s),a=Math.round(o/(2*r));let l=s[0],c=s[1];l[0]>c[0]&&(l=s[1],c=s[0]);const h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<a;u++){const d=2*u*r,f=2*(u+1)*r,p=Math.sqrt(2*Math.pow(r,2)),g=[l[0]+d*Math.cos(h),l[1]+d*Math.sin(h)],b=[l[0]+f*Math.cos(h),l[1]+f*Math.sin(h)],x=[g[0]+p*Math.cos(h+Math.PI/4),g[1]+p*Math.sin(h+Math.PI/4)];n.push(...this.helper.doubleLineOps(g[0],g[1],x[0],x[1],i),...this.helper.doubleLineOps(x[0],x[1],b[0],b[1],i))}}),n}}const ye={};class oR{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const lR=0,rc=1,ig=2,Rs={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ic(t,e){return t.type===e}function fu(t){const e=[],r=function(o){const a=new Array;for(;o!=="";)if(o.match(/^([ \t\r\n,]+)/))o=o.substr(RegExp.$1.length);else if(o.match(/^([aAcChHlLmMqQsStTvVzZ])/))a[a.length]={type:lR,text:RegExp.$1},o=o.substr(RegExp.$1.length);else{if(!o.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];a[a.length]={type:rc,text:`${parseFloat(RegExp.$1)}`},o=o.substr(RegExp.$1.length)}return a[a.length]={type:ig,text:""},a}(t);let i="BOD",n=0,s=r[n];for(;!ic(s,ig);){let o=0;const a=[];if(i==="BOD"){if(s.text!=="M"&&s.text!=="m")return fu("M0,0"+t);n++,o=Rs[s.text],i=s.text}else ic(s,rc)?o=Rs[i]:(n++,o=Rs[s.text],i=s.text);if(!(n+o<r.length))throw new Error("Path data ended short");for(let l=n;l<n+o;l++){const c=r[l];if(!ic(c,rc))throw new Error("Param not a number: "+i+","+c.text);a[a.length]=+c.text}if(typeof Rs[i]!="number")throw new Error("Bad segment: "+i);{const l={key:i,data:a};e.push(l),n+=o,s=r[n],i==="M"&&(i="L"),i==="m"&&(i="l")}}return e}function Wb(t){let e=0,r=0,i=0,n=0;const s=[];for(const{key:o,data:a}of t)switch(o){case"M":s.push({key:"M",data:[...a]}),[e,r]=a,[i,n]=a;break;case"m":e+=a[0],r+=a[1],s.push({key:"M",data:[e,r]}),i=e,n=r;break;case"L":s.push({key:"L",data:[...a]}),[e,r]=a;break;case"l":e+=a[0],r+=a[1],s.push({key:"L",data:[e,r]});break;case"C":s.push({key:"C",data:[...a]}),e=a[4],r=a[5];break;case"c":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"C",data:l}),e=l[4],r=l[5];break}case"Q":s.push({key:"Q",data:[...a]}),e=a[2],r=a[3];break;case"q":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"Q",data:l}),e=l[2],r=l[3];break}case"A":s.push({key:"A",data:[...a]}),e=a[5],r=a[6];break;case"a":e+=a[5],r+=a[6],s.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],e,r]});break;case"H":s.push({key:"H",data:[...a]}),e=a[0];break;case"h":e+=a[0],s.push({key:"H",data:[e]});break;case"V":s.push({key:"V",data:[...a]}),r=a[0];break;case"v":r+=a[0],s.push({key:"V",data:[r]});break;case"S":s.push({key:"S",data:[...a]}),e=a[2],r=a[3];break;case"s":{const l=a.map((c,h)=>h%2?c+r:c+e);s.push({key:"S",data:l}),e=l[2],r=l[3];break}case"T":s.push({key:"T",data:[...a]}),e=a[0],r=a[1];break;case"t":e+=a[0],r+=a[1],s.push({key:"T",data:[e,r]});break;case"Z":case"z":s.push({key:"Z",data:[]}),e=i,r=n}return s}function Ub(t){const e=[];let r="",i=0,n=0,s=0,o=0,a=0,l=0;for(const{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[i,n]=h,[s,o]=h;break;case"C":e.push({key:"C",data:[...h]}),i=h[4],n=h[5],a=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[i,n]=h;break;case"H":i=h[0],e.push({key:"L",data:[i,n]});break;case"V":n=h[0],e.push({key:"L",data:[i,n]});break;case"S":{let u=0,d=0;r==="C"||r==="S"?(u=i+(i-a),d=n+(n-l)):(u=i,d=n),e.push({key:"C",data:[u,d,...h]}),a=h[0],l=h[1],i=h[2],n=h[3];break}case"T":{const[u,d]=h;let f=0,p=0;r==="Q"||r==="T"?(f=i+(i-a),p=n+(n-l)):(f=i,p=n);const g=i+2*(f-i)/3,b=n+2*(p-n)/3,x=u+2*(f-u)/3,w=d+2*(p-d)/3;e.push({key:"C",data:[g,b,x,w,u,d]}),a=f,l=p,i=u,n=d;break}case"Q":{const[u,d,f,p]=h,g=i+2*(u-i)/3,b=n+2*(d-n)/3,x=f+2*(u-f)/3,w=p+2*(d-p)/3;e.push({key:"C",data:[g,b,x,w,f,p]}),a=u,l=d,i=f,n=p;break}case"A":{const u=Math.abs(h[0]),d=Math.abs(h[1]),f=h[2],p=h[3],g=h[4],b=h[5],x=h[6];u===0||d===0?(e.push({key:"C",data:[i,n,b,x,b,x]}),i=b,n=x):(i!==b||n!==x)&&(Vb(i,n,b,x,u,d,f,p,g).forEach(function(w){e.push({key:"C",data:w})}),i=b,n=x);break}case"Z":e.push({key:"Z",data:[]}),i=s,n=o}r=c}return e}function Bn(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function Vb(t,e,r,i,n,s,o,a,l,c){const h=(u=o,Math.PI*u/180);var u;let d=[],f=0,p=0,g=0,b=0;if(c)[f,p,g,b]=c;else{[t,e]=Bn(t,e,-h),[r,i]=Bn(r,i,-h);const E=(t-r)/2,k=(e-i)/2;let T=E*E/(n*n)+k*k/(s*s);T>1&&(T=Math.sqrt(T),n*=T,s*=T);const M=n*n,N=s*s,D=M*N-M*k*k-N*E*E,O=M*k*k+N*E*E,B=(a===l?-1:1)*Math.sqrt(Math.abs(D/O));g=B*n*k/s+(t+r)/2,b=B*-s*E/n+(e+i)/2,f=Math.asin(parseFloat(((e-b)/s).toFixed(9))),p=Math.asin(parseFloat(((i-b)/s).toFixed(9))),t<g&&(f=Math.PI-f),r<g&&(p=Math.PI-p),f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),l&&f>p&&(f-=2*Math.PI),!l&&p>f&&(p-=2*Math.PI)}let x=p-f;if(Math.abs(x)>120*Math.PI/180){const E=p,k=r,T=i;p=l&&p>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,d=Vb(r=g+n*Math.cos(p),i=b+s*Math.sin(p),k,T,n,s,o,0,l,[p,E,g,b])}x=p-f;const w=Math.cos(f),L=Math.sin(f),C=Math.cos(p),v=Math.sin(p),A=Math.tan(x/4),I=4/3*n*A,P=4/3*s*A,R=[t,e],_=[t+I*L,e-P*w],S=[r+I*v,i-P*C],$=[r,i];if(_[0]=2*R[0]-_[0],_[1]=2*R[1]-_[1],c)return[_,S,$].concat(d);{d=[_,S,$].concat(d);const E=[];for(let k=0;k<d.length;k+=3){const T=Bn(d[k][0],d[k][1],h),M=Bn(d[k+1][0],d[k+1][1],h),N=Bn(d[k+2][0],d[k+2][1],h);E.push([T[0],T[1],M[0],M[1],N[0],N[1]])}return E}}const cR={randOffset:function(t,e){return ut(t,e)},randOffsetWithRange:function(t,e,r){return La(t,e,r)},ellipse:function(t,e,r,i,n){const s=Yb(r,i,n);return Gc(t,e,n,s).opset},doubleLineOps:function(t,e,r,i,n){return Or(t,e,r,i,n,!0)}};function Gb(t,e,r,i,n){return{type:"path",ops:Or(t,e,r,i,n)}}function Ys(t,e,r){const i=(t||[]).length;if(i>2){const n=[];for(let s=0;s<i-1;s++)n.push(...Or(t[s][0],t[s][1],t[s+1][0],t[s+1][1],r));return e&&n.push(...Or(t[i-1][0],t[i-1][1],t[0][0],t[0][1],r)),{type:"path",ops:n}}return i===2?Gb(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function hR(t,e,r,i,n){return function(s,o){return Ys(s,!0,o)}([[t,e],[t+r,e],[t+r,e+i],[t,e+i]],n)}function ng(t,e){if(t.length){const r=typeof t[0][0]=="number"?[t]:t,i=Ms(r[0],1*(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:Ms(r[0],1.5*(1+.22*e.roughness),og(e));for(let s=1;s<r.length;s++){const o=r[s];if(o.length){const a=Ms(o,1*(1+.2*e.roughness),e),l=e.disableMultiStroke?[]:Ms(o,1.5*(1+.22*e.roughness),og(e));for(const c of a)c.op!=="move"&&i.push(c);for(const c of l)c.op!=="move"&&n.push(c)}}return{type:"path",ops:i.concat(n)}}return{type:"path",ops:[]}}function Yb(t,e,r){const i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),s=2*Math.PI/n;let o=Math.abs(t/2),a=Math.abs(e/2);const l=1-r.curveFitting;return o+=ut(o*l,r),a+=ut(a*l,r),{increment:s,rx:o,ry:a}}function Gc(t,e,r,i){const[n,s]=lg(i.increment,t,e,i.rx,i.ry,1,i.increment*La(.1,La(.4,1,r),r),r);let o=Ba(n,null,r);if(!r.disableMultiStroke&&r.roughness!==0){const[a]=lg(i.increment,t,e,i.rx,i.ry,1.5,0,r),l=Ba(a,null,r);o=o.concat(l)}return{estimatedPoints:s,opset:{type:"path",ops:o}}}function sg(t,e,r,i,n,s,o,a,l){const c=t,h=e;let u=Math.abs(r/2),d=Math.abs(i/2);u+=ut(.01*u,l),d+=ut(.01*d,l);let f=n,p=s;for(;f<0;)f+=2*Math.PI,p+=2*Math.PI;p-f>2*Math.PI&&(f=0,p=2*Math.PI);const g=2*Math.PI/l.curveStepCount,b=Math.min(g/2,(p-f)/2),x=cg(b,c,h,u,d,f,p,1,l);if(!l.disableMultiStroke){const w=cg(b,c,h,u,d,f,p,1.5,l);x.push(...w)}return o&&(a?x.push(...Or(c,h,c+u*Math.cos(f),h+d*Math.sin(f),l),...Or(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l)):x.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(f),h+d*Math.sin(f)]})),{type:"path",ops:x}}function ag(t,e){const r=Ub(Wb(fu(t))),i=[];let n=[0,0],s=[0,0];for(const{key:o,data:a}of r)switch(o){case"M":s=[a[0],a[1]],n=[a[0],a[1]];break;case"L":i.push(...Or(s[0],s[1],a[0],a[1],e)),s=[a[0],a[1]];break;case"C":{const[l,c,h,u,d,f]=a;i.push(...uR(l,c,h,u,d,f,s,e)),s=[d,f];break}case"Z":i.push(...Or(s[0],s[1],n[0],n[1],e)),s=[n[0],n[1]]}return{type:"path",ops:i}}function nc(t,e){const r=[];for(const i of t)if(i.length){const n=e.maxRandomnessOffset||0,s=i.length;if(s>2){r.push({op:"move",data:[i[0][0]+ut(n,e),i[0][1]+ut(n,e)]});for(let o=1;o<s;o++)r.push({op:"lineTo",data:[i[o][0]+ut(n,e),i[o][1]+ut(n,e)]})}}return{type:"fillPath",ops:r}}function Si(t,e){return function(r,i){let n=r.fillStyle||"hachure";if(!ye[n])switch(n){case"zigzag":ye[n]||(ye[n]=new rR(i));break;case"cross-hatch":ye[n]||(ye[n]=new iR(i));break;case"dots":ye[n]||(ye[n]=new nR(i));break;case"dashed":ye[n]||(ye[n]=new sR(i));break;case"zigzag-line":ye[n]||(ye[n]=new aR(i));break;default:n="hachure",ye[n]||(ye[n]=new du(i))}return ye[n]}(e,cR).fillPolygons(t,e)}function og(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function Xb(t){return t.randomizer||(t.randomizer=new oR(t.seed||0)),t.randomizer.next()}function La(t,e,r,i=1){return r.roughness*i*(Xb(r)*(e-t)+t)}function ut(t,e,r=1){return La(-t,t,e,r)}function Or(t,e,r,i,n,s=!1){const o=s?n.disableMultiStrokeFill:n.disableMultiStroke,a=Yc(t,e,r,i,n,!0,!1);if(o)return a;const l=Yc(t,e,r,i,n,!0,!0);return a.concat(l)}function Yc(t,e,r,i,n,s,o){const a=Math.pow(t-r,2)+Math.pow(e-i,2),l=Math.sqrt(a);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>a&&(h=l/10);const u=h/2,d=.2+.2*Xb(n);let f=n.bowing*n.maxRandomnessOffset*(i-e)/200,p=n.bowing*n.maxRandomnessOffset*(t-r)/200;f=ut(f,n,c),p=ut(p,n,c);const g=[],b=()=>ut(u,n,c),x=()=>ut(h,n,c),w=n.preserveVertices;return o?g.push({op:"move",data:[t+(w?0:b()),e+(w?0:b())]}):g.push({op:"move",data:[t+(w?0:ut(h,n,c)),e+(w?0:ut(h,n,c))]}),o?g.push({op:"bcurveTo",data:[f+t+(r-t)*d+b(),p+e+(i-e)*d+b(),f+t+2*(r-t)*d+b(),p+e+2*(i-e)*d+b(),r+(w?0:b()),i+(w?0:b())]}):g.push({op:"bcurveTo",data:[f+t+(r-t)*d+x(),p+e+(i-e)*d+x(),f+t+2*(r-t)*d+x(),p+e+2*(i-e)*d+x(),r+(w?0:x()),i+(w?0:x())]}),g}function Ms(t,e,r){if(!t.length)return[];const i=[];i.push([t[0][0]+ut(e,r),t[0][1]+ut(e,r)]),i.push([t[0][0]+ut(e,r),t[0][1]+ut(e,r)]);for(let n=1;n<t.length;n++)i.push([t[n][0]+ut(e,r),t[n][1]+ut(e,r)]),n===t.length-1&&i.push([t[n][0]+ut(e,r),t[n][1]+ut(e,r)]);return Ba(i,null,r)}function Ba(t,e,r){const i=t.length,n=[];if(i>3){const s=[],o=1-r.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let a=1;a+2<i;a++){const l=t[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*t[a+1][0]-o*t[a-1][0])/6,l[1]+(o*t[a+1][1]-o*t[a-1][1])/6],s[2]=[t[a+1][0]+(o*t[a][0]-o*t[a+2][0])/6,t[a+1][1]+(o*t[a][1]-o*t[a+2][1])/6],s[3]=[t[a+1][0],t[a+1][1]],n.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[3][0],s[3][1]]})}}else i===3?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):i===2&&n.push(...Yc(t[0][0],t[0][1],t[1][0],t[1][1],r,!0,!0));return n}function lg(t,e,r,i,n,s,o,a){const l=[],c=[];if(a.roughness===0){t/=4,c.push([e+i*Math.cos(-t),r+n*Math.sin(-t)]);for(let h=0;h<=2*Math.PI;h+=t){const u=[e+i*Math.cos(h),r+n*Math.sin(h)];l.push(u),c.push(u)}c.push([e+i*Math.cos(0),r+n*Math.sin(0)]),c.push([e+i*Math.cos(t),r+n*Math.sin(t)])}else{const h=ut(.5,a)-Math.PI/2;c.push([ut(s,a)+e+.9*i*Math.cos(h-t),ut(s,a)+r+.9*n*Math.sin(h-t)]);const u=2*Math.PI+h-.01;for(let d=h;d<u;d+=t){const f=[ut(s,a)+e+i*Math.cos(d),ut(s,a)+r+n*Math.sin(d)];l.push(f),c.push(f)}c.push([ut(s,a)+e+i*Math.cos(h+2*Math.PI+.5*o),ut(s,a)+r+n*Math.sin(h+2*Math.PI+.5*o)]),c.push([ut(s,a)+e+.98*i*Math.cos(h+o),ut(s,a)+r+.98*n*Math.sin(h+o)]),c.push([ut(s,a)+e+.9*i*Math.cos(h+.5*o),ut(s,a)+r+.9*n*Math.sin(h+.5*o)])}return[c,l]}function cg(t,e,r,i,n,s,o,a,l){const c=s+ut(.1,l),h=[];h.push([ut(a,l)+e+.9*i*Math.cos(c-t),ut(a,l)+r+.9*n*Math.sin(c-t)]);for(let u=c;u<=o;u+=t)h.push([ut(a,l)+e+i*Math.cos(u),ut(a,l)+r+n*Math.sin(u)]);return h.push([e+i*Math.cos(o),r+n*Math.sin(o)]),h.push([e+i*Math.cos(o),r+n*Math.sin(o)]),Ba(h,null,l)}function uR(t,e,r,i,n,s,o,a){const l=[],c=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const u=a.disableMultiStroke?1:2,d=a.preserveVertices;for(let f=0;f<u;f++)f===0?l.push({op:"move",data:[o[0],o[1]]}):l.push({op:"move",data:[o[0]+(d?0:ut(c[0],a)),o[1]+(d?0:ut(c[0],a))]}),h=d?[n,s]:[n+ut(c[f],a),s+ut(c[f],a)],l.push({op:"bcurveTo",data:[t+ut(c[f],a),e+ut(c[f],a),r+ut(c[f],a),i+ut(c[f],a),h[0],h[1]]});return l}function Rn(t){return[...t]}function hg(t,e=0){const r=t.length;if(r<3)throw new Error("A curve must have at least three points.");const i=[];if(r===3)i.push(Rn(t[0]),Rn(t[1]),Rn(t[2]),Rn(t[2]));else{const n=[];n.push(t[0],t[0]);for(let a=1;a<t.length;a++)n.push(t[a]),a===t.length-1&&n.push(t[a]);const s=[],o=1-e;i.push(Rn(n[0]));for(let a=1;a+2<n.length;a++){const l=n[a];s[0]=[l[0],l[1]],s[1]=[l[0]+(o*n[a+1][0]-o*n[a-1][0])/6,l[1]+(o*n[a+1][1]-o*n[a-1][1])/6],s[2]=[n[a+1][0]+(o*n[a][0]-o*n[a+2][0])/6,n[a+1][1]+(o*n[a][1]-o*n[a+2][1])/6],s[3]=[n[a+1][0],n[a+1][1]],i.push(s[1],s[2],s[3])}}return i}function Xs(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function dR(t,e,r){const i=Xs(e,r);if(i===0)return Xs(t,e);let n=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/i;return n=Math.max(0,Math.min(1,n)),Xs(t,Xr(e,r,n))}function Xr(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function Xc(t,e,r,i){const n=i||[];if(function(a,l){const c=a[l+0],h=a[l+1],u=a[l+2],d=a[l+3];let f=3*h[0]-2*c[0]-d[0];f*=f;let p=3*h[1]-2*c[1]-d[1];p*=p;let g=3*u[0]-2*d[0]-c[0];g*=g;let b=3*u[1]-2*d[1]-c[1];return b*=b,f<g&&(f=g),p<b&&(p=b),f+p}(t,e)<r){const a=t[e+0];n.length?(s=n[n.length-1],o=a,Math.sqrt(Xs(s,o))>1&&n.push(a)):n.push(a),n.push(t[e+3])}else{const l=t[e+0],c=t[e+1],h=t[e+2],u=t[e+3],d=Xr(l,c,.5),f=Xr(c,h,.5),p=Xr(h,u,.5),g=Xr(d,f,.5),b=Xr(f,p,.5),x=Xr(g,b,.5);Xc([l,d,g,x],0,r,n),Xc([x,b,p,u],0,r,n)}var s,o;return n}function fR(t,e){return Ra(t,0,t.length,e)}function Ra(t,e,r,i,n){const s=n||[],o=t[e],a=t[r-1];let l=0,c=1;for(let h=e+1;h<r-1;++h){const u=dR(t[h],o,a);u>l&&(l=u,c=h)}return Math.sqrt(l)>i?(Ra(t,e,c+1,i,s),Ra(t,c,r,i,s)):(s.length||s.push(o),s.push(a)),s}function sc(t,e=.15,r){const i=[],n=(t.length-1)/3;for(let s=0;s<n;s++)Xc(t,3*s,e,i);return r&&r>0?Ra(i,0,i.length,r):i}const ke="none";class Ma{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,r,i){return{shape:e,sets:r||[],options:i||this.defaultOptions}}line(e,r,i,n,s){const o=this._o(s);return this._d("line",[Gb(e,r,i,n,o)],o)}rectangle(e,r,i,n,s){const o=this._o(s),a=[],l=hR(e,r,i,n,o);if(o.fill){const c=[[e,r],[e+i,r],[e+i,r+n],[e,r+n]];o.fillStyle==="solid"?a.push(nc([c],o)):a.push(Si([c],o))}return o.stroke!==ke&&a.push(l),this._d("rectangle",a,o)}ellipse(e,r,i,n,s){const o=this._o(s),a=[],l=Yb(i,n,o),c=Gc(e,r,o,l);if(o.fill)if(o.fillStyle==="solid"){const h=Gc(e,r,o,l).opset;h.type="fillPath",a.push(h)}else a.push(Si([c.estimatedPoints],o));return o.stroke!==ke&&a.push(c.opset),this._d("ellipse",a,o)}circle(e,r,i,n){const s=this.ellipse(e,r,i,i,n);return s.shape="circle",s}linearPath(e,r){const i=this._o(r);return this._d("linearPath",[Ys(e,!1,i)],i)}arc(e,r,i,n,s,o,a=!1,l){const c=this._o(l),h=[],u=sg(e,r,i,n,s,o,a,!0,c);if(a&&c.fill)if(c.fillStyle==="solid"){const d=Object.assign({},c);d.disableMultiStroke=!0;const f=sg(e,r,i,n,s,o,!0,!1,d);f.type="fillPath",h.push(f)}else h.push(function(d,f,p,g,b,x,w){const L=d,C=f;let v=Math.abs(p/2),A=Math.abs(g/2);v+=ut(.01*v,w),A+=ut(.01*A,w);let I=b,P=x;for(;I<0;)I+=2*Math.PI,P+=2*Math.PI;P-I>2*Math.PI&&(I=0,P=2*Math.PI);const R=(P-I)/w.curveStepCount,_=[];for(let S=I;S<=P;S+=R)_.push([L+v*Math.cos(S),C+A*Math.sin(S)]);return _.push([L+v*Math.cos(P),C+A*Math.sin(P)]),_.push([L,C]),Si([_],w)}(e,r,i,n,s,o,c));return c.stroke!==ke&&h.push(u),this._d("arc",h,c)}curve(e,r){const i=this._o(r),n=[],s=ng(e,i);if(i.fill&&i.fill!==ke)if(i.fillStyle==="solid"){const o=ng(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=e;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const c of l)c.length<3?o.push(...c):c.length===3?o.push(...sc(hg([c[0],c[0],c[1],c[2]]),10,(1+i.roughness)/2)):o.push(...sc(hg(c),10,(1+i.roughness)/2))}o.length&&n.push(Si([o],i))}return i.stroke!==ke&&n.push(s),this._d("curve",n,i)}polygon(e,r){const i=this._o(r),n=[],s=Ys(e,!0,i);return i.fill&&(i.fillStyle==="solid"?n.push(nc([e],i)):n.push(Si([e],i))),i.stroke!==ke&&n.push(s),this._d("polygon",n,i)}path(e,r){const i=this._o(r),n=[];if(!e)return this._d("path",n,i);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const s=i.fill&&i.fill!=="transparent"&&i.fill!==ke,o=i.stroke!==ke,a=!!(i.simplification&&i.simplification<1),l=function(h,u,d){const f=Ub(Wb(fu(h))),p=[];let g=[],b=[0,0],x=[];const w=()=>{x.length>=4&&g.push(...sc(x,u)),x=[]},L=()=>{w(),g.length&&(p.push(g),g=[])};for(const{key:v,data:A}of f)switch(v){case"M":L(),b=[A[0],A[1]],g.push(b);break;case"L":w(),g.push([A[0],A[1]]);break;case"C":if(!x.length){const I=g.length?g[g.length-1]:b;x.push([I[0],I[1]])}x.push([A[0],A[1]]),x.push([A[2],A[3]]),x.push([A[4],A[5]]);break;case"Z":w(),g.push([b[0],b[1]])}if(L(),!d)return p;const C=[];for(const v of p){const A=fR(v,d);A.length&&C.push(A)}return C}(e,1,a?4-4*(i.simplification||1):(1+i.roughness)/2),c=ag(e,i);if(s)if(i.fillStyle==="solid")if(l.length===1){const h=ag(e,Object.assign(Object.assign({},i),{disableMultiStroke:!0,roughness:i.roughness?i.roughness+i.fillShapeRoughnessGain:0}));n.push({type:"fillPath",ops:this._mergedShape(h.ops)})}else n.push(nc(l,i));else n.push(Si(l,i));return o&&(a?l.forEach(h=>{n.push(Ys(h,!1,i))}):n.push(c)),this._d("path",n,i)}opsToPath(e,r){let i="";for(const n of e.ops){const s=typeof r=="number"&&r>=0?n.data.map(o=>+o.toFixed(r)):n.data;switch(n.op){case"move":i+=`M${s[0]} ${s[1]} `;break;case"bcurveTo":i+=`C${s[0]} ${s[1]}, ${s[2]} ${s[3]}, ${s[4]} ${s[5]} `;break;case"lineTo":i+=`L${s[0]} ${s[1]} `}}return i.trim()}toPaths(e){const r=e.sets||[],i=e.options||this.defaultOptions,n=[];for(const s of r){let o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:i.stroke,strokeWidth:i.strokeWidth,fill:ke};break;case"fillPath":o={d:this.opsToPath(s),stroke:ke,strokeWidth:0,fill:i.fill||ke};break;case"fillSketch":o=this.fillSketch(s,i)}o&&n.push(o)}return n}fillSketch(e,r){let i=r.fillWeight;return i<0&&(i=r.strokeWidth/2),{d:this.opsToPath(e),stroke:r.fill||ke,strokeWidth:i,fill:ke}}_mergedShape(e){return e.filter((r,i)=>i===0||r.op!=="move")}}class pR{constructor(e,r){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Ma(r)}draw(e){const r=e.sets||[],i=e.options||this.getDefaultOptions(),n=this.ctx,s=e.options.fixedDecimalPlaceDigits;for(const o of r)switch(o.type){case"path":n.save(),n.strokeStyle=i.stroke==="none"?"transparent":i.stroke,n.lineWidth=i.strokeWidth,i.strokeLineDash&&n.setLineDash(i.strokeLineDash),i.strokeLineDashOffset&&(n.lineDashOffset=i.strokeLineDashOffset),this._drawToContext(n,o,s),n.restore();break;case"fillPath":{n.save(),n.fillStyle=i.fill||"";const a=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(n,o,s,a),n.restore();break}case"fillSketch":this.fillSketch(n,o,i)}}fillSketch(e,r,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2),e.save(),i.fillLineDash&&e.setLineDash(i.fillLineDash),i.fillLineDashOffset&&(e.lineDashOffset=i.fillLineDashOffset),e.strokeStyle=i.fill||"",e.lineWidth=n,this._drawToContext(e,r,i.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,r,i,n="nonzero"){e.beginPath();for(const s of r.ops){const o=typeof i=="number"&&i>=0?s.data.map(a=>+a.toFixed(i)):s.data;switch(s.op){case"move":e.moveTo(o[0],o[1]);break;case"bcurveTo":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":e.lineTo(o[0],o[1])}}r.type==="fillPath"?e.fill(n):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,r,i,n,s){const o=this.gen.line(e,r,i,n,s);return this.draw(o),o}rectangle(e,r,i,n,s){const o=this.gen.rectangle(e,r,i,n,s);return this.draw(o),o}ellipse(e,r,i,n,s){const o=this.gen.ellipse(e,r,i,n,s);return this.draw(o),o}circle(e,r,i,n){const s=this.gen.circle(e,r,i,n);return this.draw(s),s}linearPath(e,r){const i=this.gen.linearPath(e,r);return this.draw(i),i}polygon(e,r){const i=this.gen.polygon(e,r);return this.draw(i),i}arc(e,r,i,n,s,o,a=!1,l){const c=this.gen.arc(e,r,i,n,s,o,a,l);return this.draw(c),c}curve(e,r){const i=this.gen.curve(e,r);return this.draw(i),i}path(e,r){const i=this.gen.path(e,r);return this.draw(i),i}}const $s="http://www.w3.org/2000/svg";class gR{constructor(e,r){this.svg=e,this.gen=new Ma(r)}draw(e){const r=e.sets||[],i=e.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,s=n.createElementNS($s,"g"),o=e.options.fixedDecimalPlaceDigits;for(const a of r){let l=null;switch(a.type){case"path":l=n.createElementNS($s,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke",i.stroke),l.setAttribute("stroke-width",i.strokeWidth+""),l.setAttribute("fill","none"),i.strokeLineDash&&l.setAttribute("stroke-dasharray",i.strokeLineDash.join(" ").trim()),i.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${i.strokeLineDashOffset}`);break;case"fillPath":l=n.createElementNS($s,"path"),l.setAttribute("d",this.opsToPath(a,o)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",i.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||l.setAttribute("fill-rule","evenodd");break;case"fillSketch":l=this.fillSketch(n,a,i)}l&&s.appendChild(l)}return s}fillSketch(e,r,i){let n=i.fillWeight;n<0&&(n=i.strokeWidth/2);const s=e.createElementNS($s,"path");return s.setAttribute("d",this.opsToPath(r,i.fixedDecimalPlaceDigits)),s.setAttribute("stroke",i.fill||""),s.setAttribute("stroke-width",n+""),s.setAttribute("fill","none"),i.fillLineDash&&s.setAttribute("stroke-dasharray",i.fillLineDash.join(" ").trim()),i.fillLineDashOffset&&s.setAttribute("stroke-dashoffset",`${i.fillLineDashOffset}`),s}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,r){return this.gen.opsToPath(e,r)}line(e,r,i,n,s){const o=this.gen.line(e,r,i,n,s);return this.draw(o)}rectangle(e,r,i,n,s){const o=this.gen.rectangle(e,r,i,n,s);return this.draw(o)}ellipse(e,r,i,n,s){const o=this.gen.ellipse(e,r,i,n,s);return this.draw(o)}circle(e,r,i,n){const s=this.gen.circle(e,r,i,n);return this.draw(s)}linearPath(e,r){const i=this.gen.linearPath(e,r);return this.draw(i)}polygon(e,r){const i=this.gen.polygon(e,r);return this.draw(i)}arc(e,r,i,n,s,o,a=!1,l){const c=this.gen.arc(e,r,i,n,s,o,a,l);return this.draw(c)}curve(e,r){const i=this.gen.curve(e,r);return this.draw(i)}path(e,r){const i=this.gen.path(e,r);return this.draw(i)}}var rt={canvas:(t,e)=>new pR(t,e),svg:(t,e)=>new gR(t,e),generator:t=>new Ma(t),newSeed:()=>Ma.newSeed()},yt=m(async(t,e,r)=>{let i;const n=e.useHtmlLabels||Wt(St()?.htmlLabels);r?i=r:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",de(e.labelStyle));let a;e.label===void 0?a="":a=typeof e.label=="string"?e.label:e.label[0];const l=await jr(o,ai(gi(a),St()),{useHtmlLabels:n,width:e.width||St().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let c=l.getBBox();const h=(e?.padding??0)/2;if(n){const u=l.children[0],d=wt(l),f=u.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(b=>{function x(){if(g.style.display="flex",g.style.flexDirection="column",p){const w=St().fontSize?St().fontSize:window.getComputedStyle(document.body).fontSize,L=5,[C=lm.fontSize]=oo(w),v=C*L+"px";g.style.minWidth=v,g.style.maxWidth=v}else g.style.width="100%";b(g)}m(x,"setupImage"),setTimeout(()=>{g.complete&&x()}),g.addEventListener("error",x),g.addEventListener("load",x)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}return n?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}},"labelHelper"),ac=m(async(t,e,r)=>{const i=r.useHtmlLabels||Wt(St()?.flowchart?.htmlLabels),n=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await jr(n,ai(gi(e),St()),{useHtmlLabels:i,width:r.width||St()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let o=s.getBBox();const a=r.padding/2;if(Wt(St()?.flowchart?.htmlLabels)){const l=s.children[0],c=wt(s);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}return i?n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"):n.attr("transform","translate(0, "+-o.height/2+")"),r.centerLabel&&n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:t,bbox:o,halfPadding:a,label:n}},"insertLabel"),st=m((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height},"updateNodeBounds"),dt=m((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function vt(t){const e=t.map((r,i)=>`${i===0?"M":"L"}${r.x},${r.y}`);return e.push("Z"),e.join(" ")}m(vt,"createPathFromPoints");function Pr(t,e,r,i,n,s){const o=[],l=r-t,c=i-e,h=l/s,u=2*Math.PI/h,d=e+c/2;for(let f=0;f<=50;f++){const p=f/50,g=t+p*l,b=d+n*Math.sin(u*(g-t));o.push({x:g,y:b})}return o}m(Pr,"generateFullSineWavePoints");function pu(t,e,r,i,n,s){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(pu,"generateCirclePoints");var mR=m((t,e)=>{var r=t.x,i=t.y,n=e.x-r,s=e.y-i,o=t.width/2,a=t.height/2,l,c;return Math.abs(s)*o>Math.abs(n)*a?(s<0&&(a=-a),l=s===0?0:a*n/s,c=a):(n<0&&(o=-o),l=o,c=n===0?0:o*s/n),{x:r+l,y:i+c}},"intersectRect"),rn=mR;function Jb(t,e){e&&t.attr("style",e)}m(Jb,"applyStyle");async function Kb(t){const e=wt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div");let i=t.label;t.label&&zi(t.label)&&(i=await wh(t.label.replace(Zi.lineBreakRegex,`
`),St()));const n=t.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+n+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>"),Jb(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}m(Kb,"addHtmlLabel");var yR=m(async(t,e,r,i)=>{let n=t||"";if(typeof n=="object"&&(n=n[0]),Wt(St().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),G.info("vertexText"+n);const s={isNode:i,label:gi(n).replace(/fa[blrs]?:fa-[\w-]+/g,a=>`<i class='${a.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await Kb(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let o=[];typeof n=="string"?o=n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?o=n:o=[];for(const a of o){const l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),r?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=a.trim(),s.appendChild(l)}return s}},"createLabel"),ei=yR,kr=m((t,e,r,i,n)=>["M",t+n,e,"H",t+r-n,"A",n,n,0,0,1,t+r,e+n,"V",e+i-n,"A",n,n,0,0,1,t+r-n,e+i,"H",t+n,"A",n,n,0,0,1,t,e+i-n,"V",e+n,"A",n,n,0,0,1,t+n,e,"Z"].join(" "),"createRoundedRectPathD"),Zb=m(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const r=St(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=at(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Wt(r.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),p=await jr(f,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0});let g=p.getBBox();if(Wt(r.flowchart.htmlLabels)){const I=p.children[0],P=wt(p);g=I.getBoundingClientRect(),P.attr("width",g.width),P.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,w=e.x-b/2,L=e.y-x/2;G.trace("Data ",e,JSON.stringify(e));let C;if(e.look==="handDrawn"){const I=rt.svg(u),P=nt(e,{roughness:.7,fill:s,stroke:o,fillWeight:3,seed:n}),R=I.path(kr(w,L,b,x,0),P);C=u.insert(()=>(G.debug("Rough node insert CXC",R),R),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",L).attr("width",b).attr("height",x);const{subGraphTitleTopMargin:v}=$h(r);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),a){const I=f.select("span");I&&I.attr("style",a)}const A=C.node().getBBox();return e.offsetX=0,e.width=A.width,e.height=A.height,e.offsetY=g.height-e.padding/2,e.intersect=function(I){return rn(e,I)},{cluster:u,labelBBox:g}},"rect"),bR=m((t,e)=>{const r=t.insert("g").attr("class","note-cluster").attr("id",e.id),i=r.insert("rect",":first-child"),n=0*e.padding,s=n/2;i.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");const o=i.node().getBBox();return e.width=o.width,e.height=o.height,e.intersect=function(a){return rn(e,a)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),xR=m(async(t,e)=>{const r=St(),{themeVariables:i,handDrawnSeed:n}=r,{altBackground:s,compositeBackground:o,compositeTitleBackground:a,nodeBorder:l}=i,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label");let d=c.append("rect");const f=u.node().appendChild(await ei(e.label,e.labelStyle,void 0,!0));let p=f.getBBox();if(Wt(r.flowchart.htmlLabels)){const R=f.children[0],_=wt(f);p=R.getBoundingClientRect(),_.attr("width",p.width),_.attr("height",p.height)}const g=0*e.padding,b=g/2,x=(e.width<=p.width+e.padding?p.width+e.padding:e.width)+g;e.width<=p.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height+g,L=e.height+g-p.height-6,C=e.x-x/2,v=e.y-w/2;e.width=x;const A=e.y-e.height/2-b+p.height+2;let I;if(e.look==="handDrawn"){const R=e.cssClasses.includes("statediagram-cluster-alt"),_=rt.svg(c),S=e.rx||e.ry?_.path(kr(C,v,x,w,10),{roughness:.7,fill:a,fillStyle:"solid",stroke:l,seed:n}):_.rectangle(C,v,x,w,{seed:n});I=c.insert(()=>S,":first-child");const $=_.rectangle(C,A,x,L,{fill:R?s:o,fillStyle:R?"hachure":"solid",stroke:l,seed:n});I=c.insert(()=>S,":first-child"),d=c.insert(()=>$)}else I=h.insert("rect",":first-child"),I.attr("class","outer").attr("x",C).attr("y",v).attr("width",x).attr("height",w).attr("data-look",e.look),d.attr("class","inner").attr("x",C).attr("y",A).attr("width",x).attr("height",L);u.attr("transform",`translate(${e.x-p.width/2}, ${v+1-(Wt(r.flowchart.htmlLabels)?0:3)})`);const P=I.node().getBBox();return e.height=P.height,e.offsetX=0,e.offsetY=p.height-e.padding/2,e.labelBBox=p,e.intersect=function(R){return rn(e,R)},{cluster:c,labelBBox:p}},"roundedWithTitle"),_R=m(async(t,e)=>{G.info("Creating subgraph rect for ",e.id,e);const r=St(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:s,clusterBorder:o}=i,{labelStyles:a,nodeStyles:l,borderStyles:c,backgroundStyles:h}=at(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Wt(r.flowchart.htmlLabels),f=u.insert("g").attr("class","cluster-label "),p=await jr(f,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0,width:e.width});let g=p.getBBox();if(Wt(r.flowchart.htmlLabels)){const I=p.children[0],P=wt(p);g=I.getBoundingClientRect(),P.attr("width",g.width),P.attr("height",g.height)}const b=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(b-e.width)/2-e.padding:e.diff=-e.padding;const x=e.height,w=e.x-b/2,L=e.y-x/2;G.trace("Data ",e,JSON.stringify(e));let C;if(e.look==="handDrawn"){const I=rt.svg(u),P=nt(e,{roughness:.7,fill:s,stroke:o,fillWeight:4,seed:n}),R=I.path(kr(w,L,b,x,e.rx),P);C=u.insert(()=>(G.debug("Rough node insert CXC",R),R),":first-child"),C.select("path:nth-child(2)").attr("style",c.join(";")),C.select("path").attr("style",h.join(";").replace("fill","stroke"))}else C=u.insert("rect",":first-child"),C.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",w).attr("y",L).attr("width",b).attr("height",x);const{subGraphTitleTopMargin:v}=$h(r);if(f.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),a){const I=f.select("span");I&&I.attr("style",a)}const A=C.node().getBBox();return e.offsetX=0,e.width=A.width,e.height=A.height,e.offsetY=g.height-e.padding/2,e.intersect=function(I){return rn(e,I)},{cluster:u,labelBBox:g}},"kanbanSection"),wR=m((t,e)=>{const r=St(),{themeVariables:i,handDrawnSeed:n}=r,{nodeBorder:s}=i,o=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),a=o.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;const h=e.height+l,u=e.x-c/2,d=e.y-h/2;e.width=c;let f;if(e.look==="handDrawn"){const b=rt.svg(o).rectangle(u,d,c,h,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:n});f=o.insert(()=>b,":first-child")}else f=a.insert("rect",":first-child"),f.attr("class","divider").attr("x",u).attr("y",d).attr("width",c).attr("height",h).attr("data-look",e.look);const p=f.node().getBBox();return e.height=p.height,e.offsetX=0,e.offsetY=0,e.intersect=function(g){return rn(e,g)},{cluster:o,labelBBox:{}}},"divider"),vR=Zb,CR={rect:Zb,squareRect:vR,roundedWithTitle:xR,noteGroup:bR,divider:wR,kanbanSection:_R},Qb=new Map,SR=m(async(t,e)=>{const r=e.shape||"rect",i=await CR[r](t,e);return Qb.set(e.id,i),i},"insertCluster"),u3=m(()=>{Qb=new Map},"clear");function tx(t,e){return t.intersect(e)}m(tx,"intersectNode");var kR=tx;function ex(t,e,r,i){var n=t.x,s=t.y,o=n-i.x,a=s-i.y,l=Math.sqrt(e*e*a*a+r*r*o*o),c=Math.abs(e*r*o/l);i.x<n&&(c=-c);var h=Math.abs(e*r*a/l);return i.y<s&&(h=-h),{x:n+c,y:s+h}}m(ex,"intersectEllipse");var rx=ex;function ix(t,e,r){return rx(t,e,e,r)}m(ix,"intersectCircle");var TR=ix;function nx(t,e,r,i){var n,s,o,a,l,c,h,u,d,f,p,g,b,x,w;if(n=e.y-t.y,o=t.x-e.x,l=e.x*t.y-t.x*e.y,d=n*r.x+o*r.y+l,f=n*i.x+o*i.y+l,!(d!==0&&f!==0&&Jc(d,f))&&(s=i.y-r.y,a=r.x-i.x,c=i.x*r.y-r.x*i.y,h=s*t.x+a*t.y+c,u=s*e.x+a*e.y+c,!(h!==0&&u!==0&&Jc(h,u))&&(p=n*a-s*o,p!==0)))return g=Math.abs(p/2),b=o*c-a*l,x=b<0?(b-g)/p:(b+g)/p,b=s*l-n*c,w=b<0?(b-g)/p:(b+g)/p,{x,y:w}}m(nx,"intersectLine");function Jc(t,e){return t*e>0}m(Jc,"sameSign");var ER=nx;function sx(t,e,r){let i=t.x,n=t.y,s=[],o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(h){o=Math.min(o,h.x),a=Math.min(a,h.y)}):(o=Math.min(o,e.x),a=Math.min(a,e.y));let l=i-t.width/2-o,c=n-t.height/2-a;for(let h=0;h<e.length;h++){let u=e[h],d=e[h<e.length-1?h+1:0],f=ER(t,r,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});f&&s.push(f)}return s.length?(s.length>1&&s.sort(function(h,u){let d=h.x-r.x,f=h.y-r.y,p=Math.sqrt(d*d+f*f),g=u.x-r.x,b=u.y-r.y,x=Math.sqrt(g*g+b*b);return p<x?-1:p===x?0:1}),s[0]):t}m(sx,"intersectPolygon");var AR=sx,et={node:kR,circle:TR,ellipse:rx,polygon:AR,rect:rn};function ax(t,e){const{labelStyles:r}=at(e);e.labelStyle=r;const i=dt(e);let n=i;i||(n="anchor");const s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=1,{cssStyles:a}=e,l=rt.svg(s),c=nt(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(c.roughness=0);const h=l.circle(0,0,o*2,c),u=s.insert(()=>h,":first-child");return u.attr("class","anchor").attr("style",de(a)),st(e,u),e.intersect=function(d){return G.info("Circle intersect",e,o,d),et.circle(e,o,d)},s}m(ax,"anchor");function Kc(t,e,r,i,n,s,o){const l=(t+r)/2,c=(e+i)/2,h=Math.atan2(i-e,r-t),u=(r-t)/2,d=(i-e)/2,f=u/n,p=d/s,g=Math.sqrt(f**2+p**2);if(g>1)throw new Error("The given radii are too small to create an arc between the points.");const b=Math.sqrt(1-g**2),x=l+b*s*Math.sin(h)*(o?-1:1),w=c-b*n*Math.cos(h)*(o?-1:1),L=Math.atan2((e-w)/s,(t-x)/n);let v=Math.atan2((i-w)/s,(r-x)/n)-L;o&&v<0&&(v+=2*Math.PI),!o&&v>0&&(v-=2*Math.PI);const A=[];for(let I=0;I<20;I++){const P=I/19,R=L+P*v,_=x+n*Math.cos(R),S=w+s*Math.sin(R);A.push({x:_,y:S})}return A}m(Kc,"generateArcPoints");async function ox(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=s.width+e.padding+20,a=s.height+e.padding,l=a/2,c=l/(2.5+a/50),{cssStyles:h}=e,u=[{x:o/2,y:-a/2},{x:-o/2,y:-a/2},...Kc(-o/2,-a/2,-o/2,a/2,c,l,!1),{x:o/2,y:a/2},...Kc(o/2,a/2,o/2,-a/2,c,l,!0)],d=rt.svg(n),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=vt(u),g=d.path(p,f),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(${c/2}, 0)`),st(e,b),e.intersect=function(x){return et.polygon(e,u,x)},n}m(ox,"bowTieRect");function Tr(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}m(Tr,"insertPolygonShape");async function lx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=s.height+e.padding,a=12,l=s.width+e.padding+a,c=0,h=l,u=-o,d=0,f=[{x:c+a,y:u},{x:h,y:u},{x:h,y:d},{x:c,y:d},{x:c,y:u+a},{x:c+a,y:u}];let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const b=rt.svg(n),x=nt(e,{}),w=vt(f),L=b.path(w,x);p=n.insert(()=>L,":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),g&&p.attr("style",g)}else p=Tr(n,l,o,f);return i&&p.attr("style",i),st(e,p),e.intersect=function(b){return et.polygon(e,f,b)},n}m(lx,"card");function cx(t,e){const{nodeStyles:r}=at(e);e.label="";const i=t.insert("g").attr("class",dt(e)).attr("id",e.domId??e.id),{cssStyles:n}=e,s=Math.max(28,e.width??0),o=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],a=rt.svg(i),l=nt(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=vt(o),h=a.path(c,l),u=i.insert(()=>h,":first-child");return n&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",n),r&&e.look!=="handDrawn"&&u.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(d){return et.polygon(e,o,d)},i}m(cx,"choice");async function hx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,halfPadding:o}=await yt(t,e,dt(e)),a=s.width/2+o;let l;const{cssStyles:c}=e;if(e.look==="handDrawn"){const h=rt.svg(n),u=nt(e,{}),d=h.circle(0,0,a*2,u);l=n.insert(()=>d,":first-child"),l.attr("class","basic label-container").attr("style",de(c))}else l=n.insert("circle",":first-child").attr("class","basic label-container").attr("style",i).attr("r",a).attr("cx",0).attr("cy",0);return st(e,l),e.intersect=function(h){return G.info("Circle intersect",e,a,h),et.circle(e,a,h)},n}m(hx,"circle");function ux(t){const e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=t*2,n={x:i/2*e,y:i/2*r},s={x:-(i/2)*e,y:i/2*r},o={x:-(i/2)*e,y:-(i/2)*r},a={x:i/2*e,y:-(i/2)*r};return`M ${s.x},${s.y} L ${a.x},${a.y}
                   M ${n.x},${n.y} L ${o.x},${o.y}`}m(ux,"createLine");function dx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r,e.label="";const n=t.insert("g").attr("class",dt(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:o}=e,a=rt.svg(n),l=nt(e,{});e.look!=="handDrawn"&&(l.roughness=0,l.fillStyle="solid");const c=a.circle(0,0,s*2,l),h=ux(s),u=a.path(h,l),d=n.insert(()=>c,":first-child");return d.insert(()=>u),o&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",o),i&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",i),st(e,d),e.intersect=function(f){return G.info("crossedCircle intersect",e,{radius:s,point:f}),et.circle(e,s,f)},n}m(dx,"crossedCircle");function gr(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(gr,"generateCirclePoints");async function fx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...gr(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...gr(a/2+c*2,-c,c,20,-180,-270),...gr(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...gr(a/2,l/2,c,20,0,90)],d=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...gr(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...gr(a/2+a*.1,-c,c,20,-180,-270),...gr(a/2+a*.1,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...gr(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2,y:l/2+c}],f=rt.svg(n),p=nt(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=vt(u).replace("Z",""),x=f.path(b,p),w=vt(d),L=f.path(w,{...p}),C=n.insert("g",":first-child");return C.insert(()=>L,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${c}, 0)`),o.attr("transform",`translate(${-a/2+c-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,d,v)},n}m(fx,"curlyBraceLeft");function mr(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:f,y:p})}return o}m(mr,"generateCirclePoints");async function px(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...mr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...mr(a/2+c*2,-c,c,20,-180,-270),...mr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...mr(a/2,l/2,c,20,0,90)],d=[{x:-a/2,y:-l/2-c},{x:a/2,y:-l/2-c},...mr(a/2,-l/2,c,20,-90,0),{x:a/2+c,y:-c},...mr(a/2+c*2,-c,c,20,-180,-270),...mr(a/2+c*2,c,c,20,-90,-180),{x:a/2+c,y:l/2},...mr(a/2,l/2,c,20,0,90),{x:a/2,y:l/2+c},{x:-a/2,y:l/2+c}],f=rt.svg(n),p=nt(e,{fill:"none"});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const b=vt(u).replace("Z",""),x=f.path(b,p),w=vt(d),L=f.path(w,{...p}),C=n.insert("g",":first-child");return C.insert(()=>L,":first-child").attr("stroke-opacity",0),C.insert(()=>x,":first-child"),C.attr("class","text"),h&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(${-c}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,d,v)},n}m(px,"curlyBraceRight");function Zt(t,e,r,i=100,n=0,s=180){const o=[],a=n*Math.PI/180,h=(s*Math.PI/180-a)/(i-1);for(let u=0;u<i;u++){const d=a+u*h,f=t+r*Math.cos(d),p=e+r*Math.sin(d);o.push({x:-f,y:-p})}return o}m(Zt,"generateCirclePoints");async function gx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=s.width+(e.padding??0),l=s.height+(e.padding??0),c=Math.max(5,l*.1),{cssStyles:h}=e,u=[...Zt(a/2,-l/2,c,30,-90,0),{x:-a/2-c,y:c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:-l/2},...Zt(a/2,l/2,c,20,0,90)],d=[...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],f=[{x:a/2,y:-l/2-c},{x:-a/2,y:-l/2-c},...Zt(a/2,-l/2,c,20,-90,0),{x:-a/2-c,y:-c},...Zt(a/2+c*2,-c,c,20,-180,-270),...Zt(a/2+c*2,c,c,20,-90,-180),{x:-a/2-c,y:l/2},...Zt(a/2,l/2,c,20,0,90),{x:-a/2,y:l/2+c},{x:a/2-c-c/2,y:l/2+c},...Zt(-a/2+c+c/2,-l/2,c,20,-90,-180),{x:a/2-c/2,y:c},...Zt(-a/2-c/2,-c,c,20,0,90),...Zt(-a/2-c/2,c,c,20,-90,0),{x:a/2-c/2,y:-c},...Zt(-a/2+c+c/2,l/2,c,30,-180,-270)],p=rt.svg(n),g=nt(e,{fill:"none"});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const x=vt(u).replace("Z",""),w=p.path(x,g),C=vt(d).replace("Z",""),v=p.path(C,g),A=vt(f),I=p.path(A,{...g}),P=n.insert("g",":first-child");return P.insert(()=>I,":first-child").attr("stroke-opacity",0),P.insert(()=>w,":first-child"),P.insert(()=>v,":first-child"),P.attr("class","text"),h&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",h),i&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",i),P.attr("transform",`translate(${c-c/4}, 0)`),o.attr("transform",`translate(${-a/2+(e.padding??0)/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,P),e.intersect=function(R){return et.polygon(e,f,R)},n}m(gx,"curlyBraces");async function mx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=80,a=20,l=Math.max(o,(s.width+(e.padding??0)*2)*1.25,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=rt.svg(n),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=l,g=c,b=p-h,x=g/4,w=[{x:b,y:0},{x,y:0},{x:0,y:g/2},{x,y:g},{x:b,y:g},...pu(-b,-g/2,h,50,270,90)],L=vt(w),C=d.path(L,f),v=n.insert(()=>C,":first-child");return v.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",i),v.attr("transform",`translate(${-l/2}, ${-c/2})`),st(e,v),e.intersect=function(A){return et.polygon(e,w,A)},n}m(mx,"curvedTrapezoid");var LR=m((t,e,r,i,n,s)=>[`M${t},${e+s}`,`a${n},${s} 0,0,0 ${r},0`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createCylinderPathD"),BR=m((t,e,r,i,n,s)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`].join(" "),"createOuterCylinderPathD"),RR=m((t,e,r,i,n,s)=>[`M${t-r/2},${-i/2}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function yx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+e.padding,e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+e.padding,e.height??0);let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=rt.svg(n),p=BR(0,0,a,h,l,c),g=RR(0,c,a,h,l,c),b=f.path(p,nt(e,{})),x=f.path(g,nt(e,{fill:"none"}));u=n.insert(()=>x,":first-child"),u=n.insert(()=>b,":first-child"),u.attr("class","basic label-container"),d&&u.attr("style",d)}else{const f=LR(0,0,a,h,l,c);u=n.insert("path",":first-child").attr("d",f).attr("class","basic label-container").attr("style",de(d)).attr("style",i)}return u.attr("label-offset-y",c),u.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),st(e,u),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(f){const p=et.rect(e,f),g=p.x-(e.x??0);if(l!=0&&(Math.abs(g)<(e.width??0)/2||Math.abs(g)==(e.width??0)/2&&Math.abs(p.y-(e.y??0))>(e.height??0)/2-c)){let b=c*c*(1-g*g/(l*l));b>0&&(b=Math.sqrt(b)),b=c-b,f.y-(e.y??0)>0&&(b=-b),p.y+=b}return p},n}m(yx,"cylinder");async function bx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=s.width+e.padding,l=s.height+e.padding,c=l*.2,h=-a/2,u=-l/2-c/2,{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],b=f.polygon(g.map(w=>[w.x,w.y]),p),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${h+(e.padding??0)/2-(s.x-(s.left??0))}, ${u+c+(e.padding??0)/2-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(w){return et.rect(e,w)},n}m(bx,"dividedRectangle");async function xx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,halfPadding:o}=await yt(t,e,dt(e)),l=s.width/2+o+5,c=s.width/2+o;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=rt.svg(n),f=nt(e,{roughness:.2,strokeWidth:2.5}),p=nt(e,{roughness:.2,strokeWidth:1.5}),g=d.circle(0,0,l*2,f),b=d.circle(0,0,c*2,p);h=n.insert("g",":first-child"),h.attr("class",de(e.cssClasses)).attr("style",de(u)),h.node()?.appendChild(g),h.node()?.appendChild(b)}else{h=n.insert("g",":first-child");const d=h.insert("circle",":first-child"),f=h.insert("circle");h.attr("class","basic label-container").attr("style",i),d.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),f.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return st(e,h),e.intersect=function(d){return G.info("DoubleCircle intersect",e,l,d),et.circle(e,l,d)},n}m(xx,"doublecircle");function _x(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.label="",e.labelStyle=i;const s=t.insert("g").attr("class",dt(e)).attr("id",e.domId??e.id),o=7,{cssStyles:a}=e,l=rt.svg(s),{nodeBorder:c}=r,h=nt(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(h.roughness=0);const u=l.circle(0,0,o*2,h),d=s.insert(()=>u,":first-child");return d.selectAll("path").attr("style",`fill: ${c} !important;`),a&&a.length>0&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",a),n&&e.look!=="handDrawn"&&d.selectAll("path").attr("style",n),st(e,d),e.intersect=function(f){return G.info("filledCircle intersect",e,{radius:o,point:f}),et.circle(e,o,f)},s}m(_x,"filledCircle");async function wx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=s.width+(e.padding??0),l=a+s.height,c=a+s.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=e,d=rt.svg(n),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=vt(h),g=d.path(p,f),b=n.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),e.width=a,e.height=l,st(e,b),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-l/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(x){return G.info("Triangle intersect",e,h,x),et.polygon(e,h,x)},n}m(wx,"flippedTriangle");function vx(t,e,{dir:r,config:{state:i,themeVariables:n}}){const{nodeStyles:s}=at(e);e.label="";const o=t.insert("g").attr("class",dt(e)).attr("id",e.domId??e.id),{cssStyles:a}=e;let l=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);r==="LR"&&(l=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));const h=-1*l/2,u=-1*c/2,d=rt.svg(o),f=nt(e,{stroke:n.lineColor,fill:n.lineColor});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=d.rectangle(h,u,l,c,f),g=o.insert(()=>p,":first-child");a&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",a),s&&e.look!=="handDrawn"&&g.selectAll("path").attr("style",s),st(e,g);const b=i?.padding??0;return e.width&&e.height&&(e.width+=b/2||0,e.height+=b/2||0),e.intersect=function(x){return et.rect(e,x)},o}m(vx,"forkJoin");async function Cx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const n=80,s=50,{shapeSvg:o,bbox:a}=await yt(t,e,dt(e)),l=Math.max(n,a.width+(e.padding??0)*2,e?.width??0),c=Math.max(s,a.height+(e.padding??0)*2,e?.height??0),h=c/2,{cssStyles:u}=e,d=rt.svg(o),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-l/2,y:-c/2},{x:l/2-h,y:-c/2},...pu(-l/2+h,0,h,50,90,270),{x:l/2-h,y:c/2},{x:-l/2,y:c/2}],g=vt(p),b=d.path(g,f),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),st(e,x),e.intersect=function(w){return G.info("Pill intersect",e,{radius:h,point:w}),et.polygon(e,p,w)},o}m(Cx,"halfRoundedRectangle");var MR=m((t,e,r,i,n)=>[`M${t+n},${e}`,`L${t+r-n},${e}`,`L${t+r},${e-i/2}`,`L${t+r-n},${e-i}`,`L${t+n},${e-i}`,`L${t},${e-i/2}`,"Z"].join(" "),"createHexagonPathD");async function Sx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=4,a=s.height+e.padding,l=a/o,c=s.width+2*l+e.padding,h=[{x:l,y:0},{x:c-l,y:0},{x:c,y:-a/2},{x:c-l,y:-a},{x:l,y:-a},{x:0,y:-a/2}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=rt.svg(n),p=nt(e,{}),g=MR(0,0,c,a,l),b=f.path(g,p);u=n.insert(()=>b,":first-child").attr("transform",`translate(${-c/2}, ${a/2})`),d&&u.attr("style",d)}else u=Tr(n,c,a,h);return i&&u.attr("style",i),e.width=c,e.height=a,st(e,u),e.intersect=function(f){return et.polygon(e,h,f)},n}m(Sx,"hexagon");async function kx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.label="",e.labelStyle=r;const{shapeSvg:n}=await yt(t,e,dt(e)),s=Math.max(30,e?.width??0),o=Math.max(30,e?.height??0),{cssStyles:a}=e,l=rt.svg(n),c=nt(e,{});e.look!=="handDrawn"&&(c.roughness=0,c.fillStyle="solid");const h=[{x:0,y:0},{x:s,y:0},{x:0,y:o},{x:s,y:o}],u=vt(h),d=l.path(u,c),f=n.insert(()=>d,":first-child");return f.attr("class","basic label-container"),a&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",a),i&&e.look!=="handDrawn"&&f.selectChildren("path").attr("style",i),f.attr("transform",`translate(${-s/2}, ${-o/2})`),st(e,f),e.intersect=function(p){return G.info("Pill intersect",e,{points:h}),et.polygon(e,h,p)},n}m(kx,"hourglass");async function Tx(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await yt(t,e,"icon-shape default"),d=e.pos==="t",f=a,p=a,{nodeBorder:g}=r,{stylesMap:b}=Qi(e),x=-p/2,w=-f/2,L=e.label?8:0,C=rt.svg(c),v=nt(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const A=C.rectangle(x,w,p,f,v),I=Math.max(p,h.width),P=f+h.height+L,R=C.rectangle(-I/2,-P/2,I,P,{...v,fill:"transparent",stroke:"none"}),_=c.insert(()=>A,":first-child"),S=c.insert(()=>R);if(e.icon){const $=c.append("g");$.html(`<g>${await gs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const E=$.node().getBBox(),k=E.width,T=E.height,M=E.x,N=E.y;$.attr("transform",`translate(${-k/2-M},${d?h.height/2+L/2-T/2-N:-h.height/2-L/2-T/2-N})`),$.attr("style",`color: ${b.get("stroke")??g};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-P/2:P/2-h.height})`),_.attr("transform",`translate(0,${d?h.height/2+L/2:-h.height/2-L/2})`),st(e,S),e.intersect=function($){if(G.info("iconSquare intersect",e,$),!e.label)return et.rect(e,$);const E=e.x??0,k=e.y??0,T=e.height??0;let M=[];return d?M=[{x:E-h.width/2,y:k-T/2},{x:E+h.width/2,y:k-T/2},{x:E+h.width/2,y:k-T/2+h.height+L},{x:E+p/2,y:k-T/2+h.height+L},{x:E+p/2,y:k+T/2},{x:E-p/2,y:k+T/2},{x:E-p/2,y:k-T/2+h.height+L},{x:E-h.width/2,y:k-T/2+h.height+L}]:M=[{x:E-p/2,y:k-T/2},{x:E+p/2,y:k-T/2},{x:E+p/2,y:k-T/2+f},{x:E+h.width/2,y:k-T/2+f},{x:E+h.width/2/2,y:k+T/2},{x:E-h.width/2,y:k+T/2},{x:E-h.width/2,y:k-T/2+f},{x:E-p/2,y:k-T/2+f}],et.polygon(e,M,$)},c}m(Tx,"icon");async function Ex(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,label:u}=await yt(t,e,"icon-shape default"),d=20,f=e.label?8:0,p=e.pos==="t",{nodeBorder:g,mainBkg:b}=r,{stylesMap:x}=Qi(e),w=rt.svg(c),L=nt(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const C=x.get("fill");L.stroke=C??b;const v=c.append("g");e.icon&&v.html(`<g>${await gs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const A=v.node().getBBox(),I=A.width,P=A.height,R=A.x,_=A.y,S=Math.max(I,P)*Math.SQRT2+d*2,$=w.circle(0,0,S,L),E=Math.max(S,h.width),k=S+h.height+f,T=w.rectangle(-E/2,-k/2,E,k,{...L,fill:"transparent",stroke:"none"}),M=c.insert(()=>$,":first-child"),N=c.insert(()=>T);return v.attr("transform",`translate(${-I/2-R},${p?h.height/2+f/2-P/2-_:-h.height/2-f/2-P/2-_})`),v.attr("style",`color: ${x.get("stroke")??g};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-k/2:k/2-h.height})`),M.attr("transform",`translate(0,${p?h.height/2+f/2:-h.height/2-f/2})`),st(e,N),e.intersect=function(D){return G.info("iconSquare intersect",e,D),et.rect(e,D)},c}m(Ex,"iconCircle");async function Ax(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await yt(t,e,"icon-shape default"),f=e.pos==="t",p=a+u*2,g=a+u*2,{nodeBorder:b,mainBkg:x}=r,{stylesMap:w}=Qi(e),L=-g/2,C=-p/2,v=e.label?8:0,A=rt.svg(c),I=nt(e,{});e.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const P=w.get("fill");I.stroke=P??x;const R=A.path(kr(L,C,g,p,5),I),_=Math.max(g,h.width),S=p+h.height+v,$=A.rectangle(-_/2,-S/2,_,S,{...I,fill:"transparent",stroke:"none"}),E=c.insert(()=>R,":first-child").attr("class","icon-shape2"),k=c.insert(()=>$);if(e.icon){const T=c.append("g");T.html(`<g>${await gs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const M=T.node().getBBox(),N=M.width,D=M.height,O=M.x,B=M.y;T.attr("transform",`translate(${-N/2-O},${f?h.height/2+v/2-D/2-B:-h.height/2-v/2-D/2-B})`),T.attr("style",`color: ${w.get("stroke")??b};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-S/2:S/2-h.height})`),E.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),st(e,k),e.intersect=function(T){if(G.info("iconSquare intersect",e,T),!e.label)return et.rect(e,T);const M=e.x??0,N=e.y??0,D=e.height??0;let O=[];return f?O=[{x:M-h.width/2,y:N-D/2},{x:M+h.width/2,y:N-D/2},{x:M+h.width/2,y:N-D/2+h.height+v},{x:M+g/2,y:N-D/2+h.height+v},{x:M+g/2,y:N+D/2},{x:M-g/2,y:N+D/2},{x:M-g/2,y:N-D/2+h.height+v},{x:M-h.width/2,y:N-D/2+h.height+v}]:O=[{x:M-g/2,y:N-D/2},{x:M+g/2,y:N-D/2},{x:M+g/2,y:N-D/2+p},{x:M+h.width/2,y:N-D/2+p},{x:M+h.width/2/2,y:N+D/2},{x:M-h.width/2,y:N+D/2},{x:M-h.width/2,y:N-D/2+p},{x:M-g/2,y:N-D/2+p}],et.polygon(e,O,T)},c}m(Ax,"iconRounded");async function Lx(t,e,{config:{themeVariables:r,flowchart:i}}){const{labelStyles:n}=at(e);e.labelStyle=n;const s=e.assetHeight??48,o=e.assetWidth??48,a=Math.max(s,o),l=i?.wrappingWidth;e.width=Math.max(a,l??0);const{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await yt(t,e,"icon-shape default"),f=e.pos==="t",p=a+u*2,g=a+u*2,{nodeBorder:b,mainBkg:x}=r,{stylesMap:w}=Qi(e),L=-g/2,C=-p/2,v=e.label?8:0,A=rt.svg(c),I=nt(e,{});e.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const P=w.get("fill");I.stroke=P??x;const R=A.path(kr(L,C,g,p,.1),I),_=Math.max(g,h.width),S=p+h.height+v,$=A.rectangle(-_/2,-S/2,_,S,{...I,fill:"transparent",stroke:"none"}),E=c.insert(()=>R,":first-child"),k=c.insert(()=>$);if(e.icon){const T=c.append("g");T.html(`<g>${await gs(e.icon,{height:a,width:a,fallbackPrefix:""})}</g>`);const M=T.node().getBBox(),N=M.width,D=M.height,O=M.x,B=M.y;T.attr("transform",`translate(${-N/2-O},${f?h.height/2+v/2-D/2-B:-h.height/2-v/2-D/2-B})`),T.attr("style",`color: ${w.get("stroke")??b};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${f?-S/2:S/2-h.height})`),E.attr("transform",`translate(0,${f?h.height/2+v/2:-h.height/2-v/2})`),st(e,k),e.intersect=function(T){if(G.info("iconSquare intersect",e,T),!e.label)return et.rect(e,T);const M=e.x??0,N=e.y??0,D=e.height??0;let O=[];return f?O=[{x:M-h.width/2,y:N-D/2},{x:M+h.width/2,y:N-D/2},{x:M+h.width/2,y:N-D/2+h.height+v},{x:M+g/2,y:N-D/2+h.height+v},{x:M+g/2,y:N+D/2},{x:M-g/2,y:N+D/2},{x:M-g/2,y:N-D/2+h.height+v},{x:M-h.width/2,y:N-D/2+h.height+v}]:O=[{x:M-g/2,y:N-D/2},{x:M+g/2,y:N-D/2},{x:M+g/2,y:N-D/2+p},{x:M+h.width/2,y:N-D/2+p},{x:M+h.width/2/2,y:N+D/2},{x:M-h.width/2,y:N+D/2},{x:M-h.width/2,y:N-D/2+p},{x:M-g/2,y:N-D/2+p}],et.polygon(e,O,T)},c}m(Lx,"iconSquare");async function Bx(t,e,{config:{flowchart:r}}){const i=new Image;i.src=e?.img??"",await i.decode();const n=Number(i.naturalWidth.toString().replace("px","")),s=Number(i.naturalHeight.toString().replace("px",""));e.imageAspectRatio=n/s;const{labelStyles:o}=at(e);e.labelStyle=o;const a=r?.wrappingWidth;e.defaultWidth=r?.wrappingWidth;const l=Math.max(e.label?a??0:0,e?.assetWidth??n),c=e.constraint==="on"&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:l,h=e.constraint==="on"?c/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(c,a??0);const{shapeSvg:u,bbox:d,label:f}=await yt(t,e,"image-shape default"),p=e.pos==="t",g=-c/2,b=-h/2,x=e.label?8:0,w=rt.svg(u),L=nt(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const C=w.rectangle(g,b,c,h,L),v=Math.max(c,d.width),A=h+d.height+x,I=w.rectangle(-v/2,-A/2,v,A,{...L,fill:"none",stroke:"none"}),P=u.insert(()=>C,":first-child"),R=u.insert(()=>I);if(e.img){const _=u.append("image");_.attr("href",e.img),_.attr("width",c),_.attr("height",h),_.attr("preserveAspectRatio","none"),_.attr("transform",`translate(${-c/2},${p?A/2-h:-A/2})`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-h/2-d.height/2-x/2:h/2-d.height/2+x/2})`),P.attr("transform",`translate(0,${p?d.height/2+x/2:-d.height/2-x/2})`),st(e,R),e.intersect=function(_){if(G.info("iconSquare intersect",e,_),!e.label)return et.rect(e,_);const S=e.x??0,$=e.y??0,E=e.height??0;let k=[];return p?k=[{x:S-d.width/2,y:$-E/2},{x:S+d.width/2,y:$-E/2},{x:S+d.width/2,y:$-E/2+d.height+x},{x:S+c/2,y:$-E/2+d.height+x},{x:S+c/2,y:$+E/2},{x:S-c/2,y:$+E/2},{x:S-c/2,y:$-E/2+d.height+x},{x:S-d.width/2,y:$-E/2+d.height+x}]:k=[{x:S-c/2,y:$-E/2},{x:S+c/2,y:$-E/2},{x:S+c/2,y:$-E/2+h},{x:S+d.width/2,y:$-E/2+h},{x:S+d.width/2/2,y:$+E/2},{x:S-d.width/2,y:$+E/2},{x:S-d.width/2,y:$-E/2+h},{x:S-c/2,y:$-E/2+h}],et.polygon(e,k,_)},u}m(Bx,"imageSquare");async function Rx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=[{x:0,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:-3*a/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=nt(e,{}),f=vt(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Tr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(Rx,"inv_trapezoid");async function ys(t,e,r){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i;const{shapeSvg:s,bbox:o}=await yt(t,e,dt(e)),a=Math.max(o.width+r.labelPaddingX*2,e?.width||0),l=Math.max(o.height+r.labelPaddingY*2,e?.height||0),c=-a/2,h=-l/2;let u,{rx:d,ry:f}=e;const{cssStyles:p}=e;if(r?.rx&&r.ry&&(d=r.rx,f=r.ry),e.look==="handDrawn"){const g=rt.svg(s),b=nt(e,{}),x=d||f?g.path(kr(c,h,a,l,d||0),b):g.rectangle(c,h,a,l,b);u=s.insert(()=>x,":first-child"),u.attr("class","basic label-container").attr("style",de(p))}else u=s.insert("rect",":first-child"),u.attr("class","basic label-container").attr("style",n).attr("rx",de(d)).attr("ry",de(f)).attr("x",c).attr("y",h).attr("width",a).attr("height",l);return st(e,u),e.intersect=function(g){return et.rect(e,g)},s}m(ys,"drawRect");async function Mx(t,e){const{shapeSvg:r,bbox:i,label:n}=await yt(t,e,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),n.attr("transform",`translate(${-(i.width/2)-(i.x-(i.left??0))}, ${-(i.height/2)-(i.y-(i.top??0))})`),st(e,s),e.intersect=function(l){return et.rect(e,l)},r}m(Mx,"labelRect");async function $x(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:0,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:-(3*a)/6,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=nt(e,{}),f=vt(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Tr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m($x,"lean_left");async function Ix(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),a=Math.max(s.height+(e.padding??0),e?.height??0),l=[{x:-3*a/6,y:0},{x:o,y:0},{x:o+3*a/6,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=nt(e,{}),f=vt(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Tr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(Ix,"lean_right");function Ox(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.label="",e.labelStyle=r;const n=t.insert("g").attr("class",dt(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=Math.max(35,e?.width??0),a=Math.max(35,e?.height??0),l=7,c=[{x:o,y:0},{x:0,y:a+l/2},{x:o-2*l,y:a+l/2},{x:0,y:2*a},{x:o,y:a-l/2},{x:2*l,y:a-l/2}],h=rt.svg(n),u=nt(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=vt(c),f=h.path(d,u),p=n.insert(()=>f,":first-child");return s&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",s),i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),p.attr("transform",`translate(-${o/2},${-a})`),st(e,p),e.intersect=function(g){return G.info("lightningBolt intersect",e,g),et.polygon(e,c,g)},n}m(Ox,"lightningBolt");var $R=m((t,e,r,i,n,s,o)=>[`M${t},${e+s}`,`a${n},${s} 0,0,0 ${r},0`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${t},${e+s+o}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),IR=m((t,e,r,i,n,s,o)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${n},${s} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${s} 0,0,0 ${r},0`,`l0,${-i}`,`M${t},${e+s+o}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),OR=m((t,e,r,i,n,s)=>[`M${t-r/2},${-i/2}`,`a${n},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Px(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0),e.width??0),l=a/2,c=l/(2.5+a/50),h=Math.max(s.height+c+(e.padding??0),e.height??0),u=h*.1;let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=rt.svg(n),g=IR(0,0,a,h,l,c,u),b=OR(0,c,a,h,l,c),x=nt(e,{}),w=p.path(g,x),L=p.path(b,x);n.insert(()=>L,":first-child").attr("class","line"),d=n.insert(()=>w,":first-child"),d.attr("class","basic label-container"),f&&d.attr("style",f)}else{const p=$R(0,0,a,h,l,c,u);d=n.insert("path",":first-child").attr("d",p).attr("class","basic label-container").attr("style",de(f)).attr("style",i)}return d.attr("label-offset-y",c),d.attr("transform",`translate(${-a/2}, ${-(h/2+c)})`),st(e,d),o.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),e.intersect=function(p){const g=et.rect(e,p),b=g.x-(e.x??0);if(l!=0&&(Math.abs(b)<(e.width??0)/2||Math.abs(b)==(e.width??0)/2&&Math.abs(g.y-(e.y??0))>(e.height??0)/2-c)){let x=c*c*(1-b*b/(l*l));x>0&&(x=Math.sqrt(x)),x=c-x,p.y-(e.y??0)>0&&(x=-x),g.y+=x}return g},n}m(Px,"linedCylinder");async function Fx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,{cssStyles:u}=e,d=rt.svg(n),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:-a/2-a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:h/2},...Pr(-a/2-a/2*.1,h/2,a/2+a/2*.1,h/2,c,.8),{x:a/2+a/2*.1,y:-h/2},{x:-a/2-a/2*.1,y:-h/2},{x:-a/2,y:-h/2},{x:-a/2,y:h/2*1.1},{x:-a/2,y:-h/2}],g=d.polygon(p.map(x=>[x.x,x.y]),f),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)+a/2*.1/2-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),st(e,b),e.intersect=function(x){return et.polygon(e,p,x)},n}m(Fx,"linedWaveEdgedRect");async function Nx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{}),g=[{x:h-c,y:u+c},{x:h-c,y:u+l+c},{x:h+a-c,y:u+l+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u+l-c},{x:h+a+c,y:u+l-c},{x:h+a+c,y:u-c},{x:h+c,y:u-c},{x:h+c,y:u},{x:h,y:u},{x:h,y:u+c}],b=[{x:h,y:u+c},{x:h+a-c,y:u+c},{x:h+a-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u},{x:h,y:u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=vt(g),w=f.path(x,p),L=vt(b),C=f.path(L,{...p,fill:"none"}),v=n.insert(()=>C,":first-child");return v.insert(()=>w,":first-child"),v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)-c-(s.x-(s.left??0))}, ${-(s.height/2)+c-(s.y-(s.top??0))})`),st(e,v),e.intersect=function(A){return et.polygon(e,g,A)},n}m(Nx,"multiRect");async function jx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=l+c,u=-a/2,d=-h/2,f=5,{cssStyles:p}=e,g=Pr(u-f,d+h+f,u+a-f,d+h+f,c,.8),b=g?.[g.length-1],x=[{x:u-f,y:d+f},{x:u-f,y:d+h+f},...g,{x:u+a-f,y:b.y-f},{x:u+a,y:b.y-f},{x:u+a,y:b.y-2*f},{x:u+a+f,y:b.y-2*f},{x:u+a+f,y:d-f},{x:u+f,y:d-f},{x:u+f,y:d},{x:u,y:d},{x:u,y:d+f}],w=[{x:u,y:d+f},{x:u+a-f,y:d+f},{x:u+a-f,y:b.y-f},{x:u+a,y:b.y-f},{x:u+a,y:d},{x:u,y:d}],L=rt.svg(n),C=nt(e,{});e.look!=="handDrawn"&&(C.roughness=0,C.fillStyle="solid");const v=vt(x),A=L.path(v,C),I=vt(w),P=L.path(I,C),R=n.insert(()=>A,":first-child");return R.insert(()=>P),R.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&R.selectAll("path").attr("style",i),R.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)+f-c/2-(s.y-(s.top??0))})`),st(e,R),e.intersect=function(_){return et.polygon(e,x,_)},n}m(jx,"multiWaveEdgedRectangle");async function Dx(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i,e.useHtmlLabels||we().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);const{shapeSvg:o,bbox:a,label:l}=await yt(t,e,dt(e)),c=Math.max(a.width+(e.padding??0)*2,e?.width??0),h=Math.max(a.height+(e.padding??0)*2,e?.height??0),u=-c/2,d=-h/2,{cssStyles:f}=e,p=rt.svg(o),g=nt(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=p.rectangle(u,d,c,h,g),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",f),n&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",n),l.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),st(e,x),e.intersect=function(w){return et.rect(e,w)},o}m(Dx,"note");var PR=m((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function qx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=s.width+e.padding,a=s.height+e.padding,l=o+a,c=[{x:l/2,y:0},{x:l,y:-l/2},{x:l/2,y:-l},{x:0,y:-l/2}];let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=rt.svg(n),f=nt(e,{}),p=PR(0,0,l),g=d.path(p,f);h=n.insert(()=>g,":first-child").attr("transform",`translate(${-l/2}, ${l/2})`),u&&h.attr("style",u)}else h=Tr(n,l,l,c);return i&&h.attr("style",i),st(e,h),e.intersect=function(d){return G.debug(`APA12 Intersect called SPLIT
point:`,d,`
node:
`,e,`
res:`,et.polygon(e,c,d)),et.polygon(e,c,d)},n}m(qx,"question");async function Hx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=-a/2,h=-l/2,u=h/2,d=[{x:c+u,y:h},{x:c,y:0},{x:c+u,y:-h},{x:-c,y:-h},{x:-c,y:h}],{cssStyles:f}=e,p=rt.svg(n),g=nt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=vt(d),x=p.path(b,g),w=n.insert(()=>x,":first-child");return w.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),w.attr("transform",`translate(${-u/2},0)`),o.attr("transform",`translate(${-u/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),st(e,w),e.intersect=function(L){return et.polygon(e,d,L)},n}m(Hx,"rect_left_inv_arrow");async function zx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;let n;e.cssClasses?n="node "+e.cssClasses:n="node default";const s=t.insert("g").attr("class",n).attr("id",e.domId||e.id),o=s.insert("g"),a=s.insert("g").attr("class","label").attr("style",i),l=e.description,c=e.label,h=a.node().appendChild(await ei(c,e.labelStyle,!0,!0));let u={width:0,height:0};if(Wt(St()?.flowchart?.htmlLabels)){const P=h.children[0],R=wt(h);u=P.getBoundingClientRect(),R.attr("width",u.width),R.attr("height",u.height)}G.info("Text 2",l);const d=l||[],f=h.getBBox(),p=a.node().appendChild(await ei(d.join?d.join("<br/>"):d,e.labelStyle,!0,!0)),g=p.children[0],b=wt(p);u=g.getBoundingClientRect(),b.attr("width",u.width),b.attr("height",u.height);const x=(e.padding||0)/2;wt(p).attr("transform","translate( "+(u.width>f.width?0:(f.width-u.width)/2)+", "+(f.height+x+5)+")"),wt(h).attr("transform","translate( "+(u.width<f.width?0:-(f.width-u.width)/2)+", 0)"),u=a.node().getBBox(),a.attr("transform","translate("+-u.width/2+", "+(-u.height/2-x+3)+")");const w=u.width+(e.padding||0),L=u.height+(e.padding||0),C=-u.width/2-x,v=-u.height/2-x;let A,I;if(e.look==="handDrawn"){const P=rt.svg(s),R=nt(e,{}),_=P.path(kr(C,v,w,L,e.rx||0),R),S=P.line(-u.width/2-x,-u.height/2-x+f.height+x,u.width/2+x,-u.height/2-x+f.height+x,R);I=s.insert(()=>(G.debug("Rough node insert CXC",_),S),":first-child"),A=s.insert(()=>(G.debug("Rough node insert CXC",_),_),":first-child")}else A=o.insert("rect",":first-child"),I=o.insert("line"),A.attr("class","outer title-state").attr("style",i).attr("x",-u.width/2-x).attr("y",-u.height/2-x).attr("width",u.width+(e.padding||0)).attr("height",u.height+(e.padding||0)),I.attr("class","divider").attr("x1",-u.width/2-x).attr("x2",u.width/2+x).attr("y1",-u.height/2-x+f.height+x).attr("y2",-u.height/2-x+f.height+x);return st(e,A),e.intersect=function(P){return et.rect(e,P)},s}m(zx,"rectWithTitle");async function Wx(t,e){const r={rx:5,ry:5,labelPaddingX:(e?.padding||0)*1,labelPaddingY:(e?.padding||0)*1};return ys(t,e,r)}m(Wx,"roundedRect");async function Ux(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=e?.padding??0,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=-s.width/2-a,u=-s.height/2-a,{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],b=f.polygon(g.map(w=>[w.x,w.y]),p),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container").attr("style",de(d)),i&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),o.attr("transform",`translate(${-l/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(w){return et.rect(e,w)},n}m(Ux,"shadedProcess");async function Vx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=-a/2,h=-l/2,{cssStyles:u}=e,d=rt.svg(n),f=nt(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=[{x:c,y:h},{x:c,y:h+l},{x:c+a,y:h+l},{x:c+a,y:h-l/2}],g=vt(p),b=d.path(g,f),x=n.insert(()=>b,":first-child");return x.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",u),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),x.attr("transform",`translate(0, ${l/4})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))}, ${-l/4+(e.padding??0)-(s.y-(s.top??0))})`),st(e,x),e.intersect=function(w){return et.polygon(e,p,w)},n}m(Vx,"slopedRect");async function Gx(t,e){const r={rx:0,ry:0,labelPaddingX:(e?.padding||0)*2,labelPaddingY:(e?.padding||0)*1};return ys(t,e,r)}m(Gx,"squareRect");async function Yx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=s.height+e.padding,a=s.width+o/4+e.padding;let l;const{cssStyles:c}=e;if(e.look==="handDrawn"){const h=rt.svg(n),u=nt(e,{}),d=kr(-a/2,-o/2,a,o,o/2),f=h.path(d,u);l=n.insert(()=>f,":first-child"),l.attr("class","basic label-container").attr("style",de(c))}else l=n.insert("rect",":first-child"),l.attr("class","basic label-container").attr("style",i).attr("rx",o/2).attr("ry",o/2).attr("x",-a/2).attr("y",-o/2).attr("width",a).attr("height",o);return st(e,l),e.intersect=function(h){return et.rect(e,h)},n}m(Yx,"stadium");async function Xx(t,e){return ys(t,e,{rx:5,ry:5})}m(Xx,"state");function Jx(t,e,{config:{themeVariables:r}}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i;const{cssStyles:s}=e,{lineColor:o,stateBorder:a,nodeBorder:l}=r,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),h=rt.svg(c),u=nt(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=h.circle(0,0,14,{...u,stroke:o,strokeWidth:2}),f=a??l,p=h.circle(0,0,5,{...u,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),g=c.insert(()=>d,":first-child");return g.insert(()=>p),s&&g.selectAll("path").attr("style",s),n&&g.selectAll("path").attr("style",n),st(e,g),e.intersect=function(b){return et.circle(e,7,b)},c}m(Jx,"stateEnd");function Kx(t,e,{config:{themeVariables:r}}){const{lineColor:i}=r,n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const a=rt.svg(n).circle(0,0,14,wC(i));s=n.insert(()=>a),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=n.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return st(e,s),e.intersect=function(o){return et.circle(e,7,o)},n}m(Kx,"stateStart");async function Zx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=(e?.padding||0)/2,a=s.width+e.padding,l=s.height+e.padding,c=-s.width/2-o,h=-s.height/2-o,u=[{x:0,y:0},{x:a,y:0},{x:a,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if(e.look==="handDrawn"){const d=rt.svg(n),f=nt(e,{}),p=d.rectangle(c-8,h,a+16,l,f),g=d.line(c,h,c,h+l,f),b=d.line(c+a,h,c+a,h+l,f);n.insert(()=>g,":first-child"),n.insert(()=>b,":first-child");const x=n.insert(()=>p,":first-child"),{cssStyles:w}=e;x.attr("class","basic label-container").attr("style",de(w)),st(e,x)}else{const d=Tr(n,a,l,u);i&&d.attr("style",i),st(e,d)}return e.intersect=function(d){return et.polygon(e,u,d)},n}m(Zx,"subroutine");async function Qx(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=Math.max(s.width+(e.padding??0)*2,e?.width??0),a=Math.max(s.height+(e.padding??0)*2,e?.height??0),l=-o/2,c=-a/2,h=.2*a,u=.2*a,{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{}),g=[{x:l-h/2,y:c},{x:l+o+h/2,y:c},{x:l+o+h/2,y:c+a},{x:l-h/2,y:c+a}],b=[{x:l+o-h/2,y:c+a},{x:l+o+h/2,y:c+a},{x:l+o+h/2,y:c+a-u}];e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=vt(g),w=f.path(x,p),L=vt(b),C=f.path(L,{...p,fillStyle:"solid"}),v=n.insert(()=>C,":first-child");return v.insert(()=>w,":first-child"),v.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),st(e,v),e.intersect=function(A){return et.polygon(e,g,A)},n}m(Qx,"taggedRect");async function t1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/4,h=.2*a,u=.2*l,d=l+c,{cssStyles:f}=e,p=rt.svg(n),g=nt(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const b=[{x:-a/2-a/2*.1,y:d/2},...Pr(-a/2-a/2*.1,d/2,a/2+a/2*.1,d/2,c,.8),{x:a/2+a/2*.1,y:-d/2},{x:-a/2-a/2*.1,y:-d/2}],x=-a/2+a/2*.1,w=-d/2-u*.4,L=[{x:x+a-h,y:(w+l)*1.4},{x:x+a,y:w+l-u},{x:x+a,y:(w+l)*.9},...Pr(x+a,(w+l)*1.3,x+a-h,(w+l)*1.5,-l*.03,.5)],C=vt(b),v=p.path(C,g),A=vt(L),I=p.path(A,{...g,fillStyle:"solid"}),P=n.insert(()=>I,":first-child");return P.insert(()=>v,":first-child"),P.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",f),i&&e.look!=="handDrawn"&&P.selectAll("path").attr("style",i),P.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c/2-(s.y-(s.top??0))})`),st(e,P),e.intersect=function(R){return et.polygon(e,b,R)},n}m(t1,"taggedWaveEdgedRectangle");async function e1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=Math.max(s.width+e.padding,e?.width||0),a=Math.max(s.height+e.padding,e?.height||0),l=-o/2,c=-a/2,h=n.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",o).attr("height",a),st(e,h),e.intersect=function(u){return et.rect(e,u)},n}m(e1,"text");var FR=m((t,e,r,i,n,s)=>`M${t},${e}
    a${n},${s} 0,0,1 0,${-i}
    l${r},0
    a${n},${s} 0,0,1 0,${i}
    M${r},${-i}
    a${n},${s} 0,0,0 0,${i}
    l${-r},0`,"createCylinderPathD"),NR=m((t,e,r,i,n,s)=>[`M${t},${e}`,`M${t+r},${e}`,`a${n},${s} 0,0,0 0,${-i}`,`l${-r},0`,`a${n},${s} 0,0,0 0,${i}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),jR=m((t,e,r,i,n,s)=>[`M${t+r/2},${-i/2}`,`a${n},${s} 0,0,0 0,${i}`].join(" "),"createInnerCylinderPathD");async function r1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o,halfPadding:a}=await yt(t,e,dt(e)),l=e.look==="neo"?a*2:a,c=s.height+l,h=c/2,u=h/(2.5+c/50),d=s.width+u+l,{cssStyles:f}=e;let p;if(e.look==="handDrawn"){const g=rt.svg(n),b=NR(0,0,d,c,u,h),x=jR(0,0,d,c,u,h),w=g.path(b,nt(e,{})),L=g.path(x,nt(e,{fill:"none"}));p=n.insert(()=>L,":first-child"),p=n.insert(()=>w,":first-child"),p.attr("class","basic label-container"),f&&p.attr("style",f)}else{const g=FR(0,0,d,c,u,h);p=n.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",de(f)).attr("style",i),p.attr("class","basic label-container"),f&&p.selectAll("path").attr("style",f),i&&p.selectAll("path").attr("style",i)}return p.attr("label-offset-x",u),p.attr("transform",`translate(${-d/2}, ${c/2} )`),o.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),st(e,p),e.intersect=function(g){const b=et.rect(e,g),x=b.y-(e.y??0);if(h!=0&&(Math.abs(x)<(e.height??0)/2||Math.abs(x)==(e.height??0)/2&&Math.abs(b.x-(e.x??0))>(e.width??0)/2-u)){let w=u*u*(1-x*x/(h*h));w!=0&&(w=Math.sqrt(Math.abs(w))),w=u-w,g.x-(e.x??0)>0&&(w=-w),b.x+=w}return b},n}m(r1,"tiltedCylinder");async function i1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=s.width+e.padding,a=s.height+e.padding,l=[{x:-3*a/6,y:0},{x:o+3*a/6,y:0},{x:o,y:-a},{x:0,y:-a}];let c;const{cssStyles:h}=e;if(e.look==="handDrawn"){const u=rt.svg(n),d=nt(e,{}),f=vt(l),p=u.path(f,d);c=n.insert(()=>p,":first-child").attr("transform",`translate(${-o/2}, ${a/2})`),h&&c.attr("style",h)}else c=Tr(n,o,a,l);return i&&c.attr("style",i),e.width=o,e.height=a,st(e,c),e.intersect=function(u){return et.polygon(e,l,u)},n}m(i1,"trapezoid");async function n1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=60,a=20,l=Math.max(o,s.width+(e.padding??0)*2,e?.width??0),c=Math.max(a,s.height+(e.padding??0)*2,e?.height??0),{cssStyles:h}=e,u=rt.svg(n),d=nt(e,{});e.look!=="handDrawn"&&(d.roughness=0,d.fillStyle="solid");const f=[{x:-l/2*.8,y:-c/2},{x:l/2*.8,y:-c/2},{x:l/2,y:-c/2*.6},{x:l/2,y:c/2},{x:-l/2,y:c/2},{x:-l/2,y:-c/2*.6}],p=vt(f),g=u.path(p,d),b=n.insert(()=>g,":first-child");return b.attr("class","basic label-container"),h&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",h),i&&e.look!=="handDrawn"&&b.selectChildren("path").attr("style",i),st(e,b),e.intersect=function(x){return et.polygon(e,f,x)},n}m(n1,"trapezoidalPentagon");async function s1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Wt(St().flowchart?.htmlLabels),l=s.width+(e.padding??0),c=l+s.height,h=l+s.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=vt(u),b=f.path(g,p),x=n.insert(()=>b,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),i&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",i),e.width=l,e.height=c,st(e,x),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(a?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(w){return G.info("Triangle intersect",e,u,w),et.polygon(e,u,w)},n}m(s1,"triangle");async function a1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=l/8,h=l+c,{cssStyles:u}=e,f=70-a,p=f>0?f/2:0,g=rt.svg(n),b=nt(e,{});e.look!=="handDrawn"&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-a/2-p,y:h/2},...Pr(-a/2-p,h/2,a/2+p,h/2,c,.8),{x:a/2+p,y:-h/2},{x:-a/2-p,y:-h/2}],w=vt(x),L=g.path(w,b),C=n.insert(()=>L,":first-child");return C.attr("class","basic label-container"),u&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",u),i&&e.look!=="handDrawn"&&C.selectAll("path").attr("style",i),C.attr("transform",`translate(0,${-c/2})`),o.attr("transform",`translate(${-a/2+(e.padding??0)-(s.x-(s.left??0))},${-l/2+(e.padding??0)-c-(s.y-(s.top??0))})`),st(e,C),e.intersect=function(v){return et.polygon(e,x,v)},n}m(a1,"waveEdgedRectangle");async function o1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s}=await yt(t,e,dt(e)),o=100,a=50,l=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),h=l/c;let u=l,d=c;u>d*h?d=u/h:u=d*h,u=Math.max(u,o),d=Math.max(d,a);const f=Math.min(d*.2,d/4),p=d+f*2,{cssStyles:g}=e,b=rt.svg(n),x=nt(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const w=[{x:-u/2,y:p/2},...Pr(-u/2,p/2,u/2,p/2,f,1),{x:u/2,y:-p/2},...Pr(u/2,-p/2,-u/2,-p/2,f,-1)],L=vt(w),C=b.path(L,x),v=n.insert(()=>C,":first-child");return v.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",g),i&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",i),st(e,v),e.intersect=function(A){return et.polygon(e,w,A)},n}m(o1,"waveRectangle");async function l1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const{shapeSvg:n,bbox:s,label:o}=await yt(t,e,dt(e)),a=Math.max(s.width+(e.padding??0)*2,e?.width??0),l=Math.max(s.height+(e.padding??0)*2,e?.height??0),c=5,h=-a/2,u=-l/2,{cssStyles:d}=e,f=rt.svg(n),p=nt(e,{}),g=[{x:h-c,y:u-c},{x:h-c,y:u+l},{x:h+a,y:u+l},{x:h+a,y:u-c}],b=`M${h-c},${u-c} L${h+a},${u-c} L${h+a},${u+l} L${h-c},${u+l} L${h-c},${u-c}
                M${h-c},${u} L${h+a},${u}
                M${h},${u-c} L${h},${u+l}`;e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const x=f.path(b,p),w=n.insert(()=>x,":first-child");return w.attr("transform",`translate(${c/2}, ${c/2})`),w.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",d),i&&e.look!=="handDrawn"&&w.selectAll("path").attr("style",i),o.attr("transform",`translate(${-(s.width/2)+c/2-(s.x-(s.left??0))}, ${-(s.height/2)+c/2-(s.y-(s.top??0))})`),st(e,w),e.intersect=function(L){return et.polygon(e,g,L)},n}m(l1,"windowPane");async function gu(t,e){const r=e;if(r.alias&&(e.label=r.alias),e.look==="handDrawn"){const{themeVariables:W}=we(),{background:U}=W,F={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${U}`]};await gu(t,F)}const i=we();e.useHtmlLabels=i.htmlLabels;let n=i.er?.diagramPadding??10,s=i.er?.entityPadding??6;const{cssStyles:o}=e,{labelStyles:a,nodeStyles:l}=at(e);if(r.attributes.length===0&&e.label){const W={rx:0,ry:0,labelPaddingX:n,labelPaddingY:n*1.5};vr(e.label,i)+W.labelPaddingX*2<i.er.minEntityWidth&&(e.width=i.er.minEntityWidth);const U=await ys(t,e,W);if(!Wt(i.htmlLabels)){const F=U.select("text"),j=F.node()?.getBBox();F.attr("transform",`translate(${-j.width/2}, 0)`)}return U}i.htmlLabels||(n*=1.25,s*=1.25);let c=dt(e);c||(c="node default");const h=t.insert("g").attr("class",c).attr("id",e.domId||e.id),u=await Ti(h,e.label??"",i,0,0,["name"],a);u.height+=s;let d=0;const f=[],p=[];let g=0,b=0,x=0,w=0,L=!0,C=!0;for(const W of r.attributes){const U=await Ti(h,W.type,i,0,d,["attribute-type"],a);g=Math.max(g,U.width+n);const F=await Ti(h,W.name,i,0,d,["attribute-name"],a);b=Math.max(b,F.width+n);const j=await Ti(h,W.keys.join(),i,0,d,["attribute-keys"],a);x=Math.max(x,j.width+n);const V=await Ti(h,W.comment,i,0,d,["attribute-comment"],a);w=Math.max(w,V.width+n);const K=Math.max(U.height,F.height,j.height,V.height)+s;p.push({yOffset:d,rowHeight:K}),d+=K}let v=4;x<=n&&(L=!1,x=0,v--),w<=n&&(C=!1,w=0,v--);const A=h.node().getBBox();if(u.width+n*2-(g+b+x+w)>0){const W=u.width+n*2-(g+b+x+w);g+=W/v,b+=W/v,x>0&&(x+=W/v),w>0&&(w+=W/v)}const I=g+b+x+w,P=rt.svg(h),R=nt(e,{});e.look!=="handDrawn"&&(R.roughness=0,R.fillStyle="solid");let _=0;p.length>0&&(_=p.reduce((W,U)=>W+(U?.rowHeight??0),0));const S=Math.max(A.width+n*2,e?.width||0,I),$=Math.max((_??0)+u.height,e?.height||0),E=-S/2,k=-$/2;h.selectAll("g:not(:first-child)").each((W,U,F)=>{const j=wt(F[U]),V=j.attr("transform");let K=0,Q=0;if(V){const pt=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(V);pt&&(K=parseFloat(pt[1]),Q=parseFloat(pt[2]),j.attr("class").includes("attribute-name")?K+=g:j.attr("class").includes("attribute-keys")?K+=g+b:j.attr("class").includes("attribute-comment")&&(K+=g+b+x))}j.attr("transform",`translate(${E+n/2+K}, ${Q+k+u.height+s/2})`)}),h.select(".name").attr("transform","translate("+-u.width/2+", "+(k+s/2)+")");const T=P.rectangle(E,k,S,$,R),M=h.insert(()=>T,":first-child").attr("style",o.join("")),{themeVariables:N}=we(),{rowEven:D,rowOdd:O,nodeBorder:B}=N;f.push(0);for(const[W,U]of p.entries()){const j=(W+1)%2===0&&U.yOffset!==0,V=P.rectangle(E,u.height+k+U?.yOffset,S,U?.rowHeight,{...R,fill:j?D:O,stroke:B});h.insert(()=>V,"g.label").attr("style",o.join("")).attr("class",`row-rect-${j?"even":"odd"}`)}let H=P.line(E,u.height+k,S+E,u.height+k,R);h.insert(()=>H).attr("class","divider"),H=P.line(g+E,u.height+k,g+E,$+k,R),h.insert(()=>H).attr("class","divider"),L&&(H=P.line(g+b+E,u.height+k,g+b+E,$+k,R),h.insert(()=>H).attr("class","divider")),C&&(H=P.line(g+b+x+E,u.height+k,g+b+x+E,$+k,R),h.insert(()=>H).attr("class","divider"));for(const W of f)H=P.line(E,u.height+k+W,S+E,u.height+k+W,R),h.insert(()=>H).attr("class","divider");if(st(e,M),l&&e.look!=="handDrawn"){const U=l.split(";")?.filter(F=>F.includes("stroke"))?.map(F=>`${F}`).join("; ");h.selectAll("path").attr("style",U??""),h.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(W){return et.rect(e,W)},h}m(gu,"erBox");async function Ti(t,e,r,i=0,n=0,s=[],o=""){const a=t.insert("g").attr("class",`label ${s.join(" ")}`).attr("transform",`translate(${i}, ${n})`).attr("style",o);e!==sp(e)&&(e=sp(e),e=e.replaceAll("<","&lt;").replaceAll(">","&gt;"));const l=a.node().appendChild(await jr(a,e,{width:vr(e,r)+100,style:o,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let h=l.children[0];for(h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");h.childNodes[0];)h=h.childNodes[0],h.textContent=h.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Wt(r.htmlLabels)){const h=l.children[0];h.style.textAlign="start";const u=wt(l);c=h.getBoundingClientRect(),u.attr("width",c.width),u.attr("height",c.height)}return c}m(Ti,"addText");async function c1(t,e,r,i,n=r.class.padding??12){const s=i?0:3,o=t.insert("g").attr("class",dt(e)).attr("id",e.domId||e.id);let a=null,l=null,c=null,h=null,u=0,d=0,f=0;if(a=o.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const w=e.annotations[0];await Nn(a,{text:`${w}`},0),u=a.node().getBBox().height}l=o.insert("g").attr("class","label-group text"),await Nn(l,e,0,["font-weight: bolder"]);const p=l.node().getBBox();d=p.height,c=o.insert("g").attr("class","members-group text");let g=0;for(const w of e.members){const L=await Nn(c,w,g,[w.parseClassifier()]);g+=L+s}f=c.node().getBBox().height,f<=0&&(f=n/2),h=o.insert("g").attr("class","methods-group text");let b=0;for(const w of e.methods){const L=await Nn(h,w,b,[w.parseClassifier()]);b+=L+s}let x=o.node().getBBox();if(a!==null){const w=a.node().getBBox();a.attr("transform",`translate(${-w.width/2})`)}return l.attr("transform",`translate(${-p.width/2}, ${u})`),x=o.node().getBBox(),c.attr("transform",`translate(0, ${u+d+n*2})`),x=o.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(f?f+n*4:n*2)})`),x=o.node().getBBox(),{shapeSvg:o,bbox:x}}m(c1,"textHelper");async function Nn(t,e,r,i=[]){const n=t.insert("g").attr("class","label").attr("style",i.join("; ")),s=we();let o="useHtmlLabels"in e?e.useHtmlLabels:Wt(s.htmlLabels)??!0,a="";"text"in e?a=e.text:a=e.label,!o&&a.startsWith("\\")&&(a=a.substring(1)),zi(a)&&(o=!0);const l=await jr(n,Ya(gi(a)),{width:vr(a,s)+50,classes:"markdown-node-label",useHtmlLabels:o},s);let c,h=1;if(o){const u=l.children[0],d=wt(l);h=u.innerHTML.split("<br>").length,u.innerHTML.includes("</math>")&&(h+=u.innerHTML.split("<mrow>").length-1);const f=u.getElementsByTagName("img");if(f){const p=a.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...f].map(g=>new Promise(b=>{function x(){if(g.style.display="flex",g.style.flexDirection="column",p){const w=s.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,C=parseInt(w,10)*5+"px";g.style.minWidth=C,g.style.maxWidth=C}else g.style.width="100%";b(g)}m(x,"setupImage"),setTimeout(()=>{g.complete&&x()}),g.addEventListener("error",x),g.addEventListener("load",x)})))}c=u.getBoundingClientRect(),d.attr("width",c.width),d.attr("height",c.height)}else{i.includes("font-weight: bolder")&&wt(l).selectAll("tspan").attr("font-weight",""),h=l.children.length;const u=l.children[0];(l.textContent===""||l.textContent.includes("&gt"))&&(u.textContent=a[0]+a.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),a[1]===" "&&(u.textContent=u.textContent[0]+" "+u.textContent.substring(1))),u.textContent==="undefined"&&(u.textContent=""),c=l.getBBox()}return n.attr("transform","translate(0,"+(-c.height/(2*h)+r)+")"),c.height}m(Nn,"addText");async function h1(t,e){const r=St(),i=r.class.padding??12,n=i,s=e.useHtmlLabels??Wt(r.htmlLabels)??!0,o=e;o.annotations=o.annotations??[],o.members=o.members??[],o.methods=o.methods??[];const{shapeSvg:a,bbox:l}=await c1(t,e,r,s,n),{labelStyles:c,nodeStyles:h}=at(e);e.labelStyle=c,e.cssStyles=o.styles||"";const u=o.styles?.join(";")||h||"";e.cssStyles||(e.cssStyles=u.replaceAll("!important","").split(";"));const d=o.members.length===0&&o.methods.length===0&&!r.class?.hideEmptyMembersBox,f=rt.svg(a),p=nt(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=l.width;let b=l.height;o.members.length===0&&o.methods.length===0?b+=n:o.members.length>0&&o.methods.length===0&&(b+=n*2);const x=-g/2,w=-b/2,L=f.rectangle(x-i,w-i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0),g+2*i,b+2*i+(d?i*2:o.members.length===0&&o.methods.length===0?-i:0),p),C=a.insert(()=>L,":first-child");C.attr("class","basic label-container");const v=C.node().getBBox();a.selectAll(".text").each((R,_,S)=>{const $=wt(S[_]),E=$.attr("transform");let k=0;if(E){const D=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(E);D&&(k=parseFloat(D[2]))}let T=k+w+i-(d?i:o.members.length===0&&o.methods.length===0?-i/2:0);s||(T-=4);let M=x;($.attr("class").includes("label-group")||$.attr("class").includes("annotation-group"))&&(M=-$.node()?.getBBox().width/2||0,a.selectAll("text").each(function(N,D,O){window.getComputedStyle(O[D]).textAnchor==="middle"&&(M=0)})),$.attr("transform",`translate(${M}, ${T})`)});const A=a.select(".annotation-group").node().getBBox().height-(d?i/2:0)||0,I=a.select(".label-group").node().getBBox().height-(d?i/2:0)||0,P=a.select(".members-group").node().getBBox().height-(d?i/2:0)||0;if(o.members.length>0||o.methods.length>0||d){const R=f.line(v.x,A+I+w+i,v.x+v.width,A+I+w+i,p);a.insert(()=>R).attr("class","divider").attr("style",u)}if(d||o.members.length>0||o.methods.length>0){const R=f.line(v.x,A+I+P+w+n*2+i,v.x+v.width,A+I+P+w+i+n*2,p);a.insert(()=>R).attr("class","divider").attr("style",u)}if(o.look!=="handDrawn"&&a.selectAll("path").attr("style",u),C.select(":nth-child(2)").attr("style",u),a.selectAll(".divider").select("path").attr("style",u),e.labelStyle?a.selectAll("span").attr("style",e.labelStyle):a.selectAll("span").attr("style",u),!s){const R=RegExp(/color\s*:\s*([^;]*)/),_=R.exec(u);if(_){const S=_[0].replace("color","fill");a.selectAll("tspan").attr("style",S)}else if(c){const S=R.exec(c);if(S){const $=S[0].replace("color","fill");a.selectAll("tspan").attr("style",$)}}}return st(e,C),e.intersect=function(R){return et.rect(e,R)},a}m(h1,"classBox");async function u1(t,e){const{labelStyles:r,nodeStyles:i}=at(e);e.labelStyle=r;const n=e,s=e,o=20,a=20,l="verifyMethod"in e,c=dt(e),h=t.insert("g").attr("class",c).attr("id",e.domId??e.id);let u;l?u=await Xe(h,`&lt;&lt;${n.type}&gt;&gt;`,0,e.labelStyle):u=await Xe(h,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let d=u;const f=await Xe(h,n.name,d,e.labelStyle+"; font-weight: bold;");if(d+=f+a,l){const A=await Xe(h,`${n.requirementId?`id: ${n.requirementId}`:""}`,d,e.labelStyle);d+=A;const I=await Xe(h,`${n.text?`Text: ${n.text}`:""}`,d,e.labelStyle);d+=I;const P=await Xe(h,`${n.risk?`Risk: ${n.risk}`:""}`,d,e.labelStyle);d+=P,await Xe(h,`${n.verifyMethod?`Verification: ${n.verifyMethod}`:""}`,d,e.labelStyle)}else{const A=await Xe(h,`${s.type?`Type: ${s.type}`:""}`,d,e.labelStyle);d+=A,await Xe(h,`${s.docRef?`Doc Ref: ${s.docRef}`:""}`,d,e.labelStyle)}const p=(h.node()?.getBBox().width??200)+o,g=(h.node()?.getBBox().height??200)+o,b=-p/2,x=-g/2,w=rt.svg(h),L=nt(e,{});e.look!=="handDrawn"&&(L.roughness=0,L.fillStyle="solid");const C=w.rectangle(b,x,p,g,L),v=h.insert(()=>C,":first-child");if(v.attr("class","basic label-container").attr("style",i),h.selectAll(".label").each((A,I,P)=>{const R=wt(P[I]),_=R.attr("transform");let S=0,$=0;if(_){const M=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(_);M&&(S=parseFloat(M[1]),$=parseFloat(M[2]))}const E=$-g/2;let k=b+o/2;(I===0||I===1)&&(k=S),R.attr("transform",`translate(${k}, ${E+o})`)}),d>u+f+a){const A=w.line(b,x+u+f+a,b+p,x+u+f+a,L);h.insert(()=>A).attr("style",i)}return st(e,v),e.intersect=function(A){return et.rect(e,A)},h}m(u1,"requirementBox");async function Xe(t,e,r,i=""){if(e==="")return 0;const n=t.insert("g").attr("class","label").attr("style",i),s=St(),o=s.htmlLabels??!0,a=await jr(n,Ya(gi(e)),{width:vr(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},s);let l;if(o){const c=a.children[0],h=wt(a);l=c.getBoundingClientRect(),h.attr("width",l.width),h.attr("height",l.height)}else{const c=a.children[0];for(const h of c.children)h.textContent=h.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&h.setAttribute("style",i);l=a.getBBox(),l.height+=6}return n.attr("transform",`translate(${-l.width/2},${-l.height/2+r})`),l.height}m(Xe,"addText");var DR=m(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function d1(t,e,{config:r}){const{labelStyles:i,nodeStyles:n}=at(e);e.labelStyle=i||"";const s=10,o=e.width;e.width=(e.width??200)-10;const{shapeSvg:a,bbox:l,label:c}=await yt(t,e,dt(e)),h=e.padding||10;let u="",d;"ticket"in e&&e.ticket&&r?.kanban?.ticketBaseUrl&&(u=r?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),d=a.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));const f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let p,g;d?{label:p,bbox:g}=await ac(d,"ticket"in e&&e.ticket||"",f):{label:p,bbox:g}=await ac(a,"ticket"in e&&e.ticket||"",f);const{label:b,bbox:x}=await ac(a,"assigned"in e&&e.assigned||"",f);e.width=o;const w=10,L=e?.width||0,C=Math.max(g.height,x.height)/2,v=Math.max(l.height+w*2,e?.height||0)+C,A=-L/2,I=-v/2;c.attr("transform","translate("+(h-L/2)+", "+(-C-l.height/2)+")"),p.attr("transform","translate("+(h-L/2)+", "+(-C+l.height/2)+")"),b.attr("transform","translate("+(h+L/2-x.width-2*s)+", "+(-C+l.height/2)+")");let P;const{rx:R,ry:_}=e,{cssStyles:S}=e;if(e.look==="handDrawn"){const $=rt.svg(a),E=nt(e,{}),k=R||_?$.path(kr(A,I,L,v,R||0),E):$.rectangle(A,I,L,v,E);P=a.insert(()=>k,":first-child"),P.attr("class","basic label-container").attr("style",S||null)}else{P=a.insert("rect",":first-child"),P.attr("class","basic label-container __APA__").attr("style",n).attr("rx",R??5).attr("ry",_??5).attr("x",A).attr("y",I).attr("width",L).attr("height",v);const $="priority"in e&&e.priority;if($){const E=a.append("line"),k=A+2,T=I+Math.floor((R??0)/2),M=I+v-Math.floor((R??0)/2);E.attr("x1",k).attr("y1",T).attr("x2",k).attr("y2",M).attr("stroke-width","4").attr("stroke",DR($))}}return st(e,P),e.height=v,e.intersect=function($){return et.rect(e,$)},a}m(d1,"kanbanItem");var qR=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Gx},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Wx},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Yx},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Zx},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:yx},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:hx},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:qx},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Sx},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Ix},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:$x},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:i1},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Rx},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:xx},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:e1},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:lx},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Ux},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Kx},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Jx},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:vx},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:kx},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:fx},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:px},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:gx},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Ox},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:a1},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Cx},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:r1},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Px},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:mx},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:bx},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:s1},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:l1},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:_x},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:n1},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:wx},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Vx},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:jx},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Nx},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:ox},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:dx},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:t1},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Qx},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:o1},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Hx},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Fx}],HR=m(()=>{const e=[...Object.entries({state:Xx,choice:cx,note:Dx,rectWithTitle:zx,labelRect:Mx,iconSquare:Lx,iconCircle:Ex,icon:Tx,iconRounded:Ax,imageSquare:Bx,anchor:ax,kanbanItem:d1,classBox:h1,erBox:gu,requirementBox:u1}),...qR.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(n=>[n,r.handler]))];return Object.fromEntries(e)},"generateShapeMap"),f1=HR();function zR(t){return t in f1}m(zR,"isValidShape");var po=new Map;async function p1(t,e,r){let i,n;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?f1[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let o;r.config.securityLevel==="sandbox"?o="_top":e.linkTarget&&(o=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",o??null),n=await s(i,e,r)}else n=await s(t,e,r),i=n;return e.tooltip&&n.attr("title",e.tooltip),po.set(e.id,i),e.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}m(p1,"insertNode");var d3=m((t,e)=>{po.set(e.id,t)},"setNodeElem"),f3=m(()=>{po.clear()},"clear"),p3=m(t=>{const e=po.get(t.id);G.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=8,i=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+i-t.width/2)+", "+(t.y-t.height/2-r)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),i},"positionNode"),WR=m((t,e,r,i,n,s)=>{e.arrowTypeStart&&ug(t,"start",e.arrowTypeStart,r,i,n,s),e.arrowTypeEnd&&ug(t,"end",e.arrowTypeEnd,r,i,n,s)},"addEdgeMarkers"),UR={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},ug=m((t,e,r,i,n,s,o)=>{const a=UR[r];if(!a){G.warn(`Unknown arrow type: ${r}`);return}const l=a.type,h=`${n}_${s}-${l}${e==="start"?"Start":"End"}`;if(o&&o.trim()!==""){const u=o.replace(/[^\dA-Za-z]/g,"_"),d=`${h}_${u}`;if(!document.getElementById(d)){const f=document.getElementById(h);if(f){const p=f.cloneNode(!0);p.id=d,p.querySelectorAll("path, circle, line").forEach(b=>{b.setAttribute("stroke",o),a.fill&&b.setAttribute("fill",o)}),f.parentNode?.appendChild(p)}}t.attr(`marker-${e}`,`url(${i}#${d})`)}else t.attr(`marker-${e}`,`url(${i}#${h})`)},"addEdgeMarker"),$a=new Map,Qt=new Map,g3=m(()=>{$a.clear(),Qt.clear()},"clear"),Mn=m(t=>t?t.reduce((r,i)=>r+";"+i,""):"","getLabelStyles"),VR=m(async(t,e)=>{let r=Wt(St().flowchart.htmlLabels);const i=await jr(t,e.label,{style:Mn(e.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});G.info("abc82",e,e.labelType);const n=t.insert("g").attr("class","edgeLabel"),s=n.insert("g").attr("class","label");s.node().appendChild(i);let o=i.getBBox();if(r){const l=i.children[0],c=wt(i);o=l.getBoundingClientRect(),c.attr("width",o.width),c.attr("height",o.height)}s.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),$a.set(e.id,n),e.width=o.width,e.height=o.height;let a;if(e.startLabelLeft){const l=await ei(e.startLabelLeft,Mn(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startLeft=c,jn(a,e.startLabelLeft)}if(e.startLabelRight){const l=await ei(e.startLabelRight,Mn(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=c.node().appendChild(l),h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).startRight=c,jn(a,e.startLabelRight)}if(e.endLabelLeft){const l=await ei(e.endLabelLeft,Mn(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endLeft=c,jn(a,e.endLabelLeft)}if(e.endLabelRight){const l=await ei(e.endLabelRight,Mn(e.labelStyle)),c=t.insert("g").attr("class","edgeTerminals"),h=c.insert("g").attr("class","inner");a=h.node().appendChild(l);const u=l.getBBox();h.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),c.node().appendChild(l),Qt.get(e.id)||Qt.set(e.id,{}),Qt.get(e.id).endRight=c,jn(a,e.endLabelRight)}return i},"insertEdgeLabel");function jn(t,e){St().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}m(jn,"setTerminalWidth");var GR=m((t,e)=>{G.debug("Moving label abc88 ",t.id,t.label,$a.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath;const i=St(),{subGraphTitleTotalMargin:n}=$h(i);if(t.label){const s=$a.get(t.id);let o=t.x,a=t.y;if(r){const l=Ke.calcLabelPosition(r);G.debug("Moving label "+t.label+" from (",o,",",a,") to (",l.x,",",l.y,") abc88"),e.updatedPath&&(o=l.x,a=l.y)}s.attr("transform",`translate(${o}, ${a+n/2})`)}if(t.startLabelLeft){const s=Qt.get(t.id).startLeft;let o=t.x,a=t.y;if(r){const l=Ke.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.startLabelRight){const s=Qt.get(t.id).startRight;let o=t.x,a=t.y;if(r){const l=Ke.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelLeft){const s=Qt.get(t.id).endLeft;let o=t.x,a=t.y;if(r){const l=Ke.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}if(t.endLabelRight){const s=Qt.get(t.id).endRight;let o=t.x,a=t.y;if(r){const l=Ke.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);o=l.x,a=l.y}s.attr("transform",`translate(${o}, ${a})`)}},"positionEdgeLabel"),YR=m((t,e)=>{const r=t.x,i=t.y,n=Math.abs(e.x-r),s=Math.abs(e.y-i),o=t.width/2,a=t.height/2;return n>=o||s>=a},"outsideNode"),XR=m((t,e,r)=>{G.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const i=t.x,n=t.y,s=Math.abs(i-r.x),o=t.width/2;let a=r.x<e.x?o-s:o+s;const l=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*o>Math.abs(i-e.x)*l){let u=r.y<e.y?e.y-l-n:n-l-e.y;a=h*u/c;const d={x:r.x<e.x?r.x+a:r.x-h+a,y:r.y<e.y?r.y+c-u:r.y-c+u};return a===0&&(d.x=e.x,d.y=e.y),h===0&&(d.x=e.x),c===0&&(d.y=e.y),G.debug(`abc89 top/bottom calc, Q ${c}, q ${u}, R ${h}, r ${a}`,d),d}else{r.x<e.x?a=e.x-o-i:a=i-o-e.x;let u=c*a/h,d=r.x<e.x?r.x+h-a:r.x-h+a,f=r.y<e.y?r.y+u:r.y-u;return G.debug(`sides calc abc89, Q ${c}, q ${u}, R ${h}, r ${a}`,{_x:d,_y:f}),a===0&&(d=e.x,f=e.y),h===0&&(d=e.x),c===0&&(f=e.y),{x:d,y:f}}},"intersection"),dg=m((t,e)=>{G.warn("abc88 cutPathAtIntersect",t,e);let r=[],i=t[0],n=!1;return t.forEach(s=>{if(G.info("abc88 checking point",s,e),!YR(e,s)&&!n){const o=XR(e,i,s);G.debug("abc88 inside",s,i,o),G.debug("abc88 intersection",o,e);let a=!1;r.forEach(l=>{a=a||l.x===o.x&&l.y===o.y}),r.some(l=>l.x===o.x&&l.y===o.y)?G.warn("abc88 no intersect",o,r):r.push(o),n=!0}else G.warn("abc88 outside",s,i),i=s,n||r.push(s)}),G.debug("returning points",r),r},"cutPathAtIntersect");function g1(t){const e=[],r=[];for(let i=1;i<t.length-1;i++){const n=t[i-1],s=t[i],o=t[i+1];(n.x===s.x&&s.y===o.y&&Math.abs(s.x-o.x)>5&&Math.abs(s.y-n.y)>5||n.y===s.y&&s.x===o.x&&Math.abs(s.x-n.x)>5&&Math.abs(s.y-o.y)>5)&&(e.push(s),r.push(i))}return{cornerPoints:e,cornerPointPositions:r}}m(g1,"extractCornerPoints");var fg=m(function(t,e,r){const i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n),o=r/s;return{x:e.x-o*i,y:e.y-o*n}},"findAdjacentPoint"),JR=m(function(t){const{cornerPointPositions:e}=g1(t),r=[];for(let i=0;i<t.length;i++)if(e.includes(i)){const n=t[i-1],s=t[i+1],o=t[i],a=fg(n,o,5),l=fg(s,o,5),c=l.x-a.x,h=l.y-a.y;r.push(a);const u=Math.sqrt(2)*2;let d={x:o.x,y:o.y};if(Math.abs(s.x-n.x)>10&&Math.abs(s.y-n.y)>=10){G.debug("Corner point fixing",Math.abs(s.x-n.x),Math.abs(s.y-n.y));const f=5;o.x===a.x?d={x:c<0?a.x-f+u:a.x+f-u,y:h<0?a.y-u:a.y+u}:d={x:c<0?a.x-u:a.x+u,y:h<0?a.y-f+u:a.y+f-u}}else G.debug("Corner point skipping fixing",Math.abs(s.x-n.x),Math.abs(s.y-n.y));r.push(d,l)}else r.push(t[i]);return r},"fixCorners"),KR=m(function(t,e,r,i,n,s,o){const{handDrawnSeed:a}=St();let l=e.points,c=!1;const h=n;var u=s;const d=[];for(const R in e.cssCompiledStyles)ey(R)||d.push(e.cssCompiledStyles[R]);u.intersect&&h.intersect&&(l=l.slice(1,e.points.length-1),l.unshift(h.intersect(l[0])),G.debug("Last point APA12",e.start,"-->",e.end,l[l.length-1],u,u.intersect(l[l.length-1])),l.push(u.intersect(l[l.length-1]))),e.toCluster&&(G.info("to cluster abc88",r.get(e.toCluster)),l=dg(e.points,r.get(e.toCluster).node),c=!0),e.fromCluster&&(G.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(l,null,2)),l=dg(l.reverse(),r.get(e.fromCluster).node).reverse(),c=!0);let f=l.filter(R=>!Number.isNaN(R.y));f=JR(f);let p=Vs;switch(p=ma,e.curve){case"linear":p=ma;break;case"basis":p=Vs;break;case"cardinal":p=Py;break;case"bumpX":p=Ry;break;case"bumpY":p=My;break;case"catmullRom":p=Ny;break;case"monotoneX":p=Wy;break;case"monotoneY":p=Uy;break;case"natural":p=Gy;break;case"step":p=Yy;break;case"stepAfter":p=Jy;break;case"stepBefore":p=Xy;break;default:p=Vs}const{x:g,y:b}=_C(e),x=GT().x(g).y(b).curve(p);let w;switch(e.thickness){case"normal":w="edge-thickness-normal";break;case"thick":w="edge-thickness-thick";break;case"invisible":w="edge-thickness-invisible";break;default:w="edge-thickness-normal"}switch(e.pattern){case"solid":w+=" edge-pattern-solid";break;case"dotted":w+=" edge-pattern-dotted";break;case"dashed":w+=" edge-pattern-dashed";break;default:w+=" edge-pattern-solid"}let L,C=x(f);const v=Array.isArray(e.style)?e.style:e.style?[e.style]:[];let A=v.find(R=>R?.startsWith("stroke:"));if(e.look==="handDrawn"){const R=rt.svg(t);Object.assign([],f);const _=R.path(C,{roughness:.3,seed:a});w+=" transition",L=wt(_).select("path").attr("id",e.id).attr("class"," "+w+(e.classes?" "+e.classes:"")).attr("style",v?v.reduce(($,E)=>$+";"+E,""):"");let S=L.attr("d");L.attr("d",S),t.node().appendChild(L.node())}else{const R=d.join(";"),_=v?v.reduce((E,k)=>E+k+";",""):"";let S="";e.animate&&(S=" edge-animation-fast"),e.animation&&(S=" edge-animation-"+e.animation);const $=R?R+";"+_+";":_;L=t.append("path").attr("d",C).attr("id",e.id).attr("class"," "+w+(e.classes?" "+e.classes:"")+(S??"")).attr("style",$),A=$.match(/stroke:([^;]+)/)?.[1]}let I="";(St().flowchart.arrowMarkerAbsolute||St().state.arrowMarkerAbsolute)&&(I=ym(!0)),G.info("arrowTypeStart",e.arrowTypeStart),G.info("arrowTypeEnd",e.arrowTypeEnd),WR(L,e,I,o,i,A);let P={};return c&&(P.updatedPath=l),P.originalPath=e.points,P},"insertEdge"),ZR=m((t,e,r,i)=>{e.forEach(n=>{pM[n](t,r,i)})},"insertMarkers"),QR=m((t,e,r)=>{G.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),tM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),eM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),rM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),iM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),nM=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),sM=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),aM=m((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),oM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),lM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),cM=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),hM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),uM=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),dM=m((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d",`M0,0
      L20,10
      M20,10
      L0,20`)},"requirement_arrow"),fM=m((t,e,r)=>{const i=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains"),pM={extension:QR,composition:tM,aggregation:eM,dependency:rM,lollipop:iM,point:nM,circle:sM,cross:aM,barb:oM,only_one:lM,zero_or_one:cM,one_or_more:hM,zero_or_more:uM,requirement_arrow:dM,requirement_contains:fM},gM=ZR,mM={common:Zi,getConfig:we,insertCluster:SR,insertEdge:KR,insertEdgeLabel:VR,insertMarkers:gM,insertNode:p1,interpolateToCurve:Jh,labelHelper:yt,log:G,positionEdgeLabel:GR},rs={},m1=m(t=>{for(const e of t)rs[e.name]=e},"registerLayoutLoaders"),yM=m(()=>{m1([{name:"dagre",loader:m(async()=>await Et(()=>import("./chunk-gPJOh8Ig.js"),__vite__mapDeps([9,10,11,12,13,14,2,1,3,4,5,15])),"loader")}])},"registerDefaultLayoutLoaders");yM();var m3=m(async(t,e)=>{if(!(t.layoutAlgorithm in rs))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const r=rs[t.layoutAlgorithm];return(await r.loader()).render(t,e,mM,{algorithm:r.algorithm})},"render"),y3=m((t="",{fallback:e="dagre"}={})=>{if(t in rs)return t;if(e in rs)return G.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),pg={name:"mermaid",version:"11.9.0",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.0.4","@iconify/utils":"^2.1.33","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.11",dayjs:"^1.11.13",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.0.0",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.2","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.0",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.0.2",jison:"^0.4.18","js-base64":"^3.7.7",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.2",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.10","type-fest":"^4.35.0",typedoc:"^0.27.8","typedoc-plugin-markdown":"^4.4.2",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.0.2","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}},bM=m(t=>{const{securityLevel:e}=St();let r=wt("body");if(e==="sandbox"){const s=wt(`#i${t}`).node()?.contentDocument??document;r=wt(s.body)}return r.select(`#${t}`)},"selectSvgElement"),y1="comm",b1="rule",x1="decl",xM="@import",_M="@namespace",wM="@keyframes",vM="@layer",_1=Math.abs,mu=String.fromCharCode;function w1(t){return t.trim()}function Js(t,e,r){return t.replace(e,r)}function CM(t,e,r){return t.indexOf(e,r)}function Bi(t,e){return t.charCodeAt(e)|0}function Yi(t,e,r){return t.slice(e,r)}function Je(t){return t.length}function SM(t){return t.length}function Is(t,e){return e.push(t),t}var go=1,Xi=1,v1=0,Re=0,Nt=0,nn="";function yu(t,e,r,i,n,s,o,a){return{value:t,root:e,parent:r,type:i,props:n,children:s,line:go,column:Xi,length:o,return:"",siblings:a}}function kM(){return Nt}function TM(){return Nt=Re>0?Bi(nn,--Re):0,Xi--,Nt===10&&(Xi=1,go--),Nt}function He(){return Nt=Re<v1?Bi(nn,Re++):0,Xi++,Nt===10&&(Xi=1,go++),Nt}function Rr(){return Bi(nn,Re)}function Ks(){return Re}function mo(t,e){return Yi(nn,t,e)}function is(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function EM(t){return go=Xi=1,v1=Je(nn=t),Re=0,[]}function AM(t){return nn="",t}function oc(t){return w1(mo(Re-1,Zc(t===91?t+2:t===40?t+1:t)))}function LM(t){for(;(Nt=Rr())&&Nt<33;)He();return is(t)>2||is(Nt)>3?"":" "}function BM(t,e){for(;--e&&He()&&!(Nt<48||Nt>102||Nt>57&&Nt<65||Nt>70&&Nt<97););return mo(t,Ks()+(e<6&&Rr()==32&&He()==32))}function Zc(t){for(;He();)switch(Nt){case t:return Re;case 34:case 39:t!==34&&t!==39&&Zc(Nt);break;case 40:t===41&&Zc(t);break;case 92:He();break}return Re}function RM(t,e){for(;He()&&t+Nt!==57;)if(t+Nt===84&&Rr()===47)break;return"/*"+mo(e,Re-1)+"*"+mu(t===47?t:He())}function MM(t){for(;!is(Rr());)He();return mo(t,Re)}function $M(t){return AM(Zs("",null,null,null,[""],t=EM(t),0,[0],t))}function Zs(t,e,r,i,n,s,o,a,l){for(var c=0,h=0,u=o,d=0,f=0,p=0,g=1,b=1,x=1,w=0,L="",C=n,v=s,A=i,I=L;b;)switch(p=w,w=He()){case 40:if(p!=108&&Bi(I,u-1)==58){CM(I+=Js(oc(w),"&","&\f"),"&\f",_1(c?a[c-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:I+=oc(w);break;case 9:case 10:case 13:case 32:I+=LM(p);break;case 92:I+=BM(Ks()-1,7);continue;case 47:switch(Rr()){case 42:case 47:Is(IM(RM(He(),Ks()),e,r,l),l),(is(p||1)==5||is(Rr()||1)==5)&&Je(I)&&Yi(I,-1,void 0)!==" "&&(I+=" ");break;default:I+="/"}break;case 123*g:a[c++]=Je(I)*x;case 125*g:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+h:x==-1&&(I=Js(I,/\f/g,"")),f>0&&(Je(I)-u||g===0&&p===47)&&Is(f>32?mg(I+";",i,r,u-1,l):mg(Js(I," ","")+";",i,r,u-2,l),l);break;case 59:I+=";";default:if(Is(A=gg(I,e,r,c,h,n,a,L,C=[],v=[],u,s),s),w===123)if(h===0)Zs(I,e,A,A,C,s,u,a,v);else{switch(d){case 99:if(Bi(I,3)===110)break;case 108:if(Bi(I,2)===97)break;default:h=0;case 100:case 109:case 115:}h?Zs(t,A,A,i&&Is(gg(t,A,A,0,0,n,a,L,n,C=[],u,v),v),n,v,u,a,i?C:v):Zs(I,A,A,A,[""],v,0,a,v)}}c=h=f=0,g=x=1,L=I="",u=o;break;case 58:u=1+Je(I),f=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&TM()==125)continue}switch(I+=mu(w),w*g){case 38:x=h>0?1:(I+="\f",-1);break;case 44:a[c++]=(Je(I)-1)*x,x=1;break;case 64:Rr()===45&&(I+=oc(He())),d=Rr(),h=u=Je(L=I+=MM(Ks())),w++;break;case 45:p===45&&Je(I)==2&&(g=0)}}return s}function gg(t,e,r,i,n,s,o,a,l,c,h,u){for(var d=n-1,f=n===0?s:[""],p=SM(f),g=0,b=0,x=0;g<i;++g)for(var w=0,L=Yi(t,d+1,d=_1(b=o[g])),C=t;w<p;++w)(C=w1(b>0?f[w]+" "+L:Js(L,/&\f/g,f[w])))&&(l[x++]=C);return yu(t,e,r,n===0?b1:a,l,c,h,u)}function IM(t,e,r,i){return yu(t,e,r,y1,mu(kM()),Yi(t,2,-2),0,i)}function mg(t,e,r,i,n){return yu(t,e,r,x1,Yi(t,0,i),Yi(t,i+1,-1),i,n)}function Qc(t,e){for(var r="",i=0;i<t.length;i++)r+=e(t[i],i,t,e)||"";return r}function OM(t,e,r,i){switch(t.type){case vM:if(t.children.length)break;case xM:case _M:case x1:return t.return=t.return||t.value;case y1:return"";case wM:return t.return=t.value+"{"+Qc(t.children,i)+"}";case b1:if(!Je(t.value=t.props.join(",")))return""}return Je(r=Qc(t.children,i))?t.return=t.value+"{"+r+"}":""}var PM=tb(Object.keys,Object),FM=Object.prototype,NM=FM.hasOwnProperty;function jM(t){if(!so(t))return PM(t);var e=[];for(var r in Object(t))NM.call(t,r)&&r!="constructor"&&e.push(r);return e}var th=pi(nr,"DataView"),eh=pi(nr,"Promise"),rh=pi(nr,"Set"),ih=pi(nr,"WeakMap"),yg="[object Map]",DM="[object Object]",bg="[object Promise]",xg="[object Set]",_g="[object WeakMap]",wg="[object DataView]",qM=fi(th),HM=fi(es),zM=fi(eh),WM=fi(rh),UM=fi(ih),Jr=tn;(th&&Jr(new th(new ArrayBuffer(1)))!=wg||es&&Jr(new es)!=yg||eh&&Jr(eh.resolve())!=bg||rh&&Jr(new rh)!=xg||ih&&Jr(new ih)!=_g)&&(Jr=function(t){var e=tn(t),r=e==DM?t.constructor:void 0,i=r?fi(r):"";if(i)switch(i){case qM:return wg;case HM:return yg;case zM:return bg;case WM:return xg;case UM:return _g}return e});var VM="[object Map]",GM="[object Set]",YM=Object.prototype,XM=YM.hasOwnProperty;function vg(t){if(t==null)return!0;if(ao(t)&&(Ca(t)||typeof t=="string"||typeof t.splice=="function"||Yh(t)||Xh(t)||va(t)))return!t.length;var e=Jr(t);if(e==VM||e==GM)return!t.size;if(so(t))return!jM(t).length;for(var r in t)if(XM.call(t,r))return!1;return!0}var C1="c4",JM=m(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),KM=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-BsQwuvN8.js");return{diagram:e}},__vite__mapDeps([16,17,2,1,3,4,5,15]));return{id:C1,diagram:t}},"loader"),ZM={id:C1,detector:JM,loader:KM},QM=ZM,S1="flowchart",t$=m((t,e)=>e?.flowchart?.defaultRenderer==="dagre-wrapper"||e?.flowchart?.defaultRenderer==="elk"?!1:/^\s*graph/.test(t),"detector"),e$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-C-BOUhiU.js");return{diagram:e}},__vite__mapDeps([18,19,20,21,22,2,1,3,4,5,15]));return{id:S1,diagram:t}},"loader"),r$={id:S1,detector:t$,loader:e$},i$=r$,k1="flowchart-v2",n$=m((t,e)=>e?.flowchart?.defaultRenderer==="dagre-d3"?!1:(e?.flowchart?.defaultRenderer==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&e?.flowchart?.defaultRenderer==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)),"detector"),s$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-C-BOUhiU.js");return{diagram:e}},__vite__mapDeps([18,19,20,21,22,2,1,3,4,5,15]));return{id:k1,diagram:t}},"loader"),a$={id:k1,detector:n$,loader:s$},o$=a$,T1="er",l$=m(t=>/^\s*erDiagram/.test(t),"detector"),c$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-CZGMVA1y.js");return{diagram:e}},__vite__mapDeps([23,20,21,22,2,1,3,4,5,15]));return{id:T1,diagram:t}},"loader"),h$={id:T1,detector:l$,loader:c$},u$=h$,E1="gitGraph",d$=m(t=>/^\s*gitGraph/.test(t),"detector"),f$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-C41Iw3mO.js");return{diagram:e}},__vite__mapDeps([24,25,26,27,1,11,13,14,2,3,4,5,15]));return{id:E1,diagram:t}},"loader"),p$={id:E1,detector:d$,loader:f$},g$=p$,A1="gantt",m$=m(t=>/^\s*gantt/.test(t),"detector"),y$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-D7fgt1SR.js");return{diagram:e}},__vite__mapDeps([28,2,1,3,4,5,29,30,31,15]));return{id:A1,diagram:t}},"loader"),b$={id:A1,detector:m$,loader:y$},x$=b$,L1="info",_$=m(t=>/^\s*info/.test(t),"detector"),w$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-DIkn7X0Z.js");return{diagram:e}},__vite__mapDeps([32,27,1,11,13,14,2,3,4,5,15]));return{id:L1,diagram:t}},"loader"),v$={id:L1,detector:_$,loader:w$},B1="pie",C$=m(t=>/^\s*pie/.test(t),"detector"),S$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-BD2UxagE.js");return{diagram:e}},__vite__mapDeps([33,25,27,1,11,13,14,34,35,30,2,3,4,5,15]));return{id:B1,diagram:t}},"loader"),k$={id:B1,detector:C$,loader:S$},R1="quadrantChart",T$=m(t=>/^\s*quadrantChart/.test(t),"detector"),E$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-Bmd-gKdU.js");return{diagram:e}},__vite__mapDeps([36,29,30,31,2,1,3,4,5,15]));return{id:R1,diagram:t}},"loader"),A$={id:R1,detector:T$,loader:E$},L$=A$,M1="xychart",B$=m(t=>/^\s*xychart-beta/.test(t),"detector"),R$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-CS7V44u1.js");return{diagram:e}},__vite__mapDeps([37,30,35,29,31,2,1,3,4,5,15]));return{id:M1,diagram:t}},"loader"),M$={id:M1,detector:B$,loader:R$},$$=M$,$1="requirement",I$=m(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),O$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-hGm-THw0.js");return{diagram:e}},__vite__mapDeps([38,20,21,2,1,3,4,5,15]));return{id:$1,diagram:t}},"loader"),P$={id:$1,detector:I$,loader:O$},F$=P$,I1="sequence",N$=m(t=>/^\s*sequenceDiagram/.test(t),"detector"),j$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-B9ZXIhpJ.js");return{diagram:e}},__vite__mapDeps([39,17,26,2,1,3,4,5,15]));return{id:I1,diagram:t}},"loader"),D$={id:I1,detector:N$,loader:j$},q$=D$,O1="class",H$=m((t,e)=>e?.class?.defaultRenderer==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t),"detector"),z$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-ariG0TYK.js");return{diagram:e}},__vite__mapDeps([40,41,19,20,21,2,1,3,4,5,15]));return{id:O1,diagram:t}},"loader"),W$={id:O1,detector:H$,loader:z$},U$=W$,P1="classDiagram",V$=m((t,e)=>/^\s*classDiagram/.test(t)&&e?.class?.defaultRenderer==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t),"detector"),G$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-B8U0y_8r.js");return{diagram:e}},__vite__mapDeps([42,41,19,20,21,2,1,3,4,5,15]));return{id:P1,diagram:t}},"loader"),Y$={id:P1,detector:V$,loader:G$},X$=Y$,F1="state",J$=m((t,e)=>e?.state?.defaultRenderer==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t),"detector"),K$=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-DIomcrgc.js");return{diagram:e}},__vite__mapDeps([43,44,20,21,10,11,12,13,2,1,3,4,5,15]));return{id:F1,diagram:t}},"loader"),Z$={id:F1,detector:J$,loader:K$},Q$=Z$,N1="stateDiagram",tI=m((t,e)=>!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&e?.state?.defaultRenderer==="dagre-wrapper"),"detector"),eI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-9QIM-SLG.js");return{diagram:e}},__vite__mapDeps([45,44,20,21,2,1,3,4,5,15]));return{id:N1,diagram:t}},"loader"),rI={id:N1,detector:tI,loader:eI},iI=rI,j1="journey",nI=m(t=>/^\s*journey/.test(t),"detector"),sI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-BWN-WZxO.js");return{diagram:e}},__vite__mapDeps([46,17,19,34,2,1,3,4,5,15]));return{id:j1,diagram:t}},"loader"),aI={id:j1,detector:nI,loader:sI},oI=aI,lI=m((t,e,r)=>{G.debug(`rendering svg for syntax error
`);const i=bM(e),n=i.append("g");i.attr("viewBox","0 0 2412 512"),bm(i,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),D1={draw:lI},cI=D1,hI={db:{},renderer:D1,parser:{parse:m(()=>{},"parse")}},uI=hI,q1="flowchart-elk",dI=m((t,e={})=>/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&e?.flowchart?.defaultRenderer==="elk"?(e.layout="elk",!0):!1,"detector"),fI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-C-BOUhiU.js");return{diagram:e}},__vite__mapDeps([18,19,20,21,22,2,1,3,4,5,15]));return{id:q1,diagram:t}},"loader"),pI={id:q1,detector:dI,loader:fI},gI=pI,H1="timeline",mI=m(t=>/^\s*timeline/.test(t),"detector"),yI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-D3mS8OQ5.js");return{diagram:e}},__vite__mapDeps([47,34,2,1,3,4,5,15]));return{id:H1,diagram:t}},"loader"),bI={id:H1,detector:mI,loader:yI},xI=bI,z1="mindmap",_I=m(t=>/^\s*mindmap/.test(t),"detector"),wI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-CMWvUt55.js");return{diagram:e}},__vite__mapDeps([48,49,2,1,3,4,5,15]));return{id:z1,diagram:t}},"loader"),vI={id:z1,detector:_I,loader:wI},CI=vI,W1="kanban",SI=m(t=>/^\s*kanban/.test(t),"detector"),kI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-DAcgUg9u.js");return{diagram:e}},__vite__mapDeps([50,19,2,1,3,4,5,15]));return{id:W1,diagram:t}},"loader"),TI={id:W1,detector:SI,loader:kI},EI=TI,U1="sankey",AI=m(t=>/^\s*sankey-beta/.test(t),"detector"),LI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-BNB-St6k.js");return{diagram:e}},__vite__mapDeps([51,35,30,2,1,3,4,5,15]));return{id:U1,diagram:t}},"loader"),BI={id:U1,detector:AI,loader:LI},RI=BI,V1="packet",MI=m(t=>/^\s*packet(-beta)?/.test(t),"detector"),$I=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-BChX98Yz.js");return{diagram:e}},__vite__mapDeps([52,25,27,1,11,13,14,2,3,4,5,15]));return{id:V1,diagram:t}},"loader"),II={id:V1,detector:MI,loader:$I},G1="radar",OI=m(t=>/^\s*radar-beta/.test(t),"detector"),PI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-vc9W8DS4.js");return{diagram:e}},__vite__mapDeps([53,25,27,1,11,13,14,2,3,4,5,15]));return{id:G1,diagram:t}},"loader"),FI={id:G1,detector:OI,loader:PI},Y1="block",NI=m(t=>/^\s*block-beta/.test(t),"detector"),jI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-CGDIhlAn.js");return{diagram:e}},__vite__mapDeps([54,19,14,11,10,22,2,1,3,4,5,15]));return{id:Y1,diagram:t}},"loader"),DI={id:Y1,detector:NI,loader:jI},qI=DI,X1="architecture",HI=m(t=>/^\s*architecture/.test(t),"detector"),zI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-RncU6u28.js");return{diagram:e}},__vite__mapDeps([55,25,26,27,1,11,13,14,49,2,3,4,5,15]));return{id:X1,diagram:t}},"loader"),WI={id:X1,detector:HI,loader:zI},UI=WI,J1="treemap",VI=m(t=>/^\s*treemap/.test(t),"detector"),GI=m(async()=>{const{diagram:t}=await Et(async()=>{const{diagram:e}=await import("./chunk-DBAQr8eY.js");return{diagram:e}},__vite__mapDeps([56,21,25,27,1,11,13,14,31,35,30,2,3,4,5,15]));return{id:J1,diagram:t}},"loader"),YI={id:J1,detector:VI,loader:GI},Cg=!1,yo=m(()=>{Cg||(Cg=!0,ia("error",uI,t=>t.toLowerCase().trim()==="error"),ia("---",{db:{clear:m(()=>{},"clear")},styles:{},renderer:{draw:m(()=>{},"draw")},parser:{parse:m(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:m(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),uc(gI,CI,UI),uc(QM,EI,X$,U$,u$,x$,v$,k$,F$,q$,o$,i$,xI,g$,iI,Q$,oI,L$,RI,II,$$,qI,FI,YI))},"addDiagrams"),XI=m(async()=>{G.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(si).map(async([r,{detector:i,loader:n}])=>{if(n)try{gc(r)}catch{try{const{diagram:s,id:o}=await n();ia(o,s,i)}catch(s){throw G.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete si[r],s}}}))).filter(r=>r.status==="rejected");if(e.length>0){G.error(`Failed to load ${e.length} external diagrams`);for(const r of e)G.error(r);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),JI="graphics-document document";function K1(t,e){t.attr("role",JI),e!==""&&t.attr("aria-roledescription",e)}m(K1,"setA11yDiagramInfo");function Z1(t,e,r,i){if(t.insert!==void 0){if(r){const n=`chart-desc-${i}`;t.attr("aria-describedby",n),t.insert("desc",":first-child").attr("id",n).text(r)}if(e){const n=`chart-title-${i}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}m(Z1,"addSVGa11yTitleDescription");var ni,nh=(ni=class{constructor(e,r,i,n,s){this.type=e,this.text=r,this.db=i,this.parser=n,this.renderer=s}static async fromText(e,r={}){const i=we(),n=_h(e,i);e=GL(e)+`
`;try{gc(n)}catch{const c=w2(n);if(!c)throw new nm(`Diagram ${n} not found.`);const{id:h,diagram:u}=await c();ia(h,u)}const{db:s,parser:o,renderer:a,init:l}=gc(n);return o.parser&&(o.parser.yy=s),s.clear?.(),l?.(i),r.title&&s.setDiagramTitle?.(r.title),await o.parse(e),new ni(n,e,s,o,a)}async render(e,r){await this.renderer.draw(this.text,e,r,this)}getParser(){return this.parser}getType(){return this.type}},m(ni,"Diagram"),ni),Sg=[],KI=m(()=>{Sg.forEach(t=>{t()}),Sg=[]},"attachFunctions"),ZI=m(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Q1(t){const e=t.match(im);if(!e)return{text:t,metadata:{}};let r=xC(e[1],{schema:bC})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:t.slice(e[0].length),metadata:i}}m(Q1,"extractFrontMatter");var QI=m(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),tO=m(t=>{const{text:e,metadata:r}=Q1(t),{displayMode:i,title:n,config:s={}}=r;return i&&(s.gantt||(s.gantt={}),s.gantt.displayMode=i),{title:n,config:s,text:e}},"processFrontmatter"),eO=m(t=>{const e=Ke.detectInit(t)??{},r=Ke.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some(({type:i})=>i==="wrap"):r?.type==="wrap"&&(e.wrap=!0),{text:IL(t),directive:e}},"processDirectives");function bu(t){const e=QI(t),r=tO(e),i=eO(r.text),n=eu(r.config,i.directive);return t=ZI(i.text),{code:t,title:r.title,config:n}}m(bu,"preprocessDiagram");function t_(t){const e=new TextEncoder().encode(t),r=Array.from(e,i=>String.fromCodePoint(i)).join("");return btoa(r)}m(t_,"toBase64");var rO=5e4,iO="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",nO="sandbox",sO="loose",aO="http://www.w3.org/2000/svg",oO="http://www.w3.org/1999/xlink",lO="http://www.w3.org/1999/xhtml",cO="100%",hO="100%",uO="border:0;margin:0;",dO="margin:0",fO="allow-top-navigation-by-user-activation allow-popups",pO='The "iframe" tag is not supported by your browser.',gO=["foreignobject"],mO=["dominant-baseline"];function xu(t){const e=bu(t);return ea(),F2(e.config??{}),e}m(xu,"processAndSetConfigs");async function e_(t,e){yo();try{const{code:r,config:i}=xu(t);return{diagramType:(await i_(r)).type,config:i}}catch(r){if(e?.suppressErrors)return!1;throw r}}m(e_,"parse");var kg=m((t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),yO=m((t,e=new Map)=>{let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const o=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(a=>{vg(a.styles)||o.forEach(l=>{r+=kg(a.id,l,a.styles)}),vg(a.textStyles)||(r+=kg(a.id,"tspan",(a?.textStyles||[]).map(l=>l.replace("color","fill"))))})}return r},"createCssStyles"),bO=m((t,e,r,i)=>{const n=yO(t,r),s=ev(e,n,t.themeVariables);return Qc($M(`${i}{${s}}`),OM)},"createUserStyles"),xO=m((t="",e,r)=>{let i=t;return!r&&!e&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=gi(i),i=i.replace(/<br>/g,"<br/>"),i},"cleanUpSvgCode"),_O=m((t="",e)=>{const r=e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":hO,i=t_(`<body style="${dO}">${t}</body>`);return`<iframe style="width:${cO};height:${r};${uO}" src="data:text/html;charset=UTF-8;base64,${i}" sandbox="${fO}">
  ${pO}
</iframe>`},"putIntoIFrame"),Tg=m((t,e,r,i,n)=>{const s=t.append("div");s.attr("id",r),i&&s.attr("style",i);const o=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",aO);return n&&o.attr("xmlns:xlink",n),o.append("g"),t},"appendDivSvgG");function sh(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}m(sh,"sandboxedIframe");var wO=m((t,e,r,i)=>{t.getElementById(e)?.remove(),t.getElementById(r)?.remove(),t.getElementById(i)?.remove()},"removeExistingElements"),vO=m(async function(t,e,r){yo();const i=xu(e);e=i.code;const n=we();G.debug(n),e.length>(n?.maxTextSize??rO)&&(e=iO);const s="#"+t,o="i"+t,a="#"+o,l="d"+t,c="#"+l,h=m(()=>{const E=wt(d?a:c).node();E&&"remove"in E&&E.remove()},"removeTempElements");let u=wt("body");const d=n.securityLevel===nO,f=n.securityLevel===sO,p=n.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),d){const $=sh(wt(r),o);u=wt($.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=wt(r);Tg(u,t,l,`font-family: ${p}`,oO)}else{if(wO(document,t,l,o),d){const $=sh(wt("body"),o);u=wt($.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=wt("body");Tg(u,t,l)}let g,b;try{g=await nh.fromText(e,{title:i.title})}catch($){if(n.suppressErrorRendering)throw h(),$;g=await nh.fromText("error"),b=$}const x=u.select(c).node(),w=g.type,L=x.firstChild,C=L.firstChild,v=g.renderer.getClasses?.(e,g),A=bO(n,w,v,s),I=document.createElement("style");I.innerHTML=A,L.insertBefore(I,C);try{await g.renderer.draw(e,t,pg.version,g)}catch($){throw n.suppressErrorRendering?h():cI.draw(e,t,pg.version),$}const P=u.select(`${c} svg`),R=g.db.getAccTitle?.(),_=g.db.getAccDescription?.();n_(w,P,R,_),u.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",lO);let S=u.select(c).node().innerHTML;if(G.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),S=xO(S,d,Wt(n.arrowMarkerAbsolute)),d){const $=u.select(c+" svg").node();S=_O(S,$)}else f||(S=Di.sanitize(S,{ADD_TAGS:gO,ADD_ATTR:mO,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(KI(),b)throw b;return h(),{diagramType:w,svg:S,bindFunctions:g.db.bindFunctions}},"render");function r_(t={}){const e=te({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),O2(e),e?.theme&&e.theme in xr?e.themeVariables=xr[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=xr.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?I2(e):hm();xh(r.logLevel),yo()}m(r_,"initialize");var i_=m((t,e={})=>{const{code:r}=bu(t);return nh.fromText(r,e)},"getDiagramFromText");function n_(t,e,r,i){K1(e,t),Z1(e,r,i,e.attr("id"))}m(n_,"addA11yInfo");var ui=Object.freeze({render:vO,parse:e_,getDiagramFromText:i_,initialize:r_,getConfig:we,setConfig:um,getSiteConfig:hm,updateSiteConfig:P2,reset:m(()=>{ea()},"reset"),globalReset:m(()=>{ea(qi)},"globalReset"),defaultConfig:qi});xh(we().logLevel);ea(we());var CO=m((t,e,r)=>{G.warn(t),tu(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),s_=m(async function(t={querySelector:".mermaid"}){try{await SO(t)}catch(e){if(tu(e)&&G.error(e.str),Cr.parseError&&Cr.parseError(e),!t.suppressErrors)throw G.error("Use the suppressErrors option to suppress these errors"),e}},"run"),SO=m(async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){const i=ui.getConfig();G.debug(`${t?"":"No "}Callback function found`);let n;if(r)n=r;else if(e)n=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");G.debug(`Found ${n.length} diagrams`),i?.startOnLoad!==void 0&&(G.debug("Start On Load: "+i?.startOnLoad),ui.updateSiteConfig({startOnLoad:i?.startOnLoad}));const s=new Ke.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let o;const a=[];for(const l of Array.from(n)){if(G.info("Rendering diagram: "+l.id),l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;o=l.innerHTML,o=Rb(Ke.entityDecode(o)).trim().replace(/<br\s*\/?>/gi,"<br/>");const h=Ke.detectInit(o);h&&G.debug("Detected early reinit: ",h);try{const{svg:u,bindFunctions:d}=await c_(c,o,l);l.innerHTML=u,t&&await t(c),d&&d(l)}catch(u){CO(u,a,Cr.parseError)}}if(a.length>0)throw a[0]},"runThrowsErrors"),a_=m(function(t){ui.initialize(t)},"initialize"),kO=m(async function(t,e,r){G.warn("mermaid.init is deprecated. Please use run instead."),t&&a_(t);const i={postRenderCallback:r,querySelector:".mermaid"};typeof e=="string"?i.querySelector=e:e&&(e instanceof HTMLElement?i.nodes=[e]:i.nodes=e),await s_(i)},"init"),TO=m(async(t,{lazyLoad:e=!0}={})=>{yo(),uc(...t),e===!1&&await XI()},"registerExternalDiagrams"),o_=m(function(){if(Cr.startOnLoad){const{startOnLoad:t}=ui.getConfig();t&&Cr.run().catch(e=>G.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",o_,!1);var EO=m(function(t){Cr.parseError=t},"setParseErrorHandler"),Ia=[],lc=!1,l_=m(async()=>{if(!lc){for(lc=!0;Ia.length>0;){const t=Ia.shift();if(t)try{await t()}catch(e){G.error("Error executing queue",e)}}lc=!1}},"executeQueue"),AO=m(async(t,e)=>new Promise((r,i)=>{const n=m(()=>new Promise((s,o)=>{ui.parse(t,e).then(a=>{s(a),r(a)},a=>{G.error("Error parsing",a),Cr.parseError?.(a),o(a),i(a)})}),"performCall");Ia.push(n),l_().catch(i)}),"parse"),c_=m((t,e,r)=>new Promise((i,n)=>{const s=m(()=>new Promise((o,a)=>{ui.render(t,e,r).then(l=>{o(l),i(l)},l=>{G.error("Error parsing",l),Cr.parseError?.(l),a(l),n(l)})}),"performCall");Ia.push(s),l_().catch(n)}),"render"),LO=m(()=>Object.keys(si).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),Cr={startOnLoad:!0,mermaidAPI:ui,parse:AO,render:c_,init:kO,run:s_,registerExternalDiagrams:TO,registerLayoutLoaders:m1,initialize:a_,parseError:void 0,contentLoaded:o_,setParseErrorHandler:EO,detectType:_h,registerIconPacks:KB,getRegisteredDiagramsMetadata:LO},Eg=Cr;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */const Os=({definition:t,title:e,className:r,config:i={}})=>{const n=le.useRef(null);return le.useEffect(()=>{(async()=>{if(n.current)try{const o={startOnLoad:!1,theme:"default",securityLevel:"loose"};Eg.initialize({...o,...i});const a=`mermaid-diagram-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,{svg:l}=await Eg.render(a,t);n.current&&(n.current.innerHTML=l)}catch(o){console.error("Error rendering Mermaid diagram:",o),n.current&&(n.current.innerHTML="<div>Diagram konnte nicht gerendert werden.</div>")}})()},[t,i]),y.jsxs("div",{className:`${Y({margin:"20px 0",padding:"20px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #e5e7eb",textAlign:"center"})} ${r||""}`,children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"16px",color:"#374151"}),children:e}),y.jsx("div",{ref:n,className:Y({"& svg":{maxWidth:"100%",height:"auto"}})})]})},BO=`graph TD
    R1["R<br/>(Request 1)"] --> H1["H = hash(R)"]
    R2["R<br/>(Request 2)"] --> H2["H = hash(R)"]
    R3["R<br/>(Request 3)"] --> H3["H = hash(R)"]
    R4["R<br/>(Request 4)"] --> H4["H = hash(R)"]
    
    H1 --> H12["H = hash(H + H)"]
    H2 --> H12
    H3 --> H34["H = hash(H + H)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H + H)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    
    class R1,R2,R3,R4 requestNode
    class H1,H2,H3,H4,H12,H34 hashNode
    class ROOT rootNode`,RO=`sequenceDiagram
    Actor User
    participant Contract as GenImNFT Contract
    
    participant Serverless as Serverless Function
    participant AI as FLUX AI API
    participant S3 as S3 Storage
    Actor ServiceProvider as Image Creator Wallet

    User->>Contract: 1. Pay ~$0.10 ETH
    Contract->>Contract: 2. safeMint() creates NFT
    Note over Contract: NFT starts with placeholder image
    Contract->>Serverless: 3. Trigger function
    Serverless->>AI: 4. Call FLUX AI API
    AI-->>Serverless: Generated image data
    Serverless->>S3: 5. Upload to S3 storage
    S3-->>Serverless: Image URL
    Serverless->>Contract: 6. Update NFT metadata
    Note over Contract: NFT now has final image
    Contract->>ServiceProvider: 7. Auto-pay service provider
    ServiceProvider-->>Contract: Payment confirmed`,MO=`graph TD
    R1["R<br/>(Request 1)"] --> H1["H = hash(R)"]
    R2["R<br/>(Request 2)"] --> H2["H = hash(R)"]
    R3["R<br/>(Request 3)"] --> H3["H = hash(R)"]
    R4["R<br/>(Request 4)"] --> H4["H = hash(R)"]
    
    H1 --> H12["H = hash(H + H)"]
    H2 --> H12
    H3 --> H34["H = hash(H + H)"]
    H4 --> H34
    
    H12 --> ROOT["ROOT<br/>hash(H + H)"]
    H34 --> ROOT
    
    classDef requestNode fill:#f8fafc,stroke:#64748b,stroke-width:1px
    classDef hashNode fill:#f1f5f9,stroke:#475569,stroke-width:1px
    classDef rootNode fill:#f7f7f7,stroke:#374151,stroke-width:2px
    classDef proofPath fill:#fef3c7,stroke:#f59e0b,stroke-width:3px
    classDef proofNode fill:#ecfdf5,stroke:#10b981,stroke-width:2px
    
    class R1,R2,R4 requestNode
    class H1,H2 hashNode
    class ROOT rootNode
    class R3 proofPath
    class H3,H34 proofPath
    class H4,H12 proofNode`,$O=`sequenceDiagram
    Actor Alice as Alice
    participant Contract as LLM Contract
    participant Serverless as Serverless Function
    participant LLM as LLM API
    participant MerkleTree as Merkle Tree on S3 Storage
    Actor Blockchain as LLM Wallet

    Note over Alice,Contract: Phase 1: Prepaid Deposit
    Alice->>Contract: depositForLLM() - $50
    Contract->>Contract: Update balance[Alice] = $50

    Note over Alice,Blockchain: Phase 2: LLM Request Processing (Off-chain)
    Alice->>Serverless: Request: "Analyze sentiment"
    Serverless->>Contract: Check balance: Alice $50  $2 
    Serverless->>LLM: Call LLM API
    LLM-->>Serverless: Generated response
    Serverless-->>Alice: LLM Response
    Serverless->>MerkleTree: Create leaf from call

    Note over Serverless,MerkleTree: Phase 3: Batch Trigger (Once the Merkle tree is ready)
    MerkleTree->>MerkleTree: Calculate root hash
    MerkleTree->>MerkleTree: Generate proof for Alice's request

    Note over Contract,Blockchain: Phase 4: Atomic Settlement (On-chain)
    MerkleTree->>Contract: processBatch(root, requests, proofs)
    Contract->>Contract: Verify Alice's proof
    Contract->>Contract: Deduct: Alice -= $2
    Contract->>Contract: Mark batch as processed
    Contract->>Blockchain: Single transaction ($15 gas for entire batch)
    Contract-->>Alice: Settlement confirmed + individual proof`,IO={title:"A draft on Merkle Trees for LLM API Batching",publishing_date:"2025-07-29",tokenID:38},Ps=["0xUser1Address...","0xUser2Address...","0xUser3Address...","0xUser4Address...","0xUser5Address..."],Ag=["Analyze the sentiment of this customer review: 'The product is amazing!'","Translate this text to German: 'Hello, how are you today?'","Write a short Python function to calculate fibonacci numbers","Explain quantum computing in simple terms","Generate a creative story about a time-traveling cat","Summarize the benefits of renewable energy","Create a marketing strategy for a new mobile app","Debug this JavaScript code: console.log(hello world)"],ri={merkleRoot:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b",requests:[{id:1,owner:"0xUser1Address...",prompt:"Analyze the sentiment of this customer review: 'The product is amazing!'",leafData:{id:1,timestamp:"2024-01-15T10:30:00.000Z",tokenCount:150,wallet:"0xUser1Address..."},leafHash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"},{id:2,owner:"0xUser2Address...",prompt:"Translate this text to German: 'Hello, how are you today?'",leafData:{id:2,timestamp:"2024-01-15T10:32:00.000Z",tokenCount:120,wallet:"0xUser2Address..."},leafHash:"0x2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c"},{id:3,owner:"0xUser3Address...",prompt:"Write a short Python function to calculate fibonacci numbers",leafData:{id:3,timestamp:"2024-01-15T10:35:00.000Z",tokenCount:180,wallet:"0xUser3Address..."},leafHash:"0x3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d"}]},OO=async t=>{const e=ri.requests[t],r=ri.requests.map(a=>[a.leafData.id,a.leafData.timestamp,a.leafData.tokenCount,a.leafData.wallet]),i=["uint256","string","uint256","string"],n=ji.StandardMerkleTree.of(r,i),s=n.getProof(t),o=n.root;return{leafIndex:t,leafData:e.leafData,leafHash:e.leafHash,proof:s.map((a,l)=>({data:a,position:l%2===0?"left":"right"})),root:o}},PO=async t=>{try{const r=ri.requests.map(u=>[u.leafData.id,u.leafData.timestamp,u.leafData.tokenCount,u.leafData.wallet]),i=["uint256","string","uint256","string"],n=ji.StandardMerkleTree.of(r,i),s=[t.leafData.id,t.leafData.timestamp,t.leafData.tokenCount,t.leafData.wallet],o=t.proof.map(u=>u.data),a=ji.StandardMerkleTree.verify(n.root,i,s,o);let l=!1,c=-1;for(const[u,d]of n.entries())if(JSON.stringify(d)===JSON.stringify(s)){l=!0,c=u;break}const h=[" Used OpenZeppelin StandardMerkleTree.verify()",` Leaf Data: [${s.join(", ")}]`,` Tree Root: ${n.root.substring(0,16)}...`,` Proof Root: ${t.root.substring(0,16)}...`,` Leaf Index: ${c} (expected: ${t.leafIndex})`,` Root Match: ${n.root===t.root}`,` Leaf Exists: ${l}`,`${a?" Verification: VALID":" Verification: INVALID"}`];return{isValid:a&&l&&n.root===t.root,message:a&&l?"Proof is valid! Alice's payment is confirmed.":"Proof is invalid! This payment cannot be verified.",steps:h}}catch(e){return console.error("Proof validation failed:",e),{isValid:!1,message:"Error validating proof: "+e.message,steps:[]}}},FO=()=>{const[t,e]=le.useState(0),[r,i]=le.useState(null),[n,s]=le.useState(""),[o,a]=le.useState(null),[l,c]=le.useState("generate"),h=async()=>{try{const f=await OO(t);i(f)}catch(f){console.error("Error generating proof:",f)}},u=async()=>{try{const f=JSON.parse(n),p=await PO(f);a(p)}catch(f){console.error("Proof validation failed:",f),a({isValid:!1,message:"Invalid JSON format",steps:[]})}},d=async f=>{try{await navigator.clipboard.writeText(f)}catch(p){console.error("Failed to copy to clipboard:",p)}};return y.jsxs("div",{className:Y({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[y.jsx("h3",{className:Y({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:" Interactive Proof Demo: Alice's Story"}),y.jsxs("div",{className:Y({marginBottom:"20px",padding:"16px",backgroundColor:"#f9fafb",borderRadius:"8px",border:"1px solid #d1d5db"}),children:[y.jsxs("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:["Sample Batch (Merkle Root: ",ri.merkleRoot.substring(0,20),"...)"]}),y.jsx("div",{className:Y({display:"grid",gap:"8px"}),children:ri.requests.map((f,p)=>y.jsxs("div",{className:Y({padding:"8px 12px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #d1d5db",fontSize:"13px"}),children:[y.jsx("strong",{children:f.owner})," (R",y.jsx("sub",{children:p+1}),"): ",f.prompt," - ",f.leafData.tokenCount," tokens"]},f.id))})]}),y.jsx("div",{className:Y({marginBottom:"16px",borderBottom:"1px solid #e5e7eb"}),children:y.jsxs("div",{className:Y({display:"flex",gap:"0"}),children:[y.jsx("button",{onClick:()=>c("generate"),className:Y({padding:"8px 16px",backgroundColor:l==="generate"?"#f9fafb":"transparent",color:l==="generate"?"#374151":"#6b7280",border:l==="generate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:l==="generate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:l==="generate"?"medium":"normal"}),children:"Generate Proof"}),y.jsx("button",{onClick:()=>c("validate"),className:Y({padding:"8px 16px",backgroundColor:l==="validate"?"#f9fafb":"transparent",color:l==="validate"?"#374151":"#6b7280",border:l==="validate"?"1px solid #d1d5db":"1px solid transparent",borderBottom:l==="validate"?"1px solid #f9fafb":"1px solid #e5e7eb",borderRadius:"4px 4px 0 0",cursor:"pointer",fontSize:"14px",fontWeight:l==="validate"?"medium":"normal"}),children:"Validate Proof"})]})}),l==="generate"&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 1: Select User to Generate Proof"}),y.jsx("select",{value:t,onChange:f=>e(Number(f.target.value)),className:Y({width:"100%",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",marginBottom:"12px"}),children:ri.requests.map((f,p)=>y.jsxs("option",{value:p,children:[f.owner," - ",f.prompt]},f.id))}),y.jsx("button",{onClick:h,className:Y({padding:"8px 16px",backgroundColor:"#374151",color:"white",border:"1px solid #374151",borderRadius:"4px",cursor:"pointer",fontSize:"14px","&:hover":{backgroundColor:"#4b5563",borderColor:"#4b5563"}}),children:"Generate Merkle Proof"})]}),r&&y.jsxs("div",{className:Y({padding:"16px",backgroundColor:"#f9fafb",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsxs("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px",color:"#374151"}),children:["Generated Proof for ",ri.requests[t].owner]}),y.jsxs("div",{className:Y({marginBottom:"12px"}),children:[y.jsx("strong",{children:"Proof Path:"}),y.jsx("div",{className:Y({fontSize:"12px",fontFamily:"monospace",marginTop:"4px"}),children:r.proof.map((f,p)=>y.jsxs("div",{children:["Level ",p+1,": ",f.data.substring(0,20),"... (",f.position,")"]},p))})]}),y.jsxs("div",{className:Y({marginBottom:"12px"}),children:[y.jsx("strong",{children:"Complete Proof JSON:"}),y.jsxs("div",{className:Y({position:"relative"}),children:[y.jsx("pre",{className:Y({fontSize:"11px",fontFamily:"monospace",backgroundColor:"#fff",padding:"8px",borderRadius:"4px",border:"1px solid #d1d5db",overflow:"auto",maxHeight:"200px",marginTop:"4px"}),children:JSON.stringify(r,null,2)}),y.jsx("button",{onClick:()=>d(JSON.stringify(r,null,2)),className:Y({position:"absolute",top:"8px",right:"8px",padding:"4px 8px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"}),children:"Copy"})]})]})]})]}),l==="validate"&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({marginBottom:"16px",padding:"16px",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Step 2: Validate a Proof"}),y.jsx("label",{className:Y({display:"block",fontSize:"14px",marginBottom:"8px"}),children:"Paste Proof JSON:"}),y.jsx("textarea",{value:n,onChange:f=>s(f.target.value),placeholder:"Paste the complete proof JSON here...",className:Y({width:"100%",height:"120px",padding:"8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"12px",fontFamily:"monospace",marginBottom:"12px",resize:"vertical"})}),y.jsx("button",{onClick:u,disabled:!n.trim(),className:Y({padding:"8px 16px",backgroundColor:n.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:n.trim()?"pointer":"not-allowed",fontSize:"14px","&:hover":n.trim()?{backgroundColor:"#4b5563"}:{}}),children:"Validate Proof"})]}),o&&y.jsxs("div",{className:Y({padding:"16px",backgroundColor:o.isValid?"#f9fafb":"#fef2f2",borderRadius:"4px",border:`1px solid ${o.isValid?"#d1d5db":"#fecaca"}`}),children:[y.jsx("h4",{className:Y({fontSize:"16px",fontWeight:"medium",marginBottom:"12px"}),children:"Validation Result"}),y.jsx("div",{className:Y({fontSize:"14px",fontWeight:"medium",marginBottom:"12px",color:o.isValid?"#166534":"#dc2626"}),children:o.message}),o.steps.length>0&&y.jsxs("div",{children:[y.jsx("strong",{children:"Verification Steps:"}),y.jsx("div",{className:Y({marginTop:"8px"}),children:o.steps.map((f,p)=>y.jsx("div",{className:Y({fontSize:"12px",fontFamily:"monospace",backgroundColor:"#fff",padding:"4px 8px",borderRadius:"4px",border:"1px solid #e5e7eb",marginBottom:"4px"}),children:f},p))})]})]})]})]})},NO=async t=>{if(t.length===0)return"";const e=t.map(n=>[n.leafData.id,n.leafData.timestamp,n.leafData.tokenCount,n.leafData.wallet]),r=["uint256","string","uint256","string"];return ji.StandardMerkleTree.of(e,r).root},jO=async t=>{if(t.length===0)return"";const e=t.map(s=>[s.leafData.id,s.leafData.timestamp,s.leafData.tokenCount,s.leafData.wallet]),r=["uint256","string","uint256","string"],i=ji.StandardMerkleTree.of(e,r);let n=`Merkle Tree (OpenZeppelin StandardMerkleTree):
`;n+=`Root: ${i.root.substring(0,16)}...
`,n+=`
Tree Structure:
`;for(const[s,o]of i.entries()){const a=i.leafHash(o);n+=`Leaf ${s+1}: ${a.substring(0,16)}... (${o[0]}, ${o[3]})
`}return n},Lg=4,DO=()=>{const[t,e]=le.useState([]),[r,i]=le.useState(""),[n,s]=le.useState(""),[o,a]=le.useState(!1),[l,c]=le.useState(1),[h,u]=le.useState(""),[d,f]=le.useState(Ps[0]),p=async(w,L)=>{const C={id:l,timestamp:new Date().toISOString(),tokenCount:Math.floor(Math.random()*200)+100,wallet:w},v=[C.id,C.timestamp,C.tokenCount,C.wallet],A=["uint256","string","uint256","string"],P=ji.StandardMerkleTree.of([v],A).leafHash(v),R=["The sentiment of this review is positive, indicating customer satisfaction.","Hallo, wie geht es dir heute?","Here's a Python function: def fibonacci(n): return n if n <= 1 else fibonacci(n-1) + fibonacci(n-2)","Quantum computing uses quantum mechanical phenomena like superposition and entanglement to process information.","Once upon a time, a curious cat named Whiskers discovered a mysterious clock that could bend time...","Renewable energy reduces carbon emissions, creates jobs, and provides sustainable power solutions.","Focus on user experience, social media marketing, and influencer partnerships for app growth.","Fixed code: console.log('hello world'); // Missing quotes around string"],_=R[Math.floor(Math.random()*R.length)],S={id:l,prompt:L,model:"gpt-4-turbo",recipient:w,estimatedTokens:C.tokenCount,response:_,leafData:C,leafHash:P};return e($=>[...$,S]),c($=>$+1),u(""),S};le.useEffect(()=>{(async()=>{if(t.length>=Lg&&!o){const L=await NO(t),C=await jO(t);i(L),s(C),a(!0)}})()},[t.length,o]);const g=async()=>{h.trim()&&await p(d,h)},b=async()=>{const w=Ag[Math.floor(Math.random()*Ag.length)],L=Ps[Math.floor(Math.random()*Ps.length)];f(L),await p(L,w)},x=()=>{e([]),i(""),s(""),a(!1),c(1),u("")};return y.jsxs("div",{className:Y({border:"1px solid #e5e7eb",borderRadius:"8px",padding:"20px",margin:"20px 0",backgroundColor:"#f9fafb"}),children:[y.jsx("h3",{className:Y({fontSize:"18px",fontWeight:"bold",marginBottom:"16px"}),children:" Interactive LLM Batch Processing Demo"}),y.jsx("div",{className:Y({marginBottom:"20px",padding:"16px",backgroundColor:"#eff6ff",borderRadius:"8px",border:"1px solid #bfdbfe"}),children:y.jsxs("p",{className:Y({fontSize:"14px",color:"#1e40af",marginBottom:"8px"}),children:[y.jsx("strong",{children:"How it works:"})," Send LLM requests and get immediate responses. After ",Lg," ","requests, a Merkle tree is automatically created for cost-efficient blockchain settlement."]})}),y.jsxs("div",{className:Y({marginBottom:"1.5rem",padding:"1rem",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:[y.jsx("h4",{className:Y({fontSize:"1rem",fontWeight:"medium",marginBottom:"1rem"}),children:"Send LLM Request"}),y.jsxs("div",{className:Y({marginBottom:"0.75rem"}),children:[y.jsx("label",{className:Y({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Wallet Address:"}),y.jsx("select",{value:d,onChange:w=>f(w.target.value),className:Y({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.85rem"}),children:Ps.map(w=>y.jsx("option",{value:w,children:w},w))})]}),y.jsxs("div",{className:Y({marginBottom:"0.75rem"}),children:[y.jsx("label",{className:Y({display:"block",fontSize:"0.85rem",marginBottom:"0.25rem"}),children:"Prompt:"}),y.jsx("input",{type:"text",value:h,onChange:w=>u(w.target.value),placeholder:"Enter your LLM prompt...",className:Y({width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.85rem"}),onKeyPress:w=>w.key==="Enter"&&g()})]}),y.jsxs("div",{className:Y({display:"flex",gap:"0.5rem",fontSize:"0.85rem"}),children:[y.jsx("button",{onClick:g,disabled:!h.trim(),className:Y({padding:"0.5rem 1rem",backgroundColor:h.trim()?"#374151":"#9ca3af",color:"white",border:"none",borderRadius:"4px",cursor:h.trim()?"pointer":"not-allowed",transition:"background-color 0.2s","&:hover":{backgroundColor:h.trim()?"#4b5563":"#9ca3af"}}),children:"Send Request"}),y.jsx("button",{onClick:b,className:Y({padding:"0.5rem 1rem",backgroundColor:"#374151",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#4b5563"}}),children:"Send Random Request"}),y.jsx("button",{onClick:x,className:Y({padding:"0.5rem 1rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.2s","&:hover":{backgroundColor:"#dc2626"}}),children:"Reset Demo"})]})]}),o&&y.jsxs("div",{className:Y({padding:"0.75rem",backgroundColor:"#f0fdf4",border:"1px solid #bbf7d0",borderRadius:"4px",marginBottom:"1rem"}),children:[y.jsx("strong",{children:" Merkle Root:"})," ",y.jsx("code",{className:Y({fontSize:"0.8rem"}),children:r}),y.jsx("div",{className:Y({fontSize:"0.8rem",color:"#166534",marginTop:"0.25rem"}),children:"All requests can now be processed with a single blockchain transaction!"}),n&&y.jsxs("div",{className:Y({marginTop:"0.75rem"}),children:[y.jsx("strong",{children:"Tree Structure:"}),y.jsx("pre",{className:Y({fontSize:"0.7rem",fontFamily:"monospace",backgroundColor:"#fff",padding:"0.5rem",borderRadius:"4px",border:"1px solid #bbf7d0",marginTop:"0.25rem",lineHeight:"1.4",overflow:"auto"}),children:n})]})]}),y.jsx("div",{className:Y({maxHeight:"400px",overflowY:"auto"}),children:t.length===0?y.jsx("div",{className:Y({padding:"1.5rem",textAlign:"center",color:"#6b7280",backgroundColor:"#fff",borderRadius:"4px",border:"1px solid #e5e7eb"}),children:"No requests yet. Send your first LLM request above! "}):t.map((w,L)=>y.jsxs("div",{className:Y({padding:"1rem",backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"4px",marginBottom:"0.75rem"}),children:[y.jsxs("div",{className:Y({marginBottom:"0.5rem"}),children:[y.jsx("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Prompt (not part of Merkle-Leafs):"}),y.jsx("div",{className:Y({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",marginBottom:"0.3rem",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.prompt}),y.jsx("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.15rem",color:"#444"}),children:"Response (not part of Merkle-Leafs):"}),y.jsx("div",{className:Y({fontSize:"0.92rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.35rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",whiteSpace:"pre-wrap",wordBreak:"break-word"}),children:w.response})]}),w.leafData&&y.jsxs("div",{className:Y({marginBottom:"0.5rem"}),children:[y.jsxs("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Data R",y.jsx("sub",{children:L+1})," (used for hash):"]}),y.jsx("pre",{className:Y({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#fafbfc",padding:"0.45rem 0.6rem",borderRadius:"3px",border:"1px solid #e5e7eb",overflow:"auto",lineHeight:"1.3"}),children:JSON.stringify(w.leafData,null,2)})]}),w.leafHash&&y.jsxs("div",{children:[y.jsxs("div",{className:Y({fontWeight:500,fontSize:"0.92rem",marginBottom:"0.18rem",color:"#222"}),children:["Merkle Leaf Hash H",y.jsx("sub",{children:L+1}),":"]}),y.jsx("code",{className:Y({fontSize:"0.78rem",fontFamily:"monospace",backgroundColor:"#f3f4f6",padding:"0.22rem 0.5rem",borderRadius:"3px",border:"1px solid #e5e7eb",wordBreak:"break-all",display:"block"}),children:w.leafHash})]})]},w.id))})]})};function qO(){return y.jsxs("article",{children:[y.jsx("section",{children:y.jsx("p",{children:"The integration of Large Language Models (LLMs) into my website is an exciting possibility. But one problem remains: How can I reduce the blockchain transaction costs when users need multiple LLM API calls in an application? In this blog post, I will explore the possible setup and it might be extend through merkle trees."})}),y.jsxs("section",{children:[y.jsx("h2",{children:"The Current AI Setup for Image Generation"}),y.jsxs("p",{children:["Before diving into Merkle tree optimizations, let's examine how my current NFT-based AI image generation system works. My existing system uses the"," ",y.jsx("a",{href:"https://optimistic.etherscan.io/address/0x80f95d330417a4acEfEA415FE9eE28db7A0A1Cdb#code",children:"GenImNFT contract"})," ","on Optimism to coordinate between users, payments, and AI image generation:"]}),y.jsx(Os,{definition:RO,title:"Workflow for Image Generation",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),y.jsx("p",{children:"This allowed me to set up a trustless system where any user with a wallet and optimism balance can access and only pay for successfully generated images, and the service is compensated automatically upon delivery."}),y.jsxs("div",{children:[y.jsx("h3",{children:"The Challenge with this system in the LLM context"}),y.jsx("p",{children:"While this system works great for my image generator, it faces limitations when scaling to multiple LLM API calls:"}),y.jsxs("ul",{children:[y.jsx("li",{children:" Every LLM request = Separate blockchain transaction"}),y.jsx("li",{children:" Gas costs multiply: 10 requests = 10 gas fees"}),y.jsx("li",{children:" User experience: Multiple wallet confirmations"}),y.jsx("li",{children:" Economic barrier: High costs limit adoption"})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Example:"})," If a user wants to generate 10 AI images for a project, they currently need 10 separate transactions costing ~$1.00 in total, plus the complexity of multiple wallet interactions."]})]}),y.jsxs("div",{children:[y.jsx("h3",{children:"Why This Setup Might benefit from a Merkle Tree Optimization"}),y.jsx("p",{children:"The current GenImNFT system proves that blockchain-AI integration works, but to make it truly scalable for multiple LLM interactions, we need:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Batch multiple requests into single transactions"}),y.jsx("li",{children:"Reduce per-request gas costs dramatically"}),y.jsx("li",{children:"Maintain payment security and user experience"}),y.jsx("li",{children:"Enable complex AI workflows without cost barriers"})]})]})]}),y.jsxs("section",{children:[y.jsx("h2",{children:"How Merkle Trees Work"}),y.jsx("p",{children:"A Merkle tree is a binary tree structure where each leaf represents a data element (in our case, an LLM request), and each parent node contains a cryptographic hash of its children. The mathematical foundation is:"}),y.jsx(Os,{definition:BO,title:"Merkle Tree Mathematical Foundation"}),y.jsx("p",{children:"This single root hash can represent an entire batch of requests, enabling us to register thousands of LLM requests with just one blockchain transaction while maintaining cryptographic proof of each individual request."}),y.jsx("p",{children:"With Merkle Trees, we can bundle multiple LLM API payments into a single blockchain transaction. Try it in the interactive demo:"}),y.jsx(DO,{})]}),y.jsxs("section",{children:[y.jsx("h3",{children:"Proving Individual Transactions with Merkle Proofs"}),y.jsx("p",{children:"Now that we've seen how to batch LLM requests into a Merkle tree, there is actually another cool feature possible. The user can verify the validity of the tree with fairly reduced information."}),y.jsxs("p",{children:["A Merkle proof is a cryptographic proof that allows the user, we name her Alice, to demonstrate that her transaction is included in the Merkle tree without revealing any other transactions. To prove that Alice's transaction R",y.jsx("sub",{children:"3"}),' is in the tree, she provides a "proof path" - the minimum set of hash values needed to reconstruct the path from her leaf to the root:']}),y.jsxs("figure",{children:[y.jsx(Os,{definition:MO,title:" Merkle Proof Path for Request 3 (R)"}),y.jsxs("figcaption",{children:["Visualization of the Merkle proof for R",y.jsx("sub",{children:"3"}),": Alice needs to provide the request and proof siblings that are highlighted in green. The hashes that are highlighted in orange can be calculated from the information. Finally, she can verify if the calculated root is the same as the root she was provided. If they are the same, her request is stored in the merkle tree."]})]}),y.jsx("p",{children:"This elegant mathematical verification proves Alice's transaction is authentic without revealing any other transaction details. In the little demonstrator below, you can test in a simple example how the proof can be generated and validated."}),y.jsx(FO,{})]}),y.jsxs("section",{children:[y.jsx("h2",{children:"From Theory to Practice - Prepaid Settlement Workflow"}),y.jsx("p",{children:"Now that we understand how Merkle proofs work, let's see how we can use it to extend our current workflow towards the LLM systems. The first major change is that we will not settle costs after each request, but rather require users to deposit funds upfront. This way, we can ensure that the user has enough balance to cover the costs of their requests. This is similar to a prepaid model, where users deposit funds users to deposit funds upfront. This creates a trustless system where:"}),y.jsxs("ul",{children:[y.jsx("li",{children:"User deposits $50  Guaranteed $50 available"}),y.jsx("li",{children:"LLM requests consume balance  No payment risk"}),y.jsx("li",{children:"Batch settlement  Efficient blockchain transactions"}),y.jsx("li",{children:"Refunds possible  User controls remaining balance"})]}),y.jsx(Os,{definition:$O,title:"LLM Workflow with Merkle Tree Batching",config:{sequence:{diagramMarginX:50,diagramMarginY:10,boxTextMargin:5,noteMargin:10,messageMargin:35,mirrorActors:!1}}}),y.jsx("h3",{children:"Required features from each participant"}),y.jsx("p",{children:"The workflow diagram above shows Alice's complete journey through our Merkle tree batching system. Let's break down what is required from each participant in the system:"}),y.jsx("h4",{children:"Alice (User) and similiar the LLM Wallet"}),y.jsx("p",{children:"The requirements on the two wallets to not really change compare to the image generation. So this is straight forward."}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role of Alice:"})," End user who wants to use LLM services with blockchain payments"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role of the LLM Wallet:"})," Receives payments for providing LLM services"]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Functions:"})}),y.jsxs("ul",{children:[y.jsx("li",{children:"Alice' Wallet with ETH balance for initial deposit"}),y.jsx("li",{children:"Web3 connection to interact with smart contract"}),y.jsx("li",{children:"UI to send LLM requests and view responses"}),y.jsx("li",{children:"Ability to check balance and request history"})]}),y.jsx("h4",{children:"LLM API (AI Service)"}),y.jsx("p",{children:"The requirements on the LLM API also does not really change compared to the case of generating images. It it simple really nice if it is OpenAI compatible but thiat is. wallets to not really change compare to the image generation. So this is straight forward."}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," External AI service provider (OpenAI, Anthropic, etc.)"]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Features:"})}),y.jsxs("ul",{children:[y.jsx("li",{children:"RESTful API endpoint for completions"}),y.jsx("li",{children:"Authentication via API keys"}),y.jsx("li",{children:"Token counting for cost calculation"}),y.jsx("li",{children:"Consistent response format"})]}),y.jsx("h4",{children:"LLM Contract (Smart Contract)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," Central coordinator for deposits, balance tracking, and batch settlement"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Key Difference to GenImNFT:"})," While the GenImNFT contract handles immediate payments and minting for each request, the LLM contract uses a prepaid model with batch settlement. This makes it simpler in terms of individual transaction processing but more complex in batch verification logic."]}),y.jsx("p",{children:y.jsx("strong",{children:"Required Functions:"})}),y.jsxs("ul",{children:[y.jsxs("li",{children:[y.jsx("code",{children:"depositForLLM()"})," - Accept user deposits"]}),y.jsxs("li",{children:[y.jsx("code",{children:"checkBalance(address user)"})," - Return user's available balance"]}),y.jsxs("li",{children:[y.jsx("code",{children:"processBatch(bytes32 root, Request[] requests, bytes32[][] proofs)"})," - Verify and settle batches"]}),y.jsxs("li",{children:[y.jsx("code",{children:"verifyMerkleProof()"})," - Validate individual transaction proofs"]}),y.jsxs("li",{children:[y.jsx("code",{children:"withdrawBalance()"})," - Allow users to withdraw remaining funds"]})]}),y.jsx("pre",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px",overflowX:"auto"}),children:y.jsxs("code",{children:['import "@openzeppelin/contracts/utils/cryptography/MerkleProof.sol";',y.jsx("br",{}),'import "@openzeppelin/contracts/access/Ownable.sol";',y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"struct Request ","{",y.jsx("br",{}),"bytes32 id; // Unique request identifier",y.jsx("br",{}),"string timestamp; // ISO timestamp string",y.jsx("br",{}),"uint256 tokenCount; // Number of tokens consumed",y.jsx("br",{}),"address wallet; // User's wallet address",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),"mapping(address => uint256) public llmBalance;",y.jsx("br",{}),"mapping(bytes32 => bool) public processedBatches;",y.jsx("br",{}),"event LLMDeposit(address user, uint256 amount);",y.jsx("br",{}),"event BatchProcessed(bytes32 root, uint256 totalCost);"]})}),y.jsx("h5",{children:" Detailed Function Analysis"}),y.jsx("p",{children:y.jsx("strong",{children:"1. checkBalance(address user)  uint256"})}),y.jsxs("p",{children:[y.jsx("strong",{children:"Return Value:"})," The user's ",y.jsx("em",{children:"currently available"})," balance (funds deposited minus already processed batches).",y.jsx("br",{}),y.jsx("strong",{children:"Important:"})," This does NOT account for pending requests in unprocessed Merkle trees. This means users could theoretically spend more than their balance if multiple requests are made before batch processing."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["function checkBalance(address user) public view returns (uint256) ","{",y.jsx("br",{}),"return llmBalance[user]; // Only settled balance",y.jsx("br",{}),"// Does NOT subtract pending requests!",y.jsx("br",{}),"}",y.jsx("br",{})]}),y.jsx("p",{children:y.jsx("strong",{children:"2. verifyMerkleProof()"})}),y.jsxs("p",{children:[y.jsx("strong",{children:"Gas Cost Clarification:"})," The ",y.jsx("code",{children:"verifyMerkleProof()"})," function is marked as"," ",y.jsx("code",{children:"pure"})," and only performs computations without state changes, so it costs"," ",y.jsx("strong",{children:"no gas when called directly"}),". Gas is only consumed when it's called within"," ",y.jsx("code",{children:"processBatch()"})," as part of a transaction."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:['import "@openzeppelin/contracts/utils/cryptography/MerkleProof.sol";',y.jsx("br",{}),y.jsx("br",{}),"function verifyMerkleProof(",y.jsx("br",{}),"bytes32[] memory proof,",y.jsx("br",{}),"bytes32 root,",y.jsx("br",{}),"bytes32 leaf) public pure returns (bool) ","{",y.jsx("br",{}),"return MerkleProof.verify(proof, root, leaf);",y.jsx("br",{}),"}"]}),y.jsx("p",{children:y.jsx("strong",{children:"3. processBatch() - The Core Settlement Function"})}),y.jsx("p",{children:"This function processes an entire batch of LLM requests in a single transaction. It verifies each proof, deducts costs from user balances, and pays the service provider."}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"32px"}),children:["function processBatch(",y.jsx("br",{}),"bytes32 merkleRoot,",y.jsx("br",{}),"Request[] memory requests,",y.jsx("br",{}),"bytes32[][] memory proofs) external onlyAuthorized ","{",y.jsx("br",{}),'require(!processedBatches[merkleRoot], "Batch already processed");',y.jsx("br",{}),"",y.jsx("br",{}),"uint256 totalCost = 0;",y.jsx("br",{}),"for (uint256 i = 0; i < requests.length; i++) ","{",y.jsx("br",{}),"// 1. Create leaf hash from request data",y.jsx("br",{}),"bytes32 leaf = keccak256(abi.encode(requests[i]));",y.jsx("br",{}),"",y.jsx("br",{}),"// 2. Verify proof against merkle root",y.jsx("br",{}),'require(verifyMerkleProof(proofs[i], merkleRoot, leaf), "Invalid proof");',y.jsx("br",{}),"",y.jsx("br",{}),"// 3. Deduct cost from user balance",y.jsx("br",{}),'require(llmBalance[requests[i].user] >= requests[i].cost, "Insufficient balance");',y.jsx("br",{}),"llmBalance[requests[i].user] -= requests[i].cost;",y.jsx("br",{}),"totalCost += requests[i].cost;",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 4. Pay service provider",y.jsx("br",{}),"payable(serviceProvider).transfer(totalCost);",y.jsx("br",{}),"",y.jsx("br",{}),"// 5. Mark batch as processed",y.jsx("br",{}),"processedBatches[merkleRoot] = true;",y.jsx("br",{}),"emit BatchProcessed(merkleRoot, totalCost);",y.jsx("br",{}),"}"]}),y.jsx("h4",{children:"Serverless Functions (Backend Services)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Role:"})," Request handler and coordinator between users, blockchain, and AI services"]}),y.jsxs("p",{children:["Based on the existing image generation functions ( ",y.jsx("code",{children:"scw_js/image_service.js"})," and"," ",y.jsx("code",{children:"scw_js/readhandler_v2.js"}),"), the LLM system requires two main serverless functions with enhanced capabilities for batch processing:"]}),y.jsxs("h5",{children:["Function 1: LLM Request Handler (",y.jsx("code",{children:"llm_handler.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Comparison to Image Handler:"})," Similar to ",y.jsx("code",{children:"readhandler_v2.js"})," but with instant response capability and batch queuing instead of immediate blockchain settlement."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["import ","{"," getContract, createPublicClient, http ","}",' from "viem";',y.jsx("br",{}),"import ","{"," optimism ","}",' from "viem/chains";',y.jsx("br",{}),"import ","{"," llmContractAbi ","}",' from "./llm_abi.js";',y.jsx("br",{}),"import ","{"," callLLMAPI, createLeafData, queueForBatch ","}",' from "./llm_service.js";',y.jsx("br",{}),y.jsx("br",{}),"export async function handle(event, context, cb) ","{",y.jsx("br",{}),"// 1. Extract parameters (similar to image handler)",y.jsx("br",{}),"const prompt = event.queryStringParameters.prompt;",y.jsx("br",{}),"const userAddress = event.queryStringParameters.userAddress;",y.jsx("br",{}),'const model = event.queryStringParameters.model || "gpt-4-turbo";',y.jsx("br",{}),"",y.jsx("br",{}),"if (!prompt || !userAddress) ","{",y.jsx("br",{}),'return errorResponse("Missing prompt or userAddress", 400);',y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 2. Check user balance on-chain (like mint price check)",y.jsx("br",{}),"const publicClient = createPublicClient(","{",y.jsx("br",{}),"chain: optimism,",y.jsx("br",{}),"transport: http(),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const contract = getContract(","{",y.jsx("br",{}),'address: "0x[LLM_CONTRACT_ADDRESS]",',y.jsx("br",{}),"abi: llmContractAbi,",y.jsx("br",{}),"client: ","{"," public: publicClient ","}",",",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const userBalance = await contract.read.checkBalance([userAddress]);",y.jsx("br",{}),"const estimatedCost = estimateTokenCost(prompt, model);",y.jsx("br",{}),"",y.jsx("br",{}),"if (userBalance < estimatedCost) ","{",y.jsx("br",{}),'return errorResponse("Insufficient balance", 402);',y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"// 3. Call LLM API immediately (unlike delayed image generation)",y.jsx("br",{}),"const llmResponse = await callLLMAPI(prompt, model);",y.jsx("br",{}),"",y.jsx("br",{}),"// 4. Create leaf data for Merkle tree",y.jsx("br",{}),"const leafData = createLeafData(","{",y.jsx("br",{}),"userAddress,",y.jsx("br",{}),"prompt,",y.jsx("br",{}),"response: llmResponse.content,",y.jsx("br",{}),"tokenCount: llmResponse.usage.total_tokens,",y.jsx("br",{}),"cost: estimatedCost,",y.jsx("br",{}),"timestamp: new Date().toISOString(),",y.jsx("br",{}),"model",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"// 5. Queue for batch processing (new functionality)",y.jsx("br",{}),"await queueForBatch(leafData);",y.jsx("br",{}),"",y.jsx("br",{}),"// 6. Return immediate response (unlike image generation)",y.jsx("br",{}),"return ","{",y.jsx("br",{}),"statusCode: 200,",y.jsx("br",{}),"headers: ","{",' "Content-Type": "application/json" ',"}",",",y.jsx("br",{}),"body: JSON.stringify(","{",y.jsx("br",{}),"response: llmResponse.content,",y.jsx("br",{}),"tokenCount: llmResponse.usage.total_tokens,",y.jsx("br",{}),"cost: estimatedCost,",y.jsx("br",{}),"leafId: leafData.id,",y.jsx("br",{}),"userBalance: userBalance.toString(),",y.jsx("br",{}),'message: "Request processed, queued for batch settlement"',y.jsx("br",{}),"","}",")",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}"]}),y.jsxs("h5",{children:["Function 2: LLM Service Module (",y.jsx("code",{children:"llm_service.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Comparison to Image Service:"})," Enhanced version of ",y.jsx("code",{children:"image_service.js"})," with LLM API integration and Merkle tree batch management instead of S3 image uploads."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["import ","{"," S3Client, PutObjectCommand, GetObjectCommand ","}",' from "@aws-sdk/client-s3";',y.jsx("br",{}),"import ","{"," randomBytes ","}",' from "crypto";',y.jsx("br",{}),"import ","{"," StandardMerkleTree ","}",' from "@openzeppelin/merkle-tree";',y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),'const LLM_ENDPOINT = "https://api.openai.com/v1/chat/completions";',y.jsx("br",{}),'const BATCH_BUCKET = "llm-batches";',y.jsx("br",{}),"const BATCH_THRESHOLD = 50; ",y.jsx("br",{}),"const BATCH_TIMEOUT = 5 * 60 * 1000; ",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"const REQUEST_TYPES = [",y.jsx("br",{}),'"address", "string", "uint256", "uint256", "uint256", "string"',y.jsx("br",{}),"];",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),'export async function callLLMAPI(prompt, model = "gpt-4-turbo") ',"{",y.jsx("br",{}),"const apiKey = process.env.OPENAI_API_KEY; ",y.jsx("br",{}),"",y.jsx("br",{}),"const response = await fetch(LLM_ENDPOINT, ","{",y.jsx("br",{}),'method: "POST",',y.jsx("br",{}),"headers: ","{",y.jsx("br",{}),"Authorization: `Bearer $$","{","apiKey","}","`,",y.jsx("br",{}),'"Content-Type": "application/json",',y.jsx("br",{}),"","}",",",y.jsx("br",{}),"body: JSON.stringify(","{",y.jsx("br",{}),"model,",y.jsx("br",{}),"messages: [","{",' role: "user", content: prompt ',"}","],",y.jsx("br",{}),"max_tokens: 2000,",y.jsx("br",{}),"","}","),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"if (!response.ok) ","{",y.jsx("br",{}),"throw new Error(`LLM API Error: $$","{","response.status","}","`);",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"const data = await response.json();",y.jsx("br",{}),"return ","{",y.jsx("br",{}),"content: data.choices[0].message.content,",y.jsx("br",{}),"usage: data.usage,",y.jsx("br",{}),"model: data.model",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"* Creates leaf data for Merkle tree (new functionality)",y.jsx("br",{}),"*/",y.jsx("br",{}),"export function createLeafData(requestData) ","{",y.jsx("br",{}),"// Return simplified leaf data structure optimized for Merkle tree",y.jsx("br",{}),"// This matches the format used in the proof demo: (id, timestamp, tokenCount, wallet)",y.jsx("br",{}),"return ","{",y.jsx("br",{}),'id: randomBytes(16).toString("hex"),',y.jsx("br",{}),"timestamp: requestData.timestamp,",y.jsx("br",{}),"tokenCount: requestData.tokenCount,",y.jsx("br",{}),"wallet: requestData.userAddress",y.jsx("br",{}),"","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"export async function queueForBatch(leafData) ","{",y.jsx("br",{}),"// Upload to S3 pending batch folder (similar to uploadToS3)",y.jsx("br",{}),"const fileName = `pending/$$","{","leafData.id","}",".json`;",y.jsx("br",{}),"await uploadToS3(leafData, fileName);",y.jsx("br",{}),"",y.jsx("br",{}),"// Check if batch threshold reached",y.jsx("br",{}),"const pendingCount = await getPendingRequestCount();",y.jsx("br",{}),"if (pendingCount >= BATCH_THRESHOLD) ","{",y.jsx("br",{}),"await triggerBatchProcessing();",y.jsx("br",{}),"","}",y.jsx("br",{}),"}"]}),y.jsxs("h5",{children:["Function 3: Batch Processor (",y.jsx("code",{children:"batch_processor.js"}),")"]}),y.jsxs("p",{children:[y.jsx("strong",{children:"New Functionality:"})," This function has no equivalent in the image generation system. It handles the batch aggregation and Merkle tree construction that enables cost-efficient blockchain settlement."]}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:[y.jsx("br",{}),y.jsx("br",{}),"export async function triggerBatchProcessing() ","{",y.jsx("br",{}),"",y.jsx("br",{}),"const pendingRequests = await getAllPendingRequests();",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const treeData = pendingRequests.map(req => [",y.jsx("br",{}),"req.userAddress, ",y.jsx("br",{}),"req.prompt, ",y.jsx("br",{}),"req.tokenCount, ",y.jsx("br",{}),"req.cost, ",y.jsx("br",{}),"Math.floor(new Date(req.timestamp).getTime() / 1000), ",y.jsx("br",{}),"req.model ",y.jsx("br",{}),"]);",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const tree = StandardMerkleTree.of(treeData, REQUEST_TYPES);",y.jsx("br",{}),"const merkleRoot = tree.root;",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const proofs = [];",y.jsx("br",{}),"const contractRequests = [];",y.jsx("br",{}),"",y.jsx("br",{}),"for (const [index, value] of tree.entries()) ","{",y.jsx("br",{}),"const proof = tree.getProof(index);",y.jsx("br",{}),"proofs.push(proof);",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"contractRequests.push(","{",y.jsx("br",{}),"user: value[0],",y.jsx("br",{}),"prompt: value[1],",y.jsx("br",{}),"tokenCount: value[2],",y.jsx("br",{}),"cost: value[3],",y.jsx("br",{}),"timestamp: value[4],",y.jsx("br",{}),"model: value[5]",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"","}",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const txHash = await submitBatchToContract(",y.jsx("br",{}),"merkleRoot, ",y.jsx("br",{}),"contractRequests, ",y.jsx("br",{}),"proofs ",y.jsx("br",{}),");",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"await archiveBatch(contractRequests, txHash);",y.jsx("br",{}),y.jsx("br",{}),"return ","{"," root: merkleRoot, txHash, processedCount: contractRequests.length ","}",";",y.jsx("br",{}),"}",y.jsx("br",{}),y.jsx("br",{}),y.jsx("br",{}),"async function submitBatchToContract(merkleRoot, requests, proofs) ","{",y.jsx("br",{}),"const walletClient = createWalletClient(","{",y.jsx("br",{}),"account: privateKeyToAccount(process.env.LLM_WALLET_PRIVATE_KEY),",y.jsx("br",{}),"chain: optimism,",y.jsx("br",{}),"transport: http(),",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"const contract = getContract(","{",y.jsx("br",{}),"address: process.env.LLM_CONTRACT_ADDRESS,",y.jsx("br",{}),"abi: llmContractAbi,",y.jsx("br",{}),"client: ","{"," wallet: walletClient ","}",",",y.jsx("br",{}),"","}",");",y.jsx("br",{}),"",y.jsx("br",{}),"",y.jsx("br",{}),"const txHash = await contract.write.processBatch([",y.jsx("br",{}),"merkleRoot, ",y.jsx("br",{}),"requests, ",y.jsx("br",{}),"proofs ",y.jsx("br",{}),"]);",y.jsx("br",{}),"",y.jsx("br",{}),"return txHash;",y.jsx("br",{}),"}"]}),y.jsx("h5",{children:" Key Differences from Image Generation Functions"}),y.jsxs("table",{className:Y({width:"100%",borderCollapse:"collapse",marginBottom:"16px",fontSize:"14px"}),children:[y.jsx("thead",{children:y.jsxs("tr",{className:Y({backgroundColor:"#f3f4f6"}),children:[y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"Aspect"}),y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"Image Generation"}),y.jsx("th",{className:Y({border:"1px solid #d1d5db",padding:"8px",textAlign:"left"}),children:"LLM Processing"})]})}),y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Response Time"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Delayed (async via blockchain update)"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Immediate (instant API response)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Payment Model"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Pay-per-transaction (immediate settlement)"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Prepaid balance (batch settlement)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Blockchain Interaction"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"One transaction per image"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"One transaction per batch (50+ requests)"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Data Storage"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"S3: Images + ERC-721 metadata"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"S3: Request queue + Merkle proofs"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Error Handling"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Blockchain revert on failure"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Individual request isolation"})]}),y.jsxs("tr",{children:[y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px",fontWeight:"medium"}),children:"Scalability"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Limited by gas costs"}),y.jsx("td",{className:Y({border:"1px solid #d1d5db",padding:"8px"}),children:"Scales with batch size"})]})]})]}),y.jsx("h5",{children:" Environment Configuration (serverless.yml)"}),y.jsxs("div",{className:Y({fontSize:"13px",fontFamily:"monospace",backgroundColor:"#f5f5f5",padding:"12px",borderRadius:"4px",border:"1px solid #ddd",marginBottom:"16px"}),children:["# Extended from existing serverless.yml",y.jsx("br",{}),"provider:",y.jsx("br",{}),"name: scaleway",y.jsx("br",{}),"runtime: node22",y.jsx("br",{}),"secret:",y.jsx("br",{}),"# Existing secrets",y.jsx("br",{}),"SCW_SECRET_KEY: $$","{","env:SCW_SECRET_KEY","}",y.jsx("br",{}),"SCW_ACCESS_KEY: $$","{","env:SCW_ACCESS_KEY","}",y.jsx("br",{}),"NFT_WALLET_PRIVATE_KEY: $$","{","env:NFT_WALLET_PRIVATE_KEY","}",y.jsx("br",{}),"# New LLM secrets",y.jsx("br",{}),"OPENAI_API_KEY: $$","{","env:OPENAI_API_KEY","}",y.jsx("br",{}),"LLM_WALLET_PRIVATE_KEY: $$","{","env:LLM_WALLET_PRIVATE_KEY","}",y.jsx("br",{}),"LLM_CONTRACT_ADDRESS: $$","{","env:LLM_CONTRACT_ADDRESS","}",y.jsx("br",{}),y.jsx("br",{}),"functions:",y.jsx("br",{}),"# Existing functions",y.jsx("br",{}),"readnftv2:",y.jsx("br",{}),"handler: readhandler_v2.handle",y.jsx("br",{}),"classicai:",y.jsx("br",{}),"handler: dec_ai.handle",y.jsx("br",{}),"# New LLM functions",y.jsx("br",{}),"llmhandler:",y.jsx("br",{}),"handler: llm_handler.handle",y.jsx("br",{}),"timeout: 30s # Longer timeout for LLM API calls",y.jsx("br",{}),"batchprocessor:",y.jsx("br",{}),"handler: batch_processor.handle",y.jsx("br",{}),"timeout: 60s # Longer timeout for batch processing",y.jsx("br",{}),"events:",y.jsx("br",{}),"- schedule: rate(5 minutes) # Auto-trigger batches"]})]})]})}const b3=Object.freeze(Object.defineProperty({__proto__:null,default:qO,meta:IO},Symbol.toStringTag,{value:"Module"}));export{ZO as $,qn as A,x2 as B,hv as C,eu as D,we as E,lm as F,jL as G,bM as H,pg as I,bC as J,ls as K,Qe as L,zT as M,qh as N,KO as O,t3 as P,Ci as Q,Lp as R,Ap as S,r3 as T,mt as U,e3 as V,QO as W,XO as X,JO as Y,n3 as Z,m as _,nv as a,mk as a$,i3 as a0,E2 as a1,zi as a2,UO as a3,oo as a4,BL as a5,ym as a6,wh as a7,sp as a8,GT as a9,st as aA,d3 as aB,KR as aC,GR as aD,VR as aE,QB as aF,WT as aG,gs as aH,KB as aI,JB as aJ,di as aK,EL as aL,lb as aM,ro as aN,ao as aO,Ca as aP,hb as aQ,ob as aR,iL as aS,Fh as aT,Br as aU,vp as aV,Ck as aW,Zn as aX,at as aY,ey as aZ,_e as a_,Vs as aa,NL as ab,Z2 as ac,os as ad,tt as ae,ht as af,xm as ag,SR as ah,p1 as ai,p3 as aj,_C as ak,Wt as al,jr as am,$h as an,zb as ao,gi as ap,mb as aq,TL as ar,bA as as,xL as at,Vh as au,vg as av,gM as aw,f3 as ax,g3 as ay,u3 as az,iv as b,Ph as b0,gy as b1,us as b2,by as b3,YO as b4,Ww as b5,kL as b6,bL as b7,sA as b8,Gh as b9,so as bA,b3 as bB,QA as ba,LL as bb,fs as bc,tn as bd,_a as be,hL as bf,jM as bg,ds as bh,va as bi,nL as bj,eb as bk,lA as bl,cA as bm,Jr as bn,Wp as bo,hA as bp,Yh as bq,oA as br,fA as bs,en as bt,Nr as bu,jp as bv,Xh as bw,ib as bx,rh as by,AL as bz,St as c,wt as d,bm as e,te as f,av as g,vr as h,ai as i,kC as j,Zi as k,G as l,bb as m,VO as n,y3 as o,ov as p,lv as q,m3 as r,sv as s,xC as t,Ke as u,zR as v,HL as w,s3 as x,rv as y,GO as z};
