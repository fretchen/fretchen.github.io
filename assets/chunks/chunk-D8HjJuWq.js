import{ac as L,be as k,u as P,r as c,e as R,l as z,j as n,bf as D}from"./chunk-BpgHtCjF.js";import{b as A,c as F,a as W,z as G,u as q}from"./chunk-D8AdCHVt.js";class H extends L{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function J(r,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new H({value:r});let[s,e="0"]=r.split(".");const l=s.startsWith("-");if(l&&(s=s.slice(1)),e=e.replace(/(0+)$/,""),t===0)Math.round(+`.${e}`)===1&&(s=`${BigInt(s)+1n}`),e="";else if(e.length>t){const[i,f,o]=[e.slice(0,t-1),e.slice(t-1,t),e.slice(t)],u=Math.round(+`${f}.${o}`);u>9?e=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):e=`${i}${u}`,e.length>t&&(e=e.slice(1),s=`${BigInt(s)+1n}`),e=e.slice(0,t)}else e=e.padEnd(t,"0");return BigInt(`${l?"-":""}${s}${e}`)}function K(r,t="wei"){return J(r,k[t])}function O(){const t=P().urlPathname,[s,e]=c.useState(t),[l,i]=c.useState(!1),[f,o]=c.useState(null),[u,m]=c.useState(!1),{isConnected:x}=R(),E=z(),S=K("0.0002"),{writeContract:b,isPending:w,data:v,error:g}=A(),{isLoading:I,isSuccess:p}=F({hash:v});c.useEffect(()=>{const T=(window.location.origin+t).replace(/\/+$/,"");e(T)},[t]);const d=W(),N=G(),C=E===d.id,{data:B,error:h,isPending:U,refetch:$}=q({...N,functionName:"getLikesForUrl",args:[s],chainId:d.id}),y=async()=>{if(o(null),!s){o("URL ist erforderlich");return}if(!C){o(`Bitte wechsle zum ${d.name} Netzwerk`);return}i(!0),b({...N,functionName:"donate",args:[s],value:S})};c.useEffect(()=>{p&&(i(!1),o(null),setTimeout(()=>{$()},2e3)),g&&(i(!1),o(g?.message||"Transaktion fehlgeschlagen"))},[p,g,$]);const j=f||(!C&&x?`Bitte wechsle zum ${d.name} Netzwerk`:null),a=D,M=()=>U?n.jsx("div",{className:a.readDisplay,children:"Loading..."}):h?n.jsxs("div",{className:a.readDisplay,children:["Error: ",h.shortMessage||h.message]}):n.jsx("div",{className:a.readDisplay,children:B?.toString()||"0"});return n.jsx("div",{className:a.container,children:n.jsxs("div",{className:a.buttonGroup,children:[n.jsxs("div",{className:a.tooltipContainer,children:[n.jsx("button",{onClick:y,disabled:!x||l||w||I,className:a.writeButton,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:l||w?"Processing...":p?"Supported!":"Support"}),u&&j&&n.jsx("div",{className:a.tooltip,children:j})]}),M()]})})}const Y=function({title:r}){return n.jsxs("div",{className:"TitleBar",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h1",{children:r}),n.jsx(O,{})]})};export{Y as T};
