import{r as u,j as t,f as a,L as N,S as p}from"./chunk-C3zRomtV.js";import{g as x}from"./chunk-CfbyBzN4.js";import{u as g}from"./chunk-BWD_YyAG.js";const C=({tokenId:r,fallbackImageUrl:n,nftName:o})=>{const[f,l]=u.useState(null),[i,d]=u.useState(!0),c=g(),h=async e=>{try{if(e.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",e),null;const s=await fetch(e);if(!s.ok)throw new Error(`Failed to fetch metadata: ${s.status}`);return await s.json()}catch(s){return console.error("Error fetching NFT metadata:",s),null}};return u.useEffect(()=>{(async()=>{try{if(d(!0),n){l(n),d(!1);return}if(r&&c){const m=await c.readContract({address:x.address,abi:x.abi,functionName:"tokenURI",args:[BigInt(r)]}),y=await h(m);y?.image&&l(y.image)}}catch(s){console.warn("Failed to load NFT image:",s)}finally{d(!1)}})()},[r,n,c]),!f&&!i?null:t.jsx(t.Fragment,{children:i?t.jsx("div",{className:a.entryNftImage,style:{backgroundColor:"#f3f4f6"},title:"Loading NFT artwork..."}):t.jsx("img",{src:f,alt:o||"NFT Artwork",className:a.entryNftImage,title:`NFT Artwork${o?`: ${o}`:""}`,onError:()=>l(null)})})},$=({blogs:r,basePath:n,titleClassName:o,showDate:f=!1,reverseOrder:l=!1,limit:i,showViewAllLink:d=!1})=>{let c=l?[...r].reverse():r;const h=i&&r.length>i;return i&&(c=c.slice(0,i)),t.jsxs("div",{className:a.container,children:[c.map((e,s)=>{const m=l?r.length-1-s:s,y=`${n}/${m}`,j=e.publishing_date?new Date(e.publishing_date).toISOString().split("T")[0]:null;return t.jsxs("article",{className:"h-entry",children:[t.jsx(N,{href:y,className:a.entry,children:t.jsxs("div",{className:a.entryContent,children:[(e.tokenID||e.nftMetadata?.imageUrl)&&t.jsx("div",{className:"u-featured",children:t.jsx(C,{tokenId:e.tokenID,fallbackImageUrl:e.nftMetadata?.imageUrl,nftName:e.nftMetadata?.name})}),t.jsx("div",{className:e.description?a.entryTextCompact:a.entryText,children:t.jsxs("div",{className:a.entryTextContent,children:[f&&e.publishing_date&&t.jsx("div",{className:e.description?a.entryDateWithDescription:a.entryDate,children:t.jsx("time",{className:"dt-published",dateTime:j||void 0,children:e.publishing_date})}),t.jsx("h3",{className:`p-name ${a.entryTitle} ${o||""}`,children:e.title}),e.description&&t.jsx("div",{className:`p-summary ${a.entryDescription}`,children:e.description}),e.category&&t.jsx("a",{href:`${n}?category=${encodeURIComponent(e.category)}`,className:"p-category",style:{display:"none"},children:e.category}),e.secondaryCategory&&t.jsx("a",{href:`${n}?category=${encodeURIComponent(e.secondaryCategory)}`,className:"p-category",style:{display:"none"},children:e.secondaryCategory})]})})]})}),t.jsx("a",{rel:"author",className:"p-author h-card",href:p.url,style:{display:"none"},children:p.name}),t.jsx("a",{className:"u-url",href:`${p.url}${y}`,style:{display:"none"}}),t.jsx("a",{className:"u-bridgy-fed",href:"https://fed.brid.gy/",hidden:!0,style:{display:"none"}})]},m)}),h&&d&&t.jsx("div",{className:a.viewAllContainer,children:t.jsx(N,{href:n,children:"View all entries â†’"})})]})};export{$ as E};
