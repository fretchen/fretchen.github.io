import{C as L,D as k,u as D,r as c,e as P,E as R,j as n,G as z}from"./chunk-BUHGb1y9.js";import{b as A,c as F,g as W,u as G,d as q}from"./chunk-BERE7Z_k.js";class H extends L{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function J(r,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new H({value:r});let[s,e="0"]=r.split(".");const l=s.startsWith("-");if(l&&(s=s.slice(1)),e=e.replace(/(0+)$/,""),t===0)Math.round(+`.${e}`)===1&&(s=`${BigInt(s)+1n}`),e="";else if(e.length>t){const[i,p,o]=[e.slice(0,t-1),e.slice(t-1,t),e.slice(t)],d=Math.round(+`${p}.${o}`);d>9?e=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):e=`${i}${d}`,e.length>t&&(e=e.slice(1),s=`${BigInt(s)+1n}`),e=e.slice(0,t)}else e=e.padEnd(t,"0");return BigInt(`${l?"-":""}${s}${e}`)}function K(r,t="wei"){return J(r,k[t])}function O(){const t=D().urlPathname,[s,e]=c.useState(t),[l,i]=c.useState(!1),[p,o]=c.useState(null),[d,x]=c.useState(!1),{isConnected:C}=P(),E=R(),v=K("0.0002"),{writeContract:I,isPending:N,data:b,error:u}=A(),{isLoading:B,isSuccess:f}=F({hash:b});c.useEffect(()=>{const T=(window.location.origin+t).replace(/\/+$/,"");e(T)},[t]);const g=W(),w=q(),$=E===g.id,{data:h,error:m,isPending:U,refetch:j}=G({...w,functionName:"getLikesForUrl",args:[s],chainId:g.id}),y=async()=>{if(o(null),!s){o("URL ist erforderlich");return}if(!$){o(`Bitte wechsle zum ${g.name} Netzwerk`);return}i(!0),I({...w,functionName:"donate",args:[s],value:v})};c.useEffect(()=>{f&&(i(!1),o(null),setTimeout(()=>{j()},2e3)),u&&(i(!1),o((u==null?void 0:u.message)||"Transaktion fehlgeschlagen"))},[f,u,j]);const S=p||(!$&&C?`Bitte wechsle zum ${g.name} Netzwerk`:null),a=z,M=()=>U?n.jsx("div",{className:a.readDisplay,children:"Loading..."}):m?n.jsxs("div",{className:a.readDisplay,children:["Error: ",m.shortMessage||m.message]}):n.jsx("div",{className:a.readDisplay,children:(h==null?void 0:h.toString())||"0"});return n.jsx("div",{className:a.container,children:n.jsxs("div",{className:a.buttonGroup,children:[n.jsxs("div",{className:a.tooltipContainer,children:[n.jsx("button",{onClick:y,disabled:!C||l||N||B,className:a.writeButton,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:l||N?"Processing...":f?"Supported!":"Support"}),d&&S&&n.jsx("div",{className:a.tooltip,children:S})]}),M()]})})}const Y=function({title:r}){return n.jsxs("div",{className:"TitleBar",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h1",{children:r}),n.jsx(O,{})]})};export{Y as T};
