import{r as p,j as t,f as a,L as j,S as N}from"./chunk-DYNYrUwT.js";import{u as g,G as T,g as I}from"./chunk-VfnaMnMS.js";import{u as w,G as F}from"./chunk-DP62Ng4f.js";const v=({tokenId:n,fallbackImageUrl:c,nftName:o})=>{const[u,l]=p.useState(null),[r,m]=p.useState(!0),{network:d}=g(T),f=I(d),e=w(d),h=async i=>{try{if(i.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",i),null;const s=await fetch(i);if(!s.ok)throw new Error(`Failed to fetch metadata: ${s.status}`);return await s.json()}catch(s){return console.error("Error fetching NFT metadata:",s),null}};return p.useEffect(()=>{(async()=>{try{if(m(!0),c){l(c),m(!1);return}if(n&&e){const y=await e.readContract({address:f,abi:F,functionName:"tokenURI",args:[BigInt(n)]}),x=await h(y);x?.image&&l(x.image)}}catch(s){console.warn("Failed to load NFT image:",s)}finally{m(!1)}})()},[n,c,e]),!u&&!r?null:t.jsx(t.Fragment,{children:r?t.jsx("div",{className:a.entryNftImage,style:{backgroundColor:"#f3f4f6"},title:"Loading NFT artwork..."}):t.jsx("img",{src:u,alt:o||"NFT Artwork",className:a.entryNftImage,title:`NFT Artwork${o?`: ${o}`:""}`,onError:()=>l(null)})})},$=({blogs:n,basePath:c,titleClassName:o,showDate:u=!1,reverseOrder:l=!1,limit:r,showViewAllLink:m=!1})=>{let d=l?[...n].reverse():n;const f=r&&n.length>r;return r&&(d=d.slice(0,r)),t.jsxs("div",{className:a.container,children:[d.map((e,h)=>{const i=e.originalIndex!==void 0?e.originalIndex:l?n.length-1-h:h,s=`${c}/${i}`,y=e.publishing_date?new Date(e.publishing_date).toISOString().split("T")[0]:null;return t.jsxs("article",{className:"h-entry",children:[t.jsx(j,{href:s,className:a.entry,children:t.jsxs("div",{className:a.entryContent,children:[(e.tokenID||e.nftMetadata?.imageUrl)&&t.jsx("div",{className:"u-featured",children:t.jsx(v,{tokenId:e.tokenID,fallbackImageUrl:e.nftMetadata?.imageUrl,nftName:e.nftMetadata?.name})}),t.jsx("div",{className:e.description?a.entryTextCompact:a.entryText,children:t.jsxs("div",{className:a.entryTextContent,children:[u&&e.publishing_date&&t.jsx("div",{className:e.description?a.entryDateWithDescription:a.entryDate,children:t.jsx("time",{className:"dt-published",dateTime:y||void 0,children:e.publishing_date})}),t.jsx("h3",{className:`p-name ${a.entryTitle} ${o||""}`,children:e.title}),e.description&&t.jsx("div",{className:`p-summary ${a.entryDescription}`,children:e.description}),e.category&&t.jsx("span",{className:"p-category",style:{display:"none"},children:e.category}),e.secondaryCategory&&t.jsx("span",{className:"p-category",style:{display:"none"},children:e.secondaryCategory})]})})]})}),t.jsx("a",{rel:"author",className:"p-author h-card",href:N.url,style:{display:"none"},children:N.name}),t.jsx("a",{className:"u-url",href:`${N.url}${s}`,style:{display:"none"}}),t.jsx("a",{className:"u-bridgy-fed",href:"https://fed.brid.gy/",hidden:!0,style:{display:"none"}})]},i)}),f&&m&&t.jsx("div",{className:a.viewAllContainer,children:t.jsx(j,{href:c,children:"View all entries â†’"})})]})};export{$ as E};
