import{I as L,J as k,u as P,r as c,e as R,K as D,j as n,M as z}from"./chunk-DVUYG-jY.js";import{b as A,c as F,g as W,u as G,d as J}from"./chunk-CSICpu8r.js";class K extends L{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function q(r,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(r))throw new K({value:r});let[s,e="0"]=r.split(".");const l=s.startsWith("-");if(l&&(s=s.slice(1)),e=e.replace(/(0+)$/,""),t===0)Math.round(+`.${e}`)===1&&(s=`${BigInt(s)+1n}`),e="";else if(e.length>t){const[i,p,o]=[e.slice(0,t-1),e.slice(t-1,t),e.slice(t)],d=Math.round(+`${p}.${o}`);d>9?e=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):e=`${i}${d}`,e.length>t&&(e=e.slice(1),s=`${BigInt(s)+1n}`),e=e.slice(0,t)}else e=e.padEnd(t,"0");return BigInt(`${l?"-":""}${s}${e}`)}function H(r,t="wei"){return q(r,k[t])}function O(){const t=P().urlPathname,[s,e]=c.useState(t),[l,i]=c.useState(!1),[p,o]=c.useState(null),[d,x]=c.useState(!1),{isConnected:N}=R(),I=D(),v=H("0.0002"),{writeContract:E,isPending:C,data:b,error:u}=A(),{isLoading:B,isSuccess:f}=F({hash:b});c.useEffect(()=>{const T=(window.location.origin+t).replace(/\/+$/,"");e(T)},[t]);const g=W(),w=J(),$=I===g.id,{data:h,error:m,isPending:U,refetch:j}=G({...w,functionName:"getLikesForUrl",args:[s],chainId:g.id}),M=async()=>{if(o(null),!s){o("URL ist erforderlich");return}if(!$){o(`Bitte wechsle zum ${g.name} Netzwerk`);return}i(!0),E({...w,functionName:"donate",args:[s],value:v})};c.useEffect(()=>{f&&(i(!1),o(null),setTimeout(()=>{j()},2e3)),u&&(i(!1),o((u==null?void 0:u.message)||"Transaktion fehlgeschlagen"))},[f,u,j]);const S=p||(!$&&N?`Bitte wechsle zum ${g.name} Netzwerk`:null),a=z,y=()=>U?n.jsx("div",{className:a.readDisplay,children:"Loading..."}):m?n.jsxs("div",{className:a.readDisplay,children:["Error: ",m.shortMessage||m.message]}):n.jsx("div",{className:a.readDisplay,children:(h==null?void 0:h.toString())||"0"});return n.jsx("div",{className:a.container,children:n.jsxs("div",{className:a.buttonGroup,children:[n.jsxs("div",{className:a.tooltipContainer,children:[n.jsx("button",{onClick:M,disabled:!N||l||C||B,className:a.writeButton,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:l||C?"Processing...":f?"Supported!":"Support"}),d&&S&&n.jsx("div",{className:a.tooltip,children:S})]}),y()]})})}const Y=function({title:r}){return n.jsxs("div",{className:"TitleBar",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("h1",{children:r}),n.jsx(O,{})]})};export{Y as T};
