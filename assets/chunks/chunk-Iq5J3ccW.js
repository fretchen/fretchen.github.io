import{N as j,O as N,P as b,Q as w,R as v,T as A,U as S,V as C,r as h,X as E,j as e,w as n}from"./chunk-CNICcFgQ.js";import{A as _,r as I}from"./chunk-B8fZV6Qr.js";import{g as D,l as T}from"./chunk-CQlelhe4.js";async function q(t,{account:o=t.account,message:s}){if(!o)throw new _({docsPath:"/docs/actions/wallet/signMessage"});const i=j(o);if(i.signMessage)return i.signMessage({message:s});const r=typeof s=="string"?N(s):s.raw instanceof Uint8Array?b(s.raw):s.raw;return t.request({method:"personal_sign",params:[r,i.address]},{retryCount:0})}function k(t,o={}){return{async queryFn({queryKey:s}){const i=o.abi;if(!i)throw new Error("abi is required");const{functionName:r,scopeKey:u,...d}=s[1],m=(()=>{const l=s[1];if(l.address)return{address:l.address};if(l.code)return{code:l.code};throw new Error("address or code is required")})();if(!r)throw new Error("functionName is required");return I(t,{abi:i,functionName:r,args:d.args,...m,...d})},queryKey:F(o)}}function F(t={}){const{abi:o,...s}=t;return["readContract",w(s)]}function $(t={}){const{abi:o,address:s,functionName:i,query:r={}}=t,u=t.code,d=v(t),m=A({config:d}),l=k(d,{...t,chainId:t.chainId??m}),p=!!((s||u)&&o&&i&&(r.enabled??!0));return S({...r,...l,enabled:p,structuralSharing:r.structuralSharing??C})}const W=t=>{const o=t.split(":");return o.length===3?o[2]:null},z="/agent-registration.json",O={name:"",description:"",image:"",wallet:null,walletShort:null,genimgEndpoint:null,llmEndpoint:null,openApiUrl:null,supportedTrust:[],raw:null};function U(t={}){const{agentUrl:o=z,autoFetch:s=!0}=t,[i,r]=h.useState(O),[u,d]=h.useState(!1),[m,l]=h.useState(null),p=h.useCallback(async()=>{d(!0),l(null);try{const c=await fetch(o);if(!c.ok)throw new Error(`Failed to fetch agent registration: ${c.status}`);const a=await c.json(),f=a.endpoints.find(g=>g.name==="agentWallet")?.endpoint,x=f?W(f):null,y={name:a.name,description:a.description,image:a.image,wallet:x,walletShort:x?`${x.slice(0,6)}...${x.slice(-4)}`:null,genimgEndpoint:a.endpoints.find(g=>g.name==="genimg")?.endpoint||null,llmEndpoint:a.endpoints.find(g=>g.name==="llm")?.endpoint||null,openApiUrl:a.endpoints.find(g=>g.name==="OpenAPI")?.endpoint||null,supportedTrust:a.supportedTrust,raw:a};r(y)}catch(c){const a=c instanceof Error?c.message:"Unknown error fetching agent";l(a),console.error("Agent fetch error:",c)}finally{d(!1)}},[o]);return h.useEffect(()=>{s&&p()},[s,p]),{agent:i,isLoading:u,error:m,refetch:p}}function B({service:t="genimg",variant:o="footer"}){const[s,i]=h.useState(!1),{agent:r,isLoading:u,error:d}=U(),m=E({label:"imagegen.poweredBy"}),l=o==="sidebar";if(u)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.500",textAlign:l?"left":"center",mt:"2"}),children:[m," Optimism..."]});if(d||!r.wallet)return e.jsxs("div",{className:n({fontSize:"xs",color:"gray.600",textAlign:l?"left":"center",mt:"2"}),children:[m," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Optimism"})]});const p=t==="genimg"?r.genimgEndpoint:r.llmEndpoint,c=p?new URL(p).hostname:null,a=t==="genimg"?D.address:T.address;return l?e.jsxs("div",{className:n({fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"space-between",color:"gray.600",cursor:"pointer",_hover:{color:"gray.800"}}),onClick:()=>i(!s),children:[e.jsxs("span",{className:n({display:"flex",alignItems:"center",gap:"1"}),children:[e.jsx("span",{children:"ðŸ¤–"}),e.jsx("span",{className:n({fontFamily:"mono",color:"blue.600"}),children:r.walletShort})]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),s&&e.jsxs("div",{className:n({mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"20px",height:"20px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800",fontSize:"xs"}),children:r.name})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600",fontSize:"xs"}),children:[c&&e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Endpoint: "}),e.jsx("code",{className:n({fontFamily:"mono",color:"gray.700"}),children:c})]}),e.jsxs("div",{children:[e.jsx("span",{className:n({color:"gray.500"}),children:"Trust: "}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",flexDirection:"column",gap:"1",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),a&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${a}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontSize:"xs",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]}),e.jsx("a",{href:"/agent-onboarding/",className:n({display:"block",mt:"2",pt:"2",borderTop:"1px solid",borderColor:"gray.200",color:"brand",textDecoration:"none",fontSize:"xs",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ†• Become a provider"})]}):e.jsxs("div",{className:n({mt:"2",fontSize:"xs"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",justifyContent:"center",gap:"2",color:"gray.600"}),children:[e.jsxs("span",{className:n({cursor:"pointer",_hover:{color:"gray.800"},display:"inline-flex",alignItems:"center",gap:"2"}),onClick:()=>i(!s),children:[e.jsxs("span",{children:[m," Optimism"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{className:n({fontFamily:"mono",color:"blue.600",display:"inline-flex",alignItems:"center",gap:"1"}),title:`Agent: ${r.wallet}`,children:["ðŸ¤– ",r.walletShort]}),e.jsx("span",{className:n({color:"gray.400",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"}),children:"â–¼"})]}),e.jsx("span",{children:"â€¢"}),e.jsx("a",{href:"/agent-onboarding/",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"Add your agent â†’"})]}),s&&e.jsxs("div",{className:n({mt:"3",p:"3",bg:"gray.50",border:"1px solid",borderColor:"gray.200",borderRadius:"md",textAlign:"left"}),children:[e.jsxs("div",{className:n({display:"flex",alignItems:"center",gap:"2",mb:"2"}),children:[r.image&&e.jsx("img",{src:r.image,alt:r.name,className:n({width:"24px",height:"24px",borderRadius:"full",objectFit:"cover"})}),e.jsx("span",{className:n({fontWeight:"medium",color:"gray.800"}),children:r.name}),e.jsx("span",{className:n({ml:"auto",px:"2",py:"0.5",bg:"green.100",color:"green.700",borderRadius:"full",fontSize:"xs"}),children:"âœ“ Active"})]}),e.jsxs("div",{className:n({display:"grid",gap:"1",color:"gray.600"}),children:[e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Wallet:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700",wordBreak:"break-all"}),children:r.wallet})]}),c&&e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Endpoint:"}),e.jsx("code",{className:n({fontFamily:"mono",fontSize:"xs",color:"gray.700"}),children:c})]}),e.jsxs("div",{className:n({display:"flex",gap:"2"}),children:[e.jsx("span",{className:n({color:"gray.500",minWidth:"60px"}),children:"Trust:"}),e.jsx("span",{children:r.supportedTrust.join(", ")||"none"})]})]}),e.jsxs("div",{className:n({display:"flex",gap:"3",mt:"3",pt:"2",borderTop:"1px solid",borderColor:"gray.200"}),children:[e.jsx("a",{href:"/agent-registration.json",target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“„ EIP-8004 JSON"}),r.openApiUrl&&e.jsx("a",{href:r.openApiUrl,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“‹ OpenAPI Spec"}),a&&e.jsx("a",{href:`https://optimistic.etherscan.io/address/${a}`,target:"_blank",rel:"noopener noreferrer",className:n({color:"brand",textDecoration:"none",fontWeight:"medium",_hover:{textDecoration:"underline"}}),children:"ðŸ“œ Contract"})]})]})]})}export{B as A,q as s,$ as u};
