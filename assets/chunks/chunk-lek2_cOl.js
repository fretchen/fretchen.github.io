function A(n){return Array.from(new Set(n))}function $(n,e){const t=N();return t[n]=t[n]||e}function N(){const n="_vike";return globalThis[n]=globalThis[n]||{}}const d=new Proxy({},{get:(n,e)=>t=>e==="code"?`\`${t}\``:e==="string"?`'${t}'`:t}),x="0.4.229";let g;g??(g=R());function R(){return $("utils/assertSingleInstance.ts",{instances:[],alreadyLogged:new Set})}function w(){return g??(g=R()),g}const G="Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict",_="Client runtime loaded twice https://vike.dev/client-runtime-duplicated";function B(){const n=w();{const e=A(n.instances);b(e.length<=1,`vike@${d.bold(e[0])} and vike@${d.bold(e[1])} loaded which is highly discouraged, see ${d.underline("https://vike.dev/warning/version-mismatch")}`,{onlyOnce:!0,showStackTrace:!1})}n.checkSingleInstance&&n.instances.length>1&&b(!1,_,{onlyOnce:!0,showStackTrace:!0})}function ee(n){const e=w();b(e.isClientRouting!==!1,G,{onlyOnce:!0,showStackTrace:!0}),b(e.isClientRouting===void 0,_,{onlyOnce:!0,showStackTrace:!0}),e.isClientRouting=!0,e.checkSingleInstance=!0,B()}function U(){w().instances.push(x),B()}function b(n,e,{onlyOnce:t,showStackTrace:i}){const r=w();if(n)return;const o=`[Vike][Warning] ${e}`;{const{alreadyLogged:s}=r,a=o;if(s.has(a))return;s.add(a)}console.warn(i?new Error(o):o)}function V(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function v(n,e){const t=new Error(n);return V()&&(t.stack=H(t.stack,e)),t}function H(n,e){if(!n)return n;const t=J(n);let i=0;return t.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:i<e&&q(o)?(i++,!1):!0).join(`
`)}function q(n){return n.startsWith("    at ")}function J(n){return n.split(/\r?\n/)}function z(n){return typeof n=="object"&&n!==null}const c=$("utils/assert.ts",{alreadyLogged:new Set,logger(n,e){e==="info"?console.log(n):console.warn(n)},showStackTraceList:new WeakSet});U();const D="[vike]",F=`[vike@${x}]`,K="Bug",S=2;function ne(n,e){var s;if(n)return;const t=(()=>{if(!e)return null;const a=typeof e=="string"?e:JSON.stringify(e);return d.dim(`Debug info (for Vike maintainers; you can ignore this): ${a}`)})();let r=[`You stumbled upon a Vike bug. Go to ${d.underline("https://github.com/vikejs/vike/issues/new?template=bug.yml")} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,t].filter(Boolean).join(" ");r=k(r),r=T(r,K),r=p(r,!0);const o=v(r,S);throw(s=c.onBeforeLog)==null||s.call(c),o}function te(n,e,{showStackTrace:t,exitOnError:i}={}){var o;if(n)return;t=t||c.alwaysShowStackTrace,e=k(e),e=T(e,"Wrong Usage"),e=p(e);const r=v(e,S);if(t&&c.showStackTraceList.add(r),(o=c.onBeforeLog)==null||o.call(c),i)console.error(t?r:e),process.exit(1);else throw r}function Y(n){return n=k(n),n=T(n,"Error"),n=p(n),v(n,S)}function Q(n,e,{onlyOnce:t,showStackTrace:i}){var r;if(!n){if(i=i||c.alwaysShowStackTrace,e=k(e),e=T(e,"Warning"),e=p(e),t){const{alreadyLogged:o}=c,s=t===!0?e:t;if(o.has(s))return;o.add(s)}if((r=c.onBeforeLog)==null||r.call(c),i){const o=v(e,S);c.showStackTraceList.add(o),c.logger(o,"warn")}else c.logger(e,"warn")}}function oe(n,e,{onlyOnce:t}){var i;e=k(e),e=p(e);{const{alreadyLogged:r}=c,o=e;if(r.has(o))return;r.add(o)}(i=c.onBeforeLog)==null||i.call(c),c.logger(e,"info")}function T(n,e){let t=`[${e}]`;const i=e==="Warning"?"yellow":"red";return t=d.bold(d[i](t)),`${t}${n}`}function k(n){return n.startsWith("[")?n:` ${n}`}function p(n,e=!1){return`${e?F:D}${n}`}function L(n){const e=n/1e3;if(e<120){const t=C(e);return`${t} second${O(t)}`}{const t=e/60,i=C(t);return`${i} minute${O(i)}`}}function C(n){let e=n.toFixed(1);return e.endsWith(".0")&&(e=e.slice(0,-2)),e}function O(n){return n==="1"?"":"s"}const j=$("utils/executeHook.ts",{userHookErrors:new WeakMap,pageContext:null});function re(n,e,t){const{hookName:i,hookFilePath:r,hookTimeout:{error:o,warning:s}}=e;let a,l;const h=new Promise((f,I)=>{a=E=>{m(),f(E)},l=E=>{m(),I(E)}}),m=()=>{u&&clearTimeout(u),y&&clearTimeout(y)},u=P(s)&&setTimeout(()=>{Q(!1,`The ${i}() hook defined by ${r} is slow: it's taking more than ${L(s)} (https://vike.dev/hooksTimeout)`,{onlyOnce:!1})},s),y=P(o)&&setTimeout(()=>{const f=Y(`The ${i}() hook defined by ${r} timed out: it didn't finish after ${L(o)} (https://vike.dev/hooksTimeout)`);l(f)},o);return(async()=>{try{X(t);const f=await n();a(f)}catch(f){z(f)&&j.userHookErrors.set(f,{hookName:i,hookFilePath:r}),l(f)}})(),h}function P(n){return!!n&&n!==1/0}function X(n){j.pageContext=n,Promise.resolve().then(()=>{j.pageContext=null})}const Z="modulepreload",M=function(n){return"/"+n},W={},ie=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=M(l),l in W)return;W[l]=!0;const h=l.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":Z,h||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),h)return new Promise((y,f)=>{u.addEventListener("load",y),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};export{ie as _,d as a,te as b,Q as c,ne as d,re as e,Y as f,$ as g,oe as h,z as i,ee as j,X as p,A as u};
