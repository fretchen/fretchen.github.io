import{r as y,j as t,f as a,L as x,S as p}from"./chunk-D8AR0Meb.js";import{g as N}from"./chunk-DTLuFKxV.js";import{u as g}from"./chunk-CgvK8XUi.js";const T=({tokenId:n,fallbackImageUrl:c,nftName:d})=>{const[u,l]=y.useState(null),[r,o]=y.useState(!0),i=g(),f=async e=>{try{if(e.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",e),null;const s=await fetch(e);if(!s.ok)throw new Error(`Failed to fetch metadata: ${s.status}`);return await s.json()}catch(s){return console.error("Error fetching NFT metadata:",s),null}};return y.useEffect(()=>{(async()=>{try{if(o(!0),c){l(c),o(!1);return}if(n&&i){const m=await i.readContract({address:N.address,abi:N.abi,functionName:"tokenURI",args:[BigInt(n)]}),h=await f(m);h?.image&&l(h.image)}}catch(s){console.warn("Failed to load NFT image:",s)}finally{o(!1)}})()},[n,c,i]),!u&&!r?null:t.jsx(t.Fragment,{children:r?t.jsx("div",{className:a.entryNftImage,style:{backgroundColor:"#f3f4f6"},title:"Loading NFT artwork..."}):t.jsx("img",{src:u,alt:d||"NFT Artwork",className:a.entryNftImage,title:`NFT Artwork${d?`: ${d}`:""}`,onError:()=>l(null)})})},v=({blogs:n,basePath:c,titleClassName:d,showDate:u=!1,reverseOrder:l=!1,limit:r,showViewAllLink:o=!1})=>{let i=l?[...n].reverse():n;const f=r&&n.length>r;return r&&(i=i.slice(0,r)),t.jsxs("div",{className:a.container,children:[i.map((e,s)=>{const m=e.originalIndex!==void 0?e.originalIndex:l?n.length-1-s:s,h=`${c}/${m}`,j=e.publishing_date?new Date(e.publishing_date).toISOString().split("T")[0]:null;return t.jsxs("article",{className:"h-entry",children:[t.jsx(x,{href:h,className:a.entry,children:t.jsxs("div",{className:a.entryContent,children:[(e.tokenID||e.nftMetadata?.imageUrl)&&t.jsx("div",{className:"u-featured",children:t.jsx(T,{tokenId:e.tokenID,fallbackImageUrl:e.nftMetadata?.imageUrl,nftName:e.nftMetadata?.name})}),t.jsx("div",{className:e.description?a.entryTextCompact:a.entryText,children:t.jsxs("div",{className:a.entryTextContent,children:[u&&e.publishing_date&&t.jsx("div",{className:e.description?a.entryDateWithDescription:a.entryDate,children:t.jsx("time",{className:"dt-published",dateTime:j||void 0,children:e.publishing_date})}),t.jsx("h3",{className:`p-name ${a.entryTitle} ${d||""}`,children:e.title}),e.description&&t.jsx("div",{className:`p-summary ${a.entryDescription}`,children:e.description}),e.category&&t.jsx("span",{className:"p-category",style:{display:"none"},children:e.category}),e.secondaryCategory&&t.jsx("span",{className:"p-category",style:{display:"none"},children:e.secondaryCategory})]})})]})}),t.jsx("a",{rel:"author",className:"p-author h-card",href:p.url,style:{display:"none"},children:p.name}),t.jsx("a",{className:"u-url",href:`${p.url}${h}`,style:{display:"none"}}),t.jsx("a",{className:"u-bridgy-fed",href:"https://fed.brid.gy/",hidden:!0,style:{display:"none"}})]},m)}),f&&o&&t.jsx("div",{className:a.viewAllContainer,children:t.jsx(x,{href:c,children:"View all entries â†’"})})]})};export{v as E};
