function Q(e){return Array.from(new Set(e))}function v(e,n){const t=X();return t[e]??(t[e]=n)}function X(){var e;return globalThis._vike??(globalThis._vike={}),(e=globalThis._vike).globals??(e.globals={}),globalThis._vike.globals}const a=new Proxy({},{get:(e,n)=>t=>n==="code"?`\`${t}\``:n==="string"?`'${t}'`:t}),V="0.4.244";let y;y??(y=U());function U(){return v("utils/assertSingleInstance.ts",{instances:[],alreadyLogged:new Set})}function $(){return y??(y=U()),y}const Z="Client runtime of both Server Routing and Client Routing loaded https://vike.dev/client-runtimes-conflict",B="Client runtime loaded twice https://vike.dev/client-runtime-duplicated";function G(){const e=$();{const n=Q(e.instances);T(n.length<=1,`vike@${a.bold(n[0])} and vike@${a.bold(n[1])} loaded which is highly discouraged, see ${a.underline("https://vike.dev/warning/version-mismatch")}`,{onlyOnce:!0,showStackTrace:!1})}e.checkSingleInstance&&e.instances.length>1&&T(!1,B,{onlyOnce:!0,showStackTrace:!0})}function me(e){const n=$();T(n.isClientRouting!==!1,Z,{onlyOnce:!0,showStackTrace:!0}),T(n.isClientRouting===void 0,B,{onlyOnce:!0,showStackTrace:!0}),n.isClientRouting=!0,n.checkSingleInstance=!0,G()}function N(){$().instances.push(V),G()}function T(e,n,{onlyOnce:t,showStackTrace:r}){const o=$();if(e)return;const i=`[Vike][Warning] ${n}`;{const{alreadyLogged:s}=o,c=i;if(s.has(c))return;s.add(c)}console.warn(r?new Error(i):i)}function M(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function P(e,n){const t=new Error(e);return M()&&(t.stack=ee(t.stack,n)),t}function ee(e,n){if(!e)return e;const t=te(e);let r=0;return t.filter(i=>i.includes(" (internal/")||i.includes(" (node:internal")?!1:r<n&&ne(i)?(r++,!1):!0).join(`
`)}function ne(e){return e.startsWith("    at ")}function te(e){return e.split(/\r?\n/)}function L(e){return typeof e=="object"&&e!==null}const l=v("utils/assert.ts",{alreadyLogged:new Set,logger(e,n){n==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet});N();const oe="[vike]",re=`[vike@${V}]`,ie="Bug",S=2;function p(e,n){if(e)return;const t=(()=>{if(!n)return null;const s=typeof n=="string"?n:JSON.stringify(n);return a.dim(`Debug info for Vike maintainers (you can ignore this): ${s}`)})();let o=[`You stumbled upon a Vike bug. Go to ${a.underline("https://github.com/vikejs/vike/issues/new?template=bug.yml")} and copy-paste this error. A maintainer will fix the bug (usually within 24 hours).`,t].filter(Boolean).join(" ");o=w(o),o=j(o,ie),o=m(o,!0);const i=P(o,S);throw l.onBeforeLog?.(),i}function b(e,n,{showStackTrace:t,exitOnError:r}={}){if(e)return;t=t||l.alwaysShowStackTrace,n=w(n),n=j(n,"Wrong Usage"),n=m(n);const o=P(n,S);if(t&&l.showStackTraceList.add(o),l.onBeforeLog?.(),r)console.error(t?o:n),process.exit(1);else throw o}function se(e){return e=w(e),e=j(e,"Error"),e=m(e),P(e,S)}function ce(e,n,{onlyOnce:t,showStackTrace:r}){if(!e){if(r=r||l.alwaysShowStackTrace,n=w(n),n=j(n,"Warning"),n=m(n),t){const{alreadyLogged:o}=l,i=t===!0?n:t;if(o.has(i))return;o.add(i)}if(l.onBeforeLog?.(),r){const o=P(n,S);l.showStackTraceList.add(o),l.logger(o,"warn")}else l.logger(n,"warn")}}function Te(e,n,{onlyOnce:t}){n=w(n),n=m(n);{const{alreadyLogged:r}=l,o=n;if(r.has(o))return;r.add(o)}l.onBeforeLog?.(),l.logger(n,"info")}function j(e,n){let t=`[${n}]`;const r=n==="Warning"?"yellow":"red";return t=a.bold(a[r](t)),`${t}${e}`}function w(e){return e.startsWith("[")?e:` ${e}`}function m(e,n=!1){return`${n?re:oe}${e}`}function W(e){const n=e/1e3;if(n<120){const t=H(n);return`${t} second${R(t)}`}{const t=n/60,r=H(t);return`${r} minute${R(r)}`}}function H(e){let n=e.toFixed(1);return n.endsWith(".0")&&(n=n.slice(0,-2)),n}function R(e){return e==="1"?"":"s"}function ae(e){return e instanceof Function||typeof e=="function"}function I(e){return Array.isArray(e)}function ve(e,n){const t=n.find(r=>r.pageId===e);return n.length>0,t}function le(e){if(!e||I(e)||e.definedBy)return null;const{filePathToShowToUser:n}=e;return n}function D(e){return le(e)}const ue=v("hooks/getHook.ts",{});function $e(e,n){if(!(n in e.exports))return null;const{hooksTimeout:t}=e.config,r=q(t,n),o=e.exports[n];if(o===null)return null;const i=e.exportsAll[n][0];i.exportValue;const s=i.filePath;return x(o,n,s,r)}function fe(e,n){const{hooksTimeout:t}=n.config,r=q(t,e),o=[];return n.exportsAll[e]?.forEach(i=>{const s=i.exportValue;if(s===null)return;const c=i.filePath;o.push(x(s,e,c,r))}),o}function Pe(e,n){const t=e.configValues[n];if(!t?.value)return null;const{hookFn:r,hookFilePath:o}=ge(t),i=z(n);return x(r,n,o,i)}function de(e,n){const t=e.configValues[n];return t?.value?t.value.map((o,i)=>{const s=o,c=z(n);I(t.definedAtData);const g=D(t.definedAtData[i]);return x(s,n,g,c)}):[]}function z(e){return J(e)}function x(e,n,t,r){return he(e,{hookName:n,hookFilePath:t}),{hookFn:e,hookName:n,hookFilePath:t,hookTimeout:r}}function ge(e){const n=e.value,t=D(e.definedAtData);return{hookFn:n,hookFilePath:t}}function he(e,{hookName:n,hookFilePath:t}){n.endsWith(")"),t.endsWith(" "),b(ae(e),`Hook ${n}() defined by ${t} should be a function`)}function q(e,n){const t=ke(e);if(t===!1)return{error:!1,warning:!1};const r=t[n],o=J(n);return r?.error!==void 0&&(o.error=r.error),r?.warning!==void 0&&(o.warning=r.warning),o}function ke(e){if(e===void 0)return{};if(e===!1)return!1;b(L(e),`Setting ${a.cyan("hooksTimeout")} should be ${a.cyan("false")} or an object`);const n={};return Object.entries(e).forEach(([t,r])=>{if(r===!1){n[t]={error:!1,warning:!1};return}b(L(r),`Setting ${a.cyan(`hooksTimeout.${t}`)} should be ${a.cyan("false")} or an object`);const[o,i]=["error","warning"].map(s=>{const c=r[s];if(c===void 0||c===!1)return c;const g=`Setting ${a.cyan(`hooksTimeout.${t}.${s}`)} should be`;return b(typeof c=="number",`${g} ${a.cyan("false")} or a number`),b(c>0,`${g} a positive number`),c});n[t]={error:o,warning:i}}),n}function J(e){return e==="onBeforeRoute"?{error:5*1e3,warning:1*1e3}:ue.isPrerendering?{error:120*1e3,warning:30*1e3}:(e.toLowerCase().includes("prerender"),{error:30*1e3,warning:4*1e3})}const F=v("utils/execHook.ts",{userHookErrors:new WeakMap,pageContext:null});async function Se(e,n,t){const r=fe(e,n);return await Y(r,n,t)}async function je(e,n,t,r,o){const i=de(n,e),s=o(r);await Promise.all(i.map(async c=>{await K(()=>c.hookFn(s),c,t)}))}async function Y(e,n,t){if(!e.length)return[];const r=t(n);return await Promise.all(e.map(async i=>{const s=await K(()=>i.hookFn(r),i,r);return{...i,hookReturn:s}}))}async function xe(e,n,t){const r=await Y([e],n,t),{hookReturn:o}=r[0];b(o===void 0,`The ${e.hookName}() hook defined by ${e.hookFilePath} isn't allowed to return a value`)}function K(e,n,t){const{hookName:r,hookFilePath:o,hookTimeout:{error:i,warning:s}}=n;let c,g;const u=new Promise((d,C)=>{c=E=>{h(),d(E)},g=E=>{h(),C(E)}}),h=()=>{k&&clearTimeout(k),f&&clearTimeout(f)},k=_(s)&&setTimeout(()=>{ce(!1,`The ${r}() hook defined by ${o} is slow: it's taking more than ${W(s)} (https://vike.dev/hooksTimeout)`,{onlyOnce:!1})},s),f=_(i)&&setTimeout(()=>{const d=se(`The ${r}() hook defined by ${o} timed out: it didn't finish after ${W(i)} (https://vike.dev/hooksTimeout)`);g(d)},i);return(async()=>{try{O(t);const d=await e();c(d)}catch(d){L(d)&&F.userHookErrors.set(d,{hookName:r,hookFilePath:o}),g(d)}})(),u}function Ce(e,n,t){const r=t(n);return O(r),{hookReturn:e.hookFn(r)}}function _(e){return!!e&&e!==1/0}function Ee(e){O(e)}function O(e){F.pageContext=e,Promise.resolve().then(()=>{F.pageContext=null})}const be=["en","de"],pe="en",ye="modulepreload",we=function(e){return"/"+e},A={},Le=function(n,t,r){let o=Promise.resolve();if(t&&t.length>0){let g=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");o=g(t.map(u=>{if(u=we(u),u in A)return;A[u]=!0;const h=u.endsWith(".css"),k=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${k}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":ye,h||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),h)return new Promise((d,C)=>{f.addEventListener("load",d),f.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&i(c.reason);return n().catch(i)})};function Fe(e){const[n]=e.split("?"),t=n.split("/");let r,o;const i=t[1];return be.includes(i)?(r=i,o="/"+t.slice(2).join("/"),o==="/"&&(o="/")):(r=pe,o=n),(o==="//"||o==="")&&(o="/"),o!=="/"&&!o.endsWith("/")&&(o=o+"/"),{locale:r,urlPathnameWithoutLocale:o}}export{Ee as A,Le as _,p as a,b,L as c,pe as d,ae as e,ce as f,v as g,$e as h,I as i,xe as j,J as k,se as l,ve as m,Se as n,le as o,a as p,de as q,je as r,Ce as s,Pe as t,Q as u,Te as v,fe as w,Y as x,Fe as y,me as z};
