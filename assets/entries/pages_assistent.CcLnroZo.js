import{X as z,Y as k,Z as D,_ as M,$ as R,a0 as L,r as h,a1 as _,j as t,f as T,a2 as b,a3 as B,F,i as W,W as N,a as q,d as H,e as O,o as I}from"../chunks/chunk-CtTzrfVU.js";import{A as $,g as K,a as V,u as Y,b as J,c as X}from"../chunks/chunk-DRgEv4WX.js";import{p as Z}from"../chunks/chunk-DXE_3V0h.js";import"../chunks/chunk-ETYCELfk.js";/* empty css                      *//* empty css                      *//* empty css                      */async function G(a,{account:o=a.account,message:e}){if(!o)throw new $({docsPath:"/docs/actions/wallet/signMessage"});const i=z(o);if(i.signMessage)return i.signMessage({message:e});const n=typeof e=="string"?k(e):e.raw instanceof Uint8Array?D(e.raw):e.raw;return a.request({method:"personal_sign",params:[n,i.address]},{retryCount:0})}async function Q(a,o){const{account:e,connector:i,...n}=o;let s;return typeof e=="object"&&e.type==="local"?s=a.getClient():s=await K(a,{account:e,connector:i}),M(s,G,"signMessage")({...n,...e?{account:e}:{}})}function ee(a){return{mutationFn(o){return Q(a,o)},mutationKey:["signMessage"]}}function te(a={}){const{mutation:o}=a,e=R(a),i=ee(e),{mutate:n,mutateAsync:s,...d}=L({...o,...i});return{...d,signMessage:n,signMessageAsync:s}}function ae({address:a,onRefetchBalance:o}){const e=V(),{data:i,refetch:n,error:s}=Y({address:e.address,abi:e.abi,functionName:"checkBalance",args:a?[a]:void 0,query:{enabled:!!a}}),{writeContract:d,data:g}=J(),{isLoading:l,isSuccess:y}=X({hash:g}),c=()=>{a&&d({address:e.address,abi:e.abi,functionName:"depositForLLM",value:Z("0.01")})};return b.useEffect(()=>{y&&n()},[y,n]),b.useEffect(()=>{o&&o(n)},[n,o]),a?t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[t.jsxs("span",{children:["Balance: ",i?B(i):"0"," ETH"]}),t.jsx("button",{onClick:c,disabled:l,style:{padding:"0.25rem 0.5rem",background:l?"#ccc":"#4CAF50",color:"white",border:"none",borderRadius:"3px",cursor:l?"not-allowed":"pointer",fontSize:"0.8rem"},title:l?"Transaction pending...":"Top up with 0.01 ETH",children:l?"...":"+"})]}):null}function re(){const[a,o]=h.useState([]),[e,i]=h.useState(""),[n,s]=h.useState(!1),[d,g]=h.useState(null),[l,y]=h.useState(null),{address:c,isConnected:v}=_(),{signMessageAsync:C}=te(),j=r=>{y(()=>r)},A=async()=>{if(!c||!v)throw new Error("Wallet not connected");if(d)return d;const r=`Authenticate wallet: ${c}`,u=await C({message:r});return g(u),u},w=async r=>{if(!r.trim()||n)return;s(!0);const u={role:"user",content:r.trim(),timestamp:Date.now()};o(p=>[...p,u]),i("");try{const p=await A(),m=[{role:"system",content:"You are a helpful assistant."},...a.map(f=>({role:f.role,content:f.content})),{role:"user",content:r.trim()}],x=await fetch("https://mypersonaljscloudivnad9dy-llm.functions.fnc.fr-par.scw.cloud",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({auth:{address:c,signature:p,message:`Authenticate wallet: ${c}`},data:{prompt:m}})});if(!x.ok){const f=await x.json();throw new Error(f.error||"Failed to get response")}const U={role:"assistant",content:(await x.json()).content||"No response received",timestamp:Date.now()};o(f=>[...f,U]),l&&l()}catch(p){const m={role:"assistant",content:`Error: ${p instanceof Error?p.message:"Unknown error"}`,timestamp:Date.now()};o(S=>[...S,m])}finally{s(!1)}},P=()=>{o([]),g(null)},E=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),w(e))};return v?t.jsx("div",{className:T,children:t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",height:"80vh",display:"flex",flexDirection:"column",gap:"1rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 0"},children:[t.jsx("h2",{children:"Chat Assistant"}),t.jsx(ae,{address:c,onRefetchBalance:j}),t.jsx("button",{onClick:P,style:{padding:"0.5rem 1rem",background:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear Chat"})]}),t.jsxs("div",{style:{flex:1,overflow:"auto",border:"1px solid #ddd",borderRadius:"8px",padding:"1rem",backgroundColor:"#f9f9f9"},children:[a.length===0?t.jsx("div",{style:{textAlign:"center",color:"#666",padding:"2rem"},children:"Start a conversation by typing a message below."}):a.map((r,u)=>t.jsxs("div",{style:{margin:"1rem 0",padding:"0.75rem",borderRadius:"8px",backgroundColor:r.role==="user"?"#e3f2fd":"#f1f8e9",marginLeft:r.role==="user"?"20%":"0",marginRight:r.role==="assistant"?"20%":"0"},children:[t.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem",color:r.role==="user"?"#1976d2":"#388e3c"},children:r.role==="user"?"You":"Assistant"}),t.jsx("div",{style:{whiteSpace:"pre-wrap"},children:r.content})]},u)),n&&t.jsx("div",{style:{margin:"1rem 0",padding:"0.75rem",borderRadius:"8px",backgroundColor:"#f1f8e9",marginRight:"20%",fontStyle:"italic",color:"#666"},children:"Assistant is typing..."})]}),t.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"1rem 0"},children:[t.jsx("textarea",{value:e,onChange:r=>i(r.target.value),onKeyPress:E,placeholder:"Type your message here...",disabled:n,style:{flex:1,padding:"0.75rem",border:"1px solid #ddd",borderRadius:"4px",resize:"vertical",minHeight:"60px",maxHeight:"120px"}}),t.jsx("button",{onClick:()=>w(e),disabled:n||!e.trim(),style:{padding:"0.75rem 1.5rem",background:n||!e.trim()?"#ccc":"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:n||!e.trim()?"not-allowed":"pointer",whiteSpace:"nowrap"},children:n?"Sending...":"Send"})]})]})}):t.jsx("div",{className:T,children:t.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[t.jsx("h2",{children:"Chat Assistant"}),t.jsx("p",{children:"Please connect your wallet to use the chat assistant."})]})})}const ne=Object.freeze(Object.defineProperty({__proto__:null,default:re},Symbol.toStringTag,{value:"Module"})),fe={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:I}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:O}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:H}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/assistent/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ne}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:q}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Notes by fretchen"}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:N}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:W}},queryClientConfig:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/config",fileExportPathToShowToUser:["default","queryClientConfig"]},valueSerialized:{type:"js-serialized",value:"!undefined"}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:F}}};export{fe as configValuesSerialized};
