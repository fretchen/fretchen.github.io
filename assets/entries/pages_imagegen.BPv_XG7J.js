const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-D3rRqBRs.js","assets/chunks/chunk-DspFOiA9.js","assets/chunks/chunk-t-pXVLBL.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.x05mXv0T.css"])))=>i.map(i=>d[i]);
import{bi as te,bj as na,bk as sa,b8 as ra,n as qe,M as ae,bl as oa,B as de,bm as ia,bn as Ie,bo as Me,bp as ca,bq as la,br as Oe,b4 as ee,X as da,s as ua,bs as ma,bt as ga,b3 as Ye,b5 as Je,b6 as ha,b7 as pa,bu as fa,P as ya,Q as wa,bv as ba,a6 as re,R as xa,r as g,T as Ta,w as b,j as a,u as va,bw as Ca,bx as Sa,by as Na,a4 as ka,a7 as Ia,V as f,aB as Ce,bz as G,bA as S,bB as ue,bC as ja,bD as Pa,bE as Z,bF as je,a3 as We,bG as X,v as Ea,F as Aa,a as La,W as Ra,c as Fa,d as _a,e as za,o as Da}from"../chunks/chunk-DspFOiA9.js";import{c as Ze,b as Se,f as Ua,o as $a,h as Ba,r as qa,w as Ma,p as et,d as Oa,s as Wa,i as Ga,u as ie,j as me,k as Ha,l as Qa,G as ge,g as he,C as Ka,m as Ge,n as Va}from"../chunks/chunk-DxyLn1b5.js";import{d as Xa,_ as He}from"../chunks/chunk-t-pXVLBL.js";import{s as Le,A as pe,b as tt,c as ve,w as at,g as Ya,r as Pe,u as Ee,a as Ae}from"../chunks/chunk-CDsUcDsD.js";import{i as Ja}from"../chunks/chunk-BaJCPTDY.js";import{s as nt,g as Za,v as en,a as tn,G as Y,u as st}from"../chunks/chunk-BBYtPJhw.js";import{s as an,A as nn,u as Re}from"../chunks/chunk-BjIWW_s6.js";import{u as rt}from"../chunks/chunk-Bi1EWCrB.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-DDGh_URF.js";async function sn(e,{chain:t}){const{id:n,name:s,nativeCurrency:o,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:te(n),chainName:s,nativeCurrency:o,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:l})=>l):void 0}]},{dedupe:!0,retryCount:0})}function rn(e,t){const{abi:n,args:s,bytecode:o,...r}=t,i=na({abi:n,args:s,bytecode:o});return Le(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function on(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>sa(n))}const ot="0x5792579257925792579257925792579257925792579257925792579257925792",it=te(0,{size:32});async function ct(e,t){const{account:n=e.account,capabilities:s,chain:o=e.chain,experimental_fallback:r,experimental_fallbackDelay:i=32,forceAtomic:l=!1,id:m,version:p="2.0.0"}=t,c=n?ae(n):null,w=t.calls.map(y=>{const d=y,v=d.abi?ra({abi:d.abi,functionName:d.functionName,args:d.args}):d.data;return{data:d.dataSuffix&&v?qe([v,d.dataSuffix]):v,to:d.to,value:d.value?te(d.value):void 0}});try{const y=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:l,calls:w,capabilities:s,chainId:te(o.id),from:c?.address,id:m,version:p}]},{retryCount:0});return typeof y=="string"?{id:y}:y}catch(y){const d=y;if(r&&(d.name==="MethodNotFoundRpcError"||d.name==="MethodNotSupportedRpcError"||d.name==="UnknownRpcError"||d.details.toLowerCase().includes("does not exist / is not available")||d.details.toLowerCase().includes("missing or invalid. request()")||d.details.toLowerCase().includes("did not match any variant of untagged enum")||d.details.toLowerCase().includes("account upgraded to unsupported contract")||d.details.toLowerCase().includes("eip-7702 not supported")||d.details.toLowerCase().includes("unsupported wc_ method")||d.details.toLowerCase().includes("feature toggled misconfigured")||d.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(s&&Object.values(s).some(I=>!I.optional)){const I="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new oa(new de(I,{details:I}))}if(l&&w.length>1){const h="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new ia(new de(h,{details:h}))}const v=[];for(const h of w){const I=Le(e,{account:c,chain:o,data:h.data,to:h.to,value:h.value?Ie(h.value):void 0});v.push(I),i>0&&await new Promise(_=>setTimeout(_,i))}const C=await Promise.allSettled(v);if(C.every(h=>h.status==="rejected"))throw C[0].reason;const u=C.map(h=>h.status==="fulfilled"?h.value:it);return{id:qe([...u,te(o.id,{size:32}),ot])}}throw Ze(y,{...t,account:c,chain:t.chain})}}async function lt(e,t){async function n(c){if(c.endsWith(ot.slice(2))){const y=la(Oe(c,-64,-32)),d=Oe(c,0,-64).slice(2).match(/.{1,64}/g),v=await Promise.all(d.map(u=>it.slice(2)!==u?e.request({method:"eth_getTransactionReceipt",params:[`0x${u}`]},{dedupe:!0}):void 0)),C=v.some(u=>u===null)?100:v.every(u=>u?.status==="0x1")?200:v.every(u=>u?.status==="0x0")?500:600;return{atomic:!1,chainId:Me(y),receipts:v.filter(Boolean),status:C,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[c]})}const{atomic:s=!1,chainId:o,receipts:r,version:i="2.0.0",...l}=await n(t.id),[m,p]=(()=>{const c=l.status;return c>=100&&c<200?["pending",c]:c>=200&&c<300?["success",c]:c>=300&&c<700?["failure",c]:c==="CONFIRMED"?["success",200]:c==="PENDING"?["pending",100]:[void 0,c]})();return{...l,atomic:s,chainId:o?Me(o):void 0,receipts:r?.map(c=>({...c,blockNumber:Ie(c.blockNumber),gasUsed:Ie(c.gasUsed),status:ca[c.status]}))??[],statusCode:p,status:m,version:i}}async function cn(e,t={}){const{account:n=e.account,chainId:s}=t,o=n?ae(n):void 0,r=s?[o?.address,[te(s)]]:[o?.address],i=await e.request({method:"wallet_getCapabilities",params:r}),l={};for(const[m,p]of Object.entries(i)){l[Number(m)]={};for(let[c,w]of Object.entries(p))c==="addSubAccount"&&(c="unstable_addSubAccount"),l[Number(m)][c]=w}return typeof s=="number"?l[s]:l}async function ln(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function dt(e,t){const{account:n=e.account,chainId:s,nonce:o}=t;if(!n)throw new pe({docsPath:"/docs/eip7702/prepareAuthorization"});const r=ae(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:ae(t.executor)})(),l={address:t.contractAddress??t.address,chainId:s,nonce:o};return typeof l.chainId>"u"&&(l.chainId=e.chain?.id??await ee(e,Se,"getChainId")({})),typeof l.nonce>"u"&&(l.nonce=await ee(e,Ua,"getTransactionCount")({address:r.address,blockTag:"pending"}),(i==="self"||i?.address&&Ja(i.address,r.address))&&(l.nonce+=1)),l}async function dn(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>da(n))}async function un(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}class mn extends de{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function ut(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:o=({statusCode:C})=>C===200||C>=300,retryCount:r=4,retryDelay:i=({count:C})=>~~(1<<C)*200,timeout:l=6e4,throwOnFailure:m=!1}=t,p=ua(["waitForCallsStatus",e.uid,n]),{promise:c,resolve:w,reject:y}=ma();let d;const v=$a(p,{resolve:w,reject:y},C=>{const u=Ba(async()=>{const h=I=>{clearTimeout(d),u(),I(),v()};try{const I=await ga(async()=>{const _=await ee(e,lt,"getCallsStatus")({id:n});if(m&&_.status==="failure")throw new mn(_);return _},{retryCount:r,delay:i});if(!o(I))return;h(()=>C.resolve(I))}catch(I){h(()=>C.reject(I))}},{interval:s,emitOnBegin:!0});return u});return d=l?setTimeout(()=>{v(),clearTimeout(d),y(new gn({id:n}))},l):void 0,await c}class gn extends de{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function hn(e,t){const{chain:n=e.chain}=t,s=t.timeout??Math.max((n?.blockTime??0)*3,5e3),o=await ct(e,t);return await ut(e,{...t,id:o.id,timeout:s})}const ke=new pa(128);async function mt(e,t){const{account:n=e.account,chain:s=e.chain,accessList:o,authorizationList:r,blobs:i,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:w,maxPriorityFeePerGas:y,nonce:d,pollingInterval:v,throwOnReceiptRevert:C,type:u,value:h,...I}=t,_=t.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new pe({docsPath:"/docs/actions/wallet/sendTransactionSync"});const E=n?ae(n):null;try{Ye(t);const j=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await qa({authorization:r[0]}).catch(()=>{throw new de("`to` is required. Could not infer from `authorizationList`.")})})();if(E?.type==="json-rpc"||E===null){let P;s!==null&&(P=await ee(e,Se,"getChainId")({}),tt({currentChainId:P,chain:s}));const U=e.chain?.formatters?.transactionRequest?.format,T=(U||Je)({...ha(I,{format:U}),accessList:o,account:E,authorizationList:r,blobs:i,chainId:P,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:w,maxPriorityFeePerGas:y,nonce:d,to:j,type:u,value:h},"sendTransaction"),F=ke.get(e.uid),z=F?"wallet_sendTransaction":"eth_sendTransaction",O=await(async()=>{try{return await e.request({method:z,params:[T]},{retryCount:0})}catch(L){if(F===!1)throw L;const $=L;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[T]},{retryCount:0}).then(B=>(ke.set(e.uid,!0),B)).catch(B=>{const M=B;throw M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError"?(ke.set(e.uid,!1),$):M});throw $}})(),D=await ee(e,Ma,"waitForTransactionReceipt")({checkReplacement:!1,hash:O,pollingInterval:v,timeout:_});if(C&&D.status==="reverted")throw new fa({receipt:D});return D}if(E?.type==="local"){const P=await ee(e,et,"prepareTransactionRequest")({account:E,accessList:o,authorizationList:r,blobs:i,chain:s,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:w,maxPriorityFeePerGas:y,nonce:d,nonceManager:E.nonceManager,parameters:[...Oa,"sidecars"],type:u,value:h,...I,to:j}),U=s?.serializers?.transaction,A=await E.signTransaction(P,{serializer:U});return await ee(e,nt,"sendRawTransactionSync")({serializedTransaction:A,throwOnReceiptRevert:C})}throw E?.type==="smart"?new ve({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ve({docsPath:"/docs/actions/wallet/sendTransactionSync",type:E?.type})}catch(j){throw j instanceof ve?j:Ze(j,{...t,account:E,chain:t.chain||void 0})}}async function pn(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function fn(e,t){const{account:n=e.account}=t;if(!n)throw new pe({docsPath:"/docs/eip7702/signAuthorization"});const s=ae(n);if(!s.signAuthorization)throw new ve({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const o=await dt(e,t);return s.signAuthorization(o)}async function yn(e,t){const{account:n=e.account,chain:s=e.chain,...o}=t;if(!n)throw new pe({docsPath:"/docs/actions/wallet/signTransaction"});const r=ae(n);Ye({account:r,...t});const i=await ee(e,Se,"getChainId")({});s!==null&&tt({currentChainId:i,chain:s});const m=(s?.formatters||e.chain?.formatters)?.transactionRequest?.format||Je;return r.signTransaction?r.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...m({...o,account:r},"signTransaction"),chainId:te(i),from:r.address}]},{retryCount:0})}async function wn(e,t){const{account:n=e.account,domain:s,message:o,primaryType:r}=t;if(!n)throw new pe({docsPath:"/docs/actions/wallet/signTypedData"});const i=ae(n),l={EIP712Domain:Za({domain:s}),...t.types};if(en({domain:s,message:o,primaryType:r,types:l}),i.signTypedData)return i.signTypedData({domain:s,message:o,primaryType:r,types:l});const m=tn({domain:s,message:o,primaryType:r,types:l});return e.request({method:"eth_signTypedData_v4",params:[i.address,m]},{retryCount:0})}async function bn(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:te(t)}]},{retryCount:0})}async function xn(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function Tn(e,t){return at.internal(e,mt,"sendTransactionSync",t)}function vn(e){return{addChain:t=>sn(e,t),deployContract:t=>rn(e,t),fillTransaction:t=>Ga(e,t),getAddresses:()=>on(e),getCallsStatus:t=>lt(e,t),getCapabilities:t=>cn(e,t),getChainId:()=>Se(e),getPermissions:()=>ln(e),prepareAuthorization:t=>dt(e,t),prepareTransactionRequest:t=>et(e,t),requestAddresses:()=>dn(e),requestPermissions:t=>un(e,t),sendCalls:t=>ct(e,t),sendCallsSync:t=>hn(e,t),sendRawTransaction:t=>Wa(e,t),sendRawTransactionSync:t=>nt(e,t),sendTransaction:t=>Le(e,t),sendTransactionSync:t=>mt(e,t),showCallsStatus:t=>pn(e,t),signAuthorization:t=>fn(e,t),signMessage:t=>an(e,t),signTransaction:t=>yn(e,t),signTypedData:t=>wn(e,t),switchChain:t=>bn(e,t),waitForCallsStatus:t=>ut(e,t),watchAsset:t=>xn(e,t),writeContract:t=>at(e,t),writeContractSync:t=>Tn(e,t)}}async function Cn(e,t={}){return(await Ya(e,t)).extend(vn)}function Sn(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:s}=t,{connectorUid:o,scopeKey:r,...i}=n[1];return Cn(e,{...i,connector:s})},queryKey:Nn(t)}}function Nn(e={}){const{connector:t,...n}=e;return["walletClient",{...ya(n),connectorUid:t?.uid}]}function kn(e={}){const{query:t={},...n}=e,s=wa(n),o=ba(),{address:r,connector:i,status:l}=re({config:s}),m=xa({config:s}),p=e.connector??i,{queryKey:c,...w}=Sn(s,{...e,chainId:e.chainId??m,connector:e.connector??i}),y=!!((l==="connected"||l==="reconnecting"&&p?.getProvider)&&(t.enabled??!0)),d=g.useRef(r);return g.useEffect(()=>{const v=d.current;!r&&v?(o.removeQueries({queryKey:c}),d.current=void 0):r!==v&&(o.invalidateQueries({queryKey:c}),d.current=r)},[r,o]),Ta({...t,...w,queryKey:c,enabled:y,staleTime:Number.POSITIVE_INFINITY})}const Qe=[{name:"getMintStats",type:"function",stateMutability:"view",inputs:[{name:"genImTokenId",type:"uint256"}],outputs:[{name:"mintCount",type:"uint256"},{name:"currentPrice",type:"uint256"},{name:"nextPrice",type:"uint256"}]},{name:"mintCollectorNFT",type:"function",stateMutability:"payable",inputs:[{name:"genImTokenId",type:"uint256"}],outputs:[{name:"",type:"uint256"}]}];function Ke({size:e="sm",className:t}){const n={xs:b({fontSize:"xs",lineHeight:"1"}),sm:b({fontSize:"sm",lineHeight:"1"}),md:b({fontSize:"md",lineHeight:"1"})},s=b({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return a.jsx("span",{className:`${s} ${n[e]} ${t||""}`,role:"img","aria-label":"Information",children:"i"})}function Ve({label:e,locale:t}){const s=va(),o=t??s.locale??Xa,i=Ca(o==="de"?Sa:Na,e);return a.jsx("span",{"data-locale":o,children:i})}const In="https://mypersonaljscloudivnad9dy-genimgx402token.functions.fnc.fr-par.scw.cloud";function jn(){const{data:e}=kn(),{isConnected:t}=re(),[n,s]=g.useState("idle"),[o,r]=g.useState(null),[i,l]=g.useState(null),m=t&&!!e,p=g.useCallback(async w=>{if(!e)throw new Error("Wallet not connected");s("awaiting-signature"),r(null),l(null);try{const{x402Client:y,wrapFetchWithPayment:d,x402HTTPClient:v}=await He(async()=>{const{x402Client:A,wrapFetchWithPayment:T,x402HTTPClient:F}=await import("../chunks/chunk-6bqGUo_L.js");return{x402Client:A,wrapFetchWithPayment:T,x402HTTPClient:F}},[]),{registerExactEvmScheme:C}=await He(async()=>{const{registerExactEvmScheme:A}=await import("../chunks/chunk-D3rRqBRs.js");return{registerExactEvmScheme:A}},__vite__mapDeps([0,1,2,3,4])),u={address:e.account.address,signTypedData:e.signTypedData.bind(e)},h=new y;C(h,{signer:u});const{expectedChainId:I,..._}=w,P=await d(async(A,T)=>{const F=await fetch(A,T);if(F.status===402&&I){const z=F.headers.get("Payment-Required");if(z)try{const D=JSON.parse(atob(z)).accepts?.[0]?.network,L=`eip155:${I}`;if(D&&D!==L)throw new Error(`Chain mismatch! Expected ${L} but server requires ${D}. This could indicate a configuration error.`)}catch(O){if(O instanceof Error&&O.message.includes("Chain mismatch"))throw O}}return F},h)(In,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(s("processing"),!P.ok){const A=await P.text();throw new Error(`Request failed: ${P.status} - ${A}`)}const U=await P.json();try{const T=new v(h).getPaymentSettleResponse(F=>P.headers.get(F));T&&l({transaction:T.transaction,network:T.network})}catch{}return s("success"),U}catch(y){const d=y instanceof Error?y.message:"Unknown error";throw r(d),s("error"),y}},[e]),c=g.useCallback(()=>{s("idle"),r(null),l(null)},[]);return{generateImage:p,status:n,error:o,paymentReceipt:i,reset:c,isReady:m}}const Pn=(e,t,n=1920)=>{const s=e/t;return e<=n&&t<=n?{width:e,height:t}:e>t?{width:n,height:Math.round(n/s)}:{width:Math.round(n*s),height:n}},En=(e,t=1024)=>new Promise((n,s)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{const{width:l,height:m}=Pn(i.width,i.height);if(o.width=l,o.height=m,!r){s(new Error("Could not get canvas context"));return}r.fillStyle="white",r.fillRect(0,0,l,m),r.drawImage(i,0,0,l,m);let p=.9;const c=()=>{const w=o.toDataURL("image/jpeg",p);w.length*.75/1024<=t||p<=.1?n({base64:w.split(",")[1],mimeType:"image/jpeg"}):(p-=.1,setTimeout(c,0))};c()},i.onerror=()=>s(new Error("Failed to load image")),i.src=URL.createObjectURL(e)});function An({onSuccess:e,onError:t}){const{trackEvent:n}=ka(),{generateImage:s,status:o,error:r,paymentReceipt:i,reset:l}=jn(),[m,p]=g.useState(),[c,w]=g.useState(),[y,d]=g.useState(!1);g.useEffect(()=>{d(!0)},[]);const[v,C]=g.useState(),[u,h]=g.useState(null),[I,_]=g.useState("image/jpeg"),{address:E,isConnected:j}=re(),{connectors:P,connect:U}=Ia(),A=y&&j,{network:T,switchIfNeeded:F}=ie(ge),z=me(T),O=Ha(T),D=Qa(T),[L,$]=g.useState("empty"),[B,M]=g.useState(""),[J,H]=g.useState("1024x1024"),[oe,fe]=g.useState(!1),[ne,se]=g.useState(!1),[ye,W]=g.useState(null),k=()=>{P.length>0&&U({connector:P[0]})},R=f({label:"imagegen.connectWalletButton"}),q=f({label:"imagegen.enterPrompt"}),Q=f({label:"imagegen.generating"}),ce=f({label:"imagegen.createArtwork"}),we=f({label:"imagegen.promptPlaceholder"}),K=f({label:"imagegen.editPromptPlaceholder"}),Fe=f({label:"imagegen.editImage"}),pt=f({label:"imagegen.connectAccountFirst"}),ft=f({label:"imagegen.enterPromptError"}),yt=f({label:"imagegen.unknownError"}),wt=f({label:"imagegen.chainSwitchFailed"}),_e=f({label:"imagegen.awaitingSignature"}),bt=f({label:"imagegen.processingPayment"}),xt=f({label:"imagegen.uploadReferenceImage"}),Tt=f({label:"imagegen.dragDropHere"}),vt=f({label:"imagegen.supportedFormats"}),Ct=f({label:"imagegen.referenceImageTitle"}),St=f({label:"imagegen.generatedArtworkTitle"}),ze=f({label:"imagegen.remove"}),Nt=f({label:"imagegen.referenceImageAlt"}),kt=f({label:"imagegen.generatedArtworkAlt"}),It=f({label:"imagegen.referenceImageHint"}),jt=f({label:"imagegen.invalidFileType"}),Pt=f({label:"imagegen.fileTooLarge"}),Et=f({label:"imagegen.compressionFailed"}),At=f({label:"imagegen.failedToProcessImage"}),Lt=f({label:"imagegen.generatingImage"}),Rt=f({label:"imagegen.title"}),Ft=f({label:"imagegen.collapsedTitle"}),_t=f({label:"imagegen.collapsedDescription"}),zt=f({label:"imagegen.square"}),Dt=f({label:"imagegen.wide"}),Ut=f({label:"imagegen.mintingInfo"}),$t=f({label:"imagegen.artworkCreated"}),Bt=f({label:"imagegen.checkGallery"}),qt=()=>ne||o==="awaiting-signature"||o==="processing"?"loading":B.trim()?"ready":"needsPrompt",De=x=>{switch(x){case"loading":return o==="awaiting-signature"?_e:o==="processing"?bt:Q;case"connect":return R;case"needsPrompt":return q;case"ready":return L!=="empty"?Fe:ce;default:return L!=="empty"?Fe:ce}},be=qt(),Mt=()=>{const x=be==="loading",N=be==="needsPrompt"||x,V=()=>{n("imagegen-create-artwork-click",{hasReferenceImage:L!=="empty",promptLength:B.trim().length,isConnected:j,imageSize:J,paymentMethod:"x402-usdc"}),Ot()};return a.jsx("button",{onClick:V,disabled:N,className:`${Ce} ${N?Pa:""}`,title:f({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ue}),De(be)]}):a.jsxs(a.Fragment,{children:["ðŸŽ¨ ",De(be),a.jsx(Ke,{size:"xs",className:b({ml:"1",opacity:"0.7"})})]})})},Ot=async()=>{if(!j||!E){const N=pt;W(N),t?.(N);return}if(!B.trim()){const N=ft;W(N),t?.(N);return}if(se(!0),W(null),!await F()){console.error("[x402] Chain switch rejected by user");const N=`${wt}: ${O.name}`;W(N),t?.(N),se(!1);return}try{const N=u!==null,V=N?"edit":"generate",xe=await s({prompt:B,size:J,mode:V,referenceImage:N?u:void 0,sepoliaTest:D,expectedChainId:z,isListed:oe}),Ne=BigInt(xe.tokenId),le=xe.image_url;w(Ne),p(le),C(le),$("generated");try{const Zt=await(await fetch(le)).blob(),ea=(await new Promise((ta,aa)=>{const Te=new FileReader;Te.onload=()=>ta(Te.result),Te.onerror=aa,Te.readAsDataURL(Zt)})).split(",")[1];h(ea)}catch(Be){console.warn("Failed to convert generated image to base64:",Be)}const Jt={name:`AI Generated Artwork #${Ne}`,description:`AI generated artwork based on the prompt: "${B}"`,image:le,external_url:xe.metadata_url||"",attributes:[{trait_type:"Prompt",value:B},{trait_type:"Generation Method",value:"AI Generated"},{trait_type:"Payment Method",value:"x402 USDC"}]};e?.(Ne,le,Jt),n("x402-image-generated",{tokenId:xe.tokenId,mode:V,hasTxReceipt:!!i}),setTimeout(()=>{M(""),H("1024x1024"),p(void 0),w(void 0),W(null),l()},3e3)}catch(N){console.error("[x402] Error:",N);const V=N instanceof Error?N.message:yt;W(V),t?.(V)}finally{se(!1)}},Wt=f({label:"imagegen.mintingInfo"}),Gt=x=>["image/jpeg","image/png"].includes(x.type)?x.size>10485760?(W(Pt),!1):!0:(W(jt),!1),Ue=async x=>{if(Gt(x)){W(null),se(!0);try{const N=await En(x,1024);h(N.base64),_(N.mimeType),$("reference")}catch(N){console.error("Image compression failed:",N);const V=N instanceof Error?N.message:At;W(`${Et}: ${V}`)}finally{se(!1)}}},Ht=x=>{x.preventDefault(),x.stopPropagation()},Qt=x=>{x.preventDefault(),x.stopPropagation()},Kt=x=>{x.preventDefault(),x.stopPropagation();const N=Array.from(x.dataTransfer.files);N.length>0&&Ue(N[0])},Vt=x=>{const N=x.target.files;N&&N.length>0&&Ue(N[0])},Xt=()=>{h(null),_("image/jpeg");const x=document.getElementById("reference-image-input");x&&(x.value=""),$(v?"generated":"empty")},$e=J==="1792x1024"?"wide":"square",Yt=()=>{n("imagegen-connect-click"),k()};return a.jsx("div",{className:b({transition:"all 0.5s ease-in-out",overflow:"hidden"}),children:A?a.jsx("div",{className:G.compactLayout,children:a.jsxs("div",{className:G.compactContainer,children:[a.jsx("div",{className:G.compactHeader,children:a.jsxs("h3",{className:G.compactTitle,children:["ðŸŽ¨",a.jsx(Ve,{label:"imagegen.title"})]})}),a.jsxs("div",{className:G.compactForm,children:[a.jsxs("div",{"data-testid":"drop-zone",className:b({mb:"4",border:"1px solid",borderColor:L==="empty"?"gray.300":"gray.400",borderRadius:"md",bg:L==="empty"?"gray.50":"white",position:"relative",cursor:L==="empty"?"pointer":"default",overflow:"hidden",width:"100%",_hover:L==="empty"?{borderColor:"gray.400",bg:"gray.100"}:{}}),onDragOver:Ht,onDragEnter:Qt,onDrop:Kt,onClick:()=>{L==="empty"&&document.getElementById("reference-image-input")?.click()},children:[a.jsx("input",{id:"reference-image-input","data-testid":"reference-image-input",type:"file",accept:"image/*",onChange:Vt,className:b({position:"absolute",opacity:0,width:0,height:0,pointerEvents:"none"})}),L==="empty"&&a.jsxs("div",{className:b({display:"flex",alignItems:"center",justifyContent:"center",py:"6",px:"4",gap:"3"}),children:[a.jsx("div",{className:b({fontSize:"xl",color:"gray.500"}),children:"ðŸ“¸"}),a.jsxs("div",{className:b({textAlign:"left"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"1"}),children:xt}),a.jsxs("p",{className:b({fontSize:"xs",color:"gray.500",mb:"0"}),children:[Tt," â€¢ ",vt]})]})]}),L==="reference"&&u&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:Ct}),a.jsxs("button",{onClick:x=>{x.stopPropagation(),Xt()},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),children:["âœ• ",ze]})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:$e==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:`data:${I};base64,${u}`,alt:Nt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})}),a.jsx("p",{className:b({fontSize:"xs",color:"gray.500",textAlign:"center",mt:"2",mb:"0"}),children:It})]}),L==="generated"&&v&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:St}),a.jsx("div",{className:b({display:"flex",gap:"2"}),children:a.jsxs("button",{onClick:()=>{h(null),_("image/jpeg"),C(void 0),$("empty");const x=document.getElementById("reference-image-input");x&&(x.value="")},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),disabled:ne||o!=="idle",children:["âœ• ",ze]})})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:$e==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:v,alt:kt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})})]})]}),a.jsx("textarea",{value:B,onChange:x=>M(x.target.value),placeholder:L==="reference"?K:we,disabled:ne||o!=="idle",className:G.compactTextarea}),a.jsxs("div",{className:G.controlBar,children:[a.jsxs("div",{className:G.optionsGroup,children:[a.jsxs("select",{id:"imageSizeSelect",value:J,onChange:x=>H(x.target.value),disabled:ne||o!=="idle",className:G.compactSelect,"aria-label":"Select image format for your artwork",children:[a.jsx("option",{value:"1024x1024",children:zt}),a.jsx("option",{value:"1792x1024",children:Dt})]}),a.jsxs("label",{className:S.checkboxLabel,title:oe?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[a.jsx("input",{type:"checkbox",checked:oe,onChange:x=>fe(x.target.checked),disabled:ne||o!=="idle",className:S.checkbox}),a.jsx(Ve,{label:"imagegen.listed"})]})]}),a.jsx(Mt,{})]})]}),a.jsx(nn,{service:"genimg"}),a.jsx("span",{id:"create-artwork-info",className:b({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:Ut}),a.jsxs("div",{className:b({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[a.jsx(Ke,{size:"xs",className:b({mr:"1"})}),Wt]}),(o==="awaiting-signature"||o==="processing")&&a.jsxs("div",{className:G.compactStatus,children:[a.jsx("div",{className:ue}),a.jsx("span",{children:o==="awaiting-signature"?_e:Lt})]}),(ye||r)&&a.jsx("div",{className:G.compactError,children:ye||r}),i&&a.jsxs("div",{className:b({mt:"2",p:"2",fontSize:"xs",bg:"green.50",border:"1px solid",borderColor:"green.200",borderRadius:"md",color:"green.800"}),children:["âœ… Payment confirmed â€¢"," ",a.jsx("a",{href:`https://optimistic.etherscan.io/tx/${i.transaction}`,target:"_blank",rel:"noopener noreferrer",className:b({color:"green.600",textDecoration:"underline",_hover:{color:"green.700"}}),children:"View transaction â†—"})]}),c&&m&&a.jsxs("div",{className:ja,children:[a.jsx("h4",{className:b({margin:0,fontSize:"sm"}),children:$t}),a.jsxs("p",{className:b({margin:"xs 0",fontSize:"sm"}),children:["ID: ",c.toString()," - ",Bt]})]})]})}):a.jsxs("div",{className:b({maxWidth:"500px",margin:"0 auto",textAlign:"center"}),children:[a.jsxs("h3",{className:b({fontSize:"2xl",fontWeight:"semibold",marginBottom:"4",color:"gray.800"}),children:["ðŸŽ¨ ",Rt]}),a.jsx("div",{className:b({fontSize:"md",fontWeight:"medium",color:"gray.800",mb:"3",textAlign:"center"}),children:Ft}),a.jsx("p",{className:b({fontSize:"sm",color:"gray.600",mb:"lg",lineHeight:"1.5"}),children:_t}),a.jsx("div",{className:b({display:"flex",justifyContent:"center"}),children:a.jsx("button",{onClick:Yt,onMouseEnter:()=>n("imagegen-connect-hover"),className:Ce,children:R})})]})})}function Xe({label:e,isActive:t,onClick:n}){return a.jsx("button",{className:`${Z.tab} ${t?Z.activeTab:""}`,onClick:n,"aria-selected":t,children:e})}function Ln({tokenId:e,network:t,enabled:n=!0}){const[s,o]=g.useState(void 0),[r,i]=g.useState(!1),[l,m]=g.useState(void 0),p=me(t),c=he(t),w=g.useCallback(async()=>{if(n){i(!0),m(void 0);try{const d=await Pe(je,{address:c,abi:Y,functionName:"isTokenListed",args:[e],chainId:p});o(d)}catch(d){d instanceof Error&&(d.message.includes("reverted")||d.name.includes("ContractFunctionRevertedError")||d.name.includes("ContractFunctionExecutionError"))?m("isListed not available for this token"):(console.error("Failed to load listing status:",d),m(d instanceof Error?d.message:"Failed to load listing status"))}finally{i(!1)}}},[e,t,n,c,p]);g.useEffect(()=>{w()},[w]);const y=g.useCallback(d=>{o(d)},[]);return{isListed:s,isLoading:r,error:l,refetch:w,setOptimisticListed:y}}function Rn({genImTokenId:e}){const{isConnected:t}=re(),{network:n,switchIfNeeded:s}=ie(Ka),{writeContract:o,isPending:r,data:i}=Ee(),{isLoading:l,isSuccess:m}=Ae({hash:i}),[p,c]=g.useState(!1),w=me(n),y=f({label:"imagegen.collect"}),d=f({label:"imagegen.collecting"}),v=f({label:"imagegen.collected"}),C=f({label:"imagegen.priceLoading"}),u=f({label:"imagegen.currentPriceInfo"}),{data:h,error:I,isPending:_,refetch:E}=Re({address:Ge(n),abi:Qe,functionName:"getMintStats",args:[e],chainId:w}),j=async()=>{if(!t||!h||!Array.isArray(h))return;if(c(!0),!await s()){c(!1);return}const[,T]=h;o({address:Ge(n),abi:Qe,functionName:"mintCollectorNFT",args:[e],value:T})};g.useEffect(()=>{(r||m)&&c(!1)},[r,m]),g.useEffect(()=>{m&&setTimeout(()=>{E()},2e3)},[m,E]);const P=()=>{if(_)return"...";if(I||!h||!Array.isArray(h))return"0";const[A]=h;return A.toString()},U=()=>{if(_||I||!h||!Array.isArray(h))return C;const[A,T]=h,F=We(T),z=J=>{const H=parseFloat(J);return H>=.001?H.toFixed(3):H>=1e-4?H.toFixed(4):H.toFixed(6)},O=z(F),D=Number(A),L=Math.ceil((D+1)/5)*5,B=T/BigInt(2**Math.floor(D/5))*BigInt(2**Math.floor(L/5)),M=z(We(B));return u.replace("{currentPrice}",O).replace("{nextTier}",L.toString()).replace("{nextPrice}",M)};return a.jsx("button",{onClick:j,disabled:!t||r||l||p,className:`${S.actionButton} ${Ce}`,title:`Collect this NFT (${P()} collected) | ${U()}`,children:r||p?`ðŸ“¦ ${d}`:m?`âœ… ${v}`:`ðŸ“¦ ${y} (${P()})`})}function gt({tokenId:e,onImageClick:t,onNftBurned:n,onListedStatusChanged:s,isHighlighted:o=!1,isPublicView:r=!1,preloadedImageUrl:i,preloadedMetadata:l}){const{writeContract:m,isPending:p,data:c}=Ee(),{writeContract:w,isPending:y,data:d}=Ee(),[v,C]=g.useState(!1),[u,h]=g.useState({tokenId:e,tokenURI:"",imageUrl:i,metadata:l,isLoading:!i}),[I,_]=g.useState(""),{showToast:E,ToastComponent:j}=rt(),P=f({label:"imagegen.listed"}),U=f({label:"imagegen.download"}),A=f({label:"imagegen.delete"}),{network:T,switchIfNeeded:F}=ie(ge),z=he(T),O=!u.isLoading&&!u.error,{isListed:D,setOptimisticListed:L}=Ln({tokenId:e,network:T,enabled:!r&&O}),$=st(T),B=async k=>{try{if(k.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",k),null;const R=await fetch(k);if(!R.ok)throw new Error(`Failed to fetch metadata: ${R.status}`);return await R.json()}catch(R){return console.error("Error fetching NFT metadata:",R),null}};g.useEffect(()=>{(async()=>{try{h(K=>({...K,isLoading:!0,error:void 0}));const q=await $.readContract({address:z,abi:Y,functionName:"tokenURI",args:[e]});if(!q&&(i||l)){h(K=>({...K,tokenURI:"",isLoading:!1}));return}let Q="";r&&(Q=await $.readContract({address:z,abi:Y,functionName:"ownerOf",args:[e]}),_(Q));let ce=l,we=i;if(q){const K=await B(q);K&&(ce=K,we=K.image)}h({tokenId:e,tokenURI:q,metadata:ce,imageUrl:we,isLoading:!1})}catch(R){console.error(`Error loading NFT ${e}:`,R),h({tokenId:e,tokenURI:"",imageUrl:i,metadata:l,isLoading:!1,error:`Failed to load NFT #${e}: ${R instanceof Error?R.message:"Unknown error"}`})}})()},[e,r,i,l,$]);const{isLoading:M,isSuccess:J}=Ae({hash:c}),{isLoading:H,isSuccess:oe}=Ae({hash:d});g.useEffect(()=>{J&&setTimeout(()=>{n()},1e3)},[J,n]),g.useEffect(()=>{oe&&s&&E("Listing status updated successfully!","success")},[oe,s,E]);const fe=()=>{u.imageUrl&&t({src:u.imageUrl,alt:u.metadata?.name||`Artwork #${u.tokenId}`,title:u.metadata?.name,description:u.metadata?.description})},ne=async()=>{if(u.imageUrl)try{const R=await(await fetch(u.imageUrl)).blob(),q=window.URL.createObjectURL(R),Q=document.createElement("a");Q.href=q,Q.download=`${u.metadata?.name||`Artwork-${u.tokenId}`}.png`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(q)}catch(k){console.error("Download failed:",k),E("Download failed. Please try again.","error")}},se=async()=>{const R=`https://opensea.io/item/${Va(T)?"optimism":"optimism-sepolia"}/${z}/${u.tokenId}`;try{await navigator.clipboard.writeText(R),E("OpenSea URL copied to clipboard!","success")}catch(q){console.error("Failed to copy URL:",q),window.open(R,"_blank","noopener,noreferrer")}},ye=async()=>{if(!v){C(!0),E(`âš ï¸ Click Delete again to permanently remove "${u.metadata?.name||`Artwork #${u.tokenId}`}"`,"warning"),setTimeout(()=>{C(!1)},5e3);return}C(!1);try{if(!await F()){E("Please switch to the correct network.","error");return}await m({address:z,abi:Y,functionName:"burn",args:[u.tokenId]})}catch(k){console.error("Delete failed:",k),E("Failed to delete artwork. Please try again.","error")}},W=async()=>{if(!s)return;const k=!D,R=k?"public":"private";try{if(!await F()){E("Please switch to the correct network.","error");return}L(k),s(u.tokenId,k),await w({address:z,abi:Y,functionName:"setTokenListed",args:[u.tokenId,k]})}catch(q){console.error("Failed to update listing status:",q),L(!k),s(u.tokenId,!k),E(`Failed to set artwork as ${R}. Please try again.`,"error")}};return a.jsxs("div",{className:`${S.container} ${o?S.highlighted:""} group`,onClick:fe,children:[u.isLoading?a.jsxs("div",{className:S.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{className:S.loadingText,children:"Loading artwork..."})]}):u.error?a.jsxs("div",{className:S.errorContainer,children:[a.jsx("div",{className:S.errorBox,children:a.jsx("p",{className:S.errorText,children:u.error})}),a.jsxs("p",{className:S.tokenIdText,children:["ID: ",u.tokenId.toString()]})]}):a.jsxs(a.Fragment,{children:[u.imageUrl?a.jsxs("div",{className:S.imageContainer,children:[a.jsx("img",{src:u.imageUrl,alt:u.metadata?.name||`Artwork #${u.tokenId}`,className:S.image,onError:k=>{const R=k.target;R.style.display="none",R.nextElementSibling.classList.remove("hidden")}}),a.jsx("div",{className:S.imageError,style:{display:"none"},children:"ðŸ“· Image not available"})]}):a.jsx("div",{className:S.imagePlaceholder,children:"ðŸ“· No image available"}),a.jsxs("div",{className:S.cornerBadge,children:["#",u.tokenId.toString()]}),!r&&D&&a.jsxs("div",{className:S.listedBadge,children:["âœ“ ",P]}),r&&I&&a.jsxs("div",{className:S.ownerBadge,children:["ðŸ‘¤ ",I.slice(0,6),"...",I.slice(-4)]}),a.jsx("div",{className:S.actionsOverlay,children:a.jsxs("div",{className:S.actions,children:[u.imageUrl&&a.jsx("button",{onClick:k=>{k.stopPropagation(),ne()},className:S.compactSecondaryButton,title:`${U} image`,children:"â¬‡ï¸"}),u.imageUrl&&a.jsx("button",{onClick:k=>{k.stopPropagation(),fe()},className:S.compactSecondaryButton,title:"View full size",children:"ðŸ”"}),a.jsx("button",{onClick:k=>{k.stopPropagation(),se()},className:S.compactSecondaryButton,title:"Share artwork",children:"ðŸ“¤"}),!r&&s&&D!==void 0&&a.jsx("button",{onClick:k=>{k.stopPropagation(),W()},disabled:y||H,className:S.compactSecondaryButton,title:`${D?"Make private":"Make public"}`,children:D?"ðŸ”“":"ðŸ”’"}),r&&a.jsx(Rn,{genImTokenId:u.tokenId}),!r&&a.jsx("button",{onClick:k=>{k.stopPropagation(),ye()},disabled:p||M,className:S.compactSecondaryButton,title:`${A} artwork (permanent)`,style:{backgroundColor:p||M?"rgba(0,0,0,0.3)":"rgba(220, 38, 38, 0.8)",opacity:p||M?.6:1},children:p||M?"â³":"ðŸ—‘ï¸"})]})})]}),j]})}function ht({image:e,onClose:t}){const{showToast:n,ToastComponent:s}=rt();g.useEffect(()=>{const r=i=>{i.key==="Escape"&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]);const o=async()=>{try{const i=await(await fetch(e.src)).blob(),l=window.URL.createObjectURL(i),m=document.createElement("a");m.href=l,m.download=`${e.title||"NFT-image"}.png`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(l)}catch(r){console.error("Download failed:",r),n("Download failed. Please try again.","error")}};return a.jsxs("div",{className:S.modalOverlay,onClick:t,children:[a.jsxs("div",{className:S.modalContent,onClick:r=>r.stopPropagation(),children:[a.jsx("button",{className:S.modalClose,onClick:t,children:"âœ•"}),a.jsx("img",{src:e.src,alt:e.alt,className:S.modalImage}),(e.title||e.description)&&a.jsxs("div",{className:S.modalInfo,children:[e.title&&a.jsx("h3",{className:S.modalTitle,children:e.title}),e.description&&a.jsx("p",{className:S.modalDescription,children:e.description}),a.jsx("div",{className:S.actions,style:{justifyContent:"center",marginTop:"12px"},children:a.jsx("button",{onClick:o,className:`${S.actionButton} ${Ce}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function Fn({newlyCreatedNFT:e,onNewNFTDisplayed:t}){const{address:n,isConnected:s}=re(),{network:o}=ie(ge),r=me(o),i=he(o),[l,m]=g.useState([]),[p,c]=g.useState(!1),[w,y]=g.useState(null),[d,v]=g.useState(null),{data:C,isLoading:u}=Re({address:i,abi:Y,functionName:"balanceOf",args:n?[n]:void 0,chainId:r,query:{enabled:!!n&&s}}),h=g.useCallback(async()=>{if(!s||!n){m([]);return}c(!0);try{const j=await Pe(je,{address:i,abi:Y,functionName:"balanceOf",args:[n],chainId:r});if(!j||j===0n){m([]);return}const P=[];for(let T=0;T<Number(j);T++){const F=(async()=>{try{return await Pe(je,{address:i,abi:Y,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(T)],chainId:r})}catch(z){return console.error(`Error loading token ID at index ${T}:`,z),0n}})();P.push(F)}const A=(await Promise.all(P)).filter(T=>T>0n).sort((T,F)=>F>T?1:F<T?-1:0);m(A)}catch(j){console.error("Error loading token IDs:",j),m([])}finally{c(!1)}},[s,n,i,r]),I=g.useCallback(j=>{y(j),m(P=>P.includes(j)?P:[j,...P]),setTimeout(()=>{y(null),t?.()},5e3)},[t]),_=g.useCallback((j,P)=>{},[]);g.useEffect(()=>{s&&n&&h()},[n,s,h]),g.useEffect(()=>{e&&I(e.tokenId)},[e,I]);const E=u||p;return s?E&&l.length===0?a.jsxs("div",{className:X.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{children:"Loading your artworks..."})]}):C===0n||!C?a.jsx("div",{className:X.emptyStateContainer,children:a.jsx("p",{className:X.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:X.grid,children:l.map((j,P)=>{const U=e?.tokenId===j,A=U?e.imageUrl:void 0,T=U?e.metadata:void 0;return a.jsx(gt,{tokenId:j,onImageClick:v,onNftBurned:()=>h(),onListedStatusChanged:_,isHighlighted:w===j,isPublicView:!1,preloadedImageUrl:A,preloadedMetadata:T},`my-${j}-${P}`)})}),d&&a.jsx(ht,{image:d,onClose:()=>v(null)})]}):a.jsxs("div",{className:X.walletPrompt,children:[a.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),a.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),a.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function _n(){const{network:e}=ie(ge),t=he(e),[n,s]=g.useState([]),[o,r]=g.useState(!1),[i,l]=g.useState(null),m=st(e),p=g.useCallback(async()=>{r(!0);try{const c=await m.readContract({address:t,abi:Y,functionName:"getAllPublicTokens"});if(!c||c.length===0){s([]);return}const w=c.sort((y,d)=>d>y?1:d<y?-1:0);s(w)}catch(c){console.error("Error loading public token IDs:",c),s([])}finally{r(!1)}},[m]);return g.useEffect(()=>{p()},[p]),o&&n.length===0?a.jsxs("div",{className:X.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{children:"Loading public artworks..."})]}):n.length===0?a.jsx("div",{className:X.emptyStateContainer,children:a.jsx("p",{className:X.emptyStateText,children:"No public artworks available yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:X.grid,children:n.map((c,w)=>a.jsx(gt,{tokenId:c,onImageClick:l,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${c}-${w}`))}),i&&a.jsx(ht,{image:i,onClose:()=>l(null)})]})}function zn({newlyCreatedNFT:e,onNewNFTDisplayed:t,activeTab:n,onTabChange:s}={}){const{address:o,isConnected:r}=re(),[i,l]=g.useState(()=>r?"my":"public"),m=n??i,p=s??l,{network:c}=ie(ge),w=me(c),y=he(c),d=Re({address:y,abi:Y,functionName:"balanceOf",args:o?[o]:void 0,chainId:w,query:{enabled:!!o&&r}}),{data:v,refetch:C}=d;g.useEffect(()=>{e&&C&&C()},[e,C]);const u=f({label:"imagegen.myArtworks"}),h=f({label:"imagegen.allPublicArtworks"});return a.jsxs("div",{className:X.container,children:[a.jsx("div",{className:Z.container,children:a.jsxs("div",{className:Z.tabList,children:[a.jsx(Xe,{label:r?`${u} (${v?.toString()||"0"})`:u,isActive:m==="my",onClick:()=>p("my")}),a.jsx(Xe,{label:h,isActive:m==="public",onClick:()=>p("public")})]})}),a.jsx("div",{className:`${Z.tabPanel} ${m==="my"?"":Z.hiddenPanel}`,children:a.jsx(Fn,{newlyCreatedNFT:e,onNewNFTDisplayed:t})}),a.jsx("div",{className:`${Z.tabPanel} ${m==="public"?"":Z.hiddenPanel}`,children:a.jsx(_n,{})})]})}function Dn(){const{isConnected:e}=re(),[t,n]=g.useState(null),[s,o]=g.useState(()=>e?"my":"public"),r=(p,c,w)=>{console.log("Image generation succeeded:",{tokenId:p,imageUrl:c,metadata:w}),n({tokenId:p,imageUrl:c,metadata:w}),e&&o("my")},i=p=>{console.error("Image generation failed:",p)},l=()=>{n(null)},m=p=>{o(p)};return a.jsxs("div",{className:Ea,children:[a.jsx(An,{onSuccess:r,onError:i}),a.jsx(zn,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:l,activeTab:s,onTabChange:m})]})}const Un=Object.freeze(Object.defineProperty({__proto__:null,default:Dn},Symbol.toStringTag,{value:"Module"}));function $n(){return"AI Image Generator | fretchen.eu"}const Bn=Object.freeze(Object.defineProperty({__proto__:null,title:$n},Symbol.toStringTag,{value:"Module"})),Zn={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Da}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:za}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:_a}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Un}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Fa}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Bn}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Ra}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:La}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Aa}}};export{Zn as configValuesSerialized};
