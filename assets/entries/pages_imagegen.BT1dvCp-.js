import{c as t,r as s,d as U,j as e,F as R,i as A,W as _,L as B,a as F,b as L,o as W}from"../chunks/chunk-fxVuzpJC.js";import{u as M,g as $,a as G,b as H}from"../chunks/chunk-BaqFxasR.js";/* empty css                      */import"../chunks/chunk-DQ3hQvvF.js";/* empty css                      *//* empty css                      */const q=async l=>new Promise((m,f)=>{const i=async()=>{try{const n=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[l]});n?m(n):setTimeout(i,2e3)}catch(n){f(n)}};i()}),a={container:t({maxWidth:"900px",mx:"auto",px:"md"}),flexColumn:t({display:"flex",flexDirection:"column",gap:"md"}),flexCenter:t({display:"flex",justifyContent:"center",alignItems:"center"}),heading:t({fontSize:"2xl",fontWeight:"bold",marginBottom:"sm",color:"text"}),paragraph:t({marginBottom:"sm",lineHeight:"1.5"}),list:t({paddingLeft:"2em",marginBottom:"sm"}),button:t({padding:"md",backgroundColor:"brand",color:"light",border:"none",borderRadius:"sm",cursor:"pointer",fontWeight:"bold",width:"100%",margin:"xs 0",transition:"all 0.2s",_hover:{backgroundColor:"#0052a3"},_disabled:{opacity:.7,cursor:"not-allowed"}}),errorMessage:t({padding:"sm",borderRadius:"sm",backgroundColor:"rgba(220, 53, 69, 0.1)",border:"1px solid #dc3545",color:"#dc3545",marginTop:"md"}),successMessage:t({padding:"md",backgroundColor:"rgba(40, 167, 69, 0.1)",border:"1px solid #28a745",borderRadius:"sm",marginTop:"sm"}),link:t({display:"inline-block",color:"brand",textDecoration:"none",marginTop:"xs",fontWeight:"medium",_hover:{textDecoration:"underline"}}),cardLayout:t({display:"flex",flexDirection:["column","column","row"],gap:"lg",marginTop:"md",backgroundColor:"background",borderRadius:"md",border:"1px solid token(colors.border)",padding:"md"}),column:t({flex:"1",display:"flex",flexDirection:"column",gap:"md"}),columnHeading:t({fontSize:"lg",margin:0}),stepsList:t({display:"flex",flexDirection:"column",gap:"xs",marginBottom:"sm"}),stepItem:t({display:"flex",alignItems:"center",gap:"sm"}),stepNumber:t({backgroundColor:"brand",color:"light",width:"24px",height:"24px",borderRadius:"full",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}),promptTextarea:t({padding:"md",height:"150px",borderRadius:"sm",border:"1px solid token(colors.border)",resize:"vertical",marginBottom:"sm",width:"100%"}),statusIndicator:t({padding:"sm",backgroundColor:"rgba(0, 102, 204, 0.1)",border:"1px solid token(colors.brand)",borderRadius:"sm",marginBottom:"sm"}),statusRow:t({display:"flex",alignItems:"center",gap:"sm"}),spinner:t({width:"16px",height:"16px",borderRadius:"full",border:"2px solid token(colors.brand)",borderRightColor:"transparent",animation:"spin 1s linear infinite"}),statusText:t({fontSize:"sm",color:"gray.600",marginTop:"xs"}),imagePreview:t({width:"100%",aspectRatio:"1/1",border:"2px dashed token(colors.border)",borderRadius:"sm",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"#f9f9f9",position:"relative"}),imageOverlay:t({position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255,255,255,0.8)",zIndex:1}),largeSpinner:t({width:"40px",height:"40px",borderRadius:"full",border:"4px solid token(colors.brand)",borderRightColor:"transparent",animation:"spin 1s linear infinite",marginBottom:"md"}),generatedImage:t({maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}),placeholderContent:t({display:"flex",flexDirection:"column",alignItems:"center",padding:"md",textAlign:"center",color:"text"}),placeholderIcon:t({marginBottom:"sm",opacity:.5}),placeholderCaption:t({fontSize:"sm",color:"gray.500"})};function V(){const l=G(),[m,f]=s.useState(),[i,n]=s.useState(),[d,N]=s.useState(""),[c,v]=s.useState(!1),[r,u]=s.useState("idle"),[w,p]=s.useState(null),{address:x,isConnected:g}=U(),S=$(),{data:j}=M({...l,functionName:"mintPrice",args:[],chainId:S.id}),{writeContractAsync:I}=H(),P=async()=>{if(!g||!x){p("Please connect your wallet first");return}if(!d.trim()){p("Please enter a prompt");return}if(!j){p("Could not load mint price from contract");return}v(!0),p(null),u("minting");try{const o=`ipfs://tempURI/${Date.now()}`,C=await I({...l,functionName:"safeMint",args:[o],value:j,chainId:S.id});console.log("Minting transaction sent:",C);const y=await q(C),b=y==null?void 0:y.logs.find(E=>E.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!b||b.topics.length<4)throw new Error("Could not extract token ID from transaction");const D=b.topics[3],T=BigInt(D);console.log("Minted token ID:",T),n(T),u("generating");const h=await fetch(`https://mypersonaljscloudivnad9dy-readnft.functions.fnc.fr-par.scw.cloud?prompt=${encodeURIComponent(d)}&tokenId=${T}`);if(!h.ok)throw new Error(`Error: ${h.status} ${h.statusText}`);const k=await h.json();console.log("Image generation completed",k);const z=k.image_url;f(z),u("idle")}catch(o){console.error("Error:",o),p(o instanceof Error?o.message:"An unknown error occurred"),u("error")}finally{v(!1)}};return e.jsxs("div",{className:a.container,children:[e.jsx("h1",{className:a.heading,children:"Decentral AI Image Generator"}),e.jsxs("div",{className:a.cardLayout,children:[e.jsxs("div",{className:a.column,children:[e.jsx("h2",{className:a.columnHeading,children:"Create Your Image"}),e.jsxs("div",{className:a.stepsList,children:[e.jsxs("div",{className:a.stepItem,children:[e.jsx("span",{className:a.stepNumber,children:"1"}),e.jsx("span",{children:"Enter a descriptive prompt below"})]}),e.jsxs("div",{className:a.stepItem,children:[e.jsx("span",{className:a.stepNumber,children:"2"}),e.jsx("span",{children:'Click "Mint & Generate" (costs ~10Â¢ in ETH)'})]}),e.jsxs("div",{className:a.stepItem,children:[e.jsx("span",{className:a.stepNumber,children:"3"}),e.jsx("span",{children:"Wait ~30s for your image to appear"})]})]}),e.jsx("textarea",{value:d,onChange:o=>N(o.target.value),placeholder:"Describe your image in detail... (e.g. 'A futuristic city skyline at sunset with flying cars')",disabled:c||r!=="idle",className:`${a.promptTextarea} ${c||r!=="idle"?t({opacity:.7}):""}`}),r!=="idle"&&e.jsxs("div",{className:a.statusIndicator,children:[e.jsxs("div",{className:a.statusRow,children:[e.jsx("div",{className:a.spinner}),e.jsx("span",{children:r==="minting"?"Creating your NFT...":"Generating your image..."})]}),e.jsx("div",{className:a.statusText,children:r==="minting"?"Confirm the transaction in your wallet":"This may take up to 30 seconds"})]}),e.jsx("button",{onClick:P,disabled:c||!d.trim()||!g||!x,className:`${a.button} ${c||!d.trim()||!g||!x?t({opacity:.7,cursor:"not-allowed"}):""}`,children:c?r==="minting"?"Creating NFT...":"Generating Image...":"Mint & Generate"}),!g&&e.jsx("p",{className:t({fontSize:"sm",color:"#666",margin:"xs 0"}),children:"Connect your wallet to create an NFT"}),w&&e.jsx("div",{className:a.errorMessage,children:w})]}),e.jsxs("div",{className:a.column,children:[e.jsx("h2",{className:a.columnHeading,children:"Your Generated Image"}),e.jsx("div",{className:t({width:"100%",aspectRatio:"1/1",border:"2px dashed #ccc",borderRadius:"md",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"md",backgroundColor:r!=="idle"?"rgba(0, 102, 204, 0.05)":"#f9f9f9",textAlign:"center",position:"relative"}),children:m?e.jsx("img",{src:m,alt:"Generated",className:t({maxWidth:"100%",maxHeight:"100%",objectFit:"contain"})}):e.jsx(e.Fragment,{children:r!=="idle"?e.jsx("p",{className:t({fontWeight:"medium"}),children:r==="minting"?"Creating NFT...":"Generating your image..."}):e.jsx("p",{children:"Your image will appear here"})})}),i&&e.jsxs("div",{className:a.successMessage,children:[e.jsx("h3",{className:t({margin:0,fontSize:"md"}),children:"ðŸŽ‰ NFT successfully created!"}),e.jsxs("p",{className:t({margin:"xs 0"}),children:[e.jsx("strong",{children:"Token ID:"})," ",i.toString()]}),e.jsx("a",{href:`https://optimistic.etherscan.io/token/${l.address}?a=${i}`,target:"_blank",rel:"noopener noreferrer",className:a.link,children:"View on Etherscan â†’"})]})]})]})]})}const O=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"})),te={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:W}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:L}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:F}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:O}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:B}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Notes by fretchen"}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:_}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:A}},queryClientConfig:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/config",fileExportPathToShowToUser:["default","queryClientConfig"]},valueSerialized:{type:"js-serialized",value:"!undefined"}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:R}}};export{te as configValuesSerialized};
