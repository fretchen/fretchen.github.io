import{c as L,j as e,u as de,r as l,a3 as Z,ai as v,aj as c,ak as G,al as ke,am as _,an as V,ao as Te,ap as se,a2 as ie,aq as ue,ar as ee,as as Ne,at as ae,au as me,av as U,f as ve,F as Ce,i as je,W as Se,a as Ie,d as Pe,e as Le,o as Ae}from"../chunks/chunk-Bbz6oncj.js";import{e as H,b as J,u as Q,c as Y,d as ne,f as Ee,r as re}from"../chunks/chunk-ByCTAAsx.js";import{d as ge}from"../chunks/chunk-DRTVNPcc.js";import{c as fe}from"../chunks/chunk-FbhtuzhF.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-C9uloipU.js";import"../chunks/chunk-ChTX_LM8.js";function le({size:t="sm",className:r}){const a={xs:L({fontSize:"xs",lineHeight:"1"}),sm:L({fontSize:"sm",lineHeight:"1"}),md:L({fontSize:"md",lineHeight:"1"})},n=L({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return e.jsx("span",{className:`${n} ${a[t]} ${r||""}`,role:"img","aria-label":"Information",children:"i"})}const $e=t=>{const r=typeof t;return t!==null&&(r==="object"||r==="function")},te=new Set(["__proto__","prototype","constructor"]),De=new Set("0123456789");function Fe(t){const r=[];let a="",n="start",o=!1;for(const s of t)switch(s){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");o&&(a+=s),n="property",o=!o;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(o){o=!1,a+=s;break}if(te.has(a))return[];r.push(a),a="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(o){o=!1,a+=s;break}if(n==="property"){if(te.has(a))return[];r.push(a),a=""}n="index";break}case"]":{if(n==="index"){r.push(Number.parseInt(a,10)),a="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!De.has(s))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),o&&(o=!1,a+="\\"),a+=s}}switch(o&&(a+="\\"),n){case"property":{if(te.has(a))return[];r.push(a);break}case"index":throw new Error("Index was not closed");case"start":{r.push("");break}}return r}function Ue(t,r){if(typeof r!="number"&&Array.isArray(t)){const a=Number.parseInt(r,10);return Number.isInteger(a)&&t[a]===t[r]}return!1}function he(t,r,a){if(!$e(t)||typeof r!="string")return a===void 0?t:a;const n=Fe(r);if(n.length===0)return a;for(let o=0;o<n.length;o++){const s=n[o];if(Ue(t,s)?t=o===n.length-1?void 0:null:t=t[s],t==null){if(o!==n.length-1)return a;break}}return t===void 0?a:t}const pe={imagegen:{title:"Create Your Digital Artwork",description:"Describe your vision and generate a unique AI artwork for ~10Â¢. Your creation will be minted as an NFT on the blockchain.",promptPlaceholder:"Describe your image in detail... (e.g., 'A futuristic city skyline at sunset with neon lights reflecting in the water')",square:"â—¼ Square",wide:"â–¬ Wide",listed:"Listed",createArtwork:"Create Artwork",connectWallet:"Connect your account to create artwork",mintingInfo:"Mints on Optimism (network fee < 1Â¢). Sovereign generation â€” your prompt can only be used for your NFT, not stored elsewhere.",myArtworks:"My Artworks",allPublicArtworks:"All Public Artworks",artwork:"Artwork",share:"Share",delete:"Delete",download:"Download",collect:"Collect"}},xe={imagegen:{title:"Erstelle Dein digitales Kunstwerk",description:"Beschreibe Deine Vision und generiere ein einzigartiges KI-Kunstwerk fÃ¼r ~10Â¢. Deine Kreation wird als NFT auf der Blockchain registriert.",promptPlaceholder:"Beschreibe Dein Bild im Detail... (z.B. 'Eine futuristische Stadtansicht bei Sonnenuntergang mit Neonlichtern, die sich im Wasser spiegeln')",square:"â—¼ quadratisch",wide:"â–¬ breit",listed:"Gelistet",createArtwork:"Kunstwerk erstellen",connectWallet:"Verbinde dein Konto, um Kunstwerke zu erstellen",mintingInfo:"Registrierung auf Optimism (NetzwerkgebÃ¼hr < 1Â¢). SouverÃ¤ne Generierung â€” Dein Prompt kann nur fÃ¼r Dein NFT verwendet werden, nicht anderswo gespeichert.",myArtworks:"Meine Kunstwerke",allPublicArtworks:"Alle Ã¶ffentlichen Kunstwerke",artwork:"Kunstwerk",share:"Teilen",delete:"LÃ¶schen",download:"Herunterladen",collect:"Sammeln"}};function q({label:t,locale:r}){const n=de(),o=r??n.locale??ge,d=he(o==="de"?xe:pe,t);return e.jsx("span",{"data-locale":o,children:d})}function I({label:t,locale:r}){const n=de(),s=(r??n.locale??ge)==="de"?xe:pe;return he(s,t)||t||""}const ze=async t=>new Promise((r,a)=>{const n=async()=>{try{const o=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});o?r(o):setTimeout(n,2e3)}catch(o){a(o)}};n()});function Re({apiUrl:t="https://mypersonaljscloudivnad9dy-readnftv2.functions.fnc.fr-par.scw.cloud",onSuccess:r,onError:a}){const n=H(),[o,s]=l.useState(),[d,u]=l.useState(),[x,b]=l.useState(""),[C,P]=l.useState("1024x1024"),[w,z]=l.useState(!1),[p,i]=l.useState(!1),[N,j]=l.useState("idle"),[B,k]=l.useState(null),{address:y,isConnected:f}=Z(),A=J(),{data:E}=Q({...n,functionName:"mintPrice",args:[],...A?.id&&{chainId:A.id}}),{writeContractAsync:T}=Y(),D=async()=>{if(!f||!y){const m="Please connect your account first";k(m),a?.(m);return}if(!x.trim()){const m="Please enter a prompt";k(m),a?.(m);return}if(!E){const m="Could not load creation fee from system";k(m),a?.(m);return}i(!0),k(null),j("minting");try{const m=`ipfs://tempURI/${Date.now()}`,$=await T({...n,functionName:"safeMint",args:[m,w],value:E,...A?.id&&{chainId:A.id}});console.log("Minting transaction sent:",$);const M=(await ze($))?.logs.find(K=>K.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!M||M.topics.length<4)throw new Error("Could not extract artwork ID from transaction");const O=M.topics[3],R=BigInt(O);console.log("Created artwork ID:",R),u(R),j("generating");const g=await fetch(`${t}?prompt=${encodeURIComponent(x)}&tokenId=${R}&size=${C}`);if(!g.ok)throw new Error(`Error: ${g.status} ${g.statusText}`);const h=await g.json();console.log("Image generation completed",h);const S=h.image_url;s(S),j("idle");const F={name:`AI Generated Artwork #${R}`,description:`AI generated artwork based on the prompt: "${x}"`,image:S,external_url:h.metadata_url||"",attributes:[{trait_type:"Prompt",value:x},{trait_type:"Generation Method",value:"AI Generated"}]};r?.(R,S,F),setTimeout(()=>{b(""),P("1024x1024"),s(void 0),u(void 0),k(null)},3e3)}catch(m){console.error("Error:",m);const $=m instanceof Error?m.message:"An unknown error occurred";k($),j("error"),a?.($)}finally{i(!1)}};return e.jsx("div",{className:v.compactLayout,children:e.jsxs("div",{className:v.compactContainer,children:[e.jsxs("div",{className:v.compactHeader,children:[e.jsxs("h3",{className:v.compactTitle,children:["ðŸŽ¨",e.jsx(q,{label:"imagegen.title"})]}),e.jsx("span",{className:v.compactSubtitle,children:e.jsx(q,{label:"imagegen.description"})})]}),e.jsxs("div",{className:v.compactForm,children:[e.jsx("textarea",{value:x,onChange:m=>b(m.target.value),placeholder:I({label:"imagegen.promptPlaceholder"}),disabled:p||N!=="idle",className:v.compactTextarea}),e.jsxs("div",{className:v.controlBar,children:[e.jsxs("div",{className:v.optionsGroup,children:[e.jsxs("select",{id:"imageSizeSelect",value:C,onChange:m=>P(m.target.value),disabled:p||N!=="idle",className:v.compactSelect,"aria-label":"Select image format for your artwork",children:[e.jsx("option",{value:"1024x1024",children:I({label:"imagegen.square"})}),e.jsx("option",{value:"1792x1024",children:I({label:"imagegen.wide"})})]}),e.jsxs("label",{className:c.checkboxLabel,title:w?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:m=>z(m.target.checked),disabled:p||N!=="idle",className:c.checkbox}),e.jsx(q,{label:"imagegen.listed"})]})]}),e.jsx("button",{onClick:D,disabled:p||!x.trim()||!f,className:`${v.compactButton} ${p||!x.trim()||!f?v.compactButtonDisabled:""}`,title:I({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:G}),N==="minting"?"Creating...":"Generating..."]}):e.jsxs(e.Fragment,{children:["ðŸŽ¨ ",e.jsx(q,{label:"imagegen.createArtwork"}),e.jsx(le,{size:"xs",className:L({ml:"1",opacity:"0.7"})})]})})]})]}),e.jsxs("div",{className:L({mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:["Powered by"," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer","aria-label":"Learn more about Optimism (opens in new tab)",className:L({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"Optimism"})," ","â€¢"," ",e.jsx("a",{href:`https://optimistic.etherscan.io/address/${n.address}`,target:"_blank",rel:"noopener noreferrer","aria-label":"View smart contract on Optimism Etherscan (opens in new tab)",className:L({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"View Contract â†—"})]}),e.jsx("span",{id:"create-artwork-info",className:L({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:I({label:"imagegen.mintingInfo"})}),e.jsxs("div",{className:L({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[e.jsx(le,{size:"xs",className:L({mr:"1"})}),"Mints on Optimism (network fee <\\u003c 1Â¢). Sovereign generation â€” your prompt can only be used for your NFT, not stored elsewhere."]}),N!=="idle"&&e.jsxs("div",{className:v.compactStatus,children:[e.jsx("div",{className:G}),e.jsx("span",{children:N==="minting"?"Creating your artwork...":"Generating image..."})]}),!f&&e.jsx("div",{className:v.compactError,children:e.jsx(q,{label:"imagegen.connectWallet"})}),B&&e.jsx("div",{className:v.compactError,children:B}),d&&o&&e.jsxs("div",{className:ke,children:[e.jsx("h4",{className:L({margin:0,fontSize:"sm"}),children:"âœ… Artwork created successfully!"}),e.jsxs("p",{className:L({margin:"xs 0",fontSize:"sm"}),children:["ID: ",d.toString()," - Check your gallery below"]})]})]})})}function ce({label:t,isActive:r,onClick:a}){return e.jsx("button",{className:`${_.tab} ${r?_.activeTab:""}`,onClick:a,"aria-selected":r,children:t})}function Be({message:t,type:r,duration:a,onClose:n}){const o=l.useRef(null);l.useEffect(()=>{const u=a??(r==="error"?4e3:r==="warning"?5e3:3e3);return o.current=setTimeout(()=>{n()},u),()=>{o.current&&clearTimeout(o.current)}},[a,r,n]);const s=()=>{switch(r){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":default:return"âŒ"}};return e.jsx("div",{className:V.container,children:e.jsxs("div",{className:V.content,"data-type":r,children:[e.jsx("span",{className:V.icon,children:s()}),e.jsx("span",{className:V.message,children:t})]})})}function we(){const[t,r]=l.useState(null),a=(s,d="error",u)=>{r({message:s,type:d,duration:u})},n=()=>{r(null)},o=t?e.jsx(Be,{message:t.message,type:t.type,duration:t.duration,onClose:n}):null;return{showToast:a,hideToast:n,ToastComponent:o}}function _e({genImTokenId:t}){const[r,a]=l.useState(!1),{isConnected:n}=Z(),o=Te(),{writeContract:s,isPending:d,data:u,error:x}=Y(),{isLoading:b,isSuccess:C}=ne({hash:u}),P=J(),w=Ee(),z=o===P.id,{data:p,error:i,isPending:N,refetch:j}=Q({...w,functionName:"getMintStats",args:[t],chainId:P.id}),B=async()=>{if(!n||!z||!p||!Array.isArray(p))return;a(!0);const[,f]=p;s({...w,functionName:"mintCollectorNFT",args:[t],value:f})};l.useEffect(()=>{C&&(a(!1),setTimeout(()=>{j()},2e3)),x&&a(!1)},[C,x,j]);const k=()=>{if(N)return"...";if(i||!p||!Array.isArray(p))return"0";const[f]=p;return f.toString()},y=()=>{if(N||i||!p||!Array.isArray(p))return"Price loading...";const[f,A]=p,E=ie(A),T=R=>{const g=parseFloat(R);return g>=.001?g.toFixed(3):g>=1e-4?g.toFixed(4):g.toFixed(6)},D=T(E),m=Number(f),$=Math.ceil((m+1)/5)*5,M=A/BigInt(2**Math.floor(m/5))*BigInt(2**Math.floor($/5)),O=T(ie(M));return`Current price: ${D} ETH | Price after ${$} mints: ${O} ETH`};return e.jsx("button",{onClick:B,disabled:!n||r||d||b||!z,className:`${c.actionButton} ${se}`,title:`Collect this NFT (${k()} collected) | ${y()}`,children:r||d?"ðŸ“¦ Collecting...":C?"âœ… Collected!":`ðŸ“¦ ${I({label:"imagegen.collect"})} (${k()})`})}function ye({tokenId:t,onImageClick:r,onNftBurned:a,onListedStatusChanged:n,isHighlighted:o=!1,isPublicView:s=!1}){const{writeContract:d,isPending:u,data:x}=Y(),{writeContract:b,isPending:C,data:P}=Y(),w=H(),[z,p]=l.useState(!1),[i,N]=l.useState({tokenId:t,tokenURI:"",isLoading:!0}),[j,B]=l.useState(""),{showToast:k,ToastComponent:y}=we(),f=l.useMemo(()=>fe({chain:me,transport:ue()}),[]),A=async g=>{try{if(g.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",g),null;const h=await fetch(g);if(!h.ok)throw new Error(`Failed to fetch metadata: ${h.status}`);return await h.json()}catch(h){return console.error("Error fetching NFT metadata:",h),null}};l.useEffect(()=>{(async()=>{try{N(W=>({...W,isLoading:!0,error:void 0}));const S=await f.readContract({address:w.address,abi:w.abi,functionName:"tokenURI",args:[t]});let F="";s&&(F=await f.readContract({address:w.address,abi:w.abi,functionName:"ownerOf",args:[t]}),B(F));let K;if(!s)try{K=await re(ae,{...w,functionName:"isTokenListed",args:[t]})}catch(W){console.warn("Could not load listing status:",W)}const oe=await A(S);N({tokenId:t,tokenURI:S,metadata:oe||void 0,imageUrl:oe?.image,isLoading:!1,isListed:K})}catch(h){console.error(`Error loading NFT ${t}:`,h),N({tokenId:t,tokenURI:"",isLoading:!1,error:`Failed to load NFT #${t}: ${h instanceof Error?h.message:"Unknown error"}`})}})()},[t,s]);const{isLoading:E,isSuccess:T}=ne({hash:x}),{isLoading:D,isSuccess:m}=ne({hash:P});l.useEffect(()=>{T&&setTimeout(()=>{a()},1e3)},[T]),l.useEffect(()=>{m&&n&&k("Listing status updated successfully!","success")},[m]);const $=()=>{i.imageUrl&&r({src:i.imageUrl,alt:i.metadata?.name||`Artwork #${i.tokenId}`,title:i.metadata?.name,description:i.metadata?.description})},X=async()=>{if(i.imageUrl)try{const h=await(await fetch(i.imageUrl)).blob(),S=window.URL.createObjectURL(h),F=document.createElement("a");F.href=S,F.download=`${i.metadata?.name||`Artwork-${i.tokenId}`}.png`,document.body.appendChild(F),F.click(),document.body.removeChild(F),window.URL.revokeObjectURL(S)}catch(g){console.error("Download failed:",g),k("Download failed. Please try again.","error")}},M=async()=>{const h=`https://opensea.io/item/optimism/${w.address}/${i.tokenId}`;try{await navigator.clipboard.writeText(h),k("OpenSea URL copied to clipboard!","success")}catch(S){console.error("Failed to copy URL:",S),window.open(h,"_blank","noopener,noreferrer")}},O=async()=>{if(!z){p(!0),k(`âš ï¸ Click Delete again to permanently remove "${i.metadata?.name||`Artwork #${i.tokenId}`}"`,"warning"),setTimeout(()=>{p(!1)},5e3);return}p(!1);try{await d({...w,functionName:"burn",args:[i.tokenId]})}catch(g){console.error("Delete failed:",g),k("Failed to delete artwork. Please try again.","error")}},R=async()=>{if(!n)return;const g=!i.isListed,h=g?"public":"private";try{n(i.tokenId,g),await b({...w,functionName:"setTokenListed",args:[i.tokenId,g]})}catch(S){console.error("Failed to update listing status:",S),n(i.tokenId,!g),k(`Failed to set artwork as ${h}. Please try again.`,"error")}};return e.jsxs("div",{className:`${c.container} ${o?c.highlighted:""}`,children:[i.isLoading?e.jsxs("div",{className:c.loadingContainer,children:[e.jsx("div",{className:G}),e.jsx("p",{className:c.loadingText,children:"Loading artwork..."})]}):i.error?e.jsxs("div",{className:c.errorContainer,children:[e.jsx("div",{className:c.errorBox,children:e.jsx("p",{className:c.errorText,children:i.error})}),e.jsxs("p",{className:c.tokenIdText,children:["ID: ",i.tokenId.toString()]})]}):e.jsxs(e.Fragment,{children:[i.imageUrl?e.jsxs("div",{className:c.imageContainer,children:[e.jsx("img",{src:i.imageUrl,alt:i.metadata?.name||`${I({label:"imagegen.artwork"})} #${i.tokenId}`,className:c.image,onClick:$,style:{cursor:"pointer"},onError:g=>{const h=g.target;h.style.display="none",h.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:c.imageError,style:{display:"none"},children:"Image not available"})]}):e.jsx("div",{className:c.imagePlaceholder,children:"No image available"}),e.jsx("h3",{className:c.title,children:i.metadata?.name||`Artwork #${i.tokenId}`}),i.metadata?.description&&e.jsx("p",{className:c.description,children:i.metadata.description}),e.jsxs("div",{className:c.footer,children:[e.jsxs("span",{children:["ID: ",i.tokenId.toString()]}),!s&&n&&i.isListed!==void 0&&e.jsxs("label",{className:c.checkboxLabel,title:`${i.isListed?"NFT is publicly listed":"NFT is private"}`,children:[e.jsx("input",{type:"checkbox",checked:i.isListed,onChange:R,disabled:C||D,className:c.checkbox}),I({label:"imagegen.listed"})]}),s&&j&&e.jsxs("span",{title:`Owned by ${j}`,children:["Owner: ",j.slice(0,6),"...",j.slice(-4)]})]}),e.jsxs("div",{className:c.actions,children:[i.imageUrl&&e.jsx("button",{onClick:$,className:`${c.actionButton} ${ee}`,title:"View full size",children:"ðŸ” Zoom"}),i.imageUrl&&e.jsxs("button",{onClick:X,className:`${c.actionButton} ${se}`,title:"Download image",children:["â¬‡ï¸ ",I({label:"imagegen.download"})]}),e.jsxs("button",{onClick:M,className:`${c.actionButton} ${ee}`,title:"Share your artwork on the marketplace",children:["ðŸ“¤ ",I({label:"imagegen.share"})]}),s&&e.jsx(_e,{genImTokenId:i.tokenId}),!s&&e.jsx("button",{onClick:O,disabled:u||E,className:`${c.actionButton} ${u||E?ee:Ne}`,title:"Delete artwork (permanent)",style:{opacity:u||E?.6:1},children:u?"ðŸ—‘ï¸ Deleting...":E?"â³ Confirming...":`ðŸ—‘ï¸ ${I({label:"imagegen.delete"})}`})]})]}),y]})}function be({image:t,onClose:r}){const{showToast:a,ToastComponent:n}=we();l.useEffect(()=>{const s=d=>{d.key==="Escape"&&r()};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[r]);const o=async()=>{try{const d=await(await fetch(t.src)).blob(),u=window.URL.createObjectURL(d),x=document.createElement("a");x.href=u,x.download=`${t.title||"NFT-image"}.png`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(u)}catch(s){console.error("Download failed:",s),a("Download failed. Please try again.","error")}};return e.jsxs("div",{className:c.modalOverlay,onClick:r,children:[e.jsxs("div",{className:c.modalContent,onClick:s=>s.stopPropagation(),children:[e.jsx("button",{className:c.modalClose,onClick:r,children:"âœ•"}),e.jsx("img",{src:t.src,alt:t.alt,className:c.modalImage}),(t.title||t.description)&&e.jsxs("div",{className:c.modalInfo,children:[t.title&&e.jsx("h3",{className:c.modalTitle,children:t.title}),t.description&&e.jsx("p",{className:c.modalDescription,children:t.description}),e.jsx("div",{className:c.actions,style:{justifyContent:"center",marginTop:"12px"},children:e.jsx("button",{onClick:o,className:`${c.actionButton} ${se}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),n]})}function Me({newlyCreatedNFT:t,onNewNFTDisplayed:r}){const{address:a,isConnected:n}=Z(),o=J(),s=H(),[d,u]=l.useState([]),[x,b]=l.useState(!1),[C,P]=l.useState(null),[w,z]=l.useState(null),{data:p,isLoading:i}=Q({...s,functionName:"balanceOf",args:a?[a]:void 0,chainId:o.id,query:{enabled:!!a&&n}}),N=l.useCallback(async()=>{if(!n||!a){u([]);return}b(!0);try{const y=await re(ae,{...s,functionName:"balanceOf",args:[a]});if(!y||y===0n){u([]);return}const f=[];for(let T=0;T<Number(y);T++){const D=(async()=>{try{return await re(ae,{...s,functionName:"tokenOfOwnerByIndex",args:[a,BigInt(T)]})}catch(m){return console.error(`Error loading token ID at index ${T}:`,m),0n}})();f.push(D)}const E=(await Promise.all(f)).filter(T=>T>0n).sort((T,D)=>D>T?1:D<T?-1:0);u(E)}catch(y){console.error("Error loading token IDs:",y),u([])}finally{b(!1)}},[n,a]),j=y=>{P(y),u(f=>f.includes(y)?f:[y,...f]),setTimeout(()=>{P(null),r?.()},5e3)},B=l.useCallback((y,f)=>{console.log(`NFT ${y} listing status changed to: ${f}`)},[]);l.useEffect(()=>{n&&a&&N()},[a,n]),l.useEffect(()=>{t&&j(t.tokenId)},[t]);const k=i||x;return n?k&&d.length===0?e.jsxs("div",{className:U.loadingContainer,children:[e.jsx("div",{className:G}),e.jsx("p",{children:"Loading your artworks..."})]}):p===0n||!p?e.jsx("div",{className:U.emptyStateContainer,children:e.jsx("p",{className:U.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:U.grid,children:d.map((y,f)=>e.jsx(ye,{tokenId:y,onImageClick:z,onNftBurned:()=>N(),onListedStatusChanged:B,isHighlighted:C===y,isPublicView:!1},`my-${y}-${f}`))}),w&&e.jsx(be,{image:w,onClose:()=>z(null)})]}):e.jsxs("div",{className:U.walletPrompt,children:[e.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),e.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),e.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function Oe(){const t=H(),[r,a]=l.useState([]),[n,o]=l.useState(!1),[s,d]=l.useState(null),u=l.useMemo(()=>fe({chain:me,transport:ue()}),[]),x=l.useCallback(async()=>{o(!0);try{const b=await u.readContract({address:t.address,abi:t.abi,functionName:"getAllPublicTokens"});if(!b||b.length===0){a([]);return}const C=b.sort((P,w)=>w>P?1:w<P?-1:0);a(C)}catch(b){console.error("Error loading public token IDs:",b),a([])}finally{o(!1)}},[]);return l.useEffect(()=>{x()},[]),n&&r.length===0?e.jsxs("div",{className:U.loadingContainer,children:[e.jsx("div",{className:G}),e.jsx("p",{children:"Loading public artworks..."})]}):r.length===0?e.jsx("div",{className:U.emptyStateContainer,children:e.jsx("p",{className:U.emptyStateText,children:"No public artworks available yet."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:U.grid,children:r.map((b,C)=>e.jsx(ye,{tokenId:b,onImageClick:d,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${b}-${C}`))}),s&&e.jsx(be,{image:s,onClose:()=>d(null)})]})}function We({newlyCreatedNFT:t,onNewNFTDisplayed:r}={}){const{address:a,isConnected:n}=Z(),o=H(),[s,d]=l.useState(()=>n?"my":"public"),{data:u}=Q({...o,functionName:"balanceOf",args:a?[a]:void 0,chainId:J().id,query:{enabled:!!a&&n}});return e.jsxs("div",{className:U.container,children:[e.jsx("div",{className:_.container,children:e.jsxs("div",{className:_.tabList,children:[e.jsx(ce,{label:n?`${I({label:"imagegen.myArtworks"})} (${u?.toString()||"0"})`:I({label:"imagegen.myArtworks"}),isActive:s==="my",onClick:()=>d("my")}),e.jsx(ce,{label:I({label:"imagegen.allPublicArtworks"}),isActive:s==="public",onClick:()=>d("public")})]})}),e.jsx("div",{className:`${_.tabPanel} ${s==="my"?"":_.hiddenPanel}`,children:e.jsx(Me,{newlyCreatedNFT:t,onNewNFTDisplayed:r})}),e.jsx("div",{className:`${_.tabPanel} ${s==="public"?"":_.hiddenPanel}`,children:e.jsx(Oe,{})})]})}function qe(){const[t,r]=l.useState(null),a=(s,d,u)=>{console.log("Image generation succeeded:",{tokenId:s,imageUrl:d,metadata:u}),r({tokenId:s,imageUrl:d,metadata:u})},n=s=>{console.error("Image generation failed:",s)},o=()=>{r(null)};return e.jsxs("div",{className:ve,children:[e.jsx(Re,{onSuccess:a,onError:n}),e.jsx(We,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:o})]})}const Ge=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));function He(){return"AI Image Generator"}const Ke=Object.freeze(Object.defineProperty({__proto__:null,title:He},Symbol.toStringTag,{value:"Module"})),nt={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ae}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Le}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Pe}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ge}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Ie}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ke}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Se}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:je}},queryClientConfig:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/config",fileExportPathToShowToUser:["default","queryClientConfig"]},valueSerialized:{type:"js-serialized",value:"!undefined"}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ce}}};export{nt as configValuesSerialized};
