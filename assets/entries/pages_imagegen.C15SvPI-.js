import{aP as ze,aQ as Be,aR as Oe,O as Se,r as l,P as _e,c as $,j as e,u as Me,aS as We,aT as He,aU as Ge,T as K,aV as Ie,U as qe,S as w,aW as E,aX as d,aY as Q,aZ as Ve,an as Z,a_ as Ye,a$ as W,b0 as oe,Q as Ce,b1 as Pe,b2 as be,b3 as Qe,b4 as we,b5 as Le,b6 as B,g as Ze,F as Ke,a as Xe,W as Je,d as et,e as tt,f as nt,o as at}from"../chunks/chunk-Bb_NzOU8.js";import{e as X,b as ce,u as le,c as ie,d as ye,f as st,r as Te}from"../chunks/chunk-Co4kmlCr.js";import{d as rt}from"../chunks/chunk-CT5atk_u.js";import{c as $e}from"../chunks/chunk-CZXne8I4.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-C4DwcEI7.js";import"../chunks/chunk-Bfd2nxSe.js";let xe=[];function Ne(t){const n=t.chains;return ze(xe,n)?xe:(xe=n,n)}async function ot(t,n){const{addEthereumChainParameter:a,chainId:s}=n,c=t.state.connections.get(n.connector?.uid??t.state.current);if(c){const i=c.connector;if(!i.switchChain)throw new Be({connector:i});return await i.switchChain({addEthereumChainParameter:a,chainId:s})}const o=t.chains.find(i=>i.id===s);if(!o)throw new Oe;return t.setState(i=>({...i,chainId:s})),o}function it(t,n){const{onChange:a}=n;return t._internal.chains.subscribe((s,c)=>{a(s,c)})}function ct(t){return{mutationFn(n){return ot(t,n)},mutationKey:["switchChain"]}}function lt(t={}){const n=Se(t);return l.useSyncExternalStore(a=>it(n,{onChange:a}),()=>Ne(n),()=>Ne(n))}function dt(t={}){const{mutation:n}=t,a=Se(t),s=ct(a),{mutate:c,mutateAsync:o,...i}=_e({...n,...s});return{...i,chains:lt({config:a}),switchChain:c,switchChainAsync:o}}function ke({size:t="sm",className:n}){const a={xs:$({fontSize:"xs",lineHeight:"1"}),sm:$({fontSize:"sm",lineHeight:"1"}),md:$({fontSize:"md",lineHeight:"1"})},s=$({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return e.jsx("span",{className:`${s} ${a[t]} ${n||""}`,role:"img","aria-label":"Information",children:"i"})}function je({label:t,locale:n}){const s=Me(),c=n??s.locale??rt,i=We(c==="de"?He:Ge,t);return e.jsx("span",{"data-locale":c,children:i})}const ut=async t=>new Promise((n,a)=>{const s=async()=>{try{const c=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});c?n(c):setTimeout(s,2e3)}catch(c){a(c)}};s()});function mt({apiUrl:t="https://mypersonaljscloudivnad9dy-readnftv2.functions.fnc.fr-par.scw.cloud",onSuccess:n,onError:a}){const s=X(),[c,o]=l.useState(),[i,m]=l.useState(),[p,u]=l.useState(""),[T,j]=l.useState("1024x1024"),[P,O]=l.useState(!1),[g,_]=l.useState(!1),[S,r]=l.useState("idle"),[A,C]=l.useState(null),{address:x,isConnected:f}=K(),I=ce(),U=Ie(),{switchChain:v,isPending:L}=dt(),{connectors:F,connect:H}=qe(),{data:G}=le({...s,functionName:"mintPrice",args:[],...I?.id&&{chainId:I.id}}),{writeContractAsync:V}=ie(),M=async h=>new Promise((y,z)=>{const he=()=>{U===h?y():setTimeout(he,100)};setTimeout(()=>{z(new Error("Chain switch timeout - please try again"))},1e4),he()}),q=()=>{F.length>0&&H({connector:F[0]})},D=w({label:"imagegen.connectWalletButton"}),J=w({label:"imagegen.connectWalletTitle"}),ee=w({label:"imagegen.enterPrompt"}),de=w({label:"imagegen.switchingNetwork"}),ue=w({label:"imagegen.creating"}),me=w({label:"imagegen.generating"}),te=w({label:"imagegen.createArtwork"}),N=()=>L?"switching":g?"loading":f?p.trim()?"ready":"needsPrompt":"connect",b=h=>{switch(h){case"switching":return de;case"loading":return S==="minting"?ue:me;case"connect":return D;case"needsPrompt":return ee;case"ready":return te;default:return te}},k=N(),R=()=>e.jsxs("button",{onClick:q,className:`${Z}`,title:J,"aria-describedby":"create-artwork-info",children:["ðŸ”— ",D]}),ne=()=>{const h=k==="needsPrompt",y=k==="loading"||k==="switching";return e.jsx("button",{onClick:ae,disabled:h,className:`${Z} ${h?Ye:""}`,title:w({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Q}),b(k)]}):e.jsxs(e.Fragment,{children:["ðŸŽ¨ ",b(k),e.jsx(ke,{size:"xs",className:$({ml:"1",opacity:"0.7"})})]})})},ae=async()=>{if(!f||!x){const y="Please connect your account first";C(y),a?.(y);return}const h=I?.id;if(h&&U!==h)try{C("Switching to Optimism network..."),await v({chainId:h}),await M(h),C(null)}catch(y){console.error("Failed to switch chain:",y);const z=y instanceof Error?y.message:"Please switch to Optimism network to create artworks";C(z),a?.(z);return}if(!p.trim()){const y="Please enter a prompt";C(y),a?.(y);return}if(!G){const y="Could not load creation fee from system";C(y),a?.(y);return}_(!0),C(null),r("minting");try{const z=await V({...s,functionName:"safeMint",args:["",P],value:G,...I?.id&&{chainId:I.id}});console.log("Minting transaction sent:",z);const ge=(await ut(z))?.logs.find(Re=>Re.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!ge||ge.topics.length<4)throw new Error("Could not extract artwork ID from transaction");const Fe=ge.topics[3],Y=BigInt(Fe);console.log("Created artwork ID:",Y),m(Y),r("generating");const re=await fetch(`${t}?prompt=${encodeURIComponent(p)}&tokenId=${Y}&size=${T}`);if(!re.ok)throw new Error(`Error: ${re.status} ${re.statusText}`);const fe=await re.json();console.log("Image generation completed",fe);const pe=fe.image_url;o(pe),r("idle");const De={name:`AI Generated Artwork #${Y}`,description:`AI generated artwork based on the prompt: "${p}"`,image:pe,external_url:fe.metadata_url||"",attributes:[{trait_type:"Prompt",value:p},{trait_type:"Generation Method",value:"AI Generated"}]};n?.(Y,pe,De),setTimeout(()=>{u(""),j("1024x1024"),o(void 0),m(void 0),C(null)},3e3)}catch(y){console.error("Error:",y);const z=y instanceof Error?y.message:"An unknown error occurred";C(z),r("error"),a?.(z)}finally{_(!1)}},se=w({label:"imagegen.mintingInfo"});return e.jsx("div",{className:E.compactLayout,children:e.jsxs("div",{className:E.compactContainer,children:[e.jsx("div",{className:E.compactHeader,children:e.jsxs("h3",{className:E.compactTitle,children:["ðŸŽ¨",e.jsx(je,{label:"imagegen.title"})]})}),e.jsxs("div",{className:E.compactForm,children:[e.jsx("textarea",{value:p,onChange:h=>u(h.target.value),placeholder:w({label:"imagegen.promptPlaceholder"}),disabled:g||S!=="idle"||L,className:E.compactTextarea}),e.jsxs("div",{className:E.controlBar,children:[e.jsxs("div",{className:E.optionsGroup,children:[e.jsxs("select",{id:"imageSizeSelect",value:T,onChange:h=>j(h.target.value),disabled:g||S!=="idle"||L,className:E.compactSelect,"aria-label":"Select image format for your artwork",children:[e.jsx("option",{value:"1024x1024",children:w({label:"imagegen.square"})}),e.jsx("option",{value:"1792x1024",children:w({label:"imagegen.wide"})})]}),e.jsxs("label",{className:d.checkboxLabel,title:P?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:h=>O(h.target.checked),disabled:g||S!=="idle"||L,className:d.checkbox}),e.jsx(je,{label:"imagegen.listed"})]})]}),k==="connect"?e.jsx(R,{}):e.jsx(ne,{})]})]}),e.jsxs("div",{className:$({mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:["Powered by"," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer","aria-label":"Learn more about Optimism (opens in new tab)",className:$({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"Optimism"})," ","â€¢"," ",e.jsx("a",{href:`https://optimistic.etherscan.io/address/${s.address}`,target:"_blank",rel:"noopener noreferrer","aria-label":"View smart contract on Optimism Etherscan (opens in new tab)",className:$({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"View Contract â†—"})]}),e.jsx("span",{id:"create-artwork-info",className:$({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:w({label:"imagegen.mintingInfo"})}),e.jsxs("div",{className:$({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[e.jsx(ke,{size:"xs",className:$({mr:"1"})}),se]}),S!=="idle"&&e.jsxs("div",{className:E.compactStatus,children:[e.jsx("div",{className:Q}),e.jsx("span",{children:S==="minting"?"Creating your artwork...":"Generating image..."})]}),A&&e.jsx("div",{className:E.compactError,children:A}),i&&c&&e.jsxs("div",{className:Ve,children:[e.jsx("h4",{className:$({margin:0,fontSize:"sm"}),children:"âœ… Artwork created successfully!"}),e.jsxs("p",{className:$({margin:"xs 0",fontSize:"sm"}),children:["ID: ",i.toString()," - Check your gallery below"]})]})]})})}function ve({label:t,isActive:n,onClick:a}){return e.jsx("button",{className:`${W.tab} ${n?W.activeTab:""}`,onClick:a,"aria-selected":n,children:t})}function ht({message:t,type:n,duration:a,onClose:s}){const c=l.useRef(null);l.useEffect(()=>{const m=a??(n==="error"?4e3:n==="warning"?5e3:3e3);return c.current=setTimeout(()=>{s()},m),()=>{c.current&&clearTimeout(c.current)}},[a,n,s]);const o=()=>{switch(n){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":default:return"âŒ"}};return e.jsx("div",{className:oe.container,children:e.jsxs("div",{className:oe.content,"data-type":n,children:[e.jsx("span",{className:oe.icon,children:o()}),e.jsx("span",{className:oe.message,children:t})]})})}function Ae(){const[t,n]=l.useState(null),a=(o,i="error",m)=>{n({message:o,type:i,duration:m})},s=()=>{n(null)},c=t?e.jsx(ht,{message:t.message,type:t.type,duration:t.duration,onClose:s}):null;return{showToast:a,hideToast:s,ToastComponent:c}}function gt({genImTokenId:t}){const[n,a]=l.useState(!1),{isConnected:s}=K(),c=Ie(),{writeContract:o,isPending:i,data:m,error:p}=ie(),{isLoading:u,isSuccess:T}=ye({hash:m}),j=ce(),P=st(),O=c===j.id,{data:g,error:_,isPending:S,refetch:r}=le({...P,functionName:"getMintStats",args:[t],chainId:j.id}),A=async()=>{if(!s||!O||!g||!Array.isArray(g))return;a(!0);const[,f]=g;o({...P,functionName:"mintCollectorNFT",args:[t],value:f})};l.useEffect(()=>{T&&(a(!1),setTimeout(()=>{r()},2e3)),p&&a(!1)},[T,p,r]);const C=()=>{if(S)return"...";if(_||!g||!Array.isArray(g))return"0";const[f]=g;return f.toString()},x=()=>{if(S||_||!g||!Array.isArray(g))return"Price loading...";const[f,I]=g,U=Ce(I),v=q=>{const D=parseFloat(q);return D>=.001?D.toFixed(3):D>=1e-4?D.toFixed(4):D.toFixed(6)},L=v(U),F=Number(f),H=Math.ceil((F+1)/5)*5,V=I/BigInt(2**Math.floor(F/5))*BigInt(2**Math.floor(H/5)),M=v(Ce(V));return`Current price: ${L} ETH | Price after ${H} mints: ${M} ETH`};return e.jsx("button",{onClick:A,disabled:!s||n||i||u||!O,className:`${d.actionButton} ${Z}`,title:`Collect this NFT (${C()} collected) | ${x()}`,children:n||i?"ðŸ“¦ Collecting...":T?"âœ… Collected!":`ðŸ“¦ ${w({label:"imagegen.collect"})} (${C()})`})}function Ee({tokenId:t,onImageClick:n,onNftBurned:a,onListedStatusChanged:s,isHighlighted:c=!1,isPublicView:o=!1,preloadedImageUrl:i,preloadedMetadata:m}){const{writeContract:p,isPending:u,data:T}=ie(),{writeContract:j,isPending:P,data:O}=ie(),g=X(),[_,S]=l.useState(!1),[r,A]=l.useState({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!i}),[C,x]=l.useState(""),{showToast:f,ToastComponent:I}=Ae(),U=w({label:"imagegen.artwork"}),v=w({label:"imagegen.listed"}),L=w({label:"imagegen.download"}),F=w({label:"imagegen.share"}),H=w({label:"imagegen.delete"}),G=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),V=async N=>{try{if(N.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",N),null;const b=await fetch(N);if(!b.ok)throw new Error(`Failed to fetch metadata: ${b.status}`);return await b.json()}catch(b){return console.error("Error fetching NFT metadata:",b),null}};l.useEffect(()=>{(async()=>{try{A(h=>({...h,isLoading:!0,error:void 0}));const k=await G.readContract({address:g.address,abi:g.abi,functionName:"tokenURI",args:[t]});if(!k&&(i||m)){A(h=>({...h,tokenURI:"",isLoading:!1}));return}let R="";o&&(R=await G.readContract({address:g.address,abi:g.abi,functionName:"ownerOf",args:[t]}),x(R));let ne;if(!o)try{ne=await Te(we,{...g,functionName:"isTokenListed",args:[t]})}catch(h){console.warn("Could not load listing status:",h)}let ae=m,se=i;if(k){const h=await V(k);h&&(ae=h,se=h.image)}A({tokenId:t,tokenURI:k,metadata:ae,imageUrl:se,isLoading:!1,isListed:ne})}catch(b){console.error(`Error loading NFT ${t}:`,b),A({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!1,error:`Failed to load NFT #${t}: ${b instanceof Error?b.message:"Unknown error"}`})}})()},[t,o,i,m]);const{isLoading:M,isSuccess:q}=ye({hash:T}),{isLoading:D,isSuccess:J}=ye({hash:O});l.useEffect(()=>{q&&setTimeout(()=>{a()},1e3)},[q]),l.useEffect(()=>{J&&s&&f("Listing status updated successfully!","success")},[J]);const ee=()=>{r.imageUrl&&n({src:r.imageUrl,alt:r.metadata?.name||`Artwork #${r.tokenId}`,title:r.metadata?.name,description:r.metadata?.description})},de=async()=>{if(r.imageUrl)try{const b=await(await fetch(r.imageUrl)).blob(),k=window.URL.createObjectURL(b),R=document.createElement("a");R.href=k,R.download=`${r.metadata?.name||`Artwork-${r.tokenId}`}.png`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(k)}catch(N){console.error("Download failed:",N),f("Download failed. Please try again.","error")}},ue=async()=>{const b=`https://opensea.io/item/optimism/${g.address}/${r.tokenId}`;try{await navigator.clipboard.writeText(b),f("OpenSea URL copied to clipboard!","success")}catch(k){console.error("Failed to copy URL:",k),window.open(b,"_blank","noopener,noreferrer")}},me=async()=>{if(!_){S(!0),f(`âš ï¸ Click Delete again to permanently remove "${r.metadata?.name||`Artwork #${r.tokenId}`}"`,"warning"),setTimeout(()=>{S(!1)},5e3);return}S(!1);try{await p({...g,functionName:"burn",args:[r.tokenId]})}catch(N){console.error("Delete failed:",N),f("Failed to delete artwork. Please try again.","error")}},te=async()=>{if(!s)return;const N=!r.isListed,b=N?"public":"private";try{s(r.tokenId,N),await j({...g,functionName:"setTokenListed",args:[r.tokenId,N]})}catch(k){console.error("Failed to update listing status:",k),s(r.tokenId,!N),f(`Failed to set artwork as ${b}. Please try again.`,"error")}};return e.jsxs("div",{className:`${d.container} ${c?d.highlighted:""}`,children:[r.isLoading?e.jsxs("div",{className:d.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{className:d.loadingText,children:"Loading artwork..."})]}):r.error?e.jsxs("div",{className:d.errorContainer,children:[e.jsx("div",{className:d.errorBox,children:e.jsx("p",{className:d.errorText,children:r.error})}),e.jsxs("p",{className:d.tokenIdText,children:["ID: ",r.tokenId.toString()]})]}):e.jsxs(e.Fragment,{children:[r.imageUrl?e.jsxs("div",{className:d.imageContainer,children:[e.jsx("img",{src:r.imageUrl,alt:r.metadata?.name||`${U} #${r.tokenId}`,className:d.image,onClick:ee,style:{cursor:"pointer"},onError:N=>{const b=N.target;b.style.display="none",b.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:d.imageError,style:{display:"none"},children:"Image not available"})]}):e.jsx("div",{className:d.imagePlaceholder,children:"No image available"}),e.jsx("h3",{className:d.title,children:r.metadata?.name||`Artwork #${r.tokenId}`}),r.metadata?.description&&e.jsx("p",{className:d.description,children:r.metadata.description}),e.jsxs("div",{className:d.footer,children:[e.jsxs("span",{children:["ID: ",r.tokenId.toString()]}),!o&&s&&r.isListed!==void 0&&e.jsxs("label",{className:d.checkboxLabel,title:`${r.isListed?"NFT is publicly listed":"NFT is private"}`,children:[e.jsx("input",{type:"checkbox",checked:r.isListed,onChange:te,disabled:P||D,className:d.checkbox}),v]}),o&&C&&e.jsxs("span",{title:`Owned by ${C}`,children:["Owner: ",C.slice(0,6),"...",C.slice(-4)]})]}),e.jsxs("div",{className:d.actions,children:[r.imageUrl&&e.jsx("button",{onClick:ee,className:`${d.actionButton} ${be}`,title:"View full size",children:"ðŸ” Zoom"}),r.imageUrl&&e.jsxs("button",{onClick:de,className:`${d.actionButton} ${Z}`,title:"Download image",children:["â¬‡ï¸ ",L]}),e.jsxs("button",{onClick:ue,className:`${d.actionButton} ${be}`,title:"Share your artwork on the marketplace",children:["ðŸ“¤ ",F]}),o&&e.jsx(gt,{genImTokenId:r.tokenId}),!o&&e.jsx("button",{onClick:me,disabled:u||M,className:`${d.actionButton} ${u||M?be:Qe}`,title:"Delete artwork (permanent)",style:{opacity:u||M?.6:1},children:u?"ðŸ—‘ï¸ Deleting...":M?"â³ Confirming...":`ðŸ—‘ï¸ ${H}`})]})]}),I]})}function Ue({image:t,onClose:n}){const{showToast:a,ToastComponent:s}=Ae();l.useEffect(()=>{const o=i=>{i.key==="Escape"&&n()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[n]);const c=async()=>{try{const i=await(await fetch(t.src)).blob(),m=window.URL.createObjectURL(i),p=document.createElement("a");p.href=m,p.download=`${t.title||"NFT-image"}.png`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(m)}catch(o){console.error("Download failed:",o),a("Download failed. Please try again.","error")}};return e.jsxs("div",{className:d.modalOverlay,onClick:n,children:[e.jsxs("div",{className:d.modalContent,onClick:o=>o.stopPropagation(),children:[e.jsx("button",{className:d.modalClose,onClick:n,children:"âœ•"}),e.jsx("img",{src:t.src,alt:t.alt,className:d.modalImage}),(t.title||t.description)&&e.jsxs("div",{className:d.modalInfo,children:[t.title&&e.jsx("h3",{className:d.modalTitle,children:t.title}),t.description&&e.jsx("p",{className:d.modalDescription,children:t.description}),e.jsx("div",{className:d.actions,style:{justifyContent:"center",marginTop:"12px"},children:e.jsx("button",{onClick:c,className:`${d.actionButton} ${Z}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function ft({newlyCreatedNFT:t,onNewNFTDisplayed:n}){const{address:a,isConnected:s}=K(),c=ce(),o=X(),[i,m]=l.useState([]),[p,u]=l.useState(!1),[T,j]=l.useState(null),[P,O]=l.useState(null),{data:g,isLoading:_}=le({...o,functionName:"balanceOf",args:a?[a]:void 0,chainId:c.id,query:{enabled:!!a&&s}}),S=l.useCallback(async()=>{if(!s||!a){m([]);return}u(!0);try{const x=await Te(we,{...o,functionName:"balanceOf",args:[a]});if(!x||x===0n){m([]);return}const f=[];for(let v=0;v<Number(x);v++){const L=(async()=>{try{return await Te(we,{...o,functionName:"tokenOfOwnerByIndex",args:[a,BigInt(v)]})}catch(F){return console.error(`Error loading token ID at index ${v}:`,F),0n}})();f.push(L)}const U=(await Promise.all(f)).filter(v=>v>0n).sort((v,L)=>L>v?1:L<v?-1:0);m(U)}catch(x){console.error("Error loading token IDs:",x),m([])}finally{u(!1)}},[s,a]),r=x=>{j(x),m(f=>f.includes(x)?f:[x,...f]),setTimeout(()=>{j(null),n?.()},5e3)},A=l.useCallback((x,f)=>{console.log(`NFT ${x} listing status changed to: ${f}`)},[]);l.useEffect(()=>{s&&a&&S()},[a,s]),l.useEffect(()=>{t&&r(t.tokenId)},[t]);const C=_||p;return s?C&&i.length===0?e.jsxs("div",{className:B.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{children:"Loading your artworks..."})]}):g===0n||!g?e.jsx("div",{className:B.emptyStateContainer,children:e.jsx("p",{className:B.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:B.grid,children:i.map((x,f)=>{const I=t?.tokenId===x,U=I?t.imageUrl:void 0,v=I?t.metadata:void 0;return e.jsx(Ee,{tokenId:x,onImageClick:O,onNftBurned:()=>S(),onListedStatusChanged:A,isHighlighted:T===x,isPublicView:!1,preloadedImageUrl:U,preloadedMetadata:v},`my-${x}-${f}`)})}),P&&e.jsx(Ue,{image:P,onClose:()=>O(null)})]}):e.jsxs("div",{className:B.walletPrompt,children:[e.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),e.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),e.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function pt(){const t=X(),[n,a]=l.useState([]),[s,c]=l.useState(!1),[o,i]=l.useState(null),m=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),p=l.useCallback(async()=>{c(!0);try{const u=await m.readContract({address:t.address,abi:t.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){a([]);return}const T=u.sort((j,P)=>P>j?1:P<j?-1:0);a(T)}catch(u){console.error("Error loading public token IDs:",u),a([])}finally{c(!1)}},[]);return l.useEffect(()=>{p()},[]),s&&n.length===0?e.jsxs("div",{className:B.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{children:"Loading public artworks..."})]}):n.length===0?e.jsx("div",{className:B.emptyStateContainer,children:e.jsx("p",{className:B.emptyStateText,children:"No public artworks available yet."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:B.grid,children:n.map((u,T)=>e.jsx(Ee,{tokenId:u,onImageClick:i,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${T}`))}),o&&e.jsx(Ue,{image:o,onClose:()=>i(null)})]})}function bt({newlyCreatedNFT:t,onNewNFTDisplayed:n,activeTab:a,onTabChange:s}={}){const{address:c,isConnected:o}=K(),i=X(),[m,p]=l.useState(()=>o?"my":"public"),u=a??m,T=s??p,{data:j}=le({...i,functionName:"balanceOf",args:c?[c]:void 0,chainId:ce().id,query:{enabled:!!c&&o}});return e.jsxs("div",{className:B.container,children:[e.jsx("div",{className:W.container,children:e.jsxs("div",{className:W.tabList,children:[e.jsx(ve,{label:o?`${w({label:"imagegen.myArtworks"})} (${j?.toString()||"0"})`:w({label:"imagegen.myArtworks"}),isActive:u==="my",onClick:()=>T("my")}),e.jsx(ve,{label:w({label:"imagegen.allPublicArtworks"}),isActive:u==="public",onClick:()=>T("public")})]})}),e.jsx("div",{className:`${W.tabPanel} ${u==="my"?"":W.hiddenPanel}`,children:e.jsx(ft,{newlyCreatedNFT:t,onNewNFTDisplayed:n})}),e.jsx("div",{className:`${W.tabPanel} ${u==="public"?"":W.hiddenPanel}`,children:e.jsx(pt,{})})]})}function xt(){const{isConnected:t}=K(),[n,a]=l.useState(null),[s,c]=l.useState(()=>t?"my":"public"),o=(u,T,j)=>{console.log("Image generation succeeded:",{tokenId:u,imageUrl:T,metadata:j}),a({tokenId:u,imageUrl:T,metadata:j}),t&&c("my")},i=u=>{console.error("Image generation failed:",u)},m=()=>{a(null)},p=u=>{c(u)};return e.jsxs("div",{className:Ze,children:[e.jsx(mt,{onSuccess:o,onError:i}),e.jsx(bt,{newlyCreatedNFT:n??void 0,onNewNFTDisplayed:m,activeTab:s,onTabChange:p})]})}const wt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function yt(){return"AI Image Generator"}const Tt=Object.freeze(Object.defineProperty({__proto__:null,title:yt},Symbol.toStringTag,{value:"Module"})),$t={serverOnlyHooks:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:at}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:nt}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:tt}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:wt}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:et}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Tt}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Je}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Xe}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ke}}};export{$t as configValuesSerialized};
