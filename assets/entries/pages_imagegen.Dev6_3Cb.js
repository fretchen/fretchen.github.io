import{aP as ze,aQ as Be,aR as Oe,O as Se,r as l,P as _e,c as A,j as e,u as Me,aS as We,aT as He,aU as Ge,T as K,aV as Ie,U as qe,S as w,aW as D,aX as d,aY as Q,aZ as Ve,an as Z,a_ as Ye,a$ as H,b0 as oe,Q as Ce,b1 as Pe,b2 as be,b3 as Qe,b4 as we,b5 as Le,b6 as O,g as Ze,F as Ke,a as Xe,W as Je,d as et,e as tt,f as at,o as nt}from"../chunks/chunk-opfS9jr-.js";import{e as X,b as ce,u as le,c as ie,d as ye,f as st,r as Te}from"../chunks/chunk-STdQoc8w.js";import{d as rt}from"../chunks/chunk-CT5atk_u.js";import{c as $e}from"../chunks/chunk-CM0ipn-0.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-CyfuVoiA.js";import"../chunks/chunk-D8vQLVYS.js";let xe=[];function ke(t){const a=t.chains;return ze(xe,a)?xe:(xe=a,a)}async function ot(t,a){const{addEthereumChainParameter:n,chainId:s}=a,c=t.state.connections.get(a.connector?.uid??t.state.current);if(c){const i=c.connector;if(!i.switchChain)throw new Be({connector:i});return await i.switchChain({addEthereumChainParameter:n,chainId:s})}const o=t.chains.find(i=>i.id===s);if(!o)throw new Oe;return t.setState(i=>({...i,chainId:s})),o}function it(t,a){const{onChange:n}=a;return t._internal.chains.subscribe((s,c)=>{n(s,c)})}function ct(t){return{mutationFn(a){return ot(t,a)},mutationKey:["switchChain"]}}function lt(t={}){const a=Se(t);return l.useSyncExternalStore(n=>it(a,{onChange:n}),()=>ke(a),()=>ke(a))}function dt(t={}){const{mutation:a}=t,n=Se(t),s=ct(n),{mutate:c,mutateAsync:o,...i}=_e({...a,...s});return{...i,chains:lt({config:n}),switchChain:c,switchChainAsync:o}}function Ne({size:t="sm",className:a}){const n={xs:A({fontSize:"xs",lineHeight:"1"}),sm:A({fontSize:"sm",lineHeight:"1"}),md:A({fontSize:"md",lineHeight:"1"})},s=A({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return e.jsx("span",{className:`${s} ${n[t]} ${a||""}`,role:"img","aria-label":"Information",children:"i"})}function je({label:t,locale:a}){const s=Me(),c=a??s.locale??rt,i=We(c==="de"?He:Ge,t);return e.jsx("span",{"data-locale":c,children:i})}const ut=async t=>new Promise((a,n)=>{const s=async()=>{try{const c=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});c?a(c):setTimeout(s,2e3)}catch(c){n(c)}};s()});function mt({apiUrl:t="https://mypersonaljscloudivnad9dy-readnftv2.functions.fnc.fr-par.scw.cloud",onSuccess:a,onError:n}){const s=X(),[c,o]=l.useState(),[i,m]=l.useState(),[g,u]=l.useState(""),[y,N]=l.useState("1024x1024"),[S,U]=l.useState(!1),[T,L]=l.useState(!1),[I,r]=l.useState("idle"),[E,j]=l.useState(null),{address:f,isConnected:p}=K(),v=ce(),F=Ie(),{switchChain:P,isPending:$}=dt(),{connectors:_,connect:G}=qe(),{data:M}=le({...s,functionName:"mintPrice",args:[],...v?.id&&{chainId:v.id}}),{writeContractAsync:J}=ie(),W=async h=>new Promise((x,B)=>{const he=()=>{F===h?x():setTimeout(he,100)};setTimeout(()=>{B(new Error("Chain switch timeout - please try again"))},1e4),he()}),q=()=>{_.length>0&&G({connector:_[0]})},V=w({label:"imagegen.connectWalletButton"}),R=w({label:"imagegen.connectWalletTitle"}),ee=w({label:"imagegen.enterPrompt"}),de=w({label:"imagegen.switchingNetwork"}),ue=w({label:"imagegen.creating"}),me=w({label:"imagegen.generating"}),te=w({label:"imagegen.createArtwork"}),C=()=>$?"switching":T?"loading":p?g.trim()?"ready":"needsPrompt":"connect",b=h=>{switch(h){case"switching":return de;case"loading":return I==="minting"?ue:me;case"connect":return V;case"needsPrompt":return ee;case"ready":return te;default:return te}},k=C(),z=()=>e.jsxs("button",{onClick:q,className:`${Z}`,title:R,"aria-describedby":"create-artwork-info",children:["ðŸ”— ",V]}),ae=()=>{const h=k==="needsPrompt",x=k==="loading"||k==="switching";return e.jsx("button",{onClick:ne,disabled:h,className:`${Z} ${h?Ye:""}`,title:w({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Q}),b(k)]}):e.jsxs(e.Fragment,{children:["ðŸŽ¨ ",b(k),e.jsx(Ne,{size:"xs",className:A({ml:"1",opacity:"0.7"})})]})})},ne=async()=>{if(!p||!f){const x="Please connect your account first";j(x),n?.(x);return}const h=v?.id;if(h&&F!==h)try{j("Switching to Optimism network..."),await P({chainId:h}),await W(h),j(null)}catch(x){console.error("Failed to switch chain:",x);const B=x instanceof Error?x.message:"Please switch to Optimism network to create artworks";j(B),n?.(B);return}if(!g.trim()){const x="Please enter a prompt";j(x),n?.(x);return}if(!M){const x="Could not load creation fee from system";j(x),n?.(x);return}L(!0),j(null),r("minting");try{const B=await J({...s,functionName:"safeMint",args:["",S],value:M,...v?.id&&{chainId:v.id}});console.log("Minting transaction sent:",B);const ge=(await ut(B))?.logs.find(Re=>Re.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!ge||ge.topics.length<4)throw new Error("Could not extract artwork ID from transaction");const Fe=ge.topics[3],Y=BigInt(Fe);console.log("Created artwork ID:",Y),m(Y),r("generating");const re=await fetch(`${t}?prompt=${encodeURIComponent(g)}&tokenId=${Y}&size=${y}`);if(!re.ok)throw new Error(`Error: ${re.status} ${re.statusText}`);const fe=await re.json();console.log("Image generation completed",fe);const pe=fe.image_url;o(pe),r("idle");const De={name:`AI Generated Artwork #${Y}`,description:`AI generated artwork based on the prompt: "${g}"`,image:pe,external_url:fe.metadata_url||"",attributes:[{trait_type:"Prompt",value:g},{trait_type:"Generation Method",value:"AI Generated"}]};a?.(Y,pe,De),setTimeout(()=>{u(""),N("1024x1024"),o(void 0),m(void 0),j(null)},3e3)}catch(x){console.error("Error:",x);const B=x instanceof Error?x.message:"An unknown error occurred";j(B),r("error"),n?.(B)}finally{L(!1)}},se=w({label:"imagegen.mintingInfo"});return e.jsx("div",{className:D.compactLayout,children:e.jsxs("div",{className:D.compactContainer,children:[e.jsx("div",{className:D.compactHeader,children:e.jsxs("h3",{className:D.compactTitle,children:["ðŸŽ¨",e.jsx(je,{label:"imagegen.title"})]})}),e.jsxs("div",{className:D.compactForm,children:[e.jsx("textarea",{value:g,onChange:h=>u(h.target.value),placeholder:w({label:"imagegen.promptPlaceholder"}),disabled:T||I!=="idle"||$,className:D.compactTextarea}),e.jsxs("div",{className:D.controlBar,children:[e.jsxs("div",{className:D.optionsGroup,children:[e.jsxs("select",{id:"imageSizeSelect",value:y,onChange:h=>N(h.target.value),disabled:T||I!=="idle"||$,className:D.compactSelect,"aria-label":"Select image format for your artwork",children:[e.jsx("option",{value:"1024x1024",children:w({label:"imagegen.square"})}),e.jsx("option",{value:"1792x1024",children:w({label:"imagegen.wide"})})]}),e.jsxs("label",{className:d.checkboxLabel,title:S?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:h=>U(h.target.checked),disabled:T||I!=="idle"||$,className:d.checkbox}),e.jsx(je,{label:"imagegen.listed"})]})]}),k==="connect"?e.jsx(z,{}):e.jsx(ae,{})]})]}),e.jsxs("div",{className:A({mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:["Powered by"," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer","aria-label":"Learn more about Optimism (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"Optimism"})," ","â€¢"," ",e.jsx("a",{href:`https://optimistic.etherscan.io/address/${s.address}`,target:"_blank",rel:"noopener noreferrer","aria-label":"View smart contract on Optimism Etherscan (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"View Contract â†—"})]}),e.jsx("span",{id:"create-artwork-info",className:A({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:w({label:"imagegen.mintingInfo"})}),e.jsxs("div",{className:A({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[e.jsx(Ne,{size:"xs",className:A({mr:"1"})}),se]}),I!=="idle"&&e.jsxs("div",{className:D.compactStatus,children:[e.jsx("div",{className:Q}),e.jsx("span",{children:I==="minting"?"Creating your artwork...":"Generating image..."})]}),E&&e.jsx("div",{className:D.compactError,children:E}),i&&c&&e.jsxs("div",{className:Ve,children:[e.jsx("h4",{className:A({margin:0,fontSize:"sm"}),children:"âœ… Artwork created successfully!"}),e.jsxs("p",{className:A({margin:"xs 0",fontSize:"sm"}),children:["ID: ",i.toString()," - Check your gallery below"]})]})]})})}function ve({label:t,isActive:a,onClick:n}){return e.jsx("button",{className:`${H.tab} ${a?H.activeTab:""}`,onClick:n,"aria-selected":a,children:t})}function ht({message:t,type:a,duration:n,onClose:s}){const c=l.useRef(null);l.useEffect(()=>{const m=n??(a==="error"?4e3:a==="warning"?5e3:3e3);return c.current=setTimeout(()=>{s()},m),()=>{c.current&&clearTimeout(c.current)}},[n,a,s]);const o=()=>{switch(a){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":default:return"âŒ"}};return e.jsx("div",{className:oe.container,children:e.jsxs("div",{className:oe.content,"data-type":a,children:[e.jsx("span",{className:oe.icon,children:o()}),e.jsx("span",{className:oe.message,children:t})]})})}function Ae(){const[t,a]=l.useState(null),n=(o,i="error",m)=>{a({message:o,type:i,duration:m})},s=()=>{a(null)},c=t?e.jsx(ht,{message:t.message,type:t.type,duration:t.duration,onClose:s}):null;return{showToast:n,hideToast:s,ToastComponent:c}}function gt({genImTokenId:t}){const[a,n]=l.useState(!1),{isConnected:s}=K(),c=Ie(),{writeContract:o,isPending:i,data:m,error:g}=ie(),{isLoading:u,isSuccess:y}=ye({hash:m}),N=ce(),S=st(),U=c===N.id,T=w({label:"imagegen.collect"}),{data:L,error:I,isPending:r,refetch:E}=le({...S,functionName:"getMintStats",args:[t],chainId:N.id}),j=async()=>{if(!s||!U||!L||!Array.isArray(L))return;n(!0);const[,v]=L;o({...S,functionName:"mintCollectorNFT",args:[t],value:v})};l.useEffect(()=>{y&&(n(!1),setTimeout(()=>{E()},2e3)),g&&n(!1)},[y,g,E]);const f=()=>{if(r)return"...";if(I||!L||!Array.isArray(L))return"0";const[v]=L;return v.toString()},p=()=>{if(r||I||!L||!Array.isArray(L))return"Price loading...";const[v,F]=L,P=Ce(F),$=V=>{const R=parseFloat(V);return R>=.001?R.toFixed(3):R>=1e-4?R.toFixed(4):R.toFixed(6)},_=$(P),G=Number(v),M=Math.ceil((G+1)/5)*5,W=F/BigInt(2**Math.floor(G/5))*BigInt(2**Math.floor(M/5)),q=$(Ce(W));return`Current price: ${_} ETH | Price after ${M} mints: ${q} ETH`};return e.jsx("button",{onClick:j,disabled:!s||a||i||u||!U,className:`${d.actionButton} ${Z}`,title:`Collect this NFT (${f()} collected) | ${p()}`,children:a||i?"ðŸ“¦ Collecting...":y?"âœ… Collected!":`ðŸ“¦ ${T} (${f()})`})}function Ee({tokenId:t,onImageClick:a,onNftBurned:n,onListedStatusChanged:s,isHighlighted:c=!1,isPublicView:o=!1,preloadedImageUrl:i,preloadedMetadata:m}){const{writeContract:g,isPending:u,data:y}=ie(),{writeContract:N,isPending:S,data:U}=ie(),T=X(),[L,I]=l.useState(!1),[r,E]=l.useState({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!i}),[j,f]=l.useState(""),{showToast:p,ToastComponent:v}=Ae(),F=w({label:"imagegen.artwork"}),P=w({label:"imagegen.listed"}),$=w({label:"imagegen.download"}),_=w({label:"imagegen.share"}),G=w({label:"imagegen.delete"}),M=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),J=async C=>{try{if(C.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",C),null;const b=await fetch(C);if(!b.ok)throw new Error(`Failed to fetch metadata: ${b.status}`);return await b.json()}catch(b){return console.error("Error fetching NFT metadata:",b),null}};l.useEffect(()=>{(async()=>{try{E(h=>({...h,isLoading:!0,error:void 0}));const k=await M.readContract({address:T.address,abi:T.abi,functionName:"tokenURI",args:[t]});if(!k&&(i||m)){E(h=>({...h,tokenURI:"",isLoading:!1}));return}let z="";o&&(z=await M.readContract({address:T.address,abi:T.abi,functionName:"ownerOf",args:[t]}),f(z));let ae;if(!o)try{ae=await Te(we,{...T,functionName:"isTokenListed",args:[t]})}catch(h){console.warn("Could not load listing status:",h)}let ne=m,se=i;if(k){const h=await J(k);h&&(ne=h,se=h.image)}E({tokenId:t,tokenURI:k,metadata:ne,imageUrl:se,isLoading:!1,isListed:ae})}catch(b){console.error(`Error loading NFT ${t}:`,b),E({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!1,error:`Failed to load NFT #${t}: ${b instanceof Error?b.message:"Unknown error"}`})}})()},[t,o,i,m,T,M]);const{isLoading:W,isSuccess:q}=ye({hash:y}),{isLoading:V,isSuccess:R}=ye({hash:U});l.useEffect(()=>{q&&setTimeout(()=>{n()},1e3)},[q,n]),l.useEffect(()=>{R&&s&&p("Listing status updated successfully!","success")},[R,s,p]);const ee=()=>{r.imageUrl&&a({src:r.imageUrl,alt:r.metadata?.name||`Artwork #${r.tokenId}`,title:r.metadata?.name,description:r.metadata?.description})},de=async()=>{if(r.imageUrl)try{const b=await(await fetch(r.imageUrl)).blob(),k=window.URL.createObjectURL(b),z=document.createElement("a");z.href=k,z.download=`${r.metadata?.name||`Artwork-${r.tokenId}`}.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(k)}catch(C){console.error("Download failed:",C),p("Download failed. Please try again.","error")}},ue=async()=>{const b=`https://opensea.io/item/optimism/${T.address}/${r.tokenId}`;try{await navigator.clipboard.writeText(b),p("OpenSea URL copied to clipboard!","success")}catch(k){console.error("Failed to copy URL:",k),window.open(b,"_blank","noopener,noreferrer")}},me=async()=>{if(!L){I(!0),p(`âš ï¸ Click Delete again to permanently remove "${r.metadata?.name||`Artwork #${r.tokenId}`}"`,"warning"),setTimeout(()=>{I(!1)},5e3);return}I(!1);try{await g({...T,functionName:"burn",args:[r.tokenId]})}catch(C){console.error("Delete failed:",C),p("Failed to delete artwork. Please try again.","error")}},te=async()=>{if(!s)return;const C=!r.isListed,b=C?"public":"private";try{s(r.tokenId,C),await N({...T,functionName:"setTokenListed",args:[r.tokenId,C]})}catch(k){console.error("Failed to update listing status:",k),s(r.tokenId,!C),p(`Failed to set artwork as ${b}. Please try again.`,"error")}};return e.jsxs("div",{className:`${d.container} ${c?d.highlighted:""}`,children:[r.isLoading?e.jsxs("div",{className:d.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{className:d.loadingText,children:"Loading artwork..."})]}):r.error?e.jsxs("div",{className:d.errorContainer,children:[e.jsx("div",{className:d.errorBox,children:e.jsx("p",{className:d.errorText,children:r.error})}),e.jsxs("p",{className:d.tokenIdText,children:["ID: ",r.tokenId.toString()]})]}):e.jsxs(e.Fragment,{children:[r.imageUrl?e.jsxs("div",{className:d.imageContainer,children:[e.jsx("img",{src:r.imageUrl,alt:r.metadata?.name||`${F} #${r.tokenId}`,className:d.image,onClick:ee,style:{cursor:"pointer"},onError:C=>{const b=C.target;b.style.display="none",b.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:d.imageError,style:{display:"none"},children:"Image not available"})]}):e.jsx("div",{className:d.imagePlaceholder,children:"No image available"}),e.jsx("h3",{className:d.title,children:r.metadata?.name||`Artwork #${r.tokenId}`}),r.metadata?.description&&e.jsx("p",{className:d.description,children:r.metadata.description}),e.jsxs("div",{className:d.footer,children:[e.jsxs("span",{children:["ID: ",r.tokenId.toString()]}),!o&&s&&r.isListed!==void 0&&e.jsxs("label",{className:d.checkboxLabel,title:`${r.isListed?"NFT is publicly listed":"NFT is private"}`,children:[e.jsx("input",{type:"checkbox",checked:r.isListed,onChange:te,disabled:S||V,className:d.checkbox}),P]}),o&&j&&e.jsxs("span",{title:`Owned by ${j}`,children:["Owner: ",j.slice(0,6),"...",j.slice(-4)]})]}),e.jsxs("div",{className:d.actions,children:[r.imageUrl&&e.jsx("button",{onClick:ee,className:`${d.actionButton} ${be}`,title:"View full size",children:"ðŸ” Zoom"}),r.imageUrl&&e.jsxs("button",{onClick:de,className:`${d.actionButton} ${Z}`,title:"Download image",children:["â¬‡ï¸ ",$]}),e.jsxs("button",{onClick:ue,className:`${d.actionButton} ${be}`,title:"Share your artwork on the marketplace",children:["ðŸ“¤ ",_]}),o&&e.jsx(gt,{genImTokenId:r.tokenId}),!o&&e.jsx("button",{onClick:me,disabled:u||W,className:`${d.actionButton} ${u||W?be:Qe}`,title:"Delete artwork (permanent)",style:{opacity:u||W?.6:1},children:u?"ðŸ—‘ï¸ Deleting...":W?"â³ Confirming...":`ðŸ—‘ï¸ ${G}`})]})]}),v]})}function Ue({image:t,onClose:a}){const{showToast:n,ToastComponent:s}=Ae();l.useEffect(()=>{const o=i=>{i.key==="Escape"&&a()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[a]);const c=async()=>{try{const i=await(await fetch(t.src)).blob(),m=window.URL.createObjectURL(i),g=document.createElement("a");g.href=m,g.download=`${t.title||"NFT-image"}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m)}catch(o){console.error("Download failed:",o),n("Download failed. Please try again.","error")}};return e.jsxs("div",{className:d.modalOverlay,onClick:a,children:[e.jsxs("div",{className:d.modalContent,onClick:o=>o.stopPropagation(),children:[e.jsx("button",{className:d.modalClose,onClick:a,children:"âœ•"}),e.jsx("img",{src:t.src,alt:t.alt,className:d.modalImage}),(t.title||t.description)&&e.jsxs("div",{className:d.modalInfo,children:[t.title&&e.jsx("h3",{className:d.modalTitle,children:t.title}),t.description&&e.jsx("p",{className:d.modalDescription,children:t.description}),e.jsx("div",{className:d.actions,style:{justifyContent:"center",marginTop:"12px"},children:e.jsx("button",{onClick:c,className:`${d.actionButton} ${Z}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function ft({newlyCreatedNFT:t,onNewNFTDisplayed:a}){const{address:n,isConnected:s}=K(),c=ce(),o=X(),[i,m]=l.useState([]),[g,u]=l.useState(!1),[y,N]=l.useState(null),[S,U]=l.useState(null),{data:T,isLoading:L}=le({...o,functionName:"balanceOf",args:n?[n]:void 0,chainId:c.id,query:{enabled:!!n&&s}}),I=l.useCallback(async()=>{if(!s||!n){m([]);return}u(!0);try{const f=await Te(we,{...o,functionName:"balanceOf",args:[n]});if(!f||f===0n){m([]);return}const p=[];for(let P=0;P<Number(f);P++){const $=(async()=>{try{return await Te(we,{...o,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(P)]})}catch(_){return console.error(`Error loading token ID at index ${P}:`,_),0n}})();p.push($)}const F=(await Promise.all(p)).filter(P=>P>0n).sort((P,$)=>$>P?1:$<P?-1:0);m(F)}catch(f){console.error("Error loading token IDs:",f),m([])}finally{u(!1)}},[s,n,o]),r=l.useCallback(f=>{N(f),m(p=>p.includes(f)?p:[f,...p]),setTimeout(()=>{N(null),a?.()},5e3)},[a]),E=l.useCallback((f,p)=>{console.log(`NFT ${f} listing status changed to: ${p}`)},[]);l.useEffect(()=>{s&&n&&I()},[n,s,I]),l.useEffect(()=>{t&&r(t.tokenId)},[t,r]);const j=L||g;return s?j&&i.length===0?e.jsxs("div",{className:O.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{children:"Loading your artworks..."})]}):T===0n||!T?e.jsx("div",{className:O.emptyStateContainer,children:e.jsx("p",{className:O.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.grid,children:i.map((f,p)=>{const v=t?.tokenId===f,F=v?t.imageUrl:void 0,P=v?t.metadata:void 0;return e.jsx(Ee,{tokenId:f,onImageClick:U,onNftBurned:()=>I(),onListedStatusChanged:E,isHighlighted:y===f,isPublicView:!1,preloadedImageUrl:F,preloadedMetadata:P},`my-${f}-${p}`)})}),S&&e.jsx(Ue,{image:S,onClose:()=>U(null)})]}):e.jsxs("div",{className:O.walletPrompt,children:[e.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),e.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),e.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function pt(){const t=X(),[a,n]=l.useState([]),[s,c]=l.useState(!1),[o,i]=l.useState(null),m=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),g=l.useCallback(async()=>{c(!0);try{const u=await m.readContract({address:t.address,abi:t.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){n([]);return}const y=u.sort((N,S)=>S>N?1:S<N?-1:0);n(y)}catch(u){console.error("Error loading public token IDs:",u),n([])}finally{c(!1)}},[t,m]);return l.useEffect(()=>{g()},[g]),s&&a.length===0?e.jsxs("div",{className:O.loadingContainer,children:[e.jsx("div",{className:Q}),e.jsx("p",{children:"Loading public artworks..."})]}):a.length===0?e.jsx("div",{className:O.emptyStateContainer,children:e.jsx("p",{className:O.emptyStateText,children:"No public artworks available yet."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:O.grid,children:a.map((u,y)=>e.jsx(Ee,{tokenId:u,onImageClick:i,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${y}`))}),o&&e.jsx(Ue,{image:o,onClose:()=>i(null)})]})}function bt({newlyCreatedNFT:t,onNewNFTDisplayed:a,activeTab:n,onTabChange:s}={}){const{address:c,isConnected:o}=K(),i=X(),[m,g]=l.useState(()=>o?"my":"public"),u=n??m,y=s??g,{data:N}=le({...i,functionName:"balanceOf",args:c?[c]:void 0,chainId:ce().id,query:{enabled:!!c&&o}}),S=w({label:"imagegen.myArtworks"}),U=w({label:"imagegen.allPublicArtworks"});return e.jsxs("div",{className:O.container,children:[e.jsx("div",{className:H.container,children:e.jsxs("div",{className:H.tabList,children:[e.jsx(ve,{label:o?`${S} (${N?.toString()||"0"})`:S,isActive:u==="my",onClick:()=>y("my")}),e.jsx(ve,{label:U,isActive:u==="public",onClick:()=>y("public")})]})}),e.jsx("div",{className:`${H.tabPanel} ${u==="my"?"":H.hiddenPanel}`,children:e.jsx(ft,{newlyCreatedNFT:t,onNewNFTDisplayed:a})}),e.jsx("div",{className:`${H.tabPanel} ${u==="public"?"":H.hiddenPanel}`,children:e.jsx(pt,{})})]})}function xt(){const{isConnected:t}=K(),[a,n]=l.useState(null),[s,c]=l.useState(()=>t?"my":"public"),o=(u,y,N)=>{console.log("Image generation succeeded:",{tokenId:u,imageUrl:y,metadata:N}),n({tokenId:u,imageUrl:y,metadata:N}),t&&c("my")},i=u=>{console.error("Image generation failed:",u)},m=()=>{n(null)},g=u=>{c(u)};return e.jsxs("div",{className:Ze,children:[e.jsx(mt,{onSuccess:o,onError:i}),e.jsx(bt,{newlyCreatedNFT:a??void 0,onNewNFTDisplayed:m,activeTab:s,onTabChange:g})]})}const wt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function yt(){return"AI Image Generator"}const Tt=Object.freeze(Object.defineProperty({__proto__:null,title:yt},Symbol.toStringTag,{value:"Module"})),$t={serverOnlyHooks:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:nt}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:at}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:tt}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:wt}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:et}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Tt}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Je}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Xe}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ke}}};export{$t as configValuesSerialized};
