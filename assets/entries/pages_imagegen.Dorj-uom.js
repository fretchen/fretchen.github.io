const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-qSl_MYnq.js","assets/chunks/chunk-DYNYrUwT.js","assets/chunks/chunk-t-pXVLBL.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.x05mXv0T.css"])))=>i.map(i=>d[i]);
import{bj as Z,bk as na,bl as sa,b4 as ra,n as qe,N as ee,bm as oa,B as ce,bn as ia,bo as je,bp as Me,bq as ca,br as la,bs as Oe,b0 as J,Y as da,s as ua,bt as ma,bu as ga,a$ as Ye,b1 as Xe,b2 as ha,b3 as pa,bv as fa,Q as ya,R as wa,bw as ba,a2 as se,T as Je,r as g,U as xa,w as b,j as a,u as Ta,bx as va,by as Ca,bz as Sa,a0 as Na,a3 as ka,X as f,ax as ve,bA as H,bB as S,bC as le,bD as ja,bE as Ia,bF as X,bG as Ie,$ as We,bH as V,v as Pa,F as Ea,a as Aa,W as Ra,c as La,d as Fa,e as _a,o as za}from"../chunks/chunk-DYNYrUwT.js";import{c as Ze,b as Ce,f as Da,o as Ua,h as $a,r as Ba,w as qa,p as et,d as Ma,s as Oa,i as Wa,u as de,j as Se,k as Ha,l as Ga,G as ue,g as me,m as Qa}from"../chunks/chunk-VfnaMnMS.js";import{d as Ka,_ as He}from"../chunks/chunk-t-pXVLBL.js";import{s as Re,A as ge,c as tt,d as Te,w as at,g as Va,r as Pe,u as Ee,b as Ae,a as Ya,e as Ge}from"../chunks/chunk-BYdNc-Ot.js";import{i as Xa}from"../chunks/chunk-CxoWmDES.js";import{s as nt,g as Ja,v as Za,a as en,G as Y,u as st}from"../chunks/chunk-DP62Ng4f.js";import{s as tn,A as an,u as Le}from"../chunks/chunk-DnHl9zvD.js";import{u as rt}from"../chunks/chunk-DKp3h0nI.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-jRlcrZXM.js";async function nn(e,{chain:t}){const{id:n,name:s,nativeCurrency:o,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:Z(n),chainName:s,nativeCurrency:o,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:l})=>l):void 0}]},{dedupe:!0,retryCount:0})}function sn(e,t){const{abi:n,args:s,bytecode:o,...r}=t,i=na({abi:n,args:s,bytecode:o});return Re(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function rn(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>sa(n))}const ot="0x5792579257925792579257925792579257925792579257925792579257925792",it=Z(0,{size:32});async function ct(e,t){const{account:n=e.account,capabilities:s,chain:o=e.chain,experimental_fallback:r,experimental_fallbackDelay:i=32,forceAtomic:l=!1,id:m,version:p="2.0.0"}=t,c=n?ee(n):null,h=t.calls.map(y=>{const d=y,T=d.abi?ra({abi:d.abi,functionName:d.functionName,args:d.args}):d.data;return{data:d.dataSuffix&&T?qe([T,d.dataSuffix]):T,to:d.to,value:d.value?Z(d.value):void 0}});try{const y=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:l,calls:h,capabilities:s,chainId:Z(o.id),from:c?.address,id:m,version:p}]},{retryCount:0});return typeof y=="string"?{id:y}:y}catch(y){const d=y;if(r&&(d.name==="MethodNotFoundRpcError"||d.name==="MethodNotSupportedRpcError"||d.name==="UnknownRpcError"||d.details.toLowerCase().includes("does not exist / is not available")||d.details.toLowerCase().includes("missing or invalid. request()")||d.details.toLowerCase().includes("did not match any variant of untagged enum")||d.details.toLowerCase().includes("account upgraded to unsupported contract")||d.details.toLowerCase().includes("eip-7702 not supported")||d.details.toLowerCase().includes("unsupported wc_ method")||d.details.toLowerCase().includes("feature toggled misconfigured")||d.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(s&&Object.values(s).some(C=>!C.optional)){const C="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new oa(new ce(C,{details:C}))}if(l&&h.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new ia(new ce(w,{details:w}))}const T=[];for(const w of h){const C=Re(e,{account:c,chain:o,data:w.data,to:w.to,value:w.value?je(w.value):void 0});T.push(C),i>0&&await new Promise(z=>setTimeout(z,i))}const v=await Promise.allSettled(T);if(v.every(w=>w.status==="rejected"))throw v[0].reason;const u=v.map(w=>w.status==="fulfilled"?w.value:it);return{id:qe([...u,Z(o.id,{size:32}),ot])}}throw Ze(y,{...t,account:c,chain:t.chain})}}async function lt(e,t){async function n(c){if(c.endsWith(ot.slice(2))){const y=la(Oe(c,-64,-32)),d=Oe(c,0,-64).slice(2).match(/.{1,64}/g),T=await Promise.all(d.map(u=>it.slice(2)!==u?e.request({method:"eth_getTransactionReceipt",params:[`0x${u}`]},{dedupe:!0}):void 0)),v=T.some(u=>u===null)?100:T.every(u=>u?.status==="0x1")?200:T.every(u=>u?.status==="0x0")?500:600;return{atomic:!1,chainId:Me(y),receipts:T.filter(Boolean),status:v,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[c]})}const{atomic:s=!1,chainId:o,receipts:r,version:i="2.0.0",...l}=await n(t.id),[m,p]=(()=>{const c=l.status;return c>=100&&c<200?["pending",c]:c>=200&&c<300?["success",c]:c>=300&&c<700?["failure",c]:c==="CONFIRMED"?["success",200]:c==="PENDING"?["pending",100]:[void 0,c]})();return{...l,atomic:s,chainId:o?Me(o):void 0,receipts:r?.map(c=>({...c,blockNumber:je(c.blockNumber),gasUsed:je(c.gasUsed),status:ca[c.status]}))??[],statusCode:p,status:m,version:i}}async function on(e,t={}){const{account:n=e.account,chainId:s}=t,o=n?ee(n):void 0,r=s?[o?.address,[Z(s)]]:[o?.address],i=await e.request({method:"wallet_getCapabilities",params:r}),l={};for(const[m,p]of Object.entries(i)){l[Number(m)]={};for(let[c,h]of Object.entries(p))c==="addSubAccount"&&(c="unstable_addSubAccount"),l[Number(m)][c]=h}return typeof s=="number"?l[s]:l}async function cn(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function dt(e,t){const{account:n=e.account,chainId:s,nonce:o}=t;if(!n)throw new ge({docsPath:"/docs/eip7702/prepareAuthorization"});const r=ee(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:ee(t.executor)})(),l={address:t.contractAddress??t.address,chainId:s,nonce:o};return typeof l.chainId>"u"&&(l.chainId=e.chain?.id??await J(e,Ce,"getChainId")({})),typeof l.nonce>"u"&&(l.nonce=await J(e,Da,"getTransactionCount")({address:r.address,blockTag:"pending"}),(i==="self"||i?.address&&Xa(i.address,r.address))&&(l.nonce+=1)),l}async function ln(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>da(n))}async function dn(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}class un extends ce{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function ut(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:o=({statusCode:v})=>v===200||v>=300,retryCount:r=4,retryDelay:i=({count:v})=>~~(1<<v)*200,timeout:l=6e4,throwOnFailure:m=!1}=t,p=ua(["waitForCallsStatus",e.uid,n]),{promise:c,resolve:h,reject:y}=ma();let d;const T=Ua(p,{resolve:h,reject:y},v=>{const u=$a(async()=>{const w=C=>{clearTimeout(d),u(),C(),T()};try{const C=await ga(async()=>{const z=await J(e,lt,"getCallsStatus")({id:n});if(m&&z.status==="failure")throw new un(z);return z},{retryCount:r,delay:i});if(!o(C))return;w(()=>v.resolve(C))}catch(C){w(()=>v.reject(C))}},{interval:s,emitOnBegin:!0});return u});return d=l?setTimeout(()=>{T(),clearTimeout(d),y(new mn({id:n}))},l):void 0,await c}class mn extends ce{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function gn(e,t){const{chain:n=e.chain}=t,s=t.timeout??Math.max((n?.blockTime??0)*3,5e3),o=await ct(e,t);return await ut(e,{...t,id:o.id,timeout:s})}const ke=new pa(128);async function mt(e,t){const{account:n=e.account,chain:s=e.chain,accessList:o,authorizationList:r,blobs:i,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:d,pollingInterval:T,throwOnReceiptRevert:v,type:u,value:w,...C}=t,z=t.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new ge({docsPath:"/docs/actions/wallet/sendTransactionSync"});const E=n?ee(n):null;try{Ye(t);const k=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Ba({authorization:r[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`.")})})();if(E?.type==="json-rpc"||E===null){let P;s!==null&&(P=await J(e,Ce,"getChainId")({}),tt({currentChainId:P,chain:s}));const D=e.chain?.formatters?.transactionRequest?.format,j=(D||Xe)({...ha(C,{format:D}),accessList:o,account:E,authorizationList:r,blobs:i,chainId:P,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:d,to:k,type:u,value:w},"sendTransaction"),L=ke.get(e.uid),U=L?"wallet_sendTransaction":"eth_sendTransaction",M=await(async()=>{try{return await e.request({method:U,params:[j]},{retryCount:0})}catch(_){if(L===!1)throw _;const $=_;if($.name==="InvalidInputRpcError"||$.name==="InvalidParamsRpcError"||$.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[j]},{retryCount:0}).then(q=>(ke.set(e.uid,!0),q)).catch(q=>{const W=q;throw W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError"?(ke.set(e.uid,!1),$):W});throw $}})(),F=await J(e,qa,"waitForTransactionReceipt")({checkReplacement:!1,hash:M,pollingInterval:T,timeout:z});if(v&&F.status==="reverted")throw new fa({receipt:F});return F}if(E?.type==="local"){const P=await J(e,et,"prepareTransactionRequest")({account:E,accessList:o,authorizationList:r,blobs:i,chain:s,data:l,gas:m,gasPrice:p,maxFeePerBlobGas:c,maxFeePerGas:h,maxPriorityFeePerGas:y,nonce:d,nonceManager:E.nonceManager,parameters:[...Ma,"sidecars"],type:u,value:w,...C,to:k}),D=s?.serializers?.transaction,R=await E.signTransaction(P,{serializer:D});return await J(e,nt,"sendRawTransactionSync")({serializedTransaction:R,throwOnReceiptRevert:v})}throw E?.type==="smart"?new Te({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Te({docsPath:"/docs/actions/wallet/sendTransactionSync",type:E?.type})}catch(k){throw k instanceof Te?k:Ze(k,{...t,account:E,chain:t.chain||void 0})}}async function hn(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function pn(e,t){const{account:n=e.account}=t;if(!n)throw new ge({docsPath:"/docs/eip7702/signAuthorization"});const s=ee(n);if(!s.signAuthorization)throw new Te({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const o=await dt(e,t);return s.signAuthorization(o)}async function fn(e,t){const{account:n=e.account,chain:s=e.chain,...o}=t;if(!n)throw new ge({docsPath:"/docs/actions/wallet/signTransaction"});const r=ee(n);Ye({account:r,...t});const i=await J(e,Ce,"getChainId")({});s!==null&&tt({currentChainId:i,chain:s});const m=(s?.formatters||e.chain?.formatters)?.transactionRequest?.format||Xe;return r.signTransaction?r.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...m({...o,account:r},"signTransaction"),chainId:Z(i),from:r.address}]},{retryCount:0})}async function yn(e,t){const{account:n=e.account,domain:s,message:o,primaryType:r}=t;if(!n)throw new ge({docsPath:"/docs/actions/wallet/signTypedData"});const i=ee(n),l={EIP712Domain:Ja({domain:s}),...t.types};if(Za({domain:s,message:o,primaryType:r,types:l}),i.signTypedData)return i.signTypedData({domain:s,message:o,primaryType:r,types:l});const m=en({domain:s,message:o,primaryType:r,types:l});return e.request({method:"eth_signTypedData_v4",params:[i.address,m]},{retryCount:0})}async function wn(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:Z(t)}]},{retryCount:0})}async function bn(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function xn(e,t){return at.internal(e,mt,"sendTransactionSync",t)}function Tn(e){return{addChain:t=>nn(e,t),deployContract:t=>sn(e,t),fillTransaction:t=>Wa(e,t),getAddresses:()=>rn(e),getCallsStatus:t=>lt(e,t),getCapabilities:t=>on(e,t),getChainId:()=>Ce(e),getPermissions:()=>cn(e),prepareAuthorization:t=>dt(e,t),prepareTransactionRequest:t=>et(e,t),requestAddresses:()=>ln(e),requestPermissions:t=>dn(e,t),sendCalls:t=>ct(e,t),sendCallsSync:t=>gn(e,t),sendRawTransaction:t=>Oa(e,t),sendRawTransactionSync:t=>nt(e,t),sendTransaction:t=>Re(e,t),sendTransactionSync:t=>mt(e,t),showCallsStatus:t=>hn(e,t),signAuthorization:t=>pn(e,t),signMessage:t=>tn(e,t),signTransaction:t=>fn(e,t),signTypedData:t=>yn(e,t),switchChain:t=>wn(e,t),waitForCallsStatus:t=>ut(e,t),watchAsset:t=>bn(e,t),writeContract:t=>at(e,t),writeContractSync:t=>xn(e,t)}}async function vn(e,t={}){return(await Va(e,t)).extend(Tn)}function Cn(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:s}=t,{connectorUid:o,scopeKey:r,...i}=n[1];return vn(e,{...i,connector:s})},queryKey:Sn(t)}}function Sn(e={}){const{connector:t,...n}=e;return["walletClient",{...ya(n),connectorUid:t?.uid}]}function Nn(e={}){const{query:t={},...n}=e,s=wa(n),o=ba(),{address:r,connector:i,status:l}=se({config:s}),m=Je({config:s}),p=e.connector??i,{queryKey:c,...h}=Cn(s,{...e,chainId:e.chainId??m,connector:e.connector??i}),y=!!((l==="connected"||l==="reconnecting"&&p?.getProvider)&&(t.enabled??!0)),d=g.useRef(r);return g.useEffect(()=>{const T=d.current;!r&&T?(o.removeQueries({queryKey:c}),d.current=void 0):r!==T&&(o.invalidateQueries({queryKey:c}),d.current=r)},[r,o]),xa({...t,...h,queryKey:c,enabled:y,staleTime:Number.POSITIVE_INFINITY})}function Qe({size:e="sm",className:t}){const n={xs:b({fontSize:"xs",lineHeight:"1"}),sm:b({fontSize:"sm",lineHeight:"1"}),md:b({fontSize:"md",lineHeight:"1"})},s=b({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return a.jsx("span",{className:`${s} ${n[e]} ${t||""}`,role:"img","aria-label":"Information",children:"i"})}function Ke({label:e,locale:t}){const s=Ta(),o=t??s.locale??Ka,i=va(o==="de"?Ca:Sa,e);return a.jsx("span",{"data-locale":o,children:i})}const kn="https://mypersonaljscloudivnad9dy-genimgx402token.functions.fnc.fr-par.scw.cloud";function jn(){const{data:e}=Nn(),{isConnected:t}=se(),[n,s]=g.useState("idle"),[o,r]=g.useState(null),[i,l]=g.useState(null),m=t&&!!e,p=g.useCallback(async h=>{if(!e)throw new Error("Wallet not connected");s("awaiting-signature"),r(null),l(null);try{const{x402Client:y,wrapFetchWithPayment:d,x402HTTPClient:T}=await He(async()=>{const{x402Client:R,wrapFetchWithPayment:j,x402HTTPClient:L}=await import("../chunks/chunk-6bqGUo_L.js");return{x402Client:R,wrapFetchWithPayment:j,x402HTTPClient:L}},[]),{registerExactEvmScheme:v}=await He(async()=>{const{registerExactEvmScheme:R}=await import("../chunks/chunk-qSl_MYnq.js");return{registerExactEvmScheme:R}},__vite__mapDeps([0,1,2,3,4])),u={address:e.account.address,signTypedData:e.signTypedData.bind(e)},w=new y;v(w,{signer:u});const{expectedChainId:C,...z}=h,P=await d(async(R,j)=>{const L=await fetch(R,j);if(L.status===402&&C){const U=L.headers.get("Payment-Required");if(U)try{const F=JSON.parse(atob(U)).accepts?.[0]?.network,_=`eip155:${C}`;if(F&&F!==_)throw new Error(`Chain mismatch! Expected ${_} but server requires ${F}. This could indicate a configuration error.`)}catch(M){if(M instanceof Error&&M.message.includes("Chain mismatch"))throw M}}return L},w)(kn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(s("processing"),!P.ok){const R=await P.text();throw new Error(`Request failed: ${P.status} - ${R}`)}const D=await P.json();try{const j=new T(w).getPaymentSettleResponse(L=>P.headers.get(L));j&&l({transaction:j.transaction,network:j.network})}catch{}return s("success"),D}catch(y){const d=y instanceof Error?y.message:"Unknown error";throw r(d),s("error"),y}},[e]),c=g.useCallback(()=>{s("idle"),r(null),l(null)},[]);return{generateImage:p,status:n,error:o,paymentReceipt:i,reset:c,isReady:m}}const In=(e,t,n=1920)=>{const s=e/t;return e<=n&&t<=n?{width:e,height:t}:e>t?{width:n,height:Math.round(n/s)}:{width:Math.round(n*s),height:n}},Pn=(e,t=1024)=>new Promise((n,s)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{const{width:l,height:m}=In(i.width,i.height);if(o.width=l,o.height=m,!r){s(new Error("Could not get canvas context"));return}r.fillStyle="white",r.fillRect(0,0,l,m),r.drawImage(i,0,0,l,m);let p=.9;const c=()=>{const h=o.toDataURL("image/jpeg",p);h.length*.75/1024<=t||p<=.1?n({base64:h.split(",")[1],mimeType:"image/jpeg"}):(p-=.1,setTimeout(c,0))};c()},i.onerror=()=>s(new Error("Failed to load image")),i.src=URL.createObjectURL(e)});function En({onSuccess:e,onError:t}){const{trackEvent:n}=Na(),{generateImage:s,status:o,error:r,paymentReceipt:i,reset:l}=jn(),[m,p]=g.useState(),[c,h]=g.useState(),[y,d]=g.useState(!1);g.useEffect(()=>{d(!0)},[]);const[T,v]=g.useState(),[u,w]=g.useState(null),[C,z]=g.useState("image/jpeg"),{address:E,isConnected:k}=se(),{connectors:P,connect:D}=ka(),R=y&&k,{network:j,switchIfNeeded:L}=de(ue),U=Se(j),M=Ha(j),F=Ga(j),[_,$]=g.useState("empty"),[q,W]=g.useState(""),[te,he]=g.useState("1024x1024"),[re,pe]=g.useState(!1),[ae,ne]=g.useState(!1),[fe,O]=g.useState(null),I=()=>{P.length>0&&D({connector:P[0]})},A=f({label:"imagegen.connectWalletButton"}),B=f({label:"imagegen.enterPrompt"}),G=f({label:"imagegen.generating"}),oe=f({label:"imagegen.createArtwork"}),ye=f({label:"imagegen.promptPlaceholder"}),Q=f({label:"imagegen.editPromptPlaceholder"}),Fe=f({label:"imagegen.editImage"}),pt=f({label:"imagegen.connectAccountFirst"}),ft=f({label:"imagegen.enterPromptError"}),yt=f({label:"imagegen.unknownError"}),wt=f({label:"imagegen.chainSwitchFailed"}),_e=f({label:"imagegen.awaitingSignature"}),bt=f({label:"imagegen.processingPayment"}),xt=f({label:"imagegen.uploadReferenceImage"}),Tt=f({label:"imagegen.dragDropHere"}),vt=f({label:"imagegen.supportedFormats"}),Ct=f({label:"imagegen.referenceImageTitle"}),St=f({label:"imagegen.generatedArtworkTitle"}),ze=f({label:"imagegen.remove"}),Nt=f({label:"imagegen.referenceImageAlt"}),kt=f({label:"imagegen.generatedArtworkAlt"}),jt=f({label:"imagegen.referenceImageHint"}),It=f({label:"imagegen.invalidFileType"}),Pt=f({label:"imagegen.fileTooLarge"}),Et=f({label:"imagegen.compressionFailed"}),At=f({label:"imagegen.failedToProcessImage"}),Rt=f({label:"imagegen.generatingImage"}),Lt=f({label:"imagegen.title"}),Ft=f({label:"imagegen.collapsedTitle"}),_t=f({label:"imagegen.collapsedDescription"}),zt=f({label:"imagegen.square"}),Dt=f({label:"imagegen.wide"}),Ut=f({label:"imagegen.mintingInfo"}),$t=f({label:"imagegen.artworkCreated"}),Bt=f({label:"imagegen.checkGallery"}),qt=()=>ae||o==="awaiting-signature"||o==="processing"?"loading":q.trim()?"ready":"needsPrompt",De=x=>{switch(x){case"loading":return o==="awaiting-signature"?_e:o==="processing"?bt:G;case"connect":return A;case"needsPrompt":return B;case"ready":return _!=="empty"?Fe:oe;default:return _!=="empty"?Fe:oe}},we=qt(),Mt=()=>{const x=we==="loading",N=we==="needsPrompt"||x,K=()=>{n("imagegen-create-artwork-click",{hasReferenceImage:_!=="empty",promptLength:q.trim().length,isConnected:k,imageSize:te,paymentMethod:"x402-usdc"}),Ot()};return a.jsx("button",{onClick:K,disabled:N,className:`${ve} ${N?Ia:""}`,title:f({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:le}),De(we)]}):a.jsxs(a.Fragment,{children:["ðŸŽ¨ ",De(we),a.jsx(Qe,{size:"xs",className:b({ml:"1",opacity:"0.7"})})]})})},Ot=async()=>{if(!k||!E){const N=pt;O(N),t?.(N);return}if(!q.trim()){const N=ft;O(N),t?.(N);return}if(ne(!0),O(null),!await L()){console.error("[x402] Chain switch rejected by user");const N=`${wt}: ${M.name}`;O(N),t?.(N),ne(!1);return}try{const N=u!==null,K=N?"edit":"generate",be=await s({prompt:q,size:te,mode:K,referenceImage:N?u:void 0,sepoliaTest:F,expectedChainId:U,isListed:re}),Ne=BigInt(be.tokenId),ie=be.image_url;h(Ne),p(ie),v(ie),$("generated");try{const Zt=await(await fetch(ie)).blob(),ea=(await new Promise((ta,aa)=>{const xe=new FileReader;xe.onload=()=>ta(xe.result),xe.onerror=aa,xe.readAsDataURL(Zt)})).split(",")[1];w(ea)}catch(Be){console.warn("Failed to convert generated image to base64:",Be)}const Jt={name:`AI Generated Artwork #${Ne}`,description:`AI generated artwork based on the prompt: "${q}"`,image:ie,external_url:be.metadata_url||"",attributes:[{trait_type:"Prompt",value:q},{trait_type:"Generation Method",value:"AI Generated"},{trait_type:"Payment Method",value:"x402 USDC"}]};e?.(Ne,ie,Jt),n("x402-image-generated",{tokenId:be.tokenId,mode:K,hasTxReceipt:!!i}),setTimeout(()=>{W(""),he("1024x1024"),p(void 0),h(void 0),O(null),l()},3e3)}catch(N){console.error("[x402] Error:",N);const K=N instanceof Error?N.message:yt;O(K),t?.(K)}finally{ne(!1)}},Wt=f({label:"imagegen.mintingInfo"}),Ht=x=>["image/jpeg","image/png"].includes(x.type)?x.size>10485760?(O(Pt),!1):!0:(O(It),!1),Ue=async x=>{if(Ht(x)){O(null),ne(!0);try{const N=await Pn(x,1024);w(N.base64),z(N.mimeType),$("reference")}catch(N){console.error("Image compression failed:",N);const K=N instanceof Error?N.message:At;O(`${Et}: ${K}`)}finally{ne(!1)}}},Gt=x=>{x.preventDefault(),x.stopPropagation()},Qt=x=>{x.preventDefault(),x.stopPropagation()},Kt=x=>{x.preventDefault(),x.stopPropagation();const N=Array.from(x.dataTransfer.files);N.length>0&&Ue(N[0])},Vt=x=>{const N=x.target.files;N&&N.length>0&&Ue(N[0])},Yt=()=>{w(null),z("image/jpeg");const x=document.getElementById("reference-image-input");x&&(x.value=""),$(T?"generated":"empty")},$e=te==="1792x1024"?"wide":"square",Xt=()=>{n("imagegen-connect-click"),I()};return a.jsx("div",{className:b({transition:"all 0.5s ease-in-out",overflow:"hidden"}),children:R?a.jsx("div",{className:H.compactLayout,children:a.jsxs("div",{className:H.compactContainer,children:[a.jsx("div",{className:H.compactHeader,children:a.jsxs("h3",{className:H.compactTitle,children:["ðŸŽ¨",a.jsx(Ke,{label:"imagegen.title"})]})}),a.jsxs("div",{className:H.compactForm,children:[a.jsxs("div",{"data-testid":"drop-zone",className:b({mb:"4",border:"1px solid",borderColor:_==="empty"?"gray.300":"gray.400",borderRadius:"md",bg:_==="empty"?"gray.50":"white",position:"relative",cursor:_==="empty"?"pointer":"default",overflow:"hidden",width:"100%",_hover:_==="empty"?{borderColor:"gray.400",bg:"gray.100"}:{}}),onDragOver:Gt,onDragEnter:Qt,onDrop:Kt,onClick:()=>{_==="empty"&&document.getElementById("reference-image-input")?.click()},children:[a.jsx("input",{id:"reference-image-input","data-testid":"reference-image-input",type:"file",accept:"image/*",onChange:Vt,className:b({position:"absolute",opacity:0,width:0,height:0,pointerEvents:"none"})}),_==="empty"&&a.jsxs("div",{className:b({display:"flex",alignItems:"center",justifyContent:"center",py:"6",px:"4",gap:"3"}),children:[a.jsx("div",{className:b({fontSize:"xl",color:"gray.500"}),children:"ðŸ“¸"}),a.jsxs("div",{className:b({textAlign:"left"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"1"}),children:xt}),a.jsxs("p",{className:b({fontSize:"xs",color:"gray.500",mb:"0"}),children:[Tt," â€¢ ",vt]})]})]}),_==="reference"&&u&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:Ct}),a.jsxs("button",{onClick:x=>{x.stopPropagation(),Yt()},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),children:["âœ• ",ze]})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:$e==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:`data:${C};base64,${u}`,alt:Nt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})}),a.jsx("p",{className:b({fontSize:"xs",color:"gray.500",textAlign:"center",mt:"2",mb:"0"}),children:jt})]}),_==="generated"&&T&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:St}),a.jsx("div",{className:b({display:"flex",gap:"2"}),children:a.jsxs("button",{onClick:()=>{w(null),z("image/jpeg"),v(void 0),$("empty");const x=document.getElementById("reference-image-input");x&&(x.value="")},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),disabled:ae||o!=="idle",children:["âœ• ",ze]})})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:$e==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:T,alt:kt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})})]})]}),a.jsx("textarea",{value:q,onChange:x=>W(x.target.value),placeholder:_==="reference"?Q:ye,disabled:ae||o!=="idle",className:H.compactTextarea}),a.jsxs("div",{className:H.controlBar,children:[a.jsxs("div",{className:H.optionsGroup,children:[a.jsxs("select",{id:"imageSizeSelect",value:te,onChange:x=>he(x.target.value),disabled:ae||o!=="idle",className:H.compactSelect,"aria-label":"Select image format for your artwork",children:[a.jsx("option",{value:"1024x1024",children:zt}),a.jsx("option",{value:"1792x1024",children:Dt})]}),a.jsxs("label",{className:S.checkboxLabel,title:re?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[a.jsx("input",{type:"checkbox",checked:re,onChange:x=>pe(x.target.checked),disabled:ae||o!=="idle",className:S.checkbox}),a.jsx(Ke,{label:"imagegen.listed"})]})]}),a.jsx(Mt,{})]})]}),a.jsx(an,{service:"genimg"}),a.jsx("span",{id:"create-artwork-info",className:b({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:Ut}),a.jsxs("div",{className:b({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[a.jsx(Qe,{size:"xs",className:b({mr:"1"})}),Wt]}),(o==="awaiting-signature"||o==="processing")&&a.jsxs("div",{className:H.compactStatus,children:[a.jsx("div",{className:le}),a.jsx("span",{children:o==="awaiting-signature"?_e:Rt})]}),(fe||r)&&a.jsx("div",{className:H.compactError,children:fe||r}),i&&a.jsxs("div",{className:b({mt:"2",p:"2",fontSize:"xs",bg:"green.50",border:"1px solid",borderColor:"green.200",borderRadius:"md",color:"green.800"}),children:["âœ… Payment confirmed â€¢"," ",a.jsx("a",{href:`https://optimistic.etherscan.io/tx/${i.transaction}`,target:"_blank",rel:"noopener noreferrer",className:b({color:"green.600",textDecoration:"underline",_hover:{color:"green.700"}}),children:"View transaction â†—"})]}),c&&m&&a.jsxs("div",{className:ja,children:[a.jsx("h4",{className:b({margin:0,fontSize:"sm"}),children:$t}),a.jsxs("p",{className:b({margin:"xs 0",fontSize:"sm"}),children:["ID: ",c.toString()," - ",Bt]})]})]})}):a.jsxs("div",{className:b({maxWidth:"500px",margin:"0 auto",textAlign:"center"}),children:[a.jsxs("h3",{className:b({fontSize:"2xl",fontWeight:"semibold",marginBottom:"4",color:"gray.800"}),children:["ðŸŽ¨ ",Lt]}),a.jsx("div",{className:b({fontSize:"md",fontWeight:"medium",color:"gray.800",mb:"3",textAlign:"center"}),children:Ft}),a.jsx("p",{className:b({fontSize:"sm",color:"gray.600",mb:"lg",lineHeight:"1.5"}),children:_t}),a.jsx("div",{className:b({display:"flex",justifyContent:"center"}),children:a.jsx("button",{onClick:Xt,onMouseEnter:()=>n("imagegen-connect-hover"),className:ve,children:A})})]})})}function Ve({label:e,isActive:t,onClick:n}){return a.jsx("button",{className:`${X.tab} ${t?X.activeTab:""}`,onClick:n,"aria-selected":t,children:e})}function An({tokenId:e,network:t,enabled:n=!0}){const[s,o]=g.useState(void 0),[r,i]=g.useState(!1),[l,m]=g.useState(void 0),p=Se(t),c=me(t),h=g.useCallback(async()=>{if(n){i(!0),m(void 0);try{const d=await Pe(Ie,{address:c,abi:Y,functionName:"isTokenListed",args:[e],chainId:p});o(d)}catch(d){d instanceof Error&&(d.message.includes("reverted")||d.name.includes("ContractFunctionRevertedError")||d.name.includes("ContractFunctionExecutionError"))?m("isListed not available for this token"):(console.error("Failed to load listing status:",d),m(d instanceof Error?d.message:"Failed to load listing status"))}finally{i(!1)}}},[e,t,n,c,p]);g.useEffect(()=>{h()},[h]);const y=g.useCallback(d=>{o(d)},[]);return{isListed:s,isLoading:r,error:l,refetch:h,setOptimisticListed:y}}function Rn({genImTokenId:e}){const{isConnected:t}=se(),n=Je(),{writeContract:s,isPending:o,data:r}=Ee(),{isLoading:i,isSuccess:l}=Ae({hash:r}),m=Ya(),p=n===m.id,c=f({label:"imagegen.collect"}),{data:h,error:y,isPending:d,refetch:T}=Le({...Ge,functionName:"getMintStats",args:[e],chainId:m.id}),v=async()=>{if(!t||!p||!h||!Array.isArray(h))return;const[,C]=h;s({...Ge,functionName:"mintCollectorNFT",args:[e],value:C})};g.useEffect(()=>{l&&setTimeout(()=>{T()},2e3)},[l,T]);const u=()=>{if(d)return"...";if(y||!h||!Array.isArray(h))return"0";const[C]=h;return C.toString()},w=()=>{if(d||y||!h||!Array.isArray(h))return"Price loading...";const[C,z]=h,E=We(z),k=M=>{const F=parseFloat(M);return F>=.001?F.toFixed(3):F>=1e-4?F.toFixed(4):F.toFixed(6)},P=k(E),D=Number(C),R=Math.ceil((D+1)/5)*5,L=z/BigInt(2**Math.floor(D/5))*BigInt(2**Math.floor(R/5)),U=k(We(L));return`Current price: ${P} ETH | Price after ${R} mints: ${U} ETH`};return a.jsx("button",{onClick:v,disabled:!t||o||i||!p,className:`${S.actionButton} ${ve}`,title:`Collect this NFT (${u()} collected) | ${w()}`,children:o?"ðŸ“¦ Collecting...":l?"âœ… Collected!":`ðŸ“¦ ${c} (${u()})`})}function gt({tokenId:e,onImageClick:t,onNftBurned:n,onListedStatusChanged:s,isHighlighted:o=!1,isPublicView:r=!1,preloadedImageUrl:i,preloadedMetadata:l}){const{writeContract:m,isPending:p,data:c}=Ee(),{writeContract:h,isPending:y,data:d}=Ee(),[T,v]=g.useState(!1),[u,w]=g.useState({tokenId:e,tokenURI:"",imageUrl:i,metadata:l,isLoading:!i}),[C,z]=g.useState(""),{showToast:E,ToastComponent:k}=rt(),P=f({label:"imagegen.listed"}),D=f({label:"imagegen.download"}),R=f({label:"imagegen.delete"}),{network:j,switchIfNeeded:L}=de(ue),U=me(j),M=!u.isLoading&&!u.error,{isListed:F,setOptimisticListed:_}=An({tokenId:e,network:j,enabled:!r&&M}),$=st(j),q=async I=>{try{if(I.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",I),null;const A=await fetch(I);if(!A.ok)throw new Error(`Failed to fetch metadata: ${A.status}`);return await A.json()}catch(A){return console.error("Error fetching NFT metadata:",A),null}};g.useEffect(()=>{(async()=>{try{w(Q=>({...Q,isLoading:!0,error:void 0}));const B=await $.readContract({address:U,abi:Y,functionName:"tokenURI",args:[e]});if(!B&&(i||l)){w(Q=>({...Q,tokenURI:"",isLoading:!1}));return}let G="";r&&(G=await $.readContract({address:U,abi:Y,functionName:"ownerOf",args:[e]}),z(G));let oe=l,ye=i;if(B){const Q=await q(B);Q&&(oe=Q,ye=Q.image)}w({tokenId:e,tokenURI:B,metadata:oe,imageUrl:ye,isLoading:!1})}catch(A){console.error(`Error loading NFT ${e}:`,A),w({tokenId:e,tokenURI:"",imageUrl:i,metadata:l,isLoading:!1,error:`Failed to load NFT #${e}: ${A instanceof Error?A.message:"Unknown error"}`})}})()},[e,r,i,l,$]);const{isLoading:W,isSuccess:te}=Ae({hash:c}),{isLoading:he,isSuccess:re}=Ae({hash:d});g.useEffect(()=>{te&&setTimeout(()=>{n()},1e3)},[te,n]),g.useEffect(()=>{re&&s&&E("Listing status updated successfully!","success")},[re,s,E]);const pe=()=>{u.imageUrl&&t({src:u.imageUrl,alt:u.metadata?.name||`Artwork #${u.tokenId}`,title:u.metadata?.name,description:u.metadata?.description})},ae=async()=>{if(u.imageUrl)try{const A=await(await fetch(u.imageUrl)).blob(),B=window.URL.createObjectURL(A),G=document.createElement("a");G.href=B,G.download=`${u.metadata?.name||`Artwork-${u.tokenId}`}.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(B)}catch(I){console.error("Download failed:",I),E("Download failed. Please try again.","error")}},ne=async()=>{const A=`https://opensea.io/item/${Qa(j)?"optimism":"optimism-sepolia"}/${U}/${u.tokenId}`;try{await navigator.clipboard.writeText(A),E("OpenSea URL copied to clipboard!","success")}catch(B){console.error("Failed to copy URL:",B),window.open(A,"_blank","noopener,noreferrer")}},fe=async()=>{if(!T){v(!0),E(`âš ï¸ Click Delete again to permanently remove "${u.metadata?.name||`Artwork #${u.tokenId}`}"`,"warning"),setTimeout(()=>{v(!1)},5e3);return}v(!1);try{if(!await L()){E("Please switch to the correct network.","error");return}await m({address:U,abi:Y,functionName:"burn",args:[u.tokenId]})}catch(I){console.error("Delete failed:",I),E("Failed to delete artwork. Please try again.","error")}},O=async()=>{if(!s)return;const I=!F,A=I?"public":"private";try{if(!await L()){E("Please switch to the correct network.","error");return}_(I),s(u.tokenId,I),await h({address:U,abi:Y,functionName:"setTokenListed",args:[u.tokenId,I]})}catch(B){console.error("Failed to update listing status:",B),_(!I),s(u.tokenId,!I),E(`Failed to set artwork as ${A}. Please try again.`,"error")}};return a.jsxs("div",{className:`${S.container} ${o?S.highlighted:""} group`,onClick:pe,children:[u.isLoading?a.jsxs("div",{className:S.loadingContainer,children:[a.jsx("div",{className:le}),a.jsx("p",{className:S.loadingText,children:"Loading artwork..."})]}):u.error?a.jsxs("div",{className:S.errorContainer,children:[a.jsx("div",{className:S.errorBox,children:a.jsx("p",{className:S.errorText,children:u.error})}),a.jsxs("p",{className:S.tokenIdText,children:["ID: ",u.tokenId.toString()]})]}):a.jsxs(a.Fragment,{children:[u.imageUrl?a.jsxs("div",{className:S.imageContainer,children:[a.jsx("img",{src:u.imageUrl,alt:u.metadata?.name||`Artwork #${u.tokenId}`,className:S.image,onError:I=>{const A=I.target;A.style.display="none",A.nextElementSibling.classList.remove("hidden")}}),a.jsx("div",{className:S.imageError,style:{display:"none"},children:"ðŸ“· Image not available"})]}):a.jsx("div",{className:S.imagePlaceholder,children:"ðŸ“· No image available"}),a.jsxs("div",{className:S.cornerBadge,children:["#",u.tokenId.toString()]}),!r&&F&&a.jsxs("div",{className:S.listedBadge,children:["âœ“ ",P]}),r&&C&&a.jsxs("div",{className:S.ownerBadge,children:["ðŸ‘¤ ",C.slice(0,6),"...",C.slice(-4)]}),a.jsx("div",{className:S.actionsOverlay,children:a.jsxs("div",{className:S.actions,children:[u.imageUrl&&a.jsx("button",{onClick:I=>{I.stopPropagation(),ae()},className:S.compactSecondaryButton,title:`${D} image`,children:"â¬‡ï¸"}),u.imageUrl&&a.jsx("button",{onClick:I=>{I.stopPropagation(),pe()},className:S.compactSecondaryButton,title:"View full size",children:"ðŸ”"}),a.jsx("button",{onClick:I=>{I.stopPropagation(),ne()},className:S.compactSecondaryButton,title:"Share artwork",children:"ðŸ“¤"}),!r&&s&&F!==void 0&&a.jsx("button",{onClick:I=>{I.stopPropagation(),O()},disabled:y||he,className:S.compactSecondaryButton,title:`${F?"Make private":"Make public"}`,children:F?"ðŸ”“":"ðŸ”’"}),r&&a.jsx(Rn,{genImTokenId:u.tokenId}),!r&&a.jsx("button",{onClick:I=>{I.stopPropagation(),fe()},disabled:p||W,className:S.compactSecondaryButton,title:`${R} artwork (permanent)`,style:{backgroundColor:p||W?"rgba(0,0,0,0.3)":"rgba(220, 38, 38, 0.8)",opacity:p||W?.6:1},children:p||W?"â³":"ðŸ—‘ï¸"})]})})]}),k]})}function ht({image:e,onClose:t}){const{showToast:n,ToastComponent:s}=rt();g.useEffect(()=>{const r=i=>{i.key==="Escape"&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]);const o=async()=>{try{const i=await(await fetch(e.src)).blob(),l=window.URL.createObjectURL(i),m=document.createElement("a");m.href=l,m.download=`${e.title||"NFT-image"}.png`,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(l)}catch(r){console.error("Download failed:",r),n("Download failed. Please try again.","error")}};return a.jsxs("div",{className:S.modalOverlay,onClick:t,children:[a.jsxs("div",{className:S.modalContent,onClick:r=>r.stopPropagation(),children:[a.jsx("button",{className:S.modalClose,onClick:t,children:"âœ•"}),a.jsx("img",{src:e.src,alt:e.alt,className:S.modalImage}),(e.title||e.description)&&a.jsxs("div",{className:S.modalInfo,children:[e.title&&a.jsx("h3",{className:S.modalTitle,children:e.title}),e.description&&a.jsx("p",{className:S.modalDescription,children:e.description}),a.jsx("div",{className:S.actions,style:{justifyContent:"center",marginTop:"12px"},children:a.jsx("button",{onClick:o,className:`${S.actionButton} ${ve}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function Ln({newlyCreatedNFT:e,onNewNFTDisplayed:t}){const{address:n,isConnected:s}=se(),{network:o}=de(ue),r=Se(o),i=me(o),[l,m]=g.useState([]),[p,c]=g.useState(!1),[h,y]=g.useState(null),[d,T]=g.useState(null),{data:v,isLoading:u}=Le({address:i,abi:Y,functionName:"balanceOf",args:n?[n]:void 0,chainId:r,query:{enabled:!!n&&s}}),w=g.useCallback(async()=>{if(!s||!n){m([]);return}c(!0);try{const k=await Pe(Ie,{address:i,abi:Y,functionName:"balanceOf",args:[n],chainId:r});if(!k||k===0n){m([]);return}const P=[];for(let j=0;j<Number(k);j++){const L=(async()=>{try{return await Pe(Ie,{address:i,abi:Y,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(j)],chainId:r})}catch(U){return console.error(`Error loading token ID at index ${j}:`,U),0n}})();P.push(L)}const R=(await Promise.all(P)).filter(j=>j>0n).sort((j,L)=>L>j?1:L<j?-1:0);m(R)}catch(k){console.error("Error loading token IDs:",k),m([])}finally{c(!1)}},[s,n,i,r]),C=g.useCallback(k=>{y(k),m(P=>P.includes(k)?P:[k,...P]),setTimeout(()=>{y(null),t?.()},5e3)},[t]),z=g.useCallback((k,P)=>{},[]);g.useEffect(()=>{s&&n&&w()},[n,s,w]),g.useEffect(()=>{e&&C(e.tokenId)},[e,C]);const E=u||p;return s?E&&l.length===0?a.jsxs("div",{className:V.loadingContainer,children:[a.jsx("div",{className:le}),a.jsx("p",{children:"Loading your artworks..."})]}):v===0n||!v?a.jsx("div",{className:V.emptyStateContainer,children:a.jsx("p",{className:V.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:V.grid,children:l.map((k,P)=>{const D=e?.tokenId===k,R=D?e.imageUrl:void 0,j=D?e.metadata:void 0;return a.jsx(gt,{tokenId:k,onImageClick:T,onNftBurned:()=>w(),onListedStatusChanged:z,isHighlighted:h===k,isPublicView:!1,preloadedImageUrl:R,preloadedMetadata:j},`my-${k}-${P}`)})}),d&&a.jsx(ht,{image:d,onClose:()=>T(null)})]}):a.jsxs("div",{className:V.walletPrompt,children:[a.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),a.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),a.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function Fn(){const{network:e}=de(ue),t=me(e),[n,s]=g.useState([]),[o,r]=g.useState(!1),[i,l]=g.useState(null),m=st(e),p=g.useCallback(async()=>{r(!0);try{const c=await m.readContract({address:t,abi:Y,functionName:"getAllPublicTokens"});if(!c||c.length===0){s([]);return}const h=c.sort((y,d)=>d>y?1:d<y?-1:0);s(h)}catch(c){console.error("Error loading public token IDs:",c),s([])}finally{r(!1)}},[m]);return g.useEffect(()=>{p()},[p]),o&&n.length===0?a.jsxs("div",{className:V.loadingContainer,children:[a.jsx("div",{className:le}),a.jsx("p",{children:"Loading public artworks..."})]}):n.length===0?a.jsx("div",{className:V.emptyStateContainer,children:a.jsx("p",{className:V.emptyStateText,children:"No public artworks available yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:V.grid,children:n.map((c,h)=>a.jsx(gt,{tokenId:c,onImageClick:l,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${c}-${h}`))}),i&&a.jsx(ht,{image:i,onClose:()=>l(null)})]})}function _n({newlyCreatedNFT:e,onNewNFTDisplayed:t,activeTab:n,onTabChange:s}={}){const{address:o,isConnected:r}=se(),[i,l]=g.useState(()=>r?"my":"public"),m=n??i,p=s??l,{network:c}=de(ue),h=Se(c),y=me(c),d=Le({address:y,abi:Y,functionName:"balanceOf",args:o?[o]:void 0,chainId:h,query:{enabled:!!o&&r}}),{data:T,refetch:v}=d;g.useEffect(()=>{e&&v&&v()},[e,v]);const u=f({label:"imagegen.myArtworks"}),w=f({label:"imagegen.allPublicArtworks"});return a.jsxs("div",{className:V.container,children:[a.jsx("div",{className:X.container,children:a.jsxs("div",{className:X.tabList,children:[a.jsx(Ve,{label:r?`${u} (${T?.toString()||"0"})`:u,isActive:m==="my",onClick:()=>p("my")}),a.jsx(Ve,{label:w,isActive:m==="public",onClick:()=>p("public")})]})}),a.jsx("div",{className:`${X.tabPanel} ${m==="my"?"":X.hiddenPanel}`,children:a.jsx(Ln,{newlyCreatedNFT:e,onNewNFTDisplayed:t})}),a.jsx("div",{className:`${X.tabPanel} ${m==="public"?"":X.hiddenPanel}`,children:a.jsx(Fn,{})})]})}function zn(){const{isConnected:e}=se(),[t,n]=g.useState(null),[s,o]=g.useState(()=>e?"my":"public"),r=(p,c,h)=>{console.log("Image generation succeeded:",{tokenId:p,imageUrl:c,metadata:h}),n({tokenId:p,imageUrl:c,metadata:h}),e&&o("my")},i=p=>{console.error("Image generation failed:",p)},l=()=>{n(null)},m=p=>{o(p)};return a.jsxs("div",{className:Pa,children:[a.jsx(En,{onSuccess:r,onError:i}),a.jsx(_n,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:l,activeTab:s,onTabChange:m})]})}const Dn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));function Un(){return"AI Image Generator | fretchen.eu"}const $n=Object.freeze(Object.defineProperty({__proto__:null,title:Un},Symbol.toStringTag,{value:"Module"})),Jn={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:za}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:_a}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Fa}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Dn}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:La}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:$n}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Ra}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Aa}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ea}}};export{Jn as configValuesSerialized};
