const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-6WRWPBrk.js","assets/chunks/chunk-CNICcFgQ.js","assets/chunks/chunk-t-pXVLBL.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.x05mXv0T.css"])))=>i.map(i=>d[i]);
import{bo as J,bP as Xt,bi as Jt,b7 as Zt,n as Fe,N as Z,bQ as ea,B as oe,bR as ta,bj as we,bl as ze,bS as aa,bT as na,bU as _e,b3 as X,Y as sa,s as ra,bH as oa,bJ as ia,b2 as Oe,b4 as We,b5 as ca,b6 as la,bV as da,Q as ua,R as ma,bW as ga,a5 as te,T as Ce,r as y,U as ha,w as b,j as a,u as pa,bX as fa,bY as ya,bZ as wa,a3 as ba,a6 as xa,X as f,aA as he,b_ as H,b$ as S,c0 as ie,c1 as Ta,c2 as va,c3 as V,a2 as $e,c4 as be,c5 as K,v as Ca,F as Sa,a as Na,W as ja,c as ka,d as Ia,e as Pa,o as Ea}from"../chunks/chunk-CNICcFgQ.js";import{c as He,b as pe,f as Aa,o as Ra,h as La,r as Fa,w as za,p as Ge,d as _a,s as $a,i as Da,a as ce,j as De,g as M}from"../chunks/chunk-CQlelhe4.js";import{d as Ua,_ as Ue}from"../chunks/chunk-t-pXVLBL.js";import{s as Se,A as le,b as Ke,c as ge,w as Qe,g as Ba,u as xe,a as Te,r as ve}from"../chunks/chunk-B8fZV6Qr.js";import{i as qa}from"../chunks/chunk-BuiBZ4Fd.js";import{s as Ye,g as Ma,v as Oa,a as Wa,u as Ve}from"../chunks/chunk-Cl5gMY_w.js";import{s as Ha,A as Ga,u as Ne}from"../chunks/chunk-Iq5J3ccW.js";import{u as Ka}from"../chunks/chunk-lYf0O66e.js";import{u as Xe}from"../chunks/chunk-BHSxBlpi.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-DS1lpMRs.js";async function Qa(e,{chain:t}){const{id:n,name:s,nativeCurrency:o,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:J(n),chainName:s,nativeCurrency:o,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function Ya(e,t){const{abi:n,args:s,bytecode:o,...r}=t,i=Xt({abi:n,args:s,bytecode:o});return Se(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function Va(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>Jt(n))}const Je="0x5792579257925792579257925792579257925792579257925792579257925792",Ze=J(0,{size:32});async function et(e,t){const{account:n=e.account,capabilities:s,chain:o=e.chain,experimental_fallback:r,experimental_fallbackDelay:i=32,forceAtomic:c=!1,id:u,version:h="2.0.0"}=t,l=n?Z(n):null,p=t.calls.map(w=>{const m=w,T=m.abi?Zt({abi:m.abi,functionName:m.functionName,args:m.args}):m.data;return{data:m.dataSuffix&&T?Fe([T,m.dataSuffix]):T,to:m.to,value:m.value?J(m.value):void 0}});try{const w=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:c,calls:p,capabilities:s,chainId:J(o.id),from:l?.address,id:u,version:h}]},{retryCount:0});return typeof w=="string"?{id:w}:w}catch(w){const m=w;if(r&&(m.name==="MethodNotFoundRpcError"||m.name==="MethodNotSupportedRpcError"||m.name==="UnknownRpcError"||m.details.toLowerCase().includes("does not exist / is not available")||m.details.toLowerCase().includes("missing or invalid. request()")||m.details.toLowerCase().includes("did not match any variant of untagged enum")||m.details.toLowerCase().includes("account upgraded to unsupported contract")||m.details.toLowerCase().includes("eip-7702 not supported")||m.details.toLowerCase().includes("unsupported wc_ method")||m.details.toLowerCase().includes("feature toggled misconfigured")||m.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(s&&Object.values(s).some(j=>!j.optional)){const j="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new ea(new oe(j,{details:j}))}if(c&&p.length>1){const x="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new ta(new oe(x,{details:x}))}const T=[];for(const x of p){const j=Se(e,{account:l,chain:o,data:x.data,to:x.to,value:x.value?we(x.value):void 0});T.push(j),i>0&&await new Promise(v=>setTimeout(v,i))}const N=await Promise.allSettled(T);if(N.every(x=>x.status==="rejected"))throw N[0].reason;const d=N.map(x=>x.status==="fulfilled"?x.value:Ze);return{id:Fe([...d,J(o.id,{size:32}),Je])}}throw He(w,{...t,account:l,chain:t.chain})}}async function tt(e,t){async function n(l){if(l.endsWith(Je.slice(2))){const w=na(_e(l,-64,-32)),m=_e(l,0,-64).slice(2).match(/.{1,64}/g),T=await Promise.all(m.map(d=>Ze.slice(2)!==d?e.request({method:"eth_getTransactionReceipt",params:[`0x${d}`]},{dedupe:!0}):void 0)),N=T.some(d=>d===null)?100:T.every(d=>d?.status==="0x1")?200:T.every(d=>d?.status==="0x0")?500:600;return{atomic:!1,chainId:ze(w),receipts:T.filter(Boolean),status:N,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:s=!1,chainId:o,receipts:r,version:i="2.0.0",...c}=await n(t.id),[u,h]=(()=>{const l=c.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...c,atomic:s,chainId:o?ze(o):void 0,receipts:r?.map(l=>({...l,blockNumber:we(l.blockNumber),gasUsed:we(l.gasUsed),status:aa[l.status]}))??[],statusCode:h,status:u,version:i}}async function Xa(e,t={}){const{account:n=e.account,chainId:s}=t,o=n?Z(n):void 0,r=s?[o?.address,[J(s)]]:[o?.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[u,h]of Object.entries(i)){c[Number(u)]={};for(let[l,p]of Object.entries(h))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(u)][l]=p}return typeof s=="number"?c[s]:c}async function Ja(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function at(e,t){const{account:n=e.account,chainId:s,nonce:o}=t;if(!n)throw new le({docsPath:"/docs/eip7702/prepareAuthorization"});const r=Z(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:Z(t.executor)})(),c={address:t.contractAddress??t.address,chainId:s,nonce:o};return typeof c.chainId>"u"&&(c.chainId=e.chain?.id??await X(e,pe,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await X(e,Aa,"getTransactionCount")({address:r.address,blockTag:"pending"}),(i==="self"||i?.address&&qa(i.address,r.address))&&(c.nonce+=1)),c}async function Za(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>sa(n))}async function en(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}class tn extends oe{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function nt(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:o=({statusCode:N})=>N===200||N>=300,retryCount:r=4,retryDelay:i=({count:N})=>~~(1<<N)*200,timeout:c=6e4,throwOnFailure:u=!1}=t,h=ra(["waitForCallsStatus",e.uid,n]),{promise:l,resolve:p,reject:w}=oa();let m;const T=Ra(h,{resolve:p,reject:w},N=>{const d=La(async()=>{const x=j=>{clearTimeout(m),d(),j(),T()};try{const j=await ia(async()=>{const v=await X(e,tt,"getCallsStatus")({id:n});if(u&&v.status==="failure")throw new tn(v);return v},{retryCount:r,delay:i});if(!o(j))return;x(()=>N.resolve(j))}catch(j){x(()=>N.reject(j))}},{interval:s,emitOnBegin:!0});return d});return m=c?setTimeout(()=>{T(),clearTimeout(m),w(new an({id:n}))},c):void 0,await l}class an extends oe{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function nn(e,t){const{chain:n=e.chain}=t,s=t.timeout??Math.max((n?.blockTime??0)*3,5e3),o=await et(e,t);return await nt(e,{...t,id:o.id,timeout:s})}const ye=new la(128);async function st(e,t){const{account:n=e.account,chain:s=e.chain,accessList:o,authorizationList:r,blobs:i,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:w,nonce:m,pollingInterval:T,throwOnReceiptRevert:N,type:d,value:x,...j}=t,v=t.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new le({docsPath:"/docs/actions/wallet/sendTransactionSync"});const C=n?Z(n):null;try{Oe(t);const $=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Fa({authorization:r[0]}).catch(()=>{throw new oe("`to` is required. Could not infer from `authorizationList`.")})})();if(C?.type==="json-rpc"||C===null){let _;s!==null&&(_=await X(e,pe,"getChainId")({}),Ke({currentChainId:_,chain:s}));const E=e.chain?.formatters?.transactionRequest?.format,I=(E||We)({...ca(j,{format:E}),accessList:o,account:C,authorizationList:r,blobs:i,chainId:_,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:w,nonce:m,to:$,type:d,value:x},"sendTransaction"),U=ye.get(e.uid),R=U?"wallet_sendTransaction":"eth_sendTransaction",D=await(async()=>{try{return await e.request({method:R,params:[I]},{retryCount:0})}catch(W){if(U===!1)throw W;const q=W;if(q.name==="InvalidInputRpcError"||q.name==="InvalidParamsRpcError"||q.name==="MethodNotFoundRpcError"||q.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[I]},{retryCount:0}).then(Y=>(ye.set(e.uid,!0),Y)).catch(Y=>{const Q=Y;throw Q.name==="MethodNotFoundRpcError"||Q.name==="MethodNotSupportedRpcError"?(ye.set(e.uid,!1),q):Q});throw q}})(),L=await X(e,za,"waitForTransactionReceipt")({checkReplacement:!1,hash:D,pollingInterval:T,timeout:v});if(N&&L.status==="reverted")throw new da({receipt:L});return L}if(C?.type==="local"){const _=await X(e,Ge,"prepareTransactionRequest")({account:C,accessList:o,authorizationList:r,blobs:i,chain:s,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:w,nonce:m,nonceManager:C.nonceManager,parameters:[..._a,"sidecars"],type:d,value:x,...j,to:$}),E=s?.serializers?.transaction,A=await C.signTransaction(_,{serializer:E});return await X(e,Ye,"sendRawTransactionSync")({serializedTransaction:A,throwOnReceiptRevert:N})}throw C?.type==="smart"?new ge({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ge({docsPath:"/docs/actions/wallet/sendTransactionSync",type:C?.type})}catch($){throw $ instanceof ge?$:He($,{...t,account:C,chain:t.chain||void 0})}}async function sn(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function rn(e,t){const{account:n=e.account}=t;if(!n)throw new le({docsPath:"/docs/eip7702/signAuthorization"});const s=Z(n);if(!s.signAuthorization)throw new ge({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const o=await at(e,t);return s.signAuthorization(o)}async function on(e,t){const{account:n=e.account,chain:s=e.chain,...o}=t;if(!n)throw new le({docsPath:"/docs/actions/wallet/signTransaction"});const r=Z(n);Oe({account:r,...t});const i=await X(e,pe,"getChainId")({});s!==null&&Ke({currentChainId:i,chain:s});const u=(s?.formatters||e.chain?.formatters)?.transactionRequest?.format||We;return r.signTransaction?r.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u({...o,account:r},"signTransaction"),chainId:J(i),from:r.address}]},{retryCount:0})}async function cn(e,t){const{account:n=e.account,domain:s,message:o,primaryType:r}=t;if(!n)throw new le({docsPath:"/docs/actions/wallet/signTypedData"});const i=Z(n),c={EIP712Domain:Ma({domain:s}),...t.types};if(Oa({domain:s,message:o,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:s,message:o,primaryType:r,types:c});const u=Wa({domain:s,message:o,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,u]},{retryCount:0})}async function ln(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:J(t)}]},{retryCount:0})}async function dn(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function un(e,t){return Qe.internal(e,st,"sendTransactionSync",t)}function mn(e){return{addChain:t=>Qa(e,t),deployContract:t=>Ya(e,t),fillTransaction:t=>Da(e,t),getAddresses:()=>Va(e),getCallsStatus:t=>tt(e,t),getCapabilities:t=>Xa(e,t),getChainId:()=>pe(e),getPermissions:()=>Ja(e),prepareAuthorization:t=>at(e,t),prepareTransactionRequest:t=>Ge(e,t),requestAddresses:()=>Za(e),requestPermissions:t=>en(e,t),sendCalls:t=>et(e,t),sendCallsSync:t=>nn(e,t),sendRawTransaction:t=>$a(e,t),sendRawTransactionSync:t=>Ye(e,t),sendTransaction:t=>Se(e,t),sendTransactionSync:t=>st(e,t),showCallsStatus:t=>sn(e,t),signAuthorization:t=>rn(e,t),signMessage:t=>Ha(e,t),signTransaction:t=>on(e,t),signTypedData:t=>cn(e,t),switchChain:t=>ln(e,t),waitForCallsStatus:t=>nt(e,t),watchAsset:t=>dn(e,t),writeContract:t=>Qe(e,t),writeContractSync:t=>un(e,t)}}async function gn(e,t={}){return(await Ba(e,t)).extend(mn)}function hn(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:s}=t,{connectorUid:o,scopeKey:r,...i}=n[1];return gn(e,{...i,connector:s})},queryKey:pn(t)}}function pn(e={}){const{connector:t,...n}=e;return["walletClient",{...ua(n),connectorUid:t?.uid}]}function fn(e={}){const{query:t={},...n}=e,s=ma(n),o=ga(),{address:r,connector:i,status:c}=te({config:s}),u=Ce({config:s}),h=e.connector??i,{queryKey:l,...p}=hn(s,{...e,chainId:e.chainId??u,connector:e.connector??i}),w=!!((c==="connected"||c==="reconnecting"&&h?.getProvider)&&(t.enabled??!0)),m=y.useRef(r);return y.useEffect(()=>{const T=m.current;!r&&T?(o.removeQueries({queryKey:l}),m.current=void 0):r!==T&&(o.invalidateQueries({queryKey:l}),m.current=r)},[r,o]),ha({...t,...p,queryKey:l,enabled:w,staleTime:Number.POSITIVE_INFINITY})}function Be({size:e="sm",className:t}){const n={xs:b({fontSize:"xs",lineHeight:"1"}),sm:b({fontSize:"sm",lineHeight:"1"}),md:b({fontSize:"md",lineHeight:"1"})},s=b({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return a.jsx("span",{className:`${s} ${n[e]} ${t||""}`,role:"img","aria-label":"Information",children:"i"})}function qe({label:e,locale:t}){const s=pa(),o=t??s.locale??Ua,i=fa(o==="de"?ya:wa,e);return a.jsx("span",{"data-locale":o,children:i})}const yn="https://mypersonaljscloudivnad9dy-genimgx402token.functions.fnc.fr-par.scw.cloud";function wn(){const{data:e}=fn(),{isConnected:t}=te(),[n,s]=y.useState("idle"),[o,r]=y.useState(null),[i,c]=y.useState(null),u=t&&!!e,h=y.useCallback(async p=>{if(!e)throw new Error("Wallet not connected");s("awaiting-signature"),r(null),c(null);try{const{x402Client:w,wrapFetchWithPayment:m,x402HTTPClient:T}=await Ue(async()=>{const{x402Client:A,wrapFetchWithPayment:I,x402HTTPClient:U}=await import("../chunks/chunk-6bqGUo_L.js");return{x402Client:A,wrapFetchWithPayment:I,x402HTTPClient:U}},[]),{registerExactEvmScheme:N}=await Ue(async()=>{const{registerExactEvmScheme:A}=await import("../chunks/chunk-6WRWPBrk.js");return{registerExactEvmScheme:A}},__vite__mapDeps([0,1,2,3,4])),d={address:e.account.address,signTypedData:e.signTypedData.bind(e)},x=new w;N(x,{signer:d});const{expectedChainId:j,...v}=p,_=await m(async(A,I)=>{const U=await fetch(A,I);if(U.status===402&&j){const R=U.headers.get("Payment-Required");if(R)try{const L=JSON.parse(atob(R)).accepts?.[0]?.network,W=`eip155:${j}`;if(L&&L!==W)throw new Error(`Chain mismatch! Expected ${W} but server requires ${L}. This could indicate a configuration error.`)}catch(D){if(D instanceof Error&&D.message.includes("Chain mismatch"))throw D}}return U},x)(yn,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(s("processing"),!_.ok){const A=await _.text();throw new Error(`Request failed: ${_.status} - ${A}`)}const E=await _.json();try{const I=new T(x).getPaymentSettleResponse(U=>_.headers.get(U));I&&c({transaction:I.transaction,network:I.network})}catch{}return s("success"),E}catch(w){const m=w instanceof Error?w.message:"Unknown error";throw r(m),s("error"),w}},[e]),l=y.useCallback(()=>{s("idle"),r(null),c(null)},[]);return{generateImage:h,status:n,error:o,paymentReceipt:i,reset:l,isReady:u}}const bn=(e,t,n=1920)=>{const s=e/t;return e<=n&&t<=n?{width:e,height:t}:e>t?{width:n,height:Math.round(n/s)}:{width:Math.round(n*s),height:n}},xn=(e,t=1024)=>new Promise((n,s)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{const{width:c,height:u}=bn(i.width,i.height);if(o.width=c,o.height=u,!r){s(new Error("Could not get canvas context"));return}r.fillStyle="white",r.fillRect(0,0,c,u),r.drawImage(i,0,0,c,u);let h=.9;const l=()=>{const p=o.toDataURL("image/jpeg",h);p.length*.75/1024<=t||h<=.1?n({base64:p.split(",")[1],mimeType:"image/jpeg"}):(h-=.1,setTimeout(l,0))};l()},i.onerror=()=>s(new Error("Failed to load image")),i.src=URL.createObjectURL(e)});function Tn({onSuccess:e,onError:t}){const{trackEvent:n}=ba(),{generateImage:s,status:o,error:r,paymentReceipt:i,reset:c}=wn(),[u,h]=y.useState(),[l,p]=y.useState(),[w,m]=y.useState(),[T,N]=y.useState(null),[d,x]=y.useState("image/jpeg"),{address:j,isConnected:v}=te(),{connectors:C,connect:$}=xa(),{switchChainAsync:_,isPending:E}=Ka(),A=Ce(),I=ce(),U=I.id===11155420,[R,D]=y.useState("empty"),[L,W]=y.useState(""),[q,Y]=y.useState("1024x1024"),[Q,fe]=y.useState(!1),[ee,k]=y.useState(!1),[F,z]=y.useState(null),G=()=>{C.length>0&&$({connector:C[0]})},ae=f({label:"imagegen.connectWalletButton"}),de=f({label:"imagegen.enterPrompt"}),ue=f({label:"imagegen.generating"}),B=f({label:"imagegen.createArtwork"}),je=f({label:"imagegen.promptPlaceholder"}),it=f({label:"imagegen.editPromptPlaceholder"}),ke=f({label:"imagegen.editImage"}),ct=f({label:"imagegen.connectAccountFirst"}),lt=f({label:"imagegen.enterPromptError"}),dt=f({label:"imagegen.unknownError"}),ut=f({label:"imagegen.chainSwitchFailed"}),mt=f({label:"imagegen.switchingNetwork"}),Ie=f({label:"imagegen.awaitingSignature"}),gt=f({label:"imagegen.processingPayment"}),ht=f({label:"imagegen.uploadReferenceImage"}),pt=f({label:"imagegen.dragDropHere"}),ft=f({label:"imagegen.supportedFormats"}),yt=f({label:"imagegen.referenceImageTitle"}),wt=f({label:"imagegen.generatedArtworkTitle"}),Pe=f({label:"imagegen.remove"}),bt=f({label:"imagegen.referenceImageAlt"}),xt=f({label:"imagegen.generatedArtworkAlt"}),Tt=f({label:"imagegen.referenceImageHint"}),vt=f({label:"imagegen.invalidFileType"}),Ct=f({label:"imagegen.fileTooLarge"}),St=f({label:"imagegen.compressionFailed"}),Nt=f({label:"imagegen.failedToProcessImage"}),jt=f({label:"imagegen.generatingImage"}),kt=f({label:"imagegen.title"}),It=f({label:"imagegen.collapsedTitle"}),Pt=f({label:"imagegen.collapsedDescription"}),Et=f({label:"imagegen.square"}),At=f({label:"imagegen.wide"}),Rt=f({label:"imagegen.mintingInfo"}),Lt=f({label:"imagegen.artworkCreated"}),Ft=f({label:"imagegen.checkGallery"}),zt=()=>E?"switching":ee||o==="awaiting-signature"||o==="processing"?"loading":L.trim()?"ready":"needsPrompt",Ee=g=>{switch(g){case"switching":return mt;case"loading":return o==="awaiting-signature"?Ie:o==="processing"?gt:ue;case"connect":return ae;case"needsPrompt":return de;case"ready":return R!=="empty"?ke:B;default:return R!=="empty"?ke:B}},ne=zt(),_t=()=>{const g=ne==="needsPrompt",P=ne==="loading"||ne==="switching",O=()=>{n("imagegen-create-artwork-click",{hasReferenceImage:R!=="empty",promptLength:L.trim().length,isConnected:v,imageSize:q,paymentMethod:"x402-usdc"}),$t()};return a.jsx("button",{onClick:O,disabled:g,className:`${he} ${g?va:""}`,title:f({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:P?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ie}),Ee(ne)]}):a.jsxs(a.Fragment,{children:["ðŸŽ¨ ",Ee(ne),a.jsx(Be,{size:"xs",className:b({ml:"1",opacity:"0.7"})})]})})},$t=async()=>{if(!v||!j){const g=ct;z(g),t?.(g);return}if(!L.trim()){const g=lt;z(g),t?.(g);return}if(A!==I.id){console.log(`[x402] Chain mismatch: current=${A}, target=${I.id} (${I.name})`);try{await _({chainId:I.id}),console.log(`[x402] Successfully switched to ${I.name}`)}catch(g){console.error("[x402] Chain switch failed:",g);const P=`${ut}: ${I.name}`;z(P),t?.(P);return}}k(!0),z(null);try{const g=T!==null,P=g?"edit":"generate",O=await s({prompt:L,size:q,mode:P,referenceImage:g?T:void 0,sepoliaTest:U,expectedChainId:I.id,isListed:Q});console.log("[x402] Image generation completed:",O);const se=BigInt(O.tokenId),re=O.image_url;p(se),h(re),m(re),D("generated");try{const Kt=await(await fetch(re)).blob(),Qt=(await new Promise((Yt,Vt)=>{const me=new FileReader;me.onload=()=>Yt(me.result),me.onerror=Vt,me.readAsDataURL(Kt)})).split(",")[1];N(Qt)}catch(Le){console.warn("Failed to convert generated image to base64:",Le)}const Gt={name:`AI Generated Artwork #${se}`,description:`AI generated artwork based on the prompt: "${L}"`,image:re,external_url:O.metadata_url||"",attributes:[{trait_type:"Prompt",value:L},{trait_type:"Generation Method",value:"AI Generated"},{trait_type:"Payment Method",value:"x402 USDC"}]};e?.(se,re,Gt),n("x402-image-generated",{tokenId:O.tokenId,mode:P,hasTxReceipt:!!i}),setTimeout(()=>{W(""),Y("1024x1024"),h(void 0),p(void 0),z(null),c()},3e3)}catch(g){console.error("[x402] Error:",g);const P=g instanceof Error?g.message:dt;z(P),t?.(P)}finally{k(!1)}},Dt=f({label:"imagegen.mintingInfo"}),Ut=g=>["image/jpeg","image/png"].includes(g.type)?g.size>10485760?(z(Ct),!1):!0:(z(vt),!1),Ae=async g=>{if(Ut(g)){z(null),k(!0);try{const P=await xn(g,1024);N(P.base64),x(P.mimeType),D("reference");const O=Math.round(g.size/1024),se=Math.round(P.base64.length*.75/1024);console.log(`Image compressed: ${O}KB â†’ ${se}KB (${g.type} â†’ ${P.mimeType})`)}catch(P){console.error("Image compression failed:",P);const O=P instanceof Error?P.message:Nt;z(`${St}: ${O}`)}finally{k(!1)}}},Bt=g=>{g.preventDefault(),g.stopPropagation()},qt=g=>{g.preventDefault(),g.stopPropagation()},Mt=g=>{g.preventDefault(),g.stopPropagation();const P=Array.from(g.dataTransfer.files);P.length>0&&Ae(P[0])},Ot=g=>{const P=g.target.files;P&&P.length>0&&Ae(P[0])},Wt=()=>{N(null),x("image/jpeg");const g=document.getElementById("reference-image-input");g&&(g.value=""),D(w?"generated":"empty")},Re=q==="1792x1024"?"wide":"square",Ht=()=>{n("imagegen-connect-click"),G()};return a.jsx("div",{className:b({transition:"all 0.5s ease-in-out",overflow:"hidden"}),children:v?a.jsx("div",{className:H.compactLayout,children:a.jsxs("div",{className:H.compactContainer,children:[a.jsx("div",{className:H.compactHeader,children:a.jsxs("h3",{className:H.compactTitle,children:["ðŸŽ¨",a.jsx(qe,{label:"imagegen.title"})]})}),a.jsxs("div",{className:H.compactForm,children:[a.jsxs("div",{"data-testid":"drop-zone",className:b({mb:"4",border:"1px solid",borderColor:R==="empty"?"gray.300":"gray.400",borderRadius:"md",bg:R==="empty"?"gray.50":"white",position:"relative",cursor:R==="empty"?"pointer":"default",overflow:"hidden",width:"100%",_hover:R==="empty"?{borderColor:"gray.400",bg:"gray.100"}:{}}),onDragOver:Bt,onDragEnter:qt,onDrop:Mt,onClick:()=>{R==="empty"&&document.getElementById("reference-image-input")?.click()},children:[a.jsx("input",{id:"reference-image-input","data-testid":"reference-image-input",type:"file",accept:"image/*",onChange:Ot,className:b({position:"absolute",opacity:0,width:0,height:0,pointerEvents:"none"})}),R==="empty"&&a.jsxs("div",{className:b({display:"flex",alignItems:"center",justifyContent:"center",py:"6",px:"4",gap:"3"}),children:[a.jsx("div",{className:b({fontSize:"xl",color:"gray.500"}),children:"ðŸ“¸"}),a.jsxs("div",{className:b({textAlign:"left"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"1"}),children:ht}),a.jsxs("p",{className:b({fontSize:"xs",color:"gray.500",mb:"0"}),children:[pt," â€¢ ",ft]})]})]}),R==="reference"&&T&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:yt}),a.jsxs("button",{onClick:g=>{g.stopPropagation(),Wt()},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),children:["âœ• ",Pe]})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:Re==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:`data:${d};base64,${T}`,alt:bt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})}),a.jsx("p",{className:b({fontSize:"xs",color:"gray.500",textAlign:"center",mt:"2",mb:"0"}),children:Tt})]}),R==="generated"&&w&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:wt}),a.jsx("div",{className:b({display:"flex",gap:"2"}),children:a.jsxs("button",{onClick:()=>{N(null),x("image/jpeg"),m(void 0),D("empty");const g=document.getElementById("reference-image-input");g&&(g.value="")},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),disabled:ee||o!=="idle",children:["âœ• ",Pe]})})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:Re==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:w,alt:xt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})})]})]}),a.jsx("textarea",{value:L,onChange:g=>W(g.target.value),placeholder:R==="reference"?it:je,disabled:ee||o!=="idle",className:H.compactTextarea}),a.jsxs("div",{className:H.controlBar,children:[a.jsxs("div",{className:H.optionsGroup,children:[a.jsxs("select",{id:"imageSizeSelect",value:q,onChange:g=>Y(g.target.value),disabled:ee||o!=="idle",className:H.compactSelect,"aria-label":"Select image format for your artwork",children:[a.jsx("option",{value:"1024x1024",children:Et}),a.jsx("option",{value:"1792x1024",children:At})]}),a.jsxs("label",{className:S.checkboxLabel,title:Q?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[a.jsx("input",{type:"checkbox",checked:Q,onChange:g=>fe(g.target.checked),disabled:ee||o!=="idle",className:S.checkbox}),a.jsx(qe,{label:"imagegen.listed"})]})]}),a.jsx(_t,{})]})]}),a.jsx(Ga,{service:"genimg"}),a.jsx("span",{id:"create-artwork-info",className:b({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:Rt}),a.jsxs("div",{className:b({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[a.jsx(Be,{size:"xs",className:b({mr:"1"})}),Dt]}),(o==="awaiting-signature"||o==="processing")&&a.jsxs("div",{className:H.compactStatus,children:[a.jsx("div",{className:ie}),a.jsx("span",{children:o==="awaiting-signature"?Ie:jt})]}),(F||r)&&a.jsx("div",{className:H.compactError,children:F||r}),i&&a.jsxs("div",{className:b({mt:"2",p:"2",fontSize:"xs",bg:"green.50",border:"1px solid",borderColor:"green.200",borderRadius:"md",color:"green.800"}),children:["âœ… Payment confirmed â€¢"," ",a.jsx("a",{href:`https://optimistic.etherscan.io/tx/${i.transaction}`,target:"_blank",rel:"noopener noreferrer",className:b({color:"green.600",textDecoration:"underline",_hover:{color:"green.700"}}),children:"View transaction â†—"})]}),l&&u&&a.jsxs("div",{className:Ta,children:[a.jsx("h4",{className:b({margin:0,fontSize:"sm"}),children:Lt}),a.jsxs("p",{className:b({margin:"xs 0",fontSize:"sm"}),children:["ID: ",l.toString()," - ",Ft]})]})]})}):a.jsxs("div",{className:b({maxWidth:"500px",margin:"0 auto",textAlign:"center"}),children:[a.jsxs("h3",{className:b({fontSize:"2xl",fontWeight:"semibold",marginBottom:"4",color:"gray.800"}),children:["ðŸŽ¨ ",kt]}),a.jsx("div",{className:b({fontSize:"md",fontWeight:"medium",color:"gray.800",mb:"3",textAlign:"center"}),children:It}),a.jsx("p",{className:b({fontSize:"sm",color:"gray.600",mb:"lg",lineHeight:"1.5"}),children:Pt}),a.jsx("div",{className:b({display:"flex",justifyContent:"center"}),children:a.jsx("button",{onClick:Ht,onMouseEnter:()=>n("imagegen-connect-hover"),className:he,children:ae})})]})})}function Me({label:e,isActive:t,onClick:n}){return a.jsx("button",{className:`${V.tab} ${t?V.activeTab:""}`,onClick:n,"aria-selected":t,children:e})}function vn({genImTokenId:e}){const{isConnected:t}=te(),n=Ce(),{writeContract:s,isPending:o,data:r}=xe(),{isLoading:i,isSuccess:c}=Te({hash:r}),u=ce(),h=n===u.id,l=f({label:"imagegen.collect"}),{data:p,error:w,isPending:m,refetch:T}=Ne({...De,functionName:"getMintStats",args:[e],chainId:u.id}),N=async()=>{if(!t||!h||!p||!Array.isArray(p))return;const[,j]=p;s({...De,functionName:"mintCollectorNFT",args:[e],value:j})};y.useEffect(()=>{c&&setTimeout(()=>{T()},2e3)},[c,T]);const d=()=>{if(m)return"...";if(w||!p||!Array.isArray(p))return"0";const[j]=p;return j.toString()},x=()=>{if(m||w||!p||!Array.isArray(p))return"Price loading...";const[j,v]=p,C=$e(v),$=D=>{const L=parseFloat(D);return L>=.001?L.toFixed(3):L>=1e-4?L.toFixed(4):L.toFixed(6)},_=$(C),E=Number(j),A=Math.ceil((E+1)/5)*5,U=v/BigInt(2**Math.floor(E/5))*BigInt(2**Math.floor(A/5)),R=$($e(U));return`Current price: ${_} ETH | Price after ${A} mints: ${R} ETH`};return a.jsx("button",{onClick:N,disabled:!t||o||i||!h,className:`${S.actionButton} ${he}`,title:`Collect this NFT (${d()} collected) | ${x()}`,children:o?"ðŸ“¦ Collecting...":c?"âœ… Collected!":`ðŸ“¦ ${l} (${d()})`})}function rt({tokenId:e,onImageClick:t,onNftBurned:n,onListedStatusChanged:s,isHighlighted:o=!1,isPublicView:r=!1,preloadedImageUrl:i,preloadedMetadata:c}){const{writeContract:u,isPending:h,data:l}=xe(),{writeContract:p,isPending:w,data:m}=xe(),[T,N]=y.useState(!1),[d,x]=y.useState({tokenId:e,tokenURI:"",imageUrl:i,metadata:c,isLoading:!i}),[j,v]=y.useState(""),{showToast:C,ToastComponent:$}=Xe(),_=f({label:"imagegen.listed"}),E=f({label:"imagegen.download"}),A=f({label:"imagegen.delete"}),I=Ve(),U=async k=>{try{if(k.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",k),null;const F=await fetch(k);if(!F.ok)throw new Error(`Failed to fetch metadata: ${F.status}`);return await F.json()}catch(F){return console.error("Error fetching NFT metadata:",F),null}};y.useEffect(()=>{(async()=>{try{x(B=>({...B,isLoading:!0,error:void 0}));const z=await I.readContract({address:M.address,abi:M.abi,functionName:"tokenURI",args:[e]});if(!z&&(i||c)){x(B=>({...B,tokenURI:"",isLoading:!1}));return}let G="";r&&(G=await I.readContract({address:M.address,abi:M.abi,functionName:"ownerOf",args:[e]}),v(G));let ae;if(!r)try{const B=ce();ae=await ve(be,{...M,functionName:"isTokenListed",args:[e],chainId:B.id})}catch(B){console.warn("Could not load listing status:",B)}let de=c,ue=i;if(z){const B=await U(z);B&&(de=B,ue=B.image)}x({tokenId:e,tokenURI:z,metadata:de,imageUrl:ue,isLoading:!1,isListed:ae})}catch(F){console.error(`Error loading NFT ${e}:`,F),x({tokenId:e,tokenURI:"",imageUrl:i,metadata:c,isLoading:!1,error:`Failed to load NFT #${e}: ${F instanceof Error?F.message:"Unknown error"}`})}})()},[e,r,i,c,I]);const{isLoading:R,isSuccess:D}=Te({hash:l}),{isLoading:L,isSuccess:W}=Te({hash:m});y.useEffect(()=>{D&&setTimeout(()=>{n()},1e3)},[D,n]),y.useEffect(()=>{W&&s&&C("Listing status updated successfully!","success")},[W,s,C]);const q=()=>{d.imageUrl&&t({src:d.imageUrl,alt:d.metadata?.name||`Artwork #${d.tokenId}`,title:d.metadata?.name,description:d.metadata?.description})},Y=async()=>{if(d.imageUrl)try{const F=await(await fetch(d.imageUrl)).blob(),z=window.URL.createObjectURL(F),G=document.createElement("a");G.href=z,G.download=`${d.metadata?.name||`Artwork-${d.tokenId}`}.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(z)}catch(k){console.error("Download failed:",k),C("Download failed. Please try again.","error")}},Q=async()=>{const F=`https://opensea.io/item/optimism/${M.address}/${d.tokenId}`;try{await navigator.clipboard.writeText(F),C("OpenSea URL copied to clipboard!","success")}catch(z){console.error("Failed to copy URL:",z),window.open(F,"_blank","noopener,noreferrer")}},fe=async()=>{if(!T){N(!0),C(`âš ï¸ Click Delete again to permanently remove "${d.metadata?.name||`Artwork #${d.tokenId}`}"`,"warning"),setTimeout(()=>{N(!1)},5e3);return}N(!1);try{await u({...M,functionName:"burn",args:[d.tokenId]})}catch(k){console.error("Delete failed:",k),C("Failed to delete artwork. Please try again.","error")}},ee=async()=>{if(!s)return;const k=!d.isListed,F=k?"public":"private";try{s(d.tokenId,k),await p({...M,functionName:"setTokenListed",args:[d.tokenId,k]})}catch(z){console.error("Failed to update listing status:",z),s(d.tokenId,!k),C(`Failed to set artwork as ${F}. Please try again.`,"error")}};return a.jsxs("div",{className:`${S.container} ${o?S.highlighted:""} group`,onClick:q,children:[d.isLoading?a.jsxs("div",{className:S.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{className:S.loadingText,children:"Loading artwork..."})]}):d.error?a.jsxs("div",{className:S.errorContainer,children:[a.jsx("div",{className:S.errorBox,children:a.jsx("p",{className:S.errorText,children:d.error})}),a.jsxs("p",{className:S.tokenIdText,children:["ID: ",d.tokenId.toString()]})]}):a.jsxs(a.Fragment,{children:[d.imageUrl?a.jsxs("div",{className:S.imageContainer,children:[a.jsx("img",{src:d.imageUrl,alt:d.metadata?.name||`Artwork #${d.tokenId}`,className:S.image,onError:k=>{const F=k.target;F.style.display="none",F.nextElementSibling.classList.remove("hidden")}}),a.jsx("div",{className:S.imageError,style:{display:"none"},children:"ðŸ“· Image not available"})]}):a.jsx("div",{className:S.imagePlaceholder,children:"ðŸ“· No image available"}),a.jsxs("div",{className:S.cornerBadge,children:["#",d.tokenId.toString()]}),!r&&d.isListed&&a.jsxs("div",{className:S.listedBadge,children:["âœ“ ",_]}),r&&j&&a.jsxs("div",{className:S.ownerBadge,children:["ðŸ‘¤ ",j.slice(0,6),"...",j.slice(-4)]}),a.jsx("div",{className:S.actionsOverlay,children:a.jsxs("div",{className:S.actions,children:[d.imageUrl&&a.jsx("button",{onClick:k=>{k.stopPropagation(),Y()},className:S.compactSecondaryButton,title:`${E} image`,children:"â¬‡ï¸"}),d.imageUrl&&a.jsx("button",{onClick:k=>{k.stopPropagation(),q()},className:S.compactSecondaryButton,title:"View full size",children:"ðŸ”"}),a.jsx("button",{onClick:k=>{k.stopPropagation(),Q()},className:S.compactSecondaryButton,title:"Share artwork",children:"ðŸ“¤"}),!r&&s&&d.isListed!==void 0&&a.jsx("button",{onClick:k=>{k.stopPropagation(),ee()},disabled:w||L,className:S.compactSecondaryButton,title:`${d.isListed?"Make private":"Make public"}`,children:d.isListed?"ðŸ”“":"ðŸ”’"}),r&&a.jsx(vn,{genImTokenId:d.tokenId}),!r&&a.jsx("button",{onClick:k=>{k.stopPropagation(),fe()},disabled:h||R,className:S.compactSecondaryButton,title:`${A} artwork (permanent)`,style:{backgroundColor:h||R?"rgba(0,0,0,0.3)":"rgba(220, 38, 38, 0.8)",opacity:h||R?.6:1},children:h||R?"â³":"ðŸ—‘ï¸"})]})})]}),$]})}function ot({image:e,onClose:t}){const{showToast:n,ToastComponent:s}=Xe();y.useEffect(()=>{const r=i=>{i.key==="Escape"&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]);const o=async()=>{try{const i=await(await fetch(e.src)).blob(),c=window.URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=`${e.title||"NFT-image"}.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c)}catch(r){console.error("Download failed:",r),n("Download failed. Please try again.","error")}};return a.jsxs("div",{className:S.modalOverlay,onClick:t,children:[a.jsxs("div",{className:S.modalContent,onClick:r=>r.stopPropagation(),children:[a.jsx("button",{className:S.modalClose,onClick:t,children:"âœ•"}),a.jsx("img",{src:e.src,alt:e.alt,className:S.modalImage}),(e.title||e.description)&&a.jsxs("div",{className:S.modalInfo,children:[e.title&&a.jsx("h3",{className:S.modalTitle,children:e.title}),e.description&&a.jsx("p",{className:S.modalDescription,children:e.description}),a.jsx("div",{className:S.actions,style:{justifyContent:"center",marginTop:"12px"},children:a.jsx("button",{onClick:o,className:`${S.actionButton} ${he}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function Cn({newlyCreatedNFT:e,onNewNFTDisplayed:t}){const{address:n,isConnected:s}=te(),o=ce(),[r,i]=y.useState([]),[c,u]=y.useState(!1),[h,l]=y.useState(null),[p,w]=y.useState(null),{data:m,isLoading:T}=Ne({...M,functionName:"balanceOf",args:n?[n]:void 0,chainId:o.id,query:{enabled:!!n&&s}}),N=y.useCallback(async()=>{if(!s||!n){i([]);return}u(!0);try{const v=await ve(be,{...M,functionName:"balanceOf",args:[n],chainId:o.id});if(!v||v===0n){i([]);return}const C=[];for(let E=0;E<Number(v);E++){const A=(async()=>{try{return await ve(be,{...M,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(E)],chainId:o.id})}catch(I){return console.error(`Error loading token ID at index ${E}:`,I),0n}})();C.push(A)}const _=(await Promise.all(C)).filter(E=>E>0n).sort((E,A)=>A>E?1:A<E?-1:0);i(_)}catch(v){console.error("Error loading token IDs:",v),i([])}finally{u(!1)}},[s,n]),d=y.useCallback(v=>{l(v),i(C=>C.includes(v)?C:[v,...C]),setTimeout(()=>{l(null),t?.()},5e3)},[t]),x=y.useCallback((v,C)=>{console.log(`NFT ${v} listing status changed to: ${C}`)},[]);y.useEffect(()=>{s&&n&&N()},[n,s,N]),y.useEffect(()=>{e&&d(e.tokenId)},[e,d]);const j=T||c;return s?j&&r.length===0?a.jsxs("div",{className:K.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{children:"Loading your artworks..."})]}):m===0n||!m?a.jsx("div",{className:K.emptyStateContainer,children:a.jsx("p",{className:K.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:K.grid,children:r.map((v,C)=>{const $=e?.tokenId===v,_=$?e.imageUrl:void 0,E=$?e.metadata:void 0;return a.jsx(rt,{tokenId:v,onImageClick:w,onNftBurned:()=>N(),onListedStatusChanged:x,isHighlighted:h===v,isPublicView:!1,preloadedImageUrl:_,preloadedMetadata:E},`my-${v}-${C}`)})}),p&&a.jsx(ot,{image:p,onClose:()=>w(null)})]}):a.jsxs("div",{className:K.walletPrompt,children:[a.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),a.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),a.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function Sn(){const[e,t]=y.useState([]),[n,s]=y.useState(!1),[o,r]=y.useState(null),i=Ve(),c=y.useCallback(async()=>{s(!0);try{const u=await i.readContract({address:M.address,abi:M.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){t([]);return}const h=u.sort((l,p)=>p>l?1:p<l?-1:0);t(h)}catch(u){console.error("Error loading public token IDs:",u),t([])}finally{s(!1)}},[i]);return y.useEffect(()=>{c()},[c]),n&&e.length===0?a.jsxs("div",{className:K.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{children:"Loading public artworks..."})]}):e.length===0?a.jsx("div",{className:K.emptyStateContainer,children:a.jsx("p",{className:K.emptyStateText,children:"No public artworks available yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:K.grid,children:e.map((u,h)=>a.jsx(rt,{tokenId:u,onImageClick:r,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${h}`))}),o&&a.jsx(ot,{image:o,onClose:()=>r(null)})]})}function Nn({newlyCreatedNFT:e,onNewNFTDisplayed:t,activeTab:n,onTabChange:s}={}){const{address:o,isConnected:r}=te(),[i,c]=y.useState(()=>r?"my":"public"),u=n??i,h=s??c,l=Ne({...M,functionName:"balanceOf",args:o?[o]:void 0,chainId:ce().id,query:{enabled:!!o&&r}}),{data:p,refetch:w}=l;y.useEffect(()=>{e&&w&&w()},[e,w]);const m=f({label:"imagegen.myArtworks"}),T=f({label:"imagegen.allPublicArtworks"});return a.jsxs("div",{className:K.container,children:[a.jsx("div",{className:V.container,children:a.jsxs("div",{className:V.tabList,children:[a.jsx(Me,{label:r?`${m} (${p?.toString()||"0"})`:m,isActive:u==="my",onClick:()=>h("my")}),a.jsx(Me,{label:T,isActive:u==="public",onClick:()=>h("public")})]})}),a.jsx("div",{className:`${V.tabPanel} ${u==="my"?"":V.hiddenPanel}`,children:a.jsx(Cn,{newlyCreatedNFT:e,onNewNFTDisplayed:t})}),a.jsx("div",{className:`${V.tabPanel} ${u==="public"?"":V.hiddenPanel}`,children:a.jsx(Sn,{})})]})}function jn(){const{isConnected:e}=te(),[t,n]=y.useState(null),[s,o]=y.useState(()=>e?"my":"public"),r=(h,l,p)=>{console.log("Image generation succeeded:",{tokenId:h,imageUrl:l,metadata:p}),n({tokenId:h,imageUrl:l,metadata:p}),e&&o("my")},i=h=>{console.error("Image generation failed:",h)},c=()=>{n(null)},u=h=>{o(h)};return a.jsxs("div",{className:Ca,children:[a.jsx(Tn,{onSuccess:r,onError:i}),a.jsx(Nn,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:c,activeTab:s,onTabChange:u})]})}const kn=Object.freeze(Object.defineProperty({__proto__:null,default:jn},Symbol.toStringTag,{value:"Module"}));function In(){return"AI Image Generator | fretchen.eu"}const Pn=Object.freeze(Object.defineProperty({__proto__:null,title:In},Symbol.toStringTag,{value:"Module"})),On={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ea}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Pa}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ia}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:kn}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:ka}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Pn}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:ja}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Na}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Sa}}};export{On as configValuesSerialized};
