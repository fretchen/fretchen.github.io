const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-DMsKAHs6.js","assets/chunks/chunk-ncxinpTc.js","assets/chunks/chunk-t-pXVLBL.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.BnhBPXDx.css"])))=>i.map(i=>d[i]);
import{bm as te,bn as ra,bo as oa,b9 as ia,y as Be,G as ae,bp as ca,B as de,bq as la,br as Pe,bs as Me,bt as da,bu as ua,bv as Oe,b5 as Z,a2 as ma,p as ga,bw as ha,bx as pa,b4 as Je,b6 as Xe,b7 as fa,b8 as wa,by as ya,k as ba,l as xa,bz as Ta,a as ne,u as va,r as m,m as Ca,D as x,j as a,c as ka,bA as Sa,bB as Na,bC as Ia,a6 as ja,a8 as Pa,M as b,aC as xe,bD as H,bE as S,bF as ue,bG as Ea,bH as Aa,bI as Te,bJ as X,a5 as qe,bK as Y,C as La,F as Fa,d as Ra,W as za,e as _a,f as Da,g as Ua,o as $a}from"../chunks/chunk-ncxinpTc.js";import{u as Ze}from"../chunks/chunk-Dy3zjqfR.js";import{e as et,c as Ce,j as Ba,o as Ma,k as Oa,r as qa,w as Wa,p as tt,d as Ga,s as Ha,l as Ka,f as oe,m as Qa,G as Le,i as at,g as ke,C as Va,n as We}from"../chunks/chunk-dYGadCQ7.js";import{d as Ya,_ as Ge}from"../chunks/chunk-t-pXVLBL.js";import{s as Fe,A as me,c as nt,d as be,w as st,g as Ja,r as ve,a as Ee,b as Ae,u as Xa}from"../chunks/chunk-Csm-6Eeu.js";import{i as Za}from"../chunks/chunk-CJ5cbSsL.js";import{s as rt,g as en,v as tn,a as an,G as ee,u as nn}from"../chunks/chunk-DlpSk1qi.js";import{s as sn,A as rn}from"../chunks/chunk-DjI0iGln.js";import{u as ot}from"../chunks/chunk-BruNm8V1.js";import{u as on}from"../chunks/chunk-eAcusFae.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-Bkbko-s8.js";async function cn(e,{chain:t}){const{id:n,name:s,nativeCurrency:r,rpcUrls:o,blockExplorers:c}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:te(n),chainName:s,nativeCurrency:r,rpcUrls:o.default.http,blockExplorerUrls:c?Object.values(c).map(({url:d})=>d):void 0}]},{dedupe:!0,retryCount:0})}function ln(e,t){const{abi:n,args:s,bytecode:r,...o}=t,c=ra({abi:n,args:s,bytecode:r});return Fe(e,{...o,...o.authorizationList?{to:null}:{},data:c})}async function dn(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>oa(n))}const it="0x5792579257925792579257925792579257925792579257925792579257925792",ct=te(0,{size:32});async function lt(e,t){const{account:n=e.account,capabilities:s,chain:r=e.chain,experimental_fallback:o,experimental_fallbackDelay:c=32,forceAtomic:d=!1,id:g,version:y="2.0.0"}=t,l=n?ae(n):null,p=t.calls.map(f=>{const i=f,u=i.abi?ia({abi:i.abi,functionName:i.functionName,args:i.args}):i.data;return{data:i.dataSuffix&&u?Be([u,i.dataSuffix]):u,to:i.to,value:i.value?te(i.value):void 0}});try{const f=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:d,calls:p,capabilities:s,chainId:te(r.id),from:l?.address,id:g,version:y}]},{retryCount:0});return typeof f=="string"?{id:f}:f}catch(f){const i=f;if(o&&(i.name==="MethodNotFoundRpcError"||i.name==="MethodNotSupportedRpcError"||i.name==="UnknownRpcError"||i.details.toLowerCase().includes("does not exist / is not available")||i.details.toLowerCase().includes("missing or invalid. request()")||i.details.toLowerCase().includes("did not match any variant of untagged enum")||i.details.toLowerCase().includes("account upgraded to unsupported contract")||i.details.toLowerCase().includes("eip-7702 not supported")||i.details.toLowerCase().includes("unsupported wc_ method")||i.details.toLowerCase().includes("feature toggled misconfigured")||i.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(s&&Object.values(s).some(h=>!h.optional)){const h="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new ca(new de(h,{details:h}))}if(d&&p.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new la(new de(w,{details:w}))}const u=[];for(const w of p){const h=Fe(e,{account:l,chain:r,data:w.data,to:w.to,value:w.value?Pe(w.value):void 0});u.push(h),c>0&&await new Promise(I=>setTimeout(I,c))}const T=await Promise.allSettled(u);if(T.every(w=>w.status==="rejected"))throw T[0].reason;const v=T.map(w=>w.status==="fulfilled"?w.value:ct);return{id:Be([...v,te(r.id,{size:32}),it])}}throw et(f,{...t,account:l,chain:t.chain})}}async function dt(e,t){async function n(l){if(l.endsWith(it.slice(2))){const f=ua(Oe(l,-64,-32)),i=Oe(l,0,-64).slice(2).match(/.{1,64}/g),u=await Promise.all(i.map(v=>ct.slice(2)!==v?e.request({method:"eth_getTransactionReceipt",params:[`0x${v}`]},{dedupe:!0}):void 0)),T=u.some(v=>v===null)?100:u.every(v=>v?.status==="0x1")?200:u.every(v=>v?.status==="0x0")?500:600;return{atomic:!1,chainId:Me(f),receipts:u.filter(Boolean),status:T,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:s=!1,chainId:r,receipts:o,version:c="2.0.0",...d}=await n(t.id),[g,y]=(()=>{const l=d.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...d,atomic:s,chainId:r?Me(r):void 0,receipts:o?.map(l=>({...l,blockNumber:Pe(l.blockNumber),gasUsed:Pe(l.gasUsed),status:da[l.status]}))??[],statusCode:y,status:g,version:c}}async function un(e,t={}){const{account:n=e.account,chainId:s}=t,r=n?ae(n):void 0,o=s?[r?.address,[te(s)]]:[r?.address],c=await e.request({method:"wallet_getCapabilities",params:o}),d={};for(const[g,y]of Object.entries(c)){d[Number(g)]={};for(let[l,p]of Object.entries(y))l==="addSubAccount"&&(l="unstable_addSubAccount"),d[Number(g)][l]=p}return typeof s=="number"?d[s]:d}async function mn(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function ut(e,t){const{account:n=e.account,chainId:s,nonce:r}=t;if(!n)throw new me({docsPath:"/docs/eip7702/prepareAuthorization"});const o=ae(n),c=(()=>{if(t.executor)return t.executor==="self"?t.executor:ae(t.executor)})(),d={address:t.contractAddress??t.address,chainId:s,nonce:r};return typeof d.chainId>"u"&&(d.chainId=e.chain?.id??await Z(e,Ce,"getChainId")({})),typeof d.nonce>"u"&&(d.nonce=await Z(e,Ba,"getTransactionCount")({address:o.address,blockTag:"pending"}),(c==="self"||c?.address&&Za(c.address,o.address))&&(d.nonce+=1)),d}async function gn(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ma(n))}async function hn(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}class pn extends de{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function mt(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:r=({statusCode:T})=>T===200||T>=300,retryCount:o=4,retryDelay:c=({count:T})=>~~(1<<T)*200,timeout:d=6e4,throwOnFailure:g=!1}=t,y=ga(["waitForCallsStatus",e.uid,n]),{promise:l,resolve:p,reject:f}=ha();let i;const u=Ma(y,{resolve:p,reject:f},T=>{const v=Oa(async()=>{const w=h=>{clearTimeout(i),v(),h(),u()};try{const h=await pa(async()=>{const I=await Z(e,dt,"getCallsStatus")({id:n});if(g&&I.status==="failure")throw new pn(I);return I},{retryCount:o,delay:c});if(!r(h))return;w(()=>T.resolve(h))}catch(h){w(()=>T.reject(h))}},{interval:s,emitOnBegin:!0});return v});return i=d?setTimeout(()=>{u(),clearTimeout(i),f(new fn({id:n}))},d):void 0,await l}class fn extends de{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function wn(e,t){const{chain:n=e.chain}=t,s=t.timeout??Math.max((n?.blockTime??0)*3,5e3),r=await lt(e,t);return await mt(e,{...t,id:r.id,timeout:s})}const je=new wa(128);async function gt(e,t){const{account:n=e.account,chain:s=e.chain,accessList:r,authorizationList:o,blobs:c,data:d,gas:g,gasPrice:y,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:i,pollingInterval:u,throwOnReceiptRevert:T,type:v,value:w,...h}=t,I=t.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new me({docsPath:"/docs/actions/wallet/sendTransactionSync"});const E=n?ae(n):null;try{Je(t);const D=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await qa({authorization:o[0]}).catch(()=>{throw new de("`to` is required. Could not infer from `authorizationList`.")})})();if(E?.type==="json-rpc"||E===null){let j;s!==null&&(j=await Z(e,Ce,"getChainId")({}),nt({currentChainId:j,chain:s}));const O=e.chain?.formatters?.transactionRequest?.format,L=(O||Xe)({...fa(h,{format:O}),accessList:r,account:E,authorizationList:o,blobs:c,chainId:j,data:d,gas:g,gasPrice:y,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:i,to:D,type:v,value:w},"sendTransaction"),z=je.get(e.uid),_=z?"wallet_sendTransaction":"eth_sendTransaction",q=await(async()=>{try{return await e.request({method:_,params:[L]},{retryCount:0})}catch(M){if(z===!1)throw M;const F=M;if(F.name==="InvalidInputRpcError"||F.name==="InvalidParamsRpcError"||F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[L]},{retryCount:0}).then(G=>(je.set(e.uid,!0),G)).catch(G=>{const $=G;throw $.name==="MethodNotFoundRpcError"||$.name==="MethodNotSupportedRpcError"?(je.set(e.uid,!1),F):$});throw F}})(),P=await Z(e,Wa,"waitForTransactionReceipt")({checkReplacement:!1,hash:q,pollingInterval:u,timeout:I});if(T&&P.status==="reverted")throw new ya({receipt:P});return P}if(E?.type==="local"){const j=await Z(e,tt,"prepareTransactionRequest")({account:E,accessList:r,authorizationList:o,blobs:c,chain:s,data:d,gas:g,gasPrice:y,maxFeePerBlobGas:l,maxFeePerGas:p,maxPriorityFeePerGas:f,nonce:i,nonceManager:E.nonceManager,parameters:[...Ga,"sidecars"],type:v,value:w,...h,to:D}),O=s?.serializers?.transaction,R=await E.signTransaction(j,{serializer:O});return await Z(e,rt,"sendRawTransactionSync")({serializedTransaction:R,throwOnReceiptRevert:T})}throw E?.type==="smart"?new be({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new be({docsPath:"/docs/actions/wallet/sendTransactionSync",type:E?.type})}catch(D){throw D instanceof be?D:et(D,{...t,account:E,chain:t.chain||void 0})}}async function yn(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function bn(e,t){const{account:n=e.account}=t;if(!n)throw new me({docsPath:"/docs/eip7702/signAuthorization"});const s=ae(n);if(!s.signAuthorization)throw new be({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const r=await ut(e,t);return s.signAuthorization(r)}async function xn(e,t){const{account:n=e.account,chain:s=e.chain,...r}=t;if(!n)throw new me({docsPath:"/docs/actions/wallet/signTransaction"});const o=ae(n);Je({account:o,...t});const c=await Z(e,Ce,"getChainId")({});s!==null&&nt({currentChainId:c,chain:s});const g=(s?.formatters||e.chain?.formatters)?.transactionRequest?.format||Xe;return o.signTransaction?o.signTransaction({...r,chainId:c},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...g({...r,account:o},"signTransaction"),chainId:te(c),from:o.address}]},{retryCount:0})}async function Tn(e,t){const{account:n=e.account,domain:s,message:r,primaryType:o}=t;if(!n)throw new me({docsPath:"/docs/actions/wallet/signTypedData"});const c=ae(n),d={EIP712Domain:en({domain:s}),...t.types};if(tn({domain:s,message:r,primaryType:o,types:d}),c.signTypedData)return c.signTypedData({domain:s,message:r,primaryType:o,types:d});const g=an({domain:s,message:r,primaryType:o,types:d});return e.request({method:"eth_signTypedData_v4",params:[c.address,g]},{retryCount:0})}async function vn(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:te(t)}]},{retryCount:0})}async function Cn(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function kn(e,t){return st.internal(e,gt,"sendTransactionSync",t)}function Sn(e){return{addChain:t=>cn(e,t),deployContract:t=>ln(e,t),fillTransaction:t=>Ka(e,t),getAddresses:()=>dn(e),getCallsStatus:t=>dt(e,t),getCapabilities:t=>un(e,t),getChainId:()=>Ce(e),getPermissions:()=>mn(e),prepareAuthorization:t=>ut(e,t),prepareTransactionRequest:t=>tt(e,t),requestAddresses:()=>gn(e),requestPermissions:t=>hn(e,t),sendCalls:t=>lt(e,t),sendCallsSync:t=>wn(e,t),sendRawTransaction:t=>Ha(e,t),sendRawTransactionSync:t=>rt(e,t),sendTransaction:t=>Fe(e,t),sendTransactionSync:t=>gt(e,t),showCallsStatus:t=>yn(e,t),signAuthorization:t=>bn(e,t),signMessage:t=>sn(e,t),signTransaction:t=>xn(e,t),signTypedData:t=>Tn(e,t),switchChain:t=>vn(e,t),waitForCallsStatus:t=>mt(e,t),watchAsset:t=>Cn(e,t),writeContract:t=>st(e,t),writeContractSync:t=>kn(e,t)}}async function Nn(e,t={}){return(await Ja(e,t)).extend(Sn)}function In(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:s}=t,{connectorUid:r,scopeKey:o,...c}=n[1];return Nn(e,{...c,connector:s})},queryKey:jn(t)}}function jn(e={}){const{connector:t,...n}=e;return["walletClient",{...ba(n),connectorUid:t?.uid}]}function Pn(e={}){const{query:t={},...n}=e,s=xa(n),r=Ta(),{address:o,connector:c,status:d}=ne({config:s}),g=va({config:s}),y=e.connector??c,{queryKey:l,...p}=In(s,{...e,chainId:e.chainId??g,connector:e.connector??c}),f=!!((d==="connected"||d==="reconnecting"&&y?.getProvider)&&(t.enabled??!0)),i=m.useRef(o);return m.useEffect(()=>{const u=i.current;!o&&u?(r.removeQueries({queryKey:l}),i.current=void 0):o!==u&&(r.invalidateQueries({queryKey:l}),i.current=o)},[o,r]),Ca({...t,...p,queryKey:l,enabled:f,staleTime:Number.POSITIVE_INFINITY})}const He=[{name:"getMintStats",type:"function",stateMutability:"view",inputs:[{name:"genImTokenId",type:"uint256"}],outputs:[{name:"mintCount",type:"uint256"},{name:"currentPrice",type:"uint256"},{name:"nextPrice",type:"uint256"}]},{name:"mintCollectorNFT",type:"function",stateMutability:"payable",inputs:[{name:"genImTokenId",type:"uint256"}],outputs:[{name:"",type:"uint256"}]}];function Ke({size:e="sm",className:t}){const n={xs:x({fontSize:"xs",lineHeight:"1"}),sm:x({fontSize:"sm",lineHeight:"1"}),md:x({fontSize:"md",lineHeight:"1"})},s=x({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return a.jsx("span",{className:`${s} ${n[e]} ${t||""}`,role:"img","aria-label":"Information",children:"i"})}function Qe({label:e,locale:t}){const s=ka(),r=t??s.locale??Ya,c=Sa(r==="de"?Na:Ia,e);return a.jsx("span",{"data-locale":r,children:c})}const En="https://mypersonaljscloudivnad9dy-genimgx402token.functions.fnc.fr-par.scw.cloud";function An(){const{data:e}=Pn(),{isConnected:t}=ne(),[n,s]=m.useState("idle"),[r,o]=m.useState(null),[c,d]=m.useState(null),g=t&&!!e,y=m.useCallback(async p=>{if(!e)throw new Error("Wallet not connected");s("awaiting-signature"),o(null),d(null);try{const{x402Client:f,wrapFetchWithPayment:i,x402HTTPClient:u}=await Ge(async()=>{const{x402Client:R,wrapFetchWithPayment:L,x402HTTPClient:z}=await import("../chunks/chunk-6bqGUo_L.js");return{x402Client:R,wrapFetchWithPayment:L,x402HTTPClient:z}},[]),{registerExactEvmScheme:T}=await Ge(async()=>{const{registerExactEvmScheme:R}=await import("../chunks/chunk-DMsKAHs6.js");return{registerExactEvmScheme:R}},__vite__mapDeps([0,1,2,3,4])),v={address:e.account.address,signTypedData:e.signTypedData.bind(e)},w=new f;T(w,{signer:v});const{expectedChainId:h,...I}=p,j=await i(async(R,L)=>{const z=await fetch(R,L);if(z.status===402&&p.network){const _=z.headers.get("Payment-Required");if(_)try{const P=JSON.parse(atob(_)).accepts?.[0]?.network;if(P&&P!==p.network)throw new Error(`Network mismatch! Selected ${p.network} but server requires ${P}. This could indicate a backend configuration error.`)}catch(q){if(q instanceof Error&&q.message.includes("Network mismatch"))throw q}}return z},w)(En,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)});if(s("processing"),!j.ok){const R=await j.text();throw new Error(`Request failed: ${j.status} - ${R}`)}const O=await j.json();try{const L=new u(w).getPaymentSettleResponse(z=>j.headers.get(z));L&&d({transaction:L.transaction,network:L.network})}catch{}return s("success"),O}catch(f){const i=f instanceof Error?f.message:"Unknown error";throw o(i),s("error"),f}},[e]),l=m.useCallback(()=>{s("idle"),o(null),d(null)},[]);return{generateImage:y,status:n,error:r,paymentReceipt:c,reset:l,isReady:g}}const Ln=(e,t,n=1920)=>{const s=e/t;return e<=n&&t<=n?{width:e,height:t}:e>t?{width:n,height:Math.round(n/s)}:{width:Math.round(n*s),height:n}},Fn=(e,t=1024)=>new Promise((n,s)=>{const r=document.createElement("canvas"),o=r.getContext("2d"),c=new Image;c.onload=()=>{const{width:d,height:g}=Ln(c.width,c.height);if(r.width=d,r.height=g,!o){s(new Error("Could not get canvas context"));return}o.fillStyle="white",o.fillRect(0,0,d,g),o.drawImage(c,0,0,d,g);let y=.9;const l=()=>{const p=r.toDataURL("image/jpeg",y);p.length*.75/1024<=t||y<=.1?n({base64:p.split(",")[1],mimeType:"image/jpeg"}):(y-=.1,setTimeout(l,0))};l()},c.onerror=()=>s(new Error("Failed to load image")),c.src=URL.createObjectURL(e)});function Rn({onSuccess:e,onError:t}){const{trackEvent:n}=ja(),{generateImage:s,status:r,error:o,paymentReceipt:c,reset:d}=An(),[g,y]=m.useState(),[l,p]=m.useState(),[f,i]=m.useState(!1);m.useEffect(()=>{i(!0)},[]);const[u,T]=m.useState(),[v,w]=m.useState(null),[h,I]=m.useState("image/jpeg"),{address:E,isConnected:D}=ne(),{connectors:j,connect:O}=Pa(),R=f&&D,{network:L,switchIfNeeded:z}=Ze(Le),_=oe(L),q=Qa(L),[P,M]=m.useState("empty"),[F,G]=m.useState(""),[$,re]=m.useState("1024x1024"),[B,ge]=m.useState(!1),[se,J]=m.useState(!1),[ie,W]=m.useState(null),Se=()=>{j.length>0&&O({connector:j[0]})},he=b({label:"imagegen.connectWalletButton"}),Ne=b({label:"imagegen.enterPrompt"}),C=b({label:"imagegen.generating"}),A=b({label:"imagegen.createArtwork"}),U=b({label:"imagegen.promptPlaceholder"}),K=b({label:"imagegen.editPromptPlaceholder"}),ce=b({label:"imagegen.editImage"}),pe=b({label:"imagegen.connectAccountFirst"}),Q=b({label:"imagegen.enterPromptError"}),bt=b({label:"imagegen.unknownError"}),xt=b({label:"imagegen.chainSwitchFailed"}),Re=b({label:"imagegen.awaitingSignature"}),Tt=b({label:"imagegen.processingPayment"}),vt=b({label:"imagegen.uploadReferenceImage"}),Ct=b({label:"imagegen.dragDropHere"}),kt=b({label:"imagegen.supportedFormats"}),St=b({label:"imagegen.referenceImageTitle"}),Nt=b({label:"imagegen.generatedArtworkTitle"}),ze=b({label:"imagegen.remove"}),It=b({label:"imagegen.referenceImageAlt"}),jt=b({label:"imagegen.generatedArtworkAlt"}),Pt=b({label:"imagegen.referenceImageHint"}),Et=b({label:"imagegen.invalidFileType"}),At=b({label:"imagegen.fileTooLarge"}),Lt=b({label:"imagegen.compressionFailed"}),Ft=b({label:"imagegen.failedToProcessImage"}),Rt=b({label:"imagegen.generatingImage"}),zt=b({label:"imagegen.title"}),_t=b({label:"imagegen.collapsedTitle"}),Dt=b({label:"imagegen.collapsedDescription"}),Ut=b({label:"imagegen.square"}),$t=b({label:"imagegen.wide"}),Bt=b({label:"imagegen.mintingInfo"}),Mt=b({label:"imagegen.artworkCreated"}),Ot=b({label:"imagegen.checkGallery"}),qt=()=>se||r==="awaiting-signature"||r==="processing"?"loading":F.trim()?"ready":"needsPrompt",_e=k=>{switch(k){case"loading":return r==="awaiting-signature"?Re:r==="processing"?Tt:C;case"connect":return he;case"needsPrompt":return Ne;case"ready":return P!=="empty"?ce:A;default:return P!=="empty"?ce:A}},fe=qt(),Wt=()=>{const k=fe==="loading",N=fe==="needsPrompt"||k,V=()=>{n("imagegen-create-artwork-click",{hasReferenceImage:P!=="empty",promptLength:F.trim().length,isConnected:D,imageSize:$,paymentMethod:"x402-usdc"}),Gt()};return a.jsx("button",{onClick:V,disabled:N,className:`${xe} ${N?Aa:""}`,title:b({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:k?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ue}),_e(fe)]}):a.jsxs(a.Fragment,{children:["ðŸŽ¨ ",_e(fe),a.jsx(Ke,{size:"xs",className:x({ml:"1",opacity:"0.7"})})]})})},Gt=async()=>{if(!D||!E){const N=pe;W(N),t?.(N);return}if(!F.trim()){const N=Q;W(N),t?.(N);return}if(J(!0),W(null),!await z()){console.error("[x402] Chain switch rejected by user");const N=`${xt}: ${q.name}`;W(N),t?.(N),J(!1);return}try{const N=v!==null,V=N?"edit":"generate",we=await s({prompt:F,size:$,mode:V,referenceImage:N?v:void 0,network:L,expectedChainId:_,isListed:B}),Ie=BigInt(we.tokenId),le=we.image_url;p(Ie),y(le),T(le),M("generated");try{const ta=await(await fetch(le)).blob(),aa=(await new Promise((na,sa)=>{const ye=new FileReader;ye.onload=()=>na(ye.result),ye.onerror=sa,ye.readAsDataURL(ta)})).split(",")[1];w(aa)}catch($e){console.warn("Failed to convert generated image to base64:",$e)}const ea={name:`AI Generated Artwork #${Ie}`,description:`AI generated artwork based on the prompt: "${F}"`,image:le,external_url:we.metadata_url||"",attributes:[{trait_type:"Prompt",value:F},{trait_type:"Generation Method",value:"AI Generated"},{trait_type:"Payment Method",value:"x402 USDC"}]};e?.(Ie,le,ea,L),n("x402-image-generated",{tokenId:we.tokenId,mode:V,hasTxReceipt:!!c}),setTimeout(()=>{G(""),re("1024x1024"),y(void 0),p(void 0),W(null),d()},3e3)}catch(N){console.error("[x402] Error:",N);const V=N instanceof Error?N.message:bt;W(V),t?.(V)}finally{J(!1)}},Ht=b({label:"imagegen.mintingInfo"}),Kt=k=>["image/jpeg","image/png"].includes(k.type)?k.size>10485760?(W(At),!1):!0:(W(Et),!1),De=async k=>{if(Kt(k)){W(null),J(!0);try{const N=await Fn(k,1024);w(N.base64),I(N.mimeType),M("reference")}catch(N){console.error("Image compression failed:",N);const V=N instanceof Error?N.message:Ft;W(`${Lt}: ${V}`)}finally{J(!1)}}},Qt=k=>{k.preventDefault(),k.stopPropagation()},Vt=k=>{k.preventDefault(),k.stopPropagation()},Yt=k=>{k.preventDefault(),k.stopPropagation();const N=Array.from(k.dataTransfer.files);N.length>0&&De(N[0])},Jt=k=>{const N=k.target.files;N&&N.length>0&&De(N[0])},Xt=()=>{w(null),I("image/jpeg");const k=document.getElementById("reference-image-input");k&&(k.value=""),M(u?"generated":"empty")},Ue=$==="1792x1024"?"wide":"square",Zt=()=>{n("imagegen-connect-click"),Se()};return a.jsx("div",{className:x({transition:"all 0.5s ease-in-out",overflow:"hidden"}),children:R?a.jsx("div",{className:H.compactLayout,children:a.jsxs("div",{className:H.compactContainer,children:[a.jsx("div",{className:H.compactHeader,children:a.jsxs("h3",{className:H.compactTitle,children:["ðŸŽ¨",a.jsx(Qe,{label:"imagegen.title"})]})}),a.jsxs("div",{className:H.compactForm,children:[a.jsxs("div",{"data-testid":"drop-zone",className:x({mb:"4",border:"1px solid",borderColor:P==="empty"?"gray.300":"gray.400",borderRadius:"md",bg:P==="empty"?"gray.50":"white",position:"relative",cursor:P==="empty"?"pointer":"default",overflow:"hidden",width:"100%",_hover:P==="empty"?{borderColor:"gray.400",bg:"gray.100"}:{}}),onDragOver:Qt,onDragEnter:Vt,onDrop:Yt,onClick:()=>{P==="empty"&&document.getElementById("reference-image-input")?.click()},children:[a.jsx("input",{id:"reference-image-input","data-testid":"reference-image-input",type:"file",accept:"image/*",onChange:Jt,className:x({position:"absolute",opacity:0,width:0,height:0,pointerEvents:"none"})}),P==="empty"&&a.jsxs("div",{className:x({display:"flex",alignItems:"center",justifyContent:"center",py:"6",px:"4",gap:"3"}),children:[a.jsx("div",{className:x({fontSize:"xl",color:"gray.500"}),children:"ðŸ“¸"}),a.jsxs("div",{className:x({textAlign:"left"}),children:[a.jsx("h4",{className:x({fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"1"}),children:vt}),a.jsxs("p",{className:x({fontSize:"xs",color:"gray.500",mb:"0"}),children:[Ct," â€¢ ",kt]})]})]}),P==="reference"&&v&&a.jsxs("div",{className:x({p:"3"}),children:[a.jsxs("div",{className:x({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:x({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:St}),a.jsxs("button",{onClick:k=>{k.stopPropagation(),Xt()},className:x({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),children:["âœ• ",ze]})]}),a.jsx("div",{className:x({position:"relative",width:"100%",height:Ue==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:`data:${h};base64,${v}`,alt:It,className:x({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})}),a.jsx("p",{className:x({fontSize:"xs",color:"gray.500",textAlign:"center",mt:"2",mb:"0"}),children:Pt})]}),P==="generated"&&u&&a.jsxs("div",{className:x({p:"3"}),children:[a.jsxs("div",{className:x({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:x({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:Nt}),a.jsx("div",{className:x({display:"flex",gap:"2"}),children:a.jsxs("button",{onClick:()=>{w(null),I("image/jpeg"),T(void 0),M("empty");const k=document.getElementById("reference-image-input");k&&(k.value="")},className:x({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),disabled:se||r!=="idle",children:["âœ• ",ze]})})]}),a.jsx("div",{className:x({position:"relative",width:"100%",height:Ue==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:u,alt:jt,className:x({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})})]})]}),a.jsx("textarea",{value:F,onChange:k=>G(k.target.value),placeholder:P==="reference"?K:U,disabled:se||r!=="idle",className:H.compactTextarea}),a.jsxs("div",{className:H.controlBar,children:[a.jsxs("div",{className:H.optionsGroup,children:[a.jsxs("select",{id:"imageSizeSelect",value:$,onChange:k=>re(k.target.value),disabled:se||r!=="idle",className:H.compactSelect,"aria-label":"Select image format for your artwork",children:[a.jsx("option",{value:"1024x1024",children:Ut}),a.jsx("option",{value:"1792x1024",children:$t})]}),a.jsxs("label",{className:S.checkboxLabel,title:B?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[a.jsx("input",{type:"checkbox",checked:B,onChange:k=>ge(k.target.checked),disabled:se||r!=="idle",className:S.checkbox}),a.jsx(Qe,{label:"imagegen.listed"})]})]}),a.jsx(Wt,{})]})]}),a.jsx(rn,{service:"genimg"}),a.jsx("span",{id:"create-artwork-info",className:x({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:Bt}),a.jsxs("div",{className:x({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[a.jsx(Ke,{size:"xs",className:x({mr:"1"})}),Ht]}),(r==="awaiting-signature"||r==="processing")&&a.jsxs("div",{className:H.compactStatus,children:[a.jsx("div",{className:ue}),a.jsx("span",{children:r==="awaiting-signature"?Re:Rt})]}),(ie||o)&&a.jsx("div",{className:H.compactError,children:ie||o}),c&&a.jsxs("div",{className:x({mt:"2",p:"2",fontSize:"xs",bg:"green.50",border:"1px solid",borderColor:"green.200",borderRadius:"md",color:"green.800"}),children:["âœ… Payment confirmed â€¢"," ",a.jsx("a",{href:`https://optimistic.etherscan.io/tx/${c.transaction}`,target:"_blank",rel:"noopener noreferrer",className:x({color:"green.600",textDecoration:"underline",_hover:{color:"green.700"}}),children:"View transaction â†—"})]}),l&&g&&a.jsxs("div",{className:Ea,children:[a.jsx("h4",{className:x({margin:0,fontSize:"sm"}),children:Mt}),a.jsxs("p",{className:x({margin:"xs 0",fontSize:"sm"}),children:["ID: ",l.toString()," - ",Ot]})]})]})}):a.jsxs("div",{className:x({maxWidth:"500px",margin:"0 auto",textAlign:"center"}),children:[a.jsxs("h3",{className:x({fontSize:"2xl",fontWeight:"semibold",marginBottom:"4",color:"gray.800"}),children:["ðŸŽ¨ ",zt]}),a.jsx("div",{className:x({fontSize:"md",fontWeight:"medium",color:"gray.800",mb:"3",textAlign:"center"}),children:_t}),a.jsx("p",{className:x({fontSize:"sm",color:"gray.600",mb:"lg",lineHeight:"1.5"}),children:Dt}),a.jsx("div",{className:x({display:"flex",justifyContent:"center"}),children:a.jsx("button",{onClick:Zt,onMouseEnter:()=>n("imagegen-connect-hover"),className:xe,children:he})})]})})}function ht(e={}){const{includeTestnets:t=!1}=e,{address:n,isConnected:s}=ne(),[r,o]=m.useState([]),[c,d]=m.useState(!1),[g,y]=m.useState(null),l=m.useMemo(()=>Le.filter(i=>t||!at(i)),[t]),p=m.useCallback(async i=>{if(!n)return[];const u=ke(i),T=oe(i);try{const v=await ve(Te,{address:u,abi:ee,functionName:"balanceOf",args:[n],chainId:T});if(!v||v===0n)return[];const w=[];for(let I=0;I<Number(v);I++)w.push((async()=>{try{return{tokenId:await ve(Te,{address:u,abi:ee,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(I)],chainId:T}),network:i}}catch(E){return console.error(`Error fetching token at index ${I} on ${i}:`,E),null}})());return(await Promise.all(w)).filter(I=>I!==null)}catch(v){return console.error(`Error fetching NFTs on ${i}:`,v),[]}},[n]),f=m.useCallback(async()=>{if(!s||!n){o([]);return}d(!0),y(null);try{const u=(await Promise.all(l.map(T=>p(T)))).flat().sort((T,v)=>v.tokenId>T.tokenId?1:v.tokenId<T.tokenId?-1:0);o(u)}catch(i){const u=i instanceof Error?i.message:"Failed to load NFTs";y(u),console.error("Error loading multi-chain NFTs:",i)}finally{d(!1)}},[s,n,l,p]);return m.useEffect(()=>{s&&n&&f()},[s,n,f]),{tokens:r,isLoading:c,error:g,reload:f}}function zn(e={}){const{includeTestnets:t=!1}=e,[n,s]=m.useState([]),[r,o]=m.useState(!1),[c,d]=m.useState(null),g=m.useMemo(()=>Le.filter(p=>t||!at(p)),[t]),y=m.useCallback(async p=>{const f=ke(p),i=oe(p);try{const u=await ve(Te,{address:f,abi:ee,functionName:"getAllPublicTokens",chainId:i});return!u||u.length===0?[]:u.map(T=>({tokenId:T,network:p}))}catch(u){return console.error(`Error fetching public NFTs on ${p}:`,u),[]}},[]),l=m.useCallback(async()=>{o(!0),d(null);try{const f=(await Promise.all(g.map(i=>y(i)))).flat().sort((i,u)=>u.tokenId>i.tokenId?1:u.tokenId<i.tokenId?-1:0);s(f)}catch(p){const f=p instanceof Error?p.message:"Failed to load public NFTs";d(f),console.error("Error loading multi-chain public NFTs:",p)}finally{o(!1)}},[g,y]);return m.useEffect(()=>{l()},[l]),{tokens:n,isLoading:r,error:c,reload:l}}function Ve({label:e,isActive:t,onClick:n}){return a.jsx("button",{className:`${X.tab} ${t?X.activeTab:""}`,onClick:n,"aria-selected":t,children:e})}function _n({tokenId:e,network:t,enabled:n=!0}){const[s,r]=m.useState(void 0),[o,c]=m.useState(!1),[d,g]=m.useState(void 0),y=oe(t),l=ke(t),p=m.useCallback(async()=>{if(n){c(!0),g(void 0);try{const i=await ve(Te,{address:l,abi:ee,functionName:"isTokenListed",args:[e],chainId:y});r(i)}catch(i){i instanceof Error&&(i.message.includes("reverted")||i.name.includes("ContractFunctionRevertedError")||i.name.includes("ContractFunctionExecutionError"))?g("isListed not available for this token"):(console.error("Failed to load listing status:",i),g(i instanceof Error?i.message:"Failed to load listing status"))}finally{c(!1)}}},[e,n,l,y]);m.useEffect(()=>{p()},[p]);const f=m.useCallback(i=>{r(i)},[]);return{isListed:s,isLoading:o,error:d,refetch:p,setOptimisticListed:f}}function Dn({genImTokenId:e}){const{isConnected:t}=ne(),{network:n,switchIfNeeded:s}=Ze(Va),{writeContract:r,isPending:o,data:c}=Ee(),{isLoading:d,isSuccess:g}=Ae({hash:c}),[y,l]=m.useState(!1),p=oe(n),f=b({label:"imagegen.collect"}),i=b({label:"imagegen.collecting"}),u=b({label:"imagegen.collected"}),T=b({label:"imagegen.priceLoading"}),v=b({label:"imagegen.currentPriceInfo"}),{data:w,error:h,isPending:I,refetch:E}=on({address:We(n),abi:He,functionName:"getMintStats",args:[e],chainId:p}),D=async()=>{if(!t||!w||!Array.isArray(w))return;if(l(!0),!await s()){l(!1);return}const[,L]=w;r({address:We(n),abi:He,functionName:"mintCollectorNFT",args:[e],value:L})};(o||g)&&y&&l(!1),m.useEffect(()=>{g&&setTimeout(()=>{E()},2e3)},[g,E]);const j=()=>{if(I)return"...";if(h||!w||!Array.isArray(w))return"0";const[R]=w;return R.toString()},O=()=>{if(I||h||!w||!Array.isArray(w))return T;const[R,L]=w,z=qe(L),_=re=>{const B=parseFloat(re);return B>=.001?B.toFixed(3):B>=1e-4?B.toFixed(4):B.toFixed(6)},q=_(z),P=Number(R),M=Math.ceil((P+1)/5)*5,G=L/BigInt(2**Math.floor(P/5))*BigInt(2**Math.floor(M/5)),$=_(qe(G));return v.replace("{currentPrice}",q).replace("{nextTier}",M.toString()).replace("{nextPrice}",$)};return a.jsx("button",{onClick:D,disabled:!t||o||d||y,className:`${S.actionButton} ${xe}`,title:`Collect this NFT (${j()} collected) | ${O()}`,children:o||y?`ðŸ“¦ ${i}`:g?`âœ… ${u}`:`ðŸ“¦ ${f} (${j()})`})}const pt={"eip155:10":{name:"Optimism",shortName:"OP",color:"#FF0420",bgColor:"rgba(255, 4, 32, 0.9)"},"eip155:8453":{name:"Base",shortName:"Base",color:"#0052FF",bgColor:"rgba(0, 82, 255, 0.9)"},"eip155:11155420":{name:"OP Sepolia",shortName:"OPS",color:"#FF0420",bgColor:"rgba(255, 4, 32, 0.7)"},"eip155:84532":{name:"Base Sepolia",shortName:"BaseS",color:"#0052FF",bgColor:"rgba(0, 82, 255, 0.7)"}},Un=x({display:"inline-flex",alignItems:"center",gap:"4px",fontWeight:"600",borderRadius:"full",backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.2)",color:"white",whiteSpace:"nowrap"}),$n=x({fontSize:"10px",padding:"2px 6px"}),Bn=x({fontSize:"12px",padding:"4px 8px"}),Mn=x({position:"absolute",bottom:"8px",right:"8px",zIndex:10}),On=x({position:"absolute",top:"8px",left:"8px",zIndex:10});function ft({network:e,size:t="sm",position:n="bottom-right"}){const s=pt[e];if(!s)return null;const r=t==="sm"?$n:Bn,o=n==="bottom-right"?Mn:n==="top-left"?On:"";return a.jsx("span",{className:`${Un} ${r} ${o}`,style:{backgroundColor:s.bgColor},title:s.name,children:s.shortName})}const qn=x({display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"gray.600",marginTop:"8px"}),Ye=x({fontWeight:"500"});function Wn({network:e,tokenId:t}){return pt[e]?a.jsxs("div",{className:qn,children:[a.jsx("span",{className:Ye,children:"Network:"}),a.jsx(ft,{network:e,size:"md",position:"inline"}),t!==void 0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:Ye,style:{marginLeft:"12px"},children:"Token:"}),a.jsxs("span",{children:["#",t.toString()]})]})]}):null}function wt({tokenId:e,network:t,onImageClick:n,onNftBurned:s,onListedStatusChanged:r,isHighlighted:o=!1,isPublicView:c=!1,preloadedImageUrl:d,preloadedMetadata:g}){const{writeContract:y,isPending:l,data:p}=Ee(),{writeContract:f,isPending:i,data:u}=Ee(),{switchChainAsync:T}=Xa(),[v,w]=m.useState(!1),[h,I]=m.useState({tokenId:e,tokenURI:"",imageUrl:d,metadata:g,isLoading:!d}),[E,D]=m.useState(""),{showToast:j,ToastComponent:O}=ot(),R=b({label:"imagegen.listed"}),L=b({label:"imagegen.download"}),z=b({label:"imagegen.delete"}),_=ke(t),q=oe(t),P=async()=>{try{return await T({chainId:q}),!0}catch(C){return console.error("Failed to switch chain:",C),!1}},M=!h.isLoading&&!h.error,{isListed:F,setOptimisticListed:G}=_n({tokenId:e,network:t,enabled:!c&&M}),$=nn(t),re=async C=>{try{if(C.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",C),null;const A=await fetch(C);if(!A.ok)throw new Error(`Failed to fetch metadata: ${A.status}`);return await A.json()}catch(A){return console.error("Error fetching NFT metadata:",A),null}};m.useEffect(()=>{(async()=>{try{I(Q=>({...Q,isLoading:!0,error:void 0}));const U=await $.readContract({address:_,abi:ee,functionName:"tokenURI",args:[e]});if(!U&&(d||g)){I(Q=>({...Q,tokenURI:"",isLoading:!1}));return}let K="";c&&(K=await $.readContract({address:_,abi:ee,functionName:"ownerOf",args:[e]}),D(K));let ce=g,pe=d;if(U){const Q=await re(U);Q&&(ce=Q,pe=Q.image)}I({tokenId:e,tokenURI:U,metadata:ce,imageUrl:pe,isLoading:!1})}catch(A){console.error(`Error loading NFT ${e}:`,A),I({tokenId:e,tokenURI:"",imageUrl:d,metadata:g,isLoading:!1,error:`Failed to load NFT #${e}: ${A instanceof Error?A.message:"Unknown error"}`})}})()},[e,c,d,g,$,_]);const{isLoading:B,isSuccess:ge}=Ae({hash:p}),{isLoading:se,isSuccess:J}=Ae({hash:u});m.useEffect(()=>{ge&&setTimeout(()=>{s()},1e3)},[ge,s]),m.useEffect(()=>{J&&r&&j("Listing status updated successfully!","success")},[J,r,j]);const ie=()=>{h.imageUrl&&n({src:h.imageUrl,alt:h.metadata?.name||`Artwork #${h.tokenId}`,title:h.metadata?.name,description:h.metadata?.description,network:t,tokenId:h.tokenId})},W=async()=>{if(h.imageUrl)try{const A=await(await fetch(h.imageUrl)).blob(),U=window.URL.createObjectURL(A),K=document.createElement("a");K.href=U,K.download=`${h.metadata?.name||`Artwork-${h.tokenId}`}.png`,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(U)}catch(C){console.error("Download failed:",C),j("Download failed. Please try again.","error")}},Se=async()=>{let C;t==="eip155:10"?C="optimism":t==="eip155:8453"?C="base":t==="eip155:11155420"?C="optimism-sepolia":C="base-sepolia";const A=`https://opensea.io/item/${C}/${_}/${h.tokenId}`;try{await navigator.clipboard.writeText(A),j("OpenSea URL copied to clipboard!","success")}catch(U){console.error("Failed to copy URL:",U),window.open(A,"_blank","noopener,noreferrer")}},he=async()=>{if(!v){w(!0),j(`âš ï¸ Click Delete again to permanently remove "${h.metadata?.name||`Artwork #${h.tokenId}`}"`,"warning"),setTimeout(()=>{w(!1)},5e3);return}w(!1);try{if(!await P()){j("Please switch to the correct network.","error");return}await y({address:_,abi:ee,functionName:"burn",args:[h.tokenId]})}catch(C){console.error("Delete failed:",C),j("Failed to delete artwork. Please try again.","error")}},Ne=async()=>{if(!r)return;const C=!F,A=C?"public":"private";try{if(!await P()){j("Please switch to the correct network.","error");return}G(C),r(h.tokenId,C),await f({address:_,abi:ee,functionName:"setTokenListed",args:[h.tokenId,C]})}catch(U){console.error("Failed to update listing status:",U),G(!C),r(h.tokenId,!C),j(`Failed to set artwork as ${A}. Please try again.`,"error")}};return a.jsxs("div",{className:`${S.container} ${o?S.highlighted:""} group`,onClick:ie,children:[h.isLoading?a.jsxs("div",{className:S.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{className:S.loadingText,children:"Loading artwork..."})]}):h.error?a.jsxs("div",{className:S.errorContainer,children:[a.jsx("div",{className:S.errorBox,children:a.jsx("p",{className:S.errorText,children:h.error})}),a.jsxs("p",{className:S.tokenIdText,children:["ID: ",h.tokenId.toString()]})]}):a.jsxs(a.Fragment,{children:[h.imageUrl?a.jsxs("div",{className:S.imageContainer,children:[a.jsx("img",{src:h.imageUrl,alt:h.metadata?.name||`Artwork #${h.tokenId}`,className:S.image,onError:C=>{const A=C.target;A.style.display="none",A.nextElementSibling.classList.remove("hidden")}}),a.jsx("div",{className:S.imageError,style:{display:"none"},children:"ðŸ“· Image not available"})]}):a.jsx("div",{className:S.imagePlaceholder,children:"ðŸ“· No image available"}),a.jsxs("div",{className:S.cornerBadge,children:["#",h.tokenId.toString()]}),a.jsx(ft,{network:t,size:"sm",position:"bottom-right"}),!c&&F&&a.jsxs("div",{className:S.listedBadge,children:["âœ“ ",R]}),c&&E&&a.jsxs("div",{className:S.ownerBadge,children:["ðŸ‘¤ ",E.slice(0,6),"...",E.slice(-4)]}),a.jsx("div",{className:S.actionsOverlay,children:a.jsxs("div",{className:S.actions,children:[h.imageUrl&&a.jsx("button",{onClick:C=>{C.stopPropagation(),W()},className:S.compactSecondaryButton,title:`${L} image`,children:"â¬‡ï¸"}),h.imageUrl&&a.jsx("button",{onClick:C=>{C.stopPropagation(),ie()},className:S.compactSecondaryButton,title:"View full size",children:"ðŸ”"}),a.jsx("button",{onClick:C=>{C.stopPropagation(),Se()},className:S.compactSecondaryButton,title:"Share artwork",children:"ðŸ“¤"}),!c&&r&&F!==void 0&&a.jsx("button",{onClick:C=>{C.stopPropagation(),Ne()},disabled:i||se,className:S.compactSecondaryButton,title:`${F?"Make private":"Make public"}`,children:F?"ðŸ”“":"ðŸ”’"}),c&&a.jsx(Dn,{genImTokenId:h.tokenId}),!c&&a.jsx("button",{onClick:C=>{C.stopPropagation(),he()},disabled:l||B,className:S.compactSecondaryButton,title:`${z} artwork (permanent)`,style:{backgroundColor:l||B?"rgba(0,0,0,0.3)":"rgba(220, 38, 38, 0.8)",opacity:l||B?.6:1},children:l||B?"â³":"ðŸ—‘ï¸"})]})})]}),O]})}function yt({image:e,onClose:t}){const{showToast:n,ToastComponent:s}=ot();m.useEffect(()=>{const o=c=>{c.key==="Escape"&&t()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]);const r=async()=>{try{const c=await(await fetch(e.src)).blob(),d=window.URL.createObjectURL(c),g=document.createElement("a");g.href=d,g.download=`${e.title||"NFT-image"}.png`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(d)}catch(o){console.error("Download failed:",o),n("Download failed. Please try again.","error")}};return a.jsxs("div",{className:S.modalOverlay,onClick:t,children:[a.jsxs("div",{className:S.modalContent,onClick:o=>o.stopPropagation(),children:[a.jsx("button",{className:S.modalClose,onClick:t,children:"âœ•"}),a.jsx("img",{src:e.src,alt:e.alt,className:S.modalImage}),(e.title||e.description||e.network)&&a.jsxs("div",{className:S.modalInfo,children:[e.title&&a.jsx("h3",{className:S.modalTitle,children:e.title}),e.description&&a.jsx("p",{className:S.modalDescription,children:e.description}),e.network&&a.jsx(Wn,{network:e.network,tokenId:e.tokenId}),a.jsx("div",{className:S.actions,style:{justifyContent:"center",marginTop:"12px"},children:a.jsx("button",{onClick:r,className:`${S.actionButton} ${xe}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function Gn({newlyCreatedNFT:e,onNewNFTDisplayed:t}){const{isConnected:n}=ne(),{tokens:s,isLoading:r,reload:o}=ht(),[c,d]=m.useState(null),[g,y]=m.useState(null),[l,p]=m.useState([]);m.useEffect(()=>{p(s)},[s]);const f=m.useCallback(u=>{d(u),p(T=>T.some(w=>w.tokenId===u.tokenId&&w.network===u.network)?T:[{tokenId:u.tokenId,network:u.network},...T]),setTimeout(()=>{d(null),t?.()},5e3)},[t]),i=m.useCallback((u,T)=>{},[]);return m.useEffect(()=>{e&&f({tokenId:e.tokenId,network:e.network})},[e,f]),n?r&&l.length===0?a.jsxs("div",{className:Y.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{children:"Loading your artworks from all networks..."})]}):l.length===0?a.jsx("div",{className:Y.emptyStateContainer,children:a.jsx("p",{className:Y.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:Y.grid,children:l.map((u,T)=>{const v=e?.tokenId===u.tokenId&&e?.network===u.network,w=v?e.imageUrl:void 0,h=v?e.metadata:void 0,I=c?.tokenId===u.tokenId&&c?.network===u.network;return a.jsx(wt,{tokenId:u.tokenId,network:u.network,onImageClick:y,onNftBurned:()=>o(),onListedStatusChanged:i,isHighlighted:I,isPublicView:!1,preloadedImageUrl:w,preloadedMetadata:h},`my-${u.network}-${u.tokenId}-${T}`)})}),g&&a.jsx(yt,{image:g,onClose:()=>y(null)})]}):a.jsxs("div",{className:Y.walletPrompt,children:[a.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),a.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),a.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function Hn(){const{tokens:e,isLoading:t}=zn(),[n,s]=m.useState(null);return t&&e.length===0?a.jsxs("div",{className:Y.loadingContainer,children:[a.jsx("div",{className:ue}),a.jsx("p",{children:"Loading public artworks from all networks..."})]}):e.length===0?a.jsx("div",{className:Y.emptyStateContainer,children:a.jsx("p",{className:Y.emptyStateText,children:"No public artworks available yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:Y.grid,children:e.map((r,o)=>a.jsx(wt,{tokenId:r.tokenId,network:r.network,onImageClick:s,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${r.network}-${r.tokenId}-${o}`))}),n&&a.jsx(yt,{image:n,onClose:()=>s(null)})]})}function Kn({newlyCreatedNFT:e,onNewNFTDisplayed:t,activeTab:n,onTabChange:s}={}){const{isConnected:r}=ne(),[o,c]=m.useState(()=>r?"my":"public"),d=n??o,g=s??c,{tokens:y,reload:l}=ht(),p=y.length;m.useEffect(()=>{e&&l()},[e,l]);const f=b({label:"imagegen.myArtworks"}),i=b({label:"imagegen.allPublicArtworks"});return a.jsxs("div",{className:Y.container,children:[a.jsx("div",{className:X.container,children:a.jsxs("div",{className:X.tabList,children:[a.jsx(Ve,{label:r?`${f} (${p})`:f,isActive:d==="my",onClick:()=>g("my")}),a.jsx(Ve,{label:i,isActive:d==="public",onClick:()=>g("public")})]})}),a.jsx("div",{className:`${X.tabPanel} ${d==="my"?"":X.hiddenPanel}`,children:a.jsx(Gn,{newlyCreatedNFT:e,onNewNFTDisplayed:t})}),a.jsx("div",{className:`${X.tabPanel} ${d==="public"?"":X.hiddenPanel}`,children:a.jsx(Hn,{})})]})}function Qn(){const{isConnected:e}=ne(),[t,n]=m.useState(null),[s,r]=m.useState(()=>e?"my":"public"),o=(y,l,p,f)=>{console.log("Image generation succeeded:",{tokenId:y,imageUrl:l,metadata:p,network:f}),n({tokenId:y,imageUrl:l,metadata:p,network:f??"eip155:10"}),e&&r("my")},c=y=>{console.error("Image generation failed:",y)},d=()=>{n(null)},g=y=>{r(y)};return a.jsxs("div",{className:La,children:[a.jsx(Rn,{onSuccess:o,onError:c}),a.jsx(Kn,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:d,activeTab:s,onTabChange:g})]})}const Vn=Object.freeze(Object.defineProperty({__proto__:null,default:Qn},Symbol.toStringTag,{value:"Module"}));function Yn(){return"AI Image Generator | fretchen.eu"}const Jn=Object.freeze(Object.defineProperty({__proto__:null,title:Yn},Symbol.toStringTag,{value:"Module"})),ms={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:$a}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Ua}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Da}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Vn}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:_a}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Jn}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:za}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ra}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Fa}}};export{ms as configValuesSerialized};
