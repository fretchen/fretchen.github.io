import{a3 as ze,a4 as Re,a5 as Oe,O as Se,r as l,P as _e,c as A,j as e,u as Me,a6 as We,a7 as He,a8 as Ge,S as Q,a9 as Ie,aa as qe,ab as b,ac as L,ad as d,ae as K,af as Ve,ag as W,ah as oe,ai as Te,Q as Ce,aj as Pe,ak as pe,al as Ye,am as we,an as Le,ao as R,g as Ke,F as Qe,a as Ze,W as Je,d as Xe,e as et,f as tt,o as at}from"../chunks/chunk-BzraOwNl.js";import{e as Z,b as ie,u as ce,c as re,d as be,f as nt,r as ye}from"../chunks/chunk-BoEVFYmj.js";import{d as st}from"../chunks/chunk-CT5atk_u.js";import{c as $e}from"../chunks/chunk-D1BGgp8C.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-D4DthRap.js";import"../chunks/chunk-De-5sSZ5.js";let xe=[];function ke(t){const a=t.chains;return ze(xe,a)?xe:(xe=a,a)}async function ot(t,a){const{addEthereumChainParameter:n,chainId:s}=a,c=t.state.connections.get(a.connector?.uid??t.state.current);if(c){const i=c.connector;if(!i.switchChain)throw new Re({connector:i});return await i.switchChain({addEthereumChainParameter:n,chainId:s})}const r=t.chains.find(i=>i.id===s);if(!r)throw new Oe;return t.setState(i=>({...i,chainId:s})),r}function rt(t,a){const{onChange:n}=a;return t._internal.chains.subscribe((s,c)=>{n(s,c)})}function it(t){return{mutationFn(a){return ot(t,a)},mutationKey:["switchChain"]}}function ct(t={}){const a=Se(t);return l.useSyncExternalStore(n=>rt(a,{onChange:n}),()=>ke(a),()=>ke(a))}function lt(t={}){const{mutation:a}=t,n=Se(t),s=it(n),{mutate:c,mutateAsync:r,...i}=_e({...a,...s});return{...i,chains:ct({config:n}),switchChain:c,switchChainAsync:r}}function Ne({size:t="sm",className:a}){const n={xs:A({fontSize:"xs",lineHeight:"1"}),sm:A({fontSize:"sm",lineHeight:"1"}),md:A({fontSize:"md",lineHeight:"1"})},s=A({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return e.jsx("span",{className:`${s} ${n[t]} ${a||""}`,role:"img","aria-label":"Information",children:"i"})}function je({label:t,locale:a}){const s=Me(),c=a??s.locale??st,i=We(c==="de"?He:Ge,t);return e.jsx("span",{"data-locale":c,children:i})}const dt=async t=>new Promise((a,n)=>{const s=async()=>{try{const c=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});c?a(c):setTimeout(s,2e3)}catch(c){n(c)}};s()});function ut({apiUrl:t="https://mypersonaljscloudivnad9dy-readnftv2.functions.fnc.fr-par.scw.cloud",onSuccess:a,onError:n}){const s=Z(),[c,r]=l.useState(),[i,m]=l.useState(),[p,u]=l.useState(""),[T,j]=l.useState("1024x1024"),[P,O]=l.useState(!1),[g,_]=l.useState(!1),[S,o]=l.useState("idle"),[E,C]=l.useState(null),{address:w,isConnected:f}=Q(),I=ie(),F=Ie(),{switchChain:v,isPending:$}=lt(),{connectors:U,connect:H}=qe(),{data:G}=ce({...s,functionName:"mintPrice",args:[],...I?.id&&{chainId:I.id}}),{writeContractAsync:V}=re(),M=async h=>new Promise((y,z)=>{const me=()=>{F===h?y():setTimeout(me,100)};setTimeout(()=>{z(new Error("Chain switch timeout - please try again"))},1e4),me()}),q=()=>{U.length>0&&H({connector:U[0]})},D=b({label:"imagegen.connectWalletButton"}),J=b({label:"imagegen.connectWalletTitle"}),X=b({label:"imagegen.enterPrompt"}),le=b({label:"imagegen.switchingNetwork"}),de=b({label:"imagegen.creating"}),ue=b({label:"imagegen.generating"}),ee=b({label:"imagegen.createArtwork"}),k=()=>$?"switching":g?"loading":f?p.trim()?"ready":"needsPrompt":"connect",x=h=>{switch(h){case"switching":return le;case"loading":return S==="minting"?de:ue;case"connect":return D;case"needsPrompt":return X;case"ready":return ee;default:return ee}},N=k(),B=()=>e.jsxs("button",{onClick:q,className:`${L.compactButton}`,title:J,"aria-describedby":"create-artwork-info",children:["ðŸ”— ",D]}),te=()=>{const h=N==="needsPrompt",y=N==="loading"||N==="switching";return e.jsx("button",{onClick:ae,disabled:h,className:`${L.compactButton} ${h?L.compactButtonDisabled:""}`,title:b({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:K}),x(N)]}):e.jsxs(e.Fragment,{children:["ðŸŽ¨ ",x(N),e.jsx(Ne,{size:"xs",className:A({ml:"1",opacity:"0.7"})})]})})},ae=async()=>{if(!f||!w){const y="Please connect your account first";C(y),n?.(y);return}const h=I?.id;if(h&&F!==h)try{C("Switching to Optimism network..."),await v({chainId:h}),await M(h),C(null)}catch(y){console.error("Failed to switch chain:",y);const z=y instanceof Error?y.message:"Please switch to Optimism network to create artworks";C(z),n?.(z);return}if(!p.trim()){const y="Please enter a prompt";C(y),n?.(y);return}if(!G){const y="Could not load creation fee from system";C(y),n?.(y);return}_(!0),C(null),o("minting");try{const z=await V({...s,functionName:"safeMint",args:["",P],value:G,...I?.id&&{chainId:I.id}});console.log("Minting transaction sent:",z);const he=(await dt(z))?.logs.find(Be=>Be.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!he||he.topics.length<4)throw new Error("Could not extract artwork ID from transaction");const Ue=he.topics[3],Y=BigInt(Ue);console.log("Created artwork ID:",Y),m(Y),o("generating");const se=await fetch(`${t}?prompt=${encodeURIComponent(p)}&tokenId=${Y}&size=${T}`);if(!se.ok)throw new Error(`Error: ${se.status} ${se.statusText}`);const ge=await se.json();console.log("Image generation completed",ge);const fe=ge.image_url;r(fe),o("idle");const De={name:`AI Generated Artwork #${Y}`,description:`AI generated artwork based on the prompt: "${p}"`,image:fe,external_url:ge.metadata_url||"",attributes:[{trait_type:"Prompt",value:p},{trait_type:"Generation Method",value:"AI Generated"}]};a?.(Y,fe,De),setTimeout(()=>{u(""),j("1024x1024"),r(void 0),m(void 0),C(null)},3e3)}catch(y){console.error("Error:",y);const z=y instanceof Error?y.message:"An unknown error occurred";C(z),o("error"),n?.(z)}finally{_(!1)}},ne=b({label:"imagegen.mintingInfo"});return e.jsx("div",{className:L.compactLayout,children:e.jsxs("div",{className:L.compactContainer,children:[e.jsx("div",{className:L.compactHeader,children:e.jsxs("h3",{className:L.compactTitle,children:["ðŸŽ¨",e.jsx(je,{label:"imagegen.title"})]})}),e.jsxs("div",{className:L.compactForm,children:[e.jsx("textarea",{value:p,onChange:h=>u(h.target.value),placeholder:b({label:"imagegen.promptPlaceholder"}),disabled:g||S!=="idle"||$,className:L.compactTextarea}),e.jsxs("div",{className:L.controlBar,children:[e.jsxs("div",{className:L.optionsGroup,children:[e.jsxs("select",{id:"imageSizeSelect",value:T,onChange:h=>j(h.target.value),disabled:g||S!=="idle"||$,className:L.compactSelect,"aria-label":"Select image format for your artwork",children:[e.jsx("option",{value:"1024x1024",children:b({label:"imagegen.square"})}),e.jsx("option",{value:"1792x1024",children:b({label:"imagegen.wide"})})]}),e.jsxs("label",{className:d.checkboxLabel,title:P?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:h=>O(h.target.checked),disabled:g||S!=="idle"||$,className:d.checkbox}),e.jsx(je,{label:"imagegen.listed"})]})]}),N==="connect"?e.jsx(B,{}):e.jsx(te,{})]})]}),e.jsxs("div",{className:A({mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:["Powered by"," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer","aria-label":"Learn more about Optimism (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"Optimism"})," ","â€¢"," ",e.jsx("a",{href:`https://optimistic.etherscan.io/address/${s.address}`,target:"_blank",rel:"noopener noreferrer","aria-label":"View smart contract on Optimism Etherscan (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"View Contract â†—"})]}),e.jsx("span",{id:"create-artwork-info",className:A({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:b({label:"imagegen.mintingInfo"})}),e.jsxs("div",{className:A({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[e.jsx(Ne,{size:"xs",className:A({mr:"1"})}),ne]}),S!=="idle"&&e.jsxs("div",{className:L.compactStatus,children:[e.jsx("div",{className:K}),e.jsx("span",{children:S==="minting"?"Creating your artwork...":"Generating image..."})]}),E&&e.jsx("div",{className:L.compactError,children:E}),i&&c&&e.jsxs("div",{className:Ve,children:[e.jsx("h4",{className:A({margin:0,fontSize:"sm"}),children:"âœ… Artwork created successfully!"}),e.jsxs("p",{className:A({margin:"xs 0",fontSize:"sm"}),children:["ID: ",i.toString()," - Check your gallery below"]})]})]})})}function ve({label:t,isActive:a,onClick:n}){return e.jsx("button",{className:`${W.tab} ${a?W.activeTab:""}`,onClick:n,"aria-selected":a,children:t})}function mt({message:t,type:a,duration:n,onClose:s}){const c=l.useRef(null);l.useEffect(()=>{const m=n??(a==="error"?4e3:a==="warning"?5e3:3e3);return c.current=setTimeout(()=>{s()},m),()=>{c.current&&clearTimeout(c.current)}},[n,a,s]);const r=()=>{switch(a){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":default:return"âŒ"}};return e.jsx("div",{className:oe.container,children:e.jsxs("div",{className:oe.content,"data-type":a,children:[e.jsx("span",{className:oe.icon,children:r()}),e.jsx("span",{className:oe.message,children:t})]})})}function Ae(){const[t,a]=l.useState(null),n=(r,i="error",m)=>{a({message:r,type:i,duration:m})},s=()=>{a(null)},c=t?e.jsx(mt,{message:t.message,type:t.type,duration:t.duration,onClose:s}):null;return{showToast:n,hideToast:s,ToastComponent:c}}function ht({genImTokenId:t}){const[a,n]=l.useState(!1),{isConnected:s}=Q(),c=Ie(),{writeContract:r,isPending:i,data:m,error:p}=re(),{isLoading:u,isSuccess:T}=be({hash:m}),j=ie(),P=nt(),O=c===j.id,{data:g,error:_,isPending:S,refetch:o}=ce({...P,functionName:"getMintStats",args:[t],chainId:j.id}),E=async()=>{if(!s||!O||!g||!Array.isArray(g))return;n(!0);const[,f]=g;r({...P,functionName:"mintCollectorNFT",args:[t],value:f})};l.useEffect(()=>{T&&(n(!1),setTimeout(()=>{o()},2e3)),p&&n(!1)},[T,p,o]);const C=()=>{if(S)return"...";if(_||!g||!Array.isArray(g))return"0";const[f]=g;return f.toString()},w=()=>{if(S||_||!g||!Array.isArray(g))return"Price loading...";const[f,I]=g,F=Ce(I),v=q=>{const D=parseFloat(q);return D>=.001?D.toFixed(3):D>=1e-4?D.toFixed(4):D.toFixed(6)},$=v(F),U=Number(f),H=Math.ceil((U+1)/5)*5,V=I/BigInt(2**Math.floor(U/5))*BigInt(2**Math.floor(H/5)),M=v(Ce(V));return`Current price: ${$} ETH | Price after ${H} mints: ${M} ETH`};return e.jsx("button",{onClick:E,disabled:!s||a||i||u||!O,className:`${d.actionButton} ${Te}`,title:`Collect this NFT (${C()} collected) | ${w()}`,children:a||i?"ðŸ“¦ Collecting...":T?"âœ… Collected!":`ðŸ“¦ ${b({label:"imagegen.collect"})} (${C()})`})}function Ee({tokenId:t,onImageClick:a,onNftBurned:n,onListedStatusChanged:s,isHighlighted:c=!1,isPublicView:r=!1,preloadedImageUrl:i,preloadedMetadata:m}){const{writeContract:p,isPending:u,data:T}=re(),{writeContract:j,isPending:P,data:O}=re(),g=Z(),[_,S]=l.useState(!1),[o,E]=l.useState({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!i}),[C,w]=l.useState(""),{showToast:f,ToastComponent:I}=Ae(),F=b({label:"imagegen.artwork"}),v=b({label:"imagegen.listed"}),$=b({label:"imagegen.download"}),U=b({label:"imagegen.share"}),H=b({label:"imagegen.delete"}),G=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),V=async k=>{try{if(k.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",k),null;const x=await fetch(k);if(!x.ok)throw new Error(`Failed to fetch metadata: ${x.status}`);return await x.json()}catch(x){return console.error("Error fetching NFT metadata:",x),null}};l.useEffect(()=>{(async()=>{try{E(h=>({...h,isLoading:!0,error:void 0}));const N=await G.readContract({address:g.address,abi:g.abi,functionName:"tokenURI",args:[t]});if(!N&&(i||m)){E(h=>({...h,tokenURI:"",isLoading:!1}));return}let B="";r&&(B=await G.readContract({address:g.address,abi:g.abi,functionName:"ownerOf",args:[t]}),w(B));let te;if(!r)try{te=await ye(we,{...g,functionName:"isTokenListed",args:[t]})}catch(h){console.warn("Could not load listing status:",h)}let ae=m,ne=i;if(N){const h=await V(N);h&&(ae=h,ne=h.image)}E({tokenId:t,tokenURI:N,metadata:ae,imageUrl:ne,isLoading:!1,isListed:te})}catch(x){console.error(`Error loading NFT ${t}:`,x),E({tokenId:t,tokenURI:"",imageUrl:i,metadata:m,isLoading:!1,error:`Failed to load NFT #${t}: ${x instanceof Error?x.message:"Unknown error"}`})}})()},[t,r,i,m]);const{isLoading:M,isSuccess:q}=be({hash:T}),{isLoading:D,isSuccess:J}=be({hash:O});l.useEffect(()=>{q&&setTimeout(()=>{n()},1e3)},[q]),l.useEffect(()=>{J&&s&&f("Listing status updated successfully!","success")},[J]);const X=()=>{o.imageUrl&&a({src:o.imageUrl,alt:o.metadata?.name||`Artwork #${o.tokenId}`,title:o.metadata?.name,description:o.metadata?.description})},le=async()=>{if(o.imageUrl)try{const x=await(await fetch(o.imageUrl)).blob(),N=window.URL.createObjectURL(x),B=document.createElement("a");B.href=N,B.download=`${o.metadata?.name||`Artwork-${o.tokenId}`}.png`,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(N)}catch(k){console.error("Download failed:",k),f("Download failed. Please try again.","error")}},de=async()=>{const x=`https://opensea.io/item/optimism/${g.address}/${o.tokenId}`;try{await navigator.clipboard.writeText(x),f("OpenSea URL copied to clipboard!","success")}catch(N){console.error("Failed to copy URL:",N),window.open(x,"_blank","noopener,noreferrer")}},ue=async()=>{if(!_){S(!0),f(`âš ï¸ Click Delete again to permanently remove "${o.metadata?.name||`Artwork #${o.tokenId}`}"`,"warning"),setTimeout(()=>{S(!1)},5e3);return}S(!1);try{await p({...g,functionName:"burn",args:[o.tokenId]})}catch(k){console.error("Delete failed:",k),f("Failed to delete artwork. Please try again.","error")}},ee=async()=>{if(!s)return;const k=!o.isListed,x=k?"public":"private";try{s(o.tokenId,k),await j({...g,functionName:"setTokenListed",args:[o.tokenId,k]})}catch(N){console.error("Failed to update listing status:",N),s(o.tokenId,!k),f(`Failed to set artwork as ${x}. Please try again.`,"error")}};return e.jsxs("div",{className:`${d.container} ${c?d.highlighted:""}`,children:[o.isLoading?e.jsxs("div",{className:d.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{className:d.loadingText,children:"Loading artwork..."})]}):o.error?e.jsxs("div",{className:d.errorContainer,children:[e.jsx("div",{className:d.errorBox,children:e.jsx("p",{className:d.errorText,children:o.error})}),e.jsxs("p",{className:d.tokenIdText,children:["ID: ",o.tokenId.toString()]})]}):e.jsxs(e.Fragment,{children:[o.imageUrl?e.jsxs("div",{className:d.imageContainer,children:[e.jsx("img",{src:o.imageUrl,alt:o.metadata?.name||`${F} #${o.tokenId}`,className:d.image,onClick:X,style:{cursor:"pointer"},onError:k=>{const x=k.target;x.style.display="none",x.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:d.imageError,style:{display:"none"},children:"Image not available"})]}):e.jsx("div",{className:d.imagePlaceholder,children:"No image available"}),e.jsx("h3",{className:d.title,children:o.metadata?.name||`Artwork #${o.tokenId}`}),o.metadata?.description&&e.jsx("p",{className:d.description,children:o.metadata.description}),e.jsxs("div",{className:d.footer,children:[e.jsxs("span",{children:["ID: ",o.tokenId.toString()]}),!r&&s&&o.isListed!==void 0&&e.jsxs("label",{className:d.checkboxLabel,title:`${o.isListed?"NFT is publicly listed":"NFT is private"}`,children:[e.jsx("input",{type:"checkbox",checked:o.isListed,onChange:ee,disabled:P||D,className:d.checkbox}),v]}),r&&C&&e.jsxs("span",{title:`Owned by ${C}`,children:["Owner: ",C.slice(0,6),"...",C.slice(-4)]})]}),e.jsxs("div",{className:d.actions,children:[o.imageUrl&&e.jsx("button",{onClick:X,className:`${d.actionButton} ${pe}`,title:"View full size",children:"ðŸ” Zoom"}),o.imageUrl&&e.jsxs("button",{onClick:le,className:`${d.actionButton} ${Te}`,title:"Download image",children:["â¬‡ï¸ ",$]}),e.jsxs("button",{onClick:de,className:`${d.actionButton} ${pe}`,title:"Share your artwork on the marketplace",children:["ðŸ“¤ ",U]}),r&&e.jsx(ht,{genImTokenId:o.tokenId}),!r&&e.jsx("button",{onClick:ue,disabled:u||M,className:`${d.actionButton} ${u||M?pe:Ye}`,title:"Delete artwork (permanent)",style:{opacity:u||M?.6:1},children:u?"ðŸ—‘ï¸ Deleting...":M?"â³ Confirming...":`ðŸ—‘ï¸ ${H}`})]})]}),I]})}function Fe({image:t,onClose:a}){const{showToast:n,ToastComponent:s}=Ae();l.useEffect(()=>{const r=i=>{i.key==="Escape"&&a()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[a]);const c=async()=>{try{const i=await(await fetch(t.src)).blob(),m=window.URL.createObjectURL(i),p=document.createElement("a");p.href=m,p.download=`${t.title||"NFT-image"}.png`,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(m)}catch(r){console.error("Download failed:",r),n("Download failed. Please try again.","error")}};return e.jsxs("div",{className:d.modalOverlay,onClick:a,children:[e.jsxs("div",{className:d.modalContent,onClick:r=>r.stopPropagation(),children:[e.jsx("button",{className:d.modalClose,onClick:a,children:"âœ•"}),e.jsx("img",{src:t.src,alt:t.alt,className:d.modalImage}),(t.title||t.description)&&e.jsxs("div",{className:d.modalInfo,children:[t.title&&e.jsx("h3",{className:d.modalTitle,children:t.title}),t.description&&e.jsx("p",{className:d.modalDescription,children:t.description}),e.jsx("div",{className:d.actions,style:{justifyContent:"center",marginTop:"12px"},children:e.jsx("button",{onClick:c,className:`${d.actionButton} ${Te}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function gt({newlyCreatedNFT:t,onNewNFTDisplayed:a}){const{address:n,isConnected:s}=Q(),c=ie(),r=Z(),[i,m]=l.useState([]),[p,u]=l.useState(!1),[T,j]=l.useState(null),[P,O]=l.useState(null),{data:g,isLoading:_}=ce({...r,functionName:"balanceOf",args:n?[n]:void 0,chainId:c.id,query:{enabled:!!n&&s}}),S=l.useCallback(async()=>{if(!s||!n){m([]);return}u(!0);try{const w=await ye(we,{...r,functionName:"balanceOf",args:[n]});if(!w||w===0n){m([]);return}const f=[];for(let v=0;v<Number(w);v++){const $=(async()=>{try{return await ye(we,{...r,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(v)]})}catch(U){return console.error(`Error loading token ID at index ${v}:`,U),0n}})();f.push($)}const F=(await Promise.all(f)).filter(v=>v>0n).sort((v,$)=>$>v?1:$<v?-1:0);m(F)}catch(w){console.error("Error loading token IDs:",w),m([])}finally{u(!1)}},[s,n]),o=w=>{j(w),m(f=>f.includes(w)?f:[w,...f]),setTimeout(()=>{j(null),a?.()},5e3)},E=l.useCallback((w,f)=>{console.log(`NFT ${w} listing status changed to: ${f}`)},[]);l.useEffect(()=>{s&&n&&S()},[n,s]),l.useEffect(()=>{t&&o(t.tokenId)},[t]);const C=_||p;return s?C&&i.length===0?e.jsxs("div",{className:R.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{children:"Loading your artworks..."})]}):g===0n||!g?e.jsx("div",{className:R.emptyStateContainer,children:e.jsx("p",{className:R.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:R.grid,children:i.map((w,f)=>{const I=t?.tokenId===w,F=I?t.imageUrl:void 0,v=I?t.metadata:void 0;return e.jsx(Ee,{tokenId:w,onImageClick:O,onNftBurned:()=>S(),onListedStatusChanged:E,isHighlighted:T===w,isPublicView:!1,preloadedImageUrl:F,preloadedMetadata:v},`my-${w}-${f}`)})}),P&&e.jsx(Fe,{image:P,onClose:()=>O(null)})]}):e.jsxs("div",{className:R.walletPrompt,children:[e.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),e.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),e.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function ft(){const t=Z(),[a,n]=l.useState([]),[s,c]=l.useState(!1),[r,i]=l.useState(null),m=l.useMemo(()=>$e({chain:Le,transport:Pe()}),[]),p=l.useCallback(async()=>{c(!0);try{const u=await m.readContract({address:t.address,abi:t.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){n([]);return}const T=u.sort((j,P)=>P>j?1:P<j?-1:0);n(T)}catch(u){console.error("Error loading public token IDs:",u),n([])}finally{c(!1)}},[]);return l.useEffect(()=>{p()},[]),s&&a.length===0?e.jsxs("div",{className:R.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{children:"Loading public artworks..."})]}):a.length===0?e.jsx("div",{className:R.emptyStateContainer,children:e.jsx("p",{className:R.emptyStateText,children:"No public artworks available yet."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:R.grid,children:a.map((u,T)=>e.jsx(Ee,{tokenId:u,onImageClick:i,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${T}`))}),r&&e.jsx(Fe,{image:r,onClose:()=>i(null)})]})}function pt({newlyCreatedNFT:t,onNewNFTDisplayed:a,activeTab:n,onTabChange:s}={}){const{address:c,isConnected:r}=Q(),i=Z(),[m,p]=l.useState(()=>r?"my":"public"),u=n??m,T=s??p,{data:j}=ce({...i,functionName:"balanceOf",args:c?[c]:void 0,chainId:ie().id,query:{enabled:!!c&&r}});return e.jsxs("div",{className:R.container,children:[e.jsx("div",{className:W.container,children:e.jsxs("div",{className:W.tabList,children:[e.jsx(ve,{label:r?`${b({label:"imagegen.myArtworks"})} (${j?.toString()||"0"})`:b({label:"imagegen.myArtworks"}),isActive:u==="my",onClick:()=>T("my")}),e.jsx(ve,{label:b({label:"imagegen.allPublicArtworks"}),isActive:u==="public",onClick:()=>T("public")})]})}),e.jsx("div",{className:`${W.tabPanel} ${u==="my"?"":W.hiddenPanel}`,children:e.jsx(gt,{newlyCreatedNFT:t,onNewNFTDisplayed:a})}),e.jsx("div",{className:`${W.tabPanel} ${u==="public"?"":W.hiddenPanel}`,children:e.jsx(ft,{})})]})}function xt(){const{isConnected:t}=Q(),[a,n]=l.useState(null),[s,c]=l.useState(()=>t?"my":"public"),r=(u,T,j)=>{console.log("Image generation succeeded:",{tokenId:u,imageUrl:T,metadata:j}),n({tokenId:u,imageUrl:T,metadata:j}),t&&c("my")},i=u=>{console.error("Image generation failed:",u)},m=()=>{n(null)},p=u=>{c(u)};return e.jsxs("div",{className:Ke,children:[e.jsx(ut,{onSuccess:r,onError:i}),e.jsx(pt,{newlyCreatedNFT:a??void 0,onNewNFTDisplayed:m,activeTab:s,onTabChange:p})]})}const wt=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function bt(){return"AI Image Generator"}const yt=Object.freeze(Object.defineProperty({__proto__:null,title:bt},Symbol.toStringTag,{value:"Module"})),Lt={serverOnlyHooks:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:at}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:tt}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:et}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:wt}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Xe}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:yt}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Je}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ze}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Qe}}};export{Lt as configValuesSerialized};
