import{aP as Re,aQ as ze,aR as Be,O as Ne,r as l,P as Oe,c as A,j as e,u as _e,aS as Me,aT as We,aU as He,T as J,aV as Se,U as Ge,S as y,aW as D,aX as d,aY as K,aZ as qe,an as X,a_ as Ve,a$ as W,b0 as re,Q as Te,b1 as Ie,b2 as pe,b3 as Ye,b4 as xe,b5 as Pe,b6 as _,g as Qe,F as Ze,a as Ke,W as Xe,d as Je,e as et,f as tt,o as at}from"../chunks/chunk-opfS9jr-.js";import{u as ie,a as ce,e as S,c as oe,d as we,f as nt,r as ye}from"../chunks/chunk-CMaedKqY.js";import{d as st}from"../chunks/chunk-CT5atk_u.js";import{c as Le}from"../chunks/chunk-Bse6cQ-h.js";/* empty css                      *//* empty css                      *//* empty css                      */import"../chunks/chunk-CyfuVoiA.js";import"../chunks/chunk-D8vQLVYS.js";let be=[];function ke(t){const a=t.chains;return Re(be,a)?be:(be=a,a)}async function rt(t,a){const{addEthereumChainParameter:n,chainId:s}=a,c=t.state.connections.get(a.connector?.uid??t.state.current);if(c){const o=c.connector;if(!o.switchChain)throw new ze({connector:o});return await o.switchChain({addEthereumChainParameter:n,chainId:s})}const i=t.chains.find(o=>o.id===s);if(!i)throw new Be;return t.setState(o=>({...o,chainId:s})),i}function ot(t,a){const{onChange:n}=a;return t._internal.chains.subscribe((s,c)=>{n(s,c)})}function it(t){return{mutationFn(a){return rt(t,a)},mutationKey:["switchChain"]}}function ct(t={}){const a=Ne(t);return l.useSyncExternalStore(n=>ot(a,{onChange:n}),()=>ke(a),()=>ke(a))}function lt(t={}){const{mutation:a}=t,n=Ne(t),s=it(n),{mutate:c,mutateAsync:i,...o}=Oe({...a,...s});return{...o,chains:ct({config:n}),switchChain:c,switchChainAsync:i}}function Ce({size:t="sm",className:a}){const n={xs:A({fontSize:"xs",lineHeight:"1"}),sm:A({fontSize:"sm",lineHeight:"1"}),md:A({fontSize:"md",lineHeight:"1"})},s=A({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return e.jsx("span",{className:`${s} ${n[t]} ${a||""}`,role:"img","aria-label":"Information",children:"i"})}function je({label:t,locale:a}){const s=_e(),c=a??s.locale??st,o=Me(c==="de"?We:He,t);return e.jsx("span",{"data-locale":c,children:o})}const dt=async t=>new Promise((a,n)=>{const s=async()=>{try{const c=await window.ethereum.request({method:"eth_getTransactionReceipt",params:[t]});c?a(c):setTimeout(s,2e3)}catch(c){n(c)}};s()});function ut({apiUrl:t="https://mypersonaljscloudivnad9dy-readnftv2.functions.fnc.fr-par.scw.cloud",onSuccess:a,onError:n}){const[s,c]=l.useState(),[i,o]=l.useState(),[m,u]=l.useState(""),[g,T]=l.useState("1024x1024"),[k,$]=l.useState(!1),[I,F]=l.useState(!1),[f,r]=l.useState("idle"),[U,C]=l.useState(null),{address:x,isConnected:p}=J(),P=ce(),L=Se(),{switchChain:N,isPending:E}=lt(),{connectors:R,connect:Q}=Ge(),{data:M}=ie({...S,functionName:"mintPrice",args:[],...P?.id&&{chainId:P.id}}),{writeContractAsync:G}=oe(),H=async h=>new Promise((w,O)=>{const me=()=>{L===h?w():setTimeout(me,100)};setTimeout(()=>{O(new Error("Chain switch timeout - please try again"))},1e4),me()}),q=()=>{R.length>0&&Q({connector:R[0]})},V=y({label:"imagegen.connectWalletButton"}),Y=y({label:"imagegen.connectWalletTitle"}),z=y({label:"imagegen.enterPrompt"}),le=y({label:"imagegen.switchingNetwork"}),de=y({label:"imagegen.creating"}),ue=y({label:"imagegen.generating"}),ee=y({label:"imagegen.createArtwork"}),j=()=>E?"switching":I?"loading":p?m.trim()?"ready":"needsPrompt":"connect",b=h=>{switch(h){case"switching":return le;case"loading":return f==="minting"?de:ue;case"connect":return V;case"needsPrompt":return z;case"ready":return ee;default:return ee}},v=j(),B=()=>e.jsxs("button",{onClick:q,className:`${X}`,title:Y,"aria-describedby":"create-artwork-info",children:["ðŸ”— ",V]}),te=()=>{const h=v==="needsPrompt",w=v==="loading"||v==="switching";return e.jsx("button",{onClick:ae,disabled:h,className:`${X} ${h?Ve:""}`,title:y({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:K}),b(v)]}):e.jsxs(e.Fragment,{children:["ðŸŽ¨ ",b(v),e.jsx(Ce,{size:"xs",className:A({ml:"1",opacity:"0.7"})})]})})},ae=async()=>{if(!p||!x){const w="Please connect your account first";C(w),n?.(w);return}const h=P?.id;if(h&&L!==h)try{C("Switching to Optimism network..."),await N({chainId:h}),await H(h),C(null)}catch(w){console.error("Failed to switch chain:",w);const O=w instanceof Error?w.message:"Please switch to Optimism network to create artworks";C(O),n?.(O);return}if(!m.trim()){const w="Please enter a prompt";C(w),n?.(w);return}if(!M){const w="Could not load creation fee from system";C(w),n?.(w);return}F(!0),C(null),r("minting");try{const O=await G({...S,functionName:"safeMint",args:["",k],value:M,...P?.id&&{chainId:P.id}});console.log("Minting transaction sent:",O);const he=(await dt(O))?.logs.find(Fe=>Fe.topics[0]==="0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef");if(!he||he.topics.length<4)throw new Error("Could not extract artwork ID from transaction");const Ue=he.topics[3],Z=BigInt(Ue);console.log("Created artwork ID:",Z),o(Z),r("generating");const se=await fetch(`${t}?prompt=${encodeURIComponent(m)}&tokenId=${Z}&size=${g}`);if(!se.ok)throw new Error(`Error: ${se.status} ${se.statusText}`);const ge=await se.json();console.log("Image generation completed",ge);const fe=ge.image_url;c(fe),r("idle");const De={name:`AI Generated Artwork #${Z}`,description:`AI generated artwork based on the prompt: "${m}"`,image:fe,external_url:ge.metadata_url||"",attributes:[{trait_type:"Prompt",value:m},{trait_type:"Generation Method",value:"AI Generated"}]};a?.(Z,fe,De),setTimeout(()=>{u(""),T("1024x1024"),c(void 0),o(void 0),C(null)},3e3)}catch(w){console.error("Error:",w);const O=w instanceof Error?w.message:"An unknown error occurred";C(O),r("error"),n?.(O)}finally{F(!1)}},ne=y({label:"imagegen.mintingInfo"});return e.jsx("div",{className:D.compactLayout,children:e.jsxs("div",{className:D.compactContainer,children:[e.jsx("div",{className:D.compactHeader,children:e.jsxs("h3",{className:D.compactTitle,children:["ðŸŽ¨",e.jsx(je,{label:"imagegen.title"})]})}),e.jsxs("div",{className:D.compactForm,children:[e.jsx("textarea",{value:m,onChange:h=>u(h.target.value),placeholder:y({label:"imagegen.promptPlaceholder"}),disabled:I||f!=="idle"||E,className:D.compactTextarea}),e.jsxs("div",{className:D.controlBar,children:[e.jsxs("div",{className:D.optionsGroup,children:[e.jsxs("select",{id:"imageSizeSelect",value:g,onChange:h=>T(h.target.value),disabled:I||f!=="idle"||E,className:D.compactSelect,"aria-label":"Select image format for your artwork",children:[e.jsx("option",{value:"1024x1024",children:y({label:"imagegen.square"})}),e.jsx("option",{value:"1792x1024",children:y({label:"imagegen.wide"})})]}),e.jsxs("label",{className:d.checkboxLabel,title:k?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:h=>$(h.target.checked),disabled:I||f!=="idle"||E,className:d.checkbox}),e.jsx(je,{label:"imagegen.listed"})]})]}),v==="connect"?e.jsx(B,{}):e.jsx(te,{})]})]}),e.jsxs("div",{className:A({mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:["Powered by"," ",e.jsx("a",{href:"https://optimism.io",target:"_blank",rel:"noopener noreferrer","aria-label":"Learn more about Optimism (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"Optimism"})," ","â€¢"," ",e.jsx("a",{href:`https://optimistic.etherscan.io/address/${S.address}`,target:"_blank",rel:"noopener noreferrer","aria-label":"View smart contract on Optimism Etherscan (opens in new tab)",className:A({color:"blue.600",textDecoration:"underline",_hover:{color:"blue.800"}}),children:"View Contract â†—"})]}),e.jsx("span",{id:"create-artwork-info",className:A({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:y({label:"imagegen.mintingInfo"})}),e.jsxs("div",{className:A({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[e.jsx(Ce,{size:"xs",className:A({mr:"1"})}),ne]}),f!=="idle"&&e.jsxs("div",{className:D.compactStatus,children:[e.jsx("div",{className:K}),e.jsx("span",{children:f==="minting"?"Creating your artwork...":"Generating image..."})]}),U&&e.jsx("div",{className:D.compactError,children:U}),i&&s&&e.jsxs("div",{className:qe,children:[e.jsx("h4",{className:A({margin:0,fontSize:"sm"}),children:"âœ… Artwork created successfully!"}),e.jsxs("p",{className:A({margin:"xs 0",fontSize:"sm"}),children:["ID: ",i.toString()," - Check your gallery below"]})]})]})})}function ve({label:t,isActive:a,onClick:n}){return e.jsx("button",{className:`${W.tab} ${a?W.activeTab:""}`,onClick:n,"aria-selected":a,children:t})}function mt({message:t,type:a,duration:n,onClose:s}){const c=l.useRef(null);l.useEffect(()=>{const m=n??(a==="error"?4e3:a==="warning"?5e3:3e3);return c.current=setTimeout(()=>{s()},m),()=>{c.current&&clearTimeout(c.current)}},[n,a,s]);const i=()=>{switch(a){case"success":return"âœ…";case"warning":return"âš ï¸";case"error":default:return"âŒ"}};return e.jsx("div",{className:re.container,children:e.jsxs("div",{className:re.content,"data-type":a,children:[e.jsx("span",{className:re.icon,children:i()}),e.jsx("span",{className:re.message,children:t})]})})}function $e(){const[t,a]=l.useState(null),n=(i,o="error",m)=>{a({message:i,type:o,duration:m})},s=()=>{a(null)},c=t?e.jsx(mt,{message:t.message,type:t.type,duration:t.duration,onClose:s}):null;return{showToast:n,hideToast:s,ToastComponent:c}}function ht({genImTokenId:t}){const[a,n]=l.useState(!1),{isConnected:s}=J(),c=Se(),{writeContract:i,isPending:o,data:m,error:u}=oe(),{isLoading:g,isSuccess:T}=we({hash:m}),k=ce(),$=nt(),I=c===k.id,F=y({label:"imagegen.collect"}),{data:f,error:r,isPending:U,refetch:C}=ie({...$,functionName:"getMintStats",args:[t],chainId:k.id}),x=async()=>{if(!s||!I||!f||!Array.isArray(f))return;n(!0);const[,L]=f;i({...$,functionName:"mintCollectorNFT",args:[t],value:L})};l.useEffect(()=>{T&&(n(!1),setTimeout(()=>{C()},2e3)),u&&n(!1)},[T,u,C]);const p=()=>{if(U)return"...";if(r||!f||!Array.isArray(f))return"0";const[L]=f;return L.toString()},P=()=>{if(U||r||!f||!Array.isArray(f))return"Price loading...";const[L,N]=f,E=Te(N),R=Y=>{const z=parseFloat(Y);return z>=.001?z.toFixed(3):z>=1e-4?z.toFixed(4):z.toFixed(6)},Q=R(E),M=Number(L),G=Math.ceil((M+1)/5)*5,q=N/BigInt(2**Math.floor(M/5))*BigInt(2**Math.floor(G/5)),V=R(Te(q));return`Current price: ${Q} ETH | Price after ${G} mints: ${V} ETH`};return e.jsx("button",{onClick:x,disabled:!s||a||o||g||!I,className:`${d.actionButton} ${X}`,title:`Collect this NFT (${p()} collected) | ${P()}`,children:a||o?"ðŸ“¦ Collecting...":T?"âœ… Collected!":`ðŸ“¦ ${F} (${p()})`})}function Ee({tokenId:t,onImageClick:a,onNftBurned:n,onListedStatusChanged:s,isHighlighted:c=!1,isPublicView:i=!1,preloadedImageUrl:o,preloadedMetadata:m}){const{writeContract:u,isPending:g,data:T}=oe(),{writeContract:k,isPending:$,data:I}=oe(),[F,f]=l.useState(!1),[r,U]=l.useState({tokenId:t,tokenURI:"",imageUrl:o,metadata:m,isLoading:!o}),[C,x]=l.useState(""),{showToast:p,ToastComponent:P}=$e(),L=y({label:"imagegen.artwork"}),N=y({label:"imagegen.listed"}),E=y({label:"imagegen.download"}),R=y({label:"imagegen.share"}),Q=y({label:"imagegen.delete"}),M=l.useMemo(()=>Le({chain:Pe,transport:Ie()}),[]),G=async j=>{try{if(j.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",j),null;const b=await fetch(j);if(!b.ok)throw new Error(`Failed to fetch metadata: ${b.status}`);return await b.json()}catch(b){return console.error("Error fetching NFT metadata:",b),null}};l.useEffect(()=>{(async()=>{try{U(h=>({...h,isLoading:!0,error:void 0}));const v=await M.readContract({address:S.address,abi:S.abi,functionName:"tokenURI",args:[t]});if(!v&&(o||m)){U(h=>({...h,tokenURI:"",isLoading:!1}));return}let B="";i&&(B=await M.readContract({address:S.address,abi:S.abi,functionName:"ownerOf",args:[t]}),x(B));let te;if(!i)try{te=await ye(xe,{...S,functionName:"isTokenListed",args:[t]})}catch(h){console.warn("Could not load listing status:",h)}let ae=m,ne=o;if(v){const h=await G(v);h&&(ae=h,ne=h.image)}U({tokenId:t,tokenURI:v,metadata:ae,imageUrl:ne,isLoading:!1,isListed:te})}catch(b){console.error(`Error loading NFT ${t}:`,b),U({tokenId:t,tokenURI:"",imageUrl:o,metadata:m,isLoading:!1,error:`Failed to load NFT #${t}: ${b instanceof Error?b.message:"Unknown error"}`})}})()},[t,i,o,m,M]);const{isLoading:H,isSuccess:q}=we({hash:T}),{isLoading:V,isSuccess:Y}=we({hash:I});l.useEffect(()=>{q&&setTimeout(()=>{n()},1e3)},[q,n]),l.useEffect(()=>{Y&&s&&p("Listing status updated successfully!","success")},[Y,s,p]);const z=()=>{r.imageUrl&&a({src:r.imageUrl,alt:r.metadata?.name||`Artwork #${r.tokenId}`,title:r.metadata?.name,description:r.metadata?.description})},le=async()=>{if(r.imageUrl)try{const b=await(await fetch(r.imageUrl)).blob(),v=window.URL.createObjectURL(b),B=document.createElement("a");B.href=v,B.download=`${r.metadata?.name||`Artwork-${r.tokenId}`}.png`,document.body.appendChild(B),B.click(),document.body.removeChild(B),window.URL.revokeObjectURL(v)}catch(j){console.error("Download failed:",j),p("Download failed. Please try again.","error")}},de=async()=>{const b=`https://opensea.io/item/optimism/${S.address}/${r.tokenId}`;try{await navigator.clipboard.writeText(b),p("OpenSea URL copied to clipboard!","success")}catch(v){console.error("Failed to copy URL:",v),window.open(b,"_blank","noopener,noreferrer")}},ue=async()=>{if(!F){f(!0),p(`âš ï¸ Click Delete again to permanently remove "${r.metadata?.name||`Artwork #${r.tokenId}`}"`,"warning"),setTimeout(()=>{f(!1)},5e3);return}f(!1);try{await u({...S,functionName:"burn",args:[r.tokenId]})}catch(j){console.error("Delete failed:",j),p("Failed to delete artwork. Please try again.","error")}},ee=async()=>{if(!s)return;const j=!r.isListed,b=j?"public":"private";try{s(r.tokenId,j),await k({...S,functionName:"setTokenListed",args:[r.tokenId,j]})}catch(v){console.error("Failed to update listing status:",v),s(r.tokenId,!j),p(`Failed to set artwork as ${b}. Please try again.`,"error")}};return e.jsxs("div",{className:`${d.container} ${c?d.highlighted:""}`,children:[r.isLoading?e.jsxs("div",{className:d.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{className:d.loadingText,children:"Loading artwork..."})]}):r.error?e.jsxs("div",{className:d.errorContainer,children:[e.jsx("div",{className:d.errorBox,children:e.jsx("p",{className:d.errorText,children:r.error})}),e.jsxs("p",{className:d.tokenIdText,children:["ID: ",r.tokenId.toString()]})]}):e.jsxs(e.Fragment,{children:[r.imageUrl?e.jsxs("div",{className:d.imageContainer,children:[e.jsx("img",{src:r.imageUrl,alt:r.metadata?.name||`${L} #${r.tokenId}`,className:d.image,onClick:z,style:{cursor:"pointer"},onError:j=>{const b=j.target;b.style.display="none",b.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:d.imageError,style:{display:"none"},children:"Image not available"})]}):e.jsx("div",{className:d.imagePlaceholder,children:"No image available"}),e.jsx("h3",{className:d.title,children:r.metadata?.name||`Artwork #${r.tokenId}`}),r.metadata?.description&&e.jsx("p",{className:d.description,children:r.metadata.description}),e.jsxs("div",{className:d.footer,children:[e.jsxs("span",{children:["ID: ",r.tokenId.toString()]}),!i&&s&&r.isListed!==void 0&&e.jsxs("label",{className:d.checkboxLabel,title:`${r.isListed?"NFT is publicly listed":"NFT is private"}`,children:[e.jsx("input",{type:"checkbox",checked:r.isListed,onChange:ee,disabled:$||V,className:d.checkbox}),N]}),i&&C&&e.jsxs("span",{title:`Owned by ${C}`,children:["Owner: ",C.slice(0,6),"...",C.slice(-4)]})]}),e.jsxs("div",{className:d.actions,children:[r.imageUrl&&e.jsx("button",{onClick:z,className:`${d.actionButton} ${pe}`,title:"View full size",children:"ðŸ” Zoom"}),r.imageUrl&&e.jsxs("button",{onClick:le,className:`${d.actionButton} ${X}`,title:"Download image",children:["â¬‡ï¸ ",E]}),e.jsxs("button",{onClick:de,className:`${d.actionButton} ${pe}`,title:"Share your artwork on the marketplace",children:["ðŸ“¤ ",R]}),i&&e.jsx(ht,{genImTokenId:r.tokenId}),!i&&e.jsx("button",{onClick:ue,disabled:g||H,className:`${d.actionButton} ${g||H?pe:Ye}`,title:"Delete artwork (permanent)",style:{opacity:g||H?.6:1},children:g?"ðŸ—‘ï¸ Deleting...":H?"â³ Confirming...":`ðŸ—‘ï¸ ${Q}`})]})]}),P]})}function Ae({image:t,onClose:a}){const{showToast:n,ToastComponent:s}=$e();l.useEffect(()=>{const i=o=>{o.key==="Escape"&&a()};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[a]);const c=async()=>{try{const o=await(await fetch(t.src)).blob(),m=window.URL.createObjectURL(o),u=document.createElement("a");u.href=m,u.download=`${t.title||"NFT-image"}.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(m)}catch(i){console.error("Download failed:",i),n("Download failed. Please try again.","error")}};return e.jsxs("div",{className:d.modalOverlay,onClick:a,children:[e.jsxs("div",{className:d.modalContent,onClick:i=>i.stopPropagation(),children:[e.jsx("button",{className:d.modalClose,onClick:a,children:"âœ•"}),e.jsx("img",{src:t.src,alt:t.alt,className:d.modalImage}),(t.title||t.description)&&e.jsxs("div",{className:d.modalInfo,children:[t.title&&e.jsx("h3",{className:d.modalTitle,children:t.title}),t.description&&e.jsx("p",{className:d.modalDescription,children:t.description}),e.jsx("div",{className:d.actions,style:{justifyContent:"center",marginTop:"12px"},children:e.jsx("button",{onClick:c,className:`${d.actionButton} ${X}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function gt({newlyCreatedNFT:t,onNewNFTDisplayed:a}){const{address:n,isConnected:s}=J(),c=ce(),[i,o]=l.useState([]),[m,u]=l.useState(!1),[g,T]=l.useState(null),[k,$]=l.useState(null),{data:I,isLoading:F}=ie({...S,functionName:"balanceOf",args:n?[n]:void 0,chainId:c.id,query:{enabled:!!n&&s}}),f=l.useCallback(async()=>{if(!s||!n){o([]);return}u(!0);try{const x=await ye(xe,{...S,functionName:"balanceOf",args:[n]});if(!x||x===0n){o([]);return}const p=[];for(let N=0;N<Number(x);N++){const E=(async()=>{try{return await ye(xe,{...S,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(N)]})}catch(R){return console.error(`Error loading token ID at index ${N}:`,R),0n}})();p.push(E)}const L=(await Promise.all(p)).filter(N=>N>0n).sort((N,E)=>E>N?1:E<N?-1:0);o(L)}catch(x){console.error("Error loading token IDs:",x),o([])}finally{u(!1)}},[s,n]),r=l.useCallback(x=>{T(x),o(p=>p.includes(x)?p:[x,...p]),setTimeout(()=>{T(null),a?.()},5e3)},[a]),U=l.useCallback((x,p)=>{console.log(`NFT ${x} listing status changed to: ${p}`)},[]);l.useEffect(()=>{s&&n&&f()},[n,s,f]),l.useEffect(()=>{t&&r(t.tokenId)},[t,r]);const C=F||m;return s?C&&i.length===0?e.jsxs("div",{className:_.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{children:"Loading your artworks..."})]}):I===0n||!I?e.jsx("div",{className:_.emptyStateContainer,children:e.jsx("p",{className:_.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.grid,children:i.map((x,p)=>{const P=t?.tokenId===x,L=P?t.imageUrl:void 0,N=P?t.metadata:void 0;return e.jsx(Ee,{tokenId:x,onImageClick:$,onNftBurned:()=>f(),onListedStatusChanged:U,isHighlighted:g===x,isPublicView:!1,preloadedImageUrl:L,preloadedMetadata:N},`my-${x}-${p}`)})}),k&&e.jsx(Ae,{image:k,onClose:()=>$(null)})]}):e.jsxs("div",{className:_.walletPrompt,children:[e.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),e.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),e.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function ft(){const[t,a]=l.useState([]),[n,s]=l.useState(!1),[c,i]=l.useState(null),o=l.useMemo(()=>Le({chain:Pe,transport:Ie()}),[]),m=l.useCallback(async()=>{s(!0);try{const u=await o.readContract({address:S.address,abi:S.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){a([]);return}const g=u.sort((T,k)=>k>T?1:k<T?-1:0);a(g)}catch(u){console.error("Error loading public token IDs:",u),a([])}finally{s(!1)}},[o]);return l.useEffect(()=>{m()},[m]),n&&t.length===0?e.jsxs("div",{className:_.loadingContainer,children:[e.jsx("div",{className:K}),e.jsx("p",{children:"Loading public artworks..."})]}):t.length===0?e.jsx("div",{className:_.emptyStateContainer,children:e.jsx("p",{className:_.emptyStateText,children:"No public artworks available yet."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:_.grid,children:t.map((u,g)=>e.jsx(Ee,{tokenId:u,onImageClick:i,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${g}`))}),c&&e.jsx(Ae,{image:c,onClose:()=>i(null)})]})}function pt({newlyCreatedNFT:t,onNewNFTDisplayed:a,activeTab:n,onTabChange:s}={}){const{address:c,isConnected:i}=J(),[o,m]=l.useState(()=>i?"my":"public"),u=n??o,g=s??m,T=ie({...S,functionName:"balanceOf",args:c?[c]:void 0,chainId:ce().id,query:{enabled:!!c&&i}}),{data:k,refetch:$}=T;l.useEffect(()=>{t&&$&&$()},[t,$]);const I=y({label:"imagegen.myArtworks"}),F=y({label:"imagegen.allPublicArtworks"});return e.jsxs("div",{className:_.container,children:[e.jsx("div",{className:W.container,children:e.jsxs("div",{className:W.tabList,children:[e.jsx(ve,{label:i?`${I} (${k?.toString()||"0"})`:I,isActive:u==="my",onClick:()=>g("my")}),e.jsx(ve,{label:F,isActive:u==="public",onClick:()=>g("public")})]})}),e.jsx("div",{className:`${W.tabPanel} ${u==="my"?"":W.hiddenPanel}`,children:e.jsx(gt,{newlyCreatedNFT:t,onNewNFTDisplayed:a})}),e.jsx("div",{className:`${W.tabPanel} ${u==="public"?"":W.hiddenPanel}`,children:e.jsx(ft,{})})]})}function bt(){const{isConnected:t}=J(),[a,n]=l.useState(null),[s,c]=l.useState(()=>t?"my":"public"),i=(g,T,k)=>{console.log("Image generation succeeded:",{tokenId:g,imageUrl:T,metadata:k}),n({tokenId:g,imageUrl:T,metadata:k}),t&&c("my")},o=g=>{console.error("Image generation failed:",g)},m=()=>{n(null)},u=g=>{c(g)};return e.jsxs("div",{className:Qe,children:[e.jsx(ut,{onSuccess:i,onError:o}),e.jsx(pt,{newlyCreatedNFT:a??void 0,onNewNFTDisplayed:m,activeTab:s,onTabChange:u})]})}const xt=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"}));function wt(){return"AI Image Generator"}const yt=Object.freeze(Object.defineProperty({__proto__:null,title:wt},Symbol.toStringTag,{value:"Module"})),Lt={serverOnlyHooks:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:at}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:tt}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:et}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:xt}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Je}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:yt}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Xe}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ke}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ze}}};export{Lt as configValuesSerialized};
