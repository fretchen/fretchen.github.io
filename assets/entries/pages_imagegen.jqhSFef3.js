const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-h7nkVduA.js","assets/chunks/chunk-D8AR0Meb.js","assets/chunks/chunk-t-pXVLBL.js","assets/static/layouts_style-b34a8e57.DymEAzSn.css","assets/static/layouts_panda-c5b34b81.CUaBQ0Gv.css"])))=>i.map(i=>d[i]);
import{bl as J,bK as ea,bf as ta,b0 as aa,n as ze,y as Z,bL as na,B as oe,bM as sa,bg as be,bi as $e,bN as ra,bO as oa,bP as De,aY as X,R as ia,s as ca,bE as la,bG as da,aX as Ge,aZ as Ke,a_ as ua,a$ as ma,bQ as ga,bR as ha,bS as pa,bT as fa,ba as ya,U as Se,r as p,V as wa,bU as ba,_ as te,bb as Ne,bc as xa,w as b,j as a,u as Ta,bV as Ca,bW as va,bX as Sa,Y as Na,$ as ja,C as y,at as he,bY as H,bZ as S,b_ as ie,b$ as Ia,c0 as ka,c1 as V,X as Ue,c2 as xe,c3 as K,v as Pa,F as Ea,a as Aa,W as Ra,c as La,d as Fa,e as _a,o as za}from"../chunks/chunk-D8AR0Meb.js";import{c as Qe,b as pe,f as $a,o as Da,h as Ua,r as Ba,w as qa,p as Ye,d as Ma,s as Oa,i as Wa,a as ce,j as Be,g as M}from"../chunks/chunk-DTLuFKxV.js";import{d as Ha,_ as qe}from"../chunks/chunk-t-pXVLBL.js";import{s as je,A as le,c as Ve,d as ge,w as Xe,g as Ga,a as Te,b as Ce,u as Ie,r as ve}from"../chunks/chunk-DRJwN-R0.js";import{i as Ka}from"../chunks/chunk-DB0Ml6lk.js";import{s as Je,g as Qa,v as Ya,a as Va,u as Ze}from"../chunks/chunk-CgvK8XUi.js";import{s as Xa,A as Ja}from"../chunks/chunk-BM-izQr4.js";import{u as et}from"../chunks/chunk-CVuQUeA_.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-CIBNaFqu.js";async function Za(e,{chain:t}){const{id:n,name:s,nativeCurrency:o,rpcUrls:r,blockExplorers:i}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:J(n),chainName:s,nativeCurrency:o,rpcUrls:r.default.http,blockExplorerUrls:i?Object.values(i).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function en(e,t){const{abi:n,args:s,bytecode:o,...r}=t,i=ea({abi:n,args:s,bytecode:o});return je(e,{...r,...r.authorizationList?{to:null}:{},data:i})}async function tn(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>ta(n))}const tt="0x5792579257925792579257925792579257925792579257925792579257925792",at=J(0,{size:32});async function nt(e,t){const{account:n=e.account,capabilities:s,chain:o=e.chain,experimental_fallback:r,experimental_fallbackDelay:i=32,forceAtomic:c=!1,id:u,version:h="2.0.0"}=t,l=n?Z(n):null,f=t.calls.map(w=>{const m=w,T=m.abi?aa({abi:m.abi,functionName:m.functionName,args:m.args}):m.data;return{data:m.dataSuffix&&T?ze([T,m.dataSuffix]):T,to:m.to,value:m.value?J(m.value):void 0}});try{const w=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:c,calls:f,capabilities:s,chainId:J(o.id),from:l?.address,id:u,version:h}]},{retryCount:0});return typeof w=="string"?{id:w}:w}catch(w){const m=w;if(r&&(m.name==="MethodNotFoundRpcError"||m.name==="MethodNotSupportedRpcError"||m.name==="UnknownRpcError"||m.details.toLowerCase().includes("does not exist / is not available")||m.details.toLowerCase().includes("missing or invalid. request()")||m.details.toLowerCase().includes("did not match any variant of untagged enum")||m.details.toLowerCase().includes("account upgraded to unsupported contract")||m.details.toLowerCase().includes("eip-7702 not supported")||m.details.toLowerCase().includes("unsupported wc_ method")||m.details.toLowerCase().includes("feature toggled misconfigured")||m.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(s&&Object.values(s).some(j=>!j.optional)){const j="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new na(new oe(j,{details:j}))}if(c&&f.length>1){const x="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new sa(new oe(x,{details:x}))}const T=[];for(const x of f){const j=je(e,{account:l,chain:o,data:x.data,to:x.to,value:x.value?be(x.value):void 0});T.push(j),i>0&&await new Promise(C=>setTimeout(C,i))}const N=await Promise.allSettled(T);if(N.every(x=>x.status==="rejected"))throw N[0].reason;const d=N.map(x=>x.status==="fulfilled"?x.value:at);return{id:ze([...d,J(o.id,{size:32}),tt])}}throw Qe(w,{...t,account:l,chain:t.chain})}}async function st(e,t){async function n(l){if(l.endsWith(tt.slice(2))){const w=oa(De(l,-64,-32)),m=De(l,0,-64).slice(2).match(/.{1,64}/g),T=await Promise.all(m.map(d=>at.slice(2)!==d?e.request({method:"eth_getTransactionReceipt",params:[`0x${d}`]},{dedupe:!0}):void 0)),N=T.some(d=>d===null)?100:T.every(d=>d?.status==="0x1")?200:T.every(d=>d?.status==="0x0")?500:600;return{atomic:!1,chainId:$e(w),receipts:T.filter(Boolean),status:N,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:s=!1,chainId:o,receipts:r,version:i="2.0.0",...c}=await n(t.id),[u,h]=(()=>{const l=c.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...c,atomic:s,chainId:o?$e(o):void 0,receipts:r?.map(l=>({...l,blockNumber:be(l.blockNumber),gasUsed:be(l.gasUsed),status:ra[l.status]}))??[],statusCode:h,status:u,version:i}}async function an(e,t={}){const{account:n=e.account,chainId:s}=t,o=n?Z(n):void 0,r=s?[o?.address,[J(s)]]:[o?.address],i=await e.request({method:"wallet_getCapabilities",params:r}),c={};for(const[u,h]of Object.entries(i)){c[Number(u)]={};for(let[l,f]of Object.entries(h))l==="addSubAccount"&&(l="unstable_addSubAccount"),c[Number(u)][l]=f}return typeof s=="number"?c[s]:c}async function nn(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function rt(e,t){const{account:n=e.account,chainId:s,nonce:o}=t;if(!n)throw new le({docsPath:"/docs/eip7702/prepareAuthorization"});const r=Z(n),i=(()=>{if(t.executor)return t.executor==="self"?t.executor:Z(t.executor)})(),c={address:t.contractAddress??t.address,chainId:s,nonce:o};return typeof c.chainId>"u"&&(c.chainId=e.chain?.id??await X(e,pe,"getChainId")({})),typeof c.nonce>"u"&&(c.nonce=await X(e,$a,"getTransactionCount")({address:r.address,blockTag:"pending"}),(i==="self"||i?.address&&Ka(i.address,r.address))&&(c.nonce+=1)),c}async function sn(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ia(n))}async function rn(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}class on extends oe{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function ot(e,t){const{id:n,pollingInterval:s=e.pollingInterval,status:o=({statusCode:N})=>N===200||N>=300,retryCount:r=4,retryDelay:i=({count:N})=>~~(1<<N)*200,timeout:c=6e4,throwOnFailure:u=!1}=t,h=ca(["waitForCallsStatus",e.uid,n]),{promise:l,resolve:f,reject:w}=la();let m;const T=Da(h,{resolve:f,reject:w},N=>{const d=Ua(async()=>{const x=j=>{clearTimeout(m),d(),j(),T()};try{const j=await da(async()=>{const C=await X(e,st,"getCallsStatus")({id:n});if(u&&C.status==="failure")throw new on(C);return C},{retryCount:r,delay:i});if(!o(j))return;x(()=>N.resolve(j))}catch(j){x(()=>N.reject(j))}},{interval:s,emitOnBegin:!0});return d});return m=c?setTimeout(()=>{T(),clearTimeout(m),w(new cn({id:n}))},c):void 0,await l}class cn extends oe{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function ln(e,t){const{chain:n=e.chain}=t,s=t.timeout??Math.max((n?.blockTime??0)*3,5e3),o=await nt(e,t);return await ot(e,{...t,id:o.id,timeout:s})}const ye=new ma(128);async function it(e,t){const{account:n=e.account,chain:s=e.chain,accessList:o,authorizationList:r,blobs:i,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:w,nonce:m,pollingInterval:T,throwOnReceiptRevert:N,type:d,value:x,...j}=t,C=t.timeout??Math.max((s?.blockTime??0)*3,5e3);if(typeof n>"u")throw new le({docsPath:"/docs/actions/wallet/sendTransactionSync"});const v=n?Z(n):null;try{Ge(t);const $=await(async()=>{if(t.to)return t.to;if(t.to!==null&&r&&r.length>0)return await Ba({authorization:r[0]}).catch(()=>{throw new oe("`to` is required. Could not infer from `authorizationList`.")})})();if(v?.type==="json-rpc"||v===null){let z;s!==null&&(z=await X(e,pe,"getChainId")({}),Ve({currentChainId:z,chain:s}));const E=e.chain?.formatters?.transactionRequest?.format,k=(E||Ke)({...ua(j,{format:E}),accessList:o,account:v,authorizationList:r,blobs:i,chainId:z,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:w,nonce:m,to:$,type:d,value:x},"sendTransaction"),U=ye.get(e.uid),R=U?"wallet_sendTransaction":"eth_sendTransaction",D=await(async()=>{try{return await e.request({method:R,params:[k]},{retryCount:0})}catch(W){if(U===!1)throw W;const q=W;if(q.name==="InvalidInputRpcError"||q.name==="InvalidParamsRpcError"||q.name==="MethodNotFoundRpcError"||q.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(Y=>(ye.set(e.uid,!0),Y)).catch(Y=>{const Q=Y;throw Q.name==="MethodNotFoundRpcError"||Q.name==="MethodNotSupportedRpcError"?(ye.set(e.uid,!1),q):Q});throw q}})(),L=await X(e,qa,"waitForTransactionReceipt")({checkReplacement:!1,hash:D,pollingInterval:T,timeout:C});if(N&&L.status==="reverted")throw new ga({receipt:L});return L}if(v?.type==="local"){const z=await X(e,Ye,"prepareTransactionRequest")({account:v,accessList:o,authorizationList:r,blobs:i,chain:s,data:c,gas:u,gasPrice:h,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:w,nonce:m,nonceManager:v.nonceManager,parameters:[...Ma,"sidecars"],type:d,value:x,...j,to:$}),E=s?.serializers?.transaction,A=await v.signTransaction(z,{serializer:E});return await X(e,Je,"sendRawTransactionSync")({serializedTransaction:A,throwOnReceiptRevert:N})}throw v?.type==="smart"?new ge({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ge({docsPath:"/docs/actions/wallet/sendTransactionSync",type:v?.type})}catch($){throw $ instanceof ge?$:Qe($,{...t,account:v,chain:t.chain||void 0})}}async function dn(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function un(e,t){const{account:n=e.account}=t;if(!n)throw new le({docsPath:"/docs/eip7702/signAuthorization"});const s=Z(n);if(!s.signAuthorization)throw new ge({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:s.type});const o=await rt(e,t);return s.signAuthorization(o)}async function mn(e,t){const{account:n=e.account,chain:s=e.chain,...o}=t;if(!n)throw new le({docsPath:"/docs/actions/wallet/signTransaction"});const r=Z(n);Ge({account:r,...t});const i=await X(e,pe,"getChainId")({});s!==null&&Ve({currentChainId:i,chain:s});const u=(s?.formatters||e.chain?.formatters)?.transactionRequest?.format||Ke;return r.signTransaction?r.signTransaction({...o,chainId:i},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u({...o,account:r},"signTransaction"),chainId:J(i),from:r.address}]},{retryCount:0})}async function gn(e,t){const{account:n=e.account,domain:s,message:o,primaryType:r}=t;if(!n)throw new le({docsPath:"/docs/actions/wallet/signTypedData"});const i=Z(n),c={EIP712Domain:Qa({domain:s}),...t.types};if(Ya({domain:s,message:o,primaryType:r,types:c}),i.signTypedData)return i.signTypedData({domain:s,message:o,primaryType:r,types:c});const u=Va({domain:s,message:o,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[i.address,u]},{retryCount:0})}async function hn(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:J(t)}]},{retryCount:0})}async function pn(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function fn(e,t){return Xe.internal(e,it,"sendTransactionSync",t)}function yn(e){return{addChain:t=>Za(e,t),deployContract:t=>en(e,t),fillTransaction:t=>Wa(e,t),getAddresses:()=>tn(e),getCallsStatus:t=>st(e,t),getCapabilities:t=>an(e,t),getChainId:()=>pe(e),getPermissions:()=>nn(e),prepareAuthorization:t=>rt(e,t),prepareTransactionRequest:t=>Ye(e,t),requestAddresses:()=>sn(e),requestPermissions:t=>rn(e,t),sendCalls:t=>nt(e,t),sendCallsSync:t=>ln(e,t),sendRawTransaction:t=>Oa(e,t),sendRawTransactionSync:t=>Je(e,t),sendTransaction:t=>je(e,t),sendTransactionSync:t=>it(e,t),showCallsStatus:t=>dn(e,t),signAuthorization:t=>un(e,t),signMessage:t=>Xa(e,t),signTransaction:t=>mn(e,t),signTypedData:t=>gn(e,t),switchChain:t=>hn(e,t),waitForCallsStatus:t=>ot(e,t),watchAsset:t=>pn(e,t),writeContract:t=>Xe(e,t),writeContractSync:t=>fn(e,t)}}let we=[];function Me(e){const t=e.chains;return ha(we,t)?we:(we=t,t)}async function wn(e,t={}){return(await Ga(e,t)).extend(yn)}async function bn(e,t){const{addEthereumChainParameter:n,chainId:s}=t,o=e.state.connections.get(t.connector?.uid??e.state.current);if(o){const i=o.connector;if(!i.switchChain)throw new pa({connector:i});return await i.switchChain({addEthereumChainParameter:n,chainId:s})}const r=e.chains.find(i=>i.id===s);if(!r)throw new fa;return e.setState(i=>({...i,chainId:s})),r}function xn(e,t){const{onChange:n}=t;return e._internal.chains.subscribe((s,o)=>{n(s,o)})}function Tn(e,t={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:s}=t,{connectorUid:o,scopeKey:r,...i}=n[1];return wn(e,{...i,connector:s})},queryKey:Cn(t)}}function Cn(e={}){const{connector:t,...n}=e;return["walletClient",{...ya(n),connectorUid:t?.uid}]}function vn(e){return{mutationFn(t){return bn(e,t)},mutationKey:["switchChain"]}}function Sn(e={}){const t=Se(e);return p.useSyncExternalStore(n=>xn(t,{onChange:n}),()=>Me(t),()=>Me(t))}function Nn(e={}){const{mutation:t}=e,n=Se(e),s=vn(n),{mutate:o,mutateAsync:r,...i}=wa({...t,...s});return{...i,chains:Sn({config:n}),switchChain:o,switchChainAsync:r}}function jn(e={}){const{query:t={},...n}=e,s=Se(n),o=ba(),{address:r,connector:i,status:c}=te({config:s}),u=Ne({config:s}),h=e.connector??i,{queryKey:l,...f}=Tn(s,{...e,chainId:e.chainId??u,connector:e.connector??i}),w=!!((c==="connected"||c==="reconnecting"&&h?.getProvider)&&(t.enabled??!0)),m=p.useRef(r);return p.useEffect(()=>{const T=m.current;!r&&T?(o.removeQueries({queryKey:l}),m.current=void 0):r!==T&&(o.invalidateQueries({queryKey:l}),m.current=r)},[r,o]),xa({...t,...f,queryKey:l,enabled:w,staleTime:Number.POSITIVE_INFINITY})}function Oe({size:e="sm",className:t}){const n={xs:b({fontSize:"xs",lineHeight:"1"}),sm:b({fontSize:"sm",lineHeight:"1"}),md:b({fontSize:"md",lineHeight:"1"})},s=b({display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"blue.100",color:"blue.600",fontWeight:"bold",cursor:"help"});return a.jsx("span",{className:`${s} ${n[e]} ${t||""}`,role:"img","aria-label":"Information",children:"i"})}function We({label:e,locale:t}){const s=Ta(),o=t??s.locale??Ha,i=Ca(o==="de"?va:Sa,e);return a.jsx("span",{"data-locale":o,children:i})}const In="https://mypersonaljscloudivnad9dy-genimgx402token.functions.fnc.fr-par.scw.cloud";function kn(){const{data:e}=jn(),{isConnected:t}=te(),[n,s]=p.useState("idle"),[o,r]=p.useState(null),[i,c]=p.useState(null),u=t&&!!e,h=p.useCallback(async f=>{if(!e)throw new Error("Wallet not connected");s("awaiting-signature"),r(null),c(null);try{const{x402Client:w,wrapFetchWithPayment:m,x402HTTPClient:T}=await qe(async()=>{const{x402Client:A,wrapFetchWithPayment:k,x402HTTPClient:U}=await import("../chunks/chunk-6bqGUo_L.js");return{x402Client:A,wrapFetchWithPayment:k,x402HTTPClient:U}},[]),{registerExactEvmScheme:N}=await qe(async()=>{const{registerExactEvmScheme:A}=await import("../chunks/chunk-h7nkVduA.js");return{registerExactEvmScheme:A}},__vite__mapDeps([0,1,2,3,4])),d={address:e.account.address,signTypedData:e.signTypedData.bind(e)},x=new w;N(x,{signer:d});const{expectedChainId:j,...C}=f,z=await m(async(A,k)=>{const U=await fetch(A,k);if(U.status===402&&j){const R=U.headers.get("Payment-Required");if(R)try{const L=JSON.parse(atob(R)).accepts?.[0]?.network,W=`eip155:${j}`;if(L&&L!==W)throw new Error(`Chain mismatch! Expected ${W} but server requires ${L}. This could indicate a configuration error.`)}catch(D){if(D instanceof Error&&D.message.includes("Chain mismatch"))throw D}}return U},x)(In,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(s("processing"),!z.ok){const A=await z.text();throw new Error(`Request failed: ${z.status} - ${A}`)}const E=await z.json();try{const k=new T(x).getPaymentSettleResponse(U=>z.headers.get(U));k&&c({transaction:k.transaction,network:k.network})}catch{}return s("success"),E}catch(w){const m=w instanceof Error?w.message:"Unknown error";throw r(m),s("error"),w}},[e]),l=p.useCallback(()=>{s("idle"),r(null),c(null)},[]);return{generateImage:h,status:n,error:o,paymentReceipt:i,reset:l,isReady:u}}const Pn=(e,t,n=1920)=>{const s=e/t;return e<=n&&t<=n?{width:e,height:t}:e>t?{width:n,height:Math.round(n/s)}:{width:Math.round(n*s),height:n}},En=(e,t=1024)=>new Promise((n,s)=>{const o=document.createElement("canvas"),r=o.getContext("2d"),i=new Image;i.onload=()=>{const{width:c,height:u}=Pn(i.width,i.height);if(o.width=c,o.height=u,!r){s(new Error("Could not get canvas context"));return}r.fillStyle="white",r.fillRect(0,0,c,u),r.drawImage(i,0,0,c,u);let h=.9;const l=()=>{const f=o.toDataURL("image/jpeg",h);f.length*.75/1024<=t||h<=.1?n({base64:f.split(",")[1],mimeType:"image/jpeg"}):(h-=.1,setTimeout(l,0))};l()},i.onerror=()=>s(new Error("Failed to load image")),i.src=URL.createObjectURL(e)});function An({onSuccess:e,onError:t}){const{trackEvent:n}=Na(),{generateImage:s,status:o,error:r,paymentReceipt:i,reset:c}=kn(),[u,h]=p.useState(),[l,f]=p.useState(),[w,m]=p.useState(),[T,N]=p.useState(null),[d,x]=p.useState("image/jpeg"),{address:j,isConnected:C}=te(),{connectors:v,connect:$}=ja(),{switchChainAsync:z,isPending:E}=Nn(),A=Ne(),k=ce(),U=k.id===11155420,[R,D]=p.useState("empty"),[L,W]=p.useState(""),[q,Y]=p.useState("1024x1024"),[Q,fe]=p.useState(!1),[ee,I]=p.useState(!1),[F,_]=p.useState(null),G=()=>{v.length>0&&$({connector:v[0]})},ae=y({label:"imagegen.connectWalletButton"}),de=y({label:"imagegen.enterPrompt"}),ue=y({label:"imagegen.generating"}),B=y({label:"imagegen.createArtwork"}),ke=y({label:"imagegen.promptPlaceholder"}),dt=y({label:"imagegen.editPromptPlaceholder"}),Pe=y({label:"imagegen.editImage"}),ut=y({label:"imagegen.connectAccountFirst"}),mt=y({label:"imagegen.enterPromptError"}),gt=y({label:"imagegen.unknownError"}),ht=y({label:"imagegen.chainSwitchFailed"}),pt=y({label:"imagegen.switchingNetwork"}),Ee=y({label:"imagegen.awaitingSignature"}),ft=y({label:"imagegen.processingPayment"}),yt=y({label:"imagegen.uploadReferenceImage"}),wt=y({label:"imagegen.dragDropHere"}),bt=y({label:"imagegen.supportedFormats"}),xt=y({label:"imagegen.referenceImageTitle"}),Tt=y({label:"imagegen.generatedArtworkTitle"}),Ae=y({label:"imagegen.remove"}),Ct=y({label:"imagegen.referenceImageAlt"}),vt=y({label:"imagegen.generatedArtworkAlt"}),St=y({label:"imagegen.referenceImageHint"}),Nt=y({label:"imagegen.invalidFileType"}),jt=y({label:"imagegen.fileTooLarge"}),It=y({label:"imagegen.compressionFailed"}),kt=y({label:"imagegen.failedToProcessImage"}),Pt=y({label:"imagegen.generatingImage"}),Et=y({label:"imagegen.title"}),At=y({label:"imagegen.collapsedTitle"}),Rt=y({label:"imagegen.collapsedDescription"}),Lt=y({label:"imagegen.square"}),Ft=y({label:"imagegen.wide"}),_t=y({label:"imagegen.mintingInfo"}),zt=y({label:"imagegen.artworkCreated"}),$t=y({label:"imagegen.checkGallery"}),Dt=()=>E?"switching":ee||o==="awaiting-signature"||o==="processing"?"loading":L.trim()?"ready":"needsPrompt",Re=g=>{switch(g){case"switching":return pt;case"loading":return o==="awaiting-signature"?Ee:o==="processing"?ft:ue;case"connect":return ae;case"needsPrompt":return de;case"ready":return R!=="empty"?Pe:B;default:return R!=="empty"?Pe:B}},ne=Dt(),Ut=()=>{const g=ne==="needsPrompt",P=ne==="loading"||ne==="switching",O=()=>{n("imagegen-create-artwork-click",{hasReferenceImage:R!=="empty",promptLength:L.trim().length,isConnected:C,imageSize:q,paymentMethod:"x402-usdc"}),Bt()};return a.jsx("button",{onClick:O,disabled:g,className:`${he} ${g?ka:""}`,title:y({label:"imagegen.mintingInfo"}),"aria-describedby":"create-artwork-info",children:P?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:ie}),Re(ne)]}):a.jsxs(a.Fragment,{children:["ðŸŽ¨ ",Re(ne),a.jsx(Oe,{size:"xs",className:b({ml:"1",opacity:"0.7"})})]})})},Bt=async()=>{if(!C||!j){const g=ut;_(g),t?.(g);return}if(!L.trim()){const g=mt;_(g),t?.(g);return}if(A!==k.id){console.log(`[x402] Chain mismatch: current=${A}, target=${k.id} (${k.name})`);try{await z({chainId:k.id}),console.log(`[x402] Successfully switched to ${k.name}`)}catch(g){console.error("[x402] Chain switch failed:",g);const P=`${ht}: ${k.name}`;_(P),t?.(P);return}}I(!0),_(null);try{const g=T!==null,P=g?"edit":"generate",O=await s({prompt:L,size:q,mode:P,referenceImage:g?T:void 0,sepoliaTest:U,expectedChainId:k.id,isListed:Q});console.log("[x402] Image generation completed:",O);const se=BigInt(O.tokenId),re=O.image_url;f(se),h(re),m(re),D("generated");try{const Vt=await(await fetch(re)).blob(),Xt=(await new Promise((Jt,Zt)=>{const me=new FileReader;me.onload=()=>Jt(me.result),me.onerror=Zt,me.readAsDataURL(Vt)})).split(",")[1];N(Xt)}catch(_e){console.warn("Failed to convert generated image to base64:",_e)}const Yt={name:`AI Generated Artwork #${se}`,description:`AI generated artwork based on the prompt: "${L}"`,image:re,external_url:O.metadata_url||"",attributes:[{trait_type:"Prompt",value:L},{trait_type:"Generation Method",value:"AI Generated"},{trait_type:"Payment Method",value:"x402 USDC"}]};e?.(se,re,Yt),n("x402-image-generated",{tokenId:O.tokenId,mode:P,hasTxReceipt:!!i}),setTimeout(()=>{W(""),Y("1024x1024"),h(void 0),f(void 0),_(null),c()},3e3)}catch(g){console.error("[x402] Error:",g);const P=g instanceof Error?g.message:gt;_(P),t?.(P)}finally{I(!1)}},qt=y({label:"imagegen.mintingInfo"}),Mt=g=>["image/jpeg","image/png"].includes(g.type)?g.size>10485760?(_(jt),!1):!0:(_(Nt),!1),Le=async g=>{if(Mt(g)){_(null),I(!0);try{const P=await En(g,1024);N(P.base64),x(P.mimeType),D("reference");const O=Math.round(g.size/1024),se=Math.round(P.base64.length*.75/1024);console.log(`Image compressed: ${O}KB â†’ ${se}KB (${g.type} â†’ ${P.mimeType})`)}catch(P){console.error("Image compression failed:",P);const O=P instanceof Error?P.message:kt;_(`${It}: ${O}`)}finally{I(!1)}}},Ot=g=>{g.preventDefault(),g.stopPropagation()},Wt=g=>{g.preventDefault(),g.stopPropagation()},Ht=g=>{g.preventDefault(),g.stopPropagation();const P=Array.from(g.dataTransfer.files);P.length>0&&Le(P[0])},Gt=g=>{const P=g.target.files;P&&P.length>0&&Le(P[0])},Kt=()=>{N(null),x("image/jpeg");const g=document.getElementById("reference-image-input");g&&(g.value=""),D(w?"generated":"empty")},Fe=q==="1792x1024"?"wide":"square",Qt=()=>{n("imagegen-connect-click"),G()};return a.jsx("div",{className:b({transition:"all 0.5s ease-in-out",overflow:"hidden"}),children:C?a.jsx("div",{className:H.compactLayout,children:a.jsxs("div",{className:H.compactContainer,children:[a.jsx("div",{className:H.compactHeader,children:a.jsxs("h3",{className:H.compactTitle,children:["ðŸŽ¨",a.jsx(We,{label:"imagegen.title"})]})}),a.jsxs("div",{className:H.compactForm,children:[a.jsxs("div",{"data-testid":"drop-zone",className:b({mb:"4",border:"1px solid",borderColor:R==="empty"?"gray.300":"gray.400",borderRadius:"md",bg:R==="empty"?"gray.50":"white",position:"relative",cursor:R==="empty"?"pointer":"default",overflow:"hidden",width:"100%",_hover:R==="empty"?{borderColor:"gray.400",bg:"gray.100"}:{}}),onDragOver:Ot,onDragEnter:Wt,onDrop:Ht,onClick:()=>{R==="empty"&&document.getElementById("reference-image-input")?.click()},children:[a.jsx("input",{id:"reference-image-input","data-testid":"reference-image-input",type:"file",accept:"image/*",onChange:Gt,className:b({position:"absolute",opacity:0,width:0,height:0,pointerEvents:"none"})}),R==="empty"&&a.jsxs("div",{className:b({display:"flex",alignItems:"center",justifyContent:"center",py:"6",px:"4",gap:"3"}),children:[a.jsx("div",{className:b({fontSize:"xl",color:"gray.500"}),children:"ðŸ“¸"}),a.jsxs("div",{className:b({textAlign:"left"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"1"}),children:yt}),a.jsxs("p",{className:b({fontSize:"xs",color:"gray.500",mb:"0"}),children:[wt," â€¢ ",bt]})]})]}),R==="reference"&&T&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:xt}),a.jsxs("button",{onClick:g=>{g.stopPropagation(),Kt()},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),children:["âœ• ",Ae]})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:Fe==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:`data:${d};base64,${T}`,alt:Ct,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})}),a.jsx("p",{className:b({fontSize:"xs",color:"gray.500",textAlign:"center",mt:"2",mb:"0"}),children:St})]}),R==="generated"&&w&&a.jsxs("div",{className:b({p:"3"}),children:[a.jsxs("div",{className:b({display:"flex",justifyContent:"space-between",alignItems:"center",mb:"3"}),children:[a.jsx("h4",{className:b({fontSize:"sm",fontWeight:"medium",color:"gray.700",m:0}),children:Tt}),a.jsx("div",{className:b({display:"flex",gap:"2"}),children:a.jsxs("button",{onClick:()=>{N(null),x("image/jpeg"),m(void 0),D("empty");const g=document.getElementById("reference-image-input");g&&(g.value="")},className:b({px:"2",py:"1",fontSize:"xs",bg:"gray.600",color:"white",border:"none",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.700"}}),disabled:ee||o!=="idle",children:["âœ• ",Ae]})})]}),a.jsx("div",{className:b({position:"relative",width:"100%",height:Fe==="wide"?"250px":"200px",overflow:"hidden",borderRadius:"sm",bg:"gray.100"}),children:a.jsx("img",{src:w,alt:vt,className:b({width:"100%",height:"100%",objectFit:"contain",borderRadius:"sm"})})})]})]}),a.jsx("textarea",{value:L,onChange:g=>W(g.target.value),placeholder:R==="reference"?dt:ke,disabled:ee||o!=="idle",className:H.compactTextarea}),a.jsxs("div",{className:H.controlBar,children:[a.jsxs("div",{className:H.optionsGroup,children:[a.jsxs("select",{id:"imageSizeSelect",value:q,onChange:g=>Y(g.target.value),disabled:ee||o!=="idle",className:H.compactSelect,"aria-label":"Select image format for your artwork",children:[a.jsx("option",{value:"1024x1024",children:Lt}),a.jsx("option",{value:"1792x1024",children:Ft})]}),a.jsxs("label",{className:S.checkboxLabel,title:Q?"NFT will be publicly visible in the 'All Public Artworks' gallery":"NFT will remain unlisted from the 'All Public Artworks' gallery",children:[a.jsx("input",{type:"checkbox",checked:Q,onChange:g=>fe(g.target.checked),disabled:ee||o!=="idle",className:S.checkbox}),a.jsx(We,{label:"imagegen.listed"})]})]}),a.jsx(Ut,{})]})]}),a.jsx(Ja,{service:"genimg"}),a.jsx("span",{id:"create-artwork-info",className:b({position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}),children:_t}),a.jsxs("div",{className:b({display:{base:"block",md:"none"},mt:"2",fontSize:"xs",color:"gray.600",textAlign:"center"}),children:[a.jsx(Oe,{size:"xs",className:b({mr:"1"})}),qt]}),(o==="awaiting-signature"||o==="processing")&&a.jsxs("div",{className:H.compactStatus,children:[a.jsx("div",{className:ie}),a.jsx("span",{children:o==="awaiting-signature"?Ee:Pt})]}),(F||r)&&a.jsx("div",{className:H.compactError,children:F||r}),i&&a.jsxs("div",{className:b({mt:"2",p:"2",fontSize:"xs",bg:"green.50",border:"1px solid",borderColor:"green.200",borderRadius:"md",color:"green.800"}),children:["âœ… Payment confirmed â€¢"," ",a.jsx("a",{href:`https://optimistic.etherscan.io/tx/${i.transaction}`,target:"_blank",rel:"noopener noreferrer",className:b({color:"green.600",textDecoration:"underline",_hover:{color:"green.700"}}),children:"View transaction â†—"})]}),l&&u&&a.jsxs("div",{className:Ia,children:[a.jsx("h4",{className:b({margin:0,fontSize:"sm"}),children:zt}),a.jsxs("p",{className:b({margin:"xs 0",fontSize:"sm"}),children:["ID: ",l.toString()," - ",$t]})]})]})}):a.jsxs("div",{className:b({maxWidth:"500px",margin:"0 auto",textAlign:"center"}),children:[a.jsxs("h3",{className:b({fontSize:"2xl",fontWeight:"semibold",marginBottom:"4",color:"gray.800"}),children:["ðŸŽ¨ ",Et]}),a.jsx("div",{className:b({fontSize:"md",fontWeight:"medium",color:"gray.800",mb:"3",textAlign:"center"}),children:At}),a.jsx("p",{className:b({fontSize:"sm",color:"gray.600",mb:"lg",lineHeight:"1.5"}),children:Rt}),a.jsx("div",{className:b({display:"flex",justifyContent:"center"}),children:a.jsx("button",{onClick:Qt,onMouseEnter:()=>n("imagegen-connect-hover"),className:he,children:ae})})]})})}function He({label:e,isActive:t,onClick:n}){return a.jsx("button",{className:`${V.tab} ${t?V.activeTab:""}`,onClick:n,"aria-selected":t,children:e})}function Rn({genImTokenId:e}){const{isConnected:t}=te(),n=Ne(),{writeContract:s,isPending:o,data:r}=Te(),{isLoading:i,isSuccess:c}=Ce({hash:r}),u=ce(),h=n===u.id,l=y({label:"imagegen.collect"}),{data:f,error:w,isPending:m,refetch:T}=Ie({...Be,functionName:"getMintStats",args:[e],chainId:u.id}),N=async()=>{if(!t||!h||!f||!Array.isArray(f))return;const[,j]=f;s({...Be,functionName:"mintCollectorNFT",args:[e],value:j})};p.useEffect(()=>{c&&setTimeout(()=>{T()},2e3)},[c,T]);const d=()=>{if(m)return"...";if(w||!f||!Array.isArray(f))return"0";const[j]=f;return j.toString()},x=()=>{if(m||w||!f||!Array.isArray(f))return"Price loading...";const[j,C]=f,v=Ue(C),$=D=>{const L=parseFloat(D);return L>=.001?L.toFixed(3):L>=1e-4?L.toFixed(4):L.toFixed(6)},z=$(v),E=Number(j),A=Math.ceil((E+1)/5)*5,U=C/BigInt(2**Math.floor(E/5))*BigInt(2**Math.floor(A/5)),R=$(Ue(U));return`Current price: ${z} ETH | Price after ${A} mints: ${R} ETH`};return a.jsx("button",{onClick:N,disabled:!t||o||i||!h,className:`${S.actionButton} ${he}`,title:`Collect this NFT (${d()} collected) | ${x()}`,children:o?"ðŸ“¦ Collecting...":c?"âœ… Collected!":`ðŸ“¦ ${l} (${d()})`})}function ct({tokenId:e,onImageClick:t,onNftBurned:n,onListedStatusChanged:s,isHighlighted:o=!1,isPublicView:r=!1,preloadedImageUrl:i,preloadedMetadata:c}){const{writeContract:u,isPending:h,data:l}=Te(),{writeContract:f,isPending:w,data:m}=Te(),[T,N]=p.useState(!1),[d,x]=p.useState({tokenId:e,tokenURI:"",imageUrl:i,metadata:c,isLoading:!i}),[j,C]=p.useState(""),{showToast:v,ToastComponent:$}=et(),z=y({label:"imagegen.listed"}),E=y({label:"imagegen.download"}),A=y({label:"imagegen.delete"}),k=Ze(),U=async I=>{try{if(I.startsWith("file://"))return console.warn("Cannot fetch file:// URLs in browser. Metadata:",I),null;const F=await fetch(I);if(!F.ok)throw new Error(`Failed to fetch metadata: ${F.status}`);return await F.json()}catch(F){return console.error("Error fetching NFT metadata:",F),null}};p.useEffect(()=>{(async()=>{try{x(B=>({...B,isLoading:!0,error:void 0}));const _=await k.readContract({address:M.address,abi:M.abi,functionName:"tokenURI",args:[e]});if(!_&&(i||c)){x(B=>({...B,tokenURI:"",isLoading:!1}));return}let G="";r&&(G=await k.readContract({address:M.address,abi:M.abi,functionName:"ownerOf",args:[e]}),C(G));let ae;if(!r)try{const B=ce();ae=await ve(xe,{...M,functionName:"isTokenListed",args:[e],chainId:B.id})}catch(B){console.warn("Could not load listing status:",B)}let de=c,ue=i;if(_){const B=await U(_);B&&(de=B,ue=B.image)}x({tokenId:e,tokenURI:_,metadata:de,imageUrl:ue,isLoading:!1,isListed:ae})}catch(F){console.error(`Error loading NFT ${e}:`,F),x({tokenId:e,tokenURI:"",imageUrl:i,metadata:c,isLoading:!1,error:`Failed to load NFT #${e}: ${F instanceof Error?F.message:"Unknown error"}`})}})()},[e,r,i,c,k]);const{isLoading:R,isSuccess:D}=Ce({hash:l}),{isLoading:L,isSuccess:W}=Ce({hash:m});p.useEffect(()=>{D&&setTimeout(()=>{n()},1e3)},[D,n]),p.useEffect(()=>{W&&s&&v("Listing status updated successfully!","success")},[W,s,v]);const q=()=>{d.imageUrl&&t({src:d.imageUrl,alt:d.metadata?.name||`Artwork #${d.tokenId}`,title:d.metadata?.name,description:d.metadata?.description})},Y=async()=>{if(d.imageUrl)try{const F=await(await fetch(d.imageUrl)).blob(),_=window.URL.createObjectURL(F),G=document.createElement("a");G.href=_,G.download=`${d.metadata?.name||`Artwork-${d.tokenId}`}.png`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(_)}catch(I){console.error("Download failed:",I),v("Download failed. Please try again.","error")}},Q=async()=>{const F=`https://opensea.io/item/optimism/${M.address}/${d.tokenId}`;try{await navigator.clipboard.writeText(F),v("OpenSea URL copied to clipboard!","success")}catch(_){console.error("Failed to copy URL:",_),window.open(F,"_blank","noopener,noreferrer")}},fe=async()=>{if(!T){N(!0),v(`âš ï¸ Click Delete again to permanently remove "${d.metadata?.name||`Artwork #${d.tokenId}`}"`,"warning"),setTimeout(()=>{N(!1)},5e3);return}N(!1);try{await u({...M,functionName:"burn",args:[d.tokenId]})}catch(I){console.error("Delete failed:",I),v("Failed to delete artwork. Please try again.","error")}},ee=async()=>{if(!s)return;const I=!d.isListed,F=I?"public":"private";try{s(d.tokenId,I),await f({...M,functionName:"setTokenListed",args:[d.tokenId,I]})}catch(_){console.error("Failed to update listing status:",_),s(d.tokenId,!I),v(`Failed to set artwork as ${F}. Please try again.`,"error")}};return a.jsxs("div",{className:`${S.container} ${o?S.highlighted:""} group`,onClick:q,children:[d.isLoading?a.jsxs("div",{className:S.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{className:S.loadingText,children:"Loading artwork..."})]}):d.error?a.jsxs("div",{className:S.errorContainer,children:[a.jsx("div",{className:S.errorBox,children:a.jsx("p",{className:S.errorText,children:d.error})}),a.jsxs("p",{className:S.tokenIdText,children:["ID: ",d.tokenId.toString()]})]}):a.jsxs(a.Fragment,{children:[d.imageUrl?a.jsxs("div",{className:S.imageContainer,children:[a.jsx("img",{src:d.imageUrl,alt:d.metadata?.name||`Artwork #${d.tokenId}`,className:S.image,onError:I=>{const F=I.target;F.style.display="none",F.nextElementSibling.classList.remove("hidden")}}),a.jsx("div",{className:S.imageError,style:{display:"none"},children:"ðŸ“· Image not available"})]}):a.jsx("div",{className:S.imagePlaceholder,children:"ðŸ“· No image available"}),a.jsxs("div",{className:S.cornerBadge,children:["#",d.tokenId.toString()]}),!r&&d.isListed&&a.jsxs("div",{className:S.listedBadge,children:["âœ“ ",z]}),r&&j&&a.jsxs("div",{className:S.ownerBadge,children:["ðŸ‘¤ ",j.slice(0,6),"...",j.slice(-4)]}),a.jsx("div",{className:S.actionsOverlay,children:a.jsxs("div",{className:S.actions,children:[d.imageUrl&&a.jsx("button",{onClick:I=>{I.stopPropagation(),Y()},className:S.compactSecondaryButton,title:`${E} image`,children:"â¬‡ï¸"}),d.imageUrl&&a.jsx("button",{onClick:I=>{I.stopPropagation(),q()},className:S.compactSecondaryButton,title:"View full size",children:"ðŸ”"}),a.jsx("button",{onClick:I=>{I.stopPropagation(),Q()},className:S.compactSecondaryButton,title:"Share artwork",children:"ðŸ“¤"}),!r&&s&&d.isListed!==void 0&&a.jsx("button",{onClick:I=>{I.stopPropagation(),ee()},disabled:w||L,className:S.compactSecondaryButton,title:`${d.isListed?"Make private":"Make public"}`,children:d.isListed?"ðŸ”“":"ðŸ”’"}),r&&a.jsx(Rn,{genImTokenId:d.tokenId}),!r&&a.jsx("button",{onClick:I=>{I.stopPropagation(),fe()},disabled:h||R,className:S.compactSecondaryButton,title:`${A} artwork (permanent)`,style:{backgroundColor:h||R?"rgba(0,0,0,0.3)":"rgba(220, 38, 38, 0.8)",opacity:h||R?.6:1},children:h||R?"â³":"ðŸ—‘ï¸"})]})})]}),$]})}function lt({image:e,onClose:t}){const{showToast:n,ToastComponent:s}=et();p.useEffect(()=>{const r=i=>{i.key==="Escape"&&t()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]);const o=async()=>{try{const i=await(await fetch(e.src)).blob(),c=window.URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=`${e.title||"NFT-image"}.png`,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c)}catch(r){console.error("Download failed:",r),n("Download failed. Please try again.","error")}};return a.jsxs("div",{className:S.modalOverlay,onClick:t,children:[a.jsxs("div",{className:S.modalContent,onClick:r=>r.stopPropagation(),children:[a.jsx("button",{className:S.modalClose,onClick:t,children:"âœ•"}),a.jsx("img",{src:e.src,alt:e.alt,className:S.modalImage}),(e.title||e.description)&&a.jsxs("div",{className:S.modalInfo,children:[e.title&&a.jsx("h3",{className:S.modalTitle,children:e.title}),e.description&&a.jsx("p",{className:S.modalDescription,children:e.description}),a.jsx("div",{className:S.actions,style:{justifyContent:"center",marginTop:"12px"},children:a.jsx("button",{onClick:o,className:`${S.actionButton} ${he}`,children:"â¬‡ï¸ Download Full Size"})})]})]}),s]})}function Ln({newlyCreatedNFT:e,onNewNFTDisplayed:t}){const{address:n,isConnected:s}=te(),o=ce(),[r,i]=p.useState([]),[c,u]=p.useState(!1),[h,l]=p.useState(null),[f,w]=p.useState(null),{data:m,isLoading:T}=Ie({...M,functionName:"balanceOf",args:n?[n]:void 0,chainId:o.id,query:{enabled:!!n&&s}}),N=p.useCallback(async()=>{if(!s||!n){i([]);return}u(!0);try{const C=await ve(xe,{...M,functionName:"balanceOf",args:[n],chainId:o.id});if(!C||C===0n){i([]);return}const v=[];for(let E=0;E<Number(C);E++){const A=(async()=>{try{return await ve(xe,{...M,functionName:"tokenOfOwnerByIndex",args:[n,BigInt(E)],chainId:o.id})}catch(k){return console.error(`Error loading token ID at index ${E}:`,k),0n}})();v.push(A)}const z=(await Promise.all(v)).filter(E=>E>0n).sort((E,A)=>A>E?1:A<E?-1:0);i(z)}catch(C){console.error("Error loading token IDs:",C),i([])}finally{u(!1)}},[s,n]),d=p.useCallback(C=>{l(C),i(v=>v.includes(C)?v:[C,...v]),setTimeout(()=>{l(null),t?.()},5e3)},[t]),x=p.useCallback((C,v)=>{console.log(`NFT ${C} listing status changed to: ${v}`)},[]);p.useEffect(()=>{s&&n&&N()},[n,s,N]),p.useEffect(()=>{e&&d(e.tokenId)},[e,d]);const j=T||c;return s?j&&r.length===0?a.jsxs("div",{className:K.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{children:"Loading your artworks..."})]}):m===0n||!m?a.jsx("div",{className:K.emptyStateContainer,children:a.jsx("p",{className:K.emptyStateText,children:"You haven't created any artworks yet. Use the generator above to create your first one!"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:K.grid,children:r.map((C,v)=>{const $=e?.tokenId===C,z=$?e.imageUrl:void 0,E=$?e.metadata:void 0;return a.jsx(ct,{tokenId:C,onImageClick:w,onNftBurned:()=>N(),onListedStatusChanged:x,isHighlighted:h===C,isPublicView:!1,preloadedImageUrl:z,preloadedMetadata:E},`my-${C}-${v}`)})}),f&&a.jsx(lt,{image:f,onClose:()=>w(null)})]}):a.jsxs("div",{className:K.walletPrompt,children:[a.jsx("h3",{children:"ðŸ”— Connect Your Wallet"}),a.jsx("p",{children:"To view and manage your personal NFT artworks, please connect your wallet using the button above."}),a.jsx("p",{children:"Your artworks are stored on the blockchain and linked to your wallet address."}),a.jsx("p",{style:{marginTop:"1rem",fontSize:"0.9em",opacity:.8},children:"ðŸ’¡ Tip: You can explore public artworks from other users in the â€œAll Public Artworksâ€ tab without connecting your wallet."})]})}function Fn(){const[e,t]=p.useState([]),[n,s]=p.useState(!1),[o,r]=p.useState(null),i=Ze(),c=p.useCallback(async()=>{s(!0);try{const u=await i.readContract({address:M.address,abi:M.abi,functionName:"getAllPublicTokens"});if(!u||u.length===0){t([]);return}const h=u.sort((l,f)=>f>l?1:f<l?-1:0);t(h)}catch(u){console.error("Error loading public token IDs:",u),t([])}finally{s(!1)}},[i]);return p.useEffect(()=>{c()},[c]),n&&e.length===0?a.jsxs("div",{className:K.loadingContainer,children:[a.jsx("div",{className:ie}),a.jsx("p",{children:"Loading public artworks..."})]}):e.length===0?a.jsx("div",{className:K.emptyStateContainer,children:a.jsx("p",{className:K.emptyStateText,children:"No public artworks available yet."})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:K.grid,children:e.map((u,h)=>a.jsx(ct,{tokenId:u,onImageClick:r,onNftBurned:()=>{},isHighlighted:!1,isPublicView:!0},`public-${u}-${h}`))}),o&&a.jsx(lt,{image:o,onClose:()=>r(null)})]})}function _n({newlyCreatedNFT:e,onNewNFTDisplayed:t,activeTab:n,onTabChange:s}={}){const{address:o,isConnected:r}=te(),[i,c]=p.useState(()=>r?"my":"public"),u=n??i,h=s??c,l=Ie({...M,functionName:"balanceOf",args:o?[o]:void 0,chainId:ce().id,query:{enabled:!!o&&r}}),{data:f,refetch:w}=l;p.useEffect(()=>{e&&w&&w()},[e,w]);const m=y({label:"imagegen.myArtworks"}),T=y({label:"imagegen.allPublicArtworks"});return a.jsxs("div",{className:K.container,children:[a.jsx("div",{className:V.container,children:a.jsxs("div",{className:V.tabList,children:[a.jsx(He,{label:r?`${m} (${f?.toString()||"0"})`:m,isActive:u==="my",onClick:()=>h("my")}),a.jsx(He,{label:T,isActive:u==="public",onClick:()=>h("public")})]})}),a.jsx("div",{className:`${V.tabPanel} ${u==="my"?"":V.hiddenPanel}`,children:a.jsx(Ln,{newlyCreatedNFT:e,onNewNFTDisplayed:t})}),a.jsx("div",{className:`${V.tabPanel} ${u==="public"?"":V.hiddenPanel}`,children:a.jsx(Fn,{})})]})}function zn(){const{isConnected:e}=te(),[t,n]=p.useState(null),[s,o]=p.useState(()=>e?"my":"public"),r=(h,l,f)=>{console.log("Image generation succeeded:",{tokenId:h,imageUrl:l,metadata:f}),n({tokenId:h,imageUrl:l,metadata:f}),e&&o("my")},i=h=>{console.error("Image generation failed:",h)},c=()=>{n(null)},u=h=>{o(h)};return a.jsxs("div",{className:Pa,children:[a.jsx(An,{onSuccess:r,onError:i}),a.jsx(_n,{newlyCreatedNFT:t??void 0,onNewNFTDisplayed:c,activeTab:s,onTabChange:u})]})}const $n=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));function Dn(){return"AI Image Generator | fretchen.eu"}const Un=Object.freeze(Object.defineProperty({__proto__:null,title:Dn},Symbol.toStringTag,{value:"Module"})),Jn={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:za}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:_a}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Fa}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:$n}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/layouts/LayoutDefault.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:La}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/imagegen/+title.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Un}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"vike-react-query/__internal/integration/Wrapper",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:Ra}]},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Aa}},FallbackErrorBoundary:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react-query/__internal/integration/FallbackErrorBoundary",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Ea}}};export{Jn as configValuesSerialized};
