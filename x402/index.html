<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/layouts_style-b34a8e57.DymEAzSn.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/layouts_panda-c5b34b81.BnhBPXDx.css">
        <meta charset="UTF-8" />
        
    <title>x402 Facilitator ‚Äî Accept Crypto Payments | fretchen.eu</title><meta property="og:title" content="x402 Facilitator ‚Äî Accept Crypto Payments | fretchen.eu" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Independent x402 facilitator on Optimism and Base. 0.01 USDC flat fee per settlement. Quick start guide, API reference, and interactive USDC approval for sellers. Open source."/><link rel="canonical" href="https://www.fretchen.eu/x402/"/><meta property="og:type" content="article"/><meta property="og:title" content="x402 Facilitator ‚Äî Accept Crypto Payments | fretchen.eu"/><meta property="og:description" content="Independent x402 facilitator on Optimism and Base. 0.01 USDC flat fee per settlement. Quick start guide, API reference, and interactive USDC approval for sellers. Open source."/><meta property="og:url" content="https://www.fretchen.eu/x402/"/><meta name="twitter:card" content="summary_large_image"/><script type="application/ld+json">{"@context":"https://schema.org","@type":"TechArticle","name":"x402 Facilitator ‚Äî Accept Crypto Payments","description":"Independent x402 facilitator on Optimism and Base. 0.01 USDC flat fee per settlement. Quick start guide, API reference, and interactive USDC approval for sellers. Open source.","url":"https://www.fretchen.eu/x402/","author":{"@type":"Person","name":"fretchen","url":"https://www.fretchen.eu"},"about":{"@type":"Thing","name":"x402 Payment Protocol","url":"https://github.com/coinbase/x402"}}</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.fretchen.eu"},{"@type":"ListItem","position":2,"name":"x402 Facilitator","item":"https://www.fretchen.eu/x402/"}]}</script>
<link rel="icon" href="/assets/static/image_3_1fc7cfc7b9e9.Ck5EW_Yn.jpg"/><link rel="canonical" href="https://www.fretchen.eu/x402/"/><link rel="alternate" hrefLang="de" href="https://www.fretchen.eu/de/x402/"/><link rel="alternate" hrefLang="x-default" href="https://www.fretchen.eu/x402/"/><link href="https://mastodon.social/@fretchen" rel="me"/><link href="https://github.com/fretchen" rel="me"/><link href="https://fretchen.bsky.social" rel="me atproto"/><link rel="webmention" href="https://webmention.io/www.fretchen.eu/webmention"/><script defer="" src="https://cloud.umami.is/script.js" data-website-id="e41ae7d9-a536-426d-b40e-f2488b11bf95"></script>
    
    <meta name="description" content="Independent x402 facilitator on Optimism and Base. 0.01 USDC flat fee per settlement. Quick start guide, API reference, and interactive USDC approval for sellers. Open source." /><meta property="og:description" content="Independent x402 facilitator on Optimism and Base. 0.01 USDC flat fee per settlement. Quick start guide, API reference, and interactive USDC approval for sellers. Open source." />
    
  
      </head>
      <body>
        
        <div id="root"><link rel="preload" as="image" href="/assets/static/image_3_1fc7cfc7b9e9.Ck5EW_Yn.jpg"/><div><div id="Appbar" class="w_100% p_token(spacing.xs)_0 d_flex flex-d_row ai_center jc_space-between bd-b_token(borders.light) bg-c_white pos_relative [@media_(max-width:_768px)]:p_token(spacing.xs) [@media_(max-width:_768px)]:gap_token(spacing.sm) [@media_(max-width:_480px)]:gap_token(spacing.xs) [@media_(max-width:_480px)]:p_token(spacing.xs)_token(spacing.sm)"><div class="pos_relative w_100% max-w_1200px d_flex jc_space-between ai_center p_0_token(spacing.md) [@media_(max-width:_768px)]:p_0_token(spacing.sm) [@media_(max-width:_768px)]:max-w_100% [@media_(max-width:_480px)]:p_0_token(spacing.xs)"><div class="d_flex flex-d_row gap_token(spacing.md) ai_center flex_1 [@media_(max-width:_768px)]:ov-x_auto [@media_(max-width:_768px)]:ov-y_hidden [@media_(max-width:_768px)]:gap_token(spacing.sm) [@media_(max-width:_768px)]:w_100% [@media_(max-width:_768px)]:pb_token(spacing.xs) [@media_(max-width:_768px)]:scrs-t_x_mandatory [@media_(max-width:_768px)]:pos_relative [@media_(max-width:_768px)]:z_1 [@media_(max-width:_480px)]:gap_token(spacing.sm)"><div class="flex-sh_0 white-space_nowrap [@media_(max-width:_768px)]:scr-sa_start [@media_(max-width:_768px)]:p_token(spacing.sm)_token(spacing.md) [@media_(max-width:_768px)]:min-w_auto [@media_(max-width:_768px)]:ta_center"><a href="/" class="c_token(colors.primary) hover:bg-c_token(colors.background) ">Welcome</a></div><div class="flex-sh_0 white-space_nowrap [@media_(max-width:_768px)]:scr-sa_start [@media_(max-width:_768px)]:p_token(spacing.sm)_token(spacing.md) [@media_(max-width:_768px)]:min-w_auto [@media_(max-width:_768px)]:ta_center"><a href="/blog" class="c_token(colors.primary) hover:bg-c_token(colors.background) ">Blog</a></div><div class="flex-sh_0 white-space_nowrap [@media_(max-width:_768px)]:scr-sa_start [@media_(max-width:_768px)]:p_token(spacing.sm)_token(spacing.md) [@media_(max-width:_768px)]:min-w_auto [@media_(max-width:_768px)]:ta_center"><a href="/quantum" class="c_token(colors.primary) hover:bg-c_token(colors.background) ">Quantum</a></div><div class="flex-sh_0 white-space_nowrap [@media_(max-width:_768px)]:scr-sa_start [@media_(max-width:_768px)]:p_token(spacing.sm)_token(spacing.md) [@media_(max-width:_768px)]:min-w_auto [@media_(max-width:_768px)]:ta_center"><a href="/lab" class="c_token(colors.primary) hover:bg-c_token(colors.background) ">Lab</a></div></div><div class="d_none [@media_(max-width:_768px)]:d_block [@media_(max-width:_768px)]:pos_absolute [@media_(max-width:_768px)]:top_0 [@media_(max-width:_768px)]:right_0 [@media_(max-width:_768px)]:w_30px [@media_(max-width:_768px)]:h_100% [@media_(max-width:_768px)]:bg_linear-gradient(to_right,_transparent_0%,_rgba(255,255,255,0.9)_70%,_white_100%) [@media_(max-width:_768px)]:pointer-events_none [@media_(max-width:_768px)]:z_2 [@media_(max-width:_768px)]:op_1 [@media_(max-width:_768px)]:trs_opacity_0.3s_ease [@media_(max-width:_768px)]:[&amp;::before]:content_&quot;‚Üí&quot; [@media_(max-width:_768px)]:[&amp;::before]:pos_absolute [@media_(max-width:_768px)]:[&amp;::before]:top_50% [@media_(max-width:_768px)]:[&amp;::before]:right_6px [@media_(max-width:_768px)]:[&amp;::before]:trf_translateY(-50%) [@media_(max-width:_768px)]:[&amp;::before]:fs_12px [@media_(max-width:_768px)]:[&amp;::before]:c_rgba(59,_130,_246,_0.7) [@media_(max-width:_768px)]:[&amp;::before]:fw_bold [@media_(max-width:_768px)]:[&amp;::before]:anim_pulse_2s_ease-in-out_infinite"></div><div class="d_flex ai_center gap_token(spacing.sm) flex-sh_0 [@media_(max-width:_768px)]:gap_token(spacing.xs) [@media_(max-width:_480px)]:gap_token(spacing.xs)"><div class="d_flex ai_center gap_2px p_4px bg-c_gray.100 bdr_6px fs_xs fw_medium" role="group" aria-label="Language selection"><a href="/de/x402/" class="p_4px_8px bdr_4px td_none trs_all_0.2s fs_xs fw_medium [&amp;:hover]:bg-c_gray.200 [&amp;:focus]:ring_2px_solid [&amp;:focus]:ring-c_blue.500 [&amp;:focus]:ring-o_1px c_gray.600" aria-label="Switch to German">DE</a><a href="/x402/" class="p_4px_8px bdr_4px td_none trs_all_0.2s fs_xs fw_medium [&amp;:hover]:bg-c_gray.200 [&amp;:focus]:ring_2px_solid [&amp;:focus]:ring-c_blue.500 [&amp;:focus]:ring-o_1px bg-c_white c_gray.900 fw_semibold bx-sh_0_1px_2px_rgba(0,_0,_0,_0.1)" aria-label="Switch to English" aria-current="page">EN</a></div><div class="pos_relative d_inline-block"><button class="p_8px_16px bg-c_transparent c_brand bd_1px_solid_token(colors.brand) bdr_sm cursor_pointer fw_medium d_flex ai_center gap_xs trs_all_0.2s_ease min-w_120px jc_center hover:bg-c_rgba(59,_130,_246,_0.05) hover:bd-c_#0052a3 hover:c_#0052a3 [@media_(max-width:_768px)]:p_6px_10px [@media_(max-width:_768px)]:fs_13px [@media_(max-width:_768px)]:min-w_auto [@media_(max-width:_768px)]:max-w_none [@media_(max-width:_768px)]:w_auto [@media_(max-width:_768px)]:ml_token(spacing.sm) [@media_(max-width:_480px)]:p_4px_8px [@media_(max-width:_480px)]:fs_12px [@media_(max-width:_480px)]:ml_token(spacing.xs)">Connect Account</button></div></div></div></div><div class="d_flex flex-d_column w_100% p_0_2rem bg-c_gray.50 [@media_(max-width:_768px)]:p_0_1rem [@media_(max-width:_480px)]:p_0_0.5rem"><div id="page-container"><div id="page-content" class="p_token(spacing.md) pb_0 min-h_token(sizes.screen)"><div class="max-w_900px mx_auto px_md w_100%"><h1 class="fs_2xl fw_bold m_0 mb_token(spacing.sm) c_text lh_1.2 [@media_(max-width:_768px)]:fs_xl [@media_(max-width:_480px)]:fs_lg ov_hidden tov_ellipsis wb_break-word hy_auto">x402 Facilitator</h1><div class="[&amp;_h2]:fs_xl [&amp;_h2]:fw_semibold [&amp;_h2]:mt_10 [&amp;_h2]:mb_4 [&amp;_h2]:pb_2 [&amp;_h2]:bd-b_1px_solid_token(colors.border) [&amp;_h3]:fs_lg [&amp;_h3]:fw_semibold [&amp;_h3]:mt_6 [&amp;_h3]:mb_3 [&amp;_p]:mb_4 [&amp;_p]:lh_1.7 [&amp;_ul,_&amp;_ol]:pl_2em [&amp;_ul,_&amp;_ol]:mb_4 [&amp;_li]:mb_2 [&amp;_li]:lh_1.6 [&amp;_a]:c_token(colors.link) [&amp;_a]:td_underline [&amp;_a]:hover:c_token(colors.linkHover) [&amp;_code]:fs_sm [&amp;_code]:bg-c_token(colors.codeBg,_#f3f4f6) [&amp;_code]:p_1px_4px [&amp;_code]:bdr_3px [&amp;_code]:ff_monospace [&amp;_pre]:bg-c_#1e1e1e [&amp;_pre]:c_#d4d4d4 [&amp;_pre]:p_16px [&amp;_pre]:bdr_8px [&amp;_pre]:ov-x_auto [&amp;_pre]:mb_4 [&amp;_pre]:fs_sm [&amp;_pre]:lh_1.5 [&amp;_pre]:[&amp;_code]:bg-c_transparent [&amp;_pre]:[&amp;_code]:p_0 [&amp;_pre]:[&amp;_code]:c_inherit"><p>Accept crypto payments on your API or website with zero integration complexity. This is an independent<!-- --> <a href="https://github.com/coinbase/x402">x402</a> facilitator ‚Äî it handles payment verification and on-chain settlement so you don&#x27;t have to. Status: <span class="d_inline-block p_2px_10px bdr_9999px fs_sm fw_medium bg-c_#f3f4f6 c_#6b7280">‚è≥ checking‚Ä¶</span></p><ul class="li-s_none p_0 mt_4 mb_6 [&amp;_li]:p_6px_0 [&amp;_li]:pl_1.5em [&amp;_li]:pos_relative [&amp;_li]:mb_1 [&amp;_li]:[&amp;::before]:content_&quot;‚úì&quot; [&amp;_li]:[&amp;::before]:pos_absolute [&amp;_li]:[&amp;::before]:left_0 [&amp;_li]:[&amp;::before]:c_#16a34a [&amp;_li]:[&amp;::before]:fw_bold"><li><strong>Only Optimism facilitator</strong> in the x402 ecosystem ‚Äî if you sell on Optimism, this is your facilitator</li><li><strong>0.01 USDC flat fee</strong> per settlement ‚Äî no percentage, no minimums</li><li><strong>Community-first experiment</strong> ‚Äî can we make a sustainable, independent facilitator work? Join us and find out</li><li><strong>Open source</strong>, self-hostable, no vendor lock-in</li><li><strong>Other chains on request</strong> ‚Äî Base support is ready, more can be added if there is interest</li></ul><h2>Quick start</h2><p>Three steps to accept x402 payments on your service:</p><div class="bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_20px mb_4 bg-c_token(colors.codeBg,_#f9fafb)"><h3><span class="d_inline-flex ai_center jc_center w_28px h_28px bdr_9999px bg-c_#2563eb c_white fs_sm fw_bold mr_8px flex-sh_0">1</span> Return a 402 response from your server</h3><p>When a client requests a paid resource without payment, respond with HTTP 402 and your payment requirements. Replace <code>0xYourMerchantAddress</code> with your wallet address and set <code>amount</code> to your price in USDC (6 decimals ‚Äî <code>100000</code> = $0.10).</p><pre><code>// HTTP 402 response body:
{
  &quot;x402Version&quot;: 2,
  &quot;accepts&quot;: [{
    &quot;scheme&quot;: &quot;exact&quot;,
    &quot;network&quot;: &quot;eip155:10&quot;,
    &quot;amount&quot;: &quot;70000&quot;,
    &quot;asset&quot;: &quot;0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85&quot;,
    &quot;payTo&quot;: &quot;0xYourMerchantAddress&quot;,
    &quot;maxTimeoutSeconds&quot;: 60,
    &quot;extra&quot;: { &quot;name&quot;: &quot;USD Coin&quot;, &quot;version&quot;: &quot;2&quot; }
  }],
  &quot;facilitatorUrl&quot;: &quot;https://facilitator.fretchen.eu&quot;
}</code></pre></div><div class="bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_20px mb_4 bg-c_token(colors.codeBg,_#f9fafb)"><h3><span class="d_inline-flex ai_center jc_center w_28px h_28px bdr_9999px bg-c_#2563eb c_white fs_sm fw_bold mr_8px flex-sh_0">2</span> Approve the facilitator for fee collection</h3><p>The facilitator collects a 0.01 USDC fee per settlement via ERC-20 <code>transferFrom</code>. You need a one-time USDC approval. Connect your seller wallet below to check your current approval and set it:</p><div class="bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_20px mb_6 bg-c_token(colors.codeBg,_#f9fafb)"><p class="fs_sm c_#6b7280 ta_center p_12px">Connect your wallet to check and manage your USDC approval for the facilitator.</p></div></div><div class="bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_20px mb_4 bg-c_token(colors.codeBg,_#f9fafb)"><h3><span class="d_inline-flex ai_center jc_center w_28px h_28px bdr_9999px bg-c_#2563eb c_white fs_sm fw_bold mr_8px flex-sh_0">3</span> Verify and settle payments</h3><p>When a client sends a request with a <code>PAYMENT-SIGNATURE</code> header, verify the payment before delivering the resource, then settle it on-chain:</p><pre><code>// 1. Verify payment (before delivering resource)
const verifyRes = await fetch(&quot;https://facilitator.fretchen.eu/verify&quot;, {
  method: &quot;POST&quot;,
  headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
  body: JSON.stringify({ x402Version: 2, scheme: &quot;exact&quot;,
    network: &quot;eip155:10&quot;, payload, details })
});
const { valid } = await verifyRes.json();
if (!valid) return new Response(&quot;Payment invalid&quot;, { status: 402 });

// 2. Deliver your resource
const result = await generateImage(prompt);

// 3. Settle payment (after successful delivery)
await fetch(&quot;https://facilitator.fretchen.eu/settle&quot;, {
  method: &quot;POST&quot;,
  headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
  body: JSON.stringify({ x402Version: 2, scheme: &quot;exact&quot;,
    network: &quot;eip155:10&quot;, payload, details })
});

return new Response(JSON.stringify(result), { status: 200 });</code></pre><p>That&#x27;s it ‚Äî your service now accepts crypto payments. See the<!-- --> <a href="/agent-onboarding">agent onboarding guide</a> for a complete walkthrough.</p></div><h2>Fee model</h2><p>The facilitator charges a <strong>flat 0.01 USDC per settlement</strong>, collected post-settlement via ERC-20<!-- --> <code>transferFrom</code>. There is no percentage fee, no monthly minimum, no hidden costs.</p><h3>Cost comparison</h3><table class="w_100% bd-cl_collapse mb_6 fs_sm [&amp;_th,_&amp;_td]:p_8px_12px [&amp;_th,_&amp;_td]:bd-b_1px_solid_token(colors.border,_#e5e7eb) [&amp;_th,_&amp;_td]:ta_right [&amp;_th:first-child,_&amp;_td:first-child]:ta_left [&amp;_th]:fw_semibold [&amp;_th]:bg-c_token(colors.codeBg,_#f9fafb) [&amp;_tr:last-child_td]:bd-b_none"><thead><tr><th>Your price</th><th>Facilitator fee</th><th>Effective rate</th><th>Stripe (2.9% + $0.30)</th></tr></thead><tbody><tr><td>$0.07</td><td>$0.01</td><td>14.3%</td><td>impossible (below minimum)</td></tr><tr><td>$0.50</td><td>$0.01</td><td>2.0%</td><td>$0.31 (62.9%)</td></tr><tr><td>$1.00</td><td>$0.01</td><td>1.0%</td><td>$0.33 (32.9%)</td></tr><tr><td>$10.00</td><td>$0.01</td><td>0.1%</td><td>$0.59 (5.9%)</td></tr></tbody></table><p>The flat-fee model is especially competitive for micropayments ‚Äî exactly the range where traditional payment processors are prohibitively expensive or unavailable.</p><div class="m_20px_0 p_20px bg-c_#f9fafb bdr_8px bd_1px_solid_#e5e7eb ta_center "><h4 class="fs_16px fw_medium mb_16px c_#374151">Fee Collection Flow</h4><div class="[&amp;_svg]:max-w_100% [&amp;_svg]:h_auto"></div></div><p>The fee amount and facilitator address are advertised in the <code>/supported</code> endpoint under the<!-- --> <code>facilitator_fee</code> extension.</p><h2>How it works</h2><p><a href="https://github.com/coinbase/x402">x402</a> implements the long-dormant<!-- --> <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/402">HTTP 402 Payment Required</a> <!-- -->status code. A resource server (you) responds with payment requirements, the client signs a payment, and the facilitator handles verification and on-chain settlement.</p><div class="m_20px_0 p_20px bg-c_#f9fafb bdr_8px bd_1px_solid_#e5e7eb ta_center "><h4 class="fs_16px fw_medium mb_16px c_#374151">x402 Payment Flow</h4><div class="[&amp;_svg]:max-w_100% [&amp;_svg]:h_auto"></div></div><p>Key properties:</p><ul><li><strong>Stateless</strong> ‚Äî no accounts, sessions, or stored payment details</li><li><strong>HTTP-native</strong> ‚Äî uses standard headers and status codes</li><li><strong>Machine-friendly</strong> ‚Äî AI agents can pay autonomously</li><li><strong>Micropayment-ready</strong> ‚Äî sub-cent network fees on L2</li><li><strong>Gasless for buyers</strong> ‚Äî EIP-3009 authorization, facilitator submits the transaction</li></ul><h2>API reference</h2><p>The facilitator at <code>facilitator.fretchen.eu</code> exposes three endpoints:</p><h3>POST /verify</h3><div class="bg-c_token(colors.codeBg,_#f9fafb) bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_16px mb_4"><p>Validates a signed payment off-chain. Checks signature validity, sufficient balance, correct recipient, and expiration. Call this <strong>before</strong> delivering your resource.</p><pre><code>curl -X POST https://facilitator.fretchen.eu/verify \
  -H &quot;Content-Type: application/json&quot; \
  -d &#x27;{
    &quot;x402Version&quot;: 2,
    &quot;scheme&quot;: &quot;exact&quot;,
    &quot;network&quot;: &quot;eip155:10&quot;,
    &quot;payload&quot;: &quot;&lt;base64-encoded-payment&gt;&quot;,
    &quot;details&quot;: {
      &quot;scheme&quot;: &quot;exact&quot;,
      &quot;network&quot;: &quot;eip155:10&quot;,
      &quot;amount&quot;: &quot;100000&quot;,
      &quot;asset&quot;: &quot;0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85&quot;,
      &quot;payTo&quot;: &quot;0xYourMerchantAddress&quot;
    }
  }&#x27;</code></pre><p>Response: <code>{ &quot;valid&quot;: true }</code> or <code>{ &quot;valid&quot;: false, &quot;invalidReason&quot;: &quot;...&quot; }</code></p></div><h3>POST /settle</h3><div class="bg-c_token(colors.codeBg,_#f9fafb) bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_16px mb_4"><p>Executes the payment on-chain via EIP-3009 <code>transferWithAuthorization</code>. Call this<!-- --> <strong>after</strong> successful verification and resource delivery.</p><pre><code>curl -X POST https://facilitator.fretchen.eu/settle \
  -H &quot;Content-Type: application/json&quot; \
  -d &#x27;{
    &quot;x402Version&quot;: 2,
    &quot;scheme&quot;: &quot;exact&quot;,
    &quot;network&quot;: &quot;eip155:10&quot;,
    &quot;payload&quot;: &quot;&lt;base64-encoded-payment&gt;&quot;,
    &quot;details&quot;: {
      &quot;scheme&quot;: &quot;exact&quot;,
      &quot;network&quot;: &quot;eip155:10&quot;,
      &quot;amount&quot;: &quot;100000&quot;,
      &quot;asset&quot;: &quot;0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85&quot;,
      &quot;payTo&quot;: &quot;0xYourMerchantAddress&quot;
    }
  }&#x27;</code></pre><p>Response: <code>{ &quot;success&quot;: true, &quot;txHash&quot;: &quot;0x...&quot; }</code></p></div><h3>GET /supported</h3><div class="bg-c_token(colors.codeBg,_#f9fafb) bd_1px_solid_token(colors.border,_#e5e7eb) bdr_8px p_16px mb_4"><p>Returns supported networks, payment schemes, and fee configuration.</p><pre><code>curl https://facilitator.fretchen.eu/supported</code></pre><p>Returns a JSON object with <code>kinds</code> (supported network/scheme pairs), <code>extensions</code> (fee configuration), and <code>signers</code> (facilitator addresses per network).</p></div><h3>Payment scheme</h3><p>The facilitator supports the <strong>exact</strong> scheme with ERC-20 tokens (USDC) via<!-- --> <a href="https://eips.ethereum.org/EIPS/eip-3009">EIP-3009</a> <code>transferWithAuthorization</code>. The buyer signs an off-chain authorization ‚Äî no gas required from the buyer. The facilitator submits the transaction on-chain.</p><h2>Full integration example</h2><h3>Buyer-side (TypeScript)</h3><p>Using the official <code>@x402/fetch</code> SDK, a client can pay for any x402 resource automatically:</p><pre><code>import { x402Client, wrapFetchWithPayment } from &quot;@x402/fetch&quot;;
import { registerExactEvmScheme } from &quot;@x402/evm/exact/client&quot;;
import { privateKeyToAccount } from &quot;viem/accounts&quot;;

const signer = privateKeyToAccount(`0x${PRIVATE_KEY}`);
const client = new x402Client();
registerExactEvmScheme(client, { signer });

const fetchWithPayment = wrapFetchWithPayment(fetch, client);

// Payment is handled automatically on 402 response
const response = await fetchWithPayment(
  &quot;https://imagegen-agent.fretchen.eu/genimg&quot;,
  {
    method: &quot;POST&quot;,
    headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
    body: JSON.stringify({ prompt: &quot;A futuristic cityscape&quot; }),
  }
);

const result = await response.json();
console.log(&quot;Image:&quot;, result.imageUrl);
console.log(&quot;NFT:&quot;, result.tokenId);</code></pre><h3>Your server (resource server)</h3><p>Full example of a Node.js endpoint protected by x402. Adapt the resource generation to your use case:</p><pre><code>// Express / Node.js example
app.post(&quot;/api/resource&quot;, async (req, res) =&gt; {
  const paymentHeader = req.headers[&quot;payment-signature&quot;];

  // No payment ‚Üí return 402 with requirements
  if (!paymentHeader) {
    return res.status(402).json({
      x402Version: 2,
      accepts: [{
        scheme: &quot;exact&quot;,
        network: &quot;eip155:10&quot;,
        amount: &quot;70000&quot;,  // 0.07 USDC
        asset: &quot;0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85&quot;,
        payTo: &quot;0xYourMerchantAddress&quot;,
        maxTimeoutSeconds: 60,
        extra: { name: &quot;USD Coin&quot;, version: &quot;2&quot; }
      }],
      facilitatorUrl: &quot;https://facilitator.fretchen.eu&quot;
    });
  }

  // Verify payment
  const payload = paymentHeader;
  const details = { scheme: &quot;exact&quot;, network: &quot;eip155:10&quot;,
    amount: &quot;70000&quot;,
    asset: &quot;0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85&quot;,
    payTo: &quot;0xYourMerchantAddress&quot; };

  const verifyRes = await fetch(&quot;https://facilitator.fretchen.eu/verify&quot;, {
    method: &quot;POST&quot;,
    headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
    body: JSON.stringify({ x402Version: 2, scheme: &quot;exact&quot;,
      network: &quot;eip155:10&quot;, payload, details })
  });

  const { valid, invalidReason } = await verifyRes.json();
  if (!valid) return res.status(402).json({ error: invalidReason });

  // Deliver resource
  const result = await generateYourResource(req.body);

  // Settle payment
  await fetch(&quot;https://facilitator.fretchen.eu/settle&quot;, {
    method: &quot;POST&quot;,
    headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
    body: JSON.stringify({ x402Version: 2, scheme: &quot;exact&quot;,
      network: &quot;eip155:10&quot;, payload, details })
  });

  return res.json(result);
});</code></pre><h2>Supported networks</h2><table class="w_100% bd-cl_collapse mb_6 fs_sm [&amp;_th,_&amp;_td]:p_8px_12px [&amp;_th,_&amp;_td]:bd-b_1px_solid_token(colors.border,_#e5e7eb) [&amp;_th,_&amp;_td]:ta_left [&amp;_th]:fw_semibold [&amp;_th]:bg-c_token(colors.codeBg,_#f9fafb) [&amp;_tr:last-child_td]:bd-b_none"><thead><tr><th>Network</th><th>Chain ID</th><th>USDC address</th><th>Environment</th></tr></thead><tbody><tr><td>Optimism</td><td>eip155:10</td><td><code>0x0b2C‚Ä¶Ff85</code></td><td>Production</td></tr><tr><td>Base</td><td>eip155:8453</td><td><code>0x8335‚Ä¶2913</code></td><td>Production</td></tr><tr><td>OP Sepolia</td><td>eip155:11155420</td><td><code>0x5fd8‚Ä¶30D7</code></td><td>Testnet</td></tr><tr><td>Base Sepolia</td><td>eip155:84532</td><td><code>0x036C‚Ä¶CF7e</code></td><td>Testnet</td></tr></tbody></table><p>All wallets that support WalletConnect work ‚Äî MetaMask, Coinbase Wallet, Rainbow, and others. Your customers need a small amount of USDC on any supported network.</p><h2>What your customers experience</h2><p>When a user interacts with your x402-protected service, the payment flow is invisible and instant:</p><ol><li>They make a request ‚Äî your server responds with the price.</li><li>Their wallet asks them to sign a payment authorization ‚Äî no funds leave yet.</li><li>The signed authorization is sent with the request.</li><li>You deliver the resource.</li><li>The payment settles on-chain ‚Äî they receive the result.</li></ol><p>Each payment is individually signed via <a href="https://eips.ethereum.org/EIPS/eip-3009">EIP-3009</a>. The authorization is bound to a specific amount, recipient, and expiration. The protocol never has blanket access to your customer&#x27;s funds. See the <a href="/imagegen">AI Image Generator</a> for a live example.</p><h2>Links</h2><ul><li><a href="https://github.com/coinbase/x402">x402 specification (Coinbase)</a></li><li><a href="https://docs.cdp.coinbase.com/x402/welcome">x402 documentation</a></li><li><a href="https://github.com/fretchen/fretchen.github.io/tree/main/x402_facilitator">Facilitator source code</a></li><li><a href="/imagegen">AI Image Generator</a> ‚Äî live x402 service using this facilitator</li><li><a href="/agent-onboarding">Agent onboarding</a> ‚Äî build your own x402-protected service</li></ul></div></div></div></div></div><footer class="w_100% p_token(spacing.sm)_0 bd-t_token(borders.light) mt_0 bg-c_white"><div class="max-w_1200px m_0_auto p_0_1rem"><div class="h-card d_flex flex-d_row gap_token(spacing.md) ai_center jc_center flex-wrap_wrap [@media_(max-width:_768px)]:flex-d_column [@media_(max-width:_768px)]:gap_token(spacing.sm)" data-about="https://www.fretchen.eu"><img src="/assets/static/image_3_1fc7cfc7b9e9.Ck5EW_Yn.jpg" alt="fretchen" class="u-photo w_0 h_0 op_0 pos_absolute pointer-events_none"/><div class="fs_sm fw_semibold c_text"><a href="https://www.fretchen.eu" class="p-name u-url c_text td_none hover:td_underline" title="fretchen&#x27;s homepage">fretchen</a></div><span aria-hidden="true">‚Ä¢</span><div class="d_flex gap_token(spacing.md) jc_center flex-wrap_wrap fs_sm"><a href="https://mastodon.social/@fretchen" class="d_flex ai_center gap_2px c_gray.600 td_none trs_color_0.2s fs_xs hover:c_text" rel="me" title="Follow on Mastodon"><span>üêò</span><span>Mastodon</span></a><a href="https://github.com/fretchen" class="d_flex ai_center gap_2px c_gray.600 td_none trs_color_0.2s fs_xs hover:c_text" rel="me" title="Follow on GitHub"><span>üíª</span><span>GitHub</span></a><a href="https://bsky.app/profile/fretchen.eu" class="d_flex ai_center gap_2px c_gray.600 td_none trs_color_0.2s fs_xs hover:c_text" rel="me" title="Follow on Bluesky"><span>ü¶ã</span><span>Bluesky</span></a></div><span aria-hidden="true">‚Ä¢</span><div class="fs_xs c_gray.500 m_0 p_0 bd_none">¬© <!-- -->2026<!-- --> <!-- -->fretchen</div><p class="p-note fs_xs c_gray.600 d_none [@media_(max-width:_768px)]:d_block [@media_(max-width:_768px)]:ta_center [@media_(max-width:_768px)]:w_100%">Exploring Web3, Quantum Mechanics &amp; Decentralized Technologies</p></div></div></footer></div><script class="_rqd_">_rqd_=[];_rqc_=()=>{Array.from(
        document.getElementsByClassName("_rqd_")
      ).forEach((e) => e.remove())};_rqc_()</script></div>
        
        <script id="vike_pageContext" type="application/json">{"_urlRewrite":null,"pageId":"\\/pages\\/x402","routeParams":{}}</script>
        <script id="vike_globalContext" type="application/json">{}</script>
        <script src="/assets/entries/entry-client-routing.Dg0PZWnY.js" type="module" async></script>
        <link rel="modulepreload" href="/assets/entries/pages_x402.JPjAYwqa.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-ncxinpTc.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-t-pXVLBL.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-C76i-jOQ.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-dYGadCQ7.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-Csm-6Eeu.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-eAcusFae.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-Dt3pHpiW.js" as="script" type="text/javascript">
      </body>
    </html>